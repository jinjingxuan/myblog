(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{425:function(t,r,a){t.exports=a.p+"assets/img/layer2.7f1b11ff.png"},426:function(t,r,a){t.exports=a.p+"assets/img/layer.a7af865d.png"},640:function(t,r,a){"use strict";a.r(r);var _=a(14),v=Object(_.a)({},(function(){var t=this,r=t._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"ab-实验"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ab-实验"}},[t._v("#")]),t._v(" AB 实验")]),t._v(" "),r("h2",{attrs:{id:"前言"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),r("p",[t._v("在产品的开发迭代中，如果 pm 有几个非常好的 idea，但是由于我们线上的资源是有限的，所以必须在几个 idea 中做出取舍，那么如何评估几种 idea 的效果，评估的方式有什么呢？")]),t._v(" "),r("ul",[r("li",[r("p",[t._v("内测：用户群有偏差")])]),t._v(" "),r("li",[r("p",[t._v("灰度：用户比例小、干扰因素多，可比性差")])]),t._v(" "),r("li",[r("p",[t._v("A/B test：")]),t._v(" "),r("ul",[r("li",[t._v("普通用户、真实反馈")]),t._v(" "),r("li",[t._v("严格对比、结论可靠")]),t._v(" "),r("li",[t._v("收益量化")])])])]),t._v(" "),r("blockquote",[r("p",[r("strong",[t._v("A/B测试")]),t._v("为一种"),r("a",{attrs:{href:"https://zh.wikipedia.org/w/index.php?title=%E9%9A%A8%E6%A9%9F%E6%B8%AC%E8%A9%A6&action=edit&redlink=1",target:"_blank",rel:"noopener noreferrer"}},[t._v("随机测试"),r("OutboundLink")],1),t._v("，将两个不同的东西（即A和B）进行假设比较。该测试运用"),r("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E7%B5%B1%E8%A8%88%E5%AD%B8",target:"_blank",rel:"noopener noreferrer"}},[t._v("统计学"),r("OutboundLink")],1),t._v("上的"),r("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E5%81%87%E8%A8%AD%E6%AA%A2%E5%AE%9A",target:"_blank",rel:"noopener noreferrer"}},[t._v("假设检定"),r("OutboundLink")],1),t._v("和"),r("a",{attrs:{href:"https://zh.wikipedia.org/w/index.php?title=%E9%9B%99%E6%AF%8D%E9%AB%94%E5%81%87%E8%A8%AD%E6%AA%A2%E5%AE%9A&action=edit&redlink=1",target:"_blank",rel:"noopener noreferrer"}},[t._v("双母体假设检定"),r("OutboundLink")],1),t._v("。 A/B测试可以用来测试某一个变量两个不同版本的差异，一般是让A和B只有该变量不同，再测试其他人对于A和B的反应差异，再判断A和B的方式何者较佳。")])]),t._v(" "),r("h2",{attrs:{id:"a-b实验中的基础知识"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#a-b实验中的基础知识"}},[t._v("#")]),t._v(" A/B实验中的基础知识")]),t._v(" "),r("p",[t._v("在开始进行A/B实验之前需要了解一些关于A/B测试的基础知识，包含"),r("strong",[t._v("流量的分层分流")]),t._v("、"),r("strong",[t._v("正交与互斥、实验分组、AA实验")]),t._v("等。")]),t._v(" "),r("h3",{attrs:{id:"正交与互斥"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#正交与互斥"}},[t._v("#")]),t._v(" 正交与互斥")]),t._v(" "),r("ul",[r("li",[t._v("互斥：是集合的概念，事件A和B的交集为空，A与B就是互斥事件。")]),t._v(" "),r("li",[t._v("正交：是线性代数的概念，若内积空间中两向量的内积为0，则称它们是正交向量。"),r("strong",[t._v("正交矩阵")]),t._v("中所有的列向量、行向量都是正交向量。")])]),t._v(" "),r("hr"),t._v(" "),r("ul",[r("li",[r("p",[t._v("互斥实验："),r("strong",[t._v("实验在同一层拆分流量，且不论如何拆分，不同组的流量是不重叠的。")])])]),t._v(" "),r("li",[r("p",[t._v("正交实验："),r("strong",[t._v("每个独立实验为一层，层与层之间流量是正交的，一份流量穿越每层实验时，都会再次随机打散，且随机效果离散。")])])])]),t._v(" "),r("h3",{attrs:{id:"流量分层分流"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#流量分层分流"}},[t._v("#")]),t._v(" 流量分层分流")]),t._v(" "),r("p",[t._v("Layer: 层，Exp：实验，b：分支")]),t._v(" "),r("p",[r("img",{attrs:{src:a(425),alt:"layer2"}})]),t._v(" "),r("p",[t._v("分层：按照不同的方式将用户分为不同的集合，层与层之间是正交（独立无关联）的关系。")]),t._v(" "),r("p",[t._v("分流：在同一层拆分流量，此时流量是互斥的。")]),t._v(" "),r("p",[r("strong",[t._v("为什么要对实验分层？")])]),t._v(" "),r("blockquote",[r("p",[t._v("如果每日用户活跃量为100000，如果只有两个实验A和实验B，如果流量平分，则每天进入两个实验的人数为50000左右")]),t._v(" "),r("p",[t._v("**如果实验数量变多增加到1000个，如果还是对流量进行平分，则每天进入两个实验的人数为100左右，实验体量太小导致实验结果可信度大幅下降，**此时我们发现流量明显不够用。此时我们在想有没有一种方法可以解决这个问题，那么就是分层。")]),t._v(" "),r("p",[r("strong",[t._v("分层实验有个很重要的概念就是每一层用完的流量进入下一层时，一定会均匀的重新分配。")])])]),t._v(" "),r("p",[t._v("以手机号为例，第一层是按照手机号的倒数第一位分层，分为了 0 - 9 十组实验。第二层是按照倒数第二位分层，也分为了 0 - 9 十组实验。那么那一个用户的手机号是 18201673876 ，将命中第一层的实验 6，第二层的实验7......具体如下图：")]),t._v(" "),r("p",[r("img",{attrs:{src:a(426),alt:"layer"}})]),t._v(" "),r("h2",{attrs:{id:"ab-实验分类"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ab-实验分类"}},[t._v("#")]),t._v(" AB 实验分类")]),t._v(" "),r("h3",{attrs:{id:"分工视角"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#分工视角"}},[t._v("#")]),t._v(" 分工视角")]),t._v(" "),r("ul",[r("li",[t._v("**产品实验：**验证不同策略对产品指标的影响。")]),t._v(" "),r("li",[t._v("**研发实验：**主要是性能调优、资源优化、能力升级等方面验证，但所有此类实验均要围绕产品指标。")])]),t._v(" "),r("h3",{attrs:{id:"随版视角"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#随版视角"}},[t._v("#")]),t._v(" 随版视角")]),t._v(" "),r("ul",[r("li",[t._v("**非随版实验：**一般为后端策略实验，生效时间短，样本收敛时间短，例如：检索召回、排序等。（推荐系统普遍采用"),r("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/424397193",target:"_blank",rel:"noopener noreferrer"}},[t._v("召回+排序"),r("OutboundLink")],1),t._v("的两阶段模型）")]),t._v(" "),r("li",[t._v("**随版本实验：**必须依赖客户端版本发布，冷启生效、样本收敛时间长，例如：端样式修改、端性能调优。")])]),t._v(" "),r("h3",{attrs:{id:"架构视角"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#架构视角"}},[t._v("#")]),t._v(" 架构视角")]),t._v(" "),r("ul",[r("li",[r("strong",[t._v("服务端实验")])]),t._v(" "),r("li",[r("strong",[t._v("客户端实验")])])]),t._v(" "),r("h2",{attrs:{id:"ab-实验生命周期"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ab-实验生命周期"}},[t._v("#")]),t._v(" AB 实验生命周期")]),t._v(" "),r("ol",[r("li",[t._v("抽样阶段：抽取实验组、对照组，并确保各组内用户数据相同人群（用户日志打点信息）")]),t._v(" "),r("li",[t._v("实验阶段：实验组上线新功能，对照组保持现状，在线上运行一段时间。")]),t._v(" "),r("li",[t._v("回归阶段：对比实验组、对照组在实验期间内的各项数据指标，判断新功能是否符合预期。")]),t._v(" "),r("li",[t._v("发布阶段：全量固化新功能效果。")])]),t._v(" "),r("h3",{attrs:{id:"抽样方式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#抽样方式"}},[t._v("#")]),t._v(" 抽样方式")]),t._v(" "),r("ol",[r("li",[t._v("随机抽样：按照一定随机算法先划分实验组及对照组，然后在线上运行一段时间（空转），观察实验组及对照组在这段时间内各项指标是否相同。")]),t._v(" "),r("li",[t._v("正交平衡抽样：根据前段时间的用户的使用历史，圈定出属性相同，且符合实验流量要求的用户，针对这部分用户，划分出实验组及对照组。")])]),t._v(" "),r("blockquote",[r("p",[t._v("正交平衡抽样就是已经正确切分出来实验组和对照组，不需要进行空转。")])]),t._v(" "),r("h2",{attrs:{id:"注意点"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#注意点"}},[t._v("#")]),t._v(" 注意点")]),t._v(" "),r("ul",[r("li",[t._v("人群不同质：AB实验需要切分流量到不同方案，如果不能正确切分，使得分到不同方案的用户群体特征分布一致，那么实验将没有任何意义。")]),t._v(" "),r("li",[t._v("实验不同时：假如实验 A 的作用时间是节日，而实验 B 非节日，那么实验明显对于 B 是不公平的。")]),t._v(" "),r("li",[t._v("没有进行 AA 实验（空转）：AA指的是实验中的各个方案都是一致的，"),r("strong",[t._v("这是为了测试埋点、分流、实验统计的正确性，增加AB实验的实验结论可信度。")])])]),t._v(" "),r("blockquote",[r("p",[t._v("空转是指先抽样，统计关键数据，而不修改页面样式的流程，相当于AA实验。 虽然随机抽样能够保证两份流量的关键指标相差不大，但毕竟存在抽样不均情况。空转可以明显地发现 抽样不均，摒弃掉这部分流量，保证实验数据的变化仅仅是实验本身(样式改变)引起的。")])])])}),[],!1,null,null,null);r.default=v.exports}}]);