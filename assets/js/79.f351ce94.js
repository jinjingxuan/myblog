(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{557:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"web3-js和ethers-js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#web3-js和ethers-js"}},[t._v("#")]),t._v(" web3.js和ethers.js")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("strong",[t._v("对比维度")])]),t._v(" "),s("th",[s("strong",[t._v("web3.js")])]),t._v(" "),s("th",[s("strong",[t._v("ethers.js")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("开发者/维护者")])]),t._v(" "),s("td",[t._v("以太坊基金会")]),t._v(" "),s("td",[t._v("社区驱动（Richard Moore 创建）")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("设计理念")])]),t._v(" "),s("td",[t._v("早期官方库，功能全面")]),t._v(" "),s("td",[t._v("轻量、模块化、安全性优先")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("代码体积")])]),t._v(" "),s("td",[t._v("较大（约 1MB）")]),t._v(" "),s("td",[t._v("更小（约 500KB）")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("API 友好性")])]),t._v(" "),s("td",[t._v("传统回调风格，支持 Promise")]),t._v(" "),s("td",[t._v("原生 Promise + 更简洁的链式调用")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("钱包与私钥处理")])]),t._v(" "),s("td",[t._v("需要依赖外部钱包（如 MetaMask）")]),t._v(" "),s("td",[t._v("内置安全钱包类，可独立管理私钥")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Provider 支持")])]),t._v(" "),s("td",[t._v("需自行配置 HTTP/WebSocket Provider")]),t._v(" "),s("td",[t._v("内置默认 Provider（如 Infura、Alchemy）")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("TypeScript 支持")])]),t._v(" "),s("td",[t._v("支持，但类型定义较旧")]),t._v(" "),s("td",[t._v("原生 TypeScript 开发，类型定义完善")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("树摇（Tree-shaking）")])]),t._v(" "),s("td",[t._v("部分支持")]),t._v(" "),s("td",[t._v("模块化设计，支持按需加载")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("合约交互语法")])]),t._v(" "),s("td",[t._v("基于"),s("code",[t._v("web3.eth.Contract")]),t._v("的较复杂 API")]),t._v(" "),s("td",[t._v("更简洁的"),s("code",[t._v("Contract")]),t._v("方法（如"),s("code",[t._v("contract.functionName()")]),t._v("）")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("错误处理")])]),t._v(" "),s("td",[t._v("错误信息较基础")]),t._v(" "),s("td",[t._v("详细的错误分类与描述")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("社区活跃度")])]),t._v(" "),s("td",[t._v("较高（但更新放缓）")]),t._v(" "),s("td",[t._v("高（持续更新，适配新协议如 EIP-1559）")])])])]),t._v(" "),s("h2",{attrs:{id:"核心功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#核心功能"}},[t._v("#")]),t._v(" 核心功能")]),t._v(" "),s("p",[t._v("两者均为以太坊区块链开发的 JavaScript 库，支持以下操作：")]),t._v(" "),s("ol",[s("li",[t._v("连接以太坊节点（通过 JSON-RPC、Infura、Alchemy 等）。")]),t._v(" "),s("li",[t._v("创建和管理钱包（生成地址、签名交易）。")]),t._v(" "),s("li",[t._v("与智能合约交互（读取数据、发送交易）。")]),t._v(" "),s("li",[t._v("查询区块链数据（余额、交易记录、区块信息）。")])]),t._v(" "),s("h2",{attrs:{id:"主要区别详解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主要区别详解"}},[t._v("#")]),t._v(" 主要区别详解")]),t._v(" "),s("h3",{attrs:{id:"设计哲学"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设计哲学"}},[t._v("#")]),t._v(" 设计哲学")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("web3.js：")]),t._v(" "),s("ul",[s("li",[t._v("作为以太坊官方早期库，覆盖全面功能，但架构较为臃肿。")]),t._v(" "),s("li",[t._v("适合需要直接使用以太坊原生 API 的传统项目。")])])]),t._v(" "),s("li",[s("p",[t._v("ethers.js：")]),t._v(" "),s("ul",[s("li",[t._v("强调轻量化和开发者体验，模块化拆分（如ethers.Wallet、ethers.Contract）。")]),t._v(" "),s("li",[t._v("适合现代 Web 应用（如 React DApp）及对体积敏感的场景。")])])])]),t._v(" "),s("h3",{attrs:{id:"钱包与私钥管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#钱包与私钥管理"}},[t._v("#")]),t._v(" 钱包与私钥管理")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("web3.js：")]),t._v(" "),s("ul",[s("li",[t._v("依赖外部钱包（如 MetaMask）注入的window.ethereum对象。")]),t._v(" "),s("li",[t._v("私钥通常由用户钱包管理，开发者不直接处理。")])])]),t._v(" "),s("li",[s("p",[t._v("ethers.js：")]),t._v(" "),s("ul",[s("li",[t._v("内置Wallet类，可直接安全创建和管理私钥：")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" wallet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ethers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Wallet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRandom")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 离线生成钱包")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("wallet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("privateKey"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 安全存储私钥")]),t._v("\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"provider-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#provider-配置"}},[t._v("#")]),t._v(" Provider 配置")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("web3.js：")]),t._v(" "),s("ul",[s("li",[t._v("需手动指定 Provider：")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" web3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Web3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://mainnet.infura.io/v3/YOUR_KEY"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("ethers.js：")]),t._v(" "),s("ul",[s("li",[t._v("内置默认 Provider（自动连接公开节点，但建议生产环境替换为专用节点）：")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" provider "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ethers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDefaultProvider")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"合约交互示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#合约交互示例"}},[t._v("#")]),t._v(" 合约交互示例")]),t._v(" "),s("ul",[s("li",[t._v("web3.js：")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" contract "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("web3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Contract")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("abi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncontract"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("methods"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("balanceOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userAddress"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("balance")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("balance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[t._v("ethers.js：")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" contract "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ethers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Contract")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" abi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" balance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" contract"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("balanceOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userAddress"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"交易发送"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#交易发送"}},[t._v("#")]),t._v(" 交易发送")]),t._v(" "),s("ul",[s("li",[t._v("web3.js：")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("web3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendTransaction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("from")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" senderAddress"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" receiverAddress"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" web3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toWei")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ether"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[t._v("ethers.js：")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" wallet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ethers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Wallet")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("privateKey"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" wallet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendTransaction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" receiverAddress"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ethers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseEther")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"如何选择"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何选择"}},[t._v("#")]),t._v(" 如何选择？")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("使用 web3.js 的场景：")]),t._v(" "),s("ul",[s("li",[t._v("维护旧项目或依赖 MetaMask 深度集成。")]),t._v(" "),s("li",[t._v("需要直接使用以太坊原生 RPC 方法（如web3.eth.subscribe）。")])])]),t._v(" "),s("li",[s("p",[t._v("使用 ethers.js 的场景：")]),t._v(" "),s("ul",[s("li",[t._v("新建项目，尤其是前端 DApp（React/Vue）。")]),t._v(" "),s("li",[t._v("注重代码简洁性、安全性和轻量化。")]),t._v(" "),s("li",[t._v("需要 TypeScript 支持或树摇优化打包体积。")])])])]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("ul",[s("li",[t._v("web3.js：老牌工具，功能全但稍显笨重，适合传统项目。")]),t._v(" "),s("li",[t._v("ethers.js：现代轻量库，开发体验更佳，推荐新项目首选。两者均能完成以太坊开发核心需求，根据项目需求及团队偏好选择即可。")])])])}),[],!1,null,null,null);s.default=e.exports}}]);