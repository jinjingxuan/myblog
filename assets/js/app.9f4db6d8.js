(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[]]);!function(n){function e(e){for(var r,s,i=e[0],l=e[1],c=e[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(n[r]=l[r]);for(u&&u(e);p.length;)p.shift()();return a.push.apply(a,c||[]),t()}function t(){for(var n,e=0;e<a.length;e++){for(var t=a[e],r=!0,i=1;i<t.length;i++){var l=t[i];0!==o[l]&&(r=!1)}r&&(a.splice(e--,1),n=s(s.s=t[0]))}return n}var r={},o={8:0},a=[];function s(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.e=function(n){var e=[],t=o[n];if(0!==t)if(t)e.push(t[2]);else{var r=new Promise((function(e,r){t=o[n]=[e,r]}));e.push(t[2]=r);var a,i=document.createElement("script");i.charset="utf-8",i.timeout=120,s.nc&&i.setAttribute("nonce",s.nc),i.src=function(n){return s.p+"assets/js/"+({9:"vendors~docsearch"}[n]||n)+"."+{1:"a370845a",2:"08803d47",3:"dcb80023",4:"90bd5023",5:"aac70c1c",6:"cb4a535e",7:"16f464c2",9:"9ef1a0ca",10:"564253ef",11:"141e02ca",12:"c43cf55f",13:"1dee1651",14:"2970adac",15:"47e79098",16:"7f32b066",17:"39279ba9",18:"5420b8ce",19:"c0bf9dd5",20:"cdc096d5",21:"c15da32c",22:"2bbe2c16",23:"eeb36d86",24:"41feb9df",25:"930d64a8",26:"5307a77c",27:"4a948b1f",28:"bbc3bf81",29:"b7a67a8a",30:"330bc25e",31:"25f35abb",32:"a7c33843",33:"d13de414",34:"126d6be8",35:"e963fb93",36:"7cb8c866",37:"b3474fca",38:"eecfa05c",39:"6a80f40a",40:"b0beb471",41:"530597a8",42:"785f9606",43:"e9c9f9f4",44:"be01cfaa",45:"a18f09d2",46:"7458026c",47:"95b924b1",48:"0f18d045",49:"c6955b79",50:"3353848b",51:"afa43e50",52:"7d2ab80d",53:"4374eb9c",54:"600b5fc3",55:"8d7c9286",56:"a2b7aaec",57:"762096ae",58:"617a72f5",59:"945d9369",60:"c72295ad",61:"973e7b17",62:"319a300f",63:"f08654c5",64:"68d2cc61",65:"b1b2a254",66:"531fba3e",67:"c3f68f3a",68:"ffd2b4d9",69:"12142fca",70:"375b5e76",71:"dd79fc2d",72:"d6376070",73:"d40bfbcf",74:"ae8198d7",75:"6c535169",76:"4342f65a",77:"d384c6ce",78:"456c5622",79:"f351ce94",80:"d8f1fdfc",81:"189da1dd",82:"288dce1a",83:"2b313f1f",84:"c0f2d51f",85:"f4395185",86:"51058c54",87:"de8e8b37",88:"18284846",89:"9e892ed0",90:"98585e36",91:"0e7d737f",92:"ef614598",93:"c06259bc",94:"414ae13c",95:"25b3964d",96:"472fa650",97:"6b5c5419",98:"c5925425",99:"b4635e29",100:"c35b9817",101:"c6a8c814",102:"88236ccf",103:"67c936e1",104:"8fc3204b",105:"58194991",106:"40f7a133",107:"8e7a3cbd",108:"85a56101",109:"e8350503",110:"c44ed8f7",111:"1b5062ea",112:"61191925",113:"0a3dc942",114:"bda2b561",115:"adace76f",116:"8b2a6290",117:"c0e5e0cf",118:"6b430d21",119:"5eaa5de1",120:"17910a89",121:"fb6ccf62",122:"a57b91f6",123:"37dd985e",124:"0fddbe5d",125:"65d7027f",126:"c5a821cb",127:"3b3ef1fc",128:"d78bc2aa",129:"51a1a88e",130:"729b0572",131:"ac6f9726",132:"b13e1261",133:"4759f2f2",134:"4ca33894",135:"eee995e6",136:"0dec144e",137:"4f794e1a",138:"287f26dc",139:"9f0c6e77",140:"1c5bf392",141:"18013a51",142:"ad961356",143:"e6d314ef",144:"2c0d38d4",145:"ef4a83a0",146:"629f8b70",147:"b46d65fb",148:"524bf7db",149:"164af466",150:"cc678031",151:"eb336eb5",152:"f0bed21e",153:"37c5472f",154:"028e1db1",155:"d5fd774f",156:"d1d9a355",157:"f9f4ede3",158:"2a231f1b",159:"0d569bfc",160:"89d06450",161:"1918e7a6",162:"d272494d",163:"4fe631fe",164:"40a5d0a3",165:"1a34a9e4",166:"7c784998",167:"8a3d563d",168:"94bc381d",169:"b9cc0fe2",170:"b2cd295c",171:"d59f35fa",172:"5db5ca48",173:"df8bb8d9",174:"67bfb9a4",175:"20444ba4",176:"218dea39",177:"1c8a3d47",178:"4aa5e430",179:"0d2c3f09",180:"cb18eea2",181:"da6e1f74",182:"140f2683",183:"ed45cd62",184:"2c972959",185:"6f4edb76",186:"0907fa31"}[n]+".js"}(n);var l=new Error;a=function(e){i.onerror=i.onload=null,clearTimeout(c);var t=o[n];if(0!==t){if(t){var r=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;l.message="Loading chunk "+n+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,t[1](l)}o[n]=void 0}};var c=setTimeout((function(){a({type:"timeout",target:i})}),12e4);i.onerror=i.onload=a,document.head.appendChild(i)}return Promise.all(e)},s.m=n,s.c=r,s.d=function(n,e,t){s.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},s.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},s.t=function(n,e){if(1&e&&(n=s(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)s.d(t,r,function(e){return n[e]}.bind(null,r));return t},s.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return s.d(e,"a",e),e},s.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},s.p="/myblog/",s.oe=function(n){throw console.error(n),n};var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;a.push([99,0]),t()}([function(n,e,t){"use strict";var r=function(n){return n&&n.Math===Math&&n};n.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof global&&global)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},function(n,e,t){"use strict";var r="object"==typeof document&&document.all;n.exports=void 0===r&&void 0!==r?function(n){return"function"==typeof n||n===r}:function(n){return"function"==typeof n}},function(n,e,t){"use strict";var r=t(24),o=Function.prototype,a=o.call,s=r&&o.bind.bind(a,a);n.exports=r?s:function(n){return function(){return a.apply(n,arguments)}}},function(n,e,t){"use strict";n.exports=function(n){try{return!!n()}catch(n){return!0}}},function(n,e,t){"use strict";var r=t(3);n.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(n,e){var t=Array.isArray;n.exports=t},function(n,e,t){"use strict";var r=t(1);n.exports=function(n){return"object"==typeof n?null!==n:r(n)}},function(n,e,t){var r=t(65),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();n.exports=a},function(n,e,t){"use strict";var r=t(2),o=t(29),a=r({}.hasOwnProperty);n.exports=Object.hasOwn||function(n,e){return a(o(n),e)}},function(n,e,t){var r=t(158),o=t(161);n.exports=function(n,e){var t=o(n,e);return r(t)?t:void 0}},function(n,e){n.exports=function(n){return null!=n&&"object"==typeof n}},function(n,e,t){var r=t(13),o=t(143),a=t(144),s=r?r.toStringTag:void 0;n.exports=function(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":s&&s in Object(n)?o(n):a(n)}},function(n,e,t){"use strict";var r=t(4),o=t(15),a=t(32);n.exports=r?function(n,e,t){return o.f(n,e,a(1,t))}:function(n,e,t){return n[e]=t,n}},function(n,e,t){var r=t(7).Symbol;n.exports=r},function(n,e,t){"use strict";function r(n,e,t,r,o,a,s,i){var l,c="function"==typeof n?n.options:n;if(e&&(c.render=e,c.staticRenderFns=t,c._compiled=!0),r&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),s?(l=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),o&&o.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(s)},c._ssrRegister=l):o&&(l=i?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(n,e){return l.call(e),u(n,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:n,options:c}}t.d(e,"a",(function(){return r}))},function(n,e,t){"use strict";var r=t(4),o=t(60),a=t(96),s=t(45),i=t(51),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor;e.f=r?a?function(n,e,t){if(s(n),e=i(e),s(t),"function"==typeof n&&"prototype"===e&&"value"in t&&"writable"in t&&!t.writable){var r=u(n,e);r&&r.writable&&(n[e]=t.value,t={configurable:"configurable"in t?t.configurable:r.configurable,enumerable:"enumerable"in t?t.enumerable:r.enumerable,writable:!1})}return c(n,e,t)}:c:function(n,e,t){if(s(n),e=i(e),s(t),o)try{return c(n,e,t)}catch(n){}if("get"in t||"set"in t)throw new l("Accessors not supported");return"value"in t&&(n[e]=t.value),n}},function(n,e,t){"use strict";var r=t(2),o=r({}.toString),a=r("".slice);n.exports=function(n){return a(o(n),8,-1)}},function(n,e,t){var r=t(148),o=t(149),a=t(150),s=t(151),i=t(152);function l(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=s,l.prototype.set=i,n.exports=l},function(n,e,t){var r=t(67);n.exports=function(n,e){for(var t=n.length;t--;)if(r(n[t][0],e))return t;return-1}},function(n,e,t){var r=t(9)(Object,"create");n.exports=r},function(n,e,t){var r=t(170);n.exports=function(n,e){var t=n.__data__;return r(e)?t["string"==typeof e?"string":"hash"]:t.map}},function(n,e,t){var r=t(43);n.exports=function(n){if("string"==typeof n||r(n))return n;var e=n+"";return"0"==e&&1/n==-1/0?"-0":e}},function(n,e,t){var r,o;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(o="function"==typeof(r=function(){var n,e,t={version:"0.2.0"},r=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function o(n,e,t){return n<e?e:n>t?t:n}function a(n){return 100*(-1+n)}t.configure=function(n){var e,t;for(e in n)void 0!==(t=n[e])&&n.hasOwnProperty(e)&&(r[e]=t);return this},t.status=null,t.set=function(n){var e=t.isStarted();n=o(n,r.minimum,1),t.status=1===n?null:n;var l=t.render(!e),c=l.querySelector(r.barSelector),u=r.speed,d=r.easing;return l.offsetWidth,s((function(e){""===r.positionUsing&&(r.positionUsing=t.getPositioningCSS()),i(c,function(n,e,t){var o;return(o="translate3d"===r.positionUsing?{transform:"translate3d("+a(n)+"%,0,0)"}:"translate"===r.positionUsing?{transform:"translate("+a(n)+"%,0)"}:{"margin-left":a(n)+"%"}).transition="all "+e+"ms "+t,o}(n,u,d)),1===n?(i(l,{transition:"none",opacity:1}),l.offsetWidth,setTimeout((function(){i(l,{transition:"all "+u+"ms linear",opacity:0}),setTimeout((function(){t.remove(),e()}),u)}),u)):setTimeout(e,u)})),this},t.isStarted=function(){return"number"==typeof t.status},t.start=function(){t.status||t.set(0);var n=function(){setTimeout((function(){t.status&&(t.trickle(),n())}),r.trickleSpeed)};return r.trickle&&n(),this},t.done=function(n){return n||t.status?t.inc(.3+.5*Math.random()).set(1):this},t.inc=function(n){var e=t.status;return e?("number"!=typeof n&&(n=(1-e)*o(Math.random()*e,.1,.95)),e=o(e+n,0,.994),t.set(e)):t.start()},t.trickle=function(){return t.inc(Math.random()*r.trickleRate)},n=0,e=0,t.promise=function(r){return r&&"resolved"!==r.state()?(0===e&&t.start(),n++,e++,r.always((function(){0==--e?(n=0,t.done()):t.set((n-e)/n)})),this):this},t.render=function(n){if(t.isRendered())return document.getElementById("nprogress");c(document.documentElement,"nprogress-busy");var e=document.createElement("div");e.id="nprogress",e.innerHTML=r.template;var o,s=e.querySelector(r.barSelector),l=n?"-100":a(t.status||0),u=document.querySelector(r.parent);return i(s,{transition:"all 0 linear",transform:"translate3d("+l+"%,0,0)"}),r.showSpinner||(o=e.querySelector(r.spinnerSelector))&&p(o),u!=document.body&&c(u,"nprogress-custom-parent"),u.appendChild(e),e},t.remove=function(){u(document.documentElement,"nprogress-busy"),u(document.querySelector(r.parent),"nprogress-custom-parent");var n=document.getElementById("nprogress");n&&p(n)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var n=document.body.style,e="WebkitTransform"in n?"Webkit":"MozTransform"in n?"Moz":"msTransform"in n?"ms":"OTransform"in n?"O":"";return e+"Perspective"in n?"translate3d":e+"Transform"in n?"translate":"margin"};var s=function(){var n=[];function e(){var t=n.shift();t&&t(e)}return function(t){n.push(t),1==n.length&&e()}}(),i=function(){var n=["Webkit","O","Moz","ms"],e={};function t(t){return t=t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(n,e){return e.toUpperCase()})),e[t]||(e[t]=function(e){var t=document.body.style;if(e in t)return e;for(var r,o=n.length,a=e.charAt(0).toUpperCase()+e.slice(1);o--;)if((r=n[o]+a)in t)return r;return e}(t))}function r(n,e,r){e=t(e),n.style[e]=r}return function(n,e){var t,o,a=arguments;if(2==a.length)for(t in e)void 0!==(o=e[t])&&e.hasOwnProperty(t)&&r(n,t,o);else r(n,a[1],a[2])}}();function l(n,e){return("string"==typeof n?n:d(n)).indexOf(" "+e+" ")>=0}function c(n,e){var t=d(n),r=t+e;l(t,e)||(n.className=r.substring(1))}function u(n,e){var t,r=d(n);l(n,e)&&(t=r.replace(" "+e+" "," "),n.className=t.substring(1,t.length-1))}function d(n){return(" "+(n.className||"")+" ").replace(/\s+/gi," ")}function p(n){n&&n.parentNode&&n.parentNode.removeChild(n)}return t})?r.call(e,t,e,n):r)||(n.exports=o)},function(n,e,t){"use strict";var r=t(0),o=t(49).f,a=t(12),s=t(90),i=t(35),l=t(61),c=t(118);n.exports=function(n,e){var t,u,d,p,m,h=n.target,f=n.global,g=n.stat;if(t=f?r:g?r[h]||i(h,{}):r[h]&&r[h].prototype)for(u in e){if(p=e[u],d=n.dontCallGetSet?(m=o(t,u))&&m.value:t[u],!c(f?u:h+(g?".":"#")+u,n.forced)&&void 0!==d){if(typeof p==typeof d)continue;l(p,d)}(n.sham||d&&d.sham)&&a(p,"sham",!0),s(t,u,p,n)}}},function(n,e,t){"use strict";var r=t(3);n.exports=!r((function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}))},function(n,e,t){"use strict";var r=t(46),o=t(33);n.exports=function(n){return r(o(n))}},function(n,e,t){"use strict";var r=t(0),o=t(1),a=function(n){return o(n)?n:void 0};n.exports=function(n,e){return arguments.length<2?a(r[n]):r[n]&&r[n][e]}},function(n,e,t){"use strict";var r=t(1),o=t(105),a=TypeError;n.exports=function(n){if(r(n))return n;throw new a(o(n)+" is not a function")}},function(n,e,t){"use strict";var r=t(0),o=t(57),a=t(8),s=t(59),i=t(55),l=t(54),c=r.Symbol,u=o("wks"),d=l?c.for||c:c&&c.withoutSetter||s;n.exports=function(n){return a(u,n)||(u[n]=i&&a(c,n)?c[n]:d("Symbol."+n)),u[n]}},function(n,e,t){"use strict";var r=t(33),o=Object;n.exports=function(n){return o(r(n))}},function(n,e,t){"use strict";var r=t(116);n.exports=function(n){return r(n.length)}},function(n,e,t){"use strict";var r=t(24),o=Function.prototype.call;n.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},function(n,e,t){"use strict";n.exports=function(n,e){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:e}}},function(n,e,t){"use strict";var r=t(50),o=TypeError;n.exports=function(n){if(r(n))throw new o("Can't call method on "+n);return n}},function(n,e,t){"use strict";var r=t(58),o=t(0),a=t(35),s=n.exports=o["__core-js_shared__"]||a("__core-js_shared__",{});(s.versions||(s.versions=[])).push({version:"3.37.1",mode:r?"pure":"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(n,e,t){"use strict";var r=t(0),o=Object.defineProperty;n.exports=function(n,e){try{o(r,n,{value:e,configurable:!0,writable:!0})}catch(t){r[n]=e}return e}},function(n,e,t){var r=t(142),o=t(10),a=Object.prototype,s=a.hasOwnProperty,i=a.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(n){return o(n)&&s.call(n,"callee")&&!i.call(n,"callee")};n.exports=l},function(n,e,t){var r=t(9)(t(7),"Map");n.exports=r},function(n,e){n.exports=function(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)}},function(n,e,t){var r=t(162),o=t(169),a=t(171),s=t(172),i=t(173);function l(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=s,l.prototype.set=i,n.exports=l},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n){t[++e]=n})),t}},function(n,e){n.exports=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991}},function(n,e,t){var r=t(5),o=t(43),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;n.exports=function(n,e){if(r(n))return!1;var t=typeof n;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=n&&!o(n))||(s.test(n)||!a.test(n)||null!=e&&n in Object(e))}},function(n,e,t){var r=t(11),o=t(10);n.exports=function(n){return"symbol"==typeof n||o(n)&&"[object Symbol]"==r(n)}},function(n,e){n.exports=function(n){return n}},function(n,e,t){"use strict";var r=t(6),o=String,a=TypeError;n.exports=function(n){if(r(n))return n;throw new a(o(n)+" is not an object")}},function(n,e,t){"use strict";var r=t(2),o=t(3),a=t(16),s=Object,i=r("".split);n.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(n){return"String"===a(n)?i(n,""):s(n)}:s},function(n,e,t){"use strict";n.exports={}},function(n,e){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(n,e,t){"use strict";var r=t(4),o=t(31),a=t(101),s=t(32),i=t(25),l=t(51),c=t(8),u=t(60),d=Object.getOwnPropertyDescriptor;e.f=r?d:function(n,e){if(n=i(n),e=l(e),u)try{return d(n,e)}catch(n){}if(c(n,e))return s(!o(a.f,n,e),n[e])}},function(n,e,t){"use strict";n.exports=function(n){return null==n}},function(n,e,t){"use strict";var r=t(102),o=t(52);n.exports=function(n){var e=r(n,"string");return o(e)?e:e+""}},function(n,e,t){"use strict";var r=t(26),o=t(1),a=t(53),s=t(54),i=Object;n.exports=s?function(n){return"symbol"==typeof n}:function(n){var e=r("Symbol");return o(e)&&a(e.prototype,i(n))}},function(n,e,t){"use strict";var r=t(2);n.exports=r({}.isPrototypeOf)},function(n,e,t){"use strict";var r=t(55);n.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(n,e,t){"use strict";var r=t(56),o=t(3),a=t(0).String;n.exports=!!Object.getOwnPropertySymbols&&!o((function(){var n=Symbol("symbol detection");return!a(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(n,e,t){"use strict";var r,o,a=t(0),s=t(103),i=a.process,l=a.Deno,c=i&&i.versions||l&&l.version,u=c&&c.v8;u&&(o=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(o=+r[1]),n.exports=o},function(n,e,t){"use strict";var r=t(34);n.exports=function(n,e){return r[n]||(r[n]=e||{})}},function(n,e,t){"use strict";n.exports=!1},function(n,e,t){"use strict";var r=t(2),o=0,a=Math.random(),s=r(1..toString);n.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+s(++o+a,36)}},function(n,e,t){"use strict";var r=t(4),o=t(3),a=t(95);n.exports=!r&&!o((function(){return 7!==Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(n,e,t){"use strict";var r=t(8),o=t(111),a=t(49),s=t(15);n.exports=function(n,e,t){for(var i=o(e),l=s.f,c=a.f,u=0;u<i.length;u++){var d=i[u];r(n,d)||t&&r(t,d)||l(n,d,c(e,d))}}},function(n,e,t){"use strict";var r=t(115);n.exports=function(n){var e=+n;return e!=e||0===e?0:r(e)}},function(n,e,t){"use strict";var r=t(125),o=t(6),a=t(33),s=t(126);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,e=!1,t={};try{(n=r(Object.prototype,"__proto__","set"))(t,[]),e=t instanceof Array}catch(n){}return function(t,r){return a(t),s(r),o(t)?(e?n(t,r):t.__proto__=r,t):t}}():void 0)},function(n,e){n.exports=function(n,e){for(var t=-1,r=e.length,o=n.length;++t<r;)n[o+t]=e[t];return n}},function(n,e){var t="object"==typeof global&&global&&global.Object===Object&&global;n.exports=t},function(n,e,t){var r=t(17),o=t(153),a=t(154),s=t(155),i=t(156),l=t(157);function c(n){var e=this.__data__=new r(n);this.size=e.size}c.prototype.clear=o,c.prototype.delete=a,c.prototype.get=s,c.prototype.has=i,c.prototype.set=l,n.exports=c},function(n,e){n.exports=function(n,e){return n===e||n!=n&&e!=e}},function(n,e,t){var r=t(11),o=t(38);n.exports=function(n){if(!o(n))return!1;var e=r(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(n,e){var t=Function.prototype.toString;n.exports=function(n){if(null!=n){try{return t.call(n)}catch(n){}try{return n+""}catch(n){}}return""}},function(n,e,t){var r=t(174),o=t(10);n.exports=function n(e,t,a,s,i){return e===t||(null==e||null==t||!o(e)&&!o(t)?e!=e&&t!=t:r(e,t,a,s,n,i))}},function(n,e,t){var r=t(72),o=t(177),a=t(73);n.exports=function(n,e,t,s,i,l){var c=1&t,u=n.length,d=e.length;if(u!=d&&!(c&&d>u))return!1;var p=l.get(n),m=l.get(e);if(p&&m)return p==e&&m==n;var h=-1,f=!0,g=2&t?new r:void 0;for(l.set(n,e),l.set(e,n);++h<u;){var v=n[h],b=e[h];if(s)var y=c?s(b,v,h,e,n,l):s(v,b,h,n,e,l);if(void 0!==y){if(y)continue;f=!1;break}if(g){if(!o(e,(function(n,e){if(!a(g,e)&&(v===n||i(v,n,t,s,l)))return g.push(e)}))){f=!1;break}}else if(v!==b&&!i(v,b,t,s,l)){f=!1;break}}return l.delete(n),l.delete(e),f}},function(n,e,t){var r=t(39),o=t(175),a=t(176);function s(n){var e=-1,t=null==n?0:n.length;for(this.__data__=new r;++e<t;)this.add(n[e])}s.prototype.add=s.prototype.push=o,s.prototype.has=a,n.exports=s},function(n,e){n.exports=function(n,e){return n.has(e)}},function(n,e,t){var r=t(187),o=t(193),a=t(78);n.exports=function(n){return a(n)?r(n):o(n)}},function(n,e,t){(function(n){var r=t(7),o=t(189),a=e&&!e.nodeType&&e,s=a&&"object"==typeof n&&n&&!n.nodeType&&n,i=s&&s.exports===a?r.Buffer:void 0,l=(i?i.isBuffer:void 0)||o;n.exports=l}).call(this,t(48)(n))},function(n,e){var t=/^(?:0|[1-9]\d*)$/;n.exports=function(n,e){var r=typeof n;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&t.test(n))&&n>-1&&n%1==0&&n<e}},function(n,e,t){var r=t(190),o=t(191),a=t(192),s=a&&a.isTypedArray,i=s?o(s):r;n.exports=i},function(n,e,t){var r=t(68),o=t(41);n.exports=function(n){return null!=n&&o(n.length)&&!r(n)}},function(n,e,t){var r=t(9)(t(7),"Set");n.exports=r},function(n,e,t){var r=t(38);n.exports=function(n){return n==n&&!r(n)}},function(n,e){n.exports=function(n,e){return function(t){return null!=t&&(t[n]===e&&(void 0!==e||n in Object(t)))}}},function(n,e,t){var r=t(83),o=t(21);n.exports=function(n,e){for(var t=0,a=(e=r(e,n)).length;null!=n&&t<a;)n=n[o(e[t++])];return t&&t==a?n:void 0}},function(n,e,t){var r=t(5),o=t(42),a=t(204),s=t(207);n.exports=function(n,e){return r(n)?n:o(n,e)?[n]:a(s(n))}},function(n,e,t){},function(n,e,t){},function(n,e,t){var r=t(140),o=t(145),a=t(216),s=t(224),i=t(233),l=t(92),c=a((function(n){var e=l(n);return i(e)&&(e=void 0),s(r(n,1,i,!0),o(e,2))}));n.exports=c},function(n,e,t){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var r=/["'&<>]/;n.exports=function(n){var e,t=""+n,o=r.exec(t);if(!o)return t;var a="",s=0,i=0;for(s=o.index;s<t.length;s++){switch(t.charCodeAt(s)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==s&&(a+=t.substring(i,s)),i=s+1,a+=e}return i!==s?a+t.substring(i,s):a}},function(n,e){var t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,i="object"==typeof global&&global&&global.Object===Object&&global,l="object"==typeof self&&self&&self.Object===Object&&self,c=i||l||Function("return this")(),u=Object.prototype.toString,d=Math.max,p=Math.min,m=function(){return c.Date.now()};function h(n){var e=typeof n;return!!n&&("object"==e||"function"==e)}function f(n){if("number"==typeof n)return n;if(function(n){return"symbol"==typeof n||function(n){return!!n&&"object"==typeof n}(n)&&"[object Symbol]"==u.call(n)}(n))return NaN;if(h(n)){var e="function"==typeof n.valueOf?n.valueOf():n;n=h(e)?e+"":e}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(t,"");var i=o.test(n);return i||a.test(n)?s(n.slice(2),i?2:8):r.test(n)?NaN:+n}n.exports=function(n,e,t){var r,o,a,s,i,l,c=0,u=!1,g=!1,v=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function b(e){var t=r,a=o;return r=o=void 0,c=e,s=n.apply(a,t)}function y(n){return c=n,i=setTimeout(w,e),u?b(n):s}function x(n){var t=n-l;return void 0===l||t>=e||t<0||g&&n-c>=a}function w(){var n=m();if(x(n))return k(n);i=setTimeout(w,function(n){var t=e-(n-l);return g?p(t,a-(n-c)):t}(n))}function k(n){return i=void 0,v&&r?b(n):(r=o=void 0,s)}function j(){var n=m(),t=x(n);if(r=arguments,o=this,l=n,t){if(void 0===i)return y(l);if(g)return i=setTimeout(w,e),b(l)}return void 0===i&&(i=setTimeout(w,e)),s}return e=f(e)||0,h(t)&&(u=!!t.leading,a=(g="maxWait"in t)?d(f(t.maxWait)||0,e):a,v="trailing"in t?!!t.trailing:v),j.cancel=function(){void 0!==i&&clearTimeout(i),c=0,r=l=o=i=void 0},j.flush=function(){return void 0===i?s:k(m())},j}},function(n,e,t){"use strict";var r=t(23),o=t(29),a=t(30),s=t(137),i=t(139);r({target:"Array",proto:!0,arity:1,forced:t(3)((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(n){return n instanceof TypeError}}()},{push:function(n){var e=o(this),t=a(e),r=arguments.length;i(t+r);for(var l=0;l<r;l++)e[t]=arguments[l],t++;return s(e,t),t}})},function(n,e,t){"use strict";var r=t(1),o=t(15),a=t(93),s=t(35);n.exports=function(n,e,t,i){i||(i={});var l=i.enumerable,c=void 0!==i.name?i.name:e;if(r(t)&&a(t,c,i),i.global)l?n[e]=t:s(e,t);else{try{i.unsafe?n[e]&&(l=!0):delete n[e]}catch(n){}l?n[e]=t:o.f(n,e,{value:t,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return n}},function(n,e,t){"use strict";var r=t(131),o=String;n.exports=function(n){if("Symbol"===r(n))throw new TypeError("Cannot convert a Symbol value to a string");return o(n)}},function(n,e){n.exports=function(n){var e=null==n?0:n.length;return e?n[e-1]:void 0}},function(n,e,t){"use strict";var r=t(2),o=t(3),a=t(1),s=t(8),i=t(4),l=t(107).CONFIGURABLE,c=t(108),u=t(109),d=u.enforce,p=u.get,m=String,h=Object.defineProperty,f=r("".slice),g=r("".replace),v=r([].join),b=i&&!o((function(){return 8!==h((function(){}),"length",{value:8}).length})),y=String(String).split("String"),x=n.exports=function(n,e,t){"Symbol("===f(m(e),0,7)&&(e="["+g(m(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!s(n,"name")||l&&n.name!==e)&&(i?h(n,"name",{value:e,configurable:!0}):n.name=e),b&&t&&s(t,"arity")&&n.length!==t.arity&&h(n,"length",{value:t.arity});try{t&&s(t,"constructor")&&t.constructor?i&&h(n,"prototype",{writable:!1}):n.prototype&&(n.prototype=void 0)}catch(n){}var r=d(n);return s(r,"source")||(r.source=v(y,"string"==typeof e?e:"")),n};Function.prototype.toString=x((function(){return a(this)&&p(this).source||c(this)}),"toString")},function(n,e,t){"use strict";n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,e,t){"use strict";var r=t(0),o=t(6),a=r.document,s=o(a)&&o(a.createElement);n.exports=function(n){return s?a.createElement(n):{}}},function(n,e,t){"use strict";var r=t(4),o=t(3);n.exports=r&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(n,e,t){"use strict";var r=t(57),o=t(59),a=r("keys");n.exports=function(n){return a[n]||(a[n]=o(n))}},function(n,e,t){"use strict";var r=t(2),o=t(8),a=t(25),s=t(113).indexOf,i=t(47),l=r([].push);n.exports=function(n,e){var t,r=a(n),c=0,u=[];for(t in r)!o(i,t)&&o(r,t)&&l(u,t);for(;e.length>c;)o(r,t=e[c++])&&(~s(u,t)||l(u,t));return u}},function(n,e,t){n.exports=t(238)},function(n,e,t){"use strict";var r=t(23),o=t(119).left,a=t(120),s=t(56);r({target:"Array",proto:!0,forced:!t(121)&&s>79&&s<83||!a("reduce")},{reduce:function(n){var e=arguments.length;return o(this,n,e,e>1?arguments[1]:void 0)}})},function(n,e,t){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,a=o&&!r.call({1:2},1);e.f=a?function(n){var e=o(this,n);return!!e&&e.enumerable}:r},function(n,e,t){"use strict";var r=t(31),o=t(6),a=t(52),s=t(104),i=t(106),l=t(28),c=TypeError,u=l("toPrimitive");n.exports=function(n,e){if(!o(n)||a(n))return n;var t,l=s(n,u);if(l){if(void 0===e&&(e="default"),t=r(l,n,e),!o(t)||a(t))return t;throw new c("Can't convert object to primitive value")}return void 0===e&&(e="number"),i(n,e)}},function(n,e,t){"use strict";n.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},function(n,e,t){"use strict";var r=t(27),o=t(50);n.exports=function(n,e){var t=n[e];return o(t)?void 0:r(t)}},function(n,e,t){"use strict";var r=String;n.exports=function(n){try{return r(n)}catch(n){return"Object"}}},function(n,e,t){"use strict";var r=t(31),o=t(1),a=t(6),s=TypeError;n.exports=function(n,e){var t,i;if("string"===e&&o(t=n.toString)&&!a(i=r(t,n)))return i;if(o(t=n.valueOf)&&!a(i=r(t,n)))return i;if("string"!==e&&o(t=n.toString)&&!a(i=r(t,n)))return i;throw new s("Can't convert object to primitive value")}},function(n,e,t){"use strict";var r=t(4),o=t(8),a=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,i=o(a,"name"),l=i&&"something"===function(){}.name,c=i&&(!r||r&&s(a,"name").configurable);n.exports={EXISTS:i,PROPER:l,CONFIGURABLE:c}},function(n,e,t){"use strict";var r=t(2),o=t(1),a=t(34),s=r(Function.toString);o(a.inspectSource)||(a.inspectSource=function(n){return s(n)}),n.exports=a.inspectSource},function(n,e,t){"use strict";var r,o,a,s=t(110),i=t(0),l=t(6),c=t(12),u=t(8),d=t(34),p=t(97),m=t(47),h=i.TypeError,f=i.WeakMap;if(s||d.state){var g=d.state||(d.state=new f);g.get=g.get,g.has=g.has,g.set=g.set,r=function(n,e){if(g.has(n))throw new h("Object already initialized");return e.facade=n,g.set(n,e),e},o=function(n){return g.get(n)||{}},a=function(n){return g.has(n)}}else{var v=p("state");m[v]=!0,r=function(n,e){if(u(n,v))throw new h("Object already initialized");return e.facade=n,c(n,v,e),e},o=function(n){return u(n,v)?n[v]:{}},a=function(n){return u(n,v)}}n.exports={set:r,get:o,has:a,enforce:function(n){return a(n)?o(n):r(n,{})},getterFor:function(n){return function(e){var t;if(!l(e)||(t=o(e)).type!==n)throw new h("Incompatible receiver, "+n+" required");return t}}}},function(n,e,t){"use strict";var r=t(0),o=t(1),a=r.WeakMap;n.exports=o(a)&&/native code/.test(String(a))},function(n,e,t){"use strict";var r=t(26),o=t(2),a=t(112),s=t(117),i=t(45),l=o([].concat);n.exports=r("Reflect","ownKeys")||function(n){var e=a.f(i(n)),t=s.f;return t?l(e,t(n)):e}},function(n,e,t){"use strict";var r=t(98),o=t(94).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(n){return r(n,o)}},function(n,e,t){"use strict";var r=t(25),o=t(114),a=t(30),s=function(n){return function(e,t,s){var i=r(e),l=a(i);if(0===l)return!n&&-1;var c,u=o(s,l);if(n&&t!=t){for(;l>u;)if((c=i[u++])!=c)return!0}else for(;l>u;u++)if((n||u in i)&&i[u]===t)return n||u||0;return!n&&-1}};n.exports={includes:s(!0),indexOf:s(!1)}},function(n,e,t){"use strict";var r=t(62),o=Math.max,a=Math.min;n.exports=function(n,e){var t=r(n);return t<0?o(t+e,0):a(t,e)}},function(n,e,t){"use strict";var r=Math.ceil,o=Math.floor;n.exports=Math.trunc||function(n){var e=+n;return(e>0?o:r)(e)}},function(n,e,t){"use strict";var r=t(62),o=Math.min;n.exports=function(n){var e=r(n);return e>0?o(e,9007199254740991):0}},function(n,e,t){"use strict";e.f=Object.getOwnPropertySymbols},function(n,e,t){"use strict";var r=t(3),o=t(1),a=/#|\.prototype\./,s=function(n,e){var t=l[i(n)];return t===u||t!==c&&(o(e)?r(e):!!e)},i=s.normalize=function(n){return String(n).replace(a,".").toLowerCase()},l=s.data={},c=s.NATIVE="N",u=s.POLYFILL="P";n.exports=s},function(n,e,t){"use strict";var r=t(27),o=t(29),a=t(46),s=t(30),i=TypeError,l="Reduce of empty array with no initial value",c=function(n){return function(e,t,c,u){var d=o(e),p=a(d),m=s(d);if(r(t),0===m&&c<2)throw new i(l);var h=n?m-1:0,f=n?-1:1;if(c<2)for(;;){if(h in p){u=p[h],h+=f;break}if(h+=f,n?h<0:m<=h)throw new i(l)}for(;n?h>=0:m>h;h+=f)h in p&&(u=t(u,p[h],h,d));return u}};n.exports={left:c(!1),right:c(!0)}},function(n,e,t){"use strict";var r=t(3);n.exports=function(n,e){var t=[][n];return!!t&&r((function(){t.call(null,e||function(){return 1},1)}))}},function(n,e,t){"use strict";var r=t(0),o=t(16);n.exports="process"===o(r.process)},function(n,e,t){"use strict";var r=t(23),o=t(0),a=t(123),s=t(124),i=o.WebAssembly,l=7!==new Error("e",{cause:7}).cause,c=function(n,e){var t={};t[n]=s(n,e,l),r({global:!0,constructor:!0,arity:1,forced:l},t)},u=function(n,e){if(i&&i[n]){var t={};t[n]=s("WebAssembly."+n,e,l),r({target:"WebAssembly",stat:!0,constructor:!0,arity:1,forced:l},t)}};c("Error",(function(n){return function(e){return a(n,this,arguments)}})),c("EvalError",(function(n){return function(e){return a(n,this,arguments)}})),c("RangeError",(function(n){return function(e){return a(n,this,arguments)}})),c("ReferenceError",(function(n){return function(e){return a(n,this,arguments)}})),c("SyntaxError",(function(n){return function(e){return a(n,this,arguments)}})),c("TypeError",(function(n){return function(e){return a(n,this,arguments)}})),c("URIError",(function(n){return function(e){return a(n,this,arguments)}})),u("CompileError",(function(n){return function(e){return a(n,this,arguments)}})),u("LinkError",(function(n){return function(e){return a(n,this,arguments)}})),u("RuntimeError",(function(n){return function(e){return a(n,this,arguments)}}))},function(n,e,t){"use strict";var r=t(24),o=Function.prototype,a=o.apply,s=o.call;n.exports="object"==typeof Reflect&&Reflect.apply||(r?s.bind(a):function(){return s.apply(a,arguments)})},function(n,e,t){"use strict";var r=t(26),o=t(8),a=t(12),s=t(53),i=t(63),l=t(61),c=t(128),u=t(129),d=t(130),p=t(133),m=t(134),h=t(4),f=t(58);n.exports=function(n,e,t,g){var v=g?2:1,b=n.split("."),y=b[b.length-1],x=r.apply(null,b);if(x){var w=x.prototype;if(!f&&o(w,"cause")&&delete w.cause,!t)return x;var k=r("Error"),j=e((function(n,e){var t=d(g?e:n,void 0),r=g?new x(n):new x;return void 0!==t&&a(r,"message",t),m(r,j,r.stack,2),this&&s(w,this)&&u(r,this,j),arguments.length>v&&p(r,arguments[v]),r}));if(j.prototype=w,"Error"!==y?i?i(j,k):l(j,k,{name:!0}):h&&"stackTraceLimit"in x&&(c(j,x,"stackTraceLimit"),c(j,x,"prepareStackTrace")),l(j,x),!f)try{w.name!==y&&a(w,"name",y),w.constructor=j}catch(n){}return j}}},function(n,e,t){"use strict";var r=t(2),o=t(27);n.exports=function(n,e,t){try{return r(o(Object.getOwnPropertyDescriptor(n,e)[t]))}catch(n){}}},function(n,e,t){"use strict";var r=t(127),o=String,a=TypeError;n.exports=function(n){if(r(n))return n;throw new a("Can't set "+o(n)+" as a prototype")}},function(n,e,t){"use strict";var r=t(6);n.exports=function(n){return r(n)||null===n}},function(n,e,t){"use strict";var r=t(15).f;n.exports=function(n,e,t){t in n||r(n,t,{configurable:!0,get:function(){return e[t]},set:function(n){e[t]=n}})}},function(n,e,t){"use strict";var r=t(1),o=t(6),a=t(63);n.exports=function(n,e,t){var s,i;return a&&r(s=e.constructor)&&s!==t&&o(i=s.prototype)&&i!==t.prototype&&a(n,i),n}},function(n,e,t){"use strict";var r=t(91);n.exports=function(n,e){return void 0===n?arguments.length<2?"":e:r(n)}},function(n,e,t){"use strict";var r=t(132),o=t(1),a=t(16),s=t(28)("toStringTag"),i=Object,l="Arguments"===a(function(){return arguments}());n.exports=r?a:function(n){var e,t,r;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(t=function(n,e){try{return n[e]}catch(n){}}(e=i(n),s))?t:l?a(e):"Object"===(r=a(e))&&o(e.callee)?"Arguments":r}},function(n,e,t){"use strict";var r={};r[t(28)("toStringTag")]="z",n.exports="[object z]"===String(r)},function(n,e,t){"use strict";var r=t(6),o=t(12);n.exports=function(n,e){r(e)&&"cause"in e&&o(n,"cause",e.cause)}},function(n,e,t){"use strict";var r=t(12),o=t(135),a=t(136),s=Error.captureStackTrace;n.exports=function(n,e,t,i){a&&(s?s(n,e):r(n,"stack",o(t,i)))}},function(n,e,t){"use strict";var r=t(2),o=Error,a=r("".replace),s=String(new o("zxcasd").stack),i=/\n\s*at [^:]*:[^\n]*/,l=i.test(s);n.exports=function(n,e){if(l&&"string"==typeof n&&!o.prepareStackTrace)for(;e--;)n=a(n,i,"");return n}},function(n,e,t){"use strict";var r=t(3),o=t(32);n.exports=!r((function(){var n=new Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",o(1,7)),7!==n.stack)}))},function(n,e,t){"use strict";var r=t(4),o=t(138),a=TypeError,s=Object.getOwnPropertyDescriptor,i=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(n){return n instanceof TypeError}}();n.exports=i?function(n,e){if(o(n)&&!s(n,"length").writable)throw new a("Cannot set read only .length");return n.length=e}:function(n,e){return n.length=e}},function(n,e,t){"use strict";var r=t(16);n.exports=Array.isArray||function(n){return"Array"===r(n)}},function(n,e,t){"use strict";var r=TypeError;n.exports=function(n){if(n>9007199254740991)throw r("Maximum allowed index exceeded");return n}},function(n,e,t){var r=t(64),o=t(141);n.exports=function n(e,t,a,s,i){var l=-1,c=e.length;for(a||(a=o),i||(i=[]);++l<c;){var u=e[l];t>0&&a(u)?t>1?n(u,t-1,a,s,i):r(i,u):s||(i[i.length]=u)}return i}},function(n,e,t){var r=t(13),o=t(36),a=t(5),s=r?r.isConcatSpreadable:void 0;n.exports=function(n){return a(n)||o(n)||!!(s&&n&&n[s])}},function(n,e,t){var r=t(11),o=t(10);n.exports=function(n){return o(n)&&"[object Arguments]"==r(n)}},function(n,e,t){var r=t(13),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,i=r?r.toStringTag:void 0;n.exports=function(n){var e=a.call(n,i),t=n[i];try{n[i]=void 0;var r=!0}catch(n){}var o=s.call(n);return r&&(e?n[i]=t:delete n[i]),o}},function(n,e){var t=Object.prototype.toString;n.exports=function(n){return t.call(n)}},function(n,e,t){var r=t(146),o=t(202),a=t(44),s=t(5),i=t(213);n.exports=function(n){return"function"==typeof n?n:null==n?a:"object"==typeof n?s(n)?o(n[0],n[1]):r(n):i(n)}},function(n,e,t){var r=t(147),o=t(201),a=t(81);n.exports=function(n){var e=o(n);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(t){return t===n||r(t,n,e)}}},function(n,e,t){var r=t(66),o=t(70);n.exports=function(n,e,t,a){var s=t.length,i=s,l=!a;if(null==n)return!i;for(n=Object(n);s--;){var c=t[s];if(l&&c[2]?c[1]!==n[c[0]]:!(c[0]in n))return!1}for(;++s<i;){var u=(c=t[s])[0],d=n[u],p=c[1];if(l&&c[2]){if(void 0===d&&!(u in n))return!1}else{var m=new r;if(a)var h=a(d,p,u,n,e,m);if(!(void 0===h?o(p,d,3,a,m):h))return!1}}return!0}},function(n,e){n.exports=function(){this.__data__=[],this.size=0}},function(n,e,t){var r=t(18),o=Array.prototype.splice;n.exports=function(n){var e=this.__data__,t=r(e,n);return!(t<0)&&(t==e.length-1?e.pop():o.call(e,t,1),--this.size,!0)}},function(n,e,t){var r=t(18);n.exports=function(n){var e=this.__data__,t=r(e,n);return t<0?void 0:e[t][1]}},function(n,e,t){var r=t(18);n.exports=function(n){return r(this.__data__,n)>-1}},function(n,e,t){var r=t(18);n.exports=function(n,e){var t=this.__data__,o=r(t,n);return o<0?(++this.size,t.push([n,e])):t[o][1]=e,this}},function(n,e,t){var r=t(17);n.exports=function(){this.__data__=new r,this.size=0}},function(n,e){n.exports=function(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}},function(n,e){n.exports=function(n){return this.__data__.get(n)}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e,t){var r=t(17),o=t(37),a=t(39);n.exports=function(n,e){var t=this.__data__;if(t instanceof r){var s=t.__data__;if(!o||s.length<199)return s.push([n,e]),this.size=++t.size,this;t=this.__data__=new a(s)}return t.set(n,e),this.size=t.size,this}},function(n,e,t){var r=t(68),o=t(159),a=t(38),s=t(69),i=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,p=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=function(n){return!(!a(n)||o(n))&&(r(n)?p:i).test(s(n))}},function(n,e,t){var r,o=t(160),a=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";n.exports=function(n){return!!a&&a in n}},function(n,e,t){var r=t(7)["__core-js_shared__"];n.exports=r},function(n,e){n.exports=function(n,e){return null==n?void 0:n[e]}},function(n,e,t){var r=t(163),o=t(17),a=t(37);n.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||o),string:new r}}},function(n,e,t){var r=t(164),o=t(165),a=t(166),s=t(167),i=t(168);function l(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=s,l.prototype.set=i,n.exports=l},function(n,e,t){var r=t(19);n.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(n,e){n.exports=function(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}},function(n,e,t){var r=t(19),o=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;if(r){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return o.call(e,n)?e[n]:void 0}},function(n,e,t){var r=t(19),o=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;return r?void 0!==e[n]:o.call(e,n)}},function(n,e,t){var r=t(19);n.exports=function(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(n,e,t){var r=t(20);n.exports=function(n){var e=r(this,n).delete(n);return this.size-=e?1:0,e}},function(n,e){n.exports=function(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}},function(n,e,t){var r=t(20);n.exports=function(n){return r(this,n).get(n)}},function(n,e,t){var r=t(20);n.exports=function(n){return r(this,n).has(n)}},function(n,e,t){var r=t(20);n.exports=function(n,e){var t=r(this,n),o=t.size;return t.set(n,e),this.size+=t.size==o?0:1,this}},function(n,e,t){var r=t(66),o=t(71),a=t(178),s=t(181),i=t(197),l=t(5),c=t(75),u=t(77),d="[object Object]",p=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,m,h,f){var g=l(n),v=l(e),b=g?"[object Array]":i(n),y=v?"[object Array]":i(e),x=(b="[object Arguments]"==b?d:b)==d,w=(y="[object Arguments]"==y?d:y)==d,k=b==y;if(k&&c(n)){if(!c(e))return!1;g=!0,x=!1}if(k&&!x)return f||(f=new r),g||u(n)?o(n,e,t,m,h,f):a(n,e,b,t,m,h,f);if(!(1&t)){var j=x&&p.call(n,"__wrapped__"),T=w&&p.call(e,"__wrapped__");if(j||T){var S=j?n.value():n,_=T?e.value():e;return f||(f=new r),h(S,_,t,m,f)}}return!!k&&(f||(f=new r),s(n,e,t,m,h,f))}},function(n,e){n.exports=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}},function(n,e,t){var r=t(13),o=t(179),a=t(67),s=t(71),i=t(180),l=t(40),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;n.exports=function(n,e,t,r,c,d,p){switch(t){case"[object DataView]":if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=e.byteLength||!d(new o(n),new o(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+n,+e);case"[object Error]":return n.name==e.name&&n.message==e.message;case"[object RegExp]":case"[object String]":return n==e+"";case"[object Map]":var m=i;case"[object Set]":var h=1&r;if(m||(m=l),n.size!=e.size&&!h)return!1;var f=p.get(n);if(f)return f==e;r|=2,p.set(n,e);var g=s(m(n),m(e),r,c,d,p);return p.delete(n),g;case"[object Symbol]":if(u)return u.call(n)==u.call(e)}return!1}},function(n,e,t){var r=t(7).Uint8Array;n.exports=r},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n,r){t[++e]=[r,n]})),t}},function(n,e,t){var r=t(182),o=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,a,s,i){var l=1&t,c=r(n),u=c.length;if(u!=r(e).length&&!l)return!1;for(var d=u;d--;){var p=c[d];if(!(l?p in e:o.call(e,p)))return!1}var m=i.get(n),h=i.get(e);if(m&&h)return m==e&&h==n;var f=!0;i.set(n,e),i.set(e,n);for(var g=l;++d<u;){var v=n[p=c[d]],b=e[p];if(a)var y=l?a(b,v,p,e,n,i):a(v,b,p,n,e,i);if(!(void 0===y?v===b||s(v,b,t,a,i):y)){f=!1;break}g||(g="constructor"==p)}if(f&&!g){var x=n.constructor,w=e.constructor;x==w||!("constructor"in n)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(f=!1)}return i.delete(n),i.delete(e),f}},function(n,e,t){var r=t(183),o=t(184),a=t(74);n.exports=function(n){return r(n,a,o)}},function(n,e,t){var r=t(64),o=t(5);n.exports=function(n,e,t){var a=e(n);return o(n)?a:r(a,t(n))}},function(n,e,t){var r=t(185),o=t(186),a=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(n){return null==n?[]:(n=Object(n),r(s(n),(function(e){return a.call(n,e)})))}:o;n.exports=i},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,o=0,a=[];++t<r;){var s=n[t];e(s,t,n)&&(a[o++]=s)}return a}},function(n,e){n.exports=function(){return[]}},function(n,e,t){var r=t(188),o=t(36),a=t(5),s=t(75),i=t(76),l=t(77),c=Object.prototype.hasOwnProperty;n.exports=function(n,e){var t=a(n),u=!t&&o(n),d=!t&&!u&&s(n),p=!t&&!u&&!d&&l(n),m=t||u||d||p,h=m?r(n.length,String):[],f=h.length;for(var g in n)!e&&!c.call(n,g)||m&&("length"==g||d&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||i(g,f))||h.push(g);return h}},function(n,e){n.exports=function(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}},function(n,e){n.exports=function(){return!1}},function(n,e,t){var r=t(11),o=t(41),a=t(10),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,n.exports=function(n){return a(n)&&o(n.length)&&!!s[r(n)]}},function(n,e){n.exports=function(n){return function(e){return n(e)}}},function(n,e,t){(function(n){var r=t(65),o=e&&!e.nodeType&&e,a=o&&"object"==typeof n&&n&&!n.nodeType&&n,s=a&&a.exports===o&&r.process,i=function(){try{var n=a&&a.require&&a.require("util").types;return n||s&&s.binding&&s.binding("util")}catch(n){}}();n.exports=i}).call(this,t(48)(n))},function(n,e,t){var r=t(194),o=t(195),a=Object.prototype.hasOwnProperty;n.exports=function(n){if(!r(n))return o(n);var e=[];for(var t in Object(n))a.call(n,t)&&"constructor"!=t&&e.push(t);return e}},function(n,e){var t=Object.prototype;n.exports=function(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||t)}},function(n,e,t){var r=t(196)(Object.keys,Object);n.exports=r},function(n,e){n.exports=function(n,e){return function(t){return n(e(t))}}},function(n,e,t){var r=t(198),o=t(37),a=t(199),s=t(79),i=t(200),l=t(11),c=t(69),u=c(r),d=c(o),p=c(a),m=c(s),h=c(i),f=l;(r&&"[object DataView]"!=f(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=f(new o)||a&&"[object Promise]"!=f(a.resolve())||s&&"[object Set]"!=f(new s)||i&&"[object WeakMap]"!=f(new i))&&(f=function(n){var e=l(n),t="[object Object]"==e?n.constructor:void 0,r=t?c(t):"";if(r)switch(r){case u:return"[object DataView]";case d:return"[object Map]";case p:return"[object Promise]";case m:return"[object Set]";case h:return"[object WeakMap]"}return e}),n.exports=f},function(n,e,t){var r=t(9)(t(7),"DataView");n.exports=r},function(n,e,t){var r=t(9)(t(7),"Promise");n.exports=r},function(n,e,t){var r=t(9)(t(7),"WeakMap");n.exports=r},function(n,e,t){var r=t(80),o=t(74);n.exports=function(n){for(var e=o(n),t=e.length;t--;){var a=e[t],s=n[a];e[t]=[a,s,r(s)]}return e}},function(n,e,t){var r=t(70),o=t(203),a=t(210),s=t(42),i=t(80),l=t(81),c=t(21);n.exports=function(n,e){return s(n)&&i(e)?l(c(n),e):function(t){var s=o(t,n);return void 0===s&&s===e?a(t,n):r(e,s,3)}}},function(n,e,t){var r=t(82);n.exports=function(n,e,t){var o=null==n?void 0:r(n,e);return void 0===o?t:o}},function(n,e,t){var r=t(205),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=r((function(n){var e=[];return 46===n.charCodeAt(0)&&e.push(""),n.replace(o,(function(n,t,r,o){e.push(r?o.replace(a,"$1"):t||n)})),e}));n.exports=s},function(n,e,t){var r=t(206);n.exports=function(n){var e=r(n,(function(n){return 500===t.size&&t.clear(),n})),t=e.cache;return e}},function(n,e,t){var r=t(39);function o(n,e){if("function"!=typeof n||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var t=function(){var r=arguments,o=e?e.apply(this,r):r[0],a=t.cache;if(a.has(o))return a.get(o);var s=n.apply(this,r);return t.cache=a.set(o,s)||a,s};return t.cache=new(o.Cache||r),t}o.Cache=r,n.exports=o},function(n,e,t){var r=t(208);n.exports=function(n){return null==n?"":r(n)}},function(n,e,t){var r=t(13),o=t(209),a=t(5),s=t(43),i=r?r.prototype:void 0,l=i?i.toString:void 0;n.exports=function n(e){if("string"==typeof e)return e;if(a(e))return o(e,n)+"";if(s(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,o=Array(r);++t<r;)o[t]=e(n[t],t,n);return o}},function(n,e,t){var r=t(211),o=t(212);n.exports=function(n,e){return null!=n&&o(n,e,r)}},function(n,e){n.exports=function(n,e){return null!=n&&e in Object(n)}},function(n,e,t){var r=t(83),o=t(36),a=t(5),s=t(76),i=t(41),l=t(21);n.exports=function(n,e,t){for(var c=-1,u=(e=r(e,n)).length,d=!1;++c<u;){var p=l(e[c]);if(!(d=null!=n&&t(n,p)))break;n=n[p]}return d||++c!=u?d:!!(u=null==n?0:n.length)&&i(u)&&s(p,u)&&(a(n)||o(n))}},function(n,e,t){var r=t(214),o=t(215),a=t(42),s=t(21);n.exports=function(n){return a(n)?r(s(n)):o(n)}},function(n,e){n.exports=function(n){return function(e){return null==e?void 0:e[n]}}},function(n,e,t){var r=t(82);n.exports=function(n){return function(e){return r(e,n)}}},function(n,e,t){var r=t(44),o=t(217),a=t(219);n.exports=function(n,e){return a(o(n,e,r),n+"")}},function(n,e,t){var r=t(218),o=Math.max;n.exports=function(n,e,t){return e=o(void 0===e?n.length-1:e,0),function(){for(var a=arguments,s=-1,i=o(a.length-e,0),l=Array(i);++s<i;)l[s]=a[e+s];s=-1;for(var c=Array(e+1);++s<e;)c[s]=a[s];return c[e]=t(l),r(n,this,c)}}},function(n,e){n.exports=function(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}},function(n,e,t){var r=t(220),o=t(223)(r);n.exports=o},function(n,e,t){var r=t(221),o=t(222),a=t(44),s=o?function(n,e){return o(n,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:a;n.exports=s},function(n,e){n.exports=function(n){return function(){return n}}},function(n,e,t){var r=t(9),o=function(){try{var n=r(Object,"defineProperty");return n({},"",{}),n}catch(n){}}();n.exports=o},function(n,e){var t=Date.now;n.exports=function(n){var e=0,r=0;return function(){var o=t(),a=16-(o-r);if(r=o,a>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}},function(n,e,t){var r=t(72),o=t(225),a=t(230),s=t(73),i=t(231),l=t(40);n.exports=function(n,e,t){var c=-1,u=o,d=n.length,p=!0,m=[],h=m;if(t)p=!1,u=a;else if(d>=200){var f=e?null:i(n);if(f)return l(f);p=!1,u=s,h=new r}else h=e?[]:m;n:for(;++c<d;){var g=n[c],v=e?e(g):g;if(g=t||0!==g?g:0,p&&v==v){for(var b=h.length;b--;)if(h[b]===v)continue n;e&&h.push(v),m.push(g)}else u(h,v,t)||(h!==m&&h.push(v),m.push(g))}return m}},function(n,e,t){var r=t(226);n.exports=function(n,e){return!!(null==n?0:n.length)&&r(n,e,0)>-1}},function(n,e,t){var r=t(227),o=t(228),a=t(229);n.exports=function(n,e,t){return e==e?a(n,e,t):r(n,o,t)}},function(n,e){n.exports=function(n,e,t,r){for(var o=n.length,a=t+(r?1:-1);r?a--:++a<o;)if(e(n[a],a,n))return a;return-1}},function(n,e){n.exports=function(n){return n!=n}},function(n,e){n.exports=function(n,e,t){for(var r=t-1,o=n.length;++r<o;)if(n[r]===e)return r;return-1}},function(n,e){n.exports=function(n,e,t){for(var r=-1,o=null==n?0:n.length;++r<o;)if(t(e,n[r]))return!0;return!1}},function(n,e,t){var r=t(79),o=t(232),a=t(40),s=r&&1/a(new r([,-0]))[1]==1/0?function(n){return new r(n)}:o;n.exports=s},function(n,e){n.exports=function(){}},function(n,e,t){var r=t(78),o=t(10);n.exports=function(n){return o(n)&&r(n)}},function(n,e,t){},function(n,e,t){},function(n,e,t){"use strict";t(84)},function(n,e,t){"use strict";t(85)},function(n,e,t){"use strict";t.r(e);
/*!
 * Vue.js v2.7.16
 * (c) 2014-2023 Evan You
 * Released under the MIT License.
 */
var r=Object.freeze({}),o=Array.isArray;function a(n){return null==n}function s(n){return null!=n}function i(n){return!0===n}function l(n){return"string"==typeof n||"number"==typeof n||"symbol"==typeof n||"boolean"==typeof n}function c(n){return"function"==typeof n}function u(n){return null!==n&&"object"==typeof n}var d=Object.prototype.toString;function p(n){return"[object Object]"===d.call(n)}function m(n){return"[object RegExp]"===d.call(n)}function h(n){var e=parseFloat(String(n));return e>=0&&Math.floor(e)===e&&isFinite(n)}function f(n){return s(n)&&"function"==typeof n.then&&"function"==typeof n.catch}function g(n){return null==n?"":Array.isArray(n)||p(n)&&n.toString===d?JSON.stringify(n,v,2):String(n)}function v(n,e){return e&&e.__v_isRef?e.value:e}function b(n){var e=parseFloat(n);return isNaN(e)?n:e}function y(n,e){for(var t=Object.create(null),r=n.split(","),o=0;o<r.length;o++)t[r[o]]=!0;return e?function(n){return t[n.toLowerCase()]}:function(n){return t[n]}}y("slot,component",!0);var x=y("key,ref,slot,slot-scope,is");function w(n,e){var t=n.length;if(t){if(e===n[t-1])return void(n.length=t-1);var r=n.indexOf(e);if(r>-1)return n.splice(r,1)}}var k=Object.prototype.hasOwnProperty;function j(n,e){return k.call(n,e)}function T(n){var e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}var S=/-(\w)/g,_=T((function(n){return n.replace(S,(function(n,e){return e?e.toUpperCase():""}))})),I=T((function(n){return n.charAt(0).toUpperCase()+n.slice(1)})),P=/\B([A-Z])/g,z=T((function(n){return n.replace(P,"-$1").toLowerCase()}));var C=Function.prototype.bind?function(n,e){return n.bind(e)}:function(n,e){function t(t){var r=arguments.length;return r?r>1?n.apply(e,arguments):n.call(e,t):n.call(e)}return t._length=n.length,t};function E(n,e){e=e||0;for(var t=n.length-e,r=new Array(t);t--;)r[t]=n[t+e];return r}function A(n,e){for(var t in e)n[t]=e[t];return n}function M(n){for(var e={},t=0;t<n.length;t++)n[t]&&A(e,n[t]);return e}function O(n,e,t){}var R=function(n,e,t){return!1},D=function(n){return n};function q(n,e){if(n===e)return!0;var t=u(n),r=u(e);if(!t||!r)return!t&&!r&&String(n)===String(e);try{var o=Array.isArray(n),a=Array.isArray(e);if(o&&a)return n.length===e.length&&n.every((function(n,t){return q(n,e[t])}));if(n instanceof Date&&e instanceof Date)return n.getTime()===e.getTime();if(o||a)return!1;var s=Object.keys(n),i=Object.keys(e);return s.length===i.length&&s.every((function(t){return q(n[t],e[t])}))}catch(n){return!1}}function L(n,e){for(var t=0;t<n.length;t++)if(q(n[t],e))return t;return-1}function N(n){var e=!1;return function(){e||(e=!0,n.apply(this,arguments))}}function B(n,e){return n===e?0===n&&1/n!=1/e:n==n||e==e}var $=["component","directive","filter"],V=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],F={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:R,isReservedAttr:R,isUnknownElement:R,getTagNamespace:O,parsePlatformTagName:D,mustUseProp:R,async:!0,_lifecycleHooks:V},U=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function H(n){var e=(n+"").charCodeAt(0);return 36===e||95===e}function J(n,e,t,r){Object.defineProperty(n,e,{value:t,enumerable:!!r,writable:!0,configurable:!0})}var G=new RegExp("[^".concat(U.source,".$_\\d]"));var W="__proto__"in{},X="undefined"!=typeof window,K=X&&window.navigator.userAgent.toLowerCase(),Z=K&&/msie|trident/.test(K),Y=K&&K.indexOf("msie 9.0")>0,Q=K&&K.indexOf("edge/")>0;K&&K.indexOf("android");var nn=K&&/iphone|ipad|ipod|ios/.test(K);K&&/chrome\/\d+/.test(K),K&&/phantomjs/.test(K);var en,tn=K&&K.match(/firefox\/(\d+)/),rn={}.watch,on=!1;if(X)try{var an={};Object.defineProperty(an,"passive",{get:function(){on=!0}}),window.addEventListener("test-passive",null,an)}catch(n){}var sn=function(){return void 0===en&&(en=!X&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),en},ln=X&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function cn(n){return"function"==typeof n&&/native code/.test(n.toString())}var un,dn="undefined"!=typeof Symbol&&cn(Symbol)&&"undefined"!=typeof Reflect&&cn(Reflect.ownKeys);un="undefined"!=typeof Set&&cn(Set)?Set:function(){function n(){this.set=Object.create(null)}return n.prototype.has=function(n){return!0===this.set[n]},n.prototype.add=function(n){this.set[n]=!0},n.prototype.clear=function(){this.set=Object.create(null)},n}();var pn=null;function mn(n){void 0===n&&(n=null),n||pn&&pn._scope.off(),pn=n,n&&n._scope.on()}var hn=function(){function n(n,e,t,r,o,a,s,i){this.tag=n,this.data=e,this.children=t,this.text=r,this.elm=o,this.ns=void 0,this.context=a,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=i,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(n.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),n}(),fn=function(n){void 0===n&&(n="");var e=new hn;return e.text=n,e.isComment=!0,e};function gn(n){return new hn(void 0,void 0,void 0,String(n))}function vn(n){var e=new hn(n.tag,n.data,n.children&&n.children.slice(),n.text,n.elm,n.context,n.componentOptions,n.asyncFactory);return e.ns=n.ns,e.isStatic=n.isStatic,e.key=n.key,e.isComment=n.isComment,e.fnContext=n.fnContext,e.fnOptions=n.fnOptions,e.fnScopeId=n.fnScopeId,e.asyncMeta=n.asyncMeta,e.isCloned=!0,e}"function"==typeof SuppressedError&&SuppressedError;var bn=0,yn=[],xn=function(){function n(){this._pending=!1,this.id=bn++,this.subs=[]}return n.prototype.addSub=function(n){this.subs.push(n)},n.prototype.removeSub=function(n){this.subs[this.subs.indexOf(n)]=null,this._pending||(this._pending=!0,yn.push(this))},n.prototype.depend=function(e){n.target&&n.target.addDep(this)},n.prototype.notify=function(n){var e=this.subs.filter((function(n){return n}));for(var t=0,r=e.length;t<r;t++){0,e[t].update()}},n}();xn.target=null;var wn=[];function kn(n){wn.push(n),xn.target=n}function jn(){wn.pop(),xn.target=wn[wn.length-1]}var Tn=Array.prototype,Sn=Object.create(Tn);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(n){var e=Tn[n];J(Sn,n,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o,a=e.apply(this,t),s=this.__ob__;switch(n){case"push":case"unshift":o=t;break;case"splice":o=t.slice(2)}return o&&s.observeArray(o),s.dep.notify(),a}))}));var _n=Object.getOwnPropertyNames(Sn),In={},Pn=!0;function zn(n){Pn=n}var Cn={notify:O,depend:O,addSub:O,removeSub:O},En=function(){function n(n,e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),this.value=n,this.shallow=e,this.mock=t,this.dep=t?Cn:new xn,this.vmCount=0,J(n,"__ob__",this),o(n)){if(!t)if(W)n.__proto__=Sn;else for(var r=0,a=_n.length;r<a;r++){J(n,i=_n[r],Sn[i])}e||this.observeArray(n)}else{var s=Object.keys(n);for(r=0;r<s.length;r++){var i;Mn(n,i=s[r],In,void 0,e,t)}}}return n.prototype.observeArray=function(n){for(var e=0,t=n.length;e<t;e++)An(n[e],!1,this.mock)},n}();function An(n,e,t){return n&&j(n,"__ob__")&&n.__ob__ instanceof En?n.__ob__:!Pn||!t&&sn()||!o(n)&&!p(n)||!Object.isExtensible(n)||n.__v_skip||Bn(n)||n instanceof hn?void 0:new En(n,e,t)}function Mn(n,e,t,r,a,s,i){void 0===i&&(i=!1);var l=new xn,c=Object.getOwnPropertyDescriptor(n,e);if(!c||!1!==c.configurable){var u=c&&c.get,d=c&&c.set;u&&!d||t!==In&&2!==arguments.length||(t=n[e]);var p=a?t&&t.__ob__:An(t,!1,s);return Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){var e=u?u.call(n):t;return xn.target&&(l.depend(),p&&(p.dep.depend(),o(e)&&Dn(e))),Bn(e)&&!a?e.value:e},set:function(e){var r=u?u.call(n):t;if(B(r,e)){if(d)d.call(n,e);else{if(u)return;if(!a&&Bn(r)&&!Bn(e))return void(r.value=e);t=e}p=a?e&&e.__ob__:An(e,!1,s),l.notify()}}}),l}}function On(n,e,t){if(!Nn(n)){var r=n.__ob__;return o(n)&&h(e)?(n.length=Math.max(n.length,e),n.splice(e,1,t),r&&!r.shallow&&r.mock&&An(t,!1,!0),t):e in n&&!(e in Object.prototype)?(n[e]=t,t):n._isVue||r&&r.vmCount?t:r?(Mn(r.value,e,t,void 0,r.shallow,r.mock),r.dep.notify(),t):(n[e]=t,t)}}function Rn(n,e){if(o(n)&&h(e))n.splice(e,1);else{var t=n.__ob__;n._isVue||t&&t.vmCount||Nn(n)||j(n,e)&&(delete n[e],t&&t.dep.notify())}}function Dn(n){for(var e=void 0,t=0,r=n.length;t<r;t++)(e=n[t])&&e.__ob__&&e.__ob__.dep.depend(),o(e)&&Dn(e)}function qn(n){return Ln(n,!0),J(n,"__v_isShallow",!0),n}function Ln(n,e){if(!Nn(n)){An(n,e,sn());0}}function Nn(n){return!(!n||!n.__v_isReadonly)}function Bn(n){return!(!n||!0!==n.__v_isRef)}function $n(n,e,t){Object.defineProperty(n,t,{enumerable:!0,configurable:!0,get:function(){var n=e[t];if(Bn(n))return n.value;var r=n&&n.__ob__;return r&&r.dep.depend(),n},set:function(n){var r=e[t];Bn(r)&&!Bn(n)?r.value=n:e[t]=n}})}"".concat("watcher"," callback"),"".concat("watcher"," getter"),"".concat("watcher"," cleanup");var Vn;var Fn=function(){function n(n){void 0===n&&(n=!1),this.detached=n,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Vn,!n&&Vn&&(this.index=(Vn.scopes||(Vn.scopes=[])).push(this)-1)}return n.prototype.run=function(n){if(this.active){var e=Vn;try{return Vn=this,n()}finally{Vn=e}}else 0},n.prototype.on=function(){Vn=this},n.prototype.off=function(){Vn=this.parent},n.prototype.stop=function(n){if(this.active){var e=void 0,t=void 0;for(e=0,t=this.effects.length;e<t;e++)this.effects[e].teardown();for(e=0,t=this.cleanups.length;e<t;e++)this.cleanups[e]();if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!n){var r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this.active=!1}},n}();function Un(n){var e=n._provided,t=n.$parent&&n.$parent._provided;return t===e?n._provided=Object.create(t):e}var Hn=T((function(n){var e="&"===n.charAt(0),t="~"===(n=e?n.slice(1):n).charAt(0),r="!"===(n=t?n.slice(1):n).charAt(0);return{name:n=r?n.slice(1):n,once:t,capture:r,passive:e}}));function Jn(n,e){function t(){var n=t.fns;if(!o(n))return Pe(n,null,arguments,e,"v-on handler");for(var r=n.slice(),a=0;a<r.length;a++)Pe(r[a],null,arguments,e,"v-on handler")}return t.fns=n,t}function Gn(n,e,t,r,o,s){var l,c,u,d;for(l in n)c=n[l],u=e[l],d=Hn(l),a(c)||(a(u)?(a(c.fns)&&(c=n[l]=Jn(c,s)),i(d.once)&&(c=n[l]=o(d.name,c,d.capture)),t(d.name,c,d.capture,d.passive,d.params)):c!==u&&(u.fns=c,n[l]=u));for(l in e)a(n[l])&&r((d=Hn(l)).name,e[l],d.capture)}function Wn(n,e,t){var r;n instanceof hn&&(n=n.data.hook||(n.data.hook={}));var o=n[e];function l(){t.apply(this,arguments),w(r.fns,l)}a(o)?r=Jn([l]):s(o.fns)&&i(o.merged)?(r=o).fns.push(l):r=Jn([o,l]),r.merged=!0,n[e]=r}function Xn(n,e,t,r,o){if(s(e)){if(j(e,t))return n[t]=e[t],o||delete e[t],!0;if(j(e,r))return n[t]=e[r],o||delete e[r],!0}return!1}function Kn(n){return l(n)?[gn(n)]:o(n)?function n(e,t){var r,c,u,d,p=[];for(r=0;r<e.length;r++)a(c=e[r])||"boolean"==typeof c||(u=p.length-1,d=p[u],o(c)?c.length>0&&(Zn((c=n(c,"".concat(t||"","_").concat(r)))[0])&&Zn(d)&&(p[u]=gn(d.text+c[0].text),c.shift()),p.push.apply(p,c)):l(c)?Zn(d)?p[u]=gn(d.text+c):""!==c&&p.push(gn(c)):Zn(c)&&Zn(d)?p[u]=gn(d.text+c.text):(i(e._isVList)&&s(c.tag)&&a(c.key)&&s(t)&&(c.key="__vlist".concat(t,"_").concat(r,"__")),p.push(c)));return p}(n):void 0}function Zn(n){return s(n)&&s(n.text)&&!1===n.isComment}function Yn(n,e){var t,r,a,i,l=null;if(o(n)||"string"==typeof n)for(l=new Array(n.length),t=0,r=n.length;t<r;t++)l[t]=e(n[t],t);else if("number"==typeof n)for(l=new Array(n),t=0;t<n;t++)l[t]=e(t+1,t);else if(u(n))if(dn&&n[Symbol.iterator]){l=[];for(var c=n[Symbol.iterator](),d=c.next();!d.done;)l.push(e(d.value,l.length)),d=c.next()}else for(a=Object.keys(n),l=new Array(a.length),t=0,r=a.length;t<r;t++)i=a[t],l[t]=e(n[i],i,t);return s(l)||(l=[]),l._isVList=!0,l}function Qn(n,e,t,r){var o,a=this.$scopedSlots[n];a?(t=t||{},r&&(t=A(A({},r),t)),o=a(t)||(c(e)?e():e)):o=this.$slots[n]||(c(e)?e():e);var s=t&&t.slot;return s?this.$createElement("template",{slot:s},o):o}function ne(n){return Et(this.$options,"filters",n,!0)||D}function ee(n,e){return o(n)?-1===n.indexOf(e):n!==e}function te(n,e,t,r,o){var a=F.keyCodes[e]||t;return o&&r&&!F.keyCodes[e]?ee(o,r):a?ee(a,n):r?z(r)!==e:void 0===n}function re(n,e,t,r,a){if(t)if(u(t)){o(t)&&(t=M(t));var s=void 0,i=function(o){if("class"===o||"style"===o||x(o))s=n;else{var i=n.attrs&&n.attrs.type;s=r||F.mustUseProp(e,i,o)?n.domProps||(n.domProps={}):n.attrs||(n.attrs={})}var l=_(o),c=z(o);l in s||c in s||(s[o]=t[o],a&&((n.on||(n.on={}))["update:".concat(o)]=function(n){t[o]=n}))};for(var l in t)i(l)}else;return n}function oe(n,e){var t=this._staticTrees||(this._staticTrees=[]),r=t[n];return r&&!e||se(r=t[n]=this.$options.staticRenderFns[n].call(this._renderProxy,this._c,this),"__static__".concat(n),!1),r}function ae(n,e,t){return se(n,"__once__".concat(e).concat(t?"_".concat(t):""),!0),n}function se(n,e,t){if(o(n))for(var r=0;r<n.length;r++)n[r]&&"string"!=typeof n[r]&&ie(n[r],"".concat(e,"_").concat(r),t);else ie(n,e,t)}function ie(n,e,t){n.isStatic=!0,n.key=e,n.isOnce=t}function le(n,e){if(e)if(p(e)){var t=n.on=n.on?A({},n.on):{};for(var r in e){var o=t[r],a=e[r];t[r]=o?[].concat(o,a):a}}else;return n}function ce(n,e,t,r){e=e||{$stable:!t};for(var a=0;a<n.length;a++){var s=n[a];o(s)?ce(s,e,t):s&&(s.proxy&&(s.fn.proxy=!0),e[s.key]=s.fn)}return r&&(e.$key=r),e}function ue(n,e){for(var t=0;t<e.length;t+=2){var r=e[t];"string"==typeof r&&r&&(n[e[t]]=e[t+1])}return n}function de(n,e){return"string"==typeof n?e+n:n}function pe(n){n._o=ae,n._n=b,n._s=g,n._l=Yn,n._t=Qn,n._q=q,n._i=L,n._m=oe,n._f=ne,n._k=te,n._b=re,n._v=gn,n._e=fn,n._u=ce,n._g=le,n._d=ue,n._p=de}function me(n,e){if(!n||!n.length)return{};for(var t={},r=0,o=n.length;r<o;r++){var a=n[r],s=a.data;if(s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,a.context!==e&&a.fnContext!==e||!s||null==s.slot)(t.default||(t.default=[])).push(a);else{var i=s.slot,l=t[i]||(t[i]=[]);"template"===a.tag?l.push.apply(l,a.children||[]):l.push(a)}}for(var c in t)t[c].every(he)&&delete t[c];return t}function he(n){return n.isComment&&!n.asyncFactory||" "===n.text}function fe(n){return n.isComment&&n.asyncFactory}function ge(n,e,t,o){var a,s=Object.keys(t).length>0,i=e?!!e.$stable:!s,l=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(i&&o&&o!==r&&l===o.$key&&!s&&!o.$hasNormal)return o;for(var c in a={},e)e[c]&&"$"!==c[0]&&(a[c]=ve(n,t,c,e[c]))}else a={};for(var u in t)u in a||(a[u]=be(t,u));return e&&Object.isExtensible(e)&&(e._normalized=a),J(a,"$stable",i),J(a,"$key",l),J(a,"$hasNormal",s),a}function ve(n,e,t,r){var a=function(){var e=pn;mn(n);var t=arguments.length?r.apply(null,arguments):r({}),a=(t=t&&"object"==typeof t&&!o(t)?[t]:Kn(t))&&t[0];return mn(e),t&&(!a||1===t.length&&a.isComment&&!fe(a))?void 0:t};return r.proxy&&Object.defineProperty(e,t,{get:a,enumerable:!0,configurable:!0}),a}function be(n,e){return function(){return n[e]}}function ye(n){return{get attrs(){if(!n._attrsProxy){var e=n._attrsProxy={};J(e,"_v_attr_proxy",!0),xe(e,n.$attrs,r,n,"$attrs")}return n._attrsProxy},get listeners(){n._listenersProxy||xe(n._listenersProxy={},n.$listeners,r,n,"$listeners");return n._listenersProxy},get slots(){return function(n){n._slotsProxy||ke(n._slotsProxy={},n.$scopedSlots);return n._slotsProxy}(n)},emit:C(n.$emit,n),expose:function(e){e&&Object.keys(e).forEach((function(t){return $n(n,e,t)}))}}}function xe(n,e,t,r,o){var a=!1;for(var s in e)s in n?e[s]!==t[s]&&(a=!0):(a=!0,we(n,s,r,o));for(var s in n)s in e||(a=!0,delete n[s]);return a}function we(n,e,t,r){Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){return t[r][e]}})}function ke(n,e){for(var t in e)n[t]=e[t];for(var t in n)t in e||delete n[t]}var je=null;function Te(n,e){return(n.__esModule||dn&&"Module"===n[Symbol.toStringTag])&&(n=n.default),u(n)?e.extend(n):n}function Se(n){if(o(n))for(var e=0;e<n.length;e++){var t=n[e];if(s(t)&&(s(t.componentOptions)||fe(t)))return t}}function _e(n,e,t,r,d,p){return(o(t)||l(t))&&(d=r,r=t,t=void 0),i(p)&&(d=2),function(n,e,t,r,l){if(s(t)&&s(t.__ob__))return fn();s(t)&&s(t.is)&&(e=t.is);if(!e)return fn();0;o(r)&&c(r[0])&&((t=t||{}).scopedSlots={default:r[0]},r.length=0);2===l?r=Kn(r):1===l&&(r=function(n){for(var e=0;e<n.length;e++)if(o(n[e]))return Array.prototype.concat.apply([],n);return n}(r));var d,p;if("string"==typeof e){var m=void 0;p=n.$vnode&&n.$vnode.ns||F.getTagNamespace(e),d=F.isReservedTag(e)?new hn(F.parsePlatformTagName(e),t,r,void 0,void 0,n):t&&t.pre||!s(m=Et(n.$options,"components",e))?new hn(e,t,r,void 0,void 0,n):wt(m,t,n,r,e)}else d=wt(e,t,n,r);return o(d)?d:s(d)?(s(p)&&function n(e,t,r){e.ns=t,"foreignObject"===e.tag&&(t=void 0,r=!0);if(s(e.children))for(var o=0,l=e.children.length;o<l;o++){var c=e.children[o];s(c.tag)&&(a(c.ns)||i(r)&&"svg"!==c.tag)&&n(c,t,r)}}(d,p),s(t)&&function(n){u(n.style)&&Fe(n.style);u(n.class)&&Fe(n.class)}(t),d):fn()}(n,e,t,r,d)}function Ie(n,e,t){kn();try{if(e)for(var r=e;r=r.$parent;){var o=r.$options.errorCaptured;if(o)for(var a=0;a<o.length;a++)try{if(!1===o[a].call(r,n,e,t))return}catch(n){ze(n,r,"errorCaptured hook")}}ze(n,e,t)}finally{jn()}}function Pe(n,e,t,r,o){var a;try{(a=t?n.apply(e,t):n.call(e))&&!a._isVue&&f(a)&&!a._handled&&(a.catch((function(n){return Ie(n,r,o+" (Promise/async)")})),a._handled=!0)}catch(n){Ie(n,r,o)}return a}function ze(n,e,t){if(F.errorHandler)try{return F.errorHandler.call(null,n,e,t)}catch(e){e!==n&&Ce(e,null,"config.errorHandler")}Ce(n,e,t)}function Ce(n,e,t){if(!X||"undefined"==typeof console)throw n;console.error(n)}var Ee,Ae=!1,Me=[],Oe=!1;function Re(){Oe=!1;var n=Me.slice(0);Me.length=0;for(var e=0;e<n.length;e++)n[e]()}if("undefined"!=typeof Promise&&cn(Promise)){var De=Promise.resolve();Ee=function(){De.then(Re),nn&&setTimeout(O)},Ae=!0}else if(Z||"undefined"==typeof MutationObserver||!cn(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Ee="undefined"!=typeof setImmediate&&cn(setImmediate)?function(){setImmediate(Re)}:function(){setTimeout(Re,0)};else{var qe=1,Le=new MutationObserver(Re),Ne=document.createTextNode(String(qe));Le.observe(Ne,{characterData:!0}),Ee=function(){qe=(qe+1)%2,Ne.data=String(qe)},Ae=!0}function Be(n,e){var t;if(Me.push((function(){if(n)try{n.call(e)}catch(n){Ie(n,e,"nextTick")}else t&&t(e)})),Oe||(Oe=!0,Ee()),!n&&"undefined"!=typeof Promise)return new Promise((function(n){t=n}))}function $e(n){return function(e,t){if(void 0===t&&(t=pn),t)return function(n,e,t){var r=n.$options;r[e]=It(r[e],t)}(t,n,e)}}$e("beforeMount"),$e("mounted"),$e("beforeUpdate"),$e("updated"),$e("beforeDestroy"),$e("destroyed"),$e("activated"),$e("deactivated"),$e("serverPrefetch"),$e("renderTracked"),$e("renderTriggered"),$e("errorCaptured");var Ve=new un;function Fe(n){return function n(e,t){var r,a,s=o(e);if(!s&&!u(e)||e.__v_skip||Object.isFrozen(e)||e instanceof hn)return;if(e.__ob__){var i=e.__ob__.dep.id;if(t.has(i))return;t.add(i)}if(s)for(r=e.length;r--;)n(e[r],t);else if(Bn(e))n(e.value,t);else for(a=Object.keys(e),r=a.length;r--;)n(e[a[r]],t)}(n,Ve),Ve.clear(),n}var Ue,He=0,Je=function(){function n(n,e,t,r,o){var a,s;a=this,void 0===(s=Vn&&!Vn._vm?Vn:n?n._scope:void 0)&&(s=Vn),s&&s.active&&s.effects.push(a),(this.vm=n)&&o&&(n._watcher=this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=t,this.id=++He,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new un,this.newDepIds=new un,this.expression="",c(e)?this.getter=e:(this.getter=function(n){if(!G.test(n)){var e=n.split(".");return function(n){for(var t=0;t<e.length;t++){if(!n)return;n=n[e[t]]}return n}}}(e),this.getter||(this.getter=O)),this.value=this.lazy?void 0:this.get()}return n.prototype.get=function(){var n;kn(this);var e=this.vm;try{n=this.getter.call(e,e)}catch(n){if(!this.user)throw n;Ie(n,e,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&Fe(n),jn(),this.cleanupDeps()}return n},n.prototype.addDep=function(n){var e=n.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(n),this.depIds.has(e)||n.addSub(this))},n.prototype.cleanupDeps=function(){for(var n=this.deps.length;n--;){var e=this.deps[n];this.newDepIds.has(e.id)||e.removeSub(this)}var t=this.depIds;this.depIds=this.newDepIds,this.newDepIds=t,this.newDepIds.clear(),t=this.deps,this.deps=this.newDeps,this.newDeps=t,this.newDeps.length=0},n.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():mt(this)},n.prototype.run=function(){if(this.active){var n=this.get();if(n!==this.value||u(n)||this.deep){var e=this.value;if(this.value=n,this.user){var t='callback for watcher "'.concat(this.expression,'"');Pe(this.cb,this.vm,[n,e],this.vm,t)}else this.cb.call(this.vm,n,e)}}},n.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},n.prototype.depend=function(){for(var n=this.deps.length;n--;)this.deps[n].depend()},n.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&w(this.vm._scope.effects,this),this.active){for(var n=this.deps.length;n--;)this.deps[n].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},n}();function Ge(n,e){Ue.$on(n,e)}function We(n,e){Ue.$off(n,e)}function Xe(n,e){var t=Ue;return function r(){var o=e.apply(null,arguments);null!==o&&t.$off(n,r)}}function Ke(n,e,t){Ue=n,Gn(e,t||{},Ge,We,Xe,n),Ue=void 0}var Ze=null;function Ye(n){var e=Ze;return Ze=n,function(){Ze=e}}function Qe(n){for(;n&&(n=n.$parent);)if(n._inactive)return!0;return!1}function nt(n,e){if(e){if(n._directInactive=!1,Qe(n))return}else if(n._directInactive)return;if(n._inactive||null===n._inactive){n._inactive=!1;for(var t=0;t<n.$children.length;t++)nt(n.$children[t]);et(n,"activated")}}function et(n,e,t,r){void 0===r&&(r=!0),kn();var o=pn,a=Vn;r&&mn(n);var s=n.$options[e],i="".concat(e," hook");if(s)for(var l=0,c=s.length;l<c;l++)Pe(s[l],n,t||null,n,i);n._hasHookEvent&&n.$emit("hook:"+e),r&&(mn(o),a&&a.on()),jn()}var tt=[],rt=[],ot={},at=!1,st=!1,it=0;var lt=0,ct=Date.now;if(X&&!Z){var ut=window.performance;ut&&"function"==typeof ut.now&&ct()>document.createEvent("Event").timeStamp&&(ct=function(){return ut.now()})}var dt=function(n,e){if(n.post){if(!e.post)return 1}else if(e.post)return-1;return n.id-e.id};function pt(){var n,e;for(lt=ct(),st=!0,tt.sort(dt),it=0;it<tt.length;it++)(n=tt[it]).before&&n.before(),e=n.id,ot[e]=null,n.run();var t=rt.slice(),r=tt.slice();it=tt.length=rt.length=0,ot={},at=st=!1,function(n){for(var e=0;e<n.length;e++)n[e]._inactive=!0,nt(n[e],!0)}(t),function(n){var e=n.length;for(;e--;){var t=n[e],r=t.vm;r&&r._watcher===t&&r._isMounted&&!r._isDestroyed&&et(r,"updated")}}(r),function(){for(var n=0;n<yn.length;n++){var e=yn[n];e.subs=e.subs.filter((function(n){return n})),e._pending=!1}yn.length=0}(),ln&&F.devtools&&ln.emit("flush")}function mt(n){var e=n.id;if(null==ot[e]&&(n!==xn.target||!n.noRecurse)){if(ot[e]=!0,st){for(var t=tt.length-1;t>it&&tt[t].id>n.id;)t--;tt.splice(t+1,0,n)}else tt.push(n);at||(at=!0,Be(pt))}}function ht(n,e){if(n){for(var t=Object.create(null),r=dn?Reflect.ownKeys(n):Object.keys(n),o=0;o<r.length;o++){var a=r[o];if("__ob__"!==a){var s=n[a].from;if(s in e._provided)t[a]=e._provided[s];else if("default"in n[a]){var i=n[a].default;t[a]=c(i)?i.call(e):i}else 0}}return t}}function ft(n,e,t,a,s){var l,c=this,u=s.options;j(a,"_uid")?(l=Object.create(a))._original=a:(l=a,a=a._original);var d=i(u._compiled),p=!d;this.data=n,this.props=e,this.children=t,this.parent=a,this.listeners=n.on||r,this.injections=ht(u.inject,a),this.slots=function(){return c.$slots||ge(a,n.scopedSlots,c.$slots=me(t,a)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return ge(a,n.scopedSlots,this.slots())}}),d&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=ge(a,n.scopedSlots,this.$slots)),u._scopeId?this._c=function(n,e,t,r){var s=_e(l,n,e,t,r,p);return s&&!o(s)&&(s.fnScopeId=u._scopeId,s.fnContext=a),s}:this._c=function(n,e,t,r){return _e(l,n,e,t,r,p)}}function gt(n,e,t,r,o){var a=vn(n);return a.fnContext=t,a.fnOptions=r,e.slot&&((a.data||(a.data={})).slot=e.slot),a}function vt(n,e){for(var t in e)n[_(t)]=e[t]}function bt(n){return n.name||n.__name||n._componentTag}pe(ft.prototype);var yt={init:function(n,e){if(n.componentInstance&&!n.componentInstance._isDestroyed&&n.data.keepAlive){var t=n;yt.prepatch(t,t)}else{(n.componentInstance=function(n,e){var t={_isComponent:!0,_parentVnode:n,parent:e},r=n.data.inlineTemplate;s(r)&&(t.render=r.render,t.staticRenderFns=r.staticRenderFns);return new n.componentOptions.Ctor(t)}(n,Ze)).$mount(e?n.elm:void 0,e)}},prepatch:function(n,e){var t=e.componentOptions;!function(n,e,t,o,a){var s=o.data.scopedSlots,i=n.$scopedSlots,l=!!(s&&!s.$stable||i!==r&&!i.$stable||s&&n.$scopedSlots.$key!==s.$key||!s&&n.$scopedSlots.$key),c=!!(a||n.$options._renderChildren||l),u=n.$vnode;n.$options._parentVnode=o,n.$vnode=o,n._vnode&&(n._vnode.parent=o),n.$options._renderChildren=a;var d=o.data.attrs||r;n._attrsProxy&&xe(n._attrsProxy,d,u.data&&u.data.attrs||r,n,"$attrs")&&(c=!0),n.$attrs=d,t=t||r;var p=n.$options._parentListeners;if(n._listenersProxy&&xe(n._listenersProxy,t,p||r,n,"$listeners"),n.$listeners=n.$options._parentListeners=t,Ke(n,t,p),e&&n.$options.props){zn(!1);for(var m=n._props,h=n.$options._propKeys||[],f=0;f<h.length;f++){var g=h[f],v=n.$options.props;m[g]=At(g,v,e,n)}zn(!0),n.$options.propsData=e}c&&(n.$slots=me(a,o.context),n.$forceUpdate())}(e.componentInstance=n.componentInstance,t.propsData,t.listeners,e,t.children)},insert:function(n){var e,t=n.context,r=n.componentInstance;r._isMounted||(r._isMounted=!0,et(r,"mounted")),n.data.keepAlive&&(t._isMounted?((e=r)._inactive=!1,rt.push(e)):nt(r,!0))},destroy:function(n){var e=n.componentInstance;e._isDestroyed||(n.data.keepAlive?function n(e,t){if(!(t&&(e._directInactive=!0,Qe(e))||e._inactive)){e._inactive=!0;for(var r=0;r<e.$children.length;r++)n(e.$children[r]);et(e,"deactivated")}}(e,!0):e.$destroy())}},xt=Object.keys(yt);function wt(n,e,t,l,c){if(!a(n)){var d=t.$options._base;if(u(n)&&(n=d.extend(n)),"function"==typeof n){var p;if(a(n.cid)&&void 0===(n=function(n,e){if(i(n.error)&&s(n.errorComp))return n.errorComp;if(s(n.resolved))return n.resolved;var t=je;if(t&&s(n.owners)&&-1===n.owners.indexOf(t)&&n.owners.push(t),i(n.loading)&&s(n.loadingComp))return n.loadingComp;if(t&&!s(n.owners)){var r=n.owners=[t],o=!0,l=null,c=null;t.$on("hook:destroyed",(function(){return w(r,t)}));var d=function(n){for(var e=0,t=r.length;e<t;e++)r[e].$forceUpdate();n&&(r.length=0,null!==l&&(clearTimeout(l),l=null),null!==c&&(clearTimeout(c),c=null))},p=N((function(t){n.resolved=Te(t,e),o?r.length=0:d(!0)})),m=N((function(e){s(n.errorComp)&&(n.error=!0,d(!0))})),h=n(p,m);return u(h)&&(f(h)?a(n.resolved)&&h.then(p,m):f(h.component)&&(h.component.then(p,m),s(h.error)&&(n.errorComp=Te(h.error,e)),s(h.loading)&&(n.loadingComp=Te(h.loading,e),0===h.delay?n.loading=!0:l=setTimeout((function(){l=null,a(n.resolved)&&a(n.error)&&(n.loading=!0,d(!1))}),h.delay||200)),s(h.timeout)&&(c=setTimeout((function(){c=null,a(n.resolved)&&m(null)}),h.timeout)))),o=!1,n.loading?n.loadingComp:n.resolved}}(p=n,d)))return function(n,e,t,r,o){var a=fn();return a.asyncFactory=n,a.asyncMeta={data:e,context:t,children:r,tag:o},a}(p,e,t,l,c);e=e||{},Jt(n),s(e.model)&&function(n,e){var t=n.model&&n.model.prop||"value",r=n.model&&n.model.event||"input";(e.attrs||(e.attrs={}))[t]=e.model.value;var a=e.on||(e.on={}),i=a[r],l=e.model.callback;s(i)?(o(i)?-1===i.indexOf(l):i!==l)&&(a[r]=[l].concat(i)):a[r]=l}(n.options,e);var m=function(n,e,t){var r=e.options.props;if(!a(r)){var o={},i=n.attrs,l=n.props;if(s(i)||s(l))for(var c in r){var u=z(c);Xn(o,l,c,u,!0)||Xn(o,i,c,u,!1)}return o}}(e,n);if(i(n.options.functional))return function(n,e,t,a,i){var l=n.options,c={},u=l.props;if(s(u))for(var d in u)c[d]=At(d,u,e||r);else s(t.attrs)&&vt(c,t.attrs),s(t.props)&&vt(c,t.props);var p=new ft(t,c,i,a,n),m=l.render.call(null,p._c,p);if(m instanceof hn)return gt(m,t,p.parent,l,p);if(o(m)){for(var h=Kn(m)||[],f=new Array(h.length),g=0;g<h.length;g++)f[g]=gt(h[g],t,p.parent,l,p);return f}}(n,m,e,t,l);var h=e.on;if(e.on=e.nativeOn,i(n.options.abstract)){var g=e.slot;e={},g&&(e.slot=g)}!function(n){for(var e=n.hook||(n.hook={}),t=0;t<xt.length;t++){var r=xt[t],o=e[r],a=yt[r];o===a||o&&o._merged||(e[r]=o?kt(a,o):a)}}(e);var v=bt(n.options)||c;return new hn("vue-component-".concat(n.cid).concat(v?"-".concat(v):""),e,void 0,void 0,void 0,t,{Ctor:n,propsData:m,listeners:h,tag:c,children:l},p)}}}function kt(n,e){var t=function(t,r){n(t,r),e(t,r)};return t._merged=!0,t}var jt=O,Tt=F.optionMergeStrategies;function St(n,e,t){if(void 0===t&&(t=!0),!e)return n;for(var r,o,a,s=dn?Reflect.ownKeys(e):Object.keys(e),i=0;i<s.length;i++)"__ob__"!==(r=s[i])&&(o=n[r],a=e[r],t&&j(n,r)?o!==a&&p(o)&&p(a)&&St(o,a):On(n,r,a));return n}function _t(n,e,t){return t?function(){var r=c(e)?e.call(t,t):e,o=c(n)?n.call(t,t):n;return r?St(r,o):o}:e?n?function(){return St(c(e)?e.call(this,this):e,c(n)?n.call(this,this):n)}:e:n}function It(n,e){var t=e?n?n.concat(e):o(e)?e:[e]:n;return t?function(n){for(var e=[],t=0;t<n.length;t++)-1===e.indexOf(n[t])&&e.push(n[t]);return e}(t):t}function Pt(n,e,t,r){var o=Object.create(n||null);return e?A(o,e):o}Tt.data=function(n,e,t){return t?_t(n,e,t):e&&"function"!=typeof e?n:_t(n,e)},V.forEach((function(n){Tt[n]=It})),$.forEach((function(n){Tt[n+"s"]=Pt})),Tt.watch=function(n,e,t,r){if(n===rn&&(n=void 0),e===rn&&(e=void 0),!e)return Object.create(n||null);if(!n)return e;var a={};for(var s in A(a,n),e){var i=a[s],l=e[s];i&&!o(i)&&(i=[i]),a[s]=i?i.concat(l):o(l)?l:[l]}return a},Tt.props=Tt.methods=Tt.inject=Tt.computed=function(n,e,t,r){if(!n)return e;var o=Object.create(null);return A(o,n),e&&A(o,e),o},Tt.provide=function(n,e){return n?function(){var t=Object.create(null);return St(t,c(n)?n.call(this):n),e&&St(t,c(e)?e.call(this):e,!1),t}:e};var zt=function(n,e){return void 0===e?n:e};function Ct(n,e,t){if(c(e)&&(e=e.options),function(n,e){var t=n.props;if(t){var r,a,s={};if(o(t))for(r=t.length;r--;)"string"==typeof(a=t[r])&&(s[_(a)]={type:null});else if(p(t))for(var i in t)a=t[i],s[_(i)]=p(a)?a:{type:a};else 0;n.props=s}}(e),function(n,e){var t=n.inject;if(t){var r=n.inject={};if(o(t))for(var a=0;a<t.length;a++)r[t[a]]={from:t[a]};else if(p(t))for(var s in t){var i=t[s];r[s]=p(i)?A({from:s},i):{from:i}}else 0}}(e),function(n){var e=n.directives;if(e)for(var t in e){var r=e[t];c(r)&&(e[t]={bind:r,update:r})}}(e),!e._base&&(e.extends&&(n=Ct(n,e.extends,t)),e.mixins))for(var r=0,a=e.mixins.length;r<a;r++)n=Ct(n,e.mixins[r],t);var s,i={};for(s in n)l(s);for(s in e)j(n,s)||l(s);function l(r){var o=Tt[r]||zt;i[r]=o(n[r],e[r],t,r)}return i}function Et(n,e,t,r){if("string"==typeof t){var o=n[e];if(j(o,t))return o[t];var a=_(t);if(j(o,a))return o[a];var s=I(a);return j(o,s)?o[s]:o[t]||o[a]||o[s]}}function At(n,e,t,r){var o=e[n],a=!j(t,n),s=t[n],i=Dt(Boolean,o.type);if(i>-1)if(a&&!j(o,"default"))s=!1;else if(""===s||s===z(n)){var l=Dt(String,o.type);(l<0||i<l)&&(s=!0)}if(void 0===s){s=function(n,e,t){if(!j(e,"default"))return;var r=e.default;0;if(n&&n.$options.propsData&&void 0===n.$options.propsData[t]&&void 0!==n._props[t])return n._props[t];return c(r)&&"Function"!==Ot(e.type)?r.call(n):r}(r,o,n);var u=Pn;zn(!0),An(s),zn(u)}return s}var Mt=/^\s*function (\w+)/;function Ot(n){var e=n&&n.toString().match(Mt);return e?e[1]:""}function Rt(n,e){return Ot(n)===Ot(e)}function Dt(n,e){if(!o(e))return Rt(e,n)?0:-1;for(var t=0,r=e.length;t<r;t++)if(Rt(e[t],n))return t;return-1}var qt={enumerable:!0,configurable:!0,get:O,set:O};function Lt(n,e,t){qt.get=function(){return this[e][t]},qt.set=function(n){this[e][t]=n},Object.defineProperty(n,t,qt)}function Nt(n){var e=n.$options;if(e.props&&function(n,e){var t=n.$options.propsData||{},r=n._props=qn({}),o=n.$options._propKeys=[];n.$parent&&zn(!1);var a=function(a){o.push(a);var s=At(a,e,t,n);Mn(r,a,s,void 0,!0),a in n||Lt(n,"_props",a)};for(var s in e)a(s);zn(!0)}(n,e.props),function(n){var e=n.$options,t=e.setup;if(t){var r=n._setupContext=ye(n);mn(n),kn();var o=Pe(t,null,[n._props||qn({}),r],n,"setup");if(jn(),mn(),c(o))e.render=o;else if(u(o))if(n._setupState=o,o.__sfc){var a=n._setupProxy={};for(var s in o)"__sfc"!==s&&$n(a,o,s)}else for(var s in o)H(s)||$n(n,o,s);else 0}}(n),e.methods&&function(n,e){n.$options.props;for(var t in e)n[t]="function"!=typeof e[t]?O:C(e[t],n)}(n,e.methods),e.data)!function(n){var e=n.$options.data;p(e=n._data=c(e)?function(n,e){kn();try{return n.call(e,e)}catch(n){return Ie(n,e,"data()"),{}}finally{jn()}}(e,n):e||{})||(e={});var t=Object.keys(e),r=n.$options.props,o=(n.$options.methods,t.length);for(;o--;){var a=t[o];0,r&&j(r,a)||H(a)||Lt(n,"_data",a)}var s=An(e);s&&s.vmCount++}(n);else{var t=An(n._data={});t&&t.vmCount++}e.computed&&function(n,e){var t=n._computedWatchers=Object.create(null),r=sn();for(var o in e){var a=e[o],s=c(a)?a:a.get;0,r||(t[o]=new Je(n,s||O,O,Bt)),o in n||$t(n,o,a)}}(n,e.computed),e.watch&&e.watch!==rn&&function(n,e){for(var t in e){var r=e[t];if(o(r))for(var a=0;a<r.length;a++)Ut(n,t,r[a]);else Ut(n,t,r)}}(n,e.watch)}var Bt={lazy:!0};function $t(n,e,t){var r=!sn();c(t)?(qt.get=r?Vt(e):Ft(t),qt.set=O):(qt.get=t.get?r&&!1!==t.cache?Vt(e):Ft(t.get):O,qt.set=t.set||O),Object.defineProperty(n,e,qt)}function Vt(n){return function(){var e=this._computedWatchers&&this._computedWatchers[n];if(e)return e.dirty&&e.evaluate(),xn.target&&e.depend(),e.value}}function Ft(n){return function(){return n.call(this,this)}}function Ut(n,e,t,r){return p(t)&&(r=t,t=t.handler),"string"==typeof t&&(t=n[t]),n.$watch(e,t,r)}var Ht=0;function Jt(n){var e=n.options;if(n.super){var t=Jt(n.super);if(t!==n.superOptions){n.superOptions=t;var r=function(n){var e,t=n.options,r=n.sealedOptions;for(var o in t)t[o]!==r[o]&&(e||(e={}),e[o]=t[o]);return e}(n);r&&A(n.extendOptions,r),(e=n.options=Ct(t,n.extendOptions)).name&&(e.components[e.name]=n)}}return e}function Gt(n){this._init(n)}function Wt(n){n.cid=0;var e=1;n.extend=function(n){n=n||{};var t=this,r=t.cid,o=n._Ctor||(n._Ctor={});if(o[r])return o[r];var a=bt(n)||bt(t.options);var s=function(n){this._init(n)};return(s.prototype=Object.create(t.prototype)).constructor=s,s.cid=e++,s.options=Ct(t.options,n),s.super=t,s.options.props&&function(n){var e=n.options.props;for(var t in e)Lt(n.prototype,"_props",t)}(s),s.options.computed&&function(n){var e=n.options.computed;for(var t in e)$t(n.prototype,t,e[t])}(s),s.extend=t.extend,s.mixin=t.mixin,s.use=t.use,$.forEach((function(n){s[n]=t[n]})),a&&(s.options.components[a]=s),s.superOptions=t.options,s.extendOptions=n,s.sealedOptions=A({},s.options),o[r]=s,s}}function Xt(n){return n&&(bt(n.Ctor.options)||n.tag)}function Kt(n,e){return o(n)?n.indexOf(e)>-1:"string"==typeof n?n.split(",").indexOf(e)>-1:!!m(n)&&n.test(e)}function Zt(n,e){var t=n.cache,r=n.keys,o=n._vnode,a=n.$vnode;for(var s in t){var i=t[s];if(i){var l=i.name;l&&!e(l)&&Yt(t,s,r,o)}}a.componentOptions.children=void 0}function Yt(n,e,t,r){var o=n[e];!o||r&&o.tag===r.tag||o.componentInstance.$destroy(),n[e]=null,w(t,e)}Gt.prototype._init=function(n){var e=this;e._uid=Ht++,e._isVue=!0,e.__v_skip=!0,e._scope=new Fn(!0),e._scope.parent=void 0,e._scope._vm=!0,n&&n._isComponent?function(n,e){var t=n.$options=Object.create(n.constructor.options),r=e._parentVnode;t.parent=e.parent,t._parentVnode=r;var o=r.componentOptions;t.propsData=o.propsData,t._parentListeners=o.listeners,t._renderChildren=o.children,t._componentTag=o.tag,e.render&&(t.render=e.render,t.staticRenderFns=e.staticRenderFns)}(e,n):e.$options=Ct(Jt(e.constructor),n||{},e),e._renderProxy=e,e._self=e,function(n){var e=n.$options,t=e.parent;if(t&&!e.abstract){for(;t.$options.abstract&&t.$parent;)t=t.$parent;t.$children.push(n)}n.$parent=t,n.$root=t?t.$root:n,n.$children=[],n.$refs={},n._provided=t?t._provided:Object.create(null),n._watcher=null,n._inactive=null,n._directInactive=!1,n._isMounted=!1,n._isDestroyed=!1,n._isBeingDestroyed=!1}(e),function(n){n._events=Object.create(null),n._hasHookEvent=!1;var e=n.$options._parentListeners;e&&Ke(n,e)}(e),function(n){n._vnode=null,n._staticTrees=null;var e=n.$options,t=n.$vnode=e._parentVnode,o=t&&t.context;n.$slots=me(e._renderChildren,o),n.$scopedSlots=t?ge(n.$parent,t.data.scopedSlots,n.$slots):r,n._c=function(e,t,r,o){return _e(n,e,t,r,o,!1)},n.$createElement=function(e,t,r,o){return _e(n,e,t,r,o,!0)};var a=t&&t.data;Mn(n,"$attrs",a&&a.attrs||r,null,!0),Mn(n,"$listeners",e._parentListeners||r,null,!0)}(e),et(e,"beforeCreate",void 0,!1),function(n){var e=ht(n.$options.inject,n);e&&(zn(!1),Object.keys(e).forEach((function(t){Mn(n,t,e[t])})),zn(!0))}(e),Nt(e),function(n){var e=n.$options.provide;if(e){var t=c(e)?e.call(n):e;if(!u(t))return;for(var r=Un(n),o=dn?Reflect.ownKeys(t):Object.keys(t),a=0;a<o.length;a++){var s=o[a];Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))}}}(e),et(e,"created"),e.$options.el&&e.$mount(e.$options.el)},function(n){var e={get:function(){return this._data}},t={get:function(){return this._props}};Object.defineProperty(n.prototype,"$data",e),Object.defineProperty(n.prototype,"$props",t),n.prototype.$set=On,n.prototype.$delete=Rn,n.prototype.$watch=function(n,e,t){if(p(e))return Ut(this,n,e,t);(t=t||{}).user=!0;var r=new Je(this,n,e,t);if(t.immediate){var o='callback for immediate watcher "'.concat(r.expression,'"');kn(),Pe(e,this,[r.value],this,o),jn()}return function(){r.teardown()}}}(Gt),function(n){var e=/^hook:/;n.prototype.$on=function(n,t){var r=this;if(o(n))for(var a=0,s=n.length;a<s;a++)r.$on(n[a],t);else(r._events[n]||(r._events[n]=[])).push(t),e.test(n)&&(r._hasHookEvent=!0);return r},n.prototype.$once=function(n,e){var t=this;function r(){t.$off(n,r),e.apply(t,arguments)}return r.fn=e,t.$on(n,r),t},n.prototype.$off=function(n,e){var t=this;if(!arguments.length)return t._events=Object.create(null),t;if(o(n)){for(var r=0,a=n.length;r<a;r++)t.$off(n[r],e);return t}var s,i=t._events[n];if(!i)return t;if(!e)return t._events[n]=null,t;for(var l=i.length;l--;)if((s=i[l])===e||s.fn===e){i.splice(l,1);break}return t},n.prototype.$emit=function(n){var e=this,t=e._events[n];if(t){t=t.length>1?E(t):t;for(var r=E(arguments,1),o='event handler for "'.concat(n,'"'),a=0,s=t.length;a<s;a++)Pe(t[a],e,r,e,o)}return e}}(Gt),function(n){n.prototype._update=function(n,e){var t=this,r=t.$el,o=t._vnode,a=Ye(t);t._vnode=n,t.$el=o?t.__patch__(o,n):t.__patch__(t.$el,n,e,!1),a(),r&&(r.__vue__=null),t.$el&&(t.$el.__vue__=t);for(var s=t;s&&s.$vnode&&s.$parent&&s.$vnode===s.$parent._vnode;)s.$parent.$el=s.$el,s=s.$parent},n.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},n.prototype.$destroy=function(){var n=this;if(!n._isBeingDestroyed){et(n,"beforeDestroy"),n._isBeingDestroyed=!0;var e=n.$parent;!e||e._isBeingDestroyed||n.$options.abstract||w(e.$children,n),n._scope.stop(),n._data.__ob__&&n._data.__ob__.vmCount--,n._isDestroyed=!0,n.__patch__(n._vnode,null),et(n,"destroyed"),n.$off(),n.$el&&(n.$el.__vue__=null),n.$vnode&&(n.$vnode.parent=null)}}}(Gt),function(n){pe(n.prototype),n.prototype.$nextTick=function(n){return Be(n,this)},n.prototype._render=function(){var n=this,e=n.$options,t=e.render,r=e._parentVnode;r&&n._isMounted&&(n.$scopedSlots=ge(n.$parent,r.data.scopedSlots,n.$slots,n.$scopedSlots),n._slotsProxy&&ke(n._slotsProxy,n.$scopedSlots)),n.$vnode=r;var a,s=pn,i=je;try{mn(n),je=n,a=t.call(n._renderProxy,n.$createElement)}catch(e){Ie(e,n,"render"),a=n._vnode}finally{je=i,mn(s)}return o(a)&&1===a.length&&(a=a[0]),a instanceof hn||(a=fn()),a.parent=r,a}}(Gt);var Qt=[String,RegExp,Array],nr={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Qt,exclude:Qt,max:[String,Number]},methods:{cacheVNode:function(){var n=this.cache,e=this.keys,t=this.vnodeToCache,r=this.keyToCache;if(t){var o=t.tag,a=t.componentInstance,s=t.componentOptions;n[r]={name:Xt(s),tag:o,componentInstance:a},e.push(r),this.max&&e.length>parseInt(this.max)&&Yt(n,e[0],e,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var n in this.cache)Yt(this.cache,n,this.keys)},mounted:function(){var n=this;this.cacheVNode(),this.$watch("include",(function(e){Zt(n,(function(n){return Kt(e,n)}))})),this.$watch("exclude",(function(e){Zt(n,(function(n){return!Kt(e,n)}))}))},updated:function(){this.cacheVNode()},render:function(){var n=this.$slots.default,e=Se(n),t=e&&e.componentOptions;if(t){var r=Xt(t),o=this.include,a=this.exclude;if(o&&(!r||!Kt(o,r))||a&&r&&Kt(a,r))return e;var s=this.cache,i=this.keys,l=null==e.key?t.Ctor.cid+(t.tag?"::".concat(t.tag):""):e.key;s[l]?(e.componentInstance=s[l].componentInstance,w(i,l),i.push(l)):(this.vnodeToCache=e,this.keyToCache=l),e.data.keepAlive=!0}return e||n&&n[0]}}};!function(n){var e={get:function(){return F}};Object.defineProperty(n,"config",e),n.util={warn:jt,extend:A,mergeOptions:Ct,defineReactive:Mn},n.set=On,n.delete=Rn,n.nextTick=Be,n.observable=function(n){return An(n),n},n.options=Object.create(null),$.forEach((function(e){n.options[e+"s"]=Object.create(null)})),n.options._base=n,A(n.options.components,nr),function(n){n.use=function(n){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(n)>-1)return this;var t=E(arguments,1);return t.unshift(this),c(n.install)?n.install.apply(n,t):c(n)&&n.apply(null,t),e.push(n),this}}(n),function(n){n.mixin=function(n){return this.options=Ct(this.options,n),this}}(n),Wt(n),function(n){$.forEach((function(e){n[e]=function(n,t){return t?("component"===e&&p(t)&&(t.name=t.name||n,t=this.options._base.extend(t)),"directive"===e&&c(t)&&(t={bind:t,update:t}),this.options[e+"s"][n]=t,t):this.options[e+"s"][n]}}))}(n)}(Gt),Object.defineProperty(Gt.prototype,"$isServer",{get:sn}),Object.defineProperty(Gt.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Gt,"FunctionalRenderContext",{value:ft}),Gt.version="2.7.16";var er=y("style,class"),tr=y("input,textarea,option,select,progress"),rr=y("contenteditable,draggable,spellcheck"),or=y("events,caret,typing,plaintext-only"),ar=y("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),sr="http://www.w3.org/1999/xlink",ir=function(n){return":"===n.charAt(5)&&"xlink"===n.slice(0,5)},lr=function(n){return ir(n)?n.slice(6,n.length):""},cr=function(n){return null==n||!1===n};function ur(n){for(var e=n.data,t=n,r=n;s(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(e=dr(r.data,e));for(;s(t=t.parent);)t&&t.data&&(e=dr(e,t.data));return function(n,e){if(s(n)||s(e))return pr(n,mr(e));return""}(e.staticClass,e.class)}function dr(n,e){return{staticClass:pr(n.staticClass,e.staticClass),class:s(n.class)?[n.class,e.class]:e.class}}function pr(n,e){return n?e?n+" "+e:n:e||""}function mr(n){return Array.isArray(n)?function(n){for(var e,t="",r=0,o=n.length;r<o;r++)s(e=mr(n[r]))&&""!==e&&(t&&(t+=" "),t+=e);return t}(n):u(n)?function(n){var e="";for(var t in n)n[t]&&(e&&(e+=" "),e+=t);return e}(n):"string"==typeof n?n:""}var hr={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},fr=y("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),gr=y("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),vr=function(n){return fr(n)||gr(n)};var br=Object.create(null);var yr=y("text,number,password,search,email,tel,url");var xr=Object.freeze({__proto__:null,createElement:function(n,e){var t=document.createElement(n);return"select"!==n||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&t.setAttribute("multiple","multiple"),t},createElementNS:function(n,e){return document.createElementNS(hr[n],e)},createTextNode:function(n){return document.createTextNode(n)},createComment:function(n){return document.createComment(n)},insertBefore:function(n,e,t){n.insertBefore(e,t)},removeChild:function(n,e){n.removeChild(e)},appendChild:function(n,e){n.appendChild(e)},parentNode:function(n){return n.parentNode},nextSibling:function(n){return n.nextSibling},tagName:function(n){return n.tagName},setTextContent:function(n,e){n.textContent=e},setStyleScope:function(n,e){n.setAttribute(e,"")}}),wr={create:function(n,e){kr(e)},update:function(n,e){n.data.ref!==e.data.ref&&(kr(n,!0),kr(e))},destroy:function(n){kr(n,!0)}};function kr(n,e){var t=n.data.ref;if(s(t)){var r=n.context,a=n.componentInstance||n.elm,i=e?null:a,l=e?void 0:a;if(c(t))Pe(t,r,[i],r,"template ref function");else{var u=n.data.refInFor,d="string"==typeof t||"number"==typeof t,p=Bn(t),m=r.$refs;if(d||p)if(u){var h=d?m[t]:t.value;e?o(h)&&w(h,a):o(h)?h.includes(a)||h.push(a):d?(m[t]=[a],jr(r,t,m[t])):t.value=[a]}else if(d){if(e&&m[t]!==a)return;m[t]=l,jr(r,t,i)}else if(p){if(e&&t.value!==a)return;t.value=i}else 0}}}function jr(n,e,t){var r=n._setupState;r&&j(r,e)&&(Bn(r[e])?r[e].value=t:r[e]=t)}var Tr=new hn("",{},[]),Sr=["create","activate","update","remove","destroy"];function _r(n,e){return n.key===e.key&&n.asyncFactory===e.asyncFactory&&(n.tag===e.tag&&n.isComment===e.isComment&&s(n.data)===s(e.data)&&function(n,e){if("input"!==n.tag)return!0;var t,r=s(t=n.data)&&s(t=t.attrs)&&t.type,o=s(t=e.data)&&s(t=t.attrs)&&t.type;return r===o||yr(r)&&yr(o)}(n,e)||i(n.isAsyncPlaceholder)&&a(e.asyncFactory.error))}function Ir(n,e,t){var r,o,a={};for(r=e;r<=t;++r)s(o=n[r].key)&&(a[o]=r);return a}var Pr={create:zr,update:zr,destroy:function(n){zr(n,Tr)}};function zr(n,e){(n.data.directives||e.data.directives)&&function(n,e){var t,r,o,a=n===Tr,s=e===Tr,i=Er(n.data.directives,n.context),l=Er(e.data.directives,e.context),c=[],u=[];for(t in l)r=i[t],o=l[t],r?(o.oldValue=r.value,o.oldArg=r.arg,Mr(o,"update",e,n),o.def&&o.def.componentUpdated&&u.push(o)):(Mr(o,"bind",e,n),o.def&&o.def.inserted&&c.push(o));if(c.length){var d=function(){for(var t=0;t<c.length;t++)Mr(c[t],"inserted",e,n)};a?Wn(e,"insert",d):d()}u.length&&Wn(e,"postpatch",(function(){for(var t=0;t<u.length;t++)Mr(u[t],"componentUpdated",e,n)}));if(!a)for(t in i)l[t]||Mr(i[t],"unbind",n,n,s)}(n,e)}var Cr=Object.create(null);function Er(n,e){var t,r,o=Object.create(null);if(!n)return o;for(t=0;t<n.length;t++){if((r=n[t]).modifiers||(r.modifiers=Cr),o[Ar(r)]=r,e._setupState&&e._setupState.__sfc){var a=r.def||Et(e,"_setupState","v-"+r.name);r.def="function"==typeof a?{bind:a,update:a}:a}r.def=r.def||Et(e.$options,"directives",r.name)}return o}function Ar(n){return n.rawName||"".concat(n.name,".").concat(Object.keys(n.modifiers||{}).join("."))}function Mr(n,e,t,r,o){var a=n.def&&n.def[e];if(a)try{a(t.elm,n,t,r,o)}catch(r){Ie(r,t.context,"directive ".concat(n.name," ").concat(e," hook"))}}var Or=[wr,Pr];function Rr(n,e){var t=e.componentOptions;if(!(s(t)&&!1===t.Ctor.options.inheritAttrs||a(n.data.attrs)&&a(e.data.attrs))){var r,o,l=e.elm,c=n.data.attrs||{},u=e.data.attrs||{};for(r in(s(u.__ob__)||i(u._v_attr_proxy))&&(u=e.data.attrs=A({},u)),u)o=u[r],c[r]!==o&&Dr(l,r,o,e.data.pre);for(r in(Z||Q)&&u.value!==c.value&&Dr(l,"value",u.value),c)a(u[r])&&(ir(r)?l.removeAttributeNS(sr,lr(r)):rr(r)||l.removeAttribute(r))}}function Dr(n,e,t,r){r||n.tagName.indexOf("-")>-1?qr(n,e,t):ar(e)?cr(t)?n.removeAttribute(e):(t="allowfullscreen"===e&&"EMBED"===n.tagName?"true":e,n.setAttribute(e,t)):rr(e)?n.setAttribute(e,function(n,e){return cr(e)||"false"===e?"false":"contenteditable"===n&&or(e)?e:"true"}(e,t)):ir(e)?cr(t)?n.removeAttributeNS(sr,lr(e)):n.setAttributeNS(sr,e,t):qr(n,e,t)}function qr(n,e,t){if(cr(t))n.removeAttribute(e);else{if(Z&&!Y&&"TEXTAREA"===n.tagName&&"placeholder"===e&&""!==t&&!n.__ieph){var r=function(e){e.stopImmediatePropagation(),n.removeEventListener("input",r)};n.addEventListener("input",r),n.__ieph=!0}n.setAttribute(e,t)}}var Lr={create:Rr,update:Rr};function Nr(n,e){var t=e.elm,r=e.data,o=n.data;if(!(a(r.staticClass)&&a(r.class)&&(a(o)||a(o.staticClass)&&a(o.class)))){var i=ur(e),l=t._transitionClasses;s(l)&&(i=pr(i,mr(l))),i!==t._prevClass&&(t.setAttribute("class",i),t._prevClass=i)}}var Br,$r={create:Nr,update:Nr};function Vr(n,e,t){var r=Br;return function o(){var a=e.apply(null,arguments);null!==a&&Hr(n,o,t,r)}}var Fr=Ae&&!(tn&&Number(tn[1])<=53);function Ur(n,e,t,r){if(Fr){var o=lt,a=e;e=a._wrapper=function(n){if(n.target===n.currentTarget||n.timeStamp>=o||n.timeStamp<=0||n.target.ownerDocument!==document)return a.apply(this,arguments)}}Br.addEventListener(n,e,on?{capture:t,passive:r}:t)}function Hr(n,e,t,r){(r||Br).removeEventListener(n,e._wrapper||e,t)}function Jr(n,e){if(!a(n.data.on)||!a(e.data.on)){var t=e.data.on||{},r=n.data.on||{};Br=e.elm||n.elm,function(n){if(s(n.__r)){var e=Z?"change":"input";n[e]=[].concat(n.__r,n[e]||[]),delete n.__r}s(n.__c)&&(n.change=[].concat(n.__c,n.change||[]),delete n.__c)}(t),Gn(t,r,Ur,Hr,Vr,e.context),Br=void 0}}var Gr,Wr={create:Jr,update:Jr,destroy:function(n){return Jr(n,Tr)}};function Xr(n,e){if(!a(n.data.domProps)||!a(e.data.domProps)){var t,r,o=e.elm,l=n.data.domProps||{},c=e.data.domProps||{};for(t in(s(c.__ob__)||i(c._v_attr_proxy))&&(c=e.data.domProps=A({},c)),l)t in c||(o[t]="");for(t in c){if(r=c[t],"textContent"===t||"innerHTML"===t){if(e.children&&(e.children.length=0),r===l[t])continue;1===o.childNodes.length&&o.removeChild(o.childNodes[0])}if("value"===t&&"PROGRESS"!==o.tagName){o._value=r;var u=a(r)?"":String(r);Kr(o,u)&&(o.value=u)}else if("innerHTML"===t&&gr(o.tagName)&&a(o.innerHTML)){(Gr=Gr||document.createElement("div")).innerHTML="<svg>".concat(r,"</svg>");for(var d=Gr.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;d.firstChild;)o.appendChild(d.firstChild)}else if(r!==l[t])try{o[t]=r}catch(n){}}}}function Kr(n,e){return!n.composing&&("OPTION"===n.tagName||function(n,e){var t=!0;try{t=document.activeElement!==n}catch(n){}return t&&n.value!==e}(n,e)||function(n,e){var t=n.value,r=n._vModifiers;if(s(r)){if(r.number)return b(t)!==b(e);if(r.trim)return t.trim()!==e.trim()}return t!==e}(n,e))}var Zr={create:Xr,update:Xr},Yr=T((function(n){var e={},t=/:(.+)/;return n.split(/;(?![^(]*\))/g).forEach((function(n){if(n){var r=n.split(t);r.length>1&&(e[r[0].trim()]=r[1].trim())}})),e}));function Qr(n){var e=no(n.style);return n.staticStyle?A(n.staticStyle,e):e}function no(n){return Array.isArray(n)?M(n):"string"==typeof n?Yr(n):n}var eo,to=/^--/,ro=/\s*!important$/,oo=function(n,e,t){if(to.test(e))n.style.setProperty(e,t);else if(ro.test(t))n.style.setProperty(z(e),t.replace(ro,""),"important");else{var r=so(e);if(Array.isArray(t))for(var o=0,a=t.length;o<a;o++)n.style[r]=t[o];else n.style[r]=t}},ao=["Webkit","Moz","ms"],so=T((function(n){if(eo=eo||document.createElement("div").style,"filter"!==(n=_(n))&&n in eo)return n;for(var e=n.charAt(0).toUpperCase()+n.slice(1),t=0;t<ao.length;t++){var r=ao[t]+e;if(r in eo)return r}}));function io(n,e){var t=e.data,r=n.data;if(!(a(t.staticStyle)&&a(t.style)&&a(r.staticStyle)&&a(r.style))){var o,i,l=e.elm,c=r.staticStyle,u=r.normalizedStyle||r.style||{},d=c||u,p=no(e.data.style)||{};e.data.normalizedStyle=s(p.__ob__)?A({},p):p;var m=function(n,e){var t,r={};if(e)for(var o=n;o.componentInstance;)(o=o.componentInstance._vnode)&&o.data&&(t=Qr(o.data))&&A(r,t);(t=Qr(n.data))&&A(r,t);for(var a=n;a=a.parent;)a.data&&(t=Qr(a.data))&&A(r,t);return r}(e,!0);for(i in d)a(m[i])&&oo(l,i,"");for(i in m)o=m[i],oo(l,i,null==o?"":o)}}var lo={create:io,update:io},co=/\s+/;function uo(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(co).forEach((function(e){return n.classList.add(e)})):n.classList.add(e);else{var t=" ".concat(n.getAttribute("class")||""," ");t.indexOf(" "+e+" ")<0&&n.setAttribute("class",(t+e).trim())}}function po(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(co).forEach((function(e){return n.classList.remove(e)})):n.classList.remove(e),n.classList.length||n.removeAttribute("class");else{for(var t=" ".concat(n.getAttribute("class")||""," "),r=" "+e+" ";t.indexOf(r)>=0;)t=t.replace(r," ");(t=t.trim())?n.setAttribute("class",t):n.removeAttribute("class")}}function mo(n){if(n){if("object"==typeof n){var e={};return!1!==n.css&&A(e,ho(n.name||"v")),A(e,n),e}return"string"==typeof n?ho(n):void 0}}var ho=T((function(n){return{enterClass:"".concat(n,"-enter"),enterToClass:"".concat(n,"-enter-to"),enterActiveClass:"".concat(n,"-enter-active"),leaveClass:"".concat(n,"-leave"),leaveToClass:"".concat(n,"-leave-to"),leaveActiveClass:"".concat(n,"-leave-active")}})),fo=X&&!Y,go="transition",vo="transitionend",bo="animation",yo="animationend";fo&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(go="WebkitTransition",vo="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(bo="WebkitAnimation",yo="webkitAnimationEnd"));var xo=X?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(n){return n()};function wo(n){xo((function(){xo(n)}))}function ko(n,e){var t=n._transitionClasses||(n._transitionClasses=[]);t.indexOf(e)<0&&(t.push(e),uo(n,e))}function jo(n,e){n._transitionClasses&&w(n._transitionClasses,e),po(n,e)}function To(n,e,t){var r=_o(n,e),o=r.type,a=r.timeout,s=r.propCount;if(!o)return t();var i="transition"===o?vo:yo,l=0,c=function(){n.removeEventListener(i,u),t()},u=function(e){e.target===n&&++l>=s&&c()};setTimeout((function(){l<s&&c()}),a+1),n.addEventListener(i,u)}var So=/\b(transform|all)(,|$)/;function _o(n,e){var t,r=window.getComputedStyle(n),o=(r[go+"Delay"]||"").split(", "),a=(r[go+"Duration"]||"").split(", "),s=Io(o,a),i=(r[bo+"Delay"]||"").split(", "),l=(r[bo+"Duration"]||"").split(", "),c=Io(i,l),u=0,d=0;return"transition"===e?s>0&&(t="transition",u=s,d=a.length):"animation"===e?c>0&&(t="animation",u=c,d=l.length):d=(t=(u=Math.max(s,c))>0?s>c?"transition":"animation":null)?"transition"===t?a.length:l.length:0,{type:t,timeout:u,propCount:d,hasTransform:"transition"===t&&So.test(r[go+"Property"])}}function Io(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max.apply(null,e.map((function(e,t){return Po(e)+Po(n[t])})))}function Po(n){return 1e3*Number(n.slice(0,-1).replace(",","."))}function zo(n,e){var t=n.elm;s(t._leaveCb)&&(t._leaveCb.cancelled=!0,t._leaveCb());var r=mo(n.data.transition);if(!a(r)&&!s(t._enterCb)&&1===t.nodeType){for(var o=r.css,i=r.type,l=r.enterClass,d=r.enterToClass,p=r.enterActiveClass,m=r.appearClass,h=r.appearToClass,f=r.appearActiveClass,g=r.beforeEnter,v=r.enter,y=r.afterEnter,x=r.enterCancelled,w=r.beforeAppear,k=r.appear,j=r.afterAppear,T=r.appearCancelled,S=r.duration,_=Ze,I=Ze.$vnode;I&&I.parent;)_=I.context,I=I.parent;var P=!_._isMounted||!n.isRootInsert;if(!P||k||""===k){var z=P&&m?m:l,C=P&&f?f:p,E=P&&h?h:d,A=P&&w||g,M=P&&c(k)?k:v,O=P&&j||y,R=P&&T||x,D=b(u(S)?S.enter:S);0;var q=!1!==o&&!Y,L=Ao(M),B=t._enterCb=N((function(){q&&(jo(t,E),jo(t,C)),B.cancelled?(q&&jo(t,z),R&&R(t)):O&&O(t),t._enterCb=null}));n.data.show||Wn(n,"insert",(function(){var e=t.parentNode,r=e&&e._pending&&e._pending[n.key];r&&r.tag===n.tag&&r.elm._leaveCb&&r.elm._leaveCb(),M&&M(t,B)})),A&&A(t),q&&(ko(t,z),ko(t,C),wo((function(){jo(t,z),B.cancelled||(ko(t,E),L||(Eo(D)?setTimeout(B,D):To(t,i,B)))}))),n.data.show&&(e&&e(),M&&M(t,B)),q||L||B()}}}function Co(n,e){var t=n.elm;s(t._enterCb)&&(t._enterCb.cancelled=!0,t._enterCb());var r=mo(n.data.transition);if(a(r)||1!==t.nodeType)return e();if(!s(t._leaveCb)){var o=r.css,i=r.type,l=r.leaveClass,c=r.leaveToClass,d=r.leaveActiveClass,p=r.beforeLeave,m=r.leave,h=r.afterLeave,f=r.leaveCancelled,g=r.delayLeave,v=r.duration,y=!1!==o&&!Y,x=Ao(m),w=b(u(v)?v.leave:v);0;var k=t._leaveCb=N((function(){t.parentNode&&t.parentNode._pending&&(t.parentNode._pending[n.key]=null),y&&(jo(t,c),jo(t,d)),k.cancelled?(y&&jo(t,l),f&&f(t)):(e(),h&&h(t)),t._leaveCb=null}));g?g(j):j()}function j(){k.cancelled||(!n.data.show&&t.parentNode&&((t.parentNode._pending||(t.parentNode._pending={}))[n.key]=n),p&&p(t),y&&(ko(t,l),ko(t,d),wo((function(){jo(t,l),k.cancelled||(ko(t,c),x||(Eo(w)?setTimeout(k,w):To(t,i,k)))}))),m&&m(t,k),y||x||k())}}function Eo(n){return"number"==typeof n&&!isNaN(n)}function Ao(n){if(a(n))return!1;var e=n.fns;return s(e)?Ao(Array.isArray(e)?e[0]:e):(n._length||n.length)>1}function Mo(n,e){!0!==e.data.show&&zo(e)}var Oo=function(n){var e,t,r={},c=n.modules,u=n.nodeOps;for(e=0;e<Sr.length;++e)for(r[Sr[e]]=[],t=0;t<c.length;++t)s(c[t][Sr[e]])&&r[Sr[e]].push(c[t][Sr[e]]);function d(n){var e=u.parentNode(n);s(e)&&u.removeChild(e,n)}function p(n,e,t,o,a,l,c){if(s(n.elm)&&s(l)&&(n=l[c]=vn(n)),n.isRootInsert=!a,!function(n,e,t,o){var a=n.data;if(s(a)){var l=s(n.componentInstance)&&a.keepAlive;if(s(a=a.hook)&&s(a=a.init)&&a(n,!1),s(n.componentInstance))return m(n,e),h(t,n.elm,o),i(l)&&function(n,e,t,o){var a,i=n;for(;i.componentInstance;)if(i=i.componentInstance._vnode,s(a=i.data)&&s(a=a.transition)){for(a=0;a<r.activate.length;++a)r.activate[a](Tr,i);e.push(i);break}h(t,n.elm,o)}(n,e,t,o),!0}}(n,e,t,o)){var d=n.data,p=n.children,g=n.tag;s(g)?(n.elm=n.ns?u.createElementNS(n.ns,g):u.createElement(g,n),b(n),f(n,p,e),s(d)&&v(n,e),h(t,n.elm,o)):i(n.isComment)?(n.elm=u.createComment(n.text),h(t,n.elm,o)):(n.elm=u.createTextNode(n.text),h(t,n.elm,o))}}function m(n,e){s(n.data.pendingInsert)&&(e.push.apply(e,n.data.pendingInsert),n.data.pendingInsert=null),n.elm=n.componentInstance.$el,g(n)?(v(n,e),b(n)):(kr(n),e.push(n))}function h(n,e,t){s(n)&&(s(t)?u.parentNode(t)===n&&u.insertBefore(n,e,t):u.appendChild(n,e))}function f(n,e,t){if(o(e)){0;for(var r=0;r<e.length;++r)p(e[r],t,n.elm,null,!0,e,r)}else l(n.text)&&u.appendChild(n.elm,u.createTextNode(String(n.text)))}function g(n){for(;n.componentInstance;)n=n.componentInstance._vnode;return s(n.tag)}function v(n,t){for(var o=0;o<r.create.length;++o)r.create[o](Tr,n);s(e=n.data.hook)&&(s(e.create)&&e.create(Tr,n),s(e.insert)&&t.push(n))}function b(n){var e;if(s(e=n.fnScopeId))u.setStyleScope(n.elm,e);else for(var t=n;t;)s(e=t.context)&&s(e=e.$options._scopeId)&&u.setStyleScope(n.elm,e),t=t.parent;s(e=Ze)&&e!==n.context&&e!==n.fnContext&&s(e=e.$options._scopeId)&&u.setStyleScope(n.elm,e)}function x(n,e,t,r,o,a){for(;r<=o;++r)p(t[r],a,n,e,!1,t,r)}function w(n){var e,t,o=n.data;if(s(o))for(s(e=o.hook)&&s(e=e.destroy)&&e(n),e=0;e<r.destroy.length;++e)r.destroy[e](n);if(s(e=n.children))for(t=0;t<n.children.length;++t)w(n.children[t])}function k(n,e,t){for(;e<=t;++e){var r=n[e];s(r)&&(s(r.tag)?(j(r),w(r)):d(r.elm))}}function j(n,e){if(s(e)||s(n.data)){var t,o=r.remove.length+1;for(s(e)?e.listeners+=o:e=function(n,e){function t(){0==--t.listeners&&d(n)}return t.listeners=e,t}(n.elm,o),s(t=n.componentInstance)&&s(t=t._vnode)&&s(t.data)&&j(t,e),t=0;t<r.remove.length;++t)r.remove[t](n,e);s(t=n.data.hook)&&s(t=t.remove)?t(n,e):e()}else d(n.elm)}function T(n,e,t,r){for(var o=t;o<r;o++){var a=e[o];if(s(a)&&_r(n,a))return o}}function S(n,e,t,o,l,c){if(n!==e){s(e.elm)&&s(o)&&(e=o[l]=vn(e));var d=e.elm=n.elm;if(i(n.isAsyncPlaceholder))s(e.asyncFactory.resolved)?P(n.elm,e,t):e.isAsyncPlaceholder=!0;else if(i(e.isStatic)&&i(n.isStatic)&&e.key===n.key&&(i(e.isCloned)||i(e.isOnce)))e.componentInstance=n.componentInstance;else{var m,h=e.data;s(h)&&s(m=h.hook)&&s(m=m.prepatch)&&m(n,e);var f=n.children,v=e.children;if(s(h)&&g(e)){for(m=0;m<r.update.length;++m)r.update[m](n,e);s(m=h.hook)&&s(m=m.update)&&m(n,e)}a(e.text)?s(f)&&s(v)?f!==v&&function(n,e,t,r,o){var i,l,c,d=0,m=0,h=e.length-1,f=e[0],g=e[h],v=t.length-1,b=t[0],y=t[v],w=!o;for(0;d<=h&&m<=v;)a(f)?f=e[++d]:a(g)?g=e[--h]:_r(f,b)?(S(f,b,r,t,m),f=e[++d],b=t[++m]):_r(g,y)?(S(g,y,r,t,v),g=e[--h],y=t[--v]):_r(f,y)?(S(f,y,r,t,v),w&&u.insertBefore(n,f.elm,u.nextSibling(g.elm)),f=e[++d],y=t[--v]):_r(g,b)?(S(g,b,r,t,m),w&&u.insertBefore(n,g.elm,f.elm),g=e[--h],b=t[++m]):(a(i)&&(i=Ir(e,d,h)),a(l=s(b.key)?i[b.key]:T(b,e,d,h))?p(b,r,n,f.elm,!1,t,m):_r(c=e[l],b)?(S(c,b,r,t,m),e[l]=void 0,w&&u.insertBefore(n,c.elm,f.elm)):p(b,r,n,f.elm,!1,t,m),b=t[++m]);d>h?x(n,a(t[v+1])?null:t[v+1].elm,t,m,v,r):m>v&&k(e,d,h)}(d,f,v,t,c):s(v)?(s(n.text)&&u.setTextContent(d,""),x(d,null,v,0,v.length-1,t)):s(f)?k(f,0,f.length-1):s(n.text)&&u.setTextContent(d,""):n.text!==e.text&&u.setTextContent(d,e.text),s(h)&&s(m=h.hook)&&s(m=m.postpatch)&&m(n,e)}}}function _(n,e,t){if(i(t)&&s(n.parent))n.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var I=y("attrs,class,staticClass,staticStyle,key");function P(n,e,t,r){var o,a=e.tag,l=e.data,c=e.children;if(r=r||l&&l.pre,e.elm=n,i(e.isComment)&&s(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(s(l)&&(s(o=l.hook)&&s(o=o.init)&&o(e,!0),s(o=e.componentInstance)))return m(e,t),!0;if(s(a)){if(s(c))if(n.hasChildNodes())if(s(o=l)&&s(o=o.domProps)&&s(o=o.innerHTML)){if(o!==n.innerHTML)return!1}else{for(var u=!0,d=n.firstChild,p=0;p<c.length;p++){if(!d||!P(d,c[p],t,r)){u=!1;break}d=d.nextSibling}if(!u||d)return!1}else f(e,c,t);if(s(l)){var h=!1;for(var g in l)if(!I(g)){h=!0,v(e,t);break}!h&&l.class&&Fe(l.class)}}else n.data!==e.text&&(n.data=e.text);return!0}return function(n,e,t,o){if(!a(e)){var l,c=!1,d=[];if(a(n))c=!0,p(e,d);else{var m=s(n.nodeType);if(!m&&_r(n,e))S(n,e,d,null,null,o);else{if(m){if(1===n.nodeType&&n.hasAttribute("data-server-rendered")&&(n.removeAttribute("data-server-rendered"),t=!0),i(t)&&P(n,e,d))return _(e,d,!0),n;l=n,n=new hn(u.tagName(l).toLowerCase(),{},[],void 0,l)}var h=n.elm,f=u.parentNode(h);if(p(e,d,h._leaveCb?null:f,u.nextSibling(h)),s(e.parent))for(var v=e.parent,b=g(e);v;){for(var y=0;y<r.destroy.length;++y)r.destroy[y](v);if(v.elm=e.elm,b){for(var x=0;x<r.create.length;++x)r.create[x](Tr,v);var j=v.data.hook.insert;if(j.merged)for(var T=j.fns.slice(1),I=0;I<T.length;I++)T[I]()}else kr(v);v=v.parent}s(f)?k([n],0,0):s(n.tag)&&w(n)}}return _(e,d,c),e.elm}s(n)&&w(n)}}({nodeOps:xr,modules:[Lr,$r,Wr,Zr,lo,X?{create:Mo,activate:Mo,remove:function(n,e){!0!==n.data.show?Co(n,e):e()}}:{}].concat(Or)});Y&&document.addEventListener("selectionchange",(function(){var n=document.activeElement;n&&n.vmodel&&Vo(n,"input")}));var Ro={inserted:function(n,e,t,r){"select"===t.tag?(r.elm&&!r.elm._vOptions?Wn(t,"postpatch",(function(){Ro.componentUpdated(n,e,t)})):Do(n,e,t.context),n._vOptions=[].map.call(n.options,No)):("textarea"===t.tag||yr(n.type))&&(n._vModifiers=e.modifiers,e.modifiers.lazy||(n.addEventListener("compositionstart",Bo),n.addEventListener("compositionend",$o),n.addEventListener("change",$o),Y&&(n.vmodel=!0)))},componentUpdated:function(n,e,t){if("select"===t.tag){Do(n,e,t.context);var r=n._vOptions,o=n._vOptions=[].map.call(n.options,No);if(o.some((function(n,e){return!q(n,r[e])})))(n.multiple?e.value.some((function(n){return Lo(n,o)})):e.value!==e.oldValue&&Lo(e.value,o))&&Vo(n,"change")}}};function Do(n,e,t){qo(n,e,t),(Z||Q)&&setTimeout((function(){qo(n,e,t)}),0)}function qo(n,e,t){var r=e.value,o=n.multiple;if(!o||Array.isArray(r)){for(var a,s,i=0,l=n.options.length;i<l;i++)if(s=n.options[i],o)a=L(r,No(s))>-1,s.selected!==a&&(s.selected=a);else if(q(No(s),r))return void(n.selectedIndex!==i&&(n.selectedIndex=i));o||(n.selectedIndex=-1)}}function Lo(n,e){return e.every((function(e){return!q(e,n)}))}function No(n){return"_value"in n?n._value:n.value}function Bo(n){n.target.composing=!0}function $o(n){n.target.composing&&(n.target.composing=!1,Vo(n.target,"input"))}function Vo(n,e){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),n.dispatchEvent(t)}function Fo(n){return!n.componentInstance||n.data&&n.data.transition?n:Fo(n.componentInstance._vnode)}var Uo={model:Ro,show:{bind:function(n,e,t){var r=e.value,o=(t=Fo(t)).data&&t.data.transition,a=n.__vOriginalDisplay="none"===n.style.display?"":n.style.display;r&&o?(t.data.show=!0,zo(t,(function(){n.style.display=a}))):n.style.display=r?a:"none"},update:function(n,e,t){var r=e.value;!r!=!e.oldValue&&((t=Fo(t)).data&&t.data.transition?(t.data.show=!0,r?zo(t,(function(){n.style.display=n.__vOriginalDisplay})):Co(t,(function(){n.style.display="none"}))):n.style.display=r?n.__vOriginalDisplay:"none")},unbind:function(n,e,t,r,o){o||(n.style.display=n.__vOriginalDisplay)}}},Ho={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Jo(n){var e=n&&n.componentOptions;return e&&e.Ctor.options.abstract?Jo(Se(e.children)):n}function Go(n){var e={},t=n.$options;for(var r in t.propsData)e[r]=n[r];var o=t._parentListeners;for(var r in o)e[_(r)]=o[r];return e}function Wo(n,e){if(/\d-keep-alive$/.test(e.tag))return n("keep-alive",{props:e.componentOptions.propsData})}var Xo=function(n){return n.tag||fe(n)},Ko=function(n){return"show"===n.name},Zo={name:"transition",props:Ho,abstract:!0,render:function(n){var e=this,t=this.$slots.default;if(t&&(t=t.filter(Xo)).length){0;var r=this.mode;0;var o=t[0];if(function(n){for(;n=n.parent;)if(n.data.transition)return!0}(this.$vnode))return o;var a=Jo(o);if(!a)return o;if(this._leaving)return Wo(n,o);var s="__transition-".concat(this._uid,"-");a.key=null==a.key?a.isComment?s+"comment":s+a.tag:l(a.key)?0===String(a.key).indexOf(s)?a.key:s+a.key:a.key;var i=(a.data||(a.data={})).transition=Go(this),c=this._vnode,u=Jo(c);if(a.data.directives&&a.data.directives.some(Ko)&&(a.data.show=!0),u&&u.data&&!function(n,e){return e.key===n.key&&e.tag===n.tag}(a,u)&&!fe(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var d=u.data.transition=A({},i);if("out-in"===r)return this._leaving=!0,Wn(d,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),Wo(n,o);if("in-out"===r){if(fe(a))return c;var p,m=function(){p()};Wn(i,"afterEnter",m),Wn(i,"enterCancelled",m),Wn(d,"delayLeave",(function(n){p=n}))}}return o}}},Yo=A({tag:String,moveClass:String},Ho);function Qo(n){n.elm._moveCb&&n.elm._moveCb(),n.elm._enterCb&&n.elm._enterCb()}function na(n){n.data.newPos=n.elm.getBoundingClientRect()}function ea(n){var e=n.data.pos,t=n.data.newPos,r=e.left-t.left,o=e.top-t.top;if(r||o){n.data.moved=!0;var a=n.elm.style;a.transform=a.WebkitTransform="translate(".concat(r,"px,").concat(o,"px)"),a.transitionDuration="0s"}}delete Yo.mode;var ta={Transition:Zo,TransitionGroup:{props:Yo,beforeMount:function(){var n=this,e=this._update;this._update=function(t,r){var o=Ye(n);n.__patch__(n._vnode,n.kept,!1,!0),n._vnode=n.kept,o(),e.call(n,t,r)}},render:function(n){for(var e=this.tag||this.$vnode.data.tag||"span",t=Object.create(null),r=this.prevChildren=this.children,o=this.$slots.default||[],a=this.children=[],s=Go(this),i=0;i<o.length;i++){if((u=o[i]).tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))a.push(u),t[u.key]=u,(u.data||(u.data={})).transition=s;else;}if(r){var l=[],c=[];for(i=0;i<r.length;i++){var u;(u=r[i]).data.transition=s,u.data.pos=u.elm.getBoundingClientRect(),t[u.key]?l.push(u):c.push(u)}this.kept=n(e,null,l),this.removed=c}return n(e,null,a)},updated:function(){var n=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";n.length&&this.hasMove(n[0].elm,e)&&(n.forEach(Qo),n.forEach(na),n.forEach(ea),this._reflow=document.body.offsetHeight,n.forEach((function(n){if(n.data.moved){var t=n.elm,r=t.style;ko(t,e),r.transform=r.WebkitTransform=r.transitionDuration="",t.addEventListener(vo,t._moveCb=function n(r){r&&r.target!==t||r&&!/transform$/.test(r.propertyName)||(t.removeEventListener(vo,n),t._moveCb=null,jo(t,e))})}})))},methods:{hasMove:function(n,e){if(!fo)return!1;if(this._hasMove)return this._hasMove;var t=n.cloneNode();n._transitionClasses&&n._transitionClasses.forEach((function(n){po(t,n)})),uo(t,e),t.style.display="none",this.$el.appendChild(t);var r=_o(t);return this.$el.removeChild(t),this._hasMove=r.hasTransform}}}};function ra(n,e){for(var t in e)n[t]=e[t];return n}Gt.config.mustUseProp=function(n,e,t){return"value"===t&&tr(n)&&"button"!==e||"selected"===t&&"option"===n||"checked"===t&&"input"===n||"muted"===t&&"video"===n},Gt.config.isReservedTag=vr,Gt.config.isReservedAttr=er,Gt.config.getTagNamespace=function(n){return gr(n)?"svg":"math"===n?"math":void 0},Gt.config.isUnknownElement=function(n){if(!X)return!0;if(vr(n))return!1;if(n=n.toLowerCase(),null!=br[n])return br[n];var e=document.createElement(n);return n.indexOf("-")>-1?br[n]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:br[n]=/HTMLUnknownElement/.test(e.toString())},A(Gt.options.directives,Uo),A(Gt.options.components,ta),Gt.prototype.__patch__=X?Oo:O,Gt.prototype.$mount=function(n,e){return function(n,e,t){var r;n.$el=e,n.$options.render||(n.$options.render=fn),et(n,"beforeMount"),r=function(){n._update(n._render(),t)},new Je(n,r,O,{before:function(){n._isMounted&&!n._isDestroyed&&et(n,"beforeUpdate")}},!0),t=!1;var o=n._preWatchers;if(o)for(var a=0;a<o.length;a++)o[a].run();return null==n.$vnode&&(n._isMounted=!0,et(n,"mounted")),n}(this,n=n&&X?function(n){if("string"==typeof n){var e=document.querySelector(n);return e||document.createElement("div")}return n}(n):void 0,e)},X&&setTimeout((function(){F.devtools&&ln&&ln.emit("init",Gt)}),0);var oa=/[!'()*]/g,aa=function(n){return"%"+n.charCodeAt(0).toString(16)},sa=/%2C/g,ia=function(n){return encodeURIComponent(n).replace(oa,aa).replace(sa,",")};function la(n){try{return decodeURIComponent(n)}catch(n){0}return n}var ca=function(n){return null==n||"object"==typeof n?n:String(n)};function ua(n){var e={};return(n=n.trim().replace(/^(\?|#|&)/,""))?(n.split("&").forEach((function(n){var t=n.replace(/\+/g," ").split("="),r=la(t.shift()),o=t.length>0?la(t.join("=")):null;void 0===e[r]?e[r]=o:Array.isArray(e[r])?e[r].push(o):e[r]=[e[r],o]})),e):e}function da(n){var e=n?Object.keys(n).map((function(e){var t=n[e];if(void 0===t)return"";if(null===t)return ia(e);if(Array.isArray(t)){var r=[];return t.forEach((function(n){void 0!==n&&(null===n?r.push(ia(e)):r.push(ia(e)+"="+ia(n)))})),r.join("&")}return ia(e)+"="+ia(t)})).filter((function(n){return n.length>0})).join("&"):null;return e?"?"+e:""}var pa=/\/?$/;function ma(n,e,t,r){var o=r&&r.options.stringifyQuery,a=e.query||{};try{a=ha(a)}catch(n){}var s={name:e.name||n&&n.name,meta:n&&n.meta||{},path:e.path||"/",hash:e.hash||"",query:a,params:e.params||{},fullPath:va(e,o),matched:n?ga(n):[]};return t&&(s.redirectedFrom=va(t,o)),Object.freeze(s)}function ha(n){if(Array.isArray(n))return n.map(ha);if(n&&"object"==typeof n){var e={};for(var t in n)e[t]=ha(n[t]);return e}return n}var fa=ma(null,{path:"/"});function ga(n){for(var e=[];n;)e.unshift(n),n=n.parent;return e}function va(n,e){var t=n.path,r=n.query;void 0===r&&(r={});var o=n.hash;return void 0===o&&(o=""),(t||"/")+(e||da)(r)+o}function ba(n,e,t){return e===fa?n===e:!!e&&(n.path&&e.path?n.path.replace(pa,"")===e.path.replace(pa,"")&&(t||n.hash===e.hash&&ya(n.query,e.query)):!(!n.name||!e.name)&&(n.name===e.name&&(t||n.hash===e.hash&&ya(n.query,e.query)&&ya(n.params,e.params))))}function ya(n,e){if(void 0===n&&(n={}),void 0===e&&(e={}),!n||!e)return n===e;var t=Object.keys(n).sort(),r=Object.keys(e).sort();return t.length===r.length&&t.every((function(t,o){var a=n[t];if(r[o]!==t)return!1;var s=e[t];return null==a||null==s?a===s:"object"==typeof a&&"object"==typeof s?ya(a,s):String(a)===String(s)}))}function xa(n){for(var e=0;e<n.matched.length;e++){var t=n.matched[e];for(var r in t.instances){var o=t.instances[r],a=t.enteredCbs[r];if(o&&a){delete t.enteredCbs[r];for(var s=0;s<a.length;s++)o._isBeingDestroyed||a[s](o)}}}}var wa={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(n,e){var t=e.props,r=e.children,o=e.parent,a=e.data;a.routerView=!0;for(var s=o.$createElement,i=t.name,l=o.$route,c=o._routerViewCache||(o._routerViewCache={}),u=0,d=!1;o&&o._routerRoot!==o;){var p=o.$vnode?o.$vnode.data:{};p.routerView&&u++,p.keepAlive&&o._directInactive&&o._inactive&&(d=!0),o=o.$parent}if(a.routerViewDepth=u,d){var m=c[i],h=m&&m.component;return h?(m.configProps&&ka(h,a,m.route,m.configProps),s(h,a,r)):s()}var f=l.matched[u],g=f&&f.components[i];if(!f||!g)return c[i]=null,s();c[i]={component:g},a.registerRouteInstance=function(n,e){var t=f.instances[i];(e&&t!==n||!e&&t===n)&&(f.instances[i]=e)},(a.hook||(a.hook={})).prepatch=function(n,e){f.instances[i]=e.componentInstance},a.hook.init=function(n){n.data.keepAlive&&n.componentInstance&&n.componentInstance!==f.instances[i]&&(f.instances[i]=n.componentInstance),xa(l)};var v=f.props&&f.props[i];return v&&(ra(c[i],{route:l,configProps:v}),ka(g,a,l,v)),s(g,a,r)}};function ka(n,e,t,r){var o=e.props=function(n,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(n);case"boolean":return e?n.params:void 0;default:0}}(t,r);if(o){o=e.props=ra({},o);var a=e.attrs=e.attrs||{};for(var s in o)n.props&&s in n.props||(a[s]=o[s],delete o[s])}}function ja(n,e,t){var r=n.charAt(0);if("/"===r)return n;if("?"===r||"#"===r)return e+n;var o=e.split("/");t&&o[o.length-1]||o.pop();for(var a=n.replace(/^\//,"").split("/"),s=0;s<a.length;s++){var i=a[s];".."===i?o.pop():"."!==i&&o.push(i)}return""!==o[0]&&o.unshift(""),o.join("/")}function Ta(n){return n.replace(/\/(?:\s*\/)+/g,"/")}var Sa=Array.isArray||function(n){return"[object Array]"==Object.prototype.toString.call(n)},_a=Ba,Ia=Aa,Pa=function(n,e){return Oa(Aa(n,e),e)},za=Oa,Ca=Na,Ea=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Aa(n,e){for(var t,r=[],o=0,a=0,s="",i=e&&e.delimiter||"/";null!=(t=Ea.exec(n));){var l=t[0],c=t[1],u=t.index;if(s+=n.slice(a,u),a=u+l.length,c)s+=c[1];else{var d=n[a],p=t[2],m=t[3],h=t[4],f=t[5],g=t[6],v=t[7];s&&(r.push(s),s="");var b=null!=p&&null!=d&&d!==p,y="+"===g||"*"===g,x="?"===g||"*"===g,w=t[2]||i,k=h||f;r.push({name:m||o++,prefix:p||"",delimiter:w,optional:x,repeat:y,partial:b,asterisk:!!v,pattern:k?Da(k):v?".*":"[^"+Ra(w)+"]+?"})}}return a<n.length&&(s+=n.substr(a)),s&&r.push(s),r}function Ma(n){return encodeURI(n).replace(/[\/?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()}))}function Oa(n,e){for(var t=new Array(n.length),r=0;r<n.length;r++)"object"==typeof n[r]&&(t[r]=new RegExp("^(?:"+n[r].pattern+")$",La(e)));return function(e,r){for(var o="",a=e||{},s=(r||{}).pretty?Ma:encodeURIComponent,i=0;i<n.length;i++){var l=n[i];if("string"!=typeof l){var c,u=a[l.name];if(null==u){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(Sa(u)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<u.length;d++){if(c=s(u[d]),!t[i].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(c)+"`");o+=(0===d?l.prefix:l.delimiter)+c}}else{if(c=l.asterisk?encodeURI(u).replace(/[?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})):s(u),!t[i].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+c+'"');o+=l.prefix+c}}else o+=l}return o}}function Ra(n){return n.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Da(n){return n.replace(/([=!:$\/()])/g,"\\$1")}function qa(n,e){return n.keys=e,n}function La(n){return n&&n.sensitive?"":"i"}function Na(n,e,t){Sa(e)||(t=e||t,e=[]);for(var r=(t=t||{}).strict,o=!1!==t.end,a="",s=0;s<n.length;s++){var i=n[s];if("string"==typeof i)a+=Ra(i);else{var l=Ra(i.prefix),c="(?:"+i.pattern+")";e.push(i),i.repeat&&(c+="(?:"+l+c+")*"),a+=c=i.optional?i.partial?l+"("+c+")?":"(?:"+l+"("+c+"))?":l+"("+c+")"}}var u=Ra(t.delimiter||"/"),d=a.slice(-u.length)===u;return r||(a=(d?a.slice(0,-u.length):a)+"(?:"+u+"(?=$))?"),a+=o?"$":r&&d?"":"(?="+u+"|$)",qa(new RegExp("^"+a,La(t)),e)}function Ba(n,e,t){return Sa(e)||(t=e||t,e=[]),t=t||{},n instanceof RegExp?function(n,e){var t=n.source.match(/\((?!\?)/g);if(t)for(var r=0;r<t.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return qa(n,e)}(n,e):Sa(n)?function(n,e,t){for(var r=[],o=0;o<n.length;o++)r.push(Ba(n[o],e,t).source);return qa(new RegExp("(?:"+r.join("|")+")",La(t)),e)}(n,e,t):function(n,e,t){return Na(Aa(n,t),e,t)}(n,e,t)}_a.parse=Ia,_a.compile=Pa,_a.tokensToFunction=za,_a.tokensToRegExp=Ca;var $a=Object.create(null);function Va(n,e,t){e=e||{};try{var r=$a[n]||($a[n]=_a.compile(n));return"string"==typeof e.pathMatch&&(e[0]=e.pathMatch),r(e,{pretty:!0})}catch(n){return""}finally{delete e[0]}}function Fa(n,e,t,r){var o="string"==typeof n?{path:n}:n;if(o._normalized)return o;if(o.name){var a=(o=ra({},n)).params;return a&&"object"==typeof a&&(o.params=ra({},a)),o}if(!o.path&&o.params&&e){(o=ra({},o))._normalized=!0;var s=ra(ra({},e.params),o.params);if(e.name)o.name=e.name,o.params=s;else if(e.matched.length){var i=e.matched[e.matched.length-1].path;o.path=Va(i,s,e.path)}else 0;return o}var l=function(n){var e="",t="",r=n.indexOf("#");r>=0&&(e=n.slice(r),n=n.slice(0,r));var o=n.indexOf("?");return o>=0&&(t=n.slice(o+1),n=n.slice(0,o)),{path:n,query:t,hash:e}}(o.path||""),c=e&&e.path||"/",u=l.path?ja(l.path,c,t||o.append):c,d=function(n,e,t){void 0===e&&(e={});var r,o=t||ua;try{r=o(n||"")}catch(n){r={}}for(var a in e){var s=e[a];r[a]=Array.isArray(s)?s.map(ca):ca(s)}return r}(l.query,o.query,r&&r.options.parseQuery),p=o.hash||l.hash;return p&&"#"!==p.charAt(0)&&(p="#"+p),{_normalized:!0,path:u,query:d,hash:p}}var Ua,Ha=function(){},Ja={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(n){var e=this,t=this.$router,r=this.$route,o=t.resolve(this.to,r,this.append),a=o.location,s=o.route,i=o.href,l={},c=t.options.linkActiveClass,u=t.options.linkExactActiveClass,d=null==c?"router-link-active":c,p=null==u?"router-link-exact-active":u,m=null==this.activeClass?d:this.activeClass,h=null==this.exactActiveClass?p:this.exactActiveClass,f=s.redirectedFrom?ma(null,Fa(s.redirectedFrom),null,t):s;l[h]=ba(r,f,this.exactPath),l[m]=this.exact||this.exactPath?l[h]:function(n,e){return 0===n.path.replace(pa,"/").indexOf(e.path.replace(pa,"/"))&&(!e.hash||n.hash===e.hash)&&function(n,e){for(var t in e)if(!(t in n))return!1;return!0}(n.query,e.query)}(r,f);var g=l[h]?this.ariaCurrentValue:null,v=function(n){Ga(n)&&(e.replace?t.replace(a,Ha):t.push(a,Ha))},b={click:Ga};Array.isArray(this.event)?this.event.forEach((function(n){b[n]=v})):b[this.event]=v;var y={class:l},x=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:i,route:s,navigate:v,isActive:l[m],isExactActive:l[h]});if(x){if(1===x.length)return x[0];if(x.length>1||!x.length)return 0===x.length?n():n("span",{},x)}if("a"===this.tag)y.on=b,y.attrs={href:i,"aria-current":g};else{var w=function n(e){var t;if(e)for(var r=0;r<e.length;r++){if("a"===(t=e[r]).tag)return t;if(t.children&&(t=n(t.children)))return t}}(this.$slots.default);if(w){w.isStatic=!1;var k=w.data=ra({},w.data);for(var j in k.on=k.on||{},k.on){var T=k.on[j];j in b&&(k.on[j]=Array.isArray(T)?T:[T])}for(var S in b)S in k.on?k.on[S].push(b[S]):k.on[S]=v;var _=w.data.attrs=ra({},w.data.attrs);_.href=i,_["aria-current"]=g}else y.on=b}return n(this.tag,y,this.$slots.default)}};function Ga(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey||n.defaultPrevented||void 0!==n.button&&0!==n.button)){if(n.currentTarget&&n.currentTarget.getAttribute){var e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}var Wa="undefined"!=typeof window;function Xa(n,e,t,r,o){var a=e||[],s=t||Object.create(null),i=r||Object.create(null);n.forEach((function(n){!function n(e,t,r,o,a,s){var i=o.path,l=o.name;0;var c=o.pathToRegexpOptions||{},u=function(n,e,t){t||(n=n.replace(/\/$/,""));if("/"===n[0])return n;if(null==e)return n;return Ta(e.path+"/"+n)}(i,a,c.strict);"boolean"==typeof o.caseSensitive&&(c.sensitive=o.caseSensitive);var d={path:u,regex:Ka(u,c),components:o.components||{default:o.component},alias:o.alias?"string"==typeof o.alias?[o.alias]:o.alias:[],instances:{},enteredCbs:{},name:l,parent:a,matchAs:s,redirect:o.redirect,beforeEnter:o.beforeEnter,meta:o.meta||{},props:null==o.props?{}:o.components?o.props:{default:o.props}};o.children&&o.children.forEach((function(o){var a=s?Ta(s+"/"+o.path):void 0;n(e,t,r,o,d,a)}));t[d.path]||(e.push(d.path),t[d.path]=d);if(void 0!==o.alias)for(var p=Array.isArray(o.alias)?o.alias:[o.alias],m=0;m<p.length;++m){0;var h={path:p[m],children:o.children};n(e,t,r,h,a,d.path||"/")}l&&(r[l]||(r[l]=d))}(a,s,i,n,o)}));for(var l=0,c=a.length;l<c;l++)"*"===a[l]&&(a.push(a.splice(l,1)[0]),c--,l--);return{pathList:a,pathMap:s,nameMap:i}}function Ka(n,e){return _a(n,[],e)}function Za(n,e){var t=Xa(n),r=t.pathList,o=t.pathMap,a=t.nameMap;function s(n,t,s){var i=Fa(n,t,!1,e),c=i.name;if(c){var u=a[c];if(!u)return l(null,i);var d=u.regex.keys.filter((function(n){return!n.optional})).map((function(n){return n.name}));if("object"!=typeof i.params&&(i.params={}),t&&"object"==typeof t.params)for(var p in t.params)!(p in i.params)&&d.indexOf(p)>-1&&(i.params[p]=t.params[p]);return i.path=Va(u.path,i.params),l(u,i,s)}if(i.path){i.params={};for(var m=0;m<r.length;m++){var h=r[m],f=o[h];if(Ya(f.regex,i.path,i.params))return l(f,i,s)}}return l(null,i)}function i(n,t){var r=n.redirect,o="function"==typeof r?r(ma(n,t,null,e)):r;if("string"==typeof o&&(o={path:o}),!o||"object"!=typeof o)return l(null,t);var i=o,c=i.name,u=i.path,d=t.query,p=t.hash,m=t.params;if(d=i.hasOwnProperty("query")?i.query:d,p=i.hasOwnProperty("hash")?i.hash:p,m=i.hasOwnProperty("params")?i.params:m,c){a[c];return s({_normalized:!0,name:c,query:d,hash:p,params:m},void 0,t)}if(u){var h=function(n,e){return ja(n,e.parent?e.parent.path:"/",!0)}(u,n);return s({_normalized:!0,path:Va(h,m),query:d,hash:p},void 0,t)}return l(null,t)}function l(n,t,r){return n&&n.redirect?i(n,r||t):n&&n.matchAs?function(n,e,t){var r=s({_normalized:!0,path:Va(t,e.params)});if(r){var o=r.matched,a=o[o.length-1];return e.params=r.params,l(a,e)}return l(null,e)}(0,t,n.matchAs):ma(n,t,r,e)}return{match:s,addRoute:function(n,e){var t="object"!=typeof n?a[n]:void 0;Xa([e||n],r,o,a,t),t&&t.alias.length&&Xa(t.alias.map((function(n){return{path:n,children:[e]}})),r,o,a,t)},getRoutes:function(){return r.map((function(n){return o[n]}))},addRoutes:function(n){Xa(n,r,o,a)}}}function Ya(n,e,t){var r=e.match(n);if(!r)return!1;if(!t)return!0;for(var o=1,a=r.length;o<a;++o){var s=n.keys[o-1];s&&(t[s.name||"pathMatch"]="string"==typeof r[o]?la(r[o]):r[o])}return!0}var Qa=Wa&&window.performance&&window.performance.now?window.performance:Date;function ns(){return Qa.now().toFixed(3)}var es=ns();function ts(){return es}function rs(n){return es=n}var os=Object.create(null);function as(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var n=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(n,""),t=ra({},window.history.state);return t.key=ts(),window.history.replaceState(t,"",e),window.addEventListener("popstate",ls),function(){window.removeEventListener("popstate",ls)}}function ss(n,e,t,r){if(n.app){var o=n.options.scrollBehavior;o&&n.app.$nextTick((function(){var a=function(){var n=ts();if(n)return os[n]}(),s=o.call(n,e,t,r?a:null);s&&("function"==typeof s.then?s.then((function(n){ms(n,a)})).catch((function(n){0})):ms(s,a))}))}}function is(){var n=ts();n&&(os[n]={x:window.pageXOffset,y:window.pageYOffset})}function ls(n){is(),n.state&&n.state.key&&rs(n.state.key)}function cs(n){return ds(n.x)||ds(n.y)}function us(n){return{x:ds(n.x)?n.x:window.pageXOffset,y:ds(n.y)?n.y:window.pageYOffset}}function ds(n){return"number"==typeof n}var ps=/^#\d/;function ms(n,e){var t,r="object"==typeof n;if(r&&"string"==typeof n.selector){var o=ps.test(n.selector)?document.getElementById(n.selector.slice(1)):document.querySelector(n.selector);if(o){var a=n.offset&&"object"==typeof n.offset?n.offset:{};e=function(n,e){var t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{x:r.left-t.left-e.x,y:r.top-t.top-e.y}}(o,a={x:ds((t=a).x)?t.x:0,y:ds(t.y)?t.y:0})}else cs(n)&&(e=us(n))}else r&&cs(n)&&(e=us(n));e&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:e.x,top:e.y,behavior:n.behavior}):window.scrollTo(e.x,e.y))}var hs,fs=Wa&&((-1===(hs=window.navigator.userAgent).indexOf("Android 2.")&&-1===hs.indexOf("Android 4.0")||-1===hs.indexOf("Mobile Safari")||-1!==hs.indexOf("Chrome")||-1!==hs.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function gs(n,e){is();var t=window.history;try{if(e){var r=ra({},t.state);r.key=ts(),t.replaceState(r,"",n)}else t.pushState({key:rs(ns())},"",n)}catch(t){window.location[e?"replace":"assign"](n)}}function vs(n){gs(n,!0)}var bs={redirected:2,aborted:4,cancelled:8,duplicated:16};function ys(n,e){return ws(n,e,bs.redirected,'Redirected when going from "'+n.fullPath+'" to "'+function(n){if("string"==typeof n)return n;if("path"in n)return n.path;var e={};return ks.forEach((function(t){t in n&&(e[t]=n[t])})),JSON.stringify(e,null,2)}(e)+'" via a navigation guard.')}function xs(n,e){return ws(n,e,bs.cancelled,'Navigation cancelled from "'+n.fullPath+'" to "'+e.fullPath+'" with a new navigation.')}function ws(n,e,t,r){var o=new Error(r);return o._isRouter=!0,o.from=n,o.to=e,o.type=t,o}var ks=["params","query","hash"];function js(n){return Object.prototype.toString.call(n).indexOf("Error")>-1}function Ts(n,e){return js(n)&&n._isRouter&&(null==e||n.type===e)}function Ss(n,e,t){var r=function(o){o>=n.length?t():n[o]?e(n[o],(function(){r(o+1)})):r(o+1)};r(0)}function _s(n){return function(e,t,r){var o=!1,a=0,s=null;Is(n,(function(n,e,t,i){if("function"==typeof n&&void 0===n.cid){o=!0,a++;var l,c=Cs((function(e){var o;((o=e).__esModule||zs&&"Module"===o[Symbol.toStringTag])&&(e=e.default),n.resolved="function"==typeof e?e:Ua.extend(e),t.components[i]=e,--a<=0&&r()})),u=Cs((function(n){var e="Failed to resolve async component "+i+": "+n;s||(s=js(n)?n:new Error(e),r(s))}));try{l=n(c,u)}catch(n){u(n)}if(l)if("function"==typeof l.then)l.then(c,u);else{var d=l.component;d&&"function"==typeof d.then&&d.then(c,u)}}})),o||r()}}function Is(n,e){return Ps(n.map((function(n){return Object.keys(n.components).map((function(t){return e(n.components[t],n.instances[t],n,t)}))})))}function Ps(n){return Array.prototype.concat.apply([],n)}var zs="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function Cs(n){var e=!1;return function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(!e)return e=!0,n.apply(this,t)}}var Es=function(n,e){this.router=n,this.base=function(n){if(!n)if(Wa){var e=document.querySelector("base");n=(n=e&&e.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else n="/";"/"!==n.charAt(0)&&(n="/"+n);return n.replace(/\/$/,"")}(e),this.current=fa,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function As(n,e,t,r){var o=Is(n,(function(n,r,o,a){var s=function(n,e){"function"!=typeof n&&(n=Ua.extend(n));return n.options[e]}(n,e);if(s)return Array.isArray(s)?s.map((function(n){return t(n,r,o,a)})):t(s,r,o,a)}));return Ps(r?o.reverse():o)}function Ms(n,e){if(e)return function(){return n.apply(e,arguments)}}Es.prototype.listen=function(n){this.cb=n},Es.prototype.onReady=function(n,e){this.ready?n():(this.readyCbs.push(n),e&&this.readyErrorCbs.push(e))},Es.prototype.onError=function(n){this.errorCbs.push(n)},Es.prototype.transitionTo=function(n,e,t){var r,o=this;try{r=this.router.match(n,this.current)}catch(n){throw this.errorCbs.forEach((function(e){e(n)})),n}var a=this.current;this.confirmTransition(r,(function(){o.updateRoute(r),e&&e(r),o.ensureURL(),o.router.afterHooks.forEach((function(n){n&&n(r,a)})),o.ready||(o.ready=!0,o.readyCbs.forEach((function(n){n(r)})))}),(function(n){t&&t(n),n&&!o.ready&&(Ts(n,bs.redirected)&&a===fa||(o.ready=!0,o.readyErrorCbs.forEach((function(e){e(n)}))))}))},Es.prototype.confirmTransition=function(n,e,t){var r=this,o=this.current;this.pending=n;var a,s,i=function(n){!Ts(n)&&js(n)&&(r.errorCbs.length?r.errorCbs.forEach((function(e){e(n)})):console.error(n)),t&&t(n)},l=n.matched.length-1,c=o.matched.length-1;if(ba(n,o)&&l===c&&n.matched[l]===o.matched[c])return this.ensureURL(),n.hash&&ss(this.router,o,n,!1),i(((s=ws(a=o,n,bs.duplicated,'Avoided redundant navigation to current location: "'+a.fullPath+'".')).name="NavigationDuplicated",s));var u=function(n,e){var t,r=Math.max(n.length,e.length);for(t=0;t<r&&n[t]===e[t];t++);return{updated:e.slice(0,t),activated:e.slice(t),deactivated:n.slice(t)}}(this.current.matched,n.matched),d=u.updated,p=u.deactivated,m=u.activated,h=[].concat(function(n){return As(n,"beforeRouteLeave",Ms,!0)}(p),this.router.beforeHooks,function(n){return As(n,"beforeRouteUpdate",Ms)}(d),m.map((function(n){return n.beforeEnter})),_s(m)),f=function(e,t){if(r.pending!==n)return i(xs(o,n));try{e(n,o,(function(e){!1===e?(r.ensureURL(!0),i(function(n,e){return ws(n,e,bs.aborted,'Navigation aborted from "'+n.fullPath+'" to "'+e.fullPath+'" via a navigation guard.')}(o,n))):js(e)?(r.ensureURL(!0),i(e)):"string"==typeof e||"object"==typeof e&&("string"==typeof e.path||"string"==typeof e.name)?(i(ys(o,n)),"object"==typeof e&&e.replace?r.replace(e):r.push(e)):t(e)}))}catch(n){i(n)}};Ss(h,f,(function(){Ss(function(n){return As(n,"beforeRouteEnter",(function(n,e,t,r){return function(n,e,t){return function(r,o,a){return n(r,o,(function(n){"function"==typeof n&&(e.enteredCbs[t]||(e.enteredCbs[t]=[]),e.enteredCbs[t].push(n)),a(n)}))}}(n,t,r)}))}(m).concat(r.router.resolveHooks),f,(function(){if(r.pending!==n)return i(xs(o,n));r.pending=null,e(n),r.router.app&&r.router.app.$nextTick((function(){xa(n)}))}))}))},Es.prototype.updateRoute=function(n){this.current=n,this.cb&&this.cb(n)},Es.prototype.setupListeners=function(){},Es.prototype.teardown=function(){this.listeners.forEach((function(n){n()})),this.listeners=[],this.current=fa,this.pending=null};var Os=function(n){function e(e,t){n.call(this,e,t),this._startLocation=Rs(this.base)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router,t=e.options.scrollBehavior,r=fs&&t;r&&this.listeners.push(as());var o=function(){var t=n.current,o=Rs(n.base);n.current===fa&&o===n._startLocation||n.transitionTo(o,(function(n){r&&ss(e,n,t,!0)}))};window.addEventListener("popstate",o),this.listeners.push((function(){window.removeEventListener("popstate",o)}))}},e.prototype.go=function(n){window.history.go(n)},e.prototype.push=function(n,e,t){var r=this,o=this.current;this.transitionTo(n,(function(n){gs(Ta(r.base+n.fullPath)),ss(r.router,n,o,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this,o=this.current;this.transitionTo(n,(function(n){vs(Ta(r.base+n.fullPath)),ss(r.router,n,o,!1),e&&e(n)}),t)},e.prototype.ensureURL=function(n){if(Rs(this.base)!==this.current.fullPath){var e=Ta(this.base+this.current.fullPath);n?gs(e):vs(e)}},e.prototype.getCurrentLocation=function(){return Rs(this.base)},e}(Es);function Rs(n){var e=window.location.pathname,t=e.toLowerCase(),r=n.toLowerCase();return!n||t!==r&&0!==t.indexOf(Ta(r+"/"))||(e=e.slice(n.length)),(e||"/")+window.location.search+window.location.hash}var Ds=function(n){function e(e,t,r){n.call(this,e,t),r&&function(n){var e=Rs(n);if(!/^\/#/.test(e))return window.location.replace(Ta(n+"/#"+e)),!0}(this.base)||qs()}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router.options.scrollBehavior,t=fs&&e;t&&this.listeners.push(as());var r=function(){var e=n.current;qs()&&n.transitionTo(Ls(),(function(r){t&&ss(n.router,r,e,!0),fs||$s(r.fullPath)}))},o=fs?"popstate":"hashchange";window.addEventListener(o,r),this.listeners.push((function(){window.removeEventListener(o,r)}))}},e.prototype.push=function(n,e,t){var r=this,o=this.current;this.transitionTo(n,(function(n){Bs(n.fullPath),ss(r.router,n,o,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this,o=this.current;this.transitionTo(n,(function(n){$s(n.fullPath),ss(r.router,n,o,!1),e&&e(n)}),t)},e.prototype.go=function(n){window.history.go(n)},e.prototype.ensureURL=function(n){var e=this.current.fullPath;Ls()!==e&&(n?Bs(e):$s(e))},e.prototype.getCurrentLocation=function(){return Ls()},e}(Es);function qs(){var n=Ls();return"/"===n.charAt(0)||($s("/"+n),!1)}function Ls(){var n=window.location.href,e=n.indexOf("#");return e<0?"":n=n.slice(e+1)}function Ns(n){var e=window.location.href,t=e.indexOf("#");return(t>=0?e.slice(0,t):e)+"#"+n}function Bs(n){fs?gs(Ns(n)):window.location.hash=n}function $s(n){fs?vs(Ns(n)):window.location.replace(Ns(n))}var Vs=function(n){function e(e,t){n.call(this,e,t),this.stack=[],this.index=-1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.push=function(n,e,t){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index+1).concat(n),r.index++,e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index).concat(n),e&&e(n)}),t)},e.prototype.go=function(n){var e=this,t=this.index+n;if(!(t<0||t>=this.stack.length)){var r=this.stack[t];this.confirmTransition(r,(function(){var n=e.current;e.index=t,e.updateRoute(r),e.router.afterHooks.forEach((function(e){e&&e(r,n)}))}),(function(n){Ts(n,bs.duplicated)&&(e.index=t)}))}},e.prototype.getCurrentLocation=function(){var n=this.stack[this.stack.length-1];return n?n.fullPath:"/"},e.prototype.ensureURL=function(){},e}(Es),Fs=function(n){void 0===n&&(n={}),this.app=null,this.apps=[],this.options=n,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=Za(n.routes||[],this);var e=n.mode||"hash";switch(this.fallback="history"===e&&!fs&&!1!==n.fallback,this.fallback&&(e="hash"),Wa||(e="abstract"),this.mode=e,e){case"history":this.history=new Os(this,n.base);break;case"hash":this.history=new Ds(this,n.base,this.fallback);break;case"abstract":this.history=new Vs(this,n.base);break;default:0}},Us={currentRoute:{configurable:!0}};Fs.prototype.match=function(n,e,t){return this.matcher.match(n,e,t)},Us.currentRoute.get=function(){return this.history&&this.history.current},Fs.prototype.init=function(n){var e=this;if(this.apps.push(n),n.$once("hook:destroyed",(function(){var t=e.apps.indexOf(n);t>-1&&e.apps.splice(t,1),e.app===n&&(e.app=e.apps[0]||null),e.app||e.history.teardown()})),!this.app){this.app=n;var t=this.history;if(t instanceof Os||t instanceof Ds){var r=function(n){t.setupListeners(),function(n){var r=t.current,o=e.options.scrollBehavior;fs&&o&&"fullPath"in n&&ss(e,n,r,!1)}(n)};t.transitionTo(t.getCurrentLocation(),r,r)}t.listen((function(n){e.apps.forEach((function(e){e._route=n}))}))}},Fs.prototype.beforeEach=function(n){return Js(this.beforeHooks,n)},Fs.prototype.beforeResolve=function(n){return Js(this.resolveHooks,n)},Fs.prototype.afterEach=function(n){return Js(this.afterHooks,n)},Fs.prototype.onReady=function(n,e){this.history.onReady(n,e)},Fs.prototype.onError=function(n){this.history.onError(n)},Fs.prototype.push=function(n,e,t){var r=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){r.history.push(n,e,t)}));this.history.push(n,e,t)},Fs.prototype.replace=function(n,e,t){var r=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){r.history.replace(n,e,t)}));this.history.replace(n,e,t)},Fs.prototype.go=function(n){this.history.go(n)},Fs.prototype.back=function(){this.go(-1)},Fs.prototype.forward=function(){this.go(1)},Fs.prototype.getMatchedComponents=function(n){var e=n?n.matched?n:this.resolve(n).route:this.currentRoute;return e?[].concat.apply([],e.matched.map((function(n){return Object.keys(n.components).map((function(e){return n.components[e]}))}))):[]},Fs.prototype.resolve=function(n,e,t){var r=Fa(n,e=e||this.history.current,t,this),o=this.match(r,e),a=o.redirectedFrom||o.fullPath;return{location:r,route:o,href:function(n,e,t){var r="hash"===t?"#"+e:e;return n?Ta(n+"/"+r):r}(this.history.base,a,this.mode),normalizedTo:r,resolved:o}},Fs.prototype.getRoutes=function(){return this.matcher.getRoutes()},Fs.prototype.addRoute=function(n,e){this.matcher.addRoute(n,e),this.history.current!==fa&&this.history.transitionTo(this.history.getCurrentLocation())},Fs.prototype.addRoutes=function(n){this.matcher.addRoutes(n),this.history.current!==fa&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(Fs.prototype,Us);var Hs=Fs;function Js(n,e){return n.push(e),function(){var t=n.indexOf(e);t>-1&&n.splice(t,1)}}Fs.install=function n(e){if(!n.installed||Ua!==e){n.installed=!0,Ua=e;var t=function(n){return void 0!==n},r=function(n,e){var r=n.$options._parentVnode;t(r)&&t(r=r.data)&&t(r=r.registerRouteInstance)&&r(n,e)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,r(this,this)},destroyed:function(){r(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",wa),e.component("RouterLink",Ja);var o=e.config.optionMergeStrategies;o.beforeRouteEnter=o.beforeRouteLeave=o.beforeRouteUpdate=o.created}},Fs.version="3.6.5",Fs.isNavigationFailure=Ts,Fs.NavigationFailureType=bs,Fs.START_LOCATION=fa,Wa&&window.Vue&&window.Vue.use(Fs);t(100);t(122),t(89);var Gs={"components/AlgoliaSearchBox":()=>Promise.all([t.e(0),t.e(23)]).then(t.bind(null,535)),"components/DropdownLink":()=>Promise.all([t.e(0),t.e(24)]).then(t.bind(null,254)),"components/DropdownTransition":()=>Promise.all([t.e(0),t.e(44)]).then(t.bind(null,242)),"components/Home":()=>Promise.all([t.e(0),t.e(37)]).then(t.bind(null,286)),"components/NavLink":()=>t.e(52).then(t.bind(null,241)),"components/NavLinks":()=>Promise.all([t.e(0),t.e(18)]).then(t.bind(null,266)),"components/Navbar":()=>Promise.all([t.e(0),t.e(1)]).then(t.bind(null,532)),"components/Page":()=>Promise.all([t.e(0),t.e(17)]).then(t.bind(null,287)),"components/PageEdit":()=>Promise.all([t.e(0),t.e(38)]).then(t.bind(null,268)),"components/PageNav":()=>Promise.all([t.e(0),t.e(31)]).then(t.bind(null,269)),"components/Sidebar":()=>Promise.all([t.e(0),t.e(10)]).then(t.bind(null,288)),"components/SidebarButton":()=>Promise.all([t.e(0),t.e(45)]).then(t.bind(null,289)),"components/SidebarGroup":()=>Promise.all([t.e(0),t.e(3)]).then(t.bind(null,267)),"components/SidebarLink":()=>Promise.all([t.e(0),t.e(41)]).then(t.bind(null,255)),"components/SidebarLinks":()=>Promise.all([t.e(0),t.e(3)]).then(t.bind(null,253)),"global-components/Badge":()=>Promise.all([t.e(0),t.e(4)]).then(t.bind(null,540)),"global-components/CodeBlock":()=>Promise.all([t.e(0),t.e(5)]).then(t.bind(null,536)),"global-components/CodeGroup":()=>Promise.all([t.e(0),t.e(6)]).then(t.bind(null,537)),"layouts/404":()=>t.e(7).then(t.bind(null,538)),"layouts/Layout":()=>Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.bind(null,539)),NotFound:()=>t.e(7).then(t.bind(null,538)),Layout:()=>Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.bind(null,539))},Ws={"v-c1dabb48":()=>t.e(63).then(t.bind(null,541)),"v-1d3fcc5f":()=>t.e(64).then(t.bind(null,542)),"v-a184f442":()=>t.e(66).then(t.bind(null,543)),"v-75ce495f":()=>t.e(65).then(t.bind(null,544)),"v-8bc9b32a":()=>t.e(67).then(t.bind(null,545)),"v-8eba8a22":()=>t.e(68).then(t.bind(null,546)),"v-a9b7d16e":()=>t.e(72).then(t.bind(null,547)),"v-efe7e982":()=>t.e(69).then(t.bind(null,548)),"v-da398842":()=>t.e(73).then(t.bind(null,549)),"v-1901b0ef":()=>t.e(70).then(t.bind(null,550)),"v-7e657abf":()=>t.e(75).then(t.bind(null,551)),"v-b1fb6c42":()=>t.e(77).then(t.bind(null,552)),"v-06da033f":()=>t.e(76).then(t.bind(null,553)),"v-ba589682":()=>t.e(71).then(t.bind(null,554)),"v-401c9622":()=>t.e(74).then(t.bind(null,555)),"v-4d369e5f":()=>t.e(78).then(t.bind(null,556)),"v-97a9a082":()=>t.e(79).then(t.bind(null,557)),"v-0aa58e3f":()=>t.e(20).then(t.bind(null,558)),"v-88916b42":()=>t.e(32).then(t.bind(null,559)),"v-45ab779f":()=>t.e(27).then(t.bind(null,560)),"v-12859882":()=>t.e(21).then(t.bind(null,561)),"v-fe9d3e02":()=>t.e(19).then(t.bind(null,562)),"v-b0622042":()=>t.e(53).then(t.bind(null,563)),"v-723ecb02":()=>t.e(80).then(t.bind(null,564)),"v-31c31d1f":()=>t.e(14).then(t.bind(null,565)),"v-6cc9067f":()=>t.e(25).then(t.bind(null,566)),"v-9a739656":()=>t.e(81).then(t.bind(null,567)),"v-0ea86735":()=>t.e(28).then(t.bind(null,568)),"v-aee874c2":()=>t.e(82).then(t.bind(null,569)),"v-0ba510df":()=>t.e(42).then(t.bind(null,570)),"v-93f09142":()=>t.e(83).then(t.bind(null,571)),"v-73b79b9f":()=>t.e(84).then(t.bind(null,572)),"v-55613da1":()=>t.e(54).then(t.bind(null,573)),"v-0a42a91f":()=>t.e(87).then(t.bind(null,574)),"v-69aa6042":()=>t.e(29).then(t.bind(null,575)),"v-f33b1342":()=>t.e(88).then(t.bind(null,576)),"v-02e836bf":()=>t.e(90).then(t.bind(null,577)),"v-37be6dff":()=>t.e(86).then(t.bind(null,578)),"v-0a94c1c2":()=>t.e(85).then(t.bind(null,579)),"v-69e9675f":()=>t.e(92).then(t.bind(null,580)),"v-5946fd9f":()=>t.e(89).then(t.bind(null,581)),"v-2c5dd41f":()=>t.e(91).then(t.bind(null,582)),"v-627741de":()=>t.e(93).then(t.bind(null,583)),"v-a28862e2":()=>t.e(95).then(t.bind(null,584)),"v-1c0f0a82":()=>t.e(94).then(t.bind(null,585)),"v-5907ba7a":()=>t.e(96).then(t.bind(null,586)),"v-5446e962":()=>t.e(97).then(t.bind(null,587)),"v-1a6af8df":()=>t.e(98).then(t.bind(null,588)),"v-614479ff":()=>t.e(102).then(t.bind(null,589)),"v-4f8373df":()=>t.e(99).then(t.bind(null,590)),"v-9f6e0502":()=>t.e(103).then(t.bind(null,591)),"v-374d8d79":()=>t.e(105).then(t.bind(null,592)),"v-2e1355ed":()=>t.e(100).then(t.bind(null,593)),"v-7d9ab412":()=>t.e(106).then(t.bind(null,594)),"v-31a181ab":()=>t.e(101).then(t.bind(null,595)),"v-6650d0ff":()=>t.e(109).then(t.bind(null,596)),"v-2277ee5f":()=>t.e(104).then(t.bind(null,597)),"v-39158f3f":()=>t.e(107).then(t.bind(null,598)),"v-d8e7da82":()=>t.e(111).then(t.bind(null,599)),"v-7cee71df":()=>t.e(110).then(t.bind(null,600)),"v-abac98c2":()=>t.e(112).then(t.bind(null,601)),"v-51361542":()=>t.e(114).then(t.bind(null,602)),"v-4fb3301f":()=>t.e(108).then(t.bind(null,603)),"v-1ef1807f":()=>t.e(116).then(t.bind(null,604)),"v-7e715702":()=>t.e(113).then(t.bind(null,605)),"v-4cc5601f":()=>t.e(115).then(t.bind(null,606)),"v-389f887d":()=>t.e(117).then(t.bind(null,607)),"v-2e49301f":()=>t.e(118).then(t.bind(null,608)),"v-276555bf":()=>t.e(123).then(t.bind(null,609)),"v-42ba8bff":()=>t.e(119).then(t.bind(null,610)),"v-6611c3b5":()=>t.e(120).then(t.bind(null,611)),"v-18136627":()=>t.e(124).then(t.bind(null,612)),"v-6c3f9039":()=>t.e(121).then(t.bind(null,613)),"v-4444465f":()=>t.e(125).then(t.bind(null,614)),"v-90ff3d02":()=>t.e(122).then(t.bind(null,615)),"v-38e6942a":()=>t.e(127).then(t.bind(null,616)),"v-30a98ff2":()=>t.e(128).then(t.bind(null,617)),"v-f887684e":()=>t.e(129).then(t.bind(null,618)),"v-ce167802":()=>t.e(33).then(t.bind(null,619)),"v-4e92cd47":()=>t.e(126).then(t.bind(null,620)),"v-4d2d4882":()=>t.e(130).then(t.bind(null,621)),"v-3cac1b41":()=>t.e(12).then(t.bind(null,622)),"v-59f34d9f":()=>t.e(22).then(t.bind(null,623)),"v-54d03685":()=>t.e(26).then(t.bind(null,624)),"v-7b5aca02":()=>t.e(46).then(t.bind(null,625)),"v-4a5cdbb2":()=>t.e(133).then(t.bind(null,626)),"v-332a845f":()=>t.e(134).then(t.bind(null,627)),"v-7df093d7":()=>t.e(135).then(t.bind(null,628)),"v-e6f13c42":()=>t.e(131).then(t.bind(null,629)),"v-2fabc2e5":()=>t.e(136).then(t.bind(null,630)),"v-92095dc2":()=>t.e(137).then(t.bind(null,631)),"v-58d22542":()=>t.e(139).then(t.bind(null,632)),"v-6770af3f":()=>t.e(132).then(t.bind(null,633)),"v-756dc182":()=>t.e(138).then(t.bind(null,634)),"v-3c368902":()=>t.e(140).then(t.bind(null,635)),"v-1f9aecc2":()=>t.e(141).then(t.bind(null,636)),"v-2253c17f":()=>t.e(39).then(t.bind(null,637)),"v-02ff5082":()=>t.e(142).then(t.bind(null,638)),"v-394e602d":()=>t.e(143).then(t.bind(null,639)),"v-59238a45":()=>t.e(47).then(t.bind(null,640)),"v-fbf0dec2":()=>t.e(48).then(t.bind(null,641)),"v-36417e3f":()=>t.e(55).then(t.bind(null,642)),"v-1ab45bbf":()=>t.e(49).then(t.bind(null,643)),"v-cae08c22":()=>t.e(50).then(t.bind(null,644)),"v-12faf143":()=>t.e(144).then(t.bind(null,645)),"v-96cebf82":()=>t.e(34).then(t.bind(null,646)),"v-1a9ac042":()=>t.e(146).then(t.bind(null,647)),"v-207c297e":()=>t.e(145).then(t.bind(null,648)),"v-488d7642":()=>t.e(149).then(t.bind(null,649)),"v-ec255d82":()=>t.e(56).then(t.bind(null,650)),"v-8f73d49e":()=>t.e(148).then(t.bind(null,651)),"v-fdfdbb42":()=>t.e(150).then(t.bind(null,652)),"v-fa561802":()=>t.e(147).then(t.bind(null,653)),"v-140d9f9f":()=>t.e(153).then(t.bind(null,654)),"v-b9f651c2":()=>t.e(151).then(t.bind(null,655)),"v-c4186e42":()=>t.e(43).then(t.bind(null,656)),"v-28afe8df":()=>t.e(152).then(t.bind(null,657)),"v-4e5f06df":()=>t.e(154).then(t.bind(null,658)),"v-f77072e6":()=>t.e(155).then(t.bind(null,659)),"v-4dfcdb42":()=>t.e(156).then(t.bind(null,660)),"v-57f44261":()=>t.e(13).then(t.bind(null,661)),"v-d382ca42":()=>t.e(157).then(t.bind(null,662)),"v-0913acae":()=>t.e(158).then(t.bind(null,663)),"v-3fa254c2":()=>t.e(15).then(t.bind(null,664)),"v-608ca1ba":()=>t.e(11).then(t.bind(null,665)),"v-36664eb2":()=>t.e(159).then(t.bind(null,666)),"v-3cf55a6b":()=>t.e(160).then(t.bind(null,667)),"v-686968dd":()=>t.e(35).then(t.bind(null,668)),"v-31f17df6":()=>t.e(162).then(t.bind(null,669)),"v-4871443f":()=>t.e(36).then(t.bind(null,670)),"v-56cbc582":()=>t.e(16).then(t.bind(null,671)),"v-b22ada6e":()=>t.e(57).then(t.bind(null,672)),"v-52235c03":()=>t.e(163).then(t.bind(null,673)),"v-979acdda":()=>t.e(58).then(t.bind(null,674)),"v-5e39087f":()=>t.e(59).then(t.bind(null,675)),"v-12ea54df":()=>t.e(161).then(t.bind(null,676)),"v-66d04f5f":()=>t.e(60).then(t.bind(null,677)),"v-1397f439":()=>t.e(164).then(t.bind(null,678)),"v-70043cdf":()=>t.e(30).then(t.bind(null,679)),"v-d9099882":()=>t.e(165).then(t.bind(null,680)),"v-5f89be0a":()=>t.e(62).then(t.bind(null,681)),"v-1d8b151f":()=>t.e(166).then(t.bind(null,682)),"v-545d6c55":()=>t.e(61).then(t.bind(null,683)),"v-be252d12":()=>t.e(168).then(t.bind(null,684)),"v-eb77cf16":()=>t.e(169).then(t.bind(null,685)),"v-739ac773":()=>t.e(170).then(t.bind(null,686)),"v-9d022a42":()=>t.e(167).then(t.bind(null,687)),"v-2df2cd1f":()=>t.e(171).then(t.bind(null,688)),"v-d2732a66":()=>t.e(51).then(t.bind(null,689)),"v-3b654611":()=>t.e(173).then(t.bind(null,690)),"v-7a32bc31":()=>t.e(172).then(t.bind(null,691)),"v-6ee223b1":()=>t.e(176).then(t.bind(null,692)),"v-11c69222":()=>t.e(177).then(t.bind(null,693)),"v-3cfb1de5":()=>t.e(40).then(t.bind(null,694)),"v-f35fd416":()=>t.e(178).then(t.bind(null,695)),"v-1213428e":()=>t.e(174).then(t.bind(null,696)),"v-32b0df1a":()=>t.e(175).then(t.bind(null,697)),"v-81716842":()=>t.e(182).then(t.bind(null,698)),"v-73ff258f":()=>t.e(179).then(t.bind(null,699)),"v-652b741f":()=>t.e(181).then(t.bind(null,700)),"v-5f833423":()=>t.e(180).then(t.bind(null,701)),"v-7338b94a":()=>t.e(184).then(t.bind(null,702)),"v-7a5510c6":()=>t.e(183).then(t.bind(null,703)),"v-6c1c61ce":()=>t.e(185).then(t.bind(null,704)),"v-65000a52":()=>t.e(186).then(t.bind(null,705))};function Xs(n){const e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}const Ks=/-(\w)/g,Zs=Xs(n=>n.replace(Ks,(n,e)=>e?e.toUpperCase():"")),Ys=/\B([A-Z])/g,Qs=Xs(n=>n.replace(Ys,"-$1").toLowerCase()),ni=Xs(n=>n.charAt(0).toUpperCase()+n.slice(1));function ei(n,e){if(!e)return;if(n(e))return n(e);return e.includes("-")?n(ni(Zs(e))):n(ni(e))||n(Qs(e))}const ti=Object.assign({},Gs,Ws),ri=n=>ti[n],oi=n=>Ws[n],ai=n=>Gs[n],si=n=>Gt.component(n);function ii(n){return ei(oi,n)}function li(n){return ei(ai,n)}function ci(n){return ei(ri,n)}function ui(n){return ei(si,n)}function di(...n){return Promise.all(n.filter(n=>n).map(async n=>{if(!ui(n)&&ci(n)){const e=await ci(n)();Gt.component(n,e.default)}}))}function pi(n,e){"undefined"!=typeof window&&window.__VUEPRESS__&&(window.__VUEPRESS__[n]=e)}var mi=t(86),hi=t.n(mi),fi=t(87),gi=t.n(fi),vi={created(){if(this.siteMeta=this.$site.headTags.filter(([n])=>"meta"===n).map(([n,e])=>e),this.$ssrContext){const e=this.getMergedMetaTags();this.$ssrContext.title=this.$title,this.$ssrContext.lang=this.$lang,this.$ssrContext.pageMeta=(n=e)?n.map(n=>{let e="<meta";return Object.keys(n).forEach(t=>{e+=` ${t}="${gi()(n[t])}"`}),e+">"}).join("\n    "):"",this.$ssrContext.canonicalLink=yi(this.$canonicalUrl)}var n},mounted(){this.currentMetaTags=[...document.querySelectorAll("meta")],this.updateMeta(),this.updateCanonicalLink()},methods:{updateMeta(){document.title=this.$title,document.documentElement.lang=this.$lang;const n=this.getMergedMetaTags();this.currentMetaTags=xi(n,this.currentMetaTags)},getMergedMetaTags(){const n=this.$page.frontmatter.meta||[];return hi()([{name:"description",content:this.$description}],n,this.siteMeta,wi)},updateCanonicalLink(){bi(),this.$canonicalUrl&&document.head.insertAdjacentHTML("beforeend",yi(this.$canonicalUrl))}},watch:{$page(){this.updateMeta(),this.updateCanonicalLink()}},beforeDestroy(){xi(null,this.currentMetaTags),bi()}};function bi(){const n=document.querySelector("link[rel='canonical']");n&&n.remove()}function yi(n=""){return n?`<link href="${n}" rel="canonical" />`:""}function xi(n,e){if(e&&[...e].filter(n=>n.parentNode===document.head).forEach(n=>document.head.removeChild(n)),n)return n.map(n=>{const e=document.createElement("meta");return Object.keys(n).forEach(t=>{e.setAttribute(t,n[t])}),document.head.appendChild(e),e})}function wi(n){for(const e of["name","property","itemprop"])if(n.hasOwnProperty(e))return n[e]+e;return JSON.stringify(n)}var ki=t(88),ji={mounted(){window.addEventListener("scroll",this.onScroll)},methods:{onScroll:t.n(ki)()((function(){this.setActiveHash()}),300),setActiveHash(){const n=[].slice.call(document.querySelectorAll(".sidebar-link")),e=[].slice.call(document.querySelectorAll(".header-anchor")).filter(e=>n.some(n=>n.hash===e.hash)),t=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),r=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),o=window.innerHeight+t;for(let n=0;n<e.length;n++){const a=e[n],s=e[n+1],i=0===n&&0===t||t>=a.parentElement.offsetTop+10&&(!s||t<s.parentElement.offsetTop-10),l=decodeURIComponent(this.$route.hash);if(i&&l!==decodeURIComponent(a.hash)){const t=a;if(o===r)for(let t=n+1;t<e.length;t++)if(l===decodeURIComponent(e[t].hash))return;return this.$vuepress.$set("disableScrollBehavior",!0),void this.$router.replace(decodeURIComponent(t.hash),()=>{this.$nextTick(()=>{this.$vuepress.$set("disableScrollBehavior",!1)})})}}}},beforeDestroy(){window.removeEventListener("scroll",this.onScroll)}},Ti=t(22),Si=t.n(Ti),_i=[vi,ji,{mounted(){Si.a.configure({showSpinner:!1}),this.$router.beforeEach((n,e,t)=>{n.path===e.path||Gt.component(n.name)||Si.a.start(),t()}),this.$router.afterEach(()=>{Si.a.done(),this.isSidebarOpen=!1})}}],Ii={name:"GlobalLayout",computed:{layout(){const n=this.getLayout();return pi("layout",n),Gt.component(n)}},methods:{getLayout(){if(this.$page.path){const n=this.$page.frontmatter.layout;return n&&(this.$vuepress.getLayoutAsyncComponent(n)||this.$vuepress.getVueComponent(n))?n:"Layout"}return"NotFound"}}},Pi=t(14),zi=Object(Pi.a)(Ii,(function(){return(0,this._self._c)(this.layout,{tag:"component"})}),[],!1,null,null,null).exports;!function(n,e,t){switch(e){case"components":n[e]||(n[e]={}),Object.assign(n[e],t);break;case"mixins":n[e]||(n[e]=[]),n[e].push(...t);break;default:throw new Error("Unknown option name.")}}(zi,"mixins",_i);const Ci=[{name:"v-c1dabb48",path:"/",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-c1dabb48").then(t)}},{path:"/index.html",redirect:"/"},{name:"v-1d3fcc5f",path:"/algorithm/array.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-1d3fcc5f").then(t)}},{name:"v-a184f442",path:"/algorithm/dynamic.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-a184f442").then(t)}},{name:"v-75ce495f",path:"/algorithm/dfs-bfs.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-75ce495f").then(t)}},{name:"v-8bc9b32a",path:"/algorithm/greedy.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-8bc9b32a").then(t)}},{name:"v-8eba8a22",path:"/algorithm/list.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-8eba8a22").then(t)}},{name:"v-a9b7d16e",path:"/algorithm/string.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-a9b7d16e").then(t)}},{name:"v-efe7e982",path:"/algorithm/scene.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-efe7e982").then(t)}},{name:"v-da398842",path:"/algorithm/trace.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-da398842").then(t)}},{name:"v-1901b0ef",path:"/algorithm/sort.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-1901b0ef").then(t)}},{name:"v-7e657abf",path:"/algorithm/two-pointer.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-7e657abf").then(t)}},{name:"v-b1fb6c42",path:"/blockchain/ethersjs.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-b1fb6c42").then(t)}},{name:"v-06da033f",path:"/blockchain/base.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-06da033f").then(t)}},{name:"v-ba589682",path:"/algorithm/stack.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-ba589682").then(t)}},{name:"v-401c9622",path:"/algorithm/tree.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-401c9622").then(t)}},{name:"v-4d369e5f",path:"/blockchain/info.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-4d369e5f").then(t)}},{name:"v-97a9a082",path:"/blockchain/js.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-97a9a082").then(t)}},{name:"v-0aa58e3f",path:"/blockchain/learn1.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-0aa58e3f").then(t)}},{name:"v-88916b42",path:"/blockchain/learn4.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-88916b42").then(t)}},{name:"v-45ab779f",path:"/blockchain/learn2.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-45ab779f").then(t)}},{name:"v-12859882",path:"/blockchain/learn5.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-12859882").then(t)}},{name:"v-fe9d3e02",path:"/blockchain/learn3.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-fe9d3e02").then(t)}},{name:"v-b0622042",path:"/blockchain/learn8.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-b0622042").then(t)}},{name:"v-723ecb02",path:"/book/http.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-723ecb02").then(t)}},{name:"v-31c31d1f",path:"/blockchain/learn6.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-31c31d1f").then(t)}},{name:"v-6cc9067f",path:"/blockchain/learn7.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-6cc9067f").then(t)}},{name:"v-9a739656",path:"/chrome/cross.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-9a739656").then(t)}},{name:"v-0ea86735",path:"/chrome/performance.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-0ea86735").then(t)}},{name:"v-aee874c2",path:"/chrome/gc.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-aee874c2").then(t)}},{name:"v-0ba510df",path:"/chrome/render.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-0ba510df").then(t)}},{name:"v-93f09142",path:"/code-style/code-style.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-93f09142").then(t)}},{name:"v-73b79b9f",path:"/css/bfc.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-73b79b9f").then(t)}},{name:"v-55613da1",path:"/css/flex.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-55613da1").then(t)}},{name:"v-0a42a91f",path:"/css/problem.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-0a42a91f").then(t)}},{name:"v-69aa6042",path:"/computer/computer.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-69aa6042").then(t)}},{name:"v-f33b1342",path:"/design-pattern/design-pattern.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-f33b1342").then(t)}},{name:"v-02e836bf",path:"/engineering/commander.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-02e836bf").then(t)}},{name:"v-37be6dff",path:"/css/layout.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-37be6dff").then(t)}},{name:"v-0a94c1c2",path:"/css/box.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-0a94c1c2").then(t)}},{name:"v-69e9675f",path:"/engineering/env.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-69e9675f").then(t)}},{name:"v-5946fd9f",path:"/design-pattern/object.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-5946fd9f").then(t)}},{name:"v-2c5dd41f",path:"/engineering/engineering.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-2c5dd41f").then(t)}},{name:"v-627741de",path:"/engineering/eslint.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-627741de").then(t)}},{name:"v-a28862e2",path:"/engineering/gulp.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-a28862e2").then(t)}},{name:"v-1c0f0a82",path:"/engineering/grunt.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-1c0f0a82").then(t)}},{name:"v-5907ba7a",path:"/engineering/rollup.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-5907ba7a").then(t)}},{name:"v-5446e962",path:"/engineering/test.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-5446e962").then(t)}},{name:"v-1a6af8df",path:"/git/git.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-1a6af8df").then(t)}},{name:"v-614479ff",path:"/interview/english.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-614479ff").then(t)}},{name:"v-4f8373df",path:"/interview/algorithm.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-4f8373df").then(t)}},{name:"v-9f6e0502",path:"/interview/foreign-company.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-9f6e0502").then(t)}},{name:"v-374d8d79",path:"/interview/interview-10.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-374d8d79").then(t)}},{name:"v-2e1355ed",path:"/interview/code-1.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-2e1355ed").then(t)}},{name:"v-7d9ab412",path:"/interview/interview-11.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-7d9ab412").then(t)}},{name:"v-31a181ab",path:"/interview/code-2.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-31a181ab").then(t)}},{name:"v-6650d0ff",path:"/interview/interview-4.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-6650d0ff").then(t)}},{name:"v-2277ee5f",path:"/interview/interview-1.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-2277ee5f").then(t)}},{name:"v-39158f3f",path:"/interview/interview-2.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-39158f3f").then(t)}},{name:"v-d8e7da82",path:"/interview/interview-6.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-d8e7da82").then(t)}},{name:"v-7cee71df",path:"/interview/interview-5.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-7cee71df").then(t)}},{name:"v-abac98c2",path:"/interview/interview-7.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-abac98c2").then(t)}},{name:"v-51361542",path:"/interview/interview-9.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-51361542").then(t)}},{name:"v-4fb3301f",path:"/interview/interview-3.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-4fb3301f").then(t)}},{name:"v-1ef1807f",path:"/interview/iq.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-1ef1807f").then(t)}},{name:"v-7e715702",path:"/interview/interview-8.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-7e715702").then(t)}},{name:"v-4cc5601f",path:"/interview/interview.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-4cc5601f").then(t)}},{name:"v-389f887d",path:"/javascript/ES2017-2022.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-389f887d").then(t)}},{name:"v-2e49301f",path:"/javascript/ES6.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-2e49301f").then(t)}},{name:"v-276555bf",path:"/javascript/date.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-276555bf").then(t)}},{name:"v-42ba8bff",path:"/javascript/asynchronous.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-42ba8bff").then(t)}},{name:"v-6611c3b5",path:"/javascript/clone.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-6611c3b5").then(t)}},{name:"v-18136627",path:"/javascript/log.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-18136627").then(t)}},{name:"v-6c3f9039",path:"/javascript/closure.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-6c3f9039").then(t)}},{name:"v-4444465f",path:"/javascript/number.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-4444465f").then(t)}},{name:"v-90ff3d02",path:"/javascript/datatype.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-90ff3d02").then(t)}},{name:"v-38e6942a",path:"/javascript/prototype.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-38e6942a").then(t)}},{name:"v-30a98ff2",path:"/javascript/scope.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-30a98ff2").then(t)}},{name:"v-f887684e",path:"/javascript/stringify.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-f887684e").then(t)}},{name:"v-ce167802",path:"/javascript/function.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-ce167802").then(t)}},{name:"v-4e92cd47",path:"/javascript/parse-order.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-4e92cd47").then(t)}},{name:"v-4d2d4882",path:"/javascript/this.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-4d2d4882").then(t)}},{name:"v-3cac1b41",path:"/mobile/gc-3d.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-3cac1b41").then(t)}},{name:"v-59f34d9f",path:"/mobile/galacean.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-59f34d9f").then(t)}},{name:"v-54d03685",path:"/mobile/cross.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-54d03685").then(t)}},{name:"v-7b5aca02",path:"/mobile/h5.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-7b5aca02").then(t)}},{name:"v-4a5cdbb2",path:"/mobile/long-list.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-4a5cdbb2").then(t)}},{name:"v-332a845f",path:"/module/module.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-332a845f").then(t)}},{name:"v-7df093d7",path:"/module/webpack.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-7df093d7").then(t)}},{name:"v-e6f13c42",path:"/micro/micro.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-e6f13c42").then(t)}},{name:"v-2fabc2e5",path:"/node/express.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-2fabc2e5").then(t)}},{name:"v-92095dc2",path:"/node/node-1.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-92095dc2").then(t)}},{name:"v-58d22542",path:"/node/node-3.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-58d22542").then(t)}},{name:"v-6770af3f",path:"/mobile/adaptation.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-6770af3f").then(t)}},{name:"v-756dc182",path:"/node/node-2.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-756dc182").then(t)}},{name:"v-3c368902",path:"/node/node-4.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-3c368902").then(t)}},{name:"v-1f9aecc2",path:"/node/node-5.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-1f9aecc2").then(t)}},{name:"v-2253c17f",path:"/node/book.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-2253c17f").then(t)}},{name:"v-02ff5082",path:"/node/node-6.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-02ff5082").then(t)}},{name:"v-394e602d",path:"/re/development.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-394e602d").then(t)}},{name:"v-59238a45",path:"/product/abtest.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-59238a45").then(t)}},{name:"v-fbf0dec2",path:"/re/devops.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-fbf0dec2").then(t)}},{name:"v-36417e3f",path:"/re/mongodb.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-36417e3f").then(t)}},{name:"v-1ab45bbf",path:"/re/docker.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-1ab45bbf").then(t)}},{name:"v-cae08c22",path:"/re/nginx.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-cae08c22").then(t)}},{name:"v-12faf143",path:"/re/shell.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-12faf143").then(t)}},{name:"v-96cebf82",path:"/react/fiber.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-96cebf82").then(t)}},{name:"v-1a9ac042",path:"/react/react-1.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-1a9ac042").then(t)}},{name:"v-207c297e",path:"/react/diff.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-207c297e").then(t)}},{name:"v-488d7642",path:"/read/read.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-488d7642").then(t)}},{name:"v-ec255d82",path:"/react/redux.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-ec255d82").then(t)}},{name:"v-8f73d49e",path:"/react/time.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-8f73d49e").then(t)}},{name:"v-fdfdbb42",path:"/regular/regular.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-fdfdbb42").then(t)}},{name:"v-fa561802",path:"/react/react-hooks.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-fa561802").then(t)}},{name:"v-140d9f9f",path:"/san/composition.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-140d9f9f").then(t)}},{name:"v-b9f651c2",path:"/route/route.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-b9f651c2").then(t)}},{name:"v-c4186e42",path:"/ssr/ssr.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-c4186e42").then(t)}},{name:"v-28afe8df",path:"/safe/safe.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-28afe8df").then(t)}},{name:"v-4e5f06df",path:"/san/eslint-plugin-san.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-4e5f06df").then(t)}},{name:"v-f77072e6",path:"/san/san-loader.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-f77072e6").then(t)}},{name:"v-4dfcdb42",path:"/san/san.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-4dfcdb42").then(t)}},{name:"v-57f44261",path:"/three/three2.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-57f44261").then(t)}},{name:"v-d382ca42",path:"/time/2021.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-d382ca42").then(t)}},{name:"v-0913acae",path:"/time/2022a.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-0913acae").then(t)}},{name:"v-3fa254c2",path:"/three/three3.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-3fa254c2").then(t)}},{name:"v-608ca1ba",path:"/three/three1.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-608ca1ba").then(t)}},{name:"v-36664eb2",path:"/time/2022b.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-36664eb2").then(t)}},{name:"v-3cf55a6b",path:"/time/2023a.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-3cf55a6b").then(t)}},{name:"v-686968dd",path:"/three/three4.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-686968dd").then(t)}},{name:"v-31f17df6",path:"/tool/babel.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-31f17df6").then(t)}},{name:"v-4871443f",path:"/tool/camera.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-4871443f").then(t)}},{name:"v-56cbc582",path:"/tool/debugger.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-56cbc582").then(t)}},{name:"v-b22ada6e",path:"/tool/htmlparser2.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-b22ada6e").then(t)}},{name:"v-52235c03",path:"/tool/npm.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-52235c03").then(t)}},{name:"v-979acdda",path:"/tool/postcss.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-979acdda").then(t)}},{name:"v-5e39087f",path:"/tool/yaml.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-5e39087f").then(t)}},{name:"v-12ea54df",path:"/time/code.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-12ea54df").then(t)}},{name:"v-66d04f5f",path:"/ts/book.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-66d04f5f").then(t)}},{name:"v-1397f439",path:"/tool/performance.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-1397f439").then(t)}},{name:"v-70043cdf",path:"/tool/tool.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-70043cdf").then(t)}},{name:"v-d9099882",path:"/ts/ts-advance.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-d9099882").then(t)}},{name:"v-5f89be0a",path:"/ts/ts-type.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-5f89be0a").then(t)}},{name:"v-1d8b151f",path:"/virtual-dom/example.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-1d8b151f").then(t)}},{name:"v-545d6c55",path:"/ts/decorator.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-545d6c55").then(t)}},{name:"v-be252d12",path:"/vue/code-1.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-be252d12").then(t)}},{name:"v-eb77cf16",path:"/vue/code-2.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-eb77cf16").then(t)}},{name:"v-739ac773",path:"/vue/code-3.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-739ac773").then(t)}},{name:"v-9d022a42",path:"/virtual-dom/virtualdom.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-9d022a42").then(t)}},{name:"v-2df2cd1f",path:"/vue/communication.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-2df2cd1f").then(t)}},{name:"v-d2732a66",path:"/ts/ts-base.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-d2732a66").then(t)}},{name:"v-3b654611",path:"/vue/vite.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-3b654611").then(t)}},{name:"v-7a32bc31",path:"/vue/responsive.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-7a32bc31").then(t)}},{name:"v-6ee223b1",path:"/vue/vue3.0-2.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-6ee223b1").then(t)}},{name:"v-11c69222",path:"/vue/vue3.0-3.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-11c69222").then(t)}},{name:"v-3cfb1de5",path:"/vue/template.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-3cfb1de5").then(t)}},{name:"v-f35fd416",path:"/vue/vuex.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-f35fd416").then(t)}},{name:"v-1213428e",path:"/vue/vue-router.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-1213428e").then(t)}},{name:"v-32b0df1a",path:"/vue/vue3.0-1.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-32b0df1a").then(t)}},{name:"v-81716842",path:"/webpack/webpack1.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-81716842").then(t)}},{name:"v-73ff258f",path:"/webgl/canvas.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-73ff258f").then(t)}},{name:"v-652b741f",path:"/webpack/hmr.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-652b741f").then(t)}},{name:"v-5f833423",path:"/webpack/config.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-5f833423").then(t)}},{name:"v-7338b94a",path:"/webpack/webpack3.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-7338b94a").then(t)}},{name:"v-7a5510c6",path:"/webpack/webpack2.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-7a5510c6").then(t)}},{name:"v-6c1c61ce",path:"/webpack/webpack4.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-6c1c61ce").then(t)}},{name:"v-65000a52",path:"/webpack/webpack5.html",component:zi,beforeEnter:(n,e,t)=>{di("Layout","v-65000a52").then(t)}},{path:"*",component:zi}],Ei={title:"Breeze blog",description:"",base:"/myblog/",headTags:[],pages:[{title:"ä¸ªäººç®ä»",frontmatter:{},regularPath:"/",relativePath:"README.md",key:"v-c1dabb48",path:"/",headers:[{level:2,title:"ä¸ªäººç®ä»",slug:"ä¸ªäººç®ä»",normalizedTitle:"ä¸ªäººç®ä»",charIndex:2},{level:2,title:"æ´æ°æ¥å¿",slug:"æ´æ°æ¥å¿",normalizedTitle:"æ´æ°æ¥å¿",charIndex:56}],lastUpdated:"5/23/2025, 5:16:31 PM",lastUpdatedTimestamp:1747991791e3,headersStr:"ä¸ªäººç®ä» æ´æ°æ¥å¿",content:"# ä¸ªäººç®ä»\n\nâï¸ Breeze\n\nâ¨ å¹´é¾ï¼27\n\nð æ¯ä¸é¢æ ¡ï¼BIT\n\nð åç«¯å¼åå·¥ç¨å¸\n\n\n# æ´æ°æ¥å¿\n\n * åºåé¾å¬å¼è¯¾å­¦ä¹ \n\n * é¢è¯åå¤\n\n * è±è¯­å­¦ä¹ ",normalizedContent:"# ä¸ªäººç®ä»\n\nâï¸ breeze\n\nâ¨ å¹´é¾ï¼27\n\nð æ¯ä¸é¢æ ¡ï¼bit\n\nð åç«¯å¼åå·¥ç¨å¸\n\n\n# æ´æ°æ¥å¿\n\n * åºåé¾å¬å¼è¯¾å­¦ä¹ \n\n * é¢è¯åå¤\n\n * è±è¯­å­¦ä¹ ",charsets:{cjk:!0}},{title:"æ°ç»æä½",frontmatter:{},regularPath:"/algorithm/array.html",relativePath:"algorithm/array.md",key:"v-1d3fcc5f",path:"/algorithm/array.html",headers:[{level:2,title:"åå¹¶ä¸¤ä¸ªæåºæ°ç»",slug:"åå¹¶ä¸¤ä¸ªæåºæ°ç»",normalizedTitle:"åå¹¶ä¸¤ä¸ªæåºæ°ç»",charIndex:11},{level:2,title:"åå¹¶åºé´",slug:"åå¹¶åºé´",normalizedTitle:"åå¹¶åºé´",charIndex:23},{level:2,title:"äºåæ¥æ¾",slug:"äºåæ¥æ¾",normalizedTitle:"äºåæ¥æ¾",charIndex:31},{level:2,title:"åªåºç°ä¸æ¬¡çæ°å­",slug:"åªåºç°ä¸æ¬¡çæ°å­",normalizedTitle:"åªåºç°ä¸æ¬¡çæ°å­",charIndex:39},{level:2,title:"æ¾å°æææ°ç»ä¸­æ¶å¤±çæ°å­",slug:"æ¾å°æææ°ç»ä¸­æ¶å¤±çæ°å­",normalizedTitle:"æ¾å°æææ°ç»ä¸­æ¶å¤±çæ°å­",charIndex:51},{level:2,title:"ä¸¤æ°ä¹å",slug:"ä¸¤æ°ä¹å",normalizedTitle:"ä¸¤æ°ä¹å",charIndex:67},{level:2,title:"ä¸æ°ä¹å",slug:"ä¸æ°ä¹å",normalizedTitle:"ä¸æ°ä¹å",charIndex:75},{level:2,title:"æ°å­æ°ç»å»éæåº",slug:"æ°å­æ°ç»å»éæåº",normalizedTitle:"æ°å­æ°ç»å»éæåº",charIndex:83},{level:2,title:"å é¤æåºæ°ç»ä¸­çéå¤é¡¹",slug:"å é¤æåºæ°ç»ä¸­çéå¤é¡¹",normalizedTitle:"å é¤æåºæ°ç»ä¸­çéå¤é¡¹",charIndex:95},{level:2,title:"æè½¬ç©éµ",slug:"æè½¬ç©éµ",normalizedTitle:"æè½¬ç©éµ",charIndex:110},{level:2,title:"ééåæ°å",slug:"ééåæ°å",normalizedTitle:"ééåæ°å",charIndex:118},{level:2,title:"é¡ºæ¶éæå°ç©éµ",slug:"é¡ºæ¶éæå°ç©éµ",normalizedTitle:"é¡ºæ¶éæå°ç©éµ",charIndex:127},{level:2,title:"æé¿æ¹æµå­æ°ç»",slug:"æé¿æ¹æµå­æ°ç»",normalizedTitle:"æé¿æ¹æµå­æ°ç»",charIndex:138},{level:2,title:"é¿åº¦æå°å­æ°ç»(æ»å¨çªå£)",slug:"é¿åº¦æå°å­æ°ç»-æ»å¨çªå£",normalizedTitle:"é¿åº¦æå°å­æ°ç»(æ»å¨çªå£)",charIndex:8498},{level:2,title:"å¯»æ¾ä¸¤ä¸ªæ­£åºæ°ç»çä¸­ä½æ°",slug:"å¯»æ¾ä¸¤ä¸ªæ­£åºæ°ç»çä¸­ä½æ°",normalizedTitle:"å¯»æ¾ä¸¤ä¸ªæ­£åºæ°ç»çä¸­ä½æ°",charIndex:160},{level:2,title:"ä»ä¸¤ä¸ªæ°ç»ä¸­æ¾åºå±æçåç´ ",slug:"ä»ä¸¤ä¸ªæ°ç»ä¸­æ¾åºå±æçåç´ ",normalizedTitle:"ä»ä¸¤ä¸ªæ°ç»ä¸­æ¾åºå±æçåç´ ",charIndex:176},{level:2,title:"äºåæ¥æ¾ï¼æéå¤åç´ ï¼",slug:"äºåæ¥æ¾-æéå¤åç´ ",normalizedTitle:"äºåæ¥æ¾ï¼æéå¤åç´ ï¼",charIndex:193},{level:2,title:"åä¸ºkçå­æ°ç»",slug:"åä¸ºkçå­æ°ç»",normalizedTitle:"åä¸ºkçå­æ°ç»",charIndex:208}],lastUpdated:"8/4/2025, 3:49:09 PM",lastUpdatedTimestamp:1754293749e3,headersStr:"åå¹¶ä¸¤ä¸ªæåºæ°ç» åå¹¶åºé´ äºåæ¥æ¾ åªåºç°ä¸æ¬¡çæ°å­ æ¾å°æææ°ç»ä¸­æ¶å¤±çæ°å­ ä¸¤æ°ä¹å ä¸æ°ä¹å æ°å­æ°ç»å»éæåº å é¤æåºæ°ç»ä¸­çéå¤é¡¹ æè½¬ç©éµ ééåæ°å é¡ºæ¶éæå°ç©éµ æé¿æ¹æµå­æ°ç» é¿åº¦æå°å­æ°ç»(æ»å¨çªå£) å¯»æ¾ä¸¤ä¸ªæ­£åºæ°ç»çä¸­ä½æ° ä»ä¸¤ä¸ªæ°ç»ä¸­æ¾åºå±æçåç´  äºåæ¥æ¾ï¼æéå¤åç´ ï¼ åä¸ºkçå­æ°ç»",content:"# æ°ç»æä½\n\n * åå¹¶ä¸¤ä¸ªæåºæ°ç»\n * åå¹¶åºé´\n * äºåæ¥æ¾\n * åªåºç°ä¸æ¬¡çæ°å­\n * æ¾å°æææ°ç»ä¸­æ¶å¤±çæ°å­\n * ä¸¤æ°ä¹å\n * ä¸æ°ä¹å\n * æ°å­æ°ç»å»éæåº\n * å é¤æåºæ°ç»ä¸­çéå¤é¡¹\n * æè½¬ç©éµ\n * ééåæ°å\n * é¡ºæ¶éæå°ç©éµ\n * æé¿æ¹æµå­æ°ç»\n * é¿åº¦æå°å­æ°ç»\n * å¯»æ¾ä¸¤ä¸ªæ­£åºæ°ç»çä¸­ä½æ°\n * ä»ä¸¤ä¸ªæ°ç»ä¸­æ¾åºå±æçåç´ \n * äºåæ¥æ¾ï¼æéå¤åç´ ï¼\n * åä¸ºkçå­æ°ç»\n\n\n# åå¹¶ä¸¤ä¸ªæåºæ°ç»\n\n * leetcode88\n * è¦æ±ï¼æ¶é´å¤æåº¦O(m + n)ï¼ä¸éè¦é¢å¤ç©ºé´\n * å¾ç¤º\n\nvar merge = function(nums1, m, nums2, n) {\n    let i = m - 1;\n    let j = n - 1;\n    let len = i + j + 1;\n    while (j >= 0) {\n        nums1[len--] = nums1[i] >= nums2[j] ? nums1[i--] : nums2[j--];\n    }\n};\n\n// åæ°å¦æåªç»äºä¸¤ä¸ªæ®éçæ°ç»\nconst merge = (nums1, nums2) => {\n    let i = nums1.length - 1;\n    let j = nums2.length - 1;\n    let len = i + j + 1;\n    nums1 = nums1.concat(new Array(nums2.length).fill(0));\n    while (j >= 0) {\n        nums1[len--] = nums1[i] >= nums2[j] ? nums1[i--] : nums2[j--];\n    }\n    return nums1;\n}\n\n\n\n\n# åå¹¶åºé´\n\né¢ç®æ¥æºï¼leetcode56\n\nç¤ºä¾ 1:\n\nè¾å¥: intervals = [[1,3],[2,6],[8,10],[15,18]]\nè¾åº: [[1,6],[8,10],[15,18]]\nè§£é: åºé´ [1,3] å [2,6] éå , å°å®ä»¬åå¹¶ä¸º [1,6].\n\nç¤ºä¾ 2:\nè¾å¥: intervals = [[1,4],[4,5]]\nè¾åº: [[1,5]]\nè§£é: åºé´ [1,4] å [4,5] å¯è¢«è§ä¸ºéå åºé´ã\n\n\n * æè·¯\n\n// 1. åæç§ intervals[i][0] ä»å°å°å¤§æåº\n// 2. intervals[i][1] >= intervals[i+1][1] ç´æ¥å intervals[i][1] : [1,4] [2,3] ç´æ¥å [1,4]\n// 3. intervals[i][1] >= intervals[i+1][0] æ¶ intervals[i][1] = intervals[i+1][1] ï¼[1,4] [3,5] å [1,5]  \n// 4. è®¾ç½®ä¸ä¸ª flagï¼å¦ææ­¤è½®åå¹¶è¿ï¼ç»§ç»­åå¹¶ä¸ä¸è½®  \n\n\n * ä¸ªäººè§£æ³\n\nvar merge = function(intervals) {\n    let flag = true;\n    intervals.sort((a,b) => a[0] - b[0]);\n    while (flag) {\n        flag = false;\n        for (let i = 0; i < intervals.length - 1; i++) {\n            if (intervals[i][1] >= intervals[i + 1][1]) {\n                intervals.splice(i + 1, 1);\n                flag = true;\n            }\n            else if (intervals[i][1] >= intervals[i + 1][0]) {\n                intervals[i][1] = intervals[i + 1][1];\n                intervals.splice(i + 1,1);\n                flag = true;\n            }     \n        }\n    }\n    return intervals;\n};\n\n\n\n# äºåæ¥æ¾\n\n * leetcode704\n\nvar search = function(nums, target) {\n    let left = 0;\n    let right = nums.length - 1;\n    while(left <= right) {\n        let mid = Math.floor((left + right)/2);\n        if (nums[mid] > target) {\n            right = mid - 1;\n        }\n        else if (nums[mid] < target) {\n            left = mid + 1;\n        }\n        else {\n            return mid;\n        }\n    }\n    return -1;\n};\n\n\n\n# åªåºç°ä¸æ¬¡çæ°å­\n\n * leetcode136\n\nç»å®ä¸ä¸ªéç©ºæ´æ°æ°ç»ï¼é¤äºæä¸ªåç´ åªåºç°ä¸æ¬¡ä»¥å¤ï¼å¶ä½æ¯ä¸ªåç´ ååºç°ä¸¤æ¬¡ãæ¾åºé£ä¸ªåªåºç°äºä¸æ¬¡çåç´ ã\n\nè¯´æï¼\n\nä½ çç®æ³åºè¯¥å·æçº¿æ§æ¶é´å¤æåº¦ã ä½ å¯ä»¥ä¸ä½¿ç¨é¢å¤ç©ºé´æ¥å®ç°åï¼\n\nç¤ºä¾ 1:\n\nè¾å¥: [2,2,1]\nè¾åº: 1\nç¤ºä¾ 2:\n\nè¾å¥: [4,1,2,1,2]\nè¾åº: 4\n\n\n * ä»»ä½æ°å 0 åå¼æè¿ç®ï¼ç»æä»ç¶æ¯åæ¥çæ°ï¼\n * ä»»ä½æ°åå¶èªèº«åå¼æè¿ç®ï¼ç»ææ¯ 0\n * å¼æè¿ç®æ»¡è¶³äº¤æ¢å¾åç»åå¾\n\nvar singleNumber = function(nums) {\n    return nums.reduce((pre, item) => pre ^ item, 0)\n};\n\n\n\n# æ¾å°æææ°ç»ä¸­æ¶å¤±çæ°å­\n\n * leetcode448\n\nç»å®ä¸ä¸ªèå´å¨  1 â¤ a[i] â¤ n ( n = æ°ç»å¤§å° ) ç æ´åæ°ç»ï¼æ°ç»ä¸­çåç´ ä¸äºåºç°äºä¸¤æ¬¡ï¼å¦ä¸äºåªåºç°ä¸æ¬¡ã\n\næ¾å°ææå¨ [1, n] èå´ä¹é´æ²¡æåºç°å¨æ°ç»ä¸­çæ°å­ã\n\næ¨è½å¨ä¸ä½¿ç¨é¢å¤ç©ºé´ä¸æ¶é´å¤æåº¦ä¸ºO(n)çæåµä¸å®æè¿ä¸ªä»»å¡å? ä½ å¯ä»¥åå®è¿åçæ°ç»ä¸ç®å¨é¢å¤ç©ºé´åã\n\nç¤ºä¾:\n\nè¾å¥:\n[4,3,2,7,8,2,3,1]\n\nè¾åº:\n[5,6]\n\n\n * å¼è¡¨ç¤ºç´¢å¼\n\nvar findDisappearedNumbers = function(nums) {\n    let arr = [], res = []\n    for (let i = 0; i < nums.length; i++) {\n        arr[nums[i]-1] = 1\n    }\n    for (let i = 0; i < nums.length; i++) {\n        if (arr[i] !== 1) {\n            res.push(i+1)\n        } \n    }\n    return res\n};\n\n\n\n# ä¸¤æ°ä¹å\n\n * leetcode1\n\nç»å®ä¸ä¸ªæ´æ°æ°ç» nums åä¸ä¸ªæ´æ°ç®æ å¼ targetï¼è¯·ä½ å¨è¯¥æ°ç»ä¸­æ¾åº åä¸ºç®æ å¼ target  çé£ ä¸¤ä¸ª æ´æ°ï¼å¹¶è¿åå®ä»¬çæ°ç»ä¸æ ã\n\nä½ å¯ä»¥åè®¾æ¯ç§è¾å¥åªä¼å¯¹åºä¸ä¸ªç­æ¡ãä½æ¯ï¼æ°ç»ä¸­åä¸ä¸ªåç´ å¨ç­æ¡éä¸è½éå¤åºç°ã\n\nä½ å¯ä»¥æä»»æé¡ºåºè¿åç­æ¡ã\n\n\nvar twoSum = function(nums, target) {\n    let map = new Map()\n    for (let i = 0; i < nums.length; i++) {\n        if (map.has(target - nums[i])) return [map.get(target - nums[i]), i]\n        map.set(nums[i], i)\n    }\n};\n\n\n\n# ä¸æ°ä¹å\n\n * leetcode15\n\nç»ä½ ä¸ä¸ªåå« n ä¸ªæ´æ°çæ°ç» numsï¼å¤æ­ nums ä¸­æ¯å¦å­å¨ä¸ä¸ªåç´  aï¼bï¼c ï¼ä½¿å¾ a + b + c = 0 ï¼è¯·ä½ æ¾åºæææ»¡è¶³æ¡ä»¶ä¸ä¸éå¤çä¸åç»ã\n\næ³¨æï¼ç­æ¡ä¸­ä¸å¯ä»¥åå«éå¤çä¸åç»ã\n\n \n\nç¤ºä¾ï¼\n\nç»å®æ°ç» nums = [-1, 0, 1, 2, -1, -4]ï¼\n\næ»¡è¶³è¦æ±çä¸åç»éåä¸ºï¼\n[\n  [-1, 0, 1],\n  [-1, -1, 2]\n]\n\n\n * åæéè®²æè·¯ï¼æ³¨æå»é\n * é¢è§£\n\nvar threeSum = function(nums) {\n    nums.sort((a, b) => a - b)\n    const res = []\n    for (let i = 0; i < nums.length - 2; i++) {\n        if (nums[i] > 0) break\n        let l = i + 1, r = nums.length - 1\n        if (i == 0 || nums[i] != nums[i - 1]) {\n            while (l < r) {\n                if (nums[i] + nums[l] + nums[r] > 0) r--\n                else if (nums[i] + nums[l] + nums[r] < 0) l++\n                else {\n                    res.push([nums[i], nums[l], nums[r]])\n                    while (l < r && nums[l] == nums[l + 1]) l++\n                    while (l < r && nums[r] == nums[r - 1]) r--\n                    l++, r--\n                }\n            }\n        }\n    }\n    return res\n};\n\n\n\n# æ°å­æ°ç»å»éæåº\n\n * ç¨ä¸æ è¡¨ç¤ºæ°å­ï¼ç©ºé´å¤æåº¦è¾é«ï¼ä¸è¬ä¸å»ºè®®ä½¿ç¨\n\nconst arr = [5, 1, 1, 3, 2, 0]\n\nconst foo = (arr) => {\n  const res = []\n  const ans = []\n  for (let i in arr) {\n      res[arr[i]] = 1\n  }\n  for (let i in res) {\n      ans.push(i)\n  }\n  return ans\n}\n\n\n\n# å é¤æåºæ°ç»ä¸­çéå¤é¡¹\n\n> ç¤ºä¾ 1:\n> \n> ç»å®æ°ç» nums = [1,1,2],\n> \n> å½æ°åºè¯¥è¿åæ°çé¿åº¦ 2, å¹¶ä¸åæ°ç» nums çåä¸¤ä¸ªåç´ è¢«ä¿®æ¹ä¸º 1, 2ã (æ³¨æåªéä¿®æ¹ï¼ä¸éå é¤)\n> \n> ä½ ä¸éè¦èèæ°ç»ä¸­è¶åºæ°é¿åº¦åé¢çåç´ ã\n> \n> ç¤ºä¾ 2:\n> \n> ç»å® nums = [0,0,1,1,1,2,2,3,3,4],\n> \n> å½æ°åºè¯¥è¿åæ°çé¿åº¦ 5, å¹¶ä¸åæ°ç» nums çåäºä¸ªåç´ è¢«ä¿®æ¹ä¸º 0, 1, 2, 3, 4ã\n> \n> ä½ ä¸éè¦èèæ°ç»ä¸­è¶åºæ°é¿åº¦åé¢çåç´ ã\n\n * éåä¸æ¬¡ï¼ä¸éå¤çæ¾å¨æ°ç»åå ä½ï¼æ¶é´å¤æåº¦Oï¼n)\n\nvar removeDuplicates = function(nums) {\n    let len = 1\n    for(let i = 1; i < nums.length; i++){\n        if(nums[i]!==nums[i-1]) nums[len++] = nums[i]\n    }\n    return len\n};\n\n\n> ç»å® nums = [3,2,2,3], val = 3,\n> \n> å½æ°åºè¯¥è¿åæ°çé¿åº¦ 2, å¹¶ä¸ nums ä¸­çåä¸¤ä¸ªåç´ åä¸º 2ã\n> \n> ä½ ä¸éè¦èèæ°ç»ä¸­è¶åºæ°é¿åº¦åé¢çåç´ ã\n> \n> ç»å® nums = [0,1,2,2,3,0,4,2], val = 2,\n> \n> å½æ°åºè¯¥è¿åæ°çé¿åº¦ 5, å¹¶ä¸ nums ä¸­çåäºä¸ªåç´ ä¸º 0, 1, 3, 0, 4ã\n> \n> æ³¨æè¿äºä¸ªåç´ å¯ä¸ºä»»æé¡ºåºã\n> \n> ä½ ä¸éè¦èèæ°ç»ä¸­è¶åºæ°é¿åº¦åé¢çåç´ ã\n\nvar removeElement = function(nums, val) {\n    let len = 0\n    for(let i = 0; i < nums.length; i++){\n        if(nums[i] !== val) nums[len++] = nums[i]\n    }\n    return len\n};\n\n\n\n# æè½¬ç©éµ\n\n * leetcode48\n\n> ä½ å¿é¡»å¨åå°æè½¬å¾åï¼è¿æå³çä½ éè¦ç´æ¥ä¿®æ¹è¾å¥çäºç»´ç©éµãè¯·ä¸è¦ä½¿ç¨å¦ä¸ä¸ªç©éµæ¥æè½¬å¾åã\n> \n> ç¤ºä¾ 1:\n> \n> ç»å® matrix = [ [1,2,3], [4,5,6], [7,8,9] ],\n> \n> åå°æè½¬è¾å¥ç©éµï¼ä½¿å¶åä¸º: [ [7,4,1], [8,5,2], [9,6,3] ]\n\nvar rotate = function(matrix) { \n    const len = matrix.length;\n    for(let i = 0; i < len; i++){\n        for(let j = 0; j < len; j++){\n            let curr = matrix[i].pop()\n            matrix[len - j - 1].unshift(curr)\n        }\n    }\n};\n\n\n * å·ä½è¿ç¨å¦ä¸ï¼\n\n[ [ 1, 2 ], [ 4, 5, 6 ], [ 3, 7, 8, 9 ] ]\n\n[ [ 1 ], [ 2, 4, 5, 6 ], [ 3, 7, 8, 9 ] ]\n\n[ [ 1 ], [ 2, 4, 5, 6 ], [ 3, 7, 8, 9 ] ]\n\n[ [ 1 ], [ 2, 4, 5 ], [ 6, 3, 7, 8, 9 ] ]\n\n[ [ 1 ], [ 5, 2, 4 ], [ 6, 3, 7, 8, 9 ] ]\n\n[ [ 4, 1 ], [ 5, 2 ], [ 6, 3, 7, 8, 9 ] ]\n\n[ [ 4, 1 ], [ 5, 2 ], [ 9, 6, 3, 7, 8 ] ]\n\n[ [ 4, 1 ], [ 8, 5, 2 ], [ 9, 6, 3, 7 ] ]\n\n[ [ 7, 4, 1 ], [ 8, 5, 2 ], [ 9, 6, 3 ] ]\n\n\n\n# ééåæ°å\n\n * leetcode665\n\n * é¢è§£\n\nvar checkPossibility = function(nums) {\n    let count = 0\n    for (let i = 1; i < nums.length; i++) {\n        if (nums[i] < nums[i-1]) {\n            if (i === 1 || nums[i] >= nums[i-2]) {\n                nums[i-1] = nums[i]\n            } else {\n                nums[i] = nums[i-1]\n            }\n            count ++\n        }\n    }\n    return count <= 1\n};\n\n\n\n# é¡ºæ¶éæå°ç©éµ\n\n * leetcode54\n * ãæç»å¾è§£ãä¸¤ç§éåçç­ç¥ï¼çä½ åæ¬¢åªç§\n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼matrix = [[1,2,3],[4,5,6],[7,8,9]]\nè¾åºï¼[1,2,3,6,9,8,7,4,5]\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼matrix = [[1,2,3,4],[5,6,7,8],[9,10,11,12]]\nè¾åºï¼[1,2,3,4,8,12,11,10,9,5,6,7]\n\n\nvar spiralOrder = function(matrix) {\n    if (!matrix.length) return [];\n    let left = 0, right = matrix[0].length - 1, top = 0, bottom = matrix.length - 1;\n    const res = [];\n    while (right > left && bottom > top) {\n        for (let i = left; i < right; i++) res.push(matrix[top][i]); // ä¸å±\n        for (let i = top; i < bottom; i++) res.push(matrix[i][right]); // å³å±\n        for (let i = right; i > left; i--) res.push(matrix[bottom][i]); // ä¸å±\n        for (let i = bottom; i > top; i--) res.push(matrix[i][left]); // å·¦å±\n        // åä¸ªè¾¹çåæ¶æ¶ç¼©ï¼è¿å¥åå±\n        left++;\n        right--;\n        top++;\n        bottom--;\n    }\n    // å©ä¸ä¸åï¼ä»ä¸å°ä¸ä¾æ¬¡æ·»å \n    if (left === right) {\n        for (let i = top; i <= bottom; i++) res.push(matrix[i][left]);\n    }\n    // å©ä¸ä¸è¡ï¼ä»å·¦å°å³ä¾æ¬¡æ·»å \n    else if (top === bottom) {\n        for (let i = left; i <= right; i++) res.push(matrix[top][i]);\n    }\n    return res;\n}\n\n\n\n# æé¿æ¹æµå­æ°ç»\n\n * leetcode978\n\n * é¢è§£\n\nvar maxTurbulenceSize = function(arr) {\n    let n = arr.length,\n        maxNum = Number.MIN_SAFE_INTEGER,\n        cur = 1\n    if(n === 1) return 1\n    for(let i = 1; i < n; i++) {\n        if(arr[i] === arr[i-1]) {\n            cur = 1\n        }else if(arr[i] > arr[i-1] && arr[i-2] >= arr[i-1]) {\n            cur++\n        } else if(arr[i] < arr[i-1] && arr[i-2] <= arr[i-1]) {\n            cur++\n        } else {\n            cur = 2\n        }\n        maxNum = Math.max(maxNum, cur)\n    }\n    return maxNum;\n};\n\n\n\n# é¿åº¦æå°å­æ°ç»(æ»å¨çªå£)\n\n * leetcode209\n * é¢è§£\n\nvar minSubArrayLen = function(s, nums) {\n    const int_max = Number.MAX_SAFE_INTEGER\n    var i = 0, sum = 0, ans = int_max\n    for (var j = 0; j < nums.length; j++) {\n        sum += nums[j]\n        while (sum >= s) {\n            ans = Math.min(ans, j - i + 1)\n            sum -= nums[i++]\n        }\n    }\n    return ans === int_max ? 0 : ans\n};\n\n\n\n# å¯»æ¾ä¸¤ä¸ªæ­£åºæ°ç»çä¸­ä½æ°\n\n * leetcode4\n\nvar findMedianSortedArrays = function(nums1, nums2) {\n    let i = nums1.length - 1, j = nums2.length - 1\n    nums1 = nums1.concat(new Array(j + 1).fill(0))\n    let k = nums1.length - 1\n    while (j >= 0) {\n        nums1[i] > nums2[j] ? nums1[k--] = nums1[i--] : nums1[k--] = nums2[j--]\n    }\n    if (nums1.length % 2 === 0) {\n        return (nums1[nums1.length / 2] + nums1[nums1.length / 2 - 1]) / 2\n    } else {\n        return nums1[~~(nums1.length / 2)]\n    }\n};\n\n\n\n# ä»ä¸¤ä¸ªæ°ç»ä¸­æ¾åºå±æçåç´ \n\n// ä»ä¸¤ä¸ªæ°ç»ä¸­æ¾åºå±æçåç´ ã\n// ç¤ºä¾ï¼ arr1 = [1,2,3,4]; arr2=[3,4,5,6]\n// intersection(arr1, arr2);\n// output [3,4]\n\nfunction intersection(arr1, arr2) {\n    return arr1.filter(item => arr2.includes(item))\n}\n\nfunction intersection(arr1, arr2) {\n    const map = new Map()\n    const res = []\n    for (const item of arr1) {\n        if (!map.get(item)) {\n            map.set(item, 1)\n        }\n    }\n    for (const item of arr2) {\n        if (map.get(item)) {\n            res.push(item)\n        }\n    }\n    return res\n}\n\n\n\n# äºåæ¥æ¾ï¼æéå¤åç´ ï¼\n\n> ä¸ä¸ªæåºå¯éå¤æ°ç»ï¼æå®targetï¼è¿åè¯¥targetå¨æ°ç»ä¸­çä½ç½®ã\n> \n> [1,2,2,3,4,5]\n> \n> 1 => [0]\n> \n> 2 = >[1,2]\n> \n> 10 = > [-1]\n\nfunction search(arr, target) {\n    const res = []\n    let left = 0, right = arr.length - 1\n    while (left <= right) {\n        let mid = (left + right) >> 1\n        if (arr[mid] === target) {\n            res.push(mid)\n            let index1 = index2 = mid\n            while (arr[index1 + 1] === arr[index1]) {\n                res.push(index1 + 1)\n                index1++\n            }\n            while (arr[index2 - 1] === arr[index2]) {\n                res.push(index2 - 1)\n                index2--\n            }\n            break\n        } else if (arr[mid] > target) {\n            right = mid - 1\n        } else {\n            left = mid + 1\n        }\n    }\n    return res.length ? res : [-1]\n}\n\n\n\n# åä¸ºkçå­æ°ç»\n\n * leetcode560\n * åç¼å + åå¸è¡¨\n\n// k = 7\n// æ°ç»ï¼    3, 4, 2,  3,  2\n// åç¼å    3, 7, 9, 12, 14\n// map\n// key   0, 3, 7, 9, 12, 14\n// value 1, 1, 1, 1,  1,  1\n\n// ä¸ºä»ä¹æä¸ªåå¼{0, 1}ï¼å ä¸ºç¬¬ä¸æ¬¡è¦è®°å½[3, 4]çç»æï¼sum - key = 7 - 7 = 0,\n// èè¡¨ä¸­æ¯æ²¡æ0å¯¹åºçæ¬¡æ°çï¼æä»¥è¦è®¾ç½®ä¸ä¸ªåå¼ï¼ç¨äºè®°å½ç¬¬ä¸ä¸ªå¼ã\n// ç¬¬äºæ¬¡è¦è®°å½ [2, 3, 2]çç»æï¼sum - key = 14 - 7 = 7\n\nfunction subarraySum(nums, k) {\n  const map = new Map();\n  map.set(0, 1);\n  let count = 0;\n  let currentSum = 0;\n  for (const num of nums) {\n    currentSum += num;\n    if (map.get(currentSum - k)) {\n      count += map.get(currentSum - k);\n    }\n    map.set(currentSum, (map.get(currentSum) || 0) + 1);\n  }\n  return count;\n}\n",normalizedContent:"# æ°ç»æä½\n\n * åå¹¶ä¸¤ä¸ªæåºæ°ç»\n * åå¹¶åºé´\n * äºåæ¥æ¾\n * åªåºç°ä¸æ¬¡çæ°å­\n * æ¾å°æææ°ç»ä¸­æ¶å¤±çæ°å­\n * ä¸¤æ°ä¹å\n * ä¸æ°ä¹å\n * æ°å­æ°ç»å»éæåº\n * å é¤æåºæ°ç»ä¸­çéå¤é¡¹\n * æè½¬ç©éµ\n * ééåæ°å\n * é¡ºæ¶éæå°ç©éµ\n * æé¿æ¹æµå­æ°ç»\n * é¿åº¦æå°å­æ°ç»\n * å¯»æ¾ä¸¤ä¸ªæ­£åºæ°ç»çä¸­ä½æ°\n * ä»ä¸¤ä¸ªæ°ç»ä¸­æ¾åºå±æçåç´ \n * äºåæ¥æ¾ï¼æéå¤åç´ ï¼\n * åä¸ºkçå­æ°ç»\n\n\n# åå¹¶ä¸¤ä¸ªæåºæ°ç»\n\n * leetcode88\n * è¦æ±ï¼æ¶é´å¤æåº¦o(m + n)ï¼ä¸éè¦é¢å¤ç©ºé´\n * å¾ç¤º\n\nvar merge = function(nums1, m, nums2, n) {\n    let i = m - 1;\n    let j = n - 1;\n    let len = i + j + 1;\n    while (j >= 0) {\n        nums1[len--] = nums1[i] >= nums2[j] ? nums1[i--] : nums2[j--];\n    }\n};\n\n// åæ°å¦æåªç»äºä¸¤ä¸ªæ®éçæ°ç»\nconst merge = (nums1, nums2) => {\n    let i = nums1.length - 1;\n    let j = nums2.length - 1;\n    let len = i + j + 1;\n    nums1 = nums1.concat(new array(nums2.length).fill(0));\n    while (j >= 0) {\n        nums1[len--] = nums1[i] >= nums2[j] ? nums1[i--] : nums2[j--];\n    }\n    return nums1;\n}\n\n\n\n\n# åå¹¶åºé´\n\né¢ç®æ¥æºï¼leetcode56\n\nç¤ºä¾ 1:\n\nè¾å¥: intervals = [[1,3],[2,6],[8,10],[15,18]]\nè¾åº: [[1,6],[8,10],[15,18]]\nè§£é: åºé´ [1,3] å [2,6] éå , å°å®ä»¬åå¹¶ä¸º [1,6].\n\nç¤ºä¾ 2:\nè¾å¥: intervals = [[1,4],[4,5]]\nè¾åº: [[1,5]]\nè§£é: åºé´ [1,4] å [4,5] å¯è¢«è§ä¸ºéå åºé´ã\n\n\n * æè·¯\n\n// 1. åæç§ intervals[i][0] ä»å°å°å¤§æåº\n// 2. intervals[i][1] >= intervals[i+1][1] ç´æ¥å intervals[i][1] : [1,4] [2,3] ç´æ¥å [1,4]\n// 3. intervals[i][1] >= intervals[i+1][0] æ¶ intervals[i][1] = intervals[i+1][1] ï¼[1,4] [3,5] å [1,5]  \n// 4. è®¾ç½®ä¸ä¸ª flagï¼å¦ææ­¤è½®åå¹¶è¿ï¼ç»§ç»­åå¹¶ä¸ä¸è½®  \n\n\n * ä¸ªäººè§£æ³\n\nvar merge = function(intervals) {\n    let flag = true;\n    intervals.sort((a,b) => a[0] - b[0]);\n    while (flag) {\n        flag = false;\n        for (let i = 0; i < intervals.length - 1; i++) {\n            if (intervals[i][1] >= intervals[i + 1][1]) {\n                intervals.splice(i + 1, 1);\n                flag = true;\n            }\n            else if (intervals[i][1] >= intervals[i + 1][0]) {\n                intervals[i][1] = intervals[i + 1][1];\n                intervals.splice(i + 1,1);\n                flag = true;\n            }     \n        }\n    }\n    return intervals;\n};\n\n\n\n# äºåæ¥æ¾\n\n * leetcode704\n\nvar search = function(nums, target) {\n    let left = 0;\n    let right = nums.length - 1;\n    while(left <= right) {\n        let mid = math.floor((left + right)/2);\n        if (nums[mid] > target) {\n            right = mid - 1;\n        }\n        else if (nums[mid] < target) {\n            left = mid + 1;\n        }\n        else {\n            return mid;\n        }\n    }\n    return -1;\n};\n\n\n\n# åªåºç°ä¸æ¬¡çæ°å­\n\n * leetcode136\n\nç»å®ä¸ä¸ªéç©ºæ´æ°æ°ç»ï¼é¤äºæä¸ªåç´ åªåºç°ä¸æ¬¡ä»¥å¤ï¼å¶ä½æ¯ä¸ªåç´ ååºç°ä¸¤æ¬¡ãæ¾åºé£ä¸ªåªåºç°äºä¸æ¬¡çåç´ ã\n\nè¯´æï¼\n\nä½ çç®æ³åºè¯¥å·æçº¿æ§æ¶é´å¤æåº¦ã ä½ å¯ä»¥ä¸ä½¿ç¨é¢å¤ç©ºé´æ¥å®ç°åï¼\n\nç¤ºä¾ 1:\n\nè¾å¥: [2,2,1]\nè¾åº: 1\nç¤ºä¾ 2:\n\nè¾å¥: [4,1,2,1,2]\nè¾åº: 4\n\n\n * ä»»ä½æ°å 0 åå¼æè¿ç®ï¼ç»æä»ç¶æ¯åæ¥çæ°ï¼\n * ä»»ä½æ°åå¶èªèº«åå¼æè¿ç®ï¼ç»ææ¯ 0\n * å¼æè¿ç®æ»¡è¶³äº¤æ¢å¾åç»åå¾\n\nvar singlenumber = function(nums) {\n    return nums.reduce((pre, item) => pre ^ item, 0)\n};\n\n\n\n# æ¾å°æææ°ç»ä¸­æ¶å¤±çæ°å­\n\n * leetcode448\n\nç»å®ä¸ä¸ªèå´å¨  1 â¤ a[i] â¤ n ( n = æ°ç»å¤§å° ) ç æ´åæ°ç»ï¼æ°ç»ä¸­çåç´ ä¸äºåºç°äºä¸¤æ¬¡ï¼å¦ä¸äºåªåºç°ä¸æ¬¡ã\n\næ¾å°ææå¨ [1, n] èå´ä¹é´æ²¡æåºç°å¨æ°ç»ä¸­çæ°å­ã\n\næ¨è½å¨ä¸ä½¿ç¨é¢å¤ç©ºé´ä¸æ¶é´å¤æåº¦ä¸ºo(n)çæåµä¸å®æè¿ä¸ªä»»å¡å? ä½ å¯ä»¥åå®è¿åçæ°ç»ä¸ç®å¨é¢å¤ç©ºé´åã\n\nç¤ºä¾:\n\nè¾å¥:\n[4,3,2,7,8,2,3,1]\n\nè¾åº:\n[5,6]\n\n\n * å¼è¡¨ç¤ºç´¢å¼\n\nvar finddisappearednumbers = function(nums) {\n    let arr = [], res = []\n    for (let i = 0; i < nums.length; i++) {\n        arr[nums[i]-1] = 1\n    }\n    for (let i = 0; i < nums.length; i++) {\n        if (arr[i] !== 1) {\n            res.push(i+1)\n        } \n    }\n    return res\n};\n\n\n\n# ä¸¤æ°ä¹å\n\n * leetcode1\n\nç»å®ä¸ä¸ªæ´æ°æ°ç» nums åä¸ä¸ªæ´æ°ç®æ å¼ targetï¼è¯·ä½ å¨è¯¥æ°ç»ä¸­æ¾åº åä¸ºç®æ å¼ target  çé£ ä¸¤ä¸ª æ´æ°ï¼å¹¶è¿åå®ä»¬çæ°ç»ä¸æ ã\n\nä½ å¯ä»¥åè®¾æ¯ç§è¾å¥åªä¼å¯¹åºä¸ä¸ªç­æ¡ãä½æ¯ï¼æ°ç»ä¸­åä¸ä¸ªåç´ å¨ç­æ¡éä¸è½éå¤åºç°ã\n\nä½ å¯ä»¥æä»»æé¡ºåºè¿åç­æ¡ã\n\n\nvar twosum = function(nums, target) {\n    let map = new map()\n    for (let i = 0; i < nums.length; i++) {\n        if (map.has(target - nums[i])) return [map.get(target - nums[i]), i]\n        map.set(nums[i], i)\n    }\n};\n\n\n\n# ä¸æ°ä¹å\n\n * leetcode15\n\nç»ä½ ä¸ä¸ªåå« n ä¸ªæ´æ°çæ°ç» numsï¼å¤æ­ nums ä¸­æ¯å¦å­å¨ä¸ä¸ªåç´  aï¼bï¼c ï¼ä½¿å¾ a + b + c = 0 ï¼è¯·ä½ æ¾åºæææ»¡è¶³æ¡ä»¶ä¸ä¸éå¤çä¸åç»ã\n\næ³¨æï¼ç­æ¡ä¸­ä¸å¯ä»¥åå«éå¤çä¸åç»ã\n\n \n\nç¤ºä¾ï¼\n\nç»å®æ°ç» nums = [-1, 0, 1, 2, -1, -4]ï¼\n\næ»¡è¶³è¦æ±çä¸åç»éåä¸ºï¼\n[\n  [-1, 0, 1],\n  [-1, -1, 2]\n]\n\n\n * åæéè®²æè·¯ï¼æ³¨æå»é\n * é¢è§£\n\nvar threesum = function(nums) {\n    nums.sort((a, b) => a - b)\n    const res = []\n    for (let i = 0; i < nums.length - 2; i++) {\n        if (nums[i] > 0) break\n        let l = i + 1, r = nums.length - 1\n        if (i == 0 || nums[i] != nums[i - 1]) {\n            while (l < r) {\n                if (nums[i] + nums[l] + nums[r] > 0) r--\n                else if (nums[i] + nums[l] + nums[r] < 0) l++\n                else {\n                    res.push([nums[i], nums[l], nums[r]])\n                    while (l < r && nums[l] == nums[l + 1]) l++\n                    while (l < r && nums[r] == nums[r - 1]) r--\n                    l++, r--\n                }\n            }\n        }\n    }\n    return res\n};\n\n\n\n# æ°å­æ°ç»å»éæåº\n\n * ç¨ä¸æ è¡¨ç¤ºæ°å­ï¼ç©ºé´å¤æåº¦è¾é«ï¼ä¸è¬ä¸å»ºè®®ä½¿ç¨\n\nconst arr = [5, 1, 1, 3, 2, 0]\n\nconst foo = (arr) => {\n  const res = []\n  const ans = []\n  for (let i in arr) {\n      res[arr[i]] = 1\n  }\n  for (let i in res) {\n      ans.push(i)\n  }\n  return ans\n}\n\n\n\n# å é¤æåºæ°ç»ä¸­çéå¤é¡¹\n\n> ç¤ºä¾ 1:\n> \n> ç»å®æ°ç» nums = [1,1,2],\n> \n> å½æ°åºè¯¥è¿åæ°çé¿åº¦ 2, å¹¶ä¸åæ°ç» nums çåä¸¤ä¸ªåç´ è¢«ä¿®æ¹ä¸º 1, 2ã (æ³¨æåªéä¿®æ¹ï¼ä¸éå é¤)\n> \n> ä½ ä¸éè¦èèæ°ç»ä¸­è¶åºæ°é¿åº¦åé¢çåç´ ã\n> \n> ç¤ºä¾ 2:\n> \n> ç»å® nums = [0,0,1,1,1,2,2,3,3,4],\n> \n> å½æ°åºè¯¥è¿åæ°çé¿åº¦ 5, å¹¶ä¸åæ°ç» nums çåäºä¸ªåç´ è¢«ä¿®æ¹ä¸º 0, 1, 2, 3, 4ã\n> \n> ä½ ä¸éè¦èèæ°ç»ä¸­è¶åºæ°é¿åº¦åé¢çåç´ ã\n\n * éåä¸æ¬¡ï¼ä¸éå¤çæ¾å¨æ°ç»åå ä½ï¼æ¶é´å¤æåº¦oï¼n)\n\nvar removeduplicates = function(nums) {\n    let len = 1\n    for(let i = 1; i < nums.length; i++){\n        if(nums[i]!==nums[i-1]) nums[len++] = nums[i]\n    }\n    return len\n};\n\n\n> ç»å® nums = [3,2,2,3], val = 3,\n> \n> å½æ°åºè¯¥è¿åæ°çé¿åº¦ 2, å¹¶ä¸ nums ä¸­çåä¸¤ä¸ªåç´ åä¸º 2ã\n> \n> ä½ ä¸éè¦èèæ°ç»ä¸­è¶åºæ°é¿åº¦åé¢çåç´ ã\n> \n> ç»å® nums = [0,1,2,2,3,0,4,2], val = 2,\n> \n> å½æ°åºè¯¥è¿åæ°çé¿åº¦ 5, å¹¶ä¸ nums ä¸­çåäºä¸ªåç´ ä¸º 0, 1, 3, 0, 4ã\n> \n> æ³¨æè¿äºä¸ªåç´ å¯ä¸ºä»»æé¡ºåºã\n> \n> ä½ ä¸éè¦èèæ°ç»ä¸­è¶åºæ°é¿åº¦åé¢çåç´ ã\n\nvar removeelement = function(nums, val) {\n    let len = 0\n    for(let i = 0; i < nums.length; i++){\n        if(nums[i] !== val) nums[len++] = nums[i]\n    }\n    return len\n};\n\n\n\n# æè½¬ç©éµ\n\n * leetcode48\n\n> ä½ å¿é¡»å¨åå°æè½¬å¾åï¼è¿æå³çä½ éè¦ç´æ¥ä¿®æ¹è¾å¥çäºç»´ç©éµãè¯·ä¸è¦ä½¿ç¨å¦ä¸ä¸ªç©éµæ¥æè½¬å¾åã\n> \n> ç¤ºä¾ 1:\n> \n> ç»å® matrix = [ [1,2,3], [4,5,6], [7,8,9] ],\n> \n> åå°æè½¬è¾å¥ç©éµï¼ä½¿å¶åä¸º: [ [7,4,1], [8,5,2], [9,6,3] ]\n\nvar rotate = function(matrix) { \n    const len = matrix.length;\n    for(let i = 0; i < len; i++){\n        for(let j = 0; j < len; j++){\n            let curr = matrix[i].pop()\n            matrix[len - j - 1].unshift(curr)\n        }\n    }\n};\n\n\n * å·ä½è¿ç¨å¦ä¸ï¼\n\n[ [ 1, 2 ], [ 4, 5, 6 ], [ 3, 7, 8, 9 ] ]\n\n[ [ 1 ], [ 2, 4, 5, 6 ], [ 3, 7, 8, 9 ] ]\n\n[ [ 1 ], [ 2, 4, 5, 6 ], [ 3, 7, 8, 9 ] ]\n\n[ [ 1 ], [ 2, 4, 5 ], [ 6, 3, 7, 8, 9 ] ]\n\n[ [ 1 ], [ 5, 2, 4 ], [ 6, 3, 7, 8, 9 ] ]\n\n[ [ 4, 1 ], [ 5, 2 ], [ 6, 3, 7, 8, 9 ] ]\n\n[ [ 4, 1 ], [ 5, 2 ], [ 9, 6, 3, 7, 8 ] ]\n\n[ [ 4, 1 ], [ 8, 5, 2 ], [ 9, 6, 3, 7 ] ]\n\n[ [ 7, 4, 1 ], [ 8, 5, 2 ], [ 9, 6, 3 ] ]\n\n\n\n# ééåæ°å\n\n * leetcode665\n\n * é¢è§£\n\nvar checkpossibility = function(nums) {\n    let count = 0\n    for (let i = 1; i < nums.length; i++) {\n        if (nums[i] < nums[i-1]) {\n            if (i === 1 || nums[i] >= nums[i-2]) {\n                nums[i-1] = nums[i]\n            } else {\n                nums[i] = nums[i-1]\n            }\n            count ++\n        }\n    }\n    return count <= 1\n};\n\n\n\n# é¡ºæ¶éæå°ç©éµ\n\n * leetcode54\n * ãæç»å¾è§£ãä¸¤ç§éåçç­ç¥ï¼çä½ åæ¬¢åªç§\n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼matrix = [[1,2,3],[4,5,6],[7,8,9]]\nè¾åºï¼[1,2,3,6,9,8,7,4,5]\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼matrix = [[1,2,3,4],[5,6,7,8],[9,10,11,12]]\nè¾åºï¼[1,2,3,4,8,12,11,10,9,5,6,7]\n\n\nvar spiralorder = function(matrix) {\n    if (!matrix.length) return [];\n    let left = 0, right = matrix[0].length - 1, top = 0, bottom = matrix.length - 1;\n    const res = [];\n    while (right > left && bottom > top) {\n        for (let i = left; i < right; i++) res.push(matrix[top][i]); // ä¸å±\n        for (let i = top; i < bottom; i++) res.push(matrix[i][right]); // å³å±\n        for (let i = right; i > left; i--) res.push(matrix[bottom][i]); // ä¸å±\n        for (let i = bottom; i > top; i--) res.push(matrix[i][left]); // å·¦å±\n        // åä¸ªè¾¹çåæ¶æ¶ç¼©ï¼è¿å¥åå±\n        left++;\n        right--;\n        top++;\n        bottom--;\n    }\n    // å©ä¸ä¸åï¼ä»ä¸å°ä¸ä¾æ¬¡æ·»å \n    if (left === right) {\n        for (let i = top; i <= bottom; i++) res.push(matrix[i][left]);\n    }\n    // å©ä¸ä¸è¡ï¼ä»å·¦å°å³ä¾æ¬¡æ·»å \n    else if (top === bottom) {\n        for (let i = left; i <= right; i++) res.push(matrix[top][i]);\n    }\n    return res;\n}\n\n\n\n# æé¿æ¹æµå­æ°ç»\n\n * leetcode978\n\n * é¢è§£\n\nvar maxturbulencesize = function(arr) {\n    let n = arr.length,\n        maxnum = number.min_safe_integer,\n        cur = 1\n    if(n === 1) return 1\n    for(let i = 1; i < n; i++) {\n        if(arr[i] === arr[i-1]) {\n            cur = 1\n        }else if(arr[i] > arr[i-1] && arr[i-2] >= arr[i-1]) {\n            cur++\n        } else if(arr[i] < arr[i-1] && arr[i-2] <= arr[i-1]) {\n            cur++\n        } else {\n            cur = 2\n        }\n        maxnum = math.max(maxnum, cur)\n    }\n    return maxnum;\n};\n\n\n\n# é¿åº¦æå°å­æ°ç»(æ»å¨çªå£)\n\n * leetcode209\n * é¢è§£\n\nvar minsubarraylen = function(s, nums) {\n    const int_max = number.max_safe_integer\n    var i = 0, sum = 0, ans = int_max\n    for (var j = 0; j < nums.length; j++) {\n        sum += nums[j]\n        while (sum >= s) {\n            ans = math.min(ans, j - i + 1)\n            sum -= nums[i++]\n        }\n    }\n    return ans === int_max ? 0 : ans\n};\n\n\n\n# å¯»æ¾ä¸¤ä¸ªæ­£åºæ°ç»çä¸­ä½æ°\n\n * leetcode4\n\nvar findmediansortedarrays = function(nums1, nums2) {\n    let i = nums1.length - 1, j = nums2.length - 1\n    nums1 = nums1.concat(new array(j + 1).fill(0))\n    let k = nums1.length - 1\n    while (j >= 0) {\n        nums1[i] > nums2[j] ? nums1[k--] = nums1[i--] : nums1[k--] = nums2[j--]\n    }\n    if (nums1.length % 2 === 0) {\n        return (nums1[nums1.length / 2] + nums1[nums1.length / 2 - 1]) / 2\n    } else {\n        return nums1[~~(nums1.length / 2)]\n    }\n};\n\n\n\n# ä»ä¸¤ä¸ªæ°ç»ä¸­æ¾åºå±æçåç´ \n\n// ä»ä¸¤ä¸ªæ°ç»ä¸­æ¾åºå±æçåç´ ã\n// ç¤ºä¾ï¼ arr1 = [1,2,3,4]; arr2=[3,4,5,6]\n// intersection(arr1, arr2);\n// output [3,4]\n\nfunction intersection(arr1, arr2) {\n    return arr1.filter(item => arr2.includes(item))\n}\n\nfunction intersection(arr1, arr2) {\n    const map = new map()\n    const res = []\n    for (const item of arr1) {\n        if (!map.get(item)) {\n            map.set(item, 1)\n        }\n    }\n    for (const item of arr2) {\n        if (map.get(item)) {\n            res.push(item)\n        }\n    }\n    return res\n}\n\n\n\n# äºåæ¥æ¾ï¼æéå¤åç´ ï¼\n\n> ä¸ä¸ªæåºå¯éå¤æ°ç»ï¼æå®targetï¼è¿åè¯¥targetå¨æ°ç»ä¸­çä½ç½®ã\n> \n> [1,2,2,3,4,5]\n> \n> 1 => [0]\n> \n> 2 = >[1,2]\n> \n> 10 = > [-1]\n\nfunction search(arr, target) {\n    const res = []\n    let left = 0, right = arr.length - 1\n    while (left <= right) {\n        let mid = (left + right) >> 1\n        if (arr[mid] === target) {\n            res.push(mid)\n            let index1 = index2 = mid\n            while (arr[index1 + 1] === arr[index1]) {\n                res.push(index1 + 1)\n                index1++\n            }\n            while (arr[index2 - 1] === arr[index2]) {\n                res.push(index2 - 1)\n                index2--\n            }\n            break\n        } else if (arr[mid] > target) {\n            right = mid - 1\n        } else {\n            left = mid + 1\n        }\n    }\n    return res.length ? res : [-1]\n}\n\n\n\n# åä¸ºkçå­æ°ç»\n\n * leetcode560\n * åç¼å + åå¸è¡¨\n\n// k = 7\n// æ°ç»ï¼    3, 4, 2,  3,  2\n// åç¼å    3, 7, 9, 12, 14\n// map\n// key   0, 3, 7, 9, 12, 14\n// value 1, 1, 1, 1,  1,  1\n\n// ä¸ºä»ä¹æä¸ªåå¼{0, 1}ï¼å ä¸ºç¬¬ä¸æ¬¡è¦è®°å½[3, 4]çç»æï¼sum - key = 7 - 7 = 0,\n// èè¡¨ä¸­æ¯æ²¡æ0å¯¹åºçæ¬¡æ°çï¼æä»¥è¦è®¾ç½®ä¸ä¸ªåå¼ï¼ç¨äºè®°å½ç¬¬ä¸ä¸ªå¼ã\n// ç¬¬äºæ¬¡è¦è®°å½ [2, 3, 2]çç»æï¼sum - key = 14 - 7 = 7\n\nfunction subarraysum(nums, k) {\n  const map = new map();\n  map.set(0, 1);\n  let count = 0;\n  let currentsum = 0;\n  for (const num of nums) {\n    currentsum += num;\n    if (map.get(currentsum - k)) {\n      count += map.get(currentsum - k);\n    }\n    map.set(currentsum, (map.get(currentsum) || 0) + 1);\n  }\n  return count;\n}\n",charsets:{cjk:!0}},{title:"å¨æè§å",frontmatter:{title:"å¨æè§å",date:"2020-11-16T16:01:54.000Z",categories:"ç®æ³"},regularPath:"/algorithm/dynamic.html",relativePath:"algorithm/dynamic.md",key:"v-a184f442",path:"/algorithm/dynamic.html",headers:[{level:2,title:"å¨æè§åä¸è´ªå¿çåºå«",slug:"å¨æè§åä¸è´ªå¿çåºå«",normalizedTitle:"å¨æè§åä¸è´ªå¿çåºå«",charIndex:208},{level:2,title:"ç¬æ¥¼æ¢¯",slug:"ç¬æ¥¼æ¢¯",normalizedTitle:"ç¬æ¥¼æ¢¯",charIndex:11},{level:2,title:"é¶é±åæ¢",slug:"é¶é±åæ¢",normalizedTitle:"é¶é±åæ¢",charIndex:18},{level:2,title:"æå¤§å­åºååï¼è¿ç»­ï¼",slug:"æå¤§å­åºåå-è¿ç»­",normalizedTitle:"æå¤§å­åºååï¼è¿ç»­ï¼",charIndex:1950},{level:2,title:"æå®¶å«èï¼éè¿ç»­ï¼",slug:"æå®¶å«è-éè¿ç»­",normalizedTitle:"æå®¶å«èï¼éè¿ç»­ï¼",charIndex:3626},{level:2,title:"æé¿ééå¤å­ä¸²",slug:"æé¿ééå¤å­ä¸²",normalizedTitle:"æé¿ééå¤å­ä¸²",charIndex:36},{level:2,title:"æé¿éå¤å­æ°ç»",slug:"æé¿éå¤å­æ°ç»",normalizedTitle:"æé¿éå¤å­æ°ç»",charIndex:47},{level:2,title:"æé¿éå¢å­åºå",slug:"æé¿éå¢å­åºå",normalizedTitle:"æé¿éå¢å­åºå",charIndex:58},{level:2,title:"æé¿å¬å±å­åºå(LCS)",slug:"æé¿å¬å±å­åºå-lcs",normalizedTitle:"æé¿å¬å±å­åºå(lcs)",charIndex:6717},{level:2,title:"ç¼è¾è·ç¦»(SES)",slug:"ç¼è¾è·ç¦»-ses",normalizedTitle:"ç¼è¾è·ç¦»(ses)",charIndex:7900},{level:2,title:"LCSåSESçå³ç³»",slug:"lcsåsesçå³ç³»",normalizedTitle:"lcsåsesçå³ç³»",charIndex:9349},{level:2,title:"æé¿åæå­ä¸²",slug:"æé¿åæå­ä¸²",normalizedTitle:"æé¿åæå­ä¸²",charIndex:88},{level:2,title:"ä¸åè·¯å¾",slug:"ä¸åè·¯å¾",normalizedTitle:"ä¸åè·¯å¾",charIndex:98},{level:2,title:"æå°è·¯å¾å",slug:"æå°è·¯å¾å",normalizedTitle:"æå°è·¯å¾å",charIndex:106},{level:2,title:"æ­£åè¡¨è¾¾å¼å¹é",slug:"æ­£åè¡¨è¾¾å¼å¹é",normalizedTitle:"æ­£åè¡¨è¾¾å¼å¹é",charIndex:115},{level:2,title:"åå²ç­åå­é",slug:"åå²ç­åå­é",normalizedTitle:"åå²ç­åå­é",charIndex:126},{level:2,title:"ä¸è§å½¢çæå°è·¯å¾å",slug:"ä¸è§å½¢çæå°è·¯å¾å",normalizedTitle:"ä¸è§å½¢çæå°è·¯å¾å",charIndex:136},{level:2,title:"ä¹°åè¡ç¥¨çæä½³æ¶æº",slug:"ä¹°åè¡ç¥¨çæä½³æ¶æº",normalizedTitle:"ä¹°åè¡ç¥¨çæä½³æ¶æº",charIndex:149},{level:2,title:"ä¹°åè¡ç¥¨çæä½³æ¶æºiiï¼å¤æ¬¡äº¤æï¼",slug:"ä¹°åè¡ç¥¨çæä½³æ¶æºii-å¤æ¬¡äº¤æ",normalizedTitle:"ä¹°åè¡ç¥¨çæä½³æ¶æºiiï¼å¤æ¬¡äº¤æï¼",charIndex:15753},{level:2,title:"ä¹°åè¡ç¥¨çæä½³æ¶æºiiiï¼å«å·å»æï¼",slug:"ä¹°åè¡ç¥¨çæä½³æ¶æºiii-å«å·å»æ",normalizedTitle:"ä¹°åè¡ç¥¨çæä½³æ¶æºiiiï¼å«å·å»æï¼",charIndex:16432}],lastUpdated:"4/6/2023, 7:10:18 PM",lastUpdatedTimestamp:1680779418e3,headersStr:"å¨æè§åä¸è´ªå¿çåºå« ç¬æ¥¼æ¢¯ é¶é±åæ¢ æå¤§å­åºååï¼è¿ç»­ï¼ æå®¶å«èï¼éè¿ç»­ï¼ æé¿ééå¤å­ä¸² æé¿éå¤å­æ°ç» æé¿éå¢å­åºå æé¿å¬å±å­åºå(LCS) ç¼è¾è·ç¦»(SES) LCSåSESçå³ç³» æé¿åæå­ä¸² ä¸åè·¯å¾ æå°è·¯å¾å æ­£åè¡¨è¾¾å¼å¹é åå²ç­åå­é ä¸è§å½¢çæå°è·¯å¾å ä¹°åè¡ç¥¨çæä½³æ¶æº ä¹°åè¡ç¥¨çæä½³æ¶æºiiï¼å¤æ¬¡äº¤æï¼ ä¹°åè¡ç¥¨çæä½³æ¶æºiiiï¼å«å·å»æï¼",content:'# å¨æè§å\n\n * ç¬æ¥¼æ¢¯\n * é¶é±åæ¢\n * æå¤§å­åºåå\n * æé¿ééå¤å­ä¸²\n * æé¿éå¤å­æ°ç»\n * æé¿éå¢å­åºå\n * æé¿å¬å±å­åºå\n * ç¼è¾è·ç¦»\n * æé¿åæå­ä¸²\n * ä¸åè·¯å¾\n * æå°è·¯å¾å\n * æ­£åè¡¨è¾¾å¼å¹é\n * åå²ç­åå­é\n * ä¸è§å½¢çæå°è·¯å¾å\n * ä¹°åè¡ç¥¨çæä½³æ¶æºi/ii/iii\n * æå®¶å«è\n\n> å¨æè§åçä¸ä¸ªæ¦å¿µï¼æä¼å­ç»æï¼è¾¹çï¼ç¶æè½¬ç§»æ¹ç¨\n\n\n# å¨æè§åä¸è´ªå¿çåºå«\n\n> è´ªå¿ç®æ³ä¸­ï¼ä½åºçæ¯æ­¥è´ªå¿å³ç­é½æ æ³æ¹åï¼å ä¸ºè´ªå¿ç­ç¥æ¯ç±ä¸ä¸æ­¥çæä¼è§£æ¨å¯¼ä¸ä¸æ­¥çæä¼è§£ï¼èä¸ä¸é¨ä¹åçæä¼è§£åä¸ä½ä¿çã è´ªå¿æ¯æ±å±é¨æä¼ï¼ä»¥å¾å°å¨å±æä¼ï¼ä¸ä¸å®æ¯æ­£ç¡®çï¼éè¦è¯æï¼\n> \n> æ¯å¦æå½çé±å¸åä¸º1å3å4åï¼å¦æè¦æ¿6åé±æä¹æ¿ï¼è´ªå¿çè¯åæ¿4åæ¿ä¸¤ä¸ª1ï¼ä¸å±3å¼ é±ï¼èå®éæä¼å¶å®æ¯ä¸¤å¼ 3åï¼ç±»ä¼¼äºèåé®é¢ï¼éè¦èèç©åä¸ªæ°ï¼\n> \n> å¨æè§åç®æ³ä¸­ï¼å¨å±æä¼è§£ä¸­ä¸å®åå«æä¸ªå±é¨æä¼è§£ï¼ä½ä¸ä¸å®åå«åä¸ä¸ªå±é¨æä¼è§£ï¼å æ­¤éè¦è®°å½ä¹åçæææä¼è§£\n\nå¨æè§åå¶å®ååæ²»ç­ç¥æ¯ç±»ä¼¼çï¼ä¹æ¯å°ä¸ä¸ªåé®é¢åè§£ä¸ºè¥å¹²ä¸ªè§æ¨¡è¾å°çå­é®é¢ï¼éå½çæ±è§£è¿äºå­é®é¢ï¼ç¶ååå¹¶å­é®é¢çè§£å¾å°åé®é¢çè§£ã åºå«å¨äºè¿äºå­é®é¢ä¼æéå ï¼ä¸ä¸ªå­é®é¢å¨æ±è§£åï¼å¯è½ä¼åæ¬¡æ±è§£ï¼äºæ¯æä»¬æ³å°å°è¿äºå­é®é¢çè§£å­å¨èµ·æ¥ï¼å½ä¸æ¬¡åæ¬¡æ±è§£è¿ä¸ªå­é®é¢æ¶ï¼ç´æ¥æ¿è¿æ¥å°±æ¯ã\n\n\n# ç¬æ¥¼æ¢¯\n\n * leetcode70\n\næä¸åº§é«åº¦æ¯10çº§å°é¶çæ¥¼æ¢¯ï¼ä»ä¸å¾ä¸èµ°ï¼æ¯è·¨ä¸æ­¥åªè½åä¸1çº§æè2çº§å°é¶ãè¦æ±ç¨ç¨åºæ¥æ±åºä¸å±æå¤å°ç§èµ°æ³ã\n\n\n * æèï¼å¦æåªå·®æåä¸æ­¥å°±èµ°å°ç¬¬ 10 çº§ï¼æ­¤æ¶åä¸ºä¸¤ç§ï¼ä»ç¬¬ 9 çº§å° 10 çº§ï¼ä»ç¬¬ 8 çº§å° 10 çº§\n * 0 å° 9 çº§çèµ°æ³æ xï¼0 å° 8 çº§çèµ°æ³æ y ç§ï¼é£ä¹ 0 å° 10 çº§çèµ°æ³ä¸å±æ x+y\n * F(10) = F(9) + F(8)ï¼F(8) = F(8) + F(7)\n * F(9) å F(8) æ¯ F(10) çæä¼å­ç»æ\n * è¾¹çæ¯ F(1) å F(2)\n * ç¶æè½¬ç§»æ¹ç¨æ¯ F(n) = F(n-1) + F(n-2)\n\nvar climbStairs = function(n) {\n    let dp = new Array(n + 1).fill(0)\n    dp[1] = 1\n    dp[2] = 2\n    for (let i = 3; i <= n; i++) {\n        dp[i] = dp[i - 1] + dp[i - 2]\n    }\n    return dp[n]\n};\n\n\n\n# é¶é±åæ¢\n\n * leetcode322\n\nç»å®ä¸åé¢é¢çç¡¬å¸ coins åä¸ä¸ªæ»éé¢ amountãç¼åä¸ä¸ªå½æ°æ¥è®¡ç®å¯ä»¥åææ»éé¢æéçæå°çç¡¬å¸ä¸ªæ°ãå¦ææ²¡æä»»ä½ä¸ç§ç¡¬å¸ç»åè½ç»ææ»éé¢ï¼è¿å -1ã\n\nä½ å¯ä»¥è®¤ä¸ºæ¯ç§ç¡¬å¸çæ°éæ¯æ éçã\n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼coins = [1, 2, 5], amount = 11\nè¾åºï¼3 \nè§£éï¼11 = 5 + 5 + 1\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼coins = [2], amount = 3\nè¾åºï¼-1\n\n\n * è®¾dp[i] è¡¨ç¤ºæ»éé¢ä¸º i çæ¶åæä¼è§£æ³çç¡¬å¸æ°\n * è¥é¢å¼æ1ï¼2ï¼5è¦åå¤120åï¼æ­¤æ¶å¯ä»¥æ¿ä¸æé¢å¼ä¸º1çï¼æä¼ä¸ªæ°ä¸º dp[119] + 1ï¼æ¿ä¸æé¢è¯ä¸º2çï¼æä¼ä¸ªæ°ä¸ºdp[118] + 1ï¼æ¿ä¸æé¢å¼ä¸º5çï¼æä¼ä¸ªæ°ä¸ºdp[115] + 1ï¼åä¸ç§çæå°å¼å³å¯\n * ç¶æè½¬ç§»æ¹ç¨ï¼dp[i] = Math.min(dp[i - coin] + 1, dp[i - coin] + 1, ...)\n * è¾¹çï¼dp[0] = 0\n\nconst coinChange = (coins, amount) => {\n  \tlet dp = new Array( amount + 1 ).fill( Infinity );\n    dp[0] = 0;\n    for (let i = 1; i <= amount; i++) {\n        for (let coin of coins) {\n            if (i - coin >= 0) {\n                dp[i] = Math.min(dp[i], dp[i - coin] + 1);\n            }\n        }\n    }\n    return dp[amount] === Infinity ? -1 : dp[amount];\n}\n\n\n\n# æå¤§å­åºååï¼è¿ç»­ï¼\n\n * leetcode53\n\nç»å®ä¸ä¸ªæ´æ°æ°ç» nums ï¼æ¾å°ä¸ä¸ªå·ææå¤§åçè¿ç»­å­æ°ç»ï¼å­æ°ç»æå°åå«ä¸ä¸ªåç´ ï¼ï¼è¿åå¶æå¤§åã\n\nç¤ºä¾:\n\nè¾å¥: [-2,1,-3,4,-1,2,1,-5,4]\nè¾åº: 6\nè§£é: è¿ç»­å­æ°ç» [4,-1,2,1] çåæå¤§ï¼ä¸º 6ã\n\n\n * åæï¼ç­æ¡è¯å®æ¯å¨ä»¥ä¸ç»åä¸­ï¼\n * ç¬¬ä¸ä¸ªå­ç»åæ¯ä»¥ç¬¬ä¸ä¸ªæ°å­ç»å°¾çè¿ç»­åºåï¼ä¹å°±æ¯[-2]ï¼æå¤§å¼-2\n * ç¬¬äºä¸ªå­ç»åæ¯ä»¥ç¬¬äºä¸ªæ°å­ç»å°¾çè¿ç»­åºåï¼ä¹å°±æ¯[-2,1], [1]ï¼æå¤§å¼1\n * ç¬¬ä¸ä¸ªå­ç»åæ¯ä»¥ç¬¬ä¸ä¸ªæ°å­ç»å°¾çè¿ç»­åºåï¼ä¹å°±æ¯[-2,1,-3], [1,-3], [-3]ï¼æå¤§å¼-2\n * ç¬¬åä¸ªå­ç»åæ¯ä»¥ç¬¬åä¸ªæ°å­ç»å°¾çè¿ç»­åºåï¼ä¹å°±æ¯[-2,1,-3,4],[1.-3,4],[-3,4],[4]ï¼æå¤§å¼4\n * ç¬¬nä¸ªå­ç»å......\n\n----------------------------------------\n\n * æä¼å­ç»æï¼ç»å n åªæ¯å¨ç»å n-1 çåºç¡ä¸æ¯ä¸ä¸ªæ°ç»åé¢æ·»å  1 ä¸ªæ°å­ numï¼ç¶åå¢å ä¸ä¸ªåªæç¬¬ n ä¸ªæ°å­çæ°ç»[num]ï¼åªéè¦æ¯è¾åä¸ä¸ªç»åçæå¤§å¼ + num å num\n * è¾¹çï¼dp[0] = nums[0]\n * ç¶æè½¬ç§»æ¹ç¨ï¼dp[i] = max(dp[i-1] + nums[i], nums[i]) æè dp[i - 1] > 0 ? dp[i - 1] + nums[i] : nums[i]\n\n// ç»å3åªæ¯å¨ç»å2çåºç¡ä¸æ¯ä¸ä¸ªæ°ç»åé¢æ·»å ç¬¬3ä¸ªæ°å­ï¼ä¹å°±æ¯3ï¼ç¶åå¢å ä¸ä¸ªåªæç¬¬ä¸ä¸ªæ°å­çæ°ç»[3]\n// åªéè¦æ¯è¾åä¸ä¸ªç»åçæå¤§å¼+numånum\n// è®¡ç®åºä¹ä¸ªç»åçæå¤§å¼ï¼ååæå¤§çå³å¯\n\nvar maxSubArray = function(nums) {\n    const dp = new Array(nums.length).fill(0);\n    dp[0] = nums[0];\n    for (let i = 1; i < nums.length; i++) {\n        dp[i] = Math.max(nums[i], dp[i - 1] + nums[i]);\n    }\n    return Math.max(...dp);\n};\n\n\næä¹æ±å¯¹åºçæ°ç»å¢ï¼ç¸æ¯äºä¸é¢ï¼åºè¯¥å­å¨èµ·å§åç»æçç´¢å¼ã\n\nvar maxSubArray = function(nums) {\n    const len = nums.length\n    const dp = new Array(len).fill(0)\n    let start = end = 0\n    let finalStart = finalEnd = 0\n    let max = dp[0] = nums[0]\n    for (let i = 1; i < len; i++) {\n        if (dp[i - 1] > 0) {\n            dp[i] = dp[i - 1] + nums[i]\n            end = i\n        } else {\n            dp[i] = nums[i]\n            start = end = i\n        }\n        if (dp[i] > max) {\n            max = dp[i]\n            finalStart = start\n            finalEnd = end\n        }\n    }\n    return nums.slice(finalStart, finalEnd + 1)\n};\n\nconsole.log(maxSubArray([-2,1,-3,4,-1,2,1,-5,4]))\n// [4,-1,2,1]\n\n\n\n# æå®¶å«èï¼éè¿ç»­ï¼\n\n * leetcode198\n * ç±äºä¸å¯ä»¥å¨ç¸é»çæ¿å±é¯å¥ï¼æä»¥å¨å½åä½ç½® n æ¿å±å¯ççªçæå¤§å¼ï¼è¦ä¹å°±æ¯ n-1 æ¿å±å¯ççªçæå¤§å¼ï¼è¦ä¹å°±æ¯ n-2 æ¿å±å¯ççªçæå¤§å¼å ä¸å½åæ¿å±çå¼ï¼äºèä¹é´åæå¤§å¼\n * ç¶æè½¬ç§»æ¹ç¨ï¼dp[n] = max( dp[n-1], dp[n-2] + num )\n * ä¸¾ä¾æ¥è¯´ï¼[3,4,2]ï¼1 å·æ¿é´å¯ççªæå¤§å¼ä¸º 3ï¼ å³ä¸º dp[1]=3ï¼2 å·æ¿é´å¯ççªæå¤§å¼ä¸º 4ï¼ å³ä¸º dp[2]=4ï¼3 å·æ¿é´èªèº«çå¼ä¸º 2 å³ä¸º num=2ï¼é£ä¹ dp[3] = MAX( dp[2], dp[1] + num ) = 5ï¼3 å·æ¿é´å¯ççªæå¤§å¼ä¸º 5\n * æ¶é´å¤æåº¦ï¼O(n)\n\nvar rob = function(nums) {\n    const dp = new Array(nums.length).fill(0);\n  \n  \t// åå§åå¥½åä¸¤ä¸ªç¶æ\n    dp[0] = nums[0];\n    dp[1] = nums[1] > nums[0] ? nums[1] : nums[0];\n\n    for (let i = 2; i < nums.length; i++) {\n        dp[i] = Math.max(dp[i - 2] + nums[i], dp[i - 1]);\n    }\n\n    return dp[nums.length - 1]\n};\n\n\n\n# æé¿ééå¤å­ä¸²\n\n * åæoffer48\n\nç¤ºä¾ 1:\nè¾å¥: "abcabcbb"\nè¾åº: 3 \nè§£é: å ä¸ºæ éå¤å­ç¬¦çæé¿å­ä¸²æ¯ "abc"ï¼æä»¥å¶é¿åº¦ä¸º 3ã\n\nç¤ºä¾ 2:\nè¾å¥: "bbbbb"\nè¾åº: 1\nè§£é: å ä¸ºæ éå¤å­ç¬¦çæé¿å­ä¸²æ¯ "b"ï¼æä»¥å¶é¿åº¦ä¸º 1ã\n\nç¤ºä¾ 3:\nè¾å¥: "pwwkew"\nè¾åº: 3\nè§£é: å ä¸ºæ éå¤å­ç¬¦çæé¿å­ä¸²æ¯ "wke"ï¼æä»¥å¶é¿åº¦ä¸º 3ã\n     è¯·æ³¨æï¼ä½ çç­æ¡å¿é¡»æ¯ å­ä¸² çé¿åº¦ï¼"pwke" æ¯ä¸ä¸ªå­åºåï¼ä¸æ¯å­ä¸²ã\n\n\n * dp[i]ä»£è¡¨ä»¥s[i]ç»å°¾çæé¿ééå¤å­ä¸²\n * è¥dp[i-1]åå«s[i]ï¼åæªååºä¸åå«çé¨åæ¼æ¥\n * è¥dp[i-1]ä¸åå«s[i]ï¼åç´æ¥æ¼æ¥\n\nvar lengthOfLongestSubstring = function(s) {\n    if (!s.length) return 0;\n    const dp = new Array(s.length).fill(\'\');\n    dp[0] = s[0];\n    for (let i = 1; i < s.length; i++) {\n        if (!dp[i - 1].includes(s[i])) {\n            dp[i] = dp[i - 1] + s[i];\n        }\n        else {\n            dp[i] = dp[i - 1].slice(dp[i - 1].indexOf(s[i]) + 1) + s[i];\n        }\n    }\n    return Math.max(...dp.map(s => s.length));\n}\n\n\n\n# æé¿éå¤å­æ°ç»\n\n * leetcode718\n * dp[i][j]ï¼è¡¨ç¤ºç¬¬ä¸ä¸ªæ°ç» A å i ä¸ªåç´ åæ°ç» B å j ä¸ªåç´ ç»æçæé¿å¬å±å­æ°ç»(ç¸å½äºå­ä¸²)çé¿åº¦ã\n\nvar findLength = function(nums1, nums2) {\n    const m = nums1.length\n    const n = nums2.length\n    const dp = Array.from(new Array(m + 1), () => new Array(n + 1).fill(0))                    \n    let res = 0\n    for (let i = 1; i <= m; i++) {\n        for (let j = 1; j <= n; j++) {\n            if (nums1[i - 1] == nums2[j - 1]) {     \n                dp[i][j] = dp[i - 1][j - 1] + 1\n            }\n            res = Math.max(dp[i][j], res)\n        }\n    }\n    return res\n};\n\n\n\n# æé¿éå¢å­åºå\n\n * leetcode300\n\nè¾å¥ï¼nums = [10,9,2,5,3,7,101,18]\nè¾åºï¼4\nè§£éï¼æé¿éå¢å­åºåæ¯ [2,3,7,101]ï¼å æ­¤é¿åº¦ä¸º 4 ã\n\n\n * dp[i]ï¼ä»¥nums[i]ç»å°¾çæé¿å­åºåé¿åº¦\n * i === 0: nums[0] = 10ï¼dp[0] = 1\n * i === 1: nums[1] = 9ï¼ (9<10, ä¸è½å½¢æéå¢åºå)ï¼dp[1] = 1\n * i === 2: nums[2] = 2ï¼(2<9 ä¸ 2<10, ä¸è½ä¸ä»»ä½ä¸ä¸ªå½¢æéå¢åºå)ï¼dp[2] = 1\n * i === 3: nums[3] = 5ï¼(5<10, 5<9, ä½æ¯5>2ï¼æä»¥5å¯ä»¥æ¼å°2åé¢)ï¼dp[3] = 1 + dp[2] = 2\n * i === 4: nums[4] = 3ï¼(3<10,3<9,3>2,3<5, æä»¥3å¯ä»¥æ¼å°2åé¢)ï¼dp[4] = 1 + dp[2] = 2\n * i === 5: nums[5] = 7ï¼(7>2,7>5,7>3 æä»¥7å¯ä»¥æ¼å°2æ5æ3åé¢ï¼æä»¥è¦æ¾ä¸ä¸ªæå¤§ç)ï¼dp[5] = 1 + max(dp[2], dp[3], dp[4]) = 3\n * ä¾æ¬¡ç±»æ¨\n * è½¬ç§»æ¹ç¨ï¼ è®¾jâ[0,i)ï¼èèæ¯è½®è®¡ç®æ° dp[i] æ¶ï¼éå [0,i) åè¡¨åºé´ï¼åä»¥ä¸å¤æ­ï¼\n   * å½ nums[i] > nums[j] æ¶ï¼ nums[i]å¯ä»¥æ¥å¨ nums[j]ä¹åï¼æ­¤é¢è¦æ±ä¸¥æ ¼éå¢ï¼ï¼æ­¤æåµä¸æé¿ä¸åå­åºåé¿åº¦ä¸º dp[j] + 1 ï¼\n   * å½ nums[i] <= nums[j] æ¶ï¼nums[i] æ æ³æ¥å¨ nums[j]ä¹åï¼æ­¤æåµä¸åå­åºåä¸æç«ï¼è·³è¿ã\n   * æè½¬ç§»æ¹ç¨ï¼dp[i] = max(dp[i], dp[j] + 1) for j in [0, i)\n\nvar lengthOfLIS = function(nums) {\n    const dp = new Array(nums.length).fill(1);\n    for (let i = 1; i < nums.length; i++) {\n        for (let j = 0; j < i; j++) {\n            if (nums[i] > nums[j]) {\n                dp[i] = Math.max(1 + dp[j], dp[i]);\n            }\n        }\n    }\n    return Math.max(...dp);\n}\n\n\n\n# æé¿å¬å±å­åºå(LCS)\n\n * leetcode1143\n * åèé¢è§£1ï¼åèé¢è§£2(å¡«è¡¨)\n\nç¤ºä¾ 1:\nè¾å¥ï¼text1 = "abcde", text2 = "ace" \nè¾åºï¼3  \nè§£éï¼æé¿å¬å±å­åºåæ¯ "ace"ï¼å®çé¿åº¦ä¸º 3ã\n\nç¤ºä¾ 2:\nè¾å¥ï¼text1 = "abc", text2 = "abc"\nè¾åºï¼3\nè§£éï¼æé¿å¬å±å­åºåæ¯ "abc"ï¼å®çé¿åº¦ä¸º 3\n\n\n * dp[i][j]ï¼å­ç¬¦ä¸² text1 å text2 ä¸­å¯¹åºçåiï¼åjä¸ªå­ç¬¦çLCSçé¿åº¦\n * å½text1[i] === text2[j]æ¶ï¼è¯´æ text1[i] æè text2[j]å¯¹åºçå­ç¬¦æ¯æé¿å¬å±å­åºåçä¸é¨åï¼æä»¥æ dp[i][j] = 1 + dp[i-1][j-1]\n * å½text1[i] !== text2[j]æ¶ï¼æ­¤æ¶æä»¬è¦çä¸¤ä¸ªå­ç¬¦ä¸²åå«åç¬å¾åæ¤ä¸ä¸ªå­ç¬¦ä¸²çå¯¹æ¯æåµï¼è·åä¸¤èçæå¤§å¼å³å¯ï¼æä»¥ædp[i][j] = Math.max(dp[i - 1][j], dp[i][j - 1], dp[i - 1][j - 1])\n\nTEXT2\\TEXT1   -   A   B   C   D   E\n-             0   0   0   0   0   0\na             0   1   1   1   1   1\nc             0   1   1   2   2   2\ne             0   1   1   2   2   3\n\nvar longestCommonSubsequence = function (text1, text2) {\n    const m = text1.length;\n    const n = text2.length;\n    const dp = Array.from(new Array(m + 1), () => new Array(n + 1).fill(0));\n    for (let i = 1; i <= m; i++) {\n        for (let j = 1; j <= n; j++) {\n            if (text1[i - 1] === text2[j - 1]) {\n                dp[i][j] = 1 + dp[i - 1][j - 1];\n            }\n            else {\n                dp[i][j] = Math.max(dp[i - 1][j], dp[i][j - 1]);\n            }\n        }\n    }\n    return dp[m][n];\n}\n\n\n\n# ç¼è¾è·ç¦»(SES)\n\n * leetcode72\n * é¢è§£:å¾®è½¯åèäºè¿éé¢\n\nè¾å¥ï¼word1 = "horse", word2 = "ros"\nè¾åºï¼3\n\nhorse -> rorse (å° \'h\' æ¿æ¢ä¸º \'r\')\nrorse -> rose (å é¤ \'r\')\nrose -> ros (å é¤ \'e\')\n\n\nç¶æå®ä¹ï¼dp[i][j]æ¯word1,word2çæå°ç¼è¾è·ç¦»\n\n * å½word1[i - 1] = word2[j - 1] æ¶ï¼å­ç¬¦ä¸²æåä¸ä½ç¸ç­ï¼ä¸éè¦ä»»ä½æä½ï¼ ä¹å°±æ¯dp(i, j) = dp(i - 1, j - 1)ï¼ s1[0..i] å s2[0..j] çæå°ç¼è¾è·ç¦»ç­äºs1[0..i - 1] å s2[0..j - 1] çæå°ç¼è¾è·ç¦»\n\n * å½ word1[i]ï¼= word2[j]ï¼åéè¦è¿è¡æå¥ãå é¤ãæ¿æ¢æä½äº 1ãæå¥ï¼dp[i][j] = dp(i, j - 1) + 1ï¼ ç´æ¥å¨ s1[i] æå¥ä¸ä¸ªå s2[j] ä¸æ ·çå­ç¬¦ï¼ æä½æ°å ä¸ 2ãå é¤ï¼dp[i][j] = dp(i - 1, j) + 1ï¼ç´æ¥æ s[i] è¿ä¸ªå­ç¬¦å æï¼ æä½æ°å ä¸ 3ãæ¿æ¢ï¼dp[i][j] = dp(i - 1, j - 1) + 1 ï¼ ç´æ¥æ s1[i] æ¿æ¢æs2[j]ï¼ æä½æ°å ä¸\n\nWORD1/WORD2   -   R   O   S\n-             0   1   2   3\nh             1   1   2   3\no             2   2   1   2\nr             3   2   2   2\ns             4   3   3   2\ne             5   4   4   3\n\nvar minDistance = function(word1, word2) {\n    const m = word1.length;\n    const n = word2.length;\n    const dp = Array.from(new Array(m + 1), () => new Array(n + 1).fill(0));\n    for (let i = 0; i <= m; i++) {\n        dp[i][0] = i;\n    }\n    for (let j = 0; j <= n; j++) {\n        dp[0][j] = j;\n    }\n    for (let i = 1; i <= m; i++) {\n        for (let j = 1; j <= n; j++) {\n            if (word1[i - 1] === word2[j - 1]) {\n                dp[i][j] = dp[i - 1][j - 1];\n            }\n            else {\n                // æå¥ãå é¤ãæ¿æ¢\n                dp[i][j] = Math.min(dp[i - 1][j], dp[i][j - 1], dp[i - 1][j - 1]) + 1;\n            }\n        }\n    }\n    return dp[m][n];\n}\n\n\n\n# LCSåSESçå³ç³»\n\nå¯¹äºLCSåSESå¦ææä»¬ç»å¿æ³ä¸ä¸å°±ä¸é¾åç°ä¸¤èå¶å®å°±æ¯åä¸ä¸ªé®é¢ï¼\n\n> å­å¨å­ç¬¦ä¸²string1=ABCDEï¼string2=BCEGFï¼\n> \n> åå­ç¬¦ä¸²çé¿åº¦åå«è®¡ä½Length(string1)ï¼Length(string2);\n> \n> ä»LCSçè§åº¦æ¥çï¼æé¿å¬å±å­åºåå°±æ¯BCEï¼é¿åº¦è®¡ä½Length(LCS);\n> \n> ä»SESçè§åº¦æ¥çï¼æç­ç¼è¾è·¯å¾å°±æ¯A(-)D(-)G(+)F(+)ï¼é¿åº¦è®¡ä½Length(SES);\n> \n> *Length(string1)+Length(string2)=Length(SES)+Length(LCS)2ï¼\n\n\n# æé¿åæå­ä¸²\n\n * leetcode5\n\nç»å®ä¸ä¸ªå­ç¬¦ä¸² sï¼æ¾å° s ä¸­æé¿çåæå­ä¸²ãä½ å¯ä»¥åè®¾ s çæå¤§é¿åº¦ä¸º 1000ã\n\nç¤ºä¾ 1ï¼\nè¾å¥: "babad"\nè¾åº: "bab"\næ³¨æ: "aba" ä¹æ¯ä¸ä¸ªææç­æ¡ã\n\nç¤ºä¾ 2ï¼\nè¾å¥: "cbbd"\nè¾åº: "bb"\n\n\n * åæï¼i å° j æ¯åæå­ä¸²é£ä¹ i+1 å° j-1 ä¹æ¯åæå­ä¸²\n * i å° j çæä¼å­ç»æå°±æ¯ i+1 å° j-1\n * è¾¹çå°±æ¯åä¸ªå­ç¬¦æè aa è¿ç§\n * ç¶æè½¬ç§»æ¹ç¨æ¯ï¼dp[i][j] = dp[i+1][j-1] && s[i] == s[j]\n\nvar longestPalindrome = function(s) {\n    if (!s) return ""\n    let res = [], dp = []\n\n    // ä»åååéåï¼å ä¸º dp[i] ä¾èµäº dp [i+1]\n    for (let i = s.length - 1; i >= 0; i--) {\n        dp[i] = []\n        for (let j = i; j < s.length; j++) {\n            // è¾¹ç\n            if (i === j || (j - i === 1 && s[i] === s[j])) {\n                dp[i][j] = true\n            }\n            // ç¶æè½¬ç§»\n            else if (s[i] === s[j] && dp[i + 1][j - 1]) {\n                dp[i][j] = true\n            }\n            if (dp[i][j] && j - i + 1 > res.length) {\n                res = s.slice(i, j + 1);\n            }\n        }\n    }\n    return res\n};\n\n\n\n# ä¸åè·¯å¾\n\n * leetcode62\n\nä¸ä¸ªæºå¨äººä½äºä¸ä¸ª m x n ç½æ ¼çå·¦ä¸è§ ï¼èµ·å§ç¹å¨ä¸å¾ä¸­æ è®°ä¸ºâStartâ ï¼ã\n\næºå¨äººæ¯æ¬¡åªè½åä¸æèåå³ç§»å¨ä¸æ­¥ãæºå¨äººè¯å¾è¾¾å°ç½æ ¼çå³ä¸è§ï¼å¨ä¸å¾ä¸­æ è®°ä¸ºâFinishâï¼ã\n\né®æ»å±æå¤å°æ¡ä¸åçè·¯å¾ï¼\n\nç¤ºä¾ 1:\nè¾å¥: m = 3, n = 2\nè¾åº: 3\nè§£é:\nä»å·¦ä¸è§å¼å§ï¼æ»å±æ 3 æ¡è·¯å¾å¯ä»¥å°è¾¾å³ä¸è§ã\n1. åå³ -> åå³ -> åä¸\n2. åå³ -> åä¸ -> åå³\n3. åä¸ -> åå³ -> åå³\n\nç¤ºä¾ 2:\nè¾å¥: m = 7, n = 3\nè¾åº: 28\n\n\n * åæï¼å°è¾¾ç»ç¹æ»æ¯åå³æåä¸ï¼æå°è¾¾ç»ç¹çèµ°æ³=å°è¾¾å¶ä¸é¢ç¹çèµ°æ³ + å°è¾¾å¶å·¦é¢ç¹çèµ°æ³\n * ç¶æè½¬ç§»ï¼map[m][n] = map[m-1][n] + map[m][n-1]\n * è¾¹çï¼map[0][j] = 1,map[i][0] = 1\n\n\t// åå§åäºç»´æ°ç»\n    let map = Array.from(new Array(m),()=>(new Array(n).fill(0)))\n    for (let j = 0; j < n; j++) {\n        map[0][j] = 1\n    }\n    for (let i = 0; i < m; i++) {\n        map[i][0] = 1\n    }\n    for (let i = 1; i < m; i++) {\n        for (let j = 1; j < n; j++) {\n            map[i][j] = map[i-1][j] + map[i][j-1]\n        }\n    }\n    return map[m-1][n-1]\n\n\n# Array.from\n\nå°ä¸ä¸ªç±»æ°ç»å¯¹è±¡æèå¯éåå¯¹è±¡è½¬æ¢æä¸ä¸ªçæ­£çæ°ç»ã\n\n * è¯¥ç±»æ°ç»å¯¹è±¡å¿é¡»å·ælengthå±æ§ï¼ç¨äºæå®æ°ç»çé¿åº¦ãå¦ææ²¡ælengthå±æ§ï¼é£ä¹è½¬æ¢åçæ°ç»æ¯ä¸ä¸ªç©ºæ°ç»ã\n\n * è¯¥ç±»æ°ç»å¯¹è±¡çå±æ§åå¿é¡»ä¸ºæ°å¼åæå­ç¬¦ä¸²åçæ°å­\n\n * è¯¥ç±»æ°ç»å¯¹è±¡çå±æ§åå¯ä»¥å å¼å·ï¼ä¹å¯ä»¥ä¸å å¼å·\n\n * Array.fromå¯ä»¥æ¥åç¬¬äºä¸ªåæ°ï¼ä½ç¨ç±»ä¼¼äºæ°ç»çmapæ¹æ³ï¼ç¨æ¥å¯¹æ¯ä¸ªåç´ è¿è¡å¤çï¼å°å¤çåçå¼æ¾å¥è¿åçæ°ç»ã\n\n\n# æå°è·¯å¾å\n\n * leetcode64\n\nç»å®ä¸ä¸ªåå«éè´æ´æ°ç m x n ç½æ ¼ grid ï¼è¯·æ¾åºä¸æ¡ä»å·¦ä¸è§å°å³ä¸è§çè·¯å¾ï¼ä½¿å¾è·¯å¾ä¸çæ°å­æ»åä¸ºæå°ã\n\nè¯´æï¼æ¯æ¬¡åªè½åä¸æèåå³ç§»å¨ä¸æ­¥ã\n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼grid = [[1,3,1],[1,5,1],[4,2,1]]\nè¾åºï¼7\nè§£éï¼å ä¸ºè·¯å¾ 1â3â1â1â1 çæ»åæå°ã\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼grid = [[1,2,3],[4,5,6]]\nè¾åºï¼12\n\n\n * æè·¯ï¼å°grid[i][j]çæå°å¼ï¼è¯å®ç­äºå°grid[i-1][j]çæå°å¼åå°grid[i][j-1]çæå°å¼ä¸­è¾å°çå ä¸å½ågrid[i][j]çå¼\n * æä¼å­ç»æï¼dp[i-1][j], dp[i][j-1]ä¸­å°çé£ä¸ª\n * è¾¹çï¼dp[0][0] = grid[0][0]\n * ç¶æè½¬ç§»æ¹ç¨ï¼dp[i][j] = min(dp[i-1][j], dp[i][j-1]) + grid[i][j]ï¼\n\nvar minPathSum = function(grid) {\n    const m = grid.length;\n    const n = grid[0].length;\n    const dp = Array.from(new Array(m), () => new Array(m).fill(0));\n    dp[0][0] = grid[0][0];\n    for (let i = 1; i < m; i++) {\n        dp[i][0] = dp[i - 1][0] + grid[i][0];\n    }\n    for (let j = 1; j < n; j++) {\n        dp[0][j] = dp[0][j - 1] + grid[0][j];\n    }\n    for (let i = 1; i < m; i++) {\n        for (let j = 1; j < n; j++) {\n            dp[i][j] = Math.min(dp[i - 1][j], dp[i][j - 1]) + grid[i][j];\n        }\n    }\n    return dp[m - 1][n - 1];\n};\n\n\n\n# æ­£åè¡¨è¾¾å¼å¹é\n\n * leetcode10\n\n * é¢è§£\n\n\n# åå²ç­åå­é\n\n * leetcode416\n\n> è¿ä¸ªé®é¢å¯ä»¥è½¬åä¸ºæ±æ°ç»çä¸ä¸ªå­éï¼ä½¿å¾è¿ä¸ªå­éä¸­çåç´ çåå°½å¯è½æ¥è¿sum/2ï¼å¶ä¸­sumä¸ºæ°ç»ä¸­ææåç´ çåãè¿æ ·è½¬æ¢ä¹åè¿ä¸ªé®é¢å°±å¾ç±»ä¼¼0-1èåé®é¢äºï¼å¨nä»¶ç©åä¸­æ¾å°mä»¶ç©åï¼ä»ä»¬çå¯ä»¥è£å¥èåä¸­ï¼ä¸æ»ä»·å¼æå¤§ä¸è¿è¿éä¸èèä»·å¼ï¼å°±èèä½¿å¾è¿äºåç´ çåå°½éæ¥è¿sum/2ã\n\n * èåé®é¢åæ\n\nè¾å¥: nç©åéW[1:n], ä»·å¼V[1:n], èåå®¹éC\nè¾åº: è£åä½¿å¾ä»·å¼æå¤§ (ç©åééä¸ºæ´æ°).\n\ndp[i,k] = ç±[1:i]ç»ååºéé<=kçæå¤§ä»·å¼\n\nå¦æç¬¬iä»¶ç©åæ²¡æåæ¬å¨å¶ä¸­ï¼ådp[i,k] = dp[i-1,k]\nå¦æç¬¬iä»¶ç©ååæ¬å¨å¶ä¸­ï¼ådp[i,k] = dp[i-1,k-W[i]] + V[i]\n\nè½¬ç§»æ¹ç¨ï¼dp[i,k] = max{ dp[i-1,k], dp[i-1,k-W[i]] + V[i] }\n\n\n * ä¾å¦è¾å¥ä¸º1ï¼2ï¼3ï¼6ï¼midSum = 6\n\n-   0   1   2   3   4   5   6\n0   0   0   0   0   0   0   0\n1   0   1   1   1   1   1   1\n2   0   1   2   3   3   3   3\n3   0   1   2   3   4   5   6\n5   0   1   2   3   4   5   6\n\nvar canPartition = function(nums) {\n    let len = nums.length\n    let sum = 0\n    for (let i = 0; i < len; i++) {\n        sum += nums[i]\n    }\n    let midSum = sum >> 1\n    let dp = Array.from(new Array(len + 1),()=>(new Array(midSum + 1).fill(0)))\n    for (let i = 1; i <= len; i++) {\n        for (let j = 1; j <= midSum; j++) {\n            if (j >= nums[i - 1]) {\n                // dp[i - 1][j] ä¸ºä¸è£\n                // dp[i - 1][j - nums[i-1]] + nums[i - 1] æ¯è£ï¼ä¸å©ä½ç©ºé´ç»§ç»­è£\n                dp[i][j] = Math.max(dp[i - 1][j], dp[i - 1][j - nums[i - 1]] + nums[i - 1])\n            }\n            // å½åèåå®¹éjä¸å¤è£ä¸ç¬¬iä¸ªç©åçéénums[i-1]æ¶ï¼åªæéæ©ä¸è£\n            else {\n                dp[i][j] = dp[i - 1][j]\n            }\n        }\n    }\n    return dp[len][midSum] === sum / 2\n};\n\n\n\n# ä¸è§å½¢çæå°è·¯å¾å\n\n * leetcode120\n\nè¾å¥ï¼triangle = [[2],[3,4],[6,5,7],[4,1,8,3]]\nè¾åºï¼11\nè§£éï¼å¦ä¸é¢ç®å¾æç¤ºï¼\n   2\n  3 4\n 6 5 7\n4 1 8 3\nèªé¡¶åä¸çæå°è·¯å¾åä¸º 11ï¼å³ï¼2 + 3 + 5 + 1 = 11ï¼ã\n\n\n * dp[i][j]è¡¨ç¤ºä»ä¸è§å½¢é¡¶é¨èµ°å°ä½ç½® (i, j) çæå°è·¯å¾åï¼å æ­¤è¦æ³èµ°å°ä½ç½® (i, j)ï¼ä¸ä¸æ­¥å°±åªè½å¨ä½ç½® (i - 1, j - 1)æèä½ç½® (i - 1, j)\n\n * ç¶æè½¬ç§»æ¹ç¨ï¼dp[i][j] = min(dp[i-1][j-1], dp[i-1][j]) + triangle[i][j]\n\n * è¾¹çæ¡ä»¶ï¼dp[0][0] = triangle[0][0]\n\n * ä¸è§å½¢çä¸¤è°ä¸ç dp å¼æ¯ç¡®å®ç\n   \n   * dp[i][0] = dp[i-1][0] + triangle[i][0]\n   * dp[i][i] = dp[i-1][i-1] + triangle[i][i]\n\nvar minimumTotal = function(triangle) {\n    const len = triangle.length;\n    // åå§å dp æ°ç»\n    const dp = new Array(len);\n    for (let i = 0; i < len; i++) {\n        dp[i] = new Array(i + 1).fill(0);\n    }\n    dp[0][0] = triangle[0][0];\n    for (let i = 1; i < len; i++) {\n        dp[i][0] = dp[i - 1][0] + triangle[i][0];\n        for (let j = 1; j < i; j++) {\n            dp[i][j] = Math.min(dp[i - 1][j], dp[i - 1][j - 1]) + triangle[i][j];\n        }\n        dp[i][i] = dp[i - 1][i - 1] + triangle[i][i];\n    }\n    return Math.min(...dp[len - 1]);\n};\n\n\n\n# ä¹°åè¡ç¥¨çæä½³æ¶æº\n\n * leetcode121\n\nç»å®ä¸ä¸ªæ°ç»ï¼å®çç¬¬ i ä¸ªåç´ æ¯ä¸æ¯ç»å®è¡ç¥¨ç¬¬ i å¤©çä»·æ ¼ã\nå¦æä½ æå¤åªåè®¸å®æä¸ç¬äº¤æï¼å³ä¹°å¥åååºä¸æ¯è¡ç¥¨ä¸æ¬¡ï¼ï¼è®¾è®¡ä¸ä¸ªç®æ³æ¥è®¡ç®ä½ æè½è·åçæå¤§å©æ¶¦ã\næ³¨æï¼ä½ ä¸è½å¨ä¹°å¥è¡ç¥¨åååºè¡ç¥¨ã\n\nç¤ºä¾ 1:\nè¾å¥: [7,1,5,3,6,4]\nè¾åº: 5\nè§£é: å¨ç¬¬ 2 å¤©ï¼è¡ç¥¨ä»·æ ¼ = 1ï¼çæ¶åä¹°å¥ï¼å¨ç¬¬ 5 å¤©ï¼è¡ç¥¨ä»·æ ¼ = 6ï¼çæ¶åååºï¼æå¤§å©æ¶¦ = 6-1 = 5 ã\n     æ³¨æå©æ¶¦ä¸è½æ¯ 7-1 = 6, å ä¸ºååºä»·æ ¼éè¦å¤§äºä¹°å¥ä»·æ ¼ï¼åæ¶ï¼ä½ ä¸è½å¨ä¹°å¥åååºè¡ç¥¨ã\n     \nç¤ºä¾ 2:\nè¾å¥: [7,6,4,3,1]\nè¾åº: 0\nè§£é: å¨è¿ç§æåµä¸, æ²¡æäº¤æå®æ, æä»¥æå¤§å©æ¶¦ä¸º 0ã\n\n\n> è®¾ dp[i] ä¸ºä»¥ç¬¬ i æ¯è¡ç¥¨ååºçæå¤§å©æ¶¦ï¼éè¦ç»´æ¤ä¸ä¸ªè¡ç¥¨æå°å¼ minï¼å ä¸ºååºæ¶çæå¤§å©æ¶¦ä¸å®æ¯ä¸æå°å¼åè®¡ç®ï¼æåè¿å dp æ°ç»ä¸­çæå¤§å¼ã\n\nvar maxProfit = function(prices) {\n    const dp = new Array(prices.length).fill(0);\n    let min = prices[0];\n    for (let i = 1; i < prices.length; i++) {\n        if (prices[i] > min) {\n            dp[i] = prices[i] - min;\n        }\n        else {\n            min = prices[i];\n        }\n    }\n    return Math.max(...dp);\n}\n\n\n\n# ä¹°åè¡ç¥¨çæä½³æ¶æºiiï¼å¤æ¬¡äº¤æï¼\n\nè¾å¥: [7,1,5,3,6,4]\nè¾åº: 7\nè§£é: å¨ç¬¬ 2 å¤©ï¼è¡ç¥¨ä»·æ ¼ = 1ï¼çæ¶åä¹°å¥ï¼å¨ç¬¬ 3 å¤©ï¼è¡ç¥¨ä»·æ ¼ = 5ï¼çæ¶åååº, è¿ç¬äº¤ææè½è·å¾å©æ¶¦ = 5-1 = 4 ã\n     éåï¼å¨ç¬¬ 4 å¤©ï¼è¡ç¥¨ä»·æ ¼ = 3ï¼çæ¶åä¹°å¥ï¼å¨ç¬¬ 5 å¤©ï¼è¡ç¥¨ä»·æ ¼ = 6ï¼çæ¶åååº, è¿ç¬äº¤ææè½è·å¾å©æ¶¦ = 6-3 = 3 ã\n\n\n> ç±äºå¯ä»¥æ éæ¬¡çä¹°å¥åååºï¼æä»¬é½ç¥éçè¡æ³è¦æ£é±çè¯å½ç¶æ¯ä½ä»·ä¹°å¥ï¼é«ä»·ååºï¼é£ä¹è¿éæä»¬åªéè¦ä»ç¬¬äºå¤©å¼å§ï¼å¦æå½å¤©ä»·æ ¼æ¯ä¹åçä»·æ ¼é«ï¼åæå·®ä»·å å¥å©æ¶¦ä¸­ï¼å ä¸ºæä»¬å¯ä»¥æ¨å¤©ä¹°å¥ï¼ä»æ¥ååºï¼è¥æå¤©ä»·æ ¼æ´é«çè¯ï¼è¿å¯ä»¥ä»æ¥ä¹°å¥ï¼æå¤©åæåºï¼ä»¥æ­¤ç±»æ¨éåå®æ´ä¸ªæ°ç»ï¼å³å¯æ±åºæå¤§å©æ¶¦ã å³ä½¿æ¯è¿ç»­ä¸æ¶¨äº¤ææ¥ï¼ è®¾æ­¤ä¸æ¶¨äº¤ææ¥è¡ç¥¨ä»·æ ¼åå«ä¸º p1,p2,...,pn ï¼åç¬¬ä¸å¤©ä¹°æåä¸å¤©åæ¶çæå¤§ï¼å³ pnâp1ï¼ç­ä»·äºæ¯å¤©é½ä¹°åï¼å³ pnâp1=(p2âp1)+(p3âp2)+...+(pnâpnâ1)\n\n// è´ªå¿\nvar maxProfit = function(prices) {\n    let res = 0;\n    for (let i = 1; i < prices.length; i++) {\n        if (prices[i] > prices[i - 1]) {\n            res += prices[i] - prices[i - 1];\n        }\n    }\n    return res;\n}\n\n\n\n# ä¹°åè¡ç¥¨çæä½³æ¶æºiiiï¼å«å·å»æï¼\n\nç»å®ä¸ä¸ªæ´æ°æ°ç»ï¼å¶ä¸­ç¬¬ i ä¸ªåç´ ä»£è¡¨äºç¬¬ i å¤©çè¡ç¥¨ä»·æ ¼ ãâ\n\nè®¾è®¡ä¸ä¸ªç®æ³è®¡ç®åºæå¤§å©æ¶¦ãå¨æ»¡è¶³ä»¥ä¸çº¦ææ¡ä»¶ä¸ï¼ä½ å¯ä»¥å°½å¯è½å°å®ææ´å¤çäº¤æï¼å¤æ¬¡ä¹°åä¸æ¯è¡ç¥¨ï¼:\n\nä½ ä¸è½åæ¶åä¸å¤ç¬äº¤æï¼ä½ å¿é¡»å¨åæ¬¡è´­ä¹°ååºå®æä¹åçè¡ç¥¨ï¼ã\nååºè¡ç¥¨åï¼ä½ æ æ³å¨ç¬¬äºå¤©ä¹°å¥è¡ç¥¨ (å³å·å»æä¸º 1 å¤©)ã\n\nç¤ºä¾:\nè¾å¥: [1,2,3,0,2]\nè¾åº: 3 \nè§£é: å¯¹åºçäº¤æç¶æä¸º: [ä¹°å¥, ååº, å·å»æ, ä¹°å¥, ååº]\n\n\n * è®¾ dp[i] ä¸º æªæ­¢è³ç¬¬iå¤©çæå¤§æ¶ç\n * å¯¹äºæ¯ä¸å¤©ié½æä¸¤ç§ç¶ææè¡åä¸æè¡ï¼èä¸æè¡ååä¸ºå½å¤©ååºåæ¬æ¥å°±æ²¡æ\n   * æè¡ï¼è®¾ä¸ºdp[i][1]\n   * ä¸æè¡\n     * å½å¤©ååºäºè¡ç¥¨æä»¥æ²¡æï¼è®¾ä¸ºdp[i][2]\n     * åä¸å¤©å°±æ²¡æï¼ä»å¤©ä¹æ²¡æï¼è®¾ä¸ºdp[i][0]\n * ç¶æç¡®å®å¥½åï¼ä¸é¢å°±æ¯å¦ä½å»ºç«ç¶æè½¬ç§»æ¹ç¨ï¼\n   * å½å¤©æè¡åä¸ºä¸¤ç§æåµï¼å½å¤©ä¹°å¥åæ¬æ¥å°±æï¼æ¾åºæçæå¤§å¼\n     * å½å¤©ä¹°å¥ï¼åä¸å¤©ä¸å®æ²¡æå¹¶ä¸åä¸å¤©æ²¡æååºï¼dp[i-1][0]ï¼,æ­¤æ¶æçä¸ºdp[i-1][0]-p[i]\n     * åä¸å¤©æ¬æ¥å°±æï¼æ­¤æ¶çæçä¸ºdp[i-1][1]\n     * ç¶æè½¬ç§»æ¹ç¨ï¼dp[i][1] = max(dp[i-1][1],dp[i-1][0]-p[i])\n   * ä¸æè¡ï¼å½å¤©ååºæä»¥æ²¡æï¼\n     * å½å¤©ååºï¼åä¸å¤©ä¸å®ææï¼æ­¤æ¶çæå¤§æçå°±æ¯åä¸å¤©çæç + ååºçä»·æ ¼\n     * ç¶æè½¬ç§»æ¹ç¨ï¼dp[i][2] = dp[i-1][1] + p[i]\n   * ä¸æè¡ï¼æ¬æ¥å°±æ²¡æï¼\n     * è¯´æåä¸å¤©ä¹æ²¡æï¼æå¤§æçå°±æ¯åä¸å¤©ä¸¤ç§æ²¡æç¶æçæå¤§å¼\n     * ç¶æè½¬ç§»æ¹ç¨ï¼dp[i][0] = max(dp[i-1][0],dp[i-1][2])\n * æªæ­¢æåä¸å¤©çæå¤§æçä¸å®æ¯ä¸ææç¶æç\n * è¾¹çï¼dp[0][0] = 0,dp[0][2] = 0,dp[0][1] = -p[0]\n\nvar maxProfit = function(prices) {\n    if (prices.length === 0) return 0\n    const len = prices.length\n    let dp = Array.from(new Array(len), () => new Array(3).fill(0))\n    dp[0][0] = 0\n    dp[0][2] = 0\n    dp[0][1] = -prices[0]\n    for (let i = 1; i < len; i++) {\n        dp[i][1] = Math.max(dp[i-1][1], dp[i-1][0] - prices[i])\n        dp[i][2] = dp[i-1][1] + prices[i]\n        dp[i][0] = Math.max(dp[i-1][0], dp[i-1][2])\n    }\n    return Math.max(dp[len-1][0], dp[len-1][2])\n};\n',normalizedContent:'# å¨æè§å\n\n * ç¬æ¥¼æ¢¯\n * é¶é±åæ¢\n * æå¤§å­åºåå\n * æé¿ééå¤å­ä¸²\n * æé¿éå¤å­æ°ç»\n * æé¿éå¢å­åºå\n * æé¿å¬å±å­åºå\n * ç¼è¾è·ç¦»\n * æé¿åæå­ä¸²\n * ä¸åè·¯å¾\n * æå°è·¯å¾å\n * æ­£åè¡¨è¾¾å¼å¹é\n * åå²ç­åå­é\n * ä¸è§å½¢çæå°è·¯å¾å\n * ä¹°åè¡ç¥¨çæä½³æ¶æºi/ii/iii\n * æå®¶å«è\n\n> å¨æè§åçä¸ä¸ªæ¦å¿µï¼æä¼å­ç»æï¼è¾¹çï¼ç¶æè½¬ç§»æ¹ç¨\n\n\n# å¨æè§åä¸è´ªå¿çåºå«\n\n> è´ªå¿ç®æ³ä¸­ï¼ä½åºçæ¯æ­¥è´ªå¿å³ç­é½æ æ³æ¹åï¼å ä¸ºè´ªå¿ç­ç¥æ¯ç±ä¸ä¸æ­¥çæä¼è§£æ¨å¯¼ä¸ä¸æ­¥çæä¼è§£ï¼èä¸ä¸é¨ä¹åçæä¼è§£åä¸ä½ä¿çã è´ªå¿æ¯æ±å±é¨æä¼ï¼ä»¥å¾å°å¨å±æä¼ï¼ä¸ä¸å®æ¯æ­£ç¡®çï¼éè¦è¯æï¼\n> \n> æ¯å¦æå½çé±å¸åä¸º1å3å4åï¼å¦æè¦æ¿6åé±æä¹æ¿ï¼è´ªå¿çè¯åæ¿4åæ¿ä¸¤ä¸ª1ï¼ä¸å±3å¼ é±ï¼èå®éæä¼å¶å®æ¯ä¸¤å¼ 3åï¼ç±»ä¼¼äºèåé®é¢ï¼éè¦èèç©åä¸ªæ°ï¼\n> \n> å¨æè§åç®æ³ä¸­ï¼å¨å±æä¼è§£ä¸­ä¸å®åå«æä¸ªå±é¨æä¼è§£ï¼ä½ä¸ä¸å®åå«åä¸ä¸ªå±é¨æä¼è§£ï¼å æ­¤éè¦è®°å½ä¹åçæææä¼è§£\n\nå¨æè§åå¶å®ååæ²»ç­ç¥æ¯ç±»ä¼¼çï¼ä¹æ¯å°ä¸ä¸ªåé®é¢åè§£ä¸ºè¥å¹²ä¸ªè§æ¨¡è¾å°çå­é®é¢ï¼éå½çæ±è§£è¿äºå­é®é¢ï¼ç¶ååå¹¶å­é®é¢çè§£å¾å°åé®é¢çè§£ã åºå«å¨äºè¿äºå­é®é¢ä¼æéå ï¼ä¸ä¸ªå­é®é¢å¨æ±è§£åï¼å¯è½ä¼åæ¬¡æ±è§£ï¼äºæ¯æä»¬æ³å°å°è¿äºå­é®é¢çè§£å­å¨èµ·æ¥ï¼å½ä¸æ¬¡åæ¬¡æ±è§£è¿ä¸ªå­é®é¢æ¶ï¼ç´æ¥æ¿è¿æ¥å°±æ¯ã\n\n\n# ç¬æ¥¼æ¢¯\n\n * leetcode70\n\næä¸åº§é«åº¦æ¯10çº§å°é¶çæ¥¼æ¢¯ï¼ä»ä¸å¾ä¸èµ°ï¼æ¯è·¨ä¸æ­¥åªè½åä¸1çº§æè2çº§å°é¶ãè¦æ±ç¨ç¨åºæ¥æ±åºä¸å±æå¤å°ç§èµ°æ³ã\n\n\n * æèï¼å¦æåªå·®æåä¸æ­¥å°±èµ°å°ç¬¬ 10 çº§ï¼æ­¤æ¶åä¸ºä¸¤ç§ï¼ä»ç¬¬ 9 çº§å° 10 çº§ï¼ä»ç¬¬ 8 çº§å° 10 çº§\n * 0 å° 9 çº§çèµ°æ³æ xï¼0 å° 8 çº§çèµ°æ³æ y ç§ï¼é£ä¹ 0 å° 10 çº§çèµ°æ³ä¸å±æ x+y\n * f(10) = f(9) + f(8)ï¼f(8) = f(8) + f(7)\n * f(9) å f(8) æ¯ f(10) çæä¼å­ç»æ\n * è¾¹çæ¯ f(1) å f(2)\n * ç¶æè½¬ç§»æ¹ç¨æ¯ f(n) = f(n-1) + f(n-2)\n\nvar climbstairs = function(n) {\n    let dp = new array(n + 1).fill(0)\n    dp[1] = 1\n    dp[2] = 2\n    for (let i = 3; i <= n; i++) {\n        dp[i] = dp[i - 1] + dp[i - 2]\n    }\n    return dp[n]\n};\n\n\n\n# é¶é±åæ¢\n\n * leetcode322\n\nç»å®ä¸åé¢é¢çç¡¬å¸ coins åä¸ä¸ªæ»éé¢ amountãç¼åä¸ä¸ªå½æ°æ¥è®¡ç®å¯ä»¥åææ»éé¢æéçæå°çç¡¬å¸ä¸ªæ°ãå¦ææ²¡æä»»ä½ä¸ç§ç¡¬å¸ç»åè½ç»ææ»éé¢ï¼è¿å -1ã\n\nä½ å¯ä»¥è®¤ä¸ºæ¯ç§ç¡¬å¸çæ°éæ¯æ éçã\n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼coins = [1, 2, 5], amount = 11\nè¾åºï¼3 \nè§£éï¼11 = 5 + 5 + 1\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼coins = [2], amount = 3\nè¾åºï¼-1\n\n\n * è®¾dp[i] è¡¨ç¤ºæ»éé¢ä¸º i çæ¶åæä¼è§£æ³çç¡¬å¸æ°\n * è¥é¢å¼æ1ï¼2ï¼5è¦åå¤120åï¼æ­¤æ¶å¯ä»¥æ¿ä¸æé¢å¼ä¸º1çï¼æä¼ä¸ªæ°ä¸º dp[119] + 1ï¼æ¿ä¸æé¢è¯ä¸º2çï¼æä¼ä¸ªæ°ä¸ºdp[118] + 1ï¼æ¿ä¸æé¢å¼ä¸º5çï¼æä¼ä¸ªæ°ä¸ºdp[115] + 1ï¼åä¸ç§çæå°å¼å³å¯\n * ç¶æè½¬ç§»æ¹ç¨ï¼dp[i] = math.min(dp[i - coin] + 1, dp[i - coin] + 1, ...)\n * è¾¹çï¼dp[0] = 0\n\nconst coinchange = (coins, amount) => {\n  \tlet dp = new array( amount + 1 ).fill( infinity );\n    dp[0] = 0;\n    for (let i = 1; i <= amount; i++) {\n        for (let coin of coins) {\n            if (i - coin >= 0) {\n                dp[i] = math.min(dp[i], dp[i - coin] + 1);\n            }\n        }\n    }\n    return dp[amount] === infinity ? -1 : dp[amount];\n}\n\n\n\n# æå¤§å­åºååï¼è¿ç»­ï¼\n\n * leetcode53\n\nç»å®ä¸ä¸ªæ´æ°æ°ç» nums ï¼æ¾å°ä¸ä¸ªå·ææå¤§åçè¿ç»­å­æ°ç»ï¼å­æ°ç»æå°åå«ä¸ä¸ªåç´ ï¼ï¼è¿åå¶æå¤§åã\n\nç¤ºä¾:\n\nè¾å¥: [-2,1,-3,4,-1,2,1,-5,4]\nè¾åº: 6\nè§£é: è¿ç»­å­æ°ç» [4,-1,2,1] çåæå¤§ï¼ä¸º 6ã\n\n\n * åæï¼ç­æ¡è¯å®æ¯å¨ä»¥ä¸ç»åä¸­ï¼\n * ç¬¬ä¸ä¸ªå­ç»åæ¯ä»¥ç¬¬ä¸ä¸ªæ°å­ç»å°¾çè¿ç»­åºåï¼ä¹å°±æ¯[-2]ï¼æå¤§å¼-2\n * ç¬¬äºä¸ªå­ç»åæ¯ä»¥ç¬¬äºä¸ªæ°å­ç»å°¾çè¿ç»­åºåï¼ä¹å°±æ¯[-2,1], [1]ï¼æå¤§å¼1\n * ç¬¬ä¸ä¸ªå­ç»åæ¯ä»¥ç¬¬ä¸ä¸ªæ°å­ç»å°¾çè¿ç»­åºåï¼ä¹å°±æ¯[-2,1,-3], [1,-3], [-3]ï¼æå¤§å¼-2\n * ç¬¬åä¸ªå­ç»åæ¯ä»¥ç¬¬åä¸ªæ°å­ç»å°¾çè¿ç»­åºåï¼ä¹å°±æ¯[-2,1,-3,4],[1.-3,4],[-3,4],[4]ï¼æå¤§å¼4\n * ç¬¬nä¸ªå­ç»å......\n\n----------------------------------------\n\n * æä¼å­ç»æï¼ç»å n åªæ¯å¨ç»å n-1 çåºç¡ä¸æ¯ä¸ä¸ªæ°ç»åé¢æ·»å  1 ä¸ªæ°å­ numï¼ç¶åå¢å ä¸ä¸ªåªæç¬¬ n ä¸ªæ°å­çæ°ç»[num]ï¼åªéè¦æ¯è¾åä¸ä¸ªç»åçæå¤§å¼ + num å num\n * è¾¹çï¼dp[0] = nums[0]\n * ç¶æè½¬ç§»æ¹ç¨ï¼dp[i] = max(dp[i-1] + nums[i], nums[i]) æè dp[i - 1] > 0 ? dp[i - 1] + nums[i] : nums[i]\n\n// ç»å3åªæ¯å¨ç»å2çåºç¡ä¸æ¯ä¸ä¸ªæ°ç»åé¢æ·»å ç¬¬3ä¸ªæ°å­ï¼ä¹å°±æ¯3ï¼ç¶åå¢å ä¸ä¸ªåªæç¬¬ä¸ä¸ªæ°å­çæ°ç»[3]\n// åªéè¦æ¯è¾åä¸ä¸ªç»åçæå¤§å¼+numånum\n// è®¡ç®åºä¹ä¸ªç»åçæå¤§å¼ï¼ååæå¤§çå³å¯\n\nvar maxsubarray = function(nums) {\n    const dp = new array(nums.length).fill(0);\n    dp[0] = nums[0];\n    for (let i = 1; i < nums.length; i++) {\n        dp[i] = math.max(nums[i], dp[i - 1] + nums[i]);\n    }\n    return math.max(...dp);\n};\n\n\næä¹æ±å¯¹åºçæ°ç»å¢ï¼ç¸æ¯äºä¸é¢ï¼åºè¯¥å­å¨èµ·å§åç»æçç´¢å¼ã\n\nvar maxsubarray = function(nums) {\n    const len = nums.length\n    const dp = new array(len).fill(0)\n    let start = end = 0\n    let finalstart = finalend = 0\n    let max = dp[0] = nums[0]\n    for (let i = 1; i < len; i++) {\n        if (dp[i - 1] > 0) {\n            dp[i] = dp[i - 1] + nums[i]\n            end = i\n        } else {\n            dp[i] = nums[i]\n            start = end = i\n        }\n        if (dp[i] > max) {\n            max = dp[i]\n            finalstart = start\n            finalend = end\n        }\n    }\n    return nums.slice(finalstart, finalend + 1)\n};\n\nconsole.log(maxsubarray([-2,1,-3,4,-1,2,1,-5,4]))\n// [4,-1,2,1]\n\n\n\n# æå®¶å«èï¼éè¿ç»­ï¼\n\n * leetcode198\n * ç±äºä¸å¯ä»¥å¨ç¸é»çæ¿å±é¯å¥ï¼æä»¥å¨å½åä½ç½® n æ¿å±å¯ççªçæå¤§å¼ï¼è¦ä¹å°±æ¯ n-1 æ¿å±å¯ççªçæå¤§å¼ï¼è¦ä¹å°±æ¯ n-2 æ¿å±å¯ççªçæå¤§å¼å ä¸å½åæ¿å±çå¼ï¼äºèä¹é´åæå¤§å¼\n * ç¶æè½¬ç§»æ¹ç¨ï¼dp[n] = max( dp[n-1], dp[n-2] + num )\n * ä¸¾ä¾æ¥è¯´ï¼[3,4,2]ï¼1 å·æ¿é´å¯ççªæå¤§å¼ä¸º 3ï¼ å³ä¸º dp[1]=3ï¼2 å·æ¿é´å¯ççªæå¤§å¼ä¸º 4ï¼ å³ä¸º dp[2]=4ï¼3 å·æ¿é´èªèº«çå¼ä¸º 2 å³ä¸º num=2ï¼é£ä¹ dp[3] = max( dp[2], dp[1] + num ) = 5ï¼3 å·æ¿é´å¯ççªæå¤§å¼ä¸º 5\n * æ¶é´å¤æåº¦ï¼o(n)\n\nvar rob = function(nums) {\n    const dp = new array(nums.length).fill(0);\n  \n  \t// åå§åå¥½åä¸¤ä¸ªç¶æ\n    dp[0] = nums[0];\n    dp[1] = nums[1] > nums[0] ? nums[1] : nums[0];\n\n    for (let i = 2; i < nums.length; i++) {\n        dp[i] = math.max(dp[i - 2] + nums[i], dp[i - 1]);\n    }\n\n    return dp[nums.length - 1]\n};\n\n\n\n# æé¿ééå¤å­ä¸²\n\n * åæoffer48\n\nç¤ºä¾ 1:\nè¾å¥: "abcabcbb"\nè¾åº: 3 \nè§£é: å ä¸ºæ éå¤å­ç¬¦çæé¿å­ä¸²æ¯ "abc"ï¼æä»¥å¶é¿åº¦ä¸º 3ã\n\nç¤ºä¾ 2:\nè¾å¥: "bbbbb"\nè¾åº: 1\nè§£é: å ä¸ºæ éå¤å­ç¬¦çæé¿å­ä¸²æ¯ "b"ï¼æä»¥å¶é¿åº¦ä¸º 1ã\n\nç¤ºä¾ 3:\nè¾å¥: "pwwkew"\nè¾åº: 3\nè§£é: å ä¸ºæ éå¤å­ç¬¦çæé¿å­ä¸²æ¯ "wke"ï¼æä»¥å¶é¿åº¦ä¸º 3ã\n     è¯·æ³¨æï¼ä½ çç­æ¡å¿é¡»æ¯ å­ä¸² çé¿åº¦ï¼"pwke" æ¯ä¸ä¸ªå­åºåï¼ä¸æ¯å­ä¸²ã\n\n\n * dp[i]ä»£è¡¨ä»¥s[i]ç»å°¾çæé¿ééå¤å­ä¸²\n * è¥dp[i-1]åå«s[i]ï¼åæªååºä¸åå«çé¨åæ¼æ¥\n * è¥dp[i-1]ä¸åå«s[i]ï¼åç´æ¥æ¼æ¥\n\nvar lengthoflongestsubstring = function(s) {\n    if (!s.length) return 0;\n    const dp = new array(s.length).fill(\'\');\n    dp[0] = s[0];\n    for (let i = 1; i < s.length; i++) {\n        if (!dp[i - 1].includes(s[i])) {\n            dp[i] = dp[i - 1] + s[i];\n        }\n        else {\n            dp[i] = dp[i - 1].slice(dp[i - 1].indexof(s[i]) + 1) + s[i];\n        }\n    }\n    return math.max(...dp.map(s => s.length));\n}\n\n\n\n# æé¿éå¤å­æ°ç»\n\n * leetcode718\n * dp[i][j]ï¼è¡¨ç¤ºç¬¬ä¸ä¸ªæ°ç» a å i ä¸ªåç´ åæ°ç» b å j ä¸ªåç´ ç»æçæé¿å¬å±å­æ°ç»(ç¸å½äºå­ä¸²)çé¿åº¦ã\n\nvar findlength = function(nums1, nums2) {\n    const m = nums1.length\n    const n = nums2.length\n    const dp = array.from(new array(m + 1), () => new array(n + 1).fill(0))                    \n    let res = 0\n    for (let i = 1; i <= m; i++) {\n        for (let j = 1; j <= n; j++) {\n            if (nums1[i - 1] == nums2[j - 1]) {     \n                dp[i][j] = dp[i - 1][j - 1] + 1\n            }\n            res = math.max(dp[i][j], res)\n        }\n    }\n    return res\n};\n\n\n\n# æé¿éå¢å­åºå\n\n * leetcode300\n\nè¾å¥ï¼nums = [10,9,2,5,3,7,101,18]\nè¾åºï¼4\nè§£éï¼æé¿éå¢å­åºåæ¯ [2,3,7,101]ï¼å æ­¤é¿åº¦ä¸º 4 ã\n\n\n * dp[i]ï¼ä»¥nums[i]ç»å°¾çæé¿å­åºåé¿åº¦\n * i === 0: nums[0] = 10ï¼dp[0] = 1\n * i === 1: nums[1] = 9ï¼ (9<10, ä¸è½å½¢æéå¢åºå)ï¼dp[1] = 1\n * i === 2: nums[2] = 2ï¼(2<9 ä¸ 2<10, ä¸è½ä¸ä»»ä½ä¸ä¸ªå½¢æéå¢åºå)ï¼dp[2] = 1\n * i === 3: nums[3] = 5ï¼(5<10, 5<9, ä½æ¯5>2ï¼æä»¥5å¯ä»¥æ¼å°2åé¢)ï¼dp[3] = 1 + dp[2] = 2\n * i === 4: nums[4] = 3ï¼(3<10,3<9,3>2,3<5, æä»¥3å¯ä»¥æ¼å°2åé¢)ï¼dp[4] = 1 + dp[2] = 2\n * i === 5: nums[5] = 7ï¼(7>2,7>5,7>3 æä»¥7å¯ä»¥æ¼å°2æ5æ3åé¢ï¼æä»¥è¦æ¾ä¸ä¸ªæå¤§ç)ï¼dp[5] = 1 + max(dp[2], dp[3], dp[4]) = 3\n * ä¾æ¬¡ç±»æ¨\n * è½¬ç§»æ¹ç¨ï¼ è®¾jâ[0,i)ï¼èèæ¯è½®è®¡ç®æ° dp[i] æ¶ï¼éå [0,i) åè¡¨åºé´ï¼åä»¥ä¸å¤æ­ï¼\n   * å½ nums[i] > nums[j] æ¶ï¼ nums[i]å¯ä»¥æ¥å¨ nums[j]ä¹åï¼æ­¤é¢è¦æ±ä¸¥æ ¼éå¢ï¼ï¼æ­¤æåµä¸æé¿ä¸åå­åºåé¿åº¦ä¸º dp[j] + 1 ï¼\n   * å½ nums[i] <= nums[j] æ¶ï¼nums[i] æ æ³æ¥å¨ nums[j]ä¹åï¼æ­¤æåµä¸åå­åºåä¸æç«ï¼è·³è¿ã\n   * æè½¬ç§»æ¹ç¨ï¼dp[i] = max(dp[i], dp[j] + 1) for j in [0, i)\n\nvar lengthoflis = function(nums) {\n    const dp = new array(nums.length).fill(1);\n    for (let i = 1; i < nums.length; i++) {\n        for (let j = 0; j < i; j++) {\n            if (nums[i] > nums[j]) {\n                dp[i] = math.max(1 + dp[j], dp[i]);\n            }\n        }\n    }\n    return math.max(...dp);\n}\n\n\n\n# æé¿å¬å±å­åºå(lcs)\n\n * leetcode1143\n * åèé¢è§£1ï¼åèé¢è§£2(å¡«è¡¨)\n\nç¤ºä¾ 1:\nè¾å¥ï¼text1 = "abcde", text2 = "ace" \nè¾åºï¼3  \nè§£éï¼æé¿å¬å±å­åºåæ¯ "ace"ï¼å®çé¿åº¦ä¸º 3ã\n\nç¤ºä¾ 2:\nè¾å¥ï¼text1 = "abc", text2 = "abc"\nè¾åºï¼3\nè§£éï¼æé¿å¬å±å­åºåæ¯ "abc"ï¼å®çé¿åº¦ä¸º 3\n\n\n * dp[i][j]ï¼å­ç¬¦ä¸² text1 å text2 ä¸­å¯¹åºçåiï¼åjä¸ªå­ç¬¦çlcsçé¿åº¦\n * å½text1[i] === text2[j]æ¶ï¼è¯´æ text1[i] æè text2[j]å¯¹åºçå­ç¬¦æ¯æé¿å¬å±å­åºåçä¸é¨åï¼æä»¥æ dp[i][j] = 1 + dp[i-1][j-1]\n * å½text1[i] !== text2[j]æ¶ï¼æ­¤æ¶æä»¬è¦çä¸¤ä¸ªå­ç¬¦ä¸²åå«åç¬å¾åæ¤ä¸ä¸ªå­ç¬¦ä¸²çå¯¹æ¯æåµï¼è·åä¸¤èçæå¤§å¼å³å¯ï¼æä»¥ædp[i][j] = math.max(dp[i - 1][j], dp[i][j - 1], dp[i - 1][j - 1])\n\ntext2\\text1   -   a   b   c   d   e\n-             0   0   0   0   0   0\na             0   1   1   1   1   1\nc             0   1   1   2   2   2\ne             0   1   1   2   2   3\n\nvar longestcommonsubsequence = function (text1, text2) {\n    const m = text1.length;\n    const n = text2.length;\n    const dp = array.from(new array(m + 1), () => new array(n + 1).fill(0));\n    for (let i = 1; i <= m; i++) {\n        for (let j = 1; j <= n; j++) {\n            if (text1[i - 1] === text2[j - 1]) {\n                dp[i][j] = 1 + dp[i - 1][j - 1];\n            }\n            else {\n                dp[i][j] = math.max(dp[i - 1][j], dp[i][j - 1]);\n            }\n        }\n    }\n    return dp[m][n];\n}\n\n\n\n# ç¼è¾è·ç¦»(ses)\n\n * leetcode72\n * é¢è§£:å¾®è½¯åèäºè¿éé¢\n\nè¾å¥ï¼word1 = "horse", word2 = "ros"\nè¾åºï¼3\n\nhorse -> rorse (å° \'h\' æ¿æ¢ä¸º \'r\')\nrorse -> rose (å é¤ \'r\')\nrose -> ros (å é¤ \'e\')\n\n\nç¶æå®ä¹ï¼dp[i][j]æ¯word1,word2çæå°ç¼è¾è·ç¦»\n\n * å½word1[i - 1] = word2[j - 1] æ¶ï¼å­ç¬¦ä¸²æåä¸ä½ç¸ç­ï¼ä¸éè¦ä»»ä½æä½ï¼ ä¹å°±æ¯dp(i, j) = dp(i - 1, j - 1)ï¼ s1[0..i] å s2[0..j] çæå°ç¼è¾è·ç¦»ç­äºs1[0..i - 1] å s2[0..j - 1] çæå°ç¼è¾è·ç¦»\n\n * å½ word1[i]ï¼= word2[j]ï¼åéè¦è¿è¡æå¥ãå é¤ãæ¿æ¢æä½äº 1ãæå¥ï¼dp[i][j] = dp(i, j - 1) + 1ï¼ ç´æ¥å¨ s1[i] æå¥ä¸ä¸ªå s2[j] ä¸æ ·çå­ç¬¦ï¼ æä½æ°å ä¸ 2ãå é¤ï¼dp[i][j] = dp(i - 1, j) + 1ï¼ç´æ¥æ s[i] è¿ä¸ªå­ç¬¦å æï¼ æä½æ°å ä¸ 3ãæ¿æ¢ï¼dp[i][j] = dp(i - 1, j - 1) + 1 ï¼ ç´æ¥æ s1[i] æ¿æ¢æs2[j]ï¼ æä½æ°å ä¸\n\nword1/word2   -   r   o   s\n-             0   1   2   3\nh             1   1   2   3\no             2   2   1   2\nr             3   2   2   2\ns             4   3   3   2\ne             5   4   4   3\n\nvar mindistance = function(word1, word2) {\n    const m = word1.length;\n    const n = word2.length;\n    const dp = array.from(new array(m + 1), () => new array(n + 1).fill(0));\n    for (let i = 0; i <= m; i++) {\n        dp[i][0] = i;\n    }\n    for (let j = 0; j <= n; j++) {\n        dp[0][j] = j;\n    }\n    for (let i = 1; i <= m; i++) {\n        for (let j = 1; j <= n; j++) {\n            if (word1[i - 1] === word2[j - 1]) {\n                dp[i][j] = dp[i - 1][j - 1];\n            }\n            else {\n                // æå¥ãå é¤ãæ¿æ¢\n                dp[i][j] = math.min(dp[i - 1][j], dp[i][j - 1], dp[i - 1][j - 1]) + 1;\n            }\n        }\n    }\n    return dp[m][n];\n}\n\n\n\n# lcsåsesçå³ç³»\n\nå¯¹äºlcsåseså¦ææä»¬ç»å¿æ³ä¸ä¸å°±ä¸é¾åç°ä¸¤èå¶å®å°±æ¯åä¸ä¸ªé®é¢ï¼\n\n> å­å¨å­ç¬¦ä¸²string1=abcdeï¼string2=bcegfï¼\n> \n> åå­ç¬¦ä¸²çé¿åº¦åå«è®¡ä½length(string1)ï¼length(string2);\n> \n> ä»lcsçè§åº¦æ¥çï¼æé¿å¬å±å­åºåå°±æ¯bceï¼é¿åº¦è®¡ä½length(lcs);\n> \n> ä»sesçè§åº¦æ¥çï¼æç­ç¼è¾è·¯å¾å°±æ¯a(-)d(-)g(+)f(+)ï¼é¿åº¦è®¡ä½length(ses);\n> \n> *length(string1)+length(string2)=length(ses)+length(lcs)2ï¼\n\n\n# æé¿åæå­ä¸²\n\n * leetcode5\n\nç»å®ä¸ä¸ªå­ç¬¦ä¸² sï¼æ¾å° s ä¸­æé¿çåæå­ä¸²ãä½ å¯ä»¥åè®¾ s çæå¤§é¿åº¦ä¸º 1000ã\n\nç¤ºä¾ 1ï¼\nè¾å¥: "babad"\nè¾åº: "bab"\næ³¨æ: "aba" ä¹æ¯ä¸ä¸ªææç­æ¡ã\n\nç¤ºä¾ 2ï¼\nè¾å¥: "cbbd"\nè¾åº: "bb"\n\n\n * åæï¼i å° j æ¯åæå­ä¸²é£ä¹ i+1 å° j-1 ä¹æ¯åæå­ä¸²\n * i å° j çæä¼å­ç»æå°±æ¯ i+1 å° j-1\n * è¾¹çå°±æ¯åä¸ªå­ç¬¦æè aa è¿ç§\n * ç¶æè½¬ç§»æ¹ç¨æ¯ï¼dp[i][j] = dp[i+1][j-1] && s[i] == s[j]\n\nvar longestpalindrome = function(s) {\n    if (!s) return ""\n    let res = [], dp = []\n\n    // ä»åååéåï¼å ä¸º dp[i] ä¾èµäº dp [i+1]\n    for (let i = s.length - 1; i >= 0; i--) {\n        dp[i] = []\n        for (let j = i; j < s.length; j++) {\n            // è¾¹ç\n            if (i === j || (j - i === 1 && s[i] === s[j])) {\n                dp[i][j] = true\n            }\n            // ç¶æè½¬ç§»\n            else if (s[i] === s[j] && dp[i + 1][j - 1]) {\n                dp[i][j] = true\n            }\n            if (dp[i][j] && j - i + 1 > res.length) {\n                res = s.slice(i, j + 1);\n            }\n        }\n    }\n    return res\n};\n\n\n\n# ä¸åè·¯å¾\n\n * leetcode62\n\nä¸ä¸ªæºå¨äººä½äºä¸ä¸ª m x n ç½æ ¼çå·¦ä¸è§ ï¼èµ·å§ç¹å¨ä¸å¾ä¸­æ è®°ä¸ºâstartâ ï¼ã\n\næºå¨äººæ¯æ¬¡åªè½åä¸æèåå³ç§»å¨ä¸æ­¥ãæºå¨äººè¯å¾è¾¾å°ç½æ ¼çå³ä¸è§ï¼å¨ä¸å¾ä¸­æ è®°ä¸ºâfinishâï¼ã\n\né®æ»å±æå¤å°æ¡ä¸åçè·¯å¾ï¼\n\nç¤ºä¾ 1:\nè¾å¥: m = 3, n = 2\nè¾åº: 3\nè§£é:\nä»å·¦ä¸è§å¼å§ï¼æ»å±æ 3 æ¡è·¯å¾å¯ä»¥å°è¾¾å³ä¸è§ã\n1. åå³ -> åå³ -> åä¸\n2. åå³ -> åä¸ -> åå³\n3. åä¸ -> åå³ -> åå³\n\nç¤ºä¾ 2:\nè¾å¥: m = 7, n = 3\nè¾åº: 28\n\n\n * åæï¼å°è¾¾ç»ç¹æ»æ¯åå³æåä¸ï¼æå°è¾¾ç»ç¹çèµ°æ³=å°è¾¾å¶ä¸é¢ç¹çèµ°æ³ + å°è¾¾å¶å·¦é¢ç¹çèµ°æ³\n * ç¶æè½¬ç§»ï¼map[m][n] = map[m-1][n] + map[m][n-1]\n * è¾¹çï¼map[0][j] = 1,map[i][0] = 1\n\n\t// åå§åäºç»´æ°ç»\n    let map = array.from(new array(m),()=>(new array(n).fill(0)))\n    for (let j = 0; j < n; j++) {\n        map[0][j] = 1\n    }\n    for (let i = 0; i < m; i++) {\n        map[i][0] = 1\n    }\n    for (let i = 1; i < m; i++) {\n        for (let j = 1; j < n; j++) {\n            map[i][j] = map[i-1][j] + map[i][j-1]\n        }\n    }\n    return map[m-1][n-1]\n\n\n# array.from\n\nå°ä¸ä¸ªç±»æ°ç»å¯¹è±¡æèå¯éåå¯¹è±¡è½¬æ¢æä¸ä¸ªçæ­£çæ°ç»ã\n\n * è¯¥ç±»æ°ç»å¯¹è±¡å¿é¡»å·ælengthå±æ§ï¼ç¨äºæå®æ°ç»çé¿åº¦ãå¦ææ²¡ælengthå±æ§ï¼é£ä¹è½¬æ¢åçæ°ç»æ¯ä¸ä¸ªç©ºæ°ç»ã\n\n * è¯¥ç±»æ°ç»å¯¹è±¡çå±æ§åå¿é¡»ä¸ºæ°å¼åæå­ç¬¦ä¸²åçæ°å­\n\n * è¯¥ç±»æ°ç»å¯¹è±¡çå±æ§åå¯ä»¥å å¼å·ï¼ä¹å¯ä»¥ä¸å å¼å·\n\n * array.fromå¯ä»¥æ¥åç¬¬äºä¸ªåæ°ï¼ä½ç¨ç±»ä¼¼äºæ°ç»çmapæ¹æ³ï¼ç¨æ¥å¯¹æ¯ä¸ªåç´ è¿è¡å¤çï¼å°å¤çåçå¼æ¾å¥è¿åçæ°ç»ã\n\n\n# æå°è·¯å¾å\n\n * leetcode64\n\nç»å®ä¸ä¸ªåå«éè´æ´æ°ç m x n ç½æ ¼ grid ï¼è¯·æ¾åºä¸æ¡ä»å·¦ä¸è§å°å³ä¸è§çè·¯å¾ï¼ä½¿å¾è·¯å¾ä¸çæ°å­æ»åä¸ºæå°ã\n\nè¯´æï¼æ¯æ¬¡åªè½åä¸æèåå³ç§»å¨ä¸æ­¥ã\n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼grid = [[1,3,1],[1,5,1],[4,2,1]]\nè¾åºï¼7\nè§£éï¼å ä¸ºè·¯å¾ 1â3â1â1â1 çæ»åæå°ã\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼grid = [[1,2,3],[4,5,6]]\nè¾åºï¼12\n\n\n * æè·¯ï¼å°grid[i][j]çæå°å¼ï¼è¯å®ç­äºå°grid[i-1][j]çæå°å¼åå°grid[i][j-1]çæå°å¼ä¸­è¾å°çå ä¸å½ågrid[i][j]çå¼\n * æä¼å­ç»æï¼dp[i-1][j], dp[i][j-1]ä¸­å°çé£ä¸ª\n * è¾¹çï¼dp[0][0] = grid[0][0]\n * ç¶æè½¬ç§»æ¹ç¨ï¼dp[i][j] = min(dp[i-1][j], dp[i][j-1]) + grid[i][j]ï¼\n\nvar minpathsum = function(grid) {\n    const m = grid.length;\n    const n = grid[0].length;\n    const dp = array.from(new array(m), () => new array(m).fill(0));\n    dp[0][0] = grid[0][0];\n    for (let i = 1; i < m; i++) {\n        dp[i][0] = dp[i - 1][0] + grid[i][0];\n    }\n    for (let j = 1; j < n; j++) {\n        dp[0][j] = dp[0][j - 1] + grid[0][j];\n    }\n    for (let i = 1; i < m; i++) {\n        for (let j = 1; j < n; j++) {\n            dp[i][j] = math.min(dp[i - 1][j], dp[i][j - 1]) + grid[i][j];\n        }\n    }\n    return dp[m - 1][n - 1];\n};\n\n\n\n# æ­£åè¡¨è¾¾å¼å¹é\n\n * leetcode10\n\n * é¢è§£\n\n\n# åå²ç­åå­é\n\n * leetcode416\n\n> è¿ä¸ªé®é¢å¯ä»¥è½¬åä¸ºæ±æ°ç»çä¸ä¸ªå­éï¼ä½¿å¾è¿ä¸ªå­éä¸­çåç´ çåå°½å¯è½æ¥è¿sum/2ï¼å¶ä¸­sumä¸ºæ°ç»ä¸­ææåç´ çåãè¿æ ·è½¬æ¢ä¹åè¿ä¸ªé®é¢å°±å¾ç±»ä¼¼0-1èåé®é¢äºï¼å¨nä»¶ç©åä¸­æ¾å°mä»¶ç©åï¼ä»ä»¬çå¯ä»¥è£å¥èåä¸­ï¼ä¸æ»ä»·å¼æå¤§ä¸è¿è¿éä¸èèä»·å¼ï¼å°±èèä½¿å¾è¿äºåç´ çåå°½éæ¥è¿sum/2ã\n\n * èåé®é¢åæ\n\nè¾å¥: nç©åéw[1:n], ä»·å¼v[1:n], èåå®¹éc\nè¾åº: è£åä½¿å¾ä»·å¼æå¤§ (ç©åééä¸ºæ´æ°).\n\ndp[i,k] = ç±[1:i]ç»ååºéé<=kçæå¤§ä»·å¼\n\nå¦æç¬¬iä»¶ç©åæ²¡æåæ¬å¨å¶ä¸­ï¼ådp[i,k] = dp[i-1,k]\nå¦æç¬¬iä»¶ç©ååæ¬å¨å¶ä¸­ï¼ådp[i,k] = dp[i-1,k-w[i]] + v[i]\n\nè½¬ç§»æ¹ç¨ï¼dp[i,k] = max{ dp[i-1,k], dp[i-1,k-w[i]] + v[i] }\n\n\n * ä¾å¦è¾å¥ä¸º1ï¼2ï¼3ï¼6ï¼midsum = 6\n\n-   0   1   2   3   4   5   6\n0   0   0   0   0   0   0   0\n1   0   1   1   1   1   1   1\n2   0   1   2   3   3   3   3\n3   0   1   2   3   4   5   6\n5   0   1   2   3   4   5   6\n\nvar canpartition = function(nums) {\n    let len = nums.length\n    let sum = 0\n    for (let i = 0; i < len; i++) {\n        sum += nums[i]\n    }\n    let midsum = sum >> 1\n    let dp = array.from(new array(len + 1),()=>(new array(midsum + 1).fill(0)))\n    for (let i = 1; i <= len; i++) {\n        for (let j = 1; j <= midsum; j++) {\n            if (j >= nums[i - 1]) {\n                // dp[i - 1][j] ä¸ºä¸è£\n                // dp[i - 1][j - nums[i-1]] + nums[i - 1] æ¯è£ï¼ä¸å©ä½ç©ºé´ç»§ç»­è£\n                dp[i][j] = math.max(dp[i - 1][j], dp[i - 1][j - nums[i - 1]] + nums[i - 1])\n            }\n            // å½åèåå®¹éjä¸å¤è£ä¸ç¬¬iä¸ªç©åçéénums[i-1]æ¶ï¼åªæéæ©ä¸è£\n            else {\n                dp[i][j] = dp[i - 1][j]\n            }\n        }\n    }\n    return dp[len][midsum] === sum / 2\n};\n\n\n\n# ä¸è§å½¢çæå°è·¯å¾å\n\n * leetcode120\n\nè¾å¥ï¼triangle = [[2],[3,4],[6,5,7],[4,1,8,3]]\nè¾åºï¼11\nè§£éï¼å¦ä¸é¢ç®å¾æç¤ºï¼\n   2\n  3 4\n 6 5 7\n4 1 8 3\nèªé¡¶åä¸çæå°è·¯å¾åä¸º 11ï¼å³ï¼2 + 3 + 5 + 1 = 11ï¼ã\n\n\n * dp[i][j]è¡¨ç¤ºä»ä¸è§å½¢é¡¶é¨èµ°å°ä½ç½® (i, j) çæå°è·¯å¾åï¼å æ­¤è¦æ³èµ°å°ä½ç½® (i, j)ï¼ä¸ä¸æ­¥å°±åªè½å¨ä½ç½® (i - 1, j - 1)æèä½ç½® (i - 1, j)\n\n * ç¶æè½¬ç§»æ¹ç¨ï¼dp[i][j] = min(dp[i-1][j-1], dp[i-1][j]) + triangle[i][j]\n\n * è¾¹çæ¡ä»¶ï¼dp[0][0] = triangle[0][0]\n\n * ä¸è§å½¢çä¸¤è°ä¸ç dp å¼æ¯ç¡®å®ç\n   \n   * dp[i][0] = dp[i-1][0] + triangle[i][0]\n   * dp[i][i] = dp[i-1][i-1] + triangle[i][i]\n\nvar minimumtotal = function(triangle) {\n    const len = triangle.length;\n    // åå§å dp æ°ç»\n    const dp = new array(len);\n    for (let i = 0; i < len; i++) {\n        dp[i] = new array(i + 1).fill(0);\n    }\n    dp[0][0] = triangle[0][0];\n    for (let i = 1; i < len; i++) {\n        dp[i][0] = dp[i - 1][0] + triangle[i][0];\n        for (let j = 1; j < i; j++) {\n            dp[i][j] = math.min(dp[i - 1][j], dp[i - 1][j - 1]) + triangle[i][j];\n        }\n        dp[i][i] = dp[i - 1][i - 1] + triangle[i][i];\n    }\n    return math.min(...dp[len - 1]);\n};\n\n\n\n# ä¹°åè¡ç¥¨çæä½³æ¶æº\n\n * leetcode121\n\nç»å®ä¸ä¸ªæ°ç»ï¼å®çç¬¬ i ä¸ªåç´ æ¯ä¸æ¯ç»å®è¡ç¥¨ç¬¬ i å¤©çä»·æ ¼ã\nå¦æä½ æå¤åªåè®¸å®æä¸ç¬äº¤æï¼å³ä¹°å¥åååºä¸æ¯è¡ç¥¨ä¸æ¬¡ï¼ï¼è®¾è®¡ä¸ä¸ªç®æ³æ¥è®¡ç®ä½ æè½è·åçæå¤§å©æ¶¦ã\næ³¨æï¼ä½ ä¸è½å¨ä¹°å¥è¡ç¥¨åååºè¡ç¥¨ã\n\nç¤ºä¾ 1:\nè¾å¥: [7,1,5,3,6,4]\nè¾åº: 5\nè§£é: å¨ç¬¬ 2 å¤©ï¼è¡ç¥¨ä»·æ ¼ = 1ï¼çæ¶åä¹°å¥ï¼å¨ç¬¬ 5 å¤©ï¼è¡ç¥¨ä»·æ ¼ = 6ï¼çæ¶åååºï¼æå¤§å©æ¶¦ = 6-1 = 5 ã\n     æ³¨æå©æ¶¦ä¸è½æ¯ 7-1 = 6, å ä¸ºååºä»·æ ¼éè¦å¤§äºä¹°å¥ä»·æ ¼ï¼åæ¶ï¼ä½ ä¸è½å¨ä¹°å¥åååºè¡ç¥¨ã\n     \nç¤ºä¾ 2:\nè¾å¥: [7,6,4,3,1]\nè¾åº: 0\nè§£é: å¨è¿ç§æåµä¸, æ²¡æäº¤æå®æ, æä»¥æå¤§å©æ¶¦ä¸º 0ã\n\n\n> è®¾ dp[i] ä¸ºä»¥ç¬¬ i æ¯è¡ç¥¨ååºçæå¤§å©æ¶¦ï¼éè¦ç»´æ¤ä¸ä¸ªè¡ç¥¨æå°å¼ minï¼å ä¸ºååºæ¶çæå¤§å©æ¶¦ä¸å®æ¯ä¸æå°å¼åè®¡ç®ï¼æåè¿å dp æ°ç»ä¸­çæå¤§å¼ã\n\nvar maxprofit = function(prices) {\n    const dp = new array(prices.length).fill(0);\n    let min = prices[0];\n    for (let i = 1; i < prices.length; i++) {\n        if (prices[i] > min) {\n            dp[i] = prices[i] - min;\n        }\n        else {\n            min = prices[i];\n        }\n    }\n    return math.max(...dp);\n}\n\n\n\n# ä¹°åè¡ç¥¨çæä½³æ¶æºiiï¼å¤æ¬¡äº¤æï¼\n\nè¾å¥: [7,1,5,3,6,4]\nè¾åº: 7\nè§£é: å¨ç¬¬ 2 å¤©ï¼è¡ç¥¨ä»·æ ¼ = 1ï¼çæ¶åä¹°å¥ï¼å¨ç¬¬ 3 å¤©ï¼è¡ç¥¨ä»·æ ¼ = 5ï¼çæ¶åååº, è¿ç¬äº¤ææè½è·å¾å©æ¶¦ = 5-1 = 4 ã\n     éåï¼å¨ç¬¬ 4 å¤©ï¼è¡ç¥¨ä»·æ ¼ = 3ï¼çæ¶åä¹°å¥ï¼å¨ç¬¬ 5 å¤©ï¼è¡ç¥¨ä»·æ ¼ = 6ï¼çæ¶åååº, è¿ç¬äº¤ææè½è·å¾å©æ¶¦ = 6-3 = 3 ã\n\n\n> ç±äºå¯ä»¥æ éæ¬¡çä¹°å¥åååºï¼æä»¬é½ç¥éçè¡æ³è¦æ£é±çè¯å½ç¶æ¯ä½ä»·ä¹°å¥ï¼é«ä»·ååºï¼é£ä¹è¿éæä»¬åªéè¦ä»ç¬¬äºå¤©å¼å§ï¼å¦æå½å¤©ä»·æ ¼æ¯ä¹åçä»·æ ¼é«ï¼åæå·®ä»·å å¥å©æ¶¦ä¸­ï¼å ä¸ºæä»¬å¯ä»¥æ¨å¤©ä¹°å¥ï¼ä»æ¥ååºï¼è¥æå¤©ä»·æ ¼æ´é«çè¯ï¼è¿å¯ä»¥ä»æ¥ä¹°å¥ï¼æå¤©åæåºï¼ä»¥æ­¤ç±»æ¨éåå®æ´ä¸ªæ°ç»ï¼å³å¯æ±åºæå¤§å©æ¶¦ã å³ä½¿æ¯è¿ç»­ä¸æ¶¨äº¤ææ¥ï¼ è®¾æ­¤ä¸æ¶¨äº¤ææ¥è¡ç¥¨ä»·æ ¼åå«ä¸º p1,p2,...,pn ï¼åç¬¬ä¸å¤©ä¹°æåä¸å¤©åæ¶çæå¤§ï¼å³ pnâp1ï¼ç­ä»·äºæ¯å¤©é½ä¹°åï¼å³ pnâp1=(p2âp1)+(p3âp2)+...+(pnâpnâ1)\n\n// è´ªå¿\nvar maxprofit = function(prices) {\n    let res = 0;\n    for (let i = 1; i < prices.length; i++) {\n        if (prices[i] > prices[i - 1]) {\n            res += prices[i] - prices[i - 1];\n        }\n    }\n    return res;\n}\n\n\n\n# ä¹°åè¡ç¥¨çæä½³æ¶æºiiiï¼å«å·å»æï¼\n\nç»å®ä¸ä¸ªæ´æ°æ°ç»ï¼å¶ä¸­ç¬¬ i ä¸ªåç´ ä»£è¡¨äºç¬¬ i å¤©çè¡ç¥¨ä»·æ ¼ ãâ\n\nè®¾è®¡ä¸ä¸ªç®æ³è®¡ç®åºæå¤§å©æ¶¦ãå¨æ»¡è¶³ä»¥ä¸çº¦ææ¡ä»¶ä¸ï¼ä½ å¯ä»¥å°½å¯è½å°å®ææ´å¤çäº¤æï¼å¤æ¬¡ä¹°åä¸æ¯è¡ç¥¨ï¼:\n\nä½ ä¸è½åæ¶åä¸å¤ç¬äº¤æï¼ä½ å¿é¡»å¨åæ¬¡è´­ä¹°ååºå®æä¹åçè¡ç¥¨ï¼ã\nååºè¡ç¥¨åï¼ä½ æ æ³å¨ç¬¬äºå¤©ä¹°å¥è¡ç¥¨ (å³å·å»æä¸º 1 å¤©)ã\n\nç¤ºä¾:\nè¾å¥: [1,2,3,0,2]\nè¾åº: 3 \nè§£é: å¯¹åºçäº¤æç¶æä¸º: [ä¹°å¥, ååº, å·å»æ, ä¹°å¥, ååº]\n\n\n * è®¾ dp[i] ä¸º æªæ­¢è³ç¬¬iå¤©çæå¤§æ¶ç\n * å¯¹äºæ¯ä¸å¤©ié½æä¸¤ç§ç¶ææè¡åä¸æè¡ï¼èä¸æè¡ååä¸ºå½å¤©ååºåæ¬æ¥å°±æ²¡æ\n   * æè¡ï¼è®¾ä¸ºdp[i][1]\n   * ä¸æè¡\n     * å½å¤©ååºäºè¡ç¥¨æä»¥æ²¡æï¼è®¾ä¸ºdp[i][2]\n     * åä¸å¤©å°±æ²¡æï¼ä»å¤©ä¹æ²¡æï¼è®¾ä¸ºdp[i][0]\n * ç¶æç¡®å®å¥½åï¼ä¸é¢å°±æ¯å¦ä½å»ºç«ç¶æè½¬ç§»æ¹ç¨ï¼\n   * å½å¤©æè¡åä¸ºä¸¤ç§æåµï¼å½å¤©ä¹°å¥åæ¬æ¥å°±æï¼æ¾åºæçæå¤§å¼\n     * å½å¤©ä¹°å¥ï¼åä¸å¤©ä¸å®æ²¡æå¹¶ä¸åä¸å¤©æ²¡æååºï¼dp[i-1][0]ï¼,æ­¤æ¶æçä¸ºdp[i-1][0]-p[i]\n     * åä¸å¤©æ¬æ¥å°±æï¼æ­¤æ¶çæçä¸ºdp[i-1][1]\n     * ç¶æè½¬ç§»æ¹ç¨ï¼dp[i][1] = max(dp[i-1][1],dp[i-1][0]-p[i])\n   * ä¸æè¡ï¼å½å¤©ååºæä»¥æ²¡æï¼\n     * å½å¤©ååºï¼åä¸å¤©ä¸å®ææï¼æ­¤æ¶çæå¤§æçå°±æ¯åä¸å¤©çæç + ååºçä»·æ ¼\n     * ç¶æè½¬ç§»æ¹ç¨ï¼dp[i][2] = dp[i-1][1] + p[i]\n   * ä¸æè¡ï¼æ¬æ¥å°±æ²¡æï¼\n     * è¯´æåä¸å¤©ä¹æ²¡æï¼æå¤§æçå°±æ¯åä¸å¤©ä¸¤ç§æ²¡æç¶æçæå¤§å¼\n     * ç¶æè½¬ç§»æ¹ç¨ï¼dp[i][0] = max(dp[i-1][0],dp[i-1][2])\n * æªæ­¢æåä¸å¤©çæå¤§æçä¸å®æ¯ä¸ææç¶æç\n * è¾¹çï¼dp[0][0] = 0,dp[0][2] = 0,dp[0][1] = -p[0]\n\nvar maxprofit = function(prices) {\n    if (prices.length === 0) return 0\n    const len = prices.length\n    let dp = array.from(new array(len), () => new array(3).fill(0))\n    dp[0][0] = 0\n    dp[0][2] = 0\n    dp[0][1] = -prices[0]\n    for (let i = 1; i < len; i++) {\n        dp[i][1] = math.max(dp[i-1][1], dp[i-1][0] - prices[i])\n        dp[i][2] = dp[i-1][1] + prices[i]\n        dp[i][0] = math.max(dp[i-1][0], dp[i-1][2])\n    }\n    return math.max(dp[len-1][0], dp[len-1][2])\n};\n',charsets:{cjk:!0}},{title:"DFSãBFS",frontmatter:{title:"DFSãBFS",date:"2020-10-29T09:52:01.000Z",categories:"ç®æ³"},regularPath:"/algorithm/dfs-bfs.html",relativePath:"algorithm/dfs-bfs.md",key:"v-75ce495f",path:"/algorithm/dfs-bfs.html",headers:[{level:2,title:"æ·±åº¦ä¼åï¼å¹¿åº¦ä¼åï¼å±æ¬¡éåï¼",slug:"æ·±åº¦ä¼å-å¹¿åº¦ä¼å-å±æ¬¡éå",normalizedTitle:"æ·±åº¦ä¼åï¼å¹¿åº¦ä¼åï¼å±æ¬¡éåï¼",charIndex:125},{level:2,title:"æ±æ ¹å°å¶å­èç¹æ°å­ä¹å",slug:"æ±æ ¹å°å¶å­èç¹æ°å­ä¹å",normalizedTitle:"æ±æ ¹å°å¶å­èç¹æ°å­ä¹å",charIndex:34},{level:2,title:"è·¯å¾æ»å",slug:"è·¯å¾æ»å",normalizedTitle:"è·¯å¾æ»å",charIndex:54},{level:2,title:"å²å±¿æ°é",slug:"å²å±¿æ°é",normalizedTitle:"å²å±¿æ°é",charIndex:62},{level:2,title:"å²å±¿æå¤§é¢ç§¯",slug:"å²å±¿æå¤§é¢ç§¯",normalizedTitle:"å²å±¿æå¤§é¢ç§¯",charIndex:70},{level:2,title:"åè¯æ¥é¾",slug:"åè¯æ¥é¾",normalizedTitle:"åè¯æ¥é¾",charIndex:80},{level:2,title:"Nåæ çæå¤§æ·±åº¦",slug:"nåæ çæå¤§æ·±åº¦",normalizedTitle:"nåæ çæå¤§æ·±åº¦",charIndex:93},{level:2,title:"æå®¶å«èiiiï¼DFSï¼",slug:"æå®¶å«èiii-dfs",normalizedTitle:"æå®¶å«èiiiï¼dfsï¼",charIndex:7413}],lastUpdated:"3/31/2023, 5:00:31 PM",lastUpdatedTimestamp:1680253231e3,headersStr:"æ·±åº¦ä¼åï¼å¹¿åº¦ä¼åï¼å±æ¬¡éåï¼ æ±æ ¹å°å¶å­èç¹æ°å­ä¹å è·¯å¾æ»å å²å±¿æ°é å²å±¿æå¤§é¢ç§¯ åè¯æ¥é¾ Nåæ çæå¤§æ·±åº¦ æå®¶å«èiiiï¼DFSï¼",content:'# DFSãBFS\n\n * æ·±åº¦ä¼åéå\n * å¹¿åº¦ä¼åéå\n * æ±æ ¹å°å¶å­èç¹æ°å­ä¹åï¼DFSï¼\n * è·¯å¾æ»å\n * å²å±¿æ°é\n * å²å±¿æå¤§é¢ç§¯\n * åè¯æ¥é¾ï¼BFSï¼\n * Nåæ çæå¤§æ·±åº¦ï¼BFSï¼\n * æå®¶å«èä¸ï¼DFSï¼\n\n\n# æ·±åº¦ä¼åï¼å¹¿åº¦ä¼åï¼å±æ¬¡éåï¼\n\n//æ·±åº¦ä¼åçéå½å®ç°\nconst deepTraversal = function(root) {\n    const res = [];\n    const dfs = function(node) {\n        res.push(node.val);\n        for (let i = 0; i < node.children.length; i++) {\n            dfs(node.children[i]);\n        }\n    }\n    dfs(root);\n    return res;\n}\n\n// æ·±åº¦ä¼åééå½\nconst deepTraversal = function(root) {\n    const res = [];\n    const stack = [root];\n    while (stack.length) {\n        const tmp = stack.pop();\n        res.push(tmp.val);\n        for (let i = tmp.children.length - 1; i >= 0; i--) {\n            stack.push(tmp.children[i]);\n        }\n    }\n    return res;\n};\n\n// å¹¿åº¦ééå½\nconst wideTraversal = function(root) {\n    const res = [];\n    const queue = [root];\n    while (queue.length) {\n        const tmp = queue.shift();\n        res.push(tmp.val);\n        for (let i = 0; i < tmp.children.length; i++) {\n            queue.push(tmp.children[i]);\n        }\n    }\n    return res;\n};\n\n\n\n# æ±æ ¹å°å¶å­èç¹æ°å­ä¹å\n\n * leetcode129\n\n> ç»å®ä¸ä¸ªäºåæ ï¼å®çæ¯ä¸ªç»ç¹é½å­æ¾ä¸ä¸ª 0-9 çæ°å­ï¼æ¯æ¡ä»æ ¹å°å¶å­èç¹çè·¯å¾é½ä»£è¡¨ä¸ä¸ªæ°å­ã ä¾å¦ï¼ä»æ ¹å°å¶å­èç¹è·¯å¾ 1->2->3 ä»£è¡¨æ°å­ 123ã è®¡ç®ä»æ ¹å°å¶å­èç¹çæçæææ°å­ä¹åã è¯´æ: å¶å­èç¹æ¯ææ²¡æå­èç¹çèç¹ã\n> \n> ç¤ºä¾ 1: è¾å¥: [1,2,3] 1 /\n> 2 3 è¾åº: 25 è§£é: ä»æ ¹å°å¶å­èç¹è·¯å¾ 1->2 ä»£è¡¨æ°å­ 12. ä»æ ¹å°å¶å­èç¹è·¯å¾ 1->3 ä»£è¡¨æ°å­ 13. å æ­¤ï¼æ°å­æ»å = 12 + 13 = 25.\n> \n> ç¤ºä¾ 2: è¾å¥: [4,9,0,5,1] 4 /\n> 9 0 /\n> 5 1 è¾åº: 1026 è§£é: ä»æ ¹å°å¶å­èç¹è·¯å¾ 4->9->5 ä»£è¡¨æ°å­ 495. ä»æ ¹å°å¶å­èç¹è·¯å¾ 4->9->1 ä»£è¡¨æ°å­ 491. ä»æ ¹å°å¶å­èç¹è·¯å¾ 4->0 ä»£è¡¨æ°å­ 40. å æ­¤ï¼æ°å­æ»å = 495 + 491 + 40 = 1026.\n\n * ä»æ ¹èç¹å¼å§ï¼éåæ¯ä¸ªèç¹ï¼å¦æéå°å¶å­èç¹ï¼åå°å¶å­èç¹å¯¹åºçæ°å­å å°æ°å­ä¹åãå¦æå½åèç¹ä¸æ¯å¶å­èç¹ï¼åè®¡ç®å¶å­èç¹å¯¹åºçæ°å­ï¼ç¶åå¯¹å­èç¹éå½éåã\n\nvar sumNumbers = function(root) {\n    const dfs = function(root, num) {\n        // è¥èç¹æ¯ null ç´æ¥è¿å 0\n        if (!root) {\n            return 0;\n        }\n        // ä¸æ¯ç©ºèç¹å°±è®¡ç®ä¸ä¸å å°ç®åçå¼\n        num = num * 10 + root.val;\n        // è¥æ¯æ ¹èç¹è¿åè¯¥è®¡ç®å¼ï¼ä¸æ¡è·¯å°±èµ°å®äº\n        if (root.left === null && root.right === null) {\n            return num;\n        }\n        // ä¸æ¯æ ¹èç¹åéå½éå\n        else {\n            return dfs(root.left, num) + dfs(root.right, num);\n        }\n    }\n    return dfs(root, 0);\n};\n\n// å¦ä¸ç§åæ³\nvar sumNumbers = function(root) {\n    let res = 0;\n    const fn = function(root, sum) {\n        // å°å¶å­èç¹å³ç»ç®ä¸æ¬¡\n        if (!root.left && !root.right) {\n            res += sum;\n            return;\n        }\n        if (root.left) {\n            fn(root.left, sum * 10 + root.left.val);\n        }\n        if (root.right) {\n            fn(root.right, sum * 10 + root.right.val);\n        }\n    };\n    fn(root, root.val);\n    return res;\n}\n\n\n\n# è·¯å¾æ»å\n\n * leetcode112\n\nvar hasPathSum = function(root, targetSum) {\n    const res = [];\n    const dfs = function(root, num) {\n        if (!root) {\n            return;\n        }\n        num = num + root.val;\n        if (root.left === null && root.right === null) {\n            res.push(num);\n        }\n        else {\n            dfs(root.left, num);\n            dfs(root.right, num);\n        }\n    }\n    dfs(root, 0);\n    return res.includes(targetSum);\n};\n\n// å¦ä¸ç§åæ³\nvar hasPathSum = function(root, targetSum) {\n    if (!root) return false;\n    const res = [];\n    const fn = function(root, sum) {\n        if (!root.left && !root.right) {\n            res.push(sum);\n        }\n        if (root.left) {\n            fn(root.left, sum + root.left.val);\n        }\n        if (root.right) {\n            fn(root.right, sum + root.right.val);\n        }\n    };\n    fn(root, root.val);\n    return res.includes(targetSum);\n}\n\n\n\n# å²å±¿æ°é\n\n * leetcode200\n * æè·¯ï¼ä»ä¸º"1"çå¼å§ï¼ååå¨dfsï¼æéå°ç"1"åä¸º"0"\n\nvar numIslands = function(grid) {\n    const m = grid.length;\n    const n = grid[0].length;\n    const dfs = function(i, j) {\n        if (i < 0 || j < 0 || i > m - 1 || j > n - 1 || grid[i][j] === \'0\') return;\n        grid[i][j] = \'0\';\n        dfs(i - 1, j);\n        dfs(i + 1, j);\n        dfs(i, j + 1);\n        dfs(i, j - 1);\n    };\n\n    let count = 0;\n    for (let i = 0; i < m; i++) {\n        for (let j = 0; j < n; j++) {\n            if (grid[i][j] === \'1\') {\n                dfs(i, j);\n                count++;\n            }\n        }\n    }\n    return count;\n};\n\n\n\n# å²å±¿æå¤§é¢ç§¯\n\n * leetcode695\n * æè·¯ï¼åä¸é¢ä¸æ ·ï¼å¨dfsçè¿ç¨ä¸­è®¡ç®é¢ç§¯å³å¯\n\nvar maxAreaOfIsland = function(grid) {\n    const m = grid.length;\n    const n = grid[0].length;\n    const dfs = function(i, j) {\n        if (i < 0 || j < 0 || i > m - 1 || j > n - 1 || grid[i][j] === 0) {\n            return 0;\n        }\n        grid[i][j] = 0;\n        let area = 1;\n        area += dfs(i - 1, j);\n        area += dfs(i + 1, j);\n        area += dfs(i, j + 1);\n        area += dfs(i, j - 1);\n        return area;\n    };\n\n    let res = 0;\n    for (let i = 0; i < m; i++) {\n        for (let j = 0; j < n; j++) {\n            if (grid[i][j] === 1) {\n                res = Math.max(dfs(i, j), res);\n            }\n        }\n    }\n    return res;\n};\n\n\n\n# åè¯æ¥é¾\n\n * é¢ç®æ¥æºï¼leetcode127\n\n> ç»å®ä¸¤ä¸ªåè¯ï¼beginWord å endWordï¼åä¸ä¸ªå­å¸ï¼æ¾å°ä» beginWord å° endWord çæç­è½¬æ¢åºåçé¿åº¦ãè½¬æ¢ééµå¾ªå¦ä¸è§åï¼\n> \n> æ¯æ¬¡è½¬æ¢åªè½æ¹åä¸ä¸ªå­æ¯ã è½¬æ¢è¿ç¨ä¸­çä¸­é´åè¯å¿é¡»æ¯å­å¸ä¸­çåè¯ã è¯´æ:\n> \n> å¦æä¸å­å¨è¿æ ·çè½¬æ¢åºåï¼è¿å 0ã ææåè¯å·æç¸åçé¿åº¦ã ææåè¯åªç±å°åå­æ¯ç»æã å­å¸ä¸­ä¸å­å¨éå¤çåè¯ã ä½ å¯ä»¥åè®¾ beginWord å endWord æ¯éç©ºçï¼ä¸äºèä¸ç¸åã\n> \n> ç¤ºä¾ 1: è¾å¥: beginWord = "hit", endWord = "cog", wordList = ["hot","dot","dog","lot","log","cog"] è¾åº: 5 è§£é: ä¸ä¸ªæç­è½¬æ¢åºåæ¯ "hit" -> "hot" -> "dot" -> "dog" -> "cog", è¿åå®çé¿åº¦ 5ã\n> \n> ç¤ºä¾ 2: è¾å¥: beginWord = "hit" endWord = "cog" wordList = ["hot","dot","dog","lot","log"] è¾åº: 0 è§£é: endWord "cog" ä¸å¨å­å¸ä¸­ï¼æä»¥æ æ³è¿è¡è½¬æ¢ã\n\n * æ½è±¡ä¸ºå¾ï¼è¥ä¸¤ä¸ªåè¯å¯ä»¥è½¬æ¢ï¼åè¿ä¸æ¡ååè¾¹ï¼BFSæ±èµ·ç¹å°ç»ç¹æç­è·¯å¾\n * ä¼åä¸ºï¼æ±å¾çæç­è·¯å¾ï¼ä½¿ç¨éå + BFS å®ç°\n * åèé¢è§£ï¼BFSçåºç¨\n\nvar ladderLength = function(beginWord, endWord, wordList) {\n    if (!wordList.includes(endWord)) return 0\n    let queue = []\n    // ç¨ä¸ä¸ªå¯¹è±¡ç»´æ¤å½åèç¹æ¯å¦è®¿é®è¿\n    let visitedObj = {\n        beginWord: true\n    }\n    // ç¨ level è®°å½å½åè·¯å¾é¿åº¦\n    queue.push({ word: beginWord, level: 1 })\n    // éåå®ç° BFS\n    while (queue.length) {\n        let { word, level } = queue.shift()\n        if (visitedObj[word]) continue\n        for (let i = 0; i < wordList.length; i++) {\n            // è¥åªæä¸ä¸ªå­æ¯ä¸ååè¯ææ¯ç¸é»ä¸¤è¾¹ï¼å¥éå\n            if (isOneDiff(word, wordList[i])) {\n                if (wordList[i] == endWord) {\n                    return level + 1\n                }\n                queue.push({ word: wordList[i], level: level + 1 })\n                visitedObj[word] = true\n            }\n        }\n    }\n    return 0\n}\n\n\n// å¤æ­ä¸¤ä¸ªåè¯æ¯å¦åªæä¸ä¸ªå­æ¯ä¸å\nfunction isOneDiff(source, target) {\n    let diff = 0\n    for (let i = 0; i < source.length; i++) {\n        if (source[i] !== target[i]) {\n            diff ++\n        }\n    }\n    if (diff === 1) {\n        return true\n    } else {\n        return false\n    }\n}\n\n\n\n# Nåæ çæå¤§æ·±åº¦\n\n * é¢ç®æ¥æº:leetcode559\n\n> ç»å®ä¸ä¸ª N åæ ï¼æ¾å°å¶æå¤§æ·±åº¦ã\n> \n> æå¤§æ·±åº¦æ¯æä»æ ¹èç¹å°æè¿å¶å­èç¹çæé¿è·¯å¾ä¸çèç¹æ»æ°ã\n\n// BFS\nvar maxDepth = function(root) {\n    if (root === null) return 0\n    if (root.children.length === 0) return 1\n    let queue = []\n    let depthArr = []\n    queue.push({ node: root, depth: 1 })\n    while (queue.length) {\n        const { node, depth } = queue.shift()\n        for (let i = 0; i < node.children.length; i++) {\n            if (node.children[i].children.length === 0) {\n                depthArr.push(depth + 1)\n                continue\n            }\n            queue.push({ node: node.children[i], depth: depth + 1 })\n        }\n    }\n    return Math.max(...depthArr)\n};\n\n// éå½\nvar maxDepth = function(root) {\n    if (!root) {\n        return 0;\n    }\n    let depth = 0;\n    for (let i = 0; i < root.children.length; i++) {\n        depth = Math.max(depth, maxDepth(root.children[i]));\n    }\n    return 1 + depth;\n};\n\n\n\n# æå®¶å«èiiiï¼DFSï¼\n\n * Leetcode337\n * æ¯ä¸ªèç¹é½è®¾ç½®ï¼[ä¸å·, å·]\n * å½åèç¹è¢«å·æ¶ï¼å¶å·¦å³å­©å­ä¸è½å·\n * å½åèç¹æªè¢«å·æ¶ï¼å¶å·¦å³å­©å­å¯ä»¥å·ï¼ä¹å¯ä»¥ä¸å·ï¼å [ä¸å·, å·] çè¾å¤§è\n\nvar rob = function(root) {\n    let res = dfs(root);\n    return Math.max(res[0], res[1]);\n};\n\nfunction dfs(root) {\n    // [ä¸å·, å·]\n    let res = [0,0];\n    if (root === null) return res;\n    // left ä¸º root å·¦ä¾§å­èç¹ç[ä¸å·å¼, å·å¼]\n    let left = dfs(root.left); \n  \t// right ä¸º root å³ä¾§å­èç¹ç[ä¸å·å¼, å·å¼]\n    let right = dfs(root.right); \n    // æ¯ä¸ä¸ªèç¹çä¸å·å¼é½æ¯ï¼ å·¦ä¾§å­èç¹çæå¤§å¼ + å³ä¾§å­èç¹çæå¤§å¼\n    res[0] = Math.max(...left) + Math.max(...right);\n    // æ¯ä¸ä¸ªèç¹çå·å¼é½æ¯ï¼å·¦ä¾§å­èç¹çä¸å·å¼ + å³ä¾§å­èç¹çä¸å·å¼ + è¯¥èç¹çå¼\n    res[1] = root.val + left[0] + right[0];\n    return res;\n}\n',normalizedContent:'# dfsãbfs\n\n * æ·±åº¦ä¼åéå\n * å¹¿åº¦ä¼åéå\n * æ±æ ¹å°å¶å­èç¹æ°å­ä¹åï¼dfsï¼\n * è·¯å¾æ»å\n * å²å±¿æ°é\n * å²å±¿æå¤§é¢ç§¯\n * åè¯æ¥é¾ï¼bfsï¼\n * nåæ çæå¤§æ·±åº¦ï¼bfsï¼\n * æå®¶å«èä¸ï¼dfsï¼\n\n\n# æ·±åº¦ä¼åï¼å¹¿åº¦ä¼åï¼å±æ¬¡éåï¼\n\n//æ·±åº¦ä¼åçéå½å®ç°\nconst deeptraversal = function(root) {\n    const res = [];\n    const dfs = function(node) {\n        res.push(node.val);\n        for (let i = 0; i < node.children.length; i++) {\n            dfs(node.children[i]);\n        }\n    }\n    dfs(root);\n    return res;\n}\n\n// æ·±åº¦ä¼åééå½\nconst deeptraversal = function(root) {\n    const res = [];\n    const stack = [root];\n    while (stack.length) {\n        const tmp = stack.pop();\n        res.push(tmp.val);\n        for (let i = tmp.children.length - 1; i >= 0; i--) {\n            stack.push(tmp.children[i]);\n        }\n    }\n    return res;\n};\n\n// å¹¿åº¦ééå½\nconst widetraversal = function(root) {\n    const res = [];\n    const queue = [root];\n    while (queue.length) {\n        const tmp = queue.shift();\n        res.push(tmp.val);\n        for (let i = 0; i < tmp.children.length; i++) {\n            queue.push(tmp.children[i]);\n        }\n    }\n    return res;\n};\n\n\n\n# æ±æ ¹å°å¶å­èç¹æ°å­ä¹å\n\n * leetcode129\n\n> ç»å®ä¸ä¸ªäºåæ ï¼å®çæ¯ä¸ªç»ç¹é½å­æ¾ä¸ä¸ª 0-9 çæ°å­ï¼æ¯æ¡ä»æ ¹å°å¶å­èç¹çè·¯å¾é½ä»£è¡¨ä¸ä¸ªæ°å­ã ä¾å¦ï¼ä»æ ¹å°å¶å­èç¹è·¯å¾ 1->2->3 ä»£è¡¨æ°å­ 123ã è®¡ç®ä»æ ¹å°å¶å­èç¹çæçæææ°å­ä¹åã è¯´æ: å¶å­èç¹æ¯ææ²¡æå­èç¹çèç¹ã\n> \n> ç¤ºä¾ 1: è¾å¥: [1,2,3] 1 /\n> 2 3 è¾åº: 25 è§£é: ä»æ ¹å°å¶å­èç¹è·¯å¾ 1->2 ä»£è¡¨æ°å­ 12. ä»æ ¹å°å¶å­èç¹è·¯å¾ 1->3 ä»£è¡¨æ°å­ 13. å æ­¤ï¼æ°å­æ»å = 12 + 13 = 25.\n> \n> ç¤ºä¾ 2: è¾å¥: [4,9,0,5,1] 4 /\n> 9 0 /\n> 5 1 è¾åº: 1026 è§£é: ä»æ ¹å°å¶å­èç¹è·¯å¾ 4->9->5 ä»£è¡¨æ°å­ 495. ä»æ ¹å°å¶å­èç¹è·¯å¾ 4->9->1 ä»£è¡¨æ°å­ 491. ä»æ ¹å°å¶å­èç¹è·¯å¾ 4->0 ä»£è¡¨æ°å­ 40. å æ­¤ï¼æ°å­æ»å = 495 + 491 + 40 = 1026.\n\n * ä»æ ¹èç¹å¼å§ï¼éåæ¯ä¸ªèç¹ï¼å¦æéå°å¶å­èç¹ï¼åå°å¶å­èç¹å¯¹åºçæ°å­å å°æ°å­ä¹åãå¦æå½åèç¹ä¸æ¯å¶å­èç¹ï¼åè®¡ç®å¶å­èç¹å¯¹åºçæ°å­ï¼ç¶åå¯¹å­èç¹éå½éåã\n\nvar sumnumbers = function(root) {\n    const dfs = function(root, num) {\n        // è¥èç¹æ¯ null ç´æ¥è¿å 0\n        if (!root) {\n            return 0;\n        }\n        // ä¸æ¯ç©ºèç¹å°±è®¡ç®ä¸ä¸å å°ç®åçå¼\n        num = num * 10 + root.val;\n        // è¥æ¯æ ¹èç¹è¿åè¯¥è®¡ç®å¼ï¼ä¸æ¡è·¯å°±èµ°å®äº\n        if (root.left === null && root.right === null) {\n            return num;\n        }\n        // ä¸æ¯æ ¹èç¹åéå½éå\n        else {\n            return dfs(root.left, num) + dfs(root.right, num);\n        }\n    }\n    return dfs(root, 0);\n};\n\n// å¦ä¸ç§åæ³\nvar sumnumbers = function(root) {\n    let res = 0;\n    const fn = function(root, sum) {\n        // å°å¶å­èç¹å³ç»ç®ä¸æ¬¡\n        if (!root.left && !root.right) {\n            res += sum;\n            return;\n        }\n        if (root.left) {\n            fn(root.left, sum * 10 + root.left.val);\n        }\n        if (root.right) {\n            fn(root.right, sum * 10 + root.right.val);\n        }\n    };\n    fn(root, root.val);\n    return res;\n}\n\n\n\n# è·¯å¾æ»å\n\n * leetcode112\n\nvar haspathsum = function(root, targetsum) {\n    const res = [];\n    const dfs = function(root, num) {\n        if (!root) {\n            return;\n        }\n        num = num + root.val;\n        if (root.left === null && root.right === null) {\n            res.push(num);\n        }\n        else {\n            dfs(root.left, num);\n            dfs(root.right, num);\n        }\n    }\n    dfs(root, 0);\n    return res.includes(targetsum);\n};\n\n// å¦ä¸ç§åæ³\nvar haspathsum = function(root, targetsum) {\n    if (!root) return false;\n    const res = [];\n    const fn = function(root, sum) {\n        if (!root.left && !root.right) {\n            res.push(sum);\n        }\n        if (root.left) {\n            fn(root.left, sum + root.left.val);\n        }\n        if (root.right) {\n            fn(root.right, sum + root.right.val);\n        }\n    };\n    fn(root, root.val);\n    return res.includes(targetsum);\n}\n\n\n\n# å²å±¿æ°é\n\n * leetcode200\n * æè·¯ï¼ä»ä¸º"1"çå¼å§ï¼ååå¨dfsï¼æéå°ç"1"åä¸º"0"\n\nvar numislands = function(grid) {\n    const m = grid.length;\n    const n = grid[0].length;\n    const dfs = function(i, j) {\n        if (i < 0 || j < 0 || i > m - 1 || j > n - 1 || grid[i][j] === \'0\') return;\n        grid[i][j] = \'0\';\n        dfs(i - 1, j);\n        dfs(i + 1, j);\n        dfs(i, j + 1);\n        dfs(i, j - 1);\n    };\n\n    let count = 0;\n    for (let i = 0; i < m; i++) {\n        for (let j = 0; j < n; j++) {\n            if (grid[i][j] === \'1\') {\n                dfs(i, j);\n                count++;\n            }\n        }\n    }\n    return count;\n};\n\n\n\n# å²å±¿æå¤§é¢ç§¯\n\n * leetcode695\n * æè·¯ï¼åä¸é¢ä¸æ ·ï¼å¨dfsçè¿ç¨ä¸­è®¡ç®é¢ç§¯å³å¯\n\nvar maxareaofisland = function(grid) {\n    const m = grid.length;\n    const n = grid[0].length;\n    const dfs = function(i, j) {\n        if (i < 0 || j < 0 || i > m - 1 || j > n - 1 || grid[i][j] === 0) {\n            return 0;\n        }\n        grid[i][j] = 0;\n        let area = 1;\n        area += dfs(i - 1, j);\n        area += dfs(i + 1, j);\n        area += dfs(i, j + 1);\n        area += dfs(i, j - 1);\n        return area;\n    };\n\n    let res = 0;\n    for (let i = 0; i < m; i++) {\n        for (let j = 0; j < n; j++) {\n            if (grid[i][j] === 1) {\n                res = math.max(dfs(i, j), res);\n            }\n        }\n    }\n    return res;\n};\n\n\n\n# åè¯æ¥é¾\n\n * é¢ç®æ¥æºï¼leetcode127\n\n> ç»å®ä¸¤ä¸ªåè¯ï¼beginword å endwordï¼åä¸ä¸ªå­å¸ï¼æ¾å°ä» beginword å° endword çæç­è½¬æ¢åºåçé¿åº¦ãè½¬æ¢ééµå¾ªå¦ä¸è§åï¼\n> \n> æ¯æ¬¡è½¬æ¢åªè½æ¹åä¸ä¸ªå­æ¯ã è½¬æ¢è¿ç¨ä¸­çä¸­é´åè¯å¿é¡»æ¯å­å¸ä¸­çåè¯ã è¯´æ:\n> \n> å¦æä¸å­å¨è¿æ ·çè½¬æ¢åºåï¼è¿å 0ã ææåè¯å·æç¸åçé¿åº¦ã ææåè¯åªç±å°åå­æ¯ç»æã å­å¸ä¸­ä¸å­å¨éå¤çåè¯ã ä½ å¯ä»¥åè®¾ beginword å endword æ¯éç©ºçï¼ä¸äºèä¸ç¸åã\n> \n> ç¤ºä¾ 1: è¾å¥: beginword = "hit", endword = "cog", wordlist = ["hot","dot","dog","lot","log","cog"] è¾åº: 5 è§£é: ä¸ä¸ªæç­è½¬æ¢åºåæ¯ "hit" -> "hot" -> "dot" -> "dog" -> "cog", è¿åå®çé¿åº¦ 5ã\n> \n> ç¤ºä¾ 2: è¾å¥: beginword = "hit" endword = "cog" wordlist = ["hot","dot","dog","lot","log"] è¾åº: 0 è§£é: endword "cog" ä¸å¨å­å¸ä¸­ï¼æä»¥æ æ³è¿è¡è½¬æ¢ã\n\n * æ½è±¡ä¸ºå¾ï¼è¥ä¸¤ä¸ªåè¯å¯ä»¥è½¬æ¢ï¼åè¿ä¸æ¡ååè¾¹ï¼bfsæ±èµ·ç¹å°ç»ç¹æç­è·¯å¾\n * ä¼åä¸ºï¼æ±å¾çæç­è·¯å¾ï¼ä½¿ç¨éå + bfs å®ç°\n * åèé¢è§£ï¼bfsçåºç¨\n\nvar ladderlength = function(beginword, endword, wordlist) {\n    if (!wordlist.includes(endword)) return 0\n    let queue = []\n    // ç¨ä¸ä¸ªå¯¹è±¡ç»´æ¤å½åèç¹æ¯å¦è®¿é®è¿\n    let visitedobj = {\n        beginword: true\n    }\n    // ç¨ level è®°å½å½åè·¯å¾é¿åº¦\n    queue.push({ word: beginword, level: 1 })\n    // éåå®ç° bfs\n    while (queue.length) {\n        let { word, level } = queue.shift()\n        if (visitedobj[word]) continue\n        for (let i = 0; i < wordlist.length; i++) {\n            // è¥åªæä¸ä¸ªå­æ¯ä¸ååè¯ææ¯ç¸é»ä¸¤è¾¹ï¼å¥éå\n            if (isonediff(word, wordlist[i])) {\n                if (wordlist[i] == endword) {\n                    return level + 1\n                }\n                queue.push({ word: wordlist[i], level: level + 1 })\n                visitedobj[word] = true\n            }\n        }\n    }\n    return 0\n}\n\n\n// å¤æ­ä¸¤ä¸ªåè¯æ¯å¦åªæä¸ä¸ªå­æ¯ä¸å\nfunction isonediff(source, target) {\n    let diff = 0\n    for (let i = 0; i < source.length; i++) {\n        if (source[i] !== target[i]) {\n            diff ++\n        }\n    }\n    if (diff === 1) {\n        return true\n    } else {\n        return false\n    }\n}\n\n\n\n# nåæ çæå¤§æ·±åº¦\n\n * é¢ç®æ¥æº:leetcode559\n\n> ç»å®ä¸ä¸ª n åæ ï¼æ¾å°å¶æå¤§æ·±åº¦ã\n> \n> æå¤§æ·±åº¦æ¯æä»æ ¹èç¹å°æè¿å¶å­èç¹çæé¿è·¯å¾ä¸çèç¹æ»æ°ã\n\n// bfs\nvar maxdepth = function(root) {\n    if (root === null) return 0\n    if (root.children.length === 0) return 1\n    let queue = []\n    let deptharr = []\n    queue.push({ node: root, depth: 1 })\n    while (queue.length) {\n        const { node, depth } = queue.shift()\n        for (let i = 0; i < node.children.length; i++) {\n            if (node.children[i].children.length === 0) {\n                deptharr.push(depth + 1)\n                continue\n            }\n            queue.push({ node: node.children[i], depth: depth + 1 })\n        }\n    }\n    return math.max(...deptharr)\n};\n\n// éå½\nvar maxdepth = function(root) {\n    if (!root) {\n        return 0;\n    }\n    let depth = 0;\n    for (let i = 0; i < root.children.length; i++) {\n        depth = math.max(depth, maxdepth(root.children[i]));\n    }\n    return 1 + depth;\n};\n\n\n\n# æå®¶å«èiiiï¼dfsï¼\n\n * leetcode337\n * æ¯ä¸ªèç¹é½è®¾ç½®ï¼[ä¸å·, å·]\n * å½åèç¹è¢«å·æ¶ï¼å¶å·¦å³å­©å­ä¸è½å·\n * å½åèç¹æªè¢«å·æ¶ï¼å¶å·¦å³å­©å­å¯ä»¥å·ï¼ä¹å¯ä»¥ä¸å·ï¼å [ä¸å·, å·] çè¾å¤§è\n\nvar rob = function(root) {\n    let res = dfs(root);\n    return math.max(res[0], res[1]);\n};\n\nfunction dfs(root) {\n    // [ä¸å·, å·]\n    let res = [0,0];\n    if (root === null) return res;\n    // left ä¸º root å·¦ä¾§å­èç¹ç[ä¸å·å¼, å·å¼]\n    let left = dfs(root.left); \n  \t// right ä¸º root å³ä¾§å­èç¹ç[ä¸å·å¼, å·å¼]\n    let right = dfs(root.right); \n    // æ¯ä¸ä¸ªèç¹çä¸å·å¼é½æ¯ï¼ å·¦ä¾§å­èç¹çæå¤§å¼ + å³ä¾§å­èç¹çæå¤§å¼\n    res[0] = math.max(...left) + math.max(...right);\n    // æ¯ä¸ä¸ªèç¹çå·å¼é½æ¯ï¼å·¦ä¾§å­èç¹çä¸å·å¼ + å³ä¾§å­èç¹çä¸å·å¼ + è¯¥èç¹çå¼\n    res[1] = root.val + left[0] + right[0];\n    return res;\n}\n',charsets:{cjk:!0}},{title:"è´ªå¿",frontmatter:{title:"è´ªå¿",date:"2020-10-28T16:00:54.000Z",categories:"ç®æ³"},regularPath:"/algorithm/greedy.html",relativePath:"algorithm/greedy.md",key:"v-8bc9b32a",path:"/algorithm/greedy.html",headers:[{level:2,title:"è´ªå¿ç®æ³",slug:"è´ªå¿ç®æ³",normalizedTitle:"è´ªå¿ç®æ³",charIndex:9},{level:2,title:"ç§»æ k ä½æ°å­",slug:"ç§»æ-k-ä½æ°å­",normalizedTitle:"ç§»æ k ä½æ°å­",charIndex:17},{level:2,title:"ééå¢é¡ºåºçæå°å­åºå",slug:"ééå¢é¡ºåºçæå°å­åºå",normalizedTitle:"ééå¢é¡ºåºçæå°å­åºå",charIndex:29},{level:2,title:"æ æª¬æ°´æ¾é¶",slug:"æ æª¬æ°´æ¾é¶",normalizedTitle:"æ æª¬æ°´æ¾é¶",charIndex:44},{level:2,title:"è·³è·æ¸¸æ",slug:"è·³è·æ¸¸æ",normalizedTitle:"è·³è·æ¸¸æ",charIndex:53},{level:2,title:"å æ²¹ç«",slug:"å æ²¹ç«",normalizedTitle:"å æ²¹ç«",charIndex:61},{level:3,title:"æ´åè§£æ³",slug:"æ´åè§£æ³",normalizedTitle:"æ´åè§£æ³",charIndex:3547},{level:3,title:"è´ªå¿è§£æ³",slug:"è´ªå¿è§£æ³",normalizedTitle:"è´ªå¿è§£æ³",charIndex:4310}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"è´ªå¿ç®æ³ ç§»æ k ä½æ°å­ ééå¢é¡ºåºçæå°å­åºå æ æª¬æ°´æ¾é¶ è·³è·æ¸¸æ å æ²¹ç« æ´åè§£æ³ è´ªå¿è§£æ³",content:"# è´ªå¿\n\n * è´ªå¿ç®æ³\n * ç§»æ k ä½æ°å­\n * ééå¢é¡ºåºçæå°å­åºå\n * æ æª¬æ°´æ¾é¶\n * è·³è·æ¸¸æ\n * å æ²¹ç«\n\n\n# è´ªå¿ç®æ³\n\nè´ªå¿ç®æ³ï¼åç§°è´ªå©ªç®æ³ï¼æ¯æï¼å¨å¯¹é®é¢æ±è§£æ¶ï¼æ»æ¯ååºå¨å½åçæ¥æ¯æå¥½çéæ©ãä¹å°±æ¯è¯´ï¼ä¸ä»æ´ä½æä¼ä¸å ä»¥èèï¼ç®æ³å¾å°çæ¯å¨æç§æä¹ä¸çå±é¨æä¼è§£ ã\n\n**è´ªå¿ç®æ³ä¸è¬æå¦ä¸æ­¥éª¤è¿è¡ï¼ **\n\nâ å»ºç«æ°å­¦æ¨¡åæ¥æè¿°é®é¢ ã\n\nâ¡ææ±è§£çé®é¢åæè¥å¹²ä¸ªå­é®é¢ã\n\nâ¢å¯¹æ¯ä¸ªå­é®é¢æ±è§£ï¼å¾å°å­é®é¢çå±é¨æä¼è§£ ã\n\nâ£æå­é®é¢çè§£å±é¨æä¼è§£åæåæ¥è§£é®é¢çä¸ä¸ªè§£ ã\n\nè´ªå¿ç®æ³æ¯ä¸ç§å¯¹æäºæ±æä¼è§£é®é¢çæ´ç®åãæ´è¿éçè®¾è®¡ææ¯ãè´ªå¿ç®æ³çç¹ç¹æ¯ä¸æ­¥ä¸æ­¥å°è¿è¡ï¼å¸¸ä»¥å½åæåµä¸ºåºç¡æ ¹æ®æä¸ªä¼åæµåº¦ä½æä¼éæ©ï¼èä¸èèåç§å¯è½çæ´ä½æåµï¼çå»äºä¸ºæ¾æä¼è§£è¦ç©·å°½ææå¯è½èå¿é¡»èè´¹çå¤§éæ¶é´ãè´ªå¿ç®æ³éç¨èªé¡¶åä¸ï¼ä»¥è¿­ä»£çæ¹æ³ååºç¸ç»§çè´ªå¿éæ©ï¼æ¯åä¸æ¬¡è´ªå¿éæ©ï¼å°±å°ææ±é®é¢ç®åä¸ºä¸ä¸ªè§æ¨¡æ´å°çå­é®é¢ï¼éè¿æ¯ä¸æ­¥è´ªå¿éæ©ï¼å¯å¾å°é®é¢çä¸ä¸ªæä¼è§£ãè½ç¶æ¯ä¸æ­¥ä¸é½è¦ä¿è¯è½è·å¾å±é¨æä¼è§£ï¼ä½ç±æ­¤äº§ççå¨å±è§£ææ¶ä¸ä¸å®æ¯æä¼çï¼æä»¥è´ªå¿ç®æ³ä¸è¦åæº¯\n\n\nå­å¨çé®é¢\n\n * ä¸è½ä¿è¯æ±å¾çæåè§£æ¯æä½³ç\n * ä¸è½ç¨æ¥æ±æå¤§å¼ææå°å¼çé®é¢\n * åªè½æ±æ»¡è¶³æäºçº¦ææ¡ä»¶çå¯è¡è§£çèå´\n\n\n# ç§»æ k ä½æ°å­\n\nå·ä½ç ç®æ³-æ  ä¸­çæåä¸é¢\n\n\n# ééå¢é¡ºåºçæå°å­åºå\n\n * leetcode1403\n\nç»ä½ ä¸ä¸ªæ°ç» numsï¼è¯·ä½ ä»ä¸­æ½åä¸ä¸ªå­åºåï¼æ»¡è¶³è¯¥å­åºåçåç´ ä¹å ä¸¥æ ¼ å¤§äºæªåå«å¨è¯¥å­åºåä¸­çååç´ ä¹åã\n\nå¦æå­å¨å¤ä¸ªè§£å³æ¹æ¡ï¼åªéè¿å é¿åº¦æå° çå­åºåãå¦æä»ç¶æå¤ä¸ªè§£å³æ¹æ¡ï¼åè¿å åç´ ä¹åæå¤§ çå­åºåã\n\nä¸å­æ°ç»ä¸åçå°æ¹å¨äºï¼ãæ°ç»çå­åºåãä¸å¼ºè°åç´ å¨åæ°ç»ä¸­çè¿ç»­æ§ï¼ä¹å°±æ¯è¯´ï¼å®å¯ä»¥éè¿ä»æ°ç»ä¸­åç¦»ä¸äºï¼ä¹å¯è½ä¸åç¦»ï¼åç´ å¾å°ã\n\næ³¨æï¼é¢ç®æ°æ®ä¿è¯æ»¡è¶³ææçº¦ææ¡ä»¶çè§£å³æ¹æ¡æ¯ å¯ä¸ çãåæ¶ï¼è¿åçç­æ¡åºå½æ ééå¢é¡ºåº æåã\n\n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼nums = [4,3,10,9,8]\nè¾åºï¼[10,9] \nè§£éï¼å­åºå [10,9] å [10,8] æ¯æå°çãæ»¡è¶³åç´ ä¹åå¤§äºå¶ä»ååç´ ä¹åçå­åºåãä½æ¯ [10,9] çåç´ ä¹åæå¤§ã \n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼nums = [4,4,7,6,7]\nè¾åºï¼[7,7,6] \nè§£éï¼å­åºå [7,7] çåä¸º 14 ï¼ä¸ä¸¥æ ¼å¤§äºå©ä¸çå¶ä»åç´ ä¹åï¼14 = 4 + 4 + 6ï¼ãå æ­¤ï¼[7,6,7] æ¯æ»¡è¶³é¢æçæå°å­åºåãæ³¨æï¼åç´ æééå¢é¡ºåºè¿åã  \n\nç¤ºä¾ 3ï¼\nè¾å¥ï¼nums = [6]\nè¾åºï¼[6]\n\n\n * æ°ç»ä»å¤§å°å°æåº\n * ååºæå¤§å¼æ¾å¥ ans ä¸­ï¼å¦æä¸éè¿ä¸ªæå¤§å¼å°ä¸æ¯æä¼è§£ï¼éäºä¹åç»§ç»­è¿è¡ä¸ä¸æ­¥å­é®é¢çéæ©(è´ªå¿)\n * ç´å°ååºåç´ å¤§äºææåç´ åçä¸åä¸ºæ­¢\n\nvar minSubsequence = function(nums) {\n    let sum = 0\n    let tmp = 0\n    let ans = []\n    for (let i of nums) {\n        sum += i\n    }\n    nums.sort((a, b) => b - a)\n    for (let i = 0; i < nums.length; i++) {\n        tmp += nums[i]\n        if (tmp * 2 > sum) {\n            ans = nums.slice(0, i + 1)\n            return ans\n        }\n    }   \n};\n\n\n\n# æ æª¬æ°´æ¾é¶\n\n * leetcode860\n\n> å¨æ æª¬æ°´æä¸ï¼æ¯ä¸æ¯æ æª¬æ°´çå®ä»·ä¸º 5 ç¾åã\n> \n> é¡¾å®¢æéè´­ä¹°ä½ çäº§åï¼ï¼æè´¦å bills æ¯ä»çé¡ºåºï¼ä¸æ¬¡è´­ä¹°ä¸æ¯ã\n> \n> æ¯ä½é¡¾å®¢åªä¹°ä¸æ¯æ æª¬æ°´ï¼ç¶ååä½ ä» 5 ç¾åã10 ç¾åæ 20 ç¾åãä½ å¿é¡»ç»æ¯ä¸ªé¡¾å®¢æ­£ç¡®æ¾é¶ï¼ä¹å°±æ¯è¯´åäº¤ææ¯æ¯ä½é¡¾å®¢åä½ æ¯ä» 5 ç¾åã\n> \n> æ³¨æï¼ä¸å¼å§ä½ æå¤´æ²¡æä»»ä½é¶é±ã\n> \n> å¦æä½ è½ç»æ¯ä½é¡¾å®¢æ­£ç¡®æ¾é¶ï¼è¿å true ï¼å¦åè¿å false ã\n> \n> ç¤ºä¾ 1ï¼\n> \n> è¾å¥ï¼[5,5,5,10,20] è¾åºï¼true è§£éï¼ å 3 ä½é¡¾å®¢é£éï¼æä»¬æé¡ºåºæ¶å 3 å¼  5 ç¾åçéç¥¨ã ç¬¬ 4 ä½é¡¾å®¢é£éï¼æä»¬æ¶åä¸å¼  10 ç¾åçéç¥¨ï¼å¹¶è¿è¿ 5 ç¾åã ç¬¬ 5 ä½é¡¾å®¢é£éï¼æä»¬æ¾è¿ä¸å¼  10 ç¾åçéç¥¨åä¸å¼  5 ç¾åçéç¥¨ã ç±äºææå®¢æ·é½å¾å°äºæ­£ç¡®çæ¾é¶ï¼æä»¥æä»¬è¾åº trueã\n\n * è´ªå¿ç®æ³ï¼æ¯æ¬¡æ¾é±ï¼æ»æ¯åæ¾å¤§é¢é¢ç\n\nvar lemonadeChange = function(bills) {\n    let five = 0, ten = 0\n    for (const bill of bills) {\n        if (bill === 5) {\n            five++\n        } else if (bill === 10) {\n            if (five < 0) {\n                return false\n            } else {\n                five--\n                ten++\n            }\n        } else {\n            if (ten > 0 && five > 0) {\n                ten--\n                five--\n            } else if (five > 3) {\n                five-=3\n            } else {\n                return false\n            }\n        }\n    }\n    return true\n};\n\n\n\n# è·³è·æ¸¸æ\n\n * leetcode55\n * é¢è§£\n * æè·¯ï¼ä»åååéåï¼ç»´æ¤æè¿è·³è·è·ç¦»\n\n> ç»å®ä¸ä¸ªéè´æ´æ°æ°ç»ï¼ä½ æåä½äºæ°ç»çç¬¬ä¸ä¸ªä½ç½®ã\n> \n> æ°ç»ä¸­çæ¯ä¸ªåç´ ä»£è¡¨ä½ å¨è¯¥ä½ç½®å¯ä»¥è·³è·çæå¤§é¿åº¦ã\n> \n> å¤æ­ä½ æ¯å¦è½å¤å°è¾¾æåä¸ä¸ªä½ç½®ã\n> \n> ç¤ºä¾ 1:\n> \n> è¾å¥: [2,3,1,1,4] è¾åº: true è§£é: æä»¬å¯ä»¥åè·³ 1 æ­¥ï¼ä»ä½ç½® 0 å°è¾¾ ä½ç½® 1, ç¶ååä»ä½ç½® 1 è·³ 3 æ­¥å°è¾¾æåä¸ä¸ªä½ç½®ã ç¤ºä¾ 2:\n> \n> è¾å¥: [3,2,1,0,4] è¾åº: false è§£é: æ è®ºææ ·ï¼ä½ æ»ä¼å°è¾¾ç´¢å¼ä¸º 3 çä½ç½®ãä½è¯¥ä½ç½®çæå¤§è·³è·é¿åº¦æ¯ 0 ï¼ æä»¥ä½ æ°¸è¿ä¸å¯è½å°è¾¾æåä¸ä¸ªä½ç½®ã\n\nvar canJump = function(nums) {\n    let distance = 0\n    for (let i = 0; i < nums.length; i++) {\n        if (i <= distance) {\n            distance = Math.max(distance, i + nums[i])\n            if (distance >= nums.length - 1) {\n                return true\n            }\n        }\n    }\n    return false\n};\n\n\n\n# å æ²¹ç«\n\n * leetcode134\n\n> è¾å¥: gas = [1,2,3,4,5] cost = [3,4,5,1,2]\n> \n> è¾åº: 3\n> \n> è§£é: ä» 3 å·å æ²¹ç«(ç´¢å¼ä¸º 3 å¤)åºåï¼å¯è·å¾ 4 åæ±½æ²¹ãæ­¤æ¶æ²¹ç®±æ = 0 + 4 = 4 åæ±½æ²¹ å¼å¾ 4 å·å æ²¹ç«ï¼æ­¤æ¶æ²¹ç®±æ 4 - 1 + 5 = 8 åæ±½æ²¹ å¼å¾ 0 å·å æ²¹ç«ï¼æ­¤æ¶æ²¹ç®±æ 8 - 2 + 1 = 7 åæ±½æ²¹ å¼å¾ 1 å·å æ²¹ç«ï¼æ­¤æ¶æ²¹ç®±æ 7 - 3 + 2 = 6 åæ±½æ²¹ å¼å¾ 2 å·å æ²¹ç«ï¼æ­¤æ¶æ²¹ç®±æ 6 - 4 + 3 = 5 åæ±½æ²¹ å¼å¾ 3 å·å æ²¹ç«ï¼ä½ éè¦æ¶è 5 åæ±½æ²¹ï¼æ­£å¥½è¶³å¤ä½ è¿åå° 3 å·å æ²¹ç«ã å æ­¤ï¼3 å¯ä¸ºèµ·å§ç´¢å¼ã\n\n\n# æ´åè§£æ³\n\n * é¦åè®¡ç® gas ä¸ cost çå·®å¼ï¼ä¾å¦ gas = [1,2,3,4,5]ï¼cost = [3,4,5,1,2]ï¼subä¸º [-2, -2, -2, 3, 3]\n * å¶ä¸­ sub[i] > 0 æè½ä½ä¸ºèµ·å§ç¹\n * é¢ç®å°±åä¸ºæ¾åºsubæ°ç»ä¸­çç´¢å¼å¼ iï¼ä» i å¼å§è½®ä¸åå¤æ­å©ä½æ²¹éå¤§äº0ç´å°å¾ªç¯ä¸è½®ç»æ\n * æ¶é´å¤æåº¦ O(n^2)\n\nvar canCompleteCircuit = function(gas, cost) {\n    let n = gas.length\n    for (let i = 0; i < n; i++) {\n        if (gas[i] - cost[i] >= 0) {\n            let count = gas[i] - cost[i]\n            let pos = (i + 1) % n\n            let flag = true\n            while (pos !== i) {\n                count += gas[pos] - cost[pos]\n                if (count < 0) {\n                    flag = false\n                    break\n                }\n                pos = (pos + 1) % n\n            }\n            if (!flag) continue\n            else return i\n        }\n    }\n    return -1\n};\n\n\n\n# è´ªå¿è§£æ³\n\n * é¦åå¦ææ»æ²¹éåå»æ»æ¶èå¤§äºç­äºé¶é£ä¹ä¸å®å¯ä»¥è·å®ä¸åï¼åä¸å®å¯ä»¥æ¾å°ä¸ä¸ªè§£ï¼å³ç´¢å¼iï¼ï¼è³äºä¸ºä»ä¹å¯ä»¥åèè¿ç¯é¢è§£ï¼å¦æå°äºé¶ç´æ¥è¿å -1\n * åæ ·çæ¯ä¸ªå æ²¹ç«çå©ä½ésub[i]ä¸ºgas[i] - cost[i]ã\n * iä»0å¼å§ç´¯å sub[i]ï¼åè®°ä¸ºcurSumï¼ä¸æ¦curSumå°äºé¶ï¼è¯´æ[0, i]åºé´é½ä¸è½ä½ä¸ºèµ·å§ä½ç½®ï¼å ä¸ºå°äº0è¯´ææ æ³å°è¾¾ï¼è¿æ¶èµ·å§ä½ç½®ä»i+1ç®èµ·ï¼åä»0è®¡ç®curSumã\n * é£ä¹ä¸ºä»ä¹ä¸æ¦[iï¼j] åºé´åä¸ºè´æ°ï¼èµ·å§ä½ç½®å°±å¯ä»¥æ¯j+1å¢ï¼j+1åé¢å°±ä¸ä¼åºç°è´æ°ï¼å ä¸ºå¦æåºç°æ´å¤§çè´æ°ï¼å°±æ¯æ´æ°jï¼é£ä¹èµ·å§ä½ç½®ååææ°çj+1äºã\n * æ¶é´å¤æåº¦ O(n)\n\nvar canCompleteCircuit = function(gas, cost) {\n  let total = 0; // æ»çå©ä½æ²¹æ\n  let sub = 0;  // å½åç«ç¹çå©ä½æ²¹æ\n  let start = 0; // èµ·å§ç¹\n  for(let i = 0; i < gas.length; i++) {\n    sub += gas[i] - cost[i];\n    if (sub < 0) {\n      start = i + 1;\n      sub = 0;\n    }\n    total += gas[i] - cost[i]\n  }\n  return total >= 0 ? start: -1;\n};\n",normalizedContent:"# è´ªå¿\n\n * è´ªå¿ç®æ³\n * ç§»æ k ä½æ°å­\n * ééå¢é¡ºåºçæå°å­åºå\n * æ æª¬æ°´æ¾é¶\n * è·³è·æ¸¸æ\n * å æ²¹ç«\n\n\n# è´ªå¿ç®æ³\n\nè´ªå¿ç®æ³ï¼åç§°è´ªå©ªç®æ³ï¼æ¯æï¼å¨å¯¹é®é¢æ±è§£æ¶ï¼æ»æ¯ååºå¨å½åçæ¥æ¯æå¥½çéæ©ãä¹å°±æ¯è¯´ï¼ä¸ä»æ´ä½æä¼ä¸å ä»¥èèï¼ç®æ³å¾å°çæ¯å¨æç§æä¹ä¸çå±é¨æä¼è§£ ã\n\n**è´ªå¿ç®æ³ä¸è¬æå¦ä¸æ­¥éª¤è¿è¡ï¼ **\n\nâ å»ºç«æ°å­¦æ¨¡åæ¥æè¿°é®é¢ ã\n\nâ¡ææ±è§£çé®é¢åæè¥å¹²ä¸ªå­é®é¢ã\n\nâ¢å¯¹æ¯ä¸ªå­é®é¢æ±è§£ï¼å¾å°å­é®é¢çå±é¨æä¼è§£ ã\n\nâ£æå­é®é¢çè§£å±é¨æä¼è§£åæåæ¥è§£é®é¢çä¸ä¸ªè§£ ã\n\nè´ªå¿ç®æ³æ¯ä¸ç§å¯¹æäºæ±æä¼è§£é®é¢çæ´ç®åãæ´è¿éçè®¾è®¡ææ¯ãè´ªå¿ç®æ³çç¹ç¹æ¯ä¸æ­¥ä¸æ­¥å°è¿è¡ï¼å¸¸ä»¥å½åæåµä¸ºåºç¡æ ¹æ®æä¸ªä¼åæµåº¦ä½æä¼éæ©ï¼èä¸èèåç§å¯è½çæ´ä½æåµï¼çå»äºä¸ºæ¾æä¼è§£è¦ç©·å°½ææå¯è½èå¿é¡»èè´¹çå¤§éæ¶é´ãè´ªå¿ç®æ³éç¨èªé¡¶åä¸ï¼ä»¥è¿­ä»£çæ¹æ³ååºç¸ç»§çè´ªå¿éæ©ï¼æ¯åä¸æ¬¡è´ªå¿éæ©ï¼å°±å°ææ±é®é¢ç®åä¸ºä¸ä¸ªè§æ¨¡æ´å°çå­é®é¢ï¼éè¿æ¯ä¸æ­¥è´ªå¿éæ©ï¼å¯å¾å°é®é¢çä¸ä¸ªæä¼è§£ãè½ç¶æ¯ä¸æ­¥ä¸é½è¦ä¿è¯è½è·å¾å±é¨æä¼è§£ï¼ä½ç±æ­¤äº§ççå¨å±è§£ææ¶ä¸ä¸å®æ¯æä¼çï¼æä»¥è´ªå¿ç®æ³ä¸è¦åæº¯\n\n\nå­å¨çé®é¢\n\n * ä¸è½ä¿è¯æ±å¾çæåè§£æ¯æä½³ç\n * ä¸è½ç¨æ¥æ±æå¤§å¼ææå°å¼çé®é¢\n * åªè½æ±æ»¡è¶³æäºçº¦ææ¡ä»¶çå¯è¡è§£çèå´\n\n\n# ç§»æ k ä½æ°å­\n\nå·ä½ç ç®æ³-æ  ä¸­çæåä¸é¢\n\n\n# ééå¢é¡ºåºçæå°å­åºå\n\n * leetcode1403\n\nç»ä½ ä¸ä¸ªæ°ç» numsï¼è¯·ä½ ä»ä¸­æ½åä¸ä¸ªå­åºåï¼æ»¡è¶³è¯¥å­åºåçåç´ ä¹å ä¸¥æ ¼ å¤§äºæªåå«å¨è¯¥å­åºåä¸­çååç´ ä¹åã\n\nå¦æå­å¨å¤ä¸ªè§£å³æ¹æ¡ï¼åªéè¿å é¿åº¦æå° çå­åºåãå¦æä»ç¶æå¤ä¸ªè§£å³æ¹æ¡ï¼åè¿å åç´ ä¹åæå¤§ çå­åºåã\n\nä¸å­æ°ç»ä¸åçå°æ¹å¨äºï¼ãæ°ç»çå­åºåãä¸å¼ºè°åç´ å¨åæ°ç»ä¸­çè¿ç»­æ§ï¼ä¹å°±æ¯è¯´ï¼å®å¯ä»¥éè¿ä»æ°ç»ä¸­åç¦»ä¸äºï¼ä¹å¯è½ä¸åç¦»ï¼åç´ å¾å°ã\n\næ³¨æï¼é¢ç®æ°æ®ä¿è¯æ»¡è¶³ææçº¦ææ¡ä»¶çè§£å³æ¹æ¡æ¯ å¯ä¸ çãåæ¶ï¼è¿åçç­æ¡åºå½æ ééå¢é¡ºåº æåã\n\n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼nums = [4,3,10,9,8]\nè¾åºï¼[10,9] \nè§£éï¼å­åºå [10,9] å [10,8] æ¯æå°çãæ»¡è¶³åç´ ä¹åå¤§äºå¶ä»ååç´ ä¹åçå­åºåãä½æ¯ [10,9] çåç´ ä¹åæå¤§ã \n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼nums = [4,4,7,6,7]\nè¾åºï¼[7,7,6] \nè§£éï¼å­åºå [7,7] çåä¸º 14 ï¼ä¸ä¸¥æ ¼å¤§äºå©ä¸çå¶ä»åç´ ä¹åï¼14 = 4 + 4 + 6ï¼ãå æ­¤ï¼[7,6,7] æ¯æ»¡è¶³é¢æçæå°å­åºåãæ³¨æï¼åç´ æééå¢é¡ºåºè¿åã  \n\nç¤ºä¾ 3ï¼\nè¾å¥ï¼nums = [6]\nè¾åºï¼[6]\n\n\n * æ°ç»ä»å¤§å°å°æåº\n * ååºæå¤§å¼æ¾å¥ ans ä¸­ï¼å¦æä¸éè¿ä¸ªæå¤§å¼å°ä¸æ¯æä¼è§£ï¼éäºä¹åç»§ç»­è¿è¡ä¸ä¸æ­¥å­é®é¢çéæ©(è´ªå¿)\n * ç´å°ååºåç´ å¤§äºææåç´ åçä¸åä¸ºæ­¢\n\nvar minsubsequence = function(nums) {\n    let sum = 0\n    let tmp = 0\n    let ans = []\n    for (let i of nums) {\n        sum += i\n    }\n    nums.sort((a, b) => b - a)\n    for (let i = 0; i < nums.length; i++) {\n        tmp += nums[i]\n        if (tmp * 2 > sum) {\n            ans = nums.slice(0, i + 1)\n            return ans\n        }\n    }   \n};\n\n\n\n# æ æª¬æ°´æ¾é¶\n\n * leetcode860\n\n> å¨æ æª¬æ°´æä¸ï¼æ¯ä¸æ¯æ æª¬æ°´çå®ä»·ä¸º 5 ç¾åã\n> \n> é¡¾å®¢æéè´­ä¹°ä½ çäº§åï¼ï¼æè´¦å bills æ¯ä»çé¡ºåºï¼ä¸æ¬¡è´­ä¹°ä¸æ¯ã\n> \n> æ¯ä½é¡¾å®¢åªä¹°ä¸æ¯æ æª¬æ°´ï¼ç¶ååä½ ä» 5 ç¾åã10 ç¾åæ 20 ç¾åãä½ å¿é¡»ç»æ¯ä¸ªé¡¾å®¢æ­£ç¡®æ¾é¶ï¼ä¹å°±æ¯è¯´åäº¤ææ¯æ¯ä½é¡¾å®¢åä½ æ¯ä» 5 ç¾åã\n> \n> æ³¨æï¼ä¸å¼å§ä½ æå¤´æ²¡æä»»ä½é¶é±ã\n> \n> å¦æä½ è½ç»æ¯ä½é¡¾å®¢æ­£ç¡®æ¾é¶ï¼è¿å true ï¼å¦åè¿å false ã\n> \n> ç¤ºä¾ 1ï¼\n> \n> è¾å¥ï¼[5,5,5,10,20] è¾åºï¼true è§£éï¼ å 3 ä½é¡¾å®¢é£éï¼æä»¬æé¡ºåºæ¶å 3 å¼  5 ç¾åçéç¥¨ã ç¬¬ 4 ä½é¡¾å®¢é£éï¼æä»¬æ¶åä¸å¼  10 ç¾åçéç¥¨ï¼å¹¶è¿è¿ 5 ç¾åã ç¬¬ 5 ä½é¡¾å®¢é£éï¼æä»¬æ¾è¿ä¸å¼  10 ç¾åçéç¥¨åä¸å¼  5 ç¾åçéç¥¨ã ç±äºææå®¢æ·é½å¾å°äºæ­£ç¡®çæ¾é¶ï¼æä»¥æä»¬è¾åº trueã\n\n * è´ªå¿ç®æ³ï¼æ¯æ¬¡æ¾é±ï¼æ»æ¯åæ¾å¤§é¢é¢ç\n\nvar lemonadechange = function(bills) {\n    let five = 0, ten = 0\n    for (const bill of bills) {\n        if (bill === 5) {\n            five++\n        } else if (bill === 10) {\n            if (five < 0) {\n                return false\n            } else {\n                five--\n                ten++\n            }\n        } else {\n            if (ten > 0 && five > 0) {\n                ten--\n                five--\n            } else if (five > 3) {\n                five-=3\n            } else {\n                return false\n            }\n        }\n    }\n    return true\n};\n\n\n\n# è·³è·æ¸¸æ\n\n * leetcode55\n * é¢è§£\n * æè·¯ï¼ä»åååéåï¼ç»´æ¤æè¿è·³è·è·ç¦»\n\n> ç»å®ä¸ä¸ªéè´æ´æ°æ°ç»ï¼ä½ æåä½äºæ°ç»çç¬¬ä¸ä¸ªä½ç½®ã\n> \n> æ°ç»ä¸­çæ¯ä¸ªåç´ ä»£è¡¨ä½ å¨è¯¥ä½ç½®å¯ä»¥è·³è·çæå¤§é¿åº¦ã\n> \n> å¤æ­ä½ æ¯å¦è½å¤å°è¾¾æåä¸ä¸ªä½ç½®ã\n> \n> ç¤ºä¾ 1:\n> \n> è¾å¥: [2,3,1,1,4] è¾åº: true è§£é: æä»¬å¯ä»¥åè·³ 1 æ­¥ï¼ä»ä½ç½® 0 å°è¾¾ ä½ç½® 1, ç¶ååä»ä½ç½® 1 è·³ 3 æ­¥å°è¾¾æåä¸ä¸ªä½ç½®ã ç¤ºä¾ 2:\n> \n> è¾å¥: [3,2,1,0,4] è¾åº: false è§£é: æ è®ºææ ·ï¼ä½ æ»ä¼å°è¾¾ç´¢å¼ä¸º 3 çä½ç½®ãä½è¯¥ä½ç½®çæå¤§è·³è·é¿åº¦æ¯ 0 ï¼ æä»¥ä½ æ°¸è¿ä¸å¯è½å°è¾¾æåä¸ä¸ªä½ç½®ã\n\nvar canjump = function(nums) {\n    let distance = 0\n    for (let i = 0; i < nums.length; i++) {\n        if (i <= distance) {\n            distance = math.max(distance, i + nums[i])\n            if (distance >= nums.length - 1) {\n                return true\n            }\n        }\n    }\n    return false\n};\n\n\n\n# å æ²¹ç«\n\n * leetcode134\n\n> è¾å¥: gas = [1,2,3,4,5] cost = [3,4,5,1,2]\n> \n> è¾åº: 3\n> \n> è§£é: ä» 3 å·å æ²¹ç«(ç´¢å¼ä¸º 3 å¤)åºåï¼å¯è·å¾ 4 åæ±½æ²¹ãæ­¤æ¶æ²¹ç®±æ = 0 + 4 = 4 åæ±½æ²¹ å¼å¾ 4 å·å æ²¹ç«ï¼æ­¤æ¶æ²¹ç®±æ 4 - 1 + 5 = 8 åæ±½æ²¹ å¼å¾ 0 å·å æ²¹ç«ï¼æ­¤æ¶æ²¹ç®±æ 8 - 2 + 1 = 7 åæ±½æ²¹ å¼å¾ 1 å·å æ²¹ç«ï¼æ­¤æ¶æ²¹ç®±æ 7 - 3 + 2 = 6 åæ±½æ²¹ å¼å¾ 2 å·å æ²¹ç«ï¼æ­¤æ¶æ²¹ç®±æ 6 - 4 + 3 = 5 åæ±½æ²¹ å¼å¾ 3 å·å æ²¹ç«ï¼ä½ éè¦æ¶è 5 åæ±½æ²¹ï¼æ­£å¥½è¶³å¤ä½ è¿åå° 3 å·å æ²¹ç«ã å æ­¤ï¼3 å¯ä¸ºèµ·å§ç´¢å¼ã\n\n\n# æ´åè§£æ³\n\n * é¦åè®¡ç® gas ä¸ cost çå·®å¼ï¼ä¾å¦ gas = [1,2,3,4,5]ï¼cost = [3,4,5,1,2]ï¼subä¸º [-2, -2, -2, 3, 3]\n * å¶ä¸­ sub[i] > 0 æè½ä½ä¸ºèµ·å§ç¹\n * é¢ç®å°±åä¸ºæ¾åºsubæ°ç»ä¸­çç´¢å¼å¼ iï¼ä» i å¼å§è½®ä¸åå¤æ­å©ä½æ²¹éå¤§äº0ç´å°å¾ªç¯ä¸è½®ç»æ\n * æ¶é´å¤æåº¦ o(n^2)\n\nvar cancompletecircuit = function(gas, cost) {\n    let n = gas.length\n    for (let i = 0; i < n; i++) {\n        if (gas[i] - cost[i] >= 0) {\n            let count = gas[i] - cost[i]\n            let pos = (i + 1) % n\n            let flag = true\n            while (pos !== i) {\n                count += gas[pos] - cost[pos]\n                if (count < 0) {\n                    flag = false\n                    break\n                }\n                pos = (pos + 1) % n\n            }\n            if (!flag) continue\n            else return i\n        }\n    }\n    return -1\n};\n\n\n\n# è´ªå¿è§£æ³\n\n * é¦åå¦ææ»æ²¹éåå»æ»æ¶èå¤§äºç­äºé¶é£ä¹ä¸å®å¯ä»¥è·å®ä¸åï¼åä¸å®å¯ä»¥æ¾å°ä¸ä¸ªè§£ï¼å³ç´¢å¼iï¼ï¼è³äºä¸ºä»ä¹å¯ä»¥åèè¿ç¯é¢è§£ï¼å¦æå°äºé¶ç´æ¥è¿å -1\n * åæ ·çæ¯ä¸ªå æ²¹ç«çå©ä½ésub[i]ä¸ºgas[i] - cost[i]ã\n * iä»0å¼å§ç´¯å sub[i]ï¼åè®°ä¸ºcursumï¼ä¸æ¦cursumå°äºé¶ï¼è¯´æ[0, i]åºé´é½ä¸è½ä½ä¸ºèµ·å§ä½ç½®ï¼å ä¸ºå°äº0è¯´ææ æ³å°è¾¾ï¼è¿æ¶èµ·å§ä½ç½®ä»i+1ç®èµ·ï¼åä»0è®¡ç®cursumã\n * é£ä¹ä¸ºä»ä¹ä¸æ¦[iï¼j] åºé´åä¸ºè´æ°ï¼èµ·å§ä½ç½®å°±å¯ä»¥æ¯j+1å¢ï¼j+1åé¢å°±ä¸ä¼åºç°è´æ°ï¼å ä¸ºå¦æåºç°æ´å¤§çè´æ°ï¼å°±æ¯æ´æ°jï¼é£ä¹èµ·å§ä½ç½®ååææ°çj+1äºã\n * æ¶é´å¤æåº¦ o(n)\n\nvar cancompletecircuit = function(gas, cost) {\n  let total = 0; // æ»çå©ä½æ²¹æ\n  let sub = 0;  // å½åç«ç¹çå©ä½æ²¹æ\n  let start = 0; // èµ·å§ç¹\n  for(let i = 0; i < gas.length; i++) {\n    sub += gas[i] - cost[i];\n    if (sub < 0) {\n      start = i + 1;\n      sub = 0;\n    }\n    total += gas[i] - cost[i]\n  }\n  return total >= 0 ? start: -1;\n};\n",charsets:{cjk:!0}},{title:"é¾è¡¨",frontmatter:{title:"é¾è¡¨",date:"2020-11-13T16:00:54.000Z",categories:"ç®æ³"},regularPath:"/algorithm/list.html",relativePath:"algorithm/list.md",key:"v-8eba8a22",path:"/algorithm/list.html",headers:[{level:2,title:"å¥å¶é¾è¡¨",slug:"å¥å¶é¾è¡¨",normalizedTitle:"å¥å¶é¾è¡¨",charIndex:9},{level:2,title:"æè½¬é¾è¡¨",slug:"æè½¬é¾è¡¨",normalizedTitle:"æè½¬é¾è¡¨",charIndex:17},{level:2,title:"ä¸¤ä¸¤äº¤æ¢é¾è¡¨åç´ ",slug:"ä¸¤ä¸¤äº¤æ¢é¾è¡¨åç´ ",normalizedTitle:"ä¸¤ä¸¤äº¤æ¢é¾è¡¨åç´ ",charIndex:25},{level:2,title:"ç¯å½¢é¾è¡¨",slug:"ç¯å½¢é¾è¡¨",normalizedTitle:"ç¯å½¢é¾è¡¨",charIndex:37},{level:2,title:"ç¯å½¢é¾è¡¨2",slug:"ç¯å½¢é¾è¡¨2",normalizedTitle:"ç¯å½¢é¾è¡¨2",charIndex:45},{level:2,title:"å é¤é¾è¡¨çåæ°ç¬¬nä¸ªç»ç¹",slug:"å é¤é¾è¡¨çåæ°ç¬¬nä¸ªç»ç¹",normalizedTitle:"å é¤é¾è¡¨çåæ°ç¬¬nä¸ªç»ç¹",charIndex:54},{level:2,title:"åå¹¶ä¸¤ä¸ªæåºé¾è¡¨",slug:"åå¹¶ä¸¤ä¸ªæåºé¾è¡¨",normalizedTitle:"åå¹¶ä¸¤ä¸ªæåºé¾è¡¨",charIndex:70},{level:2,title:"åå¹¶kä¸ªæåºé¾è¡¨",slug:"åå¹¶kä¸ªæåºé¾è¡¨",normalizedTitle:"åå¹¶kä¸ªæåºé¾è¡¨",charIndex:82},{level:2,title:"é¾è¡¨åè½¬",slug:"é¾è¡¨åè½¬",normalizedTitle:"é¾è¡¨åè½¬",charIndex:94},{level:2,title:"é¾è¡¨ä¸­åæ°ç¬¬kä¸ªç»ç¹",slug:"é¾è¡¨ä¸­åæ°ç¬¬kä¸ªç»ç¹",normalizedTitle:"é¾è¡¨ä¸­åæ°ç¬¬kä¸ªç»ç¹",charIndex:5303},{level:2,title:"æåºé¾è¡¨",slug:"æåºé¾è¡¨",normalizedTitle:"æåºé¾è¡¨",charIndex:117},{level:2,title:"ç¸äº¤é¾è¡¨",slug:"ç¸äº¤é¾è¡¨",normalizedTitle:"ç¸äº¤é¾è¡¨",charIndex:125},{level:2,title:"kä¸ªä¸ç»åè½¬é¾è¡¨",slug:"kä¸ªä¸ç»åè½¬é¾è¡¨",normalizedTitle:"kä¸ªä¸ç»åè½¬é¾è¡¨",charIndex:133}],lastUpdated:"4/14/2023, 5:31:58 PM",lastUpdatedTimestamp:1681464718e3,headersStr:"å¥å¶é¾è¡¨ æè½¬é¾è¡¨ ä¸¤ä¸¤äº¤æ¢é¾è¡¨åç´  ç¯å½¢é¾è¡¨ ç¯å½¢é¾è¡¨2 å é¤é¾è¡¨çåæ°ç¬¬nä¸ªç»ç¹ åå¹¶ä¸¤ä¸ªæåºé¾è¡¨ åå¹¶kä¸ªæåºé¾è¡¨ é¾è¡¨åè½¬ é¾è¡¨ä¸­åæ°ç¬¬kä¸ªç»ç¹ æåºé¾è¡¨ ç¸äº¤é¾è¡¨ kä¸ªä¸ç»åè½¬é¾è¡¨",content:"# é¾è¡¨\n\n * å¥å¶é¾è¡¨\n * æè½¬é¾è¡¨\n * ä¸¤ä¸¤äº¤æ¢é¾è¡¨åç´ \n * ç¯å½¢é¾è¡¨\n * ç¯å½¢é¾è¡¨2\n * å é¤é¾è¡¨çåæ°ç¬¬nä¸ªç»ç¹\n * åå¹¶ä¸¤ä¸ªæåºé¾è¡¨\n * åå¹¶kä¸ªæåºé¾è¡¨\n * é¾è¡¨åè½¬\n * è¾åºé¾è¡¨åæ°ç¬¬Kä¸ªç»ç¹\n * æåºé¾è¡¨\n * ç¸äº¤é¾è¡¨\n * kä¸ªä¸ç»åè½¬é¾è¡¨\n\n\n# å¥å¶é¾è¡¨\n\n * leetcode328\n\nç»å®ä¸ä¸ªåé¾è¡¨ï¼æææçå¥æ°èç¹åå¶æ°èç¹åå«æå¨ä¸èµ·ãè¯·æ³¨æï¼è¿éçå¥æ°èç¹åå¶æ°èç¹æçæ¯èç¹ç¼å·çå¥å¶æ§ï¼èä¸æ¯èç¹çå¼çå¥å¶æ§ã\n\nè¯·å°è¯ä½¿ç¨åå°ç®æ³å®æãä½ çç®æ³çç©ºé´å¤æåº¦åºä¸º O(1)ï¼æ¶é´å¤æåº¦åºä¸º O(nodes)ï¼nodes ä¸ºèç¹æ»æ°ã\n\nç¤ºä¾ 1:\n\nè¾å¥: 1->2->3->4->5->NULL\nè¾åº: 1->3->5->2->4->NULL\nç¤ºä¾ 2:\n\nè¾å¥: 2->1->3->5->6->4->7->NULL \nè¾åº: 2->3->6->7->1->5->4->NULL\n\n\n * æè·¯ï¼æåé¾è¡¨åç»å\n\nvar oddEvenList = function(head) {\n    if (head === null) return head\n    let odd = head, evenHead = head.next\n    let even = evenHead\n    while (even !== null && even.next !== null) {\n        odd.next = even.next\n        odd = odd.next\n        even.next = odd.next\n        even = even.next\n    }\n    odd.next = evenHead\n    return head\n};\n\n\n\n# æè½¬é¾è¡¨\n\n * leetcode61\n\nç»å®ä¸ä¸ªé¾è¡¨ï¼æè½¬é¾è¡¨ï¼å°é¾è¡¨æ¯ä¸ªèç¹åå³ç§»å¨ k ä¸ªä½ç½®ï¼å¶ä¸­ k æ¯éè´æ°ã\n\nç¤ºä¾ 1:\nè¾å¥: 1->2->3->4->5->NULL, k = 2\nè¾åº: 4->5->1->2->3->NULL\nè§£é:\nåå³æè½¬ 1 æ­¥: 5->1->2->3->4->NULL\nåå³æè½¬ 2 æ­¥: 4->5->1->2->3->NULL\n\nç¤ºä¾ 2:\nè¾å¥: 0->1->2->NULL, k = 4\nè¾åº: 2->0->1->NULL\nè§£é:\nåå³æè½¬ 1 æ­¥: 2->0->1->NULL\nåå³æè½¬ 2 æ­¥: 1->2->0->NULL\nåå³æè½¬ 3 æ­¥: 0->1->2->NULL\nåå³æè½¬ 4 æ­¥: 2->0->1->NULL\n\n\n * æè·¯ï¼æç¯åæå¼\n * éåé¾è¡¨ï¼æ¾å°é¾å°¾æ¥ç¯ï¼è®°å½é¾è¡¨é¿åº¦ n\n * k = k % n ï¼æ¾å°æ­å¼ä½ç½® n-k\n\nvar rotateRight = function(head, k) {\n    if (head === null) return head\n    let p = head, n = 1\n    while (p.next !== null) {\n        p = p.next\n        n++\n    }\n    p.next = head\n    k = k % n\n    for (let i = 0; i < n-k-1; i++) {\n        head = head.next\n    }\n    let tmp = head\n    head = head.next\n    tmp.next = null\n    return head\n};\n\n\n\n# ä¸¤ä¸¤äº¤æ¢é¾è¡¨åç´ \n\n * leetcode24\n\n * é¢è§£\n\nç»å®ä¸ä¸ªé¾è¡¨ï¼ä¸¤ä¸¤äº¤æ¢å¶ä¸­ç¸é»çèç¹ï¼å¹¶è¿åäº¤æ¢åçé¾è¡¨ã\n\nä½ ä¸è½åªæ¯åçº¯çæ¹åèç¹åé¨çå¼ï¼èæ¯éè¦å®éçè¿è¡èç¹äº¤æ¢ã\n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼head = [1,2,3,4]\nè¾åºï¼[2,1,4,3]\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼head = []\nè¾åºï¼[]\n\nç¤ºä¾ 3ï¼\nè¾å¥ï¼head = [1]\nè¾åºï¼[1]\n\n\nvar swapPairs = function(head) {\n    const dummy = new ListNode(0)\n    dummy.next = head\n    let prev = dummy\n    while (head && head.next) {\n        const next = head.next\n        head.next = next.next\n        next.next = head\n        prev.next = next\n\n        prev = head\n        head = head.next\n    }\n    return dummy.next\n}\n\n\n\n# ç¯å½¢é¾è¡¨\n\n * leetcode141\n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼head = [3,2,0,-4], pos = 1\nè¾åºï¼true\nè§£éï¼é¾è¡¨ä¸­æä¸ä¸ªç¯ï¼å¶å°¾é¨è¿æ¥å°ç¬¬äºä¸ªèç¹ã\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼head = [1,2], pos = 0\nè¾åºï¼true\nè§£éï¼é¾è¡¨ä¸­æä¸ä¸ªç¯ï¼å¶å°¾é¨è¿æ¥å°ç¬¬ä¸ä¸ªèç¹ã\n\n\n * å¿«æ¢æéæ³\n * å¿«ãæ¢æéï¼ä»å¤´èç¹åºå\n * æ¢æéæ¯æ¬¡èµ°ä¸æ­¥ï¼å¿«æéæ¯æ¬¡èµ°ä¸¤æ­¥ï¼ä¸æ­æ¯è¾å®ä»¬æåçèç¹çå¼\n * å¦æèç¹å¼ç¸åï¼è¯´ææç¯ãå¦æä¸åï¼ç»§ç»­å¾ªç¯ã\n\nvar hasCycle = function(head) {\n    let slow = head;\n    let fast = head;\n    while (fast && fast.next) {\n        slow = slow.next;\n        fast = fast.next.next;\n        if (slow === fast) return true;\n    }\n    return false;\n};\n\n\n// å¦æå¯¹è±¡ä¸­å­å¨å¾ªç¯å¼ç¨ï¼å JSON.stringify æ¥é\nvar hasCycle = function(head) {\n    try {\n        JSON.stringify(head)\n    } catch(e) {\n        return true\n    }\n    return false\n};\n\n\n\n# ç¯å½¢é¾è¡¨2\n\n * leetcode142\n * ç¸æ¯ä¸ä¸é¢éè¦æ¾å°ç¯å½¢å¥å£ï¼å·ä½å¯åèé¢è§£ãæç»å¾è§£+å¬å¼æ¨å¯¼ãé¾è¡¨æç¯ï¼å¦ä½æ±å¥ç¯ç¹ï¼\n\nvar detectCycle = function(head) {\n    let fast = head;\n    let slow = head;\n    while (fast && fast.next) {\n        slow = slow.next;\n        fast = fast.next.next;\n        if (slow === fast) {\n            let slow = head;\n            while (slow !== fast) {\n                slow = slow.next;\n                fast = fast.next;\n            }\n            return slow;\n        }\n    }\n    return null;\n};\n\n\n\n# å é¤é¾è¡¨çåæ°ç¬¬nä¸ªç»ç¹\n\n * leetcode19\n\nç»å®ä¸ä¸ªé¾è¡¨ï¼å é¤é¾è¡¨çåæ°ç¬¬ n ä¸ªèç¹ï¼å¹¶ä¸è¿åé¾è¡¨çå¤´ç»ç¹ã\n\nç¤ºä¾ï¼\n\nç»å®ä¸ä¸ªé¾è¡¨: 1->2->3->4->5, å n = 2.\n\nå½å é¤äºåæ°ç¬¬äºä¸ªèç¹åï¼é¾è¡¨åä¸º 1->2->3->5.\n\n\n * æè·¯ï¼åæéï¼å¿«çåèµ° n æ­¥ï¼ç¶åä¸¤ä¸ªä¸èµ·èµ°å°æåï¼æ¢çå°±æ¯åæ°ç¬¬ n ä¸ªï¼åªéåäºä¸æ¬¡\n\nvar removeNthFromEnd = function(head, n) {\n    // åå»ºå¤´èç¹, ä¿è¯è¾å¥ä¸º [1], 1 æ¶ä¸ä¼åºç°éè¯¯ï¼\n    let pre = new ListNode()\n    pre.next = head\n    let slow = pre\n    let fast = pre\n    // fast åèµ° n æ¬¡\n    for (let i = 0; i < n; i++) {\n        fast = fast.next\n    }\n    // èµ°å°å°¾é¨\n    while (fast.next !== null) {\n        slow = slow.next\n        fast = fast.next\n    }\n    // å é¤\n    slow.next = slow.next.next\n    // ä¸ºä»ä¹ä¸ç´æ¥è¿å headï¼å ä¸º head å¯è½æ¯è¢«å é¤çèç¹\n    return pre.next\n};\n\n\n\n# åå¹¶ä¸¤ä¸ªæåºé¾è¡¨\n\n * leetcode21\n\nå°ä¸¤ä¸ªååºé¾è¡¨åå¹¶ä¸ºä¸ä¸ªæ°ç ååº é¾è¡¨å¹¶è¿åãæ°é¾è¡¨æ¯éè¿æ¼æ¥ç»å®çä¸¤ä¸ªé¾è¡¨çææèç¹ç»æçã \n\nç¤ºä¾ï¼\n\nè¾å¥ï¼1->2->4, 1->3->4\nè¾åºï¼1->1->2->3->4->4\n\n\nvar mergeTwoLists = function(l1, l2) {\n    if (!l1) return l2;\n    if (!l2) return l1;\n    if (l1.val < l2.val) {\n        l1.next = mergeTwoLists(l1.next, l2);\n        return l1;\n    }\n    else {\n        l2.next = mergeTwoLists(l1, l2.next);\n        return l2;\n    }\n};\n\n\n\n# åå¹¶kä¸ªæåºé¾è¡¨\n\n * leetcode23\n\nç»ä½ ä¸ä¸ªé¾è¡¨æ°ç»ï¼æ¯ä¸ªé¾è¡¨é½å·²ç»æååºæåã\nè¯·ä½ å°ææé¾è¡¨åå¹¶å°ä¸ä¸ªååºé¾è¡¨ä¸­ï¼è¿ååå¹¶åçé¾è¡¨ã\n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼lists = [[1,4,5],[1,3,4],[2,6]]\nè¾åºï¼[1,1,2,3,4,4,5,6]\nè§£éï¼é¾è¡¨æ°ç»å¦ä¸ï¼\n[\n  1->4->5,\n  1->3->4,\n  2->6\n]\nå°å®ä»¬åå¹¶å°ä¸ä¸ªæåºé¾è¡¨ä¸­å¾å°ã\n1->1->2->3->4->4->5->6\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼lists = []\nè¾åºï¼[]\n\nç¤ºä¾ 3ï¼\nè¾å¥ï¼lists = [[]]\nè¾åºï¼[]\n\n\n * åæ²»ï¼æ k ä¸ªé¾è¡¨æåï¼å©ç¨åå¹¶ä¸¤ä¸ªé¾è¡¨æ¥æä½\n\nvar mergeKLists = function (lists) {\n  if (lists.length === 0) return null\n  if (lists.length === 1) return lists[0]\n  if (lists.length === 2) {\n    return mergeTwoLists(lists[0], lists[1])\n  }\n  \n  const mid = lists.length >> 1\n  const l1 = [], l2 = []\n  for (let i = 0; i < mid; i++) {\n    l1[i] = lists[i];\n  }\n  for (let i = mid, j = 0; i < lists.length; i++, j++) {\n    l2[j] = lists[i]\n  }\n  return mergeTwoLists(mergeKLists(l1), mergeKLists(l2))\n};\n\n\n\n# é¾è¡¨åè½¬\n\n * åæoffer24\n\n * é¢è§£\n\nvar reverseList = function(head) {\n    let pre = null\n    let cur = head\n    while (cur) {\n        tmp = cur.next // æå­åç»§èç¹ cur.next\n        cur.next = pre // ä¿®æ¹ next å¼ç¨æå\n        pre = cur      // pre æå­ cur\n        cur = tmp      // cur è®¿é®ä¸ä¸èç¹\n    }\n    return pre\n};\n\n\n\n# é¾è¡¨ä¸­åæ°ç¬¬kä¸ªç»ç¹\n\n * åæoffer22\n\nvar getKthFromEnd = function(head, k) {\n    let arr = []\n    while (head) {\n        arr.unshift(head)\n        head = head.next\n    }\n    return arr[k - 1]\n};\n\n\n\n# æåºé¾è¡¨\n\n * leetcode148\n * é¢è§£\n\n// åå¹¶ä¸¤ä¸ªæåºé¾è¡¨\nconst mergeTwoLists = function(l1, l2) {\n    if (l1 === null) return l2\n    if (l2 === null) return l1\n    if (l1.val < l2.val) {\n        l1.next = mergeTwoLists(l1.next, l2)\n        return l1\n    } else {\n        l2.next = mergeTwoLists(l1, l2.next)\n        return l2\n    }\n}\n\n// è·åä¸­é´èç¹\n// - å¦æé¾è¡¨é¿åº¦ä¸ºå¥æ°ï¼åè¿åä¸­é´èç¹\n// - å¦æé¾è¡¨é¿åº¦ä¸ºå¶æ°ï¼åæä¸¤ä¸ªä¸­é´èç¹ï¼è¿éè¿åç¬¬ä¸ä¸ª\nconst middleNode = function(head) {\n    let fast = head, slow = head\n    while(fast.next && fast.next.next) {\n        slow = slow.next\n        fast = fast.next.next\n    }\n    return slow\n}\n\nvar sortList = function(head) {\n    if (head === null || head.next === null) return head\n    // è·åä¸­é´èç¹\n    let middle = middleNode(head)\n    // åè£æä¸¤ä¸ªé¾è¡¨\n    let temp = middle.next\n    middle.next = null\n    let left = head, right = temp\n    // ç»§ç»­åè£ï¼éå½åè£ï¼\n    left = sortList(left)\n    right = sortList(right)\n    // åå¹¶ä¸¤ä¸ªæåºé¾è¡¨\n    return mergeTwoLists(left, right)\n};\n\n\n\n# ç¸äº¤é¾è¡¨\n\n * leetcode160\n * é¢è§£\n\nvar getIntersectionNode = function(headA, headB) {\n    if (headA === null || headB === null) return null\n    let p = headA, q = headB\n    while (p !== q) {\n        p = p === null ? headB : p.next\n        q = q === null ? headA : q.next\n    }\n    return p\n};\n\n\n\n# kä¸ªä¸ç»åè½¬é¾è¡¨\n\n * leetcode25\n * æè·¯ååè½¬é¾è¡¨ç±»ä¼¼ï¼æ¯Kä¸ªåè½¬ä¸æ¬¡\n\nvar reverseKGroup = function(head, k) {\n    let cur = head, count = 0\n    while (cur !== null && count !== k) {\n        cur = cur.next\n        count ++\n    }\n    if (count === k) {\n        pre = reverseKGroup(cur, k)\n        while (count --) {\n            let tmp = head.next\n            head.next = pre\n            pre = head\n            head = tmp\n        }\n        head = pre\n    }\n    return head\n}\n",normalizedContent:"# é¾è¡¨\n\n * å¥å¶é¾è¡¨\n * æè½¬é¾è¡¨\n * ä¸¤ä¸¤äº¤æ¢é¾è¡¨åç´ \n * ç¯å½¢é¾è¡¨\n * ç¯å½¢é¾è¡¨2\n * å é¤é¾è¡¨çåæ°ç¬¬nä¸ªç»ç¹\n * åå¹¶ä¸¤ä¸ªæåºé¾è¡¨\n * åå¹¶kä¸ªæåºé¾è¡¨\n * é¾è¡¨åè½¬\n * è¾åºé¾è¡¨åæ°ç¬¬kä¸ªç»ç¹\n * æåºé¾è¡¨\n * ç¸äº¤é¾è¡¨\n * kä¸ªä¸ç»åè½¬é¾è¡¨\n\n\n# å¥å¶é¾è¡¨\n\n * leetcode328\n\nç»å®ä¸ä¸ªåé¾è¡¨ï¼æææçå¥æ°èç¹åå¶æ°èç¹åå«æå¨ä¸èµ·ãè¯·æ³¨æï¼è¿éçå¥æ°èç¹åå¶æ°èç¹æçæ¯èç¹ç¼å·çå¥å¶æ§ï¼èä¸æ¯èç¹çå¼çå¥å¶æ§ã\n\nè¯·å°è¯ä½¿ç¨åå°ç®æ³å®æãä½ çç®æ³çç©ºé´å¤æåº¦åºä¸º o(1)ï¼æ¶é´å¤æåº¦åºä¸º o(nodes)ï¼nodes ä¸ºèç¹æ»æ°ã\n\nç¤ºä¾ 1:\n\nè¾å¥: 1->2->3->4->5->null\nè¾åº: 1->3->5->2->4->null\nç¤ºä¾ 2:\n\nè¾å¥: 2->1->3->5->6->4->7->null \nè¾åº: 2->3->6->7->1->5->4->null\n\n\n * æè·¯ï¼æåé¾è¡¨åç»å\n\nvar oddevenlist = function(head) {\n    if (head === null) return head\n    let odd = head, evenhead = head.next\n    let even = evenhead\n    while (even !== null && even.next !== null) {\n        odd.next = even.next\n        odd = odd.next\n        even.next = odd.next\n        even = even.next\n    }\n    odd.next = evenhead\n    return head\n};\n\n\n\n# æè½¬é¾è¡¨\n\n * leetcode61\n\nç»å®ä¸ä¸ªé¾è¡¨ï¼æè½¬é¾è¡¨ï¼å°é¾è¡¨æ¯ä¸ªèç¹åå³ç§»å¨ k ä¸ªä½ç½®ï¼å¶ä¸­ k æ¯éè´æ°ã\n\nç¤ºä¾ 1:\nè¾å¥: 1->2->3->4->5->null, k = 2\nè¾åº: 4->5->1->2->3->null\nè§£é:\nåå³æè½¬ 1 æ­¥: 5->1->2->3->4->null\nåå³æè½¬ 2 æ­¥: 4->5->1->2->3->null\n\nç¤ºä¾ 2:\nè¾å¥: 0->1->2->null, k = 4\nè¾åº: 2->0->1->null\nè§£é:\nåå³æè½¬ 1 æ­¥: 2->0->1->null\nåå³æè½¬ 2 æ­¥: 1->2->0->null\nåå³æè½¬ 3 æ­¥: 0->1->2->null\nåå³æè½¬ 4 æ­¥: 2->0->1->null\n\n\n * æè·¯ï¼æç¯åæå¼\n * éåé¾è¡¨ï¼æ¾å°é¾å°¾æ¥ç¯ï¼è®°å½é¾è¡¨é¿åº¦ n\n * k = k % n ï¼æ¾å°æ­å¼ä½ç½® n-k\n\nvar rotateright = function(head, k) {\n    if (head === null) return head\n    let p = head, n = 1\n    while (p.next !== null) {\n        p = p.next\n        n++\n    }\n    p.next = head\n    k = k % n\n    for (let i = 0; i < n-k-1; i++) {\n        head = head.next\n    }\n    let tmp = head\n    head = head.next\n    tmp.next = null\n    return head\n};\n\n\n\n# ä¸¤ä¸¤äº¤æ¢é¾è¡¨åç´ \n\n * leetcode24\n\n * é¢è§£\n\nç»å®ä¸ä¸ªé¾è¡¨ï¼ä¸¤ä¸¤äº¤æ¢å¶ä¸­ç¸é»çèç¹ï¼å¹¶è¿åäº¤æ¢åçé¾è¡¨ã\n\nä½ ä¸è½åªæ¯åçº¯çæ¹åèç¹åé¨çå¼ï¼èæ¯éè¦å®éçè¿è¡èç¹äº¤æ¢ã\n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼head = [1,2,3,4]\nè¾åºï¼[2,1,4,3]\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼head = []\nè¾åºï¼[]\n\nç¤ºä¾ 3ï¼\nè¾å¥ï¼head = [1]\nè¾åºï¼[1]\n\n\nvar swappairs = function(head) {\n    const dummy = new listnode(0)\n    dummy.next = head\n    let prev = dummy\n    while (head && head.next) {\n        const next = head.next\n        head.next = next.next\n        next.next = head\n        prev.next = next\n\n        prev = head\n        head = head.next\n    }\n    return dummy.next\n}\n\n\n\n# ç¯å½¢é¾è¡¨\n\n * leetcode141\n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼head = [3,2,0,-4], pos = 1\nè¾åºï¼true\nè§£éï¼é¾è¡¨ä¸­æä¸ä¸ªç¯ï¼å¶å°¾é¨è¿æ¥å°ç¬¬äºä¸ªèç¹ã\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼head = [1,2], pos = 0\nè¾åºï¼true\nè§£éï¼é¾è¡¨ä¸­æä¸ä¸ªç¯ï¼å¶å°¾é¨è¿æ¥å°ç¬¬ä¸ä¸ªèç¹ã\n\n\n * å¿«æ¢æéæ³\n * å¿«ãæ¢æéï¼ä»å¤´èç¹åºå\n * æ¢æéæ¯æ¬¡èµ°ä¸æ­¥ï¼å¿«æéæ¯æ¬¡èµ°ä¸¤æ­¥ï¼ä¸æ­æ¯è¾å®ä»¬æåçèç¹çå¼\n * å¦æèç¹å¼ç¸åï¼è¯´ææç¯ãå¦æä¸åï¼ç»§ç»­å¾ªç¯ã\n\nvar hascycle = function(head) {\n    let slow = head;\n    let fast = head;\n    while (fast && fast.next) {\n        slow = slow.next;\n        fast = fast.next.next;\n        if (slow === fast) return true;\n    }\n    return false;\n};\n\n\n// å¦æå¯¹è±¡ä¸­å­å¨å¾ªç¯å¼ç¨ï¼å json.stringify æ¥é\nvar hascycle = function(head) {\n    try {\n        json.stringify(head)\n    } catch(e) {\n        return true\n    }\n    return false\n};\n\n\n\n# ç¯å½¢é¾è¡¨2\n\n * leetcode142\n * ç¸æ¯ä¸ä¸é¢éè¦æ¾å°ç¯å½¢å¥å£ï¼å·ä½å¯åèé¢è§£ãæç»å¾è§£+å¬å¼æ¨å¯¼ãé¾è¡¨æç¯ï¼å¦ä½æ±å¥ç¯ç¹ï¼\n\nvar detectcycle = function(head) {\n    let fast = head;\n    let slow = head;\n    while (fast && fast.next) {\n        slow = slow.next;\n        fast = fast.next.next;\n        if (slow === fast) {\n            let slow = head;\n            while (slow !== fast) {\n                slow = slow.next;\n                fast = fast.next;\n            }\n            return slow;\n        }\n    }\n    return null;\n};\n\n\n\n# å é¤é¾è¡¨çåæ°ç¬¬nä¸ªç»ç¹\n\n * leetcode19\n\nç»å®ä¸ä¸ªé¾è¡¨ï¼å é¤é¾è¡¨çåæ°ç¬¬ n ä¸ªèç¹ï¼å¹¶ä¸è¿åé¾è¡¨çå¤´ç»ç¹ã\n\nç¤ºä¾ï¼\n\nç»å®ä¸ä¸ªé¾è¡¨: 1->2->3->4->5, å n = 2.\n\nå½å é¤äºåæ°ç¬¬äºä¸ªèç¹åï¼é¾è¡¨åä¸º 1->2->3->5.\n\n\n * æè·¯ï¼åæéï¼å¿«çåèµ° n æ­¥ï¼ç¶åä¸¤ä¸ªä¸èµ·èµ°å°æåï¼æ¢çå°±æ¯åæ°ç¬¬ n ä¸ªï¼åªéåäºä¸æ¬¡\n\nvar removenthfromend = function(head, n) {\n    // åå»ºå¤´èç¹, ä¿è¯è¾å¥ä¸º [1], 1 æ¶ä¸ä¼åºç°éè¯¯ï¼\n    let pre = new listnode()\n    pre.next = head\n    let slow = pre\n    let fast = pre\n    // fast åèµ° n æ¬¡\n    for (let i = 0; i < n; i++) {\n        fast = fast.next\n    }\n    // èµ°å°å°¾é¨\n    while (fast.next !== null) {\n        slow = slow.next\n        fast = fast.next\n    }\n    // å é¤\n    slow.next = slow.next.next\n    // ä¸ºä»ä¹ä¸ç´æ¥è¿å headï¼å ä¸º head å¯è½æ¯è¢«å é¤çèç¹\n    return pre.next\n};\n\n\n\n# åå¹¶ä¸¤ä¸ªæåºé¾è¡¨\n\n * leetcode21\n\nå°ä¸¤ä¸ªååºé¾è¡¨åå¹¶ä¸ºä¸ä¸ªæ°ç ååº é¾è¡¨å¹¶è¿åãæ°é¾è¡¨æ¯éè¿æ¼æ¥ç»å®çä¸¤ä¸ªé¾è¡¨çææèç¹ç»æçã \n\nç¤ºä¾ï¼\n\nè¾å¥ï¼1->2->4, 1->3->4\nè¾åºï¼1->1->2->3->4->4\n\n\nvar mergetwolists = function(l1, l2) {\n    if (!l1) return l2;\n    if (!l2) return l1;\n    if (l1.val < l2.val) {\n        l1.next = mergetwolists(l1.next, l2);\n        return l1;\n    }\n    else {\n        l2.next = mergetwolists(l1, l2.next);\n        return l2;\n    }\n};\n\n\n\n# åå¹¶kä¸ªæåºé¾è¡¨\n\n * leetcode23\n\nç»ä½ ä¸ä¸ªé¾è¡¨æ°ç»ï¼æ¯ä¸ªé¾è¡¨é½å·²ç»æååºæåã\nè¯·ä½ å°ææé¾è¡¨åå¹¶å°ä¸ä¸ªååºé¾è¡¨ä¸­ï¼è¿ååå¹¶åçé¾è¡¨ã\n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼lists = [[1,4,5],[1,3,4],[2,6]]\nè¾åºï¼[1,1,2,3,4,4,5,6]\nè§£éï¼é¾è¡¨æ°ç»å¦ä¸ï¼\n[\n  1->4->5,\n  1->3->4,\n  2->6\n]\nå°å®ä»¬åå¹¶å°ä¸ä¸ªæåºé¾è¡¨ä¸­å¾å°ã\n1->1->2->3->4->4->5->6\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼lists = []\nè¾åºï¼[]\n\nç¤ºä¾ 3ï¼\nè¾å¥ï¼lists = [[]]\nè¾åºï¼[]\n\n\n * åæ²»ï¼æ k ä¸ªé¾è¡¨æåï¼å©ç¨åå¹¶ä¸¤ä¸ªé¾è¡¨æ¥æä½\n\nvar mergeklists = function (lists) {\n  if (lists.length === 0) return null\n  if (lists.length === 1) return lists[0]\n  if (lists.length === 2) {\n    return mergetwolists(lists[0], lists[1])\n  }\n  \n  const mid = lists.length >> 1\n  const l1 = [], l2 = []\n  for (let i = 0; i < mid; i++) {\n    l1[i] = lists[i];\n  }\n  for (let i = mid, j = 0; i < lists.length; i++, j++) {\n    l2[j] = lists[i]\n  }\n  return mergetwolists(mergeklists(l1), mergeklists(l2))\n};\n\n\n\n# é¾è¡¨åè½¬\n\n * åæoffer24\n\n * é¢è§£\n\nvar reverselist = function(head) {\n    let pre = null\n    let cur = head\n    while (cur) {\n        tmp = cur.next // æå­åç»§èç¹ cur.next\n        cur.next = pre // ä¿®æ¹ next å¼ç¨æå\n        pre = cur      // pre æå­ cur\n        cur = tmp      // cur è®¿é®ä¸ä¸èç¹\n    }\n    return pre\n};\n\n\n\n# é¾è¡¨ä¸­åæ°ç¬¬kä¸ªç»ç¹\n\n * åæoffer22\n\nvar getkthfromend = function(head, k) {\n    let arr = []\n    while (head) {\n        arr.unshift(head)\n        head = head.next\n    }\n    return arr[k - 1]\n};\n\n\n\n# æåºé¾è¡¨\n\n * leetcode148\n * é¢è§£\n\n// åå¹¶ä¸¤ä¸ªæåºé¾è¡¨\nconst mergetwolists = function(l1, l2) {\n    if (l1 === null) return l2\n    if (l2 === null) return l1\n    if (l1.val < l2.val) {\n        l1.next = mergetwolists(l1.next, l2)\n        return l1\n    } else {\n        l2.next = mergetwolists(l1, l2.next)\n        return l2\n    }\n}\n\n// è·åä¸­é´èç¹\n// - å¦æé¾è¡¨é¿åº¦ä¸ºå¥æ°ï¼åè¿åä¸­é´èç¹\n// - å¦æé¾è¡¨é¿åº¦ä¸ºå¶æ°ï¼åæä¸¤ä¸ªä¸­é´èç¹ï¼è¿éè¿åç¬¬ä¸ä¸ª\nconst middlenode = function(head) {\n    let fast = head, slow = head\n    while(fast.next && fast.next.next) {\n        slow = slow.next\n        fast = fast.next.next\n    }\n    return slow\n}\n\nvar sortlist = function(head) {\n    if (head === null || head.next === null) return head\n    // è·åä¸­é´èç¹\n    let middle = middlenode(head)\n    // åè£æä¸¤ä¸ªé¾è¡¨\n    let temp = middle.next\n    middle.next = null\n    let left = head, right = temp\n    // ç»§ç»­åè£ï¼éå½åè£ï¼\n    left = sortlist(left)\n    right = sortlist(right)\n    // åå¹¶ä¸¤ä¸ªæåºé¾è¡¨\n    return mergetwolists(left, right)\n};\n\n\n\n# ç¸äº¤é¾è¡¨\n\n * leetcode160\n * é¢è§£\n\nvar getintersectionnode = function(heada, headb) {\n    if (heada === null || headb === null) return null\n    let p = heada, q = headb\n    while (p !== q) {\n        p = p === null ? headb : p.next\n        q = q === null ? heada : q.next\n    }\n    return p\n};\n\n\n\n# kä¸ªä¸ç»åè½¬é¾è¡¨\n\n * leetcode25\n * æè·¯ååè½¬é¾è¡¨ç±»ä¼¼ï¼æ¯kä¸ªåè½¬ä¸æ¬¡\n\nvar reversekgroup = function(head, k) {\n    let cur = head, count = 0\n    while (cur !== null && count !== k) {\n        cur = cur.next\n        count ++\n    }\n    if (count === k) {\n        pre = reversekgroup(cur, k)\n        while (count --) {\n            let tmp = head.next\n            head.next = pre\n            pre = head\n            head = tmp\n        }\n        head = pre\n    }\n    return head\n}\n",charsets:{cjk:!0}},{title:"å­ç¬¦ä¸²æä½",frontmatter:{title:"å­ç¬¦ä¸²æä½",date:"2020-11-10T16:00:54.000Z",categories:"ç®æ³"},regularPath:"/algorithm/string.html",relativePath:"algorithm/string.md",key:"v-a9b7d16e",path:"/algorithm/string.html",headers:[{level:2,title:"ä¸ä¸ä¸ªæå",slug:"ä¸ä¸ä¸ªæå",normalizedTitle:"ä¸ä¸ä¸ªæå",charIndex:12},{level:2,title:"å¯¹è¾å¥çå­ç¬¦ä¸²ï¼å»é¤å¶ä¸­çå­ç¬¦'b'ä»¥åè¿ç»­åºç°ç'a'å'c'",slug:"å¯¹è¾å¥çå­ç¬¦ä¸²-å»é¤å¶ä¸­çå­ç¬¦-b-ä»¥åè¿ç»­åºç°ç-a-å-c",normalizedTitle:"å¯¹è¾å¥çå­ç¬¦ä¸²ï¼å»é¤å¶ä¸­çå­ç¬¦'b'ä»¥åè¿ç»­åºç°ç'a'å'c'",charIndex:21},{level:2,title:"å¤è§æ°å",slug:"å¤è§æ°å",normalizedTitle:"å¤è§æ°å",charIndex:57},{level:3,title:"æ­£åè¡¨è¾¾å¼ï¼\\1æè·",slug:"æ­£åè¡¨è¾¾å¼-1æè·",normalizedTitle:"æ­£åè¡¨è¾¾å¼ï¼\\1æè·",charIndex:1572},{level:3,title:"å¤è§æ°å",slug:"å¤è§æ°å-2",normalizedTitle:"å¤è§æ°å",charIndex:57},{level:2,title:"ç®æ³ï¼æé¿å¬å±åç¼4",slug:"ç®æ³-æé¿å¬å±åç¼4",normalizedTitle:"ç®æ³ï¼æé¿å¬å±åç¼4",charIndex:2243},{level:2,title:"å­ç¬¦ä¸²çæå¤§ééå¤å­ä¸²é¿åº¦",slug:"å­ç¬¦ä¸²çæå¤§ééå¤å­ä¸²é¿åº¦",normalizedTitle:"å­ç¬¦ä¸²çæå¤§ééå¤å­ä¸²é¿åº¦",charIndex:75},{level:2,title:"éå¤çå­å­ç¬¦ä¸²",slug:"éå¤çå­å­ç¬¦ä¸²",normalizedTitle:"éå¤çå­å­ç¬¦ä¸²",charIndex:92},{level:2,title:"åæ°åè§£",slug:"åæ°åè§£",normalizedTitle:"åæ°åè§£",charIndex:103},{level:2,title:"å­ç¬¦ä¸²è§£ç ",slug:"å­ç¬¦ä¸²è§£ç ",normalizedTitle:"å­ç¬¦ä¸²è§£ç ",charIndex:111},{level:2,title:"å­ç¬¦ä¸²ç¸å ",slug:"å­ç¬¦ä¸²ç¸å ",normalizedTitle:"å­ç¬¦ä¸²ç¸å ",charIndex:120},{level:2,title:"æ¯è¾çæ¬å·",slug:"æ¯è¾çæ¬å·",normalizedTitle:"æ¯è¾çæ¬å·",charIndex:129},{level:2,title:"zå­å½¢åæ¢",slug:"zå­å½¢åæ¢",normalizedTitle:"zå­å½¢åæ¢",charIndex:6402}],lastUpdated:"4/26/2023, 3:48:58 PM",lastUpdatedTimestamp:1682495338e3,headersStr:"ä¸ä¸ä¸ªæå å¯¹è¾å¥çå­ç¬¦ä¸²ï¼å»é¤å¶ä¸­çå­ç¬¦'b'ä»¥åè¿ç»­åºç°ç'a'å'c' å¤è§æ°å æ­£åè¡¨è¾¾å¼ï¼\\1æè· å¤è§æ°å ç®æ³ï¼æé¿å¬å±åç¼4 å­ç¬¦ä¸²çæå¤§ééå¤å­ä¸²é¿åº¦ éå¤çå­å­ç¬¦ä¸² åæ°åè§£ å­ç¬¦ä¸²è§£ç  å­ç¬¦ä¸²ç¸å  æ¯è¾çæ¬å· zå­å½¢åæ¢",content:'# å­ç¬¦ä¸²æä½\n\n * ä¸ä¸ä¸ªæå\n * å¯¹è¾å¥çå­ç¬¦ä¸²ï¼å»é¤å¶ä¸­çå­ç¬¦\'b\'ä»¥åè¿ç»­åºç°ç\'a\'å\'c\'\n * å¤è§æ°å\n * æé¿å¬å±åç¼\n * å­ç¬¦ä¸²çæå¤§ééå¤å­ä¸²é¿åº¦\n * éå¤çå­å­ç¬¦ä¸²\n * åæ°åè§£\n * å­ç¬¦ä¸²è§£ç \n * å­ç¬¦ä¸²ç¸å \n * æ¯è¾çæ¬å·\n * zå­ååæ¢\n\n\n# ä¸ä¸ä¸ªæå\n\n * é¢ç®æ¥æºï¼leetcode31\n\n * åèé¢è§£ï¼æè·¯ææ¸æ°çé¢è§£\n\nå®ç°è·åä¸ä¸ä¸ªæåçå½æ°ï¼ç®æ³éè¦å°ç»å®æ°å­åºåéæ°æåæå­å¸åºä¸­ä¸ä¸ä¸ªæ´å¤§çæåã\n\nå¦æä¸å­å¨ä¸ä¸ä¸ªæ´å¤§çæåï¼åå°æ°å­éæ°æåææå°çæåï¼å³ååºæåï¼ã\n\nå¿é¡»åå°ä¿®æ¹ï¼åªåè®¸ä½¿ç¨é¢å¤å¸¸æ°ç©ºé´ã\n\nä»¥ä¸æ¯ä¸äºä¾å­ï¼è¾å¥ä½äºå·¦ä¾§åï¼å¶ç¸åºè¾åºä½äºå³ä¾§åã\n1,2,3 â 1,3,2\n3,2,1 â 1,2,3\n1,1,5 â 1,5,1\n\n\n * åæï¼å°±ç¸å½äºæ¾ä¸ä¸ªæ¯å½åæ°å¤§å¹¶ä¸æå°çä¸ä¸ªï¼æ¯å¦æ¯123å¤§çæ132,213,231,321,312ï¼ä½æ¯æå°çæ¯132\n * æè·¯ï¼\n   * ä»åååéåï¼æ¾å°nums[i] < nums[i+1]çæ°ï¼è®°å½ä¸iéè¦äº¤æ¢\n   * äº¤æ¢çå¯¹è±¡åºè¯¥æ¯æ¯ä»å¤§ä½æ¯æå°çä¸ä¸ªï¼åªéä»åååéåæ¾å³å¯ï¼å ä¸ºiåé¢å·²ç»æ¯éåº\n   * äº¤æ¢åæä¹±äºåºåï¼åºè¯¥å° i åé¢çåºåéæ°æåº\n   * æ³¨æé¢ç®è¦æ±ï¼åªè½å¨åæ°ç»ä¸æ¹ï¼ç¨ nums = nums.concatçä¸äºæä½ä¼æé®é¢ï¼æå¥½è¿æ¯ç¨splice,push,unshiftè¿äºä¿®æ¹åæ°ç»çæ¹æ³\n\n// 1234654\nvar nextPermutation = function(nums) {\n    let flag = false;\n    for (let i = nums.length - 2; i >= 0; i--) {\n        if (nums[i] < nums[i + 1]) {\n            flag = true;\n            for (let j = nums.length - 1; j > i; j--) {\n                if (nums[j] > nums[i]) {\n                    [nums[i], nums[j]] = [nums[j], nums[i]];\n                    break;\n                }\n            }\n            const head = nums.splice(0, i + 1);\n            nums.sort((a, b) => a - b);\n            for (let i = head.length - 1; i >= 0 ; i--) {\n                nums.unshift(head[i]);\n            }\n            break;\n        }\n    }\n    if (!flag) nums.reverse();\n};\n\n\n\n# å¯¹è¾å¥çå­ç¬¦ä¸²ï¼å»é¤å¶ä¸­çå­ç¬¦\'b\'ä»¥åè¿ç»­åºç°ç\'a\'å\'c\'\n\n\'aacbd\' => \'ad\'\n\'aabcd\' => \'ad\'\n\'aaabbccc\' => \'\'\n\n\n * æ­£åè§£å³\n\nfunction fn(str){\n    let res= str.replace(/b+/g,\'\')\n    while(res.match(/(ac)+/)){\n        res = res.replace(/ac/,\'\')\n    }\n    return res\n}\n\n\n\n# å¤è§æ°å\n\n\n# æ­£åè¡¨è¾¾å¼ï¼\\1æè·\n\n> \\1è¡¨ç¤ºå¹éç¬¬ä¸ä¸ªæ¬å·éçåå®¹\n> \n> å©ç¨è¿ä¸ª\\1ï¼å¯ä»¥è·åä¸ä¸ªé¿å­ç¬¦ä¸²ä¸­çæé¿ç¸åå­ä¸²\n\n\t//å¯»æ¾è¿ç»­ç¸åçæé¿å­ä¸²\n\tvar str = "ABCCCDDDDDEFFFFFFFFFFFFGGGGHHIIII";\n\tvar reg = /(\\w)\\1+/g;\n\tvar arr = str.match(reg);\n\tconsole.log(arr) // ["CCC", "DDDDD", "FFFFFFFFFFFF", "GGGG", "HH", "IIII"]\n\n\n\n# å¤è§æ°å\n\n1.     1\n2.     11\n3.     21\n4.     1211\n5.     111221\n\nç»å®ä¸ä¸ªæ­£æ´æ° nï¼1 â¤ n â¤ 30ï¼ï¼è¾åºå¤è§æ°åçç¬¬ n é¡¹ã\n\n\n * å©ç¨æ­£åè¡¨è¾¾å¼\n\nvar countAndSay = function(n) {\n    let pre = \'1\'\n    for(let i=1;i<n;i++){\n        pre = pre.replace(/(\\d)\\1*/g, item =>`${item.length}${item[0]}`)\n    }\n    return pre\n};\n\n//  \\1*ä»£è¡¨åºç°ä»»ææ¬¡\n// ${}ä»£è¡¨å­ç¬¦ä¸²æ¼æ¥\n// replaceç¬¬äºä¸ªåæ°ä¸ºå½æ°ä¾å¦\n\nvar str1 = \'abbcbca\'\nstr1.replace(/(b)/g,item => item+\'*\')  //ab*b*cb*ca\n\n\n\n# ç®æ³ï¼æé¿å¬å±åç¼4\n\n * leetcode14\n\nç¼åä¸ä¸ªå½æ°æ¥æ¥æ¾å­ç¬¦ä¸²æ°ç»ä¸­çæé¿å¬å±åç¼ã\n\nå¦æä¸å­å¨å¬å±åç¼ï¼è¿åç©ºå­ç¬¦ä¸² ""ã\n\nç¤ºä¾ 1:\n\nè¾å¥: ["flower","flow","flight"]\nè¾åº: "fl"\n\nè¾å¥: ["dog","racecar","car"]\nè¾åº: ""\nè§£é: è¾å¥ä¸å­å¨å¬å±åç¼ã\n\n\n * å½å­ç¬¦ä¸²æ°ç»é¿åº¦ä¸º 0 æ¶åå¬å±åç¼ä¸ºç©ºï¼ç´æ¥è¿å\n * ä»¤æé¿å¬å±åç¼ ans çå¼ä¸ºç¬¬ä¸ä¸ªå­ç¬¦ä¸²ï¼è¿è¡åå§å\n * éååé¢çå­ç¬¦ä¸²ï¼ä¾æ¬¡å°å¶ä¸ ans è¿è¡æ¯è¾ï¼ä¸¤ä¸¤æ¾åºå¬å±åç¼ï¼æç»ç»æå³ä¸ºæé¿å¬å±åç¼\n * å¦ææ¥æ¾è¿ç¨ä¸­åºç°äº ans ä¸ºç©ºçæåµï¼åå¬å±åç¼ä¸å­å¨ç´æ¥è¿å\n * æ¶é´å¤æåº¦ï¼O(s)ï¼s ä¸ºææå­ç¬¦ä¸²çé¿åº¦ä¹å\n\nvar longestCommonPrefix = function(strs) {\n    if (!strs.length) return ""\n    let ans = strs[0]\n    for (let i = 1; i < strs.length; i++) {\n        for (let j = 0; j < ans.length; j++) {\n            if (ans[j] !== strs[i][j]) {\n                ans = ans.slice(0, j)\n            }\n        }\n    }\n    return ans\n};\n\n\n\n# å­ç¬¦ä¸²çæå¤§ééå¤å­ä¸²é¿åº¦\n\njsä¸­ï¼å ä¸ºArrayç»§æ¿Objectï¼é£ä¹Arrayä¹æ¯å¯ä»¥ç¨å­ç¬¦ä¸²ä½ä¸ºæ°ç»ä¸æ ç ï¼c++å¯ä»¥ï¼åä¸ä¸ªåèçC++è§£æ³\n\nint lengthOfLongestSubstring(string s) {\n        vector dict(256, -1);\n        int maxLen = 0, start = -1;\n        for (int i = 0; i != s.length(); i++) {\n            if (dict[s[i]] > start)//å½åå­ç¬¦âæ¾ç»âæ¯å¦åºç°å¨æ­¤å­ä¸²ä¸­ï¼\n                start = dict[s[i]];//âæ¾ç»âåºç°é£æ¬¡ä½ä¸ºæ°èµ·ç¹\n            dict[s[i]] = i;//æ å¿è¯¥å­ç¬¦åºç°çä½ç½®\n            maxLen = max(maxLen, i - start);//æ¯æ¬¡é½è¦æ´æ°æå¤§é¿åº¦\n        }\n        return maxLen;\n}\n\n\nä¾å¦ï¼a,b,c,d,a,b,a è¾åº4\n\næ éå¤ï¼a,b,c,d\n\naéå¤äºï¼æä¸ä¸ä¸ªaä¹åçæ¸é¤ï¼ç°å¨b,c,d,a\n\nbéå¤äºï¼æä¸ä¸ä¸ªbä¹åçæ¸é¤ï¼ç°å¨c,d,a,b\n\naéå¤äºï¼ç°å¨b,a\n\n\n# éå¤çå­å­ç¬¦ä¸²\n\n * leetcode459\n\nvar repeatedSubstringPattern = function(s) {\n    if (s.length === 1) return false\n    for (let i = 0; i < s.length / 2; i++) {\n        const substr = s.slice(0, i + 1)\n        const count = s.length / substr.length\n        if (count === Math.floor(count)) {\n            let str = ""\n            for (let i = 0; i < count; i++) {\n                str += substr\n            }\n            if (str === s) return true\n        }\n    }\n    return false\n};\n\n\n * ç®åè§£æ³\n\nvar repeatedSubstringPattern = function(s) {\n    let str = s + s\n    return str.slice(1, str.length - 1).includes(s)\n};\n\n\n\n# åæ°åè§£\n\nlet str = "x=1&&y=2&&y=3&&z=4&&y=4"\n\n//è¾åº\n// obj = {\n//     x:1,\n//     y:[2,3],\n//     z:4\n// }\n\nlet tmp = str.split("&&")\nlet left = []\nlet right = []\nfor(let i in tmp){\n    left.push(tmp[i].split("=")[0])\n    right.push(tmp[i].split("=")[1])\n}\nconsole.log(left,right)\nlet res = new Object()\nfor(let i in left){\n    if(res.hasOwnProperty(left[i])){//å¦æåå«éå¤åç´ \n        if(Array.isArray(res[left[i]])){//å¦æå·²ç»æ¯æ°ç»å°±ç´æ¥æ·»å \n            res[left[i]].push(right[i])\n        }else{//å¦æä¸æ¯æ°ç»åæé ææ°ç»\n            let tmp = new Array(res[left[i]])\n            tmp.push(right[i])   //pushçè¿åå¼ä¸ºpushçå¼\n            res[left[i]] = tmp\n        }    \n    }else{\n        res[left[i]] = right[i]\n    }   \n}\n\n\n\n# å­ç¬¦ä¸²è§£ç \n\n * leetcode394\n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼s = "3[a]2[bc]"\nè¾åºï¼"aaabcbc"\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼s = "3[a2[c]]"\nè¾åºï¼"accaccacc"\n\nç¤ºä¾ 3ï¼\nè¾å¥ï¼s = "2[abc]3[cd]ef"\nè¾åºï¼"abcabccdcdcdef"\n\nç¤ºä¾ 4ï¼\nè¾å¥ï¼s = "abc3[cd]xyz"\nè¾åºï¼"abccdcdcdxyz"\n\n\n * éç¨æ­£åè¡¨è¾¾å¼å°3[a] çæ ¼å¼è½¬æ¢æaaaå³å¯\n * å¹éå°3[a]ä¹åï¼æ¾å°[çä½ç½®ï¼åé¢ä¸ºæ°å­ï¼åé¢ä¸ºå­ç¬¦ï¼ææ¬¡æ°æ¼æ¥\n\nvar decodeString = function(s) {\n    const reg = /\\d+\\[[a-z]+\\]/g\n    while (reg.test(s)) {\n        s = s.replace(reg, item => {\n            let pos  = item.indexOf(\'[\') ,number = item.slice(0, pos)\n            let str = item.slice(pos + 1, item.length - 1), res = \'\'\n            for (let i = 0; i < number; i++) res += str\n            return res\n        })\n    }\n    return s\n};\n\n\n\n# å­ç¬¦ä¸²ç¸å \n\n * leetcode415\n\nvar addStrings = function(num1, num2) {\n   \tlet i = num1.length - 1,\n        j = num2.length - 1,\n        carry = 0,\n        res = ""\n    while (i >= 0 || j >= 0 || carry > 0) {\n        let c1 = num1[i] ? num1[i] - \'0\' : 0,\n            c2 = num2[j] ? num2[j] - \'0\' : 0\n            sum = (c1 + c2 + carry) % 10\n        carry = Math.floor((c1 + c2 + carry) / 10)\n        res = sum + res\n        i--\n        j--\n    }\n    return res\n};\n\n\n\n# æ¯è¾çæ¬å·\n\n * leetcode165\n\nvar compareVersion = function(version1, version2) {\n    let arr1 = version1.split(".")\n    let arr2 = version2.split(".")\n    let len = Math.max(arr1.length, arr2.length)\n    for (let i = 0; i < len; i++) {\n        let data1 = ~~arr1[i]\n        let data2 = ~~arr2[i]\n        if (data1 < data2) {\n            return -1\n        } else if (data1 > data2) {\n            return 1\n        }\n    }\n    return 0\n};\n\n~~undefined // 0\n~~001 === ~~ 01 //true\n\n\nJSæä½éè¿ç®ç¬¦(~)ååé(~~)çä½¿ç¨\n\n\n# zå­å½¢åæ¢\n\n * leetcode6\n\n * é¢è§£\n\nvar convert = function(s, numRows) {\n    if (numRows === 1) return s\n    const n = 2 * numRows - 2\n    const arr = new Array(n).fill("")\n    for (let i = 0; i < s.length; i++) {\n        let x = i % n\n        arr[x < numRows ? x : n - x] += s[i]\n    }\n    return arr.join("")\n};\n',normalizedContent:'# å­ç¬¦ä¸²æä½\n\n * ä¸ä¸ä¸ªæå\n * å¯¹è¾å¥çå­ç¬¦ä¸²ï¼å»é¤å¶ä¸­çå­ç¬¦\'b\'ä»¥åè¿ç»­åºç°ç\'a\'å\'c\'\n * å¤è§æ°å\n * æé¿å¬å±åç¼\n * å­ç¬¦ä¸²çæå¤§ééå¤å­ä¸²é¿åº¦\n * éå¤çå­å­ç¬¦ä¸²\n * åæ°åè§£\n * å­ç¬¦ä¸²è§£ç \n * å­ç¬¦ä¸²ç¸å \n * æ¯è¾çæ¬å·\n * zå­ååæ¢\n\n\n# ä¸ä¸ä¸ªæå\n\n * é¢ç®æ¥æºï¼leetcode31\n\n * åèé¢è§£ï¼æè·¯ææ¸æ°çé¢è§£\n\nå®ç°è·åä¸ä¸ä¸ªæåçå½æ°ï¼ç®æ³éè¦å°ç»å®æ°å­åºåéæ°æåæå­å¸åºä¸­ä¸ä¸ä¸ªæ´å¤§çæåã\n\nå¦æä¸å­å¨ä¸ä¸ä¸ªæ´å¤§çæåï¼åå°æ°å­éæ°æåææå°çæåï¼å³ååºæåï¼ã\n\nå¿é¡»åå°ä¿®æ¹ï¼åªåè®¸ä½¿ç¨é¢å¤å¸¸æ°ç©ºé´ã\n\nä»¥ä¸æ¯ä¸äºä¾å­ï¼è¾å¥ä½äºå·¦ä¾§åï¼å¶ç¸åºè¾åºä½äºå³ä¾§åã\n1,2,3 â 1,3,2\n3,2,1 â 1,2,3\n1,1,5 â 1,5,1\n\n\n * åæï¼å°±ç¸å½äºæ¾ä¸ä¸ªæ¯å½åæ°å¤§å¹¶ä¸æå°çä¸ä¸ªï¼æ¯å¦æ¯123å¤§çæ132,213,231,321,312ï¼ä½æ¯æå°çæ¯132\n * æè·¯ï¼\n   * ä»åååéåï¼æ¾å°nums[i] < nums[i+1]çæ°ï¼è®°å½ä¸iéè¦äº¤æ¢\n   * äº¤æ¢çå¯¹è±¡åºè¯¥æ¯æ¯ä»å¤§ä½æ¯æå°çä¸ä¸ªï¼åªéä»åååéåæ¾å³å¯ï¼å ä¸ºiåé¢å·²ç»æ¯éåº\n   * äº¤æ¢åæä¹±äºåºåï¼åºè¯¥å° i åé¢çåºåéæ°æåº\n   * æ³¨æé¢ç®è¦æ±ï¼åªè½å¨åæ°ç»ä¸æ¹ï¼ç¨ nums = nums.concatçä¸äºæä½ä¼æé®é¢ï¼æå¥½è¿æ¯ç¨splice,push,unshiftè¿äºä¿®æ¹åæ°ç»çæ¹æ³\n\n// 1234654\nvar nextpermutation = function(nums) {\n    let flag = false;\n    for (let i = nums.length - 2; i >= 0; i--) {\n        if (nums[i] < nums[i + 1]) {\n            flag = true;\n            for (let j = nums.length - 1; j > i; j--) {\n                if (nums[j] > nums[i]) {\n                    [nums[i], nums[j]] = [nums[j], nums[i]];\n                    break;\n                }\n            }\n            const head = nums.splice(0, i + 1);\n            nums.sort((a, b) => a - b);\n            for (let i = head.length - 1; i >= 0 ; i--) {\n                nums.unshift(head[i]);\n            }\n            break;\n        }\n    }\n    if (!flag) nums.reverse();\n};\n\n\n\n# å¯¹è¾å¥çå­ç¬¦ä¸²ï¼å»é¤å¶ä¸­çå­ç¬¦\'b\'ä»¥åè¿ç»­åºç°ç\'a\'å\'c\'\n\n\'aacbd\' => \'ad\'\n\'aabcd\' => \'ad\'\n\'aaabbccc\' => \'\'\n\n\n * æ­£åè§£å³\n\nfunction fn(str){\n    let res= str.replace(/b+/g,\'\')\n    while(res.match(/(ac)+/)){\n        res = res.replace(/ac/,\'\')\n    }\n    return res\n}\n\n\n\n# å¤è§æ°å\n\n\n# æ­£åè¡¨è¾¾å¼ï¼\\1æè·\n\n> \\1è¡¨ç¤ºå¹éç¬¬ä¸ä¸ªæ¬å·éçåå®¹\n> \n> å©ç¨è¿ä¸ª\\1ï¼å¯ä»¥è·åä¸ä¸ªé¿å­ç¬¦ä¸²ä¸­çæé¿ç¸åå­ä¸²\n\n\t//å¯»æ¾è¿ç»­ç¸åçæé¿å­ä¸²\n\tvar str = "abcccdddddeffffffffffffgggghhiiii";\n\tvar reg = /(\\w)\\1+/g;\n\tvar arr = str.match(reg);\n\tconsole.log(arr) // ["ccc", "ddddd", "ffffffffffff", "gggg", "hh", "iiii"]\n\n\n\n# å¤è§æ°å\n\n1.     1\n2.     11\n3.     21\n4.     1211\n5.     111221\n\nç»å®ä¸ä¸ªæ­£æ´æ° nï¼1 â¤ n â¤ 30ï¼ï¼è¾åºå¤è§æ°åçç¬¬ n é¡¹ã\n\n\n * å©ç¨æ­£åè¡¨è¾¾å¼\n\nvar countandsay = function(n) {\n    let pre = \'1\'\n    for(let i=1;i<n;i++){\n        pre = pre.replace(/(\\d)\\1*/g, item =>`${item.length}${item[0]}`)\n    }\n    return pre\n};\n\n//  \\1*ä»£è¡¨åºç°ä»»ææ¬¡\n// ${}ä»£è¡¨å­ç¬¦ä¸²æ¼æ¥\n// replaceç¬¬äºä¸ªåæ°ä¸ºå½æ°ä¾å¦\n\nvar str1 = \'abbcbca\'\nstr1.replace(/(b)/g,item => item+\'*\')  //ab*b*cb*ca\n\n\n\n# ç®æ³ï¼æé¿å¬å±åç¼4\n\n * leetcode14\n\nç¼åä¸ä¸ªå½æ°æ¥æ¥æ¾å­ç¬¦ä¸²æ°ç»ä¸­çæé¿å¬å±åç¼ã\n\nå¦æä¸å­å¨å¬å±åç¼ï¼è¿åç©ºå­ç¬¦ä¸² ""ã\n\nç¤ºä¾ 1:\n\nè¾å¥: ["flower","flow","flight"]\nè¾åº: "fl"\n\nè¾å¥: ["dog","racecar","car"]\nè¾åº: ""\nè§£é: è¾å¥ä¸å­å¨å¬å±åç¼ã\n\n\n * å½å­ç¬¦ä¸²æ°ç»é¿åº¦ä¸º 0 æ¶åå¬å±åç¼ä¸ºç©ºï¼ç´æ¥è¿å\n * ä»¤æé¿å¬å±åç¼ ans çå¼ä¸ºç¬¬ä¸ä¸ªå­ç¬¦ä¸²ï¼è¿è¡åå§å\n * éååé¢çå­ç¬¦ä¸²ï¼ä¾æ¬¡å°å¶ä¸ ans è¿è¡æ¯è¾ï¼ä¸¤ä¸¤æ¾åºå¬å±åç¼ï¼æç»ç»æå³ä¸ºæé¿å¬å±åç¼\n * å¦ææ¥æ¾è¿ç¨ä¸­åºç°äº ans ä¸ºç©ºçæåµï¼åå¬å±åç¼ä¸å­å¨ç´æ¥è¿å\n * æ¶é´å¤æåº¦ï¼o(s)ï¼s ä¸ºææå­ç¬¦ä¸²çé¿åº¦ä¹å\n\nvar longestcommonprefix = function(strs) {\n    if (!strs.length) return ""\n    let ans = strs[0]\n    for (let i = 1; i < strs.length; i++) {\n        for (let j = 0; j < ans.length; j++) {\n            if (ans[j] !== strs[i][j]) {\n                ans = ans.slice(0, j)\n            }\n        }\n    }\n    return ans\n};\n\n\n\n# å­ç¬¦ä¸²çæå¤§ééå¤å­ä¸²é¿åº¦\n\njsä¸­ï¼å ä¸ºarrayç»§æ¿objectï¼é£ä¹arrayä¹æ¯å¯ä»¥ç¨å­ç¬¦ä¸²ä½ä¸ºæ°ç»ä¸æ ç ï¼c++å¯ä»¥ï¼åä¸ä¸ªåèçc++è§£æ³\n\nint lengthoflongestsubstring(string s) {\n        vector dict(256, -1);\n        int maxlen = 0, start = -1;\n        for (int i = 0; i != s.length(); i++) {\n            if (dict[s[i]] > start)//å½åå­ç¬¦âæ¾ç»âæ¯å¦åºç°å¨æ­¤å­ä¸²ä¸­ï¼\n                start = dict[s[i]];//âæ¾ç»âåºç°é£æ¬¡ä½ä¸ºæ°èµ·ç¹\n            dict[s[i]] = i;//æ å¿è¯¥å­ç¬¦åºç°çä½ç½®\n            maxlen = max(maxlen, i - start);//æ¯æ¬¡é½è¦æ´æ°æå¤§é¿åº¦\n        }\n        return maxlen;\n}\n\n\nä¾å¦ï¼a,b,c,d,a,b,a è¾åº4\n\næ éå¤ï¼a,b,c,d\n\naéå¤äºï¼æä¸ä¸ä¸ªaä¹åçæ¸é¤ï¼ç°å¨b,c,d,a\n\nbéå¤äºï¼æä¸ä¸ä¸ªbä¹åçæ¸é¤ï¼ç°å¨c,d,a,b\n\naéå¤äºï¼ç°å¨b,a\n\n\n# éå¤çå­å­ç¬¦ä¸²\n\n * leetcode459\n\nvar repeatedsubstringpattern = function(s) {\n    if (s.length === 1) return false\n    for (let i = 0; i < s.length / 2; i++) {\n        const substr = s.slice(0, i + 1)\n        const count = s.length / substr.length\n        if (count === math.floor(count)) {\n            let str = ""\n            for (let i = 0; i < count; i++) {\n                str += substr\n            }\n            if (str === s) return true\n        }\n    }\n    return false\n};\n\n\n * ç®åè§£æ³\n\nvar repeatedsubstringpattern = function(s) {\n    let str = s + s\n    return str.slice(1, str.length - 1).includes(s)\n};\n\n\n\n# åæ°åè§£\n\nlet str = "x=1&&y=2&&y=3&&z=4&&y=4"\n\n//è¾åº\n// obj = {\n//     x:1,\n//     y:[2,3],\n//     z:4\n// }\n\nlet tmp = str.split("&&")\nlet left = []\nlet right = []\nfor(let i in tmp){\n    left.push(tmp[i].split("=")[0])\n    right.push(tmp[i].split("=")[1])\n}\nconsole.log(left,right)\nlet res = new object()\nfor(let i in left){\n    if(res.hasownproperty(left[i])){//å¦æåå«éå¤åç´ \n        if(array.isarray(res[left[i]])){//å¦æå·²ç»æ¯æ°ç»å°±ç´æ¥æ·»å \n            res[left[i]].push(right[i])\n        }else{//å¦æä¸æ¯æ°ç»åæé ææ°ç»\n            let tmp = new array(res[left[i]])\n            tmp.push(right[i])   //pushçè¿åå¼ä¸ºpushçå¼\n            res[left[i]] = tmp\n        }    \n    }else{\n        res[left[i]] = right[i]\n    }   \n}\n\n\n\n# å­ç¬¦ä¸²è§£ç \n\n * leetcode394\n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼s = "3[a]2[bc]"\nè¾åºï¼"aaabcbc"\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼s = "3[a2[c]]"\nè¾åºï¼"accaccacc"\n\nç¤ºä¾ 3ï¼\nè¾å¥ï¼s = "2[abc]3[cd]ef"\nè¾åºï¼"abcabccdcdcdef"\n\nç¤ºä¾ 4ï¼\nè¾å¥ï¼s = "abc3[cd]xyz"\nè¾åºï¼"abccdcdcdxyz"\n\n\n * éç¨æ­£åè¡¨è¾¾å¼å°3[a] çæ ¼å¼è½¬æ¢æaaaå³å¯\n * å¹éå°3[a]ä¹åï¼æ¾å°[çä½ç½®ï¼åé¢ä¸ºæ°å­ï¼åé¢ä¸ºå­ç¬¦ï¼ææ¬¡æ°æ¼æ¥\n\nvar decodestring = function(s) {\n    const reg = /\\d+\\[[a-z]+\\]/g\n    while (reg.test(s)) {\n        s = s.replace(reg, item => {\n            let pos  = item.indexof(\'[\') ,number = item.slice(0, pos)\n            let str = item.slice(pos + 1, item.length - 1), res = \'\'\n            for (let i = 0; i < number; i++) res += str\n            return res\n        })\n    }\n    return s\n};\n\n\n\n# å­ç¬¦ä¸²ç¸å \n\n * leetcode415\n\nvar addstrings = function(num1, num2) {\n   \tlet i = num1.length - 1,\n        j = num2.length - 1,\n        carry = 0,\n        res = ""\n    while (i >= 0 || j >= 0 || carry > 0) {\n        let c1 = num1[i] ? num1[i] - \'0\' : 0,\n            c2 = num2[j] ? num2[j] - \'0\' : 0\n            sum = (c1 + c2 + carry) % 10\n        carry = math.floor((c1 + c2 + carry) / 10)\n        res = sum + res\n        i--\n        j--\n    }\n    return res\n};\n\n\n\n# æ¯è¾çæ¬å·\n\n * leetcode165\n\nvar compareversion = function(version1, version2) {\n    let arr1 = version1.split(".")\n    let arr2 = version2.split(".")\n    let len = math.max(arr1.length, arr2.length)\n    for (let i = 0; i < len; i++) {\n        let data1 = ~~arr1[i]\n        let data2 = ~~arr2[i]\n        if (data1 < data2) {\n            return -1\n        } else if (data1 > data2) {\n            return 1\n        }\n    }\n    return 0\n};\n\n~~undefined // 0\n~~001 === ~~ 01 //true\n\n\njsæä½éè¿ç®ç¬¦(~)ååé(~~)çä½¿ç¨\n\n\n# zå­å½¢åæ¢\n\n * leetcode6\n\n * é¢è§£\n\nvar convert = function(s, numrows) {\n    if (numrows === 1) return s\n    const n = 2 * numrows - 2\n    const arr = new array(n).fill("")\n    for (let i = 0; i < s.length; i++) {\n        let x = i % n\n        arr[x < numrows ? x : n - x] += s[i]\n    }\n    return arr.join("")\n};\n',charsets:{cjk:!0}},{title:"åºæ¯é¢",frontmatter:{title:"åºæ¯é¢",date:"2020-10-29T09:52:01.000Z",categories:"ç®æ³"},regularPath:"/algorithm/scene.html",relativePath:"algorithm/scene.md",key:"v-efe7e982",path:"/algorithm/scene.html",headers:[{level:2,title:"LRUç¼å­æºå¶",slug:"lruç¼å­æºå¶",normalizedTitle:"lruç¼å­æºå¶",charIndex:10}],lastUpdated:"2/9/2023, 7:49:33 PM",lastUpdatedTimestamp:1675943373e3,headersStr:"LRUç¼å­æºå¶",content:"# åºæ¯é¢\n\n * LRUç¼å­æºå¶\n\n\n# LRUç¼å­æºå¶\n\n * leetcode146\n\n * é¢è§£ï¼å©ç¨Mapå¯¹äºsetçæ°å¼ä¸ºé¡ºåºæå¥çåçå®ç°LRU\n\n// 1. æ°æ°æ®æå¥å°é¾è¡¨å¤´é¨ï¼\n// 2. æ¯å½ç¼å­å½ä¸­ï¼å³ç¼å­æ°æ®è¢«è®¿é®ï¼ï¼åå°æ°æ®ç§»å°é¾è¡¨å¤´é¨ï¼\n// 3. å½é¾è¡¨æ»¡çæ¶åï¼å°é¾è¡¨å°¾é¨çæ°æ®ä¸¢å¼ã\nclass LRUCache {\n    constructor(capacity) {\n        this.capacity = capacity\n        this.map = new Map()\n    }\n    get(key) {\n        let val = this.map.get(key)\n        if (val === undefined) return -1\n        this.map.delete(key)\n        this.map.set(key, val)\n        return val\n    }\n    put(key, val) {\n        if (this.map.has(key)) this.map.delete(key)\n        this.map.set(key, val)\n        if (this.map.size > this.capacity) {\n            this.map.delete(this.map.entries().next().value[0])\n        }\n    }\n}\n\n// å³äº map\nconst map = new Map([\n    [1, 'a'],\n    [2, 'b'],\n    [3, 'c']\n])\nmap.entries() // MapIterator {1 => \"a\", 2 => \"b\", 3 => \"c\"}\nmap.entries().next() // {value: Array(2), done: false}\nmap.entries().next().value[0] // 1\n",normalizedContent:"# åºæ¯é¢\n\n * lruç¼å­æºå¶\n\n\n# lruç¼å­æºå¶\n\n * leetcode146\n\n * é¢è§£ï¼å©ç¨mapå¯¹äºsetçæ°å¼ä¸ºé¡ºåºæå¥çåçå®ç°lru\n\n// 1. æ°æ°æ®æå¥å°é¾è¡¨å¤´é¨ï¼\n// 2. æ¯å½ç¼å­å½ä¸­ï¼å³ç¼å­æ°æ®è¢«è®¿é®ï¼ï¼åå°æ°æ®ç§»å°é¾è¡¨å¤´é¨ï¼\n// 3. å½é¾è¡¨æ»¡çæ¶åï¼å°é¾è¡¨å°¾é¨çæ°æ®ä¸¢å¼ã\nclass lrucache {\n    constructor(capacity) {\n        this.capacity = capacity\n        this.map = new map()\n    }\n    get(key) {\n        let val = this.map.get(key)\n        if (val === undefined) return -1\n        this.map.delete(key)\n        this.map.set(key, val)\n        return val\n    }\n    put(key, val) {\n        if (this.map.has(key)) this.map.delete(key)\n        this.map.set(key, val)\n        if (this.map.size > this.capacity) {\n            this.map.delete(this.map.entries().next().value[0])\n        }\n    }\n}\n\n// å³äº map\nconst map = new map([\n    [1, 'a'],\n    [2, 'b'],\n    [3, 'c']\n])\nmap.entries() // mapiterator {1 => \"a\", 2 => \"b\", 3 => \"c\"}\nmap.entries().next() // {value: array(2), done: false}\nmap.entries().next().value[0] // 1\n",charsets:{cjk:!0}},{title:"åæº¯ç®æ³",frontmatter:{},regularPath:"/algorithm/trace.html",relativePath:"algorithm/trace.md",key:"v-da398842",path:"/algorithm/trace.html",headers:[{level:2,title:"åæº¯ç®æ³",slug:"åæº¯ç®æ³-2",normalizedTitle:"åæº¯ç®æ³",charIndex:2},{level:2,title:"å¨æå",slug:"å¨æå",normalizedTitle:"å¨æå",charIndex:11},{level:2,title:"æ¬å·çæ",slug:"æ¬å·çæ",normalizedTitle:"æ¬å·çæ",charIndex:18},{level:2,title:"çµè¯å·ç çæ°å­ç»å",slug:"çµè¯å·ç çæ°å­ç»å",normalizedTitle:"çµè¯å·ç çæ°å­ç»å",charIndex:26},{level:2,title:"å­é",slug:"å­é",normalizedTitle:"å­é",charIndex:39},{level:2,title:"å­éII",slug:"å­éii",normalizedTitle:"å­éii",charIndex:3260},{level:2,title:"äºç»´æ°ç»å¨æå",slug:"äºç»´æ°ç»å¨æå",normalizedTitle:"äºç»´æ°ç»å¨æå",charIndex:45},{level:2,title:"ç»åæ»å",slug:"ç»åæ»å",normalizedTitle:"ç»åæ»å",charIndex:56},{level:2,title:"ç»åæ»åII",slug:"ç»åæ»åii",normalizedTitle:"ç»åæ»åii",charIndex:64},{level:2,title:"ä»æ°ç»ä¸­æ¾nä¸ªæ°æ±å",slug:"ä»æ°ç»ä¸­æ¾nä¸ªæ°æ±å",normalizedTitle:"ä»æ°ç»ä¸­æ¾nä¸ªæ°æ±å",charIndex:5973},{level:2,title:"åè¯æç´¢",slug:"åè¯æç´¢",normalizedTitle:"åè¯æç´¢",charIndex:74},{level:2,title:"ä¸è§å½¢çæå°è·¯å¾å",slug:"ä¸è§å½¢çæå°è·¯å¾å",normalizedTitle:"ä¸è§å½¢çæå°è·¯å¾å",charIndex:82},{level:2,title:"è·¯å¾æ»å",slug:"è·¯å¾æ»å",normalizedTitle:"è·¯å¾æ»å",charIndex:95},{level:2,title:"è·¯å¾æ»åII",slug:"è·¯å¾æ»åii",normalizedTitle:"è·¯å¾æ»åii",charIndex:103},{level:2,title:"æ ¹èç¹å°å¶èç¹æ°å­ä¹å",slug:"æ ¹èç¹å°å¶èç¹æ°å­ä¹å",normalizedTitle:"æ ¹èç¹å°å¶èç¹æ°å­ä¹å",charIndex:113},{level:2,title:"åå¼",slug:"åå¼",normalizedTitle:"åå¼",charIndex:10840}],lastUpdated:"6/25/2025, 8:09:31 PM",lastUpdatedTimestamp:1750853371e3,headersStr:"åæº¯ç®æ³ å¨æå æ¬å·çæ çµè¯å·ç çæ°å­ç»å å­é å­éII äºç»´æ°ç»å¨æå ç»åæ»å ç»åæ»åII ä»æ°ç»ä¸­æ¾nä¸ªæ°æ±å åè¯æç´¢ ä¸è§å½¢çæå°è·¯å¾å è·¯å¾æ»å è·¯å¾æ»åII æ ¹èç¹å°å¶èç¹æ°å­ä¹å åå¼",content:"# åæº¯ç®æ³\n\n * å¨æå\n * æ¬å·çæ\n * çµè¯å·ç çæ°å­ç»å\n * å­é\n * äºç»´æ°ç»å¨æå\n * ç»åæ»å\n * ç»åæ»åII\n * åè¯æç´¢\n * ä¸è§å½¢çæå°è·¯å¾å\n * è·¯å¾æ»å\n * è·¯å¾æ»åII\n * æ ¹èç¹å°å¶èç¹æ°å­ä¹å\n\n\n# åæº¯ç®æ³\n\nè§£å³ä¸ä¸ªåæº¯é®é¢ï¼å®éä¸å°±æ¯ä¸ä¸ªå³ç­æ çéåè¿ç¨ãåºæ¬åçå°±æ¯éå½ï¼ç¨ç½è¯è§£éå°±æ¯ï¼**ä»ä¸æ¡è·¯å¾åèµ°ï¼è½è¿åè¿ï¼ä¸è½è¿åéåæ¥ï¼æ¢ä¸æ¡è·¯åè¯ã**åªéè¦æè 3 ä¸ªé®é¢ï¼\n\n1ãè·¯å¾ï¼ä¹å°±æ¯å·²ç»ååºçéæ©ã\n\n2ãéæ©åè¡¨ï¼ä¹å°±æ¯ä½ å½åå¯ä»¥åçéæ©ã\n\n3ãç»ææ¡ä»¶ï¼ä¹å°±æ¯å°è¾¾å³ç­æ åºå±ï¼æ æ³ååéæ©çæ¡ä»¶ã\n\nä»£ç æ¹é¢ï¼åæº¯ç®æ³çæ¡æ¶ï¼\n\nresult = []\ndef backtrack(è·¯å¾, éæ©åè¡¨):\n    if æ»¡è¶³ç»ææ¡ä»¶:\n        result.add(è·¯å¾)\n        return\n\n    for éæ© in éæ©åè¡¨:\n        åéæ©\n        backtrack(è·¯å¾, éæ©åè¡¨)\n        æ¤ééæ©\n\n\nå¶æ ¸å¿å°±æ¯ for å¾ªç¯éé¢çéå½ï¼å¨éå½è°ç¨ä¹åãåéæ©ãï¼å¨éå½è°ç¨ä¹åãæ¤ééæ©ã\n\n> éå½ï¼åæº¯ï¼DFSçåºå«\n> \n> éå½å°±æ¯å¨å½æ°ä¸­è°ç¨å½æ°æ¬èº«æ¥è§£å³é®é¢\n> \n> åæº¯å°±æ¯éè¿ä¸åçå°è¯æ¥çæé®é¢çè§£ï¼æç¹ç±»ä¼¼äºç©·ä¸¾ï¼ä½æ¯åç©·ä¸¾ä¸åçæ¯åæº¯ä¼âåªæâ\n> \n> åæº¯æç´¢æ¯æ·±åº¦ä¼åæç´¢ï¼DFSï¼çä¸ç§ï¼åæº¯åDFSï¼å¶ä¸»è¦çåºå«æ¯ï¼åæº¯æ³å¨æ±è§£è¿ç¨ä¸­ä¸ä¿çå®æ´çæ ç»æï¼èæ·±åº¦ä¼åæç´¢åè®°ä¸å®æ´çæç´¢æ ã\n\n\n# å¨æå\n\n * Leetcode46\n\n ç»å®ä¸ä¸ª æ²¡æéå¤ æ°å­çåºåï¼è¿åå¶ææå¯è½çå¨æåã\n \n ç¤ºä¾:\n è¾å¥: [1,2,3]\n è¾åº:\n [\n [1,2,3],\n [1,3,2],\n [2,1,3],\n [2,3,1],\n [3,1,2],\n [3,2,1]\n]\n\n\næä»¬è¦å¨è¿ä¸ªåå«è§£çç©ºé´æ ä¸ï¼ç¨ éå½çæ¹å¼æç´¢åºææçè§£ã\n\nvar permute = function(nums) {\n    const res = [];\n    const fn = (path) => {\n        if (path.length === nums.length) {\n            // slice çåå æ¯é²æ­¢ push å° res ä¸­çç»ææ¯å¼ç¨ç±»åï¼åé¢ path æ¹åæ¶ä¼å½±å res\n            res.push(path.slice());\n        }\n        for (const item of nums) {\n            if (path.includes(item)) {\n                continue;\n            }\n            path.push(item); // æ¯å¦ç®å path æ¯ [1]ï¼push(2), åæ [1, 2]\n            fn(path); // éå½å°å¤´äºï¼[1,2,3] å°± return \n            path.pop(); // [1,2] pop åä¸º [1]ï¼ ç»§ç»­ä¸ä¸è½® for å¾ªç¯, push(3)\n        }\n    }\n    fn([]);\n    return res;\n};\n\n\n\n# æ¬å·çæ\n\n * leetcode22\n * é¢è§£\n\næ°å­ n ä»£è¡¨çææ¬å·çå¯¹æ°ï¼è¯·ä½ è®¾è®¡ä¸ä¸ªå½æ°ï¼ç¨äºè½å¤çæææå¯è½çå¹¶ä¸ ææç æ¬å·ç»åã\n\nç¤ºä¾ï¼\nè¾å¥ï¼n = 3\nè¾åºï¼[\n       \"((()))\",\n       \"(()())\",\n       \"(())()\",\n       \"()(())\",\n       \"()()()\"\n     ]\n\n\nvar generateParenthesis = function(n) {\n    const res = [];\n    const backtrack = (left, right, path) => {\n        if (path.length === 2 * n) {\n            res.push(path);\n            return;\n        }\n        if (left > 0) {\n            backtrack(left - 1, right, path + '(');\n        }\n        if (right > left) {\n            backtrack(left, right - 1, path + ')');\n        }\n    }\n    backtrack(n, n, '');\n    return res;\n};\n\n\n\n# çµè¯å·ç çæ°å­ç»å\n\n * leetcode17\n\n * é¢è§£\n\nç»å®ä¸ä¸ªä»åå«æ°å­ 2-9 çå­ç¬¦ä¸²ï¼è¿åææå®è½è¡¨ç¤ºçå­æ¯ç»åã\n\nç»åºæ°å­å°å­æ¯çæ å°å¦ä¸ï¼ä¸çµè¯æé®ç¸åï¼ãæ³¨æ 1 ä¸å¯¹åºä»»ä½å­æ¯ã\n\nç¤ºä¾:\nè¾å¥ï¼\"23\"\nè¾åºï¼[\"ad\", \"ae\", \"af\", \"bd\", \"be\", \"bf\", \"cd\", \"ce\", \"cf\"].\n\n\nvar letterCombinations = function(digits) {\n    if (!digits.length) {\n        return [];\n    }\n    const map = {2: 'abc', 3: 'def', 4: 'ghi', 5: 'jkl', 6: 'mno', 7: 'pqrs', 8: 'tuv', 9: 'wxyz'};\n    const res = [];\n    const backtrack = (path, i) => {\n        if (path.length === digits.length) {\n            res.push(path);\n            return;\n        }\n        for (const item of map[digits[i]]) {\n            backtrack(path + item, i + 1);\n        }\n    }\n    backtrack('', 0);\n    return res;\n};\n\n\n\n# å­é\n\n * Leetcode78\n * é¢è§£\n\nç»å®ä¸ç»ä¸å«éå¤åç´ çæ´æ°æ°ç» numsï¼è¿åè¯¥æ°ç»ææå¯è½çå­éï¼å¹éï¼ã\n\nè¯´æï¼è§£éä¸è½åå«éå¤çå­éã\n\nç¤ºä¾:\n\nè¾å¥: nums = [1,2,3]\nè¾åº:\n[\n  [3],\n  [1],\n  [2],\n  [1,2,3],\n  [1,3],\n  [2,3],\n  [1,2],\n  []\n]\n\n\nvar subsets = function(nums) {\n    const res = [];\n    const backtrack = (path, index) => {\n        res.push(path.slice());\n        for (let i = index; i < nums.length; i++) {\n            path.push(nums[i]);\n            backtrack(path, i + 1);\n            path.pop();\n        }\n    }\n    backtrack([], 0);\n    return res;\n};\n\n\n\n# å­éII\n\n * leetocode90\n * æéå¤åç´ åæåºï¼æ¯æ¬¡åå¼æ¶\n\nvar subsetsWithDup = function(nums) {\n    nums.sort((a, b) => a - b)\n    const res = []\n    const backTrack = (path, index) => {\n        res.push(path.slice())\n        for (let i = index; i < nums.length; i++) {\n            if (i >= index + 1 && nums[i] === nums[i - 1]) continue\n            path.push(nums[i])\n            backTrack(path, i + 1)\n            path.pop()\n        }\n    }\n    backTrack([], 0)\n    return res\n};\n\n\n\n# äºç»´æ°ç»å¨æå\n\n> var arr = [[âAâ,âBâ],[âaâ,âbâ],[1,2]]`\n> \n> æ±äºç»´æ°ç»çå¨æåç»å ç»æï¼[Aa1,Aa2,Ab1,Ab2,Ba1,Ba2,Bb1,Bb2]\n\nconst fullArray = (arr) => {\n    const res = []\n    const traceBack = (path, n) => {\n        if (path.length === arr.length) {\n            res.push(path)\n            return\n        }\n        for (const item of arr[n]) {\n            traceBack(path + item, n+1)\n        }\n    }\n    traceBack('', 0)\n    return res\n}\n\n\n\n# ç»åæ»å\n\n * leetcode39\n * é¢è§£\n\n> ç»å®ä¸ä¸ªæ éå¤åç´ çæ°ç» candidates åä¸ä¸ªç®æ æ° target ï¼æ¾åº candidates ä¸­ææå¯ä»¥ä½¿æ°å­åä¸º target çç»åã\n> \n> candidates ä¸­çæ°å­å¯ä»¥æ éå¶éå¤è¢«éåã\n> \n> è¯´æï¼\n> \n> æææ°å­ï¼åæ¬ targetï¼é½æ¯æ­£æ´æ°ã è§£éä¸è½åå«éå¤çç»åã\n> \n> ç¤ºä¾ 1ï¼\n> \n> è¾å¥ï¼candidates = [2,3,6,7], target = 7, ææ±è§£éä¸ºï¼ [ [7], [2,2,3] ]\n> \n> ç¤ºä¾ 2ï¼\n> \n> è¾å¥ï¼candidates = [2,3,5], target = 8, ææ±è§£éä¸ºï¼ [ [2,2,2,2], [2,3,3], [3,5] ]\n\nvar combinationSum = function(candidates, target) {\n    const res = [];\n    const fn = (path, sum, start) => {\n        if (sum > target) {\n            return;\n        }\n        if (sum === target) {\n            res.push(path.slice());\n            return;\n        }\n        for (let i = start; i < candidates.length; i++) {\n            path.push(candidates[i]);\n            fn(path, sum + candidates[i], i);\n            path.pop();\n        }\n    }\n    fn([], 0, 0);\n    return res;\n};\n\n\n\n# ç»åæ»åII\n\n * leetcode40\n * é¢è§£\n\n> æ¥ä¸é¢ï¼æ¯ä¸ªæ°å­åªå¯ä½¿ç¨ä¸æ¬¡\n> \n> ç¤ºä¾ 1:\n> \n> è¾å¥: candidates = [10,1,2,7,6,1,5], target = 8, ææ±è§£éä¸º: [ [1, 7], [1, 2, 5], [2, 6], [1, 1, 6] ]\n> \n> ç¤ºä¾ 2:\n> \n> è¾å¥: candidates = [2,5,2,1,2], target = 5, ææ±è§£éä¸º: [ [1,2,2], [5] ]\n\nvar combinationSum2 = function(candidates, target) {\n    candidates = candidates.sort((a, b) => a - b);\n    const res = [];\n    const fn = (path, sum, start) => {\n        if (sum > target) {\n            return;\n        }\n        if (sum === target) {\n            res.push(path.slice());\n            return;\n        }\n        for (let i = start; i < candidates.length; i++) {\n            // æ°ç»ä¸­æéå¤åç´ æ¶ï¼å½åéé¡¹åå·¦é»éé¡¹ä¸æ ·ï¼è·³è¿è¾¾å°å»é\n            // æ¯å¦[1, 2, 2, 3]ï¼éä¸¤æ¬¡2ä¼éå¤\n            if (i > start && candidates[i] === candidates[i - 1]) {\n                continue;\n            }\n            path.push(candidates[i]);\n            fn(path, sum + candidates[i], i + 1);\n            path.pop();\n        }\n    }\n    fn([], 0, 0);\n    return res;\n};\n\n\n\n# ä»æ°ç»ä¸­æ¾nä¸ªæ°æ±å\n\nlet arr = [1, 4, 5, 8, 10, 12], total = 19, n = 3\n// è¿åç»æä¸º [[1, 8, 10], [4, 5, 10]]\n\nlet arr = [1, 4, 5, 8, 10, 12], total = 9, n = 2\n// è¿åç»æä¸º [[1, 8], [4, 5]]\n\n\n * fnï¼ä» arr ä¸­æ¾åº n ä¸ªæ°ä½¿å¶åä¸º total\n * path: å½ååæ¯\n * sumï¼å½åå\n * indexï¼å½åéåå°çç´¢å¼ï¼ä»è¯¥ç´¢å¼ä¸ä¸ä½ç½®å¼å§ç»§ç»­æ¥æ¾ï¼é¿åç»æåºç° [1, 8], [8,1]\n * éè¦èèçé®é¢\n   * æ°ç»åç´ æ¯å¦éå¤ï¼éå¤çè¯ï¼éè¦æåºååç®\n   * å¯å¦éå¤éåï¼backTrack(path, sum + arr[i], i + 1) ä¸­i + 1ä¸ºä¸éå¤éæ©ï¼iä¸ºå¯ä»¥éå¤éæ©\n\nconst fn = (arr, total, n) => {\n    let res = []\n    const backTrack = (path, sum, index) => {\n        if (path.length > n || sum > total) return\n        if (path.length === n && sum === total) {\n            res.push(path.slice())\n            return\n        }\n        for (let i = index; i < arr.length; i++) {\n            path.push(arr[i])\n            backTrack(path, sum + arr[i], i + 1) // i + 1ä¸ºä¸éå¤éæ©ï¼iä¸ºå¯ä»¥éå¤éæ©\n            path.pop()\n        }\n    }\n    backTrack([], 0, 0)\n    return res\n}\n\n\n\n# åè¯æç´¢\n\n * leetcode79\n * é¢è§£\n\n> ç»å®ä¸ä¸ªäºç»´ç½æ ¼åä¸ä¸ªåè¯ï¼æ¾åºè¯¥åè¯æ¯å¦å­å¨äºç½æ ¼ä¸­ã\n> \n> åè¯å¿é¡»æç§å­æ¯é¡ºåºï¼éè¿ç¸é»çååæ ¼åçå­æ¯ææï¼å¶ä¸­âç¸é»âååæ ¼æ¯é£äºæ°´å¹³ç¸é»æåç´ç¸é»çååæ ¼ãåä¸ä¸ªååæ ¼åçå­æ¯ä¸åè®¸è¢«éå¤ä½¿ç¨ã\n> \n> ç¤ºä¾:\n> \n> board = [ ['A','B','C','E'], ['S','F','C','S'], ['A','D','E','E'] ]\n> \n> ç»å® word = \"ABCCED\", è¿å true ç»å® word = \"SEE\", è¿å true ç»å® word = \"ABCB\", è¿å false\n\nvar exist = function(board, word) {\n    const m = board.length\n    const n = board[0].length\n    const used = Array.from(new Array(m),()=>(new Array(n).fill(0)))\n        \n    const traceback = (row, col, i) => {\n      if (i == word.length) {\n        return true\n      }\n      // è¶ç\n      if (row < 0 || row >= m || col < 0 || col >= n) {\n        return false\n      }\n      // å·²è®¿é®æä¸å¹é\n      if (used[row][col] || board[row][col] != word[i]) {\n        return false\n      }\n      // å¹éè®°å½ä¸ä¸å½åç¹è¢«è®¿é®äº\n      used[row][col] = true\n  \n      const canFindRest = traceback(row + 1, col, i + 1) || traceback(row - 1, col, i + 1) \t\t\t\t\t|| traceback(row, col + 1, i + 1) || traceback(row, col - 1, i + 1)\n      \n      // è½æ¾å°è·¯å¾\n      if (canFindRest) {\n        return true\n      }\n\n      // æ¾ä¸å°è·¯å¾\n      used[row][col] = false\n      return false\n    }\n\n    // æ¾å¥å£\n    for (let i = 0; i < m; i++) {\n      for (let j = 0; j < n; j++) {\n        if (board[i][j] == word[0] && traceback(i, j, 0)) {\n          return true; \n        }\n      }\n    }\n    return false\n};\n\n\n\n# ä¸è§å½¢çæå°è·¯å¾å\n\n * leetcode120\n\nè¾å¥ï¼triangle = [[2],[3,4],[6,5,7],[4,1,8,3]]\nè¾åºï¼11\nè§£éï¼å¦ä¸é¢ç®å¾æç¤ºï¼\n   2\n  3 4\n 6 5 7\n4 1 8 3\nèªé¡¶åä¸çæå°è·¯å¾åä¸º 11ï¼å³ï¼2 + 3 + 5 + 1 = 11ï¼ã\n\n\nvar minimumTotal = function(triangle) {\n    let res = 999999\n    // path: è·¯å¾å | n: è®°å½ç¬¬å å± | index: å½åå±éä¸­çindex\n    const backtrack = (path, n, index) => {\n        if (n > triangle.length - 1) {\n            res = Math.min(res, path)\n            return\n        }\n        backtrack(path + triangle[n][index], n + 1, index)\n        backtrack(path + triangle[n][index], n + 1, index + 1)\n    }\n    backtrack(0, 0, 0)\n    return res\n};\n\n\nåæº¯æè·¯å¯è¡ï¼ä½æ¯ç»çæµè¯ç¨ä¾ä¼è¶æ¶ï¼æ´ä¼çè§£æ³åºè¯¥æ¯dp\n\n\n# è·¯å¾æ»å\n\n * leetcode112\n\n> ç»ä½ äºåæ çæ ¹èç¹ root åä¸ä¸ªè¡¨ç¤ºç®æ åçæ´æ° targetSum ï¼å¤æ­è¯¥æ ä¸­æ¯å¦å­å¨ æ ¹èç¹å°å¶å­èç¹ çè·¯å¾ï¼è¿æ¡è·¯å¾ä¸ææèç¹å¼ç¸å ç­äºç®æ å targetSum ã\n\n// ans çè³å¯ä»¥æ±ç©¶ç«æå æ¡è·¯å¾\nvar hasPathSum = function(root, targetSum) {\n    if (!root) {\n        return 0;\n    }\n    let res = 0;\n    const backtrack = (path, sum) => {\n        if (!path.left && !path.right && sum === targetSum) {\n            res++;\n        }\n        if (path.left) {\n            backtrack(path.left, sum + path.left.val);\n        }\n        if (path.right) {\n            backtrack(path.right, sum + path.right.val);\n        }\n    }\n    backtrack(root, root.val);\n    return res > 0;\n};\n\n\n\n# è·¯å¾æ»åII\n\n * leetcode113\n\nç»å®ä¸ä¸ªäºåæ åä¸ä¸ªç®æ åï¼æ¾å°ææä»æ ¹èç¹å°å¶å­èç¹è·¯å¾æ»åç­äºç»å®ç®æ åçè·¯å¾ã\n\nç¤ºä¾:\nç»å®å¦ä¸äºåæ ï¼ä»¥åç®æ å sum = 22ï¼\n\n              5\n             / \\\n            4   8\n           /   / \\\n          11  13  4\n         /  \\    / \\\n        7    2  5   1\n\nè¿å:\n[\n   [5,4,11,2],\n   [5,8,4,5]\n]\n\n\nvar pathSum = function(root, targetSum) {\n    if (!root) {\n        return [];\n    }\n    const res = [];\n    const backtrack = (path, sum, arr) => {\n        if (!path.left && !path.right && sum === targetSum) {\n            res.push(arr.slice());\n        }\n        if (path.left) {\n            arr.push(path.left.val)\n            backtrack(path.left, sum + path.left.val, arr);\n            arr.pop();\n        }\n        if (path.right) {\n            arr.push(path.right.val)\n            backtrack(path.right, sum + path.right.val, arr);\n            arr.pop();\n        }\n    }\n    backtrack(root, root.val, [root.val]);\n    return res;\n};\n\n\n\n# æ ¹èç¹å°å¶èç¹æ°å­ä¹å\n\n * leetcode129\n\nvar sumNumbers = function(root) {\n    let res = 0\n    const backTrack = (root, num) => {\n        if (root.left === null && root.right === null) {\n            res += num\n        }\n        if (root.left !== null) {\n            backTrack(root.left, num * 10 + root.left.val)\n        }\n        if (root.right !== null) {\n            backTrack(root.right, num * 10 + root.right.val)\n        }\n    }\n    backTrack(root, root.val)\n    return res\n};\n\n\n\n# åå¼\n\næ ¹æ®å·²ææ°æ®ï¼å®ç°ä¸ä¸ªfindå½æ°æ¥æ¾å½åä¸ææç¶çº§çid(è·¯å¾æ¥æ¾)\n\nconst data = [{id: 1, children: [{id: 2,children: [{id: 3},{id: 4}]}]}];\nconst find = id => {}\nfind(0) // []\nfind(3) // [1, 2, 3]\n\n\nå¶å®å¯ä»¥æè¿ä¸ªç»æçæå¤åæ ï¼ä¹éç¨åæº¯\n\nconst find = id => {\n    const map = {};\n    const backtrack = (path, arr) => {\n        map[path.id] = arr.slice().concat(path.id);\n        if (!path.children) return;\n        for (let i = 0; i < path.children.length; i++) {\n            arr.push(path.id);\n            backtrack(path.children[i], arr);\n            arr.pop();\n        }\n    }\n    backtrack(data[0], []);\n    return map[id] || [];\n}\n",normalizedContent:"# åæº¯ç®æ³\n\n * å¨æå\n * æ¬å·çæ\n * çµè¯å·ç çæ°å­ç»å\n * å­é\n * äºç»´æ°ç»å¨æå\n * ç»åæ»å\n * ç»åæ»åii\n * åè¯æç´¢\n * ä¸è§å½¢çæå°è·¯å¾å\n * è·¯å¾æ»å\n * è·¯å¾æ»åii\n * æ ¹èç¹å°å¶èç¹æ°å­ä¹å\n\n\n# åæº¯ç®æ³\n\nè§£å³ä¸ä¸ªåæº¯é®é¢ï¼å®éä¸å°±æ¯ä¸ä¸ªå³ç­æ çéåè¿ç¨ãåºæ¬åçå°±æ¯éå½ï¼ç¨ç½è¯è§£éå°±æ¯ï¼**ä»ä¸æ¡è·¯å¾åèµ°ï¼è½è¿åè¿ï¼ä¸è½è¿åéåæ¥ï¼æ¢ä¸æ¡è·¯åè¯ã**åªéè¦æè 3 ä¸ªé®é¢ï¼\n\n1ãè·¯å¾ï¼ä¹å°±æ¯å·²ç»ååºçéæ©ã\n\n2ãéæ©åè¡¨ï¼ä¹å°±æ¯ä½ å½åå¯ä»¥åçéæ©ã\n\n3ãç»ææ¡ä»¶ï¼ä¹å°±æ¯å°è¾¾å³ç­æ åºå±ï¼æ æ³ååéæ©çæ¡ä»¶ã\n\nä»£ç æ¹é¢ï¼åæº¯ç®æ³çæ¡æ¶ï¼\n\nresult = []\ndef backtrack(è·¯å¾, éæ©åè¡¨):\n    if æ»¡è¶³ç»ææ¡ä»¶:\n        result.add(è·¯å¾)\n        return\n\n    for éæ© in éæ©åè¡¨:\n        åéæ©\n        backtrack(è·¯å¾, éæ©åè¡¨)\n        æ¤ééæ©\n\n\nå¶æ ¸å¿å°±æ¯ for å¾ªç¯éé¢çéå½ï¼å¨éå½è°ç¨ä¹åãåéæ©ãï¼å¨éå½è°ç¨ä¹åãæ¤ééæ©ã\n\n> éå½ï¼åæº¯ï¼dfsçåºå«\n> \n> éå½å°±æ¯å¨å½æ°ä¸­è°ç¨å½æ°æ¬èº«æ¥è§£å³é®é¢\n> \n> åæº¯å°±æ¯éè¿ä¸åçå°è¯æ¥çæé®é¢çè§£ï¼æç¹ç±»ä¼¼äºç©·ä¸¾ï¼ä½æ¯åç©·ä¸¾ä¸åçæ¯åæº¯ä¼âåªæâ\n> \n> åæº¯æç´¢æ¯æ·±åº¦ä¼åæç´¢ï¼dfsï¼çä¸ç§ï¼åæº¯ådfsï¼å¶ä¸»è¦çåºå«æ¯ï¼åæº¯æ³å¨æ±è§£è¿ç¨ä¸­ä¸ä¿çå®æ´çæ ç»æï¼èæ·±åº¦ä¼åæç´¢åè®°ä¸å®æ´çæç´¢æ ã\n\n\n# å¨æå\n\n * leetcode46\n\n ç»å®ä¸ä¸ª æ²¡æéå¤ æ°å­çåºåï¼è¿åå¶ææå¯è½çå¨æåã\n \n ç¤ºä¾:\n è¾å¥: [1,2,3]\n è¾åº:\n [\n [1,2,3],\n [1,3,2],\n [2,1,3],\n [2,3,1],\n [3,1,2],\n [3,2,1]\n]\n\n\næä»¬è¦å¨è¿ä¸ªåå«è§£çç©ºé´æ ä¸ï¼ç¨ éå½çæ¹å¼æç´¢åºææçè§£ã\n\nvar permute = function(nums) {\n    const res = [];\n    const fn = (path) => {\n        if (path.length === nums.length) {\n            // slice çåå æ¯é²æ­¢ push å° res ä¸­çç»ææ¯å¼ç¨ç±»åï¼åé¢ path æ¹åæ¶ä¼å½±å res\n            res.push(path.slice());\n        }\n        for (const item of nums) {\n            if (path.includes(item)) {\n                continue;\n            }\n            path.push(item); // æ¯å¦ç®å path æ¯ [1]ï¼push(2), åæ [1, 2]\n            fn(path); // éå½å°å¤´äºï¼[1,2,3] å°± return \n            path.pop(); // [1,2] pop åä¸º [1]ï¼ ç»§ç»­ä¸ä¸è½® for å¾ªç¯, push(3)\n        }\n    }\n    fn([]);\n    return res;\n};\n\n\n\n# æ¬å·çæ\n\n * leetcode22\n * é¢è§£\n\næ°å­ n ä»£è¡¨çææ¬å·çå¯¹æ°ï¼è¯·ä½ è®¾è®¡ä¸ä¸ªå½æ°ï¼ç¨äºè½å¤çæææå¯è½çå¹¶ä¸ ææç æ¬å·ç»åã\n\nç¤ºä¾ï¼\nè¾å¥ï¼n = 3\nè¾åºï¼[\n       \"((()))\",\n       \"(()())\",\n       \"(())()\",\n       \"()(())\",\n       \"()()()\"\n     ]\n\n\nvar generateparenthesis = function(n) {\n    const res = [];\n    const backtrack = (left, right, path) => {\n        if (path.length === 2 * n) {\n            res.push(path);\n            return;\n        }\n        if (left > 0) {\n            backtrack(left - 1, right, path + '(');\n        }\n        if (right > left) {\n            backtrack(left, right - 1, path + ')');\n        }\n    }\n    backtrack(n, n, '');\n    return res;\n};\n\n\n\n# çµè¯å·ç çæ°å­ç»å\n\n * leetcode17\n\n * é¢è§£\n\nç»å®ä¸ä¸ªä»åå«æ°å­ 2-9 çå­ç¬¦ä¸²ï¼è¿åææå®è½è¡¨ç¤ºçå­æ¯ç»åã\n\nç»åºæ°å­å°å­æ¯çæ å°å¦ä¸ï¼ä¸çµè¯æé®ç¸åï¼ãæ³¨æ 1 ä¸å¯¹åºä»»ä½å­æ¯ã\n\nç¤ºä¾:\nè¾å¥ï¼\"23\"\nè¾åºï¼[\"ad\", \"ae\", \"af\", \"bd\", \"be\", \"bf\", \"cd\", \"ce\", \"cf\"].\n\n\nvar lettercombinations = function(digits) {\n    if (!digits.length) {\n        return [];\n    }\n    const map = {2: 'abc', 3: 'def', 4: 'ghi', 5: 'jkl', 6: 'mno', 7: 'pqrs', 8: 'tuv', 9: 'wxyz'};\n    const res = [];\n    const backtrack = (path, i) => {\n        if (path.length === digits.length) {\n            res.push(path);\n            return;\n        }\n        for (const item of map[digits[i]]) {\n            backtrack(path + item, i + 1);\n        }\n    }\n    backtrack('', 0);\n    return res;\n};\n\n\n\n# å­é\n\n * leetcode78\n * é¢è§£\n\nç»å®ä¸ç»ä¸å«éå¤åç´ çæ´æ°æ°ç» numsï¼è¿åè¯¥æ°ç»ææå¯è½çå­éï¼å¹éï¼ã\n\nè¯´æï¼è§£éä¸è½åå«éå¤çå­éã\n\nç¤ºä¾:\n\nè¾å¥: nums = [1,2,3]\nè¾åº:\n[\n  [3],\n  [1],\n  [2],\n  [1,2,3],\n  [1,3],\n  [2,3],\n  [1,2],\n  []\n]\n\n\nvar subsets = function(nums) {\n    const res = [];\n    const backtrack = (path, index) => {\n        res.push(path.slice());\n        for (let i = index; i < nums.length; i++) {\n            path.push(nums[i]);\n            backtrack(path, i + 1);\n            path.pop();\n        }\n    }\n    backtrack([], 0);\n    return res;\n};\n\n\n\n# å­éii\n\n * leetocode90\n * æéå¤åç´ åæåºï¼æ¯æ¬¡åå¼æ¶\n\nvar subsetswithdup = function(nums) {\n    nums.sort((a, b) => a - b)\n    const res = []\n    const backtrack = (path, index) => {\n        res.push(path.slice())\n        for (let i = index; i < nums.length; i++) {\n            if (i >= index + 1 && nums[i] === nums[i - 1]) continue\n            path.push(nums[i])\n            backtrack(path, i + 1)\n            path.pop()\n        }\n    }\n    backtrack([], 0)\n    return res\n};\n\n\n\n# äºç»´æ°ç»å¨æå\n\n> var arr = [[âaâ,âbâ],[âaâ,âbâ],[1,2]]`\n> \n> æ±äºç»´æ°ç»çå¨æåç»å ç»æï¼[aa1,aa2,ab1,ab2,ba1,ba2,bb1,bb2]\n\nconst fullarray = (arr) => {\n    const res = []\n    const traceback = (path, n) => {\n        if (path.length === arr.length) {\n            res.push(path)\n            return\n        }\n        for (const item of arr[n]) {\n            traceback(path + item, n+1)\n        }\n    }\n    traceback('', 0)\n    return res\n}\n\n\n\n# ç»åæ»å\n\n * leetcode39\n * é¢è§£\n\n> ç»å®ä¸ä¸ªæ éå¤åç´ çæ°ç» candidates åä¸ä¸ªç®æ æ° target ï¼æ¾åº candidates ä¸­ææå¯ä»¥ä½¿æ°å­åä¸º target çç»åã\n> \n> candidates ä¸­çæ°å­å¯ä»¥æ éå¶éå¤è¢«éåã\n> \n> è¯´æï¼\n> \n> æææ°å­ï¼åæ¬ targetï¼é½æ¯æ­£æ´æ°ã è§£éä¸è½åå«éå¤çç»åã\n> \n> ç¤ºä¾ 1ï¼\n> \n> è¾å¥ï¼candidates = [2,3,6,7], target = 7, ææ±è§£éä¸ºï¼ [ [7], [2,2,3] ]\n> \n> ç¤ºä¾ 2ï¼\n> \n> è¾å¥ï¼candidates = [2,3,5], target = 8, ææ±è§£éä¸ºï¼ [ [2,2,2,2], [2,3,3], [3,5] ]\n\nvar combinationsum = function(candidates, target) {\n    const res = [];\n    const fn = (path, sum, start) => {\n        if (sum > target) {\n            return;\n        }\n        if (sum === target) {\n            res.push(path.slice());\n            return;\n        }\n        for (let i = start; i < candidates.length; i++) {\n            path.push(candidates[i]);\n            fn(path, sum + candidates[i], i);\n            path.pop();\n        }\n    }\n    fn([], 0, 0);\n    return res;\n};\n\n\n\n# ç»åæ»åii\n\n * leetcode40\n * é¢è§£\n\n> æ¥ä¸é¢ï¼æ¯ä¸ªæ°å­åªå¯ä½¿ç¨ä¸æ¬¡\n> \n> ç¤ºä¾ 1:\n> \n> è¾å¥: candidates = [10,1,2,7,6,1,5], target = 8, ææ±è§£éä¸º: [ [1, 7], [1, 2, 5], [2, 6], [1, 1, 6] ]\n> \n> ç¤ºä¾ 2:\n> \n> è¾å¥: candidates = [2,5,2,1,2], target = 5, ææ±è§£éä¸º: [ [1,2,2], [5] ]\n\nvar combinationsum2 = function(candidates, target) {\n    candidates = candidates.sort((a, b) => a - b);\n    const res = [];\n    const fn = (path, sum, start) => {\n        if (sum > target) {\n            return;\n        }\n        if (sum === target) {\n            res.push(path.slice());\n            return;\n        }\n        for (let i = start; i < candidates.length; i++) {\n            // æ°ç»ä¸­æéå¤åç´ æ¶ï¼å½åéé¡¹åå·¦é»éé¡¹ä¸æ ·ï¼è·³è¿è¾¾å°å»é\n            // æ¯å¦[1, 2, 2, 3]ï¼éä¸¤æ¬¡2ä¼éå¤\n            if (i > start && candidates[i] === candidates[i - 1]) {\n                continue;\n            }\n            path.push(candidates[i]);\n            fn(path, sum + candidates[i], i + 1);\n            path.pop();\n        }\n    }\n    fn([], 0, 0);\n    return res;\n};\n\n\n\n# ä»æ°ç»ä¸­æ¾nä¸ªæ°æ±å\n\nlet arr = [1, 4, 5, 8, 10, 12], total = 19, n = 3\n// è¿åç»æä¸º [[1, 8, 10], [4, 5, 10]]\n\nlet arr = [1, 4, 5, 8, 10, 12], total = 9, n = 2\n// è¿åç»æä¸º [[1, 8], [4, 5]]\n\n\n * fnï¼ä» arr ä¸­æ¾åº n ä¸ªæ°ä½¿å¶åä¸º total\n * path: å½ååæ¯\n * sumï¼å½åå\n * indexï¼å½åéåå°çç´¢å¼ï¼ä»è¯¥ç´¢å¼ä¸ä¸ä½ç½®å¼å§ç»§ç»­æ¥æ¾ï¼é¿åç»æåºç° [1, 8], [8,1]\n * éè¦èèçé®é¢\n   * æ°ç»åç´ æ¯å¦éå¤ï¼éå¤çè¯ï¼éè¦æåºååç®\n   * å¯å¦éå¤éåï¼backtrack(path, sum + arr[i], i + 1) ä¸­i + 1ä¸ºä¸éå¤éæ©ï¼iä¸ºå¯ä»¥éå¤éæ©\n\nconst fn = (arr, total, n) => {\n    let res = []\n    const backtrack = (path, sum, index) => {\n        if (path.length > n || sum > total) return\n        if (path.length === n && sum === total) {\n            res.push(path.slice())\n            return\n        }\n        for (let i = index; i < arr.length; i++) {\n            path.push(arr[i])\n            backtrack(path, sum + arr[i], i + 1) // i + 1ä¸ºä¸éå¤éæ©ï¼iä¸ºå¯ä»¥éå¤éæ©\n            path.pop()\n        }\n    }\n    backtrack([], 0, 0)\n    return res\n}\n\n\n\n# åè¯æç´¢\n\n * leetcode79\n * é¢è§£\n\n> ç»å®ä¸ä¸ªäºç»´ç½æ ¼åä¸ä¸ªåè¯ï¼æ¾åºè¯¥åè¯æ¯å¦å­å¨äºç½æ ¼ä¸­ã\n> \n> åè¯å¿é¡»æç§å­æ¯é¡ºåºï¼éè¿ç¸é»çååæ ¼åçå­æ¯ææï¼å¶ä¸­âç¸é»âååæ ¼æ¯é£äºæ°´å¹³ç¸é»æåç´ç¸é»çååæ ¼ãåä¸ä¸ªååæ ¼åçå­æ¯ä¸åè®¸è¢«éå¤ä½¿ç¨ã\n> \n> ç¤ºä¾:\n> \n> board = [ ['a','b','c','e'], ['s','f','c','s'], ['a','d','e','e'] ]\n> \n> ç»å® word = \"abcced\", è¿å true ç»å® word = \"see\", è¿å true ç»å® word = \"abcb\", è¿å false\n\nvar exist = function(board, word) {\n    const m = board.length\n    const n = board[0].length\n    const used = array.from(new array(m),()=>(new array(n).fill(0)))\n        \n    const traceback = (row, col, i) => {\n      if (i == word.length) {\n        return true\n      }\n      // è¶ç\n      if (row < 0 || row >= m || col < 0 || col >= n) {\n        return false\n      }\n      // å·²è®¿é®æä¸å¹é\n      if (used[row][col] || board[row][col] != word[i]) {\n        return false\n      }\n      // å¹éè®°å½ä¸ä¸å½åç¹è¢«è®¿é®äº\n      used[row][col] = true\n  \n      const canfindrest = traceback(row + 1, col, i + 1) || traceback(row - 1, col, i + 1) \t\t\t\t\t|| traceback(row, col + 1, i + 1) || traceback(row, col - 1, i + 1)\n      \n      // è½æ¾å°è·¯å¾\n      if (canfindrest) {\n        return true\n      }\n\n      // æ¾ä¸å°è·¯å¾\n      used[row][col] = false\n      return false\n    }\n\n    // æ¾å¥å£\n    for (let i = 0; i < m; i++) {\n      for (let j = 0; j < n; j++) {\n        if (board[i][j] == word[0] && traceback(i, j, 0)) {\n          return true; \n        }\n      }\n    }\n    return false\n};\n\n\n\n# ä¸è§å½¢çæå°è·¯å¾å\n\n * leetcode120\n\nè¾å¥ï¼triangle = [[2],[3,4],[6,5,7],[4,1,8,3]]\nè¾åºï¼11\nè§£éï¼å¦ä¸é¢ç®å¾æç¤ºï¼\n   2\n  3 4\n 6 5 7\n4 1 8 3\nèªé¡¶åä¸çæå°è·¯å¾åä¸º 11ï¼å³ï¼2 + 3 + 5 + 1 = 11ï¼ã\n\n\nvar minimumtotal = function(triangle) {\n    let res = 999999\n    // path: è·¯å¾å | n: è®°å½ç¬¬å å± | index: å½åå±éä¸­çindex\n    const backtrack = (path, n, index) => {\n        if (n > triangle.length - 1) {\n            res = math.min(res, path)\n            return\n        }\n        backtrack(path + triangle[n][index], n + 1, index)\n        backtrack(path + triangle[n][index], n + 1, index + 1)\n    }\n    backtrack(0, 0, 0)\n    return res\n};\n\n\nåæº¯æè·¯å¯è¡ï¼ä½æ¯ç»çæµè¯ç¨ä¾ä¼è¶æ¶ï¼æ´ä¼çè§£æ³åºè¯¥æ¯dp\n\n\n# è·¯å¾æ»å\n\n * leetcode112\n\n> ç»ä½ äºåæ çæ ¹èç¹ root åä¸ä¸ªè¡¨ç¤ºç®æ åçæ´æ° targetsum ï¼å¤æ­è¯¥æ ä¸­æ¯å¦å­å¨ æ ¹èç¹å°å¶å­èç¹ çè·¯å¾ï¼è¿æ¡è·¯å¾ä¸ææèç¹å¼ç¸å ç­äºç®æ å targetsum ã\n\n// ans çè³å¯ä»¥æ±ç©¶ç«æå æ¡è·¯å¾\nvar haspathsum = function(root, targetsum) {\n    if (!root) {\n        return 0;\n    }\n    let res = 0;\n    const backtrack = (path, sum) => {\n        if (!path.left && !path.right && sum === targetsum) {\n            res++;\n        }\n        if (path.left) {\n            backtrack(path.left, sum + path.left.val);\n        }\n        if (path.right) {\n            backtrack(path.right, sum + path.right.val);\n        }\n    }\n    backtrack(root, root.val);\n    return res > 0;\n};\n\n\n\n# è·¯å¾æ»åii\n\n * leetcode113\n\nç»å®ä¸ä¸ªäºåæ åä¸ä¸ªç®æ åï¼æ¾å°ææä»æ ¹èç¹å°å¶å­èç¹è·¯å¾æ»åç­äºç»å®ç®æ åçè·¯å¾ã\n\nç¤ºä¾:\nç»å®å¦ä¸äºåæ ï¼ä»¥åç®æ å sum = 22ï¼\n\n              5\n             / \\\n            4   8\n           /   / \\\n          11  13  4\n         /  \\    / \\\n        7    2  5   1\n\nè¿å:\n[\n   [5,4,11,2],\n   [5,8,4,5]\n]\n\n\nvar pathsum = function(root, targetsum) {\n    if (!root) {\n        return [];\n    }\n    const res = [];\n    const backtrack = (path, sum, arr) => {\n        if (!path.left && !path.right && sum === targetsum) {\n            res.push(arr.slice());\n        }\n        if (path.left) {\n            arr.push(path.left.val)\n            backtrack(path.left, sum + path.left.val, arr);\n            arr.pop();\n        }\n        if (path.right) {\n            arr.push(path.right.val)\n            backtrack(path.right, sum + path.right.val, arr);\n            arr.pop();\n        }\n    }\n    backtrack(root, root.val, [root.val]);\n    return res;\n};\n\n\n\n# æ ¹èç¹å°å¶èç¹æ°å­ä¹å\n\n * leetcode129\n\nvar sumnumbers = function(root) {\n    let res = 0\n    const backtrack = (root, num) => {\n        if (root.left === null && root.right === null) {\n            res += num\n        }\n        if (root.left !== null) {\n            backtrack(root.left, num * 10 + root.left.val)\n        }\n        if (root.right !== null) {\n            backtrack(root.right, num * 10 + root.right.val)\n        }\n    }\n    backtrack(root, root.val)\n    return res\n};\n\n\n\n# åå¼\n\næ ¹æ®å·²ææ°æ®ï¼å®ç°ä¸ä¸ªfindå½æ°æ¥æ¾å½åä¸ææç¶çº§çid(è·¯å¾æ¥æ¾)\n\nconst data = [{id: 1, children: [{id: 2,children: [{id: 3},{id: 4}]}]}];\nconst find = id => {}\nfind(0) // []\nfind(3) // [1, 2, 3]\n\n\nå¶å®å¯ä»¥æè¿ä¸ªç»æçæå¤åæ ï¼ä¹éç¨åæº¯\n\nconst find = id => {\n    const map = {};\n    const backtrack = (path, arr) => {\n        map[path.id] = arr.slice().concat(path.id);\n        if (!path.children) return;\n        for (let i = 0; i < path.children.length; i++) {\n            arr.push(path.id);\n            backtrack(path.children[i], arr);\n            arr.pop();\n        }\n    }\n    backtrack(data[0], []);\n    return map[id] || [];\n}\n",charsets:{cjk:!0}},{title:"åå¤§æåºç®æ³",frontmatter:{title:"åå¤§æåºç®æ³",date:"2020-12-17T11:27:54.000Z",categories:"ç®æ³"},regularPath:"/algorithm/sort.html",relativePath:"algorithm/sort.md",key:"v-1901b0ef",path:"/algorithm/sort.html",headers:[{level:2,title:"å¸¸ç¨æ¯è¯­",slug:"å¸¸ç¨æ¯è¯­",normalizedTitle:"å¸¸ç¨æ¯è¯­",charIndex:123},{level:2,title:"åæ³¡æåº",slug:"åæ³¡æåº",normalizedTitle:"åæ³¡æåº",charIndex:13},{level:2,title:"éæ©æåº",slug:"éæ©æåº",normalizedTitle:"éæ©æåº",charIndex:21},{level:2,title:"æå¥æåº",slug:"æå¥æåº",normalizedTitle:"æå¥æåº",charIndex:29},{level:2,title:"å¸å°æåº",slug:"å¸å°æåº",normalizedTitle:"å¸å°æåº",charIndex:37},{level:2,title:"å½å¹¶æåº",slug:"å½å¹¶æåº",normalizedTitle:"å½å¹¶æåº",charIndex:45},{level:2,title:"å¿«éæåº",slug:"å¿«éæåº",normalizedTitle:"å¿«éæåº",charIndex:53},{level:2,title:"å æåº",slug:"å æåº",normalizedTitle:"å æåº",charIndex:61},{level:2,title:"è®¡æ°æåº",slug:"è®¡æ°æåº",normalizedTitle:"è®¡æ°æåº",charIndex:68},{level:2,title:"æ¡¶æåº",slug:"æ¡¶æåº",normalizedTitle:"æ¡¶æåº",charIndex:76},{level:2,title:"åºæ°æåº",slug:"åºæ°æåº",normalizedTitle:"åºæ°æåº",charIndex:83}],lastUpdated:"5/22/2025, 11:29:40 AM",lastUpdatedTimestamp:174788458e4,headersStr:"å¸¸ç¨æ¯è¯­ åæ³¡æåº éæ©æåº æå¥æåº å¸å°æåº å½å¹¶æåº å¿«éæåº å æåº è®¡æ°æåº æ¡¶æåº åºæ°æåº",content:"# åå¤§æåºç®æ³\n\n * åæ³¡æåº\n * éæ©æåº\n * æå¥æåº\n * å¸å°æåº\n * å½å¹¶æåº\n * å¿«éæåº\n * å æåº\n * è®¡æ°æåº\n * æ¡¶æåº\n * åºæ°æåº\n\nåèæç« ï¼åå¤§ç»å¸æåºç®æ³æ»ç»ï¼JavaScriptæè¿°ï¼\n\n\n# å¸¸ç¨æ¯è¯­\n\nç¨³å®ï¼å¦æaåæ¬å¨båé¢ï¼èa=bï¼æåºä¹åaä»ç¶å¨bçåé¢ï¼\n\nä¸ç¨³å®ï¼å¦æaåæ¬å¨bçåé¢ï¼èa=bï¼æåºä¹åaå¯è½ä¼åºç°å¨bçåé¢ï¼\n\nåæåºï¼æææåºæä½é½å¨åå­ä¸­å®æï¼\n\nå¤æåºï¼ç±äºæ°æ®å¤ªå¤§ï¼å æ­¤ææ°æ®æ¾å¨ç£çä¸­ï¼èæåºéè¿ç£çååå­çæ°æ®ä¼ è¾æè½è¿è¡ï¼\n\næ¶é´å¤æåº¦: ä¸ä¸ªç®æ³æ§è¡æèè´¹çæ¶é´ã\n\nç©ºé´å¤æåº¦: è¿è¡å®ä¸ä¸ªç¨åºæéåå­çå¤§å°ã\n\n\n\n\n# åæ³¡æåº\n\n 1. æ¯è¾ç¸é»çåç´ ãå¦æç¬¬ä¸ä¸ªæ¯ç¬¬äºä¸ªå¤§ï¼å°±äº¤æ¢ä»ä»¬ä¸¤ä¸ªã\n 2. å¯¹æ¯ä¸å¯¹ç¸é»åç´ ä½åæ ·çå·¥ä½ï¼ä»å¼å§ç¬¬ä¸å¯¹å°ç»å°¾çæåä¸å¯¹ãè¿æ­¥åå®åï¼æåçåç´ ä¼æ¯æå¤§çæ°ã\n 3. éå¯¹ææçåç´ éå¤ä»¥ä¸çæ­¥éª¤ï¼é¤äºæåä¸ä¸ªã\n 4. æç»­æ¯æ¬¡å¯¹è¶æ¥è¶å°çåç´ éå¤ä¸é¢çæ­¥éª¤ï¼ç´å°æ²¡æä»»ä½ä¸å¯¹æ°å­éè¦æ¯è¾\n\nconst bubbleSort = function(arr) {\n    const len = arr.length;\n    // len é¿åº¦åªéå¾ªç¯ len - 1 æ¬¡ï¼å°±ä¼æ len - 1 ä¸ªå¤§åç´ æ¾å¨åé¢ï¼å³æåºæå\n    for (let i = 0; i < len - 1; i++) {\n        // i æ¯å¾ªç¯ä¸æ¬¡åé½ä¼éåºæå¤§çæ¾å°æå\n        // æä»¥æ¯ j åªéå¤æ­ len - i, åå ä¸ºä¸é¢æ¯ j + 1 å j æ¯è¾, æä»¥æ¯ len - i - 1\n        for (let j = 0; j < len - i - 1; j++) {\n            if (arr[j] > arr[j + 1]) {\n                // äº¤æ¢\n                [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];\n            }\n        }\n    }\n    return arr;\n}\n\n\n\n# éæ©æåº\n\n 1. å¨æªæåºåºåä¸­æ¾å°æå°ï¼å¤§ï¼åç´ ï¼å­æ¾å°æåºåºåçèµ·å§ä½ç½®\n 2. ä»å©ä½æªæåºåç´ ä¸­ç»§ç»­å¯»æ¾æå°ï¼å¤§ï¼åç´ ï¼ç¶åæ¾å°å·²æåºåºåçæ«å°¾\n 3. ä»¥æ­¤ç±»æ¨ï¼ç´å°ææåç´ åæåºå®æ¯\n\nconst selectSort = nums => {\n    for (let i = 0; i < nums.length - 1; i++) {\n        let minIndex = i;\n        for (let j = i + 1; j < nums.length; j++) {\n            if (nums[j] < nums[minIndex]) {\n                minIndex = j;\n            }\n        }\n        [nums[i], nums[minIndex]] = [nums[minIndex], nums[i]];\n    }\n    return nums;\n}\n\n\n\n# æå¥æåº\n\n 1. ä»ç¬¬ä¸ä¸ªåç´ å¼å§ï¼è¯¥åç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æåº\n 2. ååºä¸ä¸ä¸ªåç´ ï¼å¨å·²ç»æåºçåç´ åºåä¸­ä»åååæ«æ\n 3. å¦æè¯¥åç´ ï¼å·²æåºï¼å¤§äºæ°åç´ ï¼å°è¯¥åç´ ç§»å°ä¸ä¸ä½ç½®\n 4. éå¤æ­¥éª¤3ï¼ç´å°æ¾å°å·²æåºçåç´ å°äºæèç­äºæ°åç´ çä½ç½®\n 5. å°æ°åç´ æå¥å°è¯¥ä½ç½®å\n 6. éå¤æ­¥éª¤2~5\n\nfunction insertionSort(array) {\n    for (var i = 1; i < array.length; i++) {\n      var key = array[i];\n      var j = i - 1;\n      while (j >= 0 && array[j] > key) {\n        array[j + 1] = array[j];\n        j--;\n      }\n      array[j + 1] = key;\n    }\n    return array;\n}\n\n\n\n# å¸å°æåº\n\n 1. éæ©ä¸ä¸ªå¢éåºåt1ï¼t2ï¼â¦ï¼tkï¼å¶ä¸­ti>tjï¼tk=1ï¼\n\n 2. æå¢éåºåä¸ªæ°kï¼å¯¹åºåè¿è¡k è¶æåºï¼\n\n 3. æ¯è¶æåºï¼æ ¹æ®å¯¹åºçå¢étiï¼å°å¾æåºååå²æè¥å¹²é¿åº¦ä¸ºm çå­åºåï¼åå«å¯¹åå­è¡¨è¿è¡ç´æ¥æå¥æåºãä»å¢éå å­ä¸º1 æ¶ï¼æ´ä¸ªåºåä½ä¸ºä¸ä¸ªè¡¨æ¥å¤çï¼è¡¨é¿åº¦å³ä¸ºæ´ä¸ªåºåçé¿åº¦ã\n\nfunction shellSort(arr) {\n    var len = arr.length,\n        temp,\n        gap = 1;\n    while(gap < len/5) {          //å¨æå®ä¹é´éåºå\n        gap =gap*5+1;\n    }\n    for (gap; gap > 0; gap = Math.floor(gap/5)) {\n        for (var i = gap; i < len; i++) {\n            temp = arr[i];\n            for (var j = i-gap; j >= 0 && arr[j] > temp; j-=gap) {\n                arr[j+gap] = arr[j];\n            }\n            arr[j+gap] = temp;\n        }\n    }\n    return arr;\n}\n\n\n\n# å½å¹¶æåº\n\n> å½å¹¶æåºæ¯å»ºç«å¨å½å¹¶æä½ä¸çä¸ç§ææçæåºç®æ³ãè¯¥ç®æ³æ¯éç¨åæ²»æ³ï¼Divide and Conquerï¼çä¸ä¸ªéå¸¸å¸åçåºç¨ãå½å¹¶æåºæ¯ä¸ç§ç¨³å®çæåºæ¹æ³ãå°å·²æåºçå­åºååå¹¶ï¼å¾å°å®å¨æåºçåºåï¼å³åä½¿æ¯ä¸ªå­åºåæåºï¼åä½¿å­åºåæ®µé´æåºãè¥å°ä¸¤ä¸ªæåºè¡¨åå¹¶æä¸ä¸ªæåºè¡¨ï¼ç§°ä¸º2-è·¯å½å¹¶ã\n\n 1. æé¿åº¦ä¸ºnçè¾å¥åºååæä¸¤ä¸ªé¿åº¦ä¸ºn/2çå­åºåï¼\n\n 2. å¯¹è¿ä¸¤ä¸ªå­åºååå«éç¨å½å¹¶æåºï¼\n\n 3. å°ä¸¤ä¸ªæåºå¥½çå­åºååå¹¶æä¸ä¸ªæç»çæåºåºåã\n\nfunction mergeSort(arr) {  //éç¨èªä¸èä¸çéå½æ¹æ³\n    var len = arr.length;\n    if(len < 2) {\n        return arr;\n    }\n    var middle = Math.floor(len / 2),\n        left = arr.slice(0, middle),\n        right = arr.slice(middle);\n    return merge(mergeSort(left), mergeSort(right));\n}\n\nfunction merge(left, right)\n{\n    var result = [];\n    while (left.length && right.length) {\n        if (left[0] <= right[0]) {\n            result.push(left.shift());\n        } else {\n            result.push(right.shift());\n        }\n    }\n\n    while (left.length)\n        result.push(left.shift());\n\n    while (right.length)\n        result.push(right.shift());\n    return result;\n}\n\n\n\n# å¿«éæåº\n\n * å¾ç¤º\n\n// å¿«æçåºæ¬ææ³æ¯åæ²»ï¼éæ©ä¸ä¸ªæ¢çº½ï¼å°çæ¾å®å·¦é¢ï¼å¤§çå³é¢ï¼è¿æ ·pivotæ¾å¨äºæç»ä½ç½®\n// ç¶ååå¯¹ pivot å·¦å³ä¸¤ä¸ªå­è¡¨æåº\n\nconst partition = (arr, low, high) => {\n    const pivot = arr[low];\n    while (low < high) { // å¾ªç¯ç´å°å·¦å³æéç¸é\n        while (low < high && arr[high] >= pivot) high--; // ä»å³åå·¦æ¾ç¬¬ä¸ä¸ªå°äºpivotçæ°\n        arr[low] = arr[high];\n        while (low < high && arr[low] <= pivot) low++; // ä»å·¦åå³æ¾ç¬¬ä¸ä¸ªå¤§äºpivotçæ°\n        arr[high] = arr[low];\n    }\n    arr[low] = pivot;\n    return low;\n}\n\nconst quickSort = (arr, low, high) => {\n    if (low < high) { // éå½ç»æ­¢æ¡ä»¶ï¼å­æ°ç»é¿åº¦ä¸º1æ¶ï¼æ éæåº\n        const index = partition(arr, low, high);\n        quickSort(arr, low, index - 1);\n        quickSort(arr, index + 1, high);\n    }\n}\n\nconst sortArray = arr => {\n    quickSort(arr, 0, arr.length - 1);\n    return arr;\n}\n\n[4, 7, 6, 5, 3, 2, 8, 1]\n// ä¸æ¬¡æåºè¿ç¨\n[1, 7, 6, 5, 3, 2, 8, -]\n[1, -, 6, 5, 3, 2, 8, 7]\n[1, 2, 6, 5, 3, -, 8, 7]\n[1, 2, -, 5, 3, 6, 8, 7]\n[1, 2, 3, 5, -, 6, 8, 7]\n[1, 2, 3, -, 5, 6, 8, 7]\n[1, 2, 3, 4, 5, 6, 8, 7]\n\n// ä¼åï¼\n// 1.å­åºåçè§æ¨¡è¾å°æ¶ï¼ä¸ç¨å¨éå½è°ç¨å¿«æï¼å¯ä»¥éåç´æ¥æå¥æåº\n// 2.å°½ééä¸ä¸ªå¯ä»¥å°æ°æ®ä¸­åçæ¢çº½åç´ ï¼æ¯å¦ä»åºåçå¤´ï¼ä¸­ï¼å°¾é3ä¸ªï¼åè¿ä¸ä¸ªå¼çä¸­é´åç´ ä¸ºæ¢çº½\n\n\næ¶é´å¤æåº¦\n\n * è¥æ¢çº½å¼éçå¥½ï¼åå½¢æäºåæ çé«åº¦ä¸ºO(logn)ï¼æ¯ä¸å±æåºéè¦O(n)ï¼æ»å¤æåº¦ä¸ºO(nlogn)\n * è¥å¾æåºçè®°å½åºåæ­£åºæéåºï¼äºåæ çé«åº¦ä¸ºO(n)ï¼æ»å¤æåº¦ä¸ºO(n^2)\n\n\n# å æåº\n\n 1. å°å¾æåºåºåææä¸ä¸ªå¤§é¡¶å ï¼æ­¤æ¶ï¼æ´ä¸ªåºåçæå¤§å¼å°±æ¯å é¡¶çæ ¹èç¹\n 2. å°å¶ä¸æ«å°¾åç´ è¿è¡äº¤æ¢ï¼æ­¤æ¶æ«å°¾å°±æ¯æå¤§å¼\n 3. ç¶åå°å©ä½n-1ä¸ªåç´ éæ°æé æä¸ä¸ªå ï¼å°±ä¼å¾å°nä¸ªåç´ çæ¬¡å°å¼ï¼å¦æ­¤åå¤æ§è¡ï¼ä¾¿è½å¾å°ä¸ä¸ªæåºåºå\n\n * å æåºå¾ç¤º\n * åçè§£æ\n * æ¶é´å¤æåº¦ï¼O(n*logn)ï¼æ¯æ¬¡æé å é½éè¦O(logn)ï¼ä¸å±æé næ¬¡\n * å çæå¥ä¸å é¤ï¼å é¤ä»æ ¹èç¹å ï¼æå¥ä»æåæ\n\n/*æ¹æ³è¯´æï¼å æåº\n@param  array å¾æåºæ°ç»*/\nfunction heapSort(array) {\n    // å»ºå \n    let heapSize = array.length;\n    for (let i = Math.floor(heapSize / 2) - 1; i >= 0; i--) {\n      heapify(array, i, heapSize);\n    }\n    // å æåº\n    for (let j = heapSize - 1; j >= 1; j--) {\n        [array[0], array[j]] = [array[j], array[0]];\n        heapify(array, 0, --heapSize);\n    }\n    return array;\n}\n\n/*æ¹æ³è¯´æï¼ç»´æ¤å çæ§è´¨\n@param  arr æ°ç»\n@param  x   æ°ç»ä¸æ \n@param  len å å¤§å°*/\nfunction heapify(arr, x, len) {\n    let l = 2 * x + 1, r = 2 * x + 2, largest = x;\n    if (l < len && arr[l] > arr[largest]) {\n        largest = l;\n    }\n    if (r < len && arr[r] > arr[largest]) {\n        largest = r;\n    }\n    if (largest !== x) {\n        [arr[x], arr[largest]] = [arr[largest], arr[x]];\n        heapify(arr, largest, len);\n    }\n}\n\n\n * æ°ç»ç¬¬kå¤§åç´ : leetcode215\n\nvar findKthLargest = function(nums, k) {\n    const heapSort = (arr, k) => {\n        let len = arr.length\n        // æé å \n        for (let i = Math.floor(arr.length / 2); i >= 0; i--) {\n            heapify(arr, i, len)\n        }\n        for (let j = len - 1; j >= 0; j--) {\n            [arr[0], arr[j]] = [arr[j], arr[0]]\n            heapify(arr, 0, --len)\n            if (j === arr.length - k) return arr[arr.length - k] // ç¬¬ k å¤§\n        }\n    }\n\n    // ç»´æ¤å \n    const heapify = (arr, x, len) => {\n        let l = 2 * x + 1, r = 2 * x + 2, largest = x\n        if (l < len && arr[l] > arr[largest]) {\n            largest = l\n        }\n        if (r < len && arr[r] > arr[largest]) {\n            largest = r\n        }\n        if (largest !== x) {\n            [arr[largest], arr[x]] = [arr[x], arr[largest]]\n            heapify(arr, largest, len)\n        }\n    }\n    return heapSort(nums, k)\n};\n\n\n> ä¸é¢è¦ä»ç»ç è®¡æ°æåºãæ¡¶æåºãåºæ°æåº ï¼å®ä»¬çå¹³åæ¶é´å¤æåº¦é½ä¸º O(n)ã\n> \n> å ä¸ºè¿ä¸ä¸ªæåºç®æ³çæ¶é´å¤æåº¦æ¯çº¿æ§çï¼æä»¥æä»¬æè¿ç±»æåºç®æ³å«ä½ çº¿æ§æåºï¼Linear sortï¼ã\n> \n> ä¹æä»¥è½åå°çº¿æ§çæ¶é´å¤æåº¦ï¼ä¸»è¦åå æ¯ï¼è¿ä¸ä¸ªç®æ³ä¸æ¯åºäºæ¯è¾çæåºç®æ³ï¼é½ä¸æ¶ååç´ ä¹é´çæ¯è¾æä½ã\n\n\n# è®¡æ°æåº\n\n 1. æ¾åºå¾æåºçæ°ç»ä¸­æå¤§åæå°çåç´ ã\n\n 2. ç»è®¡æ°ç»ä¸­æ¯ä¸ªå¼ä¸º i çåç´ åºç°çæ¬¡æ°ï¼å­å¥æ°æ°ç» countArr çç¬¬ i é¡¹ã\n\n 3. å¯¹ææçè®¡æ°ç´¯å ï¼ä» countArr ä¸­çç¬¬ä¸ä¸ªåç´ å¼å§ï¼æ¯ä¸é¡¹ååä¸é¡¹ç¸å ï¼ã\n\n 4. ååå¡«åç®æ æ°ç»ï¼å°æ¯ä¸ªåç´  i æ¾å¨æ°æ°ç»çç¬¬ countArr[i] é¡¹ï¼æ¯æ¾ä¸ä¸ªåç´ å°±å° countArr[i] åå» 1 ã\n\n * åªè½ç¨å¨æ°æ®èå´ä¸å¤§çåºæ¯ä¸­ï¼è¥æ°æ®èå´ k æ¯è¦æåºçæ°æ® n å¤§å¾å¤ï¼å°±ä¸éåç¨è®¡æ°æåºã\n * è®¡æ°æåºåªè½ç»éè´æ´æ°æåºï¼å¶ä»ç±»åéè¦å¨ä¸æ¹åç¸å¯¹å¤§å°æåµä¸ï¼è½¬æ¢ä¸ºéè´æ´æ°ã\n\nfunction countingSort(array) {\n    var len = array.length,\n        B = [],\n        C = [],\n        min = max = array[0];\n    for (var i = 0; i < len; i++) {\n        min = min <= array[i] ? min : array[i];\n        max = max >= array[i] ? max : array[i];\n        C[array[i]] = C[array[i]] ? C[array[i]] + 1 : 1;\n    }\n    for (var j = min; j < max; j++) {\n        C[j + 1] = (C[j + 1] || 0) + (C[j] || 0);\n    }\n    for (var k = len - 1; k >= 0; k--) {\n        B[C[array[k]] - 1] = array[k];\n        C[array[k]]--;\n    }\n    return B;\n}\n\n\n\n# æ¡¶æåº\n\n> æ¡¶æåºæ¯è®¡æ°æåºçåçº§çãå®å©ç¨äºå½æ°çæ å°å³ç³»ï¼é«æä¸å¦çå³é®å°±å¨äºè¿ä¸ªæ å°å½æ°çç¡®å®ã\n> \n> æ¡¶æåº (Bucket sort)çå·¥ä½çåçï¼åè®¾è¾å¥æ°æ®æä»åååå¸ï¼å°æ°æ®åå°æéæ°éçæ¡¶éï¼æ¯ä¸ªæ¡¶ååå«æåºï¼æå¯è½åä½¿ç¨å«çæåºç®æ³ææ¯ä»¥éå½æ¹å¼ç»§ç»­ä½¿ç¨æ¡¶æåºè¿è¡æåºï¼\n\nconst utils = {  \n\tswap(array, a, b) {\n    [array[a], array[b]] = [array[b], array[a]]\n  },\n  randomNum() {\n    return Math.floor(Math.random() * 100)\n  },\n  randomArray() {\n    return Array.from(Array(this.randomNum()), _ => this.randomNum())\n  }\n}\n\nfunction bucketSort(array, size = 10) {\n  let min = Math.min(...array)\n  let max = Math.max(...array)\n  let count = Math.floor((max - min) / size) + 1\n  let buckets = []\n  for (let i = 0; i < count; i++) {\n    buckets.push([])\n  }\n  for (let v of array) {\n    let num = Math.floor((v - min) / size)\n    buckets[num].push(v)\n  }\n  let result = []\n  for (bucket of buckets) {\n    result.push(...insertionSort(bucket)) \n  }\n  return result\n}\n\nconsole.log(bucketSort(utils.randomArray()))\n\nfunction insertionSort(array) {\n  for (let i = 1; i < array.length; i++) {\n    let j = i\n    let target = array[j]\n    while(j > 0 && array[j-1] > target) {\n      array[j] = array[j-1]\n      j--\n    }\n    array[j] = target\n  }\n  return array\n}\n\n\n\n# åºæ°æåº\n\n 1. åå¾æ°ç»ä¸­çæå¤§æ°ï¼å¹¶åå¾ä½æ°ï¼\n 2. arrä¸ºåå§æ°ç»ï¼ä»æä½ä½å¼å§åæ¯ä¸ªä½ç»æradixæ°ç»ï¼\n 3. å¯¹radixè¿è¡è®¡æ°æåºï¼å©ç¨è®¡æ°æåºéç¨äºå°èå´æ°çç¹ç¹ï¼ï¼\n\n/**\n * åºæ°æåºéç¨äºï¼\n *  (1)æ°æ®èå´è¾å°ï¼å»ºè®®å¨å°äº1000\n *  (2)æ¯ä¸ªæ°å¼é½è¦å¤§äºç­äº0\n * @author xiazdong\n * @param  arr å¾æåºæ°ç»\n * @param  maxDigit æå¤§ä½æ°\n */\n//LSD Radix Sort\n\nfunction radixSort(arr, maxDigit) {\n    var mod = 10;\n    var dev = 1;\n    var counter = [];\n    for (var i = 0; i < maxDigit; i++, dev *= 10, mod *= 10) {\n        for(var j = 0; j < arr.length; j++) {\n            var bucket = parseInt((arr[j] % mod) / dev);\n            if(counter[bucket]== null) {\n                counter[bucket] = [];\n            }\n            counter[bucket].push(arr[j]);\n        }\n        var pos = 0;\n        for(var j = 0; j < counter.length; j++) {\n            var value = null;\n            if(counter[j]!=null) {\n                while ((value = counter[j].shift()) != null) {\n                      arr[pos++] = value;\n                }\n          }\n        }\n    }\n    return arr;\n}\n",normalizedContent:"# åå¤§æåºç®æ³\n\n * åæ³¡æåº\n * éæ©æåº\n * æå¥æåº\n * å¸å°æåº\n * å½å¹¶æåº\n * å¿«éæåº\n * å æåº\n * è®¡æ°æåº\n * æ¡¶æåº\n * åºæ°æåº\n\nåèæç« ï¼åå¤§ç»å¸æåºç®æ³æ»ç»ï¼javascriptæè¿°ï¼\n\n\n# å¸¸ç¨æ¯è¯­\n\nç¨³å®ï¼å¦æaåæ¬å¨båé¢ï¼èa=bï¼æåºä¹åaä»ç¶å¨bçåé¢ï¼\n\nä¸ç¨³å®ï¼å¦æaåæ¬å¨bçåé¢ï¼èa=bï¼æåºä¹åaå¯è½ä¼åºç°å¨bçåé¢ï¼\n\nåæåºï¼æææåºæä½é½å¨åå­ä¸­å®æï¼\n\nå¤æåºï¼ç±äºæ°æ®å¤ªå¤§ï¼å æ­¤ææ°æ®æ¾å¨ç£çä¸­ï¼èæåºéè¿ç£çååå­çæ°æ®ä¼ è¾æè½è¿è¡ï¼\n\næ¶é´å¤æåº¦: ä¸ä¸ªç®æ³æ§è¡æèè´¹çæ¶é´ã\n\nç©ºé´å¤æåº¦: è¿è¡å®ä¸ä¸ªç¨åºæéåå­çå¤§å°ã\n\n\n\n\n# åæ³¡æåº\n\n 1. æ¯è¾ç¸é»çåç´ ãå¦æç¬¬ä¸ä¸ªæ¯ç¬¬äºä¸ªå¤§ï¼å°±äº¤æ¢ä»ä»¬ä¸¤ä¸ªã\n 2. å¯¹æ¯ä¸å¯¹ç¸é»åç´ ä½åæ ·çå·¥ä½ï¼ä»å¼å§ç¬¬ä¸å¯¹å°ç»å°¾çæåä¸å¯¹ãè¿æ­¥åå®åï¼æåçåç´ ä¼æ¯æå¤§çæ°ã\n 3. éå¯¹ææçåç´ éå¤ä»¥ä¸çæ­¥éª¤ï¼é¤äºæåä¸ä¸ªã\n 4. æç»­æ¯æ¬¡å¯¹è¶æ¥è¶å°çåç´ éå¤ä¸é¢çæ­¥éª¤ï¼ç´å°æ²¡æä»»ä½ä¸å¯¹æ°å­éè¦æ¯è¾\n\nconst bubblesort = function(arr) {\n    const len = arr.length;\n    // len é¿åº¦åªéå¾ªç¯ len - 1 æ¬¡ï¼å°±ä¼æ len - 1 ä¸ªå¤§åç´ æ¾å¨åé¢ï¼å³æåºæå\n    for (let i = 0; i < len - 1; i++) {\n        // i æ¯å¾ªç¯ä¸æ¬¡åé½ä¼éåºæå¤§çæ¾å°æå\n        // æä»¥æ¯ j åªéå¤æ­ len - i, åå ä¸ºä¸é¢æ¯ j + 1 å j æ¯è¾, æä»¥æ¯ len - i - 1\n        for (let j = 0; j < len - i - 1; j++) {\n            if (arr[j] > arr[j + 1]) {\n                // äº¤æ¢\n                [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];\n            }\n        }\n    }\n    return arr;\n}\n\n\n\n# éæ©æåº\n\n 1. å¨æªæåºåºåä¸­æ¾å°æå°ï¼å¤§ï¼åç´ ï¼å­æ¾å°æåºåºåçèµ·å§ä½ç½®\n 2. ä»å©ä½æªæåºåç´ ä¸­ç»§ç»­å¯»æ¾æå°ï¼å¤§ï¼åç´ ï¼ç¶åæ¾å°å·²æåºåºåçæ«å°¾\n 3. ä»¥æ­¤ç±»æ¨ï¼ç´å°ææåç´ åæåºå®æ¯\n\nconst selectsort = nums => {\n    for (let i = 0; i < nums.length - 1; i++) {\n        let minindex = i;\n        for (let j = i + 1; j < nums.length; j++) {\n            if (nums[j] < nums[minindex]) {\n                minindex = j;\n            }\n        }\n        [nums[i], nums[minindex]] = [nums[minindex], nums[i]];\n    }\n    return nums;\n}\n\n\n\n# æå¥æåº\n\n 1. ä»ç¬¬ä¸ä¸ªåç´ å¼å§ï¼è¯¥åç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æåº\n 2. ååºä¸ä¸ä¸ªåç´ ï¼å¨å·²ç»æåºçåç´ åºåä¸­ä»åååæ«æ\n 3. å¦æè¯¥åç´ ï¼å·²æåºï¼å¤§äºæ°åç´ ï¼å°è¯¥åç´ ç§»å°ä¸ä¸ä½ç½®\n 4. éå¤æ­¥éª¤3ï¼ç´å°æ¾å°å·²æåºçåç´ å°äºæèç­äºæ°åç´ çä½ç½®\n 5. å°æ°åç´ æå¥å°è¯¥ä½ç½®å\n 6. éå¤æ­¥éª¤2~5\n\nfunction insertionsort(array) {\n    for (var i = 1; i < array.length; i++) {\n      var key = array[i];\n      var j = i - 1;\n      while (j >= 0 && array[j] > key) {\n        array[j + 1] = array[j];\n        j--;\n      }\n      array[j + 1] = key;\n    }\n    return array;\n}\n\n\n\n# å¸å°æåº\n\n 1. éæ©ä¸ä¸ªå¢éåºåt1ï¼t2ï¼â¦ï¼tkï¼å¶ä¸­ti>tjï¼tk=1ï¼\n\n 2. æå¢éåºåä¸ªæ°kï¼å¯¹åºåè¿è¡k è¶æåºï¼\n\n 3. æ¯è¶æåºï¼æ ¹æ®å¯¹åºçå¢étiï¼å°å¾æåºååå²æè¥å¹²é¿åº¦ä¸ºm çå­åºåï¼åå«å¯¹åå­è¡¨è¿è¡ç´æ¥æå¥æåºãä»å¢éå å­ä¸º1 æ¶ï¼æ´ä¸ªåºåä½ä¸ºä¸ä¸ªè¡¨æ¥å¤çï¼è¡¨é¿åº¦å³ä¸ºæ´ä¸ªåºåçé¿åº¦ã\n\nfunction shellsort(arr) {\n    var len = arr.length,\n        temp,\n        gap = 1;\n    while(gap < len/5) {          //å¨æå®ä¹é´éåºå\n        gap =gap*5+1;\n    }\n    for (gap; gap > 0; gap = math.floor(gap/5)) {\n        for (var i = gap; i < len; i++) {\n            temp = arr[i];\n            for (var j = i-gap; j >= 0 && arr[j] > temp; j-=gap) {\n                arr[j+gap] = arr[j];\n            }\n            arr[j+gap] = temp;\n        }\n    }\n    return arr;\n}\n\n\n\n# å½å¹¶æåº\n\n> å½å¹¶æåºæ¯å»ºç«å¨å½å¹¶æä½ä¸çä¸ç§ææçæåºç®æ³ãè¯¥ç®æ³æ¯éç¨åæ²»æ³ï¼divide and conquerï¼çä¸ä¸ªéå¸¸å¸åçåºç¨ãå½å¹¶æåºæ¯ä¸ç§ç¨³å®çæåºæ¹æ³ãå°å·²æåºçå­åºååå¹¶ï¼å¾å°å®å¨æåºçåºåï¼å³åä½¿æ¯ä¸ªå­åºåæåºï¼åä½¿å­åºåæ®µé´æåºãè¥å°ä¸¤ä¸ªæåºè¡¨åå¹¶æä¸ä¸ªæåºè¡¨ï¼ç§°ä¸º2-è·¯å½å¹¶ã\n\n 1. æé¿åº¦ä¸ºnçè¾å¥åºååæä¸¤ä¸ªé¿åº¦ä¸ºn/2çå­åºåï¼\n\n 2. å¯¹è¿ä¸¤ä¸ªå­åºååå«éç¨å½å¹¶æåºï¼\n\n 3. å°ä¸¤ä¸ªæåºå¥½çå­åºååå¹¶æä¸ä¸ªæç»çæåºåºåã\n\nfunction mergesort(arr) {  //éç¨èªä¸èä¸çéå½æ¹æ³\n    var len = arr.length;\n    if(len < 2) {\n        return arr;\n    }\n    var middle = math.floor(len / 2),\n        left = arr.slice(0, middle),\n        right = arr.slice(middle);\n    return merge(mergesort(left), mergesort(right));\n}\n\nfunction merge(left, right)\n{\n    var result = [];\n    while (left.length && right.length) {\n        if (left[0] <= right[0]) {\n            result.push(left.shift());\n        } else {\n            result.push(right.shift());\n        }\n    }\n\n    while (left.length)\n        result.push(left.shift());\n\n    while (right.length)\n        result.push(right.shift());\n    return result;\n}\n\n\n\n# å¿«éæåº\n\n * å¾ç¤º\n\n// å¿«æçåºæ¬ææ³æ¯åæ²»ï¼éæ©ä¸ä¸ªæ¢çº½ï¼å°çæ¾å®å·¦é¢ï¼å¤§çå³é¢ï¼è¿æ ·pivotæ¾å¨äºæç»ä½ç½®\n// ç¶ååå¯¹ pivot å·¦å³ä¸¤ä¸ªå­è¡¨æåº\n\nconst partition = (arr, low, high) => {\n    const pivot = arr[low];\n    while (low < high) { // å¾ªç¯ç´å°å·¦å³æéç¸é\n        while (low < high && arr[high] >= pivot) high--; // ä»å³åå·¦æ¾ç¬¬ä¸ä¸ªå°äºpivotçæ°\n        arr[low] = arr[high];\n        while (low < high && arr[low] <= pivot) low++; // ä»å·¦åå³æ¾ç¬¬ä¸ä¸ªå¤§äºpivotçæ°\n        arr[high] = arr[low];\n    }\n    arr[low] = pivot;\n    return low;\n}\n\nconst quicksort = (arr, low, high) => {\n    if (low < high) { // éå½ç»æ­¢æ¡ä»¶ï¼å­æ°ç»é¿åº¦ä¸º1æ¶ï¼æ éæåº\n        const index = partition(arr, low, high);\n        quicksort(arr, low, index - 1);\n        quicksort(arr, index + 1, high);\n    }\n}\n\nconst sortarray = arr => {\n    quicksort(arr, 0, arr.length - 1);\n    return arr;\n}\n\n[4, 7, 6, 5, 3, 2, 8, 1]\n// ä¸æ¬¡æåºè¿ç¨\n[1, 7, 6, 5, 3, 2, 8, -]\n[1, -, 6, 5, 3, 2, 8, 7]\n[1, 2, 6, 5, 3, -, 8, 7]\n[1, 2, -, 5, 3, 6, 8, 7]\n[1, 2, 3, 5, -, 6, 8, 7]\n[1, 2, 3, -, 5, 6, 8, 7]\n[1, 2, 3, 4, 5, 6, 8, 7]\n\n// ä¼åï¼\n// 1.å­åºåçè§æ¨¡è¾å°æ¶ï¼ä¸ç¨å¨éå½è°ç¨å¿«æï¼å¯ä»¥éåç´æ¥æå¥æåº\n// 2.å°½ééä¸ä¸ªå¯ä»¥å°æ°æ®ä¸­åçæ¢çº½åç´ ï¼æ¯å¦ä»åºåçå¤´ï¼ä¸­ï¼å°¾é3ä¸ªï¼åè¿ä¸ä¸ªå¼çä¸­é´åç´ ä¸ºæ¢çº½\n\n\næ¶é´å¤æåº¦\n\n * è¥æ¢çº½å¼éçå¥½ï¼åå½¢æäºåæ çé«åº¦ä¸ºo(logn)ï¼æ¯ä¸å±æåºéè¦o(n)ï¼æ»å¤æåº¦ä¸ºo(nlogn)\n * è¥å¾æåºçè®°å½åºåæ­£åºæéåºï¼äºåæ çé«åº¦ä¸ºo(n)ï¼æ»å¤æåº¦ä¸ºo(n^2)\n\n\n# å æåº\n\n 1. å°å¾æåºåºåææä¸ä¸ªå¤§é¡¶å ï¼æ­¤æ¶ï¼æ´ä¸ªåºåçæå¤§å¼å°±æ¯å é¡¶çæ ¹èç¹\n 2. å°å¶ä¸æ«å°¾åç´ è¿è¡äº¤æ¢ï¼æ­¤æ¶æ«å°¾å°±æ¯æå¤§å¼\n 3. ç¶åå°å©ä½n-1ä¸ªåç´ éæ°æé æä¸ä¸ªå ï¼å°±ä¼å¾å°nä¸ªåç´ çæ¬¡å°å¼ï¼å¦æ­¤åå¤æ§è¡ï¼ä¾¿è½å¾å°ä¸ä¸ªæåºåºå\n\n * å æåºå¾ç¤º\n * åçè§£æ\n * æ¶é´å¤æåº¦ï¼o(n*logn)ï¼æ¯æ¬¡æé å é½éè¦o(logn)ï¼ä¸å±æé næ¬¡\n * å çæå¥ä¸å é¤ï¼å é¤ä»æ ¹èç¹å ï¼æå¥ä»æåæ\n\n/*æ¹æ³è¯´æï¼å æåº\n@param  array å¾æåºæ°ç»*/\nfunction heapsort(array) {\n    // å»ºå \n    let heapsize = array.length;\n    for (let i = math.floor(heapsize / 2) - 1; i >= 0; i--) {\n      heapify(array, i, heapsize);\n    }\n    // å æåº\n    for (let j = heapsize - 1; j >= 1; j--) {\n        [array[0], array[j]] = [array[j], array[0]];\n        heapify(array, 0, --heapsize);\n    }\n    return array;\n}\n\n/*æ¹æ³è¯´æï¼ç»´æ¤å çæ§è´¨\n@param  arr æ°ç»\n@param  x   æ°ç»ä¸æ \n@param  len å å¤§å°*/\nfunction heapify(arr, x, len) {\n    let l = 2 * x + 1, r = 2 * x + 2, largest = x;\n    if (l < len && arr[l] > arr[largest]) {\n        largest = l;\n    }\n    if (r < len && arr[r] > arr[largest]) {\n        largest = r;\n    }\n    if (largest !== x) {\n        [arr[x], arr[largest]] = [arr[largest], arr[x]];\n        heapify(arr, largest, len);\n    }\n}\n\n\n * æ°ç»ç¬¬kå¤§åç´ : leetcode215\n\nvar findkthlargest = function(nums, k) {\n    const heapsort = (arr, k) => {\n        let len = arr.length\n        // æé å \n        for (let i = math.floor(arr.length / 2); i >= 0; i--) {\n            heapify(arr, i, len)\n        }\n        for (let j = len - 1; j >= 0; j--) {\n            [arr[0], arr[j]] = [arr[j], arr[0]]\n            heapify(arr, 0, --len)\n            if (j === arr.length - k) return arr[arr.length - k] // ç¬¬ k å¤§\n        }\n    }\n\n    // ç»´æ¤å \n    const heapify = (arr, x, len) => {\n        let l = 2 * x + 1, r = 2 * x + 2, largest = x\n        if (l < len && arr[l] > arr[largest]) {\n            largest = l\n        }\n        if (r < len && arr[r] > arr[largest]) {\n            largest = r\n        }\n        if (largest !== x) {\n            [arr[largest], arr[x]] = [arr[x], arr[largest]]\n            heapify(arr, largest, len)\n        }\n    }\n    return heapsort(nums, k)\n};\n\n\n> ä¸é¢è¦ä»ç»ç è®¡æ°æåºãæ¡¶æåºãåºæ°æåº ï¼å®ä»¬çå¹³åæ¶é´å¤æåº¦é½ä¸º o(n)ã\n> \n> å ä¸ºè¿ä¸ä¸ªæåºç®æ³çæ¶é´å¤æåº¦æ¯çº¿æ§çï¼æä»¥æä»¬æè¿ç±»æåºç®æ³å«ä½ çº¿æ§æåºï¼linear sortï¼ã\n> \n> ä¹æä»¥è½åå°çº¿æ§çæ¶é´å¤æåº¦ï¼ä¸»è¦åå æ¯ï¼è¿ä¸ä¸ªç®æ³ä¸æ¯åºäºæ¯è¾çæåºç®æ³ï¼é½ä¸æ¶ååç´ ä¹é´çæ¯è¾æä½ã\n\n\n# è®¡æ°æåº\n\n 1. æ¾åºå¾æåºçæ°ç»ä¸­æå¤§åæå°çåç´ ã\n\n 2. ç»è®¡æ°ç»ä¸­æ¯ä¸ªå¼ä¸º i çåç´ åºç°çæ¬¡æ°ï¼å­å¥æ°æ°ç» countarr çç¬¬ i é¡¹ã\n\n 3. å¯¹ææçè®¡æ°ç´¯å ï¼ä» countarr ä¸­çç¬¬ä¸ä¸ªåç´ å¼å§ï¼æ¯ä¸é¡¹ååä¸é¡¹ç¸å ï¼ã\n\n 4. ååå¡«åç®æ æ°ç»ï¼å°æ¯ä¸ªåç´  i æ¾å¨æ°æ°ç»çç¬¬ countarr[i] é¡¹ï¼æ¯æ¾ä¸ä¸ªåç´ å°±å° countarr[i] åå» 1 ã\n\n * åªè½ç¨å¨æ°æ®èå´ä¸å¤§çåºæ¯ä¸­ï¼è¥æ°æ®èå´ k æ¯è¦æåºçæ°æ® n å¤§å¾å¤ï¼å°±ä¸éåç¨è®¡æ°æåºã\n * è®¡æ°æåºåªè½ç»éè´æ´æ°æåºï¼å¶ä»ç±»åéè¦å¨ä¸æ¹åç¸å¯¹å¤§å°æåµä¸ï¼è½¬æ¢ä¸ºéè´æ´æ°ã\n\nfunction countingsort(array) {\n    var len = array.length,\n        b = [],\n        c = [],\n        min = max = array[0];\n    for (var i = 0; i < len; i++) {\n        min = min <= array[i] ? min : array[i];\n        max = max >= array[i] ? max : array[i];\n        c[array[i]] = c[array[i]] ? c[array[i]] + 1 : 1;\n    }\n    for (var j = min; j < max; j++) {\n        c[j + 1] = (c[j + 1] || 0) + (c[j] || 0);\n    }\n    for (var k = len - 1; k >= 0; k--) {\n        b[c[array[k]] - 1] = array[k];\n        c[array[k]]--;\n    }\n    return b;\n}\n\n\n\n# æ¡¶æåº\n\n> æ¡¶æåºæ¯è®¡æ°æåºçåçº§çãå®å©ç¨äºå½æ°çæ å°å³ç³»ï¼é«æä¸å¦çå³é®å°±å¨äºè¿ä¸ªæ å°å½æ°çç¡®å®ã\n> \n> æ¡¶æåº (bucket sort)çå·¥ä½çåçï¼åè®¾è¾å¥æ°æ®æä»åååå¸ï¼å°æ°æ®åå°æéæ°éçæ¡¶éï¼æ¯ä¸ªæ¡¶ååå«æåºï¼æå¯è½åä½¿ç¨å«çæåºç®æ³ææ¯ä»¥éå½æ¹å¼ç»§ç»­ä½¿ç¨æ¡¶æåºè¿è¡æåºï¼\n\nconst utils = {  \n\tswap(array, a, b) {\n    [array[a], array[b]] = [array[b], array[a]]\n  },\n  randomnum() {\n    return math.floor(math.random() * 100)\n  },\n  randomarray() {\n    return array.from(array(this.randomnum()), _ => this.randomnum())\n  }\n}\n\nfunction bucketsort(array, size = 10) {\n  let min = math.min(...array)\n  let max = math.max(...array)\n  let count = math.floor((max - min) / size) + 1\n  let buckets = []\n  for (let i = 0; i < count; i++) {\n    buckets.push([])\n  }\n  for (let v of array) {\n    let num = math.floor((v - min) / size)\n    buckets[num].push(v)\n  }\n  let result = []\n  for (bucket of buckets) {\n    result.push(...insertionsort(bucket)) \n  }\n  return result\n}\n\nconsole.log(bucketsort(utils.randomarray()))\n\nfunction insertionsort(array) {\n  for (let i = 1; i < array.length; i++) {\n    let j = i\n    let target = array[j]\n    while(j > 0 && array[j-1] > target) {\n      array[j] = array[j-1]\n      j--\n    }\n    array[j] = target\n  }\n  return array\n}\n\n\n\n# åºæ°æåº\n\n 1. åå¾æ°ç»ä¸­çæå¤§æ°ï¼å¹¶åå¾ä½æ°ï¼\n 2. arrä¸ºåå§æ°ç»ï¼ä»æä½ä½å¼å§åæ¯ä¸ªä½ç»æradixæ°ç»ï¼\n 3. å¯¹radixè¿è¡è®¡æ°æåºï¼å©ç¨è®¡æ°æåºéç¨äºå°èå´æ°çç¹ç¹ï¼ï¼\n\n/**\n * åºæ°æåºéç¨äºï¼\n *  (1)æ°æ®èå´è¾å°ï¼å»ºè®®å¨å°äº1000\n *  (2)æ¯ä¸ªæ°å¼é½è¦å¤§äºç­äº0\n * @author xiazdong\n * @param  arr å¾æåºæ°ç»\n * @param  maxdigit æå¤§ä½æ°\n */\n//lsd radix sort\n\nfunction radixsort(arr, maxdigit) {\n    var mod = 10;\n    var dev = 1;\n    var counter = [];\n    for (var i = 0; i < maxdigit; i++, dev *= 10, mod *= 10) {\n        for(var j = 0; j < arr.length; j++) {\n            var bucket = parseint((arr[j] % mod) / dev);\n            if(counter[bucket]== null) {\n                counter[bucket] = [];\n            }\n            counter[bucket].push(arr[j]);\n        }\n        var pos = 0;\n        for(var j = 0; j < counter.length; j++) {\n            var value = null;\n            if(counter[j]!=null) {\n                while ((value = counter[j].shift()) != null) {\n                      arr[pos++] = value;\n                }\n          }\n        }\n    }\n    return arr;\n}\n",charsets:{cjk:!0}},{title:"åæé",frontmatter:{title:"åæé",date:"2020-11-30T16:00:54.000Z",categories:"ç®æ³"},regularPath:"/algorithm/two-pointer.html",relativePath:"algorithm/two-pointer.md",key:"v-7e657abf",path:"/algorithm/two-pointer.html",headers:[{level:2,title:"çæ°´æå¤çå®¹å¨",slug:"çæ°´æå¤çå®¹å¨",normalizedTitle:"çæ°´æå¤çå®¹å¨",charIndex:10},{level:2,title:"å é¤é¾è¡¨çåæ°ç¬¬nä¸ªç»ç¹",slug:"å é¤é¾è¡¨çåæ°ç¬¬nä¸ªç»ç¹",normalizedTitle:"å é¤é¾è¡¨çåæ°ç¬¬nä¸ªç»ç¹",charIndex:21},{level:2,title:"ç¯å½¢é¾è¡¨",slug:"ç¯å½¢é¾è¡¨",normalizedTitle:"ç¯å½¢é¾è¡¨",charIndex:37},{level:2,title:"éªè¯åæå­ç¬¦ä¸²",slug:"éªè¯åæå­ç¬¦ä¸²",normalizedTitle:"éªè¯åæå­ç¬¦ä¸²",charIndex:45},{level:2,title:"xçå¹³æ¹æ ¹",slug:"xçå¹³æ¹æ ¹",normalizedTitle:"xçå¹³æ¹æ ¹",charIndex:56}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"çæ°´æå¤çå®¹å¨ å é¤é¾è¡¨çåæ°ç¬¬nä¸ªç»ç¹ ç¯å½¢é¾è¡¨ éªè¯åæå­ç¬¦ä¸² xçå¹³æ¹æ ¹",content:'# åæé\n\n * çæ°´æå¤çå®¹å¨\n * å é¤é¾è¡¨çåæ°ç¬¬nä¸ªç»ç¹\n * ç¯å½¢é¾è¡¨\n * éªè¯åæå­ç¬¦ä¸²\n * xçå¹³æ¹æ ¹\n\n\n# çæ°´æå¤çå®¹å¨\n\n * leetcode11\n * é¢è§£\n\n> ç»ä½  n ä¸ªéè´æ´æ° a1ï¼a2ï¼...ï¼anï¼æ¯ä¸ªæ°ä»£è¡¨åæ ä¸­çä¸ä¸ªç¹ (i, ai) ãå¨åæ åç» n æ¡åç´çº¿ï¼åç´çº¿ i çä¸¤ä¸ªç«¯ç¹åå«ä¸º (i, ai) å (i, 0) ãæ¾åºå¶ä¸­çä¸¤æ¡çº¿ï¼ä½¿å¾å®ä»¬ä¸ x è½´å±åææçå®¹å¨å¯ä»¥å®¹çº³æå¤çæ°´ã\n> \n> è¯´æï¼ä½ ä¸è½å¾æå®¹å¨ã\n> \n> ç¤ºä¾ 1ï¼ è¾å¥ï¼[1,8,6,2,5,4,8,3,7] è¾åºï¼49 è§£éï¼å¾ä¸­åç´çº¿ä»£è¡¨è¾å¥æ°ç» [1,8,6,2,5,4,8,3,7]ãå¨æ­¤æåµä¸ï¼å®¹å¨è½å¤å®¹çº³æ°´ï¼è¡¨ç¤ºä¸ºèè²é¨åï¼çæå¤§å¼ä¸º 49ã\n> \n> ç¤ºä¾ 2ï¼ è¾å¥ï¼height = [1,1] è¾åºï¼1\n> \n> ç¤ºä¾ 3ï¼ è¾å¥ï¼height = [4,3,2,1,4] è¾åºï¼16\n> \n> ç¤ºä¾ 4ï¼ è¾å¥ï¼height = [1,2,1] è¾åºï¼2\n\n * åæéæ³ï¼åçè¯¦çé¢è§£\n\nvar maxArea = function(height) {\n    let left = 0\n    let right = height.length - 1\n    let ans = 0\n    while (left !== right) {\n        ans = Math.max(ans, Math.min(height[left], height[right]) * (right - left))\n        if (height[left] > height[right]) {\n            right --\n        } else {\n            left ++\n        }\n    }\n    return ans\n};\n\n\n\n# å é¤é¾è¡¨çåæ°ç¬¬nä¸ªç»ç¹\n\n * leetcode19\n\n> ç»å®ä¸ä¸ªé¾è¡¨ï¼å é¤é¾è¡¨çåæ°ç¬¬ n ä¸ªèç¹ï¼å¹¶ä¸è¿åé¾è¡¨çå¤´ç»ç¹ã\n> \n> ç¤ºä¾ï¼\n> \n> ç»å®ä¸ä¸ªé¾è¡¨: 1->2->3->4->5, å n = 2.\n> \n> å½å é¤äºåæ°ç¬¬äºä¸ªèç¹åï¼é¾è¡¨åä¸º 1->2->3->5.\n\n * æè·¯ï¼åæéï¼å¿«çåèµ° n æ­¥ï¼ç¶åä¸¤ä¸ªä¸èµ·èµ°å°æåï¼æ¢çå°±æ¯åæ°ç¬¬ n ä¸ªï¼åªéåäºä¸æ¬¡\n\nvar removeNthFromEnd = function(head, n) {\n    // åå»ºå¤´èç¹, ä¿è¯è¾å¥ä¸º [1], 1 æ¶ï¼ä¸ä¼åºç°éè¯¯\n    let pre = new ListNode()\n    pre.next = head\n    let slow = pre\n    let fast = pre\n    // fast åèµ° n æ¬¡\n    for (let i = 0; i < n; i++) {\n        fast = fast.next\n    }\n    // èµ°å°å°¾é¨\n    while (fast.next !== null) {\n        slow = slow.next\n        fast = fast.next\n    }\n    // å é¤\n    slow.next = slow.next.next\n    return pre.next\n};\n\n\n\n# ç¯å½¢é¾è¡¨\n\n * leetcode141\n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼head = [3,2,0,-4], pos = 1\nè¾åºï¼true\nè§£éï¼é¾è¡¨ä¸­æä¸ä¸ªç¯ï¼å¶å°¾é¨è¿æ¥å°ç¬¬äºä¸ªèç¹ã\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼head = [1,2], pos = 0\nè¾åºï¼true\nè§£éï¼é¾è¡¨ä¸­æä¸ä¸ªç¯ï¼å¶å°¾é¨è¿æ¥å°ç¬¬ä¸ä¸ªèç¹ã\n\n\n * å¿«æ¢æéæ³\n * å¿«ãæ¢æéï¼ä»å¤´èç¹åºå\n * æ¢æéæ¯æ¬¡èµ°ä¸æ­¥ï¼å¿«æéæ¯æ¬¡èµ°ä¸¤æ­¥ï¼ä¸æ­æ¯è¾å®ä»¬æåçèç¹çå¼\n * å¦æèç¹å¼ç¸åï¼è¯´ææç¯ãå¦æä¸åï¼ç»§ç»­å¾ªç¯ã\n\n\n# éªè¯åæå­ç¬¦ä¸²\n\n * leetcode125\n\nç»å®ä¸ä¸ªå­ç¬¦ä¸²ï¼éªè¯å®æ¯å¦æ¯åæä¸²ï¼åªèèå­æ¯åæ°å­å­ç¬¦ï¼å¯ä»¥å¿½ç¥å­æ¯çå¤§å°åã\nè¯´æï¼æ¬é¢ä¸­ï¼æä»¬å°ç©ºå­ç¬¦ä¸²å®ä¹ä¸ºææçåæä¸²ã\n\nç¤ºä¾ 1:\nè¾å¥: "A man, a plan, a canal: Panama"\nè¾åº: true\n\nç¤ºä¾ 2:\nè¾å¥: "race a car"\nè¾åº: false\n\n\n * toUpperCase æ¹æ³ç¨äºæå­ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å\n * toLowerCase æ¹æ³ç¨äºæå­ç¬¦ä¸²è½¬æ¢ä¸ºå°å\n * toLocaleLowerCase() å toLocaleUpperCase()åä¸é¢çåºå«æ¯æ ¹æ®å°åºè¯­è¨æ¥è½¬æ¢ï¼ä¸è¬ç¨ä¸å°\n * æ­£åä¸­\\wæ¯å­ç¬¦ç»[0-9a-zA-Z_]çç®åå½¢å¼\n\nvar isPalindrome = function(s) {\n    let i = 0, j = s.length - 1\n    s = s.toLowerCase()\n    function isValid(str) {\n        // const reg = /\\w/ , å¶ä¸­åå«ä¸åçº¿ï¼ä¸æ­£ç¡®\n        const reg = /[0-9a-zA-Z]/\n        return reg.test(str)\n    }\n    while (j >= i) {\n        while (!isValid(s[j])) j--\n        while (!isValid(s[i])) i++\n        if (s[i] !== s[j]) return false\n        i++\n        j--\n    }\n    return true\n};\n\n\n\n# xçå¹³æ¹æ ¹\n\n * leetcode69\n\nvar mySqrt = function(x) {\n    let left = 0, right = x, ans = -1\n    while (left <= right) {\n        mid = Math.floor((left + right) / 2)\n        if (mid * mid <= x) {\n            left = mid + 1\n            ans = mid // ä¿è¯ç»ææ¯åä¸åæ´çï¼å¾å·§å¦\n        } else if (mid * mid > x) {\n            right = mid - 1\n        }\n    }\n    return ans\n};\n',normalizedContent:'# åæé\n\n * çæ°´æå¤çå®¹å¨\n * å é¤é¾è¡¨çåæ°ç¬¬nä¸ªç»ç¹\n * ç¯å½¢é¾è¡¨\n * éªè¯åæå­ç¬¦ä¸²\n * xçå¹³æ¹æ ¹\n\n\n# çæ°´æå¤çå®¹å¨\n\n * leetcode11\n * é¢è§£\n\n> ç»ä½  n ä¸ªéè´æ´æ° a1ï¼a2ï¼...ï¼anï¼æ¯ä¸ªæ°ä»£è¡¨åæ ä¸­çä¸ä¸ªç¹ (i, ai) ãå¨åæ åç» n æ¡åç´çº¿ï¼åç´çº¿ i çä¸¤ä¸ªç«¯ç¹åå«ä¸º (i, ai) å (i, 0) ãæ¾åºå¶ä¸­çä¸¤æ¡çº¿ï¼ä½¿å¾å®ä»¬ä¸ x è½´å±åææçå®¹å¨å¯ä»¥å®¹çº³æå¤çæ°´ã\n> \n> è¯´æï¼ä½ ä¸è½å¾æå®¹å¨ã\n> \n> ç¤ºä¾ 1ï¼ è¾å¥ï¼[1,8,6,2,5,4,8,3,7] è¾åºï¼49 è§£éï¼å¾ä¸­åç´çº¿ä»£è¡¨è¾å¥æ°ç» [1,8,6,2,5,4,8,3,7]ãå¨æ­¤æåµä¸ï¼å®¹å¨è½å¤å®¹çº³æ°´ï¼è¡¨ç¤ºä¸ºèè²é¨åï¼çæå¤§å¼ä¸º 49ã\n> \n> ç¤ºä¾ 2ï¼ è¾å¥ï¼height = [1,1] è¾åºï¼1\n> \n> ç¤ºä¾ 3ï¼ è¾å¥ï¼height = [4,3,2,1,4] è¾åºï¼16\n> \n> ç¤ºä¾ 4ï¼ è¾å¥ï¼height = [1,2,1] è¾åºï¼2\n\n * åæéæ³ï¼åçè¯¦çé¢è§£\n\nvar maxarea = function(height) {\n    let left = 0\n    let right = height.length - 1\n    let ans = 0\n    while (left !== right) {\n        ans = math.max(ans, math.min(height[left], height[right]) * (right - left))\n        if (height[left] > height[right]) {\n            right --\n        } else {\n            left ++\n        }\n    }\n    return ans\n};\n\n\n\n# å é¤é¾è¡¨çåæ°ç¬¬nä¸ªç»ç¹\n\n * leetcode19\n\n> ç»å®ä¸ä¸ªé¾è¡¨ï¼å é¤é¾è¡¨çåæ°ç¬¬ n ä¸ªèç¹ï¼å¹¶ä¸è¿åé¾è¡¨çå¤´ç»ç¹ã\n> \n> ç¤ºä¾ï¼\n> \n> ç»å®ä¸ä¸ªé¾è¡¨: 1->2->3->4->5, å n = 2.\n> \n> å½å é¤äºåæ°ç¬¬äºä¸ªèç¹åï¼é¾è¡¨åä¸º 1->2->3->5.\n\n * æè·¯ï¼åæéï¼å¿«çåèµ° n æ­¥ï¼ç¶åä¸¤ä¸ªä¸èµ·èµ°å°æåï¼æ¢çå°±æ¯åæ°ç¬¬ n ä¸ªï¼åªéåäºä¸æ¬¡\n\nvar removenthfromend = function(head, n) {\n    // åå»ºå¤´èç¹, ä¿è¯è¾å¥ä¸º [1], 1 æ¶ï¼ä¸ä¼åºç°éè¯¯\n    let pre = new listnode()\n    pre.next = head\n    let slow = pre\n    let fast = pre\n    // fast åèµ° n æ¬¡\n    for (let i = 0; i < n; i++) {\n        fast = fast.next\n    }\n    // èµ°å°å°¾é¨\n    while (fast.next !== null) {\n        slow = slow.next\n        fast = fast.next\n    }\n    // å é¤\n    slow.next = slow.next.next\n    return pre.next\n};\n\n\n\n# ç¯å½¢é¾è¡¨\n\n * leetcode141\n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼head = [3,2,0,-4], pos = 1\nè¾åºï¼true\nè§£éï¼é¾è¡¨ä¸­æä¸ä¸ªç¯ï¼å¶å°¾é¨è¿æ¥å°ç¬¬äºä¸ªèç¹ã\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼head = [1,2], pos = 0\nè¾åºï¼true\nè§£éï¼é¾è¡¨ä¸­æä¸ä¸ªç¯ï¼å¶å°¾é¨è¿æ¥å°ç¬¬ä¸ä¸ªèç¹ã\n\n\n * å¿«æ¢æéæ³\n * å¿«ãæ¢æéï¼ä»å¤´èç¹åºå\n * æ¢æéæ¯æ¬¡èµ°ä¸æ­¥ï¼å¿«æéæ¯æ¬¡èµ°ä¸¤æ­¥ï¼ä¸æ­æ¯è¾å®ä»¬æåçèç¹çå¼\n * å¦æèç¹å¼ç¸åï¼è¯´ææç¯ãå¦æä¸åï¼ç»§ç»­å¾ªç¯ã\n\n\n# éªè¯åæå­ç¬¦ä¸²\n\n * leetcode125\n\nç»å®ä¸ä¸ªå­ç¬¦ä¸²ï¼éªè¯å®æ¯å¦æ¯åæä¸²ï¼åªèèå­æ¯åæ°å­å­ç¬¦ï¼å¯ä»¥å¿½ç¥å­æ¯çå¤§å°åã\nè¯´æï¼æ¬é¢ä¸­ï¼æä»¬å°ç©ºå­ç¬¦ä¸²å®ä¹ä¸ºææçåæä¸²ã\n\nç¤ºä¾ 1:\nè¾å¥: "a man, a plan, a canal: panama"\nè¾åº: true\n\nç¤ºä¾ 2:\nè¾å¥: "race a car"\nè¾åº: false\n\n\n * touppercase æ¹æ³ç¨äºæå­ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å\n * tolowercase æ¹æ³ç¨äºæå­ç¬¦ä¸²è½¬æ¢ä¸ºå°å\n * tolocalelowercase() å tolocaleuppercase()åä¸é¢çåºå«æ¯æ ¹æ®å°åºè¯­è¨æ¥è½¬æ¢ï¼ä¸è¬ç¨ä¸å°\n * æ­£åä¸­\\wæ¯å­ç¬¦ç»[0-9a-za-z_]çç®åå½¢å¼\n\nvar ispalindrome = function(s) {\n    let i = 0, j = s.length - 1\n    s = s.tolowercase()\n    function isvalid(str) {\n        // const reg = /\\w/ , å¶ä¸­åå«ä¸åçº¿ï¼ä¸æ­£ç¡®\n        const reg = /[0-9a-za-z]/\n        return reg.test(str)\n    }\n    while (j >= i) {\n        while (!isvalid(s[j])) j--\n        while (!isvalid(s[i])) i++\n        if (s[i] !== s[j]) return false\n        i++\n        j--\n    }\n    return true\n};\n\n\n\n# xçå¹³æ¹æ ¹\n\n * leetcode69\n\nvar mysqrt = function(x) {\n    let left = 0, right = x, ans = -1\n    while (left <= right) {\n        mid = math.floor((left + right) / 2)\n        if (mid * mid <= x) {\n            left = mid + 1\n            ans = mid // ä¿è¯ç»ææ¯åä¸åæ´çï¼å¾å·§å¦\n        } else if (mid * mid > x) {\n            right = mid - 1\n        }\n    }\n    return ans\n};\n',charsets:{cjk:!0}},{title:"Ethers.js",frontmatter:{},regularPath:"/blockchain/ethersjs.html",relativePath:"blockchain/ethersjs.md",key:"v-b1fb6c42",path:"/blockchain/ethersjs.html",lastUpdated:"5/23/2025, 5:16:31 PM",lastUpdatedTimestamp:1747991791e3,headersStr:null,content:"# Ethers.js\n\n * Github: https://github.com/ethers-io/ethers.js\n * å®æ¹ææ¡£ï¼https://docs.ethers.org/v5/",normalizedContent:"# ethers.js\n\n * github: https://github.com/ethers-io/ethers.js\n * å®æ¹ææ¡£ï¼https://docs.ethers.org/v5/",charsets:{cjk:!0}},{title:"å¸¸è§æ¦å¿µ",frontmatter:{},regularPath:"/blockchain/base.html",relativePath:"blockchain/base.md",key:"v-06da033f",path:"/blockchain/base.html",headers:[{level:2,title:"NFT",slug:"nft",normalizedTitle:"nft",charIndex:11},{level:3,title:"åè´¨å",slug:"åè´¨å",normalizedTitle:"åè´¨å",charIndex:47},{level:3,title:"éåè´¨å",slug:"éåè´¨å",normalizedTitle:"éåè´¨å",charIndex:46},{level:3,title:"NFT",slug:"nft-2",normalizedTitle:"nft",charIndex:11},{level:3,title:"ERC20/ERC721",slug:"erc20-erc721",normalizedTitle:"erc20/erc721",charIndex:564},{level:2,title:"DAPP",slug:"dapp",normalizedTitle:"dapp",charIndex:1967},{level:2,title:"Defi",slug:"defi",normalizedTitle:"defi",charIndex:2299},{level:2,title:"DAO",slug:"dao",normalizedTitle:"dao",charIndex:2907},{level:2,title:"å±è¯æºå¶",slug:"å±è¯æºå¶",normalizedTitle:"å±è¯æºå¶",charIndex:3235},{level:2,title:"æ¸ç©ºæ",slug:"æ¸ç©ºæ",normalizedTitle:"æ¸ç©ºæ",charIndex:3445},{level:2,title:"æºè½åçº¦",slug:"æºè½åçº¦",normalizedTitle:"æºè½åçº¦",charIndex:426},{level:2,title:"MetaMask/DAPP",slug:"metamask-dapp",normalizedTitle:"metamask/dapp",charIndex:3939},{level:2,title:"æè´§åç°è´§",slug:"æè´§åç°è´§",normalizedTitle:"æè´§åç°è´§",charIndex:4649},{level:3,title:"1. ç°è´§ï¼Spotï¼",slug:"_1-ç°è´§-spot",normalizedTitle:"1. ç°è´§ï¼spotï¼",charIndex:4659},{level:3,title:"2. æè´§ï¼Futuresï¼",slug:"_2-æè´§-futures",normalizedTitle:"2. æè´§ï¼futuresï¼",charIndex:4883},{level:3,title:"ä¿è¯éå¶åº¦",slug:"ä¿è¯éå¶åº¦",normalizedTitle:"ä¿è¯éå¶åº¦",charIndex:5065},{level:2,title:"åç©ºä¸åå¤",slug:"åç©ºä¸åå¤",normalizedTitle:"åç©ºä¸åå¤",charIndex:5768}],lastUpdated:"6/20/2025, 5:49:03 PM",lastUpdatedTimestamp:1750412943e3,headersStr:"NFT åè´¨å éåè´¨å NFT ERC20/ERC721 DAPP Defi DAO å±è¯æºå¶ æ¸ç©ºæ æºè½åçº¦ MetaMask/DAPP æè´§åç°è´§ 1. ç°è´§ï¼Spotï¼ 2. æè´§ï¼Futuresï¼ ä¿è¯éå¶åº¦ åç©ºä¸åå¤",content:"# å¸¸è§æ¦å¿µ\n\n\n# NFT\n\nNFT å¨ç§°ä¸º Non-fungible tokenï¼è§£éä¸ºéåè´¨åä»£å¸ã\n\n\n# åè´¨å\n\nåè´¨åä»£å¸çå¼åæ¹å¼å³å®äºæ¯ä¸ä¸ªä»£å¸é½æ¯ç¸åçãä¸ä¸ªåè´¨åä»£å¸å¯ä»¥ä¸ä»»ä½ä¸ä¸ªåç±»ä»£å¸è¿è¡äº¤æ¢ãè¿äºä»£å¸æ¯å®å¨ç¸åçï¼å æ­¤åè´¨åä»£å¸å¯ä»¥äºæ¢ãäºå®ä¸ï¼å¤§é¨åå å¯è´§å¸æ¯åè´¨åçãä¾å¦ï¼æ¯ç¹å¸åä»¥å¤ªå¸å°±æ¯åè´¨åçãä¸ä¸ªæ¯ç¹å¸ï¼æå¶ä¸­ä¸é¨åï¼å¯ä»¥ä¸å¦ä¸ä¸ªä»£å¸äºæ¢ï¼å ä¸ºå®ä»¬ä»£è¡¨ç¸åçä»·å¼ãä»¥å¤ªå¸ä¹æ¯å¦æ­¤ã\n\n\n# éåè´¨å\n\nèéåè´¨åèµäº§ä¸è½äºæ¢ãæ¯ä¸ä¸ªéåè´¨åèµäº§é½æ¯ç¬ä¸æ äºçï¼ä¸ä»»ä½å¶ä»èµäº§çä»·å¼é½ä¸ç¸åã éåè´¨åèµäº§ä¸è¬æ¯æ¶èåï¼ä½ä¹ä¸å¨æ¯ãæ¯å¦ï¼ä¸è¾æ±½è½¦å°±æ¯ä¸ä¸ªéåè´¨åååãå¦ææ¨æè½¦éå»ç»´ä¿®ï¼å¯¹æ¹ç»æ¨å¦ä¸è¾è½¦åµæ´å¥½çè½¦åç¨çï¼æ¨ä¼å¾é«å´ãå¦æè¿è¾è½¦çè½¦åµè¿ä¸å¦æ¨èªå·±çè½¦ï¼æ¨å°±ä¼ä¸é«å´ãä½è¿è¾è½¦åæ¨çè½¦ä»·å¼ä¸åï¼æä»¥å®æ¯éåè´¨åååã\n\n\n# NFT\n\nNFT æ¯ä¸ç§å å¯ä»£å¸ï¼åºäºä»¥å¤ªåç ERC-721 ä¸å¯åå²æºè½åçº¦ï¼æ¯ä¸ä¸ªé½æ¯ç¬ä¸æ äºçï¼å¯ç¨äºè¿½è¸ªä¸ªäººç¥è¯äº§æã\n\nNFT æ¯ä¸ç§æ°å­èµäº§ï¼å¶åå»ºæ¹å¼æ¯å¨æºè½åçº¦ä¸­ç¼åä»£ç ãNFT æ æ³å¤å¶ï¼å æ­¤ä»£è¡¨çç¬ä¸æ äºçäºç©ï¼å¶æ§è´¨ç±»ä¼¼äºæ¶èåãä¸ä¸ª NFT ä¸è½ä¸å¦ä¸ä¸ª NFT äºæ¢ï¼å ä¸ºæ¯ä¸ª NFT æ¬èº«é½åå«äºç¬ç¹çåå®¹ã\n\n\n# ERC20/ERC721\n\nERC æ¯ Ethereum Request for Comments çç¼©åï¼å³ä»¥å¤ªåå¾æ±æè§ï¼æ¯ä»¥å¤ªåå¼åèçåè®®ææ¡ï¼æ¯ä»¥å¤ªåæºè½åçº¦å¼åäººåä½¿ç¨çææ¯ææ¡£ï¼ä¸ºä»¥å¤ªåçæç³»ç»ä¸­çç¹å®ç¨æ·ç»æä¾æ¹æ³ãåæ°ãç ç©¶åç¹å¾çè§èã ä»¥å¤ªåç ERC æ åæå¾å¤ï¼ç®åä½¿ç¨æå¤çéè¯æ åä¸ºï¼ERC-20ãERC-777ãERC-721 å ERC-1155ã\n\n# ERC20ï¼åè´¨åä»£å¸æ åï¼\n\næ ¸å¿ç¹æ§ï¼\n\n 1. å¯æ¿ä»£æ§ï¼æ¯ä¸ªä»£å¸å®å¨ç¸åï¼å¦1 USDT = 1 USDTï¼ï¼å¯æ éåå²ï¼å¦0.1ä¸ªETHï¼ã\n 2. ç®åç»æï¼éè¿balanceOfï¼æ¥è¯¢ä½é¢ï¼åtransferï¼è½¬è´¦ï¼ç­å½æ°å®ç°åºç¡åè½ã\n 3. å¸ååºæ¯ï¼ç¨³å®å¸ï¼USDTãUSDCï¼ãå¹³å°å¸ï¼UNIï¼ãæ²»çä»£å¸ï¼COMPï¼ç­ã è½¬è´¦ä¼å¿ï¼\n\n * ä½ææ¬ï¼äº¤ææ°æ®éå°ï¼ä»éæå®éé¢åæ¥æ¶å°åï¼ï¼Gasè´¹ä½ã\n * é«å¼å®¹æ§ï¼ææä»¥å¤ªåé±ååçæ¯æERC20ï¼æ éé¢å¤ééã\n * æµå¨æ§å¼ºï¼å¹¿æ³ç¨äºäº¤ææãDeFiåè®®ï¼è½¬è´¦å³ä»£è¡¨ä»·å¼è½¬ç§»ã\n\n# ERC721ï¼éåè´¨åä»£å¸æ åï¼\n\næ ¸å¿ç¹æ§ï¼\n\n 1. å¯ä¸æ§ï¼æ¯ä¸ªä»£å¸ç¬ç«å­å¨ï¼å¦CryptoPunks #8348ï¼ï¼ä¸å¯åå²ã\n 2. åæ°æ®æ¯æï¼å¯ç»å®å¾çãå±æ§ç­é¾ä¸ä¿¡æ¯ï¼éè¿tokenURIå½æ°ï¼ã\n 3. å¸ååºæ¯ï¼æ°å­èºæ¯åï¼BAYCï¼ãæ¸¸æéå·ï¼Axie Infinityï¼ãååï¼ENSï¼ã è½¬è´¦ç¹ç¹ï¼\n\n * å¤æåº¦é«ï¼éä¼ éToken IDãåæ°æ®åå¸ç­ä¿¡æ¯ï¼äº¤ææ°æ®éæ´å¤§ã\n * Gasè´¹æ´é«ï¼åæ¬¡æä½ææ¬å¯è½è¾¾ERC20çæ°åï¼å°¤å¶æ¶åå¤æé»è¾æ¶ï¼ã\n * åè½æ©å±ï¼éæ¯æsafeTransferFromç­å®å¨å½æ°é²æ­¢æ°æ®ä¸¢å¤±ã\n\n# ä¸ºä½è½¬è´¦ä¼åéERC20ï¼\n\n 1. ç»æµæ§ï¼ ERC20è½¬è´¦ä»éè®°å½éé¢åå°åï¼æ°æ®éå°ï¼ERC721éåå«Token IDãåæ°æ®ç­ï¼å¯¼è´Gasè´¹æ¾èå¢å ãä¾å¦ï¼åé1000 USDTï¼ERC20ï¼çGasè´¹å¯è½ä¸º0.1ï¼èåéä¸ä¸ªCryptoPunkï¼ERC721ï¼å¯è½è¾¾5ã\n 2. ææ¯å¼å®¹æ§ï¼ ææé±åé»è®¤éæERC20æ åï¼ç¨æ·æ éé¢å¤æä½ï¼ERC721éè°ç¨ç¹å®å½æ°ï¼å¦safeTransferFromï¼ï¼é¨åé±åéæå¨å¼å¯âNFTæ¯æâåè½ã\n 3. åºæ¯ééæ§ï¼ ERC20å¤©ç¶ééä»·å¼ä¼ è¾åºæ¯ï¼å¦æ¯ä»ãåè´·ï¼ï¼ERC721çç¬ç¹æ§ä½¿å¶æ´éåèµäº§ç¡®æï¼å¦æ°å­æææè¯æï¼ï¼ä½æ¥å¸¸è½¬è´¦éæ±è¾ä½ã\n 4. æµå¨æ§ç½ç»æåºï¼ 90%ä»¥ä¸çDeFiåè®®åäº¤ææä»æ¯æERC20ï¼è½¬è´¦ERC20å¯ç´æ¥åä¸äº¤æãè´¨æ¼ç­çæï¼ERC721ééè¿ä¸ç¨å¸åºï¼å¦OpenSeaï¼äº¤æï¼æµå¨æ§åæ£ã\n\n# æ»ç»\n\n * ERC20ï¼ä»·å¼è½¬ç§»çâéç¨è´§å¸âï¼ä½ææ¬ãé«æçï¼éåæ¥å¸¸éèæ´»å¨ã\n * ERC721ï¼æ°å­èµäº§çâäº§æè¯ä¹¦âï¼éè¿å¯ä¸æ§åé ç¨ç¼ºæ§ï¼ä½è½¬è´¦ææ¬é«ä¸çæåæ£ã å æ­¤ï¼å½ç¨æ·éè¦åé±åè½¬è´¦æ¶ï¼ERC20å å¶æ ååãä½ææ¬åå³æ¶å¯ç¨æ§æä¸ºé¦éï¼èERC721æ´å¤ç¨äºç¹å®èµäº§çæææè½¬ç§»ãç±äº NFT æ¯ä¸å¯å¤å¶çæ°å­æææè¯ä¹¦ï¼å®å¯è®©ä½èæ ¹æ®èªå·±çææ¿è¿è¡è½¬å®ãåéæè®¸å¯æ°å­èµäº§çæ°å­æå©ï¼è¿ä¹ä½¿èºæ¯å®¶å¯ä»¥å®å¨èªç±å°ä¹°åèºæ¯åï¼èæ éç¬¬ä¸æ¹çåä¸ã\n\n\n# DAPP\n\nDAPP æ¯ Decentralized Application çç¼©åï¼å³å»ä¸­å¿ååºç¨ï¼ä¹æäººç§°ä¸ºåå¸å¼åºç¨ãå®è¢«è®¤ä¸ºå¼å¯äºåºåé¾3.0æ¶ä»£ã\n\nDAPP å°±æ¯å¨åºå±åºåé¾å¹³å°è¡ççåç§åå¸å¼åºç¨ï¼æ¯åºåé¾ä¸çä¸­çæå¡æä¾å½¢å¼ãDAPP ä¹äºåºåé¾ï¼æäºç±»ä¼¼ APP ä¹äºIOS å Androidã\n\nDApp åè®¸å¤§å®¶ä½¿ç¨åºåé¾ç½ç»ï¼å¶ä¸­æºè½åçº¦åè®¸å®è¿æ¥å°åºåé¾ãä¾å¦ä¸ä¸ªæ¾ç»å¾ç«çæ¸¸æ CryptoKittiesã\n\n * ä¼ ç»çåºç¨ç¨åºï¼åç«¯âAPIâæ°æ®åº\n * DApp: ç±»ä¼¼äºä¼ ç»çåºç¨ç¨åºãåç«¯ä½¿ç¨å®å¨ç¸åçææ¯æ¥æ¸²æé¡µé¢ãä¸ä¸ªå³é®çåºå«æ¯ï¼ä¸æ¯è¿æ¥å°æ°æ®åºçAPIï¼èæ¯éè¿æºè½åçº¦è¿æ¥å°åºåé¾ï¼åç«¯âæºè½åçº¦âåºåé¾\n\n\n# Defi\n\nDeFi çå¨ç§°æ¯ Decentralized Financeï¼å³ å»ä¸­å¿åéèï¼å½åå ä¹å¨é¨ç DeFi é¡¹ç®é½å¨ä»¥å¤ªåçåºåé¾ä¸è¿è¡ã\n\næä»¬å¨ç°å®ä¸çä¸­çåæ¬¾ãè½¬è´¦ãè´·æ¬¾é½æ¯å¨é¶è¡/éèå¬å¸ç­ç¬¬ä¸æ¹æºæä½ä¸ºæä¿çæåµä¸åä¸çãå»ä¸­å¿åçéèï¼æçå°±æ¯æä»¬éè¿åºåé¾è¿ä¸ªå»ä¸­å¿åçæ°æ®åºåæºè½åçº¦ç­ææ¯ä»£æ¿äºé¶è¡/éèå¬å¸ç­ç¬¬ä¸æ¹æºæãåå»ºäºä¸ä¸ªæ²¡æä¸­å¿æºæææ§ï¼äººäººé½å¯ä»¥èªç±åä¸çéèç³»ç»ã\n\n> æä»¬é½ç¥é USDT æ¯å±äºä¸­å¿åçç¨³å®å¸ãå¨ DeFi çä¸çï¼ç¨çæ¯å»ä¸­å¿åçç¨³å®å¸ï¼æä»¬ç§°ä¹ä¸º DAIã ä¾å¦é¡¹ç® M åè¡äºå±äºèªå·±çä»£å¸ mãç±äºæ¯å»ä¸­å¿åçå¹³å°ï¼æææ¯ä¸ä¸ªææ m çç¨æ·é½å¯ä»¥åä¸å¹³å°ä¸éå¤§å³ç­çæç¥¨ï¼å¦å¤ä¹ä½ä¸ºæ¬å¹³å°åè´·çå©æ¯ãè¿ä¸ªå¹³å°ä¸æä¸¤ä¸ªæ± å­ãä¸ä¸ªå«åä»¥å¤ªæ± ï¼ä¸ä¸ªå«åæµæ¼ä»ãé¦åï¼ä½ éè¦æ¿çä¸å®çèµäº§å»ä»¥å¤ªæ± éè¿è¡æµæ¼ï¼æºè½åçº¦å¨å¯¹ä½ çèµäº§è¿è¡ä¼°å¼åè¿è¿ä½ ä¸å®çä»£å¸ä½ä¸ºæµæ¼åçå­è¯ãæ¯å¦ä½ æµæ¼ ETH,å°±ç»ä½ è¿è¿ PETH(éåä»¥å¤ª)ãå¶æ¬¡ï¼ä½ åæ¿çè¿ä¸ª PETH å»æµæ¼ä»ãæµæ¼ä»ä¼çæä½ çåºå¡ï¼éå®ä½ çèµäº§ï¼å¹¶ç»ä½ åæ¾ç¸åºæ°éç DAIï¼ä½ å¯ä»¥æ¿ç DAI å»åæ¢æ³å¸æ¶è´¹ãæåå½ä½ æ³è¦èµåèªå·±èµäº§çæ¶åï¼ä½ ä¸ä»è¦è¿è¿ç¸åºæ°éç DAIï¼è¿è¦è´­ä¹° m ä»£å¸ä½ä¸ºå©æ¯ï¼äº¤ç» M å¹³å°ãå¦æä½ æåæ²¡æé±èµåèµäº§ï¼é£ä¹å¹³å°å°±ä¼æåä½ çèµäº§å®ææ¸ç®ã\n\n\n# DAO\n\nDAO çå¨åæ¯ decentralized autonomous organization ï¼ä¸­ææ¯ å»ä¸­å¿åçèªæ²»ç»ç» ãDAO çä¸»è¦ç®çæ¯è¶è¶ä¼ ç»ç»ç»å½¢å¼ï¼ä»¥åå¸å¼ãéæåä¿¡ä»»æå°åçæ¹å¼æ¥è¿è¡éä½å³ç­ãç®èè¨ä¹ï¼DAO æ¯ä¸ç§æ°åçç»ç»æ¶æãäººä»¬å¯ä»¥ç¬ç«éªè¯ç»ç»çè¿è¡æ¹å¼ï¼å¹¶åºäºè¿æ ·çå±è¯æçå±åçç®æ åªåã\n\nDAO çç¬ç¹ä¹å¤å¨äºå¶å©ç¨äºåºåé¾æºè½åçº¦ï¼å°é¨åæå¨é¨æµç¨åå¥åçº¦ä»£ç ä¸­ï¼ä»¥æ§è¡å³ç­å¹¶åéæææãæºè½åçº¦çåºç°ä¸ºåæ°å¥ å®äºåºç¡ï¼å ä¸ºæºè½åçº¦å¯ä»¥è®© DAO çæ²»çè§åå®å¨éæåï¼èä¸æ æ³è¢«ä»»ä½ DAO æåæå¤é¨æ¹ç¯¡æ¹ãè¿æ¯å ä¸ºåºåé¾ï¼å³æºè½åçº¦ï¼è¿è¡çä»£ç å¯ä»¥è¢«å¬å¼å®¡è®¡ï¼å¹¶ç±å»ä¸­å¿åçèç¹ç½ç»ä¿éå®å¨ã\n\n\n# å±è¯æºå¶\n\nå±è¯æºå¶æ¯åºåé¾ææ¯çæ ¸å¿åºç¡ï¼ç¨äºç¡®ä¿åå¸å¼ç½ç»ä¸­çèç¹ï¼åä¸èï¼å¨æ²¡æä¸­å¿åæå¨çæåµä¸ï¼è¾¾æå¯¹æ°æ®ä¸è´æ§çå±åè®¤å¯ãå®çæ¬è´¨æ¯è§£å³ä¿¡ä»»é®é¢ï¼è®©äºä¸ä¿¡ä»»çèç¹éè¿ç¹å®è§åå®ç°åä½ï¼ä¿è¯åºåé¾çå®å¨æ§ãå»ä¸­å¿ååä¸å¯ç¯¡æ¹æ§ãå¨ä¼ ç»ä¸­å¿åç³»ç»ä¸­ï¼å¦é¶è¡ï¼ï¼æ°æ®ççå®æ§ç±ä¸­å¿æºæï¼å¦æå¡å¨ï¼ä¿è¯ãä½å¨åºåé¾çåå¸å¼ç½ç»ä¸­ï¼ææèç¹å¹³ç­åä¸ï¼å¿é¡»éè¿å±è¯æºå¶è§£å³ï¼åºæ¯çå±è¯æºå¶ PoW, PoSç­ã\n\n\n# æ¸ç©ºæ\n\næ¬è´¨æ¯ä¸ç§è¥éæ´»å¨ï¼é¡¹ç®æ¹ï¼éå¸¸æ¯æ°å´çåºåé¾é¡¹ç®ï¼ä¸ºäºæ¨å¹¿äº§åãæ©å¤§ç¨æ·ç¾¤ææµè¯åè½ï¼ä¼å°ä»£å¸åè´¹ååç»ç¹å®ç¨æ·ãç¨æ·éè¿å®æä»»å¡ï¼å¦ç¤¾äº¤åªä½äºå¨ãæµè¯äº§åç­ï¼åä¸å¶ä¸­ï¼æ éæå¥èµéæä»éå°éæç»­è´¹ã\n\n * ä½ææ¬é«åæ¥æ½åï¼é¨åç©ºæä»£å¸ä¸çº¿åä»·å¼é£åï¼å¦APTç©ºææ¾è¾¾ä¸åäººæ°å¸ï¼ï¼ç¨æ·å¯éè¿åºå®åç°ã\n * æ¶é´æå¥ï¼ç­éé¡¹ç®ãå®æä»»å¡èæ¶è¾å¤ï¼éå¹³è¡¡æçã\n * è¯éªé£é©ï¼èåç©ºææ³æ»¥ï¼å¸¸è§éªå±åæ¬è¦æ±æ¯ä»âåçº§è´¹âãæä¾ç§é¥ææææ¶æåçº¦ï¼å¯¼è´èµäº§è¢«çã\n\n\n# æºè½åçº¦\n\næºè½åçº¦æ¯é¨ç½²å¨åºåé¾ä¸çèªå¨åæ§è¡ç¨åºï¼ä»£ç å³æ³å¾ï¼Code is Lawï¼\n\næ ¸å¿ç¹æ§ï¼\n\n * ä¸å¯ç¯¡æ¹ï¼ä¸æ¦é¨ç½²ï¼ä»£ç æ æ³ä¿®æ¹\n * éæå¯ä¿¡ï¼æææä½è®°å½å¨å¬å¼è´¦æ¬\n * èªå¨æ§è¡ï¼æ»¡è¶³æ¡ä»¶æ¶èªå¨è§¦åé¢è®¾æä½\n\n> ä¸ºä»ä¹é¨ç½²æºè½åçº¦å°åºåé¾è¦æ¯ä» gas\n\nä»¥å¤ªåæä¾å¾çµå®å¤çå¹³å°ï¼ä»èä½¿å¾ä»¥å¤ªåç¸å¯¹äºæ¯ç¹å¸å¯ä»¥å®ç°å¾å¤åè½ï¼ä½è¿ä¹å¯¼è´æ æ³é¢ç¥æºè½åçº¦æ¯å¦ä¼å¯¼è´æ­»å¾ªç¯ï¼åæºé®é¢ï¼å æ­¤ï¼ä»¥å¤ªåå¼å¥æ±½æ²¹è´¹æºå¶ï¼Gas æºå¶è¦æ±æ¯æ¡æä»¤ä»è´¹ï¼ä»ç»æµå±é¢éå¶äºæ¶æç¨æ·ã\n\n\n# MetaMask/DAPP\n\n * MetaMaskæ¯ä¸ä¸ªé±ååºç¨ï¼å®æ¯æå¤ç§åå¼æ¹å¼ï¼åæ¬æ³å¸å¥å£ï¼æ¯å¦éè¿ç¬¬ä¸æ¹æå¡å¦TransakãMoonPayæWyreãè¿äºæå¡åè®¸ç¨æ·ç´æ¥ç¨ä¿¡ç¨å¡æé¶è¡è´¦æ·è´­ä¹°å å¯è´§å¸ï¼ç¶åè½¬å¥MetaMaské±åã\n   * é¶è¡å¡ â ç¬¬ä¸æ¹æ¯ä»ç½å³ â ä¸­å¿åäº¤ææ â ç¨æ·MetaMaskå°å\n * èDAppéå¸¸æ¯å»ä¸­å¿ååºç¨ï¼å®ä»¬ä¸»è¦å¤çé¾ä¸æä½ï¼æ¯å¦æºè½åçº¦äº¤äºï¼ä½å¯è½ä¸ç´æ¥éææ³å¸å¥å£ï¼å ä¸ºè¿æ¶åå°åè§ãçç®¡åå¤æçæ¯ä»å¤çæµç¨\n   * ç¨æ·é±å â è°ç¨DAppæºè½åçº¦ â æ´æ°é¾ä¸ä½é¢\n\n> metamaskæ¯åºåé¾çå»ä¸­å¿åé±åï¼è·æä»¬å¹³æ¶ç¨çappä¸åï¼å®æ¯ä¸æ¬¾å»ä¸­å¿åçåºç¨ï¼å®æ¹å¹¶ä¸ä¼ä¿å­ä½ çå¯ç ï¼ä½ ä¹ä¸è½ä½¿ç¨å®æ¹æ¥æ¾åå¯ç ï¼ä½ åªè½æèªå·±çå¯ç åå¨çº¸ä¸æ¾å¨ä¿é©ç®±éãèä¸éé¢å­æ¾çé±æèå¸å¹¶ä¸åä½ å°é±å­å¨é¶è¡éï¼é¶è¡å¦æåé­äºé£ä½ çé±ä¹å¯è½æ²¡äºï¼ä½æ¯è¿æ¬¾é±åå°±æ¯ä½ èªå·±çï¼é±ä¸ä¼æ¶å¤±ã\n\nä¸¾å ä¸ªä¾å­ï¼\n\nç¹æ§     COINBASE          METAMASK      å¸å®ï¼BINANCEï¼\næ§è´¨     ä¸­å¿åäº¤ææï¼å·²ä¸å¸        é±åå·¥å·+DEXå¥å£    ä¸­å¿åäº¤ææ\nåè§æ§    é«ï¼å¤å½çç§ï¼           æ ï¼ç¨æ·èªæé£é©ï¼     ä¸­ï¼å¨çå¸å±ä½é¨åå°åºåéï¼\næ¯æçé¾   æéï¼BTCãETHç­ä¸»æµé¾ï¼   å¨é¾å¼å®¹ï¼EVMçæï¼   å¹¿æ³ï¼BTCãETHãBNB Chainç­ï¼\nè´¹ç¨     è¾é«ï¼äº¤æè´¹+æç°è´¹ï¼       ä»Gasè´¹         è¾ä½ï¼ç°è´§0.1%ï¼åçº¦0.02%ï¼\n\n\n# æè´§åç°è´§\n\n\n# 1. ç°è´§ï¼Spotï¼\n\n * å®ä¹ï¼ç°è´§äº¤ææ¯å³æ¶æç­æäº¤å²çä¹°åè¡ä¸ºãä¹°ååæ¹çº¦å®å¨äº¤æå®æåç«å³ææç­æ¶é´åï¼éå¸¸2ä¸ªå·¥ä½æ¥åï¼å®ææ çèµäº§çäº¤ä»åèµéç»ç®ã\n * ç¹ç¹\n   * å®ç©æéèèµäº§ç´æ¥äº¤å²ï¼å¦é»éãåæ²¹ãå¤æ±ãè¡ç¥¨ç­ã\n   * ä»·æ ¼åæ å½åå¸åºä¾éï¼ç°è´§ä»·æ ¼ç±å³æ¶çä¾æ±å³ç³»å³å®ã\n   * æ æ ææä½æ æï¼éå¸¸éè¦å¨é¢èµéäº¤æï¼å¦è¡ç¥¨éå¨é¢æ¯ä»ï¼ã\n * ä¾å­ï¼ä½ ä»å¤©ç¨äººæ°å¸ä¹°å¥1åé»éï¼æå¤©å°±è½æ¿å°å®ç©é»éã\n\n\n# 2. æè´§ï¼Futuresï¼\n\n * å®ä¹ï¼æè´§æ¯æ åååçº¦ï¼çº¦å®å¨æªæ¥æä¸ç¹å®æ¥æï¼å°ææ¥ï¼ï¼ä»¥é¢åç¡®å®çä»·æ ¼ä¹°å¥æååºä¸å®æ°éçæ çèµäº§ï¼å¦ååãè¡æãå¤æ±ç­ï¼ã\n * æ æäº¤æï¼åªéæ¯ä»åçº¦ä»·å¼çä¸å°é¨åä½ä¸ºä¿è¯éï¼å¦5%-20%ï¼ï¼å¯æ¾å¤§æ¶çåé£é©ã\n * ä¾å­ï¼3ä¸ªæåä»¥5000å/å¨çä»·æ ¼ä¹°å¥10å¨å¤§è±ï¼æ è®ºå°ææ¶å¸åºä»·å¦ä½ï¼é½æåçº¦æ§è¡ã\n\n\n# ä¿è¯éå¶åº¦\n\nç¨âå®éâæ¬å¨å¤§é¢äº¤æ\n\n * å®ä¹ï¼æè´§äº¤æä¸éè¦æ¯ä»åçº¦å¨é¢ä»·å¼ï¼åªéç¼´çº³ä¸å®æ¯ä¾çä¿è¯éï¼éå¸¸ä¸ºåçº¦ä»·å¼ç5%-20%ï¼ã\n\n * ä¾å­\n   \n   * åè®¾é»éæè´§åçº¦ä»·å¼100ä¸åï¼1æ=1å¬æ¤é»éï¼åè®¾ä»·æ ¼100ä¸å/å¬æ¤ï¼ã\n   * äº¤ææè§å®ä¿è¯éæ¯ä¾ä¸º10%ï¼åæèµèåªéæ¯ä»10ä¸åå³å¯ä¹°å¥1æåçº¦ã\n   * æ­¤æ¶ï¼10ä¸åæ§å¶äº100ä¸åçèµäº§ï¼æ æç = 100ä¸ / 10ä¸ = 10åã\n\n * æ¶çæ¾å¤§\n   \n   * è¥é»éä»·æ ¼ä¸æ¶¨10%ï¼è³110ä¸å/å¬æ¤ï¼ï¼åçº¦ä»·å¼åä¸º110ä¸åã\n   * æèµèååºåçº¦åï¼çå©ä¸º10ä¸åï¼110ä¸ - 100ä¸ï¼ã\n   * æ¶çç = çå© / åå§æå¥ = 10ä¸ / 10ä¸ = 100%ï¼ç°è´§æ¶çä»10%ï¼ã\n\n * é£é©æ¾å¤§\n   \n   * è¥é»éä»·æ ¼ä¸è·10%ï¼è³90ä¸å/å¬æ¤ï¼ï¼åçº¦ä»·å¼åä¸º90ä¸åã\n   * æèµèäºæ10ä¸åï¼äºæç = 10ä¸ / 10ä¸ = 100%ï¼ç°è´§äºæä»10%ï¼ã\n   * è¥æªåæ¶è¿½å ä¿è¯éï¼å¯è½è¢«å¼ºå¶å¹³ä»ï¼çä»ï¼ã\n\næ­¥éª¤             é»éä»·æ ¼    è´¦æ·ä½é¢    æä½\nå¼ä»ï¼ä¹°å¥1æï¼       100ä¸å   10ä¸å    ç¼´çº³åå§ä¿è¯é10ä¸å\nä»·æ ¼è·è³93ä¸å       93ä¸å    3ä¸å     è§¦åè¿½å ä¿è¯ééç¥ï¼éè¡¥è³7ä¸ï¼\næªè¿½å ä¿è¯é         90ä¸å    0ä¸å     å¼ºå¶å¹³ä»ï¼äºæ10ä¸å\næç«¯æåµï¼è·è³80ä¸åï¼   80ä¸å    -10ä¸å   ç©¿ä»ï¼éè¿½å å¿è¿10ä¸å\n\n\n# åç©ºä¸åå¤\n\n# 1. åå¤ï¼Buy/Longï¼\n\n * å®ä¹ï¼ä¹°å¥æç§èµäº§ï¼é¢æå¶ä»·æ ¼ä¸æ¶¨ï¼æªæ¥ä»¥æ´é«ä»·æ ¼ååºè·å©ã\n * ç±»æ¯ï¼ç¸å½äºâä½ä¹°é«åâï¼å¦è¡ç¥¨æèµã\n * æè´§/æ°¸ç»­åçº¦ä¸­çæä½\n   * æ¯ä»ä¿è¯éï¼å¼ä»ä¹°å¥åçº¦ï¼å¦é»éæè´§ï¼ã\n   * è¥ä»·æ ¼ä¸æ¶¨ï¼å¹³ä»æ¶ååºåçº¦ï¼èµåå·®ä»·ã\n\n# 2. åç©ºï¼Sell/Shortï¼\n\n * å®ä¹ï¼åå¥å¹¶ååºæç§èµäº§ï¼é¢æå¶ä»·æ ¼ä¸è·ï¼æªæ¥ä»¥æ´ä½ä»·æ ¼ä¹°åå½è¿ï¼èµåå·®ä»·ã\n * ç±»æ¯ï¼ç¸å½äºâé«åä½ä¹°âï¼å¦èå¸åç©ºè¡ç¥¨ã\n * æè´§/æ°¸ç»­åçº¦ä¸­çæä½\n   * æ¯ä»ä¿è¯éï¼å¼ä»ååºåçº¦ï¼å¦æ¯ç¹å¸æ°¸ç»­åçº¦ï¼ã\n   * è¥ä»·æ ¼ä¸è·ï¼å¹³ä»æ¶ä¹°å¥åçº¦ï¼èµåå·®ä»·ã",normalizedContent:"# å¸¸è§æ¦å¿µ\n\n\n# nft\n\nnft å¨ç§°ä¸º non-fungible tokenï¼è§£éä¸ºéåè´¨åä»£å¸ã\n\n\n# åè´¨å\n\nåè´¨åä»£å¸çå¼åæ¹å¼å³å®äºæ¯ä¸ä¸ªä»£å¸é½æ¯ç¸åçãä¸ä¸ªåè´¨åä»£å¸å¯ä»¥ä¸ä»»ä½ä¸ä¸ªåç±»ä»£å¸è¿è¡äº¤æ¢ãè¿äºä»£å¸æ¯å®å¨ç¸åçï¼å æ­¤åè´¨åä»£å¸å¯ä»¥äºæ¢ãäºå®ä¸ï¼å¤§é¨åå å¯è´§å¸æ¯åè´¨åçãä¾å¦ï¼æ¯ç¹å¸åä»¥å¤ªå¸å°±æ¯åè´¨åçãä¸ä¸ªæ¯ç¹å¸ï¼æå¶ä¸­ä¸é¨åï¼å¯ä»¥ä¸å¦ä¸ä¸ªä»£å¸äºæ¢ï¼å ä¸ºå®ä»¬ä»£è¡¨ç¸åçä»·å¼ãä»¥å¤ªå¸ä¹æ¯å¦æ­¤ã\n\n\n# éåè´¨å\n\nèéåè´¨åèµäº§ä¸è½äºæ¢ãæ¯ä¸ä¸ªéåè´¨åèµäº§é½æ¯ç¬ä¸æ äºçï¼ä¸ä»»ä½å¶ä»èµäº§çä»·å¼é½ä¸ç¸åã éåè´¨åèµäº§ä¸è¬æ¯æ¶èåï¼ä½ä¹ä¸å¨æ¯ãæ¯å¦ï¼ä¸è¾æ±½è½¦å°±æ¯ä¸ä¸ªéåè´¨åååãå¦ææ¨æè½¦éå»ç»´ä¿®ï¼å¯¹æ¹ç»æ¨å¦ä¸è¾è½¦åµæ´å¥½çè½¦åç¨çï¼æ¨ä¼å¾é«å´ãå¦æè¿è¾è½¦çè½¦åµè¿ä¸å¦æ¨èªå·±çè½¦ï¼æ¨å°±ä¼ä¸é«å´ãä½è¿è¾è½¦åæ¨çè½¦ä»·å¼ä¸åï¼æä»¥å®æ¯éåè´¨åååã\n\n\n# nft\n\nnft æ¯ä¸ç§å å¯ä»£å¸ï¼åºäºä»¥å¤ªåç erc-721 ä¸å¯åå²æºè½åçº¦ï¼æ¯ä¸ä¸ªé½æ¯ç¬ä¸æ äºçï¼å¯ç¨äºè¿½è¸ªä¸ªäººç¥è¯äº§æã\n\nnft æ¯ä¸ç§æ°å­èµäº§ï¼å¶åå»ºæ¹å¼æ¯å¨æºè½åçº¦ä¸­ç¼åä»£ç ãnft æ æ³å¤å¶ï¼å æ­¤ä»£è¡¨çç¬ä¸æ äºçäºç©ï¼å¶æ§è´¨ç±»ä¼¼äºæ¶èåãä¸ä¸ª nft ä¸è½ä¸å¦ä¸ä¸ª nft äºæ¢ï¼å ä¸ºæ¯ä¸ª nft æ¬èº«é½åå«äºç¬ç¹çåå®¹ã\n\n\n# erc20/erc721\n\nerc æ¯ ethereum request for comments çç¼©åï¼å³ä»¥å¤ªåå¾æ±æè§ï¼æ¯ä»¥å¤ªåå¼åèçåè®®ææ¡ï¼æ¯ä»¥å¤ªåæºè½åçº¦å¼åäººåä½¿ç¨çææ¯ææ¡£ï¼ä¸ºä»¥å¤ªåçæç³»ç»ä¸­çç¹å®ç¨æ·ç»æä¾æ¹æ³ãåæ°ãç ç©¶åç¹å¾çè§èã ä»¥å¤ªåç erc æ åæå¾å¤ï¼ç®åä½¿ç¨æå¤çéè¯æ åä¸ºï¼erc-20ãerc-777ãerc-721 å erc-1155ã\n\n# erc20ï¼åè´¨åä»£å¸æ åï¼\n\næ ¸å¿ç¹æ§ï¼\n\n 1. å¯æ¿ä»£æ§ï¼æ¯ä¸ªä»£å¸å®å¨ç¸åï¼å¦1 usdt = 1 usdtï¼ï¼å¯æ éåå²ï¼å¦0.1ä¸ªethï¼ã\n 2. ç®åç»æï¼éè¿balanceofï¼æ¥è¯¢ä½é¢ï¼åtransferï¼è½¬è´¦ï¼ç­å½æ°å®ç°åºç¡åè½ã\n 3. å¸ååºæ¯ï¼ç¨³å®å¸ï¼usdtãusdcï¼ãå¹³å°å¸ï¼uniï¼ãæ²»çä»£å¸ï¼compï¼ç­ã è½¬è´¦ä¼å¿ï¼\n\n * ä½ææ¬ï¼äº¤ææ°æ®éå°ï¼ä»éæå®éé¢åæ¥æ¶å°åï¼ï¼gasè´¹ä½ã\n * é«å¼å®¹æ§ï¼ææä»¥å¤ªåé±ååçæ¯æerc20ï¼æ éé¢å¤ééã\n * æµå¨æ§å¼ºï¼å¹¿æ³ç¨äºäº¤ææãdefiåè®®ï¼è½¬è´¦å³ä»£è¡¨ä»·å¼è½¬ç§»ã\n\n# erc721ï¼éåè´¨åä»£å¸æ åï¼\n\næ ¸å¿ç¹æ§ï¼\n\n 1. å¯ä¸æ§ï¼æ¯ä¸ªä»£å¸ç¬ç«å­å¨ï¼å¦cryptopunks #8348ï¼ï¼ä¸å¯åå²ã\n 2. åæ°æ®æ¯æï¼å¯ç»å®å¾çãå±æ§ç­é¾ä¸ä¿¡æ¯ï¼éè¿tokenuriå½æ°ï¼ã\n 3. å¸ååºæ¯ï¼æ°å­èºæ¯åï¼baycï¼ãæ¸¸æéå·ï¼axie infinityï¼ãååï¼ensï¼ã è½¬è´¦ç¹ç¹ï¼\n\n * å¤æåº¦é«ï¼éä¼ étoken idãåæ°æ®åå¸ç­ä¿¡æ¯ï¼äº¤ææ°æ®éæ´å¤§ã\n * gasè´¹æ´é«ï¼åæ¬¡æä½ææ¬å¯è½è¾¾erc20çæ°åï¼å°¤å¶æ¶åå¤æé»è¾æ¶ï¼ã\n * åè½æ©å±ï¼éæ¯æsafetransferfromç­å®å¨å½æ°é²æ­¢æ°æ®ä¸¢å¤±ã\n\n# ä¸ºä½è½¬è´¦ä¼åéerc20ï¼\n\n 1. ç»æµæ§ï¼ erc20è½¬è´¦ä»éè®°å½éé¢åå°åï¼æ°æ®éå°ï¼erc721éåå«token idãåæ°æ®ç­ï¼å¯¼è´gasè´¹æ¾èå¢å ãä¾å¦ï¼åé1000 usdtï¼erc20ï¼çgasè´¹å¯è½ä¸º0.1ï¼èåéä¸ä¸ªcryptopunkï¼erc721ï¼å¯è½è¾¾5ã\n 2. ææ¯å¼å®¹æ§ï¼ ææé±åé»è®¤éæerc20æ åï¼ç¨æ·æ éé¢å¤æä½ï¼erc721éè°ç¨ç¹å®å½æ°ï¼å¦safetransferfromï¼ï¼é¨åé±åéæå¨å¼å¯ânftæ¯æâåè½ã\n 3. åºæ¯ééæ§ï¼ erc20å¤©ç¶ééä»·å¼ä¼ è¾åºæ¯ï¼å¦æ¯ä»ãåè´·ï¼ï¼erc721çç¬ç¹æ§ä½¿å¶æ´éåèµäº§ç¡®æï¼å¦æ°å­æææè¯æï¼ï¼ä½æ¥å¸¸è½¬è´¦éæ±è¾ä½ã\n 4. æµå¨æ§ç½ç»æåºï¼ 90%ä»¥ä¸çdefiåè®®åäº¤ææä»æ¯æerc20ï¼è½¬è´¦erc20å¯ç´æ¥åä¸äº¤æãè´¨æ¼ç­çæï¼erc721ééè¿ä¸ç¨å¸åºï¼å¦openseaï¼äº¤æï¼æµå¨æ§åæ£ã\n\n# æ»ç»\n\n * erc20ï¼ä»·å¼è½¬ç§»çâéç¨è´§å¸âï¼ä½ææ¬ãé«æçï¼éåæ¥å¸¸éèæ´»å¨ã\n * erc721ï¼æ°å­èµäº§çâäº§æè¯ä¹¦âï¼éè¿å¯ä¸æ§åé ç¨ç¼ºæ§ï¼ä½è½¬è´¦ææ¬é«ä¸çæåæ£ã å æ­¤ï¼å½ç¨æ·éè¦åé±åè½¬è´¦æ¶ï¼erc20å å¶æ ååãä½ææ¬åå³æ¶å¯ç¨æ§æä¸ºé¦éï¼èerc721æ´å¤ç¨äºç¹å®èµäº§çæææè½¬ç§»ãç±äº nft æ¯ä¸å¯å¤å¶çæ°å­æææè¯ä¹¦ï¼å®å¯è®©ä½èæ ¹æ®èªå·±çææ¿è¿è¡è½¬å®ãåéæè®¸å¯æ°å­èµäº§çæ°å­æå©ï¼è¿ä¹ä½¿èºæ¯å®¶å¯ä»¥å®å¨èªç±å°ä¹°åèºæ¯åï¼èæ éç¬¬ä¸æ¹çåä¸ã\n\n\n# dapp\n\ndapp æ¯ decentralized application çç¼©åï¼å³å»ä¸­å¿ååºç¨ï¼ä¹æäººç§°ä¸ºåå¸å¼åºç¨ãå®è¢«è®¤ä¸ºå¼å¯äºåºåé¾3.0æ¶ä»£ã\n\ndapp å°±æ¯å¨åºå±åºåé¾å¹³å°è¡ççåç§åå¸å¼åºç¨ï¼æ¯åºåé¾ä¸çä¸­çæå¡æä¾å½¢å¼ãdapp ä¹äºåºåé¾ï¼æäºç±»ä¼¼ app ä¹äºios å androidã\n\ndapp åè®¸å¤§å®¶ä½¿ç¨åºåé¾ç½ç»ï¼å¶ä¸­æºè½åçº¦åè®¸å®è¿æ¥å°åºåé¾ãä¾å¦ä¸ä¸ªæ¾ç»å¾ç«çæ¸¸æ cryptokittiesã\n\n * ä¼ ç»çåºç¨ç¨åºï¼åç«¯âapiâæ°æ®åº\n * dapp: ç±»ä¼¼äºä¼ ç»çåºç¨ç¨åºãåç«¯ä½¿ç¨å®å¨ç¸åçææ¯æ¥æ¸²æé¡µé¢ãä¸ä¸ªå³é®çåºå«æ¯ï¼ä¸æ¯è¿æ¥å°æ°æ®åºçapiï¼èæ¯éè¿æºè½åçº¦è¿æ¥å°åºåé¾ï¼åç«¯âæºè½åçº¦âåºåé¾\n\n\n# defi\n\ndefi çå¨ç§°æ¯ decentralized financeï¼å³ å»ä¸­å¿åéèï¼å½åå ä¹å¨é¨ç defi é¡¹ç®é½å¨ä»¥å¤ªåçåºåé¾ä¸è¿è¡ã\n\næä»¬å¨ç°å®ä¸çä¸­çåæ¬¾ãè½¬è´¦ãè´·æ¬¾é½æ¯å¨é¶è¡/éèå¬å¸ç­ç¬¬ä¸æ¹æºæä½ä¸ºæä¿çæåµä¸åä¸çãå»ä¸­å¿åçéèï¼æçå°±æ¯æä»¬éè¿åºåé¾è¿ä¸ªå»ä¸­å¿åçæ°æ®åºåæºè½åçº¦ç­ææ¯ä»£æ¿äºé¶è¡/éèå¬å¸ç­ç¬¬ä¸æ¹æºæãåå»ºäºä¸ä¸ªæ²¡æä¸­å¿æºæææ§ï¼äººäººé½å¯ä»¥èªç±åä¸çéèç³»ç»ã\n\n> æä»¬é½ç¥é usdt æ¯å±äºä¸­å¿åçç¨³å®å¸ãå¨ defi çä¸çï¼ç¨çæ¯å»ä¸­å¿åçç¨³å®å¸ï¼æä»¬ç§°ä¹ä¸º daiã ä¾å¦é¡¹ç® m åè¡äºå±äºèªå·±çä»£å¸ mãç±äºæ¯å»ä¸­å¿åçå¹³å°ï¼æææ¯ä¸ä¸ªææ m çç¨æ·é½å¯ä»¥åä¸å¹³å°ä¸éå¤§å³ç­çæç¥¨ï¼å¦å¤ä¹ä½ä¸ºæ¬å¹³å°åè´·çå©æ¯ãè¿ä¸ªå¹³å°ä¸æä¸¤ä¸ªæ± å­ãä¸ä¸ªå«åä»¥å¤ªæ± ï¼ä¸ä¸ªå«åæµæ¼ä»ãé¦åï¼ä½ éè¦æ¿çä¸å®çèµäº§å»ä»¥å¤ªæ± éè¿è¡æµæ¼ï¼æºè½åçº¦å¨å¯¹ä½ çèµäº§è¿è¡ä¼°å¼åè¿è¿ä½ ä¸å®çä»£å¸ä½ä¸ºæµæ¼åçå­è¯ãæ¯å¦ä½ æµæ¼ eth,å°±ç»ä½ è¿è¿ peth(éåä»¥å¤ª)ãå¶æ¬¡ï¼ä½ åæ¿çè¿ä¸ª peth å»æµæ¼ä»ãæµæ¼ä»ä¼çæä½ çåºå¡ï¼éå®ä½ çèµäº§ï¼å¹¶ç»ä½ åæ¾ç¸åºæ°éç daiï¼ä½ å¯ä»¥æ¿ç dai å»åæ¢æ³å¸æ¶è´¹ãæåå½ä½ æ³è¦èµåèªå·±èµäº§çæ¶åï¼ä½ ä¸ä»è¦è¿è¿ç¸åºæ°éç daiï¼è¿è¦è´­ä¹° m ä»£å¸ä½ä¸ºå©æ¯ï¼äº¤ç» m å¹³å°ãå¦æä½ æåæ²¡æé±èµåèµäº§ï¼é£ä¹å¹³å°å°±ä¼æåä½ çèµäº§å®ææ¸ç®ã\n\n\n# dao\n\ndao çå¨åæ¯ decentralized autonomous organization ï¼ä¸­ææ¯ å»ä¸­å¿åçèªæ²»ç»ç» ãdao çä¸»è¦ç®çæ¯è¶è¶ä¼ ç»ç»ç»å½¢å¼ï¼ä»¥åå¸å¼ãéæåä¿¡ä»»æå°åçæ¹å¼æ¥è¿è¡éä½å³ç­ãç®èè¨ä¹ï¼dao æ¯ä¸ç§æ°åçç»ç»æ¶æãäººä»¬å¯ä»¥ç¬ç«éªè¯ç»ç»çè¿è¡æ¹å¼ï¼å¹¶åºäºè¿æ ·çå±è¯æçå±åçç®æ åªåã\n\ndao çç¬ç¹ä¹å¤å¨äºå¶å©ç¨äºåºåé¾æºè½åçº¦ï¼å°é¨åæå¨é¨æµç¨åå¥åçº¦ä»£ç ä¸­ï¼ä»¥æ§è¡å³ç­å¹¶åéæææãæºè½åçº¦çåºç°ä¸ºåæ°å¥ å®äºåºç¡ï¼å ä¸ºæºè½åçº¦å¯ä»¥è®© dao çæ²»çè§åå®å¨éæåï¼èä¸æ æ³è¢«ä»»ä½ dao æåæå¤é¨æ¹ç¯¡æ¹ãè¿æ¯å ä¸ºåºåé¾ï¼å³æºè½åçº¦ï¼è¿è¡çä»£ç å¯ä»¥è¢«å¬å¼å®¡è®¡ï¼å¹¶ç±å»ä¸­å¿åçèç¹ç½ç»ä¿éå®å¨ã\n\n\n# å±è¯æºå¶\n\nå±è¯æºå¶æ¯åºåé¾ææ¯çæ ¸å¿åºç¡ï¼ç¨äºç¡®ä¿åå¸å¼ç½ç»ä¸­çèç¹ï¼åä¸èï¼å¨æ²¡æä¸­å¿åæå¨çæåµä¸ï¼è¾¾æå¯¹æ°æ®ä¸è´æ§çå±åè®¤å¯ãå®çæ¬è´¨æ¯è§£å³ä¿¡ä»»é®é¢ï¼è®©äºä¸ä¿¡ä»»çèç¹éè¿ç¹å®è§åå®ç°åä½ï¼ä¿è¯åºåé¾çå®å¨æ§ãå»ä¸­å¿ååä¸å¯ç¯¡æ¹æ§ãå¨ä¼ ç»ä¸­å¿åç³»ç»ä¸­ï¼å¦é¶è¡ï¼ï¼æ°æ®ççå®æ§ç±ä¸­å¿æºæï¼å¦æå¡å¨ï¼ä¿è¯ãä½å¨åºåé¾çåå¸å¼ç½ç»ä¸­ï¼ææèç¹å¹³ç­åä¸ï¼å¿é¡»éè¿å±è¯æºå¶è§£å³ï¼åºæ¯çå±è¯æºå¶ pow, posç­ã\n\n\n# æ¸ç©ºæ\n\næ¬è´¨æ¯ä¸ç§è¥éæ´»å¨ï¼é¡¹ç®æ¹ï¼éå¸¸æ¯æ°å´çåºåé¾é¡¹ç®ï¼ä¸ºäºæ¨å¹¿äº§åãæ©å¤§ç¨æ·ç¾¤ææµè¯åè½ï¼ä¼å°ä»£å¸åè´¹ååç»ç¹å®ç¨æ·ãç¨æ·éè¿å®æä»»å¡ï¼å¦ç¤¾äº¤åªä½äºå¨ãæµè¯äº§åç­ï¼åä¸å¶ä¸­ï¼æ éæå¥èµéæä»éå°éæç»­è´¹ã\n\n * ä½ææ¬é«åæ¥æ½åï¼é¨åç©ºæä»£å¸ä¸çº¿åä»·å¼é£åï¼å¦aptç©ºææ¾è¾¾ä¸åäººæ°å¸ï¼ï¼ç¨æ·å¯éè¿åºå®åç°ã\n * æ¶é´æå¥ï¼ç­éé¡¹ç®ãå®æä»»å¡èæ¶è¾å¤ï¼éå¹³è¡¡æçã\n * è¯éªé£é©ï¼èåç©ºææ³æ»¥ï¼å¸¸è§éªå±åæ¬è¦æ±æ¯ä»âåçº§è´¹âãæä¾ç§é¥ææææ¶æåçº¦ï¼å¯¼è´èµäº§è¢«çã\n\n\n# æºè½åçº¦\n\næºè½åçº¦æ¯é¨ç½²å¨åºåé¾ä¸çèªå¨åæ§è¡ç¨åºï¼ä»£ç å³æ³å¾ï¼code is lawï¼\n\næ ¸å¿ç¹æ§ï¼\n\n * ä¸å¯ç¯¡æ¹ï¼ä¸æ¦é¨ç½²ï¼ä»£ç æ æ³ä¿®æ¹\n * éæå¯ä¿¡ï¼æææä½è®°å½å¨å¬å¼è´¦æ¬\n * èªå¨æ§è¡ï¼æ»¡è¶³æ¡ä»¶æ¶èªå¨è§¦åé¢è®¾æä½\n\n> ä¸ºä»ä¹é¨ç½²æºè½åçº¦å°åºåé¾è¦æ¯ä» gas\n\nä»¥å¤ªåæä¾å¾çµå®å¤çå¹³å°ï¼ä»èä½¿å¾ä»¥å¤ªåç¸å¯¹äºæ¯ç¹å¸å¯ä»¥å®ç°å¾å¤åè½ï¼ä½è¿ä¹å¯¼è´æ æ³é¢ç¥æºè½åçº¦æ¯å¦ä¼å¯¼è´æ­»å¾ªç¯ï¼åæºé®é¢ï¼å æ­¤ï¼ä»¥å¤ªåå¼å¥æ±½æ²¹è´¹æºå¶ï¼gas æºå¶è¦æ±æ¯æ¡æä»¤ä»è´¹ï¼ä»ç»æµå±é¢éå¶äºæ¶æç¨æ·ã\n\n\n# metamask/dapp\n\n * metamaskæ¯ä¸ä¸ªé±ååºç¨ï¼å®æ¯æå¤ç§åå¼æ¹å¼ï¼åæ¬æ³å¸å¥å£ï¼æ¯å¦éè¿ç¬¬ä¸æ¹æå¡å¦transakãmoonpayæwyreãè¿äºæå¡åè®¸ç¨æ·ç´æ¥ç¨ä¿¡ç¨å¡æé¶è¡è´¦æ·è´­ä¹°å å¯è´§å¸ï¼ç¶åè½¬å¥metamaské±åã\n   * é¶è¡å¡ â ç¬¬ä¸æ¹æ¯ä»ç½å³ â ä¸­å¿åäº¤ææ â ç¨æ·metamaskå°å\n * èdappéå¸¸æ¯å»ä¸­å¿ååºç¨ï¼å®ä»¬ä¸»è¦å¤çé¾ä¸æä½ï¼æ¯å¦æºè½åçº¦äº¤äºï¼ä½å¯è½ä¸ç´æ¥éææ³å¸å¥å£ï¼å ä¸ºè¿æ¶åå°åè§ãçç®¡åå¤æçæ¯ä»å¤çæµç¨\n   * ç¨æ·é±å â è°ç¨dappæºè½åçº¦ â æ´æ°é¾ä¸ä½é¢\n\n> metamaskæ¯åºåé¾çå»ä¸­å¿åé±åï¼è·æä»¬å¹³æ¶ç¨çappä¸åï¼å®æ¯ä¸æ¬¾å»ä¸­å¿åçåºç¨ï¼å®æ¹å¹¶ä¸ä¼ä¿å­ä½ çå¯ç ï¼ä½ ä¹ä¸è½ä½¿ç¨å®æ¹æ¥æ¾åå¯ç ï¼ä½ åªè½æèªå·±çå¯ç åå¨çº¸ä¸æ¾å¨ä¿é©ç®±éãèä¸éé¢å­æ¾çé±æèå¸å¹¶ä¸åä½ å°é±å­å¨é¶è¡éï¼é¶è¡å¦æåé­äºé£ä½ çé±ä¹å¯è½æ²¡äºï¼ä½æ¯è¿æ¬¾é±åå°±æ¯ä½ èªå·±çï¼é±ä¸ä¼æ¶å¤±ã\n\nä¸¾å ä¸ªä¾å­ï¼\n\nç¹æ§     coinbase          metamask      å¸å®ï¼binanceï¼\næ§è´¨     ä¸­å¿åäº¤ææï¼å·²ä¸å¸        é±åå·¥å·+dexå¥å£    ä¸­å¿åäº¤ææ\nåè§æ§    é«ï¼å¤å½çç§ï¼           æ ï¼ç¨æ·èªæé£é©ï¼     ä¸­ï¼å¨çå¸å±ä½é¨åå°åºåéï¼\næ¯æçé¾   æéï¼btcãethç­ä¸»æµé¾ï¼   å¨é¾å¼å®¹ï¼evmçæï¼   å¹¿æ³ï¼btcãethãbnb chainç­ï¼\nè´¹ç¨     è¾é«ï¼äº¤æè´¹+æç°è´¹ï¼       ä»gasè´¹         è¾ä½ï¼ç°è´§0.1%ï¼åçº¦0.02%ï¼\n\n\n# æè´§åç°è´§\n\n\n# 1. ç°è´§ï¼spotï¼\n\n * å®ä¹ï¼ç°è´§äº¤ææ¯å³æ¶æç­æäº¤å²çä¹°åè¡ä¸ºãä¹°ååæ¹çº¦å®å¨äº¤æå®æåç«å³ææç­æ¶é´åï¼éå¸¸2ä¸ªå·¥ä½æ¥åï¼å®ææ çèµäº§çäº¤ä»åèµéç»ç®ã\n * ç¹ç¹\n   * å®ç©æéèèµäº§ç´æ¥äº¤å²ï¼å¦é»éãåæ²¹ãå¤æ±ãè¡ç¥¨ç­ã\n   * ä»·æ ¼åæ å½åå¸åºä¾éï¼ç°è´§ä»·æ ¼ç±å³æ¶çä¾æ±å³ç³»å³å®ã\n   * æ æ ææä½æ æï¼éå¸¸éè¦å¨é¢èµéäº¤æï¼å¦è¡ç¥¨éå¨é¢æ¯ä»ï¼ã\n * ä¾å­ï¼ä½ ä»å¤©ç¨äººæ°å¸ä¹°å¥1åé»éï¼æå¤©å°±è½æ¿å°å®ç©é»éã\n\n\n# 2. æè´§ï¼futuresï¼\n\n * å®ä¹ï¼æè´§æ¯æ åååçº¦ï¼çº¦å®å¨æªæ¥æä¸ç¹å®æ¥æï¼å°ææ¥ï¼ï¼ä»¥é¢åç¡®å®çä»·æ ¼ä¹°å¥æååºä¸å®æ°éçæ çèµäº§ï¼å¦ååãè¡æãå¤æ±ç­ï¼ã\n * æ æäº¤æï¼åªéæ¯ä»åçº¦ä»·å¼çä¸å°é¨åä½ä¸ºä¿è¯éï¼å¦5%-20%ï¼ï¼å¯æ¾å¤§æ¶çåé£é©ã\n * ä¾å­ï¼3ä¸ªæåä»¥5000å/å¨çä»·æ ¼ä¹°å¥10å¨å¤§è±ï¼æ è®ºå°ææ¶å¸åºä»·å¦ä½ï¼é½æåçº¦æ§è¡ã\n\n\n# ä¿è¯éå¶åº¦\n\nç¨âå®éâæ¬å¨å¤§é¢äº¤æ\n\n * å®ä¹ï¼æè´§äº¤æä¸éè¦æ¯ä»åçº¦å¨é¢ä»·å¼ï¼åªéç¼´çº³ä¸å®æ¯ä¾çä¿è¯éï¼éå¸¸ä¸ºåçº¦ä»·å¼ç5%-20%ï¼ã\n\n * ä¾å­\n   \n   * åè®¾é»éæè´§åçº¦ä»·å¼100ä¸åï¼1æ=1å¬æ¤é»éï¼åè®¾ä»·æ ¼100ä¸å/å¬æ¤ï¼ã\n   * äº¤ææè§å®ä¿è¯éæ¯ä¾ä¸º10%ï¼åæèµèåªéæ¯ä»10ä¸åå³å¯ä¹°å¥1æåçº¦ã\n   * æ­¤æ¶ï¼10ä¸åæ§å¶äº100ä¸åçèµäº§ï¼æ æç = 100ä¸ / 10ä¸ = 10åã\n\n * æ¶çæ¾å¤§\n   \n   * è¥é»éä»·æ ¼ä¸æ¶¨10%ï¼è³110ä¸å/å¬æ¤ï¼ï¼åçº¦ä»·å¼åä¸º110ä¸åã\n   * æèµèååºåçº¦åï¼çå©ä¸º10ä¸åï¼110ä¸ - 100ä¸ï¼ã\n   * æ¶çç = çå© / åå§æå¥ = 10ä¸ / 10ä¸ = 100%ï¼ç°è´§æ¶çä»10%ï¼ã\n\n * é£é©æ¾å¤§\n   \n   * è¥é»éä»·æ ¼ä¸è·10%ï¼è³90ä¸å/å¬æ¤ï¼ï¼åçº¦ä»·å¼åä¸º90ä¸åã\n   * æèµèäºæ10ä¸åï¼äºæç = 10ä¸ / 10ä¸ = 100%ï¼ç°è´§äºæä»10%ï¼ã\n   * è¥æªåæ¶è¿½å ä¿è¯éï¼å¯è½è¢«å¼ºå¶å¹³ä»ï¼çä»ï¼ã\n\næ­¥éª¤             é»éä»·æ ¼    è´¦æ·ä½é¢    æä½\nå¼ä»ï¼ä¹°å¥1æï¼       100ä¸å   10ä¸å    ç¼´çº³åå§ä¿è¯é10ä¸å\nä»·æ ¼è·è³93ä¸å       93ä¸å    3ä¸å     è§¦åè¿½å ä¿è¯ééç¥ï¼éè¡¥è³7ä¸ï¼\næªè¿½å ä¿è¯é         90ä¸å    0ä¸å     å¼ºå¶å¹³ä»ï¼äºæ10ä¸å\næç«¯æåµï¼è·è³80ä¸åï¼   80ä¸å    -10ä¸å   ç©¿ä»ï¼éè¿½å å¿è¿10ä¸å\n\n\n# åç©ºä¸åå¤\n\n# 1. åå¤ï¼buy/longï¼\n\n * å®ä¹ï¼ä¹°å¥æç§èµäº§ï¼é¢æå¶ä»·æ ¼ä¸æ¶¨ï¼æªæ¥ä»¥æ´é«ä»·æ ¼ååºè·å©ã\n * ç±»æ¯ï¼ç¸å½äºâä½ä¹°é«åâï¼å¦è¡ç¥¨æèµã\n * æè´§/æ°¸ç»­åçº¦ä¸­çæä½\n   * æ¯ä»ä¿è¯éï¼å¼ä»ä¹°å¥åçº¦ï¼å¦é»éæè´§ï¼ã\n   * è¥ä»·æ ¼ä¸æ¶¨ï¼å¹³ä»æ¶ååºåçº¦ï¼èµåå·®ä»·ã\n\n# 2. åç©ºï¼sell/shortï¼\n\n * å®ä¹ï¼åå¥å¹¶ååºæç§èµäº§ï¼é¢æå¶ä»·æ ¼ä¸è·ï¼æªæ¥ä»¥æ´ä½ä»·æ ¼ä¹°åå½è¿ï¼èµåå·®ä»·ã\n * ç±»æ¯ï¼ç¸å½äºâé«åä½ä¹°âï¼å¦èå¸åç©ºè¡ç¥¨ã\n * æè´§/æ°¸ç»­åçº¦ä¸­çæä½\n   * æ¯ä»ä¿è¯éï¼å¼ä»ååºåçº¦ï¼å¦æ¯ç¹å¸æ°¸ç»­åçº¦ï¼ã\n   * è¥ä»·æ ¼ä¸è·ï¼å¹³ä»æ¶ä¹°å¥åçº¦ï¼èµåå·®ä»·ã",charsets:{cjk:!0}},{title:"æ çåºç¨",frontmatter:{},regularPath:"/algorithm/stack.html",relativePath:"algorithm/stack.md",key:"v-ba589682",path:"/algorithm/stack.html",headers:[{level:2,title:"æ¬å·å¹éé®é¢",slug:"æ¬å·å¹éé®é¢",normalizedTitle:"æ¬å·å¹éé®é¢",charIndex:11},{level:2,title:"æé¿æææ¬å·",slug:"æé¿æææ¬å·",normalizedTitle:"æé¿æææ¬å·",charIndex:776},{level:2,title:"ææçæ¬å·",slug:"ææçæ¬å·",normalizedTitle:"ææçæ¬å·",charIndex:1707},{level:2,title:"æå¤§å®½åº¦å¡",slug:"æå¤§å®½åº¦å¡",normalizedTitle:"æå¤§å®½åº¦å¡",charIndex:2333},{level:2,title:"è¡¨ç°è¯å¥½çæé¿æ¶é´æ®µ",slug:"è¡¨ç°è¯å¥½çæé¿æ¶é´æ®µ",normalizedTitle:"è¡¨ç°è¯å¥½çæé¿æ¶é´æ®µ",charIndex:3029},{level:3,title:"åç½®ç¥è¯ï¼åç¼åï¼åè°æ ",slug:"åç½®ç¥è¯-åç¼å-åè°æ ",normalizedTitle:"åç½®ç¥è¯ï¼åç¼åï¼åè°æ ",charIndex:3058},{level:3,title:"åå½é¢ç®",slug:"åå½é¢ç®",normalizedTitle:"åå½é¢ç®",charIndex:3550},{level:2,title:"å­ç¬¦ä¸²è§£ç ",slug:"å­ç¬¦ä¸²è§£ç ",normalizedTitle:"å­ç¬¦ä¸²è§£ç ",charIndex:4541},{level:2,title:"å»é¤éå¤å­æ¯ï¼åè°æ ï¼",slug:"å»é¤éå¤å­æ¯-åè°æ ",normalizedTitle:"å»é¤éå¤å­æ¯ï¼åè°æ ï¼",charIndex:5142},{level:2,title:"ç§»æ k ä½æ°å­ï¼åè°æ ï¼",slug:"ç§»æ-k-ä½æ°å­-åè°æ ",normalizedTitle:"ç§»æ k ä½æ°å­ï¼åè°æ ï¼",charIndex:5949},{level:2,title:"æ¥é¨æ°´",slug:"æ¥é¨æ°´",normalizedTitle:"æ¥é¨æ°´",charIndex:7449},{level:2,title:"æ±ç¶å¾ä¸­çæå¤§ç©å½¢",slug:"æ±ç¶å¾ä¸­çæå¤§ç©å½¢",normalizedTitle:"æ±ç¶å¾ä¸­çæå¤§ç©å½¢",charIndex:8557},{level:2,title:"æå¤§ç©å½¢",slug:"æå¤§ç©å½¢",normalizedTitle:"æå¤§ç©å½¢",charIndex:8562},{level:2,title:"å¯¹äºä»»æå­åºåå¯ä»¥è®¡ç®ä¸ä¸ªXå¼",slug:"å¯¹äºä»»æå­åºåå¯ä»¥è®¡ç®ä¸ä¸ªxå¼",normalizedTitle:"å¯¹äºä»»æå­åºåå¯ä»¥è®¡ç®ä¸ä¸ªxå¼",charIndex:10722},{level:2,title:"æ¯æ¥æ¸©åº¦",slug:"æ¯æ¥æ¸©åº¦",normalizedTitle:"æ¯æ¥æ¸©åº¦",charIndex:12071},{level:3,title:"æ´åæ³",slug:"æ´åæ³",normalizedTitle:"æ´åæ³",charIndex:12332},{level:3,title:"åè°æ ",slug:"åè°æ ",normalizedTitle:"åè°æ ",charIndex:2444},{level:2,title:"ä¸ä¸ä¸ªæ´å¤§åç´ ",slug:"ä¸ä¸ä¸ªæ´å¤§åç´ ",normalizedTitle:"ä¸ä¸ä¸ªæ´å¤§åç´ ",charIndex:7742},{level:2,title:"ä¸¤ä¸ªæ å®ç°éå",slug:"ä¸¤ä¸ªæ å®ç°éå",normalizedTitle:"ä¸¤ä¸ªæ å®ç°éå",charIndex:13523},{level:2,title:"æå°æ ",slug:"æå°æ ",normalizedTitle:"æå°æ ",charIndex:14205},{level:2,title:"æ»å¨çªå£æå¤§å¼ï¼åè°éåï¼",slug:"æ»å¨çªå£æå¤§å¼-åè°éå",normalizedTitle:"æ»å¨çªå£æå¤§å¼ï¼åè°éåï¼",charIndex:14874}],lastUpdated:"8/4/2025, 3:49:09 PM",lastUpdatedTimestamp:1754293749e3,headersStr:"æ¬å·å¹éé®é¢ æé¿æææ¬å· ææçæ¬å· æå¤§å®½åº¦å¡ è¡¨ç°è¯å¥½çæé¿æ¶é´æ®µ åç½®ç¥è¯ï¼åç¼åï¼åè°æ  åå½é¢ç® å­ç¬¦ä¸²è§£ç  å»é¤éå¤å­æ¯ï¼åè°æ ï¼ ç§»æ k ä½æ°å­ï¼åè°æ ï¼ æ¥é¨æ°´ æ±ç¶å¾ä¸­çæå¤§ç©å½¢ æå¤§ç©å½¢ å¯¹äºä»»æå­åºåå¯ä»¥è®¡ç®ä¸ä¸ªXå¼ æ¯æ¥æ¸©åº¦ æ´åæ³ åè°æ  ä¸ä¸ä¸ªæ´å¤§åç´  ä¸¤ä¸ªæ å®ç°éå æå°æ  æ»å¨çªå£æå¤§å¼ï¼åè°éåï¼",content:'# æ çåºç¨\n\n\n# æ¬å·å¹éé®é¢\n\nå¤§è´æè·¯æ¯éå°å·¦æ¬å·å¥æ ï¼éå°å³æ¬å·å°å·¦æ¬å·åºæ ï¼å¤æåº¦ä¸ºO(n)\n\nconst isBalanced = str => {\n    const stack = []\n    for (const item of str) {\n        if (item === \'(\') {\n            stack.push(item)\n        } else {\n            if (!stack.length) return false\n            stack.pop()\n        }\n    }\n    return stack.length === 0\n}\n\n\næä»¬è¿å¯ä»¥æé¢ç®åååé¢æ¨è¿ä¸æ­¥ï¼å¦æåå«ä¸ç§æ¬å·æä¹åï¼\n\nconst isBalanced = str => {\n    const map = new Map([\n        [\')\', \'(\'],\n        [\'}\', \'{\'],\n        [\']\', \'[\']\n    ])\n    const stack = []\n    for (const item of str) {\n        if (/\\(|\\[|\\{/.test(item)) {\n            stack.push(item)\n        } else {\n            if (!stack.length || stack[stack.length - 1] !== map.get(item)) return false\n            stack.pop()\n        }\n    }\n    return stack.length === 0\n}\n\n\n\n# æé¿æææ¬å·\n\n * leetcode32\n * é¢è§£\n\nç»å®ä¸ä¸ªåªåå« \'(\' å \')\' çå­ç¬¦ä¸²ï¼æ¾åºæé¿çåå«æææ¬å·çå­ä¸²çé¿åº¦ã\n\nç¤ºä¾ 1:\nè¾å¥: "(()"\nè¾åº: 2\nè§£é: æé¿æææ¬å·å­ä¸²ä¸º "()"\n\nç¤ºä¾ 2:\nè¾å¥: ")()())"\nè¾åº: 4\nè§£é: æé¿æææ¬å·å­ä¸²ä¸º "()()"\n\n\n * å¯¹äºéå°çæ¯ä¸ª \'(\'ï¼æä»¬å°å®çä¸æ æ¾å¥æ ä¸­\n * å¯¹äºéå°çæ¯ä¸ª \')\'ï¼æä»¬åå¼¹åºæ é¡¶åç´ è¡¨ç¤ºå¹éäºå½åå³æ¬å·ï¼\n   * å¦ææ ä¸ºç©ºï¼è¯´æå½åçå³æ¬å·ä¸ºæ²¡æè¢«å¹éçå³æ¬å·ï¼æä»¬å°å¶ä¸æ æ¾å¥æ ä¸­æ¥æ´æ°æä»¬ä¹åæå°çãæåä¸ä¸ªæ²¡æè¢«å¹éçå³æ¬å·çä¸æ ã\n   * å¦ææ ä¸ä¸ºç©ºï¼å½åå³æ¬å·çä¸æ åå»æ é¡¶åç´ å³ä¸ºãä»¥è¯¥å³æ¬å·ä¸ºç»å°¾çæé¿æææ¬å·çé¿åº¦ãæä»¬ä»åå¾åéåå­ç¬¦ä¸²å¹¶æ´æ°ç­æ¡å³å¯ã\n * éè¦æ³¨æçæ¯ï¼å¦æä¸å¼å§æ ä¸ºç©ºï¼ç¬¬ä¸ä¸ªå­ç¬¦ä¸ºå·¦æ¬å·çæ¶åæä»¬ä¼å°å¶æ¾å¥æ ä¸­ï¼è¿æ ·å°±ä¸æ»¡è¶³æåãæåä¸ä¸ªæ²¡æè¢«å¹éçå³æ¬å·çä¸æ ãï¼ä¸ºäºä¿æç»ä¸ï¼æä»¬å¨ä¸å¼å§çæ¶åå¾æ ä¸­æ¾å¥ä¸ä¸ªå¼ä¸º -1çåç´ ã\n\nvar longestValidParentheses = function(s) {\n    const stack = [-1]; // æ ä¸­å§ç»ä¿å­çæ¯æ æ³å¹éçä½ç½®\n    let res = 0;\n    for (let i = 0; i < s.length; i++) {\n        if (s[i] === \'(\') {\n            stack.push(i);\n        }\n        else {\n            stack.pop();\n            if (!stack.length) {\n                stack.push(i);\n            }\n            else {\n                res = Math.max(res, i - stack[stack.length - 1]);\n            }\n        }\n    }\n    return res;\n};\n\n\n\n# ææçæ¬å·\n\nhttps://leetcode.cn/problems/valid-parentheses/submissions/\n\nvar isValid = function(s) {\n    const map = new Map([\n        [\'}\', \'{\'],\n        [\']\', \'[\'],\n        [\')\', \'(\'],\n    ]);\n    const stack = [];\n    for (let i = 0; i < s.length; i++) {\n        // å¦ææ¯å·¦æ¬å·åå¥æ \n        if (!map.has(s[i])) {\n            stack.push(s[i]);\n        }\n        // å¦ææ¯å³æ¬å·ååºæ \n        else {\n            // æ éæ²¡æå¯åºç æ åºæ çåç´ ä¸å¹éåè¿å false\n            if (!stack.length || map.get(s[i]) !== stack[stack.length - 1]) {\n                 return false;\n            }\n            stack.pop();\n        }\n    }\n    return stack.length === 0;\n};\n\n\n\n# æå¤§å®½åº¦å¡\n\nleetcode962:æå¤§å®½åº¦å¡\n\nvar maxWidthRamp = function(nums) {\n    const stack = [0];\n    let res = 0;\n    // æé åè°æ ï¼å¡çèµ·ç¹å¿å®å¨æ­¤æ ä¸­\n    // åè¯æ³: åè®¾å­å¨æä¸ªåç´ ä½ç½® k ä¸å­å¨äºä¸é¢çéååºåä¸­ï¼ä¸ææå¤§å®½åº¦ j-kï¼\n    // è¿ä¹å°±è¯´æ k ä½ç½®çåç´ ä¸å®æ¯å°äº k åé¢ææçåç´ çï¼å¦åå°±ä¼ææ´é¿çå®½åº¦ï¼\n    // ä½æ¯æ¢ç¶ k å°äºåé¢ææçåç´ ï¼é£ä¹ k å°±ä¸å®ä¼è¢«å å¥å°åºåä¸­ï¼ä¸åè®¾çç¾ï¼æä»¥ä¸å­å¨kï¼é£ä¹è§£ä¸å®å­å¨éååºåä¸­\n    for (let i = 1; i < nums.length; i++) {\n        if (nums[i] < nums[stack[stack.length - 1]]) {\n            stack.push(i);\n        }\n    }\n    // nums ä»åååéåï¼æ¯ä¸ä¸ªåç´ é½ä¸åè°æ ä¸­çå¯è½çå¡èµ·ç¹è¿è¡è®¡ç®ï¼åæå¤§å³å¯\n    for (let i = nums.length - 1; i >= 0; i--) {\n        while (stack.length && nums[i] >= nums[stack[stack.length - 1]]) {\n            res = Math.max(res, i - stack.pop());\n        }\n    }\n    return res;\n};\n\n\n\n# è¡¨ç°è¯å¥½çæé¿æ¶é´æ®µ\n\nleetcode1124\n\n\n# åç½®ç¥è¯ï¼åç¼åï¼åè°æ \n\n * æ°ç»è½¬æ¢å¹¶è®¡ç®åç¼å\n\nhours = [9, 9, 6, 0, 6, 6, 9]\nscore = [1, 1, -1, -1, -1, -1, 1] // å¤§äº 8 è®° 1ï¼å°äº 8 è®° -1\npresum = [0, 1, 2, 1, 0, -1, -2, -1] // åç¼å\n\n// presum[j] - presum[i] ä»£è¡¨çæ¯ score[i] å° score[j - 1] çåºé´åç´ å\n\n\n * åè°æ ï¼å°±æ¯æ ä¸­åç´ ï¼æéå¢é¡ºåºæèéåé¡ºåºæåï¼æå¤§å¥½å¤å°±æ¯æ¶é´å¤æåº¦æ¯çº¿æ§çï¼æ¯ä¸ªåç´ éåä¸æ¬¡\n * åè°éå¢æ å¯ä»¥æ¾å°å·¦èµ·ç¬¬ä¸ä¸ªæ¯å½åæ°å­å°çåç´ \n * æ¯å¦æ°ç»:[3, 5, 4, 1] çåè°éåæ ä¸º [3, 1]\n\n// åè°æ ä¼ªä»£ç \ninsert x\nwhile (stack.length && stack[stack.length - 1] < x) {\n    stack.pop()\n}\nstack.push(x)\n\n\n----------------------------------------\n\n\n# åå½é¢ç®\n\n * æä»¬è¦æ¾çæ¯ï¼ä¸ä¸ªæé¿çåºé´ è½ä½¿ scoreçåºé´åç´ åå¤§äº 0\n * æäºåç¼åå°±åæäºï¼å¯»æ¾æé¿çåºé´ä½¿å¾ presum[j] - presum[i] > 0\n * å³æ± presum çæå¤§å®½åº¦å¡\n\n/**\n * @param {number[]} hours\n * @return {number}\n */\n\nvar longestWPI = function(hours) {\n    // ç®åæ°ç»ï¼[9, 9, 6, 0, 6, 6, 9] => [1, 1, -1, -1, -1, -1, 1]\n    hours = hours.map(h => h > 8 ? 1 : -1);\n    // æé åç¼åï¼[1, 1, -1, -1, -1, -1, 1] => [0, 1, 2, 1, 0, -1, -2, -1]\n    const presum = [0];\n    for (let i = 0; i < hours.length; i++) {\n        presum[i + 1] = hours[i] + presum[i];\n    }\n    // æ±åç¼åæ°ç»çæå¤§å®½åº¦å¡\n    const stack = [0];\n    // æé åè°æ \n    for (let i = 1; i < presum.length; i++) {\n        if (presum[i] < presum[stack[stack.length - 1]]) {\n            stack.push(i);\n        }\n    }\n    let res = 0;\n    // presum ä»åååéåï¼æ¯ä¸ä¸ªåç´ é½ä¸åè°æ ä¸­çå¯è½çå¡èµ·ç¹è¿è¡è®¡ç®ï¼åæå¤§å³å¯\n    for (let i = presum.length - 1; i >= 0; i--) {\n        while (stack.length && presum[i] > presum[stack[stack.length - 1]]) {\n            res = Math.max(res, i - stack.pop());\n        }\n    }\n    return res;\n}\n\n\n\n# å­ç¬¦ä¸²è§£ç \n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼s = "3[a]2[bc]"\nè¾åºï¼"aaabcbc"\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼s = "3[a2[c]]"\nè¾åºï¼"accaccacc"\n\nç¤ºä¾ 3ï¼\nè¾å¥ï¼s = "2[abc]3[cd]ef"\nè¾åºï¼"abcabccdcdcdef"\n\nç¤ºä¾ 4ï¼\nè¾å¥ï¼s = "abc3[cd]xyz"\nè¾åºï¼"abccdcdcdxyz"\n\n\n * é¢ç®æ¥æºï¼leetcode394\n * æ­£åè§£æ³\n\n\tdecodeString(s) {\n      let reg = /(\\d+)\\[(\\w+)\\]/g\n      while (reg.test(s)) {\n        // replace ç¬¬äºä¸ªåæ°å¯ä»¥ä¸ºå½æ°\n        // åæ°ï¼å¹éå°çï¼$1ï¼$2ï¼ç´¢å¼ï¼æºå­ç¬¦ä¸²\n        s = s.replace(reg, function(matchStr, group1, group2, index, sourceStr) {\n          let str = ""\n          while(group1--) {\n            str +=  group2\n          }\n          return str;\n        })\n      }\n      console.log(s)\n    }\n\n\n\n# å»é¤éå¤å­æ¯ï¼åè°æ ï¼\n\n * leetcode316\n\nç»ä½ ä¸ä¸ªå­ç¬¦ä¸² s ï¼è¯·ä½ å»é¤å­ç¬¦ä¸²ä¸­éå¤çå­æ¯ï¼ä½¿å¾æ¯ä¸ªå­æ¯åªåºç°ä¸æ¬¡ãéä¿è¯ è¿åç»æçå­å¸åºæå°ï¼è¦æ±ä¸è½æä¹±å¶ä»å­ç¬¦çç¸å¯¹ä½ç½®ï¼ã \n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼s = "bcabc"\nè¾åºï¼"abc"\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼s = "cbacdcbc"\nè¾åºï¼"acdb"\n\n\n * ç¨ map å­å¨å­ç¬¦ä¸²ä¸­æ¯ä¸ªå­ç¬¦åºç°çæ¬¡æ°\n * éåå­ç¬¦ä¸²ï¼æ¯è®¿é®ä¸ä¸ªå­ç¬¦ï¼å°å­ç¬¦å¥æ ï¼å¹¶ä¸å½åå­ç¬¦æ¬¡æ°å1ãå¥æ ä¹åé¦åéè¦å¤æ­ï¼å½åå­ç¬¦çå­å¸åºè¥å°äºæ é¡¶å­ç¬¦ï¼æ é¡¶å­ç¬¦æ¬¡æ°å¤§äº0ï¼ï¼åæ é¡¶å­ç¬¦ååºæ \n\nvar removeDuplicateLetters = function(s) {\n    const stack = []\n    const map = new Map()\n    for (let i in s) {\n        map.has(s[i]) ? map.set(s[i], map.get(s[i]) + 1) : map.set(s[i], 1)\n    }\n    for (let i in s) {\n        if (!stack.includes(s[i])) {\n            const len = stack.length\n            while (len && s[i] < stack[len - 1] && map.get(stack[len - 1])) {\n                stack.pop()\n            }\n            stack.push(s[i])\n        }\n        map.set(s[i], map.get(s[i]) - 1)\n    }\n    return stack.join("")\n};\n\n\n\n# ç§»æ k ä½æ°å­ï¼åè°æ ï¼\n\n * é¢ç®ï¼leetcode402\n * å¯åèï¼ä¸æåéåæ£åéé¢ï¼å¦å¦åä¹ä¸ç¨æå¿æè¢«å¥è·¯å¦ï½\n\nç»å®ä¸ä¸ªä»¥å­ç¬¦ä¸²è¡¨ç¤ºçéè´æ´æ° numï¼ç§»é¤è¿ä¸ªæ°ä¸­ç k ä½æ°å­ï¼ä½¿å¾å©ä¸çæ°å­æå°ã\n\næ³¨æ:\nnum çé¿åº¦å°äº 10002 ä¸ â¥ kã\nnum ä¸ä¼åå«ä»»ä½åå¯¼é¶ã\n\nç¤ºä¾ 1 :\nè¾å¥: num = "1432219", k = 3\nè¾åº: "1219"\nè§£é: ç§»é¤æä¸ä¸ªæ°å­ 4, 3, å 2 å½¢æä¸ä¸ªæ°çæå°çæ°å­ 1219ã\n\nç¤ºä¾ 2 :\nè¾å¥: num = "10200", k = 1\nè¾åº: "200"\nè§£é: ç§»æé¦ä½ç 1 å©ä¸çæ°å­ä¸º 200. æ³¨æè¾åºä¸è½æä»»ä½åå¯¼é¶ã\n\nç¤ºä¾ 3 :\nè¾å¥: num = "10", k = 2\nè¾åº: "0"\nè§£é: ä»åæ°å­ç§»é¤ææçæ°å­ï¼å©ä½ä¸ºç©ºå°±æ¯0ã\n\n\nç»å®ä¸ä¸ªæ°å­åºåï¼ä¾å¦ 425ï¼å¦æè¦æ±æä»¬åªå é¤ä¸ä¸ªæ°å­ï¼é£ä¹ä»å·¦å°å³ï¼æä»¬æ 4ã2 å 5 ä¸ä¸ªéæ©ãæä»¬å°æ¯ä¸ä¸ªæ°å­åå®çå·¦é»å±è¿è¡æ¯è¾ãä» 2 å¼å§ï¼å°äºå®çå·¦é»å± 4ãåæä»¬åºè¯¥å»ææ°å­ 4ãå¦æä¸è¿ä¹åï¼åéåæ è®ºåä»ä¹ï¼é½ä¸ä¼å¾å°æå°æ°ã\n\nå¦ææä»¬ä¿çæ°å­ 4ï¼é£ä¹ææå¯è½çç»åé½æ¯ä»¥æ°å­ 4ï¼å³ 42ï¼45ï¼å¼å¤´çãç¸åï¼å¦æå»æ 4ï¼çä¸ 2ï¼æä»¬å¾å°çæ¯ä»¥ 2 å¼å¤´çç»åï¼å³ 25ï¼ï¼è¿ææ¾å°äºä»»ä½çä¸æ°å­ 4 çç»åã\n\nè¿ä¸ªé®é¢å¯ä»¥ç¨è´ªå¿ç®æ³æ¥è§£å³ãä¸è¿°è§åéæäºæä»¬å¦ä½æ¥è¿æç»ç­æ¡çåºæ¬é»è¾ãä¸æ¦æä»¬ä»åºåä¸­å é¤ä¸ä¸ªæ°å­ï¼å©ä¸çæ°å­å°±å½¢æäºä¸ä¸ªæ°çé®é¢ï¼æä»¬å¯ä»¥ç»§ç»­ä½¿ç¨è¿ä¸ªè§åã\n\n\n * æè·¯ï¼ä»å·¦åå³éåå¥æ ï¼è¥ä¸ä¸ä¸ªæ°æ´å°ï¼åä¸ä¸ä¸ªæ°åºæ ã\n\n * é®é¢ï¼ num æ¯ä¸ä¸ªå¢åºåºåï¼åä¸ä¼åºæ ï¼æ¯ä¸ä¸ªéåºåºåï¼åä¼ä¸ç´åºæ ã\n\n * è§£å³ï¼\n   \n   * æ¯æ¬¡ä¸¢å¼ä¸æ¬¡ï¼k åå» 1ãå½ k åå° 0 ï¼æä»¬å¯ä»¥æåç»æ­¢éåã\n   * èå½éåå®æï¼å¦æ k ä»ç¶å¤§äº 0ãä¸å¦¨åè®¾æç»è¿å©ä¸ x ä¸ªéè¦ä¸¢å¼ï¼é£ä¹æä»¬éè¦éæ©å é¤æ«å°¾ x ä¸ªåç´  (å ä¸ºå©ä¸çåç´ è¯å®ä¸ºéå¢åºåï¼æä»¥ä¼åå é¤åé¢ç)ãã\n\n * è¥è¾å¥ä¸º("1234567890", 9)ï¼æç§ä»¥ä¸é»è¾æåè¾åºç stack ä¸º [1,2,3,4,5,6,7,8,0]ï¼æä»¥è¦è®¾ç½® while å¾ªç¯ï¼å½ num[i] ä¸ç´æ¯æ é¡¶åç´ å°æ¶ï¼åç»§ç»­åºæ \n\n * ä½¿ç¨ Number å¤ç 0200 => 200ï¼ä½æ¯ä¿è¯æ°å­èå´ä½¿ç¨ BigInt\n\n * è¥ num.length === kï¼è¯´æå¨é¨å é¤ï¼ç´æ¥è¿å "0"\n\nvar removeKdigits = function(num, k) {\n    if (num.length === k) return "0";\n    let n = k;\n    const stack = [num[0]];\n    for (let i = 1; i < num.length; i++) {\n        while (stack.length && num[i] < stack[stack.length - 1] && n) {\n            stack.pop();\n            n--;\n        }\n        stack.push(num[i]);\n    }\n    return BigInt(stack.slice(0, num.length - k).join(\'\')) + \'\';\n}\n\n\n\n# æ¥é¨æ°´\n\n * leetcode42\n * é¢è§£1ï¼é¢è§£2\n\nè¾å¥ï¼height = [0,1,0,2,1,0,1,3,2,1,2,1]\nè¾åºï¼6\nè§£éï¼ä¸é¢æ¯ç±æ°ç» [0,1,0,2,1,0,1,3,2,1,2,1] è¡¨ç¤ºçé«åº¦å¾ï¼å¨è¿ç§æåµä¸ï¼å¯ä»¥æ¥ 6 ä¸ªåä½çé¨æ°´ï¼èè²é¨åè¡¨ç¤ºé¨æ°´ï¼ã \n\n\n * æ°æ®ç»æï¼åè°æ \n * å½åé¢çæ±å­é«åº¦æ¯åé¢çä½æ¶ï¼æ¯æ æ³æ¥é¨æ°´çï¼å½æ¾å°ä¸æ ¹æ¯åé¢é«çæ±å­ï¼å°±å¯ä»¥è®¡ç®æ¥å°çé¨æ°´ï¼æä»¥ä½¿ç¨åè°éåæ \n * å½åºç°é«äºæ é¡¶çæ±å­æ¶ï¼è¯´æå¯ä»¥å¯¹åé¢çæ±å­ç»ç®äºï¼è®¡ç®å·²ç»å°æçé¨æ°´ï¼ç¶ååºæ åé¢æ´ä½çæ±å­\n * ç¸å½äºæé åè°éåæ ï¼æ¯ä¸æ¬¡æ¾å°ä¸ä¸ä¸ªæ´å¤§åç´ ï¼å°±æ¯ç»ç®çæ¶æºã\n\nvar trap = function(height) {\n    const stack = [];\n    let res = 0;\n    for (let i = 0; i < height.length; i++) {\n        while (stack.length && height[i] > height[stack[stack.length - 1]]) {\n            // æä½æ´¼åå¼¹åº\n            let bottom = stack.pop();\n            // æå³å¢æä½æ´¼ä½æ¯æ ä¸ºç©ºè¯´ææ²¡æå·¦å¢, åæ²¡æç¨ç´æ¥ break\n            if (!stack.length) {\n                break;\n            }\n            let left = stack[stack.length - 1]; // å·¦å¢ç´¢å¼\n            let leftHeight = height[left]; // å·¦å¢é«åº¦\n            let rightHeight = height[i]; // å³å¢é«åº¦\n            let bottomHight = height[bottom]; // ä½æ´¼é«åº¦\n            // è½ç§¯æçæ°´ = (å³å¢ç´¢å¼ - å·¦å¢ç´¢å¼ - 1) * (min(å·¦å¢é«åº¦, å³å¢é«åº¦) - ä½æ´¼é«åº¦)\n            res += (i - left - 1) * (Math.min(leftHeight, rightHeight) - bottomHight);\n        }\n        stack.push(i);\n    }\n    return res;\n}\n\n\n\n# æ±ç¶å¾ä¸­çæå¤§ç©å½¢\n\n * leetcode84\n * é¢è§£\n\n> é¦åï¼è¦æ³æ¾å°ç¬¬ i ä½ç½®æå¤§é¢ç§¯æ¯ä»ä¹ï¼\n> \n> æ¯ä»¥i ä¸ºä¸­å¿ï¼åå·¦æ¾ç¬¬ä¸ä¸ªå°äºheights[i]çä½ç½®leftï¼åå³æ¾ç¬¬ä¸ä¸ªå°äºheights[i]çä½ç½® rightï¼å³æå¤§é¢ç§¯ä¸º heights[i] * (right - left -1)\n> \n> åè°éå¢æ ï¼æ åçåç´ æ¯éå¢ç\n> \n> å½åç´ åºæ æ¶ï¼è¯´æè¿ä¸ªæ°åç´ æ¯åºæ åç´ ååæ¾ç¬¬ä¸ä¸ªæ¯å¶å°çåç´ \n> \n> ä¸¾ä¸ªä¾å­ï¼æ éæ¯ 1 5 6 ãæ¥ä¸æ¥æ°åç´ æ¯ 2 ï¼é£ä¹ 6 éè¦åºæ ã å½ 6 åºæ æ¶ï¼å³è¾¹ 2 ä»£è¡¨æ¯ 6 å³è¾¹ç¬¬ä¸ä¸ªæ¯ 6 å°çåç´ ã\n> \n> å½åç´ åºæ åï¼è¯´ææ°æ é¡¶åç´ æ¯åºæ åç´ ååæ¾ç¬¬ä¸ä¸ªæ¯å¶å°çåç´  å½ 6 åºæ æ¶ï¼5 æä¸ºæ°çæ é¡¶ï¼é£ä¹ 5 å°±æ¯ 6 å·¦è¾¹ç¬¬ä¸ä¸ªæ¯ 6 å°çåç´ ã\n\n * æè·¯ï¼æ¯æ¬¡åºæ æ¶ï¼tmp = stack.popï¼å½åç i æ¯å³è¾¹ç¬¬ä¸ä¸ªæ¯ä»å°çï¼æ é¡¶ä¸ºå·¦è¾¹ç¬¬ä¸ä¸ªæ¯ä»å°çï¼åªéè¦heights[tmp] * (right - left -1)\n\nvar largestRectangleArea = function(heights) {\n    if (heights.length === 0) return 0;\n    if (heights.length === 1) return heights[0];\n    heights.unshift(0);\n    heights.push(0);\n    const stack = [0];\n    let res = 0;\n    for (let i = 1; i < heights.length; i++) {\n        while (stack.length && heights[i] < heights[stack[stack.length - 1]]) {\n            // è®¡ç®ä»¥ tmp ä¸ºä¸­å¿çæå¤§é¢ç§¯\n            let tmp = stack.pop();\n            res = Math.max(res, heights[tmp] * (i - stack[stack.length - 1] - 1));\n        }\n        stack.push(i);\n    }\n    return res;\n}\n\n\n\n# æå¤§ç©å½¢\n\n * leetcode85\n * å®å¨å¯ä»¥æé®é¢è½¬æ¢æä¸ä¸é¢ï¼éå¯¹æ¯ä¸è¡æ±æå¤§é«åº¦\n\n// æ±æ±ç¶å¾æå¤§ç©å½¢\nconst maxArea = function(heights) {\n    if (heights.length === 0) return 0\n    if (heights.length === 1) return heights[0]\n    heights.unshift(0)\n    heights.push(0)\n    const stack = []\n    let res = 0\n    for (let i = 0; i < heights.length; i++) {\n        while(stack.length && heights[i] < heights[stack[stack.length - 1]]) {\n            let tmp = stack.pop()\n            res = Math.max(res, heights[tmp] * (i - stack[stack.length - 1] - 1))\n        }\n        stack.push(i)\n    }\n    return res\n }\n\n// éå¯¹æ¯ä¸è¡æ±æå¤§é«åº¦\nvar maximalRectangle = function(matrix) {\n    if (!matrix.length) return 0;\n    const m = matrix.length\n    const n = matrix[0].length;\n    const arr = Array.from(new Array(m), () => new Array(n).fill(0));\n    for (let i = 0; i < m; i++) {\n        for (let j = 0; j < n; j++) {\n            if (matrix[i][j] === \'1\') {\n                arr[i][j] = i === 0 ? +matrix[i][j] : arr[i - 1][j] + 1;\n            }\n        }\n    }\n    let res = 0;\n    for (let i = 0; i < arr.length; i++) {\n        res = Math.max(maxArea(arr[i]), res);\n    }\n    return res;\n};\n\n\n\n# å¯¹äºä»»æå­åºåå¯ä»¥è®¡ç®ä¸ä¸ªXå¼\n\n> X = sum(subArray) * min(subArray)ï¼ æ±æå¤§X\n> \n> ä¾å¦ï¼[3,1,6,4,5,2]\n> \n> X = (6+4+5) * 4 = 60\n\n * åè°éå¢æ ï¼è¥éåå°æåç´ æ¯æ é¡¶åç´ å°ï¼é£ä¹è¿ä¸ªåç´ å°±æ¯å³ä¾§ç¬¬ä¸æ¯ä»å°çï¼åºæ ï¼æ­¤æ¶æ é¡¶ä¸ºå·¦ä¾§ç¬¬ä¸æ¯ä»å°çï¼æä»¥æ­¤æ¶å¯ä»¥ç»ç®ä»¥åºæ åç´ ä¸ºæå°å¼çå­åºå\n * é¦å3å¥æ ï¼[3]ï¼éå°1 < 3ï¼3åºæ ï¼left = arr[-1] = 0ï¼right = arr[1] = 1ï¼res = 3 * 3 = 9\n * 1å6å¥æ ï¼[1, 6]ï¼éå° 4 < 6ï¼6åºæ ï¼left = arr[1] = 1ï¼right = arr[3] = 4, res = 6 * 6 = 36\n * [1, 4, 5]ï¼éå° 2 < 5ï¼5åºæ ï¼åç res = 25\n * [1, 4]ï¼éå° 2< 4ï¼4åºæ ï¼å·¦ä¾§ä¸º1ï¼å³ä¾§ä¸º2ï¼æ¾ä¸­é´çï¼res = 4 * (6 + 4 + 5) = 60\n * [1, 2]ï¼éè¦æå©ä¸çå¨é¨ç»ç®\n\nfunction calX(arr) {\n    let res = 0\n    const stack = []\n    stack.push(0)\n    for (let i = 1; i < arr.length; i++) {\n        while (stack.length && arr[i] <= arr[stack[stack.length - 1]]) {\n            let tmp = stack.pop()\n            let left = stack[stack.length - 1] || -1\n            let right = i\n            let ans = 0\n            for (let j = left + 1; j < right; j++) {\n                ans += arr[j]\n            }\n            res = Math.max(res, ans * arr[tmp])\n        }\n        stack.push(i)\n    }\n    console.log(stack) // æ­¤æ¶ä¸º [1, 2],éè¦å°æ ä¸­å©ä½åç´ ç»ç®\n    while (stack.length) {\n        let tmp = stack.pop()\n        let left = stack[stack.length - 1] || -1\n        let right = arr.length\n        let ans = 0\n        for (let j = left + 1; j < right; j++) {\n            ans += arr[j]\n        }\n        res = Math.max(res, ans * arr[tmp])\n    }\n    return res\n}\n\n\n\n# æ¯æ¥æ¸©åº¦\n\n * leetcode739\n\nè¯·æ ¹æ®æ¯æ¥ æ°æ¸© åè¡¨ï¼éæ°çæä¸ä¸ªåè¡¨ãå¯¹åºä½ç½®çè¾åºä¸ºï¼è¦æ³è§æµå°æ´é«çæ°æ¸©ï¼è³å°éè¦ç­å¾çå¤©æ°ãå¦ææ°æ¸©å¨è¿ä¹åé½ä¸ä¼åé«ï¼è¯·å¨è¯¥ä½ç½®ç¨ 0 æ¥ä»£æ¿ã\n\nä¾å¦ï¼ç»å®ä¸ä¸ªåè¡¨ temperatures = [73, 74, 75, 71, 69, 72, 76, 73]ï¼ä½ çè¾åºåºè¯¥æ¯ [1, 1, 4, 2, 1, 1, 0, 0]ã\n\næç¤ºï¼æ°æ¸© åè¡¨é¿åº¦çèå´æ¯ [1, 30000]ãæ¯ä¸ªæ°æ¸©çå¼çåä¸ºåæ°åº¦ï¼é½æ¯å¨ [30, 100] èå´åçæ´æ°ã\n\n\n\n# æ´åæ³\n\nvar dailyTemperatures = function(T) {\n    let len = T.length\n    let res = new Array(len).fill(0)\n    for (let i = 1; i < len; i++) {\n        for (let j = 0; j < i; j++) {\n            if (res[j] === 0 && T[i] > T[j]) {\n                res[j] = i - j\n            } \n        }\n    }\n   return res\n};\n\n\n\n# åè°æ \n\n * ç»´æ¤åè°éåæ ï¼ä¸æ¦å¥æ åç´ å¤§äºæ é¡¶åç´ ï¼å popï¼å¹¶è®°å½ç´¢å¼çå·®å¼\n * å¾ç¤º\n\n// å¯ä»¥çè§£ä¸ºæ°ç»ä¸­æ¾å°å³ä¾§ç¬¬ä¸ä¸ªæ¯èªå·±å¤§çæ°\nvar dailyTemperatures = function(T) {\n    const res = new Array(T.length).fill(0);\n    const stack = [];\n    for (let i = 0; i < T.length; i++) {\n        while (stack.length && T[i] > T[stack[stack.length - 1]]) {\n            res[stack[stack.length - 1]] = i - stack.pop();\n        }\n        stack.push(i);\n    }\n    return res;\n}\n\n\n\n# ä¸ä¸ä¸ªæ´å¤§åç´ \n\n * leetcode496\n\nvar nextGreaterElement = function(nums1, nums2) {\n    const map = new Array(nums2.length).fill(-1);\n    const stack = [];\n    // æ± nums2 ä¸­æ¯ä¸ªåç´ çä¸ä¸æå¤§åç´ \n    for (let i = 0; i < nums2.length; i++) {\n        while (stack.length && nums2[i] > nums2[stack[stack.length - 1]]) {\n            map[stack[stack.length - 1]] = nums2[i];\n            stack.pop();\n        }\n        stack.push(i);\n    }\n    return nums1.map(n => map[nums2.indexOf(n)]);\n};\n\n\n\n# ä¸¤ä¸ªæ å®ç°éå\n\nclass CQueue {\n    constructor () {\n        this.pushStack = []; // å­å¨å¥éçå¼   æ¨¡æå¥éè¡ä¸º\n        this.deleStack = []; // å­å¨å¾åºéçé¡¹ æ¨¡æåºéè¡ä¸º\n    }\n    appendTail(v) {\n        this.pushStack.push(v);\n    }\n    deleteHead() {\n        // è¥å¾å é¤æ ä¸­æå¼åç´æ¥pop æ¨¡æåºéè¡ä¸º\n        if (this.deleStack.length) {\n            return this.deleStack.pop();\n        }\n        // è¥ push æ ä¸­æå¼ åå¨é¨æ¨å¥ delete æ ä¸­\n        while (this.pushStack.length) {\n            this.deleStack.push(this.pushStack.pop());\n        }\n        // æ­¤æ¶åºæ å¯¹è¿æ åå®¹ï¼è¿å -1\n        if(!this.deleStack.length) {\n            return -1;\n        // æåå®¹ï¼å¼¹åºæ é¡¶ï¼ä¸è¿åå³å¯\n        } else {\n            return this.deleStack.pop();\n        }\n    }\n}\n\n\n\n# æå°æ \n\n * leetcode155\n * é¢è§£\n\nclass MinStack {\n    // å®ä¹ä¸ä¸ªè¾å©æ è®°å½æå°å¼ï¼é¿åº¦åä¸»æ é¿åº¦ä¸è´\n    constructor() {\n        this.stack = [];\n        this.helper = [];\n    }\n    push(val) {\n        this.stack.push(val);\n        // å¦æç©º æè å½åå¼å°äºç­äºè¾å©æ æ é¡¶ åç´æ¥å¥é\n        if (!this.helper.length || val <= this.helper[this.helper.length - 1]) {\n            this.helper.push(val);\n        } else {\n            this.helper.push(this.helper[this.helper.length - 1]);\n        }\n    }\n    pop() {\n        this.stack.pop();\n        this.helper.pop();\n    }\n    top() {\n        return this.stack[this.stack.length - 1];\n    }\n    getMin() {\n        return this.helper[this.helper.length - 1];\n    }\n}\n\n\n\n# æ»å¨çªå£æå¤§å¼ï¼åè°éåï¼\n\n * leetcode239\n * é¢è§£\n\nvar maxSlidingWindow = function(nums, k) {\n    class Queue {\n        constructor() {\n            this.queue = [];\n        }\n        appendTail(val) {\n            // ä¿è¯éååè°éå\n            while (this.queue.length && val > this.queue[this.queue.length - 1]) {\n                this.queue.pop();\n            }\n            this.queue.push(val);\n        }\n        deleteHead(val) {\n            if (this.queue[0] === val) {\n                this.queue.shift();\n            }\n        }\n        head() {\n            return this.queue[0];\n        }\n    }\n    const queue = new Queue();\n    const res = [];\n    // åæ¾è¿å» k ä¸ª\n    for (let i = 0; i < k; i++) {\n        queue.appendTail(nums[i]);\n    }\n    res.push(queue.head());\n    for (let i = k; i < nums.length; i++) {\n        // ç§»å¨çªå£å¹¶è®¡ç®æå¤§å¼\n        queue.deleteHead(nums[i - k]);\n        queue.appendTail(nums[i]);\n        res.push(queue.head());\n    }\n    return res;\n};\n',normalizedContent:'# æ çåºç¨\n\n\n# æ¬å·å¹éé®é¢\n\nå¤§è´æè·¯æ¯éå°å·¦æ¬å·å¥æ ï¼éå°å³æ¬å·å°å·¦æ¬å·åºæ ï¼å¤æåº¦ä¸ºo(n)\n\nconst isbalanced = str => {\n    const stack = []\n    for (const item of str) {\n        if (item === \'(\') {\n            stack.push(item)\n        } else {\n            if (!stack.length) return false\n            stack.pop()\n        }\n    }\n    return stack.length === 0\n}\n\n\næä»¬è¿å¯ä»¥æé¢ç®åååé¢æ¨è¿ä¸æ­¥ï¼å¦æåå«ä¸ç§æ¬å·æä¹åï¼\n\nconst isbalanced = str => {\n    const map = new map([\n        [\')\', \'(\'],\n        [\'}\', \'{\'],\n        [\']\', \'[\']\n    ])\n    const stack = []\n    for (const item of str) {\n        if (/\\(|\\[|\\{/.test(item)) {\n            stack.push(item)\n        } else {\n            if (!stack.length || stack[stack.length - 1] !== map.get(item)) return false\n            stack.pop()\n        }\n    }\n    return stack.length === 0\n}\n\n\n\n# æé¿æææ¬å·\n\n * leetcode32\n * é¢è§£\n\nç»å®ä¸ä¸ªåªåå« \'(\' å \')\' çå­ç¬¦ä¸²ï¼æ¾åºæé¿çåå«æææ¬å·çå­ä¸²çé¿åº¦ã\n\nç¤ºä¾ 1:\nè¾å¥: "(()"\nè¾åº: 2\nè§£é: æé¿æææ¬å·å­ä¸²ä¸º "()"\n\nç¤ºä¾ 2:\nè¾å¥: ")()())"\nè¾åº: 4\nè§£é: æé¿æææ¬å·å­ä¸²ä¸º "()()"\n\n\n * å¯¹äºéå°çæ¯ä¸ª \'(\'ï¼æä»¬å°å®çä¸æ æ¾å¥æ ä¸­\n * å¯¹äºéå°çæ¯ä¸ª \')\'ï¼æä»¬åå¼¹åºæ é¡¶åç´ è¡¨ç¤ºå¹éäºå½åå³æ¬å·ï¼\n   * å¦ææ ä¸ºç©ºï¼è¯´æå½åçå³æ¬å·ä¸ºæ²¡æè¢«å¹éçå³æ¬å·ï¼æä»¬å°å¶ä¸æ æ¾å¥æ ä¸­æ¥æ´æ°æä»¬ä¹åæå°çãæåä¸ä¸ªæ²¡æè¢«å¹éçå³æ¬å·çä¸æ ã\n   * å¦ææ ä¸ä¸ºç©ºï¼å½åå³æ¬å·çä¸æ åå»æ é¡¶åç´ å³ä¸ºãä»¥è¯¥å³æ¬å·ä¸ºç»å°¾çæé¿æææ¬å·çé¿åº¦ãæä»¬ä»åå¾åéåå­ç¬¦ä¸²å¹¶æ´æ°ç­æ¡å³å¯ã\n * éè¦æ³¨æçæ¯ï¼å¦æä¸å¼å§æ ä¸ºç©ºï¼ç¬¬ä¸ä¸ªå­ç¬¦ä¸ºå·¦æ¬å·çæ¶åæä»¬ä¼å°å¶æ¾å¥æ ä¸­ï¼è¿æ ·å°±ä¸æ»¡è¶³æåãæåä¸ä¸ªæ²¡æè¢«å¹éçå³æ¬å·çä¸æ ãï¼ä¸ºäºä¿æç»ä¸ï¼æä»¬å¨ä¸å¼å§çæ¶åå¾æ ä¸­æ¾å¥ä¸ä¸ªå¼ä¸º -1çåç´ ã\n\nvar longestvalidparentheses = function(s) {\n    const stack = [-1]; // æ ä¸­å§ç»ä¿å­çæ¯æ æ³å¹éçä½ç½®\n    let res = 0;\n    for (let i = 0; i < s.length; i++) {\n        if (s[i] === \'(\') {\n            stack.push(i);\n        }\n        else {\n            stack.pop();\n            if (!stack.length) {\n                stack.push(i);\n            }\n            else {\n                res = math.max(res, i - stack[stack.length - 1]);\n            }\n        }\n    }\n    return res;\n};\n\n\n\n# ææçæ¬å·\n\nhttps://leetcode.cn/problems/valid-parentheses/submissions/\n\nvar isvalid = function(s) {\n    const map = new map([\n        [\'}\', \'{\'],\n        [\']\', \'[\'],\n        [\')\', \'(\'],\n    ]);\n    const stack = [];\n    for (let i = 0; i < s.length; i++) {\n        // å¦ææ¯å·¦æ¬å·åå¥æ \n        if (!map.has(s[i])) {\n            stack.push(s[i]);\n        }\n        // å¦ææ¯å³æ¬å·ååºæ \n        else {\n            // æ éæ²¡æå¯åºç æ åºæ çåç´ ä¸å¹éåè¿å false\n            if (!stack.length || map.get(s[i]) !== stack[stack.length - 1]) {\n                 return false;\n            }\n            stack.pop();\n        }\n    }\n    return stack.length === 0;\n};\n\n\n\n# æå¤§å®½åº¦å¡\n\nleetcode962:æå¤§å®½åº¦å¡\n\nvar maxwidthramp = function(nums) {\n    const stack = [0];\n    let res = 0;\n    // æé åè°æ ï¼å¡çèµ·ç¹å¿å®å¨æ­¤æ ä¸­\n    // åè¯æ³: åè®¾å­å¨æä¸ªåç´ ä½ç½® k ä¸å­å¨äºä¸é¢çéååºåä¸­ï¼ä¸ææå¤§å®½åº¦ j-kï¼\n    // è¿ä¹å°±è¯´æ k ä½ç½®çåç´ ä¸å®æ¯å°äº k åé¢ææçåç´ çï¼å¦åå°±ä¼ææ´é¿çå®½åº¦ï¼\n    // ä½æ¯æ¢ç¶ k å°äºåé¢ææçåç´ ï¼é£ä¹ k å°±ä¸å®ä¼è¢«å å¥å°åºåä¸­ï¼ä¸åè®¾çç¾ï¼æä»¥ä¸å­å¨kï¼é£ä¹è§£ä¸å®å­å¨éååºåä¸­\n    for (let i = 1; i < nums.length; i++) {\n        if (nums[i] < nums[stack[stack.length - 1]]) {\n            stack.push(i);\n        }\n    }\n    // nums ä»åååéåï¼æ¯ä¸ä¸ªåç´ é½ä¸åè°æ ä¸­çå¯è½çå¡èµ·ç¹è¿è¡è®¡ç®ï¼åæå¤§å³å¯\n    for (let i = nums.length - 1; i >= 0; i--) {\n        while (stack.length && nums[i] >= nums[stack[stack.length - 1]]) {\n            res = math.max(res, i - stack.pop());\n        }\n    }\n    return res;\n};\n\n\n\n# è¡¨ç°è¯å¥½çæé¿æ¶é´æ®µ\n\nleetcode1124\n\n\n# åç½®ç¥è¯ï¼åç¼åï¼åè°æ \n\n * æ°ç»è½¬æ¢å¹¶è®¡ç®åç¼å\n\nhours = [9, 9, 6, 0, 6, 6, 9]\nscore = [1, 1, -1, -1, -1, -1, 1] // å¤§äº 8 è®° 1ï¼å°äº 8 è®° -1\npresum = [0, 1, 2, 1, 0, -1, -2, -1] // åç¼å\n\n// presum[j] - presum[i] ä»£è¡¨çæ¯ score[i] å° score[j - 1] çåºé´åç´ å\n\n\n * åè°æ ï¼å°±æ¯æ ä¸­åç´ ï¼æéå¢é¡ºåºæèéåé¡ºåºæåï¼æå¤§å¥½å¤å°±æ¯æ¶é´å¤æåº¦æ¯çº¿æ§çï¼æ¯ä¸ªåç´ éåä¸æ¬¡\n * åè°éå¢æ å¯ä»¥æ¾å°å·¦èµ·ç¬¬ä¸ä¸ªæ¯å½åæ°å­å°çåç´ \n * æ¯å¦æ°ç»:[3, 5, 4, 1] çåè°éåæ ä¸º [3, 1]\n\n// åè°æ ä¼ªä»£ç \ninsert x\nwhile (stack.length && stack[stack.length - 1] < x) {\n    stack.pop()\n}\nstack.push(x)\n\n\n----------------------------------------\n\n\n# åå½é¢ç®\n\n * æä»¬è¦æ¾çæ¯ï¼ä¸ä¸ªæé¿çåºé´ è½ä½¿ scoreçåºé´åç´ åå¤§äº 0\n * æäºåç¼åå°±åæäºï¼å¯»æ¾æé¿çåºé´ä½¿å¾ presum[j] - presum[i] > 0\n * å³æ± presum çæå¤§å®½åº¦å¡\n\n/**\n * @param {number[]} hours\n * @return {number}\n */\n\nvar longestwpi = function(hours) {\n    // ç®åæ°ç»ï¼[9, 9, 6, 0, 6, 6, 9] => [1, 1, -1, -1, -1, -1, 1]\n    hours = hours.map(h => h > 8 ? 1 : -1);\n    // æé åç¼åï¼[1, 1, -1, -1, -1, -1, 1] => [0, 1, 2, 1, 0, -1, -2, -1]\n    const presum = [0];\n    for (let i = 0; i < hours.length; i++) {\n        presum[i + 1] = hours[i] + presum[i];\n    }\n    // æ±åç¼åæ°ç»çæå¤§å®½åº¦å¡\n    const stack = [0];\n    // æé åè°æ \n    for (let i = 1; i < presum.length; i++) {\n        if (presum[i] < presum[stack[stack.length - 1]]) {\n            stack.push(i);\n        }\n    }\n    let res = 0;\n    // presum ä»åååéåï¼æ¯ä¸ä¸ªåç´ é½ä¸åè°æ ä¸­çå¯è½çå¡èµ·ç¹è¿è¡è®¡ç®ï¼åæå¤§å³å¯\n    for (let i = presum.length - 1; i >= 0; i--) {\n        while (stack.length && presum[i] > presum[stack[stack.length - 1]]) {\n            res = math.max(res, i - stack.pop());\n        }\n    }\n    return res;\n}\n\n\n\n# å­ç¬¦ä¸²è§£ç \n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼s = "3[a]2[bc]"\nè¾åºï¼"aaabcbc"\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼s = "3[a2[c]]"\nè¾åºï¼"accaccacc"\n\nç¤ºä¾ 3ï¼\nè¾å¥ï¼s = "2[abc]3[cd]ef"\nè¾åºï¼"abcabccdcdcdef"\n\nç¤ºä¾ 4ï¼\nè¾å¥ï¼s = "abc3[cd]xyz"\nè¾åºï¼"abccdcdcdxyz"\n\n\n * é¢ç®æ¥æºï¼leetcode394\n * æ­£åè§£æ³\n\n\tdecodestring(s) {\n      let reg = /(\\d+)\\[(\\w+)\\]/g\n      while (reg.test(s)) {\n        // replace ç¬¬äºä¸ªåæ°å¯ä»¥ä¸ºå½æ°\n        // åæ°ï¼å¹éå°çï¼$1ï¼$2ï¼ç´¢å¼ï¼æºå­ç¬¦ä¸²\n        s = s.replace(reg, function(matchstr, group1, group2, index, sourcestr) {\n          let str = ""\n          while(group1--) {\n            str +=  group2\n          }\n          return str;\n        })\n      }\n      console.log(s)\n    }\n\n\n\n# å»é¤éå¤å­æ¯ï¼åè°æ ï¼\n\n * leetcode316\n\nç»ä½ ä¸ä¸ªå­ç¬¦ä¸² s ï¼è¯·ä½ å»é¤å­ç¬¦ä¸²ä¸­éå¤çå­æ¯ï¼ä½¿å¾æ¯ä¸ªå­æ¯åªåºç°ä¸æ¬¡ãéä¿è¯ è¿åç»æçå­å¸åºæå°ï¼è¦æ±ä¸è½æä¹±å¶ä»å­ç¬¦çç¸å¯¹ä½ç½®ï¼ã \n\nç¤ºä¾ 1ï¼\nè¾å¥ï¼s = "bcabc"\nè¾åºï¼"abc"\n\nç¤ºä¾ 2ï¼\nè¾å¥ï¼s = "cbacdcbc"\nè¾åºï¼"acdb"\n\n\n * ç¨ map å­å¨å­ç¬¦ä¸²ä¸­æ¯ä¸ªå­ç¬¦åºç°çæ¬¡æ°\n * éåå­ç¬¦ä¸²ï¼æ¯è®¿é®ä¸ä¸ªå­ç¬¦ï¼å°å­ç¬¦å¥æ ï¼å¹¶ä¸å½åå­ç¬¦æ¬¡æ°å1ãå¥æ ä¹åé¦åéè¦å¤æ­ï¼å½åå­ç¬¦çå­å¸åºè¥å°äºæ é¡¶å­ç¬¦ï¼æ é¡¶å­ç¬¦æ¬¡æ°å¤§äº0ï¼ï¼åæ é¡¶å­ç¬¦ååºæ \n\nvar removeduplicateletters = function(s) {\n    const stack = []\n    const map = new map()\n    for (let i in s) {\n        map.has(s[i]) ? map.set(s[i], map.get(s[i]) + 1) : map.set(s[i], 1)\n    }\n    for (let i in s) {\n        if (!stack.includes(s[i])) {\n            const len = stack.length\n            while (len && s[i] < stack[len - 1] && map.get(stack[len - 1])) {\n                stack.pop()\n            }\n            stack.push(s[i])\n        }\n        map.set(s[i], map.get(s[i]) - 1)\n    }\n    return stack.join("")\n};\n\n\n\n# ç§»æ k ä½æ°å­ï¼åè°æ ï¼\n\n * é¢ç®ï¼leetcode402\n * å¯åèï¼ä¸æåéåæ£åéé¢ï¼å¦å¦åä¹ä¸ç¨æå¿æè¢«å¥è·¯å¦ï½\n\nç»å®ä¸ä¸ªä»¥å­ç¬¦ä¸²è¡¨ç¤ºçéè´æ´æ° numï¼ç§»é¤è¿ä¸ªæ°ä¸­ç k ä½æ°å­ï¼ä½¿å¾å©ä¸çæ°å­æå°ã\n\næ³¨æ:\nnum çé¿åº¦å°äº 10002 ä¸ â¥ kã\nnum ä¸ä¼åå«ä»»ä½åå¯¼é¶ã\n\nç¤ºä¾ 1 :\nè¾å¥: num = "1432219", k = 3\nè¾åº: "1219"\nè§£é: ç§»é¤æä¸ä¸ªæ°å­ 4, 3, å 2 å½¢æä¸ä¸ªæ°çæå°çæ°å­ 1219ã\n\nç¤ºä¾ 2 :\nè¾å¥: num = "10200", k = 1\nè¾åº: "200"\nè§£é: ç§»æé¦ä½ç 1 å©ä¸çæ°å­ä¸º 200. æ³¨æè¾åºä¸è½æä»»ä½åå¯¼é¶ã\n\nç¤ºä¾ 3 :\nè¾å¥: num = "10", k = 2\nè¾åº: "0"\nè§£é: ä»åæ°å­ç§»é¤ææçæ°å­ï¼å©ä½ä¸ºç©ºå°±æ¯0ã\n\n\nç»å®ä¸ä¸ªæ°å­åºåï¼ä¾å¦ 425ï¼å¦æè¦æ±æä»¬åªå é¤ä¸ä¸ªæ°å­ï¼é£ä¹ä»å·¦å°å³ï¼æä»¬æ 4ã2 å 5 ä¸ä¸ªéæ©ãæä»¬å°æ¯ä¸ä¸ªæ°å­åå®çå·¦é»å±è¿è¡æ¯è¾ãä» 2 å¼å§ï¼å°äºå®çå·¦é»å± 4ãåæä»¬åºè¯¥å»ææ°å­ 4ãå¦æä¸è¿ä¹åï¼åéåæ è®ºåä»ä¹ï¼é½ä¸ä¼å¾å°æå°æ°ã\n\nå¦ææä»¬ä¿çæ°å­ 4ï¼é£ä¹ææå¯è½çç»åé½æ¯ä»¥æ°å­ 4ï¼å³ 42ï¼45ï¼å¼å¤´çãç¸åï¼å¦æå»æ 4ï¼çä¸ 2ï¼æä»¬å¾å°çæ¯ä»¥ 2 å¼å¤´çç»åï¼å³ 25ï¼ï¼è¿ææ¾å°äºä»»ä½çä¸æ°å­ 4 çç»åã\n\nè¿ä¸ªé®é¢å¯ä»¥ç¨è´ªå¿ç®æ³æ¥è§£å³ãä¸è¿°è§åéæäºæä»¬å¦ä½æ¥è¿æç»ç­æ¡çåºæ¬é»è¾ãä¸æ¦æä»¬ä»åºåä¸­å é¤ä¸ä¸ªæ°å­ï¼å©ä¸çæ°å­å°±å½¢æäºä¸ä¸ªæ°çé®é¢ï¼æä»¬å¯ä»¥ç»§ç»­ä½¿ç¨è¿ä¸ªè§åã\n\n\n * æè·¯ï¼ä»å·¦åå³éåå¥æ ï¼è¥ä¸ä¸ä¸ªæ°æ´å°ï¼åä¸ä¸ä¸ªæ°åºæ ã\n\n * é®é¢ï¼ num æ¯ä¸ä¸ªå¢åºåºåï¼åä¸ä¼åºæ ï¼æ¯ä¸ä¸ªéåºåºåï¼åä¼ä¸ç´åºæ ã\n\n * è§£å³ï¼\n   \n   * æ¯æ¬¡ä¸¢å¼ä¸æ¬¡ï¼k åå» 1ãå½ k åå° 0 ï¼æä»¬å¯ä»¥æåç»æ­¢éåã\n   * èå½éåå®æï¼å¦æ k ä»ç¶å¤§äº 0ãä¸å¦¨åè®¾æç»è¿å©ä¸ x ä¸ªéè¦ä¸¢å¼ï¼é£ä¹æä»¬éè¦éæ©å é¤æ«å°¾ x ä¸ªåç´  (å ä¸ºå©ä¸çåç´ è¯å®ä¸ºéå¢åºåï¼æä»¥ä¼åå é¤åé¢ç)ãã\n\n * è¥è¾å¥ä¸º("1234567890", 9)ï¼æç§ä»¥ä¸é»è¾æåè¾åºç stack ä¸º [1,2,3,4,5,6,7,8,0]ï¼æä»¥è¦è®¾ç½® while å¾ªç¯ï¼å½ num[i] ä¸ç´æ¯æ é¡¶åç´ å°æ¶ï¼åç»§ç»­åºæ \n\n * ä½¿ç¨ number å¤ç 0200 => 200ï¼ä½æ¯ä¿è¯æ°å­èå´ä½¿ç¨ bigint\n\n * è¥ num.length === kï¼è¯´æå¨é¨å é¤ï¼ç´æ¥è¿å "0"\n\nvar removekdigits = function(num, k) {\n    if (num.length === k) return "0";\n    let n = k;\n    const stack = [num[0]];\n    for (let i = 1; i < num.length; i++) {\n        while (stack.length && num[i] < stack[stack.length - 1] && n) {\n            stack.pop();\n            n--;\n        }\n        stack.push(num[i]);\n    }\n    return bigint(stack.slice(0, num.length - k).join(\'\')) + \'\';\n}\n\n\n\n# æ¥é¨æ°´\n\n * leetcode42\n * é¢è§£1ï¼é¢è§£2\n\nè¾å¥ï¼height = [0,1,0,2,1,0,1,3,2,1,2,1]\nè¾åºï¼6\nè§£éï¼ä¸é¢æ¯ç±æ°ç» [0,1,0,2,1,0,1,3,2,1,2,1] è¡¨ç¤ºçé«åº¦å¾ï¼å¨è¿ç§æåµä¸ï¼å¯ä»¥æ¥ 6 ä¸ªåä½çé¨æ°´ï¼èè²é¨åè¡¨ç¤ºé¨æ°´ï¼ã \n\n\n * æ°æ®ç»æï¼åè°æ \n * å½åé¢çæ±å­é«åº¦æ¯åé¢çä½æ¶ï¼æ¯æ æ³æ¥é¨æ°´çï¼å½æ¾å°ä¸æ ¹æ¯åé¢é«çæ±å­ï¼å°±å¯ä»¥è®¡ç®æ¥å°çé¨æ°´ï¼æä»¥ä½¿ç¨åè°éåæ \n * å½åºç°é«äºæ é¡¶çæ±å­æ¶ï¼è¯´æå¯ä»¥å¯¹åé¢çæ±å­ç»ç®äºï¼è®¡ç®å·²ç»å°æçé¨æ°´ï¼ç¶ååºæ åé¢æ´ä½çæ±å­\n * ç¸å½äºæé åè°éåæ ï¼æ¯ä¸æ¬¡æ¾å°ä¸ä¸ä¸ªæ´å¤§åç´ ï¼å°±æ¯ç»ç®çæ¶æºã\n\nvar trap = function(height) {\n    const stack = [];\n    let res = 0;\n    for (let i = 0; i < height.length; i++) {\n        while (stack.length && height[i] > height[stack[stack.length - 1]]) {\n            // æä½æ´¼åå¼¹åº\n            let bottom = stack.pop();\n            // æå³å¢æä½æ´¼ä½æ¯æ ä¸ºç©ºè¯´ææ²¡æå·¦å¢, åæ²¡æç¨ç´æ¥ break\n            if (!stack.length) {\n                break;\n            }\n            let left = stack[stack.length - 1]; // å·¦å¢ç´¢å¼\n            let leftheight = height[left]; // å·¦å¢é«åº¦\n            let rightheight = height[i]; // å³å¢é«åº¦\n            let bottomhight = height[bottom]; // ä½æ´¼é«åº¦\n            // è½ç§¯æçæ°´ = (å³å¢ç´¢å¼ - å·¦å¢ç´¢å¼ - 1) * (min(å·¦å¢é«åº¦, å³å¢é«åº¦) - ä½æ´¼é«åº¦)\n            res += (i - left - 1) * (math.min(leftheight, rightheight) - bottomhight);\n        }\n        stack.push(i);\n    }\n    return res;\n}\n\n\n\n# æ±ç¶å¾ä¸­çæå¤§ç©å½¢\n\n * leetcode84\n * é¢è§£\n\n> é¦åï¼è¦æ³æ¾å°ç¬¬ i ä½ç½®æå¤§é¢ç§¯æ¯ä»ä¹ï¼\n> \n> æ¯ä»¥i ä¸ºä¸­å¿ï¼åå·¦æ¾ç¬¬ä¸ä¸ªå°äºheights[i]çä½ç½®leftï¼åå³æ¾ç¬¬ä¸ä¸ªå°äºheights[i]çä½ç½® rightï¼å³æå¤§é¢ç§¯ä¸º heights[i] * (right - left -1)\n> \n> åè°éå¢æ ï¼æ åçåç´ æ¯éå¢ç\n> \n> å½åç´ åºæ æ¶ï¼è¯´æè¿ä¸ªæ°åç´ æ¯åºæ åç´ ååæ¾ç¬¬ä¸ä¸ªæ¯å¶å°çåç´ \n> \n> ä¸¾ä¸ªä¾å­ï¼æ éæ¯ 1 5 6 ãæ¥ä¸æ¥æ°åç´ æ¯ 2 ï¼é£ä¹ 6 éè¦åºæ ã å½ 6 åºæ æ¶ï¼å³è¾¹ 2 ä»£è¡¨æ¯ 6 å³è¾¹ç¬¬ä¸ä¸ªæ¯ 6 å°çåç´ ã\n> \n> å½åç´ åºæ åï¼è¯´ææ°æ é¡¶åç´ æ¯åºæ åç´ ååæ¾ç¬¬ä¸ä¸ªæ¯å¶å°çåç´  å½ 6 åºæ æ¶ï¼5 æä¸ºæ°çæ é¡¶ï¼é£ä¹ 5 å°±æ¯ 6 å·¦è¾¹ç¬¬ä¸ä¸ªæ¯ 6 å°çåç´ ã\n\n * æè·¯ï¼æ¯æ¬¡åºæ æ¶ï¼tmp = stack.popï¼å½åç i æ¯å³è¾¹ç¬¬ä¸ä¸ªæ¯ä»å°çï¼æ é¡¶ä¸ºå·¦è¾¹ç¬¬ä¸ä¸ªæ¯ä»å°çï¼åªéè¦heights[tmp] * (right - left -1)\n\nvar largestrectanglearea = function(heights) {\n    if (heights.length === 0) return 0;\n    if (heights.length === 1) return heights[0];\n    heights.unshift(0);\n    heights.push(0);\n    const stack = [0];\n    let res = 0;\n    for (let i = 1; i < heights.length; i++) {\n        while (stack.length && heights[i] < heights[stack[stack.length - 1]]) {\n            // è®¡ç®ä»¥ tmp ä¸ºä¸­å¿çæå¤§é¢ç§¯\n            let tmp = stack.pop();\n            res = math.max(res, heights[tmp] * (i - stack[stack.length - 1] - 1));\n        }\n        stack.push(i);\n    }\n    return res;\n}\n\n\n\n# æå¤§ç©å½¢\n\n * leetcode85\n * å®å¨å¯ä»¥æé®é¢è½¬æ¢æä¸ä¸é¢ï¼éå¯¹æ¯ä¸è¡æ±æå¤§é«åº¦\n\n// æ±æ±ç¶å¾æå¤§ç©å½¢\nconst maxarea = function(heights) {\n    if (heights.length === 0) return 0\n    if (heights.length === 1) return heights[0]\n    heights.unshift(0)\n    heights.push(0)\n    const stack = []\n    let res = 0\n    for (let i = 0; i < heights.length; i++) {\n        while(stack.length && heights[i] < heights[stack[stack.length - 1]]) {\n            let tmp = stack.pop()\n            res = math.max(res, heights[tmp] * (i - stack[stack.length - 1] - 1))\n        }\n        stack.push(i)\n    }\n    return res\n }\n\n// éå¯¹æ¯ä¸è¡æ±æå¤§é«åº¦\nvar maximalrectangle = function(matrix) {\n    if (!matrix.length) return 0;\n    const m = matrix.length\n    const n = matrix[0].length;\n    const arr = array.from(new array(m), () => new array(n).fill(0));\n    for (let i = 0; i < m; i++) {\n        for (let j = 0; j < n; j++) {\n            if (matrix[i][j] === \'1\') {\n                arr[i][j] = i === 0 ? +matrix[i][j] : arr[i - 1][j] + 1;\n            }\n        }\n    }\n    let res = 0;\n    for (let i = 0; i < arr.length; i++) {\n        res = math.max(maxarea(arr[i]), res);\n    }\n    return res;\n};\n\n\n\n# å¯¹äºä»»æå­åºåå¯ä»¥è®¡ç®ä¸ä¸ªxå¼\n\n> x = sum(subarray) * min(subarray)ï¼ æ±æå¤§x\n> \n> ä¾å¦ï¼[3,1,6,4,5,2]\n> \n> x = (6+4+5) * 4 = 60\n\n * åè°éå¢æ ï¼è¥éåå°æåç´ æ¯æ é¡¶åç´ å°ï¼é£ä¹è¿ä¸ªåç´ å°±æ¯å³ä¾§ç¬¬ä¸æ¯ä»å°çï¼åºæ ï¼æ­¤æ¶æ é¡¶ä¸ºå·¦ä¾§ç¬¬ä¸æ¯ä»å°çï¼æä»¥æ­¤æ¶å¯ä»¥ç»ç®ä»¥åºæ åç´ ä¸ºæå°å¼çå­åºå\n * é¦å3å¥æ ï¼[3]ï¼éå°1 < 3ï¼3åºæ ï¼left = arr[-1] = 0ï¼right = arr[1] = 1ï¼res = 3 * 3 = 9\n * 1å6å¥æ ï¼[1, 6]ï¼éå° 4 < 6ï¼6åºæ ï¼left = arr[1] = 1ï¼right = arr[3] = 4, res = 6 * 6 = 36\n * [1, 4, 5]ï¼éå° 2 < 5ï¼5åºæ ï¼åç res = 25\n * [1, 4]ï¼éå° 2< 4ï¼4åºæ ï¼å·¦ä¾§ä¸º1ï¼å³ä¾§ä¸º2ï¼æ¾ä¸­é´çï¼res = 4 * (6 + 4 + 5) = 60\n * [1, 2]ï¼éè¦æå©ä¸çå¨é¨ç»ç®\n\nfunction calx(arr) {\n    let res = 0\n    const stack = []\n    stack.push(0)\n    for (let i = 1; i < arr.length; i++) {\n        while (stack.length && arr[i] <= arr[stack[stack.length - 1]]) {\n            let tmp = stack.pop()\n            let left = stack[stack.length - 1] || -1\n            let right = i\n            let ans = 0\n            for (let j = left + 1; j < right; j++) {\n                ans += arr[j]\n            }\n            res = math.max(res, ans * arr[tmp])\n        }\n        stack.push(i)\n    }\n    console.log(stack) // æ­¤æ¶ä¸º [1, 2],éè¦å°æ ä¸­å©ä½åç´ ç»ç®\n    while (stack.length) {\n        let tmp = stack.pop()\n        let left = stack[stack.length - 1] || -1\n        let right = arr.length\n        let ans = 0\n        for (let j = left + 1; j < right; j++) {\n            ans += arr[j]\n        }\n        res = math.max(res, ans * arr[tmp])\n    }\n    return res\n}\n\n\n\n# æ¯æ¥æ¸©åº¦\n\n * leetcode739\n\nè¯·æ ¹æ®æ¯æ¥ æ°æ¸© åè¡¨ï¼éæ°çæä¸ä¸ªåè¡¨ãå¯¹åºä½ç½®çè¾åºä¸ºï¼è¦æ³è§æµå°æ´é«çæ°æ¸©ï¼è³å°éè¦ç­å¾çå¤©æ°ãå¦ææ°æ¸©å¨è¿ä¹åé½ä¸ä¼åé«ï¼è¯·å¨è¯¥ä½ç½®ç¨ 0 æ¥ä»£æ¿ã\n\nä¾å¦ï¼ç»å®ä¸ä¸ªåè¡¨ temperatures = [73, 74, 75, 71, 69, 72, 76, 73]ï¼ä½ çè¾åºåºè¯¥æ¯ [1, 1, 4, 2, 1, 1, 0, 0]ã\n\næç¤ºï¼æ°æ¸© åè¡¨é¿åº¦çèå´æ¯ [1, 30000]ãæ¯ä¸ªæ°æ¸©çå¼çåä¸ºåæ°åº¦ï¼é½æ¯å¨ [30, 100] èå´åçæ´æ°ã\n\n\n\n# æ´åæ³\n\nvar dailytemperatures = function(t) {\n    let len = t.length\n    let res = new array(len).fill(0)\n    for (let i = 1; i < len; i++) {\n        for (let j = 0; j < i; j++) {\n            if (res[j] === 0 && t[i] > t[j]) {\n                res[j] = i - j\n            } \n        }\n    }\n   return res\n};\n\n\n\n# åè°æ \n\n * ç»´æ¤åè°éåæ ï¼ä¸æ¦å¥æ åç´ å¤§äºæ é¡¶åç´ ï¼å popï¼å¹¶è®°å½ç´¢å¼çå·®å¼\n * å¾ç¤º\n\n// å¯ä»¥çè§£ä¸ºæ°ç»ä¸­æ¾å°å³ä¾§ç¬¬ä¸ä¸ªæ¯èªå·±å¤§çæ°\nvar dailytemperatures = function(t) {\n    const res = new array(t.length).fill(0);\n    const stack = [];\n    for (let i = 0; i < t.length; i++) {\n        while (stack.length && t[i] > t[stack[stack.length - 1]]) {\n            res[stack[stack.length - 1]] = i - stack.pop();\n        }\n        stack.push(i);\n    }\n    return res;\n}\n\n\n\n# ä¸ä¸ä¸ªæ´å¤§åç´ \n\n * leetcode496\n\nvar nextgreaterelement = function(nums1, nums2) {\n    const map = new array(nums2.length).fill(-1);\n    const stack = [];\n    // æ± nums2 ä¸­æ¯ä¸ªåç´ çä¸ä¸æå¤§åç´ \n    for (let i = 0; i < nums2.length; i++) {\n        while (stack.length && nums2[i] > nums2[stack[stack.length - 1]]) {\n            map[stack[stack.length - 1]] = nums2[i];\n            stack.pop();\n        }\n        stack.push(i);\n    }\n    return nums1.map(n => map[nums2.indexof(n)]);\n};\n\n\n\n# ä¸¤ä¸ªæ å®ç°éå\n\nclass cqueue {\n    constructor () {\n        this.pushstack = []; // å­å¨å¥éçå¼   æ¨¡æå¥éè¡ä¸º\n        this.delestack = []; // å­å¨å¾åºéçé¡¹ æ¨¡æåºéè¡ä¸º\n    }\n    appendtail(v) {\n        this.pushstack.push(v);\n    }\n    deletehead() {\n        // è¥å¾å é¤æ ä¸­æå¼åç´æ¥pop æ¨¡æåºéè¡ä¸º\n        if (this.delestack.length) {\n            return this.delestack.pop();\n        }\n        // è¥ push æ ä¸­æå¼ åå¨é¨æ¨å¥ delete æ ä¸­\n        while (this.pushstack.length) {\n            this.delestack.push(this.pushstack.pop());\n        }\n        // æ­¤æ¶åºæ å¯¹è¿æ åå®¹ï¼è¿å -1\n        if(!this.delestack.length) {\n            return -1;\n        // æåå®¹ï¼å¼¹åºæ é¡¶ï¼ä¸è¿åå³å¯\n        } else {\n            return this.delestack.pop();\n        }\n    }\n}\n\n\n\n# æå°æ \n\n * leetcode155\n * é¢è§£\n\nclass minstack {\n    // å®ä¹ä¸ä¸ªè¾å©æ è®°å½æå°å¼ï¼é¿åº¦åä¸»æ é¿åº¦ä¸è´\n    constructor() {\n        this.stack = [];\n        this.helper = [];\n    }\n    push(val) {\n        this.stack.push(val);\n        // å¦æç©º æè å½åå¼å°äºç­äºè¾å©æ æ é¡¶ åç´æ¥å¥é\n        if (!this.helper.length || val <= this.helper[this.helper.length - 1]) {\n            this.helper.push(val);\n        } else {\n            this.helper.push(this.helper[this.helper.length - 1]);\n        }\n    }\n    pop() {\n        this.stack.pop();\n        this.helper.pop();\n    }\n    top() {\n        return this.stack[this.stack.length - 1];\n    }\n    getmin() {\n        return this.helper[this.helper.length - 1];\n    }\n}\n\n\n\n# æ»å¨çªå£æå¤§å¼ï¼åè°éåï¼\n\n * leetcode239\n * é¢è§£\n\nvar maxslidingwindow = function(nums, k) {\n    class queue {\n        constructor() {\n            this.queue = [];\n        }\n        appendtail(val) {\n            // ä¿è¯éååè°éå\n            while (this.queue.length && val > this.queue[this.queue.length - 1]) {\n                this.queue.pop();\n            }\n            this.queue.push(val);\n        }\n        deletehead(val) {\n            if (this.queue[0] === val) {\n                this.queue.shift();\n            }\n        }\n        head() {\n            return this.queue[0];\n        }\n    }\n    const queue = new queue();\n    const res = [];\n    // åæ¾è¿å» k ä¸ª\n    for (let i = 0; i < k; i++) {\n        queue.appendtail(nums[i]);\n    }\n    res.push(queue.head());\n    for (let i = k; i < nums.length; i++) {\n        // ç§»å¨çªå£å¹¶è®¡ç®æå¤§å¼\n        queue.deletehead(nums[i - k]);\n        queue.appendtail(nums[i]);\n        res.push(queue.head());\n    }\n    return res;\n};\n',charsets:{cjk:!0}},{title:"äºåæ ç¸å³",frontmatter:{title:"äºåæ ç¸å³",date:"2020-12-29T09:52:01.000Z",categories:"ç®æ³"},regularPath:"/algorithm/tree.html",relativePath:"algorithm/tree.md",key:"v-401c9622",path:"/algorithm/tree.html",headers:[{level:2,title:"äºåæ çååºéåï¼ä¸­åºéåï¼ååºéåçéå½ä¸ééå½",slug:"äºåæ çååºéå-ä¸­åºéå-ååºéåçéå½ä¸ééå½",normalizedTitle:"äºåæ çååºéåï¼ä¸­åºéåï¼ååºéåçéå½ä¸ééå½",charIndex:12},{level:2,title:"ç¸åçæ ",slug:"ç¸åçæ ",normalizedTitle:"ç¸åçæ ",charIndex:2417},{level:2,title:"å¤æ­äºåæ æ¯å¦å¯¹ç§°",slug:"å¤æ­äºåæ æ¯å¦å¯¹ç§°",normalizedTitle:"å¤æ­äºåæ æ¯å¦å¯¹ç§°",charIndex:54},{level:2,title:"åå¹¶äºåæ ",slug:"åå¹¶äºåæ ",normalizedTitle:"åå¹¶äºåæ ",charIndex:67},{level:2,title:"æ±äºåæ çæ·±åº¦(æå¤§ï¼æå°)",slug:"æ±äºåæ çæ·±åº¦-æå¤§-æå°",normalizedTitle:"æ±äºåæ çæ·±åº¦(æå¤§ï¼æå°)",charIndex:3665},{level:2,title:"ç¿»è½¬äºåæ ",slug:"ç¿»è½¬äºåæ ",normalizedTitle:"ç¿»è½¬äºåæ ",charIndex:87},{level:2,title:"äºåæ çå±æ¬¡éå",slug:"äºåæ çå±æ¬¡éå",normalizedTitle:"äºåæ çå±æ¬¡éå",charIndex:96},{level:2,title:"æåºæ°ç»è½¬äºåæç´¢æ ",slug:"æåºæ°ç»è½¬äºåæç´¢æ ",normalizedTitle:"æåºæ°ç»è½¬äºåæç´¢æ ",charIndex:108},{level:2,title:"æåºé¾è¡¨è½¬äºåæç´¢æ ",slug:"æåºé¾è¡¨è½¬äºåæç´¢æ ",normalizedTitle:"æåºé¾è¡¨è½¬äºåæç´¢æ ",charIndex:8493},{level:2,title:"éªè¯äºåæç´¢æ ",slug:"éªè¯äºåæç´¢æ ",normalizedTitle:"éªè¯äºåæç´¢æ ",charIndex:122},{level:2,title:"å¤æ­å¹³è¡¡äºåæ ",slug:"å¤æ­å¹³è¡¡äºåæ ",normalizedTitle:"å¤æ­å¹³è¡¡äºåæ ",charIndex:133},{level:2,title:"éªè¯ååºåºå",slug:"éªè¯ååºåºå",normalizedTitle:"éªè¯ååºåºå",charIndex:144},{level:2,title:"æ±äºåæ çå®½åº¦",slug:"æ±äºåæ çå®½åº¦",normalizedTitle:"æ±äºåæ çå®½åº¦",charIndex:154},{level:2,title:"ååºä¸­åºæé äºåæ ",slug:"ååºä¸­åºæé äºåæ ",normalizedTitle:"ååºä¸­åºæé äºåæ ",charIndex:165},{level:2,title:"äºåæ çå³è§å¾",slug:"äºåæ çå³è§å¾",normalizedTitle:"äºåæ çå³è§å¾",charIndex:178},{level:2,title:"äºåæ å±å¼ä¸ºé¾è¡¨",slug:"äºåæ å±å¼ä¸ºé¾è¡¨",normalizedTitle:"äºåæ å±å¼ä¸ºé¾è¡¨",charIndex:189},{level:2,title:"æè¿å¬å±ç¥å",slug:"æè¿å¬å±ç¥å",normalizedTitle:"æè¿å¬å±ç¥å",charIndex:201},{level:2,title:"æ ¹æ®è¾¹æé äºåæ ",slug:"æ ¹æ®è¾¹æé äºåæ ",normalizedTitle:"æ ¹æ®è¾¹æé äºåæ ",charIndex:211},{level:2,title:"æå¹³æ°æ®ç»æè½¬Tree",slug:"æå¹³æ°æ®ç»æè½¬tree",normalizedTitle:"æå¹³æ°æ®ç»æè½¬tree",charIndex:223}],lastUpdated:"8/4/2025, 3:49:09 PM",lastUpdatedTimestamp:1754293749e3,headersStr:"äºåæ çååºéåï¼ä¸­åºéåï¼ååºéåçéå½ä¸ééå½ ç¸åçæ  å¤æ­äºåæ æ¯å¦å¯¹ç§° åå¹¶äºåæ  æ±äºåæ çæ·±åº¦(æå¤§ï¼æå°) ç¿»è½¬äºåæ  äºåæ çå±æ¬¡éå æåºæ°ç»è½¬äºåæç´¢æ  æåºé¾è¡¨è½¬äºåæç´¢æ  éªè¯äºåæç´¢æ  å¤æ­å¹³è¡¡äºåæ  éªè¯ååºåºå æ±äºåæ çå®½åº¦ ååºä¸­åºæé äºåæ  äºåæ çå³è§å¾ äºåæ å±å¼ä¸ºé¾è¡¨ æè¿å¬å±ç¥å æ ¹æ®è¾¹æé äºåæ  æå¹³æ°æ®ç»æè½¬Tree",content:'# äºåæ ç¸å³\n\n * äºåæ çååºéåï¼ä¸­åºéåï¼ååºéåçéå½ä¸ééå½\n * å¤æ­äºåæ æ¯å¦ç¸å\n * å¤æ­äºåæ æ¯å¦å¯¹ç§°\n * åå¹¶äºåæ \n * æ±äºåæ çæ·±åº¦\n * ç¿»è½¬äºåæ \n * äºåæ çå±æ¬¡éå\n * æåºæ°ç»è½¬äºåæç´¢æ \n * éªè¯äºåæç´¢æ \n * å¤æ­å¹³è¡¡äºåæ \n * éªè¯ååºåºå\n * æ±äºåæ çå®½åº¦\n * ååºä¸­åºæé äºåæ \n * äºåæ çå³è§å¾\n * äºåæ å±å¼ä¸ºé¾è¡¨\n * æè¿å¬å±ç¥å\n * æ ¹æ®è¾¹æé äºåæ \n * æå¹³æ°æ®ç»æè½¬Tree\n\n\n# äºåæ çååºéåï¼ä¸­åºéåï¼ååºéåçéå½ä¸ééå½\n\n * ååºéå\n * ä¸­åºéå\n * ååºéå\n\nç»ä¸æ£µäºåæ \n\nvar root = {\nval: 1,\nleft: {\n    val: 2,\n    left: {\n      val: 4,\n    },\n    right:{\n      val:5\n    }\n},\nright: {\n    val: 3,\n    left: {\n      val: 6\n    },\n    right: {\n      val: 7\n    }\n}\n}\n\n\nfunction TreeNode(val) {  // æ èç¹æé æ¹å¼\n    this.val = val;\n    this.left = null;\n    this.right = null;\n}\n\n//ååºéå½\nvar preorderTraversal = function(root) {\n    const res = []; \n    function DLR (root) {\n      if (root) {\n          res.push(root.val);\n          DLR(root.left);\n          DLR(root.right);\n      }\n  \t}\n    DLR(root);\n    return res;\n};\n\n//ä¸­åºéå½\nvar inorderTraversal = function(root) {\n    const res = []; \n    function LDR (root) {\n    \tif (root) {\n        LDR(root.left);//åéåå°æå·¦è¾¹çèç¹ï¼ç¶åè¾åº\n        res.push(root.val);\n        LDR(root.right);\n      }\n    }\n    LDR(root);\n    return res;\n};\n\n//ååºéå½\nvar postorderTraversal = function(root) {\n    const res = []; \n    function LRD (root) {\n      if(root){\n        LRD(root.left);\n        LRD(root.right);\n        res.push(root.val);\n      }\n    }\n    LRD(root);\n    return res;\n};\n\n//ååºééå½\nvar preorderTraversal = function(root) {\n    if (!root) return [];\n    const stack = [];\n    const res = [];\n    stack.push(root);\n    while (stack.length) {\n        const tmp = stack.pop();\n        res.push(tmp.val);\n        if (tmp.right) stack.push(tmp.right);\n        if (tmp.left) stack.push(tmp.left);\n    } \n    return res;\n};\n\n//ä¸­åºééå½\nvar inorderTraversal = function(root) {\n    if (!root) return [];\n    const stack = [];\n    const res= [];\n    while (true) {\n        while (root) {\n            stack.push(root);\n            root = root.left;\n        }\n        if (stack.length === 0) break;\n        const tmp = stack.pop();\n        res.push(tmp.val);\n        root = tmp.right;\n    }\n    return res;\n};\n\n//ååºééå½\nvar postorderTraversal = function(root) {\n    if (!root) return [];\n    const stack = [];\n    const res = [];\n    stack.push(root);\n    while (stack.length) {\n        const tmp = stack.pop();\n        res.push(tmp.val);\n        if (tmp.left) stack.push(tmp.left);\n        if (tmp.right) stack.push(tmp.right);\n    } \n    return res.reverse();\n};\n\n\n\n# ç¸åçæ \n\nleetcode100\n\nvar isSameTree = function(p, q) {\n    if (!p && !q) {\n        return true;\n    }\n    else if ((!p && q) || (p && !q)) {\n        return false;\n    }\n    else if (p.val !== q.val) {\n        return false;\n    }\n    else {\n        return isSameTree(p.left, q.left) && isSameTree(p.right, q.right)\n    }\n};\n\n\n\n# å¤æ­äºåæ æ¯å¦å¯¹ç§°\n\n * leetcode101\n\nç»å®ä¸ä¸ªäºåæ ï¼æ£æ¥å®æ¯å¦æ¯éåå¯¹ç§°çã\n\n \n\nä¾å¦ï¼äºåæ  [1,2,2,3,4,4,3] æ¯å¯¹ç§°çã\n\n    1\n   / \\\n  2   2\n / \\ / \\\n3  4 4  3\n \n\nä½æ¯ä¸é¢è¿ä¸ª [1,2,2,null,3,null,3] åä¸æ¯éåå¯¹ç§°ç:\n\n    1\n   / \\\n  2   2\n   \\   \\\n   3    3\n\n\n * åä¸é¢ç±»ä¼¼ï¼ææ ¹èç¹æ¿æï¼å°±æ¯å¤æ­ä¸¤ä¸ªæ çå³ç³»\n\nvar isSymmetric = function(root) {\n    let p = root.left;\n    let q = root.right;\n    const fn = (p, q) => {\n        if (!p && !q) return true;\n        else if ((p && !q) || (!p && q)) return false;\n        else if (p.val !== q.val) return false;\n        else return fn(p.left, q.right) && fn(p.right, q.left);\n    }\n    return fn(p, q);\n};\n\n\n\n# åå¹¶äºåæ \n\n * leetcode617\n\nvar mergeTrees = function(root1, root2) {\n    // æä¸ä¸ªæ ä¸º null å°±ç´æ¥æ¿æ¢\n    if (!root1 || !root2) return root1 || root2;\n    else {\n        root1.val = root1.val + root2.val;\n        root1.left = mergeTrees(root1.left, root2.left);\n        root1.right = mergeTrees(root1.right, root2.right);\n    }\n    return root1;\n};\n\n\n\n# æ±äºåæ çæ·±åº¦(æå¤§ï¼æå°)\n\n * leetcode104\n * leetcode111\n\nç»å®ä¸ä¸ªäºåæ ï¼æ¾åºå¶æå¤§æ·±åº¦ã\n\näºåæ çæ·±åº¦ä¸ºæ ¹èç¹å°æè¿å¶å­èç¹çæé¿è·¯å¾ä¸çèç¹æ°ã\n\nè¯´æ: å¶å­èç¹æ¯ææ²¡æå­èç¹çèç¹ã\n\nç¤ºä¾ï¼\nç»å®äºåæ  [3,9,20,null,null,15,7]ï¼\n\n    3\n   / \\\n  9  20\n    /  \\\n   15   7\nè¿åå®çæå¤§æ·±åº¦ 3 ã\n\n\n// éå½\nvar maxDepth = function(root) {\n    if (!root) return 0;\n    else return 1 + Math.max(maxDepth(root.left), maxDepth(root.right));\n}\n\n//éå½2\nvar maxDepth = function(root) {\n    if (!root) return 0;\n    let res = [];\n    const fn = (path, depth) => {\n        if (!path.left && !path.right) {\n            res.push(depth);\n        }\n        if (path.left) {\n            fn(path.left, depth + 1);\n        }\n        if (path.right) {\n            fn(path.right, depth + 1);\n        }\n    }\n    fn(root, 1);\n    return Math.max(...res);\n}\n\n// BFS\nvar maxDepth = function(root) {\n    if (!root) return 0;\n    const queue = [root];\n    let depth = 0;\n    while (queue.length) {\n        const len = queue.length;\n        for (let i = 0; i < len; i++) {\n            const tmp = queue.shift();\n            if (tmp.left) queue.push(tmp.left);\n            if (tmp.right) queue.push(tmp.right);\n        }\n        depth++;\n    }\n    return depth;\n}\n\n\nç»å®ä¸ä¸ªäºåæ ï¼æ¾åºå¶æå°æ·±åº¦ã\n\næå°æ·±åº¦æ¯ä»æ ¹èç¹å°æè¿å¶å­èç¹çæç­è·¯å¾ä¸çèç¹æ°éã\n\nè¯´æ:Â å¶å­èç¹æ¯ææ²¡æå­èç¹çèç¹ã\n\nç¤ºä¾:\n\nç»å®äºåæ Â [3,9,20,null,null,15,7],\n\n    3\n   / \\\n  9  20\n    /  \\\n   15   7\n\nè¿åå®çæå°æ·±åº¦  2.\n\n\n// éå½\nvar minDepth = function(root) {\n    if (!root) return 0;\n    let res = [];\n    const fn = (path, depth) => {\n        if (!path.left && !path.right) {\n            res.push(depth);\n        }\n        if (path.left) {\n            fn(path.left, depth + 1);\n        }\n        if (path.right) {\n            fn(path.right, depth + 1);\n        }\n    }\n    fn(root, 1);\n    return Math.min(...res);\n}\n\n// BFS\nvar minDepth = function(root) {\n    if (!root) return 0;\n    const queue = [root];\n    let depth = 1;\n    while (queue.length) {\n        const len = queue.length;\n        for (let i = 0; i < len; i++) {\n            const tmp = queue.shift();\n            // éåå°ä¸å±æ¶ï¼åªè¦è¯¥å±æå¶å­èç¹åè¿åæå°å¼\n            if (!tmp.left && !tmp.right) return depth;\n            if (tmp.left) queue.push(tmp.left);\n            if (tmp.right) queue.push(tmp.right);\n        }\n        depth++;\n    }\n}\n\n\næ±æ°ç»çæå¤§æ·±åº¦\n\n// éå½1\nconst getMaxDepth = arr => {\n    if (!Array.isArray(arr)) return 0; // éæ°ç»æ·±åº¦ä¸º 0\n\n    let maxDepth = 0;\n    for (const item of arr) {\n        maxDepth = Math.max(maxDepth, getMaxDepth(item));\n    }\n    return maxDepth + 1;\n}\n\n// éå½2\nconst getMaxDepth = arr => {\n    const res = [];\n    const fn = (path, depth) => {\n        for (let i = 0; i < path.length; i++) {\n            if (Array.isArray(path[i])) {\n                fn(path[i], depth + 1);\n            }\n            else {\n                res.push(depth);\n            }\n        }\n    }\n    fn(arr, 1);\n    return Math.max(...res);\n}\n\n\n\n# ç¿»è½¬äºåæ \n\n * leetcode226\n\nvar invertTree = function(root) {\n    if (!root) return null;\n    [root.left, root.right] = [root.right, root.left];\n    invertTree(root.left);\n    invertTree(root.right);\n    return root;\n};\n\n\n\n# äºåæ çå±æ¬¡éå\n\n * leetcode102\n\n// éå\nvar levelOrder = function(root) {\n    if (!root) {\n        return [];\n    }\n    const res = [];\n    const queue = [root];\n    while (queue.length) {\n        const len = queue.length;\n        const arr = [];\n        for (let i = 0; i < len; i++) {\n            const tmp = queue.shift();\n            arr.push(tmp.val);\n            if (tmp.left) {\n                queue.push(tmp.left);\n            }\n            if (tmp.right) {\n                queue.push(tmp.right);\n            }\n        }\n        res.push(arr);\n    }\n    return res;\n};\n\n// æ¹åé¢åï¼è¾åºäºç»´æ°ç»\n// leetcode 102\n\näºåæ ï¼[3,9,20,null,null,15,7],\n\n    3\n   / \\\n  9  20\n    /  \\\n   15   7\nè¿åå¶å±æ¬¡éåç»æï¼\n\n[\n  [3],\n  [9,20],\n  [15,7]\n]\n\nvar levelOrder = function(root) {\n    let queue = [], arr = [], res = []\n    if (root !== null) queue.push(root)\n    while (queue.length !== 0) {\n        const len = queue.length // ä¸å®è¦æå­é¿åº¦ï¼ä¸ç¶åé¢pushçæ¶åä¼æ¹åqueueçé¿åº¦\n        for (let i = 0; i < len; i++) {\n            const node = queue.shift()\n            arr.push(node.val)\n            if (node.left) queue.push(node.left)\n            if (node.right) queue.push(node.right)\n        }\n        res.push(arr)\n        arr = []\n    }\n    return res\n};\n\n\n\n# æåºæ°ç»è½¬äºåæç´¢æ \n\n * leetcode108\n\nå°ä¸ä¸ªæç§ååºæåçæåºæ°ç»ï¼è½¬æ¢ä¸ºä¸æ£µé«åº¦å¹³è¡¡äºåæç´¢æ ã\n\næ¬é¢ä¸­ï¼ä¸ä¸ªé«åº¦å¹³è¡¡äºåæ æ¯æä¸ä¸ªäºåæ æ¯ä¸ªèç¹Â çå·¦å³ä¸¤ä¸ªå­æ çé«åº¦å·®çç»å¯¹å¼ä¸è¶è¿ 1ã\n\nç¤ºä¾:\n\nç»å®æåºæ°ç»: [-10,-3,0,5,9],\n\nä¸ä¸ªå¯è½çç­æ¡æ¯ï¼[0,-3,9,-10,null,5]ï¼å®å¯ä»¥è¡¨ç¤ºä¸é¢è¿ä¸ªé«åº¦å¹³è¡¡äºåæç´¢æ ï¼\n\n      0\n     / \\\n   -3   9\n   /   /\n -10  5\n\n\n * æ¯æ¬¡åä¸­é´çå¼ä½ä¸ºæ ¹èç¹\n\nvar sortedArrayToBST = function(nums) {\n    if(nums.length === 0) return null\n    let mid = parseInt(nums.length / 2)\n    let root = new TreeNode(nums[mid])\n    root.left = sortedArrayToBST(nums.slice(0, mid))\n    root.right = sortedArrayToBST(nums.slice(mid + 1))\n    return root\n};\n\n// parseInt(nums.length / 2)      =>     nums.length >> 1\n\n\n\n# æåºé¾è¡¨è½¬äºåæç´¢æ \n\n * leetcode109\n * é¦åå°é¾è¡¨è½¬æ°ç»ï¼åæä¸é¢å\n\nvar sortedListToBST = function(head) {\n    const arr = []\n    while (head) {\n        arr.push(head.val)\n        head = head.next\n    }\n    return sortedArrayToBST(arr)\n};\n\n\n\n# éªè¯äºåæç´¢æ \n\n * leetcode98\n\n> ç»å®ä¸ä¸ªäºåæ ï¼å¤æ­å¶æ¯å¦æ¯ä¸ä¸ªææçäºåæç´¢æ ã\n> \n> åè®¾ä¸ä¸ªäºåæç´¢æ å·æå¦ä¸ç¹å¾ï¼\n> \n> èç¹çå·¦å­æ åªåå«å°äºå½åèç¹çæ°ã èç¹çå³å­æ åªåå«å¤§äºå½åèç¹çæ°ã ææå·¦å­æ åå³å­æ èªèº«å¿é¡»ä¹æ¯äºåæç´¢æ ã\n\n// ç»åä¸­åºéåå³å¯\nvar isValidBST = function(root) {\n    const res = [-Infinity];\n    const stack = [];\n    while (true) {\n        while (root) {\n            stack.push(root);\n            root = root.left;\n        }\n        if (!stack.length) break;\n        const tmp = stack.pop();\n        if (tmp.val <= res[res.length - 1]) return false;\n        res.push(tmp.val);\n        root = tmp.right;\n    }\n    return true;\n}\n\n\n\n# å¤æ­å¹³è¡¡äºåæ \n\nvar isBalanced = function(root) {\n    let flag = true; // åæææäºåæ åå½åå¹³è¡¡äºåæ \n    function maxHeight (r) {\n        if(!r) return 0;//å½èç¹ä¸å­å¨æ¶ï¼é«åº¦ä¸º0\n        let left = maxHeight(r.left);\n        let right = maxHeight(r.right);//dfså¸¸è§æä½,æ±åºå·¦å³å­æ é«åº¦\n        if(Math.abs(left-right)>1){\n            flag = false;//é«åº¦å·®è¶è¿1æ¶ï¼éå¹³è¡¡äºåæ ï¼ç´æ¥false\n        }\n        return Math.max(left,right)+1 // è¿éå 1æ¯å ä¸ºè¦æç¶èç¹é«åº¦ç®è¿å»\n    };\n    maxHeight(root);\n    return flag;\n};\n\n\n\n# éªè¯ååºåºå\n\nleetcode331\n\nåºååäºåæ çä¸ç§æ¹æ³æ¯ä½¿ç¨ååºéåãå½æä»¬éå°ä¸ä¸ªéç©ºèç¹æ¶ï¼æä»¬å¯ä»¥è®°å½ä¸è¿ä¸ªèç¹çå¼ãå¦æå®æ¯ä¸ä¸ªç©ºèç¹ï¼æä»¬å¯ä»¥ä½¿ç¨ä¸ä¸ªæ è®°å¼è®°å½ï¼ä¾å¦ #ã\n\n     _9_\n    /   \\\n   3     2\n  / \\   / \\\n 4   1  #  6\n/ \\ / \\   / \\\n# # # #   # #\n\nç¤ºä¾ 1:\nè¾å¥: "9,3,4,#,#,1,#,#,2,#,6,#,#"\nè¾åº: true\n\nç¤ºä¾ 2:\nè¾å¥: "1,#"\nè¾åº: false\n\nç¤ºä¾ 3:\nè¾å¥: "9,#,#,1"\nè¾åº: false\n\n\n * é¢è§£\n\n * åå§åå¯ç¨æ§½ä½ï¼slots = 1ã\n\n * æ ¹æ®éå·åéååºåºååï¼å°ç»ææ°ç»å­å¨ï¼éåéåè¯¥æ°ç»ï¼\n   \n   * ç©ºèç¹åéç©ºèç¹é½æ¶èä¸ä¸ªæ§½ä½ï¼slots = slot - 1.\n   \n   * å¦æå½åçå¯ç¨æ§½ä½æ¯è´æ°ï¼é£ä¹è¿ä¸ªååºåºååæ¯éæ³çï¼è¿å Falseã\n   \n   * éç©ºèç¹ï¼node != \'#\'ï¼æ°å¢ä¸¤ä¸ªå¯ç¨æ§½ä½ï¼slots = slots + 2.\n\n * å¦æææçæ§½ä½é½æ¶èå®ï¼é£ä¹è¿ä¸ªååºåºååå°±æ¯åæ³çï¼è¿å slots == 0ã\n\n\t\tisValidSerialization (preorder) {\n            // "9,3,4,#,#,1,#,#,2,#,6,#,#"\n            let slot = 1\n            let arr = preorder.split(",")\n            for (let i in arr) {\n                slot--\n                if (slot < 0) return false\n                if (arr[i] !== "#") {\n                    slot += 2\n                }\n            }\n            return slot === 0\n        }\n\n\n\n# æ±äºåæ çå®½åº¦\n\n * leetcode662\n * æè·¯ï¼å±æ¬¡éåï¼è®°å½æ¯å±çå®½åº¦\n * å·¦å­©å­çç´¢å¼å¼ä¸º index * 2 + 1ï¼å³å­©å­çç´¢å¼å¼ä¸ºindex * 2 + 2ï¼å©ç¨èç¹å¼æ¥è®°å½ç´¢å¼å¼\n * ä¸ºäºé²æ­¢æ éä¹2è¶åºèå´ï¼æ¯å±ç´¢å¼é½åå»è¯¥å±ç¬¬ä¸ä¸ªç´¢å¼çå¼\n\nvar widthOfBinaryTree = function(root) {\n    if (!root) return [];\n    const stack = [root];\n    let res = 0n; // é²æ­¢è®¡ç®æº¢åº, åç¨BigIntç±»åè¡¨ç¤º\n    root.val = 0n;\n    while (stack.length) {\n        const len = stack.length;\n        const left = stack[0].val;\n        const right = stack[len - 1].val;\n        if (right - left + 1n > res) {\n            res = right - left + 1n;\n        }\n        for (let i = 0; i < len; i++) {\n            const tmp = stack.shift();\n            if (tmp.left) {\n                stack.push(tmp.left)\n                tmp.left.val = 2n * tmp.val\n            }\n            if (tmp.right) {\n                stack.push(tmp.right)\n                tmp.right.val = 2n * tmp.val + 1n\n            }\n        }\n    }\n    return Number(res);\n};\n\n\n\n# ååºä¸­åºæé äºåæ \n\n * leetcode105\n\n> æ ¹æ®ä¸æ£µæ çååºéåä¸ä¸­åºéåæé äºåæ ã\n> \n> æ³¨æ: ä½ å¯ä»¥åè®¾æ ä¸­æ²¡æéå¤çåç´ ã\n> \n> ä¾å¦ï¼ç»åº\n> \n> ååºéå preorder = [3,9,20,15,7] ä¸­åºéå inorder = [9,3,15,20,7] è¿åå¦ä¸çäºåæ ï¼\n> \n> 3\n> \n> /\n> 9 20 /\n> 15 7\n\nvar buildTree = function(preorder, inorder) {\n    if (!preorder.length) return null;\n    const root = new TreeNode(preorder[0]);\n    const mid = inorder.indexOf(preorder[0]);\n    root.left = buildTree(preorder.slice(1, 1 + mid), inorder.slice(0, mid));\n    root.right = buildTree(preorder.slice(1 + mid), inorder.slice(mid + 1));\n    return root;\n};\n\n\n\n# äºåæ çå³è§å¾\n\n * leetcode199\n\nè¾å¥: [1,2,3,null,5,null,4]\nè¾åº: [1, 3, 4]\nè§£é:\n\n   1            <---\n /   \\\n2     3         <---\n \\     \\\n  5     4       <---\n\n\n * å±æ¬¡éåè®°å½æ¯å±æåä¸ä¸ªå°±å¥½\n\nvar rightSideView = function(root) {\n    if (!root) {\n        return [];\n    }\n    const queue = [root];\n    const res = [];\n    while (queue.length) {\n        const len = queue.length;\n        for (let i = 0; i < len; i++) {\n            const tmp = queue.shift();\n            if (i === len - 1) {\n                res.push(tmp.val);\n            }\n            if (tmp.left) {\n                queue.push(tmp.left);\n            } \n            if (tmp.right) {\n                queue.push(tmp.right);\n            } \n        }\n    }\n    return res;\n};\n\n\n\n# äºåæ å±å¼ä¸ºé¾è¡¨\n\n * leetcode114\n\nç»ä½ äºåæ çæ ¹ç»ç¹ root ï¼è¯·ä½ å°å®å±å¼ä¸ºä¸ä¸ªåé¾è¡¨ï¼\n\nå±å¼åçåé¾è¡¨åºè¯¥åæ ·ä½¿ç¨ TreeNode ï¼å¶ä¸­ right å­æéæåé¾è¡¨ä¸­ä¸ä¸ä¸ªç»ç¹ï¼èå·¦å­æéå§ç»ä¸º null ã\nå±å¼åçåé¾è¡¨åºè¯¥ä¸äºåæ  ååºéå é¡ºåºç¸åã\n\n\n * ååºéååæé é¾è¡¨ï¼ä¸å®è¦æåä¸ä¸ï¼æé é¾è¡¨å¾å®¹æåºéï¼\n\nvar flatten = function(root) {\n    const stack = []\n    const arr = []\n    if (root !== null) stack.push(root)\n    while (stack.length) {\n        let tmp = stack.pop()\n        arr.push(tmp)\n        if (tmp.right !== null) stack.push(tmp.right)\n        if (tmp.left !== null) stack.push(tmp.left)\n    }\n    for (let i = 1; i < arr.length; i++) {\n        const prev = arr[i - 1], curr = arr[i]\n        prev.left = null\n        prev.right = curr\n    }\n};\n\n\n\n# æè¿å¬å±ç¥å\n\n * leetcode236\n * è§é¢è®²è§£\n\nvar lowestCommonAncestor = function(root, p, q) {\n    if (root === null || root === p || root === q) {\n        return root;\n    }\n    const left = lowestCommonAncestor(root.left, p, q);\n    const right = lowestCommonAncestor(root.right, p, q);\n    // å·¦å³å­æ é½æ¾å°ï¼è¯´æå·¦å­æ åå³å­æ åæä¸ä¸ªå¯»æ¾çèç¹ï¼æ­¤æ¶ root å°±æ¯æè¿å¬å±ç¥å\n    if (left && right) {\n        return root;\n    }\n    // åªæå·¦å­æ æ¾å°, è¿åéå½å·¦å­æ çç»æ\n    else if (left) {\n        return left;\n    }\n    // åªæå³å­æ æ¾å°, è¿åéå½å³å­æ çç»æ\n    else if (right) {\n        return right;\n    }\n};\n\n\n\n# æ ¹æ®è¾¹æé äºåæ \n\n[[1, 2], [1, 3], [3, 4], [3, 5], [1, 6]]\n\n{  \n    value: 1,\n    children: [\n   \t\t{ value:2, children: []},\n     \t{ \n          value: 3,\n       \t  children: [{ value: 4, children:[]}, { value: 5, children:[]}]\n        },\n   \t\t{ value:6, children: []},\n\t]\n}\n\n\n// O(2n)\nfunction build(sides) {\n    const map = {};\n    // æ¾å°æ ¹èç¹\n    const pids = sides.map(s => s[0]);\n    const ids = sides.map(s => s[1]);\n    const root = pids.find(p => !ids.includes(p));\n    // åå§å map\n    for (const side of sides) {\n        for (const id of side) {\n            map[id] = {val: id, children: []};\n        }\n    }\n    // æ ¹æ®è¾¹æé \n    for (const side of sides) {\n        const pid = side[0];\n        const id = side[1];\n        const node = map[id];\n        map[pid].children.push(node);\n    }\n    return map[root];\n}\n\n// O(n): è¾¹éåè¾¹åå§å map\nfunction builds(sides) {\n    const map = {};\n    // æ¾å°æ ¹èç¹\n    const pids = sides.map(s => s[0]);\n    const ids = sides.map(s => s[1]);\n    const root = pids.find(p => !ids.includes(p));\n    for (const side of sides) {\n        const pid = side[0];\n        const id = side[1];\n        if (!map[id]) {\n            map[id] = {val: id, children: []};\n        }\n        const node = map[id];\n        if (!map[pid]) {\n            map[pid] = {val: pid, children: []};\n        }\n        map[pid].children.push(node);\n    }\n    return map[root];\n}\n\n\n\n# æå¹³æ°æ®ç»æè½¬Tree\n\n// è¾å¥\n[\n    {id: 1, name: \'é¨é¨1\', pid: 0},\n    {id: 2, name: \'é¨é¨2\', pid: 1},\n    {id: 3, name: \'é¨é¨3\', pid: 1},\n    {id: 4, name: \'é¨é¨4\', pid: 3},\n    {id: 5, name: \'é¨é¨5\', pid: 4},\n]\n// è¾åº\n[\n    {\n        "id": 1,\n        "name": "é¨é¨1",\n        "pid": 0,\n        "children": [\n            {\n                "id": 2,\n                "name": "é¨é¨2",\n                "pid": 1,\n                "children": []\n            },\n            {\n                "id": 3,\n                "name": "é¨é¨3",\n                "pid": 1,\n                "children": [\n                    // ç»æ ,,,\n                ]\n            }\n        ]\n    }\n]\n\n\n// éå½\nconst fn = function(arr, id) {\n    const nodes = arr.filter(item => item.pid === id);\n    const res = [];\n    nodes.forEach(n => {\n        res.push({\n            ...n,\n            children: this.fn(arr, n.id),\n        })\n    })\n    return res;\n}\nfn(arr, 0);\n\n// ééå½ O(2n)\nfn(arr) {\n    const result = [];\n    const map = {};\n    // åå§å map\n    for (const item of arr) {\n        map[item.id] = {\n            ...item,\n            children: [],\n        };\n    }\n    for(const item of arr) {\n        const node = map[item.id];\n        if (item.pid === 0) {\n            result.push(node);\n        }\n        else {\n            map[item.pid].children.push(node);\n        }\n    }\n    return result;\n}\nfn(arr);\n\n// ééå½ O(n): è¾¹éåè¾¹åå§å map\nfn(arr) {\n    const result = [];\n    const map = {};\n    for(const item of arr) {\n        if (!map[item.id]) {\n            map[item.id] = {\n                ...item,\n                children: [],\n            };\n        }\n        const node = map[item.id];\n        if (item.pid === 0) {\n            result.push(node);\n        }\n        else {\n            if (!map[item.pid]) {\n                map[item.pid] = {\n                    ...item,\n                    children: [],\n                };\n            }\n            map[item.pid].children.push(node);\n        }\n    }\n    return result;\n}\n',normalizedContent:'# äºåæ ç¸å³\n\n * äºåæ çååºéåï¼ä¸­åºéåï¼ååºéåçéå½ä¸ééå½\n * å¤æ­äºåæ æ¯å¦ç¸å\n * å¤æ­äºåæ æ¯å¦å¯¹ç§°\n * åå¹¶äºåæ \n * æ±äºåæ çæ·±åº¦\n * ç¿»è½¬äºåæ \n * äºåæ çå±æ¬¡éå\n * æåºæ°ç»è½¬äºåæç´¢æ \n * éªè¯äºåæç´¢æ \n * å¤æ­å¹³è¡¡äºåæ \n * éªè¯ååºåºå\n * æ±äºåæ çå®½åº¦\n * ååºä¸­åºæé äºåæ \n * äºåæ çå³è§å¾\n * äºåæ å±å¼ä¸ºé¾è¡¨\n * æè¿å¬å±ç¥å\n * æ ¹æ®è¾¹æé äºåæ \n * æå¹³æ°æ®ç»æè½¬tree\n\n\n# äºåæ çååºéåï¼ä¸­åºéåï¼ååºéåçéå½ä¸ééå½\n\n * ååºéå\n * ä¸­åºéå\n * ååºéå\n\nç»ä¸æ£µäºåæ \n\nvar root = {\nval: 1,\nleft: {\n    val: 2,\n    left: {\n      val: 4,\n    },\n    right:{\n      val:5\n    }\n},\nright: {\n    val: 3,\n    left: {\n      val: 6\n    },\n    right: {\n      val: 7\n    }\n}\n}\n\n\nfunction treenode(val) {  // æ èç¹æé æ¹å¼\n    this.val = val;\n    this.left = null;\n    this.right = null;\n}\n\n//ååºéå½\nvar preordertraversal = function(root) {\n    const res = []; \n    function dlr (root) {\n      if (root) {\n          res.push(root.val);\n          dlr(root.left);\n          dlr(root.right);\n      }\n  \t}\n    dlr(root);\n    return res;\n};\n\n//ä¸­åºéå½\nvar inordertraversal = function(root) {\n    const res = []; \n    function ldr (root) {\n    \tif (root) {\n        ldr(root.left);//åéåå°æå·¦è¾¹çèç¹ï¼ç¶åè¾åº\n        res.push(root.val);\n        ldr(root.right);\n      }\n    }\n    ldr(root);\n    return res;\n};\n\n//ååºéå½\nvar postordertraversal = function(root) {\n    const res = []; \n    function lrd (root) {\n      if(root){\n        lrd(root.left);\n        lrd(root.right);\n        res.push(root.val);\n      }\n    }\n    lrd(root);\n    return res;\n};\n\n//ååºééå½\nvar preordertraversal = function(root) {\n    if (!root) return [];\n    const stack = [];\n    const res = [];\n    stack.push(root);\n    while (stack.length) {\n        const tmp = stack.pop();\n        res.push(tmp.val);\n        if (tmp.right) stack.push(tmp.right);\n        if (tmp.left) stack.push(tmp.left);\n    } \n    return res;\n};\n\n//ä¸­åºééå½\nvar inordertraversal = function(root) {\n    if (!root) return [];\n    const stack = [];\n    const res= [];\n    while (true) {\n        while (root) {\n            stack.push(root);\n            root = root.left;\n        }\n        if (stack.length === 0) break;\n        const tmp = stack.pop();\n        res.push(tmp.val);\n        root = tmp.right;\n    }\n    return res;\n};\n\n//ååºééå½\nvar postordertraversal = function(root) {\n    if (!root) return [];\n    const stack = [];\n    const res = [];\n    stack.push(root);\n    while (stack.length) {\n        const tmp = stack.pop();\n        res.push(tmp.val);\n        if (tmp.left) stack.push(tmp.left);\n        if (tmp.right) stack.push(tmp.right);\n    } \n    return res.reverse();\n};\n\n\n\n# ç¸åçæ \n\nleetcode100\n\nvar issametree = function(p, q) {\n    if (!p && !q) {\n        return true;\n    }\n    else if ((!p && q) || (p && !q)) {\n        return false;\n    }\n    else if (p.val !== q.val) {\n        return false;\n    }\n    else {\n        return issametree(p.left, q.left) && issametree(p.right, q.right)\n    }\n};\n\n\n\n# å¤æ­äºåæ æ¯å¦å¯¹ç§°\n\n * leetcode101\n\nç»å®ä¸ä¸ªäºåæ ï¼æ£æ¥å®æ¯å¦æ¯éåå¯¹ç§°çã\n\n \n\nä¾å¦ï¼äºåæ  [1,2,2,3,4,4,3] æ¯å¯¹ç§°çã\n\n    1\n   / \\\n  2   2\n / \\ / \\\n3  4 4  3\n \n\nä½æ¯ä¸é¢è¿ä¸ª [1,2,2,null,3,null,3] åä¸æ¯éåå¯¹ç§°ç:\n\n    1\n   / \\\n  2   2\n   \\   \\\n   3    3\n\n\n * åä¸é¢ç±»ä¼¼ï¼ææ ¹èç¹æ¿æï¼å°±æ¯å¤æ­ä¸¤ä¸ªæ çå³ç³»\n\nvar issymmetric = function(root) {\n    let p = root.left;\n    let q = root.right;\n    const fn = (p, q) => {\n        if (!p && !q) return true;\n        else if ((p && !q) || (!p && q)) return false;\n        else if (p.val !== q.val) return false;\n        else return fn(p.left, q.right) && fn(p.right, q.left);\n    }\n    return fn(p, q);\n};\n\n\n\n# åå¹¶äºåæ \n\n * leetcode617\n\nvar mergetrees = function(root1, root2) {\n    // æä¸ä¸ªæ ä¸º null å°±ç´æ¥æ¿æ¢\n    if (!root1 || !root2) return root1 || root2;\n    else {\n        root1.val = root1.val + root2.val;\n        root1.left = mergetrees(root1.left, root2.left);\n        root1.right = mergetrees(root1.right, root2.right);\n    }\n    return root1;\n};\n\n\n\n# æ±äºåæ çæ·±åº¦(æå¤§ï¼æå°)\n\n * leetcode104\n * leetcode111\n\nç»å®ä¸ä¸ªäºåæ ï¼æ¾åºå¶æå¤§æ·±åº¦ã\n\näºåæ çæ·±åº¦ä¸ºæ ¹èç¹å°æè¿å¶å­èç¹çæé¿è·¯å¾ä¸çèç¹æ°ã\n\nè¯´æ: å¶å­èç¹æ¯ææ²¡æå­èç¹çèç¹ã\n\nç¤ºä¾ï¼\nç»å®äºåæ  [3,9,20,null,null,15,7]ï¼\n\n    3\n   / \\\n  9  20\n    /  \\\n   15   7\nè¿åå®çæå¤§æ·±åº¦ 3 ã\n\n\n// éå½\nvar maxdepth = function(root) {\n    if (!root) return 0;\n    else return 1 + math.max(maxdepth(root.left), maxdepth(root.right));\n}\n\n//éå½2\nvar maxdepth = function(root) {\n    if (!root) return 0;\n    let res = [];\n    const fn = (path, depth) => {\n        if (!path.left && !path.right) {\n            res.push(depth);\n        }\n        if (path.left) {\n            fn(path.left, depth + 1);\n        }\n        if (path.right) {\n            fn(path.right, depth + 1);\n        }\n    }\n    fn(root, 1);\n    return math.max(...res);\n}\n\n// bfs\nvar maxdepth = function(root) {\n    if (!root) return 0;\n    const queue = [root];\n    let depth = 0;\n    while (queue.length) {\n        const len = queue.length;\n        for (let i = 0; i < len; i++) {\n            const tmp = queue.shift();\n            if (tmp.left) queue.push(tmp.left);\n            if (tmp.right) queue.push(tmp.right);\n        }\n        depth++;\n    }\n    return depth;\n}\n\n\nç»å®ä¸ä¸ªäºåæ ï¼æ¾åºå¶æå°æ·±åº¦ã\n\næå°æ·±åº¦æ¯ä»æ ¹èç¹å°æè¿å¶å­èç¹çæç­è·¯å¾ä¸çèç¹æ°éã\n\nè¯´æ:Â å¶å­èç¹æ¯ææ²¡æå­èç¹çèç¹ã\n\nç¤ºä¾:\n\nç»å®äºåæ Â [3,9,20,null,null,15,7],\n\n    3\n   / \\\n  9  20\n    /  \\\n   15   7\n\nè¿åå®çæå°æ·±åº¦  2.\n\n\n// éå½\nvar mindepth = function(root) {\n    if (!root) return 0;\n    let res = [];\n    const fn = (path, depth) => {\n        if (!path.left && !path.right) {\n            res.push(depth);\n        }\n        if (path.left) {\n            fn(path.left, depth + 1);\n        }\n        if (path.right) {\n            fn(path.right, depth + 1);\n        }\n    }\n    fn(root, 1);\n    return math.min(...res);\n}\n\n// bfs\nvar mindepth = function(root) {\n    if (!root) return 0;\n    const queue = [root];\n    let depth = 1;\n    while (queue.length) {\n        const len = queue.length;\n        for (let i = 0; i < len; i++) {\n            const tmp = queue.shift();\n            // éåå°ä¸å±æ¶ï¼åªè¦è¯¥å±æå¶å­èç¹åè¿åæå°å¼\n            if (!tmp.left && !tmp.right) return depth;\n            if (tmp.left) queue.push(tmp.left);\n            if (tmp.right) queue.push(tmp.right);\n        }\n        depth++;\n    }\n}\n\n\næ±æ°ç»çæå¤§æ·±åº¦\n\n// éå½1\nconst getmaxdepth = arr => {\n    if (!array.isarray(arr)) return 0; // éæ°ç»æ·±åº¦ä¸º 0\n\n    let maxdepth = 0;\n    for (const item of arr) {\n        maxdepth = math.max(maxdepth, getmaxdepth(item));\n    }\n    return maxdepth + 1;\n}\n\n// éå½2\nconst getmaxdepth = arr => {\n    const res = [];\n    const fn = (path, depth) => {\n        for (let i = 0; i < path.length; i++) {\n            if (array.isarray(path[i])) {\n                fn(path[i], depth + 1);\n            }\n            else {\n                res.push(depth);\n            }\n        }\n    }\n    fn(arr, 1);\n    return math.max(...res);\n}\n\n\n\n# ç¿»è½¬äºåæ \n\n * leetcode226\n\nvar inverttree = function(root) {\n    if (!root) return null;\n    [root.left, root.right] = [root.right, root.left];\n    inverttree(root.left);\n    inverttree(root.right);\n    return root;\n};\n\n\n\n# äºåæ çå±æ¬¡éå\n\n * leetcode102\n\n// éå\nvar levelorder = function(root) {\n    if (!root) {\n        return [];\n    }\n    const res = [];\n    const queue = [root];\n    while (queue.length) {\n        const len = queue.length;\n        const arr = [];\n        for (let i = 0; i < len; i++) {\n            const tmp = queue.shift();\n            arr.push(tmp.val);\n            if (tmp.left) {\n                queue.push(tmp.left);\n            }\n            if (tmp.right) {\n                queue.push(tmp.right);\n            }\n        }\n        res.push(arr);\n    }\n    return res;\n};\n\n// æ¹åé¢åï¼è¾åºäºç»´æ°ç»\n// leetcode 102\n\näºåæ ï¼[3,9,20,null,null,15,7],\n\n    3\n   / \\\n  9  20\n    /  \\\n   15   7\nè¿åå¶å±æ¬¡éåç»æï¼\n\n[\n  [3],\n  [9,20],\n  [15,7]\n]\n\nvar levelorder = function(root) {\n    let queue = [], arr = [], res = []\n    if (root !== null) queue.push(root)\n    while (queue.length !== 0) {\n        const len = queue.length // ä¸å®è¦æå­é¿åº¦ï¼ä¸ç¶åé¢pushçæ¶åä¼æ¹åqueueçé¿åº¦\n        for (let i = 0; i < len; i++) {\n            const node = queue.shift()\n            arr.push(node.val)\n            if (node.left) queue.push(node.left)\n            if (node.right) queue.push(node.right)\n        }\n        res.push(arr)\n        arr = []\n    }\n    return res\n};\n\n\n\n# æåºæ°ç»è½¬äºåæç´¢æ \n\n * leetcode108\n\nå°ä¸ä¸ªæç§ååºæåçæåºæ°ç»ï¼è½¬æ¢ä¸ºä¸æ£µé«åº¦å¹³è¡¡äºåæç´¢æ ã\n\næ¬é¢ä¸­ï¼ä¸ä¸ªé«åº¦å¹³è¡¡äºåæ æ¯æä¸ä¸ªäºåæ æ¯ä¸ªèç¹Â çå·¦å³ä¸¤ä¸ªå­æ çé«åº¦å·®çç»å¯¹å¼ä¸è¶è¿ 1ã\n\nç¤ºä¾:\n\nç»å®æåºæ°ç»: [-10,-3,0,5,9],\n\nä¸ä¸ªå¯è½çç­æ¡æ¯ï¼[0,-3,9,-10,null,5]ï¼å®å¯ä»¥è¡¨ç¤ºä¸é¢è¿ä¸ªé«åº¦å¹³è¡¡äºåæç´¢æ ï¼\n\n      0\n     / \\\n   -3   9\n   /   /\n -10  5\n\n\n * æ¯æ¬¡åä¸­é´çå¼ä½ä¸ºæ ¹èç¹\n\nvar sortedarraytobst = function(nums) {\n    if(nums.length === 0) return null\n    let mid = parseint(nums.length / 2)\n    let root = new treenode(nums[mid])\n    root.left = sortedarraytobst(nums.slice(0, mid))\n    root.right = sortedarraytobst(nums.slice(mid + 1))\n    return root\n};\n\n// parseint(nums.length / 2)      =>     nums.length >> 1\n\n\n\n# æåºé¾è¡¨è½¬äºåæç´¢æ \n\n * leetcode109\n * é¦åå°é¾è¡¨è½¬æ°ç»ï¼åæä¸é¢å\n\nvar sortedlisttobst = function(head) {\n    const arr = []\n    while (head) {\n        arr.push(head.val)\n        head = head.next\n    }\n    return sortedarraytobst(arr)\n};\n\n\n\n# éªè¯äºåæç´¢æ \n\n * leetcode98\n\n> ç»å®ä¸ä¸ªäºåæ ï¼å¤æ­å¶æ¯å¦æ¯ä¸ä¸ªææçäºåæç´¢æ ã\n> \n> åè®¾ä¸ä¸ªäºåæç´¢æ å·æå¦ä¸ç¹å¾ï¼\n> \n> èç¹çå·¦å­æ åªåå«å°äºå½åèç¹çæ°ã èç¹çå³å­æ åªåå«å¤§äºå½åèç¹çæ°ã ææå·¦å­æ åå³å­æ èªèº«å¿é¡»ä¹æ¯äºåæç´¢æ ã\n\n// ç»åä¸­åºéåå³å¯\nvar isvalidbst = function(root) {\n    const res = [-infinity];\n    const stack = [];\n    while (true) {\n        while (root) {\n            stack.push(root);\n            root = root.left;\n        }\n        if (!stack.length) break;\n        const tmp = stack.pop();\n        if (tmp.val <= res[res.length - 1]) return false;\n        res.push(tmp.val);\n        root = tmp.right;\n    }\n    return true;\n}\n\n\n\n# å¤æ­å¹³è¡¡äºåæ \n\nvar isbalanced = function(root) {\n    let flag = true; // åæææäºåæ åå½åå¹³è¡¡äºåæ \n    function maxheight (r) {\n        if(!r) return 0;//å½èç¹ä¸å­å¨æ¶ï¼é«åº¦ä¸º0\n        let left = maxheight(r.left);\n        let right = maxheight(r.right);//dfså¸¸è§æä½,æ±åºå·¦å³å­æ é«åº¦\n        if(math.abs(left-right)>1){\n            flag = false;//é«åº¦å·®è¶è¿1æ¶ï¼éå¹³è¡¡äºåæ ï¼ç´æ¥false\n        }\n        return math.max(left,right)+1 // è¿éå 1æ¯å ä¸ºè¦æç¶èç¹é«åº¦ç®è¿å»\n    };\n    maxheight(root);\n    return flag;\n};\n\n\n\n# éªè¯ååºåºå\n\nleetcode331\n\nåºååäºåæ çä¸ç§æ¹æ³æ¯ä½¿ç¨ååºéåãå½æä»¬éå°ä¸ä¸ªéç©ºèç¹æ¶ï¼æä»¬å¯ä»¥è®°å½ä¸è¿ä¸ªèç¹çå¼ãå¦æå®æ¯ä¸ä¸ªç©ºèç¹ï¼æä»¬å¯ä»¥ä½¿ç¨ä¸ä¸ªæ è®°å¼è®°å½ï¼ä¾å¦ #ã\n\n     _9_\n    /   \\\n   3     2\n  / \\   / \\\n 4   1  #  6\n/ \\ / \\   / \\\n# # # #   # #\n\nç¤ºä¾ 1:\nè¾å¥: "9,3,4,#,#,1,#,#,2,#,6,#,#"\nè¾åº: true\n\nç¤ºä¾ 2:\nè¾å¥: "1,#"\nè¾åº: false\n\nç¤ºä¾ 3:\nè¾å¥: "9,#,#,1"\nè¾åº: false\n\n\n * é¢è§£\n\n * åå§åå¯ç¨æ§½ä½ï¼slots = 1ã\n\n * æ ¹æ®éå·åéååºåºååï¼å°ç»ææ°ç»å­å¨ï¼éåéåè¯¥æ°ç»ï¼\n   \n   * ç©ºèç¹åéç©ºèç¹é½æ¶èä¸ä¸ªæ§½ä½ï¼slots = slot - 1.\n   \n   * å¦æå½åçå¯ç¨æ§½ä½æ¯è´æ°ï¼é£ä¹è¿ä¸ªååºåºååæ¯éæ³çï¼è¿å falseã\n   \n   * éç©ºèç¹ï¼node != \'#\'ï¼æ°å¢ä¸¤ä¸ªå¯ç¨æ§½ä½ï¼slots = slots + 2.\n\n * å¦æææçæ§½ä½é½æ¶èå®ï¼é£ä¹è¿ä¸ªååºåºååå°±æ¯åæ³çï¼è¿å slots == 0ã\n\n\t\tisvalidserialization (preorder) {\n            // "9,3,4,#,#,1,#,#,2,#,6,#,#"\n            let slot = 1\n            let arr = preorder.split(",")\n            for (let i in arr) {\n                slot--\n                if (slot < 0) return false\n                if (arr[i] !== "#") {\n                    slot += 2\n                }\n            }\n            return slot === 0\n        }\n\n\n\n# æ±äºåæ çå®½åº¦\n\n * leetcode662\n * æè·¯ï¼å±æ¬¡éåï¼è®°å½æ¯å±çå®½åº¦\n * å·¦å­©å­çç´¢å¼å¼ä¸º index * 2 + 1ï¼å³å­©å­çç´¢å¼å¼ä¸ºindex * 2 + 2ï¼å©ç¨èç¹å¼æ¥è®°å½ç´¢å¼å¼\n * ä¸ºäºé²æ­¢æ éä¹2è¶åºèå´ï¼æ¯å±ç´¢å¼é½åå»è¯¥å±ç¬¬ä¸ä¸ªç´¢å¼çå¼\n\nvar widthofbinarytree = function(root) {\n    if (!root) return [];\n    const stack = [root];\n    let res = 0n; // é²æ­¢è®¡ç®æº¢åº, åç¨bigintç±»åè¡¨ç¤º\n    root.val = 0n;\n    while (stack.length) {\n        const len = stack.length;\n        const left = stack[0].val;\n        const right = stack[len - 1].val;\n        if (right - left + 1n > res) {\n            res = right - left + 1n;\n        }\n        for (let i = 0; i < len; i++) {\n            const tmp = stack.shift();\n            if (tmp.left) {\n                stack.push(tmp.left)\n                tmp.left.val = 2n * tmp.val\n            }\n            if (tmp.right) {\n                stack.push(tmp.right)\n                tmp.right.val = 2n * tmp.val + 1n\n            }\n        }\n    }\n    return number(res);\n};\n\n\n\n# ååºä¸­åºæé äºåæ \n\n * leetcode105\n\n> æ ¹æ®ä¸æ£µæ çååºéåä¸ä¸­åºéåæé äºåæ ã\n> \n> æ³¨æ: ä½ å¯ä»¥åè®¾æ ä¸­æ²¡æéå¤çåç´ ã\n> \n> ä¾å¦ï¼ç»åº\n> \n> ååºéå preorder = [3,9,20,15,7] ä¸­åºéå inorder = [9,3,15,20,7] è¿åå¦ä¸çäºåæ ï¼\n> \n> 3\n> \n> /\n> 9 20 /\n> 15 7\n\nvar buildtree = function(preorder, inorder) {\n    if (!preorder.length) return null;\n    const root = new treenode(preorder[0]);\n    const mid = inorder.indexof(preorder[0]);\n    root.left = buildtree(preorder.slice(1, 1 + mid), inorder.slice(0, mid));\n    root.right = buildtree(preorder.slice(1 + mid), inorder.slice(mid + 1));\n    return root;\n};\n\n\n\n# äºåæ çå³è§å¾\n\n * leetcode199\n\nè¾å¥: [1,2,3,null,5,null,4]\nè¾åº: [1, 3, 4]\nè§£é:\n\n   1            <---\n /   \\\n2     3         <---\n \\     \\\n  5     4       <---\n\n\n * å±æ¬¡éåè®°å½æ¯å±æåä¸ä¸ªå°±å¥½\n\nvar rightsideview = function(root) {\n    if (!root) {\n        return [];\n    }\n    const queue = [root];\n    const res = [];\n    while (queue.length) {\n        const len = queue.length;\n        for (let i = 0; i < len; i++) {\n            const tmp = queue.shift();\n            if (i === len - 1) {\n                res.push(tmp.val);\n            }\n            if (tmp.left) {\n                queue.push(tmp.left);\n            } \n            if (tmp.right) {\n                queue.push(tmp.right);\n            } \n        }\n    }\n    return res;\n};\n\n\n\n# äºåæ å±å¼ä¸ºé¾è¡¨\n\n * leetcode114\n\nç»ä½ äºåæ çæ ¹ç»ç¹ root ï¼è¯·ä½ å°å®å±å¼ä¸ºä¸ä¸ªåé¾è¡¨ï¼\n\nå±å¼åçåé¾è¡¨åºè¯¥åæ ·ä½¿ç¨ treenode ï¼å¶ä¸­ right å­æéæåé¾è¡¨ä¸­ä¸ä¸ä¸ªç»ç¹ï¼èå·¦å­æéå§ç»ä¸º null ã\nå±å¼åçåé¾è¡¨åºè¯¥ä¸äºåæ  ååºéå é¡ºåºç¸åã\n\n\n * ååºéååæé é¾è¡¨ï¼ä¸å®è¦æåä¸ä¸ï¼æé é¾è¡¨å¾å®¹æåºéï¼\n\nvar flatten = function(root) {\n    const stack = []\n    const arr = []\n    if (root !== null) stack.push(root)\n    while (stack.length) {\n        let tmp = stack.pop()\n        arr.push(tmp)\n        if (tmp.right !== null) stack.push(tmp.right)\n        if (tmp.left !== null) stack.push(tmp.left)\n    }\n    for (let i = 1; i < arr.length; i++) {\n        const prev = arr[i - 1], curr = arr[i]\n        prev.left = null\n        prev.right = curr\n    }\n};\n\n\n\n# æè¿å¬å±ç¥å\n\n * leetcode236\n * è§é¢è®²è§£\n\nvar lowestcommonancestor = function(root, p, q) {\n    if (root === null || root === p || root === q) {\n        return root;\n    }\n    const left = lowestcommonancestor(root.left, p, q);\n    const right = lowestcommonancestor(root.right, p, q);\n    // å·¦å³å­æ é½æ¾å°ï¼è¯´æå·¦å­æ åå³å­æ åæä¸ä¸ªå¯»æ¾çèç¹ï¼æ­¤æ¶ root å°±æ¯æè¿å¬å±ç¥å\n    if (left && right) {\n        return root;\n    }\n    // åªæå·¦å­æ æ¾å°, è¿åéå½å·¦å­æ çç»æ\n    else if (left) {\n        return left;\n    }\n    // åªæå³å­æ æ¾å°, è¿åéå½å³å­æ çç»æ\n    else if (right) {\n        return right;\n    }\n};\n\n\n\n# æ ¹æ®è¾¹æé äºåæ \n\n[[1, 2], [1, 3], [3, 4], [3, 5], [1, 6]]\n\n{  \n    value: 1,\n    children: [\n   \t\t{ value:2, children: []},\n     \t{ \n          value: 3,\n       \t  children: [{ value: 4, children:[]}, { value: 5, children:[]}]\n        },\n   \t\t{ value:6, children: []},\n\t]\n}\n\n\n// o(2n)\nfunction build(sides) {\n    const map = {};\n    // æ¾å°æ ¹èç¹\n    const pids = sides.map(s => s[0]);\n    const ids = sides.map(s => s[1]);\n    const root = pids.find(p => !ids.includes(p));\n    // åå§å map\n    for (const side of sides) {\n        for (const id of side) {\n            map[id] = {val: id, children: []};\n        }\n    }\n    // æ ¹æ®è¾¹æé \n    for (const side of sides) {\n        const pid = side[0];\n        const id = side[1];\n        const node = map[id];\n        map[pid].children.push(node);\n    }\n    return map[root];\n}\n\n// o(n): è¾¹éåè¾¹åå§å map\nfunction builds(sides) {\n    const map = {};\n    // æ¾å°æ ¹èç¹\n    const pids = sides.map(s => s[0]);\n    const ids = sides.map(s => s[1]);\n    const root = pids.find(p => !ids.includes(p));\n    for (const side of sides) {\n        const pid = side[0];\n        const id = side[1];\n        if (!map[id]) {\n            map[id] = {val: id, children: []};\n        }\n        const node = map[id];\n        if (!map[pid]) {\n            map[pid] = {val: pid, children: []};\n        }\n        map[pid].children.push(node);\n    }\n    return map[root];\n}\n\n\n\n# æå¹³æ°æ®ç»æè½¬tree\n\n// è¾å¥\n[\n    {id: 1, name: \'é¨é¨1\', pid: 0},\n    {id: 2, name: \'é¨é¨2\', pid: 1},\n    {id: 3, name: \'é¨é¨3\', pid: 1},\n    {id: 4, name: \'é¨é¨4\', pid: 3},\n    {id: 5, name: \'é¨é¨5\', pid: 4},\n]\n// è¾åº\n[\n    {\n        "id": 1,\n        "name": "é¨é¨1",\n        "pid": 0,\n        "children": [\n            {\n                "id": 2,\n                "name": "é¨é¨2",\n                "pid": 1,\n                "children": []\n            },\n            {\n                "id": 3,\n                "name": "é¨é¨3",\n                "pid": 1,\n                "children": [\n                    // ç»æ ,,,\n                ]\n            }\n        ]\n    }\n]\n\n\n// éå½\nconst fn = function(arr, id) {\n    const nodes = arr.filter(item => item.pid === id);\n    const res = [];\n    nodes.foreach(n => {\n        res.push({\n            ...n,\n            children: this.fn(arr, n.id),\n        })\n    })\n    return res;\n}\nfn(arr, 0);\n\n// ééå½ o(2n)\nfn(arr) {\n    const result = [];\n    const map = {};\n    // åå§å map\n    for (const item of arr) {\n        map[item.id] = {\n            ...item,\n            children: [],\n        };\n    }\n    for(const item of arr) {\n        const node = map[item.id];\n        if (item.pid === 0) {\n            result.push(node);\n        }\n        else {\n            map[item.pid].children.push(node);\n        }\n    }\n    return result;\n}\nfn(arr);\n\n// ééå½ o(n): è¾¹éåè¾¹åå§å map\nfn(arr) {\n    const result = [];\n    const map = {};\n    for(const item of arr) {\n        if (!map[item.id]) {\n            map[item.id] = {\n                ...item,\n                children: [],\n            };\n        }\n        const node = map[item.id];\n        if (item.pid === 0) {\n            result.push(node);\n        }\n        else {\n            if (!map[item.pid]) {\n                map[item.pid] = {\n                    ...item,\n                    children: [],\n                };\n            }\n            map[item.pid].children.push(node);\n        }\n    }\n    return result;\n}\n',charsets:{cjk:!0}},{title:"ä¿¡æ¯æ´ç",frontmatter:{},regularPath:"/blockchain/info.html",relativePath:"blockchain/info.md",key:"v-4d369e5f",path:"/blockchain/info.html",lastUpdated:"6/26/2023, 7:15:43 PM",lastUpdatedTimestamp:1687778143e3,headersStr:null,content:"# ä¿¡æ¯æ´ç\n\n * https://abetterweb3.notion.site/\n * SmartDeer\n * bingx\n * bitget\n * debank\n * onekey",normalizedContent:"# ä¿¡æ¯æ´ç\n\n * https://abetterweb3.notion.site/\n * smartdeer\n * bingx\n * bitget\n * debank\n * onekey",charsets:{cjk:!0}},{title:"web3.jsåethers.js",frontmatter:{},regularPath:"/blockchain/js.html",relativePath:"blockchain/js.md",key:"v-97a9a082",path:"/blockchain/js.html",headers:[{level:2,title:"æ ¸å¿åè½",slug:"æ ¸å¿åè½",normalizedTitle:"æ ¸å¿åè½",charIndex:878},{level:2,title:"ä¸»è¦åºå«è¯¦è§£",slug:"ä¸»è¦åºå«è¯¦è§£",normalizedTitle:"ä¸»è¦åºå«è¯¦è§£",charIndex:1042},{level:3,title:"è®¾è®¡å²å­¦",slug:"è®¾è®¡å²å­¦",normalizedTitle:"è®¾è®¡å²å­¦",charIndex:1053},{level:3,title:"é±åä¸ç§é¥ç®¡ç",slug:"é±åä¸ç§é¥ç®¡ç",normalizedTitle:"é±åä¸ç§é¥ç®¡ç",charIndex:1257},{level:3,title:"Provider éç½®",slug:"provider-éç½®",normalizedTitle:"provider éç½®",charIndex:1517},{level:3,title:"åçº¦äº¤äºç¤ºä¾",slug:"åçº¦äº¤äºç¤ºä¾",normalizedTitle:"åçº¦äº¤äºç¤ºä¾",charIndex:1767},{level:3,title:"äº¤æåé",slug:"äº¤æåé",normalizedTitle:"äº¤æåé",charIndex:2070},{level:2,title:"å¦ä½éæ©ï¼",slug:"å¦ä½éæ©",normalizedTitle:"å¦ä½éæ©ï¼",charIndex:2374},{level:2,title:"æ»ç»",slug:"æ»ç»",normalizedTitle:"æ»ç»",charIndex:2596}],lastUpdated:"5/23/2025, 5:16:31 PM",lastUpdatedTimestamp:1747991791e3,headersStr:"æ ¸å¿åè½ ä¸»è¦åºå«è¯¦è§£ è®¾è®¡å²å­¦ é±åä¸ç§é¥ç®¡ç Provider éç½® åçº¦äº¤äºç¤ºä¾ äº¤æåé å¦ä½éæ©ï¼ æ»ç»",content:'# web3.jsåethers.js\n\nå¯¹æ¯ç»´åº¦               WEB3.JS                         ETHERS.JS\nå¼åè/ç»´æ¤è            ä»¥å¤ªååºéä¼                          ç¤¾åºé©±å¨ï¼Richard Moore åå»ºï¼\nè®¾è®¡çå¿µ               æ©æå®æ¹åºï¼åè½å¨é¢                      è½»éãæ¨¡ååãå®å¨æ§ä¼å\nä»£ç ä½ç§¯               è¾å¤§ï¼çº¦ 1MBï¼                       æ´å°ï¼çº¦ 500KBï¼\nAPI åå¥½æ§            ä¼ ç»åè°é£æ ¼ï¼æ¯æ Promise               åç Promise + æ´ç®æ´çé¾å¼è°ç¨\né±åä¸ç§é¥å¤ç            éè¦ä¾èµå¤é¨é±åï¼å¦ MetaMaskï¼            åç½®å®å¨é±åç±»ï¼å¯ç¬ç«ç®¡çç§é¥\nProvider æ¯æ        éèªè¡éç½® HTTP/WebSocket Provider   åç½®é»è®¤ Providerï¼å¦ InfuraãAlchemyï¼\nTypeScript æ¯æ      æ¯æï¼ä½ç±»åå®ä¹è¾æ§                      åç TypeScript å¼åï¼ç±»åå®ä¹å®å\næ æï¼Tree-shakingï¼   é¨åæ¯æ                            æ¨¡ååè®¾è®¡ï¼æ¯ææéå è½½\nåçº¦äº¤äºè¯­æ³             åºäºweb3.eth.Contractçè¾å¤æ API     æ´ç®æ´çContractæ¹æ³ï¼å¦contract.functionName()ï¼\néè¯¯å¤ç               éè¯¯ä¿¡æ¯è¾åºç¡                         è¯¦ç»çéè¯¯åç±»ä¸æè¿°\nç¤¾åºæ´»è·åº¦              è¾é«ï¼ä½æ´æ°æ¾ç¼ï¼                       é«ï¼æç»­æ´æ°ï¼ééæ°åè®®å¦ EIP-1559ï¼\n\n\n# æ ¸å¿åè½\n\nä¸¤èåä¸ºä»¥å¤ªååºåé¾å¼åç JavaScript åºï¼æ¯æä»¥ä¸æä½ï¼\n\n 1. è¿æ¥ä»¥å¤ªåèç¹ï¼éè¿ JSON-RPCãInfuraãAlchemy ç­ï¼ã\n 2. åå»ºåç®¡çé±åï¼çæå°åãç­¾åäº¤æï¼ã\n 3. ä¸æºè½åçº¦äº¤äºï¼è¯»åæ°æ®ãåéäº¤æï¼ã\n 4. æ¥è¯¢åºåé¾æ°æ®ï¼ä½é¢ãäº¤æè®°å½ãåºåä¿¡æ¯ï¼ã\n\n\n# ä¸»è¦åºå«è¯¦è§£\n\n\n# è®¾è®¡å²å­¦\n\n * web3.jsï¼\n   \n   * ä½ä¸ºä»¥å¤ªåå®æ¹æ©æåºï¼è¦çå¨é¢åè½ï¼ä½æ¶æè¾ä¸ºèè¿ã\n   * éåéè¦ç´æ¥ä½¿ç¨ä»¥å¤ªååç API çä¼ ç»é¡¹ç®ã\n\n * ethers.jsï¼\n   \n   * å¼ºè°è½»éååå¼åèä½éªï¼æ¨¡ååæåï¼å¦ethers.Walletãethers.Contractï¼ã\n   * éåç°ä»£ Web åºç¨ï¼å¦ React DAppï¼åå¯¹ä½ç§¯ææçåºæ¯ã\n\n\n# é±åä¸ç§é¥ç®¡ç\n\n * web3.jsï¼\n   \n   * ä¾èµå¤é¨é±åï¼å¦ MetaMaskï¼æ³¨å¥çwindow.ethereumå¯¹è±¡ã\n   * ç§é¥éå¸¸ç±ç¨æ·é±åç®¡çï¼å¼åèä¸ç´æ¥å¤çã\n\n * ethers.jsï¼\n   \n   * åç½®Walletç±»ï¼å¯ç´æ¥å®å¨åå»ºåç®¡çç§é¥ï¼\n   \n   const wallet = ethers.Wallet.createRandom(); // ç¦»çº¿çæé±å\n   console.log(wallet.privateKey); // å®å¨å­å¨ç§é¥\n   \n\n\n# Provider éç½®\n\n * web3.jsï¼\n   \n   * éæå¨æå® Providerï¼\n   \n   const web3 = new Web3("https://mainnet.infura.io/v3/YOUR_KEY");\n   \n\n * ethers.jsï¼\n   \n   * åç½®é»è®¤ Providerï¼èªå¨è¿æ¥å¬å¼èç¹ï¼ä½å»ºè®®çäº§ç¯å¢æ¿æ¢ä¸ºä¸ç¨èç¹ï¼ï¼\n   \n   const provider = ethers.getDefaultProvider();\n   \n\n\n# åçº¦äº¤äºç¤ºä¾\n\n * web3.jsï¼\n\nconst contract = new web3.eth.Contract(abi, address);\ncontract.methods.balanceOf(userAddress).call()\n  .then(balance => console.log(balance));\n\n\n * ethers.jsï¼\n\nconst contract = new ethers.Contract(address, abi, provider);\nconst balance = await contract.balanceOf(userAddress);\n\n\n\n# äº¤æåé\n\n * web3.jsï¼\n\nweb3.eth.sendTransaction({\n  from: senderAddress,\n  to: receiverAddress,\n  value: web3.utils.toWei("1", "ether")\n});\n\n\n * ethers.jsï¼\n\nconst wallet = new ethers.Wallet(privateKey, provider);\nawait wallet.sendTransaction({\n  to: receiverAddress,\n  value: ethers.parseEther("1")\n});\n\n\n\n# å¦ä½éæ©ï¼\n\n * ä½¿ç¨ web3.js çåºæ¯ï¼\n   \n   * ç»´æ¤æ§é¡¹ç®æä¾èµ MetaMask æ·±åº¦éæã\n   * éè¦ç´æ¥ä½¿ç¨ä»¥å¤ªååç RPC æ¹æ³ï¼å¦web3.eth.subscribeï¼ã\n\n * ä½¿ç¨ ethers.js çåºæ¯ï¼\n   \n   * æ°å»ºé¡¹ç®ï¼å°¤å¶æ¯åç«¯ DAppï¼React/Vueï¼ã\n   * æ³¨éä»£ç ç®æ´æ§ãå®å¨æ§åè½»éåã\n   * éè¦ TypeScript æ¯æææ æä¼åæåä½ç§¯ã\n\n\n# æ»ç»\n\n * web3.jsï¼èçå·¥å·ï¼åè½å¨ä½ç¨æ¾ç¬¨éï¼éåä¼ ç»é¡¹ç®ã\n * ethers.jsï¼ç°ä»£è½»éåºï¼å¼åä½éªæ´ä½³ï¼æ¨èæ°é¡¹ç®é¦éãä¸¤èåè½å®æä»¥å¤ªåå¼åæ ¸å¿éæ±ï¼æ ¹æ®é¡¹ç®éæ±åå¢éåå¥½éæ©å³å¯ã',normalizedContent:'# web3.jsåethers.js\n\nå¯¹æ¯ç»´åº¦               web3.js                         ethers.js\nå¼åè/ç»´æ¤è            ä»¥å¤ªååºéä¼                          ç¤¾åºé©±å¨ï¼richard moore åå»ºï¼\nè®¾è®¡çå¿µ               æ©æå®æ¹åºï¼åè½å¨é¢                      è½»éãæ¨¡ååãå®å¨æ§ä¼å\nä»£ç ä½ç§¯               è¾å¤§ï¼çº¦ 1mbï¼                       æ´å°ï¼çº¦ 500kbï¼\napi åå¥½æ§            ä¼ ç»åè°é£æ ¼ï¼æ¯æ promise               åç promise + æ´ç®æ´çé¾å¼è°ç¨\né±åä¸ç§é¥å¤ç            éè¦ä¾èµå¤é¨é±åï¼å¦ metamaskï¼            åç½®å®å¨é±åç±»ï¼å¯ç¬ç«ç®¡çç§é¥\nprovider æ¯æ        éèªè¡éç½® http/websocket provider   åç½®é»è®¤ providerï¼å¦ infuraãalchemyï¼\ntypescript æ¯æ      æ¯æï¼ä½ç±»åå®ä¹è¾æ§                      åç typescript å¼åï¼ç±»åå®ä¹å®å\næ æï¼tree-shakingï¼   é¨åæ¯æ                            æ¨¡ååè®¾è®¡ï¼æ¯ææéå è½½\nåçº¦äº¤äºè¯­æ³             åºäºweb3.eth.contractçè¾å¤æ api     æ´ç®æ´çcontractæ¹æ³ï¼å¦contract.functionname()ï¼\néè¯¯å¤ç               éè¯¯ä¿¡æ¯è¾åºç¡                         è¯¦ç»çéè¯¯åç±»ä¸æè¿°\nç¤¾åºæ´»è·åº¦              è¾é«ï¼ä½æ´æ°æ¾ç¼ï¼                       é«ï¼æç»­æ´æ°ï¼ééæ°åè®®å¦ eip-1559ï¼\n\n\n# æ ¸å¿åè½\n\nä¸¤èåä¸ºä»¥å¤ªååºåé¾å¼åç javascript åºï¼æ¯æä»¥ä¸æä½ï¼\n\n 1. è¿æ¥ä»¥å¤ªåèç¹ï¼éè¿ json-rpcãinfuraãalchemy ç­ï¼ã\n 2. åå»ºåç®¡çé±åï¼çæå°åãç­¾åäº¤æï¼ã\n 3. ä¸æºè½åçº¦äº¤äºï¼è¯»åæ°æ®ãåéäº¤æï¼ã\n 4. æ¥è¯¢åºåé¾æ°æ®ï¼ä½é¢ãäº¤æè®°å½ãåºåä¿¡æ¯ï¼ã\n\n\n# ä¸»è¦åºå«è¯¦è§£\n\n\n# è®¾è®¡å²å­¦\n\n * web3.jsï¼\n   \n   * ä½ä¸ºä»¥å¤ªåå®æ¹æ©æåºï¼è¦çå¨é¢åè½ï¼ä½æ¶æè¾ä¸ºèè¿ã\n   * éåéè¦ç´æ¥ä½¿ç¨ä»¥å¤ªååç api çä¼ ç»é¡¹ç®ã\n\n * ethers.jsï¼\n   \n   * å¼ºè°è½»éååå¼åèä½éªï¼æ¨¡ååæåï¼å¦ethers.walletãethers.contractï¼ã\n   * éåç°ä»£ web åºç¨ï¼å¦ react dappï¼åå¯¹ä½ç§¯ææçåºæ¯ã\n\n\n# é±åä¸ç§é¥ç®¡ç\n\n * web3.jsï¼\n   \n   * ä¾èµå¤é¨é±åï¼å¦ metamaskï¼æ³¨å¥çwindow.ethereumå¯¹è±¡ã\n   * ç§é¥éå¸¸ç±ç¨æ·é±åç®¡çï¼å¼åèä¸ç´æ¥å¤çã\n\n * ethers.jsï¼\n   \n   * åç½®walletç±»ï¼å¯ç´æ¥å®å¨åå»ºåç®¡çç§é¥ï¼\n   \n   const wallet = ethers.wallet.createrandom(); // ç¦»çº¿çæé±å\n   console.log(wallet.privatekey); // å®å¨å­å¨ç§é¥\n   \n\n\n# provider éç½®\n\n * web3.jsï¼\n   \n   * éæå¨æå® providerï¼\n   \n   const web3 = new web3("https://mainnet.infura.io/v3/your_key");\n   \n\n * ethers.jsï¼\n   \n   * åç½®é»è®¤ providerï¼èªå¨è¿æ¥å¬å¼èç¹ï¼ä½å»ºè®®çäº§ç¯å¢æ¿æ¢ä¸ºä¸ç¨èç¹ï¼ï¼\n   \n   const provider = ethers.getdefaultprovider();\n   \n\n\n# åçº¦äº¤äºç¤ºä¾\n\n * web3.jsï¼\n\nconst contract = new web3.eth.contract(abi, address);\ncontract.methods.balanceof(useraddress).call()\n  .then(balance => console.log(balance));\n\n\n * ethers.jsï¼\n\nconst contract = new ethers.contract(address, abi, provider);\nconst balance = await contract.balanceof(useraddress);\n\n\n\n# äº¤æåé\n\n * web3.jsï¼\n\nweb3.eth.sendtransaction({\n  from: senderaddress,\n  to: receiveraddress,\n  value: web3.utils.towei("1", "ether")\n});\n\n\n * ethers.jsï¼\n\nconst wallet = new ethers.wallet(privatekey, provider);\nawait wallet.sendtransaction({\n  to: receiveraddress,\n  value: ethers.parseether("1")\n});\n\n\n\n# å¦ä½éæ©ï¼\n\n * ä½¿ç¨ web3.js çåºæ¯ï¼\n   \n   * ç»´æ¤æ§é¡¹ç®æä¾èµ metamask æ·±åº¦éæã\n   * éè¦ç´æ¥ä½¿ç¨ä»¥å¤ªååç rpc æ¹æ³ï¼å¦web3.eth.subscribeï¼ã\n\n * ä½¿ç¨ ethers.js çåºæ¯ï¼\n   \n   * æ°å»ºé¡¹ç®ï¼å°¤å¶æ¯åç«¯ dappï¼react/vueï¼ã\n   * æ³¨éä»£ç ç®æ´æ§ãå®å¨æ§åè½»éåã\n   * éè¦ typescript æ¯æææ æä¼åæåä½ç§¯ã\n\n\n# æ»ç»\n\n * web3.jsï¼èçå·¥å·ï¼åè½å¨ä½ç¨æ¾ç¬¨éï¼éåä¼ ç»é¡¹ç®ã\n * ethers.jsï¼ç°ä»£è½»éåºï¼å¼åä½éªæ´ä½³ï¼æ¨èæ°é¡¹ç®é¦éãä¸¤èåè½å®æä»¥å¤ªåå¼åæ ¸å¿éæ±ï¼æ ¹æ®é¡¹ç®éæ±åå¢éåå¥½éæ©å³å¯ã',charsets:{cjk:!0}},{title:"åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  1",frontmatter:{},regularPath:"/blockchain/learn1.html",relativePath:"blockchain/learn1.md",key:"v-0aa58e3f",path:"/blockchain/learn1.html",headers:[{level:2,title:"åºåé¾",slug:"åºåé¾",normalizedTitle:"åºåé¾",charIndex:9},{level:2,title:"å¯ç å­¦åç",slug:"å¯ç å­¦åç",normalizedTitle:"å¯ç å­¦åç",charIndex:580},{level:2,title:"æ°æ®ç»æ",slug:"æ°æ®ç»æ",normalizedTitle:"æ°æ®ç»æ",charIndex:2003},{level:3,title:"Hash Pointerï¼åå¸æéï¼",slug:"hash-pointer-åå¸æé",normalizedTitle:"hash pointerï¼åå¸æéï¼",charIndex:2012},{level:3,title:"Merkle Treeï¼é»åå°æ ï¼",slug:"merkle-tree-é»åå°æ ",normalizedTitle:"merkle treeï¼é»åå°æ ï¼",charIndex:2460},{level:3,title:"è½»èç¹ä¸å¨èç¹(light node and full node)",slug:"è½»èç¹ä¸å¨èç¹-light-node-and-full-node",normalizedTitle:"è½»èç¹ä¸å¨èç¹(light node and full node)",charIndex:2920},{level:2,title:"åè®®",slug:"åè®®",normalizedTitle:"åè®®",charIndex:3548},{level:3,title:"æ°å­è´§å¸çé®é¢",slug:"æ°å­è´§å¸çé®é¢",normalizedTitle:"æ°å­è´§å¸çé®é¢",charIndex:3555},{level:3,title:"ä¸­å¿å",slug:"ä¸­å¿å",normalizedTitle:"ä¸­å¿å",charIndex:267},{level:3,title:"å»ä¸­å¿å",slug:"å»ä¸­å¿å",normalizedTitle:"å»ä¸­å¿å",charIndex:331},{level:3,title:"åºåç»æ",slug:"åºåç»æ",normalizedTitle:"åºåç»æ",charIndex:4874},{level:3,title:"å±è¯åè®®",slug:"å±è¯åè®®",normalizedTitle:"å±è¯åè®®",charIndex:5279},{level:3,title:"æ¯ç¹å¸å±è¯åè®®",slug:"æ¯ç¹å¸å±è¯åè®®",normalizedTitle:"æ¯ç¹å¸å±è¯åè®®",charIndex:5741},{level:3,title:"æ¯ç¹å¸çæ¿å±æºå¶",slug:"æ¯ç¹å¸çæ¿å±æºå¶",normalizedTitle:"æ¯ç¹å¸çæ¿å±æºå¶",charIndex:6912}],lastUpdated:"5/23/2023, 11:30:04 AM",lastUpdatedTimestamp:1684812604e3,headersStr:"åºåé¾ å¯ç å­¦åç æ°æ®ç»æ Hash Pointerï¼åå¸æéï¼ Merkle Treeï¼é»åå°æ ï¼ è½»èç¹ä¸å¨èç¹(light node and full node) åè®® æ°å­è´§å¸çé®é¢ ä¸­å¿å å»ä¸­å¿å åºåç»æ å±è¯åè®® æ¯ç¹å¸å±è¯åè®® æ¯ç¹å¸çæ¿å±æºå¶",content:"# åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  1\n\n * å­¦ä¹ å°åï¼https://www.bilibili.com/video/BV1Vt411X7JF\n * åèæç« ï¼\n   * https://blog.nowcoder.net/n/30cbdb37108b4d93b3a5a93b8226ae31\n   * https://blog.csdn.net/weixin_47692652/category_11702107.html\n\n\n# åºåé¾\n\n20 ä¸çºªç»æµå­¦å®¶ åè¶å è®¤ä¸ºï¼æ¬§ç¾éè´§è¨èçæ ¹æºå¨äºè´§å¸æ¯æ¿åºåè¡çï¼æ¯ä¸­å¿åçï¼æ³¨å®ä¼ä¸ºäºé¸å¸ç¨èæ»¥åãæ¯ç¹å¸æ¯ä¸ç§èæè´§å¸ï¼å®æ¯ä¸ºäºè§£å³åè¶åæåºæ¥çä¸­å¿åè´§å¸å¿ç¶ä¼è¶åè´¬å¼çé®é¢ï¼èè¢«åé åºæ¥çå»ä¸­å¿åè´§å¸ã\n\nè´§å¸äº¤æçè¿ç¨ä¸­æä¹ç¡®ä¿è®°è´¦ä¸åºéï¼ä¸è¢«ç¯¡æ¹ï¼\n\n> å¤ä»£ææä½¿ç¨å®ä½ç©è´¨ç¹å«æ¯è´µéå±ãï¼æ æ³å­ç©ºåé ç©è´¨ï¼åå®ç»äºä½ æå°±æ²¡äºï¼ è¿ä»£å½å®¶è¿å¥çº¸å¸æ¶ä»£ãï¼ç¹æ®å°çãçº¸å¼ ãæ²¹å¢¨ï¼ä½¿å¾å¤å¶çº¸å¸åä¸ºä¸å¯è½ï¼ ç§»å¨äºèç½æ¶ä»£ä½¿ç¨çæ¯ç½ä¸æ¯ä»ãï¼ç¬¬ä¸æ¹ä¸­ä»é¶è¡è¿è¡ä¿¡ç¨æä¿ãå¯ç ç³»ç»ï¼\n\né£ä¹æ¯ç¹å¸æ¯æä¹è®°è´¦çå¢ï¼\n\n> çºç²éç§ï¼æ¯ä¸ªè´¦æ·çåºè´¦åå¥è´¦é½å¹¿æ­åºæ¥ï¼æ´ä¸ªè®°è´¦è¿ç¨è®©å¨ç½çäººé½çå°ï¼ç»æä¸æ¡åºåé¾ã\n\né£ä¹æä¹ä¿è¯åºåé¾ä¸çä¹åçä¿¡æ¯æ²¡æè¢«ç¯¡æ¹å¢ï¼\n\n> è¿å°±å©ç¨å°äºä¸é¢è®²å°çå¯ç å­¦åçã\n\n\n# å¯ç å­¦åç\n\næ¯ç¹å¸è¢«ç§°ä¸ºå å¯è´§å¸ cryptocurrencyãä½å¶å®åºåé¾ä¸åå®¹é½æ¯å¬å¼çï¼åæ¬åºåçå°åï¼è½¬è´¦çéé¢ã æ¯ç¹å¸ä¸»è¦ç¨å°äºå¯ç å­¦ä¸­çä¸¤ä¸ªåè½: 1.åå¸ 2.ç­¾å\n\nå¯ç å­¦ä¸­ç¨å°çåå¸å½æ°è¢«ç§°ä¸º cryptographic hash function, å®æä¸¤ä¸ªéè¦çæ§è´¨:\n\n * collision resistance(æç¢°ææ§): ä¾å¦ xâ y H(x)=H(y) ä¸¤ä¸ªä¸åçè¾å¥ï¼è¾åºå´æ¯ç¸ç­çï¼è¿å°±ç§°åå¸ç¢°æãå®æ¯ä¸å¯é¿åçï¼å ä¸ºè¾å¥ç©ºé´æ»å¤§äºè¾åºç©ºé´ãåå¸ç¢°æä¸­ï¼ç»åºxï¼å¾é¾æ¾å°yï¼é¤éè®åæ±è§£(brute-force)ãé¾ä»¥åç°ç¢°æçæ§è´¨ç§°ä¸ºcollision resistance\n   * ä½ç¨ï¼æ£æµä¸ä¼ å°äºç«¯çæä»¶æ¯å¦è¢«æ´æ¹ï¼ä¸ä¼ æä»¶ååæ±è¯¥æä»¶çhashå¼ï¼è¿æ®µæ¶é´ä¸è½½è¯¥æä»¶åï¼åæ±ä¸æ¬¡hashå¼ï¼æ¯è¾ä¸¤å¼æ¯å¦ç¸ç­å³å¯ç¥éæä»¶æ¯å¦è¢«ç¯¡æ¹ã\n   * äººå·¥å¶é ç¢°æï¼æå½èåå¯ç å­¦å®¶çå°äºææå¨ 2004 å¹´å°±æ¾å°ç®æ³ï¼äººå·¥å¶é äºåå¸å½æ° MD5 çåå¸ç¢°æï¼ä½¿å¾ MD5å½æ° å®å¨æ§æ¶å°äºå²å»ãå¦ææ æ³äººå·¥å¶é åå¸ç¢°æï¼é£ä¹åäººå°±åªè½ç¨ brute-force è®åç©·ä¸¾ï¼è¿ç§å·¥ä½éå°±å·¨å¤§å°ä¸å¯è½äºã\n * hiding: åå¸å½æ°çè®¡ç®è¿ç¨æ¯ååçï¼ä¸å¯éçãä¾å¦ä» H(x) æ æ³æ¨å¯¼åº x, hiding æ§è´¨åææ¯è¾å¥ç©ºé´è¶³å¤å¤§(ä¸ç¶å¾å®¹æéåå®)ï¼åå¸æ¯è¾åå(hash ç»æä¸è½åªæ¯æå ä¸ªå¼)ãå¦æè¾å¥ä¸æ¯è¶³å¤å¤§ï¼ä¸è¬å¨ x åé¢æ¼æ¥ä¸ä¸ªéæºæ°ï¼å¦ x123213124ï¼æ´ä½ååå¸å¼ã\n   * ä½ç¨ï¼å collision resistance ç»åå¨ä¸èµ·ï¼ç¨æ¥å®ç° digital commitment (åç§°ä¸º digital equivalent of a sealed envelope)ãæé¢æµç»æä½ä¸ºè¾å¥ xï¼ç®åºä¸ä¸ªåå¸å¼ï¼å°åå¸å¼å¬å¸ï¼hiding è®©äººä»¬ç¥éåå¸å¼èä¸ç¥éé¢æµå¼ï¼æååå° x å¬å¸ï¼å ä¸ºæ collision resistance çæ§è´¨ï¼é¢æµç»ææ¯ä¸å¯ç¯¡æ¹çã\n * puzzle friendly: æè° puzzle friendlyï¼æææ¯å¯¹äºåå¸å½æ°ï¼ä»çè¾åºæ¯æ æ³é¢æµçï¼è¦æ¾å°ç¹å®åºé´åçåå¸å¼çè¾å¥xï¼æ²¡ææ·å¾ã æ¯å¦ï¼æè¦æ¾å°SHA256å½æ°ï¼æ¯ç¹å¸ä¸­ç¨ç hash å½æ°: Secure Hash algorithmï¼çåå¸å¼ï¼å60ä½é½æ¯é¶ï¼æé¤äºä¸ä¸ªä¸ä¸ªè¯éªä»¥å¤ï¼æ²¡æå¶ä»çæ¹æ³ã ï¼æç¿å¾é¾ï¼éªè¯å¾å®¹æï¼\n\nå³äºç­¾åï¼é¦åè¦ä»ç»æ¯ç¹å¸ä¸­çè´¦æ·ç®¡çï¼å¼æ·æ¹å¼: åªéè¦åå»ºä¸å¯¹å¬ç§é¥å³å¯ï¼éå¯¹ç§°å å¯ï¼ï¼å¬é¥æ¯å¬å¼çï¼ç§é¥æ¯ç§å¯çã\n\n> é£ä¹æ¯ä¸ªäººé½æå¬ç§é¥ï¼å¯ä¸å¯ä»¥ä¸æ­çæå¬ç§é¥ï¼ä¸åºåé¾ä¸å·²å­å¨çå¬é¥è¿è¡å¯¹æ¯ï¼å¦æç¸åï¼åç¨å¯¹åºçç§é¥å»æ»å»ä»ãç­æ¡æ¯ä¸å¯è½ï¼å ä¸ºæ¦çå¾®ä¹å¶å¾®ï¼ä½æ¯åææ¯çæå¬ç§é¥çæ¶åè¦æå¥½çéæºæºã\n\næ¯ç¹å¸çæ¬è´¨å°±æ¯æ°å­ç­¾åï¼å¯¹äºä¸ç¬äº¤æï¼è¦ç¨åèµ·äººçç§é¥è¿è¡ç­¾åï¼å¤§å®¶å¯ä»¥ç¨åèµ·äººçå¬é¥å¯¹è¿ç¬äº¤æè¿è¡éªè¯ã\n\n> å³äºéå¯¹ç§°å å¯ç®æ³ï¼æ¯è¾å¸¸è§çæ¯æ¤­åæ²çº¿å å¯ç®æ³ãç®åå¯ä»¥çè§£ä¸ºç»è¿ä¸æ¡æ¤­åæ²çº¿ï¼å¯ä»¥çæä¸¤ä¸ªå¼ K å Qï¼å¯¹ä¸ä¸ªæ° 123 ç¨ K è¿è¡å å¯ä¼çææ¯«æ è§å¾çæ°ï¼åå¯¹å¶ç¨ Q è¿è¡è§£å¯ï¼å°±åæ¢å¤æäº 123ãK å¯ä»¥ä½ä¸ºç§é¥ï¼Q å¯ä»¥ä½ä¸ºå¬é¥ã\n\n\n# æ°æ®ç»æ\n\n\n# Hash Pointerï¼åå¸æéï¼\n\n> å¨æ¯ç¹å¸ä¸­ï¼å¶æåºæ¬çæ°æ®ç»æä¾¿æ¯ä¸ä¸ªä¸ªåºåå½¢æçåºåé¾ãåºåé¾ä¸é¾è¡¨çåºå«å°±æ¯ç¨åå¸æéä»£æ¿äºæ®éæéã ä¸è¬çé¾è¡¨æä»¬é½å¯ä»¥æ¹é ä¸ºä½¿ç¨åå¸æéçé¾è¡¨ï¼ä½å½é¾è¡¨ä¸­å­å¨ç¯æ¶ï¼åå¸æéä¾¿ä¸è½åä½¿ç¨ã\n\nå¯¹äºé¾è¡¨ä¸­çèç¹ï¼å¯¹é¾è¡¨ä¸­çåå®¹åä¸æ¬¡åå¸è¿ç®ï¼è®° H() ä¸ºè¯¥èç¹çåå¸å¼ï¼è¯¥å¼ä¸èç¹ä¸­åå®¹æå³ãå½èç¹ï¼åºåï¼ä¸­åå®¹åçæ¹åï¼è¯¥åå¸å¼ä¹ä¼åçæ¹åï¼ä»èä¿è¯äºåºååå®¹ä¸è½è¢«ç¯¡æ¹ã\n\n\n\n> å¦å¾ä¸­æç¤ºï¼å¦ææä»¬æ³è¦ç ´ååºåé¾å®æ´æ§ãç¯¡æ¹Bçåå®¹ï¼èCä¸­ä¿å­æBçåå¸å¼ï¼æä»¥Cä¹å¾è¿è¡ä¿®æ¹ãèåæ ·Cååºåä¹å¾ä¿®æ¹ãèç¨æ·åªéè¦è®°ä½æåä¸ä¸ªåºåé¾çåå¸å°åï¼å°±å¯ä»¥æ£æµåºåé¾ä¸åå®¹æ¯å¦è¢«ç¯¡æ¹ã å¨å®éåºç¨ä¸­ï¼ä¸æ´æ¡é¾å¯è½ä¼è¢«åæ­åå¼ä¿å­å¨å¤ä¸ªå°æ¹ãè¥ç¨æ·ä»ä»å·æå¶ä¸­ä¸æ®µï¼å½ç¨å°åé¢é¨ååºåæ°æ®æ¶ï¼ç´æ¥é®ç³»ç»ä¸­å¶ä»èç¹è¦å³å¯ï¼å½è¦å°ä¹åï¼ä»ä»éè¿è®¡ç®è¦å°çæåä¸ä¸ªåå¸å¼åèªå·±ä¿å­åå¸å¼æ¯å¦ä¸è´å¯ä»¥å¤æ­æç»åå®¹æ¯å¦ç¡®å®ä¸ºåºåé¾ä¸çå®çåå®¹ã\n\n\n# Merkle Treeï¼é»åå°æ ï¼\n\n> Merkle Tree ä¸ Binary Tree çåºå«å°±æ¯ç¨åå¸æéä»£æ¿äºæ®éæéã\n\n\n\n> ä¸å¾å³ä¸ºä¸ä¸ªç®åçMerkle Treeï¼å¶ä¸­Tx0ãTx1ãTx2ãTx3ä¸ºæ°æ®åï¼ä»£è¡¨æ¯ä¸æ¬¡äº¤æãTx0ãTx1åæä¸ä¸ªåå¸å¼ï¼å°å¶åå¹¶æ¾å¨ä¸ä¸ªèç¹ä¸­ï¼Tx2ãTx3åæ ·æä½ï¼èåï¼éå¯¹å¾å°çä¸¤ä¸ªèç¹Hash01ãHash23åå«ååå¸ï¼åå¯ä»¥å¾å°ä¸¤ä¸ªæ°çåå¸å¼ï¼å³ä¸ºå¾ä¸­æ ¹èç¹ãå®éä¸­ï¼å¨åºååå¤´ä¸­å­å¨çæ¯æ ¹èç¹çåå¸å¼ï¼å¯¹å¶ååä¸æ¬¡åå¸ï¼\n\nè¯¥æ°æ®ç»æçä¼ç¹å¨äºï¼åªéè¦è®°ä½ Root Hashï¼æ ¹åå¸å¼ï¼ï¼ä¾¿å¯ä»¥æ£æµåºå¯¹æ ä¸­ä»»ä½é¨ä½çä¿®æ¹ãä¸è®ºå¨åªéç¯¡æ¹äºï¼é½ä¼éè¿åå¸å¼åä¸ååºï¼æç»åé¦å° Root Hash å¼ä¸ã\n\n> å¨æ¯ç¹å¸ç³»ç»ä¸­ï¼ä¸ååºåéè¿åå¸å¼æéè¿æ¥ï¼å¨åä¸ä¸ªåºåä¸­çå¤ä¸ªäº¤æï¼æ°æ®åï¼ï¼åéè¿ Merkle Tree çå½¢å¼ç»ç»å¨ä¸èµ·ãåºåæ¬èº«åä¸ºä¸¤é¨åï¼åå¤´ååèº«ï¼ï¼å¨åå¤´ä¸­å­å¨ææ ¹åå¸å¼ï¼æ²¡æäº¤æçå·ä½ä¿¡æ¯ï¼ï¼åèº«ä¸­å­å¨äº¤æåè¡¨ã\n\n\n# è½»èç¹ä¸å¨èç¹(light node and full node)\n\n> å¨èç¹ä¿å­æ´ä¸ªåºåçææåå®¹ï¼èè½»èç¹ä»ä»ä¿å­åºåçåå¤´ä¿¡æ¯ã ä¸ºä»ä¹è¦åè½»èç¹åå¨èç¹ï¼ å ä¸ºç¡¬ä»¶çå±éãä¸ä¸ªåºåå¤§å°ä¸º1MBï¼å¯¹äºç§»å¨ä¾¿æºè®¾å¤æ¥è¯´ï¼å¦æå­å¨åºåçææåå®¹ï¼åæéç©ºé´è¿å¤§ï¼èè¿æ¯ä¸ç°å®çãæä»¥è½»èç¹åªéè¦å­å¨åºååå¤´ä¿¡æ¯ï¼å¨èç¹å­å¨åºåææåå®¹ã\n\nå½éè¦åè½»èç¹è¯æææ¡äº¤ææ¯å¦è¢«åå¥åºåé¾ï¼ä¾¿éè¦ç¨å° Merkle proofãæä»¬å°äº¤æå°æ ¹èç¹è¿ä¸æ¡è·¯å¾ç§°ä¸º Merkle proofï¼å¨èç¹å°æ´ä¸ª Merkle tree çä¿¡æ¯åéç»è½»èç¹ï¼è½»èç¹å³å¯æ ¹æ®å¶ç®åºæ ¹åå¸å¼ï¼åèªå·±ä¿å­çå¯¹æ¯ï¼ä»èéªè¯è¯¥äº¤ææ¯å¦è¢«åå¥åºåé¾ãåªè¦æ²¿çè¯¥è·¯å¾ï¼è®¡ç®åºæ¥çæ ¹åå¸å¼æ­£ç¡®ï¼è¯´æåå®¹æ²¡æè¢«ä¿®æ¹è¿ã\n\n\n\né£ä¹å¨èç¹æ¯å¦å¯ä»¥ä¿®æ¹ Hash å¼ï¼åè½»èç¹åéä¿®æ¹åç Hash å¼ä½¿å¾åä¸ä¸å±è®¡ç®ç Hash å¼ä»ç¶æ­£ç¡®å¢ï¼\n\n> å®éä¸ï¼è¿ç§æåµä¸ºäººä¸ºå¶é åå¸ç¢°æãç±äºåå¸å½æ°ç collision resistance æ§è´¨ï¼è¿ç§æåµæ¯ä¸ä¼åççï¼ä¿è¯äºç³»ç»çä¸å¯ç¯¡æ¹æ§ãåæ¶ï¼è¿æ ·ä¸ä¸ª Merkle Proof çäºä»¶å¤æåº¦ä¸º O(log n), éå¸¸é«æãè¯æäº¤æå­å¨ããå¦æè¦è¯æäº¤æä¸å­å¨ï¼å¦æä¸å¯¹å¶èç¹è§å®æåºé¡ºåºï¼æ²¡æä¸ä¸ªæçè¾é«çæ¹æ³è¯æä¸å­å¨ãå¨æ¯ç¹å¸ç³»ç»ä¸­ï¼æ²¡æç¸åºçéæ±ï¼æä»¥å¨æ¯ç¹å¸ç³»ç»ä¸­å¹¶æ²¡æå¯¹ Merkle Tree è¿è¡æåºã\n\n\n# åè®®\n\n\n# æ°å­è´§å¸çé®é¢\n\nåè®¾æå¨æºæââä¸­å¤®é¶è¡åè¡æ°å­è´§å¸ï¼åè¡äºæ°å­è´§å¸ï¼ç¨å¤®è¡çç§é¥ç­¾åï¼ç¶åä½¿ç¨çæ¶åï¼ç¨æ·ç´æ¥æ¿å¤®è¡çå¬é¥éªè¯ç­¾åï¼åè®¾å¤§å®¶é½ç¥éå¬é¥ï¼ã\n\n\n\nè½ç¶ç­¾åä¿è¯äºæ²¡åæ³ç¯¡æ¹å¶ä¸­çåå®¹ï¼ä½æ¯æ°å­è´§å¸æ¬è´¨ä¸è¿æ¯ä¸ä¸ªæä»¶ï¼è¿æ ·çæ°å­è´§å¸å¯å¤å¶ï¼å°±ä¼é æåè±æ»å»ï¼double spending attackï¼ãä¸åæ¯çº¸è´¨è´§å¸ï¼è±åºå»æä¸å°±æ²¡æã\n\n\n# ä¸­å¿å\n\nä¸ºè§£å³è¿ä¸ªé®é¢ï¼å¤®è¡è¿è¦ç»´æ¤ä¸ä¸ªæ°æ®åºï¼å³è®°å½æ¯ä¸ªç¼å·çæ°å­è´§å¸æ¯å½åªä¸ªç¨æ·ææã\n\n\n\nå¨æ¯ä»æ¶ï¼ä¸ä»è¦ç¨å¬é¥éªè¯ç­¾åæ¯å¤®è¡ç­¾ç½²çï¼è¿è¦éè¿å¤®è¡éªè¯è¯¥è´§å¸æ¯å½èªå·±ææï¼å¤®è¡åå°è´§å¸ææèæ¹ææ¯ä»ç»çé£ä¸ªç¨æ·ãä¸ä»æ°å­è´§å¸çåè¡æ¯ç±å¤®è¡ç»ä¸æ§å¶ï¼èä¸æ¯æ¬¡äº¤æé½è¦ç±å¤®è¡ç¡®è®¤å¶åæ³æ§ï¼è¿ç§æ¹æ¡æ¯ä¸ä¸ªä¸­å¿åçæ¹æ¡ã\n\n\n# å»ä¸­å¿å\n\nå°å¤®è¡çèè½æ¹æç±å¹¿å¤§çç¨æ·æ¥å±åæ¿æï¼ä¹å°±æ¯å»ä¸­å¿åçæ¹æ¡ï¼è¿æ¯BTCç­æ°å­è´§å¸ç³»ç»è¦è§£å³çé®é¢ï¼å³ï¼\n\n> 1ï¸â£ æä¹å³å®æ°å­è´§å¸çåè¡ååè¡é 2ï¸â£ æä¹éªè¯äº¤æçåæ³æ§ï¼é²æ­¢åè±æ»å» ç¬¬ä¸ä¸ªé®é¢å¨ BTC ç³»ç»ä¸­æ¯æç¿å³å®ç ç¬¬äºä¸ªé®é¢çè§£å³ï¼è¦ç»´æ¤ä¸ä¸ªæ°æ®ç»æï¼ç±ææç¨æ·æ¥å±åç»´æ¤ï¼è¿ä¸ªæ°æ®ç»æå°±æ¯åºåé¾ã\n\nåè®¾ç¨æ· A è·å¾äºé¸å¸æï¼ä»åè¡äº 10 ä¸ª BTCãç¶åä»å°è¿ 10 ä¸ª BTC è½¬ç» B å Cï¼æ¯ä¸ªäººå 5 ä¸ª BTCãæ¥ä¸æ¥ B ç» C 2 ä¸ªè´§å¸ï¼ç» D 3 ä¸ªè´§å¸ãæå C å°æå¾ç 7 ä¸ªè´§å¸å¨é¨ç» Eã\n\n\n\n> çº¢è²ç®­å¤´ä¼è¯´æãå¸çæ¥æºãï¼è¿ä¹å°±é²æ­¢äºåè±æ»å»ï¼å¦è¿ B å·²ç»å°èªå·±ç 5ä¸ªBTC è±æäºï¼åè®¾ B å°è¯åè±ä¸æ¬¡ï¼å° 5ä¸ªBTC è½¬ç»Fãè¿æ¶é¡ºçåºåé¾å»æ£æ¥è¿ä¸ªåºåå°æ¥æºäº¤æä¹é´çåºåï¼åç° B å·²ç»è±äºæ¥æºåºåçBTCï¼è¯´æè¿æ°ä¸ªäº¤ææ¯ä¸åæ³çï¼ä¹å°±ä¸ä¼æ¥åè¿ä¸ªè½¬ç»Fçåºåè¿å¥åºåé¾ã\n\nä»¥ A å B è½¬è´¦ä¸ºä¾ï¼\n\n * Bçå¬é¥: A å B è½¬è´¦ï¼A éè¦ç¥é B çå°åãå ä¸º BTC ç³»ç»ä¸­çæ¶æ¬¾å°åå°±æ¯æ¶æ¬¾äººçå¬é¥ååå¸åç»è¿ä¸äºè½¬æ¢å¾å°çãBTCç³»ç»ä¹æ²¡ææä¾æ¥è¯¢æç¨æ·çå¬é¥æè´¦æ·å°åçåè½ï¼è¦å B è½¬è´¦ï¼å°±éè¦ B æä¾å¬é¥æè´¦æ·å°åãè¿ç§æåµ B å¯ä»¥æå¬é¥å¬å¸å¨ç½ç«ä¸ãï¼è½ç¶å¬é¥å¯ä»¥å¬å¼ï¼ä½å®éä¸­æ´å¤å¬å¼çæ¯å¬é¥çåå¸ï¼\n * Açå¬é¥: A å B è½¬è´¦ï¼B ä¹éè¦ç¥é A çå¬é¥ãå ä¸ºä¸æ¹é¢ A çå¬é¥ä»£è¡¨ A çèº«ä»½ï¼B è¦ç¥éè½¬è´¦çæ¯è°ï¼å¦ä¸æ¹é¢æ¯ä¸ºäºéªè¯ BTC äº¤æä¸­ A çç­¾åï¼ç§é¥ç­¾åå¬é¥éªè¯ï¼ï¼ä¹å°±æ¯è¯´ææç»ç¹é½éè¦ç¥é A çå¬é¥æè¡ï¼æ¯ä¸ªç»ç¹é½éè¦ç¬ç«éªè¯ï¼å³ä½¿æ¯ä¸ä¸ªåäº¤ææ å³çæè§èä¹è¦éªè¯è¿ç¬äº¤æçåæ³æ§ã\n * å¦ä½ç¥é A çå¬é¥: A çå¬é¥æ¯ A èªå·±åå¨è¿ç¬äº¤æçè¾å¥é¨åéï¼å³å¨äº¤æä¸­ä»æ¬¾æ¹èªå·±å®£ç§°çãå®éä¸­ A è½¬è´¦æ¶åæä¾çå¬é¥éè¦åé¸å¸äº¤æä¸­å¬é¥å¯¹çä¸ï¼è¿æ ·å°±é²æ­¢äºæ¶æèç¹ä¼ªé  A çå¬é¥æ¥âå·âèµ° A çæ¯ç¹å¸ã\n * å¨æ¯ç¹å¸ç³»ç»ä¸­ï¼éè¿æ§è¡èæ¬å®ç°ä¸è¿°éªè¯è¿ç¨ãå°å½åäº¤æè¾å¥èæ¬ä¸åä¸ä¸ªäº¤æè¾åºèæ¬ï¼è¯´æå¸çæ¥æºçäº¤æï¼æ¼æ¥æ§è¡ï¼å¦æå¯ä»¥æ­£ç¡®æ§è¡ï¼è¯´æäº¤æåæ³ã\n\n\n# åºåç»æ\n\n\n\n> å¨ç»ç¹ï¼fully validating nodeï¼æ¯æåèº«çï¼éè¦éªè¯ææäº¤æçåæ³æ§ï¼è½»ç»ç¹ï¼light nodeï¼æ¯æ²¡æåèº«çï¼æ²¡æåæ³ç¬ç«éªè¯äº¤æçåæ³æ§ãè½»ç»ç¹æ²¡æåä¸åºåé¾çæé åç»´æ¤ï¼åªæ¯å©ç¨äºåºåé¾ä¸­çé¨åä¿¡æ¯ãç³»ç»ä¸­å¤§é¨åç»ç¹æ¯è½»ç»ç¹ï¼å¨ç»ç¹ä¸æ¯å¾å¤ãä¸é¢ä¸»è¦æ¯å¯¹å¨ç»ç¹è¿è¡è¯´æã\n\n * åå¤´ï¼block headerï¼: åå¤´éä¿å­çæ¯åºåçå®è§çä¿¡æ¯ã\n   * version: ç¨çæ¯BTCçåªä¸ªçæ¬çåè®®\n   * æååä¸ä¸ªåºååå¤´çåå¸æé\n   * Merkle root hash: æ´æ£µ Merkle Tree çæ ¹åå¸å¼\n   * target: æç¿çé¾åº¦ç®æ éå¼target\n   * nonce: æç¿ç¨çéæºæ°nonceï¼è¦ä½¿å¾H(blockheader) â¤ target\n * åèº«ï¼block bodyï¼\n   * äº¤æåè¡¨\n\n\n# å±è¯åè®®\n\næ¯ä¸ªè´¦æ·é½å¯ä»¥åå¸äº¤æï¼åºåé¾å¯ä»¥çåå»ä¸­å¿åçè´¦æ¬ï¼é£ä¹åå¸çäº¤æåºè¯¥åå¨åªä¸ªåºåéå¢ï¼äº¤æå¹¿æ­ç»æ¯ä¸ªåºåï¼æ¯ä¸ªäººé½å¨èªå·±æ¬å°çåºåé¾ä¸åå¥äº¤æï¼å¦ä½ä¿è¯åå¥åçä¸è´æ§ï¼ä¹å°±æ¯è¯´è´¦æ¬çåå®¹è¦åå¾åå¸å¼çå±è¯ï¼distributed consensusï¼ã\n\n * FLP impossibility result: è®²çæ¯å¨ä¸ä¸ªå¼æ­¥çç³»ç»ï¼asynchronous systemï¼ä¸­ï¼ç½ç»ä¼ è¾çæ¶å»¶æ²¡æä¸éï¼å³ä½¿åªæä¸ä¸ªæåæ¯æé®é¢ï¼faultyï¼çï¼ä¹ä¸å¯è½åå¾å±è¯ã\n * CAP Theorem: CAP æ¯åå¸å¼ç³»ç»æ³è¦çä¸ä¸ªæ§è´¨ï¼Consistency ä¸è´æ§ãAvailability å¯ç¨æ§ãPartition tolerance ååºå®¹å¿æ§ãè CAP Theorem æ¯è¯´ä»»ä½ä¸ä¸ªåå¸å¼ç³»ç»ä¸­ï¼CAP ä¸ä¸ªæ§è´¨æå¤åªè½æ»¡è¶³å¶ä¸­ä¸¤ä¸ªï¼ä¸å¯è½ä¸ä¸ªå¨æ»¡è¶³ã\n * åå¸å¼å±è¯ä¸­åè®® Paxos å¯ä»¥ä¿è¯Consistencyï¼è¥è¾¾æå±è¯å¿ç¶ä¸è´ï¼ï¼ä½å¨æäºæåµä¸ï¼å¯è½ä¼ä¸ç´æ æ³è¾¾æå±è¯ã\n\n\n# æ¯ç¹å¸å±è¯åè®®\n\n> èæ¯ï¼åè®¾ç³»ç»ä¸­å­å¨é¨åèç¹ææ¶æï¼ä½å­å¨æ¯ä¾è¾å°ãå¤§å¤æ°èç¹ä¸ºâå¥½âçèç¹ï¼å¨è¿ç§æåµä¸è¿è¡å±è¯åè®®è®¾ç½®ã æ³æ³1ï¼ç´æ¥æç¥¨ æä¸ªèç¹æåäº¤æå°åºåï¼å°å¶åç»å¶ä»èç¹ï¼å¶ä»èç¹æ£æ¥è¯¥åéåºåï¼æ£æ¥è¥æ­£ç¡®æèµæç¥¨ï¼è¥ç¥¨æ°è¿åæ°ï¼å å¥åºåé¾ã å­å¨çé®é¢1ââæ¶æèç¹ä¸æ­æåä¸åæ³åºåï¼å¯¼è´ä¸ç´æ æ³è¾¾æå±è¯ï¼æ¶é´å¨è±è´¹å¨æç¥¨ä¸ã å­å¨çé®é¢2ââæ å¼ºè¿«æç¥¨ææ®µï¼æäºèç¹ä¸æç¥¨ï¼è¡æ¿ä¸ä½ä¸ºï¼ã å­å¨çé®é¢3ââç½ç»å»¶è¿äºåæªç¥ï¼æç¥¨éè¦ç­å¤ä¹ï¼æçä¸ä¼äº§çé®é¢ã æ´å¤§çä¸ä¸ªé®é¢ââmembershipãå¦ææ¯èçé¾ï¼å¯¹å å¥æåæè¦æ±ï¼å¯ä»¥åºäºæç¥¨ãä½æ¯ç¹å¸ç³»ç»ï¼ä»»ä½äººé½å¯ä»¥å å¥ï¼ä¸åå»ºè´¦æ·åå¶ç®åï¼åªéè¦æ¬å°äº§çå¬ç§é¥å¯¹å³å¯ãåªæè½¬è´¦ï¼äº¤æï¼æ¶å,æ¯ç¹å¸ç³»ç»æè½ç¥éè¯¥è´¦æ·çå­å¨ãè¿æ ·ï¼é»å®¢å¯ä»¥ä½¿ç¨è®¡ç®æºä¸é¨çæå¤§éå¬ç§é¥å¯¹ï¼å½å¶äº§çå¤§éå¬ç§é¥å¯¹è¶è¿ç³»ç»ä¸­ä¸åæ°ç®ï¼å°±å¯ä»¥è·å¾æ¯éå°ä½ï¼å¥³å·«æ»å» sybil attackï¼ãæä»¥ï¼è¿ç§ç®åçæç¥¨æ¹æ¡ä¹æ¯ä¸å¯è¡çã\n\næ¯ç¹å¸ç³»ç»ä¸­éç¨äºå¾å·§å¦çæ¹æ¡è§£å³è¿ä¸ªé®é¢ãè½ç¶ä»ç¶æ¯æç¥¨ï¼ä½å¹¶éç®åçæ ¹æ®è´¦æ·æ°ç®ï¼èæ¯ä¾æ®è®¡ç®åè¿è¡æç¥¨ã å¨æ¯ç¹å¸ç³»ç»ä¸­ï¼æ¯ä¸ªèç¹é½å¯ä»¥èªè¡ç»è£ä¸ä¸ªåéåºåï¼èåï¼å°è¯åç§ nonce å¼ï¼4 bytesï¼ï¼è¿å°±æ¯æç¿ãH(block header)<=targetãå½æä¸ªèç¹æ¾å°ç¬¦åè¦æ±ç nonceï¼ä¾¿è·å¾äºè®°è´¦æï¼ä»èå¯ä»¥å°åºååå¸å°ç³»ç»ä¸­ãå¶ä»èç¹åå°åºååï¼éªè¯åºååæ³æ§ï¼å¦æç³»ç»ä¸­ç»å¤§å¤æ°èç¹éªè¯éè¿ï¼åæ¥æ¶è¯¥åºåä¸ºææ°çåºåå¹¶å å¥å°åºåé¾ä¸­ã\n\n> éªè¯åæ³æ§å¦æ£æ¥ target çç¼ç  nBits åè®¾ç½®çæ¯ä¸æ¯ç¬¦å BTC åè®®è§å®çé¾åº¦è¦æ±ãæ£æ¥å¸¦ nonce çåå¤´åå¸å¼æ¯ä¸æ¯å°äºtargetãæ£æ¥åèº«ä¸­çæ¯ä¸ªäº¤ææ¯å¦é½æåæ³çç­¾åãæ£æ¥æ¯ä¸ªäº¤æé½æ²¡æåè±ç­\n\nåéåºååæ³äºå°±è¦å»æ¥æ¶åï¼\n\nååæ»å»ï¼Aç¨æ·å¯¹ä¸é¢çAè½¬è´¦ç»Bçè®°å½åæ»ï¼ä»èéæ³è·åå©çãä½æ¯å¨ä¸¤æ¡é¾ä¸ï¼åç°äº¤æé½åæ³ï¼ä½æ¯è½¬è´¦ç»A'ä¸åºå½è¢«æ¥åãè¿æ¯ä¸ä¸ªå¸åçåè±æ»å»ãAç»Bè½¬è´¦åï¼ç¨ååæ»å»å°é±åè½¬åæ¥ï¼è¦çæåæ¥çè®°å½ã å¨æ¯ç¹å¸ç³»ç»ä¸­ï¼è¿ç§æåµå®éä¸å¾é¾åçãå ä¸ºå¤§å¤æ°ç¿å·¥è®¤å¯çæ¯æé¿çåæ³é¾ï¼ä¼æ²¿çä¸é¢çé¾ç»§ç»­æä¸å»ãèAè¿ä¸ªæ»å»èè¦æ³åéè®°å½ï¼å°±å¿é¡»ä½¿å¾ä¸é¢çé¾åå¾æ¯ä¸é¢çé¾è¿é¿ãçè®ºä¸æ¥è¯´ï¼æ»å»èéè¦è¾¾å°æ´ä¸ªç³»ç»ä¸­51%çè®¡ç®åï¼æè½ä½¿å¾è¿ç§æ»å»æåã\n\n> æ­¤å¤ï¼åºåé¾æ­£å¸¸è¿è¡åºæ¯ä¸ï¼ä¹å¯è½ä¼åçååãå½ä¸¤ä¸ªèç¹åæ¶è·å¾è®°è´¦ææ¶ï¼ä¼æä¸¤ä¸ªç­é¿çåæ³é¾ãå¨ç¼ºçæåµä¸ï¼èç¹æ¥æ¶æåå¬å°çåºåï¼è¯¥èç¹ä¼æ²¿çè¯¥åºåç»§ç»­å»¶ç»­ãä½éçæ¶é´å»¶ç»­ï¼å¿ç¶æä¸ä¸ªé¾èåºï¼ç±æ­¤ä¿è¯äºåºåé¾çä¸è´æ§ãï¼è¢«ææçåºåç§°ä¸ºâå­¤å¿åºåâï¼\n\n\n# æ¯ç¹å¸çæ¿å±æºå¶\n\nè®©å¤§å®¶å»ç«äºè®°è´¦æçå¨åæ¯ä»ä¹ï¼éè¦æä¾ç®ååçµåææ¬ï¼èç¹ä¸ºä»ä¹è¦å»åï¼è·å¾è®°è´¦æçç»ç¹æ¬èº«æä¸å®çæåï¼å¦å¯ä»¥å³å®åªäºäº¤æè¢«åå¥ä¸ä¸ä¸ªåºåä¸­ï¼ä½è¿ä¸åºå½æä¸ºç«äºè®°è´¦æçä¸»è¦å¨åï¼å ä¸º BTC ç³»ç»è®¾è®¡æ¥å¸æææäº¤æé½è½è¢«å¬å¹³åå¥è´¦æ¬ãåºåå¥å±æºå¶è§£å³äºè¿ä¸ªé®é¢ã\n\nBTCåè®®ä¸­è§å®ï¼è·å¾è®°è´¦æçç»ç¹ï¼å¨åå¸çåºåéå¯ä»¥æä¸ä¸ªç¹æ®çäº¤æââé¸å¸äº¤æï¼å¨è¿ä¸ªäº¤æä¸­å¯ä»¥åå¸ä¸å®æ°éçBTCï¼è¿æ¯åè¡BTCï¼äº§çæ°çBTCï¼çå¯ä¸æ¹æ³ï¼ä¸å¿æå®å¸çæ¥æºãè¿ä¹å°±è§£å³äºåé¢è°åçå»ä¸­å¿åç³»ç»ä¸­çç¬¬ä¸ä¸ªé®é¢ââè°æ¥åè¡ BTC ååè¡å¤å° BTCã\n\n> BTCååºç°æ¶ï¼åºåå¥å±æ¯ 50 ä¸ªBTCï¼BTCåè®®è§å®æ¯ 21ä¸ä¸ª åºåä¹åï¼åºåå¥å±å°±è¦ååï¼ä¹å°±åæ 25ä¸ªBTCãå¦ä»çæåµæ¯æ¯ä¸ªåºåä¸­è½äº§ç12.5ä¸ªBTCã\n\nä¸ºä»ä¹å½¢å®¹åå¾è®°è´¦æçè¿ç¨ä¸ºæç¿ï¼miningï¼ï¼\n\n> ç¿çæ°éæéï¼BTCæ»éæéã æç¿çè¿ç¨å¾é¾ï¼æå°ç¿çåæ¥å¾å¤§ï¼BTCåå¾è®°è´¦ææ¥è·å¾åºåå¥å±ä¹æ¯ä¸æ ·ã äºå¤ºè®°è´¦æçç»ç¹ç§°ä¸ºç¿å·¥ã",normalizedContent:"# åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  1\n\n * å­¦ä¹ å°åï¼https://www.bilibili.com/video/bv1vt411x7jf\n * åèæç« ï¼\n   * https://blog.nowcoder.net/n/30cbdb37108b4d93b3a5a93b8226ae31\n   * https://blog.csdn.net/weixin_47692652/category_11702107.html\n\n\n# åºåé¾\n\n20 ä¸çºªç»æµå­¦å®¶ åè¶å è®¤ä¸ºï¼æ¬§ç¾éè´§è¨èçæ ¹æºå¨äºè´§å¸æ¯æ¿åºåè¡çï¼æ¯ä¸­å¿åçï¼æ³¨å®ä¼ä¸ºäºé¸å¸ç¨èæ»¥åãæ¯ç¹å¸æ¯ä¸ç§èæè´§å¸ï¼å®æ¯ä¸ºäºè§£å³åè¶åæåºæ¥çä¸­å¿åè´§å¸å¿ç¶ä¼è¶åè´¬å¼çé®é¢ï¼èè¢«åé åºæ¥çå»ä¸­å¿åè´§å¸ã\n\nè´§å¸äº¤æçè¿ç¨ä¸­æä¹ç¡®ä¿è®°è´¦ä¸åºéï¼ä¸è¢«ç¯¡æ¹ï¼\n\n> å¤ä»£ææä½¿ç¨å®ä½ç©è´¨ç¹å«æ¯è´µéå±ãï¼æ æ³å­ç©ºåé ç©è´¨ï¼åå®ç»äºä½ æå°±æ²¡äºï¼ è¿ä»£å½å®¶è¿å¥çº¸å¸æ¶ä»£ãï¼ç¹æ®å°çãçº¸å¼ ãæ²¹å¢¨ï¼ä½¿å¾å¤å¶çº¸å¸åä¸ºä¸å¯è½ï¼ ç§»å¨äºèç½æ¶ä»£ä½¿ç¨çæ¯ç½ä¸æ¯ä»ãï¼ç¬¬ä¸æ¹ä¸­ä»é¶è¡è¿è¡ä¿¡ç¨æä¿ãå¯ç ç³»ç»ï¼\n\né£ä¹æ¯ç¹å¸æ¯æä¹è®°è´¦çå¢ï¼\n\n> çºç²éç§ï¼æ¯ä¸ªè´¦æ·çåºè´¦åå¥è´¦é½å¹¿æ­åºæ¥ï¼æ´ä¸ªè®°è´¦è¿ç¨è®©å¨ç½çäººé½çå°ï¼ç»æä¸æ¡åºåé¾ã\n\né£ä¹æä¹ä¿è¯åºåé¾ä¸çä¹åçä¿¡æ¯æ²¡æè¢«ç¯¡æ¹å¢ï¼\n\n> è¿å°±å©ç¨å°äºä¸é¢è®²å°çå¯ç å­¦åçã\n\n\n# å¯ç å­¦åç\n\næ¯ç¹å¸è¢«ç§°ä¸ºå å¯è´§å¸ cryptocurrencyãä½å¶å®åºåé¾ä¸åå®¹é½æ¯å¬å¼çï¼åæ¬åºåçå°åï¼è½¬è´¦çéé¢ã æ¯ç¹å¸ä¸»è¦ç¨å°äºå¯ç å­¦ä¸­çä¸¤ä¸ªåè½: 1.åå¸ 2.ç­¾å\n\nå¯ç å­¦ä¸­ç¨å°çåå¸å½æ°è¢«ç§°ä¸º cryptographic hash function, å®æä¸¤ä¸ªéè¦çæ§è´¨:\n\n * collision resistance(æç¢°ææ§): ä¾å¦ x=y h(x)=h(y) ä¸¤ä¸ªä¸åçè¾å¥ï¼è¾åºå´æ¯ç¸ç­çï¼è¿å°±ç§°åå¸ç¢°æãå®æ¯ä¸å¯é¿åçï¼å ä¸ºè¾å¥ç©ºé´æ»å¤§äºè¾åºç©ºé´ãåå¸ç¢°æä¸­ï¼ç»åºxï¼å¾é¾æ¾å°yï¼é¤éè®åæ±è§£(brute-force)ãé¾ä»¥åç°ç¢°æçæ§è´¨ç§°ä¸ºcollision resistance\n   * ä½ç¨ï¼æ£æµä¸ä¼ å°äºç«¯çæä»¶æ¯å¦è¢«æ´æ¹ï¼ä¸ä¼ æä»¶ååæ±è¯¥æä»¶çhashå¼ï¼è¿æ®µæ¶é´ä¸è½½è¯¥æä»¶åï¼åæ±ä¸æ¬¡hashå¼ï¼æ¯è¾ä¸¤å¼æ¯å¦ç¸ç­å³å¯ç¥éæä»¶æ¯å¦è¢«ç¯¡æ¹ã\n   * äººå·¥å¶é ç¢°æï¼æå½èåå¯ç å­¦å®¶çå°äºææå¨ 2004 å¹´å°±æ¾å°ç®æ³ï¼äººå·¥å¶é äºåå¸å½æ° md5 çåå¸ç¢°æï¼ä½¿å¾ md5å½æ° å®å¨æ§æ¶å°äºå²å»ãå¦ææ æ³äººå·¥å¶é åå¸ç¢°æï¼é£ä¹åäººå°±åªè½ç¨ brute-force è®åç©·ä¸¾ï¼è¿ç§å·¥ä½éå°±å·¨å¤§å°ä¸å¯è½äºã\n * hiding: åå¸å½æ°çè®¡ç®è¿ç¨æ¯ååçï¼ä¸å¯éçãä¾å¦ä» h(x) æ æ³æ¨å¯¼åº x, hiding æ§è´¨åææ¯è¾å¥ç©ºé´è¶³å¤å¤§(ä¸ç¶å¾å®¹æéåå®)ï¼åå¸æ¯è¾åå(hash ç»æä¸è½åªæ¯æå ä¸ªå¼)ãå¦æè¾å¥ä¸æ¯è¶³å¤å¤§ï¼ä¸è¬å¨ x åé¢æ¼æ¥ä¸ä¸ªéæºæ°ï¼å¦ x123213124ï¼æ´ä½ååå¸å¼ã\n   * ä½ç¨ï¼å collision resistance ç»åå¨ä¸èµ·ï¼ç¨æ¥å®ç° digital commitment (åç§°ä¸º digital equivalent of a sealed envelope)ãæé¢æµç»æä½ä¸ºè¾å¥ xï¼ç®åºä¸ä¸ªåå¸å¼ï¼å°åå¸å¼å¬å¸ï¼hiding è®©äººä»¬ç¥éåå¸å¼èä¸ç¥éé¢æµå¼ï¼æååå° x å¬å¸ï¼å ä¸ºæ collision resistance çæ§è´¨ï¼é¢æµç»ææ¯ä¸å¯ç¯¡æ¹çã\n * puzzle friendly: æè° puzzle friendlyï¼æææ¯å¯¹äºåå¸å½æ°ï¼ä»çè¾åºæ¯æ æ³é¢æµçï¼è¦æ¾å°ç¹å®åºé´åçåå¸å¼çè¾å¥xï¼æ²¡ææ·å¾ã æ¯å¦ï¼æè¦æ¾å°sha256å½æ°ï¼æ¯ç¹å¸ä¸­ç¨ç hash å½æ°: secure hash algorithmï¼çåå¸å¼ï¼å60ä½é½æ¯é¶ï¼æé¤äºä¸ä¸ªä¸ä¸ªè¯éªä»¥å¤ï¼æ²¡æå¶ä»çæ¹æ³ã ï¼æç¿å¾é¾ï¼éªè¯å¾å®¹æï¼\n\nå³äºç­¾åï¼é¦åè¦ä»ç»æ¯ç¹å¸ä¸­çè´¦æ·ç®¡çï¼å¼æ·æ¹å¼: åªéè¦åå»ºä¸å¯¹å¬ç§é¥å³å¯ï¼éå¯¹ç§°å å¯ï¼ï¼å¬é¥æ¯å¬å¼çï¼ç§é¥æ¯ç§å¯çã\n\n> é£ä¹æ¯ä¸ªäººé½æå¬ç§é¥ï¼å¯ä¸å¯ä»¥ä¸æ­çæå¬ç§é¥ï¼ä¸åºåé¾ä¸å·²å­å¨çå¬é¥è¿è¡å¯¹æ¯ï¼å¦æç¸åï¼åç¨å¯¹åºçç§é¥å»æ»å»ä»ãç­æ¡æ¯ä¸å¯è½ï¼å ä¸ºæ¦çå¾®ä¹å¶å¾®ï¼ä½æ¯åææ¯çæå¬ç§é¥çæ¶åè¦æå¥½çéæºæºã\n\næ¯ç¹å¸çæ¬è´¨å°±æ¯æ°å­ç­¾åï¼å¯¹äºä¸ç¬äº¤æï¼è¦ç¨åèµ·äººçç§é¥è¿è¡ç­¾åï¼å¤§å®¶å¯ä»¥ç¨åèµ·äººçå¬é¥å¯¹è¿ç¬äº¤æè¿è¡éªè¯ã\n\n> å³äºéå¯¹ç§°å å¯ç®æ³ï¼æ¯è¾å¸¸è§çæ¯æ¤­åæ²çº¿å å¯ç®æ³ãç®åå¯ä»¥çè§£ä¸ºç»è¿ä¸æ¡æ¤­åæ²çº¿ï¼å¯ä»¥çæä¸¤ä¸ªå¼ k å qï¼å¯¹ä¸ä¸ªæ° 123 ç¨ k è¿è¡å å¯ä¼çææ¯«æ è§å¾çæ°ï¼åå¯¹å¶ç¨ q è¿è¡è§£å¯ï¼å°±åæ¢å¤æäº 123ãk å¯ä»¥ä½ä¸ºç§é¥ï¼q å¯ä»¥ä½ä¸ºå¬é¥ã\n\n\n# æ°æ®ç»æ\n\n\n# hash pointerï¼åå¸æéï¼\n\n> å¨æ¯ç¹å¸ä¸­ï¼å¶æåºæ¬çæ°æ®ç»æä¾¿æ¯ä¸ä¸ªä¸ªåºåå½¢æçåºåé¾ãåºåé¾ä¸é¾è¡¨çåºå«å°±æ¯ç¨åå¸æéä»£æ¿äºæ®éæéã ä¸è¬çé¾è¡¨æä»¬é½å¯ä»¥æ¹é ä¸ºä½¿ç¨åå¸æéçé¾è¡¨ï¼ä½å½é¾è¡¨ä¸­å­å¨ç¯æ¶ï¼åå¸æéä¾¿ä¸è½åä½¿ç¨ã\n\nå¯¹äºé¾è¡¨ä¸­çèç¹ï¼å¯¹é¾è¡¨ä¸­çåå®¹åä¸æ¬¡åå¸è¿ç®ï¼è®° h() ä¸ºè¯¥èç¹çåå¸å¼ï¼è¯¥å¼ä¸èç¹ä¸­åå®¹æå³ãå½èç¹ï¼åºåï¼ä¸­åå®¹åçæ¹åï¼è¯¥åå¸å¼ä¹ä¼åçæ¹åï¼ä»èä¿è¯äºåºååå®¹ä¸è½è¢«ç¯¡æ¹ã\n\n\n\n> å¦å¾ä¸­æç¤ºï¼å¦ææä»¬æ³è¦ç ´ååºåé¾å®æ´æ§ãç¯¡æ¹bçåå®¹ï¼ècä¸­ä¿å­æbçåå¸å¼ï¼æä»¥cä¹å¾è¿è¡ä¿®æ¹ãèåæ ·cååºåä¹å¾ä¿®æ¹ãèç¨æ·åªéè¦è®°ä½æåä¸ä¸ªåºåé¾çåå¸å°åï¼å°±å¯ä»¥æ£æµåºåé¾ä¸åå®¹æ¯å¦è¢«ç¯¡æ¹ã å¨å®éåºç¨ä¸­ï¼ä¸æ´æ¡é¾å¯è½ä¼è¢«åæ­åå¼ä¿å­å¨å¤ä¸ªå°æ¹ãè¥ç¨æ·ä»ä»å·æå¶ä¸­ä¸æ®µï¼å½ç¨å°åé¢é¨ååºåæ°æ®æ¶ï¼ç´æ¥é®ç³»ç»ä¸­å¶ä»èç¹è¦å³å¯ï¼å½è¦å°ä¹åï¼ä»ä»éè¿è®¡ç®è¦å°çæåä¸ä¸ªåå¸å¼åèªå·±ä¿å­åå¸å¼æ¯å¦ä¸è´å¯ä»¥å¤æ­æç»åå®¹æ¯å¦ç¡®å®ä¸ºåºåé¾ä¸çå®çåå®¹ã\n\n\n# merkle treeï¼é»åå°æ ï¼\n\n> merkle tree ä¸ binary tree çåºå«å°±æ¯ç¨åå¸æéä»£æ¿äºæ®éæéã\n\n\n\n> ä¸å¾å³ä¸ºä¸ä¸ªç®åçmerkle treeï¼å¶ä¸­tx0ãtx1ãtx2ãtx3ä¸ºæ°æ®åï¼ä»£è¡¨æ¯ä¸æ¬¡äº¤æãtx0ãtx1åæä¸ä¸ªåå¸å¼ï¼å°å¶åå¹¶æ¾å¨ä¸ä¸ªèç¹ä¸­ï¼tx2ãtx3åæ ·æä½ï¼èåï¼éå¯¹å¾å°çä¸¤ä¸ªèç¹hash01ãhash23åå«ååå¸ï¼åå¯ä»¥å¾å°ä¸¤ä¸ªæ°çåå¸å¼ï¼å³ä¸ºå¾ä¸­æ ¹èç¹ãå®éä¸­ï¼å¨åºååå¤´ä¸­å­å¨çæ¯æ ¹èç¹çåå¸å¼ï¼å¯¹å¶ååä¸æ¬¡åå¸ï¼\n\nè¯¥æ°æ®ç»æçä¼ç¹å¨äºï¼åªéè¦è®°ä½ root hashï¼æ ¹åå¸å¼ï¼ï¼ä¾¿å¯ä»¥æ£æµåºå¯¹æ ä¸­ä»»ä½é¨ä½çä¿®æ¹ãä¸è®ºå¨åªéç¯¡æ¹äºï¼é½ä¼éè¿åå¸å¼åä¸ååºï¼æç»åé¦å° root hash å¼ä¸ã\n\n> å¨æ¯ç¹å¸ç³»ç»ä¸­ï¼ä¸ååºåéè¿åå¸å¼æéè¿æ¥ï¼å¨åä¸ä¸ªåºåä¸­çå¤ä¸ªäº¤æï¼æ°æ®åï¼ï¼åéè¿ merkle tree çå½¢å¼ç»ç»å¨ä¸èµ·ãåºåæ¬èº«åä¸ºä¸¤é¨åï¼åå¤´ååèº«ï¼ï¼å¨åå¤´ä¸­å­å¨ææ ¹åå¸å¼ï¼æ²¡æäº¤æçå·ä½ä¿¡æ¯ï¼ï¼åèº«ä¸­å­å¨äº¤æåè¡¨ã\n\n\n# è½»èç¹ä¸å¨èç¹(light node and full node)\n\n> å¨èç¹ä¿å­æ´ä¸ªåºåçææåå®¹ï¼èè½»èç¹ä»ä»ä¿å­åºåçåå¤´ä¿¡æ¯ã ä¸ºä»ä¹è¦åè½»èç¹åå¨èç¹ï¼ å ä¸ºç¡¬ä»¶çå±éãä¸ä¸ªåºåå¤§å°ä¸º1mbï¼å¯¹äºç§»å¨ä¾¿æºè®¾å¤æ¥è¯´ï¼å¦æå­å¨åºåçææåå®¹ï¼åæéç©ºé´è¿å¤§ï¼èè¿æ¯ä¸ç°å®çãæä»¥è½»èç¹åªéè¦å­å¨åºååå¤´ä¿¡æ¯ï¼å¨èç¹å­å¨åºåææåå®¹ã\n\nå½éè¦åè½»èç¹è¯æææ¡äº¤ææ¯å¦è¢«åå¥åºåé¾ï¼ä¾¿éè¦ç¨å° merkle proofãæä»¬å°äº¤æå°æ ¹èç¹è¿ä¸æ¡è·¯å¾ç§°ä¸º merkle proofï¼å¨èç¹å°æ´ä¸ª merkle tree çä¿¡æ¯åéç»è½»èç¹ï¼è½»èç¹å³å¯æ ¹æ®å¶ç®åºæ ¹åå¸å¼ï¼åèªå·±ä¿å­çå¯¹æ¯ï¼ä»èéªè¯è¯¥äº¤ææ¯å¦è¢«åå¥åºåé¾ãåªè¦æ²¿çè¯¥è·¯å¾ï¼è®¡ç®åºæ¥çæ ¹åå¸å¼æ­£ç¡®ï¼è¯´æåå®¹æ²¡æè¢«ä¿®æ¹è¿ã\n\n\n\né£ä¹å¨èç¹æ¯å¦å¯ä»¥ä¿®æ¹ hash å¼ï¼åè½»èç¹åéä¿®æ¹åç hash å¼ä½¿å¾åä¸ä¸å±è®¡ç®ç hash å¼ä»ç¶æ­£ç¡®å¢ï¼\n\n> å®éä¸ï¼è¿ç§æåµä¸ºäººä¸ºå¶é åå¸ç¢°æãç±äºåå¸å½æ°ç collision resistance æ§è´¨ï¼è¿ç§æåµæ¯ä¸ä¼åççï¼ä¿è¯äºç³»ç»çä¸å¯ç¯¡æ¹æ§ãåæ¶ï¼è¿æ ·ä¸ä¸ª merkle proof çäºä»¶å¤æåº¦ä¸º o(log n), éå¸¸é«æãè¯æäº¤æå­å¨ããå¦æè¦è¯æäº¤æä¸å­å¨ï¼å¦æä¸å¯¹å¶èç¹è§å®æåºé¡ºåºï¼æ²¡æä¸ä¸ªæçè¾é«çæ¹æ³è¯æä¸å­å¨ãå¨æ¯ç¹å¸ç³»ç»ä¸­ï¼æ²¡æç¸åºçéæ±ï¼æä»¥å¨æ¯ç¹å¸ç³»ç»ä¸­å¹¶æ²¡æå¯¹ merkle tree è¿è¡æåºã\n\n\n# åè®®\n\n\n# æ°å­è´§å¸çé®é¢\n\nåè®¾æå¨æºæââä¸­å¤®é¶è¡åè¡æ°å­è´§å¸ï¼åè¡äºæ°å­è´§å¸ï¼ç¨å¤®è¡çç§é¥ç­¾åï¼ç¶åä½¿ç¨çæ¶åï¼ç¨æ·ç´æ¥æ¿å¤®è¡çå¬é¥éªè¯ç­¾åï¼åè®¾å¤§å®¶é½ç¥éå¬é¥ï¼ã\n\n\n\nè½ç¶ç­¾åä¿è¯äºæ²¡åæ³ç¯¡æ¹å¶ä¸­çåå®¹ï¼ä½æ¯æ°å­è´§å¸æ¬è´¨ä¸è¿æ¯ä¸ä¸ªæä»¶ï¼è¿æ ·çæ°å­è´§å¸å¯å¤å¶ï¼å°±ä¼é æåè±æ»å»ï¼double spending attackï¼ãä¸åæ¯çº¸è´¨è´§å¸ï¼è±åºå»æä¸å°±æ²¡æã\n\n\n# ä¸­å¿å\n\nä¸ºè§£å³è¿ä¸ªé®é¢ï¼å¤®è¡è¿è¦ç»´æ¤ä¸ä¸ªæ°æ®åºï¼å³è®°å½æ¯ä¸ªç¼å·çæ°å­è´§å¸æ¯å½åªä¸ªç¨æ·ææã\n\n\n\nå¨æ¯ä»æ¶ï¼ä¸ä»è¦ç¨å¬é¥éªè¯ç­¾åæ¯å¤®è¡ç­¾ç½²çï¼è¿è¦éè¿å¤®è¡éªè¯è¯¥è´§å¸æ¯å½èªå·±ææï¼å¤®è¡åå°è´§å¸ææèæ¹ææ¯ä»ç»çé£ä¸ªç¨æ·ãä¸ä»æ°å­è´§å¸çåè¡æ¯ç±å¤®è¡ç»ä¸æ§å¶ï¼èä¸æ¯æ¬¡äº¤æé½è¦ç±å¤®è¡ç¡®è®¤å¶åæ³æ§ï¼è¿ç§æ¹æ¡æ¯ä¸ä¸ªä¸­å¿åçæ¹æ¡ã\n\n\n# å»ä¸­å¿å\n\nå°å¤®è¡çèè½æ¹æç±å¹¿å¤§çç¨æ·æ¥å±åæ¿æï¼ä¹å°±æ¯å»ä¸­å¿åçæ¹æ¡ï¼è¿æ¯btcç­æ°å­è´§å¸ç³»ç»è¦è§£å³çé®é¢ï¼å³ï¼\n\n> 1ï¸â£ æä¹å³å®æ°å­è´§å¸çåè¡ååè¡é 2ï¸â£ æä¹éªè¯äº¤æçåæ³æ§ï¼é²æ­¢åè±æ»å» ç¬¬ä¸ä¸ªé®é¢å¨ btc ç³»ç»ä¸­æ¯æç¿å³å®ç ç¬¬äºä¸ªé®é¢çè§£å³ï¼è¦ç»´æ¤ä¸ä¸ªæ°æ®ç»æï¼ç±ææç¨æ·æ¥å±åç»´æ¤ï¼è¿ä¸ªæ°æ®ç»æå°±æ¯åºåé¾ã\n\nåè®¾ç¨æ· a è·å¾äºé¸å¸æï¼ä»åè¡äº 10 ä¸ª btcãç¶åä»å°è¿ 10 ä¸ª btc è½¬ç» b å cï¼æ¯ä¸ªäººå 5 ä¸ª btcãæ¥ä¸æ¥ b ç» c 2 ä¸ªè´§å¸ï¼ç» d 3 ä¸ªè´§å¸ãæå c å°æå¾ç 7 ä¸ªè´§å¸å¨é¨ç» eã\n\n\n\n> çº¢è²ç®­å¤´ä¼è¯´æãå¸çæ¥æºãï¼è¿ä¹å°±é²æ­¢äºåè±æ»å»ï¼å¦è¿ b å·²ç»å°èªå·±ç 5ä¸ªbtc è±æäºï¼åè®¾ b å°è¯åè±ä¸æ¬¡ï¼å° 5ä¸ªbtc è½¬ç»fãè¿æ¶é¡ºçåºåé¾å»æ£æ¥è¿ä¸ªåºåå°æ¥æºäº¤æä¹é´çåºåï¼åç° b å·²ç»è±äºæ¥æºåºåçbtcï¼è¯´æè¿æ°ä¸ªäº¤ææ¯ä¸åæ³çï¼ä¹å°±ä¸ä¼æ¥åè¿ä¸ªè½¬ç»fçåºåè¿å¥åºåé¾ã\n\nä»¥ a å b è½¬è´¦ä¸ºä¾ï¼\n\n * bçå¬é¥: a å b è½¬è´¦ï¼a éè¦ç¥é b çå°åãå ä¸º btc ç³»ç»ä¸­çæ¶æ¬¾å°åå°±æ¯æ¶æ¬¾äººçå¬é¥ååå¸åç»è¿ä¸äºè½¬æ¢å¾å°çãbtcç³»ç»ä¹æ²¡ææä¾æ¥è¯¢æç¨æ·çå¬é¥æè´¦æ·å°åçåè½ï¼è¦å b è½¬è´¦ï¼å°±éè¦ b æä¾å¬é¥æè´¦æ·å°åãè¿ç§æåµ b å¯ä»¥æå¬é¥å¬å¸å¨ç½ç«ä¸ãï¼è½ç¶å¬é¥å¯ä»¥å¬å¼ï¼ä½å®éä¸­æ´å¤å¬å¼çæ¯å¬é¥çåå¸ï¼\n * açå¬é¥: a å b è½¬è´¦ï¼b ä¹éè¦ç¥é a çå¬é¥ãå ä¸ºä¸æ¹é¢ a çå¬é¥ä»£è¡¨ a çèº«ä»½ï¼b è¦ç¥éè½¬è´¦çæ¯è°ï¼å¦ä¸æ¹é¢æ¯ä¸ºäºéªè¯ btc äº¤æä¸­ a çç­¾åï¼ç§é¥ç­¾åå¬é¥éªè¯ï¼ï¼ä¹å°±æ¯è¯´ææç»ç¹é½éè¦ç¥é a çå¬é¥æè¡ï¼æ¯ä¸ªç»ç¹é½éè¦ç¬ç«éªè¯ï¼å³ä½¿æ¯ä¸ä¸ªåäº¤ææ å³çæè§èä¹è¦éªè¯è¿ç¬äº¤æçåæ³æ§ã\n * å¦ä½ç¥é a çå¬é¥: a çå¬é¥æ¯ a èªå·±åå¨è¿ç¬äº¤æçè¾å¥é¨åéï¼å³å¨äº¤æä¸­ä»æ¬¾æ¹èªå·±å®£ç§°çãå®éä¸­ a è½¬è´¦æ¶åæä¾çå¬é¥éè¦åé¸å¸äº¤æä¸­å¬é¥å¯¹çä¸ï¼è¿æ ·å°±é²æ­¢äºæ¶æèç¹ä¼ªé  a çå¬é¥æ¥âå·âèµ° a çæ¯ç¹å¸ã\n * å¨æ¯ç¹å¸ç³»ç»ä¸­ï¼éè¿æ§è¡èæ¬å®ç°ä¸è¿°éªè¯è¿ç¨ãå°å½åäº¤æè¾å¥èæ¬ä¸åä¸ä¸ªäº¤æè¾åºèæ¬ï¼è¯´æå¸çæ¥æºçäº¤æï¼æ¼æ¥æ§è¡ï¼å¦æå¯ä»¥æ­£ç¡®æ§è¡ï¼è¯´æäº¤æåæ³ã\n\n\n# åºåç»æ\n\n\n\n> å¨ç»ç¹ï¼fully validating nodeï¼æ¯æåèº«çï¼éè¦éªè¯ææäº¤æçåæ³æ§ï¼è½»ç»ç¹ï¼light nodeï¼æ¯æ²¡æåèº«çï¼æ²¡æåæ³ç¬ç«éªè¯äº¤æçåæ³æ§ãè½»ç»ç¹æ²¡æåä¸åºåé¾çæé åç»´æ¤ï¼åªæ¯å©ç¨äºåºåé¾ä¸­çé¨åä¿¡æ¯ãç³»ç»ä¸­å¤§é¨åç»ç¹æ¯è½»ç»ç¹ï¼å¨ç»ç¹ä¸æ¯å¾å¤ãä¸é¢ä¸»è¦æ¯å¯¹å¨ç»ç¹è¿è¡è¯´æã\n\n * åå¤´ï¼block headerï¼: åå¤´éä¿å­çæ¯åºåçå®è§çä¿¡æ¯ã\n   * version: ç¨çæ¯btcçåªä¸ªçæ¬çåè®®\n   * æååä¸ä¸ªåºååå¤´çåå¸æé\n   * merkle root hash: æ´æ£µ merkle tree çæ ¹åå¸å¼\n   * target: æç¿çé¾åº¦ç®æ éå¼target\n   * nonce: æç¿ç¨çéæºæ°nonceï¼è¦ä½¿å¾h(blockheader) â¤ target\n * åèº«ï¼block bodyï¼\n   * äº¤æåè¡¨\n\n\n# å±è¯åè®®\n\næ¯ä¸ªè´¦æ·é½å¯ä»¥åå¸äº¤æï¼åºåé¾å¯ä»¥çåå»ä¸­å¿åçè´¦æ¬ï¼é£ä¹åå¸çäº¤æåºè¯¥åå¨åªä¸ªåºåéå¢ï¼äº¤æå¹¿æ­ç»æ¯ä¸ªåºåï¼æ¯ä¸ªäººé½å¨èªå·±æ¬å°çåºåé¾ä¸åå¥äº¤æï¼å¦ä½ä¿è¯åå¥åçä¸è´æ§ï¼ä¹å°±æ¯è¯´è´¦æ¬çåå®¹è¦åå¾åå¸å¼çå±è¯ï¼distributed consensusï¼ã\n\n * flp impossibility result: è®²çæ¯å¨ä¸ä¸ªå¼æ­¥çç³»ç»ï¼asynchronous systemï¼ä¸­ï¼ç½ç»ä¼ è¾çæ¶å»¶æ²¡æä¸éï¼å³ä½¿åªæä¸ä¸ªæåæ¯æé®é¢ï¼faultyï¼çï¼ä¹ä¸å¯è½åå¾å±è¯ã\n * cap theorem: cap æ¯åå¸å¼ç³»ç»æ³è¦çä¸ä¸ªæ§è´¨ï¼consistency ä¸è´æ§ãavailability å¯ç¨æ§ãpartition tolerance ååºå®¹å¿æ§ãè cap theorem æ¯è¯´ä»»ä½ä¸ä¸ªåå¸å¼ç³»ç»ä¸­ï¼cap ä¸ä¸ªæ§è´¨æå¤åªè½æ»¡è¶³å¶ä¸­ä¸¤ä¸ªï¼ä¸å¯è½ä¸ä¸ªå¨æ»¡è¶³ã\n * åå¸å¼å±è¯ä¸­åè®® paxos å¯ä»¥ä¿è¯consistencyï¼è¥è¾¾æå±è¯å¿ç¶ä¸è´ï¼ï¼ä½å¨æäºæåµä¸ï¼å¯è½ä¼ä¸ç´æ æ³è¾¾æå±è¯ã\n\n\n# æ¯ç¹å¸å±è¯åè®®\n\n> èæ¯ï¼åè®¾ç³»ç»ä¸­å­å¨é¨åèç¹ææ¶æï¼ä½å­å¨æ¯ä¾è¾å°ãå¤§å¤æ°èç¹ä¸ºâå¥½âçèç¹ï¼å¨è¿ç§æåµä¸è¿è¡å±è¯åè®®è®¾ç½®ã æ³æ³1ï¼ç´æ¥æç¥¨ æä¸ªèç¹æåäº¤æå°åºåï¼å°å¶åç»å¶ä»èç¹ï¼å¶ä»èç¹æ£æ¥è¯¥åéåºåï¼æ£æ¥è¥æ­£ç¡®æèµæç¥¨ï¼è¥ç¥¨æ°è¿åæ°ï¼å å¥åºåé¾ã å­å¨çé®é¢1ââæ¶æèç¹ä¸æ­æåä¸åæ³åºåï¼å¯¼è´ä¸ç´æ æ³è¾¾æå±è¯ï¼æ¶é´å¨è±è´¹å¨æç¥¨ä¸ã å­å¨çé®é¢2ââæ å¼ºè¿«æç¥¨ææ®µï¼æäºèç¹ä¸æç¥¨ï¼è¡æ¿ä¸ä½ä¸ºï¼ã å­å¨çé®é¢3ââç½ç»å»¶è¿äºåæªç¥ï¼æç¥¨éè¦ç­å¤ä¹ï¼æçä¸ä¼äº§çé®é¢ã æ´å¤§çä¸ä¸ªé®é¢ââmembershipãå¦ææ¯èçé¾ï¼å¯¹å å¥æåæè¦æ±ï¼å¯ä»¥åºäºæç¥¨ãä½æ¯ç¹å¸ç³»ç»ï¼ä»»ä½äººé½å¯ä»¥å å¥ï¼ä¸åå»ºè´¦æ·åå¶ç®åï¼åªéè¦æ¬å°äº§çå¬ç§é¥å¯¹å³å¯ãåªæè½¬è´¦ï¼äº¤æï¼æ¶å,æ¯ç¹å¸ç³»ç»æè½ç¥éè¯¥è´¦æ·çå­å¨ãè¿æ ·ï¼é»å®¢å¯ä»¥ä½¿ç¨è®¡ç®æºä¸é¨çæå¤§éå¬ç§é¥å¯¹ï¼å½å¶äº§çå¤§éå¬ç§é¥å¯¹è¶è¿ç³»ç»ä¸­ä¸åæ°ç®ï¼å°±å¯ä»¥è·å¾æ¯éå°ä½ï¼å¥³å·«æ»å» sybil attackï¼ãæä»¥ï¼è¿ç§ç®åçæç¥¨æ¹æ¡ä¹æ¯ä¸å¯è¡çã\n\næ¯ç¹å¸ç³»ç»ä¸­éç¨äºå¾å·§å¦çæ¹æ¡è§£å³è¿ä¸ªé®é¢ãè½ç¶ä»ç¶æ¯æç¥¨ï¼ä½å¹¶éç®åçæ ¹æ®è´¦æ·æ°ç®ï¼èæ¯ä¾æ®è®¡ç®åè¿è¡æç¥¨ã å¨æ¯ç¹å¸ç³»ç»ä¸­ï¼æ¯ä¸ªèç¹é½å¯ä»¥èªè¡ç»è£ä¸ä¸ªåéåºåï¼èåï¼å°è¯åç§ nonce å¼ï¼4 bytesï¼ï¼è¿å°±æ¯æç¿ãh(block header)<=targetãå½æä¸ªèç¹æ¾å°ç¬¦åè¦æ±ç nonceï¼ä¾¿è·å¾äºè®°è´¦æï¼ä»èå¯ä»¥å°åºååå¸å°ç³»ç»ä¸­ãå¶ä»èç¹åå°åºååï¼éªè¯åºååæ³æ§ï¼å¦æç³»ç»ä¸­ç»å¤§å¤æ°èç¹éªè¯éè¿ï¼åæ¥æ¶è¯¥åºåä¸ºææ°çåºåå¹¶å å¥å°åºåé¾ä¸­ã\n\n> éªè¯åæ³æ§å¦æ£æ¥ target çç¼ç  nbits åè®¾ç½®çæ¯ä¸æ¯ç¬¦å btc åè®®è§å®çé¾åº¦è¦æ±ãæ£æ¥å¸¦ nonce çåå¤´åå¸å¼æ¯ä¸æ¯å°äºtargetãæ£æ¥åèº«ä¸­çæ¯ä¸ªäº¤ææ¯å¦é½æåæ³çç­¾åãæ£æ¥æ¯ä¸ªäº¤æé½æ²¡æåè±ç­\n\nåéåºååæ³äºå°±è¦å»æ¥æ¶åï¼\n\nååæ»å»ï¼aç¨æ·å¯¹ä¸é¢çaè½¬è´¦ç»bçè®°å½åæ»ï¼ä»èéæ³è·åå©çãä½æ¯å¨ä¸¤æ¡é¾ä¸ï¼åç°äº¤æé½åæ³ï¼ä½æ¯è½¬è´¦ç»a'ä¸åºå½è¢«æ¥åãè¿æ¯ä¸ä¸ªå¸åçåè±æ»å»ãaç»bè½¬è´¦åï¼ç¨ååæ»å»å°é±åè½¬åæ¥ï¼è¦çæåæ¥çè®°å½ã å¨æ¯ç¹å¸ç³»ç»ä¸­ï¼è¿ç§æåµå®éä¸å¾é¾åçãå ä¸ºå¤§å¤æ°ç¿å·¥è®¤å¯çæ¯æé¿çåæ³é¾ï¼ä¼æ²¿çä¸é¢çé¾ç»§ç»­æä¸å»ãèaè¿ä¸ªæ»å»èè¦æ³åéè®°å½ï¼å°±å¿é¡»ä½¿å¾ä¸é¢çé¾åå¾æ¯ä¸é¢çé¾è¿é¿ãçè®ºä¸æ¥è¯´ï¼æ»å»èéè¦è¾¾å°æ´ä¸ªç³»ç»ä¸­51%çè®¡ç®åï¼æè½ä½¿å¾è¿ç§æ»å»æåã\n\n> æ­¤å¤ï¼åºåé¾æ­£å¸¸è¿è¡åºæ¯ä¸ï¼ä¹å¯è½ä¼åçååãå½ä¸¤ä¸ªèç¹åæ¶è·å¾è®°è´¦ææ¶ï¼ä¼æä¸¤ä¸ªç­é¿çåæ³é¾ãå¨ç¼ºçæåµä¸ï¼èç¹æ¥æ¶æåå¬å°çåºåï¼è¯¥èç¹ä¼æ²¿çè¯¥åºåç»§ç»­å»¶ç»­ãä½éçæ¶é´å»¶ç»­ï¼å¿ç¶æä¸ä¸ªé¾èåºï¼ç±æ­¤ä¿è¯äºåºåé¾çä¸è´æ§ãï¼è¢«ææçåºåç§°ä¸ºâå­¤å¿åºåâï¼\n\n\n# æ¯ç¹å¸çæ¿å±æºå¶\n\nè®©å¤§å®¶å»ç«äºè®°è´¦æçå¨åæ¯ä»ä¹ï¼éè¦æä¾ç®ååçµåææ¬ï¼èç¹ä¸ºä»ä¹è¦å»åï¼è·å¾è®°è´¦æçç»ç¹æ¬èº«æä¸å®çæåï¼å¦å¯ä»¥å³å®åªäºäº¤æè¢«åå¥ä¸ä¸ä¸ªåºåä¸­ï¼ä½è¿ä¸åºå½æä¸ºç«äºè®°è´¦æçä¸»è¦å¨åï¼å ä¸º btc ç³»ç»è®¾è®¡æ¥å¸æææäº¤æé½è½è¢«å¬å¹³åå¥è´¦æ¬ãåºåå¥å±æºå¶è§£å³äºè¿ä¸ªé®é¢ã\n\nbtcåè®®ä¸­è§å®ï¼è·å¾è®°è´¦æçç»ç¹ï¼å¨åå¸çåºåéå¯ä»¥æä¸ä¸ªç¹æ®çäº¤æââé¸å¸äº¤æï¼å¨è¿ä¸ªäº¤æä¸­å¯ä»¥åå¸ä¸å®æ°éçbtcï¼è¿æ¯åè¡btcï¼äº§çæ°çbtcï¼çå¯ä¸æ¹æ³ï¼ä¸å¿æå®å¸çæ¥æºãè¿ä¹å°±è§£å³äºåé¢è°åçå»ä¸­å¿åç³»ç»ä¸­çç¬¬ä¸ä¸ªé®é¢ââè°æ¥åè¡ btc ååè¡å¤å° btcã\n\n> btcååºç°æ¶ï¼åºåå¥å±æ¯ 50 ä¸ªbtcï¼btcåè®®è§å®æ¯ 21ä¸ä¸ª åºåä¹åï¼åºåå¥å±å°±è¦ååï¼ä¹å°±åæ 25ä¸ªbtcãå¦ä»çæåµæ¯æ¯ä¸ªåºåä¸­è½äº§ç12.5ä¸ªbtcã\n\nä¸ºä»ä¹å½¢å®¹åå¾è®°è´¦æçè¿ç¨ä¸ºæç¿ï¼miningï¼ï¼\n\n> ç¿çæ°éæéï¼btcæ»éæéã æç¿çè¿ç¨å¾é¾ï¼æå°ç¿çåæ¥å¾å¤§ï¼btcåå¾è®°è´¦ææ¥è·å¾åºåå¥å±ä¹æ¯ä¸æ ·ã äºå¤ºè®°è´¦æçç»ç¹ç§°ä¸ºç¿å·¥ã",charsets:{cjk:!0}},{title:"åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  4",frontmatter:{},regularPath:"/blockchain/learn4.html",relativePath:"blockchain/learn4.md",key:"v-88916b42",path:"/blockchain/learn4.html",headers:[{level:2,title:"BTC åå",slug:"btc-åå",normalizedTitle:"btc åå",charIndex:83},{level:3,title:"state fork",slug:"state-fork",normalizedTitle:"state fork",charIndex:94},{level:3,title:"protocol fork",slug:"protocol-fork",normalizedTitle:"protocol fork",charIndex:304},{level:2,title:"BTC é®ç­",slug:"btc-é®ç­",normalizedTitle:"btc é®ç­",charIndex:2484},{level:2,title:"BTC å¿åæ§",slug:"btc-å¿åæ§",normalizedTitle:"btc å¿åæ§",charIndex:3817},{level:3,title:"BTC ä»ä¹æåµä¼ç ´åå¶å¿åæ§",slug:"btc-ä»ä¹æåµä¼ç ´åå¶å¿åæ§",normalizedTitle:"btc ä»ä¹æåµä¼ç ´åå¶å¿åæ§",charIndex:4028},{level:3,title:"å¦ä½æé«å¿åæ§",slug:"å¦ä½æé«å¿åæ§",normalizedTitle:"å¦ä½æé«å¿åæ§",charIndex:4886},{level:3,title:"é¶ç¥è¯è¯æ",slug:"é¶ç¥è¯è¯æ",normalizedTitle:"é¶ç¥è¯è¯æ",charIndex:5059},{level:3,title:"åæéè",slug:"åæéè",normalizedTitle:"åæéè",charIndex:5205},{level:3,title:"ç²ç­¾æ¹æ³",slug:"ç²ç­¾æ¹æ³",normalizedTitle:"ç²ç­¾æ¹æ³",charIndex:5291},{level:3,title:"é¶å¸åé¶é",slug:"é¶å¸åé¶é",normalizedTitle:"é¶å¸åé¶é",charIndex:5397},{level:2,title:"BTC æè",slug:"btc-æè",normalizedTitle:"btc æè",charIndex:5529},{level:3,title:"åå¸æé",slug:"åå¸æé",normalizedTitle:"åå¸æé",charIndex:5540},{level:3,title:"åºåãæã",slug:"åºåãæã",normalizedTitle:"åºåãæã",charIndex:5946},{level:3,title:"åå¸å¼å±è¯",slug:"åå¸å¼å±è¯",normalizedTitle:"åå¸å¼å±è¯",charIndex:6269},{level:3,title:"BTC ç¨ç¼ºæ§",slug:"btc-ç¨ç¼ºæ§",normalizedTitle:"btc ç¨ç¼ºæ§",charIndex:6486},{level:3,title:"éå­è®¡ç®",slug:"éå­è®¡ç®",normalizedTitle:"éå­è®¡ç®",charIndex:6834}],lastUpdated:"6/6/2025, 6:14:05 PM",lastUpdatedTimestamp:1749204845e3,headersStr:"BTC åå state fork protocol fork BTC é®ç­ BTC å¿åæ§ BTC ä»ä¹æåµä¼ç ´åå¶å¿åæ§ å¦ä½æé«å¿åæ§ é¶ç¥è¯è¯æ åæéè ç²ç­¾æ¹æ³ é¶å¸åé¶é BTC æè åå¸æé åºåãæã åå¸å¼å±è¯ BTC ç¨ç¼ºæ§ éå­è®¡ç®",content:"# åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  4\n\n * å­¦ä¹ å°åï¼https://www.bilibili.com/video/BV1Vt411X7JF\n\n\n# BTC åå\n\n\n# state fork\n\nå¦æä¸¤ä¸ªèç¹å·®ä¸å¤åæ¶æå°ä¸ä¸ªåºåï¼è¿ä¸¤ä¸ªåºåé½æ¯æå¨å½åçåºåä¸çï¼ä¸åèç¹åæ¶å°çåºåä¸åï¼å°±ä¼åèªæ²¿çåæ¶å°çåºåå¾ä¸æ©å±ï¼è¿ç§æ¶åå°±ä¼åºç°ä¸´æ¶æ§çååï¼ç§°ä¸ºstate forkï¼å³ç±äºå¯¹åºåé¾å½åçç¶æææè§åæ­§èäº§ççååã\n\nååæ»å»ï¼forking attackï¼ä¹å±äºstate forkï¼åªä¸è¿è¿ç§æè§åæ­§æ¯äººä¸ºé æçï¼è¿ç§æåµä¹ç§°ä¸º deliberate forkã\n\n\n# protocol fork\n\nè¦ä¿®æ¹æ¯ç¹å¸åè®®éè¦è½¯ä»¶åçº§ï¼å¨å»ä¸­å¿åçç³»ç»ä¸­ï¼æ²¡åæ³è¦æ±ææçç»ç¹é½åçº§è½¯ä»¶\n\nåè®¾å¤§é¨åèç¹åçº§äºè½¯ä»¶ï¼å°é¨åèç¹æ²¡æåçº§ï¼å¯è½æ¯æ²¡æ¥å¾ååçº§ï¼ä¹å¯è½æ¯ä¸åæåè®®çä¿®æ¹ï¼ï¼è¿ç§ååç§°ä¸ºprotocol forkï¼å³å¯¹æ¯ç¹å¸åè®®äº§çäºåæ­§ï¼ä½¿ç¨ä¸åçæ¬çåè®®èäº§ççååã\n\nå¨ protocol fork ä¸­ï¼æ ¹æ®å¯¹åè®®ä¿®æ¹çåå®¹çä¸åï¼åå¯ä»¥åä¸ºç¡¬åååè½¯ååã\n\n# ç¡¬åå\n\nå¦æåºåé¾è½¯ä»¶çå±è¯è§åè¢«æ¹åï¼å¹¶ä¸è¿ç§è§åæ¹åæ æ³ååå¼å®¹ï¼æ§èç¹æ æ³è®¤å¯æ°èç¹äº§ççåºåï¼å³ä¸ºç¡¬ååã\n\n 1. æ¯ç¹å¸åå\n\nä¸äºäººå¼å§è§å¾æ¯ç¹å¸çåºåå®¹éå¤ªå°ï¼æ»åºç°æ¥å µï¼äºæ¯è¿äºäººè¦æ±å¯¹æ¯ç¹å¸çåºåå¤§å°è¿è¡åçº§æ©å®¹ãæäººæ¯æå°±æäººåå¯¹ï¼è¿ç§å¯¹æ¯ç¹å¸åå±çåæ­§å¯¼è´äºæ¯ç¹å¸é¦æ¬¡ç¡¬ååï¼æ§é¾ä¸çå¸ä»ç¶æ¯æ¯ç¹å¸ BTC(åºåå®¹éè¾¾å°äº8M)ï¼æ°é¾ä¸çå¸æ¯ BCHï¼Bitcoin Cashï¼æ¯ç¹å¸ç°éãåºåå®¹éè¾¾å°äº8Mï¼ã\n\nBCH å BTC æå¤§çåºå«åªæ¯å¨äºåºåå®¹éçåæ°ä¸åï¼ä¸¤èåååçäº¤æé½æ¯ä¸æ ·çï¼åªæ¯äº¤æçå¸ç§ä¸ä¸æ ·ãå¯ä»¥çè§£ä¸º BCH é£æ¡é¾æåååçåºåéçäº¤ææç§åæ¥çæ¹å¼éæ°è¿è¡äºä¸éï¼åªæ¯æå¸ç§ç±åæ¥ç BTC æ¢æäº BCHã\n\n 2. ä»¥å¤ªååå\n\nThe DAO é¡¹ç®æ¯åºåé¾ç©èç½å¬å¸ Slock.it åèµ·çä¸ä¸ªä¼ç­¹é¡¹ç®ï¼äº2016å¹´5ææ­£å¼åå¸ï¼æªæ­¢å°å½å¹´6æï¼The DAO é¡¹ç®åéèµéè¶è¿ 1.6 äº¿ç¾åãæ²¡è¿å¤ä¹ï¼The DAO é¡¹ç®å°±è¢«é»å®¢ç¯ä¸äºï¼å ä¸ºæºè½åçº¦ä¸çå·¨å¤§æ¼æ´ï¼å¯¼è´ The DAO é¡¹ç®è¢«è½¬ç§»äºå¸å¼äºåä¸ç¾åçä»¥å¤ªå¸ã\n\nä¸ºäºæ½åä¼å¤æèµèçèµäº§å¹¶åæ­¢ææï¼ä»¥å¤ªååå§äººVç¥ï¼Vitalik Buterinï¼æåæåºç¡¬ååçè®¾æ³ï¼å¹¶æç»éè¿ç¤¾åºçå¤æ°æç¥¨è¡¨å³å¨ä»¥å¤ªåç¬¬ 1920000 åºåå®æäºç¡¬ååï¼åæ»äºåæ¬è¢«é»å®¢å æçææä»¥å¤ªå¸ãå³ä½¿ä»¥å¤ªåç¡¬ååæäºä¸¤æ¡é¾ï¼ä¾ç¶æé¨åä¿¡ä»°çåºåé¾ä¸å¯ç¯¡æ¹ç¹æ§çäººçå¨ä»¥å¤ªç»å¸è¿æ¡åé¾ä¸ã\n\nç®åçä»¥å¤ªå ETH å°±æ¯ç¡¬ååä¹åçï¼åæ¥çé¾æ¯ ETCãååä¹åï¼ç±äºä¸¤ä¸ªé¾ååé æäºäºç¸å½±åï¼äº§çäºå¾å¤éº»ç¦ãæ¯å¦ï¼å¨ ETH é¾ä¸æä¸ç¬è½¬è´¦ B->Cï¼æäººä¾¿å¨ ETC é¾ä¸åæ¾ï¼å° ETC é¾ä¸çè´§å¸é¡µè½¬ç»äº C(Cæ¶å°ä¸¤ç¬é±)ãåæ¥ï¼å¯¹ä¸¤æ¡é¾åæ·»å äºä¸ä¸ª chainIDï¼å°ä¸¤ä¸ªé¾åºåå¼ï¼æä½¿å¾è¿ä¸¤æ¡é¾çæ­£åå¼ã\n\n# è½¯åå\n\nå¦æåºåé¾çå±è¯è§åæ¹ååï¼è¿ç§æ¹åæ¯ååå¼å®¹çï¼æ§èç¹å¯ä»¥å¼å®¹æ°èç¹äº§ççåºåï¼å³ä¸ºè½¯ååã\n\nå®éä¸ï¼è½¯ååéå¸¸åå¼å§å¹¶ä¸ä¼äº§çä¸¤æ¡åºåé¾ï¼å ä¸ºæ°è§åä¸äº§ççåä¼è¢«æ§èç¹æ¥åï¼æ§èç¹åªæ¯æ æ³è¯å«æ°è§åççå®æä¹ãæä»¥æ°æ§èç¹ä»ç¶å¤äºåä¸æ¡åºåé¾ä¸ï¼å¯¹æ´ä¸ªç³»ç»çå½±åä¹å°±è¾å°ã\n\n 1. coinbase å\n\né¸å¸äº¤æä¸­ CoinBase åãå¨ CoinBase åä¸­åå¥ä»»ä½åå®¹é½å¯ä»¥ï¼æç¿æ¬è´¨æ¯è°æ´ block header ä¸­ç nonce ï¼ä½å¶æ¬èº«åªæ 4 ä¸ªå­èï¼æç´¢ç©ºé´å¤ªå°ãæä»¥å®éä½¿ç¨ä¸­ï¼å° CoinBase åå 8 ä¸ªèªå·±ä½ä¸ºå¦ä¸ä¸ª extra nonceï¼æ­¤æ¶æç´¢ç©ºé´ä»åæ¬2^32 å¢é¿å° 2^96ï¼å¯¹äºç®åæç¿é¾åº¦æ¥è¯´å·²ç»è¶³å¤ãä½ CoinBase ä¸­å¹¶ä¸æ¯åªæ8ä¸ªå­èï¼è¿å©ä¸å¾å¤ç©ºé´ã\n\nCoinbase äº¤æçè¾å¥ä¸­æä¸ä¸ªå­æ®µ coinbase data åå®¹å¯ä»¥ä»»æå®å¶ãBIP-34 å°±æ¯è¦æ±å¨ coinbase data ä¸­å¿é¡»åå«åé«åº¦ï¼Block Heightï¼ä¿¡æ¯ä¸å°åçæ¬ï¼Block versionï¼ä» 1 ä¿®æ¹ä¸º 2ã\n\næ¾ç¶å¨æ§è§åä¸ï¼èç¹å¹¶ä¸å³å¿ coinbase data æ¯ä»ä¹åå®¹ï¼å®å¨å¯ä»¥å¼å®¹åå«åé«åº¦ä¿¡æ¯çåºåï¼æä»¥ä¸ä¼å°±æ­¤äº§çååã\n\nBIP-34 çåçº§è¿ç¨å¦ä¸ï¼\n\n * åå¼å§ç¿å·¥å°åçæ¬å·åä¸º2ä»¥è¡¨ç¤ºåå¤å¥½è¿è¡åçº§ï¼æ­¤æ¶å¹¶ä¸è¦æ± coinbase data å¿é¡»åå«åé«åº¦ä¿¡æ¯ã\n * å½æè¿ 1000 ä¸ªåºåä¸­è¶è¿ 75% ççæ¬å·ä¸º 2æ¶ï¼æ´ä¸ªç³»ç»å¼å§å¼ºå¶è¦æ±çæ¬å·ä¸º 2 çåºå coinbase data ä¸­å¿é¡»åå«åé«åº¦ä¿¡æ¯ãä½çæ¬å·ä¸º 1 çåºåä»ç¶è¢«ææèç¹æ¥åã\n * å½æè¿ 1000 ä¸ªåºåä¸­è¶è¿ 95% ççæ¬å·ä¸º 2 æ¶ï¼çæ¬å·ä¸º 1 çåºåå¼å§è¢«è®¤ä¸ºæ æï¼èç¹ä¼æç»çæ¬å·ä¸º 1 çåºåï¼äºæ¯ä¼é¼è¿«æåä¸å°é¨åèç¹è¿è¡åçº§ãï¼å¦åå®ææç¿è·å¾çå¥å±å°å¤±å»ä»·å¼ï¼ã\n\n 2. P2SHï¼Pay to Script Hash\n\nP2SHï¼Pay to Script Hashï¼ å½¢å¼çäº¤æèæ¬ï¼æå¼å§çæ¯ç¹å¸ç³»ç»ä¸­æ¯æ²¡æçï¼æ¯åæ¥éè¿è½¯ååçæ¹å¼å è¿å»çãP2SH ä¼æ redeem script çåå®¹å¨ç¬¬äºé¶æ®µæ§è¡ï¼è¿ä¸ªè¿ç¨æ§èç¹è®¤ä¸ºæ¯åæ³çï¼å ä¸ºæ§èç¹åªä¼éªè¯ç¬¬ä¸é¶æ®µã\n\nè½¯ååæä¾äºä¸ç§éæ­¥åçº§æ¯ç¹å¸çæ¹å¼ï¼é¤äº BIP-34ï¼è¿æ BIP-65ãBIP-66ãBIP-9 ç­ç¹æ§è¿è¡äºè½¯åååçº§ã\n\n> soft fork: åªè¦ç³»ç»ä¸­æ¥æåæ°ä»¥ä¸ç®åèç¹æ´æ°è½¯ä»¶ï¼ç³»ç»å°±ä¸ä¼äº§çæ°¸ä¹æ§ååã hard fork: å¿é¡»ç³»ç»ä¸­ææèç¹æ´æ°è½¯ä»¶ï¼ç³»ç»æä¸ä¼äº§çæ°¸ä¹æ§ååã\n\n\n# BTC é®ç­\n\n 1. è½¬è´¦äº¤ææ¶åï¼å¦ææ¥æ¶èä¸å¨çº¿(æ²¡æè¿å¨æ¯ç¹å¸ç½ç»ä¸)æä¹åï¼\n\n> è½¬è´¦äº¤æåªéè¦å¨åºåé¾ä¸è®°å½ï¼å°æè´¦æ·æ¯ç¹å¸è½¬å°å¦ä¸è´¦æ·ï¼èæ¥æ¶æ¹æ¯å¦å¨çº¿å¹¶æ å½±åã\n\n 2. åè®¾æå¨èç¹æ¶å°æä¸ªè½¬è´¦äº¤æï¼ä¼ä¸ä¼æå¯è½è½¬è´¦äº¤æä¸­æ¶æ¬¾äººå°åè¯¥å¨èç¹ä»æªå¬è¿ã\n\n> å¯è½ï¼å ä¸ºæ¯ç¹å¸è´¦æ·åªéè¦æ¬å°äº§çå³å¯ãåªæè¯¥è´¦æ·ç¬¬ä¸æ¬¡æ¶å°é±æ¶ï¼å¶ä»èç¹æè½ç¥éè¯¥èç¹çå­å¨ã\n\n 3. å¦æè´¦æ·ç§é¥ä¸¢å¤±æä¹åï¼\n\n> æ²¡æåæ³ãå ä¸ºæ¯ç¹å¸æ¯å»ä¸­å¿åè´§å¸ï¼æ²¡æç¬¬ä¸æ¹ä¸­å¿æºæå¯ä»¥éç½®å¯ç ï¼æä»¥è´¦æ·ä¸çé±ä¹å°±åæäºæ­»é±ã éè¿å å¯è´§å¸äº¤ææ(ä¸­å¿åæºæ)ï¼ä¸è¬éè¦æä¾èº«ä»½è¯æï¼å¦æå¿è®°ç§é¥å¯ä»¥æ¾äº¤ææç³è¯·è¿½åç§é¥ãä½ç®åè¿ç±»è´§å¸çäº¤ææï¼å°ä¸å¤äºç¼ºå°çç®¡çç¶æï¼å¹¶ä¸ä¸å®å·æå¯ä¿¡åãèä¸ï¼å¶æ¬èº«ä»èµ·å°âä¸­ä»âä½ç¨ï¼ä¸è¯¥æé®çåç­âç§é¥ä¸¢å¤±æ æ³è¿½åéé¢çæ¯ç¹å¸âå¹¶ä¸å²çªã å¨åå²ä¸ï¼æå¾å¤æ¬¡äº¤ææè¢«é»å®¢æ»å»å·èµ°å¤§éå å¯è´§å¸çäºæï¼å¶ä¸­æèåçä¸º Mt. GOXï¼ä¸­æè¯ä¸ºï¼é¨å¤´æ²ï¼äºä»¶ãè¯¥äº¤æææ¾ç»ä¸ºå¨çæå¤§æ¯ç¹å¸äº¤ææï¼äº¤æéå å°å¨çæ¯ç¹å¸äº¤æéç 70% å·¦å³ï¼è®¾äºæ¥æ¬ãåæ¥ç±äºè¢«æ»å»ä¸¢å¤±å¤§éæ¯ç¹å¸ï¼å¯¼è´äº¤ææç ´äº§ï¼å¶ CEO è¢«å¤åå¥ç±ã\n\n 4. ç§é¥æ³é²æä¹åï¼\n\n> å°½å¿«å°å©ä½BTCè½¬å°å¶ä»å®å¨è´¦æ·ä¸ï¼æ²¡æç¬¬ä¸æ¹ä¸­å¿æºæéç½®å¯ç æå»ç»è´¦æ·ï¼åªè½èªå·±å¯¹èªå·±è´è´£ãBTCç³»ç»ä¸­è´¦æ·ä¾¿æ¯å¬ç§é¥å¯¹ï¼å¯ç å°±æ¯ç§é¥ï¼æ æ³æ´æ¹ã\n\n 5. è½¬è´¦åéå°åæä¹åï¼\n\n> æ²¡æåæ³ï¼åªè½èªè®¤åéï¼æ æ³åæ¶å·²ç»åå¸çäº¤æãå¦æè½¬å¥ä¸å­å¨å°åï¼åè¯¥é¨åæ¯ç¹å¸ä¾¿æä¸ºäºæ­»é±ãå½ç¶ï¼æ¯ç¹å¸ç³»ç»ä¸­ UTXO ä¼æ°¸ä¹ä¿å­è¯¥äº¤æï¼è®°å½è¯¥å¹¶ä¸å­å¨çå°åãå æ­¤å¯¹å¨èç¹æ¥è¯´è¿æ¯ä¸åå¥½çã\n\n 6. ä¹åå¨ BTC èæ¬ä¸­ä»ç»äº OP_RETURN æä»¤ï¼æä»¬æå°ï¼è¿ç§æ¹æ³ä¸ºæ®éç¨æ·æä¾äºä¸ä¸ªåæ¯ç¹å¸ç½ç»ä¸­åå¥æ³è¦ä¸ç´ä¿å­çåå®¹ãä½OP_RETURN æ§è¡ç»ææ¯æ æ¡ä»¶è¿åéè¯¯ï¼èäº¤æè¿åéè¯¯ï¼åºååæä¹ä¼åå«å®ï¼åºåé¾åå¦ä½ä¼æ¥æ¶è¿ä¸ªåºåï¼\n\n> å®éä¸è¦æ³æ¸æ¥ï¼OP_RETURN æ¯åå¨åªéçãOP_RETURN å®éåå¨å½åäº¤æçè¾åºèæ¬ä¸­ï¼èéªè¯äº¤æåæ³æ§æ¶ï¼ä½¿ç¨çå½åäº¤æçè¾å¥èæ¬ååä¸ä¸ªäº¤æ(å¸æ¥æºçäº¤æ)çè¾åºèæ¬è¿è¡éªè¯ãä¹å°±æ¯è¯´ï¼éªè¯å½åäº¤æåæ³æ§æ¶ï¼å¹¶ä¸ä¼æ§è¡è¯¥è¯­å¥ãåªæå¨æäººæ³è±è¿ç¬é±æ¶åï¼æä¼æ§è¡è¯¥è¯­å¥ã\n\n 7. BTCç³»ç»æç¿ï¼ä¼ä¸ä¼æç¿å·¥âå·âç­æ¡ï¼ä¾å¦ï¼æä¸ªç¿å·¥åç°å¶ä»ç¿å·¥åå¸äºnonceï¼æ¶å°åéªè¯è¯¥åºååæ³ï¼å°è¯¥nonceä½ä¸ºèªå·±æ¾å°çnonceåå¸åºå»ã\n\n> å®éä¸è¿æ¯ä¸å¯è½çãåå¸çåºåä¸­åå«é¸å¸äº¤æï¼å¶æ¶æ¬¾äººå°åä¸ºæå°ç¿çç¿å·¥å°åï¼å¦æè¦å·ç­æ¡ï¼éè¦ä¿®æ¹è¯¥æ¶æ¬¾å°åï¼èå°åæ¹åï¼é¸å¸äº¤æåå®¹ä¹åçæ¹åï¼ä»èå¼å Merkle Tree æ ¹åå¸å¼æ¹åãä»èå¯¼è´åæ¬ç nonce ä½åºã\n\n 8. äº¤æè´¹æ¯äº¤æèä¸ºäºèªå·±äº¤æå¯ä»¥ä¸é¾èç»åºçâå°è´¹âï¼é£ä¹å¦ä½å¾ç¥åªä¸ªç¿å·¥å¯ä»¥æå°ç¿ï¼\n\n> äºåæ éç¥éè°ä¼æå°ç¿ï¼äº¤æä¸­æ»è¾å¥åæ»è¾åºå·®é¢å°±æ¯äº¤æè´¹ãåªä¸ªç¿å·¥æå°ç¿ï¼å¨æåäº¤ææ¶ï¼å¯ä»¥å°è¿äºäº¤æè´¹æ¶éèµ·æ¥ä½ä¸ºèªå·±è·å¾çäº¤æè´¹ã\n\n\n# BTC å¿åæ§\n\nä¸è¬æ¥è¯´,å¿åæ§å¤ä¸éç§ä¿æ¤ç¸å³ãä½å®éä¸ï¼æ¯ç¹å¸ä¸­çå¿åå¹¶éçæ­£çå¿åãå®éä¸æ¯ç¹å¸ä¸çº¸å¸ç¸æ¯ï¼çº¸å¸çå¿åæ§æ´å¥½ï¼å ä¸ºå¶å¹¶æ²¡æå¯¹ä¸ªäººä¿¡æ¯çæ è®°ãä¹æ­£æ¯å ä¸ºå¶å¿åæ§ï¼å¾å¤éæ³äº¤æéç¨ç°éäº¤æã\n\nå®éä¸ï¼æ¯ç¹å¸ä¸­çæ°æ®æ¯å®å¨å¬å¼çï¼èç½ä¸çäº¤ææ¯è¦ä¸å®ä½ä¸çè¿è¡äº¤æçï¼æä»¥å¤§å¤§ç ´åäºå¶å¿åæ§ãåå¦é¶è¡åè®¸ç¨åå(ä»¥åçå­ææ¶ä»£)ï¼ç±äºé¶è¡æ°æ®å¹¶éå¬å¼ï¼æä»¥é¶è¡ç³»ç»çå¿åæ§æ¯è¦æ¯æ¯ç¹å¸æ´å¥½çã\n\n\n# BTC ä»ä¹æåµä¼ç ´åå¶å¿åæ§\n\n 1. ç¨æ·å¯ä»¥çæå¤ä¸ªå°åè´¦æ·ï¼ä½è¿äºå°åè´¦æ·å¯ä»¥è¢«å³èèµ·æ¥\n\nä¾å¦å¦ä¸è¿ä¸ªäº¤æï¼\n\n> å¨å¾ä¸­å¯ä»¥çå°è¯¥äº¤ææ 2 ä¸ªè¾å¥å 2 ä¸ªè¾åºï¼æä»¥ addr1 å addr2 å¾å¯è½æ¯åä¸ä¸ªäººæææçè´¦æ·ï¼å ä¸ºè¯¥äººåæ¶æ¥æè¿ä¸¤ä¸ªç§é¥çå°åã(ä¸ä¸ªè´¦æ·ä¸­çé±å¯è½ä¸å¤)èå¨è¾åºä¸­ï¼å¾æå¯è½æä¸ä¸ªå°åæ¯å±äºæ¾é¶é±çå°åï¼å³è±æä¹åå©ä½çé±ãå¨æäºæåµä¸ï¼ä¹æ¯å¯ä»¥åæåºæ¥çãaddr4 å¾ææ¾æ¯æ¾é¶é±çå°åï¼èéaddr3(æ¯ä»6ä¸ªæ¯ç¹å¸ï¼åä¸ªè´¦æ·ä¸å¤ç¨ï¼æä»¥ç¨ä¸¤ä¸ªè´¦æ·)ã\n\n 2. å°åè´¦æ·ä¸ä¸ªäººå¨çå®ç¤¾ä¼ä¸­çèº«ä»½ä¹å¯è½ä¼äº§çå³è\n\nä»»ä½ä½¿å¾BTCåå®ä½ä¸çä¸­å³èçæä½é½æå¯è½æ³é²ç¨æ·çå®èº«ä»½ï¼å¶ä¸­æææ¾çå°±æ¯èµéçè½¬å¥è½¬åºãè¦å¾å° BTCï¼å¦æç¨é±ä¹°ï¼å°±ä¼ä¸å®ä½ä¸çè¿è¡äº¤äºãæ³è¦å° BTC è½¬ä¸ºç°å®ä¸­çè´§å¸ï¼ä¹åæ ·éè¦ä¸å®ä½ä¸çäº¤äºã\n\nå¦ä½é²èä¸æ³åå­éç¨ BTC è¿è¡æ´é±å¢ï¼å¶å®åªéè¦ç¯ä½èµéè½¬å¥è½¬åºé¾å³å¯ãå¯¹äºå¤§é¢èµéè½¬å¥ BTC æå°å¤§é BTC è½¬ä¸ºç°å®è´§å¸ï¼å¾é¾éé¿å¸æ³éèæºæççç®¡ã\n\n 3. BTC æ¯ä»\n\n> ä¾å¦æäºåå®¶æ¥åç¨ BTC è¿è¡æ¯ä»ï¼ä¾å¦å¯ä»¥ç¨ BTC è´­ä¹°åå¡ãèç³ç­ã(ä½æ¯ç¨ BTC äº¤æå»¶è¿é«ï¼äº¤æè´¹è´µï¼å¹¶éä¸ä¸ªå¥½çidea)å¨è¿è¡æ¯ä»æ¶åï¼ä¾¿åä¸ªäººè´¦æ·å»ºç«äºèç³»ï¼ä»èä¼æ³é²æä¸ªäººä¿¡æ¯ã\n\nä¹å°±æ¯è¯´ï¼BTC å¹¶ä¸æ¯å·æå¾å¥½çå¿åä¿¡ãå®éä¸­å¾å¤äººä¿ææè¾å¥½çå¿åæ§ãä¿ææå¥½çä¾¿æ¯å¶å¼åèä¸­æ¬èªï¼å¶åä¸ BTC æ¶é´æé¿ï¼å¨ä¸çé½æ³ç¥éä»æ¯è°ãä½å®éä¸ï¼ä¸­æ¬èªçæ¯ç¹å¸å¹¶éæè±åºå»ï¼è¿ä¹ä½¿å¾æä»¬é¾ä»¥åç°ä»å·ä½æ¯è°ã\n\nä»¥åç¾å½æä¸ä¸ª skil road ç½ç«ï¼ä¸»è¦ç¨äºå¿åæ¯ä»ï¼éç¨åç±»å¯ä»¥èº²é¿çç®¡çæ¹æ³(å ä¸ºå®åçé½æ¯è¿ç¦å)ãä½è¿è¡æ²¡æå å¹´å°±è¢«æ¥å°ï¼å¶èæ¿å½æ¶èµåäºè®¸å¤æ¯ç¹å¸ï¼ä½ç±äºå¶æå¿è¢«åç°ï¼è¿äºé±å®éä¸­ä¸ä¸ªé½ä¸æ¢è±ï¼ä»ç¶è¿çæ¯éå¸¸ç®æ´ççæ´»ãæç»æ®è¯´ç±äºå¨åä¸çµèä¸ç»å½ç°å®ç¤¾ä¼è´¦æ·åéæ³ç½ç«ä¸è´¦æ·ï¼ä»èè¢«æã\n\n\n# å¦ä½æé«å¿åæ§\n\n> ä»åºç¨å±çï¼å¯ä»¥å°åä¸ªä¸åç¨æ·ç BTC æ··åå¨ä¸èµ·ï¼ä½¿å¾è¿½æ¥åå¾æ··ä¹±(Coin mixing) ä»ç½ç»å±çï¼ä»èç¹ä¸ ip å°åå¯ä»¥æ¨ç®åºçå®èº«ä»½ï¼æä»¥å¯ä»¥éç¨å¤è·¯å¾è½¬åçæ¹æ³ï¼æ°æ®ä¸ç´æ¥åéåºå»ï¼èæ¯ç»è¿å¾å¤è·³(æ´è±è·¯ç±çåºæ¬ææ³)ã\n\nå®éä¸æ­£å ä¸º BTC çå¬å¼æ§åä¸å¯ç¯¡æ¹æ§ï¼æå¯¼è´éç§æ§ä¼æä¸å®çé®é¢ã\n\n\n# é¶ç¥è¯è¯æ\n\né¶ç¥è¯è¯ææ¯æä¸æ¹ï¼è¯æèï¼é¡¹å¦ä¸æ¹ï¼éªè¯èï¼è¯æä¸ä¸ªéè¿°æ¯æ­£ç¡®çï¼èæ ééé²è¯¥éè¿°æ¯æ­£ç¡®çå¤çä»»ä½ä¿¡æ¯ã\n\n> ä¾å¦è¯ææä¸ªæ¯ç¹å¸è´¦æ·æ¯æçï¼ä¸è½æ³é²ç§é¥ï¼ï¼é£ä¹å°±ç¨ç§é¥äº§çä¸ä¸ªç­¾åï¼å¤§å®¶ç¨æçå¬é¥æ¥éªè¯ãä½æ¯å ä¸ºåè¯å«äººäºå¬é¥ï¼æä»¥æäºè®®è¿ç§æ¹å¼æ¯ä¸æ¯é¶ç¥è¯è¯æã\n\n\n# åæéè\n\n\n\n> ä¾å¦ï¼Alice æ³è¦å Bob è¯æå¥¹ç¥éä¸ç»æ° x å y ä½¿å¾ x + y = 7ï¼åæ¶ä¸åè®© Bobï¼ç¥é x å y çå·ä½æ°å¼\n\n\n\n\n# ç²ç­¾æ¹æ³\n\nå¨åé¢çè¯¾ç¨ä¸­è¯´å°ï¼å¤®è¡ä¼ç»´æ¤ä¸ä¸ªä¸­å¿åçæ°æ®åºæ¥è®°å½æ¯ä¸ç¬é±æ¯å¦è±åºå»ï¼æ¥é²æ­¢åè±ï¼é£ä¹ä½ çæ¯ä¸ç¬äº¤æå¤®è¡é½ä¼ç¥éãé£ä¹ææ²¡æä¸ç§åæ³æ¢ç¶å¤®è¡åä¸­å¿åçè®°è´¦ï¼åä¸è®©å®ç¥éäº¤æçä¿¡æ¯å¢ã\n\n\n\n\n# é¶å¸åé¶é\n\n\n\nä¸å¸¸ç¨çåå ï¼\n\n 1. btc çå¿åæ§å·²ç»å¤ç¨äºï¼å¤§å®¶ä¸æ¿æä¸ºäºå¿åæ§èå»ç¨ä¸ç§æ°çå¸ã\n 2. é¶å¸åé¶éè¿ç¨äºå¯ç å­¦åæ°å­¦çç¥è¯æ¥å¢å¼ºå¿åæ§ï¼å®ç°åä½¿ç¨èµ·æ¥æ¯è¾å¤æã\n 3. å½ä¸ç°å®äº¤äºçæ¶åé¶å¸åé¶éä¹æ æ³ä¿è¯100%å¿åã\n\n\n# BTC æè\n\n\n# åå¸æé\n\nBTC ç³»ç»ä¸­å¾å¤å°æ¹ä½¿ç¨å°äºåå¸æéãæéä¿å­çæ¬å°åå­å°åï¼åªæå¨æ¬å°è®¡ç®æºä¸æå·ææä¹ï¼å¦æåéç»å¶ä»è®¡ç®æºå°±æ²¡ææä¹äºãé£ä¹å¨åºååå¸æ¶åï¼åå¸æéå¦ä½éè¿ç½ç»è¿è¡ä¼ æ­ï¼\n\n> æè°åå¸æéï¼åªæ¯ç³»ç»ä¸­ä¸ç§å½¢è±¡åçæ¹æ³ãå®éåºç¨æ¶åï¼åªæåå¸èæ²¡ææéãåé¡¾ä¹åæè¿çBlock headeræ°æ®ç»æï¼æä¸ä¸ªå­æ®µåä¸ä¸ªåºåçåå¸å¼ã å æ­¤å¯è§ï¼å¨ block header ä¸­åªæ hash å¼ï¼æ²¡ææéãé£ä¹å¦ä½æ¥æ¾å°åä¸ä¸ªåºåçåå®¹ï¼ å¨èç¹ä¸è¬å°åºåå­å¨äºä¸ä¸ª key-value æ°æ®åºä¸­ï¼key ä¸ºåå¸ï¼value ä¸ºåºååå®¹ãå¸¸ç¨ç key-value æ°æ®åºä¸º levelDBï¼åªè¦ææ¡å°æåä¸ä¸ªåºåçåå¸å¼å³å¯ä¾æ®åå¸å¼ä¸ç´å¾åæ¾å°åºåé¾ææåå®¹ãæäºèç¹åªä¿å­åºåé¾é¨åä¿¡æ¯ï¼å¦æéè¦ç¨å°åé¢çåºåï¼å¯ä»¥é®å¶ä»èç¹è¦ãåå¸æéæ§è´¨ä¿è¯äºæ´ä¸ªåºåé¾åå®¹æ¯ä¸å¯ç¯¡æ¹çã\n\n\n# åºåãæã\n\nææä¾£ä¸èµ·ä¹° BTCï¼å°ç§é¥ä»ä¸­æªæ­ï¼æ¯äººä¿çå¶ä¸­ä¸é¨åãå¦ææªæ¥ä¸¤äººä¾æ§ææå¾å¥½ï¼å°±å¯ä»¥å°é±ååºï¼å¦æåæï¼è¿é¨åé±å°±ä¼æ°¸ä¹éæ­»ï¼è°ä¹æ æ³ååºï¼éè¿åºåé¾çä¸å¯ç¯¡æ¹æ§ä½ä¸ºä¸¤äººçç±æè§è¯ãè¿æ ·åæä»ä¹é®é¢ï¼ å¦æ­¤ä¸æ¥ï¼N ä¸ªäººæä¹åï¼ å¦ææç§è¿ç§æ¹æ³ï¼å°ç§é¥åä¸º N ä»½ãä½è¿æ ·ä¼æä¸ç³»åé®é¢ã\n\n 1. å¦æNä¸ªäººä¸­ä»»æä¸ä¸ªäººå¿è®°ç§é¥ï¼åæ æ³å°é±ååºã\n 2. æªæ­ç§é¥é¿åº¦ï¼ä¼éä½å®å¨æ§ï¼å ä¸ºç§é¥é¿åº¦ä¼ç´æ¥å½±åç ´è§£é¾åº¦(2^256è¿è¿å¤§äº2^128)ï¼ä¹é´é¾åº¦å·®è·è¿è¿ä¸æ­¢ä¸åã(å¯è§ï¼å¯¹äºå¤ä¸ªäººè´¦æ·ï¼åºè¯¥ä½¿ç¨å¤éç­¾åï¼èéæªæ­ç§é¥çæ¹æ³ã)\n 3. å¦æåæï¼è¯¥é±åææ­»é±ï¼ä¸ç´ä¿å­å¨UTXOéåä¸­ï¼å¯¹ç¿å·¥ä¸åå¥½ã\n\n\n# åå¸å¼å±è¯\n\nä¹åææåï¼çè®ºä¸æ¥è¯´ï¼åå¸å¼ç³»ç»ä¸å¯è½è¾¾æå±è¯ãä½å®éä¸­ä¸ºä½åæå¯è½äºï¼ä¸¥æ ¼æ¥è¯´ï¼BTCç³»ç»çå±è¯éæ¶å¯è½è¢«æ¨ç¿»ï¼ä¾å¦ååæ»å»å¯¼è´ç³»ç»åæ»ãæ­¤å¤ï¼çè®ºåå®éå­å¨å·®å¼ãä¸å¯è½ç»è®ºéå¯¹ç¹å®æ¨¡åï¼å®éä¸­å¯¹æ¨¡åç¨å¾®ä¿®æ¹ææ·»å çº¿ä¸æ¹æ³å³å¯å°ä¸å¯è½åä¸ºå¯è½ã\n\nç¥è¯æ¹åå½è¿ï¼è¿å¥è¯æ¬èº«æ²¡æéï¼ä½æ¯å¯¹ç¥è¯çä¸ç¥åè§£å¯è½è®©ä½ çå½è¿åå¾æ´å·®ï¼æç§ç æ¯å¾ææä¹çï¼ä½æ¯ä¸è¦ç»å­¦æ¯ççæç»´éå¶å¤´èï¼ä¸è¦ä¸ºç¨åºåçæç»´éå¶æ³è±¡åã\n\n\n# BTC ç¨ç¼ºæ§\n\nä¸ºä»ä¹è¦æç¿ï¼å ä¸ºææ¶çï¼ä¸æ¶çå¤§äºå¼éãæ©æ BTC é¾åº¦ä½ä¸åºåå¥å±é«ï¼ä»èå¸å¼ç¿å·¥ã ä¹åææå°ï¼BTC æ»éåºå®ï¼æäººè®¤ä¸ºå¶æ¯ä¸ä¸ªç²¾å¦çè®¾è®¡ãä½å®éä¸ï¼æ»éåºå®çä¸è¥¿å¹¶ä¸éåä½ä¸ºè´§å¸ï¼è¿ä¹å°±å³å®äº BTC å¹¶ä¸è½å¨æªæ¥å®å¨é¢ è¦ç°æè´§å¸ä½ç³»ãä»¥å¤ªåä¸­ä¾¿æ²¡æ BTC ä¸­åºåå¥å±å®æååçåæ³ï¼æ­¤å¤ï¼æäºæ°åè´§å¸ä¼èªå¸¦éè´§è¨èçåè½ã å¯¹ä¸ªäººæ¥è¯´ï¼éè´§è¨èå¹¶éå¥½äºï¼å ä¸ºé±ä¸å¼é±äºãä½äººç±»æ¯å¹´åé çä»·å¼ï¼å¦æç¨æ»éåºå®çä¸è¥¿ä½ä¸ºè´§å¸ï¼åå¶åªä¼è¶æ¥è¶å¼é±ï¼èè¿ä¼å¯¼è´æ¥æèä¸æ­ççå¶åå¼ï¼å¶ä»æ²¡æçäººæ è®ºå¦ä½å¥æé½èµ¶ä¸ä¸ï¼æ¿ä»·ä¹æ¯å¦æ­¤ï¼çæ¿ä½¿ä¸é¨åäººé æ¿ç§ä¾¿å¯å¤§èµç¹èµï¼ä¸ªäººå¥æå´å¾é¾ä¹°æ¿ãè¿ä¹æ¯æå½ç®åå­å¨çè¾å¤§çé®é¢ï¼ç¤¾ä¼è´¢å¯çåéä¸å¬ï¼æç»å¼ååç§ç¤¾ä¼çç¾ï¼ã\n\n\n# éå­è®¡ç®\n\nä¼ä¸ä¼ BTC è¿ç§å»ºç«å¨å¯ç å­¦ä¸çå å¯è´§å¸ï¼å¨éå­è®¡ç®åºæ¥åä¼ä¸ä¼åå¾ä¸å®å¨ã\n\n 1. éå­è®¡ç®è·ç¦»ä½¿ç¨ä»ç¶æå¾é¿è·ç¦»ã\n 2. éå­è®¡ç®è¥çæ­£ä½¿ç¨å°ç ´åç°æå å¯ç®æ³ï¼å¯¹ä¼ ç»éèä¸çç ´åææ¯æå¤§çï¼ç½ä¸é¶è¡ç½ä¸è½¬è´¦é½ä¸å®å¨äºã\n 3. BTC å®éä¸­ä½¿ç¨çå¹¶éå¬é¥ï¼èæ¯ç¨å¬é¥åå¸ãèåå¸å½æ°ä¸è¬é½æ¯ä¸å¯éçï¼å°±ç®éå­è®¡ç®å¯ä»¥ä»å¬é¥æ¨åºç§é¥ï¼ä½æ¯å³ä½¿ç¥éäºå¬é¥åå¸éå­è®¡ç®ä¹æ æ³åæ¨å¬é¥ãå å¯ååå¸ä¸æ¯ä¸åäºï¼å å¯è¿ç¨è¦ä¿è¯ä¿¡æ¯ä¸ä¸¢å¤±å»ï¼ä½æ¯ååå¸ä¼ä¸¢å¤±ä¸äºä¿¡æ¯ãBTC ä¸­ç¨ç SHA-256ï¼æ è®ºè¾å¥å¤å¤§ï¼æç»ç»æé½ä¸º 256 ä½ï¼å¿ç¶ä¼å¯¼è´ä¿¡æ¯ä¸¢å¤±ï¼æ æ³åæ¨åæ¬æ°æ®ãå¦æè½åæ¨æ°æ®ï¼é£ä¹è¿å°æä¸ºåææªæçåç¼©ç®æ³ï¼ææ´ä¸ªå¾ä¹¦é¦çæ°æ®ä½ä¸ºè¾å¥åç¼©ä¸º 256 ä½ï¼åä» 256 ä½åæ¨åºå¾ä¹¦é¦ä¿¡æ¯è¿æ¯ä¸å¯è½çï¼ã",normalizedContent:"# åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  4\n\n * å­¦ä¹ å°åï¼https://www.bilibili.com/video/bv1vt411x7jf\n\n\n# btc åå\n\n\n# state fork\n\nå¦æä¸¤ä¸ªèç¹å·®ä¸å¤åæ¶æå°ä¸ä¸ªåºåï¼è¿ä¸¤ä¸ªåºåé½æ¯æå¨å½åçåºåä¸çï¼ä¸åèç¹åæ¶å°çåºåä¸åï¼å°±ä¼åèªæ²¿çåæ¶å°çåºåå¾ä¸æ©å±ï¼è¿ç§æ¶åå°±ä¼åºç°ä¸´æ¶æ§çååï¼ç§°ä¸ºstate forkï¼å³ç±äºå¯¹åºåé¾å½åçç¶æææè§åæ­§èäº§ççååã\n\nååæ»å»ï¼forking attackï¼ä¹å±äºstate forkï¼åªä¸è¿è¿ç§æè§åæ­§æ¯äººä¸ºé æçï¼è¿ç§æåµä¹ç§°ä¸º deliberate forkã\n\n\n# protocol fork\n\nè¦ä¿®æ¹æ¯ç¹å¸åè®®éè¦è½¯ä»¶åçº§ï¼å¨å»ä¸­å¿åçç³»ç»ä¸­ï¼æ²¡åæ³è¦æ±ææçç»ç¹é½åçº§è½¯ä»¶\n\nåè®¾å¤§é¨åèç¹åçº§äºè½¯ä»¶ï¼å°é¨åèç¹æ²¡æåçº§ï¼å¯è½æ¯æ²¡æ¥å¾ååçº§ï¼ä¹å¯è½æ¯ä¸åæåè®®çä¿®æ¹ï¼ï¼è¿ç§ååç§°ä¸ºprotocol forkï¼å³å¯¹æ¯ç¹å¸åè®®äº§çäºåæ­§ï¼ä½¿ç¨ä¸åçæ¬çåè®®èäº§ççååã\n\nå¨ protocol fork ä¸­ï¼æ ¹æ®å¯¹åè®®ä¿®æ¹çåå®¹çä¸åï¼åå¯ä»¥åä¸ºç¡¬åååè½¯ååã\n\n# ç¡¬åå\n\nå¦æåºåé¾è½¯ä»¶çå±è¯è§åè¢«æ¹åï¼å¹¶ä¸è¿ç§è§åæ¹åæ æ³ååå¼å®¹ï¼æ§èç¹æ æ³è®¤å¯æ°èç¹äº§ççåºåï¼å³ä¸ºç¡¬ååã\n\n 1. æ¯ç¹å¸åå\n\nä¸äºäººå¼å§è§å¾æ¯ç¹å¸çåºåå®¹éå¤ªå°ï¼æ»åºç°æ¥å µï¼äºæ¯è¿äºäººè¦æ±å¯¹æ¯ç¹å¸çåºåå¤§å°è¿è¡åçº§æ©å®¹ãæäººæ¯æå°±æäººåå¯¹ï¼è¿ç§å¯¹æ¯ç¹å¸åå±çåæ­§å¯¼è´äºæ¯ç¹å¸é¦æ¬¡ç¡¬ååï¼æ§é¾ä¸çå¸ä»ç¶æ¯æ¯ç¹å¸ btc(åºåå®¹éè¾¾å°äº8m)ï¼æ°é¾ä¸çå¸æ¯ bchï¼bitcoin cashï¼æ¯ç¹å¸ç°éãåºåå®¹éè¾¾å°äº8mï¼ã\n\nbch å btc æå¤§çåºå«åªæ¯å¨äºåºåå®¹éçåæ°ä¸åï¼ä¸¤èåååçäº¤æé½æ¯ä¸æ ·çï¼åªæ¯äº¤æçå¸ç§ä¸ä¸æ ·ãå¯ä»¥çè§£ä¸º bch é£æ¡é¾æåååçåºåéçäº¤ææç§åæ¥çæ¹å¼éæ°è¿è¡äºä¸éï¼åªæ¯æå¸ç§ç±åæ¥ç btc æ¢æäº bchã\n\n 2. ä»¥å¤ªååå\n\nthe dao é¡¹ç®æ¯åºåé¾ç©èç½å¬å¸ slock.it åèµ·çä¸ä¸ªä¼ç­¹é¡¹ç®ï¼äº2016å¹´5ææ­£å¼åå¸ï¼æªæ­¢å°å½å¹´6æï¼the dao é¡¹ç®åéèµéè¶è¿ 1.6 äº¿ç¾åãæ²¡è¿å¤ä¹ï¼the dao é¡¹ç®å°±è¢«é»å®¢ç¯ä¸äºï¼å ä¸ºæºè½åçº¦ä¸çå·¨å¤§æ¼æ´ï¼å¯¼è´ the dao é¡¹ç®è¢«è½¬ç§»äºå¸å¼äºåä¸ç¾åçä»¥å¤ªå¸ã\n\nä¸ºäºæ½åä¼å¤æèµèçèµäº§å¹¶åæ­¢ææï¼ä»¥å¤ªååå§äººvç¥ï¼vitalik buterinï¼æåæåºç¡¬ååçè®¾æ³ï¼å¹¶æç»éè¿ç¤¾åºçå¤æ°æç¥¨è¡¨å³å¨ä»¥å¤ªåç¬¬ 1920000 åºåå®æäºç¡¬ååï¼åæ»äºåæ¬è¢«é»å®¢å æçææä»¥å¤ªå¸ãå³ä½¿ä»¥å¤ªåç¡¬ååæäºä¸¤æ¡é¾ï¼ä¾ç¶æé¨åä¿¡ä»°çåºåé¾ä¸å¯ç¯¡æ¹ç¹æ§çäººçå¨ä»¥å¤ªç»å¸è¿æ¡åé¾ä¸ã\n\nç®åçä»¥å¤ªå eth å°±æ¯ç¡¬ååä¹åçï¼åæ¥çé¾æ¯ etcãååä¹åï¼ç±äºä¸¤ä¸ªé¾ååé æäºäºç¸å½±åï¼äº§çäºå¾å¤éº»ç¦ãæ¯å¦ï¼å¨ eth é¾ä¸æä¸ç¬è½¬è´¦ b->cï¼æäººä¾¿å¨ etc é¾ä¸åæ¾ï¼å° etc é¾ä¸çè´§å¸é¡µè½¬ç»äº c(cæ¶å°ä¸¤ç¬é±)ãåæ¥ï¼å¯¹ä¸¤æ¡é¾åæ·»å äºä¸ä¸ª chainidï¼å°ä¸¤ä¸ªé¾åºåå¼ï¼æä½¿å¾è¿ä¸¤æ¡é¾çæ­£åå¼ã\n\n# è½¯åå\n\nå¦æåºåé¾çå±è¯è§åæ¹ååï¼è¿ç§æ¹åæ¯ååå¼å®¹çï¼æ§èç¹å¯ä»¥å¼å®¹æ°èç¹äº§ççåºåï¼å³ä¸ºè½¯ååã\n\nå®éä¸ï¼è½¯ååéå¸¸åå¼å§å¹¶ä¸ä¼äº§çä¸¤æ¡åºåé¾ï¼å ä¸ºæ°è§åä¸äº§ççåä¼è¢«æ§èç¹æ¥åï¼æ§èç¹åªæ¯æ æ³è¯å«æ°è§åççå®æä¹ãæä»¥æ°æ§èç¹ä»ç¶å¤äºåä¸æ¡åºåé¾ä¸ï¼å¯¹æ´ä¸ªç³»ç»çå½±åä¹å°±è¾å°ã\n\n 1. coinbase å\n\né¸å¸äº¤æä¸­ coinbase åãå¨ coinbase åä¸­åå¥ä»»ä½åå®¹é½å¯ä»¥ï¼æç¿æ¬è´¨æ¯è°æ´ block header ä¸­ç nonce ï¼ä½å¶æ¬èº«åªæ 4 ä¸ªå­èï¼æç´¢ç©ºé´å¤ªå°ãæä»¥å®éä½¿ç¨ä¸­ï¼å° coinbase åå 8 ä¸ªèªå·±ä½ä¸ºå¦ä¸ä¸ª extra nonceï¼æ­¤æ¶æç´¢ç©ºé´ä»åæ¬2^32 å¢é¿å° 2^96ï¼å¯¹äºç®åæç¿é¾åº¦æ¥è¯´å·²ç»è¶³å¤ãä½ coinbase ä¸­å¹¶ä¸æ¯åªæ8ä¸ªå­èï¼è¿å©ä¸å¾å¤ç©ºé´ã\n\ncoinbase äº¤æçè¾å¥ä¸­æä¸ä¸ªå­æ®µ coinbase data åå®¹å¯ä»¥ä»»æå®å¶ãbip-34 å°±æ¯è¦æ±å¨ coinbase data ä¸­å¿é¡»åå«åé«åº¦ï¼block heightï¼ä¿¡æ¯ä¸å°åçæ¬ï¼block versionï¼ä» 1 ä¿®æ¹ä¸º 2ã\n\næ¾ç¶å¨æ§è§åä¸ï¼èç¹å¹¶ä¸å³å¿ coinbase data æ¯ä»ä¹åå®¹ï¼å®å¨å¯ä»¥å¼å®¹åå«åé«åº¦ä¿¡æ¯çåºåï¼æä»¥ä¸ä¼å°±æ­¤äº§çååã\n\nbip-34 çåçº§è¿ç¨å¦ä¸ï¼\n\n * åå¼å§ç¿å·¥å°åçæ¬å·åä¸º2ä»¥è¡¨ç¤ºåå¤å¥½è¿è¡åçº§ï¼æ­¤æ¶å¹¶ä¸è¦æ± coinbase data å¿é¡»åå«åé«åº¦ä¿¡æ¯ã\n * å½æè¿ 1000 ä¸ªåºåä¸­è¶è¿ 75% ççæ¬å·ä¸º 2æ¶ï¼æ´ä¸ªç³»ç»å¼å§å¼ºå¶è¦æ±çæ¬å·ä¸º 2 çåºå coinbase data ä¸­å¿é¡»åå«åé«åº¦ä¿¡æ¯ãä½çæ¬å·ä¸º 1 çåºåä»ç¶è¢«ææèç¹æ¥åã\n * å½æè¿ 1000 ä¸ªåºåä¸­è¶è¿ 95% ççæ¬å·ä¸º 2 æ¶ï¼çæ¬å·ä¸º 1 çåºåå¼å§è¢«è®¤ä¸ºæ æï¼èç¹ä¼æç»çæ¬å·ä¸º 1 çåºåï¼äºæ¯ä¼é¼è¿«æåä¸å°é¨åèç¹è¿è¡åçº§ãï¼å¦åå®ææç¿è·å¾çå¥å±å°å¤±å»ä»·å¼ï¼ã\n\n 2. p2shï¼pay to script hash\n\np2shï¼pay to script hashï¼ å½¢å¼çäº¤æèæ¬ï¼æå¼å§çæ¯ç¹å¸ç³»ç»ä¸­æ¯æ²¡æçï¼æ¯åæ¥éè¿è½¯ååçæ¹å¼å è¿å»çãp2sh ä¼æ redeem script çåå®¹å¨ç¬¬äºé¶æ®µæ§è¡ï¼è¿ä¸ªè¿ç¨æ§èç¹è®¤ä¸ºæ¯åæ³çï¼å ä¸ºæ§èç¹åªä¼éªè¯ç¬¬ä¸é¶æ®µã\n\nè½¯ååæä¾äºä¸ç§éæ­¥åçº§æ¯ç¹å¸çæ¹å¼ï¼é¤äº bip-34ï¼è¿æ bip-65ãbip-66ãbip-9 ç­ç¹æ§è¿è¡äºè½¯åååçº§ã\n\n> soft fork: åªè¦ç³»ç»ä¸­æ¥æåæ°ä»¥ä¸ç®åèç¹æ´æ°è½¯ä»¶ï¼ç³»ç»å°±ä¸ä¼äº§çæ°¸ä¹æ§ååã hard fork: å¿é¡»ç³»ç»ä¸­ææèç¹æ´æ°è½¯ä»¶ï¼ç³»ç»æä¸ä¼äº§çæ°¸ä¹æ§ååã\n\n\n# btc é®ç­\n\n 1. è½¬è´¦äº¤ææ¶åï¼å¦ææ¥æ¶èä¸å¨çº¿(æ²¡æè¿å¨æ¯ç¹å¸ç½ç»ä¸)æä¹åï¼\n\n> è½¬è´¦äº¤æåªéè¦å¨åºåé¾ä¸è®°å½ï¼å°æè´¦æ·æ¯ç¹å¸è½¬å°å¦ä¸è´¦æ·ï¼èæ¥æ¶æ¹æ¯å¦å¨çº¿å¹¶æ å½±åã\n\n 2. åè®¾æå¨èç¹æ¶å°æä¸ªè½¬è´¦äº¤æï¼ä¼ä¸ä¼æå¯è½è½¬è´¦äº¤æä¸­æ¶æ¬¾äººå°åè¯¥å¨èç¹ä»æªå¬è¿ã\n\n> å¯è½ï¼å ä¸ºæ¯ç¹å¸è´¦æ·åªéè¦æ¬å°äº§çå³å¯ãåªæè¯¥è´¦æ·ç¬¬ä¸æ¬¡æ¶å°é±æ¶ï¼å¶ä»èç¹æè½ç¥éè¯¥èç¹çå­å¨ã\n\n 3. å¦æè´¦æ·ç§é¥ä¸¢å¤±æä¹åï¼\n\n> æ²¡æåæ³ãå ä¸ºæ¯ç¹å¸æ¯å»ä¸­å¿åè´§å¸ï¼æ²¡æç¬¬ä¸æ¹ä¸­å¿æºæå¯ä»¥éç½®å¯ç ï¼æä»¥è´¦æ·ä¸çé±ä¹å°±åæäºæ­»é±ã éè¿å å¯è´§å¸äº¤ææ(ä¸­å¿åæºæ)ï¼ä¸è¬éè¦æä¾èº«ä»½è¯æï¼å¦æå¿è®°ç§é¥å¯ä»¥æ¾äº¤ææç³è¯·è¿½åç§é¥ãä½ç®åè¿ç±»è´§å¸çäº¤ææï¼å°ä¸å¤äºç¼ºå°çç®¡çç¶æï¼å¹¶ä¸ä¸å®å·æå¯ä¿¡åãèä¸ï¼å¶æ¬èº«ä»èµ·å°âä¸­ä»âä½ç¨ï¼ä¸è¯¥æé®çåç­âç§é¥ä¸¢å¤±æ æ³è¿½åéé¢çæ¯ç¹å¸âå¹¶ä¸å²çªã å¨åå²ä¸ï¼æå¾å¤æ¬¡äº¤ææè¢«é»å®¢æ»å»å·èµ°å¤§éå å¯è´§å¸çäºæï¼å¶ä¸­æèåçä¸º mt. goxï¼ä¸­æè¯ä¸ºï¼é¨å¤´æ²ï¼äºä»¶ãè¯¥äº¤æææ¾ç»ä¸ºå¨çæå¤§æ¯ç¹å¸äº¤ææï¼äº¤æéå å°å¨çæ¯ç¹å¸äº¤æéç 70% å·¦å³ï¼è®¾äºæ¥æ¬ãåæ¥ç±äºè¢«æ»å»ä¸¢å¤±å¤§éæ¯ç¹å¸ï¼å¯¼è´äº¤ææç ´äº§ï¼å¶ ceo è¢«å¤åå¥ç±ã\n\n 4. ç§é¥æ³é²æä¹åï¼\n\n> å°½å¿«å°å©ä½btcè½¬å°å¶ä»å®å¨è´¦æ·ä¸ï¼æ²¡æç¬¬ä¸æ¹ä¸­å¿æºæéç½®å¯ç æå»ç»è´¦æ·ï¼åªè½èªå·±å¯¹èªå·±è´è´£ãbtcç³»ç»ä¸­è´¦æ·ä¾¿æ¯å¬ç§é¥å¯¹ï¼å¯ç å°±æ¯ç§é¥ï¼æ æ³æ´æ¹ã\n\n 5. è½¬è´¦åéå°åæä¹åï¼\n\n> æ²¡æåæ³ï¼åªè½èªè®¤åéï¼æ æ³åæ¶å·²ç»åå¸çäº¤æãå¦æè½¬å¥ä¸å­å¨å°åï¼åè¯¥é¨åæ¯ç¹å¸ä¾¿æä¸ºäºæ­»é±ãå½ç¶ï¼æ¯ç¹å¸ç³»ç»ä¸­ utxo ä¼æ°¸ä¹ä¿å­è¯¥äº¤æï¼è®°å½è¯¥å¹¶ä¸å­å¨çå°åãå æ­¤å¯¹å¨èç¹æ¥è¯´è¿æ¯ä¸åå¥½çã\n\n 6. ä¹åå¨ btc èæ¬ä¸­ä»ç»äº op_return æä»¤ï¼æä»¬æå°ï¼è¿ç§æ¹æ³ä¸ºæ®éç¨æ·æä¾äºä¸ä¸ªåæ¯ç¹å¸ç½ç»ä¸­åå¥æ³è¦ä¸ç´ä¿å­çåå®¹ãä½op_return æ§è¡ç»ææ¯æ æ¡ä»¶è¿åéè¯¯ï¼èäº¤æè¿åéè¯¯ï¼åºååæä¹ä¼åå«å®ï¼åºåé¾åå¦ä½ä¼æ¥æ¶è¿ä¸ªåºåï¼\n\n> å®éä¸è¦æ³æ¸æ¥ï¼op_return æ¯åå¨åªéçãop_return å®éåå¨å½åäº¤æçè¾åºèæ¬ä¸­ï¼èéªè¯äº¤æåæ³æ§æ¶ï¼ä½¿ç¨çå½åäº¤æçè¾å¥èæ¬ååä¸ä¸ªäº¤æ(å¸æ¥æºçäº¤æ)çè¾åºèæ¬è¿è¡éªè¯ãä¹å°±æ¯è¯´ï¼éªè¯å½åäº¤æåæ³æ§æ¶ï¼å¹¶ä¸ä¼æ§è¡è¯¥è¯­å¥ãåªæå¨æäººæ³è±è¿ç¬é±æ¶åï¼æä¼æ§è¡è¯¥è¯­å¥ã\n\n 7. btcç³»ç»æç¿ï¼ä¼ä¸ä¼æç¿å·¥âå·âç­æ¡ï¼ä¾å¦ï¼æä¸ªç¿å·¥åç°å¶ä»ç¿å·¥åå¸äºnonceï¼æ¶å°åéªè¯è¯¥åºååæ³ï¼å°è¯¥nonceä½ä¸ºèªå·±æ¾å°çnonceåå¸åºå»ã\n\n> å®éä¸è¿æ¯ä¸å¯è½çãåå¸çåºåä¸­åå«é¸å¸äº¤æï¼å¶æ¶æ¬¾äººå°åä¸ºæå°ç¿çç¿å·¥å°åï¼å¦æè¦å·ç­æ¡ï¼éè¦ä¿®æ¹è¯¥æ¶æ¬¾å°åï¼èå°åæ¹åï¼é¸å¸äº¤æåå®¹ä¹åçæ¹åï¼ä»èå¼å merkle tree æ ¹åå¸å¼æ¹åãä»èå¯¼è´åæ¬ç nonce ä½åºã\n\n 8. äº¤æè´¹æ¯äº¤æèä¸ºäºèªå·±äº¤æå¯ä»¥ä¸é¾èç»åºçâå°è´¹âï¼é£ä¹å¦ä½å¾ç¥åªä¸ªç¿å·¥å¯ä»¥æå°ç¿ï¼\n\n> äºåæ éç¥éè°ä¼æå°ç¿ï¼äº¤æä¸­æ»è¾å¥åæ»è¾åºå·®é¢å°±æ¯äº¤æè´¹ãåªä¸ªç¿å·¥æå°ç¿ï¼å¨æåäº¤ææ¶ï¼å¯ä»¥å°è¿äºäº¤æè´¹æ¶éèµ·æ¥ä½ä¸ºèªå·±è·å¾çäº¤æè´¹ã\n\n\n# btc å¿åæ§\n\nä¸è¬æ¥è¯´,å¿åæ§å¤ä¸éç§ä¿æ¤ç¸å³ãä½å®éä¸ï¼æ¯ç¹å¸ä¸­çå¿åå¹¶éçæ­£çå¿åãå®éä¸æ¯ç¹å¸ä¸çº¸å¸ç¸æ¯ï¼çº¸å¸çå¿åæ§æ´å¥½ï¼å ä¸ºå¶å¹¶æ²¡æå¯¹ä¸ªäººä¿¡æ¯çæ è®°ãä¹æ­£æ¯å ä¸ºå¶å¿åæ§ï¼å¾å¤éæ³äº¤æéç¨ç°éäº¤æã\n\nå®éä¸ï¼æ¯ç¹å¸ä¸­çæ°æ®æ¯å®å¨å¬å¼çï¼èç½ä¸çäº¤ææ¯è¦ä¸å®ä½ä¸çè¿è¡äº¤æçï¼æä»¥å¤§å¤§ç ´åäºå¶å¿åæ§ãåå¦é¶è¡åè®¸ç¨åå(ä»¥åçå­ææ¶ä»£)ï¼ç±äºé¶è¡æ°æ®å¹¶éå¬å¼ï¼æä»¥é¶è¡ç³»ç»çå¿åæ§æ¯è¦æ¯æ¯ç¹å¸æ´å¥½çã\n\n\n# btc ä»ä¹æåµä¼ç ´åå¶å¿åæ§\n\n 1. ç¨æ·å¯ä»¥çæå¤ä¸ªå°åè´¦æ·ï¼ä½è¿äºå°åè´¦æ·å¯ä»¥è¢«å³èèµ·æ¥\n\nä¾å¦å¦ä¸è¿ä¸ªäº¤æï¼\n\n> å¨å¾ä¸­å¯ä»¥çå°è¯¥äº¤ææ 2 ä¸ªè¾å¥å 2 ä¸ªè¾åºï¼æä»¥ addr1 å addr2 å¾å¯è½æ¯åä¸ä¸ªäººæææçè´¦æ·ï¼å ä¸ºè¯¥äººåæ¶æ¥æè¿ä¸¤ä¸ªç§é¥çå°åã(ä¸ä¸ªè´¦æ·ä¸­çé±å¯è½ä¸å¤)èå¨è¾åºä¸­ï¼å¾æå¯è½æä¸ä¸ªå°åæ¯å±äºæ¾é¶é±çå°åï¼å³è±æä¹åå©ä½çé±ãå¨æäºæåµä¸ï¼ä¹æ¯å¯ä»¥åæåºæ¥çãaddr4 å¾ææ¾æ¯æ¾é¶é±çå°åï¼èéaddr3(æ¯ä»6ä¸ªæ¯ç¹å¸ï¼åä¸ªè´¦æ·ä¸å¤ç¨ï¼æä»¥ç¨ä¸¤ä¸ªè´¦æ·)ã\n\n 2. å°åè´¦æ·ä¸ä¸ªäººå¨çå®ç¤¾ä¼ä¸­çèº«ä»½ä¹å¯è½ä¼äº§çå³è\n\nä»»ä½ä½¿å¾btcåå®ä½ä¸çä¸­å³èçæä½é½æå¯è½æ³é²ç¨æ·çå®èº«ä»½ï¼å¶ä¸­æææ¾çå°±æ¯èµéçè½¬å¥è½¬åºãè¦å¾å° btcï¼å¦æç¨é±ä¹°ï¼å°±ä¼ä¸å®ä½ä¸çè¿è¡äº¤äºãæ³è¦å° btc è½¬ä¸ºç°å®ä¸­çè´§å¸ï¼ä¹åæ ·éè¦ä¸å®ä½ä¸çäº¤äºã\n\nå¦ä½é²èä¸æ³åå­éç¨ btc è¿è¡æ´é±å¢ï¼å¶å®åªéè¦ç¯ä½èµéè½¬å¥è½¬åºé¾å³å¯ãå¯¹äºå¤§é¢èµéè½¬å¥ btc æå°å¤§é btc è½¬ä¸ºç°å®è´§å¸ï¼å¾é¾éé¿å¸æ³éèæºæççç®¡ã\n\n 3. btc æ¯ä»\n\n> ä¾å¦æäºåå®¶æ¥åç¨ btc è¿è¡æ¯ä»ï¼ä¾å¦å¯ä»¥ç¨ btc è´­ä¹°åå¡ãèç³ç­ã(ä½æ¯ç¨ btc äº¤æå»¶è¿é«ï¼äº¤æè´¹è´µï¼å¹¶éä¸ä¸ªå¥½çidea)å¨è¿è¡æ¯ä»æ¶åï¼ä¾¿åä¸ªäººè´¦æ·å»ºç«äºèç³»ï¼ä»èä¼æ³é²æä¸ªäººä¿¡æ¯ã\n\nä¹å°±æ¯è¯´ï¼btc å¹¶ä¸æ¯å·æå¾å¥½çå¿åä¿¡ãå®éä¸­å¾å¤äººä¿ææè¾å¥½çå¿åæ§ãä¿ææå¥½çä¾¿æ¯å¶å¼åèä¸­æ¬èªï¼å¶åä¸ btc æ¶é´æé¿ï¼å¨ä¸çé½æ³ç¥éä»æ¯è°ãä½å®éä¸ï¼ä¸­æ¬èªçæ¯ç¹å¸å¹¶éæè±åºå»ï¼è¿ä¹ä½¿å¾æä»¬é¾ä»¥åç°ä»å·ä½æ¯è°ã\n\nä»¥åç¾å½æä¸ä¸ª skil road ç½ç«ï¼ä¸»è¦ç¨äºå¿åæ¯ä»ï¼éç¨åç±»å¯ä»¥èº²é¿çç®¡çæ¹æ³(å ä¸ºå®åçé½æ¯è¿ç¦å)ãä½è¿è¡æ²¡æå å¹´å°±è¢«æ¥å°ï¼å¶èæ¿å½æ¶èµåäºè®¸å¤æ¯ç¹å¸ï¼ä½ç±äºå¶æå¿è¢«åç°ï¼è¿äºé±å®éä¸­ä¸ä¸ªé½ä¸æ¢è±ï¼ä»ç¶è¿çæ¯éå¸¸ç®æ´ççæ´»ãæç»æ®è¯´ç±äºå¨åä¸çµèä¸ç»å½ç°å®ç¤¾ä¼è´¦æ·åéæ³ç½ç«ä¸è´¦æ·ï¼ä»èè¢«æã\n\n\n# å¦ä½æé«å¿åæ§\n\n> ä»åºç¨å±çï¼å¯ä»¥å°åä¸ªä¸åç¨æ·ç btc æ··åå¨ä¸èµ·ï¼ä½¿å¾è¿½æ¥åå¾æ··ä¹±(coin mixing) ä»ç½ç»å±çï¼ä»èç¹ä¸ ip å°åå¯ä»¥æ¨ç®åºçå®èº«ä»½ï¼æä»¥å¯ä»¥éç¨å¤è·¯å¾è½¬åçæ¹æ³ï¼æ°æ®ä¸ç´æ¥åéåºå»ï¼èæ¯ç»è¿å¾å¤è·³(æ´è±è·¯ç±çåºæ¬ææ³)ã\n\nå®éä¸æ­£å ä¸º btc çå¬å¼æ§åä¸å¯ç¯¡æ¹æ§ï¼æå¯¼è´éç§æ§ä¼æä¸å®çé®é¢ã\n\n\n# é¶ç¥è¯è¯æ\n\né¶ç¥è¯è¯ææ¯æä¸æ¹ï¼è¯æèï¼é¡¹å¦ä¸æ¹ï¼éªè¯èï¼è¯æä¸ä¸ªéè¿°æ¯æ­£ç¡®çï¼èæ ééé²è¯¥éè¿°æ¯æ­£ç¡®çå¤çä»»ä½ä¿¡æ¯ã\n\n> ä¾å¦è¯ææä¸ªæ¯ç¹å¸è´¦æ·æ¯æçï¼ä¸è½æ³é²ç§é¥ï¼ï¼é£ä¹å°±ç¨ç§é¥äº§çä¸ä¸ªç­¾åï¼å¤§å®¶ç¨æçå¬é¥æ¥éªè¯ãä½æ¯å ä¸ºåè¯å«äººäºå¬é¥ï¼æä»¥æäºè®®è¿ç§æ¹å¼æ¯ä¸æ¯é¶ç¥è¯è¯æã\n\n\n# åæéè\n\n\n\n> ä¾å¦ï¼alice æ³è¦å bob è¯æå¥¹ç¥éä¸ç»æ° x å y ä½¿å¾ x + y = 7ï¼åæ¶ä¸åè®© bobï¼ç¥é x å y çå·ä½æ°å¼\n\n\n\n\n# ç²ç­¾æ¹æ³\n\nå¨åé¢çè¯¾ç¨ä¸­è¯´å°ï¼å¤®è¡ä¼ç»´æ¤ä¸ä¸ªä¸­å¿åçæ°æ®åºæ¥è®°å½æ¯ä¸ç¬é±æ¯å¦è±åºå»ï¼æ¥é²æ­¢åè±ï¼é£ä¹ä½ çæ¯ä¸ç¬äº¤æå¤®è¡é½ä¼ç¥éãé£ä¹ææ²¡æä¸ç§åæ³æ¢ç¶å¤®è¡åä¸­å¿åçè®°è´¦ï¼åä¸è®©å®ç¥éäº¤æçä¿¡æ¯å¢ã\n\n\n\n\n# é¶å¸åé¶é\n\n\n\nä¸å¸¸ç¨çåå ï¼\n\n 1. btc çå¿åæ§å·²ç»å¤ç¨äºï¼å¤§å®¶ä¸æ¿æä¸ºäºå¿åæ§èå»ç¨ä¸ç§æ°çå¸ã\n 2. é¶å¸åé¶éè¿ç¨äºå¯ç å­¦åæ°å­¦çç¥è¯æ¥å¢å¼ºå¿åæ§ï¼å®ç°åä½¿ç¨èµ·æ¥æ¯è¾å¤æã\n 3. å½ä¸ç°å®äº¤äºçæ¶åé¶å¸åé¶éä¹æ æ³ä¿è¯100%å¿åã\n\n\n# btc æè\n\n\n# åå¸æé\n\nbtc ç³»ç»ä¸­å¾å¤å°æ¹ä½¿ç¨å°äºåå¸æéãæéä¿å­çæ¬å°åå­å°åï¼åªæå¨æ¬å°è®¡ç®æºä¸æå·ææä¹ï¼å¦æåéç»å¶ä»è®¡ç®æºå°±æ²¡ææä¹äºãé£ä¹å¨åºååå¸æ¶åï¼åå¸æéå¦ä½éè¿ç½ç»è¿è¡ä¼ æ­ï¼\n\n> æè°åå¸æéï¼åªæ¯ç³»ç»ä¸­ä¸ç§å½¢è±¡åçæ¹æ³ãå®éåºç¨æ¶åï¼åªæåå¸èæ²¡ææéãåé¡¾ä¹åæè¿çblock headeræ°æ®ç»æï¼æä¸ä¸ªå­æ®µåä¸ä¸ªåºåçåå¸å¼ã å æ­¤å¯è§ï¼å¨ block header ä¸­åªæ hash å¼ï¼æ²¡ææéãé£ä¹å¦ä½æ¥æ¾å°åä¸ä¸ªåºåçåå®¹ï¼ å¨èç¹ä¸è¬å°åºåå­å¨äºä¸ä¸ª key-value æ°æ®åºä¸­ï¼key ä¸ºåå¸ï¼value ä¸ºåºååå®¹ãå¸¸ç¨ç key-value æ°æ®åºä¸º leveldbï¼åªè¦ææ¡å°æåä¸ä¸ªåºåçåå¸å¼å³å¯ä¾æ®åå¸å¼ä¸ç´å¾åæ¾å°åºåé¾ææåå®¹ãæäºèç¹åªä¿å­åºåé¾é¨åä¿¡æ¯ï¼å¦æéè¦ç¨å°åé¢çåºåï¼å¯ä»¥é®å¶ä»èç¹è¦ãåå¸æéæ§è´¨ä¿è¯äºæ´ä¸ªåºåé¾åå®¹æ¯ä¸å¯ç¯¡æ¹çã\n\n\n# åºåãæã\n\nææä¾£ä¸èµ·ä¹° btcï¼å°ç§é¥ä»ä¸­æªæ­ï¼æ¯äººä¿çå¶ä¸­ä¸é¨åãå¦ææªæ¥ä¸¤äººä¾æ§ææå¾å¥½ï¼å°±å¯ä»¥å°é±ååºï¼å¦æåæï¼è¿é¨åé±å°±ä¼æ°¸ä¹éæ­»ï¼è°ä¹æ æ³ååºï¼éè¿åºåé¾çä¸å¯ç¯¡æ¹æ§ä½ä¸ºä¸¤äººçç±æè§è¯ãè¿æ ·åæä»ä¹é®é¢ï¼ å¦æ­¤ä¸æ¥ï¼n ä¸ªäººæä¹åï¼ å¦ææç§è¿ç§æ¹æ³ï¼å°ç§é¥åä¸º n ä»½ãä½è¿æ ·ä¼æä¸ç³»åé®é¢ã\n\n 1. å¦ænä¸ªäººä¸­ä»»æä¸ä¸ªäººå¿è®°ç§é¥ï¼åæ æ³å°é±ååºã\n 2. æªæ­ç§é¥é¿åº¦ï¼ä¼éä½å®å¨æ§ï¼å ä¸ºç§é¥é¿åº¦ä¼ç´æ¥å½±åç ´è§£é¾åº¦(2^256è¿è¿å¤§äº2^128)ï¼ä¹é´é¾åº¦å·®è·è¿è¿ä¸æ­¢ä¸åã(å¯è§ï¼å¯¹äºå¤ä¸ªäººè´¦æ·ï¼åºè¯¥ä½¿ç¨å¤éç­¾åï¼èéæªæ­ç§é¥çæ¹æ³ã)\n 3. å¦æåæï¼è¯¥é±åææ­»é±ï¼ä¸ç´ä¿å­å¨utxoéåä¸­ï¼å¯¹ç¿å·¥ä¸åå¥½ã\n\n\n# åå¸å¼å±è¯\n\nä¹åææåï¼çè®ºä¸æ¥è¯´ï¼åå¸å¼ç³»ç»ä¸å¯è½è¾¾æå±è¯ãä½å®éä¸­ä¸ºä½åæå¯è½äºï¼ä¸¥æ ¼æ¥è¯´ï¼btcç³»ç»çå±è¯éæ¶å¯è½è¢«æ¨ç¿»ï¼ä¾å¦ååæ»å»å¯¼è´ç³»ç»åæ»ãæ­¤å¤ï¼çè®ºåå®éå­å¨å·®å¼ãä¸å¯è½ç»è®ºéå¯¹ç¹å®æ¨¡åï¼å®éä¸­å¯¹æ¨¡åç¨å¾®ä¿®æ¹ææ·»å çº¿ä¸æ¹æ³å³å¯å°ä¸å¯è½åä¸ºå¯è½ã\n\nç¥è¯æ¹åå½è¿ï¼è¿å¥è¯æ¬èº«æ²¡æéï¼ä½æ¯å¯¹ç¥è¯çä¸ç¥åè§£å¯è½è®©ä½ çå½è¿åå¾æ´å·®ï¼æç§ç æ¯å¾ææä¹çï¼ä½æ¯ä¸è¦ç»å­¦æ¯ççæç»´éå¶å¤´èï¼ä¸è¦ä¸ºç¨åºåçæç»´éå¶æ³è±¡åã\n\n\n# btc ç¨ç¼ºæ§\n\nä¸ºä»ä¹è¦æç¿ï¼å ä¸ºææ¶çï¼ä¸æ¶çå¤§äºå¼éãæ©æ btc é¾åº¦ä½ä¸åºåå¥å±é«ï¼ä»èå¸å¼ç¿å·¥ã ä¹åææå°ï¼btc æ»éåºå®ï¼æäººè®¤ä¸ºå¶æ¯ä¸ä¸ªç²¾å¦çè®¾è®¡ãä½å®éä¸ï¼æ»éåºå®çä¸è¥¿å¹¶ä¸éåä½ä¸ºè´§å¸ï¼è¿ä¹å°±å³å®äº btc å¹¶ä¸è½å¨æªæ¥å®å¨é¢ è¦ç°æè´§å¸ä½ç³»ãä»¥å¤ªåä¸­ä¾¿æ²¡æ btc ä¸­åºåå¥å±å®æååçåæ³ï¼æ­¤å¤ï¼æäºæ°åè´§å¸ä¼èªå¸¦éè´§è¨èçåè½ã å¯¹ä¸ªäººæ¥è¯´ï¼éè´§è¨èå¹¶éå¥½äºï¼å ä¸ºé±ä¸å¼é±äºãä½äººç±»æ¯å¹´åé çä»·å¼ï¼å¦æç¨æ»éåºå®çä¸è¥¿ä½ä¸ºè´§å¸ï¼åå¶åªä¼è¶æ¥è¶å¼é±ï¼èè¿ä¼å¯¼è´æ¥æèä¸æ­ççå¶åå¼ï¼å¶ä»æ²¡æçäººæ è®ºå¦ä½å¥æé½èµ¶ä¸ä¸ï¼æ¿ä»·ä¹æ¯å¦æ­¤ï¼çæ¿ä½¿ä¸é¨åäººé æ¿ç§ä¾¿å¯å¤§èµç¹èµï¼ä¸ªäººå¥æå´å¾é¾ä¹°æ¿ãè¿ä¹æ¯æå½ç®åå­å¨çè¾å¤§çé®é¢ï¼ç¤¾ä¼è´¢å¯çåéä¸å¬ï¼æç»å¼ååç§ç¤¾ä¼çç¾ï¼ã\n\n\n# éå­è®¡ç®\n\nä¼ä¸ä¼ btc è¿ç§å»ºç«å¨å¯ç å­¦ä¸çå å¯è´§å¸ï¼å¨éå­è®¡ç®åºæ¥åä¼ä¸ä¼åå¾ä¸å®å¨ã\n\n 1. éå­è®¡ç®è·ç¦»ä½¿ç¨ä»ç¶æå¾é¿è·ç¦»ã\n 2. éå­è®¡ç®è¥çæ­£ä½¿ç¨å°ç ´åç°æå å¯ç®æ³ï¼å¯¹ä¼ ç»éèä¸çç ´åææ¯æå¤§çï¼ç½ä¸é¶è¡ç½ä¸è½¬è´¦é½ä¸å®å¨äºã\n 3. btc å®éä¸­ä½¿ç¨çå¹¶éå¬é¥ï¼èæ¯ç¨å¬é¥åå¸ãèåå¸å½æ°ä¸è¬é½æ¯ä¸å¯éçï¼å°±ç®éå­è®¡ç®å¯ä»¥ä»å¬é¥æ¨åºç§é¥ï¼ä½æ¯å³ä½¿ç¥éäºå¬é¥åå¸éå­è®¡ç®ä¹æ æ³åæ¨å¬é¥ãå å¯ååå¸ä¸æ¯ä¸åäºï¼å å¯è¿ç¨è¦ä¿è¯ä¿¡æ¯ä¸ä¸¢å¤±å»ï¼ä½æ¯ååå¸ä¼ä¸¢å¤±ä¸äºä¿¡æ¯ãbtc ä¸­ç¨ç sha-256ï¼æ è®ºè¾å¥å¤å¤§ï¼æç»ç»æé½ä¸º 256 ä½ï¼å¿ç¶ä¼å¯¼è´ä¿¡æ¯ä¸¢å¤±ï¼æ æ³åæ¨åæ¬æ°æ®ãå¦æè½åæ¨æ°æ®ï¼é£ä¹è¿å°æä¸ºåææªæçåç¼©ç®æ³ï¼ææ´ä¸ªå¾ä¹¦é¦çæ°æ®ä½ä¸ºè¾å¥åç¼©ä¸º 256 ä½ï¼åä» 256 ä½åæ¨åºå¾ä¹¦é¦ä¿¡æ¯è¿æ¯ä¸å¯è½çï¼ã",charsets:{cjk:!0}},{title:"åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  2",frontmatter:{},regularPath:"/blockchain/learn2.html",relativePath:"blockchain/learn2.md",key:"v-45ab779f",path:"/blockchain/learn2.html",headers:[{level:2,title:"BTC ç³»ç»å®ç°",slug:"btc-ç³»ç»å®ç°",normalizedTitle:"btc ç³»ç»å®ç°",charIndex:83},{level:3,title:"UTXO",slug:"utxo",normalizedTitle:"utxo",charIndex:404},{level:3,title:"äº¤æè´¹",slug:"äº¤æè´¹",normalizedTitle:"äº¤æè´¹",charIndex:711},{level:3,title:"åºåä¸¾ä¾",slug:"åºåä¸¾ä¾",normalizedTitle:"åºåä¸¾ä¾",charIndex:871},{level:3,title:"äº¤æä¸¾ä¾",slug:"äº¤æä¸¾ä¾",normalizedTitle:"äº¤æä¸¾ä¾",charIndex:1699},{level:3,title:"æ¦çåæ",slug:"æ¦çåæ",normalizedTitle:"æ¦çåæ",charIndex:1841},{level:3,title:"BTC æ»é",slug:"btc-æ»é",normalizedTitle:"btc æ»é",charIndex:2537},{level:3,title:"å®å¨æ§åæ",slug:"å®å¨æ§åæ",normalizedTitle:"å®å¨æ§åæ",charIndex:2650},{level:2,title:"BTC ç½ç»å·¥ä½åç",slug:"btc-ç½ç»å·¥ä½åç",normalizedTitle:"btc ç½ç»å·¥ä½åç",charIndex:3080},{level:2,title:"æç¿é¾åº¦",slug:"æç¿é¾åº¦",normalizedTitle:"æç¿é¾åº¦",charIndex:3997},{level:3,title:"BTC å¦ä½è°æ´æç¿é¾åº¦",slug:"btc-å¦ä½è°æ´æç¿é¾åº¦",normalizedTitle:"btc å¦ä½è°æ´æç¿é¾åº¦",charIndex:4775}],lastUpdated:"5/18/2023, 3:43:33 PM",lastUpdatedTimestamp:1684395813e3,headersStr:"BTC ç³»ç»å®ç° UTXO äº¤æè´¹ åºåä¸¾ä¾ äº¤æä¸¾ä¾ æ¦çåæ BTC æ»é å®å¨æ§åæ BTC ç½ç»å·¥ä½åç æç¿é¾åº¦ BTC å¦ä½è°æ´æç¿é¾åº¦",content:"# åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  2\n\n * å­¦ä¹ å°åï¼https://www.bilibili.com/video/BV1Vt411X7JF\n\n\n# BTC ç³»ç»å®ç°\n\nåºåé¾æ¯å»ä¸­å¿åçè´¦æ¬ï¼BTCéç¨çæ¯åºäºäº¤æçè´¦æ¬æ¨¡å¼ï¼transaction-based ledgerï¼ï¼åªè®°å½äºè½¬è´¦äº¤æåé¸å¸äº¤æï¼å¹¶æ²¡æç´æ¥è®°å½æ¯ä¸ªè´¦æ·ä¸æå¤å°é±ãå¦ææ³ç¥éæä¸ªBTCè´¦æ·ä¸æå¤å°é±ï¼è¦éè¿äº¤æè®°å½æ¥æ¨ç®ã\n\né¤äºBTCç³»ç»è¿æ ·åºäºäº¤æçè´¦æ¬æ¨¡å¼ï¼transaction-based ledgerï¼ï¼è¿æä¸äºç³»ç»æ¯åºäºè´¦æ·çæ¨¡å¼ï¼account-based ledgerï¼ï¼æ¯å¦åé¢è¦å­¦çä»¥å¤ªåãå¨è¿ç§æ¨¡å¼ä¸­ç³»ç»è¦æ¾å¼çè®°å½æ¯ä¸ªè´¦æ·ä¸­æå¤å°ä¸ªå¸ã\n\nBTCç³»ç»çè¿ç§æ¨¡å¼ï¼éç§ä¿æ¤æ§æ¯è¾å¥½ï¼ä½ä¼å¸¦æ¥ä¸äºä»£ä»·ï¼å¦è½¬è´¦äº¤æè¦è¯´æå¸çæ¥æºï¼å¸æ¯ä»ä¹åçåªä¸ªäº¤æçåªä¸ªè¾åºä¸­æ¥çï¼ä»¥é²æ­¢åè±æ»å»ã\n\n\n# UTXO\n\nBTC ä¸­çå¨ç»ç¹è¦ç»´æ¤ä¸ä¸ªå« UTXOï¼Unspent Transaction Outputï¼ çæ°æ®ç»æï¼å³è¿æ²¡æè¢«è±åºå»çäº¤æçè¾åºãä¸ä¸ªäº¤æå¯è½æå¤ä¸ªè¾åºï¼è¢«è±æçå°±ä¸å¨ UTXO éäºãå¦ææ¥æä¸è±å°±ä¸ç´æ¾å¨ UTXO ä¸­\n\n\n\nUTXO éåä¸­çæ¯ä¸ªåç´ è¦ç»åºäº§çè¿ä¸ªè¾åºçäº¤æçåå¸å¼ï¼ä»¥åå®å¨è¿ä¸ªäº¤æä¸­æ¯ç¬¬å ä¸ªè¾åºãç¨è¿ä¸¤ä¸ªä¿¡æ¯å°±å¯ä»¥å®ä½å°ä¸ä¸ªç¡®å®çäº¤æä¸­ç¡®å®çè¾åºã\n\nä½¿ç¨ UTXO å¯ä»¥ç¨æ¥å¿«éæ£æµåè±æ»å»ï¼æ³ç¥éæ°åå¸çäº¤ææ¯ä¸æ¯åæ³çï¼è¦æ¥ä¸ä¸å¨ç»ç¹å­å¨åå­ä¸­ç UTXOãè¦è±æçå¸åªæå¨è¿ä¸ªUTXO è¿ä¸ªéåéææ¯åæ³çï¼å¦åè¦ä¹æ¯ä¸å­å¨çï¼è¦ä¹æ¯å·²ç»è±è¿äºçã\n\n\n# äº¤æè´¹\n\næäºäº¤æçæ»è¾å¥å¯è½ç¥å¾®å¤§äºæ»è¾åºï¼å¦å¯è½æ»è¾åºæ¯1ä¸ªBTCï¼æ»è¾åºæ¯0.99ä¸ªBTCï¼è¿ä¹ä¸­çå·®é¢å°±ä½ä¸ºè®°è´¦è´¹ç»äºè·å¾è®°è´¦æçé£ä¸ªç»ç¹ã\n\n> è¿æ¯å ä¸ºä»æåºåå¥å±æ¯ä¸å¤çï¼ç»äºäº¤æè´¹å¯ä»¥ç»å«äººè®°è´¦çå¨æºã0.01BTC çè´¹ç¨å·²ç»å¾é«äºï¼æäºç®åçäº¤ææ¯æ²¡æè´¹ç¨çãç®åçæ¿å±æºå¶ä¸»è¦è¿æ¯åºåå¥å±\n\n\n# åºåä¸¾ä¾\n\n\n\n// block header æ°æ®ç»æ\nclass CBlockHeader {\n\tpublic:\n  \tint32_t nVersion; // BTCçæ¬å·ï¼æ²¡æ³æ¹\n    uint256 hashPrevBlock; // åä¸ä¸ªåºååå¤´åå¸å¼ï¼32å­èï¼ä¸è½æ¹\n    uint256 hashMerkleRoot; // éè¿ä¿®æ¹Merkle Treeä¸­é¸å¸äº¤æçCoinBaseåæ¥è°æ´å¶æ ¹åå¸å¼\n  \tuint32_t nTime; // åºåäº§çæ¶é´ï¼æä¸å®çè°æ´ä½å°ï¼BTCç³»ç»å¹¶ä¸è¦æ±éå¸¸ç²¾ç¡®çæ¶é´ï¼è¿ä¸ªåå¯ä»¥å¨ä¸å®èå´åè°æ´\n  \tuint32_t nBits; // æç¿ç®æ éå¼ç¼ç åççæ¬ï¼åªè½æç§åè®®ä¸­çè¦æ±å®æè¿è¡è°æ´ï¼ä¸è½æ¹\n  \tunit32_t nNonce\n}\n\n\nåºåä¸­ç nonce æ¯4å­èå³32ä½æ´æ°ï¼ä¹å°±åª 2^32 ç§åå¼ãå ä¸ºBTCè¿äºå¹´å¤ªç«çäºï¼æç¿çäººæ°å¾å¤ï¼æä»¥æç¿çé¾åº¦è¢«è°æ´çå¾é«ï¼åçº¯é è°æ´ nonce æ¯å¾å¯è½å¾ä¸å°ç¬¦åé¾åº¦è¦æ±çè§£çï¼æç´¢ç©ºé´ä¸å¤å¤§ï¼ã\n\n\n\né¸å¸äº¤ææ¯æ²¡æäº¤ææ¥æºçï¼æä»¥å¯ä»¥å¨å¶ CoinBase åééä¾¿åå¥åå®¹ï¼é¸å¸äº¤æçååä¼ä½¿è¯¥äº¤æçåå¸åçååï¼ååæ²¿ç Merkle Tree ä¸è·¯åä¸ä¼ éï¼æç»ä½¿æ´æ£µ Merkle Tree çæ ¹åå¸å¼åçååï¼é´æ¥å°è°æ´åå¤´çåå¸å¼ãæä»¥å¯ä»¥æè¿ä¸ªå­æ®µå½åä¸ä¸ª extra nonceï¼åå¤´ç nonce å­æ®µä¸å¤ç¨ï¼å°±åæ¿çè¿ä¸ªåçä¸é¨åå­èä¸èµ·è°æ´ï¼å°±å¢å¤§äºæç´¢ç©ºé´ãä¾å¦ï¼æ¿åºè¿ä¸ªåçå 8 ä¸ªå­èå½åextra nonceï¼åæç´¢ç©ºé´ä¸ä¸å­å°±å¢å¤§å°äº 2^96\n\n\n\nå®éæç¿æ¶ï¼ä¸è¬ä¹æ¯ä¸ºæ­¤è®¾è®¡äºä¸¤å±å¾ªç¯ï¼å¤å±å¾ªç¯è°æ´é¸å¸äº¤æç CoinBase åç extra nonceï¼ç¶åç®åº Merkle Tree çæ ¹åå¸å¼ï¼åå±å¾ªç¯è°æ´åå¤´ç nonceï¼è®¡ç®æ´ä¸ªåå¤´çåå¸å¼ã\n\n\n# äº¤æä¸¾ä¾\n\n\n\nBTCç³»ç»ä¸­äº¤æçè¾å¥åè¾åºé½æ¯ç¨èæ¬æ¥æå®çï¼éªè¯äº¤æè¾å¥è¾åºçè¿ç¨å°±æ¯æè¾å¥èæ¬åè¾åºèæ¬éå¯¹æ§è¡ï¼ä¸æ¯æåä¸ä¸ªäº¤æçè¾å¥è¾åºèæ¬éå¯¹æ§è¡ï¼èæ¯æè¿ä¸ªäº¤æçè¾å¥èæ¬åæä¾å¸çæ¥æºçé£ä¸ªäº¤æçè¾åºèæ¬éå¯¹æ§è¡ï¼ãåªè¦éå¯¹åé½è½æåæ§è¡ï¼äº¤æéªè¯å°±æ¯éè¿çã\n\n\n# æ¦çåæ\n\næç¿çè¿ç¨å°±æ¯ä¸æ­å°è¯ nonce å»æ±è§£ puzzleï¼æ¯æ¬¡å°è¯å¯ä»¥çåä¸ä¸ªä¼¯åªå©è¯éª Bernoulli trialï¼a random experiment with binary outcomeãæ·ç¡¬å¸å°±æ¯ä¸ä¸ªæç®åçä¼¯åªå©è¯éªï¼è¦ä¹æ­£é¢æä¸è¦ä¹åé¢æä¸ï¼è¿ä¸¤ä¸ªæ¦çä¸å¿ä¸æ ·å¤§ï¼å¯¹äºæç¿èè¨ï¼æååå¤±è´¥çæ¦çç¸å·®éå¸¸æ¬æ®ï¼æåçæ¦çå¾å°ã\n\nå½è¿è¡äºå¤§éçä¼¯åªå©è¯éªï¼è¿äºä¼¯åªå©è¯éªå°±ææäºä¼¯åªå©è¿ç¨ Bernoulli processï¼a sequence of independent Bernoulli trailsãä¼¯åªå©è¿ç¨çä¸ä¸ªæ§è´¨æ¯æ è®°å¿æ§ï¼memorylessï¼ï¼å³åå¤§éçè¯éªï¼åé¢çè¯éªç»æå¯¹åé¢æ²¡æå½±åï¼ä¾å¦æ·ç¡¬å¸å¾å¤æ¬¡é½æ¯åé¢æä¸ï¼ä¸ä¸æ¬¡æ·ç¡¬å¸æ­£é¢æä¸çæ¦çä¹ä¸ä¼å¢å ã\n\nå¯¹äºæç¿æ¥è¯´ï¼å¯ä»¥éç¨æ³æ¾åå¸è¿è¡è¿ä¼¼ï¼ç±æ­¤éè¿æ¦çè®ºå¯ä»¥æ¨æ­åºï¼ç³»ç»åºåæ¶é´æä»ææ°åå¸ã(éè¦æ³¨æçæ¯ï¼åºåæ¶é´æçæ¯æ´ä¸ªç³»ç»åºåæ¶é´ï¼å¹¶éæç¿çä¸ªäºº)\n\n\n\nåºåæ¶é´æä»çææ°åå¸ä¹æ¯æ è®°å¿æ§çï¼ä¹å°±æ¯è¯´ä»ä»»ä½ä¸ä¸ªä½ç½®å°å¶æªæ­ï¼å©ä¸çé¨åä»ç¶æ¯æä»ææ°åå¸çãå°æ¥è¿è¦æå¤å°æ¶é´ å è¿å»å·²ç»æäºå¤å°æ¶é´ æ¯æ²¡æå³ç³»çãä¸ç®¡å·²ç»æäºå¤é¿æ¶é´ï¼æ¥ä¸æ¥ç³»ç»ä¸­è¦åºåçå¹³åæ¶é´ä»ç¶è¿æ¯10åéå·¦å³ã\n\nprogress free ââè¿å»åäºå¤å°å·¥ä½ä¸ä¼è®©åç»­æåçæ¦çååãè¿ä¸ªæ§è´¨æ¯å¿è¦çãåè®¾ä¸ä¸ªå å¯è´§å¸ç³»ç»ä¸æ»¡è¶³ progress freeï¼å³è¿å»åçå·¥ä½è¶å¤ï¼åé¢æåçæ¦çå°±è¶å¤§ï¼é£ä¹å°±ä¼é æç®åå¼ºçç¿å·¥ä¼æä¸ææ¯ä¾çä¼å¿ï¼èä¸è½æç§ç®åçæ¯ä¾è®¡ç®ä¼å¿ã\n\n\n# BTC æ»é\n\nåºåå¥å±æ¯ç³»ç»ä¸­äº§çæ°ç BTC çå¯ä¸éå¾ï¼èåºåå¥å±æ¯é 21ä¸ä¸ª åºåï¼å¤§çº¦æ¯é4å¹´ï¼è¦ååã\n\n> 21ä¸ * 50 * (1 + 1/2 + 1/4 + 1/8 + ...) = 2100ä¸\n\n\n# å®å¨æ§åæ\n\n * å·å¸: åè®¾ä¸ä¸ªææ¶æçç»ç¹ M è·å¾äºè®°è´¦æï¼å®æ³æç»ç¹ A çé±è½¬èµ°ï¼ä½å ä¸ºæ²¡æ³ä¼ªé  A çç­¾åï¼æ²¡æAçç§é¥ï¼ï¼è¿æ ·çæ»å»æ¯æ æçã\n * ååæ»å»: MæBTCè½¬ç»Aï¼ç¶åå°±ç´§æ¥çæç¿æå°äºä¸ä¸ªåºåï¼å¨è¿éå¡«åäºMæBTCè½¬ç»èªå·±çäº¤æï¼ä»¥å¸ææ²¿çè¿ä¸ªåºåæä¸ºæé¿åæ³é¾ï¼è¿æ ·å°±è½å°è½¬ç»Açæ¤æï¼ä»èå°è±åºå»çBTCåæ»ãè¿ä¹æ¯åè±æ»å»çä¸ç§ãå¦æå¤§é¨åç»ç¹ææ¡å¨è¯å®ç»ç¹æéï¼è¿æ ·æ»å»çé¾åº¦éå¸¸å¤§ï¼ææ¶æçç»ç¹è¦è¿ç»­è·å¾å¥½å¤æ¬¡è®°è´¦ææå¯è½æ¹åæé¿åæ³é¾ãæä»¥ä¸ç§æç®åçé²èæ¹æ³å°±æ¯å¤ç­å ä¸ªåºåï¼ä¹å«å¤ç­å ä¸ªç¡®è®¤ï¼confirmationï¼ãç¼ºççæ¯è¦ç­ 6ä¸ªconfirmationï¼å¤§çº¦ä¸å°æ¶ï¼\n * selfish mining: æåæå°ä½ä¸åå¸ï¼ç»§ç»­æä¸å»ï¼ç­å°æ³è¦æ»å»çäº¤æç­äº6æ¬¡ç¡®è®¤è®¤ä¸ºå®å¨ä¹åå°æ´æ¡é¾åå¸åºå»ï¼è¯å¾åæ»åæ¥è®°å½ãè¿ç§æåµï¼éè¦æ¶æèç¹ææ¡ç³»ç»ä¸­åæ°ä»¥ä¸ç®åæè¡ï¼å¦åæ æ³æä¸ºæé¿åæ³é¾ã\n\n\n# BTC ç½ç»å·¥ä½åç\n\nç¨æ·å°äº¤æåå¸å°æ¯ç¹å¸ç½ç»ä¸ï¼èç¹æ¶å°äº¤æåæåå°åºåä¸­ï¼ç¶åå°åºååå¸å°æ¯ç¹å¸ç½ç»ä¸ï¼é£ä¹æ°åå¸çäº¤æååºåå¨æ¯ç¹å¸ç½ç»ä¸æ¯å¦ä½ä¼ æ­çå¢ï¼\n\næ¯ç¹å¸å·¥ä½äºç½ç»åºç¨å±ï¼å¶åºå±ï¼ç½ç»å±ï¼æ¯ä¸ä¸ª P2P Overlay networkï¼P2Pè¦çç½ç»ï¼ãæ¯ç¹å¸ç³»ç»ä¸­ææèç¹å®å¨å¹³ç­ï¼ä¸åä¸äºå¶ä»ç½ç»å­å¨è¶çº§èç¹(super node)ãè¦å å¥ç½ç»ï¼è³å°éè¦ç¥éä¸ä¸ªç§å­èç¹ï¼éè¿ç§å­èç¹åç¥èªå·±å®æç¥éçèç¹ãèç¹ä¹é´çéä¿¡éç¨äº TCPåè®®ï¼ä¾¿äºç©¿éé²ç«å¢ãå½èç¹ç¦»å¼æ¶ï¼åªéè¦èªè¡éåºå³å¯ï¼å¶ä»èç¹å¨ä¸å®æ¶é´åä»ç¶æ²¡ææ¶å°è¯¥èç¹æ¶æ¯ï¼ä¾¿ä¼å°å¶å æã\n\næ¯ç¹å¸ç½ç»è®¾è®¡ååï¼ç®åãé²æ£ï¼æåæåµä¸è½è¾¾å°æä¼ç¶åµï¼å³å¥å£®æ§ï¼èéé«æã æ¯ä¸ªèç¹ç»´æ¤ä¸ä¸ªé»å±èç¹éåï¼æ¶æ¯ä¼ æ­å¨ç½ç»ä¸­éç¨æ´ªæ³æ³ï¼æä¸ªèç¹å¨æ¶å°ä¸æ¡æ¶æ¯ä¼å°å¶åéç»ææé»å±èç¹å¹¶æ è®°ï¼ä¸æ¬¡åæ¶å°ä¾¿ä¸ä¼ååéè¯¥æ¶æ¯ãé»å±èç¹éåéæºï¼æªèèç½ç»åºå±ææç»æï¼ä¹ä¸ç°å®ä¸çç©çå°åæ å³ãè¯¥ç½ç»å·ææå¼ºé²æ£æ§ï¼ä½çºç²äºç½ç»æçã\n\næ¯ç¹å¸ç³»ç»ä¸­ï¼æ¯ä¸ªèç¹è¦ç»´æ¤ä¸ä¸ªç­å¾ä¸é¾çäº¤æéåãç¬¬ä¸æ¬¡å¬å°äº¤æï¼è¥æ¯åæ³äº¤æï¼åå°å¶å å¥è¯¥äº¤æéåå¹¶è½¬åç»é»å±èç¹ï¼ä»¥ååæ¶å°è¯¥äº¤æå°±ä¸åè½¬åï¼é¿åç½ç»ä¸äº¤ææ çº¿ä¼ è¾ï¼ãåå¦ç½ç»ä¸­å­å¨ä¸¤ä¸ªå²çªäº¤æï¼å¦äº¤æ1ï¼A->B,äº¤æ2ï¼A->Cï¼åè®¾è±è´¹çåä¸ç¬é±ï¼ãå·ä½æ¥æ¶åªä¸ªåå³äºèç¹åæ¥æ¶å°åªä¸ªäº¤æï¼ä¹åæ¶å°å¦ä¸ä¸ªäº¤æä¼å°å¶æ¾å¼ã\n\n> åå¦æä¸ªèç¹åå¬å° A->Bï¼ä½åå¬å° A->C å·²ç»ä¸é¾ï¼åæ­¤æ¶ A->B ä¸ºéæ³äº¤æï¼æä»¥è¦åç­å¾ä¸é¾äº¤æéåä¸­å é¤ A->B\n\næ°åå¸åºåå¨ç½ç»ä¸­ä¼ æ­æ¹å¼ä¸æ°åå¸äº¤æä¼ æ­æ¹å¼ç±»ä¼¼ï¼æ¯ä¸ªèç¹é¤æ£æ¥è¯¥åºååå®¹æ¯å¦åæ³ï¼è¿è¦æ£æ¥æ¯å¦ä½äºæé¿åæ³é¾ä¸ãåºåè¶å¤§ï¼åç½ç»ä¸ä¼ è¾è¶æ¢ãBTCåè®®å¯¹äºåºåå¤§å°éå¶ä¸ºä¸å¤§äº1Må¤§å°ã\n\n> åºåå¤§å°è¶å¤§ï¼ç½ç»ä¸ä¼ æ­æ¶å»¶è¶é¿ï¼åºåå¤§å°è¶å°ï¼åå¯ä»¥åå«çäº¤ææ°ç®è¶å°ã\n\næ­¤å¤ï¼æ¯ç¹å¸ç½ç»ä¼ æ­å±äº Best effortï¼å°½åèä¸ºï¼ï¼ä¸è½ä¿è¯ä¸å®ä¼ è¾æåãä»¥ä¸ä¸ªäº¤æåå¸å°ç½ç»ä¸ï¼æªå¿ææèç¹é½è½æ¶å°ï¼ä¹æªå¿ææèç¹æ¶å°äº¤æé¡ºåºé½ä¸è´ã\n\n\n# æç¿é¾åº¦\n\næç¿æ¬è´¨ä¸å°±æ¯ä¸æ­è°æ´ block header ä¸­ç nonce å¼ï¼ä½¿æ´ä¸ª block header çåå¸å¼å°äºç­äºç»å®çç®æ éå¼ãå³ï¼H(block header)<=target.ï¼targetä¾¿æ¯ç®æ éå¼ï¼targetè¶å°ï¼ç®æ é¾åº¦å°±è¶å¤§ï¼å¯¹äºæç¿é¾åº¦çè°æ´ï¼å¯ä»¥è§ä¸ºè°æ´ç®æ ç©ºé´å¨æ´ä¸ªè¾åºç©ºé´ä¸­æå æ¯ä¾å¤§å°ã\n\n> æ¯ç¹å¸ç³»ç»éç¨çåå¸ç®æ³ä¸º SHA-256ï¼æä»¥æ´ä¸ªè¾åºç©ºé´å¤§å°ä¸º 2^256ï¼è°æ´ç®æ ç©ºé´æå æ¯ä¾ï¼ç®åçè¯´éè¦ç®æ å¼åéè¦å¤å°ä¸ª0ã\n\n 1. å¦æä¸è°æ´æç¿é¾åº¦ä¼æä¹æ ·ï¼ ç³»ç»æ»ç®åè¶æ¥è¶å¼ºï¼è¥æç¿é¾åº¦ä¿æä¸åï¼ååºåæ¶é´ä¼è¶æ¥è¶ç­ã\n 2. åºåæ¶é´è¶æ¥è¶ç­æ¯å¥½äºåï¼ åºåæ¶é´ç¼©ç­ï¼é£ä¹äº¤æå¯ä»¥å¾å¿«ä¾¿è¢«åå¥åºåé¾ï¼å¹¶ä¸æé«äºç³»ç»ååºæ¶é´ï¼å¢å äºåºåé¾ç³»ç»æçãä½æ¯ï¼åºåæ¶é´å¹¶ä¸æ¯è¶ç­è¶å¥½ãåºåæ¶é´å¤ªç­ï¼ä¹ä¼é æä¸å®çé®é¢ãé¦åï¼åºåå¨ç½ç»ä¸ä¼ æ­å·ææ¶å»¶ï¼åå¦åºåæ¶é´ä¸º1ç§ï¼ä½ç½ç»ä¼ æ­éè¦10ç§ï¼åä¼ä½¿å¾ç³»ç»ä¸­èç¹ç»å¸¸æ§å¤äºä¸ä¸è´çç¶æï¼å¢å äºç³»ç»ä¸ç¨³å®æ§ï¼ä¸ç³»ç»ç»å¸¸æ§ä½äºååç¶æï¼ä¸ä»äºååï¼ä¹è³å¤ååï¼ãååè¿å¤ï¼åä¸å©äºç³»ç»è¾¾æå±è¯ï¼ä¸ä¼é æç®ååæ£ï¼ä½¿å¾é»å®¢æ»å»ææ¬å¤§å¤§éä½(ä¸åéè¦æ´ä¸ªç³»ç»51%çç®å)ã\n 3. 10minçåºåé´éæ¯æä¼åï¼ å½ç¶ä¸æ¯ï¼ä½å¯ä»¥ç¡®å®çæ¯ï¼ç³»ç»åºåæ¶é´éè¦ç»´æå¨ä¸ä¸ªå®å¼éè¿ãåç»­æç« ä¸­ä¼ä»ç»ä»¥å¤ªåï¼ä»¥å¤ªåä¸­å¹³ååºåæ¶é´ä»ä¸º15ç§å·¦å³ï¼ä½åæ ·å¨ä»¥å¤ªåä¸­ä¹æç¸åºé¾åº¦è°æ´ç®æ³ç»´æå¶å¹³ååºåæ¶é´(åç»­ä¼åæä»ç»)ï¼å½ç¶15sçæ¶é´ææ¾ä¼äº§çç»å¸¸æ§çååï¼æä»¥ä»¥å¤ªåè®¾è®¡äºæ°çå±è¯åè®®Ghostï¼åç»­æç« ä¸­ä¼ä»ç»ï¼ã å½ç¶ï¼å¯¹äºä¸ä¸ªäº¤æç³»ç»æ¥è¯´ï¼10minè¿æ ·ä¸ä¸ªäº¤ææ¶é´æ¯æ¯è¾é¿çãä½å¯¹äºè·¨å½äº¤ææ¥è¯´ï¼è¿ä¸ªæ¶é´åèå¤§å¤§ç¼©ç­äºäº¤ææ¶é´ï¼åå°äºç¸åºææ¬ã\n\n\n# BTC å¦ä½è°æ´æç¿é¾åº¦\n\nå¨BTCåè®®ä¸­è§å®ï¼æ¯é2016ä¸ªåºåéè¦è°æ´ä¸æ¬¡é¾åº¦ï¼å ä¸ºå¹³å 10min äº§çä¸ä¸ªæ°åºåï¼å¤§æ¦éè¦14å¤©çæ¶é´è°æ´ä¸æ¬¡é¾åº¦ãå·ä½è°æ´å¬å¼å¦ä¸ï¼\n\n> target = target Ã (expectual time / actual time)\n\nexpected time å°±æ¯é¢æçä¸¤æ¬¡è°æ´çé´éæ¶é´ï¼å³ 2016ä¹ä»¥10åéï¼è actual time æ¯ç³»ç»ä¸­äº§çæè¿ç2016ä¸ªåºåå®éè±è´¹çæ¶é´ãå®éçæ¶é´è¶å¤§ï¼å°±è¶éè¦éä½é¾åº¦ï¼å³æé« targetï¼å®éçæ¶é´è¶å°ï¼å°±è¶éè¦æé«é¾åº¦ï¼å³éä½ targetã\n\nä¸ºäºé¿åç³»ç»ä¸­åºç°æäºæå¤æåµï¼å¯¼è´ç³»ç»åºç°éå¸¸å¤§çæ³¢å¨ï¼æ¯æ¬¡å¯¹ç®æ éå¼ target çè°æ´æå¤§ä¸è½è¶è¿ 4 åï¼æå°ä¸è½å°äº 1/4ã æ¶æèç¹å¯ä¸å¯ä»¥ä¸è°æ´ targetï¼å¦æä¸è°æ´ targetï¼é£ä¹åå¸çåºååå¤´éç4å­è nBitsåï¼32å­èçtargetåç¼©ç¼ç åççæ¬ï¼å°±ä¸æ¯æ­£ç¡®çï¼è¯å®çç»ç¹ä¸ä¼æ¥æ¶è¿æ ·çåºåã",normalizedContent:"# åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  2\n\n * å­¦ä¹ å°åï¼https://www.bilibili.com/video/bv1vt411x7jf\n\n\n# btc ç³»ç»å®ç°\n\nåºåé¾æ¯å»ä¸­å¿åçè´¦æ¬ï¼btcéç¨çæ¯åºäºäº¤æçè´¦æ¬æ¨¡å¼ï¼transaction-based ledgerï¼ï¼åªè®°å½äºè½¬è´¦äº¤æåé¸å¸äº¤æï¼å¹¶æ²¡æç´æ¥è®°å½æ¯ä¸ªè´¦æ·ä¸æå¤å°é±ãå¦ææ³ç¥éæä¸ªbtcè´¦æ·ä¸æå¤å°é±ï¼è¦éè¿äº¤æè®°å½æ¥æ¨ç®ã\n\né¤äºbtcç³»ç»è¿æ ·åºäºäº¤æçè´¦æ¬æ¨¡å¼ï¼transaction-based ledgerï¼ï¼è¿æä¸äºç³»ç»æ¯åºäºè´¦æ·çæ¨¡å¼ï¼account-based ledgerï¼ï¼æ¯å¦åé¢è¦å­¦çä»¥å¤ªåãå¨è¿ç§æ¨¡å¼ä¸­ç³»ç»è¦æ¾å¼çè®°å½æ¯ä¸ªè´¦æ·ä¸­æå¤å°ä¸ªå¸ã\n\nbtcç³»ç»çè¿ç§æ¨¡å¼ï¼éç§ä¿æ¤æ§æ¯è¾å¥½ï¼ä½ä¼å¸¦æ¥ä¸äºä»£ä»·ï¼å¦è½¬è´¦äº¤æè¦è¯´æå¸çæ¥æºï¼å¸æ¯ä»ä¹åçåªä¸ªäº¤æçåªä¸ªè¾åºä¸­æ¥çï¼ä»¥é²æ­¢åè±æ»å»ã\n\n\n# utxo\n\nbtc ä¸­çå¨ç»ç¹è¦ç»´æ¤ä¸ä¸ªå« utxoï¼unspent transaction outputï¼ çæ°æ®ç»æï¼å³è¿æ²¡æè¢«è±åºå»çäº¤æçè¾åºãä¸ä¸ªäº¤æå¯è½æå¤ä¸ªè¾åºï¼è¢«è±æçå°±ä¸å¨ utxo éäºãå¦ææ¥æä¸è±å°±ä¸ç´æ¾å¨ utxo ä¸­\n\n\n\nutxo éåä¸­çæ¯ä¸ªåç´ è¦ç»åºäº§çè¿ä¸ªè¾åºçäº¤æçåå¸å¼ï¼ä»¥åå®å¨è¿ä¸ªäº¤æä¸­æ¯ç¬¬å ä¸ªè¾åºãç¨è¿ä¸¤ä¸ªä¿¡æ¯å°±å¯ä»¥å®ä½å°ä¸ä¸ªç¡®å®çäº¤æä¸­ç¡®å®çè¾åºã\n\nä½¿ç¨ utxo å¯ä»¥ç¨æ¥å¿«éæ£æµåè±æ»å»ï¼æ³ç¥éæ°åå¸çäº¤ææ¯ä¸æ¯åæ³çï¼è¦æ¥ä¸ä¸å¨ç»ç¹å­å¨åå­ä¸­ç utxoãè¦è±æçå¸åªæå¨è¿ä¸ªutxo è¿ä¸ªéåéææ¯åæ³çï¼å¦åè¦ä¹æ¯ä¸å­å¨çï¼è¦ä¹æ¯å·²ç»è±è¿äºçã\n\n\n# äº¤æè´¹\n\næäºäº¤æçæ»è¾å¥å¯è½ç¥å¾®å¤§äºæ»è¾åºï¼å¦å¯è½æ»è¾åºæ¯1ä¸ªbtcï¼æ»è¾åºæ¯0.99ä¸ªbtcï¼è¿ä¹ä¸­çå·®é¢å°±ä½ä¸ºè®°è´¦è´¹ç»äºè·å¾è®°è´¦æçé£ä¸ªç»ç¹ã\n\n> è¿æ¯å ä¸ºä»æåºåå¥å±æ¯ä¸å¤çï¼ç»äºäº¤æè´¹å¯ä»¥ç»å«äººè®°è´¦çå¨æºã0.01btc çè´¹ç¨å·²ç»å¾é«äºï¼æäºç®åçäº¤ææ¯æ²¡æè´¹ç¨çãç®åçæ¿å±æºå¶ä¸»è¦è¿æ¯åºåå¥å±\n\n\n# åºåä¸¾ä¾\n\n\n\n// block header æ°æ®ç»æ\nclass cblockheader {\n\tpublic:\n  \tint32_t nversion; // btcçæ¬å·ï¼æ²¡æ³æ¹\n    uint256 hashprevblock; // åä¸ä¸ªåºååå¤´åå¸å¼ï¼32å­èï¼ä¸è½æ¹\n    uint256 hashmerkleroot; // éè¿ä¿®æ¹merkle treeä¸­é¸å¸äº¤æçcoinbaseåæ¥è°æ´å¶æ ¹åå¸å¼\n  \tuint32_t ntime; // åºåäº§çæ¶é´ï¼æä¸å®çè°æ´ä½å°ï¼btcç³»ç»å¹¶ä¸è¦æ±éå¸¸ç²¾ç¡®çæ¶é´ï¼è¿ä¸ªåå¯ä»¥å¨ä¸å®èå´åè°æ´\n  \tuint32_t nbits; // æç¿ç®æ éå¼ç¼ç åççæ¬ï¼åªè½æç§åè®®ä¸­çè¦æ±å®æè¿è¡è°æ´ï¼ä¸è½æ¹\n  \tunit32_t nnonce\n}\n\n\nåºåä¸­ç nonce æ¯4å­èå³32ä½æ´æ°ï¼ä¹å°±åª 2^32 ç§åå¼ãå ä¸ºbtcè¿äºå¹´å¤ªç«çäºï¼æç¿çäººæ°å¾å¤ï¼æä»¥æç¿çé¾åº¦è¢«è°æ´çå¾é«ï¼åçº¯é è°æ´ nonce æ¯å¾å¯è½å¾ä¸å°ç¬¦åé¾åº¦è¦æ±çè§£çï¼æç´¢ç©ºé´ä¸å¤å¤§ï¼ã\n\n\n\né¸å¸äº¤ææ¯æ²¡æäº¤ææ¥æºçï¼æä»¥å¯ä»¥å¨å¶ coinbase åééä¾¿åå¥åå®¹ï¼é¸å¸äº¤æçååä¼ä½¿è¯¥äº¤æçåå¸åçååï¼ååæ²¿ç merkle tree ä¸è·¯åä¸ä¼ éï¼æç»ä½¿æ´æ£µ merkle tree çæ ¹åå¸å¼åçååï¼é´æ¥å°è°æ´åå¤´çåå¸å¼ãæä»¥å¯ä»¥æè¿ä¸ªå­æ®µå½åä¸ä¸ª extra nonceï¼åå¤´ç nonce å­æ®µä¸å¤ç¨ï¼å°±åæ¿çè¿ä¸ªåçä¸é¨åå­èä¸èµ·è°æ´ï¼å°±å¢å¤§äºæç´¢ç©ºé´ãä¾å¦ï¼æ¿åºè¿ä¸ªåçå 8 ä¸ªå­èå½åextra nonceï¼åæç´¢ç©ºé´ä¸ä¸å­å°±å¢å¤§å°äº 2^96\n\n\n\nå®éæç¿æ¶ï¼ä¸è¬ä¹æ¯ä¸ºæ­¤è®¾è®¡äºä¸¤å±å¾ªç¯ï¼å¤å±å¾ªç¯è°æ´é¸å¸äº¤æç coinbase åç extra nonceï¼ç¶åç®åº merkle tree çæ ¹åå¸å¼ï¼åå±å¾ªç¯è°æ´åå¤´ç nonceï¼è®¡ç®æ´ä¸ªåå¤´çåå¸å¼ã\n\n\n# äº¤æä¸¾ä¾\n\n\n\nbtcç³»ç»ä¸­äº¤æçè¾å¥åè¾åºé½æ¯ç¨èæ¬æ¥æå®çï¼éªè¯äº¤æè¾å¥è¾åºçè¿ç¨å°±æ¯æè¾å¥èæ¬åè¾åºèæ¬éå¯¹æ§è¡ï¼ä¸æ¯æåä¸ä¸ªäº¤æçè¾å¥è¾åºèæ¬éå¯¹æ§è¡ï¼èæ¯æè¿ä¸ªäº¤æçè¾å¥èæ¬åæä¾å¸çæ¥æºçé£ä¸ªäº¤æçè¾åºèæ¬éå¯¹æ§è¡ï¼ãåªè¦éå¯¹åé½è½æåæ§è¡ï¼äº¤æéªè¯å°±æ¯éè¿çã\n\n\n# æ¦çåæ\n\næç¿çè¿ç¨å°±æ¯ä¸æ­å°è¯ nonce å»æ±è§£ puzzleï¼æ¯æ¬¡å°è¯å¯ä»¥çåä¸ä¸ªä¼¯åªå©è¯éª bernoulli trialï¼a random experiment with binary outcomeãæ·ç¡¬å¸å°±æ¯ä¸ä¸ªæç®åçä¼¯åªå©è¯éªï¼è¦ä¹æ­£é¢æä¸è¦ä¹åé¢æä¸ï¼è¿ä¸¤ä¸ªæ¦çä¸å¿ä¸æ ·å¤§ï¼å¯¹äºæç¿èè¨ï¼æååå¤±è´¥çæ¦çç¸å·®éå¸¸æ¬æ®ï¼æåçæ¦çå¾å°ã\n\nå½è¿è¡äºå¤§éçä¼¯åªå©è¯éªï¼è¿äºä¼¯åªå©è¯éªå°±ææäºä¼¯åªå©è¿ç¨ bernoulli processï¼a sequence of independent bernoulli trailsãä¼¯åªå©è¿ç¨çä¸ä¸ªæ§è´¨æ¯æ è®°å¿æ§ï¼memorylessï¼ï¼å³åå¤§éçè¯éªï¼åé¢çè¯éªç»æå¯¹åé¢æ²¡æå½±åï¼ä¾å¦æ·ç¡¬å¸å¾å¤æ¬¡é½æ¯åé¢æä¸ï¼ä¸ä¸æ¬¡æ·ç¡¬å¸æ­£é¢æä¸çæ¦çä¹ä¸ä¼å¢å ã\n\nå¯¹äºæç¿æ¥è¯´ï¼å¯ä»¥éç¨æ³æ¾åå¸è¿è¡è¿ä¼¼ï¼ç±æ­¤éè¿æ¦çè®ºå¯ä»¥æ¨æ­åºï¼ç³»ç»åºåæ¶é´æä»ææ°åå¸ã(éè¦æ³¨æçæ¯ï¼åºåæ¶é´æçæ¯æ´ä¸ªç³»ç»åºåæ¶é´ï¼å¹¶éæç¿çä¸ªäºº)\n\n\n\nåºåæ¶é´æä»çææ°åå¸ä¹æ¯æ è®°å¿æ§çï¼ä¹å°±æ¯è¯´ä»ä»»ä½ä¸ä¸ªä½ç½®å°å¶æªæ­ï¼å©ä¸çé¨åä»ç¶æ¯æä»ææ°åå¸çãå°æ¥è¿è¦æå¤å°æ¶é´ å è¿å»å·²ç»æäºå¤å°æ¶é´ æ¯æ²¡æå³ç³»çãä¸ç®¡å·²ç»æäºå¤é¿æ¶é´ï¼æ¥ä¸æ¥ç³»ç»ä¸­è¦åºåçå¹³åæ¶é´ä»ç¶è¿æ¯10åéå·¦å³ã\n\nprogress free ââè¿å»åäºå¤å°å·¥ä½ä¸ä¼è®©åç»­æåçæ¦çååãè¿ä¸ªæ§è´¨æ¯å¿è¦çãåè®¾ä¸ä¸ªå å¯è´§å¸ç³»ç»ä¸æ»¡è¶³ progress freeï¼å³è¿å»åçå·¥ä½è¶å¤ï¼åé¢æåçæ¦çå°±è¶å¤§ï¼é£ä¹å°±ä¼é æç®åå¼ºçç¿å·¥ä¼æä¸ææ¯ä¾çä¼å¿ï¼èä¸è½æç§ç®åçæ¯ä¾è®¡ç®ä¼å¿ã\n\n\n# btc æ»é\n\nåºåå¥å±æ¯ç³»ç»ä¸­äº§çæ°ç btc çå¯ä¸éå¾ï¼èåºåå¥å±æ¯é 21ä¸ä¸ª åºåï¼å¤§çº¦æ¯é4å¹´ï¼è¦ååã\n\n> 21ä¸ * 50 * (1 + 1/2 + 1/4 + 1/8 + ...) = 2100ä¸\n\n\n# å®å¨æ§åæ\n\n * å·å¸: åè®¾ä¸ä¸ªææ¶æçç»ç¹ m è·å¾äºè®°è´¦æï¼å®æ³æç»ç¹ a çé±è½¬èµ°ï¼ä½å ä¸ºæ²¡æ³ä¼ªé  a çç­¾åï¼æ²¡æaçç§é¥ï¼ï¼è¿æ ·çæ»å»æ¯æ æçã\n * ååæ»å»: mæbtcè½¬ç»aï¼ç¶åå°±ç´§æ¥çæç¿æå°äºä¸ä¸ªåºåï¼å¨è¿éå¡«åäºmæbtcè½¬ç»èªå·±çäº¤æï¼ä»¥å¸ææ²¿çè¿ä¸ªåºåæä¸ºæé¿åæ³é¾ï¼è¿æ ·å°±è½å°è½¬ç»açæ¤æï¼ä»èå°è±åºå»çbtcåæ»ãè¿ä¹æ¯åè±æ»å»çä¸ç§ãå¦æå¤§é¨åç»ç¹ææ¡å¨è¯å®ç»ç¹æéï¼è¿æ ·æ»å»çé¾åº¦éå¸¸å¤§ï¼ææ¶æçç»ç¹è¦è¿ç»­è·å¾å¥½å¤æ¬¡è®°è´¦ææå¯è½æ¹åæé¿åæ³é¾ãæä»¥ä¸ç§æç®åçé²èæ¹æ³å°±æ¯å¤ç­å ä¸ªåºåï¼ä¹å«å¤ç­å ä¸ªç¡®è®¤ï¼confirmationï¼ãç¼ºççæ¯è¦ç­ 6ä¸ªconfirmationï¼å¤§çº¦ä¸å°æ¶ï¼\n * selfish mining: æåæå°ä½ä¸åå¸ï¼ç»§ç»­æä¸å»ï¼ç­å°æ³è¦æ»å»çäº¤æç­äº6æ¬¡ç¡®è®¤è®¤ä¸ºå®å¨ä¹åå°æ´æ¡é¾åå¸åºå»ï¼è¯å¾åæ»åæ¥è®°å½ãè¿ç§æåµï¼éè¦æ¶æèç¹ææ¡ç³»ç»ä¸­åæ°ä»¥ä¸ç®åæè¡ï¼å¦åæ æ³æä¸ºæé¿åæ³é¾ã\n\n\n# btc ç½ç»å·¥ä½åç\n\nç¨æ·å°äº¤æåå¸å°æ¯ç¹å¸ç½ç»ä¸ï¼èç¹æ¶å°äº¤æåæåå°åºåä¸­ï¼ç¶åå°åºååå¸å°æ¯ç¹å¸ç½ç»ä¸ï¼é£ä¹æ°åå¸çäº¤æååºåå¨æ¯ç¹å¸ç½ç»ä¸æ¯å¦ä½ä¼ æ­çå¢ï¼\n\næ¯ç¹å¸å·¥ä½äºç½ç»åºç¨å±ï¼å¶åºå±ï¼ç½ç»å±ï¼æ¯ä¸ä¸ª p2p overlay networkï¼p2pè¦çç½ç»ï¼ãæ¯ç¹å¸ç³»ç»ä¸­ææèç¹å®å¨å¹³ç­ï¼ä¸åä¸äºå¶ä»ç½ç»å­å¨è¶çº§èç¹(super node)ãè¦å å¥ç½ç»ï¼è³å°éè¦ç¥éä¸ä¸ªç§å­èç¹ï¼éè¿ç§å­èç¹åç¥èªå·±å®æç¥éçèç¹ãèç¹ä¹é´çéä¿¡éç¨äº tcpåè®®ï¼ä¾¿äºç©¿éé²ç«å¢ãå½èç¹ç¦»å¼æ¶ï¼åªéè¦èªè¡éåºå³å¯ï¼å¶ä»èç¹å¨ä¸å®æ¶é´åä»ç¶æ²¡ææ¶å°è¯¥èç¹æ¶æ¯ï¼ä¾¿ä¼å°å¶å æã\n\næ¯ç¹å¸ç½ç»è®¾è®¡ååï¼ç®åãé²æ£ï¼æåæåµä¸è½è¾¾å°æä¼ç¶åµï¼å³å¥å£®æ§ï¼èéé«æã æ¯ä¸ªèç¹ç»´æ¤ä¸ä¸ªé»å±èç¹éåï¼æ¶æ¯ä¼ æ­å¨ç½ç»ä¸­éç¨æ´ªæ³æ³ï¼æä¸ªèç¹å¨æ¶å°ä¸æ¡æ¶æ¯ä¼å°å¶åéç»ææé»å±èç¹å¹¶æ è®°ï¼ä¸æ¬¡åæ¶å°ä¾¿ä¸ä¼ååéè¯¥æ¶æ¯ãé»å±èç¹éåéæºï¼æªèèç½ç»åºå±ææç»æï¼ä¹ä¸ç°å®ä¸çç©çå°åæ å³ãè¯¥ç½ç»å·ææå¼ºé²æ£æ§ï¼ä½çºç²äºç½ç»æçã\n\næ¯ç¹å¸ç³»ç»ä¸­ï¼æ¯ä¸ªèç¹è¦ç»´æ¤ä¸ä¸ªç­å¾ä¸é¾çäº¤æéåãç¬¬ä¸æ¬¡å¬å°äº¤æï¼è¥æ¯åæ³äº¤æï¼åå°å¶å å¥è¯¥äº¤æéåå¹¶è½¬åç»é»å±èç¹ï¼ä»¥ååæ¶å°è¯¥äº¤æå°±ä¸åè½¬åï¼é¿åç½ç»ä¸äº¤ææ çº¿ä¼ è¾ï¼ãåå¦ç½ç»ä¸­å­å¨ä¸¤ä¸ªå²çªäº¤æï¼å¦äº¤æ1ï¼a->b,äº¤æ2ï¼a->cï¼åè®¾è±è´¹çåä¸ç¬é±ï¼ãå·ä½æ¥æ¶åªä¸ªåå³äºèç¹åæ¥æ¶å°åªä¸ªäº¤æï¼ä¹åæ¶å°å¦ä¸ä¸ªäº¤æä¼å°å¶æ¾å¼ã\n\n> åå¦æä¸ªèç¹åå¬å° a->bï¼ä½åå¬å° a->c å·²ç»ä¸é¾ï¼åæ­¤æ¶ a->b ä¸ºéæ³äº¤æï¼æä»¥è¦åç­å¾ä¸é¾äº¤æéåä¸­å é¤ a->b\n\næ°åå¸åºåå¨ç½ç»ä¸­ä¼ æ­æ¹å¼ä¸æ°åå¸äº¤æä¼ æ­æ¹å¼ç±»ä¼¼ï¼æ¯ä¸ªèç¹é¤æ£æ¥è¯¥åºååå®¹æ¯å¦åæ³ï¼è¿è¦æ£æ¥æ¯å¦ä½äºæé¿åæ³é¾ä¸ãåºåè¶å¤§ï¼åç½ç»ä¸ä¼ è¾è¶æ¢ãbtcåè®®å¯¹äºåºåå¤§å°éå¶ä¸ºä¸å¤§äº1må¤§å°ã\n\n> åºåå¤§å°è¶å¤§ï¼ç½ç»ä¸ä¼ æ­æ¶å»¶è¶é¿ï¼åºåå¤§å°è¶å°ï¼åå¯ä»¥åå«çäº¤ææ°ç®è¶å°ã\n\næ­¤å¤ï¼æ¯ç¹å¸ç½ç»ä¼ æ­å±äº best effortï¼å°½åèä¸ºï¼ï¼ä¸è½ä¿è¯ä¸å®ä¼ è¾æåãä»¥ä¸ä¸ªäº¤æåå¸å°ç½ç»ä¸ï¼æªå¿ææèç¹é½è½æ¶å°ï¼ä¹æªå¿ææèç¹æ¶å°äº¤æé¡ºåºé½ä¸è´ã\n\n\n# æç¿é¾åº¦\n\næç¿æ¬è´¨ä¸å°±æ¯ä¸æ­è°æ´ block header ä¸­ç nonce å¼ï¼ä½¿æ´ä¸ª block header çåå¸å¼å°äºç­äºç»å®çç®æ éå¼ãå³ï¼h(block header)<=target.ï¼targetä¾¿æ¯ç®æ éå¼ï¼targetè¶å°ï¼ç®æ é¾åº¦å°±è¶å¤§ï¼å¯¹äºæç¿é¾åº¦çè°æ´ï¼å¯ä»¥è§ä¸ºè°æ´ç®æ ç©ºé´å¨æ´ä¸ªè¾åºç©ºé´ä¸­æå æ¯ä¾å¤§å°ã\n\n> æ¯ç¹å¸ç³»ç»éç¨çåå¸ç®æ³ä¸º sha-256ï¼æä»¥æ´ä¸ªè¾åºç©ºé´å¤§å°ä¸º 2^256ï¼è°æ´ç®æ ç©ºé´æå æ¯ä¾ï¼ç®åçè¯´éè¦ç®æ å¼åéè¦å¤å°ä¸ª0ã\n\n 1. å¦æä¸è°æ´æç¿é¾åº¦ä¼æä¹æ ·ï¼ ç³»ç»æ»ç®åè¶æ¥è¶å¼ºï¼è¥æç¿é¾åº¦ä¿æä¸åï¼ååºåæ¶é´ä¼è¶æ¥è¶ç­ã\n 2. åºåæ¶é´è¶æ¥è¶ç­æ¯å¥½äºåï¼ åºåæ¶é´ç¼©ç­ï¼é£ä¹äº¤æå¯ä»¥å¾å¿«ä¾¿è¢«åå¥åºåé¾ï¼å¹¶ä¸æé«äºç³»ç»ååºæ¶é´ï¼å¢å äºåºåé¾ç³»ç»æçãä½æ¯ï¼åºåæ¶é´å¹¶ä¸æ¯è¶ç­è¶å¥½ãåºåæ¶é´å¤ªç­ï¼ä¹ä¼é æä¸å®çé®é¢ãé¦åï¼åºåå¨ç½ç»ä¸ä¼ æ­å·ææ¶å»¶ï¼åå¦åºåæ¶é´ä¸º1ç§ï¼ä½ç½ç»ä¼ æ­éè¦10ç§ï¼åä¼ä½¿å¾ç³»ç»ä¸­èç¹ç»å¸¸æ§å¤äºä¸ä¸è´çç¶æï¼å¢å äºç³»ç»ä¸ç¨³å®æ§ï¼ä¸ç³»ç»ç»å¸¸æ§ä½äºååç¶æï¼ä¸ä»äºååï¼ä¹è³å¤ååï¼ãååè¿å¤ï¼åä¸å©äºç³»ç»è¾¾æå±è¯ï¼ä¸ä¼é æç®ååæ£ï¼ä½¿å¾é»å®¢æ»å»ææ¬å¤§å¤§éä½(ä¸åéè¦æ´ä¸ªç³»ç»51%çç®å)ã\n 3. 10minçåºåé´éæ¯æä¼åï¼ å½ç¶ä¸æ¯ï¼ä½å¯ä»¥ç¡®å®çæ¯ï¼ç³»ç»åºåæ¶é´éè¦ç»´æå¨ä¸ä¸ªå®å¼éè¿ãåç»­æç« ä¸­ä¼ä»ç»ä»¥å¤ªåï¼ä»¥å¤ªåä¸­å¹³ååºåæ¶é´ä»ä¸º15ç§å·¦å³ï¼ä½åæ ·å¨ä»¥å¤ªåä¸­ä¹æç¸åºé¾åº¦è°æ´ç®æ³ç»´æå¶å¹³ååºåæ¶é´(åç»­ä¼åæä»ç»)ï¼å½ç¶15sçæ¶é´ææ¾ä¼äº§çç»å¸¸æ§çååï¼æä»¥ä»¥å¤ªåè®¾è®¡äºæ°çå±è¯åè®®ghostï¼åç»­æç« ä¸­ä¼ä»ç»ï¼ã å½ç¶ï¼å¯¹äºä¸ä¸ªäº¤æç³»ç»æ¥è¯´ï¼10minè¿æ ·ä¸ä¸ªäº¤ææ¶é´æ¯æ¯è¾é¿çãä½å¯¹äºè·¨å½äº¤ææ¥è¯´ï¼è¿ä¸ªæ¶é´åèå¤§å¤§ç¼©ç­äºäº¤ææ¶é´ï¼åå°äºç¸åºææ¬ã\n\n\n# btc å¦ä½è°æ´æç¿é¾åº¦\n\nå¨btcåè®®ä¸­è§å®ï¼æ¯é2016ä¸ªåºåéè¦è°æ´ä¸æ¬¡é¾åº¦ï¼å ä¸ºå¹³å 10min äº§çä¸ä¸ªæ°åºåï¼å¤§æ¦éè¦14å¤©çæ¶é´è°æ´ä¸æ¬¡é¾åº¦ãå·ä½è°æ´å¬å¼å¦ä¸ï¼\n\n> target = target Ã (expectual time / actual time)\n\nexpected time å°±æ¯é¢æçä¸¤æ¬¡è°æ´çé´éæ¶é´ï¼å³ 2016ä¹ä»¥10åéï¼è actual time æ¯ç³»ç»ä¸­äº§çæè¿ç2016ä¸ªåºåå®éè±è´¹çæ¶é´ãå®éçæ¶é´è¶å¤§ï¼å°±è¶éè¦éä½é¾åº¦ï¼å³æé« targetï¼å®éçæ¶é´è¶å°ï¼å°±è¶éè¦æé«é¾åº¦ï¼å³éä½ targetã\n\nä¸ºäºé¿åç³»ç»ä¸­åºç°æäºæå¤æåµï¼å¯¼è´ç³»ç»åºç°éå¸¸å¤§çæ³¢å¨ï¼æ¯æ¬¡å¯¹ç®æ éå¼ target çè°æ´æå¤§ä¸è½è¶è¿ 4 åï¼æå°ä¸è½å°äº 1/4ã æ¶æèç¹å¯ä¸å¯ä»¥ä¸è°æ´ targetï¼å¦æä¸è°æ´ targetï¼é£ä¹åå¸çåºååå¤´éç4å­è nbitsåï¼32å­èçtargetåç¼©ç¼ç åççæ¬ï¼å°±ä¸æ¯æ­£ç¡®çï¼è¯å®çç»ç¹ä¸ä¼æ¥æ¶è¿æ ·çåºåã",charsets:{cjk:!0}},{title:"åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  5",frontmatter:{},regularPath:"/blockchain/learn5.html",relativePath:"blockchain/learn5.md",key:"v-12859882",path:"/blockchain/learn5.html",headers:[{level:2,title:"ETH æ¦è¿°",slug:"eth-æ¦è¿°",normalizedTitle:"eth æ¦è¿°",charIndex:125},{level:3,title:"ä¸ºä»ä¹æºè½åçº¦",slug:"ä¸ºä»ä¹æºè½åçº¦",normalizedTitle:"ä¸ºä»ä¹æºè½åçº¦",charIndex:452},{level:2,title:"ETH è´¦æ·",slug:"eth-è´¦æ·",normalizedTitle:"eth è´¦æ·",charIndex:929},{level:3,title:"ä¸ºä»ä¹ä»¥å¤ªåè¦åºäºè´¦æ·çæ¨¡å",slug:"ä¸ºä»ä¹ä»¥å¤ªåè¦åºäºè´¦æ·çæ¨¡å",normalizedTitle:"ä¸ºä»ä¹ä»¥å¤ªåè¦åºäºè´¦æ·çæ¨¡å",charIndex:1784},{level:2,title:"ETH ç¶ææ ",slug:"eth-ç¶ææ ",normalizedTitle:"eth ç¶ææ ",charIndex:1885},{level:3,title:"MPT",slug:"mpt",normalizedTitle:"mpt",charIndex:2937},{level:2,title:"ETH äº¤ææ åæ¶æ®æ ",slug:"eth-äº¤ææ åæ¶æ®æ ",normalizedTitle:"eth äº¤ææ åæ¶æ®æ ",charIndex:4829},{level:3,title:"å¸éè¿æ»¤å¨(Bloom filter)",slug:"å¸éè¿æ»¤å¨-bloom-filter",normalizedTitle:"å¸éè¿æ»¤å¨(bloom filter)",charIndex:5097},{level:3,title:"è¡¥å",slug:"è¡¥å",normalizedTitle:"è¡¥å",charIndex:5745},{level:3,title:"ä»£ç å®ç°",slug:"ä»£ç å®ç°",normalizedTitle:"ä»£ç å®ç°",charIndex:6118}],lastUpdated:"6/2/2023, 3:07:42 PM",lastUpdatedTimestamp:1685689662e3,headersStr:"ETH æ¦è¿° ä¸ºä»ä¹æºè½åçº¦ ETH è´¦æ· ä¸ºä»ä¹ä»¥å¤ªåè¦åºäºè´¦æ·çæ¨¡å ETH ç¶ææ  MPT ETH äº¤ææ åæ¶æ®æ  å¸éè¿æ»¤å¨(Bloom filter) è¡¥å ä»£ç å®ç°",content:'# åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  5\n\n * å­¦ä¹ å°åï¼https://www.bilibili.com/video/BV1Vt411X7JF\n * åèæç« ï¼åäº¬å¤§å­¦èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾ç¬è®°15ââETHæ¦è¿°ç¯\n\n\n# ETH æ¦è¿°\n\nBTC å ETH ä¸ºæä¸»è¦çä¸¤ç§å å¯è´§å¸ï¼BTC ç§°ä¸ºåºåé¾ 1.0ï¼ä»¥å¤ªåç§°ä¸ºåºåé¾ 2.0ãå ä¸ºäºæ¯ç¹å¸è®¾è®¡ä¸­å­å¨æäºä¸è¶³ï¼ä»¥å¤ªåä¾¿å¯¹å¶è¿è¡äºæ¹è¿ãä¾å¦ï¼\n\n * åºåæ¶é´: ä»¥å¤ªååºåæ¶é´éä½å°åå ç§ï¼ä»¥åè®¾è®¡äºä¸å¥å±è¯åè®®\n * mining puzzle: BTC æç¿å±äºè®¡ç®å¯éåï¼æç¿è®¾å¤ä¸ä¸åï¼ASICï¼ï¼ä»¥å¤ªåè®¾è®¡ç mining puzzle å¯¹åå­è¦æ±é«ï¼éå¶äº ASIC çä½¿ç¨ï¼ASIC resistanceï¼\n * æªæ¥ï¼ä»¥å¤ªåè¿å°ä¼ç¨æçè¯æ(proof of stake)æ¿ä»£å·¥ä½éè¯æ(proof of work)\n * æ­¤å¤ï¼ä»¥å¤ªåå¢å äºå¯¹æºè½åçº¦ï¼smart contractï¼çæ¯æã\n\n\n# ä¸ºä»ä¹æºè½åçº¦\n\nBTC æ¬èº«æ¯ä¸ä¸ªå»ä¸­å¿åçè´§å¸ï¼å¨æ¯ç¹å¸åå¾æåä¹åï¼å¾å¤äººå°±å¼å§æèï¼é¤äºè´§å¸å¯ä»¥å»ä¸­å¿åï¼è¿æä»ä¹å¯ä»¥å»ä¸­å¿åï¼ä»¥å¤ªåçä¸ä¸ªç¹æ§å°±æ¯å¢å äºå¯¹å»ä¸­å¿åçåçº¦çæ¯æã\n\n * BitCoin: decenralized currency, BTC, æå°åä½ä¸èª\n * Ethereum: decenralized contract, ETH, æå°åä½ä¸wei\n\nè´§å¸æ¬èº«ç±æ¿åºåè¡ï¼æ¿åºå¬ä¿¡åä¸ºå¶èä¹¦ï¼BTC éè¿ææ¯ææ®µåä»£äºæ¿åºçèè½ã ç°å®çæ´»ä¸­ï¼æä»¬ç»å¸¸æå° å¥çº¦ æ åçº¦ãåçº¦çæææ§ä¹æ¯éè¦æ¿åºè¿è¡ç»´æ¤çï¼å¦æäº§ççº çº·éè¦éå¯¹åæ³æ§ååè¿è¡å¤å³ï¼æå®å¸ï¼ãETH çè®¾è®¡ç®çå°±æ¯ï¼éè¿ææ¯ææ®µæ¥å®ç°åä»£æ¿åºå¯¹äºåçº¦çèè½ï¼åºåé¾çä¸å¯ç¯¡æ¹æ§ï¼ãå¹¶ä¸æ¯ææçååé½å¯ä»¥å®ç°ï¼æ¯è¾ç®åçå¯ä»¥ä½¿ç¨æºè½åçº¦ã\n\næºè½åçº¦æä»ä¹å¥½å¤ï¼\n\n> å»ä¸­å¿åçè´§å¸çå¥½å¤æ¯è·¨å½è½¬è´¦ï¼æ¯æ³å¸å¿«å¾å¤ã æºè½åçº¦: è¥ååç­¾ç½²æ¹å¹¶éä¸ä¸ªå½å®¶ï¼æ²¡æç»ä¸çå¸æ³é¨é¨ãå¦æå¯ä»¥ç¼åæ æ³ä¿®æ¹çåçº¦ï¼ææäººåªè½æç§ç¸å³åä¸æ¹æ§è¡ï¼æ æ³è¿çº¦ã\n\n\n# ETH è´¦æ·\n\nBTC ç³»ç»æ¯åºäºäº¤æçè´¦æ¬ï¼ç³»ç»ä¸­å¹¶æªæ¾ç¤ºè®°å½è´¦æ·æå¤å°é±ï¼åªè½éè¿ UTXO è¿è¡æ¨ç®ãè¿ç§éç§ä¿æ¤æ¯è¾å¥½ï¼ä½æ¯ä½¿ç¨èµ·æ¥æ¯è¾å«æ­ãæ¯å¦ A è½¬ç» B æ¯ç¹å¸çæ¶åï¼A éè¦è¯´æå¸çæ¥æºãä½æ¯æä»¬å®éä¸­å­é±è¯´ææ¥æºï¼è±é±åä¸ç¨ãæ­¤å¤ï¼BTC è´¦æ·ä¸­çé±å¨è±çæ¶åï¼å¿é¡»ä¸æ¬¡æ§å¨é¨è±åºå»ã\n\n> A => B(10BTC) B => C(3BTC) å¦æ B åªè½¬ç» C 3ä¸ª BTCï¼é£ä¹å©ä¸ç 7ä¸ª BTC å°ä½ä¸ºäº¤æè´¹ç»ç¿å·¥ï¼æä»¥è¿è¦å°å©ä¸çé±è½¬ç»èªå·±ï¼B => B\'(7 BTC) æ¯ç¹å¸ç³»ç»ä¸­æ²¡ææ¾å¼çåºäºè´¦æ·çæ¨¡å èä»¥å¤ªåç³»ç»åéç¨äºåºäºè´¦æ·çæ¨¡åï¼ä¸ç°å®ä¸­é¶è¡è´¦æ·ç¸ä¼¼ã\n\nä¼ç¹ï¼è½¬è´¦æ¯å¦åæ³åªéè¦æ¥çè½¬è´¦èè´¦æ·ä¸­ä»¥å¤ªå¸æ¯å¦è¶³å¤å³å¯ï¼åæ¶ä¹ä¸éè¦æ¯æ¬¡å¨é¨è½¬è´¦ï¼è¿ä¹å¤©ç¶å°é²èäºåè±æ»å»ãï¼ä½ è¦æ¯è±ä¸¤æ¬¡æå°±ä»ä½ è´¦æ·æ£ä¸¤æ¬¡é±ï¼ ç¼ºç¹ï¼éæ¾æ»å»ï¼A å B è½¬è´¦ï¼è¿ä¸æ®µæ¶é´ï¼B å° A çäº¤æéæ°åå¸ï¼ä»èå¯¼è´ Aè´¦æ·è¢«æ£é±ä¸¤æ¬¡ã\n\n> ä¸ºäºé²èéæ¾æ»å»ï¼ç»è´¦æ·äº¤ææ·»å è®¡æ°å¨è®°å½è¯¥è´¦æ·äº¤æè¿å¤å°æ¬¡ï¼è½¬è´¦æ¶åå°è½¬è´¦æ¬¡æ°è®¡å¥äº¤æçåå®¹ä¸­ã ç³»ç»ä¸­å¨èç¹ç»´æ¤è´¦æ·ä½é¢åè¯¥è®¡æ°å¨çäº¤ææ°ï¼ä»èé²æ­¢æ¬å°ç¯¡æ¹ä½é¢æè¿è¡éæ¾æ»å»ã äº¤æåå®¹ï¼A => B(10ETH)ãnonce = 21(è¿æ¯ç¬¬21æ¬¡äº¤æ)ãSigned by A å¦æéæ¾ä¸è¿°äº¤æåå®¹ï¼ä¼åç° nonce = 21 çäº¤æå·²ç»è¢«åå¸äºï¼å°±ä¸ä¼æ§è¡äºã\n\nä»¥å¤ªåç³»ç»ä¸­å­å¨ä¸¤ç±»è´¦æ·ï¼å¤é¨è´¦æ·ååçº¦è´¦æ·ã\n\n * å¤é¨è´¦æ·ï¼ç±»ä¼¼äº BTC ç³»ç»ä¸­å¬ç§é¥å¯¹ãå­å¨è´¦æ·ä½é¢ balance åè®¡æ°å¨ nonce\n * åçº¦è´¦æ·ï¼å¹¶ééè¿å¬ç§é¥å¯¹æ§å¶ãåçº¦è´¦æ·ä¸è½ä¸»å¨åèµ·äº¤æï¼åªè½æ¥æ¶å°å¤é¨è´¦æ·è°ç¨åæè½åèµ·äº¤ææè°ç¨å¶ä»åçº¦è´¦æ·ãå¶é¤äºbalance å nonce ä¹å¤è¿æ code (ä»£ç )ãstorage (ç¸å³ç¶æ-å­å¨)\n\nåå»ºåçº¦æ¶åä¼è¿åä¸ä¸ªå°åï¼å°±å¯ä»¥å¯¹å¶è°ç¨ãè°ç¨è¿ç¨ä¸­ï¼ä»£ç ä¸åä½ç¶æä¼åçæ¹åã\n\n\n# ä¸ºä»ä¹ä»¥å¤ªåè¦åºäºè´¦æ·çæ¨¡å\n\næ¯ç¹å¸éç§ä¿æ¤æ¯è¾å¥½ï¼æ¯ææ¯æ¬¡äº¤æé½æ´æ¢è´¦æ·ãä½ä»¥å¤ªåæ¯ä¸ºäºæ¯ææºè½åçº¦ï¼èåçº¦ç­¾è®¢åæ¹æ¯æ¯è¾ç¨³å®çèº«ä»½ä¸è¾å°ååçãå°¤å¶æ¯å¯¹äºåçº¦è´¦æ·æ¥è¯´ï¼éè¦ä¿æç¨³å®ç¶æã\n\n\n# ETH ç¶ææ \n\né¦åï¼æä»¬è¦å®ç°ä»è´¦æ·å°åå°è´¦æ·ç¶æçæ å°ãå¨ä»¥å¤ªåä¸­ï¼è´¦æ·å°åä¸º 160å­è ï¼è¡¨ç¤ºä¸º 40ä¸ª16è¿å¶ãç¶æåå«äºä½é¢(balance)ãäº¤ææ¬¡æ°(nonce)ï¼åçº¦è´¦æ·ä¸­è¿åå«äºä»£ç (code)ãå­å¨(stroge)ã\n\nç´è§å°æ¥çï¼å¶æ¬è´¨ä¸ä¸º key-value é®å¼å¯¹ï¼æä»¥ç´è§æ³æ³ä¾¿ç¨åå¸è¡¨å®ç°ãè¥ä¸èèåå¸ç¢°æï¼æ¥è¯¢ç´æ¥ä¸ºå¸¸æ°çº§å«çæ¥è¯¢æçãä½éç¨åå¸è¡¨ï¼é¾ä»¥æä¾ Merkle proof\n\n 1. æä»¬è½å¦å BTCï¼å°åå¸è¡¨çåå®¹ç»ç»ä¸º Merkle Tree ï¼\n\n> å½æ°åºååå¸ï¼åå¸è¡¨åå®¹ä¼æ¹åï¼åæ¬¡å°å¶ç»ç»ä¸ºæ°ç Merkle Treeãå¦æè¿æ ·ï¼æ¯å½äº§çæ°åºå(ETH ä¸­æ°åºåäº§çæ¶é´ä¸º10så·¦å³)ï¼é½è¦éæ°ç»ç» Merkle Treeï¼å¾ææ¾è¿æ¯ä¸ç°å®çã éè¦æ³¨æçæ¯ï¼æ¯ç¹å¸ç³»ç»ä¸­æ²¡æè´¦æ·æ¦å¿µï¼äº¤æç±åºåç®¡çï¼èåºååå«ä¸éä¸º 4000 ä¸ªäº¤æå·¦å³ï¼æä»¥ Merkle Tree ä¸æ¯æ éå¢å¤§çãè ETH ä¸­ï¼Merkle Tree æ¥ç»ç»è´¦æ·ä¿¡æ¯ï¼å¾ææ¾å¶ä¼è¶æ¥è¶åºå¤§ã å®éä¸­ï¼åçååçä»ä»ä¸ºå¾å°ä¸é¨åæ°æ®ï¼æä»¬æ¯æ¬¡éæ°æå»º Merkle Tree ä»£ä»·å¾å¤§\n\n 2. é£æä»¬ä¸è¦åå¸è¡¨äºï¼ç´æ¥ä½¿ç¨ Merkle Tree æææçè´¦æ·é½æ¾è¿å»ï¼æ¯æ¬¡ä¿®æ¹åªéè¦ä¿®æ¹å¶ä¸­ä¸é¨åå³å¯ï¼è¿ä¸ªå¯ä»¥åï¼\n\n> å®éä¸­ï¼Merkle Tree å¹¶æªæä¾ä¸ä¸ªé«æçæ¥æ¾åæ´æ°çæ¹æ¡ãæ­¤å¤ï¼å°ææè´¦æ·æå»ºä¸ºä¸ä¸ªå¤§ç Merkle Treeï¼ä¸ºäºä¿è¯ææèç¹çä¸è´æ§åæ¥æ¾éåº¦ï¼å¿é¡»è¿è¡æåºã\n\n 3. ä¸æåºæä»ä¹é®é¢?\n\n> Merkle Tree çå¶å­èç¹æ¯è´¦æ·ä¿¡æ¯ï¼å¦æä¸æåºï¼ç³»ç»ä¸­æå¾å¤å¨èç¹ä¼æç§èªå·±çæåºæ¹å¼è¿è¡æé è´¦æ·ä¿¡æ¯ï¼å¯¼è´ Merkle Tree åä¸ç¸åï¼æ ¹åå¸å¼ä¹ä¸åã\n\n 4. æ¯ç¹å¸ç Merkle Tree ä¸ä¹æ²¡æåºåï¼\n\n> æ¯ç¹å¸æ¯ä¸ªå¨èç¹æ¶å°çäº¤æé¡ºåºä¹æ¯ä¸ä¸è´çï¼Merkle Tree æ ¹åå¸å¼ä¹ä¸ä¸æ ·ãä½æ¯æ¯ç¹å¸æ¯æ¯ä¸ªèç¹å¨æ¬å°ç»è£ä¸ä¸ªåéåºåï¼å®èªå·±å³å®æ¶éåªäºäº¤æï¼ç¶åå»æç¿äºå¤ºè®°è´¦æï¼åªææå°ç¿çäººæè½å³å®åå¸åºåï¼è¿ä¸ªé¡ºåºæ¯å¯ä¸çã\n\n 5. é£ä¹ç»è¿æåºï¼ä½¿ç¨ Sorted Merkle Tree å¯ä»¥åï¼\n\n> æ°å¢è´¦æ·ï¼ç±äºå¶å°åéæºï¼æå¥ Merkle Tree æ¶åå¾å¤§å¯è½å¨ Tree ä¸­é´ï¼å¿é¡»è¿è¡éæãæä»¥ Sorted Merkle Tree æå¥ãå é¤çä»£ä»·å¤ªå¤§ã\n\n\n# MPT\n\nä»¥å¤ªåéåçæ°æ®ç»æï¼MPTï¼é¦åä»ç»ä¸ä¸ trie åç¼æ ï¼å­å¸æ ï¼\n\n 1. trie ä¸­æ¯ä¸ªèç¹çåæ¯æ°ç®åå³äºæ¯ä¸ªåç´ çåå¼èå´(å¾ä¾ä¸­æå¤26ä¸ªè±æå­æ¯åå+ 1ä¸ªç»ææ å¿ä½)ãä»¥å¤ªåä¸­æ¯16è¿å¶è¡¨ç¤ºï¼0 ~ fï¼å ä¸ä¸ä¸ªç»ææ è¯ç¬¦ä¸º 17 ä¸ªååã\n 2. trie æ¥æ¾æçåå³äº key çé¿åº¦ãå®éåºç¨ä¸­ï¼ä»¥å¤ªåå°åé¿åº¦ä¸º160å­èï¼ã\n 3. trie ä¸é¢ä¸ä¼åçåå¸ç¢°æï¼ä¸¤ä¸ªè´¦æ·çå°åä¸ä¸æ ·ï¼æ å°å° trie ä¸å®æ¯ä¸åçåæ¯ã\n 4. ç»å®è¾å¥ï¼æ è®ºå¦ä½é¡ºåºæå¥ï¼æé ç trie é½æ¯ä¸æ ·çã\n 5. æ´æ°çå±é¨æ§æ¯è¾å¥½ï¼æ¯æ¬¡åå¸ä¸ä¸ªåºåï¼ç³»ç»ä¸­ç»å¤§å¤æ°è´¦æ·çç¶ææ¯ä¸åçï¼åªæä¸ªå«æä¼åï¼æä»¥æ´æ°æä½çå±é¨æ§å¾éè¦ãtrie ä¸åªéè¦éåæä¸ä¸ªåæ¯ï¼å¹¶ä¸éè¦éåæ´æ£µæ ã\n 6. ç¼ºç¹ï¼å­å¨ä¸ä¼ææµªè´¹ï¼å¾å¤èç¹åªæä¸ä¸ªå­èç¹ãå æ­¤å¼å¥äº Patricia tree/trieï¼ç»è¿è·¯å¾åç¼©åçåç¼æ ï¼ã\n\n\n\néè¦æ³¨æçæ¯ï¼å¦ææ°æå¥åè¯ï¼åæ¬åç¼©çè·¯å¾å¯è½éè¦æ©å±å¼æ¥ãä»ä¹æåµä¸è·¯å¾åç¼©ææè¾å¥½ï¼æ ä¸­æå¥çé®å¼åå¸è¾ä¸ºç¨ççæåµä¸ï¼è·¯å¾åç¼©ææè¾å¥½ãçä»¥ä¸ä¾å­ï¼\n\n\n\n\n\nå¨ä»¥å¤ªåç³»ç»ä¸­ï¼160 ä½çå°åå­å¨ 2^160 ç§ï¼ä»¥å¤ªåå¨ä¸ççè´¦æ·æ°å ä¸èµ·ä¹è¿ä¸è¶³è¿ä¸ªæ°ï¼ä¸ºä»ä¹å°åæçè¿ä¹ç¨çå¢ï¼\n\n> å°±æ¯å ä¸ºå°ååå¸ç¨çï¼æä»¥è·¯å¾åç¼©ææè¾å¥½ã ä»¥å¤ªååå»ºè´¦æ·å¨æ¬å°åå»ºå³å¯ï¼ç±»ä¼¼äºæ¯ç¹å¸ï¼é£ä¹ä¼ä¸ä¼ä¸¤ä¸ªåå»ºçè´¦æ·å°åä¸æ ·å¢ï¼æå¯è½ï¼ä½æ¯æ¯å°ççç¸çå¯è½æ§è¿è¦ä½ï¼å°±æ¯å ä¸ºå°åè¶³å¤é¿ï¼è¶³å¤ç¨çã å®éä¸ï¼å¨ä»¥å¤ªåç§ä½¿ç¨çå¹¶éç®åç Patricia treeï¼èæ¯ MPT(Merkle Patricia tree)\n\nMPT å°±æ¯å°ææè´¦æ·ç»ç»ä¸ºä¸ä¸ªç»è¿è·¯å¾åç¼©åæåºç Merkle Tree (æéä¸ºåå¸æé)ï¼å¶æ ¹åå¸å¼å­å¨äº block header ä¸­ãæ ¹åå¸å¼çç¨å¤ï¼\n\n 1. é²æ­¢ç¯¡æ¹ã\n 2. æä¾ Merkle proof ï¼å¯ä»¥è¯æè´¦æ·ä½é¢ï¼è½»èç¹å¯ä»¥è¿è¡éªè¯ã\n 3. ç»ä¸ä¸ªè´¦æ·è½¬è´¦ä¹åï¼è¯ææä¸ªåçäºäº¤æçè´¦æ·æ¯å¦å­å¨ã\n\nä»¥å¤ªåä¸­éå¯¹ MPT è¿è¡äºä¿®æ¹ï¼æä»¬ç§°å¶ä¸º Modified MPTã\n\n\n\n * shared nibble(s)ï¼åå­è¿å¶\n * extension nodeï¼æ©å±èç¹ï¼ç»è¿è·¯å¾åç¼©çèç¹\n * leaf nodeï¼å¶å­èç¹\n * branch nodeï¼åæ¯èç¹\n\næ¯æ¬¡åå¸æ°åºåï¼ç¶ææ ä¸­é¨åèç¹ç¶æä¼æ¹åãä½æ¹åå¹¶éå¨åå°ä¿®æ¹ï¼èæ¯æ°å»ºä¸äºåæ¯ï¼ä¿çåæ¬ç¶æãå¦ä¸å¾ä¸­ï¼ä»ä»ææ°åçæ¹åçèç¹æéè¦ä¿®æ¹ï¼å¶ä»æªä¿®æ¹èç¹ç´æ¥æååä¸ä¸ªåºåä¸­çå¯¹åºèç¹ã\n\n\n\næä»¥ï¼ç³»ç»ä¸­å¨èç¹å¹¶éç»´æ¤ä¸æ£µMPTï¼èæ¯æ¯æ¬¡åå¸æ°åºåé½è¦æ°å»ºMPTãåªä¸è¿å¤§é¨åèç¹å±äº«ã\n\n> ä¸ºä»ä¹è¦ä¿å­åæ¬ç¶æï¼ä¸ºä½ä¸ç´æ¥ä¿®æ¹ï¼ ä¸ºäºä¾¿äºåæ»ãå¦äº§çåååä¸é¢èç¹èåºï¼é£ä¹ä¸é¢èç¹ä¸­ç¶æçä¿®æ¹ä¾¿éè¦è¿è¡åæ»ãå æ­¤ï¼éè¦ç»´æ¤è¿äºåå²è®°å½ã\n\nblock header ä¸­çæ°æ®ç»æ\n\n\n\n * Parenthash: ç¶åºåçåå¸ï¼åä¸ä¸ªåºåçåå¸ï¼\n * Unclehash: åç¶åºåçåå¸\n * Coinbase: ç¿å·¥å°å\n * Root: ç¶ææ çæ ¹åå¸å¼\n * Txhash: äº¤ææ çæ ¹åå¸å¼\n * Receipthash: æ¶æ®æ çæ ¹åå¸å¼\n * Bloom: æ´ä¸ªåºååå¤´ç Bloom filter\n * Difficulty: æç¿é¾åº¦\n * GasLimit: æ±½æ²¹è´¹ï¼ç±»ä¼¼äºæ¯ç¹å¸ä¸­çäº¤æè´¹ï¼ç¸å³\n * GasUsed: æ±½æ²¹è´¹ï¼ç±»ä¼¼äºæ¯ç¹å¸ä¸­çäº¤æè´¹ï¼ç¸å³\n * Time: åºåäº§çæ¶é´\n * Mixdigest: æç¿è¿ç¨éæºæ°ç®åºæ¥çåå¸å¼\n * Nonce: æç¿æ¶éæºæ°\n\nåºåç»æ\n\n\n\n * header: æå block header çæé\n * uncles: æååç¶åºåçæé\n * transactions: äº¤æåè¡¨\n\nåºåå¨ç½ä¸çæ­£åå¸æ¶çä¿¡æ¯\n\ntype extblock struct {\n    Header *Header\n    Txs    []*Transactions\n    uncles []*Header\n}\n\n\n> ç¶ææ ä¸­ä¿å­ Key-value å¯¹ï¼key å°±æ¯å°åï¼è value ç¶æéè¿ RLP(Recursive Length Prefixï¼ä¸ç§è¿è¡åºååçæ¹æ³) ç¼ç åºåå·ä¹ååè¿è¡å­å¨ã\n\n\n# ETH äº¤ææ åæ¶æ®æ \n\næ¯æ¬¡åå¸ä¸ä¸ªåºåæ¶ï¼åºåä¸­çäº¤æä¼å½¢æä¸é¢ Merkle Treeï¼å³äº¤ææ ãæ­¤å¤ä»¥å¤ªåè¿æ·»å äºä¸ä¸ªæ¶æ®æ ï¼æ¯ä¸ªäº¤ææ§è¡å®ä¹åå½¢æä¸ä¸ªæ¶æ®ï¼è®°å½äº¤æç¸å³ä¿¡æ¯ãäº¤ææ åæ¶æ®æ ä¸çèç¹æ¯ä¸ä¸å¯¹åºçï¼ä¸é½æ¯ MPTãMPT çå¥½å¤æ¯æ¯ææ¥æ¾æä½ï¼éè¿é®å¼æ²¿çæ è¿è¡æ¥æ¾å³å¯ã\n\n * å¯¹äºç¶ææ ï¼æ¥æ¾é®å¼ä¸ºè´¦æ·å°åã\n * å¯¹äºäº¤ææ åæ¶æ®æ ï¼æ¥æ¾é®å¼ä¸ºäº¤æå¨åå¸çåºåä¸­çåºå·ã\n\næ¶æ®æ ä½ç¨ï¼å¨ä»¥å¤ªåä¸­æéè¦çåè½æ¯å å¥äºæºè½åçº¦ï¼èæºè½åçº¦çæ§è¡è¿ç¨æ¯è¾å¤æï¼æ¶æ®æ çä½ç¨æ¯å©äºç³»ç»å¿«éæ¥è¯¢æ§è¡ç»æã\n\n\n# å¸éè¿æ»¤å¨(Bloom filter)\n\nä½ç¨ï¼å¸éè¿æ»¤å¨å¯ä»¥ç¨äºæ£ç´¢ä¸ä¸ªåç´ æ¯å¦å¨ä¸ä¸ªéåä¸­ãå®çä¼ç¹æ¯ç©ºé´æçåæ¥è¯¢æ¶é´é½è¿è¿è¶è¿ä¸è¬çç®æ³ï¼ç¼ºç¹æ¯æä¸å®çè¯¯è¯å«çåå é¤å°é¾ã\n\n> ç»å®ä¸ä¸ªæ°æ®éï¼å¶ä¸­å«ä¹åç´  aãbãcï¼éè¿ä¸ä¸ªåå¸å½æ° H() å¯¹å¶è¿è¡è®¡ç®ï¼å°å¶æ å°å°ä¸ä¸ªå¶åå§å¨ä¸º 0 ç 128 ä½çåéçæä¸ªä½ç½®ï¼å°è¯¥ä½ç½®ç½®ä¸º 1ãå°ææåç´ å¤çå®ï¼å°±å¯ä»¥å¾å°ä¸ä¸ªåéï¼åç§°è¯¥åéä¸ºåéåç æè¦ãè¯¥ æè¦ æ¯åéåæ¯è¦å°å¾å¤çã åå®æ³è¦æ¥è¯¢ä¸ä¸ªåç´  d æ¯å¦å¨éåä¸­ï¼åè®¾ H(d) æ å°å°åéä¸­çä½ç½®å¤ä¸º 0ï¼è¯´æ dä¸å®ä¸å¨éåä¸­ï¼åè®¾ H(d)æ å°å°åéä¸­çä½ç½®å¤ä¸º 1ï¼å¯è½éåä¸­ç¡®å®æ dï¼ä¹æå¯è½å ä¸ºåå¸ç¢°æäº§çè¯¯æ¥ã ä¸ªäººçè§£å°±æ¯ï¼ä»ä¼åè¯ä½ ææ ·ä¸è¥¿ä¸å®ä¸å­å¨æèå¯è½å­å¨ã\n\n# Bloom filter å¨ä»¥å¤ªåä¸­çåºç¨\n\næ¯ä¸ªäº¤æå®æåä¼äº§çä¸ä¸ªæ¶æ®ï¼æ¶æ®åå«ä¸ä¸ª Bloom filter è®°å½äº¤æç±»åãå°åç­ä¿¡æ¯ãå¨åºå block header ä¸­ä¹åå«ä¸ä¸ªBloom filterï¼å¶ä¸ºè¯¥åºåä¸­ææäº¤æç Bloom filter çä¸ä¸ªå¹¶éã æä»¥ï¼æ¥æ¾æ¶ååæ¥æ¾åå¤´ä¸­ç Bloom filterï¼å¦æåå¤´ä¸­åå«ãåæ¥çåºåä¸­åå«çäº¤æç Bloom filterï¼å¦æå­å¨ï¼åæ¥çäº¤æè¿è¡ç¡®è®¤ï¼å¦æä¸å­å¨ï¼åè¯´æåçäº ç¢°æã å¥½å¤å°±æ¯éè¿ Bloom filter è¿æ ·ä¸ä¸ªç»æï¼å¿«éå¤§éè¿æ»¤æå¤§éæ å³åºåï¼ä»èæé«äºæ¥æ¾æçã\n\n\n# è¡¥å\n\nä»¥å¤ªåå¯¹äºç»å®çå½åç¶æåç»å®ä¸ç»äº¤æå¯ä»¥ç¡®å®æ§çè½¬ç§»å°ä¸ä¸ç¶æï¼è¿ä¸è¿è¡è¿ç¨å¯ä»¥è§ä¸ºäº¤æé©±å¨çç¶ææºï¼éè¿æ§è¡å½ååºåä¸­åå«çäº¤æï¼é©±å¨ç³»ç»ä»å½åç¶æè½¬ç§»å°ä¸ä¸ç¶æãå½ç¶ï¼BTC æä»¬ä¹å¯ä»¥è§ä¸ºäº¤æé©±å¨çç¶ææºï¼å¶ç¶æä¸º UTXOã\n\né®é¢1ï¼Aè½¬è´¦å°Bï¼ææ²¡æå¯è½æ¶æ¬¾è´¦æ·ä¸åå«åç¶ææ ä¸­ï¼\n\n> å¯è½ãå ä¸ºä»¥å¤ªåä¸­è´¦æ·å¯ä»¥èç¹èªå·±äº§çï¼åªæå¨äº§çäº¤ææ¶æä¼è¢«ç³»ç»ç¥éã é®é¢2ï¼å¯å¦å°æ¯ä¸ªåºåä¸­ç¶ææ æ´æ¹ä¸ºåªåå«ååºåä¸­äº¤æç¸å³çè´¦æ·ç¶æï¼(å¤§å¹ååç¶ææ å¤§å°ï¼ä¸åäº¤ææ ãæ¶æ®æ ä¿æä¸è´) ä¸è½ãé¦åï¼è¿æ ·è®¾è®¡è¦æ¥æ¾è´¦æ·ç¶æå¾ä¸æ¹ä¾¿ï¼å ä¸ºä¸å­å¨æä¸ªåºååå«ææç¶æãå¶æ¬¡ï¼å¦æè¦åä¸ä¸ªæ°åå»ºè´¦æ·è½¬è´¦ï¼å ä¸ºéè¦ç¥éæ¶æ¬¾è´¦æ·çç¶æï¼æè½ç»å¶æ·»å éé¢ï¼ä½ç±äºå¶æ¯æ°åå»ºçè´¦æ·ï¼ææéè¦ä¸ç´æ¾å°åä¸çºªåæè½ç¥éè¯¥è´¦æ·ä¸ºæ°å»ºè´¦æ·ã\n\n\n# ä»£ç å®ç°\n\nfunc NewBlock(header *Header, txs []*Transaction, uncles []*Header, receipts []*Receipt, hasher TrieHasher) *Block {\n\tb := &Block{header: CopyHeader(header)}\n\n\t// äº¤æåè¡¨æ¯å¦ä¸ºç©º\n\tif len(txs) == 0 {\n        // åå¤´éçäº¤ææ çæ ¹åå¸å¼ä¸ºç©ºåå¸å¼\n\t\tb.header.TxHash = EmptyTxsHash\n\t} else {\n        // è°ç¨ DeriveSha è·å¾æ ¹åå¸å¼\n\t\tb.header.TxHash = DeriveSha(Transactions(txs), hasher)\n        // åå»ºäº¤æåè¡¨\n\t\tb.transactions = make(Transactions, len(txs))\n\t\tcopy(b.transactions, txs)\n\t}\n\n    // æ¶æ®åè¡¨æ¯å¦ä¸ºç©º\n\tif len(receipts) == 0 {\n        // åå¤´éçæ¶æ®æ çæ ¹åå¸å¼ä¸ºç©ºåå¸å¼\n\t\tb.header.ReceiptHash = EmptyReceiptsHash\n\t} else {\n        // è°ç¨ DeriveSha è·å¾æ ¹åå¸å¼\n\t\tb.header.ReceiptHash = DeriveSha(Receipts(receipts), hasher)\n        // åå»º Bloom Filter\n        // CreateBloom å½æ°ç¨æ¥åå»º Block Header ä¸­ç Bloom å,\n        // è¿ä¸ª Bloom Filter ç±è¿ä¸ªåä¸­ææ receiptes ç Bloom Filter ç»åå¾å°\n\t\tb.header.Bloom = CreateBloom(receipts)\n\t}\n\n    // åç¶åè¡¨æ¯å¦ä¸ºç©º\n\tif len(uncles) == 0 {\n        // åå¤´éçåç¶åºåçåå¸å¼ä¸ºç©ºåå¸å¼\n\t\tb.header.UncleHash = EmptyUncleHash\n\t} else {\n        // éè¿ CalcUncleHash è®¡ç®åºåå¸å¼\n\t\tb.header.UncleHash = CalcUncleHash(uncles)\n        // éè¿å¾ªç¯æé åºåç¶æ°ç»\n\t\tb.uncles = make([]*Header, len(uncles))\n\t\tfor i := range uncles {\n\t\t\tb.uncles[i] = CopyHeader(uncles[i])\n\t\t}\n\t}\n\n\treturn b\n}\n\n// DeriveSha å½æ°\nfunc DeriveSha(list DerivableList) common.Hash {\n\tkeybuf := new(bytes.Buffer)\n\ttrie := new(trie.Trie)\n\tfor i := 0; i < list.Len(); i++ {\n\t\tkeybuf.Reset()\n\t\trlp.Encode(keybuf, uint(i))\n\t\ttrie.Update(keybuf.Bytes(), list.GetRlp(i))\n\t}\n\treturn trie.Hash()\n}\n\n// æ¶æ®æ°æ®ç»æ\ntype Receipt struct {\n\tPostState         []byte `json:"root"`\n\tStatus            uint64 `json:"status"`\n\tCumulativeGasUsed uint64 `json:"cumulativeGasUsed" gencodec:"required"`\n\tBloom             Bloom  `json:"logsBloom"         gencodec:"required"`\n\tLogs              []*Log `json:"logs"              gencodec:"required"`\n\n\tTxHash          common.Hash    `json:"transactionHash" gencodec:"required"`\n\tContractAddress common.Address `json:"contractAddress"`\n\tGasUsed         uint64         `json:"gasUsed" gencodec:"required"`\n}\n',normalizedContent:'# åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  5\n\n * å­¦ä¹ å°åï¼https://www.bilibili.com/video/bv1vt411x7jf\n * åèæç« ï¼åäº¬å¤§å­¦èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾ç¬è®°15ââethæ¦è¿°ç¯\n\n\n# eth æ¦è¿°\n\nbtc å eth ä¸ºæä¸»è¦çä¸¤ç§å å¯è´§å¸ï¼btc ç§°ä¸ºåºåé¾ 1.0ï¼ä»¥å¤ªåç§°ä¸ºåºåé¾ 2.0ãå ä¸ºäºæ¯ç¹å¸è®¾è®¡ä¸­å­å¨æäºä¸è¶³ï¼ä»¥å¤ªåä¾¿å¯¹å¶è¿è¡äºæ¹è¿ãä¾å¦ï¼\n\n * åºåæ¶é´: ä»¥å¤ªååºåæ¶é´éä½å°åå ç§ï¼ä»¥åè®¾è®¡äºä¸å¥å±è¯åè®®\n * mining puzzle: btc æç¿å±äºè®¡ç®å¯éåï¼æç¿è®¾å¤ä¸ä¸åï¼asicï¼ï¼ä»¥å¤ªåè®¾è®¡ç mining puzzle å¯¹åå­è¦æ±é«ï¼éå¶äº asic çä½¿ç¨ï¼asic resistanceï¼\n * æªæ¥ï¼ä»¥å¤ªåè¿å°ä¼ç¨æçè¯æ(proof of stake)æ¿ä»£å·¥ä½éè¯æ(proof of work)\n * æ­¤å¤ï¼ä»¥å¤ªåå¢å äºå¯¹æºè½åçº¦ï¼smart contractï¼çæ¯æã\n\n\n# ä¸ºä»ä¹æºè½åçº¦\n\nbtc æ¬èº«æ¯ä¸ä¸ªå»ä¸­å¿åçè´§å¸ï¼å¨æ¯ç¹å¸åå¾æåä¹åï¼å¾å¤äººå°±å¼å§æèï¼é¤äºè´§å¸å¯ä»¥å»ä¸­å¿åï¼è¿æä»ä¹å¯ä»¥å»ä¸­å¿åï¼ä»¥å¤ªåçä¸ä¸ªç¹æ§å°±æ¯å¢å äºå¯¹å»ä¸­å¿åçåçº¦çæ¯æã\n\n * bitcoin: decenralized currency, btc, æå°åä½ä¸èª\n * ethereum: decenralized contract, eth, æå°åä½ä¸wei\n\nè´§å¸æ¬èº«ç±æ¿åºåè¡ï¼æ¿åºå¬ä¿¡åä¸ºå¶èä¹¦ï¼btc éè¿ææ¯ææ®µåä»£äºæ¿åºçèè½ã ç°å®çæ´»ä¸­ï¼æä»¬ç»å¸¸æå° å¥çº¦ æ åçº¦ãåçº¦çæææ§ä¹æ¯éè¦æ¿åºè¿è¡ç»´æ¤çï¼å¦æäº§ççº çº·éè¦éå¯¹åæ³æ§ååè¿è¡å¤å³ï¼æå®å¸ï¼ãeth çè®¾è®¡ç®çå°±æ¯ï¼éè¿ææ¯ææ®µæ¥å®ç°åä»£æ¿åºå¯¹äºåçº¦çèè½ï¼åºåé¾çä¸å¯ç¯¡æ¹æ§ï¼ãå¹¶ä¸æ¯ææçååé½å¯ä»¥å®ç°ï¼æ¯è¾ç®åçå¯ä»¥ä½¿ç¨æºè½åçº¦ã\n\næºè½åçº¦æä»ä¹å¥½å¤ï¼\n\n> å»ä¸­å¿åçè´§å¸çå¥½å¤æ¯è·¨å½è½¬è´¦ï¼æ¯æ³å¸å¿«å¾å¤ã æºè½åçº¦: è¥ååç­¾ç½²æ¹å¹¶éä¸ä¸ªå½å®¶ï¼æ²¡æç»ä¸çå¸æ³é¨é¨ãå¦æå¯ä»¥ç¼åæ æ³ä¿®æ¹çåçº¦ï¼ææäººåªè½æç§ç¸å³åä¸æ¹æ§è¡ï¼æ æ³è¿çº¦ã\n\n\n# eth è´¦æ·\n\nbtc ç³»ç»æ¯åºäºäº¤æçè´¦æ¬ï¼ç³»ç»ä¸­å¹¶æªæ¾ç¤ºè®°å½è´¦æ·æå¤å°é±ï¼åªè½éè¿ utxo è¿è¡æ¨ç®ãè¿ç§éç§ä¿æ¤æ¯è¾å¥½ï¼ä½æ¯ä½¿ç¨èµ·æ¥æ¯è¾å«æ­ãæ¯å¦ a è½¬ç» b æ¯ç¹å¸çæ¶åï¼a éè¦è¯´æå¸çæ¥æºãä½æ¯æä»¬å®éä¸­å­é±è¯´ææ¥æºï¼è±é±åä¸ç¨ãæ­¤å¤ï¼btc è´¦æ·ä¸­çé±å¨è±çæ¶åï¼å¿é¡»ä¸æ¬¡æ§å¨é¨è±åºå»ã\n\n> a => b(10btc) b => c(3btc) å¦æ b åªè½¬ç» c 3ä¸ª btcï¼é£ä¹å©ä¸ç 7ä¸ª btc å°ä½ä¸ºäº¤æè´¹ç»ç¿å·¥ï¼æä»¥è¿è¦å°å©ä¸çé±è½¬ç»èªå·±ï¼b => b\'(7 btc) æ¯ç¹å¸ç³»ç»ä¸­æ²¡ææ¾å¼çåºäºè´¦æ·çæ¨¡å èä»¥å¤ªåç³»ç»åéç¨äºåºäºè´¦æ·çæ¨¡åï¼ä¸ç°å®ä¸­é¶è¡è´¦æ·ç¸ä¼¼ã\n\nä¼ç¹ï¼è½¬è´¦æ¯å¦åæ³åªéè¦æ¥çè½¬è´¦èè´¦æ·ä¸­ä»¥å¤ªå¸æ¯å¦è¶³å¤å³å¯ï¼åæ¶ä¹ä¸éè¦æ¯æ¬¡å¨é¨è½¬è´¦ï¼è¿ä¹å¤©ç¶å°é²èäºåè±æ»å»ãï¼ä½ è¦æ¯è±ä¸¤æ¬¡æå°±ä»ä½ è´¦æ·æ£ä¸¤æ¬¡é±ï¼ ç¼ºç¹ï¼éæ¾æ»å»ï¼a å b è½¬è´¦ï¼è¿ä¸æ®µæ¶é´ï¼b å° a çäº¤æéæ°åå¸ï¼ä»èå¯¼è´ aè´¦æ·è¢«æ£é±ä¸¤æ¬¡ã\n\n> ä¸ºäºé²èéæ¾æ»å»ï¼ç»è´¦æ·äº¤ææ·»å è®¡æ°å¨è®°å½è¯¥è´¦æ·äº¤æè¿å¤å°æ¬¡ï¼è½¬è´¦æ¶åå°è½¬è´¦æ¬¡æ°è®¡å¥äº¤æçåå®¹ä¸­ã ç³»ç»ä¸­å¨èç¹ç»´æ¤è´¦æ·ä½é¢åè¯¥è®¡æ°å¨çäº¤ææ°ï¼ä»èé²æ­¢æ¬å°ç¯¡æ¹ä½é¢æè¿è¡éæ¾æ»å»ã äº¤æåå®¹ï¼a => b(10eth)ãnonce = 21(è¿æ¯ç¬¬21æ¬¡äº¤æ)ãsigned by a å¦æéæ¾ä¸è¿°äº¤æåå®¹ï¼ä¼åç° nonce = 21 çäº¤æå·²ç»è¢«åå¸äºï¼å°±ä¸ä¼æ§è¡äºã\n\nä»¥å¤ªåç³»ç»ä¸­å­å¨ä¸¤ç±»è´¦æ·ï¼å¤é¨è´¦æ·ååçº¦è´¦æ·ã\n\n * å¤é¨è´¦æ·ï¼ç±»ä¼¼äº btc ç³»ç»ä¸­å¬ç§é¥å¯¹ãå­å¨è´¦æ·ä½é¢ balance åè®¡æ°å¨ nonce\n * åçº¦è´¦æ·ï¼å¹¶ééè¿å¬ç§é¥å¯¹æ§å¶ãåçº¦è´¦æ·ä¸è½ä¸»å¨åèµ·äº¤æï¼åªè½æ¥æ¶å°å¤é¨è´¦æ·è°ç¨åæè½åèµ·äº¤ææè°ç¨å¶ä»åçº¦è´¦æ·ãå¶é¤äºbalance å nonce ä¹å¤è¿æ code (ä»£ç )ãstorage (ç¸å³ç¶æ-å­å¨)\n\nåå»ºåçº¦æ¶åä¼è¿åä¸ä¸ªå°åï¼å°±å¯ä»¥å¯¹å¶è°ç¨ãè°ç¨è¿ç¨ä¸­ï¼ä»£ç ä¸åä½ç¶æä¼åçæ¹åã\n\n\n# ä¸ºä»ä¹ä»¥å¤ªåè¦åºäºè´¦æ·çæ¨¡å\n\næ¯ç¹å¸éç§ä¿æ¤æ¯è¾å¥½ï¼æ¯ææ¯æ¬¡äº¤æé½æ´æ¢è´¦æ·ãä½ä»¥å¤ªåæ¯ä¸ºäºæ¯ææºè½åçº¦ï¼èåçº¦ç­¾è®¢åæ¹æ¯æ¯è¾ç¨³å®çèº«ä»½ä¸è¾å°ååçãå°¤å¶æ¯å¯¹äºåçº¦è´¦æ·æ¥è¯´ï¼éè¦ä¿æç¨³å®ç¶æã\n\n\n# eth ç¶ææ \n\né¦åï¼æä»¬è¦å®ç°ä»è´¦æ·å°åå°è´¦æ·ç¶æçæ å°ãå¨ä»¥å¤ªåä¸­ï¼è´¦æ·å°åä¸º 160å­è ï¼è¡¨ç¤ºä¸º 40ä¸ª16è¿å¶ãç¶æåå«äºä½é¢(balance)ãäº¤ææ¬¡æ°(nonce)ï¼åçº¦è´¦æ·ä¸­è¿åå«äºä»£ç (code)ãå­å¨(stroge)ã\n\nç´è§å°æ¥çï¼å¶æ¬è´¨ä¸ä¸º key-value é®å¼å¯¹ï¼æä»¥ç´è§æ³æ³ä¾¿ç¨åå¸è¡¨å®ç°ãè¥ä¸èèåå¸ç¢°æï¼æ¥è¯¢ç´æ¥ä¸ºå¸¸æ°çº§å«çæ¥è¯¢æçãä½éç¨åå¸è¡¨ï¼é¾ä»¥æä¾ merkle proof\n\n 1. æä»¬è½å¦å btcï¼å°åå¸è¡¨çåå®¹ç»ç»ä¸º merkle tree ï¼\n\n> å½æ°åºååå¸ï¼åå¸è¡¨åå®¹ä¼æ¹åï¼åæ¬¡å°å¶ç»ç»ä¸ºæ°ç merkle treeãå¦æè¿æ ·ï¼æ¯å½äº§çæ°åºå(eth ä¸­æ°åºåäº§çæ¶é´ä¸º10så·¦å³)ï¼é½è¦éæ°ç»ç» merkle treeï¼å¾ææ¾è¿æ¯ä¸ç°å®çã éè¦æ³¨æçæ¯ï¼æ¯ç¹å¸ç³»ç»ä¸­æ²¡æè´¦æ·æ¦å¿µï¼äº¤æç±åºåç®¡çï¼èåºååå«ä¸éä¸º 4000 ä¸ªäº¤æå·¦å³ï¼æä»¥ merkle tree ä¸æ¯æ éå¢å¤§çãè eth ä¸­ï¼merkle tree æ¥ç»ç»è´¦æ·ä¿¡æ¯ï¼å¾ææ¾å¶ä¼è¶æ¥è¶åºå¤§ã å®éä¸­ï¼åçååçä»ä»ä¸ºå¾å°ä¸é¨åæ°æ®ï¼æä»¬æ¯æ¬¡éæ°æå»º merkle tree ä»£ä»·å¾å¤§\n\n 2. é£æä»¬ä¸è¦åå¸è¡¨äºï¼ç´æ¥ä½¿ç¨ merkle tree æææçè´¦æ·é½æ¾è¿å»ï¼æ¯æ¬¡ä¿®æ¹åªéè¦ä¿®æ¹å¶ä¸­ä¸é¨åå³å¯ï¼è¿ä¸ªå¯ä»¥åï¼\n\n> å®éä¸­ï¼merkle tree å¹¶æªæä¾ä¸ä¸ªé«æçæ¥æ¾åæ´æ°çæ¹æ¡ãæ­¤å¤ï¼å°ææè´¦æ·æå»ºä¸ºä¸ä¸ªå¤§ç merkle treeï¼ä¸ºäºä¿è¯ææèç¹çä¸è´æ§åæ¥æ¾éåº¦ï¼å¿é¡»è¿è¡æåºã\n\n 3. ä¸æåºæä»ä¹é®é¢?\n\n> merkle tree çå¶å­èç¹æ¯è´¦æ·ä¿¡æ¯ï¼å¦æä¸æåºï¼ç³»ç»ä¸­æå¾å¤å¨èç¹ä¼æç§èªå·±çæåºæ¹å¼è¿è¡æé è´¦æ·ä¿¡æ¯ï¼å¯¼è´ merkle tree åä¸ç¸åï¼æ ¹åå¸å¼ä¹ä¸åã\n\n 4. æ¯ç¹å¸ç merkle tree ä¸ä¹æ²¡æåºåï¼\n\n> æ¯ç¹å¸æ¯ä¸ªå¨èç¹æ¶å°çäº¤æé¡ºåºä¹æ¯ä¸ä¸è´çï¼merkle tree æ ¹åå¸å¼ä¹ä¸ä¸æ ·ãä½æ¯æ¯ç¹å¸æ¯æ¯ä¸ªèç¹å¨æ¬å°ç»è£ä¸ä¸ªåéåºåï¼å®èªå·±å³å®æ¶éåªäºäº¤æï¼ç¶åå»æç¿äºå¤ºè®°è´¦æï¼åªææå°ç¿çäººæè½å³å®åå¸åºåï¼è¿ä¸ªé¡ºåºæ¯å¯ä¸çã\n\n 5. é£ä¹ç»è¿æåºï¼ä½¿ç¨ sorted merkle tree å¯ä»¥åï¼\n\n> æ°å¢è´¦æ·ï¼ç±äºå¶å°åéæºï¼æå¥ merkle tree æ¶åå¾å¤§å¯è½å¨ tree ä¸­é´ï¼å¿é¡»è¿è¡éæãæä»¥ sorted merkle tree æå¥ãå é¤çä»£ä»·å¤ªå¤§ã\n\n\n# mpt\n\nä»¥å¤ªåéåçæ°æ®ç»æï¼mptï¼é¦åä»ç»ä¸ä¸ trie åç¼æ ï¼å­å¸æ ï¼\n\n 1. trie ä¸­æ¯ä¸ªèç¹çåæ¯æ°ç®åå³äºæ¯ä¸ªåç´ çåå¼èå´(å¾ä¾ä¸­æå¤26ä¸ªè±æå­æ¯åå+ 1ä¸ªç»ææ å¿ä½)ãä»¥å¤ªåä¸­æ¯16è¿å¶è¡¨ç¤ºï¼0 ~ fï¼å ä¸ä¸ä¸ªç»ææ è¯ç¬¦ä¸º 17 ä¸ªååã\n 2. trie æ¥æ¾æçåå³äº key çé¿åº¦ãå®éåºç¨ä¸­ï¼ä»¥å¤ªåå°åé¿åº¦ä¸º160å­èï¼ã\n 3. trie ä¸é¢ä¸ä¼åçåå¸ç¢°æï¼ä¸¤ä¸ªè´¦æ·çå°åä¸ä¸æ ·ï¼æ å°å° trie ä¸å®æ¯ä¸åçåæ¯ã\n 4. ç»å®è¾å¥ï¼æ è®ºå¦ä½é¡ºåºæå¥ï¼æé ç trie é½æ¯ä¸æ ·çã\n 5. æ´æ°çå±é¨æ§æ¯è¾å¥½ï¼æ¯æ¬¡åå¸ä¸ä¸ªåºåï¼ç³»ç»ä¸­ç»å¤§å¤æ°è´¦æ·çç¶ææ¯ä¸åçï¼åªæä¸ªå«æä¼åï¼æä»¥æ´æ°æä½çå±é¨æ§å¾éè¦ãtrie ä¸åªéè¦éåæä¸ä¸ªåæ¯ï¼å¹¶ä¸éè¦éåæ´æ£µæ ã\n 6. ç¼ºç¹ï¼å­å¨ä¸ä¼ææµªè´¹ï¼å¾å¤èç¹åªæä¸ä¸ªå­èç¹ãå æ­¤å¼å¥äº patricia tree/trieï¼ç»è¿è·¯å¾åç¼©åçåç¼æ ï¼ã\n\n\n\néè¦æ³¨æçæ¯ï¼å¦ææ°æå¥åè¯ï¼åæ¬åç¼©çè·¯å¾å¯è½éè¦æ©å±å¼æ¥ãä»ä¹æåµä¸è·¯å¾åç¼©ææè¾å¥½ï¼æ ä¸­æå¥çé®å¼åå¸è¾ä¸ºç¨ççæåµä¸ï¼è·¯å¾åç¼©ææè¾å¥½ãçä»¥ä¸ä¾å­ï¼\n\n\n\n\n\nå¨ä»¥å¤ªåç³»ç»ä¸­ï¼160 ä½çå°åå­å¨ 2^160 ç§ï¼ä»¥å¤ªåå¨ä¸ççè´¦æ·æ°å ä¸èµ·ä¹è¿ä¸è¶³è¿ä¸ªæ°ï¼ä¸ºä»ä¹å°åæçè¿ä¹ç¨çå¢ï¼\n\n> å°±æ¯å ä¸ºå°ååå¸ç¨çï¼æä»¥è·¯å¾åç¼©ææè¾å¥½ã ä»¥å¤ªååå»ºè´¦æ·å¨æ¬å°åå»ºå³å¯ï¼ç±»ä¼¼äºæ¯ç¹å¸ï¼é£ä¹ä¼ä¸ä¼ä¸¤ä¸ªåå»ºçè´¦æ·å°åä¸æ ·å¢ï¼æå¯è½ï¼ä½æ¯æ¯å°ççç¸çå¯è½æ§è¿è¦ä½ï¼å°±æ¯å ä¸ºå°åè¶³å¤é¿ï¼è¶³å¤ç¨çã å®éä¸ï¼å¨ä»¥å¤ªåç§ä½¿ç¨çå¹¶éç®åç patricia treeï¼èæ¯ mpt(merkle patricia tree)\n\nmpt å°±æ¯å°ææè´¦æ·ç»ç»ä¸ºä¸ä¸ªç»è¿è·¯å¾åç¼©åæåºç merkle tree (æéä¸ºåå¸æé)ï¼å¶æ ¹åå¸å¼å­å¨äº block header ä¸­ãæ ¹åå¸å¼çç¨å¤ï¼\n\n 1. é²æ­¢ç¯¡æ¹ã\n 2. æä¾ merkle proof ï¼å¯ä»¥è¯æè´¦æ·ä½é¢ï¼è½»èç¹å¯ä»¥è¿è¡éªè¯ã\n 3. ç»ä¸ä¸ªè´¦æ·è½¬è´¦ä¹åï¼è¯ææä¸ªåçäºäº¤æçè´¦æ·æ¯å¦å­å¨ã\n\nä»¥å¤ªåä¸­éå¯¹ mpt è¿è¡äºä¿®æ¹ï¼æä»¬ç§°å¶ä¸º modified mptã\n\n\n\n * shared nibble(s)ï¼åå­è¿å¶\n * extension nodeï¼æ©å±èç¹ï¼ç»è¿è·¯å¾åç¼©çèç¹\n * leaf nodeï¼å¶å­èç¹\n * branch nodeï¼åæ¯èç¹\n\næ¯æ¬¡åå¸æ°åºåï¼ç¶ææ ä¸­é¨åèç¹ç¶æä¼æ¹åãä½æ¹åå¹¶éå¨åå°ä¿®æ¹ï¼èæ¯æ°å»ºä¸äºåæ¯ï¼ä¿çåæ¬ç¶æãå¦ä¸å¾ä¸­ï¼ä»ä»ææ°åçæ¹åçèç¹æéè¦ä¿®æ¹ï¼å¶ä»æªä¿®æ¹èç¹ç´æ¥æååä¸ä¸ªåºåä¸­çå¯¹åºèç¹ã\n\n\n\næä»¥ï¼ç³»ç»ä¸­å¨èç¹å¹¶éç»´æ¤ä¸æ£µmptï¼èæ¯æ¯æ¬¡åå¸æ°åºåé½è¦æ°å»ºmptãåªä¸è¿å¤§é¨åèç¹å±äº«ã\n\n> ä¸ºä»ä¹è¦ä¿å­åæ¬ç¶æï¼ä¸ºä½ä¸ç´æ¥ä¿®æ¹ï¼ ä¸ºäºä¾¿äºåæ»ãå¦äº§çåååä¸é¢èç¹èåºï¼é£ä¹ä¸é¢èç¹ä¸­ç¶æçä¿®æ¹ä¾¿éè¦è¿è¡åæ»ãå æ­¤ï¼éè¦ç»´æ¤è¿äºåå²è®°å½ã\n\nblock header ä¸­çæ°æ®ç»æ\n\n\n\n * parenthash: ç¶åºåçåå¸ï¼åä¸ä¸ªåºåçåå¸ï¼\n * unclehash: åç¶åºåçåå¸\n * coinbase: ç¿å·¥å°å\n * root: ç¶ææ çæ ¹åå¸å¼\n * txhash: äº¤ææ çæ ¹åå¸å¼\n * receipthash: æ¶æ®æ çæ ¹åå¸å¼\n * bloom: æ´ä¸ªåºååå¤´ç bloom filter\n * difficulty: æç¿é¾åº¦\n * gaslimit: æ±½æ²¹è´¹ï¼ç±»ä¼¼äºæ¯ç¹å¸ä¸­çäº¤æè´¹ï¼ç¸å³\n * gasused: æ±½æ²¹è´¹ï¼ç±»ä¼¼äºæ¯ç¹å¸ä¸­çäº¤æè´¹ï¼ç¸å³\n * time: åºåäº§çæ¶é´\n * mixdigest: æç¿è¿ç¨éæºæ°ç®åºæ¥çåå¸å¼\n * nonce: æç¿æ¶éæºæ°\n\nåºåç»æ\n\n\n\n * header: æå block header çæé\n * uncles: æååç¶åºåçæé\n * transactions: äº¤æåè¡¨\n\nåºåå¨ç½ä¸çæ­£åå¸æ¶çä¿¡æ¯\n\ntype extblock struct {\n    header *header\n    txs    []*transactions\n    uncles []*header\n}\n\n\n> ç¶ææ ä¸­ä¿å­ key-value å¯¹ï¼key å°±æ¯å°åï¼è value ç¶æéè¿ rlp(recursive length prefixï¼ä¸ç§è¿è¡åºååçæ¹æ³) ç¼ç åºåå·ä¹ååè¿è¡å­å¨ã\n\n\n# eth äº¤ææ åæ¶æ®æ \n\næ¯æ¬¡åå¸ä¸ä¸ªåºåæ¶ï¼åºåä¸­çäº¤æä¼å½¢æä¸é¢ merkle treeï¼å³äº¤ææ ãæ­¤å¤ä»¥å¤ªåè¿æ·»å äºä¸ä¸ªæ¶æ®æ ï¼æ¯ä¸ªäº¤ææ§è¡å®ä¹åå½¢æä¸ä¸ªæ¶æ®ï¼è®°å½äº¤æç¸å³ä¿¡æ¯ãäº¤ææ åæ¶æ®æ ä¸çèç¹æ¯ä¸ä¸å¯¹åºçï¼ä¸é½æ¯ mptãmpt çå¥½å¤æ¯æ¯ææ¥æ¾æä½ï¼éè¿é®å¼æ²¿çæ è¿è¡æ¥æ¾å³å¯ã\n\n * å¯¹äºç¶ææ ï¼æ¥æ¾é®å¼ä¸ºè´¦æ·å°åã\n * å¯¹äºäº¤ææ åæ¶æ®æ ï¼æ¥æ¾é®å¼ä¸ºäº¤æå¨åå¸çåºåä¸­çåºå·ã\n\næ¶æ®æ ä½ç¨ï¼å¨ä»¥å¤ªåä¸­æéè¦çåè½æ¯å å¥äºæºè½åçº¦ï¼èæºè½åçº¦çæ§è¡è¿ç¨æ¯è¾å¤æï¼æ¶æ®æ çä½ç¨æ¯å©äºç³»ç»å¿«éæ¥è¯¢æ§è¡ç»æã\n\n\n# å¸éè¿æ»¤å¨(bloom filter)\n\nä½ç¨ï¼å¸éè¿æ»¤å¨å¯ä»¥ç¨äºæ£ç´¢ä¸ä¸ªåç´ æ¯å¦å¨ä¸ä¸ªéåä¸­ãå®çä¼ç¹æ¯ç©ºé´æçåæ¥è¯¢æ¶é´é½è¿è¿è¶è¿ä¸è¬çç®æ³ï¼ç¼ºç¹æ¯æä¸å®çè¯¯è¯å«çåå é¤å°é¾ã\n\n> ç»å®ä¸ä¸ªæ°æ®éï¼å¶ä¸­å«ä¹åç´  aãbãcï¼éè¿ä¸ä¸ªåå¸å½æ° h() å¯¹å¶è¿è¡è®¡ç®ï¼å°å¶æ å°å°ä¸ä¸ªå¶åå§å¨ä¸º 0 ç 128 ä½çåéçæä¸ªä½ç½®ï¼å°è¯¥ä½ç½®ç½®ä¸º 1ãå°ææåç´ å¤çå®ï¼å°±å¯ä»¥å¾å°ä¸ä¸ªåéï¼åç§°è¯¥åéä¸ºåéåç æè¦ãè¯¥ æè¦ æ¯åéåæ¯è¦å°å¾å¤çã åå®æ³è¦æ¥è¯¢ä¸ä¸ªåç´  d æ¯å¦å¨éåä¸­ï¼åè®¾ h(d) æ å°å°åéä¸­çä½ç½®å¤ä¸º 0ï¼è¯´æ dä¸å®ä¸å¨éåä¸­ï¼åè®¾ h(d)æ å°å°åéä¸­çä½ç½®å¤ä¸º 1ï¼å¯è½éåä¸­ç¡®å®æ dï¼ä¹æå¯è½å ä¸ºåå¸ç¢°æäº§çè¯¯æ¥ã ä¸ªäººçè§£å°±æ¯ï¼ä»ä¼åè¯ä½ ææ ·ä¸è¥¿ä¸å®ä¸å­å¨æèå¯è½å­å¨ã\n\n# bloom filter å¨ä»¥å¤ªåä¸­çåºç¨\n\næ¯ä¸ªäº¤æå®æåä¼äº§çä¸ä¸ªæ¶æ®ï¼æ¶æ®åå«ä¸ä¸ª bloom filter è®°å½äº¤æç±»åãå°åç­ä¿¡æ¯ãå¨åºå block header ä¸­ä¹åå«ä¸ä¸ªbloom filterï¼å¶ä¸ºè¯¥åºåä¸­ææäº¤æç bloom filter çä¸ä¸ªå¹¶éã æä»¥ï¼æ¥æ¾æ¶ååæ¥æ¾åå¤´ä¸­ç bloom filterï¼å¦æåå¤´ä¸­åå«ãåæ¥çåºåä¸­åå«çäº¤æç bloom filterï¼å¦æå­å¨ï¼åæ¥çäº¤æè¿è¡ç¡®è®¤ï¼å¦æä¸å­å¨ï¼åè¯´æåçäº ç¢°æã å¥½å¤å°±æ¯éè¿ bloom filter è¿æ ·ä¸ä¸ªç»æï¼å¿«éå¤§éè¿æ»¤æå¤§éæ å³åºåï¼ä»èæé«äºæ¥æ¾æçã\n\n\n# è¡¥å\n\nä»¥å¤ªåå¯¹äºç»å®çå½åç¶æåç»å®ä¸ç»äº¤æå¯ä»¥ç¡®å®æ§çè½¬ç§»å°ä¸ä¸ç¶æï¼è¿ä¸è¿è¡è¿ç¨å¯ä»¥è§ä¸ºäº¤æé©±å¨çç¶ææºï¼éè¿æ§è¡å½ååºåä¸­åå«çäº¤æï¼é©±å¨ç³»ç»ä»å½åç¶æè½¬ç§»å°ä¸ä¸ç¶æãå½ç¶ï¼btc æä»¬ä¹å¯ä»¥è§ä¸ºäº¤æé©±å¨çç¶ææºï¼å¶ç¶æä¸º utxoã\n\né®é¢1ï¼aè½¬è´¦å°bï¼ææ²¡æå¯è½æ¶æ¬¾è´¦æ·ä¸åå«åç¶ææ ä¸­ï¼\n\n> å¯è½ãå ä¸ºä»¥å¤ªåä¸­è´¦æ·å¯ä»¥èç¹èªå·±äº§çï¼åªæå¨äº§çäº¤ææ¶æä¼è¢«ç³»ç»ç¥éã é®é¢2ï¼å¯å¦å°æ¯ä¸ªåºåä¸­ç¶ææ æ´æ¹ä¸ºåªåå«ååºåä¸­äº¤æç¸å³çè´¦æ·ç¶æï¼(å¤§å¹ååç¶ææ å¤§å°ï¼ä¸åäº¤ææ ãæ¶æ®æ ä¿æä¸è´) ä¸è½ãé¦åï¼è¿æ ·è®¾è®¡è¦æ¥æ¾è´¦æ·ç¶æå¾ä¸æ¹ä¾¿ï¼å ä¸ºä¸å­å¨æä¸ªåºååå«ææç¶æãå¶æ¬¡ï¼å¦æè¦åä¸ä¸ªæ°åå»ºè´¦æ·è½¬è´¦ï¼å ä¸ºéè¦ç¥éæ¶æ¬¾è´¦æ·çç¶æï¼æè½ç»å¶æ·»å éé¢ï¼ä½ç±äºå¶æ¯æ°åå»ºçè´¦æ·ï¼ææéè¦ä¸ç´æ¾å°åä¸çºªåæè½ç¥éè¯¥è´¦æ·ä¸ºæ°å»ºè´¦æ·ã\n\n\n# ä»£ç å®ç°\n\nfunc newblock(header *header, txs []*transaction, uncles []*header, receipts []*receipt, hasher triehasher) *block {\n\tb := &block{header: copyheader(header)}\n\n\t// äº¤æåè¡¨æ¯å¦ä¸ºç©º\n\tif len(txs) == 0 {\n        // åå¤´éçäº¤ææ çæ ¹åå¸å¼ä¸ºç©ºåå¸å¼\n\t\tb.header.txhash = emptytxshash\n\t} else {\n        // è°ç¨ derivesha è·å¾æ ¹åå¸å¼\n\t\tb.header.txhash = derivesha(transactions(txs), hasher)\n        // åå»ºäº¤æåè¡¨\n\t\tb.transactions = make(transactions, len(txs))\n\t\tcopy(b.transactions, txs)\n\t}\n\n    // æ¶æ®åè¡¨æ¯å¦ä¸ºç©º\n\tif len(receipts) == 0 {\n        // åå¤´éçæ¶æ®æ çæ ¹åå¸å¼ä¸ºç©ºåå¸å¼\n\t\tb.header.receipthash = emptyreceiptshash\n\t} else {\n        // è°ç¨ derivesha è·å¾æ ¹åå¸å¼\n\t\tb.header.receipthash = derivesha(receipts(receipts), hasher)\n        // åå»º bloom filter\n        // createbloom å½æ°ç¨æ¥åå»º block header ä¸­ç bloom å,\n        // è¿ä¸ª bloom filter ç±è¿ä¸ªåä¸­ææ receiptes ç bloom filter ç»åå¾å°\n\t\tb.header.bloom = createbloom(receipts)\n\t}\n\n    // åç¶åè¡¨æ¯å¦ä¸ºç©º\n\tif len(uncles) == 0 {\n        // åå¤´éçåç¶åºåçåå¸å¼ä¸ºç©ºåå¸å¼\n\t\tb.header.unclehash = emptyunclehash\n\t} else {\n        // éè¿ calcunclehash è®¡ç®åºåå¸å¼\n\t\tb.header.unclehash = calcunclehash(uncles)\n        // éè¿å¾ªç¯æé åºåç¶æ°ç»\n\t\tb.uncles = make([]*header, len(uncles))\n\t\tfor i := range uncles {\n\t\t\tb.uncles[i] = copyheader(uncles[i])\n\t\t}\n\t}\n\n\treturn b\n}\n\n// derivesha å½æ°\nfunc derivesha(list derivablelist) common.hash {\n\tkeybuf := new(bytes.buffer)\n\ttrie := new(trie.trie)\n\tfor i := 0; i < list.len(); i++ {\n\t\tkeybuf.reset()\n\t\trlp.encode(keybuf, uint(i))\n\t\ttrie.update(keybuf.bytes(), list.getrlp(i))\n\t}\n\treturn trie.hash()\n}\n\n// æ¶æ®æ°æ®ç»æ\ntype receipt struct {\n\tpoststate         []byte `json:"root"`\n\tstatus            uint64 `json:"status"`\n\tcumulativegasused uint64 `json:"cumulativegasused" gencodec:"required"`\n\tbloom             bloom  `json:"logsbloom"         gencodec:"required"`\n\tlogs              []*log `json:"logs"              gencodec:"required"`\n\n\ttxhash          common.hash    `json:"transactionhash" gencodec:"required"`\n\tcontractaddress common.address `json:"contractaddress"`\n\tgasused         uint64         `json:"gasused" gencodec:"required"`\n}\n',charsets:{cjk:!0}},{title:"åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  3",frontmatter:{},regularPath:"/blockchain/learn3.html",relativePath:"blockchain/learn3.md",key:"v-fe9d3e02",path:"/blockchain/learn3.html",headers:[{level:2,title:"BTC ä¸­çèç¹",slug:"btc-ä¸­çèç¹",normalizedTitle:"btc ä¸­çèç¹",charIndex:83},{level:3,title:"å¨èç¹",slug:"å¨èç¹",normalizedTitle:"å¨èç¹",charIndex:96},{level:3,title:"è½»èç¹",slug:"è½»èç¹",normalizedTitle:"è½»èç¹",charIndex:349},{level:2,title:"æç¿è®¾å¤æ¼å",slug:"æç¿è®¾å¤æ¼å",normalizedTitle:"æç¿è®¾å¤æ¼å",charIndex:806},{level:2,title:"ç¿æ± ",slug:"ç¿æ± ",normalizedTitle:"ç¿æ± ",charIndex:1351},{level:3,title:"ç¿å·¥å©çåé",slug:"ç¿å·¥å©çåé",normalizedTitle:"ç¿å·¥å©çåé",charIndex:1637},{level:3,title:"å¯è½åºç°çé®é¢",slug:"å¯è½åºç°çé®é¢",normalizedTitle:"å¯è½åºç°çé®é¢",charIndex:2057},{level:3,title:"ç¿æ± çæ°æ®",slug:"ç¿æ± çæ°æ®",normalizedTitle:"ç¿æ± çæ°æ®",charIndex:2419},{level:3,title:"ç¿æ± å¯ä»¥åå¨åªäºæ»å»",slug:"ç¿æ± å¯ä»¥åå¨åªäºæ»å»",normalizedTitle:"ç¿æ± å¯ä»¥åå¨åªäºæ»å»",charIndex:2807},{level:2,title:"BTC èæ¬ç¯",slug:"btc-èæ¬ç¯",normalizedTitle:"btc èæ¬ç¯",charIndex:3194},{level:3,title:"äº¤æç»æ",slug:"äº¤æç»æ",normalizedTitle:"äº¤æç»æ",charIndex:3208},{level:3,title:"èæ¬ä¸¾ä¾è¯´æ",slug:"èæ¬ä¸¾ä¾è¯´æ",normalizedTitle:"èæ¬ä¸¾ä¾è¯´æ",charIndex:4515},{level:3,title:"P2PKï¼Pay to Public Keyï¼",slug:"p2pk-pay-to-public-key",normalizedTitle:"p2pkï¼pay to public keyï¼",charIndex:4736},{level:3,title:"P2PKHï¼Pay to public key hashï¼ââæå¸¸ç¨",slug:"p2pkh-pay-to-public-key-hash-æå¸¸ç¨",normalizedTitle:"p2pkhï¼pay to public key hashï¼ââæå¸¸ç¨",charIndex:5041},{level:3,title:"P2SHï¼Pay to Script Hashï¼",slug:"p2sh-pay-to-script-hash",normalizedTitle:"p2shï¼pay to script hashï¼",charIndex:5554},{level:3,title:"å¤éç­¾å",slug:"å¤éç­¾å",normalizedTitle:"å¤éç­¾å",charIndex:4133},{level:3,title:"ç¨P2SHå®ç°å¤éç­¾å",slug:"ç¨p2shå®ç°å¤éç­¾å",normalizedTitle:"ç¨p2shå®ç°å¤éç­¾å",charIndex:7072},{level:3,title:"Proof of Burnï¼éæ¯BTC",slug:"proof-of-burn-éæ¯btc",normalizedTitle:"proof of burnï¼éæ¯btc",charIndex:7756}],lastUpdated:"6/2/2023, 5:37:21 PM",lastUpdatedTimestamp:1685698641e3,headersStr:"BTC ä¸­çèç¹ å¨èç¹ è½»èç¹ æç¿è®¾å¤æ¼å ç¿æ±  ç¿å·¥å©çåé å¯è½åºç°çé®é¢ ç¿æ± çæ°æ® ç¿æ± å¯ä»¥åå¨åªäºæ»å» BTC èæ¬ç¯ äº¤æç»æ èæ¬ä¸¾ä¾è¯´æ P2PKï¼Pay to Public Keyï¼ P2PKHï¼Pay to public key hashï¼ââæå¸¸ç¨ P2SHï¼Pay to Script Hashï¼ å¤éç­¾å ç¨P2SHå®ç°å¤éç­¾å Proof of Burnï¼éæ¯BTC",content:'# åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  3\n\n * å­¦ä¹ å°åï¼https://www.bilibili.com/video/BV1Vt411X7JF\n\n\n# BTC ä¸­çèç¹\n\n\n# å¨èç¹\n\n * ä¸ç´å¨çº¿\n * å¨æ¬å°ç¡¬çä¸ç»´æ¤å®æ´åºåé¾ä¿¡æ¯\n * å¨åå­ä¸­ç»´æ¤UTXOéåï¼ä»¥ä¾¿äºå¿«éæ£éªäº¤æåæ³æ§\n * çå¬æ¯ç¹å¸ç½ç»ä¸­äº¤æåå®¹ï¼éªè¯æ¯ä¸ªäº¤æåæ³æ§\n * å³å®åªäºäº¤æä¼æåå°åºåä¸­\n * çå¬å¶ä»ç¿å·¥æåºçåºåï¼éªè¯å¶åæ³æ§\n   * åºåä¸­çæ¯ä¸ªäº¤æé½è¦åæ³\n   * åå¸çåºåæ¯ä¸æ¯ç¬¦åé¾åº¦è¦æ±ãé¾åº¦ç®æ éå¼çè®¾ç½®æ¯å¦æ­£ç¡®ãæ¯ä¸¤å¨è°æ´çæç¿é¾åº¦\n   * åºåæ¯å¨å»¶ä¼¸æé¿åæ³é¾\n * æç¿\n   * å³å®æ²¿çåªæ¡é¾æä¸å»\n   * å½åºç°ç­é¿ååï¼éæ©åªä¸ä¸ªåå\n\n\n# è½»èç¹\n\n * ä¸æ¯ä¸ç´å¨çº¿\n * ä¸ä¿å­æ´ä¸ªåºåé¾ï¼åªéè¦ä¿å­æ¯éåºååå¤´\n * ä¸ä¿å­å¨é¨äº¤æï¼åªä¿å­åèªå·±æå³çäº¤æ\n * æ æ³éªè¯å¤§å¤æ°äº¤æåæ³æ§ï¼åªè½æ£éªåèªå·±ç¸å³çäº¤æåæ³æ§\n * æ æ³æ£æµç½ä¸åå¸çåºåæ­£ç¡®æ§\n * å¯ä»¥éªè¯æç¿é¾åº¦\n * åªè½æ£æµåªä¸ªæ¯æé¿é¾ï¼ä¸ç¥éåªä¸ªæ¯æé¿åæ³é¾\n\nå¨æ¯ç¹å¸ç½ç»ä¸­ï¼å¤§å¤æ°èç¹é½æ¯è½»èç¹ãå¦æåªæ¯æ³è¿è¡è½¬è´¦æä½ï¼ä¸éè¦æç¿ï¼å°±æ éè¿è¡ä¸ä¸ªå¨èç¹ãå¨æç¿è¿ç¨ä¸­ï¼å¦æçå¬å°å«äººå·²ç»æåºåºåå»¶ç³äºæé¿åæ³é¾ï¼æ­¤æ¶åºè¯¥ç«å»æ¾å¼å½ååºåï¼å¨æ¬å°éæ°ç»è£ä¸ä¸ªæåæåè¿ä¸ªæ°åæ³åºåçåéåºåï¼éæ°å¼å§æç¿ã\n\nè¿æ ·æ¯ä¸æ¯æäºå¯æï¼ä¹åè±è´¹å¥½å¤èµæºï¼å¨é¨ç½æäºã\n\n> å®éä¸å¹¶ä¸å¯æãä¹åæç« ä¸­æåï¼æç¿æ¬èº«å·ææ è®°å¿æ§ï¼åé¢æ è®ºæå¤ä¹ï¼å¯¹åç»­ç»§ç»­æç¿æ²¡æå½±åã æ¯ç¹å¸ç³»ç»å¦ä½å®å¨æ§ï¼ ä¸æ¯å¯ç å­¦çä¿è¯ï¼å«äººæ²¡æèªå·±çç§é¥ï¼å°±æ æ³ä¼ªé å¶åæ³ç­¾åï¼ä»èæ æ³å°å¶è´¦æ·ä¸BTCè½¬èµ°ãï¼åæï¼ç³»ç»ä¸­å¤§å¤æ°ç®åææ¡å¨å¥½äººæä¸­ï¼ äºæ¯å±è¯æºå¶ï¼ä¿è¯äºæ¶æäº¤æä¸è¢«ç³»ç»æ¿è®¤ã\n\n\n# æç¿è®¾å¤æ¼å\n\nç®åï¼æç¿è®¾å¤éæ¸è¶äºä¸ä¸åï¼å¶ç»åäºä¸ä¸ªè¿ç¨ï¼æ»ä½è¶å¿ä»éç¨å°è¶æ¥è¶ä¸ç¨ã æ®éCPU -> GPU -> ASICè¯çï¼æç¿ä¸ç¨ç¿æºï¼\n\n> å®éä¸ï¼æç¿æ¬èº«å°±æ¯è®¡ç®ï¼å¯¹äºæ®éè®¡ç®æºæ¥è¯´ï¼æç¿è¿ç¨ä¸­å¤§å¤æ°åå­ãç¡¬çãCPUä¸­å¤§å¤æ°é¨ä»¶ï¼ç¨å°æä»¤è¾å°ï¼ç­é½æ¯é²ç½®çï¼å¦æç¨æ®éè®¡ç®æºä¸é¨ç¨äºæç¿æ¯æ ¹æ¬ä¸åç®çãéçæç¿é¾åº¦æé«ï¼ç¨éç¨è®¡ç®æºæç¿å¾å¿«åå¾æ å©å¯å¾ã æä»¥ï¼æç¿è®¾å¤è½¬å¥ç¬¬äºä»£ââGPU(ä¸»è¦ç¨äºå¤§è§æ¨¡å¹¶è¡è®¡ç®ï¼å¦ï¼æ·±åº¦å­¦ä¹ )ãä½æ¯ï¼ç¨GPUæç¿ï¼ä»ç¶æä¸å®æµªè´¹(GPUä¸ºéç¨å¹¶è¡è®¡ç®è®¾è®¡ï¼æç¿ä»ç¶æå¾å¤é¨ä»¶é²ç½®ãä¾å¦ï¼æµ®ç¹æ°è¿ç®é¨ä»¶ï¼æç¿è¿ç¨åªä½¿ç¨æ´æ°æä½ï¼è¯¥é¨åé¨ä»¶æ ¹æ¬ä¸ä¼ç¨å°)ã GPUä»·æ ¼ä¸æ¶¨ï¼ä»ä»æ¯æ·±åº¦å­¦ä¹ ç«ç­å¯¼è´çåï¼å®éä¸ï¼å¾å¤GPUè¢«ç¨äºäºæç¿ã å½ç¶ï¼ç®åGPUæç¿ä¹å·²ç»ä¸åç®äºï¼ç®åä¸äºæ°å¼åè´§å¸ä»ç¶ç¨GPUæç¿ï¼ãæä»¥ï¼å¼å§è¿å¥ç¬¬ä¸ä»£è®¾å¤ï¼ASICè¯çï¼ä¸é¨ä¸ºæç¿è®¾è®¡çè¯çï¼ï¼è¿ç§è¯çä¸é¨ä¸ºæç¿è®¾è®¡ï¼åªè½ç¨äºç¹å®å¸ç§çæç¿ã ä½ASICè¯çè®¾è®¡ãæµçæµç¨å¾é¿ï¼åå¦BTCä»·æ ¼å§çååï¼åææå¥å¾å¯è½ä¼è¡æ¬æ å½ãæä»¥ï¼ASICè¯çéè¦æåé¢è®¢ãåå¦BTCç³»ç»ä¸­ï¼ç®åçªç¶å¾ççå¢å ï¼ä¸è¬æ¯ä¸ä¸ªå¤§çååçäº§åºæ°çASICç¿æºã\n\n\n# ç¿æ± \n\nåä¸ªç¿å·¥æç¿çæ¶çæ¯å¾ä¸ç¨³å®çï¼å¹³ååºåæ¶é´10åéæ¯å¯¹äºæ¯ç¹å¸ç³»ç»ä¸­çææç¿å·¥èè¨çãä¸ä¸ªç¿å·¥ç¨ä¸ä¸ªç¿æºæåºç¿çæ¶é´å¯è½è¦å¾ä¹ï¼å¹¶ä¸é¤äºæç¿ä¹å¤è¿è¦æ¿æå¨ç»ç¹çå¶å®è´£ä»»ã\n\nç¿æ± å°å¾å¤ç¿å·¥ç»ç»èµ·æ¥ï¼ä¸è¬çæ¶æå°±æ¯ä¸ä¸ªç¿ä¸»ï¼pool managerï¼å¨ç»ç¹å»é©±å¨å¾å¤ç¿æºï¼ä¸å±ç¿å·¥åªè´è´£è®¡ç®åå¸å¼ï¼å¨ç»ç¹çå¶å®èè½åªç±ç¿ä¸»æ¥æ¿æãæäºæ¶çä»¥ååå¤§å®¶ä¸èµ·åéã\n\n\n\nå¦æç¿æºæ¥èªä¸åæºæï¼è¿æ¶åç¿å·¥å¾å¯è½åå¸å¨ä¸çåå°ï¼åªæ¯é½å å¥äºè¿ä¸ªç¿æ± ãç¿å·¥åç¿ä¸»èç³»ï¼ç¿ä¸»å°è¦è®¡ç®çåå¸å¼çä»»å¡åéç»ä»ï¼ç¿å·¥è®¡ç®å¥½åå°ç»æåç»ç¿ä¸»ï¼æç»å¾å°åºåå¥å±åä¸èµ·åä¸åçº¢ã\n\n\n# ç¿å·¥å©çåé\n\n 1. å¹³ååéï¼ææäººå¹³ååºåå¥å±ã\n\n> å¤§å®¶ä¸èµ·"åå¤§éé¥­"ï¼ä¼å¯¼è´æäºç¿å·¥ææ ï¼ä¸å¹²æ´»ï¼æç¿è¦è´¹çµï¼éè¦ææ¬ï¼ãåæ­£åä¸å½±åæåå¹³ååéã æä»¥ï¼è¿éä¹éè¦è¿è¡æå³åéï¼éè¦ä¸ä¸ªå·¥ä½éè¯æçæ¹æ¡ãå¦ä½è¯ææ¯ä¸ªç¿å·¥æä½çå·¥ä½éå¢ï¼\n\n 2. éä½æç¿é¾åº¦\n\n> åè®¾åæ¬æç¿é¾åº¦è¦æ±ï¼è®¡ç®æå¾ 126ä½ çåå¸å¼å 70ä½ é½å¿é¡»ä¸º0ï¼ç°å¨éä½è¦æ±ï¼åªéè¦å 60ä½ ä¸º0ï¼è¿æ ·æç¿ä¼æ´å®¹ææå°ãå½ç¶ï¼è¿ä¸ªåå¸æ¯ä¸ä¼è¢«åºåé¾ææ¿è®¤çï¼æä»¬å°å¶ç§°ä¸ºä¸ä¸ª shareï¼æ almost valid shareãç¿å·¥æ¯æå°ä¸ä¸ª shareï¼å°å¶æäº¤ç»ç¿ä¸»ï¼ç¿ä¸»å¯¹å¶è¿è¡è®°å½ï¼ä½ä¸ºç¿å·¥å·¥ä½éçè¯æãç­å°æä¸ªç¿å·¥çæ­£æå°ç¬¦åè¦æ±ççåºååï¼æ ¹æ®ææç¿å·¥æäº¤ç share æ°éè¿è¡åéãå ä¸ºæ¯ä¸ªç¿å·¥å°è¯ç nonce è¶å¤ï¼æå°ç¿çå¯è½æ§è¶å¤§ï¼æè½å¾å°ç share ä¹ä¼è¶å¤ï¼æä»¥è¿ç§æ¹æ¡ä½ä¸ºå·¥ä½éè¯ææ¹æ¡æ¯å¯è¡çã\n\n\n# å¯è½åºç°çé®é¢\n\n 1. ç¿å·¥ä¼ä¸ä¼å¹³æ¶æ­£å¸¸æäº¤ shareï¼ä½çæ­£æå°åºååä¸æäº¤ç»ç¿ä¸»èæ¯èªå·±å·å·åå¸åºå»\n\n> ä¸å¯è½ãå ä¸ºç¿ä¸»å·²ç»ç»è£å¥½äºåºåï¼äº¤ç»ç¿å·¥è®¡ç®ï¼åºåä¸­é¸å¸äº¤æçæ¶æ¬¾äººå°åæ¯ç¿ä¸»ã\n\n 2. é£ä¹ç¿å·¥å¯ä»¥å¯ä»¥æé¸å¸äº¤æçæ¶æ¬¾äººæ¹æèªå·±å¢ï¼\n\n> å¦æèªå·±æé¸å¸äº¤æçå°åæ¹æèªå·±çï¼ç¶åå»æç¿ï¼è¿æ ·æäº¤ä¸å»ç share ç¿ä¸»æ¯ä¸è®¤å¯çï¼æåºæ¥çç¿è½ç¶æ¯èªå·±çï¼ä½æ¯æ´ä½çæ¥å°±æ¯èªå·±åå¹²ï¼æ ¹æ¬æ²¡å¿è¦å å¥ç¿æ± ã\n\n 3. ææ²¡æå¯è½ç¿å·¥æ£ä¹±ï¼å¹³æ¶æäº¤shareï¼ç­æå°åææåºåï¼ä¸æäº¤ï¼\n\n> å¯è½æ¯æï¼å¦æç¿å·¥æ¬èº«ä»ä»æ³æ£ä¹±ï¼æ¯å¯ä»¥è¿ä¹åçãä½ææåºååï¼å¯¹å¶æ¬èº«æ¥è¯´ï¼ä¹æ²¡æç¸åºçå¥å±è·å¾ï¼çä¼¼æ¯æäººä¸å©å·±çæåµã ä½æ¯ï¼ç¿æ± ä¹é´å­å¨ç«äºå³ç³»ãæå¯è½ä¸ºäºæå»ç«äºå¯¹æï¼ä»èèµ·å°æç ´åçä½ç¨ã\n\n\n# ç¿æ± çæ°æ®\n\n\n\nå¦æå­å¨ä¸ä¸ªç¿æ± (GHash.IO)ç®åæ¯ä¾å æ®å¨é¨ç®åä¸åä»¥ä¸ï¼å½æ¶å¼èµ·äºææ(ä¸ä¸ªç¿æ± å°±å¯ä»¥åå¨51æ»å»)ãä¹åï¼è¯¥ç¿æ± ä¸»å¨éä½äºç¿æ± ç®åï¼é¿åå¨æäººä»¬å¯¹æ¯ç¹å¸ä¿¡å¿ã\n\næå¯è½è¡¨é¢çä¸å»æ¯å®å¨çï¼ä½å®éå®ä¸æä¸ªæºæå¦ææè¶è¿50%ç®åï¼å¶å¿ç¶ä¸ä¼å°å¶æ¾å¥ä¸ä¸ªç¿æ± ä¸­ãèæ¯å°å¶åæ£éèï¼çæ­£éè¦åå¨æ»å»æ¶ååéä¸­èµ·æ¥åå¨æ»å»\n\n> ç±è¿äºæ°æ®å¯ä»¥å¾ç¥ï¼ç¿æ± æ¬èº«å¯¹ BTC ç³»ç»å¸¦æ¥äºè¾å¤§å¨èãæä¸ªæ¶æç¨æ·å¦ææ³åå¨æ»å»ï¼ä»¥åéè¦èªå·±è¾¾å° 51% ç®åï¼ç°å¨èªå·±åªéè¦ä½ä¸ºç¿ä¸»ï¼åªéè¦å¾å°ä¸é¨åç®åå°±å¯ä»¥äºãåªè¦è½å¤å¸å¼å°è¶³å¤å¤çä¸æçç¸çç¿å·¥ï¼ä¾¿å¯ä»¥ç¨è¾ä½ææ¬å®ç°æ»å»ã å½ç¶ï¼ç¿ä¸»ç»éªç®¡çç¿æ± ï¼ä¹éè¦æ¶åä¸å®æ¯ä¾(åºåå¥å±ãäº¤æè´¹)ä½ä¸ºç®¡çè´¹ç¨ãå¦ææ¶æèæ³è¦æ»å»ç³»ç»ï¼ä¼å°ç®¡çè´¹éä½çè³èµæ¬å¸å¼è¶³å¤å¤ç¿å·¥å å¥ãè¿ä¾¿ä½¿å¾åå¨æ»å»åå¾å®¹æäºèµ·æ¥ã\n\n\n# ç¿æ± å¯ä»¥åå¨åªäºæ»å»\n\n 1. ååæ»å»: å¯¹å·²ç»ç»è¿6æ¬¡ç¡®è®¤çäº¤æååï¼å©ç¨51%ç®åå°äº¤æè®°å½åæ»ã\n\n> ç¿å·¥åªè½è®¡ç®åå¸å¼ï¼å¹¶ä¸ç¥éåºååå«åªäºäº¤æï¼åºåé¾ç¶åµæ¯ä»ä¹ï¼æä»¥å®¹æè¢«å©ç¨ã æ­¤å¤ï¼51%æ»å»åªæ¯ä¸ä¸ªæ¦çé®é¢ï¼å¹¶éè¾¾å°51%ç®åå°±è½åå¨æ»å»ï¼ä¸è½è¾¾å°å°±æ æ³åå¨æ»å»ãæ­¤å¤ï¼ç¿æ± æ¬èº«ç®åä¹æ¯å¨ä¸æ­ååçã\n\n 2. å°éäº¤æ\n\n> åå¦æ»å»èä¸åæ¬¢æä¸ªè´¦æ·Aï¼ä¸æ³è®©Açäº¤æä¸åºåé¾ï¼å¨çå¬å°æå¶ä»äººå°Açäº¤æåå¸å°åºåé¾ä¸æ¶ï¼ç«å»åå¨ååæ»å»ï¼ä½¿Aæå¨é¾æ æ³æä¸ºæé¿åæ³é¾ãè¿æ ·ï¼ä¾¿å®ç°äºå¯¹Aè´¦æ·çå°éãå¶ä»ç¿å·¥å ä¸ºå®³æï¼å¯è½ä¹ä¸ä¼å°Açäº¤æè®°å½ä¸æ¥ã\n\n 3. å·å¸\n\n> è¿ä¸ªæ¯ä¸å¯è½çï¼å ä¸ºå¶å¹¶æ²¡æä»äººè´¦æ·ç§é¥ãå¦æä¾ä»ç®åå¼ºï¼å¼ºè¡å°æ²¡æç­¾åçè½¬è´¦åå¸å°åºåé¾ï¼æ­£å¸¸èç¹ä¸ä¼è®¤ä¸ºå¶åæ³ï¼è¿æ ·ï¼å³ä½¿è¿æ¡é¾åé¿ï¼å¶ä»äººä¹ä¸ä¼è®¤ä¸ºå¶æ¯æé¿åæ³é¾ã\n\n\n# BTC èæ¬ç¯\n\n\n\n\n# äº¤æç»æ\n\n"result": {\n  "txid": "921a.dd24", // äº¤æid\n  "hash": "921a.dd24", // äº¤æçåå¸å¼\n  "version": 1, // ä½¿ç¨çæ¯ç¹å¸åè®®çæ¬å·\n  "size": 226, // äº¤æçå¤§å°\n  "locktime": 0, // äº¤æççææ¶é´ï¼0ä»£è¡¨ç«å³çæï¼é0ä»£è¡¨ç»è¿å ä¸ªåºååæåè®¸ä¸é¾\n  "vin": [...], // äº¤æçè¾å¥\n          "vout": [...], // äº¤æçè¾åº\n  "blockhash": "0000000000000000002c510d..5c0b", // äº¤ææå¨åºåçåå¸å¼\n  "confirmations": 23, // ç®åå·²ç»æå ä¸ªç¡®è®¤ï¼åæ¬èªå·±åå¶åé¢æå¤å°åºåä¸é¾\n  "time": 1530846727, // äº¤æäº§ççæ¶é´æ³\n  "blocktime": 1530846727 // è¯¥äº¤ææå¨çåºåçäº§çæ¶é´\n}\n\n// äº¤æçè¾å¥ï¼æ¯ä¸ä¸ªæ°ç»ï¼å¯ä»¥æå¤ä¸ªè¾å¥ï¼æ¯ä¸ªè¾å¥é½è¦æææ¥æºï¼å¹¶ç»åºç­¾åã\n"vin": [{\n  "txid": "c0cb...c57b",// è¯¥è¾å¥çæ¥æºäº¤æçåå¸å¼\n  "vout": 0, // è¯¥è¾å¥å¯¹åºãæ¥æºäº¤æãçç¬¬å ä¸ªè¾åºãæ¯ä¸ä¸ªç´¢å¼å¼\n  "scriptsig": { // è¾å¥èæ¬ï¼è¿éæ¯æç®åçå½¢å¼ï¼åªæç­¾å    \n    "asm": "3045...0018",\n    "hex": "4830...0018"\n  }\t\n}],\n\n// äº¤æçè¾åº\n"vout":[{\n  "va1ue": 0.22684000, // éé¢ï¼å³è½¬è¿å»å¤å°BTC\n  "n": 0, // åºå·ï¼è¡¨ç¤ºè¿ä¸ªè¾åºå¨è¿ä¸ªäº¤æä¸­çç´¢å¼\n  "scriptPubKey": { // è¾åºèæ¬\n    "asm": "DUP HASH160 628e...d/43 EQUALVERTFY CHECKSTG",\n    "hex": "76a9.88ac",\n    "regsigs": 1, // è¿ä¸ªè¾åºéè¦å¤å°ä¸ªç­¾åæè½åç°ï¼æçè¾åºéè¦å¤éç­¾å\n    "type": "pubkeyhash", // è¾åºçç±»åï¼æ­¤å¤ pubkeyhash æ¯å¬é¥çåå¸\n    "addresses": ["19z8LJkNXLrTv2QK5jgTncJCGUEEfpQvSr"] // è¾åºçå°å\n  }\n},{\n  "va1ue": 0.53756644,\n  "n": 1,\n  "scriptPubKey": {\n    "asm": "DUP HASH160 da7d...2cd2 EQUALVERIFY CHECKSIG",\n    "hex": "76a9.88ac",\n    "regsigs": 1,\n    "type": "pubkeyhash",\n    "addresses": ["1LVGTpdyeVLCLCDK2m9f7Pbh7zwhs7NYhX"]\n  }\n}]\n\n\n\n# èæ¬ä¸¾ä¾è¯´æ\n\n\n\n> å¨æ©æçæ¯ç¹å¸ç³»ç»ä¸­ï¼B->C è¿ä¸ªäº¤æçè¾å¥èæ¬å A->B è¿ä¸ªäº¤æçè¾åºèæ¬æ¼å¨ä¸èµ·æ§è¡ã åæ¥ï¼åºäºå®å¨å ç´ çèèï¼è¿ä¸¤ä¸ªèæ¬æ¹ä¸ºåå«æ§è¡ï¼é¦åæ§è¡è¾å¥èæ¬ï¼å¦ææ²¡æåºéï¼é£ä¹åæ§è¡è¾åºèæ¬ï¼å¦æè½é¡ºå©æ§è¡ï¼å¹¶ä¸æåå¾å°éé¶å¼ï¼trueï¼ï¼é£ä¹è¿ä¸ªäº¤æå°±æ¯åæ³çã å¦æä¸ä¸ªäº¤ææå¤ä¸ªè¾å¥ï¼æ¯ä¸ªè¾å¥èæ¬é½è¦å»æ¾å°åé¢ç¹å®åºåä¸­æå¯¹åºçè¾åºèæ¬ï¼å¹éä¹åæ¥è¿è¡éªè¯ãå¨é¨éªè¯éè¿åï¼è¿ä¸ªäº¤æææ¯åæ³çã\n\n\n# P2PKï¼Pay to Public Keyï¼\n\ninput script:\n\tPUSHDATA(Sig) # è¾å¥èæ¬ä¸­ç´æ¥ç»åºç­¾åï¼æ¶æ¬¾äººç¨èªå·±çç§é¥å¯¹è¾å¥èæ¬æå¨çæ´ä¸ªäº¤æçç­¾åï¼\noutput script:\n\tPUSHDATA(PubKey) # è¾åºèæ¬ä¸­ç´æ¥ç»åºæ¶æ¬¾äººçå¬é¥\n\tCHECKSIG # æåç CHECKSIG æ¯æ£æ¥ç­¾å\n\n\nå¥æ æ§è¡è¿ç¨ï¼\n\n 1. ç¬¬ä¸æ¡è¯­å¥ï¼å°è¾å¥èæ¬ä¸­çç­¾ååå¥æ \n 2. ç¬¬äºæ¡è¯­å¥ï¼å°è¾åºèæ¬ä¸­çå¬é¥åå¥æ \n 3. ç¬¬ä¸æ¡è¯­å¥ï¼å¼¹åºæ é¡¶çä¸¤ä¸ªåç´ ï¼ç¨å¬é¥ PubKey æ£æ¥ä¸ä¸ç­¾å Sig æ¯å¦æ­£ç¡®ãå¦ææ­£ç¡®ï¼è¿åTrueï¼è¯´æéªè¯éè¿\n\n\n\n\n# P2PKHï¼Pay to public key hashï¼ââæå¸¸ç¨\n\ninput script:\n\tPUSHDATA(Sig) # ç»åºç§é¥ç­¾å\n\tPUSHDATA(PubKey) # ç»åºå¬é¥\noutput script:\n\tDUP\n\tHASH160\n\tPUSHDATA(PubKeyHash) # è¾åºèæ¬ä¸­æ²¡æç»åºæ¶æ¬¾äººçå¬é¥ï¼ç»åºçæ¯å¬é¥çåå¸å¼ã\n\tEQUALVERIEY\n\tCHECKSIG\n\n\nå¥æ æ§è¡è¿ç¨ï¼\n\n 1. ç¬¬ä¸æ¡è¯­å¥ï¼å°è¾å¥èæ¬ä¸­çç­¾ååå¥æ \n 2. ç¬¬äºæ¡è¯­å¥ï¼å°è¾å¥èæ¬ä¸­çå¬é¥åå¥æ \n 3. ç¬¬ä¸æ¡è¯­å¥ï¼å°æ é¡¶åç´ å¤å¶ä¸éï¼æä»¥ååå¥äºä¸æ¬¡å¬é¥ï¼\n 4. ç¬¬åæ¡è¯­å¥ï¼å°æ é¡¶åç´ ååºæ¥ååå¸ï¼åå°å¾å°çåå¸å¼åå¥æ ï¼ä¹å°±æ¯å°æ é¡¶çå¬é¥åæäºå¶åå¸å¼ï¼\n 5. ç¬¬äºæ¡è¯­å¥ï¼å°è¾åºèæ¬ä¸­æä¾çå¬é¥çåå¸å¼åå¥æ \n 6. ç¬¬å­æ¡è¯­å¥ï¼å¼¹åºæ é¡¶çä¸¤ä¸ªåç´ ï¼é½æ¯å¬é¥çåå¸å¼ï¼ï¼æ¯è¾å®ä»¬æ¯å¦ç¸ç­ââé²æ­¢æäººç¨èªå·±çå¬é¥ååå¸çæ¥æºçäº¤æçæ¶æ¬¾äººçå¬é¥\n 7. ç¬¬ä¸æ¡è¯­å¥ï¼å¼¹åºæ é¡¶çä¸¤ä¸ªåç´ ï¼å¬é¥åç­¾åï¼ï¼ç¨å¬é¥PubKeyæ£æ¥ä¸ä¸ç­¾åSigæ¯å¦æ­£ç¡®ãå¦ææ­£ç¡®ï¼è¿åTrueï¼è¯´æéªè¯éè¿\n\n\n# P2SHï¼Pay to Script Hashï¼\n\nè¿ç§å½¢å¼ä¸è¾åºèæ¬ç»åºçä¸æ¯æ¶æ¬¾äººçå¬é¥çåå¸ï¼èæ¯æ¶æ¬¾äººæä¾çèµåèæ¬ï¼Redeem Scriptï¼çåå¸ãæä»¬ä¸¾ä¸ªä¾å­å°±æç½äºã\n\nredeemScript: # èµåèæ¬(æ¶æ¬¾äººä¼å¬å¼)\n\tPUSHDATA(PubKey)\n\tCHECKSIG\ninput script:\n\tPUSHDATA(Sig) # ç»åºç§é¥ç­¾å\n\tPUSHDATA(serialized redeemScript) # ç»åºåºååçèµåèæ¬\noutput script:\n\tHASH160\n\tPUSHDATA(redeemscriptHash)\n\tEQUAL\n\n\nå¥æ æ§è¡è¿ç¨\n\n * ç¬¬ä¸é¶æ®µ\n   * ç¬¬ä¸æ­¥ï¼å°è¾å¥èæ¬ä¸­çäº¤æç­¾ååå¥æ \n   * ç¬¬äºæ­¥ï¼å°è¾å¥èæ¬ä¸­ç»åºçèµåèæ¬åå¥æ \n   * ç¬¬ä¸æ­¥ï¼å¼¹åºæ é¡¶åç´ ååå¸ååæ ï¼ä¹å°±å¾å°äºèµåèæ¬çåå¸ï¼Redeem Script Hashï¼\n   * ç¬¬åæ­¥ï¼å°è¾åºèæ¬ä¸­ç»åºçèµåèæ¬çåå¸å¼åå¥æ \n   * ç¬¬äºæ­¥ï¼æ¯è¾æ é¡¶ä¸¤ä¸ªåç´ æ¯å¦ç¸ç­ï¼ç¸å½äºç¨ä¹åçè¾åºèæ¬ç»åºçèµåèæ¬åå¸ï¼éªè¯äºè¾å¥èæ¬æä¾çèµåèæ¬æ¯å¦æ¯æ­£ç¡®ç\n * ç¬¬äºé¶æ®µï¼ååºååå¹¶æ§è¡redeemScriptï¼éªè¯input scriptä¸­ç»åºçç­¾åæ¯å¦æ­£ç¡®ï¼\n   * ç¬¬ä¸æ­¥ï¼å°èæ¬ä¸­åæ­»çå¬é¥åå¥æ \n   * ç¬¬äºæ­¥ï¼éªè¯è¾å¥èæ¬ä¸­ç»åºçäº¤æç­¾åçæ­£ç¡®æ§ãéªè¯éè¿å°±ä¼è¿å True\n\n\n# å¤éç­¾å\n\nP2SHå¸¸è§çåºç¨åºæ¯å°±æ¯å¯¹å¤éç­¾åçæ¯æ\n\næ¯ç¹å¸ç³»ç»ä¸­ä¸ä¸ªäº¤æè¾åºå¯è½è¦æ±ä½¿ç¨å®çäº¤æè¾å¥æä¾å¤ä¸ªç­¾åï¼æè½æBTCååºæ¥ãæ¯å¦æä¸ªå¬å¸å¯è½è¦æ±5ä¸ªåä¼äººä¸­çä»»æä¸ä¸ªæä¾ç­¾åï¼æè½æå¬å¸çé±è½¬èµ°ãè¿æ ·è®¾è®¡ä¸ä½ä¸ºç§é¥çæ³é²æä¾äºä¸å®å®å¨æ§ä¿æ¤ï¼ä¹ä¸ºç§é¥çä¸¢å¤±æä¾äºä¸å®çå®¹éæ§ã\n\ninputScript:\n\tX # å¨è¾å¥èæ¬éå¾æ ä¸­æ·»å ä¸ä¸ªæ²¡ç¨çåç´ ï¼æµæ¶æBTCå¶ä¸­çä¸ä¸ªbugã\n\tPUSHDATA(Sig 1)\n\tPUSHDATA(Sig 2)\n\tPUSHDATA(Sig M)\noutputScript:\n\tM\n\tPUSHDATA(pubkey_1)\n\tPUSHDATA(pubkey_2)\n\t...\n\tPUSHDATA(pubkey N)\n\tN\n\tCHECKMULTISIG\n\n\n> ä¸ºä»ä¹ä¸æè¿ä¸ª bug ä¿®å¤äºå¢ï¼å»ä¸­å¿åçç³»ç»åä¸­å¿åçç³»ç»ä¸ä¸æ ·ãä¸­å¿åçç³»ç»å¯ä»¥åå¸å¾å¤çæ¬ï¼å»ä¸­å¿åçç³»ç»ä¿®æ¹çæ¬åä¼äº§çç¡¬ååã\n\nå¥æ æ§è¡è¿ç¨\n\n 1. ç¬¬ä¸æ­¥ï¼å°è¾å¥èæ¬ä¸­çå¤ä½åç´ ï¼åè¿°çXï¼åæ \n 2. ç¬¬äºæ­¥ï¼å°è¾å¥èæ¬éç M ä¸ªç­¾åä¾æ¬¡åå¥æ ä¸­ï¼è¿é M=2ï¼\n 3. ç¬¬ä¸æ­¥ï¼å°è¾åºèæ¬ä¸­ç»å®çéå¼ M åæ \n 4. ç¬¬åæ­¥ï¼å°è¾åºèæ¬ä¸­ç»å®ç N ä¸ªå¬é¥åæ \n 5. ç¬¬äºæ­¥ï¼å°è¾åºèæ¬ä¸­ç»å®çå¬é¥æ° N åæ \n 6. ç¬¬å­æ­¥ï¼æ§è¡ CEHCKMULTISIGï¼ä»¥æ£æ¥å æ ä¸­æ¯å¦æé¡ºåºåå«äº N ä¸ªç­¾åä¸­ç M ä¸ª\n\n> è¿æ¯ææ©çå¤éç­¾åï¼å¹¶æ²¡æç¨å° P2SHï¼å°±æ¯ç¨æ¯ç¹å¸èæ¬ä¸­åçç CEHCKMULTISIG å®ç°çã è¿æ ·å¨å®éä½¿ç¨æ¶æäºä¸æ¹ä¾¿çå°æ¹ï¼ä¾å¦çµåç½ç«å¼éäºæ¯ç¹å¸æ¯ä»æ¸ éï¼ä½è¦æ±è¦æ5ä¸ªåä¼äººä¸­3ä¸ªäººçç­¾åæè½æ BTC è½¬èµ°ãä½è¿æ ·åä¹åï¼ç¨æ·å¨ BTC æ¯ä»çæ¶åï¼çæçè½¬è´¦äº¤æéä¹ç»åº 5 ä¸ªåä¼äººçå¬é¥ï¼åæ¶è¿è¦ç»åºNåMçå¼ã èè¿äºå¬é¥ï¼ä»¥å N å M çå¼å°±è¦çµåç½ç«å¬å¸ç»ç¨æ·ï¼èä¸ä¸åççµåç½ç«è§åä¹ä¸ä¸æ ·ï¼è¿å°±è®©ç¨æ·çæè½¬è´¦äº¤æåå¾ä¸æ¹ä¾¿ãå ä¸ºè¿äºå¤ææ§é½æ´é²ç»ç¨æ·äº\n\n\n# ç¨P2SHå®ç°å¤éç­¾å\n\nç¸æ¯åé¢çå®ç°ï¼è¿æ ·çæ¬è´¨æ¯å°å¤ææ§ä»è¾åºèæ¬è½¬ç§»å°äºèµåèæ¬ä¸­ï¼è¾åºèæ¬åªéè¦ç»åºèµåèæ¬çåå¸å¼å°±è¡äºãNä¸ªå¬é¥ä»¥åNãMçå¼é½å¨èµåèæ¬ä¸­ç»åºæ¥ï¼èèµåèæ¬ç±è¾å¥èæ¬æä¾ï¼è¿æ ·ä¹å°±åæ¯ä»ç»å®çç¨æ·ä»¬éç¦»å¼äºã\n\n> ä»ç¨æ·çè§åº¦æ¥çï¼éç¨è¿ç§P2SHçæ¯ä»æ¹å¼ï¼åP2PKHæ¯ä»æ¹å¼æ²¡æå¤å¤§åºå«ï¼åªä¸è¿è¾åºèæ¬ä¸­çæ¯èµåèæ¬çåå¸å¼èä¸æ¯å¬é¥çåå¸å¼ è¾å¥èæ¬å°±æ¯çµåç½ç«è¦æè¿ç¬BTCè½¬åºå»æ¶åç¨çï¼è¿ç§æ¹å¼ä¸è¾å¥èæ¬è¦åå«Mä¸ªç­¾åï¼ä»¥åèµåèæ¬çåºååçæ¬ã å¦æçµåå°æ¥æ¹åäºéç¨çå¤éç­¾åè§åï¼å°±åªéè¦æ¹åä¸ä¸èµåèæ¬çåå®¹åè¾å¥èæ¬ä¸­çåå®¹ï¼ç¶åææ°çèµåèæ¬çåå¸å¼å¬å¸åºå»å°±å¯ä»¥äºãå¯¹ç¨æ·èè¨ä¹åªæ¯ä»æ¬¾æ¶åè¾åºèæ¬ä¸­è¦åå«çåå¸å¼åçäºååã\n\nå¥æ æ§è¡è¿ç¨ï¼\n\n * ç¬¬ä¸é¶æ®µ\n   * ç¬¬ä¸æ­¥ï¼å°å ä½åç´  X åæ \n   * ç¬¬äºæ­¥ï¼å°è¾å¥èæ¬ä¸­çMä¸ªç­¾ååæ \n   * ç¬¬ä¸æ­¥ï¼å°è¾å¥èæ¬ä¸­ä¿å­çåºååçèµåèæ¬åæ \n   * ç¬¬åæ­¥ï¼å¼¹åºæ é¡¶åç´ ååå¸ååæ ï¼å³å°æ é¡¶çèµåèæ¬ååå¸\n   * ç¬¬äºæ­¥ï¼å°è¾åºèæ¬ä¸­ç»åºçèµåèæ¬åå¸å¼ï¼RSHï¼åæ \n   * ç¬¬å­æ­¥ï¼å¤æ­æ é¡¶ä¸¤ä¸ªåç´ æ¯å¦ç¸ç­ï¼å³å¤æ­ä¸ä¸è®¡ç®åºçèµåèæ¬åå¸åç»å®çèµåèæ¬åå¸æ¯å¦ç¸ç­\n * ç¬¬äºé¶æ®µï¼æ§è¡ redeem scriptï¼\n   * ç¬¬ä¸æ­¥ï¼å°ç­¾åæ° M åæ \n   * ç¬¬äºæ­¥ï¼å° N ä¸ªå¬é¥åæ \n   * ç¬¬ä¸æ­¥ï¼å°ç»å®çå¬é¥æ° N åæ \n   * ç¬¬åæ­¥ï¼ä½¿ç¨CEHCKMULTISIGæä½æ£æ¥å¤éç­¾åçæ­£ç¡®æ§\n\n\n\n\n# Proof of Burnï¼éæ¯BTC\n\nä¸ä¸ªç¹æ®çèæ¬, ä»¥ RETURN å¼å§ï¼åé¢å¯ä»¥è·ä»»ä½åå®¹ãRETURN æä½ï¼æ æ¡ä»¶è¿åéè¯¯ï¼æä»¥è¯¥èæ¬æ°¸è¿ä¸å¯è½éè¿éªè¯ãæ§è¡å°RETURNï¼åç»­æä½ä¸ä¼åæ§è¡ãè¯¥æ¹æ³æ¯éæ¯æ¯ç¹å¸çä¸ç§æ¹æ³ã ä¸ºä»ä¹è¦éæ¯æ¯ç¹å¸ï¼ç°å¨æ¯ç¹å¸ä»·å¼æé«ï¼éæ¯æ¯ä¸æ¯å¾å¯æï¼\n\n 1. é¨åå°å¸ç§(AltCoin)è¦æ±éæ¯é¨åæ¯ç¹å¸æè½å¾å°è¯¥ç§å°å¸ç§ã\n 2. å¾åºåé¾ä¸­åå¥åå®¹ãæä»¬ç»å¸¸è¯´ï¼åºåé¾æ¯ä¸å¯ç¯¡æ¹çè´¦æ¬ï¼æäººä¾¿å©ç¨è¯¥ç¹æ§å¾å¶ä¸­æ·»å æ³è¦æ°¸ä¹ä¿å­çåå®¹ãä¾å¦ï¼ç¥è¯äº§æä¿æ¤ââç¥è¯äº§æçåå¸å¼ã\n\n> é¸å¸äº¤æç CoinBase åä¹å¯ä»¥éä¾¿åä»ä¹åå®¹ï¼ä¸ºä»ä¹ä¸å¨é£éåå¢ï¼å ä¸ºè¿ç§æ¹æ³å¾é¾ï¼å¿é¡»è¦è·å¾è®°è´¦æãç¶èåå¸äº¤æä¸éè¦æè®°è´¦æã ä»»ä½ç¨æ·é½å¯ä»¥ç¨ Proof of Burn çæ¹æ³ï¼éæ¯æå°éçæ¯ç¹å¸ï¼æ¢ååæ¯ç¹å¸ç³»ç»çåºåé¾ä¸­åå¥ä¸äºåå®¹çæºä¼ãæ²¡æéæ¯æ¯ç¹å¸ï¼ä»ä»æ¯ä»äºäº¤æè´¹ï¼ä¹å¯ä»¥ååºåé¾ä¸­åå¥åå®¹ã\n\nä¾å¦ä¸å¾ä¸ºä¸ä¸ªé¸å¸äº¤æï¼å¶ä¸­åå«ä¸¤ä¸ªäº¤æï¼ç¬¬äºä¸ªäº¤æä¾¿æ¯ä»ä»æ³è¦å¾å¶ä¸­åå¥åå®¹ã\n\nä¸å¾ä¸ºä¸ä¸ªæ®éçè½¬è´¦äº¤æï¼å¶å°±æ¯ä»ä»ä¸ºäºååºåé¾åå¥åå®¹ãè¯¥äº¤æå¹¶æªéæ¯ BTCï¼åªæ¯å°è¾å¥çè´¹ç¨ä½ä¸ºäº¤æè´¹ç»äºæå°ç¿çç¿å·¥ãè¿ç§äº¤ææ°¸è¿ä¸ä¼åç°ï¼æä»¥ç¿å·¥ä¸ä¼å°å¶ä¿å­å¨ UTXO ä¸­ï¼å¯¹å¨èç¹æ¯è¾åå¥½ã\n\n\n\n> BTCç³»ç»ä¸­ä½¿ç¨çèæ¬è¯­è¨å¾ç®åï¼å®ä¹ä¸æ¯å¾çµå®å¤çè¯­è¨ï¼çè³ä¸æ¯æå¾ªç¯ï¼è¿æ ·è®¾è®¡ä¹æå¶ç¨æï¼ä¸æ¯æå¾ªç¯ä¹å°±ä¸ä¼ææ­»å¾ªç¯ãåé¢å­¦çä»¥å¤ªåçèæ¬è¯­è¨å°±æ¯å¾çµå®å¤çï¼è¿æ ·å°±é å¶å®æºå¶æ¥é²æ­¢è¿å¥æ­»å¾ªç¯ç­ã\n\nBTCçèæ¬è¯­è¨éå¯¹BTCåºç¨åºæ¯åäºå¾å¥½çä¼åï¼å¦æ£æ¥å¤éç­¾åæ¶ç CHECKMULTISIG æä½ä¸æ¡å°±è½å®ç°ï¼è¿æ¯å¶å¼ºå¤§ä¹å¤ã',normalizedContent:'# åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  3\n\n * å­¦ä¹ å°åï¼https://www.bilibili.com/video/bv1vt411x7jf\n\n\n# btc ä¸­çèç¹\n\n\n# å¨èç¹\n\n * ä¸ç´å¨çº¿\n * å¨æ¬å°ç¡¬çä¸ç»´æ¤å®æ´åºåé¾ä¿¡æ¯\n * å¨åå­ä¸­ç»´æ¤utxoéåï¼ä»¥ä¾¿äºå¿«éæ£éªäº¤æåæ³æ§\n * çå¬æ¯ç¹å¸ç½ç»ä¸­äº¤æåå®¹ï¼éªè¯æ¯ä¸ªäº¤æåæ³æ§\n * å³å®åªäºäº¤æä¼æåå°åºåä¸­\n * çå¬å¶ä»ç¿å·¥æåºçåºåï¼éªè¯å¶åæ³æ§\n   * åºåä¸­çæ¯ä¸ªäº¤æé½è¦åæ³\n   * åå¸çåºåæ¯ä¸æ¯ç¬¦åé¾åº¦è¦æ±ãé¾åº¦ç®æ éå¼çè®¾ç½®æ¯å¦æ­£ç¡®ãæ¯ä¸¤å¨è°æ´çæç¿é¾åº¦\n   * åºåæ¯å¨å»¶ä¼¸æé¿åæ³é¾\n * æç¿\n   * å³å®æ²¿çåªæ¡é¾æä¸å»\n   * å½åºç°ç­é¿ååï¼éæ©åªä¸ä¸ªåå\n\n\n# è½»èç¹\n\n * ä¸æ¯ä¸ç´å¨çº¿\n * ä¸ä¿å­æ´ä¸ªåºåé¾ï¼åªéè¦ä¿å­æ¯éåºååå¤´\n * ä¸ä¿å­å¨é¨äº¤æï¼åªä¿å­åèªå·±æå³çäº¤æ\n * æ æ³éªè¯å¤§å¤æ°äº¤æåæ³æ§ï¼åªè½æ£éªåèªå·±ç¸å³çäº¤æåæ³æ§\n * æ æ³æ£æµç½ä¸åå¸çåºåæ­£ç¡®æ§\n * å¯ä»¥éªè¯æç¿é¾åº¦\n * åªè½æ£æµåªä¸ªæ¯æé¿é¾ï¼ä¸ç¥éåªä¸ªæ¯æé¿åæ³é¾\n\nå¨æ¯ç¹å¸ç½ç»ä¸­ï¼å¤§å¤æ°èç¹é½æ¯è½»èç¹ãå¦æåªæ¯æ³è¿è¡è½¬è´¦æä½ï¼ä¸éè¦æç¿ï¼å°±æ éè¿è¡ä¸ä¸ªå¨èç¹ãå¨æç¿è¿ç¨ä¸­ï¼å¦æçå¬å°å«äººå·²ç»æåºåºåå»¶ç³äºæé¿åæ³é¾ï¼æ­¤æ¶åºè¯¥ç«å»æ¾å¼å½ååºåï¼å¨æ¬å°éæ°ç»è£ä¸ä¸ªæåæåè¿ä¸ªæ°åæ³åºåçåéåºåï¼éæ°å¼å§æç¿ã\n\nè¿æ ·æ¯ä¸æ¯æäºå¯æï¼ä¹åè±è´¹å¥½å¤èµæºï¼å¨é¨ç½æäºã\n\n> å®éä¸å¹¶ä¸å¯æãä¹åæç« ä¸­æåï¼æç¿æ¬èº«å·ææ è®°å¿æ§ï¼åé¢æ è®ºæå¤ä¹ï¼å¯¹åç»­ç»§ç»­æç¿æ²¡æå½±åã æ¯ç¹å¸ç³»ç»å¦ä½å®å¨æ§ï¼ ä¸æ¯å¯ç å­¦çä¿è¯ï¼å«äººæ²¡æèªå·±çç§é¥ï¼å°±æ æ³ä¼ªé å¶åæ³ç­¾åï¼ä»èæ æ³å°å¶è´¦æ·ä¸btcè½¬èµ°ãï¼åæï¼ç³»ç»ä¸­å¤§å¤æ°ç®åææ¡å¨å¥½äººæä¸­ï¼ äºæ¯å±è¯æºå¶ï¼ä¿è¯äºæ¶æäº¤æä¸è¢«ç³»ç»æ¿è®¤ã\n\n\n# æç¿è®¾å¤æ¼å\n\nç®åï¼æç¿è®¾å¤éæ¸è¶äºä¸ä¸åï¼å¶ç»åäºä¸ä¸ªè¿ç¨ï¼æ»ä½è¶å¿ä»éç¨å°è¶æ¥è¶ä¸ç¨ã æ®écpu -> gpu -> asicè¯çï¼æç¿ä¸ç¨ç¿æºï¼\n\n> å®éä¸ï¼æç¿æ¬èº«å°±æ¯è®¡ç®ï¼å¯¹äºæ®éè®¡ç®æºæ¥è¯´ï¼æç¿è¿ç¨ä¸­å¤§å¤æ°åå­ãç¡¬çãcpuä¸­å¤§å¤æ°é¨ä»¶ï¼ç¨å°æä»¤è¾å°ï¼ç­é½æ¯é²ç½®çï¼å¦æç¨æ®éè®¡ç®æºä¸é¨ç¨äºæç¿æ¯æ ¹æ¬ä¸åç®çãéçæç¿é¾åº¦æé«ï¼ç¨éç¨è®¡ç®æºæç¿å¾å¿«åå¾æ å©å¯å¾ã æä»¥ï¼æç¿è®¾å¤è½¬å¥ç¬¬äºä»£ââgpu(ä¸»è¦ç¨äºå¤§è§æ¨¡å¹¶è¡è®¡ç®ï¼å¦ï¼æ·±åº¦å­¦ä¹ )ãä½æ¯ï¼ç¨gpuæç¿ï¼ä»ç¶æä¸å®æµªè´¹(gpuä¸ºéç¨å¹¶è¡è®¡ç®è®¾è®¡ï¼æç¿ä»ç¶æå¾å¤é¨ä»¶é²ç½®ãä¾å¦ï¼æµ®ç¹æ°è¿ç®é¨ä»¶ï¼æç¿è¿ç¨åªä½¿ç¨æ´æ°æä½ï¼è¯¥é¨åé¨ä»¶æ ¹æ¬ä¸ä¼ç¨å°)ã gpuä»·æ ¼ä¸æ¶¨ï¼ä»ä»æ¯æ·±åº¦å­¦ä¹ ç«ç­å¯¼è´çåï¼å®éä¸ï¼å¾å¤gpuè¢«ç¨äºäºæç¿ã å½ç¶ï¼ç®ågpuæç¿ä¹å·²ç»ä¸åç®äºï¼ç®åä¸äºæ°å¼åè´§å¸ä»ç¶ç¨gpuæç¿ï¼ãæä»¥ï¼å¼å§è¿å¥ç¬¬ä¸ä»£è®¾å¤ï¼asicè¯çï¼ä¸é¨ä¸ºæç¿è®¾è®¡çè¯çï¼ï¼è¿ç§è¯çä¸é¨ä¸ºæç¿è®¾è®¡ï¼åªè½ç¨äºç¹å®å¸ç§çæç¿ã ä½asicè¯çè®¾è®¡ãæµçæµç¨å¾é¿ï¼åå¦btcä»·æ ¼å§çååï¼åææå¥å¾å¯è½ä¼è¡æ¬æ å½ãæä»¥ï¼asicè¯çéè¦æåé¢è®¢ãåå¦btcç³»ç»ä¸­ï¼ç®åçªç¶å¾ççå¢å ï¼ä¸è¬æ¯ä¸ä¸ªå¤§çååçäº§åºæ°çasicç¿æºã\n\n\n# ç¿æ± \n\nåä¸ªç¿å·¥æç¿çæ¶çæ¯å¾ä¸ç¨³å®çï¼å¹³ååºåæ¶é´10åéæ¯å¯¹äºæ¯ç¹å¸ç³»ç»ä¸­çææç¿å·¥èè¨çãä¸ä¸ªç¿å·¥ç¨ä¸ä¸ªç¿æºæåºç¿çæ¶é´å¯è½è¦å¾ä¹ï¼å¹¶ä¸é¤äºæç¿ä¹å¤è¿è¦æ¿æå¨ç»ç¹çå¶å®è´£ä»»ã\n\nç¿æ± å°å¾å¤ç¿å·¥ç»ç»èµ·æ¥ï¼ä¸è¬çæ¶æå°±æ¯ä¸ä¸ªç¿ä¸»ï¼pool managerï¼å¨ç»ç¹å»é©±å¨å¾å¤ç¿æºï¼ä¸å±ç¿å·¥åªè´è´£è®¡ç®åå¸å¼ï¼å¨ç»ç¹çå¶å®èè½åªç±ç¿ä¸»æ¥æ¿æãæäºæ¶çä»¥ååå¤§å®¶ä¸èµ·åéã\n\n\n\nå¦æç¿æºæ¥èªä¸åæºæï¼è¿æ¶åç¿å·¥å¾å¯è½åå¸å¨ä¸çåå°ï¼åªæ¯é½å å¥äºè¿ä¸ªç¿æ± ãç¿å·¥åç¿ä¸»èç³»ï¼ç¿ä¸»å°è¦è®¡ç®çåå¸å¼çä»»å¡åéç»ä»ï¼ç¿å·¥è®¡ç®å¥½åå°ç»æåç»ç¿ä¸»ï¼æç»å¾å°åºåå¥å±åä¸èµ·åä¸åçº¢ã\n\n\n# ç¿å·¥å©çåé\n\n 1. å¹³ååéï¼ææäººå¹³ååºåå¥å±ã\n\n> å¤§å®¶ä¸èµ·"åå¤§éé¥­"ï¼ä¼å¯¼è´æäºç¿å·¥ææ ï¼ä¸å¹²æ´»ï¼æç¿è¦è´¹çµï¼éè¦ææ¬ï¼ãåæ­£åä¸å½±åæåå¹³ååéã æä»¥ï¼è¿éä¹éè¦è¿è¡æå³åéï¼éè¦ä¸ä¸ªå·¥ä½éè¯æçæ¹æ¡ãå¦ä½è¯ææ¯ä¸ªç¿å·¥æä½çå·¥ä½éå¢ï¼\n\n 2. éä½æç¿é¾åº¦\n\n> åè®¾åæ¬æç¿é¾åº¦è¦æ±ï¼è®¡ç®æå¾ 126ä½ çåå¸å¼å 70ä½ é½å¿é¡»ä¸º0ï¼ç°å¨éä½è¦æ±ï¼åªéè¦å 60ä½ ä¸º0ï¼è¿æ ·æç¿ä¼æ´å®¹ææå°ãå½ç¶ï¼è¿ä¸ªåå¸æ¯ä¸ä¼è¢«åºåé¾ææ¿è®¤çï¼æä»¬å°å¶ç§°ä¸ºä¸ä¸ª shareï¼æ almost valid shareãç¿å·¥æ¯æå°ä¸ä¸ª shareï¼å°å¶æäº¤ç»ç¿ä¸»ï¼ç¿ä¸»å¯¹å¶è¿è¡è®°å½ï¼ä½ä¸ºç¿å·¥å·¥ä½éçè¯æãç­å°æä¸ªç¿å·¥çæ­£æå°ç¬¦åè¦æ±ççåºååï¼æ ¹æ®ææç¿å·¥æäº¤ç share æ°éè¿è¡åéãå ä¸ºæ¯ä¸ªç¿å·¥å°è¯ç nonce è¶å¤ï¼æå°ç¿çå¯è½æ§è¶å¤§ï¼æè½å¾å°ç share ä¹ä¼è¶å¤ï¼æä»¥è¿ç§æ¹æ¡ä½ä¸ºå·¥ä½éè¯ææ¹æ¡æ¯å¯è¡çã\n\n\n# å¯è½åºç°çé®é¢\n\n 1. ç¿å·¥ä¼ä¸ä¼å¹³æ¶æ­£å¸¸æäº¤ shareï¼ä½çæ­£æå°åºååä¸æäº¤ç»ç¿ä¸»èæ¯èªå·±å·å·åå¸åºå»\n\n> ä¸å¯è½ãå ä¸ºç¿ä¸»å·²ç»ç»è£å¥½äºåºåï¼äº¤ç»ç¿å·¥è®¡ç®ï¼åºåä¸­é¸å¸äº¤æçæ¶æ¬¾äººå°åæ¯ç¿ä¸»ã\n\n 2. é£ä¹ç¿å·¥å¯ä»¥å¯ä»¥æé¸å¸äº¤æçæ¶æ¬¾äººæ¹æèªå·±å¢ï¼\n\n> å¦æèªå·±æé¸å¸äº¤æçå°åæ¹æèªå·±çï¼ç¶åå»æç¿ï¼è¿æ ·æäº¤ä¸å»ç share ç¿ä¸»æ¯ä¸è®¤å¯çï¼æåºæ¥çç¿è½ç¶æ¯èªå·±çï¼ä½æ¯æ´ä½çæ¥å°±æ¯èªå·±åå¹²ï¼æ ¹æ¬æ²¡å¿è¦å å¥ç¿æ± ã\n\n 3. ææ²¡æå¯è½ç¿å·¥æ£ä¹±ï¼å¹³æ¶æäº¤shareï¼ç­æå°åææåºåï¼ä¸æäº¤ï¼\n\n> å¯è½æ¯æï¼å¦æç¿å·¥æ¬èº«ä»ä»æ³æ£ä¹±ï¼æ¯å¯ä»¥è¿ä¹åçãä½ææåºååï¼å¯¹å¶æ¬èº«æ¥è¯´ï¼ä¹æ²¡æç¸åºçå¥å±è·å¾ï¼çä¼¼æ¯æäººä¸å©å·±çæåµã ä½æ¯ï¼ç¿æ± ä¹é´å­å¨ç«äºå³ç³»ãæå¯è½ä¸ºäºæå»ç«äºå¯¹æï¼ä»èèµ·å°æç ´åçä½ç¨ã\n\n\n# ç¿æ± çæ°æ®\n\n\n\nå¦æå­å¨ä¸ä¸ªç¿æ± (ghash.io)ç®åæ¯ä¾å æ®å¨é¨ç®åä¸åä»¥ä¸ï¼å½æ¶å¼èµ·äºææ(ä¸ä¸ªç¿æ± å°±å¯ä»¥åå¨51æ»å»)ãä¹åï¼è¯¥ç¿æ± ä¸»å¨éä½äºç¿æ± ç®åï¼é¿åå¨æäººä»¬å¯¹æ¯ç¹å¸ä¿¡å¿ã\n\næå¯è½è¡¨é¢çä¸å»æ¯å®å¨çï¼ä½å®éå®ä¸æä¸ªæºæå¦ææè¶è¿50%ç®åï¼å¶å¿ç¶ä¸ä¼å°å¶æ¾å¥ä¸ä¸ªç¿æ± ä¸­ãèæ¯å°å¶åæ£éèï¼çæ­£éè¦åå¨æ»å»æ¶ååéä¸­èµ·æ¥åå¨æ»å»\n\n> ç±è¿äºæ°æ®å¯ä»¥å¾ç¥ï¼ç¿æ± æ¬èº«å¯¹ btc ç³»ç»å¸¦æ¥äºè¾å¤§å¨èãæä¸ªæ¶æç¨æ·å¦ææ³åå¨æ»å»ï¼ä»¥åéè¦èªå·±è¾¾å° 51% ç®åï¼ç°å¨èªå·±åªéè¦ä½ä¸ºç¿ä¸»ï¼åªéè¦å¾å°ä¸é¨åç®åå°±å¯ä»¥äºãåªè¦è½å¤å¸å¼å°è¶³å¤å¤çä¸æçç¸çç¿å·¥ï¼ä¾¿å¯ä»¥ç¨è¾ä½ææ¬å®ç°æ»å»ã å½ç¶ï¼ç¿ä¸»ç»éªç®¡çç¿æ± ï¼ä¹éè¦æ¶åä¸å®æ¯ä¾(åºåå¥å±ãäº¤æè´¹)ä½ä¸ºç®¡çè´¹ç¨ãå¦ææ¶æèæ³è¦æ»å»ç³»ç»ï¼ä¼å°ç®¡çè´¹éä½çè³èµæ¬å¸å¼è¶³å¤å¤ç¿å·¥å å¥ãè¿ä¾¿ä½¿å¾åå¨æ»å»åå¾å®¹æäºèµ·æ¥ã\n\n\n# ç¿æ± å¯ä»¥åå¨åªäºæ»å»\n\n 1. ååæ»å»: å¯¹å·²ç»ç»è¿6æ¬¡ç¡®è®¤çäº¤æååï¼å©ç¨51%ç®åå°äº¤æè®°å½åæ»ã\n\n> ç¿å·¥åªè½è®¡ç®åå¸å¼ï¼å¹¶ä¸ç¥éåºååå«åªäºäº¤æï¼åºåé¾ç¶åµæ¯ä»ä¹ï¼æä»¥å®¹æè¢«å©ç¨ã æ­¤å¤ï¼51%æ»å»åªæ¯ä¸ä¸ªæ¦çé®é¢ï¼å¹¶éè¾¾å°51%ç®åå°±è½åå¨æ»å»ï¼ä¸è½è¾¾å°å°±æ æ³åå¨æ»å»ãæ­¤å¤ï¼ç¿æ± æ¬èº«ç®åä¹æ¯å¨ä¸æ­ååçã\n\n 2. å°éäº¤æ\n\n> åå¦æ»å»èä¸åæ¬¢æä¸ªè´¦æ·aï¼ä¸æ³è®©açäº¤æä¸åºåé¾ï¼å¨çå¬å°æå¶ä»äººå°açäº¤æåå¸å°åºåé¾ä¸æ¶ï¼ç«å»åå¨ååæ»å»ï¼ä½¿aæå¨é¾æ æ³æä¸ºæé¿åæ³é¾ãè¿æ ·ï¼ä¾¿å®ç°äºå¯¹aè´¦æ·çå°éãå¶ä»ç¿å·¥å ä¸ºå®³æï¼å¯è½ä¹ä¸ä¼å°açäº¤æè®°å½ä¸æ¥ã\n\n 3. å·å¸\n\n> è¿ä¸ªæ¯ä¸å¯è½çï¼å ä¸ºå¶å¹¶æ²¡æä»äººè´¦æ·ç§é¥ãå¦æä¾ä»ç®åå¼ºï¼å¼ºè¡å°æ²¡æç­¾åçè½¬è´¦åå¸å°åºåé¾ï¼æ­£å¸¸èç¹ä¸ä¼è®¤ä¸ºå¶åæ³ï¼è¿æ ·ï¼å³ä½¿è¿æ¡é¾åé¿ï¼å¶ä»äººä¹ä¸ä¼è®¤ä¸ºå¶æ¯æé¿åæ³é¾ã\n\n\n# btc èæ¬ç¯\n\n\n\n\n# äº¤æç»æ\n\n"result": {\n  "txid": "921a.dd24", // äº¤æid\n  "hash": "921a.dd24", // äº¤æçåå¸å¼\n  "version": 1, // ä½¿ç¨çæ¯ç¹å¸åè®®çæ¬å·\n  "size": 226, // äº¤æçå¤§å°\n  "locktime": 0, // äº¤æççææ¶é´ï¼0ä»£è¡¨ç«å³çæï¼é0ä»£è¡¨ç»è¿å ä¸ªåºååæåè®¸ä¸é¾\n  "vin": [...], // äº¤æçè¾å¥\n          "vout": [...], // äº¤æçè¾åº\n  "blockhash": "0000000000000000002c510d..5c0b", // äº¤ææå¨åºåçåå¸å¼\n  "confirmations": 23, // ç®åå·²ç»æå ä¸ªç¡®è®¤ï¼åæ¬èªå·±åå¶åé¢æå¤å°åºåä¸é¾\n  "time": 1530846727, // äº¤æäº§ççæ¶é´æ³\n  "blocktime": 1530846727 // è¯¥äº¤ææå¨çåºåçäº§çæ¶é´\n}\n\n// äº¤æçè¾å¥ï¼æ¯ä¸ä¸ªæ°ç»ï¼å¯ä»¥æå¤ä¸ªè¾å¥ï¼æ¯ä¸ªè¾å¥é½è¦æææ¥æºï¼å¹¶ç»åºç­¾åã\n"vin": [{\n  "txid": "c0cb...c57b",// è¯¥è¾å¥çæ¥æºäº¤æçåå¸å¼\n  "vout": 0, // è¯¥è¾å¥å¯¹åºãæ¥æºäº¤æãçç¬¬å ä¸ªè¾åºãæ¯ä¸ä¸ªç´¢å¼å¼\n  "scriptsig": { // è¾å¥èæ¬ï¼è¿éæ¯æç®åçå½¢å¼ï¼åªæç­¾å    \n    "asm": "3045...0018",\n    "hex": "4830...0018"\n  }\t\n}],\n\n// äº¤æçè¾åº\n"vout":[{\n  "va1ue": 0.22684000, // éé¢ï¼å³è½¬è¿å»å¤å°btc\n  "n": 0, // åºå·ï¼è¡¨ç¤ºè¿ä¸ªè¾åºå¨è¿ä¸ªäº¤æä¸­çç´¢å¼\n  "scriptpubkey": { // è¾åºèæ¬\n    "asm": "dup hash160 628e...d/43 equalvertfy checkstg",\n    "hex": "76a9.88ac",\n    "regsigs": 1, // è¿ä¸ªè¾åºéè¦å¤å°ä¸ªç­¾åæè½åç°ï¼æçè¾åºéè¦å¤éç­¾å\n    "type": "pubkeyhash", // è¾åºçç±»åï¼æ­¤å¤ pubkeyhash æ¯å¬é¥çåå¸\n    "addresses": ["19z8ljknxlrtv2qk5jgtncjcgueefpqvsr"] // è¾åºçå°å\n  }\n},{\n  "va1ue": 0.53756644,\n  "n": 1,\n  "scriptpubkey": {\n    "asm": "dup hash160 da7d...2cd2 equalverify checksig",\n    "hex": "76a9.88ac",\n    "regsigs": 1,\n    "type": "pubkeyhash",\n    "addresses": ["1lvgtpdyevlclcdk2m9f7pbh7zwhs7nyhx"]\n  }\n}]\n\n\n\n# èæ¬ä¸¾ä¾è¯´æ\n\n\n\n> å¨æ©æçæ¯ç¹å¸ç³»ç»ä¸­ï¼b->c è¿ä¸ªäº¤æçè¾å¥èæ¬å a->b è¿ä¸ªäº¤æçè¾åºèæ¬æ¼å¨ä¸èµ·æ§è¡ã åæ¥ï¼åºäºå®å¨å ç´ çèèï¼è¿ä¸¤ä¸ªèæ¬æ¹ä¸ºåå«æ§è¡ï¼é¦åæ§è¡è¾å¥èæ¬ï¼å¦ææ²¡æåºéï¼é£ä¹åæ§è¡è¾åºèæ¬ï¼å¦æè½é¡ºå©æ§è¡ï¼å¹¶ä¸æåå¾å°éé¶å¼ï¼trueï¼ï¼é£ä¹è¿ä¸ªäº¤æå°±æ¯åæ³çã å¦æä¸ä¸ªäº¤ææå¤ä¸ªè¾å¥ï¼æ¯ä¸ªè¾å¥èæ¬é½è¦å»æ¾å°åé¢ç¹å®åºåä¸­æå¯¹åºçè¾åºèæ¬ï¼å¹éä¹åæ¥è¿è¡éªè¯ãå¨é¨éªè¯éè¿åï¼è¿ä¸ªäº¤æææ¯åæ³çã\n\n\n# p2pkï¼pay to public keyï¼\n\ninput script:\n\tpushdata(sig) # è¾å¥èæ¬ä¸­ç´æ¥ç»åºç­¾åï¼æ¶æ¬¾äººç¨èªå·±çç§é¥å¯¹è¾å¥èæ¬æå¨çæ´ä¸ªäº¤æçç­¾åï¼\noutput script:\n\tpushdata(pubkey) # è¾åºèæ¬ä¸­ç´æ¥ç»åºæ¶æ¬¾äººçå¬é¥\n\tchecksig # æåç checksig æ¯æ£æ¥ç­¾å\n\n\nå¥æ æ§è¡è¿ç¨ï¼\n\n 1. ç¬¬ä¸æ¡è¯­å¥ï¼å°è¾å¥èæ¬ä¸­çç­¾ååå¥æ \n 2. ç¬¬äºæ¡è¯­å¥ï¼å°è¾åºèæ¬ä¸­çå¬é¥åå¥æ \n 3. ç¬¬ä¸æ¡è¯­å¥ï¼å¼¹åºæ é¡¶çä¸¤ä¸ªåç´ ï¼ç¨å¬é¥ pubkey æ£æ¥ä¸ä¸ç­¾å sig æ¯å¦æ­£ç¡®ãå¦ææ­£ç¡®ï¼è¿åtrueï¼è¯´æéªè¯éè¿\n\n\n\n\n# p2pkhï¼pay to public key hashï¼ââæå¸¸ç¨\n\ninput script:\n\tpushdata(sig) # ç»åºç§é¥ç­¾å\n\tpushdata(pubkey) # ç»åºå¬é¥\noutput script:\n\tdup\n\thash160\n\tpushdata(pubkeyhash) # è¾åºèæ¬ä¸­æ²¡æç»åºæ¶æ¬¾äººçå¬é¥ï¼ç»åºçæ¯å¬é¥çåå¸å¼ã\n\tequalveriey\n\tchecksig\n\n\nå¥æ æ§è¡è¿ç¨ï¼\n\n 1. ç¬¬ä¸æ¡è¯­å¥ï¼å°è¾å¥èæ¬ä¸­çç­¾ååå¥æ \n 2. ç¬¬äºæ¡è¯­å¥ï¼å°è¾å¥èæ¬ä¸­çå¬é¥åå¥æ \n 3. ç¬¬ä¸æ¡è¯­å¥ï¼å°æ é¡¶åç´ å¤å¶ä¸éï¼æä»¥ååå¥äºä¸æ¬¡å¬é¥ï¼\n 4. ç¬¬åæ¡è¯­å¥ï¼å°æ é¡¶åç´ ååºæ¥ååå¸ï¼åå°å¾å°çåå¸å¼åå¥æ ï¼ä¹å°±æ¯å°æ é¡¶çå¬é¥åæäºå¶åå¸å¼ï¼\n 5. ç¬¬äºæ¡è¯­å¥ï¼å°è¾åºèæ¬ä¸­æä¾çå¬é¥çåå¸å¼åå¥æ \n 6. ç¬¬å­æ¡è¯­å¥ï¼å¼¹åºæ é¡¶çä¸¤ä¸ªåç´ ï¼é½æ¯å¬é¥çåå¸å¼ï¼ï¼æ¯è¾å®ä»¬æ¯å¦ç¸ç­ââé²æ­¢æäººç¨èªå·±çå¬é¥ååå¸çæ¥æºçäº¤æçæ¶æ¬¾äººçå¬é¥\n 7. ç¬¬ä¸æ¡è¯­å¥ï¼å¼¹åºæ é¡¶çä¸¤ä¸ªåç´ ï¼å¬é¥åç­¾åï¼ï¼ç¨å¬é¥pubkeyæ£æ¥ä¸ä¸ç­¾åsigæ¯å¦æ­£ç¡®ãå¦ææ­£ç¡®ï¼è¿åtrueï¼è¯´æéªè¯éè¿\n\n\n# p2shï¼pay to script hashï¼\n\nè¿ç§å½¢å¼ä¸è¾åºèæ¬ç»åºçä¸æ¯æ¶æ¬¾äººçå¬é¥çåå¸ï¼èæ¯æ¶æ¬¾äººæä¾çèµåèæ¬ï¼redeem scriptï¼çåå¸ãæä»¬ä¸¾ä¸ªä¾å­å°±æç½äºã\n\nredeemscript: # èµåèæ¬(æ¶æ¬¾äººä¼å¬å¼)\n\tpushdata(pubkey)\n\tchecksig\ninput script:\n\tpushdata(sig) # ç»åºç§é¥ç­¾å\n\tpushdata(serialized redeemscript) # ç»åºåºååçèµåèæ¬\noutput script:\n\thash160\n\tpushdata(redeemscripthash)\n\tequal\n\n\nå¥æ æ§è¡è¿ç¨\n\n * ç¬¬ä¸é¶æ®µ\n   * ç¬¬ä¸æ­¥ï¼å°è¾å¥èæ¬ä¸­çäº¤æç­¾ååå¥æ \n   * ç¬¬äºæ­¥ï¼å°è¾å¥èæ¬ä¸­ç»åºçèµåèæ¬åå¥æ \n   * ç¬¬ä¸æ­¥ï¼å¼¹åºæ é¡¶åç´ ååå¸ååæ ï¼ä¹å°±å¾å°äºèµåèæ¬çåå¸ï¼redeem script hashï¼\n   * ç¬¬åæ­¥ï¼å°è¾åºèæ¬ä¸­ç»åºçèµåèæ¬çåå¸å¼åå¥æ \n   * ç¬¬äºæ­¥ï¼æ¯è¾æ é¡¶ä¸¤ä¸ªåç´ æ¯å¦ç¸ç­ï¼ç¸å½äºç¨ä¹åçè¾åºèæ¬ç»åºçèµåèæ¬åå¸ï¼éªè¯äºè¾å¥èæ¬æä¾çèµåèæ¬æ¯å¦æ¯æ­£ç¡®ç\n * ç¬¬äºé¶æ®µï¼ååºååå¹¶æ§è¡redeemscriptï¼éªè¯input scriptä¸­ç»åºçç­¾åæ¯å¦æ­£ç¡®ï¼\n   * ç¬¬ä¸æ­¥ï¼å°èæ¬ä¸­åæ­»çå¬é¥åå¥æ \n   * ç¬¬äºæ­¥ï¼éªè¯è¾å¥èæ¬ä¸­ç»åºçäº¤æç­¾åçæ­£ç¡®æ§ãéªè¯éè¿å°±ä¼è¿å true\n\n\n# å¤éç­¾å\n\np2shå¸¸è§çåºç¨åºæ¯å°±æ¯å¯¹å¤éç­¾åçæ¯æ\n\næ¯ç¹å¸ç³»ç»ä¸­ä¸ä¸ªäº¤æè¾åºå¯è½è¦æ±ä½¿ç¨å®çäº¤æè¾å¥æä¾å¤ä¸ªç­¾åï¼æè½æbtcååºæ¥ãæ¯å¦æä¸ªå¬å¸å¯è½è¦æ±5ä¸ªåä¼äººä¸­çä»»æä¸ä¸ªæä¾ç­¾åï¼æè½æå¬å¸çé±è½¬èµ°ãè¿æ ·è®¾è®¡ä¸ä½ä¸ºç§é¥çæ³é²æä¾äºä¸å®å®å¨æ§ä¿æ¤ï¼ä¹ä¸ºç§é¥çä¸¢å¤±æä¾äºä¸å®çå®¹éæ§ã\n\ninputscript:\n\tx # å¨è¾å¥èæ¬éå¾æ ä¸­æ·»å ä¸ä¸ªæ²¡ç¨çåç´ ï¼æµæ¶æbtcå¶ä¸­çä¸ä¸ªbugã\n\tpushdata(sig 1)\n\tpushdata(sig 2)\n\tpushdata(sig m)\noutputscript:\n\tm\n\tpushdata(pubkey_1)\n\tpushdata(pubkey_2)\n\t...\n\tpushdata(pubkey n)\n\tn\n\tcheckmultisig\n\n\n> ä¸ºä»ä¹ä¸æè¿ä¸ª bug ä¿®å¤äºå¢ï¼å»ä¸­å¿åçç³»ç»åä¸­å¿åçç³»ç»ä¸ä¸æ ·ãä¸­å¿åçç³»ç»å¯ä»¥åå¸å¾å¤çæ¬ï¼å»ä¸­å¿åçç³»ç»ä¿®æ¹çæ¬åä¼äº§çç¡¬ååã\n\nå¥æ æ§è¡è¿ç¨\n\n 1. ç¬¬ä¸æ­¥ï¼å°è¾å¥èæ¬ä¸­çå¤ä½åç´ ï¼åè¿°çxï¼åæ \n 2. ç¬¬äºæ­¥ï¼å°è¾å¥èæ¬éç m ä¸ªç­¾åä¾æ¬¡åå¥æ ä¸­ï¼è¿é m=2ï¼\n 3. ç¬¬ä¸æ­¥ï¼å°è¾åºèæ¬ä¸­ç»å®çéå¼ m åæ \n 4. ç¬¬åæ­¥ï¼å°è¾åºèæ¬ä¸­ç»å®ç n ä¸ªå¬é¥åæ \n 5. ç¬¬äºæ­¥ï¼å°è¾åºèæ¬ä¸­ç»å®çå¬é¥æ° n åæ \n 6. ç¬¬å­æ­¥ï¼æ§è¡ cehckmultisigï¼ä»¥æ£æ¥å æ ä¸­æ¯å¦æé¡ºåºåå«äº n ä¸ªç­¾åä¸­ç m ä¸ª\n\n> è¿æ¯ææ©çå¤éç­¾åï¼å¹¶æ²¡æç¨å° p2shï¼å°±æ¯ç¨æ¯ç¹å¸èæ¬ä¸­åçç cehckmultisig å®ç°çã è¿æ ·å¨å®éä½¿ç¨æ¶æäºä¸æ¹ä¾¿çå°æ¹ï¼ä¾å¦çµåç½ç«å¼éäºæ¯ç¹å¸æ¯ä»æ¸ éï¼ä½è¦æ±è¦æ5ä¸ªåä¼äººä¸­3ä¸ªäººçç­¾åæè½æ btc è½¬èµ°ãä½è¿æ ·åä¹åï¼ç¨æ·å¨ btc æ¯ä»çæ¶åï¼çæçè½¬è´¦äº¤æéä¹ç»åº 5 ä¸ªåä¼äººçå¬é¥ï¼åæ¶è¿è¦ç»åºnåmçå¼ã èè¿äºå¬é¥ï¼ä»¥å n å m çå¼å°±è¦çµåç½ç«å¬å¸ç»ç¨æ·ï¼èä¸ä¸åççµåç½ç«è§åä¹ä¸ä¸æ ·ï¼è¿å°±è®©ç¨æ·çæè½¬è´¦äº¤æåå¾ä¸æ¹ä¾¿ãå ä¸ºè¿äºå¤ææ§é½æ´é²ç»ç¨æ·äº\n\n\n# ç¨p2shå®ç°å¤éç­¾å\n\nç¸æ¯åé¢çå®ç°ï¼è¿æ ·çæ¬è´¨æ¯å°å¤ææ§ä»è¾åºèæ¬è½¬ç§»å°äºèµåèæ¬ä¸­ï¼è¾åºèæ¬åªéè¦ç»åºèµåèæ¬çåå¸å¼å°±è¡äºãnä¸ªå¬é¥ä»¥ånãmçå¼é½å¨èµåèæ¬ä¸­ç»åºæ¥ï¼èèµåèæ¬ç±è¾å¥èæ¬æä¾ï¼è¿æ ·ä¹å°±åæ¯ä»ç»å®çç¨æ·ä»¬éç¦»å¼äºã\n\n> ä»ç¨æ·çè§åº¦æ¥çï¼éç¨è¿ç§p2shçæ¯ä»æ¹å¼ï¼åp2pkhæ¯ä»æ¹å¼æ²¡æå¤å¤§åºå«ï¼åªä¸è¿è¾åºèæ¬ä¸­çæ¯èµåèæ¬çåå¸å¼èä¸æ¯å¬é¥çåå¸å¼ è¾å¥èæ¬å°±æ¯çµåç½ç«è¦æè¿ç¬btcè½¬åºå»æ¶åç¨çï¼è¿ç§æ¹å¼ä¸è¾å¥èæ¬è¦åå«mä¸ªç­¾åï¼ä»¥åèµåèæ¬çåºååçæ¬ã å¦æçµåå°æ¥æ¹åäºéç¨çå¤éç­¾åè§åï¼å°±åªéè¦æ¹åä¸ä¸èµåèæ¬çåå®¹åè¾å¥èæ¬ä¸­çåå®¹ï¼ç¶åææ°çèµåèæ¬çåå¸å¼å¬å¸åºå»å°±å¯ä»¥äºãå¯¹ç¨æ·èè¨ä¹åªæ¯ä»æ¬¾æ¶åè¾åºèæ¬ä¸­è¦åå«çåå¸å¼åçäºååã\n\nå¥æ æ§è¡è¿ç¨ï¼\n\n * ç¬¬ä¸é¶æ®µ\n   * ç¬¬ä¸æ­¥ï¼å°å ä½åç´  x åæ \n   * ç¬¬äºæ­¥ï¼å°è¾å¥èæ¬ä¸­çmä¸ªç­¾ååæ \n   * ç¬¬ä¸æ­¥ï¼å°è¾å¥èæ¬ä¸­ä¿å­çåºååçèµåèæ¬åæ \n   * ç¬¬åæ­¥ï¼å¼¹åºæ é¡¶åç´ ååå¸ååæ ï¼å³å°æ é¡¶çèµåèæ¬ååå¸\n   * ç¬¬äºæ­¥ï¼å°è¾åºèæ¬ä¸­ç»åºçèµåèæ¬åå¸å¼ï¼rshï¼åæ \n   * ç¬¬å­æ­¥ï¼å¤æ­æ é¡¶ä¸¤ä¸ªåç´ æ¯å¦ç¸ç­ï¼å³å¤æ­ä¸ä¸è®¡ç®åºçèµåèæ¬åå¸åç»å®çèµåèæ¬åå¸æ¯å¦ç¸ç­\n * ç¬¬äºé¶æ®µï¼æ§è¡ redeem scriptï¼\n   * ç¬¬ä¸æ­¥ï¼å°ç­¾åæ° m åæ \n   * ç¬¬äºæ­¥ï¼å° n ä¸ªå¬é¥åæ \n   * ç¬¬ä¸æ­¥ï¼å°ç»å®çå¬é¥æ° n åæ \n   * ç¬¬åæ­¥ï¼ä½¿ç¨cehckmultisigæä½æ£æ¥å¤éç­¾åçæ­£ç¡®æ§\n\n\n\n\n# proof of burnï¼éæ¯btc\n\nä¸ä¸ªç¹æ®çèæ¬, ä»¥ return å¼å§ï¼åé¢å¯ä»¥è·ä»»ä½åå®¹ãreturn æä½ï¼æ æ¡ä»¶è¿åéè¯¯ï¼æä»¥è¯¥èæ¬æ°¸è¿ä¸å¯è½éè¿éªè¯ãæ§è¡å°returnï¼åç»­æä½ä¸ä¼åæ§è¡ãè¯¥æ¹æ³æ¯éæ¯æ¯ç¹å¸çä¸ç§æ¹æ³ã ä¸ºä»ä¹è¦éæ¯æ¯ç¹å¸ï¼ç°å¨æ¯ç¹å¸ä»·å¼æé«ï¼éæ¯æ¯ä¸æ¯å¾å¯æï¼\n\n 1. é¨åå°å¸ç§(altcoin)è¦æ±éæ¯é¨åæ¯ç¹å¸æè½å¾å°è¯¥ç§å°å¸ç§ã\n 2. å¾åºåé¾ä¸­åå¥åå®¹ãæä»¬ç»å¸¸è¯´ï¼åºåé¾æ¯ä¸å¯ç¯¡æ¹çè´¦æ¬ï¼æäººä¾¿å©ç¨è¯¥ç¹æ§å¾å¶ä¸­æ·»å æ³è¦æ°¸ä¹ä¿å­çåå®¹ãä¾å¦ï¼ç¥è¯äº§æä¿æ¤ââç¥è¯äº§æçåå¸å¼ã\n\n> é¸å¸äº¤æç coinbase åä¹å¯ä»¥éä¾¿åä»ä¹åå®¹ï¼ä¸ºä»ä¹ä¸å¨é£éåå¢ï¼å ä¸ºè¿ç§æ¹æ³å¾é¾ï¼å¿é¡»è¦è·å¾è®°è´¦æãç¶èåå¸äº¤æä¸éè¦æè®°è´¦æã ä»»ä½ç¨æ·é½å¯ä»¥ç¨ proof of burn çæ¹æ³ï¼éæ¯æå°éçæ¯ç¹å¸ï¼æ¢ååæ¯ç¹å¸ç³»ç»çåºåé¾ä¸­åå¥ä¸äºåå®¹çæºä¼ãæ²¡æéæ¯æ¯ç¹å¸ï¼ä»ä»æ¯ä»äºäº¤æè´¹ï¼ä¹å¯ä»¥ååºåé¾ä¸­åå¥åå®¹ã\n\nä¾å¦ä¸å¾ä¸ºä¸ä¸ªé¸å¸äº¤æï¼å¶ä¸­åå«ä¸¤ä¸ªäº¤æï¼ç¬¬äºä¸ªäº¤æä¾¿æ¯ä»ä»æ³è¦å¾å¶ä¸­åå¥åå®¹ã\n\nä¸å¾ä¸ºä¸ä¸ªæ®éçè½¬è´¦äº¤æï¼å¶å°±æ¯ä»ä»ä¸ºäºååºåé¾åå¥åå®¹ãè¯¥äº¤æå¹¶æªéæ¯ btcï¼åªæ¯å°è¾å¥çè´¹ç¨ä½ä¸ºäº¤æè´¹ç»äºæå°ç¿çç¿å·¥ãè¿ç§äº¤ææ°¸è¿ä¸ä¼åç°ï¼æä»¥ç¿å·¥ä¸ä¼å°å¶ä¿å­å¨ utxo ä¸­ï¼å¯¹å¨èç¹æ¯è¾åå¥½ã\n\n\n\n> btcç³»ç»ä¸­ä½¿ç¨çèæ¬è¯­è¨å¾ç®åï¼å®ä¹ä¸æ¯å¾çµå®å¤çè¯­è¨ï¼çè³ä¸æ¯æå¾ªç¯ï¼è¿æ ·è®¾è®¡ä¹æå¶ç¨æï¼ä¸æ¯æå¾ªç¯ä¹å°±ä¸ä¼ææ­»å¾ªç¯ãåé¢å­¦çä»¥å¤ªåçèæ¬è¯­è¨å°±æ¯å¾çµå®å¤çï¼è¿æ ·å°±é å¶å®æºå¶æ¥é²æ­¢è¿å¥æ­»å¾ªç¯ç­ã\n\nbtcçèæ¬è¯­è¨éå¯¹btcåºç¨åºæ¯åäºå¾å¥½çä¼åï¼å¦æ£æ¥å¤éç­¾åæ¶ç checkmultisig æä½ä¸æ¡å°±è½å®ç°ï¼è¿æ¯å¶å¼ºå¤§ä¹å¤ã',charsets:{cjk:!0}},{title:"åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  8",frontmatter:{},regularPath:"/blockchain/learn8.html",relativePath:"blockchain/learn8.md",key:"v-b0622042",path:"/blockchain/learn8.html",headers:[{level:2,title:"DAO",slug:"dao",normalizedTitle:"dao",charIndex:138},{level:3,title:"The DAO",slug:"the-dao",normalizedTitle:"the dao",charIndex:273},{level:2,title:"éå¥æ»å»",slug:"éå¥æ»å»",normalizedTitle:"éå¥æ»å»",charIndex:1407},{level:2,title:"The Dao è¡¥ææªæ½",slug:"the-dao-è¡¥ææªæ½",normalizedTitle:"the dao è¡¥ææªæ½",charIndex:2301},{level:2,title:"åæ",slug:"åæ",normalizedTitle:"åæ",charIndex:3186},{level:2,title:"ç¾é¾ Beauty Chain",slug:"ç¾é¾-beauty-chain",normalizedTitle:"ç¾é¾ beauty chain",charIndex:4822},{level:2,title:"åºåé¾çæ»¥ç¨",slug:"åºåé¾çæ»¥ç¨",normalizedTitle:"åºåé¾çæ»¥ç¨",charIndex:6028},{level:2,title:"æ³å¾çç®¡åæ¯ä»æ¹å¼",slug:"æ³å¾çç®¡åæ¯ä»æ¹å¼",normalizedTitle:"æ³å¾çç®¡åæ¯ä»æ¹å¼",charIndex:6399},{level:2,title:"æ»ç»",slug:"æ»ç»",normalizedTitle:"æ»ç»",charIndex:6533}],lastUpdated:"6/25/2023, 4:30:00 PM",lastUpdatedTimestamp:16876818e5,headersStr:"DAO The DAO éå¥æ»å» The Dao è¡¥ææªæ½ åæ ç¾é¾ Beauty Chain åºåé¾çæ»¥ç¨ æ³å¾çç®¡åæ¯ä»æ¹å¼ æ»ç»",content:'# åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  8\n\n * å­¦ä¹ å°åï¼https://www.bilibili.com/video/BV1Vt411X7JF\n * åèæç« ï¼https://sinocifeng.github.io/downloadPage.html\n\n\n# DAO\n\nä¸ºä½ä¸å°ä¸åé½å»ä¸­å¿åå¢ Decentralize everything. DAO(Decentralize Autonomous Organization)-å»ä¸­å¿åèªæ²»ç»ç»å°±åºç°äºãç»ç»ä¸è¬é½ä¼æèªå·±çè§ç« å¶åº¦ï¼DAO çè§ç« å¶åº¦æ¯åå¨ä»£ç éçã\n\n\n# The DAO\n\n2016å¹´5æï¼åºç°ä¸ä¸ªè´åäºä¼ç­¹æèµç DaoââThe DAOï¼åå­æç¹æ­§ä¹ï¼ãç±»ä¼¼äºä¼ç­¹çåºéç»ç»ï¼æ¬è´¨ä¸å°±æ¯ä¸ä¸ªè¿è¡å¨ä»¥å¤ªåä¸çæºè½åçº¦ãå¦ææ³è¦åä¸å¶ä¼ç­¹ï¼å¯ä»¥å°èªå·±çä»¥å¤ªå¸åéå°è¯¥æºè½åçº¦æ¢åThe DAO çä»£å¸ãå½éè¦å³å®æèµåªä¸ä¸ªé¡¹ç®æ¶ï¼ç±ä»£å¸ææèè¿è¡æç¥¨è¡¨å³ï¼æ¯ä½åä¸èæç¥¨çæéç±ä»£ç¬å¤å°å³å®ã å½æèµè·å¾æ¶çï¼ä¹æ ¹æ®åä¸èä»£å¸æ°è¿è¡åæã\n\nä¼ ç»çæèµé½æ¯ç±å ä¸ªå³ç­èå³å®æèµæ¹åçï¼ä½ The DAO çæ¹å¼ä½¿å¾ææäººé½å¯ä»¥åä¸å³ç­ã2016å¹´5æå¼å§ä¼ç­¹ï¼ä»ä¸ä¸ªææ¶é´å°±å·²ç»ä¼ç­¹å¾å°ä»·å¼æå¤çä»¥å¤ªå¸ãæäººè®¤ä¸º 3-5 å¹´åçå½±ååä¼è¶è¿ä»¥å¤ªåæ¬èº«ãä½æ¯å®ä»ä»å­å¨äº 3 ä¸ªæã\n\nèèå°æèµèå¨æèµè¿ç¨ä¸­å¯è½éè¦ç¨é±ï¼éè¦ç¨ä»£å¸æ¢åä»¥å¤ªå¸ãå¨ The DAO çè®¾è®¡ä¸­éç¨äº æå(split DAO) å®ç°è¿ä¸åè½ãå¶å¹¶éåçº¯ååæ¶çï¼èæ¯éç¨çæ child DAO çæ¹æ³ãå¦ææèµè¿ç¨ä¸­æä¸ªå°ä¼é¡¹ç®ä¸è¢«çå¥½ï¼é£ä¹å®å¯ä»¥ç¬ç«åºæ¥æç«ä¸ºå­åºéï¼æç«¯æåµå°±æ¯åä¸ªçæèµäººæç«äº child DAOï¼è¿ä¸ªäººå°é±æèµç»èªå·±ä»èååèªå·±çæèµä¸æ¶çã\n\næååæ7å¤©çè¾©è®ºæï¼å¤§å®¶å¯ä»¥è®¨è®ºæåæ¯å¦å¥½å¹¶å³å®æ¯å¦å å¥æåãæåä¹åï¼æ28å¤©éå®æï¼28å¤©åæè½ååºè¿äºä»¥å¤ªå¸ãä¹æ­£æ¯è¿28å¤©çéå®æï¼ç»äºä»¥å¤ªåè¡¥ææ¶é´ï¼æå28å¤©ï¼ãè¿ä¸çå¿µæ¯æ°ä¸»å¶åº¦çè¿ä¸æ­¥ä½ç°ï¼ä¸ä»å¡è®®å°æ°æä»å¤æ°ï¼ä¹ä¿éäºå¯¹å°æ°äººçæå©å°éãä½é®é¢åºç°å¨äºå¯¹ split DAO çå®ç°ä¸ï¼è¿å¯¼è´äº The DAO æç»èµ°åæ«è·¯ãä¸ä¸º split DAO çå®ç°ä»£ç ï¼\n\nfunction splitDAO(\n    uint _proposalID,\n    address _newCurator\n) noEther onlyTokenholders returns (bool _success) {\n    // ......\n    // Burn DAO Tokens\n    Transfer(msg.sender, 0, balances[msg.sender]);\n    withdrawRewardFor(msg.sender); // (1) è¿é±ç»è°ç¨è¯¥å½æ°çäºº\n    totalSupply -= balances[msg.sender]; // (2) åå° The Dao ä¸­çæ»éé¢\n    balances[msg.sender] = 0; // (3) å°è°ç¨èçè´¦æ·æ¸é¶\n    paidOut[msg.sender] = 0;\n    return true;\n}\n\n\næ­£ç¡®çåæ³åºè¯¥æ¯åæ¸é¶åè¿é±ï¼å¦åä¼é æéå¥æ»å»ã\n\n\n# éå¥æ»å»\n\nè®¡ç®æºç¨åºæå­ç¨åºå¨æ§è¡è¿ç¨ä¸­ä¸­æ­ï¼ç¶åå¨å®åä¸æ¬¡è°ç¨å®ææ§è¡ä¹ååæ¬¡è¿è¡è°ç¨ï¼é£ä¹è¯¥ç¨åºæå­ç¨åºç§°ä¸ºéå¥ç¨åºãä¸­æ­å¯è½æ¯ç±åé¨æä½ï¼å¦jumpæcallï¼æå¤é¨æä½ï¼å¦interrupt æsignalï¼å¼èµ·çãéå¥è°ç¨å®æåï¼ä»¥åçè°ç¨å°æ¢å¤æ­£å¸¸æ§è¡ãä½¿ç¨æäºä»£ç æ®µæ§è¡æ­¤æä½å°å¯¼è´éå¥æ»å»ã\n\nå¨ä¸é¢çç¤ºä¾ä¸­ï¼æ³¨éï¼1ï¼é¨åè¿è¡èµéè½¬ç§»ä¹åï¼æå¯¹æ³¨éï¼3ï¼è´¦æ·ä½é¢ç¶æè¿è¡ä¿®æ¹ãè¿æ¶åï¼ä¼è®©é»å®¢å¯ä»¥å¨ç¶æä¿®æ¹ä¹åå©ç¨fallback() å½æ°å¤æ¬¡è°ç¨è¯¥å½æ°ï¼ç´è³åèµ°åçº¦è´¦æ·åçå¨é¨ä½é¢ã\n\nèé»å®¢éè¿è¿ä¸ bug è½¬èµ°äºä»·å¼è¿ 5000ä¸ çä»¥å¤ªå¸ãè¿å¨ä»¥å¤ªåç¤¾åºå¼åäºå·¨å¤§ææï¼ä»èä¹å¼åä»¥å¤ªå¸ä»·æ ¼çè·³æ°´ãå¯¹æ­¤ï¼ä»¥å¤ªååé¨è¿è¡äºå¤§è®¨è®ºï¼ä¸»æµæè§åä¸ºä¸¤æ´¾:\n\n 1. ä¸æ´¾è®¤ä¸ºï¼éè¦å¯¹ä»¥å¤ªåè¿è¡äº¤æåæ»ï¼ç±äº28å¤©éå®æå­å¨ï¼é»å®¢ææ¶æ æ³åèµ°é±ï¼ï¼ä»èè¿è¡åæ¶è¡¥æãéè¿äº¤æåæ»ï¼ä¿éæèµèæ­£å½å©çã\n 2. å¦ä¸æ´¾åè®¤ä¸ºï¼code is lawï¼ä¸éè¦éåè¡¥ææªæ½ãå ä¸ºé»å®¢è¡ä¸ºå¹¶æªè¿æ³ï¼æ¢ç¶ code is lawï¼é£ä¹ä»£ç ä¸­çbugä¹æ¯è§åä¸­ä¸é¨åãæ®è¯´ç½ä¸æµä¼ ä¸å°é»å®¢åç»ä»¥å¤ªåç¤¾åºçå¬å¼ä¿¡ï¼ä¿¡ä¸­è¯´ï¼"æå¹¶æªåéä»»ä½äºï¼æä»ä»å©ç¨äºä»£ç ä¸­ç featureãæ¢ç¶ä»£ç ä¸­åè®¸æå¯ä»¥éå¤ãå¤æ¬¡åé±ï¼æä»ä»æ¯å©ç¨äºè¿ä¸ç¹æ§èå·²"ãè¿ä¸æ´¾äººè®¤ä¸ºä¸åºè¯¥éåè¡¥ææªæ½ï¼æ´ä¸åºè¯¥è¿è¡äº¤æçåæ»ãå ä¸ºåºåé¾æéè¦çç¹æ§ä¾¿æ¯ä¸å¯ç¯¡æ¹æ§ï¼å¦æäº§çé®é¢å°±è¿è¡åæ»è¿æ çè¿èäºè¿ä¸ç¹æ§ãæ­¤å¤ï¼æ­¤æ¬¡åºç°é®é¢çä»ä»æ¯ä»¥å¤ªåä¹ä¸è¿è¡çä¸ä¸ªåºç¨ï¼ä»¥å¤ªåæ¬èº«å¹¶æ²¡æé®é¢ï¼ä¸ä»¥å¤ªåä¸å­å¨çæ æ°çåºç¨ï¼å¦æä¸ä¸ä¸ªæºè½åçº¦åºç°é®é¢ï¼æä»¬è¿è¦è¿è¡åæ»åï¼\n\nä»¥å¤ªåå¼åå¢éæ¯æåèï¼ä¸»è¦åå ç The DAO åéçä»¥å¤ªå¸å·²ç»è¶è¿å½æ¶æ»æµéä»¥å¤ªå¸é 10%ï¼è¿ä»¶äºå¯¹ä»¥å¤ªåæçå·¨å¤§å½±åï¼èå¦ææ¾ä»»ä¸ç®¡ï¼å¤§æ¦å¶ä¸­ç 1/3 å°è½å¥é»å®¢æä¸­ï¼The DAOå·²ç»æ¯ä»¥å¤ªåçæä¸­ä¸ä¸ª "too big to fail" çåºç¨äºï¼ä¼ä¸å·²ç»å¤§èä¸è½å°äºï¼å¦æåäºä¼å¯¹ç¤¾ä¼é æå½±åï¼ã\n\n\n# The Dao è¡¥ææªæ½\n\nè¡¥ææªæ½ï¼ä»åçæ»å»çåºååä¸ä¸ªåºåå¤è¿è¡ååï¼ä½¿å¾æ°åæ¯æç»è¶è¶åæåæ¯å¯è¡åï¼\n\n> æä»¬åè®¾å¤§å®¶é½åæè¯¥æ¹æ¡ï¼ä¸åæ²¿çåæ¥é¾ç»§ç»­æä¸å»ï¼èæ¯ä»é»å®¢æ»å»åºåçåä¸ä¸ªå¤è¿è¡éæ°æç¿ãç¶èå¦æè¿æ ·åï¼ä¸é¢é£æ¡é¾ä¸é»å®¢æ»å»çäº¤æåå¶ä»åæ³äº¤æé½è¢«åæ»äºï¼å æ­¤è¯¥æ¹æ¡ä¸å¯è¡ãå ä¸º The DAO åªæ¯ä»¥å¤ªåä¸çä¸ä¸ªæºè½åçº¦ï¼è¿æå¶ä»æºè½åçº¦åäº¤æå¢ã\n\nä»¥å¤ªåå¢éè®¾å®äºä¸¤æ­¥èµ°çæ¹æ¡ï¼1.éå®é»å®¢è´¦æ· 2.è®¾æ³ä»é»å®¢è´¦æ·éåä»¥å¤ªå¸\n\n 1. ä»¥å¤ªåå¢éåå¸ä¸ä¸ªåçº§ï¼è¦æ±å¡æ¯ä¸ The DAO åºéè´¦æ·ç¸å³çè´¦æ·åä¸è¢«åè®¸è¿è¡ä»»ä½äº¤æãåå¸åå¤§å¤æ°ç¿å·¥é½åçº§äºè¿ä¸è½¯ä»¶ï¼æ¥åäºè¿ä¸æªæ½ã(è¿æ¯ä¸ä¸ªè½¯åå, æ§ç¿å·¥è®¤ä¸ºæ°åºååæ³, æ°ç¿å·¥è®¤ä¸ºæ§åºåä¸åæ³)ãç¶èåçº§åçè½¯ä»¶å­å¨ä¸ä¸ªä¸æ±½æ²¹è´¹ç¸å³ç bugï¼å¨æ¶å°ä¸ä¸ªåºååç°å¶ä¸­åå«ä¸ The DAO è´¦æ·ç¸å³äº¤æï¼é£ä¹è¿éè¦æ¶åæ±½æ²¹è´¹åï¼ç´è§åè¯æä»¬ä¼¼ä¹ä¸åºè¯¥è¦ï¼ä»¥å¤ªåç¤¾åºè¿ä¸åçº§ä¹éµå¾ªäºè¿ä¸ç´è§ï¼æ²¡ææ¶åæ±½æ²¹è´¹ãè¿å¯¼è´æ»å»èå¯ä»¥ä»¥æä½çææ¬ï¼åèµ·å¤§éçè¿ç±» éæ³äº¤æ è¯·æ±ï¼å¯¼è´ç¿å·¥æåçåºåé¢ç¹ä¸è¢«è®¤å¯ãäºæ¯è½¯ååçæ¹æ¡å°±å¤±è´¥äºã\n 2. ä»¥å¤ªååå¸äºæ°çåçº§ï¼å° The DAO è´¦æ·çèµéå¼ºè¡è½¬å¥å°ä¸ä¸ªæ°çæºè½åçº¦ä¸­ï¼èè¯¥æºè½åçº¦åªæéé±ï¼å°ä»£å¸éåæä»¥å¤ªå¸ï¼è¿ä¸åè½ãè¿æ¯ç¡¬ååï¼è½¯ä»¶æ¬è´¨æ¯ä»¥è½¯ä»¶åçº§æ¹å¼å¼ºè¡éæ°è®°è´¦ãåæ¬åºè¯¥æè´¦æ·çç­¾åæè¡ï¼ä½ç°å¨éå¸¸æ¶æï¼å¡æ¯ The DAO è´¦æ·ä¸çèµéæ è®ºæ¬äººåæä¸å¦é½å¼ºè¡è½¬å¥å°æ°çåçº¦ä¸­å»ãåçº§è½¯ä»¶è§å®æå°ç¬¬192wä¸ªåºåæ¶ï¼èªå¨æ§è¡è¿ä¸è½¬è´¦äº¤æãæ§ç¿å·¥å¿ç¶ä¸è®¤å¯è¿ä¸è§åï¼å ä¸ºæ²¡æåæ³ç­¾åå±äºéæ³äº¤æãå æ­¤æç»äº§çç¡¬ååã\n\næ¯æèä¸åå¯¹èè¿è¡äºæ¿çäºè®ºãä¸ºæ­¤å¼åå¢éå¼åäºä¸ä¸ªæºè½åçº¦å¯¹æ­¤è¿è¡æç¥¨ãæç»ç»ææ¯ï¼å¤§å¤æ°äººæ¯æè¿è¡ç¡¬ååï¼å¤§å¤æ°ç¿å·¥ä¹æ¥åäºè¿ä¸åçº§ï¼å¤§å®¶ä¾¿å¼å§ç­å¾æåºç¬¬192wä¸ªåºåè¿ä¸åå²æ§æ¶å»ãè¿ä¸æ¬¡ç¡¬ååæåäºãä»æ­¤ä¸¤æ¡é¾ä¹åéæ­¥éè¿ chainId è¿è¡äºåºåï¼å¹¶å±åå­æ´»äºä¸å»: ETH å ETCã\n\n\n# åæ\n\nIs smart contract really smartï¼\n\n> æºè½åçº¦ä¸äººå·¥æºè½æ å³ï¼å¶å®å¯ä»¥ç§°å¶ä¸º èªå¨åçº¦ ââä»¥äºååå¥½ä»£ç èªå¨æ§è¡ç¸åºè§åãå æ­¤æºè½åçº¦å¹¶ä¸æºè½ï¼åå¥½ä¹åå°±ä¸å¯ä»¥åè¿è¡ä¿®æ¹ï¼å®éä¸å°±ç¸å½äºä¸ä¸ª ä»£ç ååã\n\nsmart contract is anything but smart.\n\n> åºåé¾çä¸å¯ç¯¡æ¹æ§å¶å®æ¯ä¸ä¸ªåååãä¸æ¹é¢å¢å äºåçº¦çå¬ä¿¡åï¼å¦ä¸æ¹é¢ä¹æå³çè§åä¸­ææ¼æ´å¾é¾ä¿®å¤ãä¸­å¿åçè½¯ä»¶åªéè¦åå¸ä¸ä¸ª patch ï¼è¡¥ä¸ï¼å°±è¡äºï¼ä½æ¯åºåé¾è½¯ä»¶æ´æ°éè¦ç¡¬ååãè®¾æ³ä½ åç°é¶è¡å¡ä¿¡æ¯è¢«çï¼ç¬¬ä¸ååºæ¯éç¥é¶è¡å°è´¦æ·è¿è¡å»ç»ãä½å¦æå¨åºåé¾ä¸ï¼ä½ å°±åªè½ççè´¦æ·ä¸­çé±è¢«è½¬ç§»èµ°ã(é¤éæ¯ç¹å¸åå¸ä¸ä¸ªæ°çæ¬ï¼ä¸ä½ ç¸å³çäº¤æé½ä¸æ¥å)ã æºè½åçº¦ä¸æ¦åå¸å°åºåé¾ä¸ï¼å°±ä¸è½é»æ­¢å¶è¢«è°ç¨ãé£ä¹ä½ åå¿é¡»å°æºè½åçº¦ä¸­çé±è½¬èµ°ãèæºè½åçº¦å¹¶æ²¡ææä¾è½¬èµ°é±çæ¹æ³ï¼é£å°±åªè½éè¿é»å®¢çæ¹æ³å°å©ä½èµéè½¬ç§»å°æ°è´¦æ·ä¸­ã\n\nNothing is irrevocability.\n\n> åºåé¾ççä¸å¯ç¯¡æ¹åï¼å¶å®æ¯å¯ä»¥æ¹çãä»£ç æ¯æ­»çï¼äººæ¯æ´»çï¼å®ªæ³é½å¯ä»¥ä¿®å®ªå¢ãçæ­£éå°ç±»ä¼¼ The DAO è¿ç±»éå¤§äºä»¶ï¼çæ­£æ³è¦ä¿®æ¹è¿æ¯å¯ä»¥å®ç°çã\n\nIs solidity the right programming language?\n\n> ä¸è¬æä¹ä¸ï¼A ç» B è½¬è´¦ï¼B ä¸å¯è½ä¼åè¿æ¥è°ç¨ Aãç¶è solidity è¯­è¨ä¸­ï¼A ç» Bè½¬è´¦ç­äºéæ§è°ç¨äºBç fallback() å½æ°ï¼è B å¯ä»¥éè¿ fallback() æ¥åè¿æ¥è°ç¨ Aãç±äºè¿ä¸æä»¬çå¸¸è¯ä¸ç¬¦ï¼ä¾¿å®¹æå¿½è§æè¿ä¸æ¼æ´ãæäººå¼åç¨æ´å®å¨çå½æ°å¼çç¼ç¨è¯­è¨ï¼ä¸é¿è¿æ¥çï¼è¦å®ç°å¯¹æºè½åçº¦çè®ºä¸æ­£ç¡®æ§çè¯æã æ¯ç¹å¸èæ¬è¯­è¨ç®åãè¡¨è¾¾è½åå·®ï¼å¾å¤åè½æ æ³è¡¨è¾¾åºç°ãèä»¥å¤ªåçç¼ç¨è¯­è¨æ¯å¾çµå®å¤çï¼å¡æ¯è®¡ç®æºç¨åºå¯ä»¥å®æçï¼solidity é½å¯ä»¥å°å¶å®ç°ãç¶èï¼å¾çµå®å¤çè¡¨è¾¾è½åæ¯ä¸ç§å¥½äºåï¼æäººè®¤ä¸ºåºè¯¥éæ©ä¸ç§éä¸­çè¯­è¨ï¼æ¢ä¸è¦æ¯ç¹å¸èæ¬è¯­è¨é£ä¹ç®åï¼åä¸è¦ solidity è¯­è¨é£æ ·å¾çµå®å¤ï¼å¸ææ¢å¯ä»¥å®ç°æºè½åçº¦æ³è¦å®ç°çåè½ï¼ä½åä¸å®¹æåºç°å®å¨æ¼æ´ãç¶èï¼æ¾å°è¿æ ·ä¸ç§è¯­è¨æ¯å°é¾çï¼å ä¸ºè®¾è®¡ä¹åæä»¬æ æ³é¢æå°æªæ¥çææåºç¨åºæ¯åææçå®å¨æ»å»ãç°å®çæ´»ä¸­ååä¹ä¼åºç°çº çº·ï¼æä»¬å¹¶æªæä¾ä¸ç§ä¸é¨ç¨äºååç¼åçä¸ç¨è¯­è¨ï¼èæ¯éè¿æä¾ãæ¨¡æ¿ãæ¥è§£å³ãè¿å¯è½æ¯æºè½åçº¦æªæ¥çåå±æ¹åï¼å¸¸ç¨çæºè½åçº¦å¯è½ä¼åºç°æ¨¡æ¿ï¼ä¹å¯è½ä¼åºç°ä¸é¨ç¼åæºè½åçº¦çæºæã\n\nå¼æºè½¯ä»¶æ¯éå¼æºè½¯ä»¶å®å¨ã\n\n> æäººè®¤ä¸ºå¼æºä»£ç è¢«ä¼äººæå®¡è§ï¼å¶ä¸­åºç°å®å¨æ¼æ´çå¯è½ä¸å¤§ãè½ç¶çè®ºä¸å¤§å®¶é½å¯ä»¥å»çï¼ç¶èå®éä¸çæ­£ææ¶é´åç²¾åæ¥ççäººå¾å°ï¼å³ä½¿çï¼ä¹ä¸ä¸å®å¤§å¤æ°äººé½åè¶³å¤çä¸ä¸ç¥è¯çåºå¶ä¸­éèçæ¼æ´ãæå¯è½æä»¬é½è®¤ä¸ºä¸çä¸è¿ä¹å¤äººï¼å«äººè¯å®çè¿äºï¼ä½å®éä¸å¤§å®¶å¯è½é½è¿ä¹æ³ï¼æ²¡æå ä¸ªäººçæ­£çè¿å¼æºä»£ç ãmany eyeball fallacy\n\nWhat does decentrtilization meanï¼\n\n> å»ä¸­å¿åä¸æå³çå®å¨æç»äººçå¹²é¢ï¼ä¸æå³çå®å¨ä¸è½ä¿®æ¹ï¼èæ¯è¦ç¨å»ä¸­å¿åçæ¹æ³æ¥å®æä¿®æ¹ãä»¥å¤ªåå¢éåå¸åçº§ä¸ºä»ä¹æç»è½å¤æåï¼å ä¸ºç»å¤§å¤æ°ç¿å·¥æ¥åäºåçº§è½¯ä»¶ï¼ä»¥è¡å¨æ¯æäºååæ¹æ¡ãå³ä½¿å¦æ­¤ï¼ä»¥å¤ªåå¢éä»ç¶ä¸è½å¼ºè¿«ä¸é¨åäººä»æ§é¾è½¬å°æ°é¾ãæä»¥ä»¥å¤ªåå¢éå¹¶ä¸è½å¼ºè¿«å¤§å®¶å»è½¬æ¢ï¼ç¿å·¥ä»¬è®¤ä¸ºä»¥å¤ªåçå³å®æ¯ç¬¦åå¤§å®¶å©ççã\n\nååæ¯åäºåï¼\n\n> å¨ä¸­å¿åçç³»ç»éï¼ä½ å¯ä»¥éæ©æ¾å¼ä½æ¯ä¸è½ååãååå¯¼è´åæä¸æ¡é¾åæäºä¸¤æ¡ãç¶èååæ°æ°æ¯å»ä¸­å¿åçä½ç°ï¼å­å¨ååï¼æ°æ°æ¯æ°ä¸»ç²¾ç¥çä½ç°ã(ç¨æ·ä¸æ»¡æï¼å°±æéæ©ååçæå©)\n\ndecentralized ä¸ç­äº detributed\n\n> ä¸ä¸ªå»ä¸­å¿åç³»ç»å¿ç¶æ¯åå¸å¼çï¼ä½åå¸å¼æªå¿æ¯å»ä¸­å¿åãæ¯ç¹å¸ãä»¥å¤ªåé½å±äºäº¤æé©±å¨çç¶ææºã\n\n\n# ç¾é¾ Beauty Chain\n\n\n\nERC æçæ¯ Ethereum Request for Comments.\n\n * IPO: Inital public offering, æä¼ä¸é¦æ¬¡å°èªå·±çè¡ä»½åå¬ä¼åºå®ï¼æ¯ä¸­å°ä¼ä¸èèµçä¸ç§æ¹å¼ï¼éè¿è¿ç§æ¹å¼æé¿åä¼ä¸è½å¤å¿«éåéèµéï¼å¸å¼æèµèï¼å¢å¼ºå¶è¡ä»½å¨å¸åºä¸çæµéæ§ï¼å®æä»ç§äººå¶ä¼ä¸åè¡ä»½å¶ä¼ä¸çè½¬åã\n * ICO: Inital coin offering, æ¯åºåé¾è¡ä¸çä¸ç§èèµæ¹å¼ï¼æéè¿åè¡ä»£å¸ï¼Tokenï¼çæ¹å¼è¿è¡èèµãæ¯ä¸ªåºåé¾é¡¹ç®ä¼æ ¹æ®æèµèæèµéé¢æ¯ä¾ï¼åè¡ç¸åºçä»£å¸ç»æèµèï¼è¿äºä»£å¸å¾å¾ä¹å¯ä»¥å¨ä¸äºæ°æ®è´§å¸äº¤æå¹³å°ï¼å¦Counterpartyç­ï¼è¿è¡äº¤æã\n * å å¯è´§å¸æçæ¯ä»»ä½æ¥æç¬ç«åºåé¾çå å¯è´§å¸ï¼æ¯ç¹å¸ãä»¥å¤ªåï¼\n * ä»£å¸æ¯æ²¡æèªå·±çåºåé¾ï¼èæ¯ä¾éäºå¶ä»åºåé¾çå å¯è´§å¸ã ä»£å¸ä¼ä»èªå·±ä¾éçåºåé¾ææ¯ä¸­è·çã\n\n// ä¸¤ä¸ªåæ° æ¥æ¶å°åï¼è½¬è´¦éé¢\nfunction batchTransfer(address[] _receivers, uint256 _value) public whenNotPaused returns (bool) {\n    uint cnt = _receivers.length;\n    uint256 amount = uint256(cnt) * _value; // è®¡ç®æ»éé¢\n    require(cnt > 0 && cnt <= 20); // æ¥æ¶èæå¤20ä¸ª\n    require(_value > 0 && balances[msg.sender] >= amount); // æ£æ¥åèµ·è°ç¨çè´¦æ·æ¯å¦ç¨è¶³å¤å¤çä»£å¸\n\n    balances[msg.sender] = balances[msg.sender].sub(amount); // åèµ·è°ç¨çè´¦æ·åå» amount\n    for (uint i = 0; i < cnt; i++) { // éè¿å¾ªç¯ç»æ¥æ¶èä»·å¼ value çä»£å¸\n        balances[_receivers[i]] = balances[_receivers[i]].add(_value);\n        Transfer(msg.sender, _receivers[i], _value);\n    }\n    return true;\n\n\n> é®é¢åºç°å¨è®¡ç®æ»éé¢ä¸é¢ï¼ uint256 amount = uint256(cnt) * _valueãåå¦è®¡ç®æ¶ï¼value çå¼å¾å¤§ï¼è¿ä¸ªä¹æ³ç»æå¯è½ä¼äº§çæº¢åºãæº¢åºåç®å¾ç amount å¯è½æ¯ä¸ä¸ªå¾å°çæ°ãæ¢è¨ä¹å¨è°ç¨èè´¦æ·ååæ³æ¶ï¼åæçæ¯ä¸ä¸ªå¾å°çæ°å­ï¼ä½è½¬è´¦æ¶ï¼è½¬èµ°çä»ç¶æ¯ä¸ç¬å¾å¤§çä»£å¸ãä»èå¯¼è´ç³»ç»ä¸­å­ç©ºäº§çå¤§éä»£å¸ã\n\n\n# åºåé¾çæ»¥ç¨\n\næäººè¯´ä¿é©çèµå¯ä»¥ä¸é¾ï¼å ä¸ºç°æçèµå¾æ¢ãå ä¸ºåºåé¾ä¸è½¬è´¦åªéè¦ç¡®è®¤åå°±å®æäºï¼ä¸ç°å®ä¸­æ°ææç¸æ¯å·æå¾å¤§çè¿æ­¥ã\n\n> ä¿é©çèµéåº¦æ¢ï¼å¹¶éè½¬è´¦è¿ä¸è¿ç¨ï¼èæ¯å®¡æ ¸çèµåå®¹ãèçèµç¡®è®¤åå®¡æ ¸ï¼æ¯åºåé¾ææ æ³å®æçã\n\næäººè¯´ç¨åºåé¾åé²ä¼ªæº¯æºï¼å°ææºè¬èçäº§å¨è¿ç¨ä¸é¾ï¼å¨åºåé¾ä¸å¯ä»¥æ¥å°è¬èçäº§éå®çå¨è¿ç¨ã\n\n> åºååªè½ä¿è¯åºåé¾çæ°æ®åå®¹æ¯ä¸å¯ç¯¡æ¹çï¼èæ æ³æ£æµæ°æ®æ¯å¦çå®ãåå¥çæ¶åæ¬èº«åçå°±æ¯åçåå®¹ã\n\nä¸­å¿åä¸å»ä¸­å¿åççéå¹¶éæ¯åæçã\n\n> ä¸ä¸ªåä¸æ¨¡å¼æ¢å¯ä»¥å­å¨ä¸­å¿åæåï¼ä¹å¯ä»¥å­å¨å»ä¸­å¿åæåãæ¯ç¹å¸ä»ä»æ¯ä¸ç§æ¯ä»æ¹å¼ï¼èéç¨æ¯ç¹å¸ä½ä¸ºæ¯ä»æ¹å¼çåä¸æ¨¡å¼æ¬èº«å¹¶ä¸æ¯å¿é¡»æ¯å»ä¸­å¿åçãæ¯å¦äºé©¬éå¦æå¨æªæ¥æ¥åæ¯ç¹å¸æ¯ä»ãä¸è¦å ä¸ºåºåé¾æ¯å»ä¸­å¿åçï¼èè®¤ä¸ºææç¨å°åºåé¾çææ¯é½æ¯å»ä¸­å¿åçã\n\n\n# æ³å¾çç®¡åæ¯ä»æ¹å¼\n\nåºåé¾çæ¯ä»æ¹å¼ç®åä¸åæ³å¾çç®¡åä¿æ¤ãç°å®ä¸­ä¿¡ç¨å¡è¢«çå·å¯ä»¥ç³è¯·æ³å¾çç®¡çä¿æ¤ï¼ä½æ¯åºåé¾åä¸è½ã æäººè®¤ä¸ºåºåé¾çäº¤ææ¹å¼ä¸ç°ææ¹å¼ç¸æ¯ï¼æ¯ä»æçä½ãè½èå¤§ï¼æ¯ä¸åç®çãä½æ¯å¨è·¨å½è´¸æè¿ä¸èæ¯ä¸ï¼æ¯ç¹å¸æ¹å¼æ¯æ¯ç°æé¶è¡ä½ç³»æ´é«æçã\n\n\n# æ»ç»\n\nä¸è¦è®¤ä¸ºå»ä¸­å¿åãæºè½åçº¦ç­å¯ä»¥è§£å³ä¸åé®é¢ï¼è¿å°±è¿åäºå¦ä¸ä¸ªæç«¯ãThe DAO å³ä½¿æ²¡æé»å®¢æ»å»çé®é¢ï¼å¶åä¸æ¨¡å¼æ¯å¦å°±æ²¡æé®é¢å­å¨ï¼The DAO çæèµæ¹åå®å¨æ°ä¸»ï¼ç±å¤§å®¶ä¸èµ·è¯´äºç®ï¼ä½æ°ä¸»å°±ä¸å®æ¯å¥½äºåï¼å¤§å¤æ°äººå°±æ¯å¯¹çåï¼\n\nDemocracy is the worst form of Government except for those other forms that have been tried from time to time',normalizedContent:'# åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  8\n\n * å­¦ä¹ å°åï¼https://www.bilibili.com/video/bv1vt411x7jf\n * åèæç« ï¼https://sinocifeng.github.io/downloadpage.html\n\n\n# dao\n\nä¸ºä½ä¸å°ä¸åé½å»ä¸­å¿åå¢ decentralize everything. dao(decentralize autonomous organization)-å»ä¸­å¿åèªæ²»ç»ç»å°±åºç°äºãç»ç»ä¸è¬é½ä¼æèªå·±çè§ç« å¶åº¦ï¼dao çè§ç« å¶åº¦æ¯åå¨ä»£ç éçã\n\n\n# the dao\n\n2016å¹´5æï¼åºç°ä¸ä¸ªè´åäºä¼ç­¹æèµç daoââthe daoï¼åå­æç¹æ­§ä¹ï¼ãç±»ä¼¼äºä¼ç­¹çåºéç»ç»ï¼æ¬è´¨ä¸å°±æ¯ä¸ä¸ªè¿è¡å¨ä»¥å¤ªåä¸çæºè½åçº¦ãå¦ææ³è¦åä¸å¶ä¼ç­¹ï¼å¯ä»¥å°èªå·±çä»¥å¤ªå¸åéå°è¯¥æºè½åçº¦æ¢åthe dao çä»£å¸ãå½éè¦å³å®æèµåªä¸ä¸ªé¡¹ç®æ¶ï¼ç±ä»£å¸ææèè¿è¡æç¥¨è¡¨å³ï¼æ¯ä½åä¸èæç¥¨çæéç±ä»£ç¬å¤å°å³å®ã å½æèµè·å¾æ¶çï¼ä¹æ ¹æ®åä¸èä»£å¸æ°è¿è¡åæã\n\nä¼ ç»çæèµé½æ¯ç±å ä¸ªå³ç­èå³å®æèµæ¹åçï¼ä½ the dao çæ¹å¼ä½¿å¾ææäººé½å¯ä»¥åä¸å³ç­ã2016å¹´5æå¼å§ä¼ç­¹ï¼ä»ä¸ä¸ªææ¶é´å°±å·²ç»ä¼ç­¹å¾å°ä»·å¼æå¤çä»¥å¤ªå¸ãæäººè®¤ä¸º 3-5 å¹´åçå½±ååä¼è¶è¿ä»¥å¤ªåæ¬èº«ãä½æ¯å®ä»ä»å­å¨äº 3 ä¸ªæã\n\nèèå°æèµèå¨æèµè¿ç¨ä¸­å¯è½éè¦ç¨é±ï¼éè¦ç¨ä»£å¸æ¢åä»¥å¤ªå¸ãå¨ the dao çè®¾è®¡ä¸­éç¨äº æå(split dao) å®ç°è¿ä¸åè½ãå¶å¹¶éåçº¯ååæ¶çï¼èæ¯éç¨çæ child dao çæ¹æ³ãå¦ææèµè¿ç¨ä¸­æä¸ªå°ä¼é¡¹ç®ä¸è¢«çå¥½ï¼é£ä¹å®å¯ä»¥ç¬ç«åºæ¥æç«ä¸ºå­åºéï¼æç«¯æåµå°±æ¯åä¸ªçæèµäººæç«äº child daoï¼è¿ä¸ªäººå°é±æèµç»èªå·±ä»èååèªå·±çæèµä¸æ¶çã\n\næååæ7å¤©çè¾©è®ºæï¼å¤§å®¶å¯ä»¥è®¨è®ºæåæ¯å¦å¥½å¹¶å³å®æ¯å¦å å¥æåãæåä¹åï¼æ28å¤©éå®æï¼28å¤©åæè½ååºè¿äºä»¥å¤ªå¸ãä¹æ­£æ¯è¿28å¤©çéå®æï¼ç»äºä»¥å¤ªåè¡¥ææ¶é´ï¼æå28å¤©ï¼ãè¿ä¸çå¿µæ¯æ°ä¸»å¶åº¦çè¿ä¸æ­¥ä½ç°ï¼ä¸ä»å¡è®®å°æ°æä»å¤æ°ï¼ä¹ä¿éäºå¯¹å°æ°äººçæå©å°éãä½é®é¢åºç°å¨äºå¯¹ split dao çå®ç°ä¸ï¼è¿å¯¼è´äº the dao æç»èµ°åæ«è·¯ãä¸ä¸º split dao çå®ç°ä»£ç ï¼\n\nfunction splitdao(\n    uint _proposalid,\n    address _newcurator\n) noether onlytokenholders returns (bool _success) {\n    // ......\n    // burn dao tokens\n    transfer(msg.sender, 0, balances[msg.sender]);\n    withdrawrewardfor(msg.sender); // (1) è¿é±ç»è°ç¨è¯¥å½æ°çäºº\n    totalsupply -= balances[msg.sender]; // (2) åå° the dao ä¸­çæ»éé¢\n    balances[msg.sender] = 0; // (3) å°è°ç¨èçè´¦æ·æ¸é¶\n    paidout[msg.sender] = 0;\n    return true;\n}\n\n\næ­£ç¡®çåæ³åºè¯¥æ¯åæ¸é¶åè¿é±ï¼å¦åä¼é æéå¥æ»å»ã\n\n\n# éå¥æ»å»\n\nè®¡ç®æºç¨åºæå­ç¨åºå¨æ§è¡è¿ç¨ä¸­ä¸­æ­ï¼ç¶åå¨å®åä¸æ¬¡è°ç¨å®ææ§è¡ä¹ååæ¬¡è¿è¡è°ç¨ï¼é£ä¹è¯¥ç¨åºæå­ç¨åºç§°ä¸ºéå¥ç¨åºãä¸­æ­å¯è½æ¯ç±åé¨æä½ï¼å¦jumpæcallï¼æå¤é¨æä½ï¼å¦interrupt æsignalï¼å¼èµ·çãéå¥è°ç¨å®æåï¼ä»¥åçè°ç¨å°æ¢å¤æ­£å¸¸æ§è¡ãä½¿ç¨æäºä»£ç æ®µæ§è¡æ­¤æä½å°å¯¼è´éå¥æ»å»ã\n\nå¨ä¸é¢çç¤ºä¾ä¸­ï¼æ³¨éï¼1ï¼é¨åè¿è¡èµéè½¬ç§»ä¹åï¼æå¯¹æ³¨éï¼3ï¼è´¦æ·ä½é¢ç¶æè¿è¡ä¿®æ¹ãè¿æ¶åï¼ä¼è®©é»å®¢å¯ä»¥å¨ç¶æä¿®æ¹ä¹åå©ç¨fallback() å½æ°å¤æ¬¡è°ç¨è¯¥å½æ°ï¼ç´è³åèµ°åçº¦è´¦æ·åçå¨é¨ä½é¢ã\n\nèé»å®¢éè¿è¿ä¸ bug è½¬èµ°äºä»·å¼è¿ 5000ä¸ çä»¥å¤ªå¸ãè¿å¨ä»¥å¤ªåç¤¾åºå¼åäºå·¨å¤§ææï¼ä»èä¹å¼åä»¥å¤ªå¸ä»·æ ¼çè·³æ°´ãå¯¹æ­¤ï¼ä»¥å¤ªååé¨è¿è¡äºå¤§è®¨è®ºï¼ä¸»æµæè§åä¸ºä¸¤æ´¾:\n\n 1. ä¸æ´¾è®¤ä¸ºï¼éè¦å¯¹ä»¥å¤ªåè¿è¡äº¤æåæ»ï¼ç±äº28å¤©éå®æå­å¨ï¼é»å®¢ææ¶æ æ³åèµ°é±ï¼ï¼ä»èè¿è¡åæ¶è¡¥æãéè¿äº¤æåæ»ï¼ä¿éæèµèæ­£å½å©çã\n 2. å¦ä¸æ´¾åè®¤ä¸ºï¼code is lawï¼ä¸éè¦éåè¡¥ææªæ½ãå ä¸ºé»å®¢è¡ä¸ºå¹¶æªè¿æ³ï¼æ¢ç¶ code is lawï¼é£ä¹ä»£ç ä¸­çbugä¹æ¯è§åä¸­ä¸é¨åãæ®è¯´ç½ä¸æµä¼ ä¸å°é»å®¢åç»ä»¥å¤ªåç¤¾åºçå¬å¼ä¿¡ï¼ä¿¡ä¸­è¯´ï¼"æå¹¶æªåéä»»ä½äºï¼æä»ä»å©ç¨äºä»£ç ä¸­ç featureãæ¢ç¶ä»£ç ä¸­åè®¸æå¯ä»¥éå¤ãå¤æ¬¡åé±ï¼æä»ä»æ¯å©ç¨äºè¿ä¸ç¹æ§èå·²"ãè¿ä¸æ´¾äººè®¤ä¸ºä¸åºè¯¥éåè¡¥ææªæ½ï¼æ´ä¸åºè¯¥è¿è¡äº¤æçåæ»ãå ä¸ºåºåé¾æéè¦çç¹æ§ä¾¿æ¯ä¸å¯ç¯¡æ¹æ§ï¼å¦æäº§çé®é¢å°±è¿è¡åæ»è¿æ çè¿èäºè¿ä¸ç¹æ§ãæ­¤å¤ï¼æ­¤æ¬¡åºç°é®é¢çä»ä»æ¯ä»¥å¤ªåä¹ä¸è¿è¡çä¸ä¸ªåºç¨ï¼ä»¥å¤ªåæ¬èº«å¹¶æ²¡æé®é¢ï¼ä¸ä»¥å¤ªåä¸å­å¨çæ æ°çåºç¨ï¼å¦æä¸ä¸ä¸ªæºè½åçº¦åºç°é®é¢ï¼æä»¬è¿è¦è¿è¡åæ»åï¼\n\nä»¥å¤ªåå¼åå¢éæ¯æåèï¼ä¸»è¦åå ç the dao åéçä»¥å¤ªå¸å·²ç»è¶è¿å½æ¶æ»æµéä»¥å¤ªå¸é 10%ï¼è¿ä»¶äºå¯¹ä»¥å¤ªåæçå·¨å¤§å½±åï¼èå¦ææ¾ä»»ä¸ç®¡ï¼å¤§æ¦å¶ä¸­ç 1/3 å°è½å¥é»å®¢æä¸­ï¼the daoå·²ç»æ¯ä»¥å¤ªåçæä¸­ä¸ä¸ª "too big to fail" çåºç¨äºï¼ä¼ä¸å·²ç»å¤§èä¸è½å°äºï¼å¦æåäºä¼å¯¹ç¤¾ä¼é æå½±åï¼ã\n\n\n# the dao è¡¥ææªæ½\n\nè¡¥ææªæ½ï¼ä»åçæ»å»çåºååä¸ä¸ªåºåå¤è¿è¡ååï¼ä½¿å¾æ°åæ¯æç»è¶è¶åæåæ¯å¯è¡åï¼\n\n> æä»¬åè®¾å¤§å®¶é½åæè¯¥æ¹æ¡ï¼ä¸åæ²¿çåæ¥é¾ç»§ç»­æä¸å»ï¼èæ¯ä»é»å®¢æ»å»åºåçåä¸ä¸ªå¤è¿è¡éæ°æç¿ãç¶èå¦æè¿æ ·åï¼ä¸é¢é£æ¡é¾ä¸é»å®¢æ»å»çäº¤æåå¶ä»åæ³äº¤æé½è¢«åæ»äºï¼å æ­¤è¯¥æ¹æ¡ä¸å¯è¡ãå ä¸º the dao åªæ¯ä»¥å¤ªåä¸çä¸ä¸ªæºè½åçº¦ï¼è¿æå¶ä»æºè½åçº¦åäº¤æå¢ã\n\nä»¥å¤ªåå¢éè®¾å®äºä¸¤æ­¥èµ°çæ¹æ¡ï¼1.éå®é»å®¢è´¦æ· 2.è®¾æ³ä»é»å®¢è´¦æ·éåä»¥å¤ªå¸\n\n 1. ä»¥å¤ªåå¢éåå¸ä¸ä¸ªåçº§ï¼è¦æ±å¡æ¯ä¸ the dao åºéè´¦æ·ç¸å³çè´¦æ·åä¸è¢«åè®¸è¿è¡ä»»ä½äº¤æãåå¸åå¤§å¤æ°ç¿å·¥é½åçº§äºè¿ä¸è½¯ä»¶ï¼æ¥åäºè¿ä¸æªæ½ã(è¿æ¯ä¸ä¸ªè½¯åå, æ§ç¿å·¥è®¤ä¸ºæ°åºååæ³, æ°ç¿å·¥è®¤ä¸ºæ§åºåä¸åæ³)ãç¶èåçº§åçè½¯ä»¶å­å¨ä¸ä¸ªä¸æ±½æ²¹è´¹ç¸å³ç bugï¼å¨æ¶å°ä¸ä¸ªåºååç°å¶ä¸­åå«ä¸ the dao è´¦æ·ç¸å³äº¤æï¼é£ä¹è¿éè¦æ¶åæ±½æ²¹è´¹åï¼ç´è§åè¯æä»¬ä¼¼ä¹ä¸åºè¯¥è¦ï¼ä»¥å¤ªåç¤¾åºè¿ä¸åçº§ä¹éµå¾ªäºè¿ä¸ç´è§ï¼æ²¡ææ¶åæ±½æ²¹è´¹ãè¿å¯¼è´æ»å»èå¯ä»¥ä»¥æä½çææ¬ï¼åèµ·å¤§éçè¿ç±» éæ³äº¤æ è¯·æ±ï¼å¯¼è´ç¿å·¥æåçåºåé¢ç¹ä¸è¢«è®¤å¯ãäºæ¯è½¯ååçæ¹æ¡å°±å¤±è´¥äºã\n 2. ä»¥å¤ªååå¸äºæ°çåçº§ï¼å° the dao è´¦æ·çèµéå¼ºè¡è½¬å¥å°ä¸ä¸ªæ°çæºè½åçº¦ä¸­ï¼èè¯¥æºè½åçº¦åªæéé±ï¼å°ä»£å¸éåæä»¥å¤ªå¸ï¼è¿ä¸åè½ãè¿æ¯ç¡¬ååï¼è½¯ä»¶æ¬è´¨æ¯ä»¥è½¯ä»¶åçº§æ¹å¼å¼ºè¡éæ°è®°è´¦ãåæ¬åºè¯¥æè´¦æ·çç­¾åæè¡ï¼ä½ç°å¨éå¸¸æ¶æï¼å¡æ¯ the dao è´¦æ·ä¸çèµéæ è®ºæ¬äººåæä¸å¦é½å¼ºè¡è½¬å¥å°æ°çåçº¦ä¸­å»ãåçº§è½¯ä»¶è§å®æå°ç¬¬192wä¸ªåºåæ¶ï¼èªå¨æ§è¡è¿ä¸è½¬è´¦äº¤æãæ§ç¿å·¥å¿ç¶ä¸è®¤å¯è¿ä¸è§åï¼å ä¸ºæ²¡æåæ³ç­¾åå±äºéæ³äº¤æãå æ­¤æç»äº§çç¡¬ååã\n\næ¯æèä¸åå¯¹èè¿è¡äºæ¿çäºè®ºãä¸ºæ­¤å¼åå¢éå¼åäºä¸ä¸ªæºè½åçº¦å¯¹æ­¤è¿è¡æç¥¨ãæç»ç»ææ¯ï¼å¤§å¤æ°äººæ¯æè¿è¡ç¡¬ååï¼å¤§å¤æ°ç¿å·¥ä¹æ¥åäºè¿ä¸åçº§ï¼å¤§å®¶ä¾¿å¼å§ç­å¾æåºç¬¬192wä¸ªåºåè¿ä¸åå²æ§æ¶å»ãè¿ä¸æ¬¡ç¡¬ååæåäºãä»æ­¤ä¸¤æ¡é¾ä¹åéæ­¥éè¿ chainid è¿è¡äºåºåï¼å¹¶å±åå­æ´»äºä¸å»: eth å etcã\n\n\n# åæ\n\nis smart contract really smartï¼\n\n> æºè½åçº¦ä¸äººå·¥æºè½æ å³ï¼å¶å®å¯ä»¥ç§°å¶ä¸º èªå¨åçº¦ ââä»¥äºååå¥½ä»£ç èªå¨æ§è¡ç¸åºè§åãå æ­¤æºè½åçº¦å¹¶ä¸æºè½ï¼åå¥½ä¹åå°±ä¸å¯ä»¥åè¿è¡ä¿®æ¹ï¼å®éä¸å°±ç¸å½äºä¸ä¸ª ä»£ç ååã\n\nsmart contract is anything but smart.\n\n> åºåé¾çä¸å¯ç¯¡æ¹æ§å¶å®æ¯ä¸ä¸ªåååãä¸æ¹é¢å¢å äºåçº¦çå¬ä¿¡åï¼å¦ä¸æ¹é¢ä¹æå³çè§åä¸­ææ¼æ´å¾é¾ä¿®å¤ãä¸­å¿åçè½¯ä»¶åªéè¦åå¸ä¸ä¸ª patch ï¼è¡¥ä¸ï¼å°±è¡äºï¼ä½æ¯åºåé¾è½¯ä»¶æ´æ°éè¦ç¡¬ååãè®¾æ³ä½ åç°é¶è¡å¡ä¿¡æ¯è¢«çï¼ç¬¬ä¸ååºæ¯éç¥é¶è¡å°è´¦æ·è¿è¡å»ç»ãä½å¦æå¨åºåé¾ä¸ï¼ä½ å°±åªè½ççè´¦æ·ä¸­çé±è¢«è½¬ç§»èµ°ã(é¤éæ¯ç¹å¸åå¸ä¸ä¸ªæ°çæ¬ï¼ä¸ä½ ç¸å³çäº¤æé½ä¸æ¥å)ã æºè½åçº¦ä¸æ¦åå¸å°åºåé¾ä¸ï¼å°±ä¸è½é»æ­¢å¶è¢«è°ç¨ãé£ä¹ä½ åå¿é¡»å°æºè½åçº¦ä¸­çé±è½¬èµ°ãèæºè½åçº¦å¹¶æ²¡ææä¾è½¬èµ°é±çæ¹æ³ï¼é£å°±åªè½éè¿é»å®¢çæ¹æ³å°å©ä½èµéè½¬ç§»å°æ°è´¦æ·ä¸­ã\n\nnothing is irrevocability.\n\n> åºåé¾ççä¸å¯ç¯¡æ¹åï¼å¶å®æ¯å¯ä»¥æ¹çãä»£ç æ¯æ­»çï¼äººæ¯æ´»çï¼å®ªæ³é½å¯ä»¥ä¿®å®ªå¢ãçæ­£éå°ç±»ä¼¼ the dao è¿ç±»éå¤§äºä»¶ï¼çæ­£æ³è¦ä¿®æ¹è¿æ¯å¯ä»¥å®ç°çã\n\nis solidity the right programming language?\n\n> ä¸è¬æä¹ä¸ï¼a ç» b è½¬è´¦ï¼b ä¸å¯è½ä¼åè¿æ¥è°ç¨ aãç¶è solidity è¯­è¨ä¸­ï¼a ç» bè½¬è´¦ç­äºéæ§è°ç¨äºbç fallback() å½æ°ï¼è b å¯ä»¥éè¿ fallback() æ¥åè¿æ¥è°ç¨ aãç±äºè¿ä¸æä»¬çå¸¸è¯ä¸ç¬¦ï¼ä¾¿å®¹æå¿½è§æè¿ä¸æ¼æ´ãæäººå¼åç¨æ´å®å¨çå½æ°å¼çç¼ç¨è¯­è¨ï¼ä¸é¿è¿æ¥çï¼è¦å®ç°å¯¹æºè½åçº¦çè®ºä¸æ­£ç¡®æ§çè¯æã æ¯ç¹å¸èæ¬è¯­è¨ç®åãè¡¨è¾¾è½åå·®ï¼å¾å¤åè½æ æ³è¡¨è¾¾åºç°ãèä»¥å¤ªåçç¼ç¨è¯­è¨æ¯å¾çµå®å¤çï¼å¡æ¯è®¡ç®æºç¨åºå¯ä»¥å®æçï¼solidity é½å¯ä»¥å°å¶å®ç°ãç¶èï¼å¾çµå®å¤çè¡¨è¾¾è½åæ¯ä¸ç§å¥½äºåï¼æäººè®¤ä¸ºåºè¯¥éæ©ä¸ç§éä¸­çè¯­è¨ï¼æ¢ä¸è¦æ¯ç¹å¸èæ¬è¯­è¨é£ä¹ç®åï¼åä¸è¦ solidity è¯­è¨é£æ ·å¾çµå®å¤ï¼å¸ææ¢å¯ä»¥å®ç°æºè½åçº¦æ³è¦å®ç°çåè½ï¼ä½åä¸å®¹æåºç°å®å¨æ¼æ´ãç¶èï¼æ¾å°è¿æ ·ä¸ç§è¯­è¨æ¯å°é¾çï¼å ä¸ºè®¾è®¡ä¹åæä»¬æ æ³é¢æå°æªæ¥çææåºç¨åºæ¯åææçå®å¨æ»å»ãç°å®çæ´»ä¸­ååä¹ä¼åºç°çº çº·ï¼æä»¬å¹¶æªæä¾ä¸ç§ä¸é¨ç¨äºååç¼åçä¸ç¨è¯­è¨ï¼èæ¯éè¿æä¾ãæ¨¡æ¿ãæ¥è§£å³ãè¿å¯è½æ¯æºè½åçº¦æªæ¥çåå±æ¹åï¼å¸¸ç¨çæºè½åçº¦å¯è½ä¼åºç°æ¨¡æ¿ï¼ä¹å¯è½ä¼åºç°ä¸é¨ç¼åæºè½åçº¦çæºæã\n\nå¼æºè½¯ä»¶æ¯éå¼æºè½¯ä»¶å®å¨ã\n\n> æäººè®¤ä¸ºå¼æºä»£ç è¢«ä¼äººæå®¡è§ï¼å¶ä¸­åºç°å®å¨æ¼æ´çå¯è½ä¸å¤§ãè½ç¶çè®ºä¸å¤§å®¶é½å¯ä»¥å»çï¼ç¶èå®éä¸çæ­£ææ¶é´åç²¾åæ¥ççäººå¾å°ï¼å³ä½¿çï¼ä¹ä¸ä¸å®å¤§å¤æ°äººé½åè¶³å¤çä¸ä¸ç¥è¯çåºå¶ä¸­éèçæ¼æ´ãæå¯è½æä»¬é½è®¤ä¸ºä¸çä¸è¿ä¹å¤äººï¼å«äººè¯å®çè¿äºï¼ä½å®éä¸å¤§å®¶å¯è½é½è¿ä¹æ³ï¼æ²¡æå ä¸ªäººçæ­£çè¿å¼æºä»£ç ãmany eyeball fallacy\n\nwhat does decentrtilization meanï¼\n\n> å»ä¸­å¿åä¸æå³çå®å¨æç»äººçå¹²é¢ï¼ä¸æå³çå®å¨ä¸è½ä¿®æ¹ï¼èæ¯è¦ç¨å»ä¸­å¿åçæ¹æ³æ¥å®æä¿®æ¹ãä»¥å¤ªåå¢éåå¸åçº§ä¸ºä»ä¹æç»è½å¤æåï¼å ä¸ºç»å¤§å¤æ°ç¿å·¥æ¥åäºåçº§è½¯ä»¶ï¼ä»¥è¡å¨æ¯æäºååæ¹æ¡ãå³ä½¿å¦æ­¤ï¼ä»¥å¤ªåå¢éä»ç¶ä¸è½å¼ºè¿«ä¸é¨åäººä»æ§é¾è½¬å°æ°é¾ãæä»¥ä»¥å¤ªåå¢éå¹¶ä¸è½å¼ºè¿«å¤§å®¶å»è½¬æ¢ï¼ç¿å·¥ä»¬è®¤ä¸ºä»¥å¤ªåçå³å®æ¯ç¬¦åå¤§å®¶å©ççã\n\nååæ¯åäºåï¼\n\n> å¨ä¸­å¿åçç³»ç»éï¼ä½ å¯ä»¥éæ©æ¾å¼ä½æ¯ä¸è½ååãååå¯¼è´åæä¸æ¡é¾åæäºä¸¤æ¡ãç¶èååæ°æ°æ¯å»ä¸­å¿åçä½ç°ï¼å­å¨ååï¼æ°æ°æ¯æ°ä¸»ç²¾ç¥çä½ç°ã(ç¨æ·ä¸æ»¡æï¼å°±æéæ©ååçæå©)\n\ndecentralized ä¸ç­äº detributed\n\n> ä¸ä¸ªå»ä¸­å¿åç³»ç»å¿ç¶æ¯åå¸å¼çï¼ä½åå¸å¼æªå¿æ¯å»ä¸­å¿åãæ¯ç¹å¸ãä»¥å¤ªåé½å±äºäº¤æé©±å¨çç¶ææºã\n\n\n# ç¾é¾ beauty chain\n\n\n\nerc æçæ¯ ethereum request for comments.\n\n * ipo: inital public offering, æä¼ä¸é¦æ¬¡å°èªå·±çè¡ä»½åå¬ä¼åºå®ï¼æ¯ä¸­å°ä¼ä¸èèµçä¸ç§æ¹å¼ï¼éè¿è¿ç§æ¹å¼æé¿åä¼ä¸è½å¤å¿«éåéèµéï¼å¸å¼æèµèï¼å¢å¼ºå¶è¡ä»½å¨å¸åºä¸çæµéæ§ï¼å®æä»ç§äººå¶ä¼ä¸åè¡ä»½å¶ä¼ä¸çè½¬åã\n * ico: inital coin offering, æ¯åºåé¾è¡ä¸çä¸ç§èèµæ¹å¼ï¼æéè¿åè¡ä»£å¸ï¼tokenï¼çæ¹å¼è¿è¡èèµãæ¯ä¸ªåºåé¾é¡¹ç®ä¼æ ¹æ®æèµèæèµéé¢æ¯ä¾ï¼åè¡ç¸åºçä»£å¸ç»æèµèï¼è¿äºä»£å¸å¾å¾ä¹å¯ä»¥å¨ä¸äºæ°æ®è´§å¸äº¤æå¹³å°ï¼å¦counterpartyç­ï¼è¿è¡äº¤æã\n * å å¯è´§å¸æçæ¯ä»»ä½æ¥æç¬ç«åºåé¾çå å¯è´§å¸ï¼æ¯ç¹å¸ãä»¥å¤ªåï¼\n * ä»£å¸æ¯æ²¡æèªå·±çåºåé¾ï¼èæ¯ä¾éäºå¶ä»åºåé¾çå å¯è´§å¸ã ä»£å¸ä¼ä»èªå·±ä¾éçåºåé¾ææ¯ä¸­è·çã\n\n// ä¸¤ä¸ªåæ° æ¥æ¶å°åï¼è½¬è´¦éé¢\nfunction batchtransfer(address[] _receivers, uint256 _value) public whennotpaused returns (bool) {\n    uint cnt = _receivers.length;\n    uint256 amount = uint256(cnt) * _value; // è®¡ç®æ»éé¢\n    require(cnt > 0 && cnt <= 20); // æ¥æ¶èæå¤20ä¸ª\n    require(_value > 0 && balances[msg.sender] >= amount); // æ£æ¥åèµ·è°ç¨çè´¦æ·æ¯å¦ç¨è¶³å¤å¤çä»£å¸\n\n    balances[msg.sender] = balances[msg.sender].sub(amount); // åèµ·è°ç¨çè´¦æ·åå» amount\n    for (uint i = 0; i < cnt; i++) { // éè¿å¾ªç¯ç»æ¥æ¶èä»·å¼ value çä»£å¸\n        balances[_receivers[i]] = balances[_receivers[i]].add(_value);\n        transfer(msg.sender, _receivers[i], _value);\n    }\n    return true;\n\n\n> é®é¢åºç°å¨è®¡ç®æ»éé¢ä¸é¢ï¼ uint256 amount = uint256(cnt) * _valueãåå¦è®¡ç®æ¶ï¼value çå¼å¾å¤§ï¼è¿ä¸ªä¹æ³ç»æå¯è½ä¼äº§çæº¢åºãæº¢åºåç®å¾ç amount å¯è½æ¯ä¸ä¸ªå¾å°çæ°ãæ¢è¨ä¹å¨è°ç¨èè´¦æ·ååæ³æ¶ï¼åæçæ¯ä¸ä¸ªå¾å°çæ°å­ï¼ä½è½¬è´¦æ¶ï¼è½¬èµ°çä»ç¶æ¯ä¸ç¬å¾å¤§çä»£å¸ãä»èå¯¼è´ç³»ç»ä¸­å­ç©ºäº§çå¤§éä»£å¸ã\n\n\n# åºåé¾çæ»¥ç¨\n\næäººè¯´ä¿é©çèµå¯ä»¥ä¸é¾ï¼å ä¸ºç°æçèµå¾æ¢ãå ä¸ºåºåé¾ä¸è½¬è´¦åªéè¦ç¡®è®¤åå°±å®æäºï¼ä¸ç°å®ä¸­æ°ææç¸æ¯å·æå¾å¤§çè¿æ­¥ã\n\n> ä¿é©çèµéåº¦æ¢ï¼å¹¶éè½¬è´¦è¿ä¸è¿ç¨ï¼èæ¯å®¡æ ¸çèµåå®¹ãèçèµç¡®è®¤åå®¡æ ¸ï¼æ¯åºåé¾ææ æ³å®æçã\n\næäººè¯´ç¨åºåé¾åé²ä¼ªæº¯æºï¼å°ææºè¬èçäº§å¨è¿ç¨ä¸é¾ï¼å¨åºåé¾ä¸å¯ä»¥æ¥å°è¬èçäº§éå®çå¨è¿ç¨ã\n\n> åºååªè½ä¿è¯åºåé¾çæ°æ®åå®¹æ¯ä¸å¯ç¯¡æ¹çï¼èæ æ³æ£æµæ°æ®æ¯å¦çå®ãåå¥çæ¶åæ¬èº«åçå°±æ¯åçåå®¹ã\n\nä¸­å¿åä¸å»ä¸­å¿åççéå¹¶éæ¯åæçã\n\n> ä¸ä¸ªåä¸æ¨¡å¼æ¢å¯ä»¥å­å¨ä¸­å¿åæåï¼ä¹å¯ä»¥å­å¨å»ä¸­å¿åæåãæ¯ç¹å¸ä»ä»æ¯ä¸ç§æ¯ä»æ¹å¼ï¼èéç¨æ¯ç¹å¸ä½ä¸ºæ¯ä»æ¹å¼çåä¸æ¨¡å¼æ¬èº«å¹¶ä¸æ¯å¿é¡»æ¯å»ä¸­å¿åçãæ¯å¦äºé©¬éå¦æå¨æªæ¥æ¥åæ¯ç¹å¸æ¯ä»ãä¸è¦å ä¸ºåºåé¾æ¯å»ä¸­å¿åçï¼èè®¤ä¸ºææç¨å°åºåé¾çææ¯é½æ¯å»ä¸­å¿åçã\n\n\n# æ³å¾çç®¡åæ¯ä»æ¹å¼\n\nåºåé¾çæ¯ä»æ¹å¼ç®åä¸åæ³å¾çç®¡åä¿æ¤ãç°å®ä¸­ä¿¡ç¨å¡è¢«çå·å¯ä»¥ç³è¯·æ³å¾çç®¡çä¿æ¤ï¼ä½æ¯åºåé¾åä¸è½ã æäººè®¤ä¸ºåºåé¾çäº¤ææ¹å¼ä¸ç°ææ¹å¼ç¸æ¯ï¼æ¯ä»æçä½ãè½èå¤§ï¼æ¯ä¸åç®çãä½æ¯å¨è·¨å½è´¸æè¿ä¸èæ¯ä¸ï¼æ¯ç¹å¸æ¹å¼æ¯æ¯ç°æé¶è¡ä½ç³»æ´é«æçã\n\n\n# æ»ç»\n\nä¸è¦è®¤ä¸ºå»ä¸­å¿åãæºè½åçº¦ç­å¯ä»¥è§£å³ä¸åé®é¢ï¼è¿å°±è¿åäºå¦ä¸ä¸ªæç«¯ãthe dao å³ä½¿æ²¡æé»å®¢æ»å»çé®é¢ï¼å¶åä¸æ¨¡å¼æ¯å¦å°±æ²¡æé®é¢å­å¨ï¼the dao çæèµæ¹åå®å¨æ°ä¸»ï¼ç±å¤§å®¶ä¸èµ·è¯´äºç®ï¼ä½æ°ä¸»å°±ä¸å®æ¯å¥½äºåï¼å¤§å¤æ°äººå°±æ¯å¯¹çåï¼\n\ndemocracy is the worst form of government except for those other forms that have been tried from time to time',charsets:{cjk:!0}},{title:"å¾è§£HTTP",frontmatter:{},regularPath:"/book/http.html",relativePath:"book/http.md",key:"v-723ecb02",path:"/book/http.html",headers:[{level:2,title:"ç¬¬åç«  ç¶æç ",slug:"ç¬¬åç« -ç¶æç ",normalizedTitle:"ç¬¬åç«  ç¶æç ",charIndex:13}],lastUpdated:"7/14/2022, 8:08:21 PM",lastUpdatedTimestamp:1657800501e3,headersStr:"ç¬¬åç«  ç¶æç ",content:"# å¾è§£HTTP\n\n\n# ç¬¬åç«  ç¶æç ",normalizedContent:"# å¾è§£http\n\n\n# ç¬¬åç«  ç¶æç ",charsets:{cjk:!0}},{title:"åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  6",frontmatter:{},regularPath:"/blockchain/learn6.html",relativePath:"blockchain/learn6.md",key:"v-31c31d1f",path:"/blockchain/learn6.html",headers:[{level:2,title:"Ghost åè®®",slug:"ghost-åè®®",normalizedTitle:"ghost åè®®",charIndex:131},{level:3,title:"å·ä½ä¾å­",slug:"å·ä½ä¾å­",normalizedTitle:"å·ä½ä¾å­",charIndex:2090},{level:2,title:"ETH æç¿ç®æ³",slug:"eth-æç¿ç®æ³",normalizedTitle:"eth æç¿ç®æ³",charIndex:2491},{level:3,title:"é¢æç¿(pre mining)",slug:"é¢æç¿-pre-mining",normalizedTitle:"é¢æç¿(pre mining)",charIndex:5598},{level:2,title:"ä»¥å¤ªåæç¿é¾åº¦è°æ´",slug:"ä»¥å¤ªåæç¿é¾åº¦è°æ´",normalizedTitle:"ä»¥å¤ªåæç¿é¾åº¦è°æ´",charIndex:6037},{level:3,title:"é¾åº¦ç¸å¼¹",slug:"é¾åº¦ç¸å¼¹",normalizedTitle:"é¾åº¦ç¸å¼¹",charIndex:6057},{level:3,title:"ä»¥å¤ªååå±çåä¸ªé¶æ®µ",slug:"ä»¥å¤ªååå±çåä¸ªé¶æ®µ",normalizedTitle:"ä»¥å¤ªååå±çåä¸ªé¶æ®µ",charIndex:6468},{level:3,title:"ä»£ç å®ç°",slug:"ä»£ç å®ç°",normalizedTitle:"ä»£ç å®ç°",charIndex:6536}],lastUpdated:"6/5/2023, 5:21:42 PM",lastUpdatedTimestamp:1685956902e3,headersStr:"Ghost åè®® å·ä½ä¾å­ ETH æç¿ç®æ³ é¢æç¿(pre mining) ä»¥å¤ªåæç¿é¾åº¦è°æ´ é¾åº¦ç¸å¼¹ ä»¥å¤ªååå±çåä¸ªé¶æ®µ ä»£ç å®ç°",content:'# åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  6\n\n * å­¦ä¹ å°åï¼https://www.bilibili.com/video/BV1Vt411X7JF\n * åèæç« ï¼åäº¬å¤§å­¦èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾ç¬è®°20ââETHä¸­GHOSTåè®®ç¯\n\n\n# Ghost åè®®\n\nBTC ç³»ç»ä¸­åºåæ¶é´ä¸º 10minï¼èä»¥å¤ªåä¸­åºåæ¶é´è¢«éä½å° 15så·¦å³ï¼è½ç¶æææé«äºç³»ç»ååºæ¶é´åååçï¼å´ä¹å¯¼è´ç³»ç»ä¸´æ¶æ§åååæå¸¸æï¼ä¸ååæ°ç®æ´å¤ãè¿å¯¹äºå±è¯åè®®æ¥è¯´ï¼å°±å­å¨å¾å¤§ææãå¨ BTC ç³»ç»ä¸­ï¼ä¸å¨æé¿åæ³é¾ä¸çèç¹æåé½æ¯ä½åºçï¼ä½å¦æå¨ä»¥å¤ªåç³»ç»ä¸­ï¼å¦æè¿æ ·å¤çï¼ç±äºç³»ç»ä¸­ç»å¸¸æ§ä¼åºç°ååï¼åç¿å·¥æå°ç¿å¾å¤§å¯è½ä¼è¢«åºå¼ï¼è¿ä¼å¤§å¤§éä½ç¿å·¥æç¿ç§¯ææ§ãèå¯¹äºä¸ªäººç¿å·¥æ¥è¯´ï¼åå¤§åç¿æ± ç¸æ¯æ´æ¯å­å¨å¤©ç¶å£å¿ã å¯¹æ­¤ï¼ä»¥å¤ªåè®¾è®¡äºæ°çå±è¯åè®®ââ GHOSTåè®® (è¯¥åè®®å¹¶éååï¼èæ¯å¯¹åæ¬å°±æçGhoståè®®è¿è¡äºæ¹è¿)ã\n\n\n\n> å¦å¾ï¼åå®ä»¥å¤ªåç³»ç»å­å¨ä»¥ä¸æåµï¼AãBãCãD å¨åä¸ªåæ¯ä¸ï¼æåï¼éçæ¶é´æ¨ç§» B æå¨é¾æä¸ºæé¿åæ³é¾ï¼å æ­¤ AãCãD åºåé½ä½åºï¼ä½ä¸ºäºè¡¥å¿è¿äºåºåæå±ç¿å·¥æä½çå·¥ä½ï¼ç»è¿äºåºåä¸äº è¡¥å¿ï¼å¹¶ç§°å¶ä¸º Uncle Blockï¼åç¶åºåï¼ã è§å® E åºåå¨åå¸æ¶å¯ä»¥å° AãCãD åç¶åºååå«è¿æ¥ï¼AãCãD åç¶åºåå¯ä»¥å¾å°åºåå¥å±ç 7/8ï¼èä¸ºäºæ¿å± E åå«åç¶åºåï¼è§å® E æ¯åå«ä¸ä¸ªåç¶åºåå¯ä»¥é¢å¤å¾å° 1/32 çåºåå¥å±ãä¸ºäºé²æ­¢ E å¤§éåå«åç¶åºåï¼è§å®ä¸ä¸ªåºååªè½æå¤åå« 2 ä¸ªåç¶åºåï¼å æ­¤ E å¨ AãCãD ä¸­æå¤åªè½åå« 2 ä¸ªåºåä½ä¸ºèªå·±çåºåå¥å±ã E æ A ä½ä¸ºåç¶åºåçåææ¯ï¼å¨æ E è¿ä¸ªåºåçæ¶åå°±ç¥é A çå­å¨äºï¼æ A åå¨èªå·±çåå¤´éä¿®æ¹åç»§ç»­æï¼å ä¸ºæç¿æ¯æ è®°å¿æ§çæä»¥è¿å¹¶ä¸å½±åä»ä¹ã\n\né®é¢ï¼\n\n 1. å ä¸ºåç¶åºåæå¤åªè½åå« 2 ä¸ªï¼å¦æåºç° 3 ä¸ªæä¹åï¼\n 2. ç¿å·¥èªç§ï¼ææä¸åå«åç¶åºåï¼å¯¼è´åç¶åºå 7/8 åºåå¥å±æ²¡äºï¼èèªå·±ä»ä»æå¤± 1/32ãå¦æç²ãä¹ä¸¤ä¸ªå¤§åç¿æ± å­å¨ç«äºå³ç³»ï¼é£ä¹ä»ä»¬å¯ä»¥éç¨ææä¸åå«å¯¹æ¹çåç¶åºåï¼å ä¸ºè¿æ ·å¯¹èªå·±æå¤±å°èå¯¹å¯¹æ¹æå¤±å¤§ã\n\n\n\n> å¦å¾1ä¸ºå¯¹ä¸é¢ä¾å­çè¡¥åï¼F ä¸º E åé¢ä¸ä¸ªæ°çåºåãå ä¸ºè§å® E æå¤åªè½åå« 2 ä¸ªåç¶åºåï¼æä»¥åå® E åå«äº C å Dãæ­¤æ¶ï¼F ä¹å¯ä»¥å° A è®¤ä¸ºèªå·±ççåç¶åºå(å®éä¸å¹¶éåç¶è¾çï¼èæ¯ç·ç·è¾ç)ãå¦æç»§ç»­å¾ä¸æï¼F åçæ°åºåä»ç¶å¯ä»¥åå« B åè¾çåºåãè¿æ ·ï¼å°±ææå°è§£å³äºä¸é¢çé®é¢ã å°±ç®èªå·±æçåºåæä¸ºäºåç¶åºåï¼èªå·±ä¹å¯ä»¥å¨æé¿åæ³é¾ä¸æï¼ç¶åæèªå·±åå«è¿å»ã\n\né®é¢ï¼åç¶ æå¤å¯ä»¥éå¤å°ä»£ï¼\n\n\n\n> ä»¥å¤ªåä¸­è§å®ï¼å¦æ M åå« F åºåï¼å F è·å¾ 7/8 åºåå¥å±ï¼å¦æ M åå« E åºåï¼å F è·å¾ 6/8 åºåå¥å±ï¼ä»¥æ­¤ç±»æ¨ååãç´å°åå« A åºåï¼Aè·å¾ 2/8 åºåå¥å±ï¼åå¾åçåç¶åºåï¼å¯¹äº M æ¥è¯´å°±ä¸åè®¤å¯å¶ä¸º M çåç¶äº(åæ³çåç¶åªæ 6 è¾)ãå¯¹äº M æ¥è¯´ï¼æ è®ºåå«åªä¸ªè¾åçåç¶ï¼å¾å°çåºåå¥å±é½æ¯ 1/32 åºåå¥å±ã è¿æ ·ï¼å°±æ¹ä¾¿äºå¨èç¹è¿è¡è®°å½ï¼ææåç¶åºåä¸ä¼æ éå¢å ï¼ï¼æ­¤å¤ï¼ä¹ä»åè®®ä¸é¼å±ä¸æ¦åºç°ååé©¬ä¸è¿è¡åå¹¶ã\n\nä»¥ä¸è¿äºé½æ¯ä¸ºäºè§£å³ä¸´æ¶æ§ååçé®é¢ï¼é£ä¹ä¸ºä»ä¹æ¯ç¹å¸åä»¥å¤ªåè¦è®¾è®¡æé¿åæ³é¾å¢ï¼æ¯ä¸ºäºé²æ­¢æ°æ®è¢«ç¯¡æ¹ã\n\n * BTC å¥å±ï¼block rewardï¼éæå¥å±ï¼+ tx feeï¼å¨æå¥å±ï¼\n * ETH å¥å±ï¼block rewardï¼éæå¥å±ï¼+ gas feeï¼å¨æå¥å±ï¼åç¶åºåæ¯å¾ä¸å°çï¼\n * BTC ä¸­ä¸ºäºäººä¸ºå¶é ç¨ç¼ºæ§ï¼æ¯ç¹å¸æ¯éä¸æ®µæ¶é´åºåå¥å±ä¼éä½ï¼æç»å½åºåå¥å±è¶äº 0 åä¼ä¸»è¦ä¾èµäºäº¤æè´¹è¿ä½ãèä»¥å¤ªåä¸­å¹¶æ²¡æäººä¸ºè§å®æ¯éä¸æ®µæ¶é´éä½åºåå¥å±ã\n\n> å¦æåºåéåå«æºè½åçº¦ï¼æ§è¡æºè½åçº¦çæ¶åä¼è·å¾æ±½æ²¹è´¹ãä½æ¯æå çæ¯ä¾å¾å°ï¼è·æ¯ç¹å¸ç±»ä¼¼äº¤æè´¹å æ¯å¾å°ã\n\næåç¶åºååå«è¿æ¥çæ¶åï¼åç¶åºåéçäº¤æè¦ä¸è¦æ§è¡ï¼\n\n> ä¸åºè¯¥ï¼åç¶åºåååè¾çä¸»é¾ä¸åºåæå¯è½åå«æå²çªçäº¤æãæ§è¡å®ç¶åºåçäº¤æåå»æ§è¡åç¶åºåçäº¤æå¯è½å°±åæéæ³çäºãå æ­¤ï¼ä¸ä¸ªèç¹å¨æ¶å°ä¸ä¸ªåç¶åºåçæ¶åï¼åªæ£æ¥åºååæ³æ§èä¸æ£æ¥å¶ä¸­äº¤æçåæ³æ§ã\n\nåååçåºååé¢è¿è·çå¶ä»åºåæä¹å¤çï¼\n\n> A->F è¯¥é¾å¹¶éä¸ä¸ªæé¿åæ³é¾ï¼æä»¥ B->F è¿äºåºåæä¹åï¼å¯ä¸å¯ä»¥è§å®å°ä¸é¢æ´æ¡é¾ä½ä¸ºä¸ä¸ªæ´ä½ï¼ç»äºåºåå¥å±ï¼ ä¸è¡ï¼è¿ä¸å®ç¨åº¦ä¸é¼å±äºååæ»å»(å¦æ A è½¬ç» B ä¸å¤§ç¬é±ï¼B ç­äºå¾å¤åºååè§å¾æ²¡ä»ä¹é®é¢äºï¼æ­¤æ¶ A åå¨ååæ»å»å°é±è½¬ç» A\'ï¼è¿éè¦æåºæ´å¤çåºåä»£ä»·æ¯å¾å¤§çï¼ä½æ¯ï¼åé¢çåºåé½ç»å¥å±ï¼è¿å°±éä½äºååæ»å»çææ¬ï¼å ä¸ºå³ä½¿æ»å»å¤±è´¥ä¹æå¥å±)ãå æ­¤ï¼ETH ç³»ç»ä¸­è§å®ï¼åªè®¤å¯ A åºåä¸ºåç¶åºåï¼ç»äºå¶è¡¥å¿ï¼èå¶åçåºåå¨é¨ä½åºã\n\n\n# å·ä½ä¾å­\n\nhttps://etherscan.io/\n\n\n\n * Block Height ä¸ºå½ååºåçåºå·ï¼UncleNumber ä¸ºåç¶åºåçåºå·\n * å¦æç¸å·®ä¸º 1ï¼è¯´ææ¯ååç¸å·®ä¸è¾ï¼è·å¾ 7/8 çå¥å±ï¼ä»¥æ­¤ç±»æ¨\n\n\n\n * Block Reward: åºåå¥å± + æ±½æ²¹è´¹ + åå«åç¶åºåå¥å±ï¼1ä¸ª, 0.09375 = 3 * 1 / 32ï¼\n * Uncles Reward: åç¶åºåè·å¾çå¥å±ï¼éè¿è®¡ç®å¯ç¥éä¸¤ä»£ï¼2.25 = 3 * 6 / 8\n\n\n\n * Block Reward: åºåå¥å± + æ±½æ²¹è´¹ + åå«åç¶åºåå¥å±ï¼2ä¸ª, 0.1875 = 3 * 2 * 1 / 32ï¼\n * Uncles Reward: åç¶åºåè·å¾çå¥å±ï¼éè¿è®¡ç®å¯ç¥åå«éä¸¤ä»£åéä¸ä»£ï¼4.875 = 2.25 (3 * 6 / 8) + 2.625 (3 * 7 / 8)\n\n\n# ETH æç¿ç®æ³\n\nBlock chain is secured by mining. æ¯ç¹å¸æ¯å¤©ç¶ç bug bountyï¼åªè¦ä½ è½æ¾å°æç¿ç bugï¼å°±è½è·å¾èµéãç¶èæ¯ç¹å¸çç¼ºç¹å¨äºä¸ä¸ç¿æºçåºç°ï¼ä¸æ¯å¾ç¬¦åå»ä¸­å¿åçæ¦å¿µãä¸­æ¬èªåå° one cpu, one voteï¼å¸ææ¯ä¸ªäººé½è½åä¸è¿å»ãæä»¥åæ¥çå å¯è´§å¸å¨è®¾è®¡æç¿ç®æ³çæ¶åï¼å¸æ ASIC resistanceï¼æä¹è§£å³å¢ï¼\n\n * memory hard mining puzzle: å¢å å¯¹åå­çè®¿é®, å ä¸º ASIC ä¸»è¦æ¯ç®åå¼ºï¼ä½æ¯åå­è®¿é®è½åå¼±ãä¸ä¸ªä¾å­å°±æ¯ LiteCoinï¼å®æ¯åºäº scrypt å¯¹äºåå­è¦æ±è¾é«ï¼å¨åå­ä¸­åå»ºäºä¸ä¸ªæ¯è¾å¤§çæ°ç»è¿è¡è¿ç®ã\n\nå¥½ç puzzle çååæ¯ diffculty to solve, but easy to verifyï¼ä½æ¯ä¸è¿°ç®æ³å¨éªè¯çæ¶åä¹éè¦åæ ·å¤§å°çæ°ç»ï¼å¯¹äºè½»èç¹ä¸åå¥½ï¼å¦ææ¯ææºä¸ç APP åå¾é¾å®ç°ï¼æä»¥å®éä¸è±ç¹å¸è®¾è®¡çæ°ç»å¤§å°ä¸º 128Kãä½æ¯è¿ç§çå¿µå¯¹äºè±ç¹å¸ç å·å¯å¨ å¾ææä¹ã\n\nETH ä¸­è®¾è®¡äºä¸¤ä¸ªæ°æ®éï¼16M cache å 1G dataset (DAG)ã\n\n> 16M cache çææ¹å¼ï¼éè¿ Seed (ç§å­æ°)è¿è¡ä¸äºè¿ç®è·å¾ç¬¬ä¸ä¸ªæ°ï¼ä¹åæ¯ä¸ªæ°å­é½æ¯éè¿åä¸ä¸ªä½ç½®çå¼ååå¸è·å¾çã 1G DAG çææ¹å¼ï¼ä»å°æ°ç»ä¸­æç§ä¼ªéæºé¡ºåºè¯»åä¸äºåç´ ï¼å¦ç¬¬ä¸æ¬¡è¯»å A ä½ç½®æ°æ®ï¼å¯¹å½ååå¸å¼æ´æ°è¿­ä»£ç®åºä¸ä¸æ¬¡è¯»åä½ç½® Bï¼åè¿è¡åå¸å¼æ´æ°è¿­ä»£è®¡ç®åº C ä½ç½®åç´ ãå¦æ­¤æ¥åè¿­ä»£è¯»å 256 æ¬¡ï¼æç»ç®åºä¸ä¸ªæ°ä½ä¸º DAG ä¸­ç¬¬ä¸ä¸ªåç´ ã èèå°è®¡ç®æºåå­ä¸æ­å¢å¤§ï¼å æ­¤è¯¥ä¸¤ä¸ªæ°ç»éè¦å®æå¢å¤§ã è½»èç¹åªä¿å­å°ç cacheï¼éªè¯æ¶è¿è¡è®¡ç®å³å¯ãä½å¯¹äºæç¿æ¥è¯´ï¼å¦æè¿æ ·åå¤§é¨åç®åé½è±è´¹å¨äºéè¿ Cache è®¡ç® DAG ä¸é¢ï¼å æ­¤ï¼å¶å¿é¡»ä¿å­å¤§çæ°ç» DAG ä»¥ä¾¿äºæ´å¿«æç¿ã\n\nä»¥å¤ªåæç¿è¿ç¨ï¼\n\n> æ ¹æ®åºå block header åå¶ä¸­ç Nonce å¼è®¡ç®ä¸ä¸ªåå§åå¸ï¼å¨ DAG ä¸æ ¹æ®å¶æ å°å°æä¸ªåå§ä½ç½® A1ï¼è¯»å A1 ä½ç½®çæ°åå¶ç¸é»çåä¸ä¸ªä½ç½® A2 ä¸çæ°ï¼æ ¹æ®è¯¥ä¸¤ä¸ªæ°è¿è¡è¿ç®ï¼ç®å¾ä¸ä¸ä¸ªä½ç½® B1ï¼è¯»å B1 å B2 ä½ç½®ä¸çæ°ï¼ä¾æ¬¡ç±»æ¨ï¼è¿­ä»£è¯»å 64 æ¬¡ï¼å±è¯»å 128 ä¸ªæ°ãæåï¼è®¡ç®åºä¸ä¸ªåå¸å¼ä¸æç¿é¾åº¦ç®æ éå¼æ¯è¾ï¼è¥ä¸ç¬¦åå°±æ´æ¢ Nonceï¼éå¤ä»¥ä¸æä½ç´å°æç»è®¡ç®åå¸å¼ç¬¦åé¾åº¦è¦æ±ã\n\næ¯é 30000 ä¸ªåä¼éæ°çæ seed ï¼å¯¹åæ¥ç seed æ±åå¸ï¼ï¼å¹¶ä¸å©ç¨æ°ç seed çææ°ç cacheï¼cache çåå§å¤§å°ä¸º 16Mï¼æ¯é 30000 ä¸ªåéæ°çææ¶å¢å¤§åå§å¤§å°ç 1/128 - 128Kï¼éè¿ seed è®¡ç® cache çä¼ªä»£ç ï¼\n\ndef mkcache(cache_size, seed):\n  o = [hash(seed)]\n  for i in range (1, cache_size):\n    o.append(hash(o[-1]))\n  return o;\n\n\nDAG åå§å¤§å°æ¯ 1Gï¼ä¹æ¯æ¯é 30000 ä¸ªåæ´æ°ï¼åæ¶å¢å¤§åå§å¤§å°ç 1/128 - 8Mï¼éè¿ cache æ¥çæ dataset ä¸­ç¬¬ i ä¸ªåç´ çä¼ªä»£ç \n\ndef calc_dataset_item(cache, i):\n  cache_size = cache.size\n  # éè¿ cache ä¸­ç¬¬ i ä¸ªåç´ çæ mix\n  mix = hash(cache[i % cache_size] ^ i)\n  # å¾ªç¯ 256 æ¬¡\n  for j in range(256):\n    # æ¯æ¬¡éè¿ get_int_from_item æ ¹æ®å½åç mix æ±å¾ä¸ä¸ä¸ª cache åç´ çä¸æ \n    cache_index = get_int_from_item(mix)\n    mix = make_item(mix, cache[cache_index % cache_size])\n   # æç»è¿å mix çåå¸å¼ï¼å¾å°ç¬¬ i ä¸ª dataset ä¸­çåç´ \n   return hash(mix)\n\n\næç¿è¿ç¨ä¸è½»èç¹éªè¯è¿ç¨ï¼åéè¿ header å nonce æ±åºä¸ä¸ªåå§ç mixï¼ç¶åè¿è¡ 64 æ¬¡å¾ªç¯ï¼æ ¹æ® mix æ±åºè¦è®¿é®ç dataset çåç´ ä¸æ ï¼ç¶åæ ¹æ®è¿ä¸ªä¸æ è®¿é® dataset ä¸­ä¸¤ä¸ªè¿ç»­çå¼ã\n\ndef hashimoto_full(header, nonce, full_size, dataset):\n  mix = hash(header, nonce)\n  for i in range(64):\n    dataset_index = get_int_from_item(mix) % full_size\n    mix = make_item(mix, dataset[dataset_index])\n    mix = make_item(mix, dataset[dataset_index + 1])\n  return hash(mix)\n\n# è½»èç¹æ¯ä¸´æ¶è®¡ç®åºç¨å°ç dataset åç´ ï¼èç¿å·¥æ¯ç´æ¥è®¿å­\ndef hashimoto_light(header, nonce, full_size, dataset):\n  mix = hash(header, nonce)\n  for i in range(64):\n    dataset_index = get_int_from_item(mix) % full_size\n    mix = make_item(mix, calc_dataset_item[cache, dataset_index])\n    mix = make_item(mix, calc_dataset_item[cache, dataset_index + 1])\n  return hash(mix)\n\n\næç¿ä¼ªä»£ç ï¼éæºåå§å nonceï¼åä¸ä¸ªä¸ªéè¯ nonce\n\ndef mine(full_size, dataset, header, target):\n  nonce = random.randint(0, 2**64)\n  while hashimoto_full(header, nonce, full_size, dataset) > target:\n    nonce = (nonce + 1) % 2**64\n  return nonce\n\n\n> ç®åä»¥å¤ªåæç¿ä»¥ GPU ä¸ºä¸»ï¼å¯è§å¶è®¾è®¡è¾ä¸ºæåï¼è¿ä¸ä»¥å¤ªåè®¾è®¡çæç¿ç®æ³ (Ethash) æéè¦çå¤§åå­å·æå¾å¤§å³ç³»ã 1Gçå¤§æ°ç»ä¸128kç¸æ¯ï¼å·®è·8000å¤åï¼å³ä½¿æ¯16MBä¸128Kç¸æ¯ï¼ä¹å¤§äºä¸ç¾å¤åï¼å¯è§å¯¹åå­éæ±çå·®è·å¾å¤§ï¼åµä¸ä¸¤ä¸ªæ°ç»å¤§å°æ¯ä¼ä¸æ­å¢é¿çã\n> \n> å½ç¶ï¼ä»¥å¤ªåå®ç° ASIC Resistance é¤äºæç¿ç®æ³è®¾è®¡ä¹å¤ï¼è¿å­å¨å¦å¤ä¸ä¸ªåå ï¼å³å¶é¢æä»å·¥ä½éè¯æ(proof of work)è½¬åæçè¯æ(proof of stake)\n> \n> èè¿å¯¹äº ASIC ååæ¥è¯´æå¨èãå ä¸º ASIC è¯çç åå¨æå¾é¿ï¼ææ¬å¾é«ï¼å¦æä»¥å¤ªåè½¬å¥æçè¯æï¼è¿äºæå¥çç åè´¹ç¨å°å¨é¨ç½è´¹ï¼ä½æªè³ç®åï¼ä»¥å¤ªåä»ç¶åºäº POW å±è¯æºå¶ã\n\n\n# é¢æç¿(pre mining)\n\nä»¥å¤ªåä¸­éç¨çé¢æç¿çæºå¶ãè¿é é¢æç¿ å¹¶ä¸æç¿ï¼èæ¯å¨å¼åä»¥å¤ªåæ¶ï¼ç»å¼åèé¢çäºä¸é¨åè´§å¸ï¼å¶å®è¿é¨åé¢çäºå¾å¤(å¨ Genesis åä¸çºªå)ã å Pre-Mining å¯¹åºï¼è¿æ Pre-Saleï¼Pre-Sale æçæ¯å°é¢ççè´§å¸åºå®æç¨äºåç»­å¼åå·¥ä½ï¼ä¼ç­¹ï¼\n\n> æç¿ç®æ³è®¾è®¡ä¸ç´è¶åäºè®©å¤§ä¼åä¸ï¼è¿ææ¯å¬å¹³çãä½ä¹æäººè®¤ä¸ºè®©æ®éè®¡ç®æºåä¸æç¿æ¯ä¸å®å¨çï¼åæ¯ç¹å¸é£æ ·ï¼è®©ä¸­å¿åç¿æ± åä¸æç¿ææ¯å®å¨çãä¸ºä»ä¹å¢ï¼ å ä¸ºè¦æ»å»ç³»ç»ï¼éè¦è´­å¥å¤§éç¿æºéè¿ç®åè¿è¡ 51% æ»å»ï¼èä¸è¿ç§ç¿æºä¸è½ç¨äºå¶ä»å¸ç§ãèä¸æ»å»æååï¼è¯æå®å¨æ§ä¸å¤å¿ç¶å¯¼è´è¯¥å¸çä»·å¼è·³æ°´ï¼æ»å»èæå¥çç¡¬ä»¶ææ¬å°ä¼å¨é¨ææ°´æ¼ãç¸åè®©éç¨è®¡ç®æºä¹åä¸æç¿ï¼åå¨æ»å»ææ¬ä¾¿å¤§å¹åº¦éä½ï¼ç®åçå¤§åäºèç½å¬å¸ï¼å°å¶æå¡å¨èéèµ·æ¥è¿è¡æ»å»å³å¯ï¼èæ»å»å®æåè¿äºæå¡å¨ä»ç¶å¯ä»¥è½¬èè¿è¡æ¥å¸¸ä¸å¡ãå æ­¤æäººè®¤ä¸ºå¨æç¿ä¸é¢ï¼ASIC ç¿æºä¸ç»å¤©ä¸ææ¯æå®å¨çæ¹å¼ã\n\n\n# ä»¥å¤ªåæç¿é¾åº¦è°æ´\n\n\n\n\n\n\n\n\n# é¾åº¦ç¸å¼¹\n\nä»¥å¤ªåå¨è®¾è®¡ä¹åå°±è®¡åè¦éæ­¥ä» POWï¼å·¥ä½éè¯æï¼è½¬å POSï¼æçè¯æï¼ï¼èæçè¯æä¸éè¦æç¿ãä»æè§èè§åº¦æ¥çï¼æç¿æ¶èäºå¤§éçµåãèµéç­ï¼å¦æè½¬å¥æ¾å¼æç¿å¿ç¶æ¯ä¸ä»¶å¥½äºãä½ä»ç¿å·¥çè§åº¦ï¼è±è´¹äºå¾å¤§ç²¾åæå¥ææ¬è´­ä¹°è®¾å¤ï¼çªç¶è¢«åç¥ä¸æç¿äºï¼è¿å¿ç¶æ¯ä¸ä»¶å¾é¾æ¥åçäºæãå æ­¤ï¼ä»¥å¤ªåå¨è®¾è®¡ä¹åä¾¿æ·»å äºé¾åº¦ç¸å¼¹ï¼è¿«ä½¿ç¿å·¥è½¬å¥ POSã\n\n\n\n> é¾åº¦ç¸å¼¹å±äºææ°çº§å«ï¼å¨ä»¥å¤ªåæ©ææ¶ï¼åºåå·è¾å°é¾åº¦ç¸å¼¹è®¡ç®æå¾å¼è¾å°ï¼é¾åº¦è°æ´çº§å«åºæ¬ä¸éè¿é¾åº¦è°æ´ä¸­çèªéåºé¾åº¦è°æ´é¨åå³å®ï¼èéçè¶æ¥è¶å¤åºåè¢«æåºï¼é¾åº¦ç¸å¼¹çå¨åå¼å§æ¾é²åºæ¥ï¼è¿ä¹å°±ä½¿å¾æç¿åå¾è¶æ¥è¶é¾ï¼ä»èè¿«ä½¿ç¿å·¥æ¿æè½¬å¥ POSã ä½æ¯ç®åä»¥å¤ªåå±è¯æºå¶ä»ç¶æ¯ POWï¼ä¾ç¶éè¦ç¿å·¥åä¸æç¿ç»´æ¤ä»¥å¤ªåç³»ç»çç¨³å®ãæä»¥ä»¥å¤ªåå³å®å°åºåå·åå» 300w ä¸ªï¼å°±æ¯ä¸é¢å¾ä¸­çå¬ç¤ºï¼\n\n\n\n> ä¸å¾ä¸­å±ç¤ºäºåé 300w ä¸ªåºåååçé¾åº¦ç¸å¼¹çä¸ºä¾\n\n\n# ä»¥å¤ªååå±çåä¸ªé¶æ®µ\n\nä»¥å¤ªååå±å­å¨åä¸ªé¶æ®µï¼æä»¬ç®åå¤äºç¬¬ä¸ä¸ªé¶æ®µä¸­çæå åº­é¶æ®µï¼é¾åº¦ç¸å¼¹åè°å°±æ¯å¨æå åº­é¶æ®µè¿è¡çã\n\n\n\n\n# ä»£ç å®ç°\n\nfunc calcDifficultyByzantium(curVersion string, time uint64, parent *types.Header) *big.Int {\n\t// https://github.com/MatrixAINetwork/EIPs/issues/100.\n\t// algorithm:\n\t// diff = (parent_diff +\n\t//         (parent_diff / 2048 * max((2 if len(parent.uncles) else 1) - ((timestamp - parent.timestamp) // 9), -99))\n\t//        ) + 2^(periodCount - 2)\n\n\tbigTime := new(big.Int).SetUint64(time) // å½ååºåæ¶é´æ³\n\tbigParentTime := new(big.Int).Set(parent.Time) // ç¶åºåæ¶é´æ³\n\n\t// holds intermediate values to make the algo easier to read & audit\n\tx := new(big.Int)\n\ty := new(big.Int)\n\tlogger := log.New("CalcDifficulty diff", parent.Difficulty)\n\t// (2 if len(parent_uncles) else 1) - (block_timestamp - parent_timestamp) // 9\n\tx.Sub(bigTime, bigParentTime) // å½ååºåæ¶é´æ³ - ç¶åºåæ¶é´æ³ = åºåæ¶é´\n\tvar durationLimit *big.Int\n\tif manversion.VersionCmp(curVersion, manversion.VersionGamma) >= 0 {\n\t\tdurationLimit = params.VersionGammaDurationLimit\n\t} else {\n\t\tdurationLimit = params.DurationLimit\n\t}\n\tlogger.Info("CalcDifficulty diff", "duration", durationLimit.String())\n\tx.Div(x, durationLimit)\n\tif parent.UncleHash == types.EmptyUncleHash {\n\t\tx.Sub(big1, x)\n\t} else {\n\t\tx.Sub(big2, x)\n\t}\n\t// max((2 if len(parent_uncles) else 1) - (block_timestamp - parent_timestamp) // 9, -99)\n\tif x.Cmp(bigMinus99) < 0 {\n\t\tx.Set(bigMinus99)\n\t}\n\t// parent_diff + (parent_diff / 2048 * max((2 if len(parent.uncles) else 1) - ((timestamp - parent.timestamp) // 9), -99))\n\ty.Div(parent.Difficulty, params.DifficultyBoundDivisor)\n\tif y.Sign() == 0 {\n\t\ty = big1\n\t}\n\tx.Mul(y, x)\n\tx.Add(parent.Difficulty, x)\n  logger.Info("cal Diff", "x", x, "y", y, "minDiff", params.MinimumDifficulty)\n\t// minimum difficulty can ever be (before exponential factor)\n\tif x.Cmp(params.MinimumDifficulty) < 0 {\n\t\tx.Set(params.MinimumDifficulty) // MinimumDifficulty æ¯é¾åº¦ä¸é D0\n\t}\n\t// calculate a fake block number for the ice-age delay:\n\t//   https://github.com/MatrixAINetwork/EIPs/pull/669\n\t//   fake_block_number = min(0, block.number - 3_000_000\n\tfakeBlockNumber := new(big.Int)\n\tif parent.Number.Cmp(big2999999) >= 0 {\n\t\tfakeBlockNumber = fakeBlockNumber.Sub(parent.Number, big2999999) // Note, parent is 1 less than the actual block number\n\t}\n\t// for the exponential factor\n\tperiodCount := fakeBlockNumber\n\tperiodCount.Div(periodCount, expDiffPeriod)\n\n\t// the exponential factor, commonly referred to as "the bomb"\n\t// diff = diff + 2^(periodCount - 2)\n\tif periodCount.Cmp(big1) > 0 {\n\t\ty.Sub(periodCount, big2)\n\t\ty.Exp(big2, y, nil)\n\t\tx.Add(x, y)\n\t}\n\treturn x\n}\n',normalizedContent:'# åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  6\n\n * å­¦ä¹ å°åï¼https://www.bilibili.com/video/bv1vt411x7jf\n * åèæç« ï¼åäº¬å¤§å­¦èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾ç¬è®°20ââethä¸­ghoståè®®ç¯\n\n\n# ghost åè®®\n\nbtc ç³»ç»ä¸­åºåæ¶é´ä¸º 10minï¼èä»¥å¤ªåä¸­åºåæ¶é´è¢«éä½å° 15så·¦å³ï¼è½ç¶æææé«äºç³»ç»ååºæ¶é´åååçï¼å´ä¹å¯¼è´ç³»ç»ä¸´æ¶æ§åååæå¸¸æï¼ä¸ååæ°ç®æ´å¤ãè¿å¯¹äºå±è¯åè®®æ¥è¯´ï¼å°±å­å¨å¾å¤§ææãå¨ btc ç³»ç»ä¸­ï¼ä¸å¨æé¿åæ³é¾ä¸çèç¹æåé½æ¯ä½åºçï¼ä½å¦æå¨ä»¥å¤ªåç³»ç»ä¸­ï¼å¦æè¿æ ·å¤çï¼ç±äºç³»ç»ä¸­ç»å¸¸æ§ä¼åºç°ååï¼åç¿å·¥æå°ç¿å¾å¤§å¯è½ä¼è¢«åºå¼ï¼è¿ä¼å¤§å¤§éä½ç¿å·¥æç¿ç§¯ææ§ãèå¯¹äºä¸ªäººç¿å·¥æ¥è¯´ï¼åå¤§åç¿æ± ç¸æ¯æ´æ¯å­å¨å¤©ç¶å£å¿ã å¯¹æ­¤ï¼ä»¥å¤ªåè®¾è®¡äºæ°çå±è¯åè®®ââ ghoståè®® (è¯¥åè®®å¹¶éååï¼èæ¯å¯¹åæ¬å°±æçghoståè®®è¿è¡äºæ¹è¿)ã\n\n\n\n> å¦å¾ï¼åå®ä»¥å¤ªåç³»ç»å­å¨ä»¥ä¸æåµï¼aãbãcãd å¨åä¸ªåæ¯ä¸ï¼æåï¼éçæ¶é´æ¨ç§» b æå¨é¾æä¸ºæé¿åæ³é¾ï¼å æ­¤ aãcãd åºåé½ä½åºï¼ä½ä¸ºäºè¡¥å¿è¿äºåºåæå±ç¿å·¥æä½çå·¥ä½ï¼ç»è¿äºåºåä¸äº è¡¥å¿ï¼å¹¶ç§°å¶ä¸º uncle blockï¼åç¶åºåï¼ã è§å® e åºåå¨åå¸æ¶å¯ä»¥å° aãcãd åç¶åºååå«è¿æ¥ï¼aãcãd åç¶åºåå¯ä»¥å¾å°åºåå¥å±ç 7/8ï¼èä¸ºäºæ¿å± e åå«åç¶åºåï¼è§å® e æ¯åå«ä¸ä¸ªåç¶åºåå¯ä»¥é¢å¤å¾å° 1/32 çåºåå¥å±ãä¸ºäºé²æ­¢ e å¤§éåå«åç¶åºåï¼è§å®ä¸ä¸ªåºååªè½æå¤åå« 2 ä¸ªåç¶åºåï¼å æ­¤ e å¨ aãcãd ä¸­æå¤åªè½åå« 2 ä¸ªåºåä½ä¸ºèªå·±çåºåå¥å±ã e æ a ä½ä¸ºåç¶åºåçåææ¯ï¼å¨æ e è¿ä¸ªåºåçæ¶åå°±ç¥é a çå­å¨äºï¼æ a åå¨èªå·±çåå¤´éä¿®æ¹åç»§ç»­æï¼å ä¸ºæç¿æ¯æ è®°å¿æ§çæä»¥è¿å¹¶ä¸å½±åä»ä¹ã\n\né®é¢ï¼\n\n 1. å ä¸ºåç¶åºåæå¤åªè½åå« 2 ä¸ªï¼å¦æåºç° 3 ä¸ªæä¹åï¼\n 2. ç¿å·¥èªç§ï¼ææä¸åå«åç¶åºåï¼å¯¼è´åç¶åºå 7/8 åºåå¥å±æ²¡äºï¼èèªå·±ä»ä»æå¤± 1/32ãå¦æç²ãä¹ä¸¤ä¸ªå¤§åç¿æ± å­å¨ç«äºå³ç³»ï¼é£ä¹ä»ä»¬å¯ä»¥éç¨ææä¸åå«å¯¹æ¹çåç¶åºåï¼å ä¸ºè¿æ ·å¯¹èªå·±æå¤±å°èå¯¹å¯¹æ¹æå¤±å¤§ã\n\n\n\n> å¦å¾1ä¸ºå¯¹ä¸é¢ä¾å­çè¡¥åï¼f ä¸º e åé¢ä¸ä¸ªæ°çåºåãå ä¸ºè§å® e æå¤åªè½åå« 2 ä¸ªåç¶åºåï¼æä»¥åå® e åå«äº c å dãæ­¤æ¶ï¼f ä¹å¯ä»¥å° a è®¤ä¸ºèªå·±ççåç¶åºå(å®éä¸å¹¶éåç¶è¾çï¼èæ¯ç·ç·è¾ç)ãå¦æç»§ç»­å¾ä¸æï¼f åçæ°åºåä»ç¶å¯ä»¥åå« b åè¾çåºåãè¿æ ·ï¼å°±ææå°è§£å³äºä¸é¢çé®é¢ã å°±ç®èªå·±æçåºåæä¸ºäºåç¶åºåï¼èªå·±ä¹å¯ä»¥å¨æé¿åæ³é¾ä¸æï¼ç¶åæèªå·±åå«è¿å»ã\n\né®é¢ï¼åç¶ æå¤å¯ä»¥éå¤å°ä»£ï¼\n\n\n\n> ä»¥å¤ªåä¸­è§å®ï¼å¦æ m åå« f åºåï¼å f è·å¾ 7/8 åºåå¥å±ï¼å¦æ m åå« e åºåï¼å f è·å¾ 6/8 åºåå¥å±ï¼ä»¥æ­¤ç±»æ¨ååãç´å°åå« a åºåï¼aè·å¾ 2/8 åºåå¥å±ï¼åå¾åçåç¶åºåï¼å¯¹äº m æ¥è¯´å°±ä¸åè®¤å¯å¶ä¸º m çåç¶äº(åæ³çåç¶åªæ 6 è¾)ãå¯¹äº m æ¥è¯´ï¼æ è®ºåå«åªä¸ªè¾åçåç¶ï¼å¾å°çåºåå¥å±é½æ¯ 1/32 åºåå¥å±ã è¿æ ·ï¼å°±æ¹ä¾¿äºå¨èç¹è¿è¡è®°å½ï¼ææåç¶åºåä¸ä¼æ éå¢å ï¼ï¼æ­¤å¤ï¼ä¹ä»åè®®ä¸é¼å±ä¸æ¦åºç°ååé©¬ä¸è¿è¡åå¹¶ã\n\nä»¥ä¸è¿äºé½æ¯ä¸ºäºè§£å³ä¸´æ¶æ§ååçé®é¢ï¼é£ä¹ä¸ºä»ä¹æ¯ç¹å¸åä»¥å¤ªåè¦è®¾è®¡æé¿åæ³é¾å¢ï¼æ¯ä¸ºäºé²æ­¢æ°æ®è¢«ç¯¡æ¹ã\n\n * btc å¥å±ï¼block rewardï¼éæå¥å±ï¼+ tx feeï¼å¨æå¥å±ï¼\n * eth å¥å±ï¼block rewardï¼éæå¥å±ï¼+ gas feeï¼å¨æå¥å±ï¼åç¶åºåæ¯å¾ä¸å°çï¼\n * btc ä¸­ä¸ºäºäººä¸ºå¶é ç¨ç¼ºæ§ï¼æ¯ç¹å¸æ¯éä¸æ®µæ¶é´åºåå¥å±ä¼éä½ï¼æç»å½åºåå¥å±è¶äº 0 åä¼ä¸»è¦ä¾èµäºäº¤æè´¹è¿ä½ãèä»¥å¤ªåä¸­å¹¶æ²¡æäººä¸ºè§å®æ¯éä¸æ®µæ¶é´éä½åºåå¥å±ã\n\n> å¦æåºåéåå«æºè½åçº¦ï¼æ§è¡æºè½åçº¦çæ¶åä¼è·å¾æ±½æ²¹è´¹ãä½æ¯æå çæ¯ä¾å¾å°ï¼è·æ¯ç¹å¸ç±»ä¼¼äº¤æè´¹å æ¯å¾å°ã\n\næåç¶åºååå«è¿æ¥çæ¶åï¼åç¶åºåéçäº¤æè¦ä¸è¦æ§è¡ï¼\n\n> ä¸åºè¯¥ï¼åç¶åºåååè¾çä¸»é¾ä¸åºåæå¯è½åå«æå²çªçäº¤æãæ§è¡å®ç¶åºåçäº¤æåå»æ§è¡åç¶åºåçäº¤æå¯è½å°±åæéæ³çäºãå æ­¤ï¼ä¸ä¸ªèç¹å¨æ¶å°ä¸ä¸ªåç¶åºåçæ¶åï¼åªæ£æ¥åºååæ³æ§èä¸æ£æ¥å¶ä¸­äº¤æçåæ³æ§ã\n\nåååçåºååé¢è¿è·çå¶ä»åºåæä¹å¤çï¼\n\n> a->f è¯¥é¾å¹¶éä¸ä¸ªæé¿åæ³é¾ï¼æä»¥ b->f è¿äºåºåæä¹åï¼å¯ä¸å¯ä»¥è§å®å°ä¸é¢æ´æ¡é¾ä½ä¸ºä¸ä¸ªæ´ä½ï¼ç»äºåºåå¥å±ï¼ ä¸è¡ï¼è¿ä¸å®ç¨åº¦ä¸é¼å±äºååæ»å»(å¦æ a è½¬ç» b ä¸å¤§ç¬é±ï¼b ç­äºå¾å¤åºååè§å¾æ²¡ä»ä¹é®é¢äºï¼æ­¤æ¶ a åå¨ååæ»å»å°é±è½¬ç» a\'ï¼è¿éè¦æåºæ´å¤çåºåä»£ä»·æ¯å¾å¤§çï¼ä½æ¯ï¼åé¢çåºåé½ç»å¥å±ï¼è¿å°±éä½äºååæ»å»çææ¬ï¼å ä¸ºå³ä½¿æ»å»å¤±è´¥ä¹æå¥å±)ãå æ­¤ï¼eth ç³»ç»ä¸­è§å®ï¼åªè®¤å¯ a åºåä¸ºåç¶åºåï¼ç»äºå¶è¡¥å¿ï¼èå¶åçåºåå¨é¨ä½åºã\n\n\n# å·ä½ä¾å­\n\nhttps://etherscan.io/\n\n\n\n * block height ä¸ºå½ååºåçåºå·ï¼unclenumber ä¸ºåç¶åºåçåºå·\n * å¦æç¸å·®ä¸º 1ï¼è¯´ææ¯ååç¸å·®ä¸è¾ï¼è·å¾ 7/8 çå¥å±ï¼ä»¥æ­¤ç±»æ¨\n\n\n\n * block reward: åºåå¥å± + æ±½æ²¹è´¹ + åå«åç¶åºåå¥å±ï¼1ä¸ª, 0.09375 = 3 * 1 / 32ï¼\n * uncles reward: åç¶åºåè·å¾çå¥å±ï¼éè¿è®¡ç®å¯ç¥éä¸¤ä»£ï¼2.25 = 3 * 6 / 8\n\n\n\n * block reward: åºåå¥å± + æ±½æ²¹è´¹ + åå«åç¶åºåå¥å±ï¼2ä¸ª, 0.1875 = 3 * 2 * 1 / 32ï¼\n * uncles reward: åç¶åºåè·å¾çå¥å±ï¼éè¿è®¡ç®å¯ç¥åå«éä¸¤ä»£åéä¸ä»£ï¼4.875 = 2.25 (3 * 6 / 8) + 2.625 (3 * 7 / 8)\n\n\n# eth æç¿ç®æ³\n\nblock chain is secured by mining. æ¯ç¹å¸æ¯å¤©ç¶ç bug bountyï¼åªè¦ä½ è½æ¾å°æç¿ç bugï¼å°±è½è·å¾èµéãç¶èæ¯ç¹å¸çç¼ºç¹å¨äºä¸ä¸ç¿æºçåºç°ï¼ä¸æ¯å¾ç¬¦åå»ä¸­å¿åçæ¦å¿µãä¸­æ¬èªåå° one cpu, one voteï¼å¸ææ¯ä¸ªäººé½è½åä¸è¿å»ãæä»¥åæ¥çå å¯è´§å¸å¨è®¾è®¡æç¿ç®æ³çæ¶åï¼å¸æ asic resistanceï¼æä¹è§£å³å¢ï¼\n\n * memory hard mining puzzle: å¢å å¯¹åå­çè®¿é®, å ä¸º asic ä¸»è¦æ¯ç®åå¼ºï¼ä½æ¯åå­è®¿é®è½åå¼±ãä¸ä¸ªä¾å­å°±æ¯ litecoinï¼å®æ¯åºäº scrypt å¯¹äºåå­è¦æ±è¾é«ï¼å¨åå­ä¸­åå»ºäºä¸ä¸ªæ¯è¾å¤§çæ°ç»è¿è¡è¿ç®ã\n\nå¥½ç puzzle çååæ¯ diffculty to solve, but easy to verifyï¼ä½æ¯ä¸è¿°ç®æ³å¨éªè¯çæ¶åä¹éè¦åæ ·å¤§å°çæ°ç»ï¼å¯¹äºè½»èç¹ä¸åå¥½ï¼å¦ææ¯ææºä¸ç app åå¾é¾å®ç°ï¼æä»¥å®éä¸è±ç¹å¸è®¾è®¡çæ°ç»å¤§å°ä¸º 128kãä½æ¯è¿ç§çå¿µå¯¹äºè±ç¹å¸ç å·å¯å¨ å¾ææä¹ã\n\neth ä¸­è®¾è®¡äºä¸¤ä¸ªæ°æ®éï¼16m cache å 1g dataset (dag)ã\n\n> 16m cache çææ¹å¼ï¼éè¿ seed (ç§å­æ°)è¿è¡ä¸äºè¿ç®è·å¾ç¬¬ä¸ä¸ªæ°ï¼ä¹åæ¯ä¸ªæ°å­é½æ¯éè¿åä¸ä¸ªä½ç½®çå¼ååå¸è·å¾çã 1g dag çææ¹å¼ï¼ä»å°æ°ç»ä¸­æç§ä¼ªéæºé¡ºåºè¯»åä¸äºåç´ ï¼å¦ç¬¬ä¸æ¬¡è¯»å a ä½ç½®æ°æ®ï¼å¯¹å½ååå¸å¼æ´æ°è¿­ä»£ç®åºä¸ä¸æ¬¡è¯»åä½ç½® bï¼åè¿è¡åå¸å¼æ´æ°è¿­ä»£è®¡ç®åº c ä½ç½®åç´ ãå¦æ­¤æ¥åè¿­ä»£è¯»å 256 æ¬¡ï¼æç»ç®åºä¸ä¸ªæ°ä½ä¸º dag ä¸­ç¬¬ä¸ä¸ªåç´ ã èèå°è®¡ç®æºåå­ä¸æ­å¢å¤§ï¼å æ­¤è¯¥ä¸¤ä¸ªæ°ç»éè¦å®æå¢å¤§ã è½»èç¹åªä¿å­å°ç cacheï¼éªè¯æ¶è¿è¡è®¡ç®å³å¯ãä½å¯¹äºæç¿æ¥è¯´ï¼å¦æè¿æ ·åå¤§é¨åç®åé½è±è´¹å¨äºéè¿ cache è®¡ç® dag ä¸é¢ï¼å æ­¤ï¼å¶å¿é¡»ä¿å­å¤§çæ°ç» dag ä»¥ä¾¿äºæ´å¿«æç¿ã\n\nä»¥å¤ªåæç¿è¿ç¨ï¼\n\n> æ ¹æ®åºå block header åå¶ä¸­ç nonce å¼è®¡ç®ä¸ä¸ªåå§åå¸ï¼å¨ dag ä¸æ ¹æ®å¶æ å°å°æä¸ªåå§ä½ç½® a1ï¼è¯»å a1 ä½ç½®çæ°åå¶ç¸é»çåä¸ä¸ªä½ç½® a2 ä¸çæ°ï¼æ ¹æ®è¯¥ä¸¤ä¸ªæ°è¿è¡è¿ç®ï¼ç®å¾ä¸ä¸ä¸ªä½ç½® b1ï¼è¯»å b1 å b2 ä½ç½®ä¸çæ°ï¼ä¾æ¬¡ç±»æ¨ï¼è¿­ä»£è¯»å 64 æ¬¡ï¼å±è¯»å 128 ä¸ªæ°ãæåï¼è®¡ç®åºä¸ä¸ªåå¸å¼ä¸æç¿é¾åº¦ç®æ éå¼æ¯è¾ï¼è¥ä¸ç¬¦åå°±æ´æ¢ nonceï¼éå¤ä»¥ä¸æä½ç´å°æç»è®¡ç®åå¸å¼ç¬¦åé¾åº¦è¦æ±ã\n\næ¯é 30000 ä¸ªåä¼éæ°çæ seed ï¼å¯¹åæ¥ç seed æ±åå¸ï¼ï¼å¹¶ä¸å©ç¨æ°ç seed çææ°ç cacheï¼cache çåå§å¤§å°ä¸º 16mï¼æ¯é 30000 ä¸ªåéæ°çææ¶å¢å¤§åå§å¤§å°ç 1/128 - 128kï¼éè¿ seed è®¡ç® cache çä¼ªä»£ç ï¼\n\ndef mkcache(cache_size, seed):\n  o = [hash(seed)]\n  for i in range (1, cache_size):\n    o.append(hash(o[-1]))\n  return o;\n\n\ndag åå§å¤§å°æ¯ 1gï¼ä¹æ¯æ¯é 30000 ä¸ªåæ´æ°ï¼åæ¶å¢å¤§åå§å¤§å°ç 1/128 - 8mï¼éè¿ cache æ¥çæ dataset ä¸­ç¬¬ i ä¸ªåç´ çä¼ªä»£ç \n\ndef calc_dataset_item(cache, i):\n  cache_size = cache.size\n  # éè¿ cache ä¸­ç¬¬ i ä¸ªåç´ çæ mix\n  mix = hash(cache[i % cache_size] ^ i)\n  # å¾ªç¯ 256 æ¬¡\n  for j in range(256):\n    # æ¯æ¬¡éè¿ get_int_from_item æ ¹æ®å½åç mix æ±å¾ä¸ä¸ä¸ª cache åç´ çä¸æ \n    cache_index = get_int_from_item(mix)\n    mix = make_item(mix, cache[cache_index % cache_size])\n   # æç»è¿å mix çåå¸å¼ï¼å¾å°ç¬¬ i ä¸ª dataset ä¸­çåç´ \n   return hash(mix)\n\n\næç¿è¿ç¨ä¸è½»èç¹éªè¯è¿ç¨ï¼åéè¿ header å nonce æ±åºä¸ä¸ªåå§ç mixï¼ç¶åè¿è¡ 64 æ¬¡å¾ªç¯ï¼æ ¹æ® mix æ±åºè¦è®¿é®ç dataset çåç´ ä¸æ ï¼ç¶åæ ¹æ®è¿ä¸ªä¸æ è®¿é® dataset ä¸­ä¸¤ä¸ªè¿ç»­çå¼ã\n\ndef hashimoto_full(header, nonce, full_size, dataset):\n  mix = hash(header, nonce)\n  for i in range(64):\n    dataset_index = get_int_from_item(mix) % full_size\n    mix = make_item(mix, dataset[dataset_index])\n    mix = make_item(mix, dataset[dataset_index + 1])\n  return hash(mix)\n\n# è½»èç¹æ¯ä¸´æ¶è®¡ç®åºç¨å°ç dataset åç´ ï¼èç¿å·¥æ¯ç´æ¥è®¿å­\ndef hashimoto_light(header, nonce, full_size, dataset):\n  mix = hash(header, nonce)\n  for i in range(64):\n    dataset_index = get_int_from_item(mix) % full_size\n    mix = make_item(mix, calc_dataset_item[cache, dataset_index])\n    mix = make_item(mix, calc_dataset_item[cache, dataset_index + 1])\n  return hash(mix)\n\n\næç¿ä¼ªä»£ç ï¼éæºåå§å nonceï¼åä¸ä¸ªä¸ªéè¯ nonce\n\ndef mine(full_size, dataset, header, target):\n  nonce = random.randint(0, 2**64)\n  while hashimoto_full(header, nonce, full_size, dataset) > target:\n    nonce = (nonce + 1) % 2**64\n  return nonce\n\n\n> ç®åä»¥å¤ªåæç¿ä»¥ gpu ä¸ºä¸»ï¼å¯è§å¶è®¾è®¡è¾ä¸ºæåï¼è¿ä¸ä»¥å¤ªåè®¾è®¡çæç¿ç®æ³ (ethash) æéè¦çå¤§åå­å·æå¾å¤§å³ç³»ã 1gçå¤§æ°ç»ä¸128kç¸æ¯ï¼å·®è·8000å¤åï¼å³ä½¿æ¯16mbä¸128kç¸æ¯ï¼ä¹å¤§äºä¸ç¾å¤åï¼å¯è§å¯¹åå­éæ±çå·®è·å¾å¤§ï¼åµä¸ä¸¤ä¸ªæ°ç»å¤§å°æ¯ä¼ä¸æ­å¢é¿çã\n> \n> å½ç¶ï¼ä»¥å¤ªåå®ç° asic resistance é¤äºæç¿ç®æ³è®¾è®¡ä¹å¤ï¼è¿å­å¨å¦å¤ä¸ä¸ªåå ï¼å³å¶é¢æä»å·¥ä½éè¯æ(proof of work)è½¬åæçè¯æ(proof of stake)\n> \n> èè¿å¯¹äº asic ååæ¥è¯´æå¨èãå ä¸º asic è¯çç åå¨æå¾é¿ï¼ææ¬å¾é«ï¼å¦æä»¥å¤ªåè½¬å¥æçè¯æï¼è¿äºæå¥çç åè´¹ç¨å°å¨é¨ç½è´¹ï¼ä½æªè³ç®åï¼ä»¥å¤ªåä»ç¶åºäº pow å±è¯æºå¶ã\n\n\n# é¢æç¿(pre mining)\n\nä»¥å¤ªåä¸­éç¨çé¢æç¿çæºå¶ãè¿é é¢æç¿ å¹¶ä¸æç¿ï¼èæ¯å¨å¼åä»¥å¤ªåæ¶ï¼ç»å¼åèé¢çäºä¸é¨åè´§å¸ï¼å¶å®è¿é¨åé¢çäºå¾å¤(å¨ genesis åä¸çºªå)ã å pre-mining å¯¹åºï¼è¿æ pre-saleï¼pre-sale æçæ¯å°é¢ççè´§å¸åºå®æç¨äºåç»­å¼åå·¥ä½ï¼ä¼ç­¹ï¼\n\n> æç¿ç®æ³è®¾è®¡ä¸ç´è¶åäºè®©å¤§ä¼åä¸ï¼è¿ææ¯å¬å¹³çãä½ä¹æäººè®¤ä¸ºè®©æ®éè®¡ç®æºåä¸æç¿æ¯ä¸å®å¨çï¼åæ¯ç¹å¸é£æ ·ï¼è®©ä¸­å¿åç¿æ± åä¸æç¿ææ¯å®å¨çãä¸ºä»ä¹å¢ï¼ å ä¸ºè¦æ»å»ç³»ç»ï¼éè¦è´­å¥å¤§éç¿æºéè¿ç®åè¿è¡ 51% æ»å»ï¼èä¸è¿ç§ç¿æºä¸è½ç¨äºå¶ä»å¸ç§ãèä¸æ»å»æååï¼è¯æå®å¨æ§ä¸å¤å¿ç¶å¯¼è´è¯¥å¸çä»·å¼è·³æ°´ï¼æ»å»èæå¥çç¡¬ä»¶ææ¬å°ä¼å¨é¨ææ°´æ¼ãç¸åè®©éç¨è®¡ç®æºä¹åä¸æç¿ï¼åå¨æ»å»ææ¬ä¾¿å¤§å¹åº¦éä½ï¼ç®åçå¤§åäºèç½å¬å¸ï¼å°å¶æå¡å¨èéèµ·æ¥è¿è¡æ»å»å³å¯ï¼èæ»å»å®æåè¿äºæå¡å¨ä»ç¶å¯ä»¥è½¬èè¿è¡æ¥å¸¸ä¸å¡ãå æ­¤æäººè®¤ä¸ºå¨æç¿ä¸é¢ï¼asic ç¿æºä¸ç»å¤©ä¸ææ¯æå®å¨çæ¹å¼ã\n\n\n# ä»¥å¤ªåæç¿é¾åº¦è°æ´\n\n\n\n\n\n\n\n\n# é¾åº¦ç¸å¼¹\n\nä»¥å¤ªåå¨è®¾è®¡ä¹åå°±è®¡åè¦éæ­¥ä» powï¼å·¥ä½éè¯æï¼è½¬å posï¼æçè¯æï¼ï¼èæçè¯æä¸éè¦æç¿ãä»æè§èè§åº¦æ¥çï¼æç¿æ¶èäºå¤§éçµåãèµéç­ï¼å¦æè½¬å¥æ¾å¼æç¿å¿ç¶æ¯ä¸ä»¶å¥½äºãä½ä»ç¿å·¥çè§åº¦ï¼è±è´¹äºå¾å¤§ç²¾åæå¥ææ¬è´­ä¹°è®¾å¤ï¼çªç¶è¢«åç¥ä¸æç¿äºï¼è¿å¿ç¶æ¯ä¸ä»¶å¾é¾æ¥åçäºæãå æ­¤ï¼ä»¥å¤ªåå¨è®¾è®¡ä¹åä¾¿æ·»å äºé¾åº¦ç¸å¼¹ï¼è¿«ä½¿ç¿å·¥è½¬å¥ posã\n\n\n\n> é¾åº¦ç¸å¼¹å±äºææ°çº§å«ï¼å¨ä»¥å¤ªåæ©ææ¶ï¼åºåå·è¾å°é¾åº¦ç¸å¼¹è®¡ç®æå¾å¼è¾å°ï¼é¾åº¦è°æ´çº§å«åºæ¬ä¸éè¿é¾åº¦è°æ´ä¸­çèªéåºé¾åº¦è°æ´é¨åå³å®ï¼èéçè¶æ¥è¶å¤åºåè¢«æåºï¼é¾åº¦ç¸å¼¹çå¨åå¼å§æ¾é²åºæ¥ï¼è¿ä¹å°±ä½¿å¾æç¿åå¾è¶æ¥è¶é¾ï¼ä»èè¿«ä½¿ç¿å·¥æ¿æè½¬å¥ posã ä½æ¯ç®åä»¥å¤ªåå±è¯æºå¶ä»ç¶æ¯ powï¼ä¾ç¶éè¦ç¿å·¥åä¸æç¿ç»´æ¤ä»¥å¤ªåç³»ç»çç¨³å®ãæä»¥ä»¥å¤ªåå³å®å°åºåå·åå» 300w ä¸ªï¼å°±æ¯ä¸é¢å¾ä¸­çå¬ç¤ºï¼\n\n\n\n> ä¸å¾ä¸­å±ç¤ºäºåé 300w ä¸ªåºåååçé¾åº¦ç¸å¼¹çä¸ºä¾\n\n\n# ä»¥å¤ªååå±çåä¸ªé¶æ®µ\n\nä»¥å¤ªååå±å­å¨åä¸ªé¶æ®µï¼æä»¬ç®åå¤äºç¬¬ä¸ä¸ªé¶æ®µä¸­çæå åº­é¶æ®µï¼é¾åº¦ç¸å¼¹åè°å°±æ¯å¨æå åº­é¶æ®µè¿è¡çã\n\n\n\n\n# ä»£ç å®ç°\n\nfunc calcdifficultybyzantium(curversion string, time uint64, parent *types.header) *big.int {\n\t// https://github.com/matrixainetwork/eips/issues/100.\n\t// algorithm:\n\t// diff = (parent_diff +\n\t//         (parent_diff / 2048 * max((2 if len(parent.uncles) else 1) - ((timestamp - parent.timestamp) // 9), -99))\n\t//        ) + 2^(periodcount - 2)\n\n\tbigtime := new(big.int).setuint64(time) // å½ååºåæ¶é´æ³\n\tbigparenttime := new(big.int).set(parent.time) // ç¶åºåæ¶é´æ³\n\n\t// holds intermediate values to make the algo easier to read & audit\n\tx := new(big.int)\n\ty := new(big.int)\n\tlogger := log.new("calcdifficulty diff", parent.difficulty)\n\t// (2 if len(parent_uncles) else 1) - (block_timestamp - parent_timestamp) // 9\n\tx.sub(bigtime, bigparenttime) // å½ååºåæ¶é´æ³ - ç¶åºåæ¶é´æ³ = åºåæ¶é´\n\tvar durationlimit *big.int\n\tif manversion.versioncmp(curversion, manversion.versiongamma) >= 0 {\n\t\tdurationlimit = params.versiongammadurationlimit\n\t} else {\n\t\tdurationlimit = params.durationlimit\n\t}\n\tlogger.info("calcdifficulty diff", "duration", durationlimit.string())\n\tx.div(x, durationlimit)\n\tif parent.unclehash == types.emptyunclehash {\n\t\tx.sub(big1, x)\n\t} else {\n\t\tx.sub(big2, x)\n\t}\n\t// max((2 if len(parent_uncles) else 1) - (block_timestamp - parent_timestamp) // 9, -99)\n\tif x.cmp(bigminus99) < 0 {\n\t\tx.set(bigminus99)\n\t}\n\t// parent_diff + (parent_diff / 2048 * max((2 if len(parent.uncles) else 1) - ((timestamp - parent.timestamp) // 9), -99))\n\ty.div(parent.difficulty, params.difficultybounddivisor)\n\tif y.sign() == 0 {\n\t\ty = big1\n\t}\n\tx.mul(y, x)\n\tx.add(parent.difficulty, x)\n  logger.info("cal diff", "x", x, "y", y, "mindiff", params.minimumdifficulty)\n\t// minimum difficulty can ever be (before exponential factor)\n\tif x.cmp(params.minimumdifficulty) < 0 {\n\t\tx.set(params.minimumdifficulty) // minimumdifficulty æ¯é¾åº¦ä¸é d0\n\t}\n\t// calculate a fake block number for the ice-age delay:\n\t//   https://github.com/matrixainetwork/eips/pull/669\n\t//   fake_block_number = min(0, block.number - 3_000_000\n\tfakeblocknumber := new(big.int)\n\tif parent.number.cmp(big2999999) >= 0 {\n\t\tfakeblocknumber = fakeblocknumber.sub(parent.number, big2999999) // note, parent is 1 less than the actual block number\n\t}\n\t// for the exponential factor\n\tperiodcount := fakeblocknumber\n\tperiodcount.div(periodcount, expdiffperiod)\n\n\t// the exponential factor, commonly referred to as "the bomb"\n\t// diff = diff + 2^(periodcount - 2)\n\tif periodcount.cmp(big1) > 0 {\n\t\ty.sub(periodcount, big2)\n\t\ty.exp(big2, y, nil)\n\t\tx.add(x, y)\n\t}\n\treturn x\n}\n',charsets:{cjk:!0}},{title:"åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  7",frontmatter:{},regularPath:"/blockchain/learn7.html",relativePath:"blockchain/learn7.md",key:"v-6cc9067f",path:"/blockchain/learn7.html",headers:[{level:2,title:"æçè¯æ",slug:"æçè¯æ",normalizedTitle:"æçè¯æ",charIndex:118},{level:3,title:"ä¸¤è¾¹ä¸æ³¨",slug:"ä¸¤è¾¹ä¸æ³¨",normalizedTitle:"ä¸¤è¾¹ä¸æ³¨",charIndex:781},{level:3,title:"ä»¥å¤ªåæçè¯æ",slug:"ä»¥å¤ªåæçè¯æ",normalizedTitle:"ä»¥å¤ªåæçè¯æ",charIndex:868},{level:2,title:"æºè½åçº¦",slug:"æºè½åçº¦",normalizedTitle:"æºè½åçº¦",charIndex:216},{level:3,title:"æºè½åçº¦çä¼ç¹",slug:"æºè½åçº¦çä¼ç¹",normalizedTitle:"æºè½åçº¦çä¼ç¹",charIndex:2132},{level:3,title:"æºè½åçº¦çåºç¨",slug:"æºè½åçº¦çåºç¨",normalizedTitle:"æºè½åçº¦çåºç¨",charIndex:2345},{level:3,title:"æºè½åçº¦çè°ç¨",slug:"æºè½åçº¦çè°ç¨",normalizedTitle:"æºè½åçº¦çè°ç¨",charIndex:2600},{level:3,title:"æºè½åçº¦çåå»ºä¸è¿è¡",slug:"æºè½åçº¦çåå»ºä¸è¿è¡",normalizedTitle:"æºè½åçº¦çåå»ºä¸è¿è¡",charIndex:2769},{level:3,title:"æ±½æ²¹è´¹",slug:"æ±½æ²¹è´¹",normalizedTitle:"æ±½æ²¹è´¹",charIndex:2868},{level:3,title:"éè¯¯å¤ç",slug:"éè¯¯å¤ç",normalizedTitle:"éè¯¯å¤ç",charIndex:3961},{level:3,title:"åµå¥è°ç¨",slug:"åµå¥è°ç¨",normalizedTitle:"åµå¥è°ç¨",charIndex:4076},{level:3,title:"æç¿ä¸æºè½åçº¦æ§è¡",slug:"æç¿ä¸æºè½åçº¦æ§è¡",normalizedTitle:"æç¿ä¸æºè½åçº¦æ§è¡",charIndex:4087},{level:3,title:"å°åç±»å",slug:"å°åç±»å",normalizedTitle:"å°åç±»å",charIndex:5063},{level:3,title:"code is law",slug:"code-is-law",normalizedTitle:"code is law",charIndex:5190},{level:3,title:"éä»",slug:"éä»",normalizedTitle:"éä»",charIndex:5332}],lastUpdated:"6/25/2023, 4:30:00 PM",lastUpdatedTimestamp:16876818e5,headersStr:"æçè¯æ ä¸¤è¾¹ä¸æ³¨ ä»¥å¤ªåæçè¯æ æºè½åçº¦ æºè½åçº¦çä¼ç¹ æºè½åçº¦çåºç¨ æºè½åçº¦çè°ç¨ æºè½åçº¦çåå»ºä¸è¿è¡ æ±½æ²¹è´¹ éè¯¯å¤ç åµå¥è°ç¨ æç¿ä¸æºè½åçº¦æ§è¡ å°åç±»å code is law éä»",content:"# åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  7\n\n * å­¦ä¹ å°åï¼https://www.bilibili.com/video/BV1Vt411X7JF\n * åèæç« ï¼[åäº¬å¤§å­¦èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾ç¬è®°24ââETHæçè¯æç¯](https://blog.nowcoder.net/n/a509ac93c75242438e71cb47fe59229cãåäº¬å¤§å­¦èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾ç¬è®°25ââETHæºè½åçº¦ç¯1\n\n\n# æçè¯æ\n\næ¯ç¹å¸çæç¿è¿ç¨ï¼æ¶èäºå·¨å¤§ççµåï¼å¹¶ä¸è½èéæ¶é´ä¸æ­å¢é¿ï¼å¹³åæ¯ä¸ä¸ªäº¤ææ¶è 1000 åº¦çµãåæ ·å°ä»¥å¤ªåå¹³åæ¯ä¸ä¸ªäº¤ææ¶è 67 åº¦çµã\n\n> ç¿å·¥ä¸ºä»ä¹è¦æç¿ï¼å ä¸ºè¦è·å¾åºåå¥å±ãä¸ºä»ä¹è¦ç»ç¿å·¥å¥å±ï¼å ä¸ºæ¿å±ç¿å·¥åä¸åºåé¾çç»´æ¤ã æç¿çæ¶çæ¯ç±ãæ¼é±ãï¼ä¹°ç¿æºï¼å³å®çï¼é£ä¹æ¢ç¶æ¯æ¼é±ï¼æä»¬ç´æ¥æé±æ¿åºæ¥æ¯ä¸æ¯è¡ä¸è¡ï¼ä¸å¶ä¹°ç¿æºæç¿ï¼æä»¬ä¸å¦æé±æå¥å°åºåé¾çç»´æ¤å½ä¸­ï¼ç±æå¥èµéçæ¯ä¾æ¥å³å®æç»çæ¶çãè¿å°±æ¯ proof of stake æçè¯æçææ³ã\n\nä¼ç¹ï¼\n\n * çå»äºæç¿çè¿ç¨ï¼åå°äºè½èï¼åå°äºæ¸©å®¤æ°ä½çææ¾ã\n * ç»´æ¤åºåé¾å®å¨çèµæºå½¢æé­ç¯ï¼è POW ä¸­ç»´æ¤å¶å®å¨çèµæºéè¦éè¿ç°å®ä¸­æµéçè´§å¸è´­ä¹°ç¿æºç­è®¾å¤ï¼è¿ä¹å°±å¯¼è´åªè¦æäººæ³è¦æ»å»ï¼åªéè¦å¤é¨èéè¶³å¤èµéè¾¾å° 51% ç®åå°±å¯ä»¥æ»å»æåãä¸»æµçè´§å¸ææ»å»è½åè¿æ¯è¾å¼ºï¼åååè¡çå°å¸ç§ï¼éå°è¿ç§æ»å»æ¯è´å½çãAltcoin Infanticideã\n\næçè¯ææ¯åºäºæ¥æçå¸ï¼å¦ææ³åå¨æ»å»å¿é¡»è·åä¸åä»¥ä¸çå¸ï¼æ è®ºä½ å¨å¤é¨æå¤å°çèµéï¼é½ä¸ä¼å¯¹å å¯è´§å¸ç³»ç»é æç´æ¥çå½±åï¼ä½ åªè½è±é±ä¹°å°è¶³å¤å¤çå¸æå¯ä»¥ï¼åé¨é­ç¯ï¼ï¼å¦æä¸æ¦æäººè±é±å¤§éä¹°å¸ï¼ä¼å¯¼è´ä»·æ ¼å¤§æ¶¨ï¼è¿å¯¹å¼åèæ¯æå¥½å¤çå¯ä»¥å¤§èµä¸ç¬ã\n\n\n# ä¸¤è¾¹ä¸æ³¨\n\nåå¦ä¸ä¸ªåºåé¾åºç°äºååï¼å¦ææç¿ä¼æ²¿çæé¿åæ³é¾å»æï¼è½ç¶å¦ä¸æ¡ä¹æå¯è½æä¸ºæé¿åæ³é¾ï¼ä½æ¯ä½ åªä¼æ²¿çä¸æ¡å»æãä½æ¯å¦ææ¯æçè¯æï¼ä½ å¯ä»¥ä¸¤è¾¹é½ä¸æ³¨ã\n\n\n# ä»¥å¤ªåæçè¯æ\n\nCasper the Friendly Finality Gadget(FFG)\n\nCasper åè®®å¼å¥ä¸ä¸ªæ¦å¿µ validator éªè¯èï¼æ³æä¸º validator å¿é¡»æå¥ä¸å®çä¿è¯éï¼ä¿è¯éä¼è¢«ç³»ç»éå®ãä»çèè´£æ¯æ¨å¨ç³»ç»è¾¾æå±è¯ï¼æç¥¨å³å®åªæ¡é¾æä¸ºæé¿åæ³é¾ï¼æç¥¨çæéä¸ºä¿è¯éçæ°ç®ãç¬¬ä¸è½®æç¥¨æ¯ prepare messageï¼ç¬¬äºè½®æç¥¨æ¯ commit messageï¼æ¯ä¸è½®æç¥¨é½è¦å¾å° 2/3 ä»¥ä¸çéªè¯èåæãå®éä¸ 100 ä¸ªåºåç epoch åæä¸¤ä¸ª 50 ä¸ªåºåï¼æ¯ 50 ä¸ªåºåç»æåå°±è¿è¡ä¸è½®æç¥¨ã\n\n> ç¿å·¥æç¿ä¼è·å¾åºåå¥å±ï¼èéªè¯èä¹ä¼å¾å°ç¸åºå¥å±ãå½ç¶æä¸ªéªè¯èè¡æ¿ä¸ä½ä¸ºï¼ä¸åä¸æç¥¨å¯¼è´ç³»ç»è¿è¿æ æ³è¾¾æå±è¯ï¼è¿æ¶æ£æé¨åä¿è¯éï¼å¦ææä¸ªéªè¯èä¹±ä½ä¸ºï¼ç»ä¸¤è¾¹é½è¿è¡æç¥¨ï¼è¢«åç°åæ²¡æ¶å¨é¨ä¿è¯éãæ²¡æ¶åçä¿è¯éç´æ¥éæ¯æã æ¯ä¸ªéªè¯èæä¸å®æ¶é´çä»»æï¼å¨ä»»æç»æåï¼è¿å¥ç­å¾æï¼å¨æ­¤æé´ç­å¾å¶ä»èç¹æ£ä¸¾æ­åæ¯å¦å­å¨ä¸è¯è¡ä¸ºï¼è¥éè¿ç­å¾æï¼åå¯ä»¥ååä¿è¯éå¹¶è·å¾ä¸å®å¥å±ã\n\néè¿éªè¯èæç¥¨è¾¾æç Finalityï¼ææ²¡æå¯è½è¢«æ¨ç¿»ï¼\n\n> åå¦æä¸ªæ¶æçç»ç»è¦åçæ»å»ï¼åå¦ä»ä»¬æ¯ç¿å·¥çè¯ï¼æ²¡æéªè¯èä½ä¸ºåä¼åæ æ³æ¨ç¿» Finalityãç¿å·¥æ è®ºç®åå¤ä¹å¼ºï¼æç»æç¥¨æé½ä¸å¨å¶æä¸­ã å¿é¡»å¨ç³»ç»ä¸­ï¼å­å¨å¤§ééªè¯èè¿è¡äºä¸¤è¾¹æç¥¨ï¼ä¹å°±æ¯è¯´ï¼è³å° 1/3ï¼è¯¥åè®®è§å®è¶è¿2/3æææï¼çéªè¯èä¸¤ä¾§é½æç¥¨ï¼æä¼å¯¼è´ç³»ç»è¢«ç¯¡æ¹ãèè¿ä¸æ¦è¢«åç°ï¼è¿ 1/3 éªè¯èçä¿è¯éå°ä¼è¢«æ²¡æ¶ã\n\nä»¥å¤ªåç³»ç»è®¾æ³ï¼éçæ¶é´æ¨ç§»ï¼æç¿å¥å±éæ¸åå°èæçè¯æå¥å±éæ¸å¢å¤ï¼ä»èå®ç°POWå°POSçè¿æ¸¡ï¼æç»å®ç°å®å¨æ¾å¼æç¿ã\n\næ¢ç¶æçè¯æè¿ä¹å¥½ï¼é£ä¹ä¸ºä»ä¹æ²¡ææ¨å¹¿å¼æ¥ï¼\n\n> æ¯ç¹å¸åä»¥å¤ªåçæºå¶é½ç»è¿äº bug bountyï¼å·¥ä½éè¯æå·²ç»å¾å°äºäºå®æ£éªï¼è¯¥æºå¶è¾ä¸ºæçã ä¾å¦ EOS æå­å å¯è´§å¸ï¼å®ç¨çå°±æ¯æçè¯æçææ³ï¼ç¨çæ¯ DPOSï¼Delegated Proof of Stake åè®®ï¼éè¿æç¥¨é 21 ä¸ªè¶çº§èç¹ï¼åç±è¶çº§èç¹äº§çåºåãåºäºæçè¯æçæºå¶ä»ç¶å¤äºæ¢ç´¢é¶æ®µã\n\næäººè®¤ä¸ºæç¿æ¶èççµå¹¶ä¸æ¯å¾å¤ï¼èä¸å¶å¯¹äºç¯å¢çå½±åæ¯æéçãå¾å¤äººå¯¹å·¥ä½éè¯æå¶å®æ¯åæåçæ¯æ ç¨åãæç¿æä¾äºå°çµè½è½¬æ¢ä¸ºé±çææ®µï¼èçµè½æ¬èº«é¾ä»¥ä¼ è¾åå­å¨ãæç¿ä¸ºå°å¤ä½ççµè½è½¬æ¢ä¸ºæä»·å¼çè´§å¸æä¾äºå¾å¥½çè§£å³ææ®µãä¹å°±æ¯è¯´æç¿æ¶èçµè½å¯ä»¥æææ¶èè¿å©äº§è½ï¼å¸¦å¨å½å°ç»æµåå±ã\n\n\n# æºè½åçº¦\n\næºè½åçº¦çæ¦å¿µææ©æ¯ç± Nick Szabo å¨ 1994 å¹´æåºçãæºè½åçº¦æ¯ä¸ä¸ªè®¡ç®æºå±é¢çäº¤æåè®®ï¼ç¨äºæ§è¡ä¸ç³»åçåçº¦é¡¹ãåçº¦æ¨å¨æ»¡è¶³ä¸äºå¸¸è§çåçº¦æ¡ä»¶ã\n\nå¾å¤åºåé¾ç½ç»ä½¿ç¨çæºè½åçº¦åè½ç±»ä¼¼äºèªå¨å®è´§æºæèè¯´æ¯ä¸ä¸ªçµå­ååãæºè½åçº¦ä¸èªå¨å®è´§æºç±»æ¯ï¼å¦æä½ åèªå¨å®è´§æºï¼ç±»æ¯åç±»è´¦æ¬ï¼è½¬å¥æ¯ç¹å¸æå¶ä»å å¯è´§å¸ï¼ä¸æ¦è¾å¥æ»¡è¶³æºè½åçº¦ä»£ç è¦æ±ï¼å®ä¼èªå¨æ§è¡åæ¹çº¦å®çä¹å¡ã\n\n\n# æºè½åçº¦çä¼ç¹\n\n * èªæ²» æºè½åçº¦ç¬ç«è¿è¡å¨éå¸ä¸çåå°çè®¡ç®æºä¸ï¼ä¸ä¾èµäºä»»ä½ä¸­å¿åçç³»ç»ã\n * å¯ä¿¡ æºè½åçº¦å¯ä¿¡çç¹ç¹æ¯åºäºåå¸å¼è´¦æ¬çï¼è¿äºè´¦æ¬å¯ä»¥æ§è¡å¹¶éªè¯åçº¦ã\n * é²æ£æ§ æºè½åçº¦å­å¨äºåå¸å¼çç½ç»ä¸­ï¼åç¹ç¼ºå¤±æç ´åå¹¶ä¸ä¼æå½±åã\n * éåº¦ æºè½åçº¦çå»ä¸­å¿åçå¤çè¿ç¨å¯ä»¥å¨ç­æ¶é´åå®æå¯¹ä¸å¡é»è¾çå¤çã\n * ç»æµ æºè½åçº¦æ¶é¤äºå¯¹å¾å¸ãè§è¯äººä»¥åå¶ä»ä¸­é´æºææææçåºå¤§çä¸­ä»é¾çéæ±ã\n\n\n# æºè½åçº¦çåºç¨\n\n> ç¥è¯äº§æä¿æ¤ï¼æºè½åçº¦å¯ä»¥å¸®å©åä½èä¿æ¤ä»ä»¬çç¥è¯äº§æï¼ç±äºå¯¹ NFT ç­æ°å­ååçæå¿§ï¼è¿ä¸ç¹åå¾è¶æ¥è¶éè¦ãåä½èå¯ä»¥ä½¿ç¨æºè½åçº¦ï¼å¨äº¤æè¿ç¨ä¸­è½¬ç§»æä¿çä»ä»¬å¯¹æä¸åå®¹çæææãä¾å¦ï¼NFT åé èå¯è½å¸æä¿çå¯¹å¶èºæ¯ä½åçæææï¼åæ¶å°ä»£å¸çæææè½¬è®©ç»ä¹°æ¹ãå¨ NFT çæºè½åçº¦ä¸­ï¼ä»ä»¬å¯ä»¥æ¦è¿°æç¡®çæææåæ¯ä»æ¡æ¬¾ï¼ä»¥ä¿æ¤ä»ä»¬çæå©ã èºæ¯å®¶ä¹å¯ä»¥ä½¿ç¨æºè½åçº¦è·å¾çç¨ãä»»ä½æ¶åï¼åªè¦ä»ä»¬çèºæ¯ä½åç NFT æå¯æ¬å®åºï¼æºè½åçº¦å°±å¯ä»¥è§¦ååéååèºæ¯å®¶çèªå¨ä»æ¬¾ã\n\n\n# æºè½åçº¦çè°ç¨\n\nä»¥å¤ªåä¸­æºè½åçº¦ç¼åä»£ç ä¸º Solidityï¼å¶è¯­æ³ä¸ JavaScript å¾æ¥è¿ã è°ç¨æºè½åçº¦å¶å®åè½¬è´¦ç±»ä¼¼ï¼æ¯å¦ A åèµ·ä¸ä¸ªäº¤æè½¬è´¦ç» Bï¼å¦æ B æ¯ä¸ä¸ªæ®éçè´¦æ·è¿å°±æ¯ä¸æ¬¡æ®éè½¬è´¦ï¼ä½æ¯ B å¦ææ¯ä¸ä¸ªåçº¦è´¦æ·ï¼è¿å°±æ¯åèµ·äºå¯¹ B åçº¦çè°ç¨ãå¤é¨è´¦æ·å¯ä»¥è°ç¨åçº¦è´¦æ·ï¼åçº¦è´¦æ·ä¹å¯ä»¥è°ç¨åçº¦è´¦æ·\n\n\n# æºè½åçº¦çåå»ºä¸è¿è¡\n\nEVM è®¾è®¡ææ³ç±»ä¼¼äº JAVA ä¸­ç JVM ï¼ä¾¿äºè·¨å¹³å°å¢å¼ºå¯ç§»æ¤æ§ãEVM ä¸­å¯»åç©ºé´ 256ä½ï¼èç®åä¸ªäººæºä¸»æµä½ 32ä½å 64ä½ï¼ä¸ä¹å­å¨è¾å¤§å·®è·ã\n\n\n\n\n# æ±½æ²¹è´¹\n\næ¯ç¹å¸ç¸æ¯äºä»¥å¤ªåå¾ç®åï¼èæ¬è¯­è¨é½ä¸æ¯æå¾ªç¯ãèä»¥å¤ªåæä¾å¾çµå®å¤çå¹³å°ï¼ä»èä½¿å¾ä»¥å¤ªåç¸å¯¹äºæ¯ç¹å¸å¯ä»¥å®ç°å¾å¤åè½ï¼ä½è¿ä¹å¯¼è´ä¸äºé®é¢ï¼ä¾å¦å½ä¸ä¸ªå¨èç¹æ¶å°ä¸ä¸ªå¯¹æºè½åçº¦è°ç¨æä¹ç¥æå¶æ¯å¦ä¼å¯¼è´æ­»å¾ªç¯ã\n\näºå®ä¸æ æ³é¢ç¥å¶æ¯å¦ä¼å¯¼è´æ­»å¾ªç¯ï¼å®éä¸è¯¥é®é¢æ¯ä¸ä¸ªåæºé®é¢ï¼èåæºé®é¢ä¸å¯è§£ãå æ­¤ï¼ä»¥å¤ªåå¼å¥æ±½æ²¹è´¹æºå¶å°è¯¥é®é¢æç»äºåèµ·äº¤æçè´¦æ·ãä»¥å¤ªåè§å®æ§è¡åçº¦ä¸­æä»¤éè¦æ¶åæ±½æ²¹è´¹ï¼å¹¶ä¸ç±åèµ·äº¤æçäººè¿è¡æ¯ä»ã\n\n\n\n * Price: åä½æ±½æ²¹ä»·æ ¼\n * GasLimit: æ¿ææ¯ä»æå¤§æ±½æ²¹é\n * Recipient: æ¶æ¬¾äººå°å\n * Amount: è½¬è´¦éé¢\n * Payload: data å\n\nå½ä¸ä¸ªå¨èç¹æ¶å°ä¸ä¸ªå¯¹æºè½åçº¦çè°ç¨ï¼åæç§æå¤§æ±½æ²¹è´¹æ¶åä»å¶è´¦æ·ä¸æ¬¡æ§æ£é¤ï¼åæ ¹æ®å®éæ§è¡æåµå¤éå°è¡¥(æ±½æ²¹è´¹ä¸å¤ä¼å¼ååæ»ï¼èéç®åçè¡¥é½)ãä¸è¬è®¡ç®éè¾å¤§ãå­å¨éè¾å¤§çå¤ææä»¤çæ±½æ²¹è´¹æ¯è¾è´µã\n\n> ä»¥å¤ªåä¸­å­å¨ gaslimitï¼éè¿æ¶åæ±½æ²¹è´¹ä¿éç³»ç»ä¸­ä¸ä¼å­å¨å¯¹èµæºæ¶èç¹å«å¤§çè°ç¨ãä½ä¸æ¯ç¹å¸ä¸åï¼æ¯ç¹å¸ç´æ¥éè¿éå¶åºåå¤§å° 1MB ä¿éå¯¹ç½ç»èµæºååä¸ä¼è¿å¤§ï¼è¿ 1MB å¤§å°æ¯åºå®çæ æ³ä¿®æ¹ãèä»¥å¤ªåä¸­æ¯ä¸ªç¿å·¥é½å¯ä»¥ä»¥åä¸ä¸ªåºåä¸­ gaslimt ä¸ºåºæ°ï¼è¿è¡ä¸è°æä¸è° 1/1024ï¼ä»èéè¿ç»å¤§å¤æ°åºåä¸æ­ä¸ä¸è°æ´ï¼ä¿è¯å¾å°ä¸ä¸ªè¾ä¸ºçæ³åç gaslimt å¼ãæç»æ´ä¸ªç³»ç»ç gaslimt å°±æ¯ææç¿å·¥å¸æçå¹³åå¼ã\n\n> å¨æ¯ç¹å¸ç³»ç»ä¸­ï¼äº¤ææ¯æ¯è¾ç®åçï¼ä»ä»æ¯è½¬è´¦æä½ï¼ä¹å°±æ¯è¯´å¯ä»¥éè¿äº¤æçå­èæ°è¡¡éåºäº¤ææéè¦æ¶èçèµæºå¤å°ãä½ä»¥å¤ªåä¸­å¼å¥äºæºè½åçº¦ï¼èæºè½åçº¦é»è¾å¾å¤æï¼å¶å­èæ°ä¸æ¶èèµæºæ°å¹¶æ å³èãå­å¨æäºäº¤æï¼ä»å­èæ°æ¥çå¾å°ï¼ä½å¶å®éæ¶èèµæºå¾å¤§(ä¾å¦è°ç¨å¶ä»åçº¦ç­)ï¼å æ­¤è¦æ ¹æ®äº¤æçå·ä½æä½æ¶è´¹ï¼ææå¼å¥äºæ±½æ²¹è´¹è¿ä¸æ¦å¿µã å¨ block header ä¸­åå«äº gaslimitï¼å¶å¹¶éå°ææäº¤æçæ¶èæ±½æ²¹è´¹ç¸å ï¼èæ¯è¯¥åºåä¸­ææäº¤æè½å¤æ¶èçèµæºçä¸éã\n\næ±½æ²¹è´¹æ¯æä¹æ£é¤çï¼\n\n> é¦åï¼ä¹åå¨ä»¥å¤ªåæ°æ®ç»æä¸­ä»ç»äºä»¥å¤ªåä¸­ä¸æ£µæ ââç¶ææ ãäº¤ææ ãæ¶æ®æ ãè¿ä¸æ£µæ é½ä½äºå¨èç¹ä¸­ï¼æ¯å¨èç¹å¨æ¬å°ç»´æ¤çæ°æ®ç»æï¼è®°å½äºæ¯ä¸ªè´¦æ·çç¶æç­æ°æ®ï¼æä»¥è¯¥èç¹æ¶å°è°ç¨æ¶ï¼æ¯å¨æ¬å°å¯¹è¯¥è´¦æ·çä½é¢åæå³å¯ãæä»¥å¤ä¸ªå¨èç¹æ¯äººæ£ä¸æ¬¡ï¼ä»ä»æ¯æ¯ä¸ªå¨èç¹åèªå¨æ¬å°æ£ä¸æ¬¡ã ä¹å°±æ¯è¯´ï¼æºè½åçº¦å¨æ§è¡è¿ç¨ä¸­ï¼ä¿®æ¹çé½æ¯æ¬å°çæ°æ®ç»æï¼åªæå¨è¯¥æºè½åçº¦è¢«åå¸å°åºåé¾ä¸ï¼ææèç¹æéè¦åæ­¥ç¶æï¼åèªå¨æ¬å°æ§è¡è¯¥æºè½åçº¦ã\n\n\n# éè¯¯å¤ç\n\nä»¥å¤ªåä¸­äº¤æå·æåå­æ§ï¼è¦ä¹å¨æ§è¡ï¼è¦ä¹å¨ä¸æ§è¡ï¼ä¸ä¼åªæ§è¡ä¸é¨å(åå«æ®éè½¬è´¦äº¤æåæºè½åçº¦)ãå¨æ§è¡è¿ç¨ä¸­äº§çéè¯¯å¯¼è´åæ»ï¼å·²ç»æ¶èæçæ±½æ²¹è´¹æ¯ä¸ä¼éåçãä»èææé²æ­¢äºæ¶æèç¹å¯¹å¨èç¹è¿è¡æ¶æè°ç¨ã\n\n\n\n\n# åµå¥è°ç¨\n\n\n\n\n# æç¿ä¸æºè½åçº¦æ§è¡\n\nåè®¾å¨èç¹è¦æåä¸äºäº¤æå°åºåä¸­ï¼å¶ä¸­å­å¨æäºäº¤ææ¯å¯¹æºè½åçº¦çè°ç¨ãå¨èç¹åºè¯¥åæ§è¡æºè½åçº¦åæç¿ï¼è¿æ¯åæç¿è·å¾è®°è´¦æåæ§è¡æºè½åçº¦ï¼\n\nå¦æåæç¿åæ§è¡æºè½åçº¦ä¼å¦ä½ï¼\n\n> æºè½åçº¦ä¼å¯¼è´æ°æ®ç»æåçæ¹åï¼ä»èä¿®æ¹æåºåä¸­çåå®¹ï¼é£ä¹ä¹åæç¿æ¶æå°ç nonce æ¯ä¸éç¨äºæ­¤æ¶ä¿®æ¹è¿åç blockçï¼ä¹å°±æ¯è¯´æ§è¡æºè½åçº¦åçåºåå¹¶éä¹åçåºåï¼ä¹åç nonce ä¸è½éç¨äºå½ååºåï¼ä»èæ æ³è¢«å å¥å°åºåé¾ä¸­ãæç¿å¯¼è´ä¸æ£µæ æ°æ®ç»ææ¹åï¼ä¹åæå°çç¿å°±æ æäºãæä»¥ï¼å¨ä»¥å¤ªåç³»ç»ä¸­ï¼å¿ç¶æ¯åæ§è¡æºè½åçº¦ï¼åæç¿ã\n\nåå¦æä¸ªç¿å·¥æ§è¡æºè½åçº¦æ¶èäºå¾å¤èµæºï¼ä½æ¯è®°è´¦æè¢«å«äººæ¿å°äºï¼ç¿å·¥ä¼å¾å°ä»ä¹è¡¥å¿ï¼\n\n> æ±½æ²¹è´¹æ¯æ²¡æçï¼åªç»è·å¾è®°è´¦æåå¸åºåçé£ä¸ªç¿å·¥è¿è¡è¡¥å¿ãä»¥å¤ªåä¸­æ²¡æä»»ä½è¡¥å¿ï¼ä¸ä»å¦æ­¤è¿è¦æåå¸åºåä¸­çäº¤ææ§è¡ä¸æ¬¡æ´æ°ä¸æ£µæ çåå®¹ç®åºæ ¹åå¸å¼ï¼åå«äººåå¸çè¿è¡æ¯è¾ãè¿ç§æåµä¸æç¿æ¢çç¿å·¥ç¹å«åäºã\n\nä¼ä¸ä¼æçç¿å·¥æ³ä¸å¼ï¼ä½ ä¸ç»ææ±½æ²¹è´¹ï¼é£æå°±ä¸éªè¯ä½ åå¸åºåçæ­£ç¡®æ§ï¼\n\n> è¿ç§æåµå¦æåçæç´æ¥çåææ¯å±å®³åºåé¾çå®å¨ãå¦æä»è·³è¿éªè¯è¿ç¨ï¼æ¬å°ä¸æ£µæ çåå®¹æ²¡ææ´æ°ï¼ç®åºçæ ¹åå¸å¼å°±ä¸å¯¹äºï¼ä»¥ååå¸çåºåå°±æ²¡äººä¼è®¤äºã\n\nåå¸å°åºåé¾ä¸çäº¤æï¼æ¯ä¸æ¯é½æ¯æåæ§è¡çï¼æºè½åçº¦åçéè¯¯ï¼è¦ä¸è¦ä¹åä¸å°åºåé¾ä¸å»ï¼\n\n> ä¸ä¸å®ï¼æ§è¡åçéè¯¯çäº¤æä¹è¦åå¸å°åºåé¾ä¸å»ï¼è¿æ ·æè½æåæ£é¤æ±½æ²¹è´¹ãå¦æäº¤æä¸è¢«åå¸å°åºåé¾ä¸ï¼æ¯æ æ³æ¶åæ±½æ²¹è´¹çã\n\næºè½åçº¦æ¯æå¤çº¿ç¨åï¼\n\n> å¤æ ¸å¤çå¨å¾å¸¸è§ï¼è®¡ç®æºå¯ä»¥æå¾å¤æ ¸ï¼é£ä¹æºè½åçº¦æ¯ä¸æ¯æå¤æ ¸å¹¶è¡å¤çå¢ãSolidity ä¸æ¯æå¤çº¿ç¨ï¼å ä¸ºä»¥å¤ªåæ¬è´¨ä¸ºä¸ä¸ªäº¤æé©±å¨çç¶ææºï¼ç»å®ä¸ä¸ªæºè½åçº¦ï¼é¢å¯¹åä¸ç»è¾å¥ï¼å¿é¡»è½¬ç§»å°ä¸ä¸ªç¡®å®çç¶æï¼å ä¸ºææçå¨èç¹é½è¦æ§è¡åä¸ç»æä½æ¥éªè¯ãä½å¯¹äºå¤çº¿ç¨æ¥è¯´ï¼åä¸ç»è¾å¥çè¾å¥é¡ºåºä¸åï¼æç»çç»æå¯è½ä¸ä¸è´ã æ­¤å¤ï¼å¶ä»å¯è½å¯¼è´æ§è¡ç»æä¸ç¡®å®çæä½ä¹ä¸æ¯æï¼ä¾å¦ï¼äº§çéæºæ°ãå æ­¤ï¼ä»¥å¤ªåä¸­çéæºæ°æ¯ä¼ªéæºæ°ï¼ä¸è½äº§ççæ­£æä¹çéæºæ°ã ä¹æ­£æ¯å ä¸ºå¶ä¸æ¯æå¤çº¿ç¨ï¼æä»¥æ æ³éè¿ç³»ç»è°ç¨è·å¾ç³»ç»ä¿¡æ¯ï¼å ä¸ºæ¯ä¸ªå¨èç¹ç¯å¢å¹¶éå®å¨ä¸æ ·ãå æ­¤åªè½éè¿åºå®çç»æè·åãä¸å¾åå«ä¸ºä¸ºå¶å¯ä»¥è·å¾çåºåé¾ä¿¡æ¯åè°ç¨ä¿¡æ¯ã\n\n\n\n\n\n\n# å°åç±»å\n\n\n\nå¨ä»¥å¤ªåä¸­ï¼è½¬è´¦æä»¥ä¸ä¸ç§æ¹æ³ã\n\n * transfer: å¨è½¬è´¦å¤±è´¥åä¼å¯¼è´è¿éæ§åæ»ï¼æåºå¼å¸¸ï¼\n * send: è½¬è´¦å¤±è´¥ä¼è¿åfalseï¼ä¸ä¼å¯¼è´è¿éæ§åæ»\n * call: æ¬ææ¯ç¨äºåå¨å½æ°è°ç¨ï¼ä½æ¯ä¹å¯ä»¥è¿è¡è½¬è´¦\n\n\n# code is law\n\nCode is lawï¼æºè½åçº¦è§åæ¯ä»£ç é»è¾å³å®çï¼èåå¸å°åºåé¾ä¸åå°±åä¹æ æ³ä¿®æ¹ãè¿æ ·çå¥½å¤æ¯ï¼æ²¡æäººå¯ä»¥ç¯¡æ¹è§åï¼è¿ä¸çåå¤æ¯ï¼è§åå¦æææ¼æ´ï¼ä¹æ æ³è¿è¡ä¿®æ¹åè¡¥æãæºè½åçº¦å¦æè®¾è®¡çä¸å¤å¥½ï¼å°±æå¯è½å°æ¶å°çä»¥å¤ªå¸æ°¸ä¹æ§éæ­»ï¼è°ä¹åä¸åºæ¥ã\n\n\n# éä»\n\n> éè¿æºè½åçº¦è¿è¡éä»ãä¾å¦æä¸ªå¢éå³å®ä¸èµ·å¼åæä¸ªæ°åå å¯è´§å¸ï¼å¼åä¸­è¿è¡âpre miningâï¼ç»å¼åèé¢çä¸é¨åå¸ãå°è¿äºé¢çå¸æå¥å°ä¸ä¸ªåçº¦è´¦æ·ï¼éä»ä¸å¹´ãä¸å¹´åï¼è¿äºå¸æå¯ä»¥åä¸äº¤æï¼ä»èä¾¿äºå¼åèå¯ä»¥éä¸­ç²¾åè¿è¡è¿ç§å å¯è´§å¸å¼åå·¥ä½ã ä½æ¯ä¸ä¸å¨åå¥æ¶åå¤åä¸ä¸ª0ï¼ä»3å¹´åæ30å¹´ï¼é£è¿äºå¸å°±ä¼è¢«éä»30å¹´ï¼æ²¡æä»»ä½åæ³ååºè¿äºå¸ãè¿æäºç±»ä¼¼äºãä¸å¯æ¤éçä¿¡æ(irrevocable trust)ãï¼æäºæé±äººä¼éç¨è¿ç§æ¹å¼æ¥è¾¾å°è´¢äº§ä¿æ¤ååç¨çç®çãå¦æå¨å¶å®è¿ç§ä¸å¯æ¤éçä¿¡ææ¶ï¼æ³å¾æ¡æ¬¾è®¾ç½®å­å¨æ¼æ´ï¼ä¹å¯è½ä¼å¯¼è´å­å¥çé±æ æ³ååºã å æ­¤ï¼å¨åå¸ä¸ä¸ªæºè½åçº¦ä¹åï¼éè¦è¿è¡å¤§éãä¸¥æ ¼çæµè¯ãå¯ä»¥å»ä¸é¨ç testnet ç½ç«ä¸ï¼éç¨èåçä»¥å¤ªå¸è¿è¡æµè¯ï¼ç¡®è®¤å®å¨æ²¡æé®é¢åååå¸ã\n\næ¯å¦å¯ä»¥å¨æºè½åçº¦ä¸­çä¸ä¸ªåé¨ï¼ç¨äºä¿®å¤bugï¼ä¾å¦ç»åçº¦åå»ºèè¶çº§ç¨æ·çæå ä¾å¦åæä¾å­ï¼è®°å½ownerï¼è®°å½ownerçå°åï¼å½åºç°è¿ç§é®é¢åå¶å¯ä»¥åæ¶è¿è¡ä¿®å¤ãè¿æ ·åï¼ä¼å­å¨ownerå·æ¬¾è·è·¯çé£é©ãè¿æ ·ååææ¯ææäººé½è¦ç¸ä¿¡è¿ä¸ªè¶çº§ç®¡çåï¼èè¿äºå»ä¸­å¿åççå¿µèéèé©°ï¼æ¯ç»å¤§å¤æ°åºåé¾ç¨æ·æä¸è½æ¥åçã",normalizedContent:"# åå¤§èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾å­¦ä¹  7\n\n * å­¦ä¹ å°åï¼https://www.bilibili.com/video/bv1vt411x7jf\n * åèæç« ï¼[åäº¬å¤§å­¦èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾ç¬è®°24ââethæçè¯æç¯](https://blog.nowcoder.net/n/a509ac93c75242438e71cb47fe59229cãåäº¬å¤§å­¦èè»èå¸ãåºåé¾ææ¯ä¸åºç¨ãå¬å¼è¯¾ç¬è®°25ââethæºè½åçº¦ç¯1\n\n\n# æçè¯æ\n\næ¯ç¹å¸çæç¿è¿ç¨ï¼æ¶èäºå·¨å¤§ççµåï¼å¹¶ä¸è½èéæ¶é´ä¸æ­å¢é¿ï¼å¹³åæ¯ä¸ä¸ªäº¤ææ¶è 1000 åº¦çµãåæ ·å°ä»¥å¤ªåå¹³åæ¯ä¸ä¸ªäº¤ææ¶è 67 åº¦çµã\n\n> ç¿å·¥ä¸ºä»ä¹è¦æç¿ï¼å ä¸ºè¦è·å¾åºåå¥å±ãä¸ºä»ä¹è¦ç»ç¿å·¥å¥å±ï¼å ä¸ºæ¿å±ç¿å·¥åä¸åºåé¾çç»´æ¤ã æç¿çæ¶çæ¯ç±ãæ¼é±ãï¼ä¹°ç¿æºï¼å³å®çï¼é£ä¹æ¢ç¶æ¯æ¼é±ï¼æä»¬ç´æ¥æé±æ¿åºæ¥æ¯ä¸æ¯è¡ä¸è¡ï¼ä¸å¶ä¹°ç¿æºæç¿ï¼æä»¬ä¸å¦æé±æå¥å°åºåé¾çç»´æ¤å½ä¸­ï¼ç±æå¥èµéçæ¯ä¾æ¥å³å®æç»çæ¶çãè¿å°±æ¯ proof of stake æçè¯æçææ³ã\n\nä¼ç¹ï¼\n\n * çå»äºæç¿çè¿ç¨ï¼åå°äºè½èï¼åå°äºæ¸©å®¤æ°ä½çææ¾ã\n * ç»´æ¤åºåé¾å®å¨çèµæºå½¢æé­ç¯ï¼è pow ä¸­ç»´æ¤å¶å®å¨çèµæºéè¦éè¿ç°å®ä¸­æµéçè´§å¸è´­ä¹°ç¿æºç­è®¾å¤ï¼è¿ä¹å°±å¯¼è´åªè¦æäººæ³è¦æ»å»ï¼åªéè¦å¤é¨èéè¶³å¤èµéè¾¾å° 51% ç®åå°±å¯ä»¥æ»å»æåãä¸»æµçè´§å¸ææ»å»è½åè¿æ¯è¾å¼ºï¼åååè¡çå°å¸ç§ï¼éå°è¿ç§æ»å»æ¯è´å½çãaltcoin infanticideã\n\næçè¯ææ¯åºäºæ¥æçå¸ï¼å¦ææ³åå¨æ»å»å¿é¡»è·åä¸åä»¥ä¸çå¸ï¼æ è®ºä½ å¨å¤é¨æå¤å°çèµéï¼é½ä¸ä¼å¯¹å å¯è´§å¸ç³»ç»é æç´æ¥çå½±åï¼ä½ åªè½è±é±ä¹°å°è¶³å¤å¤çå¸æå¯ä»¥ï¼åé¨é­ç¯ï¼ï¼å¦æä¸æ¦æäººè±é±å¤§éä¹°å¸ï¼ä¼å¯¼è´ä»·æ ¼å¤§æ¶¨ï¼è¿å¯¹å¼åèæ¯æå¥½å¤çå¯ä»¥å¤§èµä¸ç¬ã\n\n\n# ä¸¤è¾¹ä¸æ³¨\n\nåå¦ä¸ä¸ªåºåé¾åºç°äºååï¼å¦ææç¿ä¼æ²¿çæé¿åæ³é¾å»æï¼è½ç¶å¦ä¸æ¡ä¹æå¯è½æä¸ºæé¿åæ³é¾ï¼ä½æ¯ä½ åªä¼æ²¿çä¸æ¡å»æãä½æ¯å¦ææ¯æçè¯æï¼ä½ å¯ä»¥ä¸¤è¾¹é½ä¸æ³¨ã\n\n\n# ä»¥å¤ªåæçè¯æ\n\ncasper the friendly finality gadget(ffg)\n\ncasper åè®®å¼å¥ä¸ä¸ªæ¦å¿µ validator éªè¯èï¼æ³æä¸º validator å¿é¡»æå¥ä¸å®çä¿è¯éï¼ä¿è¯éä¼è¢«ç³»ç»éå®ãä»çèè´£æ¯æ¨å¨ç³»ç»è¾¾æå±è¯ï¼æç¥¨å³å®åªæ¡é¾æä¸ºæé¿åæ³é¾ï¼æç¥¨çæéä¸ºä¿è¯éçæ°ç®ãç¬¬ä¸è½®æç¥¨æ¯ prepare messageï¼ç¬¬äºè½®æç¥¨æ¯ commit messageï¼æ¯ä¸è½®æç¥¨é½è¦å¾å° 2/3 ä»¥ä¸çéªè¯èåæãå®éä¸ 100 ä¸ªåºåç epoch åæä¸¤ä¸ª 50 ä¸ªåºåï¼æ¯ 50 ä¸ªåºåç»æåå°±è¿è¡ä¸è½®æç¥¨ã\n\n> ç¿å·¥æç¿ä¼è·å¾åºåå¥å±ï¼èéªè¯èä¹ä¼å¾å°ç¸åºå¥å±ãå½ç¶æä¸ªéªè¯èè¡æ¿ä¸ä½ä¸ºï¼ä¸åä¸æç¥¨å¯¼è´ç³»ç»è¿è¿æ æ³è¾¾æå±è¯ï¼è¿æ¶æ£æé¨åä¿è¯éï¼å¦ææä¸ªéªè¯èä¹±ä½ä¸ºï¼ç»ä¸¤è¾¹é½è¿è¡æç¥¨ï¼è¢«åç°åæ²¡æ¶å¨é¨ä¿è¯éãæ²¡æ¶åçä¿è¯éç´æ¥éæ¯æã æ¯ä¸ªéªè¯èæä¸å®æ¶é´çä»»æï¼å¨ä»»æç»æåï¼è¿å¥ç­å¾æï¼å¨æ­¤æé´ç­å¾å¶ä»èç¹æ£ä¸¾æ­åæ¯å¦å­å¨ä¸è¯è¡ä¸ºï¼è¥éè¿ç­å¾æï¼åå¯ä»¥ååä¿è¯éå¹¶è·å¾ä¸å®å¥å±ã\n\néè¿éªè¯èæç¥¨è¾¾æç finalityï¼ææ²¡æå¯è½è¢«æ¨ç¿»ï¼\n\n> åå¦æä¸ªæ¶æçç»ç»è¦åçæ»å»ï¼åå¦ä»ä»¬æ¯ç¿å·¥çè¯ï¼æ²¡æéªè¯èä½ä¸ºåä¼åæ æ³æ¨ç¿» finalityãç¿å·¥æ è®ºç®åå¤ä¹å¼ºï¼æç»æç¥¨æé½ä¸å¨å¶æä¸­ã å¿é¡»å¨ç³»ç»ä¸­ï¼å­å¨å¤§ééªè¯èè¿è¡äºä¸¤è¾¹æç¥¨ï¼ä¹å°±æ¯è¯´ï¼è³å° 1/3ï¼è¯¥åè®®è§å®è¶è¿2/3æææï¼çéªè¯èä¸¤ä¾§é½æç¥¨ï¼æä¼å¯¼è´ç³»ç»è¢«ç¯¡æ¹ãèè¿ä¸æ¦è¢«åç°ï¼è¿ 1/3 éªè¯èçä¿è¯éå°ä¼è¢«æ²¡æ¶ã\n\nä»¥å¤ªåç³»ç»è®¾æ³ï¼éçæ¶é´æ¨ç§»ï¼æç¿å¥å±éæ¸åå°èæçè¯æå¥å±éæ¸å¢å¤ï¼ä»èå®ç°powå°posçè¿æ¸¡ï¼æç»å®ç°å®å¨æ¾å¼æç¿ã\n\næ¢ç¶æçè¯æè¿ä¹å¥½ï¼é£ä¹ä¸ºä»ä¹æ²¡ææ¨å¹¿å¼æ¥ï¼\n\n> æ¯ç¹å¸åä»¥å¤ªåçæºå¶é½ç»è¿äº bug bountyï¼å·¥ä½éè¯æå·²ç»å¾å°äºäºå®æ£éªï¼è¯¥æºå¶è¾ä¸ºæçã ä¾å¦ eos æå­å å¯è´§å¸ï¼å®ç¨çå°±æ¯æçè¯æçææ³ï¼ç¨çæ¯ dposï¼delegated proof of stake åè®®ï¼éè¿æç¥¨é 21 ä¸ªè¶çº§èç¹ï¼åç±è¶çº§èç¹äº§çåºåãåºäºæçè¯æçæºå¶ä»ç¶å¤äºæ¢ç´¢é¶æ®µã\n\næäººè®¤ä¸ºæç¿æ¶èççµå¹¶ä¸æ¯å¾å¤ï¼èä¸å¶å¯¹äºç¯å¢çå½±åæ¯æéçãå¾å¤äººå¯¹å·¥ä½éè¯æå¶å®æ¯åæåçæ¯æ ç¨åãæç¿æä¾äºå°çµè½è½¬æ¢ä¸ºé±çææ®µï¼èçµè½æ¬èº«é¾ä»¥ä¼ è¾åå­å¨ãæç¿ä¸ºå°å¤ä½ççµè½è½¬æ¢ä¸ºæä»·å¼çè´§å¸æä¾äºå¾å¥½çè§£å³ææ®µãä¹å°±æ¯è¯´æç¿æ¶èçµè½å¯ä»¥æææ¶èè¿å©äº§è½ï¼å¸¦å¨å½å°ç»æµåå±ã\n\n\n# æºè½åçº¦\n\næºè½åçº¦çæ¦å¿µææ©æ¯ç± nick szabo å¨ 1994 å¹´æåºçãæºè½åçº¦æ¯ä¸ä¸ªè®¡ç®æºå±é¢çäº¤æåè®®ï¼ç¨äºæ§è¡ä¸ç³»åçåçº¦é¡¹ãåçº¦æ¨å¨æ»¡è¶³ä¸äºå¸¸è§çåçº¦æ¡ä»¶ã\n\nå¾å¤åºåé¾ç½ç»ä½¿ç¨çæºè½åçº¦åè½ç±»ä¼¼äºèªå¨å®è´§æºæèè¯´æ¯ä¸ä¸ªçµå­ååãæºè½åçº¦ä¸èªå¨å®è´§æºç±»æ¯ï¼å¦æä½ åèªå¨å®è´§æºï¼ç±»æ¯åç±»è´¦æ¬ï¼è½¬å¥æ¯ç¹å¸æå¶ä»å å¯è´§å¸ï¼ä¸æ¦è¾å¥æ»¡è¶³æºè½åçº¦ä»£ç è¦æ±ï¼å®ä¼èªå¨æ§è¡åæ¹çº¦å®çä¹å¡ã\n\n\n# æºè½åçº¦çä¼ç¹\n\n * èªæ²» æºè½åçº¦ç¬ç«è¿è¡å¨éå¸ä¸çåå°çè®¡ç®æºä¸ï¼ä¸ä¾èµäºä»»ä½ä¸­å¿åçç³»ç»ã\n * å¯ä¿¡ æºè½åçº¦å¯ä¿¡çç¹ç¹æ¯åºäºåå¸å¼è´¦æ¬çï¼è¿äºè´¦æ¬å¯ä»¥æ§è¡å¹¶éªè¯åçº¦ã\n * é²æ£æ§ æºè½åçº¦å­å¨äºåå¸å¼çç½ç»ä¸­ï¼åç¹ç¼ºå¤±æç ´åå¹¶ä¸ä¼æå½±åã\n * éåº¦ æºè½åçº¦çå»ä¸­å¿åçå¤çè¿ç¨å¯ä»¥å¨ç­æ¶é´åå®æå¯¹ä¸å¡é»è¾çå¤çã\n * ç»æµ æºè½åçº¦æ¶é¤äºå¯¹å¾å¸ãè§è¯äººä»¥åå¶ä»ä¸­é´æºææææçåºå¤§çä¸­ä»é¾çéæ±ã\n\n\n# æºè½åçº¦çåºç¨\n\n> ç¥è¯äº§æä¿æ¤ï¼æºè½åçº¦å¯ä»¥å¸®å©åä½èä¿æ¤ä»ä»¬çç¥è¯äº§æï¼ç±äºå¯¹ nft ç­æ°å­ååçæå¿§ï¼è¿ä¸ç¹åå¾è¶æ¥è¶éè¦ãåä½èå¯ä»¥ä½¿ç¨æºè½åçº¦ï¼å¨äº¤æè¿ç¨ä¸­è½¬ç§»æä¿çä»ä»¬å¯¹æä¸åå®¹çæææãä¾å¦ï¼nft åé èå¯è½å¸æä¿çå¯¹å¶èºæ¯ä½åçæææï¼åæ¶å°ä»£å¸çæææè½¬è®©ç»ä¹°æ¹ãå¨ nft çæºè½åçº¦ä¸­ï¼ä»ä»¬å¯ä»¥æ¦è¿°æç¡®çæææåæ¯ä»æ¡æ¬¾ï¼ä»¥ä¿æ¤ä»ä»¬çæå©ã èºæ¯å®¶ä¹å¯ä»¥ä½¿ç¨æºè½åçº¦è·å¾çç¨ãä»»ä½æ¶åï¼åªè¦ä»ä»¬çèºæ¯ä½åç nft æå¯æ¬å®åºï¼æºè½åçº¦å°±å¯ä»¥è§¦ååéååèºæ¯å®¶çèªå¨ä»æ¬¾ã\n\n\n# æºè½åçº¦çè°ç¨\n\nä»¥å¤ªåä¸­æºè½åçº¦ç¼åä»£ç ä¸º solidityï¼å¶è¯­æ³ä¸ javascript å¾æ¥è¿ã è°ç¨æºè½åçº¦å¶å®åè½¬è´¦ç±»ä¼¼ï¼æ¯å¦ a åèµ·ä¸ä¸ªäº¤æè½¬è´¦ç» bï¼å¦æ b æ¯ä¸ä¸ªæ®éçè´¦æ·è¿å°±æ¯ä¸æ¬¡æ®éè½¬è´¦ï¼ä½æ¯ b å¦ææ¯ä¸ä¸ªåçº¦è´¦æ·ï¼è¿å°±æ¯åèµ·äºå¯¹ b åçº¦çè°ç¨ãå¤é¨è´¦æ·å¯ä»¥è°ç¨åçº¦è´¦æ·ï¼åçº¦è´¦æ·ä¹å¯ä»¥è°ç¨åçº¦è´¦æ·\n\n\n# æºè½åçº¦çåå»ºä¸è¿è¡\n\nevm è®¾è®¡ææ³ç±»ä¼¼äº java ä¸­ç jvm ï¼ä¾¿äºè·¨å¹³å°å¢å¼ºå¯ç§»æ¤æ§ãevm ä¸­å¯»åç©ºé´ 256ä½ï¼èç®åä¸ªäººæºä¸»æµä½ 32ä½å 64ä½ï¼ä¸ä¹å­å¨è¾å¤§å·®è·ã\n\n\n\n\n# æ±½æ²¹è´¹\n\næ¯ç¹å¸ç¸æ¯äºä»¥å¤ªåå¾ç®åï¼èæ¬è¯­è¨é½ä¸æ¯æå¾ªç¯ãèä»¥å¤ªåæä¾å¾çµå®å¤çå¹³å°ï¼ä»èä½¿å¾ä»¥å¤ªåç¸å¯¹äºæ¯ç¹å¸å¯ä»¥å®ç°å¾å¤åè½ï¼ä½è¿ä¹å¯¼è´ä¸äºé®é¢ï¼ä¾å¦å½ä¸ä¸ªå¨èç¹æ¶å°ä¸ä¸ªå¯¹æºè½åçº¦è°ç¨æä¹ç¥æå¶æ¯å¦ä¼å¯¼è´æ­»å¾ªç¯ã\n\näºå®ä¸æ æ³é¢ç¥å¶æ¯å¦ä¼å¯¼è´æ­»å¾ªç¯ï¼å®éä¸è¯¥é®é¢æ¯ä¸ä¸ªåæºé®é¢ï¼èåæºé®é¢ä¸å¯è§£ãå æ­¤ï¼ä»¥å¤ªåå¼å¥æ±½æ²¹è´¹æºå¶å°è¯¥é®é¢æç»äºåèµ·äº¤æçè´¦æ·ãä»¥å¤ªåè§å®æ§è¡åçº¦ä¸­æä»¤éè¦æ¶åæ±½æ²¹è´¹ï¼å¹¶ä¸ç±åèµ·äº¤æçäººè¿è¡æ¯ä»ã\n\n\n\n * price: åä½æ±½æ²¹ä»·æ ¼\n * gaslimit: æ¿ææ¯ä»æå¤§æ±½æ²¹é\n * recipient: æ¶æ¬¾äººå°å\n * amount: è½¬è´¦éé¢\n * payload: data å\n\nå½ä¸ä¸ªå¨èç¹æ¶å°ä¸ä¸ªå¯¹æºè½åçº¦çè°ç¨ï¼åæç§æå¤§æ±½æ²¹è´¹æ¶åä»å¶è´¦æ·ä¸æ¬¡æ§æ£é¤ï¼åæ ¹æ®å®éæ§è¡æåµå¤éå°è¡¥(æ±½æ²¹è´¹ä¸å¤ä¼å¼ååæ»ï¼èéç®åçè¡¥é½)ãä¸è¬è®¡ç®éè¾å¤§ãå­å¨éè¾å¤§çå¤ææä»¤çæ±½æ²¹è´¹æ¯è¾è´µã\n\n> ä»¥å¤ªåä¸­å­å¨ gaslimitï¼éè¿æ¶åæ±½æ²¹è´¹ä¿éç³»ç»ä¸­ä¸ä¼å­å¨å¯¹èµæºæ¶èç¹å«å¤§çè°ç¨ãä½ä¸æ¯ç¹å¸ä¸åï¼æ¯ç¹å¸ç´æ¥éè¿éå¶åºåå¤§å° 1mb ä¿éå¯¹ç½ç»èµæºååä¸ä¼è¿å¤§ï¼è¿ 1mb å¤§å°æ¯åºå®çæ æ³ä¿®æ¹ãèä»¥å¤ªåä¸­æ¯ä¸ªç¿å·¥é½å¯ä»¥ä»¥åä¸ä¸ªåºåä¸­ gaslimt ä¸ºåºæ°ï¼è¿è¡ä¸è°æä¸è° 1/1024ï¼ä»èéè¿ç»å¤§å¤æ°åºåä¸æ­ä¸ä¸è°æ´ï¼ä¿è¯å¾å°ä¸ä¸ªè¾ä¸ºçæ³åç gaslimt å¼ãæç»æ´ä¸ªç³»ç»ç gaslimt å°±æ¯ææç¿å·¥å¸æçå¹³åå¼ã\n\n> å¨æ¯ç¹å¸ç³»ç»ä¸­ï¼äº¤ææ¯æ¯è¾ç®åçï¼ä»ä»æ¯è½¬è´¦æä½ï¼ä¹å°±æ¯è¯´å¯ä»¥éè¿äº¤æçå­èæ°è¡¡éåºäº¤ææéè¦æ¶èçèµæºå¤å°ãä½ä»¥å¤ªåä¸­å¼å¥äºæºè½åçº¦ï¼èæºè½åçº¦é»è¾å¾å¤æï¼å¶å­èæ°ä¸æ¶èèµæºæ°å¹¶æ å³èãå­å¨æäºäº¤æï¼ä»å­èæ°æ¥çå¾å°ï¼ä½å¶å®éæ¶èèµæºå¾å¤§(ä¾å¦è°ç¨å¶ä»åçº¦ç­)ï¼å æ­¤è¦æ ¹æ®äº¤æçå·ä½æä½æ¶è´¹ï¼ææå¼å¥äºæ±½æ²¹è´¹è¿ä¸æ¦å¿µã å¨ block header ä¸­åå«äº gaslimitï¼å¶å¹¶éå°ææäº¤æçæ¶èæ±½æ²¹è´¹ç¸å ï¼èæ¯è¯¥åºåä¸­ææäº¤æè½å¤æ¶èçèµæºçä¸éã\n\næ±½æ²¹è´¹æ¯æä¹æ£é¤çï¼\n\n> é¦åï¼ä¹åå¨ä»¥å¤ªåæ°æ®ç»æä¸­ä»ç»äºä»¥å¤ªåä¸­ä¸æ£µæ ââç¶ææ ãäº¤ææ ãæ¶æ®æ ãè¿ä¸æ£µæ é½ä½äºå¨èç¹ä¸­ï¼æ¯å¨èç¹å¨æ¬å°ç»´æ¤çæ°æ®ç»æï¼è®°å½äºæ¯ä¸ªè´¦æ·çç¶æç­æ°æ®ï¼æä»¥è¯¥èç¹æ¶å°è°ç¨æ¶ï¼æ¯å¨æ¬å°å¯¹è¯¥è´¦æ·çä½é¢åæå³å¯ãæä»¥å¤ä¸ªå¨èç¹æ¯äººæ£ä¸æ¬¡ï¼ä»ä»æ¯æ¯ä¸ªå¨èç¹åèªå¨æ¬å°æ£ä¸æ¬¡ã ä¹å°±æ¯è¯´ï¼æºè½åçº¦å¨æ§è¡è¿ç¨ä¸­ï¼ä¿®æ¹çé½æ¯æ¬å°çæ°æ®ç»æï¼åªæå¨è¯¥æºè½åçº¦è¢«åå¸å°åºåé¾ä¸ï¼ææèç¹æéè¦åæ­¥ç¶æï¼åèªå¨æ¬å°æ§è¡è¯¥æºè½åçº¦ã\n\n\n# éè¯¯å¤ç\n\nä»¥å¤ªåä¸­äº¤æå·æåå­æ§ï¼è¦ä¹å¨æ§è¡ï¼è¦ä¹å¨ä¸æ§è¡ï¼ä¸ä¼åªæ§è¡ä¸é¨å(åå«æ®éè½¬è´¦äº¤æåæºè½åçº¦)ãå¨æ§è¡è¿ç¨ä¸­äº§çéè¯¯å¯¼è´åæ»ï¼å·²ç»æ¶èæçæ±½æ²¹è´¹æ¯ä¸ä¼éåçãä»èææé²æ­¢äºæ¶æèç¹å¯¹å¨èç¹è¿è¡æ¶æè°ç¨ã\n\n\n\n\n# åµå¥è°ç¨\n\n\n\n\n# æç¿ä¸æºè½åçº¦æ§è¡\n\nåè®¾å¨èç¹è¦æåä¸äºäº¤æå°åºåä¸­ï¼å¶ä¸­å­å¨æäºäº¤ææ¯å¯¹æºè½åçº¦çè°ç¨ãå¨èç¹åºè¯¥åæ§è¡æºè½åçº¦åæç¿ï¼è¿æ¯åæç¿è·å¾è®°è´¦æåæ§è¡æºè½åçº¦ï¼\n\nå¦æåæç¿åæ§è¡æºè½åçº¦ä¼å¦ä½ï¼\n\n> æºè½åçº¦ä¼å¯¼è´æ°æ®ç»æåçæ¹åï¼ä»èä¿®æ¹æåºåä¸­çåå®¹ï¼é£ä¹ä¹åæç¿æ¶æå°ç nonce æ¯ä¸éç¨äºæ­¤æ¶ä¿®æ¹è¿åç blockçï¼ä¹å°±æ¯è¯´æ§è¡æºè½åçº¦åçåºåå¹¶éä¹åçåºåï¼ä¹åç nonce ä¸è½éç¨äºå½ååºåï¼ä»èæ æ³è¢«å å¥å°åºåé¾ä¸­ãæç¿å¯¼è´ä¸æ£µæ æ°æ®ç»ææ¹åï¼ä¹åæå°çç¿å°±æ æäºãæä»¥ï¼å¨ä»¥å¤ªåç³»ç»ä¸­ï¼å¿ç¶æ¯åæ§è¡æºè½åçº¦ï¼åæç¿ã\n\nåå¦æä¸ªç¿å·¥æ§è¡æºè½åçº¦æ¶èäºå¾å¤èµæºï¼ä½æ¯è®°è´¦æè¢«å«äººæ¿å°äºï¼ç¿å·¥ä¼å¾å°ä»ä¹è¡¥å¿ï¼\n\n> æ±½æ²¹è´¹æ¯æ²¡æçï¼åªç»è·å¾è®°è´¦æåå¸åºåçé£ä¸ªç¿å·¥è¿è¡è¡¥å¿ãä»¥å¤ªåä¸­æ²¡æä»»ä½è¡¥å¿ï¼ä¸ä»å¦æ­¤è¿è¦æåå¸åºåä¸­çäº¤ææ§è¡ä¸æ¬¡æ´æ°ä¸æ£µæ çåå®¹ç®åºæ ¹åå¸å¼ï¼åå«äººåå¸çè¿è¡æ¯è¾ãè¿ç§æåµä¸æç¿æ¢çç¿å·¥ç¹å«åäºã\n\nä¼ä¸ä¼æçç¿å·¥æ³ä¸å¼ï¼ä½ ä¸ç»ææ±½æ²¹è´¹ï¼é£æå°±ä¸éªè¯ä½ åå¸åºåçæ­£ç¡®æ§ï¼\n\n> è¿ç§æåµå¦æåçæç´æ¥çåææ¯å±å®³åºåé¾çå®å¨ãå¦æä»è·³è¿éªè¯è¿ç¨ï¼æ¬å°ä¸æ£µæ çåå®¹æ²¡ææ´æ°ï¼ç®åºçæ ¹åå¸å¼å°±ä¸å¯¹äºï¼ä»¥ååå¸çåºåå°±æ²¡äººä¼è®¤äºã\n\nåå¸å°åºåé¾ä¸çäº¤æï¼æ¯ä¸æ¯é½æ¯æåæ§è¡çï¼æºè½åçº¦åçéè¯¯ï¼è¦ä¸è¦ä¹åä¸å°åºåé¾ä¸å»ï¼\n\n> ä¸ä¸å®ï¼æ§è¡åçéè¯¯çäº¤æä¹è¦åå¸å°åºåé¾ä¸å»ï¼è¿æ ·æè½æåæ£é¤æ±½æ²¹è´¹ãå¦æäº¤æä¸è¢«åå¸å°åºåé¾ä¸ï¼æ¯æ æ³æ¶åæ±½æ²¹è´¹çã\n\næºè½åçº¦æ¯æå¤çº¿ç¨åï¼\n\n> å¤æ ¸å¤çå¨å¾å¸¸è§ï¼è®¡ç®æºå¯ä»¥æå¾å¤æ ¸ï¼é£ä¹æºè½åçº¦æ¯ä¸æ¯æå¤æ ¸å¹¶è¡å¤çå¢ãsolidity ä¸æ¯æå¤çº¿ç¨ï¼å ä¸ºä»¥å¤ªåæ¬è´¨ä¸ºä¸ä¸ªäº¤æé©±å¨çç¶ææºï¼ç»å®ä¸ä¸ªæºè½åçº¦ï¼é¢å¯¹åä¸ç»è¾å¥ï¼å¿é¡»è½¬ç§»å°ä¸ä¸ªç¡®å®çç¶æï¼å ä¸ºææçå¨èç¹é½è¦æ§è¡åä¸ç»æä½æ¥éªè¯ãä½å¯¹äºå¤çº¿ç¨æ¥è¯´ï¼åä¸ç»è¾å¥çè¾å¥é¡ºåºä¸åï¼æç»çç»æå¯è½ä¸ä¸è´ã æ­¤å¤ï¼å¶ä»å¯è½å¯¼è´æ§è¡ç»æä¸ç¡®å®çæä½ä¹ä¸æ¯æï¼ä¾å¦ï¼äº§çéæºæ°ãå æ­¤ï¼ä»¥å¤ªåä¸­çéæºæ°æ¯ä¼ªéæºæ°ï¼ä¸è½äº§ççæ­£æä¹çéæºæ°ã ä¹æ­£æ¯å ä¸ºå¶ä¸æ¯æå¤çº¿ç¨ï¼æä»¥æ æ³éè¿ç³»ç»è°ç¨è·å¾ç³»ç»ä¿¡æ¯ï¼å ä¸ºæ¯ä¸ªå¨èç¹ç¯å¢å¹¶éå®å¨ä¸æ ·ãå æ­¤åªè½éè¿åºå®çç»æè·åãä¸å¾åå«ä¸ºä¸ºå¶å¯ä»¥è·å¾çåºåé¾ä¿¡æ¯åè°ç¨ä¿¡æ¯ã\n\n\n\n\n\n\n# å°åç±»å\n\n\n\nå¨ä»¥å¤ªåä¸­ï¼è½¬è´¦æä»¥ä¸ä¸ç§æ¹æ³ã\n\n * transfer: å¨è½¬è´¦å¤±è´¥åä¼å¯¼è´è¿éæ§åæ»ï¼æåºå¼å¸¸ï¼\n * send: è½¬è´¦å¤±è´¥ä¼è¿åfalseï¼ä¸ä¼å¯¼è´è¿éæ§åæ»\n * call: æ¬ææ¯ç¨äºåå¨å½æ°è°ç¨ï¼ä½æ¯ä¹å¯ä»¥è¿è¡è½¬è´¦\n\n\n# code is law\n\ncode is lawï¼æºè½åçº¦è§åæ¯ä»£ç é»è¾å³å®çï¼èåå¸å°åºåé¾ä¸åå°±åä¹æ æ³ä¿®æ¹ãè¿æ ·çå¥½å¤æ¯ï¼æ²¡æäººå¯ä»¥ç¯¡æ¹è§åï¼è¿ä¸çåå¤æ¯ï¼è§åå¦æææ¼æ´ï¼ä¹æ æ³è¿è¡ä¿®æ¹åè¡¥æãæºè½åçº¦å¦æè®¾è®¡çä¸å¤å¥½ï¼å°±æå¯è½å°æ¶å°çä»¥å¤ªå¸æ°¸ä¹æ§éæ­»ï¼è°ä¹åä¸åºæ¥ã\n\n\n# éä»\n\n> éè¿æºè½åçº¦è¿è¡éä»ãä¾å¦æä¸ªå¢éå³å®ä¸èµ·å¼åæä¸ªæ°åå å¯è´§å¸ï¼å¼åä¸­è¿è¡âpre miningâï¼ç»å¼åèé¢çä¸é¨åå¸ãå°è¿äºé¢çå¸æå¥å°ä¸ä¸ªåçº¦è´¦æ·ï¼éä»ä¸å¹´ãä¸å¹´åï¼è¿äºå¸æå¯ä»¥åä¸äº¤æï¼ä»èä¾¿äºå¼åèå¯ä»¥éä¸­ç²¾åè¿è¡è¿ç§å å¯è´§å¸å¼åå·¥ä½ã ä½æ¯ä¸ä¸å¨åå¥æ¶åå¤åä¸ä¸ª0ï¼ä»3å¹´åæ30å¹´ï¼é£è¿äºå¸å°±ä¼è¢«éä»30å¹´ï¼æ²¡æä»»ä½åæ³ååºè¿äºå¸ãè¿æäºç±»ä¼¼äºãä¸å¯æ¤éçä¿¡æ(irrevocable trust)ãï¼æäºæé±äººä¼éç¨è¿ç§æ¹å¼æ¥è¾¾å°è´¢äº§ä¿æ¤ååç¨çç®çãå¦æå¨å¶å®è¿ç§ä¸å¯æ¤éçä¿¡ææ¶ï¼æ³å¾æ¡æ¬¾è®¾ç½®å­å¨æ¼æ´ï¼ä¹å¯è½ä¼å¯¼è´å­å¥çé±æ æ³ååºã å æ­¤ï¼å¨åå¸ä¸ä¸ªæºè½åçº¦ä¹åï¼éè¦è¿è¡å¤§éãä¸¥æ ¼çæµè¯ãå¯ä»¥å»ä¸é¨ç testnet ç½ç«ä¸ï¼éç¨èåçä»¥å¤ªå¸è¿è¡æµè¯ï¼ç¡®è®¤å®å¨æ²¡æé®é¢åååå¸ã\n\næ¯å¦å¯ä»¥å¨æºè½åçº¦ä¸­çä¸ä¸ªåé¨ï¼ç¨äºä¿®å¤bugï¼ä¾å¦ç»åçº¦åå»ºèè¶çº§ç¨æ·çæå ä¾å¦åæä¾å­ï¼è®°å½ownerï¼è®°å½ownerçå°åï¼å½åºç°è¿ç§é®é¢åå¶å¯ä»¥åæ¶è¿è¡ä¿®å¤ãè¿æ ·åï¼ä¼å­å¨ownerå·æ¬¾è·è·¯çé£é©ãè¿æ ·ååææ¯ææäººé½è¦ç¸ä¿¡è¿ä¸ªè¶çº§ç®¡çåï¼èè¿äºå»ä¸­å¿åççå¿µèéèé©°ï¼æ¯ç»å¤§å¤æ°åºåé¾ç¨æ·æä¸è½æ¥åçã",charsets:{cjk:!0}},{title:"è·¨åç¸å³",frontmatter:{},regularPath:"/chrome/cross.html",relativePath:"chrome/cross.md",key:"v-9a739656",path:"/chrome/cross.html",headers:[{level:2,title:"Access-Control-Allow-Origin",slug:"access-control-allow-origin",normalizedTitle:"access-control-allow-origin",charIndex:66},{level:2,title:"proxy ä»£ç",slug:"proxy-ä»£ç",normalizedTitle:"proxy ä»£ç",charIndex:720},{level:2,title:"Allow CORS æä»¶",slug:"allow-cors-æä»¶",normalizedTitle:"allow cors æä»¶",charIndex:2028},{level:2,title:"æ¥å£çå½¢å¼",slug:"æ¥å£çå½¢å¼",normalizedTitle:"æ¥å£çå½¢å¼",charIndex:2235},{level:2,title:"é¢æ£è¯·æ±",slug:"é¢æ£è¯·æ±",normalizedTitle:"é¢æ£è¯·æ±",charIndex:153},{level:2,title:"é¢æ£è¯·æ±ä¸éå®å",slug:"é¢æ£è¯·æ±ä¸éå®å",normalizedTitle:"é¢æ£è¯·æ±ä¸éå®å",charIndex:2673},{level:2,title:"å¸¸è§è·¨åéè¯¯",slug:"å¸¸è§è·¨åéè¯¯",normalizedTitle:"å¸¸è§è·¨åéè¯¯",charIndex:3864},{level:2,title:"axios è¯·æ±çä¸ç§éè¯¯",slug:"axios-è¯·æ±çä¸ç§éè¯¯",normalizedTitle:"axios è¯·æ±çä¸ç§éè¯¯",charIndex:4169}],lastUpdated:"4/26/2023, 3:48:58 PM",lastUpdatedTimestamp:1682495338e3,headersStr:"Access-Control-Allow-Origin proxy ä»£ç Allow CORS æä»¶ æ¥å£çå½¢å¼ é¢æ£è¯·æ± é¢æ£è¯·æ±ä¸éå®å å¸¸è§è·¨åéè¯¯ axios è¯·æ±çä¸ç§éè¯¯",content:"# è·¨åç¸å³\n\næ¬æä¸æ¯å«è¡æç¥è¯ç¹ï¼ä¸ä¼ä»ç» jsonpãiframe ç­è·¨åæ¹å¼ï¼åªä»ç»å¨å¼åä¸­æå¸¸è§çå ç§è·¨åæ¹å¼ã\n\n\n# Access-Control-Allow-Origin\n\næç®åçæ¹å¼ï¼æå¡ç«¯éç½® Access-Control-Allow-Origin: *ï¼åæ­¤å¤ä¹ ä¸ä¸å ç§ååºå¤´ã\n\né¢æ£è¯·æ± (opens new window)ç¸å³ååºå¤´\n\n * Access-Control-Allow-Originï¼ååºå¤´æå®äºè¯¥ååºçèµæºæ¯å¦è¢«åè®¸ä¸ç»å®çorigin (opens new window)å±äº«ã\n * Access-Control-Allow-Methods: ååºé¦é¨ Access-Control-Allow-Methods å¨å¯¹ preflight request (opens new window).ï¼é¢æ£è¯·æ±ï¼çåºç­ä¸­æç¡®äºå®¢æ·ç«¯æè¦è®¿é®çèµæºåè®¸ä½¿ç¨çæ¹æ³ææ¹æ³åè¡¨ã\n * Access-Control-Allow-Headers: ååºé¦é¨ Access-Control-Allow-Headers ç¨äº preflight request (opens new window)ï¼é¢æ£è¯·æ±ï¼ä¸­ï¼ååºäºå°ä¼å¨æ­£å¼è¯·æ±ç Access-Control-Request-Headers (opens new window)å­æ®µä¸­åºç°çé¦é¨ä¿¡æ¯ã\n * Access-Control-Allow-Credentials: å½è¯·æ±è¦æ±æºå¸¦è¯ä¹¦ä¿¡æ¯ï¼ä¾å¦cookie,ææä¿¡æ¯ç­ï¼éªè¯ï¼æå¡å¨ç«¯æ¯å¦åè®¸æºå¸¦\n * Access-Control-Max-Age: æ¬æ¬¡é¢æ£è¯·æ±çæææï¼åä½ä¸ºç§\n\n\n# proxy ä»£ç\n\nç±äº webpack-dev-server æ¯ä¸ä¸ªæ¬å°å¼åæå¡å¨ï¼æä»¥æä»¬çåºç¨å¨å¼åé¶æ®µæ¯ç¬ç«è¿è¡å¨ localhost çä¸ä¸ªç«¯å£ä¸ï¼èåç«¯æå¡åæ¯è¿è¡å¨å¦å¤ä¸ä¸ªå°åä¸ãä½æ¯æç»ä¸çº¿è¿åï¼æä»¬çåºç¨ä¸è¬åä¼ååç«¯æå¡é¨ç½²å°åæºå°åä¸ã\n\né£è¿æ ·å°±ä¼åºç°ä¸ä¸ªéå¸¸å¸¸è§çé®é¢ï¼å¨å®éçäº§ç¯å¢ä¸­è½å¤ç´æ¥è®¿é®ç APIï¼åå°æä»¬çå¼åç¯å¢åï¼åæ¬¡è®¿é®è¿äº API å°±ä¼äº§çè·¨åè¯·æ±é®é¢ã\n\nå¯è½æäººä¼è¯´ï¼æä»¬å¯ä»¥ç¨è·¨åèµæºå±äº«ï¼CORSï¼è§£å³è¿ä¸ªé®é¢ãç¡®å®å¦æ­¤ï¼å¦ææä»¬è¯·æ±çåç«¯ API æ¯æ CORSï¼é£è¿ä¸ªé®é¢å°±ä¸æç«äºãä½æ¯å¹¶ä¸æ¯æ¯ç§æåµä¸æå¡ç«¯ç API é½æ¯æ CORSãå¦æååç«¯åºç¨æ¯åæºé¨ç½²ï¼ä¹å°±æ¯åè®® / åå / ç«¯å£ä¸è´ï¼é£è¿ç§æåµä¸ï¼æ ¹æ¬æ²¡å¿è¦å¼å¯ CORSï¼æä»¥è·¨åè¯·æ±çé®é¢ä»ç¶æ¯ä¸å¯é¿åçã\n\né£è§£å³è¿ç§å¼åé¶æ®µè·¨åè¯·æ±é®é¢æå¥½çåæ³ï¼å°±æ¯å¨å¼åæå¡å¨ä¸­éç½®ä¸ä¸ªåç«¯ API çä»£çæå¡ï¼ä¹å°±æ¯æåç«¯æ¥å£æå¡ä»£çå°æ¬å°çå¼åæå¡å°åã\n\nwebpack-dev-server å°±æ¯æç´æ¥éè¿éç½®çæ¹å¼ï¼æ·»å ä»£çæå¡ãæ¥ä¸æ¥ï¼æä»¬æ¥çä¸ä¸å®çå·ä½ç¨æ³ã\n\næ¯å¦æä»¬åå® GitHub ç API å°±æ¯æä»¬åºç¨çåç«¯æå¡ï¼é£æä»¬çç®æ å°±æ¯å° GitHub API ä»£çå°æ¬å°å¼åæå¡å¨ä¸­ï¼æä»¬å¯ä»¥åå¨æµè§å¨ä¸­å°è¯è®¿é®å¶ä¸­çä¸ä¸ªæ¥å£ï¼ https://api.github.com/users\n\ndevServer: {\n    contentBase: './public',\n    proxy: {\n      '/api': {\n        // http://localhost:8080/api/users -> https://api.github.com/api/users\n        target: 'https://api.github.com',\n        // http://localhost:8080/api/users -> https://api.github.com/users\n        pathRewrite: {\n          '^/api': ''\n        },\n        // ä¸è½ä½¿ç¨ localhost:8080 ä½ä¸ºè¯·æ± GitHub çä¸»æºå\n        changeOrigin: true\n      }\n    }\n  },\n\n\n\n\né£æ­¤æ¶æä»¬è¯·æ± http://localhost:8080/api/users ï¼å°±ç¸å½äºè¯·æ±äº https://api.github.com/users\n\n// æ­¤æ¶ååè·¨åè¯·æ±ï¼å°±å¯æ­£å¸¸è®¿é®\n// è½ç¶ GitHub æ¯æ CORSï¼ä½æ¯ä¸æ¯æ¯ä¸ªæå¡ç«¯é½åºè¯¥æ¯æã\n// fetch('https://api.github.com/users')\nfetch('/api/users')\n  .then(res => res.json())\n// å®éè¯·æ±å°http://localhost:8080/api/users\n\n\n\n# Allow CORS æä»¶\n\nchromeç½ä¸åºç¨ååºå°å\n\nå¼åæ¶åªéå¼å¯æä»¶å³å¯ï¼åçä¹æ¯æ·»å ååºå¤´ Access-Control-Allow-Origin\n\n> Easily add (Access-Control-Allow-Origin: *) rule to the response header.\n\nä½æ¯æ³¨æè¿ç§æ¹å¼ä¸ä¸å®å®å¨éç¨ï¼ä¸ä¸ç¨çæ¶åæ³¨æå³æï¼å ä¸ºè®¿é®æ­£å¸¸ç½ç«çæ¶åå¯è½ä¼æ¥éã\n\n\n# æ¥å£çå½¢å¼\n\né¡¹ç®ä¸­çæ¥å£ä¸è¬åä¸ºä¸¤ç§åæ³ï¼ç¬¬ä¸ç§æ¯åºåæµè¯ç¯å¢åçº¿ä¸ç¯å¢ï¼\n\næµè¯ç¯å¢å°åï¼api.github-test.com/api/users\næ­£å¼ç¯å¢å°åï¼api.github.com/api/users\n\n\nå¦ä¸ç§æ¯ä½¿ç¨ç¸å¯¹è·¯å¾çæ¹å¼ï¼åªå /api/usersï¼ä¸ç¨åºåæµè¯åçº¿ä¸ç¯å¢ï¼è¿ç§æ¹å¼ä¸è¬ä½¿ç¨ä¸è¿°ç devserver å¼åçï¼æµè¯ç¯å¢å¯ä»¥ç´æ¥è·å¨å¼åæºä¸ï¼çº¿ä¸é¨ç½²åç±äºç¸å¯¹è·¯å¾è¯·æ±èµ·æ¥ä¹æ²¡é®é¢ã\n\n\n# é¢æ£è¯·æ±\n\nåªæè·¨åçæ¶åæå¯è½ä¼åéé¢æ£è¯·æ±ï¼æ­¤æ¶è¿éè¦å¤æ­è¯·æ±æ¯å¦ä¸ºç®åè¯·æ±\n\nç®åè¯·æ±ï¼åæ¶æ»¡è¶³ä»¥ä¸ä¸¤å¤§æ¡ä»¶ï¼\n\n * æ¡ä»¶1ï¼ä½¿ç¨ä¸åæ¹æ³ä¹ä¸ï¼GETï¼HEADï¼POST\n * æ¡ä»¶2ï¼Content-Type çå¼ä»éäºä¸åä¸èä¹ä¸ï¼\n * text/plain\n * multipart/form-data\n * application/x-www-form-urlencoded\n\né¤äºä»¥ä¸æ¡ä»¶ä¹å¤ï¼åä¼åèµ·é¢æ£è¯·æ±ã\n\n\n# é¢æ£è¯·æ±ä¸éå®å\n\nhttps://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS\n\nå¹¶ä¸æ¯æææµè§å¨é½æ¯æé¢æ£è¯·æ±çéå®åãå¦æä¸ä¸ªé¢æ£è¯·æ±åçäºéå®åï¼ä¸é¨åæµè§å¨å°æ¥åéè¯¯ï¼chrome æé®é¢ï¼safari æ²¡é®é¢ï¼ï¼\n\n> Access to XMLHttpRequest at 'http://xxx' (redirected from 'http://yyy') from origin 'http://zzz' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: Redirect is not allowed for a preflight request.\n\nCORS æåè¦æ±æµè§å¨å·æè¯¥è¡ä¸ºï¼ä¸è¿å¨åç»­çä¿®è®¢ä¸­åºå¼äºè¿ä¸è¦æ±ãä½å¹¶éæææµè§å¨é½å®ç°äºè¿ä¸åæ´ï¼èä»ç¶è¡¨ç°åºæåè¦æ±çè¡ä¸ºã\n\nå¨æµè§å¨çå®ç°è·ä¸è§èä¹åï¼æä¸¤ç§æ¹å¼è§é¿ä¸è¿°æ¥éè¡ä¸ºï¼\n\n * å¨æå¡ç«¯å»æå¯¹é¢æ£è¯·æ±çéå®åï¼\n * å°å®éè¯·æ±åæä¸ä¸ªç®åè¯·æ±ã\n\n> ææ¯1ï¼ç¨æ·ç»å½é¡µé¢ http://aaa.com åï¼è¯·æ± http://aaa.com/getuser æ¥å£ï¼åç«¯å¤æ­æªç»å½ï¼äºæ¯ 302 éå®åå°åç¹ç»å½ç½ç« http://login.comï¼ä½æ¯æ­¤æ¶å´æ¥éï¼\n> \n> Access to XMLHttpRequest at 'http://login.com' (redirected from 'http://aaa.com/getuser') from origin 'http://aaa.com' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.\n> \n> é®é¢ï¼http://aaa.com/getuser æ¥å£çè¯·æ±å¤´ä¸­å äº Content-Typeï¼application/jsonï¼ä½¿å¾åéäºé¢æ£è¯·æ±ï¼ç¶åå¨ chrome ä¸­é¢æ£è¯·æ±ç´æ¥éå®åæé®é¢ä»èæ¥éï¼æ application/json å æå³å¯ã\n\n\n# å¸¸è§è·¨åéè¯¯\n\n> Access to XMLHttpRequest at 'xxxx' from origin 'yyyy' has been blocked by CORS policy: Request header field zzz is not allowed by Access-Control-Allow-Headers in preflight response.\n\nè¿ç§é®é¢çæ¯å ä¸ºåç«¯éç½®ç access-control-allow-header éé¢ä¸åè®¸ zzzï¼è¦ä¹åç«¯éç½®ä¸ï¼è¦ä¹å ä¸ä¸è¯·æ±å¤´ãè¡¨ç°å½¢å¼ä¸è¬æ¯ options è¯·æ±å¯ä»¥è¯·æ±æåï¼ä½æ¯æ­£å¼è¯·æ±ä¼æ¥è·¨åéè¯¯ã\n\n\n# axios è¯·æ±çä¸ç§éè¯¯\n\n * ç½ç»å¼å¸¸éè¯¯ï¼å½ç½ç»åºç°å¼å¸¸ï¼æ¯å¦ç½ç»ä¸éï¼çæ¶åï¼åæ¯å¦ä¸è¿°æè¯´çé¢æ£è¯·æ±ä¸åè®¸éå®å\n * è¶æ¶éè¯¯\n * ç¶æç éè¯¯ï¼æ¯å¦ httpç¶æç ä¸º 500\n\ninstance.interceptors.response.use(\n    response => {},\n    error => {\n        if (error.response && error.response.data) {\n            return Promise.reject(error);\n        }\n\n        let {message} = error;\n        if (message === 'Network Error') {\n            message = 'åç«¯æ¥å£è¿æ¥å¼å¸¸!';\n        }\n        if (message.includes('timeout')) {\n            message = 'åç«¯æ¥å£è¯·æ±è¶æ¶';\n        }\n        if (message.includes('Request failed with status code')) {\n            const code = message.substr(message.length - 3);\n            message = 'åç«¯æ¥å£' + code + 'å¼å¸¸';\n        }\n        Message.error(message);\n        return Promise.reject(error);\n    }\n);\n",normalizedContent:"# è·¨åç¸å³\n\næ¬æä¸æ¯å«è¡æç¥è¯ç¹ï¼ä¸ä¼ä»ç» jsonpãiframe ç­è·¨åæ¹å¼ï¼åªä»ç»å¨å¼åä¸­æå¸¸è§çå ç§è·¨åæ¹å¼ã\n\n\n# access-control-allow-origin\n\næç®åçæ¹å¼ï¼æå¡ç«¯éç½® access-control-allow-origin: *ï¼åæ­¤å¤ä¹ ä¸ä¸å ç§ååºå¤´ã\n\né¢æ£è¯·æ± (opens new window)ç¸å³ååºå¤´\n\n * access-control-allow-originï¼ååºå¤´æå®äºè¯¥ååºçèµæºæ¯å¦è¢«åè®¸ä¸ç»å®çorigin (opens new window)å±äº«ã\n * access-control-allow-methods: ååºé¦é¨ access-control-allow-methods å¨å¯¹ preflight request (opens new window).ï¼é¢æ£è¯·æ±ï¼çåºç­ä¸­æç¡®äºå®¢æ·ç«¯æè¦è®¿é®çèµæºåè®¸ä½¿ç¨çæ¹æ³ææ¹æ³åè¡¨ã\n * access-control-allow-headers: ååºé¦é¨ access-control-allow-headers ç¨äº preflight request (opens new window)ï¼é¢æ£è¯·æ±ï¼ä¸­ï¼ååºäºå°ä¼å¨æ­£å¼è¯·æ±ç access-control-request-headers (opens new window)å­æ®µä¸­åºç°çé¦é¨ä¿¡æ¯ã\n * access-control-allow-credentials: å½è¯·æ±è¦æ±æºå¸¦è¯ä¹¦ä¿¡æ¯ï¼ä¾å¦cookie,ææä¿¡æ¯ç­ï¼éªè¯ï¼æå¡å¨ç«¯æ¯å¦åè®¸æºå¸¦\n * access-control-max-age: æ¬æ¬¡é¢æ£è¯·æ±çæææï¼åä½ä¸ºç§\n\n\n# proxy ä»£ç\n\nç±äº webpack-dev-server æ¯ä¸ä¸ªæ¬å°å¼åæå¡å¨ï¼æä»¥æä»¬çåºç¨å¨å¼åé¶æ®µæ¯ç¬ç«è¿è¡å¨ localhost çä¸ä¸ªç«¯å£ä¸ï¼èåç«¯æå¡åæ¯è¿è¡å¨å¦å¤ä¸ä¸ªå°åä¸ãä½æ¯æç»ä¸çº¿è¿åï¼æä»¬çåºç¨ä¸è¬åä¼ååç«¯æå¡é¨ç½²å°åæºå°åä¸ã\n\né£è¿æ ·å°±ä¼åºç°ä¸ä¸ªéå¸¸å¸¸è§çé®é¢ï¼å¨å®éçäº§ç¯å¢ä¸­è½å¤ç´æ¥è®¿é®ç apiï¼åå°æä»¬çå¼åç¯å¢åï¼åæ¬¡è®¿é®è¿äº api å°±ä¼äº§çè·¨åè¯·æ±é®é¢ã\n\nå¯è½æäººä¼è¯´ï¼æä»¬å¯ä»¥ç¨è·¨åèµæºå±äº«ï¼corsï¼è§£å³è¿ä¸ªé®é¢ãç¡®å®å¦æ­¤ï¼å¦ææä»¬è¯·æ±çåç«¯ api æ¯æ corsï¼é£è¿ä¸ªé®é¢å°±ä¸æç«äºãä½æ¯å¹¶ä¸æ¯æ¯ç§æåµä¸æå¡ç«¯ç api é½æ¯æ corsãå¦æååç«¯åºç¨æ¯åæºé¨ç½²ï¼ä¹å°±æ¯åè®® / åå / ç«¯å£ä¸è´ï¼é£è¿ç§æåµä¸ï¼æ ¹æ¬æ²¡å¿è¦å¼å¯ corsï¼æä»¥è·¨åè¯·æ±çé®é¢ä»ç¶æ¯ä¸å¯é¿åçã\n\né£è§£å³è¿ç§å¼åé¶æ®µè·¨åè¯·æ±é®é¢æå¥½çåæ³ï¼å°±æ¯å¨å¼åæå¡å¨ä¸­éç½®ä¸ä¸ªåç«¯ api çä»£çæå¡ï¼ä¹å°±æ¯æåç«¯æ¥å£æå¡ä»£çå°æ¬å°çå¼åæå¡å°åã\n\nwebpack-dev-server å°±æ¯æç´æ¥éè¿éç½®çæ¹å¼ï¼æ·»å ä»£çæå¡ãæ¥ä¸æ¥ï¼æä»¬æ¥çä¸ä¸å®çå·ä½ç¨æ³ã\n\næ¯å¦æä»¬åå® github ç api å°±æ¯æä»¬åºç¨çåç«¯æå¡ï¼é£æä»¬çç®æ å°±æ¯å° github api ä»£çå°æ¬å°å¼åæå¡å¨ä¸­ï¼æä»¬å¯ä»¥åå¨æµè§å¨ä¸­å°è¯è®¿é®å¶ä¸­çä¸ä¸ªæ¥å£ï¼ https://api.github.com/users\n\ndevserver: {\n    contentbase: './public',\n    proxy: {\n      '/api': {\n        // http://localhost:8080/api/users -> https://api.github.com/api/users\n        target: 'https://api.github.com',\n        // http://localhost:8080/api/users -> https://api.github.com/users\n        pathrewrite: {\n          '^/api': ''\n        },\n        // ä¸è½ä½¿ç¨ localhost:8080 ä½ä¸ºè¯·æ± github çä¸»æºå\n        changeorigin: true\n      }\n    }\n  },\n\n\n\n\né£æ­¤æ¶æä»¬è¯·æ± http://localhost:8080/api/users ï¼å°±ç¸å½äºè¯·æ±äº https://api.github.com/users\n\n// æ­¤æ¶ååè·¨åè¯·æ±ï¼å°±å¯æ­£å¸¸è®¿é®\n// è½ç¶ github æ¯æ corsï¼ä½æ¯ä¸æ¯æ¯ä¸ªæå¡ç«¯é½åºè¯¥æ¯æã\n// fetch('https://api.github.com/users')\nfetch('/api/users')\n  .then(res => res.json())\n// å®éè¯·æ±å°http://localhost:8080/api/users\n\n\n\n# allow cors æä»¶\n\nchromeç½ä¸åºç¨ååºå°å\n\nå¼åæ¶åªéå¼å¯æä»¶å³å¯ï¼åçä¹æ¯æ·»å ååºå¤´ access-control-allow-origin\n\n> easily add (access-control-allow-origin: *) rule to the response header.\n\nä½æ¯æ³¨æè¿ç§æ¹å¼ä¸ä¸å®å®å¨éç¨ï¼ä¸ä¸ç¨çæ¶åæ³¨æå³æï¼å ä¸ºè®¿é®æ­£å¸¸ç½ç«çæ¶åå¯è½ä¼æ¥éã\n\n\n# æ¥å£çå½¢å¼\n\né¡¹ç®ä¸­çæ¥å£ä¸è¬åä¸ºä¸¤ç§åæ³ï¼ç¬¬ä¸ç§æ¯åºåæµè¯ç¯å¢åçº¿ä¸ç¯å¢ï¼\n\næµè¯ç¯å¢å°åï¼api.github-test.com/api/users\næ­£å¼ç¯å¢å°åï¼api.github.com/api/users\n\n\nå¦ä¸ç§æ¯ä½¿ç¨ç¸å¯¹è·¯å¾çæ¹å¼ï¼åªå /api/usersï¼ä¸ç¨åºåæµè¯åçº¿ä¸ç¯å¢ï¼è¿ç§æ¹å¼ä¸è¬ä½¿ç¨ä¸è¿°ç devserver å¼åçï¼æµè¯ç¯å¢å¯ä»¥ç´æ¥è·å¨å¼åæºä¸ï¼çº¿ä¸é¨ç½²åç±äºç¸å¯¹è·¯å¾è¯·æ±èµ·æ¥ä¹æ²¡é®é¢ã\n\n\n# é¢æ£è¯·æ±\n\nåªæè·¨åçæ¶åæå¯è½ä¼åéé¢æ£è¯·æ±ï¼æ­¤æ¶è¿éè¦å¤æ­è¯·æ±æ¯å¦ä¸ºç®åè¯·æ±\n\nç®åè¯·æ±ï¼åæ¶æ»¡è¶³ä»¥ä¸ä¸¤å¤§æ¡ä»¶ï¼\n\n * æ¡ä»¶1ï¼ä½¿ç¨ä¸åæ¹æ³ä¹ä¸ï¼getï¼headï¼post\n * æ¡ä»¶2ï¼content-type çå¼ä»éäºä¸åä¸èä¹ä¸ï¼\n * text/plain\n * multipart/form-data\n * application/x-www-form-urlencoded\n\né¤äºä»¥ä¸æ¡ä»¶ä¹å¤ï¼åä¼åèµ·é¢æ£è¯·æ±ã\n\n\n# é¢æ£è¯·æ±ä¸éå®å\n\nhttps://developer.mozilla.org/zh-cn/docs/web/http/cors\n\nå¹¶ä¸æ¯æææµè§å¨é½æ¯æé¢æ£è¯·æ±çéå®åãå¦æä¸ä¸ªé¢æ£è¯·æ±åçäºéå®åï¼ä¸é¨åæµè§å¨å°æ¥åéè¯¯ï¼chrome æé®é¢ï¼safari æ²¡é®é¢ï¼ï¼\n\n> access to xmlhttprequest at 'http://xxx' (redirected from 'http://yyy') from origin 'http://zzz' has been blocked by cors policy: response to preflight request doesn't pass access control check: redirect is not allowed for a preflight request.\n\ncors æåè¦æ±æµè§å¨å·æè¯¥è¡ä¸ºï¼ä¸è¿å¨åç»­çä¿®è®¢ä¸­åºå¼äºè¿ä¸è¦æ±ãä½å¹¶éæææµè§å¨é½å®ç°äºè¿ä¸åæ´ï¼èä»ç¶è¡¨ç°åºæåè¦æ±çè¡ä¸ºã\n\nå¨æµè§å¨çå®ç°è·ä¸è§èä¹åï¼æä¸¤ç§æ¹å¼è§é¿ä¸è¿°æ¥éè¡ä¸ºï¼\n\n * å¨æå¡ç«¯å»æå¯¹é¢æ£è¯·æ±çéå®åï¼\n * å°å®éè¯·æ±åæä¸ä¸ªç®åè¯·æ±ã\n\n> ææ¯1ï¼ç¨æ·ç»å½é¡µé¢ http://aaa.com åï¼è¯·æ± http://aaa.com/getuser æ¥å£ï¼åç«¯å¤æ­æªç»å½ï¼äºæ¯ 302 éå®åå°åç¹ç»å½ç½ç« http://login.comï¼ä½æ¯æ­¤æ¶å´æ¥éï¼\n> \n> access to xmlhttprequest at 'http://login.com' (redirected from 'http://aaa.com/getuser') from origin 'http://aaa.com' has been blocked by cors policy: response to preflight request doesn't pass access control check: no 'access-control-allow-origin' header is present on the requested resource. if an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with cors disabled.\n> \n> é®é¢ï¼http://aaa.com/getuser æ¥å£çè¯·æ±å¤´ä¸­å äº content-typeï¼application/jsonï¼ä½¿å¾åéäºé¢æ£è¯·æ±ï¼ç¶åå¨ chrome ä¸­é¢æ£è¯·æ±ç´æ¥éå®åæé®é¢ä»èæ¥éï¼æ application/json å æå³å¯ã\n\n\n# å¸¸è§è·¨åéè¯¯\n\n> access to xmlhttprequest at 'xxxx' from origin 'yyyy' has been blocked by cors policy: request header field zzz is not allowed by access-control-allow-headers in preflight response.\n\nè¿ç§é®é¢çæ¯å ä¸ºåç«¯éç½®ç access-control-allow-header éé¢ä¸åè®¸ zzzï¼è¦ä¹åç«¯éç½®ä¸ï¼è¦ä¹å ä¸ä¸è¯·æ±å¤´ãè¡¨ç°å½¢å¼ä¸è¬æ¯ options è¯·æ±å¯ä»¥è¯·æ±æåï¼ä½æ¯æ­£å¼è¯·æ±ä¼æ¥è·¨åéè¯¯ã\n\n\n# axios è¯·æ±çä¸ç§éè¯¯\n\n * ç½ç»å¼å¸¸éè¯¯ï¼å½ç½ç»åºç°å¼å¸¸ï¼æ¯å¦ç½ç»ä¸éï¼çæ¶åï¼åæ¯å¦ä¸è¿°æè¯´çé¢æ£è¯·æ±ä¸åè®¸éå®å\n * è¶æ¶éè¯¯\n * ç¶æç éè¯¯ï¼æ¯å¦ httpç¶æç ä¸º 500\n\ninstance.interceptors.response.use(\n    response => {},\n    error => {\n        if (error.response && error.response.data) {\n            return promise.reject(error);\n        }\n\n        let {message} = error;\n        if (message === 'network error') {\n            message = 'åç«¯æ¥å£è¿æ¥å¼å¸¸!';\n        }\n        if (message.includes('timeout')) {\n            message = 'åç«¯æ¥å£è¯·æ±è¶æ¶';\n        }\n        if (message.includes('request failed with status code')) {\n            const code = message.substr(message.length - 3);\n            message = 'åç«¯æ¥å£' + code + 'å¼å¸¸';\n        }\n        message.error(message);\n        return promise.reject(error);\n    }\n);\n",charsets:{cjk:!0}},{title:"Chromeæ§è½åæ&æ§è½çè§å¨",frontmatter:{},regularPath:"/chrome/performance.html",relativePath:"chrome/performance.md",key:"v-0ea86735",path:"/chrome/performance.html",headers:[{level:2,title:"Performance Monitor æ§è½çè§å¨",slug:"performance-monitor-æ§è½çè§å¨",normalizedTitle:"performance monitor æ§è½çè§å¨",charIndex:332},{level:2,title:"Performance æ§è½åæ",slug:"performance-æ§è½åæ",normalizedTitle:"performance æ§è½åæ",charIndex:792}],lastUpdated:"4/14/2023, 5:31:58 PM",lastUpdatedTimestamp:1681464718e3,headersStr:"Performance Monitor æ§è½çè§å¨ Performance æ§è½åæ",content:"# Chromeæ§è½åæ&æ§è½çè§å¨\n\næä¸å¤©å¨å¯å¨é¡¹ç®çæ¶åï¼çªç¶çµèåç«ï¼é£æå¼å§è½¬ï¼æ­¤æ¶ææå¼äº mac çæ´»å¨çè§å¨åç°ï¼\n\n\n\nç¶åæåè¿è¡äºä¸ä¸ top å½ä»¤ï¼topå½ä»¤æ¯Linuxä¸å¸¸ç¨çæ§è½åæå·¥å·ï¼è½å¤å®æ¶æ¾ç¤ºç³»ç»ä¸­åä¸ªè¿ç¨çèµæºå ç¨ç¶åµï¼ç±»ä¼¼äºWindowsçä»»å¡ç®¡çå¨ï¼\n\n\n\nç¶åæåæå¼äº chrome çä»»å¡ç®¡çå¨ï¼åç°ç¡®å®æ¯è¿ä¸ªé¡¹ç®å¯¹åºç tab è¿ç¨æ cpu å æ»¡äºã\n\n\n\nç¶åå¼å§åæé¡¹ç®ï¼åç°åªæå¨è¿å¥æä¸ä¸ªé¡µé¢çæ¶åæä¼è¿æ ·ï¼æåå¯¹ä»£ç è¿è¡åæï¼åç°æ¯ ui ç»ä»¶åºä¸­çä¸ä¸ªç»ä»¶éé¢ææ­»å¾ªç¯ä»£ç ï¼æååçº§äºçæ¬è§£å³äºãå¶å®é¤äºä»¥ä¸å ç§æ¥ç cpu çæ¹å¼ï¼chrome æµè§å¨è¿æèªå¸¦çæ§è½åæ&æ§è½çè§å¨åè½ã\n\n\n# Performance Monitor æ§è½çè§å¨\n\næå¼éè¦çæµçé¡µé¢ï¼F12æå¼æ§å¶å°åï¼command + p æå¼å½ä»¤è¾å¥ï¼å¯è¾å¥?æ¥çä»¥ä¸å½ä»¤ï¼\n\n\n\n * open fileï¼æå¼æä»¶\n * run commandï¼è¿è¡å½ä»¤\n * run snippetï¼è¿è¡ä»£ç çæ®µ\n * go to symbol\n * go to lineï¼è·³è½¬å°æå®è¡\n\næä»¬è¾å¥> Show Performance Monitorï¼æå¼æ§è½çè§å¨ï¼è¿ä¸ªè¿ç¨æ¯å®æ¶çæµçï¼æ¯å¦ä¿®å¤é®é¢åå¯ä»¥çå°æ²çº¿éäºä¸æ¥ã\n\n\n\nå¯ä»¥çå°å·¦ä¾§çæ§è½ææ ä¸»è¦æï¼å¯ä»¥å¾éæ³è¦ççææ ï¼\n\n * CPU usageï¼CPUå ç¨ç\n * JS head sizeï¼JSåå­ä½¿ç¨å¤§å°\n * DOM Nodesï¼åå­ä¸­æè½½çDOMèç¹ä¸ªæ°\n * JS event listenersï¼äºä»¶çå¬æ°\n * Document\n * Document Frames\n * Layouts / secï¼éæ\n * Style recalcs / secï¼éç»\n\n\n# Performance æ§è½åæ\n\n\n\n * record buttonï¼å½å¶æé®ï¼ç¹å»åå¼å¯å½å¶ç¶åç¹å»åæ­¢æé®ã\n * reload buttonï¼é¡µé¢ä¼éæ°å è½½ï¼è®°å½é¡µé¢å è½½è¿ç¨ä¸­çæ§è½åæï¼ä¼èªå¨åæ­¢ã\n\nåè½é¢æ¿ä»ç»ï¼Chrome DevTools Performance åè½è¯¦è§£",normalizedContent:"# chromeæ§è½åæ&æ§è½çè§å¨\n\næä¸å¤©å¨å¯å¨é¡¹ç®çæ¶åï¼çªç¶çµèåç«ï¼é£æå¼å§è½¬ï¼æ­¤æ¶ææå¼äº mac çæ´»å¨çè§å¨åç°ï¼\n\n\n\nç¶åæåè¿è¡äºä¸ä¸ top å½ä»¤ï¼topå½ä»¤æ¯linuxä¸å¸¸ç¨çæ§è½åæå·¥å·ï¼è½å¤å®æ¶æ¾ç¤ºç³»ç»ä¸­åä¸ªè¿ç¨çèµæºå ç¨ç¶åµï¼ç±»ä¼¼äºwindowsçä»»å¡ç®¡çå¨ï¼\n\n\n\nç¶åæåæå¼äº chrome çä»»å¡ç®¡çå¨ï¼åç°ç¡®å®æ¯è¿ä¸ªé¡¹ç®å¯¹åºç tab è¿ç¨æ cpu å æ»¡äºã\n\n\n\nç¶åå¼å§åæé¡¹ç®ï¼åç°åªæå¨è¿å¥æä¸ä¸ªé¡µé¢çæ¶åæä¼è¿æ ·ï¼æåå¯¹ä»£ç è¿è¡åæï¼åç°æ¯ ui ç»ä»¶åºä¸­çä¸ä¸ªç»ä»¶éé¢ææ­»å¾ªç¯ä»£ç ï¼æååçº§äºçæ¬è§£å³äºãå¶å®é¤äºä»¥ä¸å ç§æ¥ç cpu çæ¹å¼ï¼chrome æµè§å¨è¿æèªå¸¦çæ§è½åæ&æ§è½çè§å¨åè½ã\n\n\n# performance monitor æ§è½çè§å¨\n\næå¼éè¦çæµçé¡µé¢ï¼f12æå¼æ§å¶å°åï¼command + p æå¼å½ä»¤è¾å¥ï¼å¯è¾å¥?æ¥çä»¥ä¸å½ä»¤ï¼\n\n\n\n * open fileï¼æå¼æä»¶\n * run commandï¼è¿è¡å½ä»¤\n * run snippetï¼è¿è¡ä»£ç çæ®µ\n * go to symbol\n * go to lineï¼è·³è½¬å°æå®è¡\n\næä»¬è¾å¥> show performance monitorï¼æå¼æ§è½çè§å¨ï¼è¿ä¸ªè¿ç¨æ¯å®æ¶çæµçï¼æ¯å¦ä¿®å¤é®é¢åå¯ä»¥çå°æ²çº¿éäºä¸æ¥ã\n\n\n\nå¯ä»¥çå°å·¦ä¾§çæ§è½ææ ä¸»è¦æï¼å¯ä»¥å¾éæ³è¦ççææ ï¼\n\n * cpu usageï¼cpuå ç¨ç\n * js head sizeï¼jsåå­ä½¿ç¨å¤§å°\n * dom nodesï¼åå­ä¸­æè½½çdomèç¹ä¸ªæ°\n * js event listenersï¼äºä»¶çå¬æ°\n * document\n * document frames\n * layouts / secï¼éæ\n * style recalcs / secï¼éç»\n\n\n# performance æ§è½åæ\n\n\n\n * record buttonï¼å½å¶æé®ï¼ç¹å»åå¼å¯å½å¶ç¶åç¹å»åæ­¢æé®ã\n * reload buttonï¼é¡µé¢ä¼éæ°å è½½ï¼è®°å½é¡µé¢å è½½è¿ç¨ä¸­çæ§è½åæï¼ä¼èªå¨åæ­¢ã\n\nåè½é¢æ¿ä»ç»ï¼chrome devtools performance åè½è¯¦è§£",charsets:{cjk:!0}},{title:"GCç®æ³ï¼V8å¼æ",frontmatter:{title:"GCç®æ³ï¼V8å¼æ",date:"2020-08-26T10:37:54.000Z",categories:"æµè§å¨"},regularPath:"/chrome/gc.html",relativePath:"chrome/gc.md",key:"v-aee874c2",path:"/chrome/gc.html",headers:[{level:2,title:"GCç®æ³",slug:"gcç®æ³",normalizedTitle:"gcç®æ³",charIndex:2},{level:2,title:"ä»ä¹æåµä¼å¼èµ·åå­æ³æ¼ï¼",slug:"ä»ä¹æåµä¼å¼èµ·åå­æ³æ¼",normalizedTitle:"ä»ä¹æåµä¼å¼èµ·åå­æ³æ¼ï¼",charIndex:733},{level:2,title:"åå­æº¢åº",slug:"åå­æº¢åº",normalizedTitle:"åå­æº¢åº",charIndex:32},{level:2,title:"V8å¼æä¸åå¾åæ¶ç­ç¥",slug:"v8å¼æä¸åå¾åæ¶ç­ç¥",normalizedTitle:"v8å¼æä¸åå¾åæ¶ç­ç¥",charIndex:1236},{level:3,title:"V8åå­åéä¸åå¾åæ¶",slug:"v8åå­åéä¸åå¾åæ¶",normalizedTitle:"v8åå­åéä¸åå¾åæ¶",charIndex:1338},{level:2,title:"performance",slug:"performance",normalizedTitle:"performance",charIndex:48}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"GCç®æ³ ä»ä¹æåµä¼å¼èµ·åå­æ³æ¼ï¼ åå­æº¢åº V8å¼æä¸åå¾åæ¶ç­ç¥ V8åå­åéä¸åå¾åæ¶ performance",content:"# GCç®æ³ï¼V8å¼æ\n\n * GCç®æ³\n * åå­æ³é²\n * åå­æº¢åº\n * V8å¼æ\n * performance\n\n\n# GCç®æ³\n\n# 1. æ è®°æ¸é¤\n\nåå¾åæ¶å¨ä¼å¨è¿è¡æ¶ç»å­å¨å¨åå­ä¸­çææåéå ä¸ä¸ªæ è®°ï¼ç¶åå»é¤ç¯å¢ä¸­çåéä»¥åè¢«ç¯å¢ä¸­çåéæå¼ç¨çåéï¼é­åï¼å¨è¿äºå®æåä»å­å¨æ è®°çå°±æ¯è¦å é¤çåéäºï¼å ä¸ºç¯å¢ä¸­çåéå·²ç»æ æ³è®¿é®å°è¿äºåéäºãç¼ºç¹æ¯æ¸é¤çå¯¹è±¡å¯è½å°åä¸è¿ç»­ï¼é æåå­ç¢çåã\n\nä¼ç¼ºç¹ï¼1. å¯å¤çå¾ªç¯å¼ç¨ 2. äº§çç¢çå 3. ä¸ä¼ç«å³åæ¶\n\n> ä½ å¯ä»¥æ³è±¡æ´ä¸ªåå­æ¯ä¸ä¸ªå¤§æµ·ï¼æ¯ä¸ªå¯¹è±¡é½æ¯ä¸ä¸ªå²å±¿ï¼ç¸äºä¹é´ç¨å¤§æ¡¥è¿æ¥ï¼ç°å¨è¦æ¾åºä¸å¤§éç¸è¿çå²å±¿ï¼é£ä¹å°±ä»å¤§éåºåï¼ä¾æ¬¡æ è®°æè½è¾¾å°çæ¯ä¸ªå²å±¿ï¼æåæ²¡æè¢«æ è®°å°çå²å±¿å°±æ¯å­¤å²ï¼å¯ä»¥å½åå¾æ¸é¤æãå³ä½¿ä¸¤ä¸ªå­¤å²ä¹é´ç¸äºææ¡¥è¿æ¥ä¹æ²¡ç¨ï¼å ä¸ºä¸å¤§éä¸éåã\n\n# 2. å¼ç¨è®¡æ°\n\nå¼ç¨è®¡æ°çç­ç¥æ¯è·è¸ªè®°å½æ¯ä¸ªå¼è¢«ä½¿ç¨çæ¬¡æ°ãå½å£°æäºä¸ä¸ªåéå¹¶å°ä¸ä¸ªå¼ç¨ç±»åèµå¼ç»è¯¥åéæ¶ï¼è¿ä¸ªå¼å¾å¼ç¨æ¬¡æ°å°±å ä¸ï¼å¦æè¯¥åéçå¼åæäºå¦ä¸ä¸ªï¼åè¿ä¸ªå¼å¾å¼ç¨æ¬¡æ°å°±åä¸ï¼å½è¿ä¸ªå¼çå¼ç¨æ¬¡æ°ä¸º0çæ¶åï¼è¯´ææ²¡æåéå¨ä½¿ç¨ï¼è¿ä¸ªå¼æ æ³è®¿é®ãç±æ­¤å¯ä»¥å°å¶å ç¨çç©ºé´åæ¶ï¼è¿äºåå¾åæ¶å¨å°±ä¼å¨è¿è¡æ¶æ¸çæå¼ç¨æ¬¡æ°ä¸º0çå¼å ç¨çç©ºé´ï¼ä½è¿ç§æ¹æ³å®¹æå¼èµ·åå­æ³æ¼ï¼å ä¸ºè¿ç§æ¹å¼æ²¡æè§£å³å¾ªç¯å¼ç¨çé®é¢ï¼æä»¥ä¸å»ºè®®ä½¿ç¨ï¼ä¾å¦ï¼\n\nvar obj = { a:1,b:2,c:3 };\nobj.o = obj;//å¾ªç¯å¼ç¨\n\n\nä¼ç¼ºç¹ï¼1.å³æ¶åæ¶ 2. åå°ç¨åºå¡é¡¿ 3.æ æ³è§£å³å¾ªç¯å¼ç¨ 4. èµæºæ¶èå¤§ï¼ç»´æ¤å¼ç¨è®¡æ°å¨\n\n# 3. æ è®°æ´ç\n\næ è®°æ¸é¤çåçº§çï¼æ¸é¤ä¹ååæ´çç©ºé´ï¼åæ¸é¤ï¼é²æ­¢åå­ç¢çå\n\n\n# ä»ä¹æåµä¼å¼èµ·åå­æ³æ¼ï¼\n\nè½ç¶æåå¾åæ¶æºå¶ä½æ¯æä»¬ç¼åä»£ç æä½ä¸å½è¿æ¯ä¼é æåå­æ³æ¼ã\n\n * æå¤çå¨å±åéå¼èµ·çåå­æ³æ¼ã\n\nåå ï¼å¨å±åéï¼ä¸ä¼è¢«åæ¶ã\n\nè§£å³ï¼ä½¿ç¨ä¸¥æ ¼æ¨¡å¼é¿åã\n\n * é­åå¼èµ·çåå­æ³æ¼\n\nåå ï¼é­åå¯ä»¥ç»´æå½æ°åå±é¨åéï¼ä½¿å¶å¾ä¸å°éæ¾ã\n\nè§£å³ï¼å°äºä»¶å¤çå½æ°å®ä¹å¨å¤é¨ï¼è§£é¤é­å,æèå¨å®ä¹äºä»¶å¤çå½æ°çå¤é¨å½æ°ä¸­ï¼å é¤å¯¹domçå¼ç¨ã\n\n * æ²¡ææ¸ççDOMåç´ å¼ç¨\n\nåå ï¼è½ç¶å«çå°æ¹å é¤äºï¼ä½æ¯å¯¹è±¡ä¸­è¿å­å¨å¯¹domçå¼ç¨\n\nè§£å³ï¼æå¨å é¤ã\n\n * è¢«éå¿çå®æ¶å¨æèåè°\n\nåå ï¼å®æ¶å¨ä¸­ædomçå¼ç¨ï¼å³ä½¿domå é¤äºï¼ä½æ¯å®æ¶å¨è¿å¨ï¼æä»¥åå­ä¸­è¿æ¯æè¿ä¸ªdomã\n\nè§£å³ï¼æå¨å é¤å®æ¶å¨ådomã\n\n * å­åç´ å­å¨å¼ç¨å¼èµ·çåå­æ³æ¼\n\nåå ï¼divä¸­çul li å¾å°è¿ä¸ªdivï¼ä¼é´æ¥å¼ç¨æä¸ªå¾å°çliï¼é£ä¹æ­¤æ¶å ä¸ºdivé´æ¥å¼ç¨liï¼å³ä½¿liè¢«æ¸ç©ºï¼ä¹è¿æ¯å¨åå­ä¸­ï¼å¹¶ä¸åªè¦liä¸è¢«å é¤ï¼ä»çç¶åç´ é½ä¸ä¼è¢«å é¤ã\n\nè§£å³ï¼æå¨å é¤æ¸ç©ºã\n\n\n# åå­æº¢åº\n\n * åå­æº¢åºï¼ç³è¯·ä¸å°è¶³å¤çåå­ï¼\n\n * åå­æ³é²ï¼æ æ³éæ¾å·²ç³è¯·çåå­ï¼\n\n\n# V8å¼æä¸åå¾åæ¶ç­ç¥\n\n * V8éç¨å³æ¶ç¼è¯\n\n * V8åå­è®¾éï¼64æä½ç³»ç»ä¸è¶è¿1.5Gï¼\n\n * éç¨åä»£åæ¶çææ³\n\n * åå­åä¸ºæ°çä»£ï¼èçä»£\n\n * ä¸åå¯¹è±¡éç¨ä¸åGCç®æ³\n\n\n# V8åå­åéä¸åå¾åæ¶\n\n> V8åå­ç©ºé´ä¸åä¸ºäº\n> \n> å°ç©ºé´ç¨äºå­å¨æ°çä»£å¯¹è±¡ï¼32M | 16Mï¼\n> \n> æ°çä»£æçæ¯å­æ´»æ¶é´è¾ç­çå¯¹è±¡\n> \n> æ°çä»£åå­åºåä¸ºä¸¤ä¸ªç¸ç­ç©ºé´\n> \n> ä½¿ç¨ç©ºé´ä¸ºFromï¼ç©ºé²ç©ºé´ä¸ºTo\n> \n> æ´»å¨å¯¹è±¡å­å¨äºFromç©ºé´\n> \n> è¿è¡åæ¶æ¶ï¼æ è®°æ´çå°Fromæ´»å¨å¯¹è±¡æ·è´è³Toï¼éæ¾Fromåºå\n> \n> æåFromåToäº¤æ¢ç©ºé´\n> \n> ç©ºé´æ¢æ¶é´\n\nåæ¶è¿ç¨ä¸­å¯è½åºç°æåï¼\n\n * ä¸è½®GCè¿å­æ´»çæ°çä»£éè¦æåå°èå¹´ä»£\n * Toç©ºé´ä½¿ç¨çè¶è¿25%çéè¦æåï¼å ä¸ºFromåToäºæ¢åéè¦ä¿è¯æ°æ´»å¨å¯¹è±¡çç©ºé´åè¶³\n\n> èçä»£ï¼1.4G | 700Mï¼\n> \n> èçä»£å¯¹è±¡å°±æ¯æå­æ´»æ¶é´è¾é¿çå¯¹è±¡\n> \n> éç¨æ è®°æ¸é¤ï¼æ è®°æ´çï¼å¢éæ è®°\n> \n> é¦åä½¿ç¨æ è®°æ¸é¤å®æåå¾åæ¶\n> \n> éç¨æ è®°æ´çè¿è¡ç©ºé´ä¼å\n> \n> éç¨å¢éæ è®°è¿è¡æçä¼åï¼å°æ è®°è¿ç¨åæ®µï¼ä¸ç¨åºæ§è¡äº¤æ¿æ§è¡ï¼æé«æçï¼åå¾åæ¶ä¼é»å¡ç¨åºï¼\n\n\n# performance\n\næå¼F12ä¸­çperformanceå·¥å·ï¼ç¹å»å½å¶ï¼è¾å¥ç½åå¹¶åä¸äºæä½ï¼ç¹å»åæ­¢å°±å¯ä»¥çå°æåä¸ä¸ªå¾çèè²çº¿æ¡å³æ¯åå­åæ¢æåµã\n\nçæ§åå­çæ¹å¼\n\n * æµè§å¨ä»»å¡ç®¡çå¨ï¼shift+escï¼æåä¸åå¯çå°JavaScriptä½¿ç¨çåå­\n * Timelineæ¶åºå¾ï¼èè²çº¿æ¡ï¼å¨å¶ä¸é¢å¯å®ä½\n * å å¿«ç§æ¥æ¾åç¦»DOMï¼F12ä¸­çMemoryéé¡¹ï¼Take snapshot\n * å¤æ­æ¯å¦å­å¨é¢ç¹çåå¾åæ¶ï¼Timelineåä»»å¡ç®¡çå¨å»æ¥ç",normalizedContent:"# gcç®æ³ï¼v8å¼æ\n\n * gcç®æ³\n * åå­æ³é²\n * åå­æº¢åº\n * v8å¼æ\n * performance\n\n\n# gcç®æ³\n\n# 1. æ è®°æ¸é¤\n\nåå¾åæ¶å¨ä¼å¨è¿è¡æ¶ç»å­å¨å¨åå­ä¸­çææåéå ä¸ä¸ªæ è®°ï¼ç¶åå»é¤ç¯å¢ä¸­çåéä»¥åè¢«ç¯å¢ä¸­çåéæå¼ç¨çåéï¼é­åï¼å¨è¿äºå®æåä»å­å¨æ è®°çå°±æ¯è¦å é¤çåéäºï¼å ä¸ºç¯å¢ä¸­çåéå·²ç»æ æ³è®¿é®å°è¿äºåéäºãç¼ºç¹æ¯æ¸é¤çå¯¹è±¡å¯è½å°åä¸è¿ç»­ï¼é æåå­ç¢çåã\n\nä¼ç¼ºç¹ï¼1. å¯å¤çå¾ªç¯å¼ç¨ 2. äº§çç¢çå 3. ä¸ä¼ç«å³åæ¶\n\n> ä½ å¯ä»¥æ³è±¡æ´ä¸ªåå­æ¯ä¸ä¸ªå¤§æµ·ï¼æ¯ä¸ªå¯¹è±¡é½æ¯ä¸ä¸ªå²å±¿ï¼ç¸äºä¹é´ç¨å¤§æ¡¥è¿æ¥ï¼ç°å¨è¦æ¾åºä¸å¤§éç¸è¿çå²å±¿ï¼é£ä¹å°±ä»å¤§éåºåï¼ä¾æ¬¡æ è®°æè½è¾¾å°çæ¯ä¸ªå²å±¿ï¼æåæ²¡æè¢«æ è®°å°çå²å±¿å°±æ¯å­¤å²ï¼å¯ä»¥å½åå¾æ¸é¤æãå³ä½¿ä¸¤ä¸ªå­¤å²ä¹é´ç¸äºææ¡¥è¿æ¥ä¹æ²¡ç¨ï¼å ä¸ºä¸å¤§éä¸éåã\n\n# 2. å¼ç¨è®¡æ°\n\nå¼ç¨è®¡æ°çç­ç¥æ¯è·è¸ªè®°å½æ¯ä¸ªå¼è¢«ä½¿ç¨çæ¬¡æ°ãå½å£°æäºä¸ä¸ªåéå¹¶å°ä¸ä¸ªå¼ç¨ç±»åèµå¼ç»è¯¥åéæ¶ï¼è¿ä¸ªå¼å¾å¼ç¨æ¬¡æ°å°±å ä¸ï¼å¦æè¯¥åéçå¼åæäºå¦ä¸ä¸ªï¼åè¿ä¸ªå¼å¾å¼ç¨æ¬¡æ°å°±åä¸ï¼å½è¿ä¸ªå¼çå¼ç¨æ¬¡æ°ä¸º0çæ¶åï¼è¯´ææ²¡æåéå¨ä½¿ç¨ï¼è¿ä¸ªå¼æ æ³è®¿é®ãç±æ­¤å¯ä»¥å°å¶å ç¨çç©ºé´åæ¶ï¼è¿äºåå¾åæ¶å¨å°±ä¼å¨è¿è¡æ¶æ¸çæå¼ç¨æ¬¡æ°ä¸º0çå¼å ç¨çç©ºé´ï¼ä½è¿ç§æ¹æ³å®¹æå¼èµ·åå­æ³æ¼ï¼å ä¸ºè¿ç§æ¹å¼æ²¡æè§£å³å¾ªç¯å¼ç¨çé®é¢ï¼æä»¥ä¸å»ºè®®ä½¿ç¨ï¼ä¾å¦ï¼\n\nvar obj = { a:1,b:2,c:3 };\nobj.o = obj;//å¾ªç¯å¼ç¨\n\n\nä¼ç¼ºç¹ï¼1.å³æ¶åæ¶ 2. åå°ç¨åºå¡é¡¿ 3.æ æ³è§£å³å¾ªç¯å¼ç¨ 4. èµæºæ¶èå¤§ï¼ç»´æ¤å¼ç¨è®¡æ°å¨\n\n# 3. æ è®°æ´ç\n\næ è®°æ¸é¤çåçº§çï¼æ¸é¤ä¹ååæ´çç©ºé´ï¼åæ¸é¤ï¼é²æ­¢åå­ç¢çå\n\n\n# ä»ä¹æåµä¼å¼èµ·åå­æ³æ¼ï¼\n\nè½ç¶æåå¾åæ¶æºå¶ä½æ¯æä»¬ç¼åä»£ç æä½ä¸å½è¿æ¯ä¼é æåå­æ³æ¼ã\n\n * æå¤çå¨å±åéå¼èµ·çåå­æ³æ¼ã\n\nåå ï¼å¨å±åéï¼ä¸ä¼è¢«åæ¶ã\n\nè§£å³ï¼ä½¿ç¨ä¸¥æ ¼æ¨¡å¼é¿åã\n\n * é­åå¼èµ·çåå­æ³æ¼\n\nåå ï¼é­åå¯ä»¥ç»´æå½æ°åå±é¨åéï¼ä½¿å¶å¾ä¸å°éæ¾ã\n\nè§£å³ï¼å°äºä»¶å¤çå½æ°å®ä¹å¨å¤é¨ï¼è§£é¤é­å,æèå¨å®ä¹äºä»¶å¤çå½æ°çå¤é¨å½æ°ä¸­ï¼å é¤å¯¹domçå¼ç¨ã\n\n * æ²¡ææ¸ççdomåç´ å¼ç¨\n\nåå ï¼è½ç¶å«çå°æ¹å é¤äºï¼ä½æ¯å¯¹è±¡ä¸­è¿å­å¨å¯¹domçå¼ç¨\n\nè§£å³ï¼æå¨å é¤ã\n\n * è¢«éå¿çå®æ¶å¨æèåè°\n\nåå ï¼å®æ¶å¨ä¸­ædomçå¼ç¨ï¼å³ä½¿domå é¤äºï¼ä½æ¯å®æ¶å¨è¿å¨ï¼æä»¥åå­ä¸­è¿æ¯æè¿ä¸ªdomã\n\nè§£å³ï¼æå¨å é¤å®æ¶å¨ådomã\n\n * å­åç´ å­å¨å¼ç¨å¼èµ·çåå­æ³æ¼\n\nåå ï¼divä¸­çul li å¾å°è¿ä¸ªdivï¼ä¼é´æ¥å¼ç¨æä¸ªå¾å°çliï¼é£ä¹æ­¤æ¶å ä¸ºdivé´æ¥å¼ç¨liï¼å³ä½¿liè¢«æ¸ç©ºï¼ä¹è¿æ¯å¨åå­ä¸­ï¼å¹¶ä¸åªè¦liä¸è¢«å é¤ï¼ä»çç¶åç´ é½ä¸ä¼è¢«å é¤ã\n\nè§£å³ï¼æå¨å é¤æ¸ç©ºã\n\n\n# åå­æº¢åº\n\n * åå­æº¢åºï¼ç³è¯·ä¸å°è¶³å¤çåå­ï¼\n\n * åå­æ³é²ï¼æ æ³éæ¾å·²ç³è¯·çåå­ï¼\n\n\n# v8å¼æä¸åå¾åæ¶ç­ç¥\n\n * v8éç¨å³æ¶ç¼è¯\n\n * v8åå­è®¾éï¼64æä½ç³»ç»ä¸è¶è¿1.5gï¼\n\n * éç¨åä»£åæ¶çææ³\n\n * åå­åä¸ºæ°çä»£ï¼èçä»£\n\n * ä¸åå¯¹è±¡éç¨ä¸ågcç®æ³\n\n\n# v8åå­åéä¸åå¾åæ¶\n\n> v8åå­ç©ºé´ä¸åä¸ºäº\n> \n> å°ç©ºé´ç¨äºå­å¨æ°çä»£å¯¹è±¡ï¼32m | 16mï¼\n> \n> æ°çä»£æçæ¯å­æ´»æ¶é´è¾ç­çå¯¹è±¡\n> \n> æ°çä»£åå­åºåä¸ºä¸¤ä¸ªç¸ç­ç©ºé´\n> \n> ä½¿ç¨ç©ºé´ä¸ºfromï¼ç©ºé²ç©ºé´ä¸ºto\n> \n> æ´»å¨å¯¹è±¡å­å¨äºfromç©ºé´\n> \n> è¿è¡åæ¶æ¶ï¼æ è®°æ´çå°fromæ´»å¨å¯¹è±¡æ·è´è³toï¼éæ¾fromåºå\n> \n> æåfromåtoäº¤æ¢ç©ºé´\n> \n> ç©ºé´æ¢æ¶é´\n\nåæ¶è¿ç¨ä¸­å¯è½åºç°æåï¼\n\n * ä¸è½®gcè¿å­æ´»çæ°çä»£éè¦æåå°èå¹´ä»£\n * toç©ºé´ä½¿ç¨çè¶è¿25%çéè¦æåï¼å ä¸ºfromåtoäºæ¢åéè¦ä¿è¯æ°æ´»å¨å¯¹è±¡çç©ºé´åè¶³\n\n> èçä»£ï¼1.4g | 700mï¼\n> \n> èçä»£å¯¹è±¡å°±æ¯æå­æ´»æ¶é´è¾é¿çå¯¹è±¡\n> \n> éç¨æ è®°æ¸é¤ï¼æ è®°æ´çï¼å¢éæ è®°\n> \n> é¦åä½¿ç¨æ è®°æ¸é¤å®æåå¾åæ¶\n> \n> éç¨æ è®°æ´çè¿è¡ç©ºé´ä¼å\n> \n> éç¨å¢éæ è®°è¿è¡æçä¼åï¼å°æ è®°è¿ç¨åæ®µï¼ä¸ç¨åºæ§è¡äº¤æ¿æ§è¡ï¼æé«æçï¼åå¾åæ¶ä¼é»å¡ç¨åºï¼\n\n\n# performance\n\næå¼f12ä¸­çperformanceå·¥å·ï¼ç¹å»å½å¶ï¼è¾å¥ç½åå¹¶åä¸äºæä½ï¼ç¹å»åæ­¢å°±å¯ä»¥çå°æåä¸ä¸ªå¾çèè²çº¿æ¡å³æ¯åå­åæ¢æåµã\n\nçæ§åå­çæ¹å¼\n\n * æµè§å¨ä»»å¡ç®¡çå¨ï¼shift+escï¼æåä¸åå¯çå°javascriptä½¿ç¨çåå­\n * timelineæ¶åºå¾ï¼èè²çº¿æ¡ï¼å¨å¶ä¸é¢å¯å®ä½\n * å å¿«ç§æ¥æ¾åç¦»domï¼f12ä¸­çmemoryéé¡¹ï¼take snapshot\n * å¤æ­æ¯å¦å­å¨é¢ç¹çåå¾åæ¶ï¼timelineåä»»å¡ç®¡çå¨å»æ¥ç",charsets:{cjk:!0}},{title:"æµè§å¨æ¸²æç¸å³",frontmatter:{title:"æµè§å¨æ¸²æç¸å³",date:"2021-01-28T11:27:54.000Z",categories:"æµè§å¨"},regularPath:"/chrome/render.html",relativePath:"chrome/render.md",key:"v-0ba510df",path:"/chrome/render.html",headers:[{level:2,title:"æµè§å¨å¤è¿ç¨æ¶æ",slug:"æµè§å¨å¤è¿ç¨æ¶æ",normalizedTitle:"æµè§å¨å¤è¿ç¨æ¶æ",charIndex:14},{level:3,title:"åè¿ç¨ç¼ºç¹",slug:"åè¿ç¨ç¼ºç¹",normalizedTitle:"åè¿ç¨ç¼ºç¹",charIndex:426},{level:3,title:"å¤è¿ç¨ç¹ç¹",slug:"å¤è¿ç¨ç¹ç¹",normalizedTitle:"å¤è¿ç¨ç¹ç¹",charIndex:516},{level:2,title:"æµè§å¨æ¸²æè¿ç¨",slug:"æµè§å¨æ¸²æè¿ç¨",normalizedTitle:"æµè§å¨æ¸²æè¿ç¨",charIndex:594},{level:3,title:"å¯¼èªæµç¨",slug:"å¯¼èªæµç¨",normalizedTitle:"å¯¼èªæµç¨",charIndex:606},{level:3,title:"è§£ææµç¨",slug:"è§£ææµç¨",normalizedTitle:"è§£ææµç¨",charIndex:617},{level:2,title:"åæµä¸éç»",slug:"åæµä¸éç»",normalizedTitle:"åæµä¸éç»",charIndex:2566},{level:3,title:"reflowï¼åæµï¼",slug:"reflow-åæµ",normalizedTitle:"reflowï¼åæµï¼",charIndex:2576},{level:3,title:"repaintï¼éç»ï¼",slug:"repaint-éç»",normalizedTitle:"repaintï¼éç»ï¼",charIndex:2880},{level:2,title:"CSS ç¡¬ä»¶å é",slug:"css-ç¡¬ä»¶å é",normalizedTitle:"css ç¡¬ä»¶å é",charIndex:3330},{level:2,title:"js ä¼é»å¡ dom",slug:"js-ä¼é»å¡-dom",normalizedTitle:"js ä¼é»å¡ dom",charIndex:3802},{level:2,title:"css ä¸ä¼é»å¡ dom è§£æä½ä¼é»å¡æ¸²æ",slug:"css-ä¸ä¼é»å¡-dom-è§£æä½ä¼é»å¡æ¸²æ",normalizedTitle:"css ä¸ä¼é»å¡ dom è§£æä½ä¼é»å¡æ¸²æ",charIndex:4065},{level:2,title:"scriptæ ç­¾ä¸­çasyncï¼defer",slug:"scriptæ ç­¾ä¸­çasync-defer",normalizedTitle:"scriptæ ç­¾ä¸­çasyncï¼defer",charIndex:4249}],lastUpdated:"2/15/2023, 7:28:18 PM",lastUpdatedTimestamp:1676460498e3,headersStr:"æµè§å¨å¤è¿ç¨æ¶æ åè¿ç¨ç¼ºç¹ å¤è¿ç¨ç¹ç¹ æµè§å¨æ¸²æè¿ç¨ å¯¼èªæµç¨ è§£ææµç¨ åæµä¸éç» reflowï¼åæµï¼ repaintï¼éç»ï¼ CSS ç¡¬ä»¶å é js ä¼é»å¡ dom css ä¸ä¼é»å¡ dom è§£æä½ä¼é»å¡æ¸²æ scriptæ ç­¾ä¸­çasyncï¼defer",content:"# æµè§å¨æ¸²æç¸å³\n\n\n# æµè§å¨å¤è¿ç¨æ¶æ\n\nä¸æçæChromeæµè§å¨è¿è¡æºå¶ï¼å¦ä½æ¥çè¿ç¨ï¼æµè§å¨ä¸­å³ä¸è§æ´å¤å·¥å· => ä»»å¡ç®¡çå¨\n\n * Browersä¸»è¿ç¨ï¼è´è´£çé¢æ¾ç¤ºï¼ç¨æ·äº¤äºï¼å­è¿ç¨ç®¡çï¼åæ¶æä¾å­å¨ç­åè½\n * æ¸²æè¿ç¨ï¼ä¸ä¸ªtabçªå£å¯¹åºä¸ä¸ª(ä¸ä¸å®ï¼ç½ç«éç¦»)ï¼æ ¸å¿ä»»å¡æ¯å° html è½¬æ¢ä¸ºç¨æ·å¯ä»¥ä¸ä¹äº¤äºçç½é¡µ\n * GPUè¿ç¨ï¼åªæä¸ä¸ªï¼å®ç°ç½é¡µï¼UIçé¢çç¡¬ä»¶ç»å¶\n * æä»¶è¿ç¨ï¼ä¸»è¦è´è´£æä»¶çè¿è¡ï¼æ¯ä¸ä¸ªæä»¶å¯¹åºä¸ä¸ªè¿ç¨\n * ç½ç»è¿ç¨ï¼ä¸»è¦è´è´£é¡µé¢çç½ç»èµæºå è½½\n\n> æµè§å¨ä¸»è¿ç¨æå¾å¤è´è´£ä¸åå·¥ä½ççº¿ç¨ï¼worker threadï¼å¶ä¸­åæ¬ç»å¶æµè§å¨é¡¶é¨æé®åå¯¼èªæ è¾å¥æ¡ç­ç»ä»¶çUIçº¿ç¨ï¼UI threadï¼ãç®¡çç½ç»è¯·æ±çç½ç»çº¿ç¨ï¼network threadï¼ãä»¥åæ§å¶æä»¶è¯»åçå­å¨çº¿ç¨ï¼storage threadï¼ç­ãå½ä½ å¨å¯¼èªæ éé¢è¾å¥ä¸ä¸ªURLçæ¶åï¼å¶å®å°±æ¯UIçº¿ç¨å¨å¤çä½ çè¾å¥ã\n\n\n# åè¿ç¨ç¼ºç¹\n\n * ä¸ç¨³å®ï¼åä¸è¿ç¨ä¸­ï¼ä»»ä½çº¿ç¨ææ¨¡åçå´©æºå°å¯¼è´æ´ä¸ªè¿ç¨çå´©æº\n * ä¸æµçï¼ä»»å¡ææ¥ï¼åå­æ³é²\n * ä¸å®å¨ï¼ç¨CæC++åçæä»¶å¯ä»¥è·åæä½ç³»ç»èµæº\n\n\n# å¤è¿ç¨ç¹ç¹\n\n * è§£å³äºç¨³å®æ§ï¼æµçæ§ï¼å®å¨æ§çé®é¢\n * å¸¦æ¥äºæ´å¤çèµæºå ç¨\n * å¸¦æ¥äºæ´å¤æçä½ç³»æ¶æï¼æ¨¡åç´æ¥è¦ååº¦é«ï¼å¯æ©å±æ§éä½ï¼\n\n\n# æµè§å¨æ¸²æè¿ç¨\n\n\n# å¯¼èªæµç¨\n\n\n\n\n# è§£ææµç¨\n\n\n\n> è§£æhtmlä»¥æå»ºdomæ  -> æå»ºrenderæ  -> å¸å±renderæ  -> ç»å¶renderæ \n\n * DOM Treeï¼æµè§å¨å°HTMLè§£æææ å½¢çæ°æ®ç»æã\n\n * CSS Rule Treeï¼æµè§å¨å°CSSè§£æææ å½¢çæ°æ®ç»æã\n\n * Render Tree: DOMåCSSåå¹¶åçæRender Treeã\n\n * layout: æäºRender Treeï¼æµè§å¨å·²ç»è½ç¥éç½é¡µä¸­æåªäºèç¹ãåä¸ªèç¹çCSSå®ä¹ä»¥åä»ä»¬çä»å±å³ç³»ï¼ä»èå»è®¡ç®åºæ¯ä¸ªèç¹å¨å±å¹ä¸­çä½ç½®\n\n * painting: ä¸»çº¿ç¨ä¼éåä¹åå¾å°çå¸å±æ ï¼layout treeï¼æ¥çæä¸ç³»åçç»ç»è®°å½ï¼paint recordsï¼ãç±»ä¼¼äºcanvasã\n\n * åæä¸åæ åï¼ä¸æ¦é¡µé¢çå±æ¬¡æ åå»ºåºæ¥å¹¶ä¸é¡µé¢åç´ çç»å¶é¡ºåºç¡®å®åï¼ä¸»çº¿ç¨å°±ä¼ååæçº¿ç¨ï¼compositor threadï¼æäº¤è¿äºä¿¡æ¯ãç¶ååæçº¿ç¨å°±ä¼åæ åé¡µé¢çæ¯ä¸å±ãå ä¸ºé¡µé¢çä¸å±å¯è½ææ´ä¸ªç½é¡µé£ä¹å¤§ï¼æä»¥åæçº¿ç¨éè¦å°å®ä»¬ååä¸ºä¸ååä¸åçå°å¾åï¼tilesï¼ç¶åå°å¾ååéç»ä¸ç³»ååæ çº¿ç¨ï¼raster threadsï¼ãåæ çº¿ç¨ä¼æ æ ¼åæ¯ä¸ªå¾åå¹¶ä¸æå®ä»¬å­å¨å¨GPUçåå­ä¸­ã\n   \n   å½å¾å±ä¸é¢çå¾åé½è¢«æ æ ¼ååï¼åæçº¿ç¨ä¼æ¶éå¾åä¸é¢å«åç»ç»åè¾¹å½¢ï¼draw quadsï¼çä¿¡æ¯æ¥æå»ºä¸ä¸ªåæå¸§ï¼compositor frameï¼ã\n   \n   åæå¸§æå»ºå®æä¹åï¼åæçº¿ç¨å°±ä¼éè¿IPCåæµè§å¨è¿ç¨æäº¤ï¼commitï¼ä¸ä¸ªæ¸²æå¸§ï¼åæå¸§ä¼è¢«åéç»GPUä»èå±ç¤ºå¨å±å¹ä¸ã\n   \n   > å°ç»å¶ä¿¡æ¯è½¬åä¸ºæ¾ç¤ºå¨çåç´ çè¿ç¨å«ååæ åï¼rasterizingï¼ã\n   > \n   > å¯è½ä¸ä¸ªæç®åçåæ³å°±æ¯åªåæ åè§å£åï¼viewportï¼çç½é¡µåå®¹ãå¦æç¨æ·è¿è¡äºé¡µé¢æ»å¨ï¼å°±ç§»å¨åæ å¸§ï¼rastered frameï¼å¹¶ä¸åæ åæ´å¤çåå®¹ä»¥è¡¥ä¸é¡µé¢ç¼ºå¤±çé¨åãChromeçç¬¬ä¸ä¸ªçæ¬å¶å®å°±æ¯è¿æ ·åçãç¶èï¼å¯¹äºç°ä»£çæµè§å¨æ¥è¯´ï¼å®ä»¬å¾å¾éåä¸ç§æ´å å¤æçå«ååæï¼compositingï¼çåæ³ã\n   > \n   > åææ¯ä¸ç§å°é¡µé¢åæè¥å¹²å±ï¼ç¶ååå«å¯¹å®ä»¬è¿è¡åæ åï¼æåå¨ä¸ä¸ªåç¬ççº¿ç¨ - åæçº¿ç¨éé¢åå¹¶æä¸ä¸ªé¡µé¢çææ¯ãå½ç¨æ·æ»å¨é¡µé¢æ¶ï¼ç±äºé¡µé¢åä¸ªå±é½å·²ç»è¢«åæ åäºï¼æµè§å¨éè¦åçåªæ¯åæä¸ä¸ªæ°çå¸§æ¥å±ç¤ºæ»å¨åçææç½¢äºãé¡µé¢çå¨ç»ææå®ç°ä¹æ¯ç±»ä¼¼ï¼å°é¡µé¢ä¸çå±è¿è¡ç§»å¨å¹¶æå»ºåºä¸ä¸ªæ°çå¸§å³å¯ã\n\nç»¼ä¸æè¿°ï¼æ¸²æè¿ç¨å±æä¸ä¸ªçº¿ç¨åä¸å·¥ä½ï¼è§£æ html å° painting ä»¥ä¸è¿ç¨é½æ¯å¨ä¸»çº¿ç¨æ§è¡çï¼èåæååæ ååå«æåæçº¿ç¨ååæ åçº¿ç¨å¤çã\n\n\n\n * Compositor Thread\n   \n   é¦åå°é¡µé¢åæè¥å¹²å±ï¼ç¶åååä¸ºä¸ååä¸åçå°å¾åï¼ç¶åå°å¾ååéç»åæ çº¿ç¨ãå½å¾å±ä¸é¢çå¾åé½è¢«æ æ ¼ååï¼åæçº¿ç¨ä¼æ¶éç»ç»åè¾¹å½¢çä¿¡æ¯æ¥æå»ºä¸ä¸ªåæå¸§ãåæå¸§æå»ºå®æä¹åï¼åæçº¿ç¨å°±ä¼åæµè§å¨è¿ç¨æäº¤ä¸ä¸ªæ¸²æå¸§ï¼åæå¸§ä¼è¢«åéç»GPUä»èå±ç¤ºå¨å±å¹ä¸ã\n\n * Main Thread\n   \n   \n   \n   è¿éå¤§å®¶å°±å¾çæäºï¼chrome devtoolsçTimelineéMainé£ä¸æ æ¾ç¤ºçåå®¹å°±æ¯Main Threadå®æçç¸å³ä»»å¡ï¼ææ®µJSçæ§è¡ãRecalculate StyleãUpdate Layer TreeãPaintãComposite Layersç­ç­ã\n\n * Compositor Tile Worker(s) å¯è½æä¸ä¸ªæå¤ä¸ªçº¿ç¨ï¼æ¯å¦PCç«¯çchromeæ¯2ä¸ªæ4ä¸ªï¼å®ååsafariä¸º1ä¸ªæ2ä¸ªä¸ç­ãæ¯ç±Compositor Threadåå»ºçï¼ä¸é¨ç¨æ¥å¤çtileï¼å°å¾åï¼ çRasterizationï¼åæè¯´è¿çåæ åï¼ã\n\nå¯ä»¥çå°Compositor Threadæ¯ä¸ä¸ªå¾æ ¸å¿çä¸è¥¿ï¼åé¢çä¿©çº¿ç¨é½æ¯ç±ä»ä¸»è¦è¿è¡æ§å¶çã åæ¶ï¼ç¨æ·è¾å¥æ¯ç´æ¥è¿å¥Compositor Threadçï¼ä¸æ¹é¢å¨é£äºä¸éè¦æ§è¡JSæèæ²¡æCSSå¨ç»ãä¸éç»ç­çåºæ¯æ¶ï¼å¯ä»¥ç´æ¥å¯¹ç¨æ·è¾å¥è¿è¡å¤çåååºï¼èMain Threadæ¯æå¾å¤æçä»»å¡æµç¨çãè¿ä½¿å¾æµè§å¨å¯ä»¥å¿«éååºç¨æ·çæ»å¨ãæå­ç­ç­è¾å¥ï¼å®å¨ä¸ç¨è¿ä¸»çº¿ç¨ãå°±æ¯å¦è¯´jså¨ç»è¦èµ°ä¸»çº¿ç¨ï¼csså¨ç»æçä¸ä¼èµ°ä¸»çº¿ç¨ï¼ç´æ¥å¨ Compositor Thread ä¸­å®æ\n\n> æä»¥è¯´ css å¨ç»ä¼ä¸ä¼è¢« js é»å¡å¢ï¼ç­æ¡æ¯ææ¶ä¼ææ¶ä¸ä¼ï¼æ¯å¦ transformï¼opacityï¼filterãtransformå¨GPUç´æ¥åå»ºä¸ä¸ªæ°çå±\n\n\n# åæµä¸éç»\n\n\n# reflowï¼åæµï¼\n\nå½æµè§å¨åç°æä¸ªé¨ååçäºç¹ååå½±åäºå¸å±ï¼éè¦ååå»éæ°æ¸²æï¼åè¡ç§°è¿ä¸ªåéçè¿ç¨å« reflowãreflow ä¼ä» html è¿ä¸ª root frame å¼å§éå½å¾ä¸ï¼ä¾æ¬¡è®¡ç®ææçç»ç¹å ä½å°ºå¯¸åä½ç½®ãreflow å ä¹æ¯æ æ³é¿åçãç°å¨çé¢ä¸æµè¡çä¸äºææï¼æ¯å¦æ ç¶ç®å½çæå ãå±å¼ï¼å®è´¨ä¸æ¯åç´ çæ¾ç¤ºä¸éèï¼ç­ï¼é½å°å¼èµ·æµè§å¨ç reflowãé¼ æ æ»è¿ãç¹å»â¦â¦åªè¦è¿äºè¡ä¸ºå¼èµ·äºé¡µé¢ä¸æäºåç´ çå ä½é¢ç§¯ãå®ä½æ¹å¼ãè¾¹è·ç­å±æ§çååï¼é½ä¼å¼èµ·å®åé¨ãå¨å´çè³æ´ä¸ªé¡µé¢çéæ°æ¸² æãéå¸¸æä»¬é½æ æ³é¢ä¼°æµè§å¨å°åºä¼ reflow åªä¸é¨åçä»£ç ï¼å®ä»¬é½å½¼æ­¤ç¸äºå½±åçã\n\n\n# repaintï¼éç»ï¼\n\næ¹åæä¸ªåç´ çèæ¯è²ãæå­é¢è²ãè¾¹æ¡é¢è²ç­ç­ä¸å½±åå®å¨å´æåé¨å¸å±çå±æ§æ¶ï¼å±å¹çä¸é¨åè¦éç»ï¼ä½æ¯åç´ çå ä½å°ºå¯¸æ²¡æåã\n\nåªäºå±æ§ä¼è§¦ååæµä¸éç»\n\n(1)display:none çèç¹ä¸ä¼è¢«å å¥Render Treeï¼èvisibility: hidden åä¼ï¼æä»¥ï¼å¦ææä¸ªèç¹æå¼å§æ¯ä¸æ¾ç¤ºçï¼è®¾ä¸ºdisplay:noneæ¯æ´ä¼çã\n\n(2)display:none ä¼è§¦å reflowï¼è visibility:hidden åªä¼è§¦å repaintï¼å ä¸ºæ²¡æåç°ä½ç½®ååã\n\n(3)æäºæåµä¸ï¼æ¯å¦ä¿®æ¹äºåç´ çæ ·å¼ï¼æµè§å¨å¹¶ä¸ä¼ç«å»reflow æ repaint ä¸æ¬¡ï¼æµè§å¨ä¼ç»´æ¤1ä¸ªéåï¼æææä¼å¼èµ·åæµãéç»çæä½æ¾å¥è¿ä¸ªéåï¼ç­éåä¸­çæä½å°äºä¸å®çæ°éæèå°äºä¸å®çæ¶é´é´éï¼æµè§å¨å°±ä¼flushéåï¼è¿è¡ä¸ä¸ªæ¹å¤çãä½æ¯å¨æäºæåµä¸ï¼æ¯å¦resize çªå£ï¼æ¹åäºé¡µé¢é»è®¤çå­ä½ç­ãå¯¹äºè¿äºæä½ï¼æµè§å¨ä¼é©¬ä¸è¿è¡ reflowã\n\n\n\n# CSS ç¡¬ä»¶å é\n\nCSS3 ç¡¬ä»¶å éåå«å GPU å éï¼æ¯å©ç¨ GPU è¿è¡æ¸²æï¼åå° CPU æä½çä¸ç§ä¼åæ¹æ¡ãç±äº GPU ä¸­ç transform3d ç­ CSS å±æ§ä¸ä¼è§¦å repaintï¼æä»¥è½å¤§å¤§æé«ç½é¡µçæ§è½ã\n\nå¨ GPU æ¸²æçè¿ç¨ä¸­ï¼ä¸äºåç´ ä¼å ä¸ºç¬¦åäºæäºè§åï¼èè¢«æåä¸ºç¬ç«çå± ï¼ä¸æ¦ç¬ç«åºæ¥ï¼å°±ä¸ä¼å½±åå¶å® DOM çå¸å±ï¼ä¸»çº¿ç¨ï¼ï¼æä»¥æä»¬å¯ä»¥å©ç¨è¿äºè§åï¼å°ç»å¸¸åæ¢ç DOM ä¸»å¨æåå°ç¬ç«çå±ï¼é£ä¹å¨æµè§å¨çä¸å¸§è¿è¡ä¸­ï¼å°±å¯ä»¥åå° Layout å Paint çæ¶é´äºã\n\nå¦ä¸å ä¸ªcsså±æ§å¯ä»¥è§¦åç¡¬ä»¶å éï¼\n\n * transformï¼ translate3dãtranslateZ(0)ç­ï¼\n * opacity\n * filterï¼æ»¤éï¼drop-shadow()ãopacity()ï¼å½æ°ä¸å·²æçbox-shadowãopacityå±æ§å¾ç¸ä¼¼ï¼ä¸åä¹å¤å¨äºï¼éè¿æ»¤éï¼ä¸äºæµè§å¨ä¸ºäºæ´å¥½çæ§è½ä¼æä¾ç¡¬ä»¶å éï¼\n * will-changeï¼åªä¸ä¸ªå±æ§å³å°åçååï¼è¿èè¿è¡ä¼åã\n\n\n# js ä¼é»å¡ dom\n\n * ç°ä»£æµè§å¨ä¼å¹¶è¡å è½½jsæä»¶ï¼ä½æ¯æç§ä¹¦åé¡ºåºæ§è¡ä»£ç \n * å è½½æèæ§è¡jsæ¶ä¼é»å¡å¯¹æ ç­¾çè§£æï¼ä¹å°±æ¯é»å¡äºdomæ çå½¢æï¼åªæç­å°jsæ§è¡å®æ¯ï¼æµè§å¨æä¼ç»§ç»­è§£ææ ç­¾ãæ²¡ædomæ ï¼æµè§å¨å°±æ æ³æ¸²æï¼æä»¥å½å è½½å¾å¤§çjsæä»¶æ¶ï¼å¯ä»¥çå°é¡µé¢å¾é¿æ¶é´æ¯ä¸çç©ºç½\n * ä¹æä»¥ä¼é»å¡å¯¹æ ç­¾çè§£ææ¯å ä¸ºå è½½çjsä¸­å¯è½ä¼åå»ºï¼å é¤èç¹ç­ï¼è¿äºæä½ä¼å¯¹domæ äº§çå½±åï¼å¦æä¸é»å¡ï¼ç­æµè§å¨è§£æå®æ ç­¾çædomæ åï¼jsä¿®æ¹äºæäºèç¹ï¼é£ä¹æµè§å¨åå¾éæ°è§£æï¼ç¶åçædomæ ï¼æ§è½æ¯è¾å·®\n\n\n# css ä¸ä¼é»å¡ dom è§£æä½ä¼é»å¡æ¸²æ\n\n * å ä¸ºéè¦å·æ DOM ä»¥å CSSOM æä¼æå»ºæ¸²ææ ï¼å è½½ css çæ¶åè¯å®æ æ³ç»§ç»­æ¸²æ\n\n> ä¸ºä»ä¹æ js æ¾å¨åºé¨ï¼css æ¾å¨é¡¶é¨\n\nJs æ¾å¨é¡¶é¨ä¼é»å¡ dom çæ¸²æï¼æµè§å¨å¯è½ä¸ç´è½¬ååï¼è css ä¸ä¼é»å¡ dom è§£æã\n\næä»¬ä¼å° js æ¾å¨åé¢ï¼ä»¥åå°First Paintçæ¶é´\n\n\n# scriptæ ç­¾ä¸­çasyncï¼defer\n\n * scriptæ ç­¾ä¸­çasyncï¼defer\n\n",normalizedContent:"# æµè§å¨æ¸²æç¸å³\n\n\n# æµè§å¨å¤è¿ç¨æ¶æ\n\nä¸æçæchromeæµè§å¨è¿è¡æºå¶ï¼å¦ä½æ¥çè¿ç¨ï¼æµè§å¨ä¸­å³ä¸è§æ´å¤å·¥å· => ä»»å¡ç®¡çå¨\n\n * browersä¸»è¿ç¨ï¼è´è´£çé¢æ¾ç¤ºï¼ç¨æ·äº¤äºï¼å­è¿ç¨ç®¡çï¼åæ¶æä¾å­å¨ç­åè½\n * æ¸²æè¿ç¨ï¼ä¸ä¸ªtabçªå£å¯¹åºä¸ä¸ª(ä¸ä¸å®ï¼ç½ç«éç¦»)ï¼æ ¸å¿ä»»å¡æ¯å° html è½¬æ¢ä¸ºç¨æ·å¯ä»¥ä¸ä¹äº¤äºçç½é¡µ\n * gpuè¿ç¨ï¼åªæä¸ä¸ªï¼å®ç°ç½é¡µï¼uiçé¢çç¡¬ä»¶ç»å¶\n * æä»¶è¿ç¨ï¼ä¸»è¦è´è´£æä»¶çè¿è¡ï¼æ¯ä¸ä¸ªæä»¶å¯¹åºä¸ä¸ªè¿ç¨\n * ç½ç»è¿ç¨ï¼ä¸»è¦è´è´£é¡µé¢çç½ç»èµæºå è½½\n\n> æµè§å¨ä¸»è¿ç¨æå¾å¤è´è´£ä¸åå·¥ä½ççº¿ç¨ï¼worker threadï¼å¶ä¸­åæ¬ç»å¶æµè§å¨é¡¶é¨æé®åå¯¼èªæ è¾å¥æ¡ç­ç»ä»¶çuiçº¿ç¨ï¼ui threadï¼ãç®¡çç½ç»è¯·æ±çç½ç»çº¿ç¨ï¼network threadï¼ãä»¥åæ§å¶æä»¶è¯»åçå­å¨çº¿ç¨ï¼storage threadï¼ç­ãå½ä½ å¨å¯¼èªæ éé¢è¾å¥ä¸ä¸ªurlçæ¶åï¼å¶å®å°±æ¯uiçº¿ç¨å¨å¤çä½ çè¾å¥ã\n\n\n# åè¿ç¨ç¼ºç¹\n\n * ä¸ç¨³å®ï¼åä¸è¿ç¨ä¸­ï¼ä»»ä½çº¿ç¨ææ¨¡åçå´©æºå°å¯¼è´æ´ä¸ªè¿ç¨çå´©æº\n * ä¸æµçï¼ä»»å¡ææ¥ï¼åå­æ³é²\n * ä¸å®å¨ï¼ç¨cæc++åçæä»¶å¯ä»¥è·åæä½ç³»ç»èµæº\n\n\n# å¤è¿ç¨ç¹ç¹\n\n * è§£å³äºç¨³å®æ§ï¼æµçæ§ï¼å®å¨æ§çé®é¢\n * å¸¦æ¥äºæ´å¤çèµæºå ç¨\n * å¸¦æ¥äºæ´å¤æçä½ç³»æ¶æï¼æ¨¡åç´æ¥è¦ååº¦é«ï¼å¯æ©å±æ§éä½ï¼\n\n\n# æµè§å¨æ¸²æè¿ç¨\n\n\n# å¯¼èªæµç¨\n\n\n\n\n# è§£ææµç¨\n\n\n\n> è§£æhtmlä»¥æå»ºdomæ  -> æå»ºrenderæ  -> å¸å±renderæ  -> ç»å¶renderæ \n\n * dom treeï¼æµè§å¨å°htmlè§£æææ å½¢çæ°æ®ç»æã\n\n * css rule treeï¼æµè§å¨å°cssè§£æææ å½¢çæ°æ®ç»æã\n\n * render tree: domåcssåå¹¶åçærender treeã\n\n * layout: æäºrender treeï¼æµè§å¨å·²ç»è½ç¥éç½é¡µä¸­æåªäºèç¹ãåä¸ªèç¹çcsså®ä¹ä»¥åä»ä»¬çä»å±å³ç³»ï¼ä»èå»è®¡ç®åºæ¯ä¸ªèç¹å¨å±å¹ä¸­çä½ç½®\n\n * painting: ä¸»çº¿ç¨ä¼éåä¹åå¾å°çå¸å±æ ï¼layout treeï¼æ¥çæä¸ç³»åçç»ç»è®°å½ï¼paint recordsï¼ãç±»ä¼¼äºcanvasã\n\n * åæä¸åæ åï¼ä¸æ¦é¡µé¢çå±æ¬¡æ åå»ºåºæ¥å¹¶ä¸é¡µé¢åç´ çç»å¶é¡ºåºç¡®å®åï¼ä¸»çº¿ç¨å°±ä¼ååæçº¿ç¨ï¼compositor threadï¼æäº¤è¿äºä¿¡æ¯ãç¶ååæçº¿ç¨å°±ä¼åæ åé¡µé¢çæ¯ä¸å±ãå ä¸ºé¡µé¢çä¸å±å¯è½ææ´ä¸ªç½é¡µé£ä¹å¤§ï¼æä»¥åæçº¿ç¨éè¦å°å®ä»¬ååä¸ºä¸ååä¸åçå°å¾åï¼tilesï¼ç¶åå°å¾ååéç»ä¸ç³»ååæ çº¿ç¨ï¼raster threadsï¼ãåæ çº¿ç¨ä¼æ æ ¼åæ¯ä¸ªå¾åå¹¶ä¸æå®ä»¬å­å¨å¨gpuçåå­ä¸­ã\n   \n   å½å¾å±ä¸é¢çå¾åé½è¢«æ æ ¼ååï¼åæçº¿ç¨ä¼æ¶éå¾åä¸é¢å«åç»ç»åè¾¹å½¢ï¼draw quadsï¼çä¿¡æ¯æ¥æå»ºä¸ä¸ªåæå¸§ï¼compositor frameï¼ã\n   \n   åæå¸§æå»ºå®æä¹åï¼åæçº¿ç¨å°±ä¼éè¿ipcåæµè§å¨è¿ç¨æäº¤ï¼commitï¼ä¸ä¸ªæ¸²æå¸§ï¼åæå¸§ä¼è¢«åéç»gpuä»èå±ç¤ºå¨å±å¹ä¸ã\n   \n   > å°ç»å¶ä¿¡æ¯è½¬åä¸ºæ¾ç¤ºå¨çåç´ çè¿ç¨å«ååæ åï¼rasterizingï¼ã\n   > \n   > å¯è½ä¸ä¸ªæç®åçåæ³å°±æ¯åªåæ åè§å£åï¼viewportï¼çç½é¡µåå®¹ãå¦æç¨æ·è¿è¡äºé¡µé¢æ»å¨ï¼å°±ç§»å¨åæ å¸§ï¼rastered frameï¼å¹¶ä¸åæ åæ´å¤çåå®¹ä»¥è¡¥ä¸é¡µé¢ç¼ºå¤±çé¨åãchromeçç¬¬ä¸ä¸ªçæ¬å¶å®å°±æ¯è¿æ ·åçãç¶èï¼å¯¹äºç°ä»£çæµè§å¨æ¥è¯´ï¼å®ä»¬å¾å¾éåä¸ç§æ´å å¤æçå«ååæï¼compositingï¼çåæ³ã\n   > \n   > åææ¯ä¸ç§å°é¡µé¢åæè¥å¹²å±ï¼ç¶ååå«å¯¹å®ä»¬è¿è¡åæ åï¼æåå¨ä¸ä¸ªåç¬ççº¿ç¨ - åæçº¿ç¨éé¢åå¹¶æä¸ä¸ªé¡µé¢çææ¯ãå½ç¨æ·æ»å¨é¡µé¢æ¶ï¼ç±äºé¡µé¢åä¸ªå±é½å·²ç»è¢«åæ åäºï¼æµè§å¨éè¦åçåªæ¯åæä¸ä¸ªæ°çå¸§æ¥å±ç¤ºæ»å¨åçææç½¢äºãé¡µé¢çå¨ç»ææå®ç°ä¹æ¯ç±»ä¼¼ï¼å°é¡µé¢ä¸çå±è¿è¡ç§»å¨å¹¶æå»ºåºä¸ä¸ªæ°çå¸§å³å¯ã\n\nç»¼ä¸æè¿°ï¼æ¸²æè¿ç¨å±æä¸ä¸ªçº¿ç¨åä¸å·¥ä½ï¼è§£æ html å° painting ä»¥ä¸è¿ç¨é½æ¯å¨ä¸»çº¿ç¨æ§è¡çï¼èåæååæ ååå«æåæçº¿ç¨ååæ åçº¿ç¨å¤çã\n\n\n\n * compositor thread\n   \n   é¦åå°é¡µé¢åæè¥å¹²å±ï¼ç¶åååä¸ºä¸ååä¸åçå°å¾åï¼ç¶åå°å¾ååéç»åæ çº¿ç¨ãå½å¾å±ä¸é¢çå¾åé½è¢«æ æ ¼ååï¼åæçº¿ç¨ä¼æ¶éç»ç»åè¾¹å½¢çä¿¡æ¯æ¥æå»ºä¸ä¸ªåæå¸§ãåæå¸§æå»ºå®æä¹åï¼åæçº¿ç¨å°±ä¼åæµè§å¨è¿ç¨æäº¤ä¸ä¸ªæ¸²æå¸§ï¼åæå¸§ä¼è¢«åéç»gpuä»èå±ç¤ºå¨å±å¹ä¸ã\n\n * main thread\n   \n   \n   \n   è¿éå¤§å®¶å°±å¾çæäºï¼chrome devtoolsçtimelineémainé£ä¸æ æ¾ç¤ºçåå®¹å°±æ¯main threadå®æçç¸å³ä»»å¡ï¼ææ®µjsçæ§è¡ãrecalculate styleãupdate layer treeãpaintãcomposite layersç­ç­ã\n\n * compositor tile worker(s) å¯è½æä¸ä¸ªæå¤ä¸ªçº¿ç¨ï¼æ¯å¦pcç«¯çchromeæ¯2ä¸ªæ4ä¸ªï¼å®ååsafariä¸º1ä¸ªæ2ä¸ªä¸ç­ãæ¯ç±compositor threadåå»ºçï¼ä¸é¨ç¨æ¥å¤çtileï¼å°å¾åï¼ çrasterizationï¼åæè¯´è¿çåæ åï¼ã\n\nå¯ä»¥çå°compositor threadæ¯ä¸ä¸ªå¾æ ¸å¿çä¸è¥¿ï¼åé¢çä¿©çº¿ç¨é½æ¯ç±ä»ä¸»è¦è¿è¡æ§å¶çã åæ¶ï¼ç¨æ·è¾å¥æ¯ç´æ¥è¿å¥compositor threadçï¼ä¸æ¹é¢å¨é£äºä¸éè¦æ§è¡jsæèæ²¡æcsså¨ç»ãä¸éç»ç­çåºæ¯æ¶ï¼å¯ä»¥ç´æ¥å¯¹ç¨æ·è¾å¥è¿è¡å¤çåååºï¼èmain threadæ¯æå¾å¤æçä»»å¡æµç¨çãè¿ä½¿å¾æµè§å¨å¯ä»¥å¿«éååºç¨æ·çæ»å¨ãæå­ç­ç­è¾å¥ï¼å®å¨ä¸ç¨è¿ä¸»çº¿ç¨ãå°±æ¯å¦è¯´jså¨ç»è¦èµ°ä¸»çº¿ç¨ï¼csså¨ç»æçä¸ä¼èµ°ä¸»çº¿ç¨ï¼ç´æ¥å¨ compositor thread ä¸­å®æ\n\n> æä»¥è¯´ css å¨ç»ä¼ä¸ä¼è¢« js é»å¡å¢ï¼ç­æ¡æ¯ææ¶ä¼ææ¶ä¸ä¼ï¼æ¯å¦ transformï¼opacityï¼filterãtransformå¨gpuç´æ¥åå»ºä¸ä¸ªæ°çå±\n\n\n# åæµä¸éç»\n\n\n# reflowï¼åæµï¼\n\nå½æµè§å¨åç°æä¸ªé¨ååçäºç¹ååå½±åäºå¸å±ï¼éè¦ååå»éæ°æ¸²æï¼åè¡ç§°è¿ä¸ªåéçè¿ç¨å« reflowãreflow ä¼ä» html è¿ä¸ª root frame å¼å§éå½å¾ä¸ï¼ä¾æ¬¡è®¡ç®ææçç»ç¹å ä½å°ºå¯¸åä½ç½®ãreflow å ä¹æ¯æ æ³é¿åçãç°å¨çé¢ä¸æµè¡çä¸äºææï¼æ¯å¦æ ç¶ç®å½çæå ãå±å¼ï¼å®è´¨ä¸æ¯åç´ çæ¾ç¤ºä¸éèï¼ç­ï¼é½å°å¼èµ·æµè§å¨ç reflowãé¼ æ æ»è¿ãç¹å»â¦â¦åªè¦è¿äºè¡ä¸ºå¼èµ·äºé¡µé¢ä¸æäºåç´ çå ä½é¢ç§¯ãå®ä½æ¹å¼ãè¾¹è·ç­å±æ§çååï¼é½ä¼å¼èµ·å®åé¨ãå¨å´çè³æ´ä¸ªé¡µé¢çéæ°æ¸² æãéå¸¸æä»¬é½æ æ³é¢ä¼°æµè§å¨å°åºä¼ reflow åªä¸é¨åçä»£ç ï¼å®ä»¬é½å½¼æ­¤ç¸äºå½±åçã\n\n\n# repaintï¼éç»ï¼\n\næ¹åæä¸ªåç´ çèæ¯è²ãæå­é¢è²ãè¾¹æ¡é¢è²ç­ç­ä¸å½±åå®å¨å´æåé¨å¸å±çå±æ§æ¶ï¼å±å¹çä¸é¨åè¦éç»ï¼ä½æ¯åç´ çå ä½å°ºå¯¸æ²¡æåã\n\nåªäºå±æ§ä¼è§¦ååæµä¸éç»\n\n(1)display:none çèç¹ä¸ä¼è¢«å å¥render treeï¼èvisibility: hidden åä¼ï¼æä»¥ï¼å¦ææä¸ªèç¹æå¼å§æ¯ä¸æ¾ç¤ºçï¼è®¾ä¸ºdisplay:noneæ¯æ´ä¼çã\n\n(2)display:none ä¼è§¦å reflowï¼è visibility:hidden åªä¼è§¦å repaintï¼å ä¸ºæ²¡æåç°ä½ç½®ååã\n\n(3)æäºæåµä¸ï¼æ¯å¦ä¿®æ¹äºåç´ çæ ·å¼ï¼æµè§å¨å¹¶ä¸ä¼ç«å»reflow æ repaint ä¸æ¬¡ï¼æµè§å¨ä¼ç»´æ¤1ä¸ªéåï¼æææä¼å¼èµ·åæµãéç»çæä½æ¾å¥è¿ä¸ªéåï¼ç­éåä¸­çæä½å°äºä¸å®çæ°éæèå°äºä¸å®çæ¶é´é´éï¼æµè§å¨å°±ä¼flushéåï¼è¿è¡ä¸ä¸ªæ¹å¤çãä½æ¯å¨æäºæåµä¸ï¼æ¯å¦resize çªå£ï¼æ¹åäºé¡µé¢é»è®¤çå­ä½ç­ãå¯¹äºè¿äºæä½ï¼æµè§å¨ä¼é©¬ä¸è¿è¡ reflowã\n\n\n\n# css ç¡¬ä»¶å é\n\ncss3 ç¡¬ä»¶å éåå«å gpu å éï¼æ¯å©ç¨ gpu è¿è¡æ¸²æï¼åå° cpu æä½çä¸ç§ä¼åæ¹æ¡ãç±äº gpu ä¸­ç transform3d ç­ css å±æ§ä¸ä¼è§¦å repaintï¼æä»¥è½å¤§å¤§æé«ç½é¡µçæ§è½ã\n\nå¨ gpu æ¸²æçè¿ç¨ä¸­ï¼ä¸äºåç´ ä¼å ä¸ºç¬¦åäºæäºè§åï¼èè¢«æåä¸ºç¬ç«çå± ï¼ä¸æ¦ç¬ç«åºæ¥ï¼å°±ä¸ä¼å½±åå¶å® dom çå¸å±ï¼ä¸»çº¿ç¨ï¼ï¼æä»¥æä»¬å¯ä»¥å©ç¨è¿äºè§åï¼å°ç»å¸¸åæ¢ç dom ä¸»å¨æåå°ç¬ç«çå±ï¼é£ä¹å¨æµè§å¨çä¸å¸§è¿è¡ä¸­ï¼å°±å¯ä»¥åå° layout å paint çæ¶é´äºã\n\nå¦ä¸å ä¸ªcsså±æ§å¯ä»¥è§¦åç¡¬ä»¶å éï¼\n\n * transformï¼ translate3dãtranslatez(0)ç­ï¼\n * opacity\n * filterï¼æ»¤éï¼drop-shadow()ãopacity()ï¼å½æ°ä¸å·²æçbox-shadowãopacityå±æ§å¾ç¸ä¼¼ï¼ä¸åä¹å¤å¨äºï¼éè¿æ»¤éï¼ä¸äºæµè§å¨ä¸ºäºæ´å¥½çæ§è½ä¼æä¾ç¡¬ä»¶å éï¼\n * will-changeï¼åªä¸ä¸ªå±æ§å³å°åçååï¼è¿èè¿è¡ä¼åã\n\n\n# js ä¼é»å¡ dom\n\n * ç°ä»£æµè§å¨ä¼å¹¶è¡å è½½jsæä»¶ï¼ä½æ¯æç§ä¹¦åé¡ºåºæ§è¡ä»£ç \n * å è½½æèæ§è¡jsæ¶ä¼é»å¡å¯¹æ ç­¾çè§£æï¼ä¹å°±æ¯é»å¡äºdomæ çå½¢æï¼åªæç­å°jsæ§è¡å®æ¯ï¼æµè§å¨æä¼ç»§ç»­è§£ææ ç­¾ãæ²¡ædomæ ï¼æµè§å¨å°±æ æ³æ¸²æï¼æä»¥å½å è½½å¾å¤§çjsæä»¶æ¶ï¼å¯ä»¥çå°é¡µé¢å¾é¿æ¶é´æ¯ä¸çç©ºç½\n * ä¹æä»¥ä¼é»å¡å¯¹æ ç­¾çè§£ææ¯å ä¸ºå è½½çjsä¸­å¯è½ä¼åå»ºï¼å é¤èç¹ç­ï¼è¿äºæä½ä¼å¯¹domæ äº§çå½±åï¼å¦æä¸é»å¡ï¼ç­æµè§å¨è§£æå®æ ç­¾çædomæ åï¼jsä¿®æ¹äºæäºèç¹ï¼é£ä¹æµè§å¨åå¾éæ°è§£æï¼ç¶åçædomæ ï¼æ§è½æ¯è¾å·®\n\n\n# css ä¸ä¼é»å¡ dom è§£æä½ä¼é»å¡æ¸²æ\n\n * å ä¸ºéè¦å·æ dom ä»¥å cssom æä¼æå»ºæ¸²ææ ï¼å è½½ css çæ¶åè¯å®æ æ³ç»§ç»­æ¸²æ\n\n> ä¸ºä»ä¹æ js æ¾å¨åºé¨ï¼css æ¾å¨é¡¶é¨\n\njs æ¾å¨é¡¶é¨ä¼é»å¡ dom çæ¸²æï¼æµè§å¨å¯è½ä¸ç´è½¬ååï¼è css ä¸ä¼é»å¡ dom è§£æã\n\næä»¬ä¼å° js æ¾å¨åé¢ï¼ä»¥åå°first paintçæ¶é´\n\n\n# scriptæ ç­¾ä¸­çasyncï¼defer\n\n * scriptæ ç­¾ä¸­çasyncï¼defer\n\n",charsets:{cjk:!0}},{title:"ä»£ç è§è",frontmatter:{title:"ä»£ç è§è",date:"2020-09-20T10:27:54.000Z",categories:"è§è"},regularPath:"/code-style/code-style.html",relativePath:"code-style/code-style.md",key:"v-93f09142",path:"/code-style/code-style.html",headers:[{level:2,title:"ä½¿ç¨é»è®¤å¼",slug:"ä½¿ç¨é»è®¤å¼",normalizedTitle:"ä½¿ç¨é»è®¤å¼",charIndex:11},{level:2,title:"è§£æè¯­æ³",slug:"è§£æè¯­æ³",normalizedTitle:"è§£æè¯­æ³",charIndex:20},{level:2,title:"å ææ³¨éçä»£ç ",slug:"å ææ³¨éçä»£ç ",normalizedTitle:"å ææ³¨éçä»£ç ",charIndex:28},{level:2,title:"å°½éä¸ç¨âéâæ¡ä»¶å¥",slug:"å°½éä¸ç¨-é-æ¡ä»¶å¥",normalizedTitle:"å°½éä¸ç¨âéâæ¡ä»¶å¥",charIndex:39},{level:2,title:"ä½¿ç¨Array.includesæ¥å¤çå¤ä¸ªæ¡ä»¶",slug:"ä½¿ç¨array-includesæ¥å¤çå¤ä¸ªæ¡ä»¶",normalizedTitle:"ä½¿ç¨array.includesæ¥å¤çå¤ä¸ªæ¡ä»¶",charIndex:53},{level:2,title:"å¤ä¸ªç±»ä¼¼å½æ°",slug:"å¤ä¸ªç±»ä¼¼å½æ°",normalizedTitle:"å¤ä¸ªç±»ä¼¼å½æ°",charIndex:80},{level:2,title:"ä½¿ç¨ && è¿ç®ç¬¦åç®è¡¨è¾¾å¼",slug:"ä½¿ç¨-è¿ç®ç¬¦åç®è¡¨è¾¾å¼",normalizedTitle:"ä½¿ç¨ &amp;&amp; è¿ç®ç¬¦åç®è¡¨è¾¾å¼",charIndex:null},{level:2,title:"ç©ºå¼åå¹¶è¿ç®ç¬¦ '??'",slug:"ç©ºå¼åå¹¶è¿ç®ç¬¦",normalizedTitle:"ç©ºå¼åå¹¶è¿ç®ç¬¦ '??'",charIndex:108},{level:3,title:"ä¸ || æ¯è¾",slug:"ä¸-æ¯è¾",normalizedTitle:"ä¸ || æ¯è¾",charIndex:2234},{level:2,title:"å¯éé¾æä½ç¬¦ '?.'",slug:"å¯éé¾æä½ç¬¦",normalizedTitle:"å¯éé¾æä½ç¬¦ '?.'",charIndex:124},{level:2,title:"ä¸äºæå·§",slug:"ä¸äºæå·§",normalizedTitle:"ä¸äºæå·§",charIndex:147},{level:2,title:"å¤ä¸ªåéèµå¼ï¼äº¤æ¢åé",slug:"å¤ä¸ªåéèµå¼-äº¤æ¢åé",normalizedTitle:"å¤ä¸ªåéèµå¼ï¼äº¤æ¢åé",charIndex:155},{level:2,title:"å­ç¬¦ä¸²éå¤",slug:"å­ç¬¦ä¸²éå¤",normalizedTitle:"å­ç¬¦ä¸²éå¤",charIndex:170},{level:2,title:"åéä½è¿ç®ç¬¦",slug:"åéä½è¿ç®ç¬¦",normalizedTitle:"åéä½è¿ç®ç¬¦",charIndex:179},{level:2,title:"æ°ç»ä¸­çæå¤§å¼æå°å¼",slug:"æ°ç»ä¸­çæå¤§å¼æå°å¼",normalizedTitle:"æ°ç»ä¸­çæå¤§å¼æå°å¼",charIndex:189},{level:2,title:"å·§ç¨thiså®ç°é¾å¼è°ç¨",slug:"å·§ç¨thiså®ç°é¾å¼è°ç¨",normalizedTitle:"å·§ç¨thiså®ç°é¾å¼è°ç¨",charIndex:203},{level:2,title:"æ°å¯¹è±¡æ¿æ¢èå¯¹è±¡",slug:"æ°å¯¹è±¡æ¿æ¢èå¯¹è±¡",normalizedTitle:"æ°å¯¹è±¡æ¿æ¢èå¯¹è±¡",charIndex:219},{level:2,title:"å¯¹è±¡æ°ç»å»é",slug:"å¯¹è±¡æ°ç»å»é",normalizedTitle:"å¯¹è±¡æ°ç»å»é",charIndex:231},{level:2,title:"å·§ç¨apply",slug:"å·§ç¨apply",normalizedTitle:"å·§ç¨apply",charIndex:241},{level:2,title:"åå¹¶å¯¹è±¡",slug:"åå¹¶å¯¹è±¡",normalizedTitle:"åå¹¶å¯¹è±¡",charIndex:252},{level:2,title:"Array.filter(Boolean)",slug:"array-filter-boolean",normalizedTitle:"array.filter(boolean)",charIndex:260}],lastUpdated:"3/29/2022, 7:44:01 PM",lastUpdatedTimestamp:1648554241e3,headersStr:"ä½¿ç¨é»è®¤å¼ è§£æè¯­æ³ å ææ³¨éçä»£ç  å°½éä¸ç¨âéâæ¡ä»¶å¥ ä½¿ç¨Array.includesæ¥å¤çå¤ä¸ªæ¡ä»¶ å¤ä¸ªç±»ä¼¼å½æ° ä½¿ç¨ && è¿ç®ç¬¦åç®è¡¨è¾¾å¼ ç©ºå¼åå¹¶è¿ç®ç¬¦ '??' ä¸ || æ¯è¾ å¯éé¾æä½ç¬¦ '?.' ä¸äºæå·§ å¤ä¸ªåéèµå¼ï¼äº¤æ¢åé å­ç¬¦ä¸²éå¤ åéä½è¿ç®ç¬¦ æ°ç»ä¸­çæå¤§å¼æå°å¼ å·§ç¨thiså®ç°é¾å¼è°ç¨ æ°å¯¹è±¡æ¿æ¢èå¯¹è±¡ å¯¹è±¡æ°ç»å»é å·§ç¨apply åå¹¶å¯¹è±¡ Array.filter(Boolean)",content:"# ä»£ç è§è\n\n * ä½¿ç¨é»è®¤å¼\n * è§£æè¯­æ³\n * å ææ³¨éçä»£ç \n * å°½éä¸ç¨âéâæ¡ä»¶å¥\n * ä½¿ç¨Array.includesæ¥å¤çå¤ä¸ªæ¡ä»¶\n * å¤ä¸ªç±»ä¼¼å½æ°\n * ä½¿ç¨ && è¿ç®ç¬¦åç®è¡¨è¾¾å¼\n * ç©ºå¼åå¹¶è¿ç®ç¬¦ '??'\n * å¯éé¾æä½ç¬¦ '?.'\n * ä»£ç é£æ ¼\n * ä¸äºæå·§\n * å¤ä¸ªåéèµå¼ï¼äº¤æ¢åé\n * å­ç¬¦ä¸²éå¤\n * åéä½è¿ç®ç¬¦\n * æ°ç»ä¸­çæå¤§å¼æå°å¼\n * å·§ç¨thiså®ç°é¾å¼è°ç¨\n * æ°å¯¹è±¡æ¿æ¢èå¯¹è±¡\n * å¯¹è±¡æ°ç»å»é\n * å·§ç¨apply\n * åå¹¶å¯¹è±¡\n * Array.filter(Boolean)\n\n\n# ä½¿ç¨é»è®¤å¼\n\n// Bad\nfunction createMicrobrewery(name) {\n    const brewryName = name || 'Hipster Brew'\n    // ...\n}\n\n// Good\nfunction createMicrobrewery(name = 'Hipster Brew') {\n    // ...\n}\n\n\n\n# è§£æè¯­æ³\n\nå¦æåæ°è¶è¿ä¸¤ä¸ªï¼å¯ä»¥ä½¿ç¨è§£æè¯­æ³ï¼ä¸ç¨èèåæ°çé¡ºåº\n\n// Bad\nfunction createMenu(title, body, buttonText, cancellable) {\n    // ...\n}\n// Good\nfunction createMenu({ title, body, buttonText, cancellable }) {\n    // ...\n}\n\ncreateMenu({\n    title: 'Foo',\n    body: 'Bar',\n    buttonText: 'Baz',\n    cancellable: true\n})\n\n\n\n# å ææ³¨éçä»£ç \n\ngitå­å¨çæä¹å°±æ¯ä¿å­ä½ çæ§ä»£ç ï¼æä»¥æ³¨éçä»£ç èµ¶ç´§å æå§\n\n// Bad\ndoStuff()\n// doOtherStuff()\n// doSomeMoreStuff()\n// doSoMuchStuff()\n\n// Good\ndoStuff()\n\n\n\n# å°½éä¸ç¨âéâæ¡ä»¶å¥\n\n// Bad\nfunction isDOMNodeNotPresent(node) {\n    // ...\n}\n\nif (!isDOMNodeNotPresent(node)) {\n    // ...\n}\n// Good\nfunction isDOMNodeNotPresent(node) {\n    // ...\n}\n\nif (isDOMNodeNotPresent(node)) {   // ifåé¢è®°å¾å ç©ºæ ¼\n    // ...\n}\n\n\n\n# ä½¿ç¨Array.includesæ¥å¤çå¤ä¸ªæ¡ä»¶\n\nfunction test(fruit) {\n    if (fruit == 'apple' || fruit == 'banana') {\n        console.log(red)\n    }\n}\n// å¦æææ´å¤ççº¢è²æ°´ææä¹å\nfunction test(fruit) {\n    const redFruits = ['apple', 'strawberry', 'cherry']\n    if (redFruits.includes(fruit)) {\n        console.log(red)\n    }\n}\n\n\n\n# å¤ä¸ªç±»ä¼¼å½æ°\n\n update (node, key, attrName) {\n    let updateFn = this[attrName + 'Updater']\n    updateFn(node, key, attrName)\n }\n\n  textUpdater (node, value, key) {\n    // ...\n  }\n\n  modelUpdater (node, value, key) {\n    // ...\n  }\n\n\n\n# ä½¿ç¨ && è¿ç®ç¬¦åç®è¡¨è¾¾å¼\n\nè®©æä»¬èèä¸ä¸ªå·æå¸å°å¼åå½æ°çæåµã\n\nlet isPrime = true;\nconst startWatching = () => {\n    console.log('Started Watching!');\n}\n\n\nåä¸é¢è¿æ ·ï¼éè¿æ£æ¥å¸å°å¼æ¥ç¡®å®æ¯å¦è°ç¨å½æ°ï¼ä»£ç å¤ªå¤äºã\n\nif (isPrime) {\n    startWatching();\n}\n\n\nè½å¦éè¿ ANDï¼&&ï¼è¿ç®ç¬¦ä½¿ç¨ç®åå½¢å¼ï¼æ¯çï¼å®å¨å¯ä»¥é¿åä½¿ç¨ if è¯­å¥ãé·å§ï¼\n\nisPrime && startWatching();\n\n\n\n# ç©ºå¼åå¹¶è¿ç®ç¬¦ '??'\n\nå¼æ¢ä¸æ¯ null ä¹ä¸æ¯ undefined çè¡¨è¾¾å¼ç§°ä¸ºâå·²å®ä¹çï¼definedï¼âã\n\na ?? b çç»ææ¯ï¼\n\n * å¦æ a æ¯å·²å®ä¹çï¼åç»æä¸º aï¼\n * å¦æ a ä¸æ¯å·²å®ä¹çï¼åç»æä¸º bã\n * å¦æç¬¬ä¸ä¸ªåæ°ä¸æ¯ null/undefinedï¼å ?? è¿åç¬¬ä¸ä¸ªåæ°ãå¦åï¼è¿åç¬¬äºä¸ªåæ°ã\n\néå¸¸ ?? çä½¿ç¨åºæ¯æ¯ï¼ä¸ºå¯è½æ¯æªå®ä¹çåéæä¾ä¸ä¸ªé»è®¤å¼ã\n\nlet user;\n\nalert(user ?? \"Anonymous\"); // Anonymous\n\n\n\n# ä¸ || æ¯è¾\n\nå®ä»¬ä¹é´éè¦çåºå«æ¯ï¼\n\n * || è¿åç¬¬ä¸ä¸ª ç å¼ã\n * ?? è¿åç¬¬ä¸ä¸ª å·²å®ä¹ç å¼ã\n\nlet height = 0;\n\nalert(height || 100); // 100\nalert(height ?? 100); // 0\n\n\n\n# å¯éé¾æä½ç¬¦ '?.'\n\n> å¯éé¾æä½ç¬¦( ?. )åè®¸è¯»åä½äºè¿æ¥å¯¹è±¡é¾æ·±å¤çå±æ§çå¼ï¼èä¸å¿æç¡®éªè¯é¾ä¸­çæ¯ä¸ªå¼ç¨æ¯å¦ææã?. æä½ç¬¦çåè½ç±»ä¼¼äº . é¾å¼æä½ç¬¦ï¼ä¸åä¹å¤å¨äºï¼å¨å¼ç¨ä¸ºç©º(nullish ) (null æè undefined) çæåµä¸ä¸ä¼å¼èµ·éè¯¯ï¼è¯¥è¡¨è¾¾å¼ç­è·¯è¿åå¼æ¯ undefinedãä¸å½æ°è°ç¨ä¸èµ·ä½¿ç¨æ¶ï¼å¦æç»å®çå½æ°ä¸å­å¨ï¼åè¿å undefinedã\n\nconst adventurer = {\n  name: 'Alice',\n  cat: {\n    name: 'Dinah'\n  }\n};\n\nconsole.log(adventurer.cat?.name)\n// Dinah\n\nconsole.log(adventurer.dog?.name)\n// undefined\n\nconsole.log(adventurer.dog.name)\n// Uncaught TypeError: Cannot read property 'name' of undefined\n\n\n\n# ä¸äºæå·§\n\nconst obj = {\n    max(a,b) {\n        return Math.max(a,b)\n    }\n}\n// ä¼åä¸º\nconst obj = {\n    max: Math.max\n}\n\n\nvar numbers = [1, 4, 9];\nvar roots = numbers.map(Math.sqrt);\n\n[1,2,3,4].map(item => {\n    return item * 2\n})\n// å½åªæä¸ä¸ª return æ¶ç®åä¸º\n[1,2,3,4].map(item => item * 2)\n\n\n\n# å¤ä¸ªåéèµå¼ï¼äº¤æ¢åé\n\n// å¤ä¸ªåéèµå¼\nlet a, b, c\na = 5\nb = 8\nc = 12\n\n// å©ç¨æ°ç»è§£æ\nlet [a, b, c] = [5, 8, 12]\n\n// äº¤æ¢åé\nlet x = 'hello', y = 55\nconst tmp = x\nx = y\ny = tmp\n\n[x, y] = [y, x]\n\n\n\n# å­ç¬¦ä¸²éå¤\n\nlet str = ''\nfor (let i = 0; i < 5; i++) {\n  str += 'hello '\n}\n\n// good\n'hello '.repeat(5)\n\n\n\n# åéä½è¿ç®ç¬¦\n\n// bad\nconst floor = Math.floor(6.8) // 6\n\n// good\nconst floor = ~~6.8 // 6\n\n// ~ æ¯ä½è¿ç®NOTï¼æä½åå\n\nvar iNum1 = 25; // 00000000000000000000000000011001\n\nvar iNum2 = ~iNum1; // 11111111111111111111111111100110\n\nconsole.log(iNum2);// è¾åº \"-26\"\n\n\næ»ç»ä¸ä¸åæ´æ¹æ³\n\n * parseInt\n * Math.floor\n * å³ç§»è¿ç®ç¬¦ >> (é¤2ååæ´)\n * åéä½è¿ç®ç¬¦ ~~\n\n\n# æ°ç»ä¸­çæå¤§å¼æå°å¼\n\nconst arr = [2, 8, 15, 4]\nMath.max(...arr)\nMath.min(...arr)\n\n\n\n# å·§ç¨thiså®ç°é¾å¼è°ç¨\n\n// å®ç°éªè¯åè½çå½æ°\nvar CheckObject = function(){};\nCheckObject.prototype.checkName = function(){\n    //éªè¯å§å\n    return this;\n}\nCheckObject.prototype.checEmail = function(){\n    //éªè¯é®ç®±\n    return this;\n}\nCheckObject.prototype.checkPassword = function(){\n    //éªè¯å¯ç \n    return this;\n}\n\nvar a = new CheckObject();\na.checkName().checkEmail().checkPassword();\n\n\n\n# æ°å¯¹è±¡æ¿æ¢èå¯¹è±¡\n\nä»¥æ°å¯¹è±¡æ¿æ¢èå¯¹è±¡ãä¾å¦ï¼å©ç¨å¯¹è±¡å±å¼è¿ç®ç¬¦æä»¬å¯ä»¥è¿æ ·åï¼\n\nobj = { ...obj, newProp: 123 }\n\n\n\n# å¯¹è±¡æ°ç»å»é\n\nlet arr = [\n  {\n    id: 1,\n    name: '1'\n  },\n  {\n    id: 2,\n    name: '2'\n  },\n  {\n    id: 3,\n    name: '3'\n  },\n  {\n    id: 1,\n    name: '1'\n  }\n]\nunique(arr) {\n  const res = new Map();\n  return arr.filter((arr) => !res.has(arr.id) && res.set(arr.id, 1));\n},\n\n\n\n# å·§ç¨apply\n\næ°ç»ä¹é´è¿½å \n\nvar array1 = [12 , \"foo\" , {name \"Joe\"} , -2458];\nvar array2 = [\"Doe\" , 555 , 100];\nArray.prototype.push.apply(array1, array2);\n\n/* array1 å¼ä¸º [12 , \"foo\" , {name \"Joe\"} , -2458 , \"Doe\" , 555 , 100] */\n\n\nè·åæ°ç»ä¸­çæå¤§å¼åæå°å¼\n\nvar numbers = [5, 458 , 120 , -215 ];\nvar maxInNumbers = Math.max.apply(Math, numbers), //458\nmaxInNumbers = Math.max.call(Math,5, 458 , 120 , -215); //458\n\n\n\n# åå¹¶å¯¹è±¡\n\nconst o1 = { a: 1 };\nconst o2 = { b: 2 };\nconst o3 = { c: 3 };\n\nconst obj = Object.assign(o1, o2, o3);\nconsole.log(obj); // { a: 1, b: 2, c: 3 }\nconsole.log(o1);  // { a: 1, b: 2, c: 3 }, æ³¨æç®æ å¯¹è±¡èªèº«ä¹ä¼æ¹åã\n\n// åå¹¶å·æç¸åå±æ§çå¯¹è±¡\nconst o1 = { a: 1, b: 1, c: 1 };\nconst o2 = { b: 2, c: 2 };\nconst o3 = { c: 3 };\n\nconst obj = Object.assign({}, o1, o2, o3);\nconsole.log(obj); // { a: 1, b: 2, c: 3 }\n\n\n\n# Array.filter(Boolean)\n\nå 0, undefined, null, false, \"\", è¿æ ·çåå¼å¯ä»¥éè¿æ­¤æ¹æ³è½»æå°è¿æ»¤æã\n\n[0, undefined, null, false, \"\", {}].filter(Boolean) // [{}]\n\n// ç­ä»·äº\n[0, undefined, null, false, \"\", {}].filter(function (x) { return Boolean(x); });\n\n\nBoolean æ¯ä¸ä¸ªå½æ°ï¼å®ä¼å¯¹éåæ°ç»ä¸­çåç´ ï¼å¹¶æ ¹æ®åç´ ççåç±»åï¼å¯¹åºè¿å true æ false.\n\nBoolean(0)         // false\nBoolean(undefined) // false\nBoolean(null)      // false\nBoolean(false)     // false\nBoolean(\"\")        // false\nBoolean({})        // true\n",normalizedContent:"# ä»£ç è§è\n\n * ä½¿ç¨é»è®¤å¼\n * è§£æè¯­æ³\n * å ææ³¨éçä»£ç \n * å°½éä¸ç¨âéâæ¡ä»¶å¥\n * ä½¿ç¨array.includesæ¥å¤çå¤ä¸ªæ¡ä»¶\n * å¤ä¸ªç±»ä¼¼å½æ°\n * ä½¿ç¨ && è¿ç®ç¬¦åç®è¡¨è¾¾å¼\n * ç©ºå¼åå¹¶è¿ç®ç¬¦ '??'\n * å¯éé¾æä½ç¬¦ '?.'\n * ä»£ç é£æ ¼\n * ä¸äºæå·§\n * å¤ä¸ªåéèµå¼ï¼äº¤æ¢åé\n * å­ç¬¦ä¸²éå¤\n * åéä½è¿ç®ç¬¦\n * æ°ç»ä¸­çæå¤§å¼æå°å¼\n * å·§ç¨thiså®ç°é¾å¼è°ç¨\n * æ°å¯¹è±¡æ¿æ¢èå¯¹è±¡\n * å¯¹è±¡æ°ç»å»é\n * å·§ç¨apply\n * åå¹¶å¯¹è±¡\n * array.filter(boolean)\n\n\n# ä½¿ç¨é»è®¤å¼\n\n// bad\nfunction createmicrobrewery(name) {\n    const brewryname = name || 'hipster brew'\n    // ...\n}\n\n// good\nfunction createmicrobrewery(name = 'hipster brew') {\n    // ...\n}\n\n\n\n# è§£æè¯­æ³\n\nå¦æåæ°è¶è¿ä¸¤ä¸ªï¼å¯ä»¥ä½¿ç¨è§£æè¯­æ³ï¼ä¸ç¨èèåæ°çé¡ºåº\n\n// bad\nfunction createmenu(title, body, buttontext, cancellable) {\n    // ...\n}\n// good\nfunction createmenu({ title, body, buttontext, cancellable }) {\n    // ...\n}\n\ncreatemenu({\n    title: 'foo',\n    body: 'bar',\n    buttontext: 'baz',\n    cancellable: true\n})\n\n\n\n# å ææ³¨éçä»£ç \n\ngitå­å¨çæä¹å°±æ¯ä¿å­ä½ çæ§ä»£ç ï¼æä»¥æ³¨éçä»£ç èµ¶ç´§å æå§\n\n// bad\ndostuff()\n// dootherstuff()\n// dosomemorestuff()\n// dosomuchstuff()\n\n// good\ndostuff()\n\n\n\n# å°½éä¸ç¨âéâæ¡ä»¶å¥\n\n// bad\nfunction isdomnodenotpresent(node) {\n    // ...\n}\n\nif (!isdomnodenotpresent(node)) {\n    // ...\n}\n// good\nfunction isdomnodenotpresent(node) {\n    // ...\n}\n\nif (isdomnodenotpresent(node)) {   // ifåé¢è®°å¾å ç©ºæ ¼\n    // ...\n}\n\n\n\n# ä½¿ç¨array.includesæ¥å¤çå¤ä¸ªæ¡ä»¶\n\nfunction test(fruit) {\n    if (fruit == 'apple' || fruit == 'banana') {\n        console.log(red)\n    }\n}\n// å¦æææ´å¤ççº¢è²æ°´ææä¹å\nfunction test(fruit) {\n    const redfruits = ['apple', 'strawberry', 'cherry']\n    if (redfruits.includes(fruit)) {\n        console.log(red)\n    }\n}\n\n\n\n# å¤ä¸ªç±»ä¼¼å½æ°\n\n update (node, key, attrname) {\n    let updatefn = this[attrname + 'updater']\n    updatefn(node, key, attrname)\n }\n\n  textupdater (node, value, key) {\n    // ...\n  }\n\n  modelupdater (node, value, key) {\n    // ...\n  }\n\n\n\n# ä½¿ç¨ && è¿ç®ç¬¦åç®è¡¨è¾¾å¼\n\nè®©æä»¬èèä¸ä¸ªå·æå¸å°å¼åå½æ°çæåµã\n\nlet isprime = true;\nconst startwatching = () => {\n    console.log('started watching!');\n}\n\n\nåä¸é¢è¿æ ·ï¼éè¿æ£æ¥å¸å°å¼æ¥ç¡®å®æ¯å¦è°ç¨å½æ°ï¼ä»£ç å¤ªå¤äºã\n\nif (isprime) {\n    startwatching();\n}\n\n\nè½å¦éè¿ andï¼&&ï¼è¿ç®ç¬¦ä½¿ç¨ç®åå½¢å¼ï¼æ¯çï¼å®å¨å¯ä»¥é¿åä½¿ç¨ if è¯­å¥ãé·å§ï¼\n\nisprime && startwatching();\n\n\n\n# ç©ºå¼åå¹¶è¿ç®ç¬¦ '??'\n\nå¼æ¢ä¸æ¯ null ä¹ä¸æ¯ undefined çè¡¨è¾¾å¼ç§°ä¸ºâå·²å®ä¹çï¼definedï¼âã\n\na ?? b çç»ææ¯ï¼\n\n * å¦æ a æ¯å·²å®ä¹çï¼åç»æä¸º aï¼\n * å¦æ a ä¸æ¯å·²å®ä¹çï¼åç»æä¸º bã\n * å¦æç¬¬ä¸ä¸ªåæ°ä¸æ¯ null/undefinedï¼å ?? è¿åç¬¬ä¸ä¸ªåæ°ãå¦åï¼è¿åç¬¬äºä¸ªåæ°ã\n\néå¸¸ ?? çä½¿ç¨åºæ¯æ¯ï¼ä¸ºå¯è½æ¯æªå®ä¹çåéæä¾ä¸ä¸ªé»è®¤å¼ã\n\nlet user;\n\nalert(user ?? \"anonymous\"); // anonymous\n\n\n\n# ä¸ || æ¯è¾\n\nå®ä»¬ä¹é´éè¦çåºå«æ¯ï¼\n\n * || è¿åç¬¬ä¸ä¸ª ç å¼ã\n * ?? è¿åç¬¬ä¸ä¸ª å·²å®ä¹ç å¼ã\n\nlet height = 0;\n\nalert(height || 100); // 100\nalert(height ?? 100); // 0\n\n\n\n# å¯éé¾æä½ç¬¦ '?.'\n\n> å¯éé¾æä½ç¬¦( ?. )åè®¸è¯»åä½äºè¿æ¥å¯¹è±¡é¾æ·±å¤çå±æ§çå¼ï¼èä¸å¿æç¡®éªè¯é¾ä¸­çæ¯ä¸ªå¼ç¨æ¯å¦ææã?. æä½ç¬¦çåè½ç±»ä¼¼äº . é¾å¼æä½ç¬¦ï¼ä¸åä¹å¤å¨äºï¼å¨å¼ç¨ä¸ºç©º(nullish ) (null æè undefined) çæåµä¸ä¸ä¼å¼èµ·éè¯¯ï¼è¯¥è¡¨è¾¾å¼ç­è·¯è¿åå¼æ¯ undefinedãä¸å½æ°è°ç¨ä¸èµ·ä½¿ç¨æ¶ï¼å¦æç»å®çå½æ°ä¸å­å¨ï¼åè¿å undefinedã\n\nconst adventurer = {\n  name: 'alice',\n  cat: {\n    name: 'dinah'\n  }\n};\n\nconsole.log(adventurer.cat?.name)\n// dinah\n\nconsole.log(adventurer.dog?.name)\n// undefined\n\nconsole.log(adventurer.dog.name)\n// uncaught typeerror: cannot read property 'name' of undefined\n\n\n\n# ä¸äºæå·§\n\nconst obj = {\n    max(a,b) {\n        return math.max(a,b)\n    }\n}\n// ä¼åä¸º\nconst obj = {\n    max: math.max\n}\n\n\nvar numbers = [1, 4, 9];\nvar roots = numbers.map(math.sqrt);\n\n[1,2,3,4].map(item => {\n    return item * 2\n})\n// å½åªæä¸ä¸ª return æ¶ç®åä¸º\n[1,2,3,4].map(item => item * 2)\n\n\n\n# å¤ä¸ªåéèµå¼ï¼äº¤æ¢åé\n\n// å¤ä¸ªåéèµå¼\nlet a, b, c\na = 5\nb = 8\nc = 12\n\n// å©ç¨æ°ç»è§£æ\nlet [a, b, c] = [5, 8, 12]\n\n// äº¤æ¢åé\nlet x = 'hello', y = 55\nconst tmp = x\nx = y\ny = tmp\n\n[x, y] = [y, x]\n\n\n\n# å­ç¬¦ä¸²éå¤\n\nlet str = ''\nfor (let i = 0; i < 5; i++) {\n  str += 'hello '\n}\n\n// good\n'hello '.repeat(5)\n\n\n\n# åéä½è¿ç®ç¬¦\n\n// bad\nconst floor = math.floor(6.8) // 6\n\n// good\nconst floor = ~~6.8 // 6\n\n// ~ æ¯ä½è¿ç®notï¼æä½åå\n\nvar inum1 = 25; // 00000000000000000000000000011001\n\nvar inum2 = ~inum1; // 11111111111111111111111111100110\n\nconsole.log(inum2);// è¾åº \"-26\"\n\n\næ»ç»ä¸ä¸åæ´æ¹æ³\n\n * parseint\n * math.floor\n * å³ç§»è¿ç®ç¬¦ >> (é¤2ååæ´)\n * åéä½è¿ç®ç¬¦ ~~\n\n\n# æ°ç»ä¸­çæå¤§å¼æå°å¼\n\nconst arr = [2, 8, 15, 4]\nmath.max(...arr)\nmath.min(...arr)\n\n\n\n# å·§ç¨thiså®ç°é¾å¼è°ç¨\n\n// å®ç°éªè¯åè½çå½æ°\nvar checkobject = function(){};\ncheckobject.prototype.checkname = function(){\n    //éªè¯å§å\n    return this;\n}\ncheckobject.prototype.checemail = function(){\n    //éªè¯é®ç®±\n    return this;\n}\ncheckobject.prototype.checkpassword = function(){\n    //éªè¯å¯ç \n    return this;\n}\n\nvar a = new checkobject();\na.checkname().checkemail().checkpassword();\n\n\n\n# æ°å¯¹è±¡æ¿æ¢èå¯¹è±¡\n\nä»¥æ°å¯¹è±¡æ¿æ¢èå¯¹è±¡ãä¾å¦ï¼å©ç¨å¯¹è±¡å±å¼è¿ç®ç¬¦æä»¬å¯ä»¥è¿æ ·åï¼\n\nobj = { ...obj, newprop: 123 }\n\n\n\n# å¯¹è±¡æ°ç»å»é\n\nlet arr = [\n  {\n    id: 1,\n    name: '1'\n  },\n  {\n    id: 2,\n    name: '2'\n  },\n  {\n    id: 3,\n    name: '3'\n  },\n  {\n    id: 1,\n    name: '1'\n  }\n]\nunique(arr) {\n  const res = new map();\n  return arr.filter((arr) => !res.has(arr.id) && res.set(arr.id, 1));\n},\n\n\n\n# å·§ç¨apply\n\næ°ç»ä¹é´è¿½å \n\nvar array1 = [12 , \"foo\" , {name \"joe\"} , -2458];\nvar array2 = [\"doe\" , 555 , 100];\narray.prototype.push.apply(array1, array2);\n\n/* array1 å¼ä¸º [12 , \"foo\" , {name \"joe\"} , -2458 , \"doe\" , 555 , 100] */\n\n\nè·åæ°ç»ä¸­çæå¤§å¼åæå°å¼\n\nvar numbers = [5, 458 , 120 , -215 ];\nvar maxinnumbers = math.max.apply(math, numbers), //458\nmaxinnumbers = math.max.call(math,5, 458 , 120 , -215); //458\n\n\n\n# åå¹¶å¯¹è±¡\n\nconst o1 = { a: 1 };\nconst o2 = { b: 2 };\nconst o3 = { c: 3 };\n\nconst obj = object.assign(o1, o2, o3);\nconsole.log(obj); // { a: 1, b: 2, c: 3 }\nconsole.log(o1);  // { a: 1, b: 2, c: 3 }, æ³¨æç®æ å¯¹è±¡èªèº«ä¹ä¼æ¹åã\n\n// åå¹¶å·æç¸åå±æ§çå¯¹è±¡\nconst o1 = { a: 1, b: 1, c: 1 };\nconst o2 = { b: 2, c: 2 };\nconst o3 = { c: 3 };\n\nconst obj = object.assign({}, o1, o2, o3);\nconsole.log(obj); // { a: 1, b: 2, c: 3 }\n\n\n\n# array.filter(boolean)\n\nå 0, undefined, null, false, \"\", è¿æ ·çåå¼å¯ä»¥éè¿æ­¤æ¹æ³è½»æå°è¿æ»¤æã\n\n[0, undefined, null, false, \"\", {}].filter(boolean) // [{}]\n\n// ç­ä»·äº\n[0, undefined, null, false, \"\", {}].filter(function (x) { return boolean(x); });\n\n\nboolean æ¯ä¸ä¸ªå½æ°ï¼å®ä¼å¯¹éåæ°ç»ä¸­çåç´ ï¼å¹¶æ ¹æ®åç´ ççåç±»åï¼å¯¹åºè¿å true æ false.\n\nboolean(0)         // false\nboolean(undefined) // false\nboolean(null)      // false\nboolean(false)     // false\nboolean(\"\")        // false\nboolean({})        // true\n",charsets:{cjk:!0}},{title:"BFC",frontmatter:{},regularPath:"/css/bfc.html",relativePath:"css/bfc.md",key:"v-73b79b9f",path:"/css/bfc.html",headers:[{level:2,title:"ä»ä¹æ¯BFCï¼BFCçå¸å±è§åæ¯ä»ä¹ï¼å¦ä½åå»ºBFC",slug:"ä»ä¹æ¯bfc-bfcçå¸å±è§åæ¯ä»ä¹-å¦ä½åå»ºbfc",normalizedTitle:"ä»ä¹æ¯bfcï¼bfcçå¸å±è§åæ¯ä»ä¹ï¼å¦ä½åå»ºbfc",charIndex:10}],lastUpdated:"12/30/2022, 3:16:25 PM",lastUpdatedTimestamp:1672384585e3,headersStr:"ä»ä¹æ¯BFCï¼BFCçå¸å±è§åæ¯ä»ä¹ï¼å¦ä½åå»ºBFC",content:"# BFC\n\n\n# ä»ä¹æ¯BFCï¼BFCçå¸å±è§åæ¯ä»ä¹ï¼å¦ä½åå»ºBFC\n\n * BFCçå®ä¹:\n\n> BFCï¼Block formatting context ï¼âåçº§æ ¼å¼ä¸ä¸æâã æ¯ç¨äºå¸å±åçº§çå­çä¸åæ¸²æåºåãå¹¶ä¸ä¸è¿ä¸ªåºåçå¤é¨æ¯«æ å³ç³»ã\n\n * BFCçå¸å±è§å\n\n> BFCå°±æ¯é¡µé¢ä¸çä¸ä¸ªéç¦»çç¬ç«å®¹å¨ï¼å®¹å¨éé¢çå­åç´ ä¸ä¼å½±åå°å¤é¢çåç´ ã\n> \n> åé¨çBoxä¼å¨åç´æ¹åï¼ä¸ä¸ªæ¥ä¸ä¸ªå°æ¾ç½®ã\n> \n> Boxåç´æ¹åçè·ç¦»ç±marginå³å®ãå±äºåä¸ä¸ªBFCçä¸¤ä¸ªç¸é»Boxçmarginä¼åçéå ã\n> \n> BFCçåºåä¸ä¼ä¸float boxéå ã\n> \n> è®¡ç®BFCçé«åº¦æ¶ï¼æµ®å¨åç´ ä¹åä¸è®¡ç®ã\n\n * è§¦åBFCçæ¡ä»¶:\n\næ»¡è¶³ä¸åæ¡ä»¶ä¹ä¸å°±å¯ä»¥è§¦åBFC\n\n> 1ï¼æ ¹åç´ ï¼å³ <html>\n> \n> 2ï¼æµ®å¨åç´ ï¼float çå¼ä¸ä¸º none\n> \n> 3ï¼overflow çå¼ä¸ä¸º visible\n> \n> 4ï¼display çå¼ä¸º inline-blockãtable-cellãtable-caption\n> \n> 5ï¼position çå¼ä¸º absolute æè fixed\n\n * BFCçä½ç¨\n\nä½ç¨          åç\nå¤è¾¹è·åå¹¶é®é¢     åä¸ä¸ªBFCçä¸¤ä¸ªç¸é»Boxçmarginä¼åçéå ã\næµ®å¨çé«åº¦å¡é·é®é¢   è®¡ç®BFCçé«åº¦æ¶ï¼æµ®å¨åç´ ä¹åä¸è®¡ç®ã\nååå¸å±        BFC ä¸å¾ä¸ä»»ä½æµ®å¨çå¤è¾¹è·éå ã\n\nï¼1ï¼å¯ä»¥é»æ­¢åç´ è¢«æµ®å¨çåç´ è¦çï¼å¯åä¸¤æ èªéåºå¸å±ï¼BFCçåºåä¸ä¼ä¸float boxéå ãï¼\n\n\n\nè§¦åçº¢è²çå­çBFCå\n\n\n\nï¼2ï¼è§£å³é«åº¦å¡é·ï¼æä»¬ç¥éå½æµ®å¨ççå­çç¶åç´ æ²¡æé«åº¦æ¶ï¼ä¼åºç°é«åº¦å¡é·ç°è±¡ã\n\n\n\nç¶çå­è§¦åBFCå¯ä»¥è§£å³è¿ä¸ªé®é¢ï¼è®¡ç®BFCçé«åº¦æ¶ï¼æµ®å¨åç´ ä¹åä¸è®¡ç®ï¼ã\n\nï¼3ï¼è§£å³åä¸ä¸ªBFCåºåçåç´æ¹åmarginå¡é·çé®é¢\n\n\n\nåä¸ºä¸¤ä¸ªä¸åçBFCä¹åå¯ä»¥è§£å³ ï¼å±äºåä¸ä¸ªBFCçä¸¤ä¸ªç¸é»Boxçmarginä¼åçéå ï¼",normalizedContent:"# bfc\n\n\n# ä»ä¹æ¯bfcï¼bfcçå¸å±è§åæ¯ä»ä¹ï¼å¦ä½åå»ºbfc\n\n * bfcçå®ä¹:\n\n> bfcï¼block formatting context ï¼âåçº§æ ¼å¼ä¸ä¸æâã æ¯ç¨äºå¸å±åçº§çå­çä¸åæ¸²æåºåãå¹¶ä¸ä¸è¿ä¸ªåºåçå¤é¨æ¯«æ å³ç³»ã\n\n * bfcçå¸å±è§å\n\n> bfcå°±æ¯é¡µé¢ä¸çä¸ä¸ªéç¦»çç¬ç«å®¹å¨ï¼å®¹å¨éé¢çå­åç´ ä¸ä¼å½±åå°å¤é¢çåç´ ã\n> \n> åé¨çboxä¼å¨åç´æ¹åï¼ä¸ä¸ªæ¥ä¸ä¸ªå°æ¾ç½®ã\n> \n> boxåç´æ¹åçè·ç¦»ç±marginå³å®ãå±äºåä¸ä¸ªbfcçä¸¤ä¸ªç¸é»boxçmarginä¼åçéå ã\n> \n> bfcçåºåä¸ä¼ä¸float boxéå ã\n> \n> è®¡ç®bfcçé«åº¦æ¶ï¼æµ®å¨åç´ ä¹åä¸è®¡ç®ã\n\n * è§¦åbfcçæ¡ä»¶:\n\næ»¡è¶³ä¸åæ¡ä»¶ä¹ä¸å°±å¯ä»¥è§¦åbfc\n\n> 1ï¼æ ¹åç´ ï¼å³ <html>\n> \n> 2ï¼æµ®å¨åç´ ï¼float çå¼ä¸ä¸º none\n> \n> 3ï¼overflow çå¼ä¸ä¸º visible\n> \n> 4ï¼display çå¼ä¸º inline-blockãtable-cellãtable-caption\n> \n> 5ï¼position çå¼ä¸º absolute æè fixed\n\n * bfcçä½ç¨\n\nä½ç¨          åç\nå¤è¾¹è·åå¹¶é®é¢     åä¸ä¸ªbfcçä¸¤ä¸ªç¸é»boxçmarginä¼åçéå ã\næµ®å¨çé«åº¦å¡é·é®é¢   è®¡ç®bfcçé«åº¦æ¶ï¼æµ®å¨åç´ ä¹åä¸è®¡ç®ã\nååå¸å±        bfc ä¸å¾ä¸ä»»ä½æµ®å¨çå¤è¾¹è·éå ã\n\nï¼1ï¼å¯ä»¥é»æ­¢åç´ è¢«æµ®å¨çåç´ è¦çï¼å¯åä¸¤æ èªéåºå¸å±ï¼bfcçåºåä¸ä¼ä¸float boxéå ãï¼\n\n\n\nè§¦åçº¢è²çå­çbfcå\n\n\n\nï¼2ï¼è§£å³é«åº¦å¡é·ï¼æä»¬ç¥éå½æµ®å¨ççå­çç¶åç´ æ²¡æé«åº¦æ¶ï¼ä¼åºç°é«åº¦å¡é·ç°è±¡ã\n\n\n\nç¶çå­è§¦åbfcå¯ä»¥è§£å³è¿ä¸ªé®é¢ï¼è®¡ç®bfcçé«åº¦æ¶ï¼æµ®å¨åç´ ä¹åä¸è®¡ç®ï¼ã\n\nï¼3ï¼è§£å³åä¸ä¸ªbfcåºåçåç´æ¹åmarginå¡é·çé®é¢\n\n\n\nåä¸ºä¸¤ä¸ªä¸åçbfcä¹åå¯ä»¥è§£å³ ï¼å±äºåä¸ä¸ªbfcçä¸¤ä¸ªç¸é»boxçmarginä¼åçéå ï¼",charsets:{cjk:!0}},{title:"flexå¸å±",frontmatter:{title:"flexå¸å±",date:"2020-11-22T11:27:54.000Z",categories:"CSS"},regularPath:"/css/flex.html",relativePath:"css/flex.md",key:"v-55613da1",path:"/css/flex.html",headers:[{level:2,title:"flex å¸å±å®ä¾",slug:"flex-å¸å±å®ä¾",normalizedTitle:"flex å¸å±å®ä¾",charIndex:1076}],lastUpdated:"5/9/2022, 3:52:37 PM",lastUpdatedTimestamp:1652082757e3,headersStr:"flex å¸å±å®ä¾",content:'# flexå¸å±\n\n * flexå¸¸è§å±æ§\n * flex-growï¼flex-shrinkï¼flex-basis\n * flex:1\n * space-evenly\n * flexå¸å±å®ä¾\n\n----------------------------------------\n\n * Flex å¸å±æç¨ï¼è¯­æ³ç¯\n * flex:1è¯¦è§£\n * éç¹çè¿ç¯æç« \n\n.item {flex: none;}\n.item {\n    flex-grow: 0;\n    flex-shrink: 0;\n    flex-basis: auto;\n}\n\n\n.item {flex: auto;}\n.item {\n    flex-grow: 1;\n    flex-shrink: 1;\n    flex-basis: auto;\n}\n\n\n.item {flex: 1;}\n.item {\n    flex-grow: 1;\n    flex-shrink: 1;\n    flex-basis: 0%;\n}\n\n\n.item-1 {flex: 0%;}\n.item-1 {\n    flex-grow: 1;\n    flex-shrink: 1;\n    flex-basis: 0%;\n}\n\n.item-2 {flex: 24px;}\n.item-1 {\n    flex-grow: 1;\n    flex-shrink: 1;\n    flex-basis: 24px;\n}\n\n\n.item {flex: 2 3;}\n.item {\n    flex-grow: 2;\n    flex-shrink: 3;\n    flex-basis: 0%;\n}\n\n\nflex-basis è§å®çæ¯å­åç´ çåºåå¼ãæä»¥æ¯å¦æº¢åºçè®¡ç®ä¸æ­¤å±æ§æ¯æ¯ç¸å³ãflex-basis è§å®çèå´åå³äº box-sizingãè¿éä¸»è¦è®¨è®ºä»¥ä¸ flex-basis çåå¼æåµï¼\n\nautoï¼é¦åæ£ç´¢è¯¥å­åç´ çä¸»å°ºå¯¸ï¼å¦æä¸»å°ºå¯¸ä¸ä¸º autoï¼åä½¿ç¨å¼éåä¸»å°ºå¯¸ä¹å¼ï¼å¦æä¹æ¯ autoï¼åä½¿ç¨å¼ä¸º contentã\n\ncontentï¼ææ ¹æ®è¯¥å­åç´ çåå®¹èªå¨å¸å±ã(åå®¹å¤çå æ¯ä¹ä¼å¤)\n\nç¾åæ¯ï¼æ ¹æ®å¶åå«åï¼å³ä¼¸ç¼©ç¶å®¹å¨ï¼çä¸»å°ºå¯¸è®¡ç®ãå¦æåå«åçä¸»å°ºå¯¸æªå®ä¹ï¼å³ç¶å®¹å¨çä¸»å°ºå¯¸åå³äºå­åç´ ï¼ï¼åè®¡ç®ç»æåè®¾ä¸º auto ä¸æ ·ã\n\n\n * space-evenlyä¸ºé¡¹ç®ä¹é´é´è·ä¸é¡¹ç®ä¸å®¹å¨é´è·ç¸ç­ï¼ç¸å½äºé¤å»é¡¹ç®å®½åº¦ï¼å¹³ååéäºå©ä½å®½åº¦ä½ä¸ºé¡¹ç®å·¦å³marginã\n\n\n# flex å¸å±å®ä¾\n\n * åºæ¯ï¼ä¸è¡5ä¸ªå¡çï¼å¡çæ°éä¸éï¼èªå¨æ¢è¡ï¼ä»å·¦å°å³æåï¼æ¯å¦ç°å¨æ9ä¸ªå¡çï¼\n\n// å¦ä¸ææ\n1 1 1 1 1\n1 1 1 1\n\n\n * æ¯ä¸è¡å­åç´ çæ»åºåå¼æ¯ï¼20% * n\n * flex-grow å flex-shrink é½æ¯ 0ï¼ä¸åè®¸æ¾å¤§åç¼©å°ï¼é¤åºåå¼ä¹å¤çå©ä½ç©ºé´ä¸ä¼è¢«åé\n\n.list {\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: start;\n}\n.item {\n  flex: 0 0 20%;\n}\n\n\n----------------------------------------\n\n * åºæ¯ï¼å¦ä½å®ç°ä»¥ä¸ææï¼æå­é¨åå·¦å¯¹é½ï¼æ°å­ç¾åå·é¨åå³å¯¹é½\n\n\n\n<div class="wrap">\n  <div class="icon"><span></span></div>\n  <div class="name">æ»¡æ</div>\n  <div class="num">100</div>\n  <div class="percent">10%</div>\n</div>\n\n\n.manner {\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  .icon {\n    text-align: left;\n    flex: 0 0 10%;\n  }\n  .name {\n    text-align: left;\n    flex: 0 0 35%;\n  }\n  .sum {\n    text-align: right;\n    flex: 0 0 30%;\n  }\n  \n  .percent {\n    text-align: right;\n    flex: 0 0 25%;\n  }\n}\n\n\n> ä½¿ç¨ç¾åæ¯çåå æ¯å¨å¤å±çå­ååæ¶ï¼éé¢çåç´ ä¹ä¼è·éçååã\n> \n> å¯¹é½æ¹æ¡ä½¿ç¨ text-align å³å¯ã',normalizedContent:'# flexå¸å±\n\n * flexå¸¸è§å±æ§\n * flex-growï¼flex-shrinkï¼flex-basis\n * flex:1\n * space-evenly\n * flexå¸å±å®ä¾\n\n----------------------------------------\n\n * flex å¸å±æç¨ï¼è¯­æ³ç¯\n * flex:1è¯¦è§£\n * éç¹çè¿ç¯æç« \n\n.item {flex: none;}\n.item {\n    flex-grow: 0;\n    flex-shrink: 0;\n    flex-basis: auto;\n}\n\n\n.item {flex: auto;}\n.item {\n    flex-grow: 1;\n    flex-shrink: 1;\n    flex-basis: auto;\n}\n\n\n.item {flex: 1;}\n.item {\n    flex-grow: 1;\n    flex-shrink: 1;\n    flex-basis: 0%;\n}\n\n\n.item-1 {flex: 0%;}\n.item-1 {\n    flex-grow: 1;\n    flex-shrink: 1;\n    flex-basis: 0%;\n}\n\n.item-2 {flex: 24px;}\n.item-1 {\n    flex-grow: 1;\n    flex-shrink: 1;\n    flex-basis: 24px;\n}\n\n\n.item {flex: 2 3;}\n.item {\n    flex-grow: 2;\n    flex-shrink: 3;\n    flex-basis: 0%;\n}\n\n\nflex-basis è§å®çæ¯å­åç´ çåºåå¼ãæä»¥æ¯å¦æº¢åºçè®¡ç®ä¸æ­¤å±æ§æ¯æ¯ç¸å³ãflex-basis è§å®çèå´åå³äº box-sizingãè¿éä¸»è¦è®¨è®ºä»¥ä¸ flex-basis çåå¼æåµï¼\n\nautoï¼é¦åæ£ç´¢è¯¥å­åç´ çä¸»å°ºå¯¸ï¼å¦æä¸»å°ºå¯¸ä¸ä¸º autoï¼åä½¿ç¨å¼éåä¸»å°ºå¯¸ä¹å¼ï¼å¦æä¹æ¯ autoï¼åä½¿ç¨å¼ä¸º contentã\n\ncontentï¼ææ ¹æ®è¯¥å­åç´ çåå®¹èªå¨å¸å±ã(åå®¹å¤çå æ¯ä¹ä¼å¤)\n\nç¾åæ¯ï¼æ ¹æ®å¶åå«åï¼å³ä¼¸ç¼©ç¶å®¹å¨ï¼çä¸»å°ºå¯¸è®¡ç®ãå¦æåå«åçä¸»å°ºå¯¸æªå®ä¹ï¼å³ç¶å®¹å¨çä¸»å°ºå¯¸åå³äºå­åç´ ï¼ï¼åè®¡ç®ç»æåè®¾ä¸º auto ä¸æ ·ã\n\n\n * space-evenlyä¸ºé¡¹ç®ä¹é´é´è·ä¸é¡¹ç®ä¸å®¹å¨é´è·ç¸ç­ï¼ç¸å½äºé¤å»é¡¹ç®å®½åº¦ï¼å¹³ååéäºå©ä½å®½åº¦ä½ä¸ºé¡¹ç®å·¦å³marginã\n\n\n# flex å¸å±å®ä¾\n\n * åºæ¯ï¼ä¸è¡5ä¸ªå¡çï¼å¡çæ°éä¸éï¼èªå¨æ¢è¡ï¼ä»å·¦å°å³æåï¼æ¯å¦ç°å¨æ9ä¸ªå¡çï¼\n\n// å¦ä¸ææ\n1 1 1 1 1\n1 1 1 1\n\n\n * æ¯ä¸è¡å­åç´ çæ»åºåå¼æ¯ï¼20% * n\n * flex-grow å flex-shrink é½æ¯ 0ï¼ä¸åè®¸æ¾å¤§åç¼©å°ï¼é¤åºåå¼ä¹å¤çå©ä½ç©ºé´ä¸ä¼è¢«åé\n\n.list {\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: start;\n}\n.item {\n  flex: 0 0 20%;\n}\n\n\n----------------------------------------\n\n * åºæ¯ï¼å¦ä½å®ç°ä»¥ä¸ææï¼æå­é¨åå·¦å¯¹é½ï¼æ°å­ç¾åå·é¨åå³å¯¹é½\n\n\n\n<div class="wrap">\n  <div class="icon"><span></span></div>\n  <div class="name">æ»¡æ</div>\n  <div class="num">100</div>\n  <div class="percent">10%</div>\n</div>\n\n\n.manner {\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  .icon {\n    text-align: left;\n    flex: 0 0 10%;\n  }\n  .name {\n    text-align: left;\n    flex: 0 0 35%;\n  }\n  .sum {\n    text-align: right;\n    flex: 0 0 30%;\n  }\n  \n  .percent {\n    text-align: right;\n    flex: 0 0 25%;\n  }\n}\n\n\n> ä½¿ç¨ç¾åæ¯çåå æ¯å¨å¤å±çå­ååæ¶ï¼éé¢çåç´ ä¹ä¼è·éçååã\n> \n> å¯¹é½æ¹æ¡ä½¿ç¨ text-align å³å¯ã',charsets:{cjk:!0}},{title:"CSS å¸¸è§é®é¢",frontmatter:{},regularPath:"/css/problem.html",relativePath:"css/problem.md",key:"v-0a42a91f",path:"/css/problem.html",headers:[{level:2,title:"last-child ä¸çæé®é¢",slug:"last-child-ä¸çæé®é¢",normalizedTitle:"last-child ä¸çæé®é¢",charIndex:15}],lastUpdated:"5/11/2023, 4:00:15 PM",lastUpdatedTimestamp:1683792015e3,headersStr:"last-child ä¸çæé®é¢",content:'# CSS å¸¸è§é®é¢\n\n\n# last-child ä¸çæé®é¢\n\n<div>\n  <p class="list">1</p>\n  <p class="list">2</p>\n  <p class="list">3</p>\n  <p class="list">4</p>\n  <div>footer</div>\n</div>\n\n<style>\n  .list:last-child {\n    color: red;\n  }\n</style>\n\n\n> el:last-child çå¹éè§åæ¯ï¼ç¬¬ä¸æ­¥ï¼æ¥æ¾ el éæ©å¨å¹éåç´ çææåçº§åç´ ï¼siblingsï¼ï¼ç¬¬äºæ­¥ï¼å¨åçº§åç´ ä¸­æ¥æ¾æåä¸ä¸ªåç´ ï¼ç¬¬ä¸æ­¥ï¼æ£éªæåä¸ä¸ªåç´ æ¯å¦ä¸éæ©å¨ el å¹éã\n> \n> .list:last-child å¹éå°äº divï¼ä½ div ä¸å¹é .listï¼æéæ©å¨ä¸çæãæ¹æ³å¦ä¸ï¼\n\n<div>\n  <p class="list">1</p>\n  <p class="list">2</p>\n  <p class="list">3</p>\n  <p class="list">4</p>\n</div>\n<div>footer</div>\n\n<style>\n  .list:last-child {\n    color: red;\n  }\n</style>\n',normalizedContent:'# css å¸¸è§é®é¢\n\n\n# last-child ä¸çæé®é¢\n\n<div>\n  <p class="list">1</p>\n  <p class="list">2</p>\n  <p class="list">3</p>\n  <p class="list">4</p>\n  <div>footer</div>\n</div>\n\n<style>\n  .list:last-child {\n    color: red;\n  }\n</style>\n\n\n> el:last-child çå¹éè§åæ¯ï¼ç¬¬ä¸æ­¥ï¼æ¥æ¾ el éæ©å¨å¹éåç´ çææåçº§åç´ ï¼siblingsï¼ï¼ç¬¬äºæ­¥ï¼å¨åçº§åç´ ä¸­æ¥æ¾æåä¸ä¸ªåç´ ï¼ç¬¬ä¸æ­¥ï¼æ£éªæåä¸ä¸ªåç´ æ¯å¦ä¸éæ©å¨ el å¹éã\n> \n> .list:last-child å¹éå°äº divï¼ä½ div ä¸å¹é .listï¼æéæ©å¨ä¸çæãæ¹æ³å¦ä¸ï¼\n\n<div>\n  <p class="list">1</p>\n  <p class="list">2</p>\n  <p class="list">3</p>\n  <p class="list">4</p>\n</div>\n<div>footer</div>\n\n<style>\n  .list:last-child {\n    color: red;\n  }\n</style>\n',charsets:{cjk:!0}},{title:"è®¡ç®æºåºç¡",frontmatter:{},regularPath:"/computer/computer.html",relativePath:"computer/computer.md",key:"v-69aa6042",path:"/computer/computer.html",headers:[{level:2,title:"osiä¸å±æ¨¡åä¸tcp/ipäºå±æ¨¡å",slug:"osiä¸å±æ¨¡åä¸tcp-ipäºå±æ¨¡å",normalizedTitle:"osiä¸å±æ¨¡åä¸tcp/ipäºå±æ¨¡å",charIndex:12},{level:2,title:"TCPä¸UDPçåºå«",slug:"tcpä¸udpçåºå«",normalizedTitle:"tcpä¸udpçåºå«",charIndex:481},{level:2,title:"TCPä¸æ¬¡æ¡æï¼åæ¬¡æ¥æ",slug:"tcpä¸æ¬¡æ¡æ-åæ¬¡æ¥æ",normalizedTitle:"tcpä¸æ¬¡æ¡æï¼åæ¬¡æ¥æ",charIndex:1095},{level:2,title:"TCPå¦ä½å¯é ä¼ è¾",slug:"tcpå¦ä½å¯é ä¼ è¾",normalizedTitle:"tcpå¦ä½å¯é ä¼ è¾",charIndex:2268},{level:2,title:"TCPæ¥å¡æ§å¶",slug:"tcpæ¥å¡æ§å¶",normalizedTitle:"tcpæ¥å¡æ§å¶",charIndex:2457},{level:3,title:"æ¢ç­å¯å¨ç®æ³ â Slow Start",slug:"æ¢ç­å¯å¨ç®æ³-slow-start",normalizedTitle:"æ¢ç­å¯å¨ç®æ³ â slow start",charIndex:2519},{level:3,title:"æ¥å¡é¿åç®æ³ â Congestion Avoidance",slug:"æ¥å¡é¿åç®æ³-congestion-avoidance",normalizedTitle:"æ¥å¡é¿åç®æ³ â congestion avoidance",charIndex:2819},{level:3,title:"æ¥å¡åç",slug:"æ¥å¡åç",normalizedTitle:"æ¥å¡åç",charIndex:2438},{level:3,title:"å¿«æ¢å¤",slug:"å¿«æ¢å¤",normalizedTitle:"å¿«æ¢å¤",charIndex:3248},{level:2,title:"ä»ä¹æ¯ HTTP åè®®",slug:"ä»ä¹æ¯-http-åè®®",normalizedTitle:"ä»ä¹æ¯ http åè®®",charIndex:3469},{level:2,title:"é¿è¿æ¥ä¸å¤è·¯å¤ç¨",slug:"é¿è¿æ¥ä¸å¤è·¯å¤ç¨",normalizedTitle:"é¿è¿æ¥ä¸å¤è·¯å¤ç¨",charIndex:3975},{level:3,title:"æä¹çè§£å¤è·¯å¤ç¨",slug:"æä¹çè§£å¤è·¯å¤ç¨",normalizedTitle:"æä¹çè§£å¤è·¯å¤ç¨",charIndex:5305},{level:3,title:"TCP éå¤´é»å¡å HTTP éå¤´é»å¡",slug:"tcp-éå¤´é»å¡å-http-éå¤´é»å¡",normalizedTitle:"tcp éå¤´é»å¡å http éå¤´é»å¡",charIndex:5559},{level:3,title:"TCP é¿è¿æ¥å HTTP é¿è¿æ¥",slug:"tcp-é¿è¿æ¥å-http-é¿è¿æ¥",normalizedTitle:"tcp é¿è¿æ¥å http é¿è¿æ¥",charIndex:5784},{level:3,title:"å¦ä½è§£å³éå¤´é»å¡",slug:"å¦ä½è§£å³éå¤´é»å¡",normalizedTitle:"å¦ä½è§£å³éå¤´é»å¡",charIndex:6043},{level:3,title:"å¦ä½å¨ chrome ä¸­æ¥ç http åè®®",slug:"å¦ä½å¨-chrome-ä¸­æ¥ç-http-åè®®",normalizedTitle:"å¦ä½å¨ chrome ä¸­æ¥ç http åè®®",charIndex:6223},{level:3,title:"http 1.1 å http 2 å¯¹æ¯",slug:"http-1-1-å-http-2-å¯¹æ¯",normalizedTitle:"http 1.1 å http 2 å¯¹æ¯",charIndex:6301},{level:2,title:"HTTPS",slug:"https",normalizedTitle:"https",charIndex:6780},{level:2,title:"httpè¯·æ±æ¹æ³",slug:"httpè¯·æ±æ¹æ³",normalizedTitle:"httpè¯·æ±æ¹æ³",charIndex:8962},{level:2,title:"å¸¸è§è¯·æ±å¤´",slug:"å¸¸è§è¯·æ±å¤´",normalizedTitle:"å¸¸è§è¯·æ±å¤´",charIndex:9356},{level:3,title:"è¯·æ±å¤´å­æ®µ",slug:"è¯·æ±å¤´å­æ®µ",normalizedTitle:"è¯·æ±å¤´å­æ®µ",charIndex:9639},{level:2,title:"ååºå¤´å­æ®µ",slug:"ååºå¤´å­æ®µ",normalizedTitle:"ååºå¤´å­æ®µ",charIndex:11485},{level:2,title:"Content-type",slug:"content-type",normalizedTitle:"content-type",charIndex:12347},{level:3,title:"ç¨äºåç«¯è¯·æ±",slug:"ç¨äºåç«¯è¯·æ±",normalizedTitle:"ç¨äºåç«¯è¯·æ±",charIndex:12364},{level:3,title:"ç¨äºåç«¯ååº",slug:"ç¨äºåç«¯ååº",normalizedTitle:"ç¨äºåç«¯ååº",charIndex:12686},{level:2,title:"è¿ç¨ä¸çº¿ç¨",slug:"è¿ç¨ä¸çº¿ç¨",normalizedTitle:"è¿ç¨ä¸çº¿ç¨",charIndex:12898},{level:2,title:"åºäºå¯¹è±¡ä¸é¢åå¯¹è±¡",slug:"åºäºå¯¹è±¡ä¸é¢åå¯¹è±¡",normalizedTitle:"åºäºå¯¹è±¡ä¸é¢åå¯¹è±¡",charIndex:13218},{level:2,title:"ARPï¼RARP åè®®",slug:"arp-rarp-åè®®",normalizedTitle:"arpï¼rarp åè®®",charIndex:13426},{level:2,title:"æ°æ®åºäºå¡çåä¸ªç¹æ§",slug:"æ°æ®åºäºå¡çåä¸ªç¹æ§",normalizedTitle:"æ°æ®åºäºå¡çåä¸ªç¹æ§",charIndex:13884},{level:2,title:"æ°æ®åºç´¢å¼ä¸B+æ ",slug:"æ°æ®åºç´¢å¼ä¸b-æ ",normalizedTitle:"æ°æ®åºç´¢å¼ä¸b+æ ",charIndex:14064},{level:2,title:"æ­»é",slug:"æ­»é",normalizedTitle:"æ­»é",charIndex:14232},{level:2,title:"æéèªå¨æº",slug:"æéèªå¨æº",normalizedTitle:"æéèªå¨æº",charIndex:14432},{level:2,title:"ç¼è¯åççè¿ç¨",slug:"ç¼è¯åççè¿ç¨",normalizedTitle:"ç¼è¯åççè¿ç¨",charIndex:14567},{level:2,title:"linux è§£åå½ä»¤",slug:"linux-è§£åå½ä»¤",normalizedTitle:"linux è§£åå½ä»¤",charIndex:14619}],lastUpdated:"11/2/2023, 2:16:23 PM",lastUpdatedTimestamp:1698905783e3,headersStr:"osiä¸å±æ¨¡åä¸tcp/ipäºå±æ¨¡å TCPä¸UDPçåºå« TCPä¸æ¬¡æ¡æï¼åæ¬¡æ¥æ TCPå¦ä½å¯é ä¼ è¾ TCPæ¥å¡æ§å¶ æ¢ç­å¯å¨ç®æ³ â Slow Start æ¥å¡é¿åç®æ³ â Congestion Avoidance æ¥å¡åç å¿«æ¢å¤ ä»ä¹æ¯ HTTP åè®® é¿è¿æ¥ä¸å¤è·¯å¤ç¨ æä¹çè§£å¤è·¯å¤ç¨ TCP éå¤´é»å¡å HTTP éå¤´é»å¡ TCP é¿è¿æ¥å HTTP é¿è¿æ¥ å¦ä½è§£å³éå¤´é»å¡ å¦ä½å¨ chrome ä¸­æ¥ç http åè®® http 1.1 å http 2 å¯¹æ¯ HTTPS httpè¯·æ±æ¹æ³ å¸¸è§è¯·æ±å¤´ è¯·æ±å¤´å­æ®µ ååºå¤´å­æ®µ Content-type ç¨äºåç«¯è¯·æ± ç¨äºåç«¯ååº è¿ç¨ä¸çº¿ç¨ åºäºå¯¹è±¡ä¸é¢åå¯¹è±¡ ARPï¼RARP åè®® æ°æ®åºäºå¡çåä¸ªç¹æ§ æ°æ®åºç´¢å¼ä¸B+æ  æ­»é æéèªå¨æº ç¼è¯åççè¿ç¨ linux è§£åå½ä»¤",content:"# è®¡ç®æºåºç¡\n\n\n# osiä¸å±æ¨¡åä¸tcp/ipäºå±æ¨¡å\n\nOSIå®ä¹äºç½ç»äºè¿çä¸å±æ¡æ¶\n\n * åºç¨å±ï¼éå¯¹ä½ ç¹å®åºç¨çåè®®\n * è¡¨ç¤ºå±ï¼è®¾å¤åºå®çæ°æ®æ ¼å¼åç½ç»æ åæ°æ®æ ¼å¼ä¹é´çè½¬å\n * ä¼è¯å±ï¼éä¿¡ç®¡çï¼è´è´£å»ºç«ååå¼éä¿¡è¿æ¥ï¼ç®¡çä¼ è¾å± ä»¥ä¸åå±\n * ä¼ è¾å±ï¼ç®¡çä¸¤ä¸ªèç¹ä¹é´çæ°æ®ä¼ éãè´è´£å¯é ä¼ è¾\n * ç½ç»å±ï¼å°åç®¡çåè·¯ç±éæ©\n * æ°æ®é¾è·¯å±ï¼äºèè®¾å¤ä¹é´ä¼ éåè¯å«æ°æ®å¸§\n * ç©çå±ï¼çå®è¿æ¥å¨åç½çº¿ä¹é´çè§æ ¼\n\nTCP/IPåï¼äºï¼å±æ¨¡å\n\næ¯ä¸å±é½å¼å«å®çä¸ä¸å±æä¾çç½ç»æ¥å®æèªå·±çéæ±ãï¼å¦ææ¯åå±æ¨¡åæ°æ®é¾è·¯å±åç©çå±å¨ä¸å±ï¼\n\n * ç©çå±ï¼è´è´£åçµä¿¡å·ä¼ éæ¹å¼ãéçº¿å¨å·¥ä½å¨ç©çå±ãä»¥å¤ªç½åè®®ã\n * æ°æ®é¾è·¯å±ï¼è´è´£è®¾å¤ä¹é´çæ°æ®å¸§çä¼ è¾åè¯å«ãäº¤æ¢æºå·¥ä½å¨æ°æ®é¾è·¯å±ãä¾å¦ç½å¡è®¾å¤çé©±å¨ï¼å¸§åæ­¥ï¼å²çªæ£æµï¼æ°æ®å·®éæ ¡éªç­å·¥ä½ã\n * ç½ç»å±ï¼è´è´£å°åç®¡çåè·¯ç±éæ©ãè·¯ç±å¨å·¥ä½å¨ç½ç»å±ã\n * ä¼ è¾å±ï¼è´è´£ä¸¤å°ä¸»æºä¹é´çæ°æ®ä¼ è¾ã\n * åºç¨å±ï¼è´è´£åºç¨ç¨åºä¹é´çæ²éãç½ç»ç¼ç¨ä¸»è¦éå¯¹çå°±æ¯åºç¨å±ã\n\n\n# TCPä¸UDPçåºå«\n\n * tcp å udp é½æ¯å±äºä¼ è¾å±ï¼ä¼ è¾å±æä¾åºç¨ç¨åºé´çéä¿¡ï¼å¶åè½åæ¬æ ¼å¼åä¿¡æ¯æµï¼æä¾å¯é ä¼ è¾ã\n\n * TCPé¢åè¿æ¥ï¼å¦æçµè¯è¦åæ¨å·å»ºç«è¿æ¥ï¼;UDPæ¯æ è¿æ¥çï¼å³åéæ°æ®ä¹åä¸éè¦å»ºç«è¿æ¥\n\n * TCPæä¾å¯é çæå¡ãä¹å°±æ¯è¯´ï¼éè¿TCPè¿æ¥ä¼ éçæ°æ®ï¼æ å·®éï¼ä¸ä¸¢å¤±ï¼ä¸éå¤ï¼ä¸æåºå°è¾¾;UDPå°½æå¤§åªåäº¤ä»ï¼å³ä¸ä¿è¯å¯é äº¤ä»ã\n\n * Tcpéè¿æ ¡éªåï¼éä¼ æ§å¶ï¼åºå·æ è¯ï¼æ»å¨çªå£ãç¡®è®¤åºç­å®ç°å¯é ä¼ è¾ãå¦ä¸¢åæ¶çéåæ§å¶ï¼è¿å¯ä»¥å¯¹æ¬¡åºä¹±æçååè¿è¡é¡ºåºæ§å¶ã\n\n * UDPå·æè¾å¥½çå®æ¶æ§ï¼å·¥ä½æçæ¯TCPé«ï¼éç¨äºå¯¹é«éä¼ è¾åå®æ¶æ§æè¾é«çéä¿¡æå¹¿æ­éä¿¡ã\n\nä¸ºä»ä¹UDPææ¶æ¯TCPæ´æä¼å¿?\n\n * UDPä»¥å¶ç®åãä¼ è¾å¿«çä¼å¿ï¼å¨è¶æ¥è¶å¤åºæ¯ä¸åä»£äºTCP,å¦å®æ¶æ¸¸æã\n\n * ç½éçæåç»UDPçç¨³å®æ§æä¾å¯é ç½ç»ä¿éï¼ä¸¢åçå¾ä½ï¼å¦æä½¿ç¨åºç¨å±éä¼ ï¼è½å¤ç¡®ä¿ä¼ è¾çå¯é æ§ã\n\n * TCPä¸ºäºå®ç°ç½ç»éä¿¡çå¯é æ§ï¼ä½¿ç¨äºå¤æçæ¥å¡æ§å¶ç®æ³ï¼å»ºç«äºç¹ççæ¡æè¿ç¨ï¼ç±äºTCPåç½®çç³»ç»åè®®æ ä¸­ï¼æé¾å¯¹å¶è¿è¡æ¹è¿ã\n\n * éç¨TCPï¼ä¸æ¦åçä¸¢åï¼TCPä¼å°åç»­çåç¼å­èµ·æ¥ï¼ç­åé¢çåéä¼ å¹¶æ¥æ¶å°ååç»§ç»­åéï¼å»¶æ¶ä¼è¶æ¥è¶å¤§ï¼åºäºUDPå¯¹å®æ¶æ§è¦æ±è¾ä¸ºä¸¥æ ¼çæåµä¸ï¼éç¨èªå®ä¹éä¼ æºå¶ï¼è½å¤æä¸¢åäº§ççå»¶è¿éå°æä½ï¼å°½éåå°ç½ç»é®é¢å¯¹æ¸¸ææ§é æå½±å\n\n\n# TCPä¸æ¬¡æ¡æï¼åæ¬¡æ¥æ\n\nä¸æ¬¡æ¡æï¼éä¿çè®²\n                å®¢æ·ç«¯ï¼HIå¬è§äºå,\n                æå¡å¨ç«¯ï¼HIæå¬è§äºï¼\n                å®¢æ·ç«¯ï¼æä¹å¬è§ä½ äºã     æ¥ä¸æ¥å¼å§æå¿«å°èå¤©\nåæ¬¡æ¡æï¼éä¿çè®²\n                å®¢æ·ç«¯ï¼æä»¬åææï¼\n                æå¡ç«¯ï¼å¥½çï¼ä½ ç­æææ°æ®ç»ä½ ä¼ è¾å®\n                æå¡ç«¯ï¼æä¼ è¾å®äºï¼\n                å®¢æ·ç«¯ï¼å¥½äºï¼å¯ä»¥åæäºã æ¥ä¸æ¥å°±çæ­£çåæäº\n\n\n * ä¸æ¬¡æ¡æ\n * åæ¬¡æ¥æ\n * SYN (synchronouså»ºç«èæº)\n * ACK (acknowledgement ç¡®è®¤)\n * FIN (finishç»æ)\n * Sequence number (é¡ºåºå·ç )\n * ä¸ºä»ä¹TIME_WAITç¶æéè¦ç»è¿2MSL(æå¤§æ¥ææ®µçå­æ¶é´)æè½è¿åå°CLOSEç¶æ\n\nä¸ºäºä¿è¯Aåéçæåä¸ä¸ªACKæ¥æè½å¤å°è¾¾Bãè¿ä¸ªACKæ¥ææ®µæå¯è½ä¸¢å¤±ï¼å èä½¿å¤å¨LAST-ACKç¶æçBæ¶ä¸å°å¯¹å·²åéçFIN+ACKæ¥ææ®µçç¡®è®¤ãBä¼è¶æ¶éä¼ è¿ä¸ªFIN+ACKæ¥ææ®µï¼èAå°±è½å¨2MSLæ¶é´åæ¶å°è¿ä¸ªéä¼ çFIN+ACKæ¥ææ®µã\n\n\n * ä¸ºä»ä¹æ¯ä¸æ¬¡æ¡æèä¸æ¯ä¸¤æ¬¡æ¡æï¼\n\nä¸å¥è¯ï¼ä¸»è¦é²æ­¢å·²ç»å¤±æçè¿æ¥è¯·æ±æ¥æçªç¶åä¼ éå°äºæå¡å¨ï¼ä»èäº§çéè¯¯ã\n\nå¦æä½¿ç¨çæ¯ä¸¤æ¬¡æ¡æå»ºç«è¿æ¥ï¼åè®¾æè¿æ ·ä¸ç§åºæ¯ï¼å®¢æ·ç«¯åéäºç¬¬ä¸ä¸ªè¯·æ±è¿æ¥å¹¶ä¸æ²¡æä¸¢å¤±ï¼åªæ¯å ä¸ºå¨ç½ç»ç»ç¹ä¸­æ»ççæ¶é´å¤ªé¿äºï¼ç±äºTCPçå®¢æ·ç«¯è¿è¿æ²¡ææ¶å°ç¡®è®¤æ¥æï¼ä»¥ä¸ºæå¡å¨æ²¡ææ¶å°ï¼æ­¤æ¶éæ°åæå¡å¨åéè¿æ¡æ¥æï¼æ­¤åå®¢æ·ç«¯åæå¡å¨ç»è¿ä¸¤æ¬¡æ¡æå®æè¿æ¥ï¼ä¼ è¾æ°æ®ï¼ç¶åå³é­è¿æ¥ãæ­¤æ¶æ­¤åæ»ççé£ä¸æ¬¡è¯·æ±è¿æ¥ï¼ç½ç»éçäºå°è¾¾äºæå¡å¨ï¼è¿ä¸ªæ¥ææ¬è¯¥æ¯å¤±æçï¼ä½æ¯ï¼ä¸¤æ¬¡æ¡æçæºå¶å°ä¼è®©å®¢æ·ç«¯åæå¡å¨åæ¬¡å»ºç«è¿æ¥ï¼è¿å°å¯¼è´ä¸å¿è¦çéè¯¯åèµæºçæµªè´¹ã\n\nå¦æéç¨çæ¯ä¸æ¬¡æ¡æï¼å°±ç®æ¯é£ä¸æ¬¡å¤±æçæ¥æä¼ éè¿æ¥äºï¼æå¡ç«¯æ¥åå°äºé£æ¡å¤±ææ¥æå¹¶ä¸åå¤äºç¡®è®¤æ¥æï¼ä½æ¯å®¢æ·ç«¯ä¸ä¼åæ¬¡ååºç¡®è®¤ãç±äºæå¡å¨æ¶ä¸å°ç¡®è®¤ï¼å°±ç¥éå®¢æ·ç«¯å¹¶æ²¡æè¯·æ±è¿æ¥ã\n\n\n * ä¸ºä»ä¹å»ºç«è¿æ¥æ¯ä¸æ¬¡æ¡æï¼å³é­è¿æ¥ç¡®æ¯åæ¬¡æ¥æå¢ï¼\n\nå»ºç«è¿æ¥çæ¶åï¼ æå¡å¨å¨LISTENç¶æä¸ï¼æ¶å°å»ºç«è¿æ¥è¯·æ±çSYNæ¥æåï¼æACKåSYNæ¾å¨ä¸ä¸ªæ¥æéåéç»å®¢æ·ç«¯ã\nèå³é­è¿æ¥æ¶ï¼æå¡å¨æ¶å°å¯¹æ¹çFINæ¥ææ¶ï¼ä»ä»è¡¨ç¤ºå¯¹æ¹ä¸ååéæ°æ®äºä½æ¯è¿è½æ¥æ¶æ°æ®ï¼èèªå·±ä¹æªå¿å¨é¨æ°æ®é½åéç»å¯¹æ¹äºï¼æä»¥å·±æ¹å¯ä»¥ç«å³å³é­ï¼ä¹å¯ä»¥åéä¸äºæ°æ®ç»å¯¹æ¹åï¼ååéFINæ¥æç»å¯¹æ¹æ¥è¡¨ç¤ºåæç°å¨å³é­è¿æ¥ï¼å æ­¤ï¼å·±æ¹ACKåFINä¸è¬é½ä¼åå¼åéï¼ä»èå¯¼è´å¤äºä¸æ¬¡ã\n\n\n\n# TCPå¦ä½å¯é ä¼ è¾\n\n * éä¼ æºå¶\n * æ»å¨çªå£\n   * å¯ä»¥æå®çªå£å¤§å°ï¼çªå£å¤§å°å°±æ¯ææ éç­å¾ç¡®è®¤åºç­ï¼èå¯ä»¥ç»§ç»­åéæ°æ®çæå¤§å¼ã\n * æµéæ§å¶\n   * TCP æä¾ä¸ç§æºå¶å¯ä»¥è®©ãåéæ¹ãæ ¹æ®ãæ¥æ¶æ¹ãçå®éæ¥æ¶è½åæ§å¶åéçæ°æ®éï¼è¿å°±æ¯æè°çæµéæ§å¶ã\n * æ¥å¡æ§å¶\n   * æ¢å¯å¨\n   * æ¥å¡é¿å\n   * æ¥å¡åç\n   * å¿«éæ¢å¤\n\n\n# TCPæ¥å¡æ§å¶\n\næ¥å¡æ§å¶ä¸»è¦æ¯åä¸ªç®æ³ï¼\n\n * æ¢å¯å¨\n * æ¥å¡é¿å\n * æ¥å¡åç\n * å¿«éæ¢å¤\n\nå¾ç¤º\n\n\n# æ¢ç­å¯å¨ç®æ³ â Slow Start\n\næè°æ¢å¯å¨ï¼ä¹å°±æ¯TCPè¿æ¥åå»ºç«ï¼ä¸ç¹ä¸ç¹å°æéï¼è¯æ¢ä¸ä¸ç½ç»çæ¿åè½åï¼ä»¥åç´æ¥æ°ä¹±äºç½ç»ééçç§©åºã\n\n>  1. è¿æ¥å»ºå¥½çå¼å§ååå§åæ¥å¡çªå£cwndå¤§å°ä¸º1ï¼è¡¨æå¯ä»¥ä¼ ä¸ä¸ªMSSå¤§å°çæ°æ®ã 2) æ¯å½æ¶å°ä¸ä¸ªACKï¼cwndå¤§å°å ä¸ï¼åçº¿æ§ä¸åã 3) æ¯å½è¿äºä¸ä¸ªå¾è¿å»¶è¿æ¶é´RTT(Round-Trip Time)ï¼cwndå¤§å°ç´æ¥ç¿»åï¼ä¹ä»¥2ï¼åææ°è®©åã 4) è¿æä¸ä¸ªssthreshï¼slow start thresholdï¼ï¼æ¯ä¸ä¸ªä¸éï¼å½cwnd >= ssthreshæ¶ï¼å°±ä¼è¿å¥âæ¥å¡é¿åç®æ³âï¼åé¢ä¼è¯´è¿ä¸ªç®æ³ï¼\n\n\n# æ¥å¡é¿åç®æ³ â Congestion Avoidance\n\nå¦ååè¾¹è¯´çï¼å½æ¥å¡çªå£å¤§å°cwndå¤§äºç­äºæ¢å¯å¨éå¼ssthreshåï¼å°±è¿å¥æ¥å¡é¿åç®æ³ãç®æ³å¦ä¸ï¼\n\n> æ¶å°ä¸ä¸ªACKï¼åcwnd = cwnd + 1 / cwnd 2) æ¯å½è¿äºä¸ä¸ªå¾è¿å»¶è¿æ¶é´RTTï¼cwndå¤§å°å ä¸ãè¿äºæ¢å¯å¨éå¼åï¼æ¥å¡é¿åç®æ³å¯ä»¥é¿åçªå£å¢é¿è¿å¿«å¯¼è´çªå£æ¥å¡ï¼èæ¯ç¼æ¢çå¢å è°æ´å°ç½ç»çæä½³å¼ã\n\n\n# æ¥å¡åç\n\næä¸ºæ©æçTCP Tahoeç®æ³å°±åªä½¿ç¨ä¸è¿°å¤çåæ³ï¼ä½æ¯ç±äºä¸ä¸¢åå°±ä¸åéæ¥ï¼å¯¼è´cwndåéç½®ä¸º1ï¼ååä¸å©äºç½ç»æ°æ®çç¨³å®ä¼ éã\n\næä»¥ï¼TCP Renoç®æ³è¿è¡äºä¼åãå½æ¶å°ä¸ä¸ªéå¤ç¡®è®¤ACKæ¶ï¼TCPå¼å¯å¿«ééä¼ Fast Retransmitç®æ³ï¼èä¸ç¨ç­å°RTOè¶æ¶åè¿è¡éä¼ ï¼\n\n * cwndå¤§å°ç¼©å°ä¸ºå½åçä¸å\n * ssthreshè®¾ç½®ä¸ºç¼©å°åçcwndå¤§å°\n * ç¶åè¿å¥å¿«éæ¢å¤ç®æ³Fast Recoveryã\n\n\n# å¿«æ¢å¤\n\nå¨è¿å¥å¿«éæ¢å¤ä¹åï¼cwndåssthreshå·²ç»è¢«æ´æ¹ä¸ºåæcwndçä¸åãå¿«éæ¢å¤ç®æ³çé»è¾å¦ä¸ï¼\n\n * cwnd = cwnd + 3 * MSSï¼å 3 * MSSçåå æ¯å ä¸ºæ¶å°3ä¸ªéå¤çACKã\n * éä¼ DACKsæå®çæ°æ®åã\n * å¦æåæ¶å°DACKsï¼é£ä¹cwndå¤§å°å¢å ä¸ã\n * å¦ææ¶å°æ°çACKï¼è¡¨æéä¼ çåæåäºï¼é£ä¹éåºå¿«éæ¢å¤ç®æ³ãå°cwndè®¾ç½®ä¸ºssthreshï¼ç¶åè¿å¥æ¥å¡é¿åç®æ³ã\n\n\n# ä»ä¹æ¯ HTTP åè®®\n\n> è¶ææ¬ä¼ è¾åè®®ï¼æ¯ä¸ä¸ªåºäºè¯·æ±ä¸ååºï¼æ ç¶æçï¼åºç¨å±çåè®®ï¼å¸¸åºäºTCP/IPåè®®ä¼ è¾æ°æ®ï¼äºèç½ä¸åºç¨æä¸ºå¹¿æ³çä¸ç§ç½ç»åè®®,ææçWWWæä»¶é½å¿é¡»éµå®è¿ä¸ªæ åãè®¾è®¡HTTPçåè¡·æ¯ä¸ºäºæä¾ä¸ç§åå¸åæ¥æ¶HTMLé¡µé¢çæ¹æ³ã\n\nçæ¬         äº§çæ¶é´    åå®¹                                             åå±ç°ç¶\nHTTP/0.9   1991å¹´   ä¸æ¶åæ°æ®åä¼ è¾ï¼è§å®å®¢æ·ç«¯åæå¡å¨ä¹é´éä¿¡æ ¼å¼ï¼åªè½GETè¯·æ±               æ²¡æä½ä¸ºæ­£å¼çæ å\nHTTP/1.0   1996å¹´   ä¼ è¾åå®¹æ ¼å¼ä¸éå¶ï¼å¢å PUTãPATCHãHEADã OPTIONSãDELETEå½ä»¤   æ­£å¼ä½ä¸ºæ å\nHTTP/1.1   1997å¹´   æä¹è¿æ¥(é¿è¿æ¥)ãèçº¦å¸¦å®½ãHOSTåãç®¡éæºå¶ãååä¼ è¾ç¼ç                2015å¹´åä½¿ç¨æå¹¿æ³\nHTTP/2     2015å¹´   å¤è·¯å¤ç¨ãæå¡å¨æ¨éãå¤´ä¿¡æ¯åç¼©ãäºè¿å¶åè®®ç­                        éæ¸è¦çå¸åº\n\n\n# é¿è¿æ¥ä¸å¤è·¯å¤ç¨\n\n * é¿è¿æ¥ï¼å¨ä¸ä¸ªTCPè¿æ¥ä¸å¯ä»¥ä¼ éå¤ä¸ªHTTPè¯·æ±åååºï¼åå°äºå»ºç«åå³é­è¿æ¥çæ¶èåå»¶è¿ï¼å¨HTTP1.1ä¸­é»è®¤å¼å¯Connectionï¼ keep-aliveï¼ä¸å®ç¨åº¦ä¸å¼¥è¡¥äºHTTP1.0æ¯æ¬¡è¯·æ±é½è¦åå»ºè¿æ¥çç¼ºç¹ã\n\n * äºè¿å¶åå¸§ï¼å¨HTTP1.xä¸­ï¼æä»¬æ¯éè¿ææ¬çæ¹å¼ä¼ è¾æ°æ®ãåºäºææ¬çæ¹å¼ä¼ è¾æ°æ®å­å¨å¾å¤ç¼ºé·ï¼ææ¬çè¡¨ç°å½¢å¼æå¤æ ·æ§ï¼å æ­¤è¦åå°å¥å£®æ§èèçåºæ¯å¿ç¶æå¾å¤ï¼ä½æ¯äºè¿å¶åä¸åï¼åªæ0å1çç»åï¼å æ­¤éæ©äºäºè¿å¶ä¼ è¾ï¼å®ç°æ¹ä¾¿ä¸å¥å£®ãï¼1å¸§ = 8å­èï¼æå°éä¿¡åä½ï¼\n\n * é¦é¨åç¼©ï¼å¨HTTP1.0ä¸­ï¼æä»¬ä½¿ç¨ææ¬çå½¢å¼ä¼ è¾headerï¼å¨headerä¸­æºå¸¦cookieçè¯ï¼æ¯æ¬¡é½éè¦éå¤ä¼ è¾å ç¾å°å åçå­èï¼è¿çå®æ¯ä¸ç¬ä¸å°çå¼éã\n   \n   å¨HTTP2.0ä¸­ï¼æä»¬ä½¿ç¨äºHPACKï¼HTTP2å¤´é¨åç¼©ç®æ³ï¼åç¼©æ ¼å¼å¯¹ä¼ è¾çheaderè¿è¡ç¼ç ï¼åå°äºheaderçå¤§å°ãå¹¶å¨ä¸¤ç«¯ç»´æ¤äºç´¢å¼è¡¨ï¼ç¨äºè®°å½åºç°è¿çheaderï¼åé¢å¨ä¼ è¾è¿ç¨ä¸­å°±å¯ä»¥ä¼ è¾å·²ç»è®°å½è¿çheaderçé®åï¼å¯¹ç«¯æ¶å°æ°æ®åå°±å¯ä»¥éè¿é®åæ¾å°å¯¹åºçå¼ã\n\n * è¯·æ±ä¼åçº§ï¼æHTTPæ¶æ¯åä¸ºå¾å¤ç¬ç«å¸§ä¹åï¼å°±å¯ä»¥éè¿ä¼åè¿äºå¸§çäº¤éåä¼ è¾é¡ºåºè¿ä¸æ­¥ä¼åæ§è½ã\n\n * å¤è·¯å¤ç¨ï¼å¨ HTTP 1.0 ä¸­ï¼åèµ·ä¸ä¸ªè¯·æ±æ¯è¿æ ·çï¼\n\næµè§å¨è¯·æ± url -> è§£æåå -> å»ºç« HTTP è¿æ¥ -> æå¡å¨å¤çæä»¶ -> è¿åæ°æ® -> æµè§å¨è§£æãæ¸²ææä»¶ \n\nè¿ä¸ªæµç¨æå¤§çé®é¢æ¯ï¼æ¯æ¬¡è¯·æ±é½éè¦å»ºç«ä¸æ¬¡ HTTP è¿æ¥ï¼ä¹å°±æ¯æä»¬å¸¸è¯´ç3æ¬¡æ¡æ4æ¬¡æ¥æï¼è¿ä¸ªè¿ç¨å¨ä¸æ¬¡è¯·æ±è¿ç¨ä¸­å ç¨äºç¸å½é¿çæ¶é´ï¼èä¸é»è¾ä¸æ¯éå¿éçï¼å ä¸ºä¸é´æ­çè¯·æ±æ°æ®ï¼ç¬¬ä¸æ¬¡å»ºç«è¿æ¥æ¯æ­£å¸¸çï¼ä»¥åå°±å ç¨è¿ä¸ªééï¼ä¸è½½å¶ä»æä»¶ï¼è¿æ ·æçå¤é«åï¼\n\nä¸ºäºè§£å³è¿ä¸ªé®é¢ï¼ HTTP 1.1 ä¸­æä¾äº Keep-Aliveï¼åè®¸æä»¬å»ºç«ä¸æ¬¡è¿æ¥ï¼æ¥è¿åå¤æ¬¡è¯·æ±æ°æ®ã\n\nä½æ¯è¿éæä¸¤ä¸ªé®é¢ï¼\n\nHTTP 1.1 åºäºä¸²è¡æä»¶ä¼ è¾æ°æ®ï¼å æ­¤è¿äºè¯·æ±å¿é¡»æ¯æåºçï¼æ¯å¦éè¦ä¼ è¾ï¼hello worldï¼åªè½ä»hå°dä¸ä¸ªä¸ä¸ªçä¼ è¾ï¼ä¸è½å¹¶è¡ä¼ è¾ï¼å ä¸ºæ¥æ¶ç«¯å¹¶ä¸ç¥éè¿äºå­ç¬¦çé¡ºåºãæä»¥å®éä¸æä»¬åªæ¯èçäºå»ºç«è¿æ¥çæ¶é´ï¼èè·åæ°æ®çæ¶é´å¹¶æ²¡æåå°\n\næå¤§å¹¶åæ°é®é¢ï¼åè®¾æä»¬å¨ Apache ä¸­è®¾ç½®äºæå¤§å¹¶åæ° 300ï¼èå ä¸ºæµè§å¨æ¬èº«çéå¶ï¼æå¤§è¯·æ±æ°ä¸º 6ï¼é£ä¹æå¡å¨è½æ¿è½½çæé«å¹¶åæ°æ¯ 50\n\nè HTTP/2 å¼å¥äºè¿å¶æ°æ®å¸§åæµçæ¦å¿µï¼å¶ä¸­å¸§å¯¹æ°æ®è¿è¡é¡ºåºæ è¯ï¼è¿æ ·æµè§å¨æ¶å°æ°æ®ä¹åï¼å°±å¯ä»¥æç§åºåå¯¹æ°æ®è¿è¡åå¹¶ï¼èä¸ä¼åºç°åå¹¶åæ°æ®éä¹±çæåµãåæ ·æ¯å ä¸ºæäºåºåï¼æå¡å¨å°±å¯ä»¥å¹¶è¡çä¼ è¾æ°æ®ã\n\nHTTP/2 å¯¹åä¸ååä¸ææè¯·æ±é½æ¯åºäºæµï¼ä¹å°±æ¯è¯´åä¸ååä¸ç®¡è®¿é®å¤å°æä»¶ï¼ä¹åªå»ºç«ä¸è·¯è¿æ¥ãåæ ·Apacheçæå¤§è¿æ¥æ°ä¸º300ï¼å ä¸ºæäºè¿ä¸ªæ°ç¹æ§ï¼æå¤§çå¹¶åå°±å¯ä»¥æåå°300ï¼æ¯åæ¥æåäº6åã\n\nå°±å¥½æ¯é¢è¯ï¼HTTP1.1æ¯ä¸é¢ä¹åï¼è§é¢ä¸æ­ç»§ç»­äºé¢ï¼HTTP2.0æ¯åªè¦æé¢è¯å®æ¥äºå°±åæ¶é¢è¯ï¼ä¼ è¾æ°æ®ï¼\n\n\n\n\n\n# æä¹çè§£å¤è·¯å¤ç¨\n\nHTTP/2æ¯åºäºäºè¿å¶âå¸§âçåè®®ï¼HTTP/1.1æ¯åºäºâææ¬åå²âè§£æçåè®®ã\n\nHTTP 1.1 åºäºä¸²è¡æä»¶ä¼ è¾æ°æ®ï¼å æ­¤è¿äºè¯·æ±å¿é¡»æ¯æåºçï¼æ¯å¦éè¦ä¼ è¾ï¼hello worldï¼åªè½ä»hå°dä¸ä¸ªä¸ä¸ªçä¼ è¾ï¼ä¸è½å¹¶è¡ä¼ è¾ï¼å ä¸ºæ¥æ¶ç«¯å¹¶ä¸ç¥éè¿äºå­ç¬¦çé¡ºåºã\n\nè HTTP/2 å¼å¥äºè¿å¶æ°æ®å¸§åæµçæ¦å¿µï¼å¶ä¸­å¸§å¯¹æ°æ®è¿è¡é¡ºåºæ è¯ï¼è¿æ ·æµè§å¨æ¶å°æ°æ®ä¹åï¼å°±å¯ä»¥æç§åºåå¯¹æ°æ®è¿è¡åå¹¶ï¼èä¸ä¼åºç°åå¹¶åæ°æ®éä¹±çæåµãåæ ·æ¯å ä¸ºæäºåºåï¼æå¡å¨å°±å¯ä»¥å¹¶è¡çä¼ è¾æ°æ®ã\n\n\n# TCP éå¤´é»å¡å HTTP éå¤´é»å¡\n\n * TCP éå¤´é»å¡ï¼TCPæ°æ®åæ¯æåºä¼ è¾ï¼ä¸­é´ä¸ä¸ªæ°æ®åä¸¢å¤±ï¼ä¼ç­å¾è¯¥æ°æ®åéä¼ ï¼é æåé¢çæ°æ®åçé»å¡ã\n * HTTP éå¤´é»å¡ï¼http1.1éç¨é¿è¿æ¥ï¼å¯ä»¥å¨ä¸ä¸ªTCPè¯·æ±ä¸ï¼åéå¤ä¸ªhttpè¯·æ±ãç®¡éåçæºå¶ä½¿å¾è¯·æ±å¯ä»¥å¹¶è¡ååºï¼ä½æ¯ååºå¿é¡»ä¸²è¡è¿åãåä¸ä¸ªååºå¿é¡»å¨åä¸ä¸ªååºä¹åãåå æ¯ï¼æ²¡æåºå·æ æé¡ºåºï¼åªè½ä¸²è¡æ¥æ¶ãè¿å°±ä¼é æéå¤´é»å¡ï¼åä¸ä¸ªååºæªåæ¶è¿åï¼åé¢çååºè¢«é»å¡\n\n\n# TCP é¿è¿æ¥å HTTP é¿è¿æ¥\n\n * HTTP ç Keep-Alive ä¹å« HTTP é¿è¿æ¥ï¼è¯¥åè½æ¯ç±ãåºç¨ç¨åºãå®ç°çï¼å¯ä»¥ä½¿å¾ç¨åä¸ä¸ª TCP è¿æ¥æ¥åéåæ¥æ¶å¤ä¸ª HTTP è¯·æ±/åºç­ï¼åå°äº HTTP ç­è¿æ¥å¸¦æ¥çå¤æ¬¡ TCP è¿æ¥å»ºç«åéæ¾çå¼éã\n\n * TCP ç Keepalive ä¹å« TCP ä¿æ´»æºå¶ï¼è¯¥åè½æ¯ç±ãåæ ¸ãå®ç°çï¼å½å®¢æ·ç«¯åæå¡ç«¯é¿è¾¾ä¸å®æ¶é´æ²¡æè¿è¡æ°æ®äº¤äºæ¶ï¼åæ ¸ä¸ºäºç¡®ä¿è¯¥è¿æ¥æ¯å¦è¿ææï¼å°±ä¼åéæ¢æµæ¥æï¼æ¥æ£æµå¯¹æ¹æ¯å¦è¿å¨çº¿ï¼ç¶åæ¥å³å®æ¯å¦è¦å³é­è¯¥è¿æ¥ã\n\n\n# å¦ä½è§£å³éå¤´é»å¡\n\n * TCP éå¤´é»å¡ï¼ç´æ¥å¼ç¨ããè¯¦è§Http3\n * HTTP éå¤´é»å¡ï¼\n   * å»ºç«å¤ä¸ª Tcp è¿æ¥ï¼å¦ chrome æå¤éå¶6ä¸ªå¹¶åè¯·æ±ï¼æ¯ä¸ª TCP è¿æ¥å¯¹åºä¸ä¸ª connection ID\n   * Http2 å¤è·¯å¤ç¨ï¼å¯¹äºåä¸åååªéè¦åå»ºä¸ä¸ªè¿æ¥ï¼èä¸æ¯å http/1.1 é£æ ·åå»º 6~8 ä¸ªè¿æ¥\n\n\n\n\n# å¦ä½å¨ chrome ä¸­æ¥ç http åè®®\n\nåªéå¨ network ä¸­å³é®ç¹å»è¡¨å¤´ï¼å°±å¯ä»¥æ§å¶å±ç¤ºçåï¼å¶ä¸­å°±æ protocol éé¡¹ã\n\n\n\n\n# http 1.1 å http 2 å¯¹æ¯\n\nå¨http 1.1ï¼æä»¥æµè§å¨ä¼éå¶åä¸ä¸ªåçåæ¶è¯·æ±æ°ï¼Chromeæ¯éå¶6ä¸ªï¼å¦å¾ï¼\n\n\n\nä½å½æä»¬å¼å¯äºhttp/2ä¹åï¼ä¸ªæ°å ä¹æ²¡æéå¶äºï¼å¦ä¸å¾æç¤ºï¼\n\n\n\nä¸è¿è¯·æ±çé¡ºåºåå¹¶åå¹¶ä¸å®å¨ä¾èµäºæ­¤ï¼å¦æå¨é¡¹ç®ä¸­åäºå¦ä¸ä»£ç ï¼\n\nasync getData() {\n  await this.getList1();\n  await this.getList2();\n  await this.getList3();\n  await this.getList4();\n  await this.getList5();\n}\n\n\né£ä¹å¨ chrome ä¸­çè¡¨ç°å¦ä¸ï¼\n\n\n\næä»¬ä¸è¬å¯ä»¥ä¼åä¸ºï¼\n\nasync getData() {\n  await Promise.all([\n    this.getList1(),\n    this.getList2(),\n    this.getList3(),\n    this.getList4(),\n    this.getList5(),\n  ]);\n}\n\n\n\n# HTTPS\n\nHTTPè¯·æ±é½æ¯ææä¼ è¾çï¼æè°çæææçæ¯æ²¡æç»è¿å å¯çä¿¡æ¯ï¼å¦æHTTPè¯·æ±è¢«é»å®¢æ¦æªï¼å¹¶ä¸éé¢å«æé¶è¡å¡å¯ç ç­æææ°æ®çè¯ï¼ä¼éå¸¸å±é©ãä¸ºäºè§£å³è¿ä¸ªé®é¢ï¼Netscape å¬å¸å¶å®äºHTTPSåè®®ï¼HTTPSå¯ä»¥å°æ°æ®å å¯ä¼ è¾ï¼ä¹å°±æ¯ä¼ è¾çæ¯å¯æï¼å³ä¾¿é»å®¢å¨ä¼ è¾è¿ç¨ä¸­æ¦æªå°æ°æ®ä¹æ æ³ç ´è¯ï¼è¿å°±ä¿è¯äºç½ç»éä¿¡çå®å¨ã\n\n * HTTPåè®®è¿è¡å¨TCPä¹ä¸ï¼ææä¼ è¾çåå®¹é½æ¯ææï¼HTTPSè¿è¡å¨SSL/TLSä¹ä¸ï¼SSL/TLSè¿è¡å¨TCPä¹ä¸ï¼ææä¼ è¾çåå®¹é½ç»è¿å å¯çï¼ä¿è¯äºéä¿¡çä¿å¯æ§ãå½ç¶SSLåè®®å¹¶ä¸è½å¯¹UDPåºç¨è¿è¡ä¿æ¤\n\n * è½ç¶ä½¿ç¨ HTTP åè®®æ æ³ç¡®å®éä¿¡æ¹ï¼ä½¿ç¨ SSLå¯ä»¥ãSSLä½¿ç¨äºä¸ç§è¢«ç§°ä¸ºè¯ä¹¦çææ®µï¼è¯ä¹¦ç±å¼å¾ä¿¡ä»»çç¬¬ä¸æ¹æºæé¢åï¼ä½¿ç¨HTTPSåè®®éè¦å°CAç³è¯·è¯ä¹¦ï¼ä¸è¬åè´¹è¯ä¹¦å¾å°ï¼éè¦äº¤è´¹ãè¯ä¹¦ç¨ä»¥è¯ææå¡å¨åå®¢æ·ç«¯æ¯å®éå­å¨çãèº«ä»½ç¡®è®¤è¿ç¨ä½¿ç¨RSAéå¯¹ç§°å¯é¥å å¯æ¹å¼ï¼ç ´è§£é¾åº¦åºäºä¸¤ä¸ªå¤§ç´ æ°ä¹ç§¯çå å¼åè§£é¾åº¦ï¼ï¼ä½æ¯ä¸ºäºæé«æçï¼èº«ä»½ç¡®è®¤å®æåä½¿ç¨å±ååçå¯¹ç§°å¯é¥ã\n\n * SSLåè®®ä½äºTCP/IPåè®®ä¸åç§åºç¨å±åè®®ï¼ä¸æ­¢è½ç¨äºHTTPï¼ä¹é´ï¼ä¸ºæ°æ®éè®¯æä¾å®å¨æ¯æã\n   \n   SSLåè®®å¯åä¸ºä¸¤å±ï¼\n   \n   ï¼1ï¼SSLè®°å½åè®®ï¼å»ºç«å¨å¯é çä¼ è¾åè®®ï¼å¦TCPï¼ä¹ä¸ï¼ä¸ºé«å±åè®®æä¾æ°æ®å°è£ãåç¼©ãå å¯ç­åºæ¬åè½çæ¯æã\n   \n   ï¼2ï¼SSLæ¡æåè®®ï¼å»ºç«å¨è®°å½åè®®ä¹ä¸ï¼ç¨äºæ°æ®ä¼ è¾å¼å§åçåæ¹èº«ä»½è®¤è¯ãååå å¯ç®æ³ãäº¤æ¢å å¯å¯é¥ç­ã\n\n * ä¸»è¦æµç¨ï¼\n   \n   * å®¢æ·ç«¯åæå¡å¨åèµ·HTTPSè¯·æ±ï¼è¿æ¥å°æå¡å¨ç443ç«¯å£\n   * æå¡å¨ç«¯æä¸ä¸ªå¯é¥å¯¹ï¼å³å¬é¥åç§é¥ï¼æ¯ç¨æ¥è¿è¡éå¯¹ç§°å å¯ä½¿ç¨çï¼æå¡å¨ç«¯ä¿å­çç§é¥ï¼ä¸è½å°å¶æ³é²ï¼å¬é¥å¯ä»¥åéç»ä»»ä½äººã\n   * æå¡å¨å°èªå·±çå¬é¥åéç»å®¢æ·ç«¯ã\n   * å®¢æ·ç«¯æ¶å°æå¡å¨ç«¯çè¯ä¹¦ä¹åï¼ä¼å¯¹è¯ä¹¦è¿è¡æ£æ¥ï¼éªè¯å¶åæ³æ§ï¼å¦æåç°åç°è¯ä¹¦æé®é¢ï¼é£ä¹HTTPSä¼ è¾å°±æ æ³ç»§ç»­ãå¦æå¬é¥åæ ¼ï¼é£ä¹å®¢æ·ç«¯ä¼çæä¸ä¸ªéæºå¼ï¼è¿ä¸ªéæºå¼å°±æ¯ç¨äºè¿è¡å¯¹ç§°å å¯çå¯é¥ï¼æä»¬å°è¯¥å¯é¥ç§°ä¹ä¸ºclient keyï¼å³å®¢æ·ç«¯å¯é¥ï¼è¿æ ·å¨æ¦å¿µä¸åæå¡å¨ç«¯çå¯é¥å®¹æè¿è¡åºåãç¶åç¨æå¡å¨çå¬é¥å¯¹å®¢æ·ç«¯å¯é¥è¿è¡éå¯¹ç§°å å¯ï¼è¿æ ·å®¢æ·ç«¯å¯é¥å°±åæå¯æäºï¼è³æ­¤ï¼HTTPSä¸­çç¬¬ä¸æ¬¡HTTPè¯·æ±ç»æã\n   * å®¢æ·ç«¯ä¼åèµ·HTTPSä¸­çç¬¬äºä¸ªHTTPè¯·æ±ï¼å°å å¯ä¹åçå®¢æ·ç«¯å¯é¥åéç»æå¡å¨ã\n   * æå¡å¨æ¥æ¶å°å®¢æ·ç«¯åæ¥çå¯æä¹åï¼ä¼ç¨èªå·±çç§é¥å¯¹å¶è¿è¡éå¯¹ç§°è§£å¯ï¼è§£å¯ä¹åçææå°±æ¯å®¢æ·ç«¯å¯é¥ï¼ç¶åç¨å®¢æ·ç«¯å¯é¥å¯¹æ°æ®è¿è¡å¯¹ç§°å å¯ï¼è¿æ ·æ°æ®å°±åæäºå¯æã\n   * ç¶åæå¡å¨å°å å¯åçå¯æåéç»å®¢æ·ç«¯ã\n   * å®¢æ·ç«¯æ¶å°æå¡å¨åéæ¥çå¯æï¼ç¨å®¢æ·ç«¯å¯é¥å¯¹å¶è¿è¡å¯¹ç§°è§£å¯ï¼å¾å°æå¡å¨åéçæ°æ®ãè¿æ ·HTTPSä¸­çç¬¬äºä¸ªHTTPè¯·æ±ç»æï¼æ´ä¸ªHTTPSä¼ è¾å®æã\n\n * æ³¨æï¼ HTTPS å¨åå®¹ä¼ è¾çå å¯ä¸ä½¿ç¨çæ¯å¯¹ç§°å å¯ï¼éå¯¹ç§°å å¯åªä½ç¨å¨è¯ä¹¦éªè¯é¶æ®µã\n\n * ä¸ºä»ä¹æ°æ®ä¼ è¾æ¯ç¨å¯¹ç§°å å¯çï¼\n   \n   * éå¯¹ç§°å å¯çå è§£å¯æçéå¸¸ä½ï¼èHTTPçåºç¨åºæ¯ä¸­éå¸¸ç«¯ä¸ç«¯ä¹é´å­å¨å¤§éçäº¤äºï¼éå¯¹ç§°å å¯çæçæ¯æ æ³æ¥åçã\n   * å¨ HTTPS çåºæ¯ä¸­åªææå¡ç«¯ä¿å­äºç§é¥ï¼å®¢æ·ç«¯ä¸åéå¯¹ç§°å¯é¥çæï¼ä¸å¯¹å¬é¥åç§é¥åªè½å®ç°ååçå è§£å¯ï¼æä»¥HTTPS ä¸­åå®¹ä¼ è¾å å¯éåçæ¯å¯¹ç§°å å¯ï¼èä¸æ¯éå¯¹ç§°å å¯ã\n\n----------------------------------------\n\n> httpså¹¶éåºç¨å±çä¸ç§æ°åè®®ï¼åªæ¯httpéä¿¡æ¥å£é¨åç¨ssl/tlsåè®®ä»£æ¿èå·²ã\n> \n> SSLåTLSé½æ¯å å¯åè®® éå¸¸httpç´æ¥åtcpéä¿¡ï¼å½ä½¿ç¨sslæ¶åæ¼åæååssléä¿¡ï¼åç±sslåtcpéä¿¡ã æè°httpsï¼å¶å®å°±æ¯èº«æ«sslåè®®è¿å±å¤å£³çhttpãï¼åå¿ä¸ä¸osi7å±,TCP/IP4å±ï¼æä»¬å­¦çæ¯5å±ï¼\n> \n> SSLåè®®éç¨çæ¯éå¯¹ç§°å å¯ç®æ³ï¼å®¢æ·ç«¯ååæå¡å¨ç«¯ç´¢è¦å¬é¥ï¼ç¶åç¨å¬é¥å å¯ä¿¡æ¯ï¼æå¡å¨æ¶å°å¯æåï¼ç¨èªå·±çç§é¥è§£å¯.\n> \n> RSAç®æ³ï¼ä¸¤ä¸ªå¤§ç´ æ°p,qï¼n=pq,f(n)=(p-1)(q-1),1<b<f(n),a=b^-1modf(n),å¬é¥n,b,ç§é¥p,q,a\n> \n> è¯ä¹¦ï¼é¡¾åæä¹ï¼å°±æ¯è¯æçæä»¶ãä¾å¦æµè§å¨å tlanyan.me æå¡å¨éä¿¡ï¼æµè§å¨æä¹ç¥éå¯¹æ¹å°±æ¯ tlanyan.me å¯¹åºçæå¡å¨å¢ï¼å¨ä¸å¯ä¿¡çç½ç»ä¸éä¿¡ï¼ä¸­ç«çç¬¬ä¸æ¹ä½ç¨å°±æ¾ç°åºæ¥äºãæå¨çç¬¬ä¸æ¹ä¸­ç«æºæï¼ Certificate Authority, CAï¼æ¶å° tlanyan.me ææèçè¯ä¹¦è¯·æ±å¹¶æ ¸éªä¿¡æ¯åï¼å°ææèçåç§°ãå¬é¥ä¸ CA ç¨ç§é¥çæçæ°å­ç­¾åç­ä¿¡æ¯åæè¯ä¹¦é¢åç»ç³è¯·èã\n> \n> å½ä½ è®¿é®ä½¿ç¨ HTTPSï¼è¿æ¥å®å¨ï¼çç½ç«æ¶ï¼è¯¥ç½ç«çæå¡å¨ä¼ä½¿ç¨è¯ä¹¦åæµè§å¨ï¼å¦ Chromeï¼è¯æè¯¥ç½ç«çèº«ä»½ãä»»ä½äººé½å¯ä»¥åå»ºè¯ä¹¦ï¼éæå£°ç§°å¯¹åºçç½ç«æ¯ä»»æç½ç«ã\n> \n> ä¸ºäºç¡®ä¿æ¨å®å¨ä¸ç½ï¼Chrome ä¼è¦æ±ç½ç«ä½¿ç¨æ¥èªåä¿¡ä»»ç»ç»åæ¾çè¯ä¹¦ã\n\n\n# httpè¯·æ±æ¹æ³\n\nGET\n\n\nGETæ¹æ³è¯·æ±ä¸ä¸ªæå®èµæºçè¡¨ç¤ºå½¢å¼. ä½¿ç¨GETçè¯·æ±åºè¯¥åªè¢«ç¨äºè·åæ°æ®.\n\nHEAD\n\n\nHEADæ¹æ³è¯·æ±ä¸ä¸ªä¸GETè¯·æ±çååºç¸åçååºï¼ä½æ²¡æååºä½ï¼ä¸è¬ç¨äº1.æ£æ¥èµæºçæææ§ã 2.æ£æ¥è¶é¾æ¥çæææ§ã 3.æ£æ¥ç½é¡µæ¯å¦è¢«ä¸²æ¹ã\n\nPOST\n\n\nPOSTæ¹æ³ç¨äºå°å®ä½æäº¤å°æå®çèµæºï¼éå¸¸å¯¼è´å¨æå¡å¨ä¸çç¶æååæå¯ä½ç¨.\n\nPUT\n\n\nPUTæ¹æ³ç¨è¯·æ±ææè½½è·æ¿æ¢ç®æ èµæºçææå½åè¡¨ç¤ºã\n\nDELETE\n\n\nDELETEæ¹æ³å é¤æå®çèµæºã\n\nCONNECT\n\n\nCONNECTæ¹æ³å»ºç«ä¸ä¸ªå°ç±ç®æ èµæºæ è¯çæå¡å¨çé§éã\n\nOPTIONS\n\n\nOPTIONSæ¹æ³ç¨äºæè¿°ç®æ èµæºçéä¿¡éé¡¹ã\n\nTRACE\n\n\nTRACEæ¹æ³æ²¿çå°ç®æ èµæºçè·¯å¾æ§è¡ä¸ä¸ªæ¶æ¯ç¯åæµè¯ã\n\nPATCH\n\n\nPATCHæ¹æ³ç¨äºå¯¹èµæºåºç¨é¨åä¿®æ¹ã\n\n\n# å¸¸è§è¯·æ±å¤´\n\nHTTP é¦é¨å­æ®µæ¯ç±é¦é¨å­æ®µååå­æ®µå¼ææçï¼ä¸­é´ç¨åå· : åéã\n\né¦é¨å­æ®µå: å­æ®µå¼\n\n\nå¦å¤ï¼å­æ®µå¼å¯¹åºåä¸ª HTTP é¦é¨å­æ®µå¯ä»¥æå¤ä¸ªå¼ï¼å¤ä¸ªæä»¤ä¹é´éè¿ ,åéãå¦ä¸æç¤ºã\n\nKeep-Alive: timeout=15, max=100\n\n\nè¥æ³è¦å ä¼åçº§ï¼åä½¿ç¨ q=æ¥é¢å¤è¡¨ç¤ºæéå¼ 1 ï¼ç¨åå·ï¼;ï¼è¿è¡åéãæéå¼ q çèå´æ¯ 0~1ï¼å¯ç²¾ç¡®å°å°æ°ç¹å 3ä½ï¼ï¼ä¸ 1 ä¸ºæå¤§å¼ãä¸æå®æé q å¼æ¶ï¼é»è®¤æéä¸º q=1.0ã\n\nAccept-Language: zh-CN,zh;q=0.9,en;q=0.8\n\n\n\n# è¯·æ±å¤´å­æ®µ\n\n * Accept\n\nAccept: image/webp,image/apng,image/*,*/*;q=0.8\n\nAccept é¦é¨å­æ®µå¯éç¥æå¡å¨ï¼ç¨æ·ä»£çè½å¤å¤ççåªä½ç±»åååªä½ç±»åçç¸å¯¹ä¼åçº§ãå¯ä½¿ç¨type/subtype è¿ç§å½¢å¼ï¼ä¸æ¬¡æå®å¤ç§åªä½ç±»åã\n\n\n * Accept-Encoding\n\nAccept-Encoding: gzip, deflate, br\n\nAccept-Encoding é¦é¨å­æ®µç¨æ¥åç¥æå¡å¨ç¨æ·ä»£çæ¯æçåå®¹ç¼ç ååå®¹ç¼ç çä¼åçº§é¡ºåºãå¯ä¸æ¬¡æ§æå®å¤ç§åå®¹ç¼ç ã\n\n\n * Accept-Language\n\nAccept-Language: zh-CN,zh;q=0.9,en;q=0.8\n\né¦é¨å­æ®µ Accept-Language ç¨æ¥åç¥æå¡å¨ç¨æ·ä»£çè½å¤å¤ççèªç¶è¯­è¨éï¼æä¸­ææè±æç­ï¼ï¼ä»¥åèªç¶è¯­è¨éçç¸å¯¹ä¼åçº§ãå¯ä¸æ¬¡æå®å¤ç§èªç¶è¯­è¨éã\n\n\n * Cache-Control\n\nCache-Control: no-cacheï¼ç¼å­\n\n\n * Connection\n\nConnection: keep-alive\n\nHTTP/1.1 ä¹åç HTTP çæ¬çé»è®¤è¿æ¥é½æ¯éæä¹è¿æ¥ãä¸ºæ­¤ï¼å¦ææ³å¨æ§çæ¬çHTTP åè®®ä¸ç»´ææç»­è¿æ¥ï¼åéè¦æå®Connection é¦é¨å­æ®µçå¼ä¸º Keep-Aliveã\n\n\n * Cookie\n\né¦é¨å­æ®µ Cookie ä¼åç¥æå¡å¨ï¼å½å®¢æ·ç«¯æ³è·å¾HTTP ç¶æç®¡çæ¯ææ¶ï¼å°±ä¼å¨è¯·æ±ä¸­åå«ä»æå¡å¨æ¥æ¶å°ç Cookieã\n\n\n * Host\n\nHost: www.baidu.com\n\né¦é¨å­æ®µ Host ä¼åç¥æå¡å¨ï¼è¯·æ±çèµæºæå¤çäºèç½ä¸»æºååç«¯å£å·ãHost é¦é¨å­æ®µå¨HTTP/1.1 è§èåæ¯å¯ä¸ä¸ä¸ªå¿é¡»è¢«åå«å¨è¯·æ±åçé¦é¨å­æ®µã\n\n\n * Referer\n\né¦é¨å­æ®µ Referer ä¼åç¥æå¡å¨è¯·æ±çåå§èµæºç URIãå®è®°å½äºè¯¥ HTTP è¯·æ±çæ¥æºå°åã\n\nå¦æé»å®¢è¦å¯¹é¶è¡ç½ç«å®æ½ CSRF æ»å»ï¼ä»åªè½å¨ä»èªå·±çç½ç«æé è¯·æ±ï¼å½ç¨æ·éè¿é»å®¢çç½ç«åéè¯·æ±å°é¶è¡æ¶ï¼è¯¥è¯·æ±ç Referer æ¯æåé»å®¢èªå·±çç½ç«ãå æ­¤ï¼è¦é²å¾¡ CSRF æ»å»ï¼é¶è¡ç½ç«åªéè¦å¯¹äºæ¯ä¸ä¸ªè½¬è´¦è¯·æ±éªè¯å¶ Referer å¼ ã\n\nç¶èï¼è¿ç§æ¹æ³å¹¶éä¸æ ä¸å¤±ãReferer çå¼æ¯ç±æµè§å¨æä¾ç ï¼ç®åå·²ç»æä¸äºæ¹æ³å¯ä»¥ç¯¡æ¹ Referer å¼ \n\nå³ä¾¿æ¯ä½¿ç¨ææ°çæµè§å¨ï¼é»å®¢æ æ³ç¯¡æ¹ Referer å¼ï¼è¿ç§æ¹æ³ä»ç¶æé®é¢ãå ä¸º Referer å¼ä¼è®°å½ä¸ç¨æ·çè®¿é®æ¥æºï¼æäºç¨æ·è®¤ä¸ºè¿æ ·ä¼ä¾µç¯å°ä»ä»¬èªå·±çéç§æï¼å æ­¤ï¼ç¨æ·èªå·±å¯ä»¥è®¾ç½®æµè§å¨ä½¿å¶å¨åéè¯·æ±æ¶ä¸åæä¾ Refererãå½ä»ä»¬æ­£å¸¸è®¿é®é¶è¡ç½ç«æ¶ï¼ç½ç«ä¼å ä¸ºè¯·æ±æ²¡æ Referer å¼èè®¤ä¸ºæ¯ CSRF æ»å»ï¼æç»åæ³ç¨æ·çè®¿é®ã\n\n\n * Origin\n\nç¨æ¥è¯´æè¯·æ±ä»åªéåèµ·çï¼åæ¬ï¼ä¸ä»ä»åæ¬ åè®®åååã\nè¿ä¸ªåæ°ä¸è¬åªå­å¨äºCORSè·¨åè¯·æ±ä¸­ï¼å¯ä»¥çå° response æå¯¹åºç headerï¼Access-Control-Allow-Originã\n\n\n * User-Agent\n\né¦é¨å­æ®µ User-Agent ä¼å°åå»ºè¯·æ±çæµè§å¨åç¨æ·ä»£çåç§°ç­ä¿¡æ¯ä¼ è¾¾ç»æå¡å¨ã\n\n\n * Pragma\n\nPragma: no-cache\n\nPragma æ¯ HTTP/1.1 ä¹åçæ¬çåå²éçå­æ®µï¼ä»ä½ä¸ºä¸ HTTP/1.0 çååå¼å®¹èå®ä¹ãå®¢æ·ç«¯ä¼è¦æ±ææçä¸­é´æå¡å¨ä¸è¿åç¼å­çèµæºã\n\n\n * Content-Type\n\nContent-Typeæ¥è¡¨ç¤ºå·ä½è¯·æ±ä¸­çåªä½ç±»åä¿¡æ¯ã\n\napplication/x-www-form-urlencoded\n\nè¯·æ±åæ°æ ¼å¼`key1=val1&key2=val2`çæ¹å¼è¿è¡æ¼æ¥ï¼å¹¶æ¾å°è¯·æ±å®ä½éé¢ï¼å¦ææ¯ä¸­ææç¹æ®å­ç¬¦ç­ä¼èªå¨è¿è¡URLè½¬ç ãä¸è¬ç¨äºè¡¨åæäº¤\n\napplication/json\n\napplication/json ä½ä¸ºååºå¤´æ¯è¾å¸¸è§ï¼ç¨æ¥åè¯æå¡ç«¯æ¶æ¯ä¸»ä½æ¯åºåååç JSON å­ç¬¦ä¸²ï¼å¶ä¸­ä¸ä¸ªå¥½å¤å°±æ¯JSON æ ¼å¼æ¯ææ¯é®å¼å¯¹å¤æå¾å¤çç»æåæ°æ®ãç±äº JSON è§èçæµè¡ï¼é¤äºä½çæ¬ IE ä¹å¤çåå¤§æµè§å¨é½åçæ¯æJSON.stringifyï¼æå¡ç«¯è¯­è¨ä¹é½æå¤ç JSON çå½æ°ï¼ä½¿ç¨èµ·æ¥æ²¡æå°é¾ã\n\n\n\n# ååºå¤´å­æ®µ\n\né¢æ£è¯·æ±ç¸å³ååºå¤´\n\n * Access-Control-Allow-Originï¼ååºå¤´æå®äºè¯¥ååºçèµæºæ¯å¦è¢«åè®¸ä¸ç»å®çoriginå±äº«ã\n\n * Access-Control-Allow-Methods: ååºé¦é¨ Access-Control-Allow-Methods å¨å¯¹ preflight request.ï¼é¢æ£è¯·æ±ï¼çåºç­ä¸­æç¡®äºå®¢æ·ç«¯æè¦è®¿é®çèµæºåè®¸ä½¿ç¨çæ¹æ³ææ¹æ³åè¡¨ã\n\n * Access-Control-Allow-Headers: ååºé¦é¨ Access-Control-Allow-Headers ç¨äº preflight request ï¼é¢æ£è¯·æ±ï¼ä¸­ï¼ååºäºå°ä¼å¨æ­£å¼è¯·æ±ç Access-Control-Request-Headers å­æ®µä¸­åºç°çé¦é¨ä¿¡æ¯ã\n\n * Access-Control-Allow-Credentials: å½è¯·æ±è¦æ±æºå¸¦è¯ä¹¦ä¿¡æ¯ï¼ä¾å¦cookie,ææä¿¡æ¯ç­ï¼éªè¯ï¼æå¡å¨ç«¯æ¯å¦åè®¸æºå¸¦\n\n * Access-Control-Max-Age: æ¬æ¬¡é¢æ£è¯·æ±çæææï¼åä½ä¸ºç§\n\n----------------------------------------\n\n * Date\n\næå¡ç«¯ååºå®¢æ·ç«¯çæ¶é´\n\n\n * Server\n\næå¡å¨åå­\n\n\n * Content-Type\n\næå¡ç«¯åéçåªä½ç±»å\n\n\n * Set-Cookie\n\næµè§å¨ä¼å¨å½åé¡µé¢æå¨ååè®¾ç½®cookieï¼å½æµè§å¨åæ¬¡åéè¯·æ±æ¶ï¼æµè§å¨é»è®¤ä¼èªå¨å°cookieæ¾å¨è¯·æ±å¤´ä¸­çCookieé¡¹ä¸­åéç»æå¡å¨ã\n\n\n * Cache-ControlãE-Tag ã Last-Modified\n\n * Content-Encoding\n\nææ¡£çç¼ç ï¼Encodeï¼æ¹æ³ãåªæå¨è§£ç ä¹åæå¯ä»¥å¾å°Content-Typeå¤´æå®çåå®¹ç±»åãå©ç¨gzipåç¼©ææ¡£è½å¤æ¾èå°åå°HTMLææ¡£çä¸è½½æ¶é´ã\n\n\n * Connection\n\nKeep-alive é¿è¿æ¥\n\n\n\n# Content-type\n\n\n# ç¨äºåç«¯è¯·æ±\n\n * Content-Type è®¾ç½®ä¸ get è¯·æ±æ å³,ä¸è¬ä¸postè¯·æ±ç¸å³\n\n * å½ç¨ form è¡¨åæäº¤æ¶ Content-Type é»è®¤ä¸ºapplication/x-www-form-urlencodedï¼å½ç¨XHRæäº¤æ¶ï¼Content-Typeé»è®¤ä¸ºapplication/json\n\n * Content-Type ä¸º application/x-www-form-urlencodedæ¶æäº¤æ°æ®çæ¹å¼ä¸ºa = 123&b = 456&c = [1,2,3]\n\n * Content-Typeä¸ºapplication/jsonæ¶éè¦ä»¥jsonå½¢å¼æäº¤body: '{\"a\":123,\"b\":456}'\n\n\n# ç¨äºåç«¯ååº\n\n * 'text/html' // ç¨äºæå®htmlæä»¶\n\n * 'text/plain' // htmlçæºç ä¼æ¾ç¤ºå°é¡µé¢ä¸\n\n * 'text/css' // ç¨äºæå®cssæä»¶\n\n * 'image/jpg' // ç¨äºæå®å¾çæ ¼å¼\n\n * 'aplication/javascript' // ç¨äºæå®jsæä»¶\n\n * 'application/json' // ç¨äºæå®è¯·æ±æ¥å£çæ°æ®æ ¼å¼\n\n\n# è¿ç¨ä¸çº¿ç¨\n\n * è¿ç¨æ¯CPUèµæºåéçæå°åä½ï¼è½æ¥æèµæºåç¬ç«è¿è¡çæå°åä½ï¼\n * çº¿ç¨æ¯CPUè°åº¦çæå°åä½ï¼çº¿ç¨æ¯å»ºç«å¨è¿ç¨åºç¡ä¸çä¸æ¬¡ç¨åºè¿è¡åä½ï¼ä¸ä¸ªè¿ç¨å¯ä»¥æå¤ä¸ªçº¿ç¨ï¼\n * åä¸è¿ç¨ä¸­çå¤æ¡çº¿ç¨è®²å±äº«è¯¥è¿ç¨ä¸­çå¨é¨ç³»ç»èµæºï¼ä½æ¯åä¸è¿ç¨ä¸­çå¤ä¸ªçº¿ç¨æåèªçè°ç¨æ ï¼èªå·±ççº¿ç¨æ¬å°å­å¨ãä¸ä¸ªè¿ç¨å¯ä»¥æå¾å¤çº¿ç¨ï¼æ¯æ¡çº¿ç¨å¹¶è¡æ§è¡ä¸åçä»»å¡\n * è¿ç¨é´éä¿¡æ¹å¼ï¼ç®¡éãä¿¡å·éãæ¶æ¯éåãå±äº«åå­ãå¥æ¥å­ï¼socketï¼ã\n * çº¿ç¨é´çéä¿¡ç®çä¸»è¦æ¯ç¨äºçº¿ç¨åæ­¥ï¼æä»¥çº¿ç¨æ²¡æåè¿ç¨éä¿¡ä¸­çç¨äºæ°æ®äº¤æ¢çéä¿¡æºå¶ãï¼éæºå¶ï¼åæ¬äºæ¥éãæ¡ä»¶åéãè¯»åéï¼ä¿¡å·éæºå¶(Semaphore)ï¼ä¿¡å·æºå¶(Signal)ï¼\n\n\n# åºäºå¯¹è±¡ä¸é¢åå¯¹è±¡\n\n * é¢åå¯¹è±¡çä¸å¤§ç¹ç¹ï¼å°è£ï¼ç»§æ¿ï¼å¤æï¼ç¼ºä¸ä¸å¯ï¼ä¾å¦ c++ï¼java\n * åºäºå¯¹è±¡çè¯­è¨ï¼ä½¿ç¨ä¸äºå°è£å¥½çå¯¹è±¡ï¼è°ç¨å¯¹è±¡çæ¹æ³ï¼è®¾ç½®å¯¹è±¡çå±æ§ï¼ä½æ¯æ æ³æ´¾çæ°çå¯¹è±¡ç±»åï¼åªè½ä½¿ç¨ç°æå¯¹è±¡çæ¹æ³åå±æ§ã\n * javascriptè½ç¶éè¿ååé¾ç­å®ç°äºç»§æ¿ï¼éè¿argumentså®ç°å½æ°éè½½ç­ç¹ç¹ï¼ä½æ¯é½æ¯å±äºæ¨¡æå®ç°ï¼æ¬è´¨ä¸è¿æ¯åºäºå¯¹è±¡çè¯­è¨ï¼å®éä¸å¯ä»¥å®ç°é¢åå¯¹è±¡ç¼ç¨ã\n\n\n# ARPï¼RARP åè®®\n\narpåè®®ï¼å°åè§£æåè®®\n\nå¨å±åç½ä¸­ï¼å½ä¸»æº A ææ°æ®è¦åéç»ä¸»æº B æ¶ï¼A å¿é¡»ç¥é B ç IP å°åã\n\nä½æ¯ä»ä»æIPå°åè¿æ¯ä¸å¤çï¼å ä¸ºIPæ°æ®æ¥æè¿éè¦å¨æ°æ®é¾è·¯å±å°è£æå¸§æè½éè¿ç©çç½ç»åéãå ä¸ºåéç«¯è¿å¿é¡»ææ¥æ¶ç«¯çMACå°åï¼æä»¥éè¦ä¸ä¸ªä»IPå°åå°MACå°åçæ å°ãARPå°±æ¯å¹²è¿äºæçåè®®ã\n\n>  1. ä¸»æº A èªèº« arp ç¼å­è¡¨ä¸­ï¼æ²¡æä¸»æº B ç MAC ä¿¡æ¯ï¼ä¼å¨æ´ä¸ªç½ç»ä¸­å¹¿æ­ arp è¯·æ±\n>  2. ä¸»æº B æ¥æ¶å° arp è¯·æ±åï¼åå°ä¸»æº A ç MAC çå°åå å¥èªå·±ç arp ç¼å­è¡¨ä¸­\n>  3. ååé arp ç­å¤ï¼ææ¯ä¸»æº Bï¼æç mac å°åæ¯ä»ä¹\n>  4. ä¸»æº A æ·»å ä¸»æº B ç MAC å°åä¿¡æ¯ï¼ç»ä¸»æº B åéä¿¡æ¯ï¼æ ¹æ® arp ç¼å­è¡¨ç´æ¥åé\n> \n> rarpåè®®ï¼ååå°åè§£æåè®®\n> \n> å±åç½ä¸­ï¼ç¥éäºæä¸ªä¸»æºç MAC å°åï¼ä¸ç¥éæä¸ªä¸»æºç IP å°åï¼éè¿ rarp åè®®è·å¾å°åã\n\n\n# æ°æ®åºäºå¡çåä¸ªç¹æ§\n\näºå¡ï¼Transactionï¼æ¯å¹¶åæ§å¶åä½ï¼æ¯ç¨æ·å®ä¹çä¸ä¸ªæä½åºåï¼è¿äºæä½è¦ä¹é½åï¼è¦ä¹é½ä¸åï¼æ¯ä¸ä¸ªä¸å¯åå²çå·¥ä½åä½ã\n\näºå¡å·æåä¸ªç¹å¾ï¼åå­æ§ï¼ Atomicity ï¼ãä¸è´æ§ï¼ Consistency ï¼ãéç¦»æ§ï¼ Isolation ï¼åæç»­æ§ï¼ Durability ï¼ãè¿åä¸ªç¹æ§ç®ç§°ä¸º ACID ç¹æ§ã\n\n\n# æ°æ®åºç´¢å¼ä¸B+æ \n\næ°æ®åºç´¢å¼å¶å®å°±æ¯ä¸ºäºä½¿æ¥è¯¢æ°æ®æçå¿«ã\n\n 1. èéç´¢å¼ï¼ä¸»é®ç´¢å¼ï¼ï¼å¨æ°æ®åºéé¢ï¼ææè¡æ°é½ä¼æç§ä¸»é®ç´¢å¼è¿è¡æåºã(æ¼é³é¦å­æ¯ä½ä¸ºä¸»é®æ¥å­å¸)\n 2. éèéç´¢å¼ï¼å°±æ¯ç»æ®éå­æ®µå ä¸ç´¢å¼ãï¼åæé¨é¦å»æ¥ï¼\n 3. èåç´¢å¼ï¼å°±æ¯å¥½å ä¸ªå­æ®µç»æçç´¢å¼ï¼ç§°ä¸ºèåç´¢å¼ãï¼æ¼é³+åæé¨é¦å»æ¥ï¼\n\nB+æ \n\n\n# æ­»é\n\næ­»éæ¯æä¸¤ä¸ªæä¸¤ä¸ªä»¥ä¸çè¿ç¨å¨æ§è¡è¿ç¨ä¸­ï¼ç±äºç«äºèµæºæèç±äºå½¼æ­¤éä¿¡èé æçä¸ç§é»å¡çç°è±¡ï¼è¥æ å¤åä½ç¨ï¼å®ä»¬é½å°æ æ³æ¨è¿ä¸å»ãæ­¤æ¶ç§°ç³»ç»å¤äºæ­»éç¶ææç³»ç»äº§çäºæ­»éï¼è¿äºæ°¸è¿å¨äºç¸ç­å¾çè¿ç¨ç§°ä¸ºæ­»éè¿ç¨ã\n\nä¾å¦ï¼çº¿ç¨ A ææ lockA å¯¹è±¡ï¼å¹¶è¯·æ± lockB å¯¹è±¡ï¼çº¿ç¨ B ææ lockB å¯¹è±¡ï¼å¹¶è¯·æ± lockA å¯¹è±¡ãç±äºä»ä»¬é½å¨ç­å¾å¯¹æ¹éæ¾èµæºï¼æä»¥ä¼äº§çæ­»é\n\n\n# æéèªå¨æº\n\n * ä¸è¬æä»¬ä¼ç¨ç¶æå¾æ¥æè¿°ä¸ä¸ªæéèªå¨æºï¼Finite Automataï¼ãå®æä¸åªæä¸ä¸ªèµ·å§ç¶æï¼å¨ç¶æå¾ä¸­ï¼ä¸ä¸ªä»ä¸ç¥éä»ä¹å°æ¹æ¥çç®­å¤´æåçç¶æï¼ï¼æä¸äºæ¥åç¶æï¼ç¶æå¾ä¸­æä¸¤ä¸ªååèµ·æ¥çç¶æï¼ã\n * æéèªå¨æºçè¾åºæ¯æ¥åæèæç»ã\n\n\n# ç¼è¯åççè¿ç¨\n\n> è¯æ³åæçætokensæµï¼è¯­æ³åæè½¬æ¢æASTï¼ASTèç¹éåè¿è¡å¤ç\n\n\n# linux è§£åå½ä»¤\n\nhttps://blog.csdn.net/qq_40232872/article/details/79159753",normalizedContent:"# è®¡ç®æºåºç¡\n\n\n# osiä¸å±æ¨¡åä¸tcp/ipäºå±æ¨¡å\n\nosiå®ä¹äºç½ç»äºè¿çä¸å±æ¡æ¶\n\n * åºç¨å±ï¼éå¯¹ä½ ç¹å®åºç¨çåè®®\n * è¡¨ç¤ºå±ï¼è®¾å¤åºå®çæ°æ®æ ¼å¼åç½ç»æ åæ°æ®æ ¼å¼ä¹é´çè½¬å\n * ä¼è¯å±ï¼éä¿¡ç®¡çï¼è´è´£å»ºç«ååå¼éä¿¡è¿æ¥ï¼ç®¡çä¼ è¾å± ä»¥ä¸åå±\n * ä¼ è¾å±ï¼ç®¡çä¸¤ä¸ªèç¹ä¹é´çæ°æ®ä¼ éãè´è´£å¯é ä¼ è¾\n * ç½ç»å±ï¼å°åç®¡çåè·¯ç±éæ©\n * æ°æ®é¾è·¯å±ï¼äºèè®¾å¤ä¹é´ä¼ éåè¯å«æ°æ®å¸§\n * ç©çå±ï¼çå®è¿æ¥å¨åç½çº¿ä¹é´çè§æ ¼\n\ntcp/ipåï¼äºï¼å±æ¨¡å\n\næ¯ä¸å±é½å¼å«å®çä¸ä¸å±æä¾çç½ç»æ¥å®æèªå·±çéæ±ãï¼å¦ææ¯åå±æ¨¡åæ°æ®é¾è·¯å±åç©çå±å¨ä¸å±ï¼\n\n * ç©çå±ï¼è´è´£åçµä¿¡å·ä¼ éæ¹å¼ãéçº¿å¨å·¥ä½å¨ç©çå±ãä»¥å¤ªç½åè®®ã\n * æ°æ®é¾è·¯å±ï¼è´è´£è®¾å¤ä¹é´çæ°æ®å¸§çä¼ è¾åè¯å«ãäº¤æ¢æºå·¥ä½å¨æ°æ®é¾è·¯å±ãä¾å¦ç½å¡è®¾å¤çé©±å¨ï¼å¸§åæ­¥ï¼å²çªæ£æµï¼æ°æ®å·®éæ ¡éªç­å·¥ä½ã\n * ç½ç»å±ï¼è´è´£å°åç®¡çåè·¯ç±éæ©ãè·¯ç±å¨å·¥ä½å¨ç½ç»å±ã\n * ä¼ è¾å±ï¼è´è´£ä¸¤å°ä¸»æºä¹é´çæ°æ®ä¼ è¾ã\n * åºç¨å±ï¼è´è´£åºç¨ç¨åºä¹é´çæ²éãç½ç»ç¼ç¨ä¸»è¦éå¯¹çå°±æ¯åºç¨å±ã\n\n\n# tcpä¸udpçåºå«\n\n * tcp å udp é½æ¯å±äºä¼ è¾å±ï¼ä¼ è¾å±æä¾åºç¨ç¨åºé´çéä¿¡ï¼å¶åè½åæ¬æ ¼å¼åä¿¡æ¯æµï¼æä¾å¯é ä¼ è¾ã\n\n * tcpé¢åè¿æ¥ï¼å¦æçµè¯è¦åæ¨å·å»ºç«è¿æ¥ï¼;udpæ¯æ è¿æ¥çï¼å³åéæ°æ®ä¹åä¸éè¦å»ºç«è¿æ¥\n\n * tcpæä¾å¯é çæå¡ãä¹å°±æ¯è¯´ï¼éè¿tcpè¿æ¥ä¼ éçæ°æ®ï¼æ å·®éï¼ä¸ä¸¢å¤±ï¼ä¸éå¤ï¼ä¸æåºå°è¾¾;udpå°½æå¤§åªåäº¤ä»ï¼å³ä¸ä¿è¯å¯é äº¤ä»ã\n\n * tcpéè¿æ ¡éªåï¼éä¼ æ§å¶ï¼åºå·æ è¯ï¼æ»å¨çªå£ãç¡®è®¤åºç­å®ç°å¯é ä¼ è¾ãå¦ä¸¢åæ¶çéåæ§å¶ï¼è¿å¯ä»¥å¯¹æ¬¡åºä¹±æçååè¿è¡é¡ºåºæ§å¶ã\n\n * udpå·æè¾å¥½çå®æ¶æ§ï¼å·¥ä½æçæ¯tcpé«ï¼éç¨äºå¯¹é«éä¼ è¾åå®æ¶æ§æè¾é«çéä¿¡æå¹¿æ­éä¿¡ã\n\nä¸ºä»ä¹udpææ¶æ¯tcpæ´æä¼å¿?\n\n * udpä»¥å¶ç®åãä¼ è¾å¿«çä¼å¿ï¼å¨è¶æ¥è¶å¤åºæ¯ä¸åä»£äºtcp,å¦å®æ¶æ¸¸æã\n\n * ç½éçæåç»udpçç¨³å®æ§æä¾å¯é ç½ç»ä¿éï¼ä¸¢åçå¾ä½ï¼å¦æä½¿ç¨åºç¨å±éä¼ ï¼è½å¤ç¡®ä¿ä¼ è¾çå¯é æ§ã\n\n * tcpä¸ºäºå®ç°ç½ç»éä¿¡çå¯é æ§ï¼ä½¿ç¨äºå¤æçæ¥å¡æ§å¶ç®æ³ï¼å»ºç«äºç¹ççæ¡æè¿ç¨ï¼ç±äºtcpåç½®çç³»ç»åè®®æ ä¸­ï¼æé¾å¯¹å¶è¿è¡æ¹è¿ã\n\n * éç¨tcpï¼ä¸æ¦åçä¸¢åï¼tcpä¼å°åç»­çåç¼å­èµ·æ¥ï¼ç­åé¢çåéä¼ å¹¶æ¥æ¶å°ååç»§ç»­åéï¼å»¶æ¶ä¼è¶æ¥è¶å¤§ï¼åºäºudpå¯¹å®æ¶æ§è¦æ±è¾ä¸ºä¸¥æ ¼çæåµä¸ï¼éç¨èªå®ä¹éä¼ æºå¶ï¼è½å¤æä¸¢åäº§ççå»¶è¿éå°æä½ï¼å°½éåå°ç½ç»é®é¢å¯¹æ¸¸ææ§é æå½±å\n\n\n# tcpä¸æ¬¡æ¡æï¼åæ¬¡æ¥æ\n\nä¸æ¬¡æ¡æï¼éä¿çè®²\n                å®¢æ·ç«¯ï¼hiå¬è§äºå,\n                æå¡å¨ç«¯ï¼hiæå¬è§äºï¼\n                å®¢æ·ç«¯ï¼æä¹å¬è§ä½ äºã     æ¥ä¸æ¥å¼å§æå¿«å°èå¤©\nåæ¬¡æ¡æï¼éä¿çè®²\n                å®¢æ·ç«¯ï¼æä»¬åææï¼\n                æå¡ç«¯ï¼å¥½çï¼ä½ ç­æææ°æ®ç»ä½ ä¼ è¾å®\n                æå¡ç«¯ï¼æä¼ è¾å®äºï¼\n                å®¢æ·ç«¯ï¼å¥½äºï¼å¯ä»¥åæäºã æ¥ä¸æ¥å°±çæ­£çåæäº\n\n\n * ä¸æ¬¡æ¡æ\n * åæ¬¡æ¥æ\n * syn (synchronouså»ºç«èæº)\n * ack (acknowledgement ç¡®è®¤)\n * fin (finishç»æ)\n * sequence number (é¡ºåºå·ç )\n * ä¸ºä»ä¹time_waitç¶æéè¦ç»è¿2msl(æå¤§æ¥ææ®µçå­æ¶é´)æè½è¿åå°closeç¶æ\n\nä¸ºäºä¿è¯aåéçæåä¸ä¸ªackæ¥æè½å¤å°è¾¾bãè¿ä¸ªackæ¥ææ®µæå¯è½ä¸¢å¤±ï¼å èä½¿å¤å¨last-ackç¶æçbæ¶ä¸å°å¯¹å·²åéçfin+ackæ¥ææ®µçç¡®è®¤ãbä¼è¶æ¶éä¼ è¿ä¸ªfin+ackæ¥ææ®µï¼èaå°±è½å¨2mslæ¶é´åæ¶å°è¿ä¸ªéä¼ çfin+ackæ¥ææ®µã\n\n\n * ä¸ºä»ä¹æ¯ä¸æ¬¡æ¡æèä¸æ¯ä¸¤æ¬¡æ¡æï¼\n\nä¸å¥è¯ï¼ä¸»è¦é²æ­¢å·²ç»å¤±æçè¿æ¥è¯·æ±æ¥æçªç¶åä¼ éå°äºæå¡å¨ï¼ä»èäº§çéè¯¯ã\n\nå¦æä½¿ç¨çæ¯ä¸¤æ¬¡æ¡æå»ºç«è¿æ¥ï¼åè®¾æè¿æ ·ä¸ç§åºæ¯ï¼å®¢æ·ç«¯åéäºç¬¬ä¸ä¸ªè¯·æ±è¿æ¥å¹¶ä¸æ²¡æä¸¢å¤±ï¼åªæ¯å ä¸ºå¨ç½ç»ç»ç¹ä¸­æ»ççæ¶é´å¤ªé¿äºï¼ç±äºtcpçå®¢æ·ç«¯è¿è¿æ²¡ææ¶å°ç¡®è®¤æ¥æï¼ä»¥ä¸ºæå¡å¨æ²¡ææ¶å°ï¼æ­¤æ¶éæ°åæå¡å¨åéè¿æ¡æ¥æï¼æ­¤åå®¢æ·ç«¯åæå¡å¨ç»è¿ä¸¤æ¬¡æ¡æå®æè¿æ¥ï¼ä¼ è¾æ°æ®ï¼ç¶åå³é­è¿æ¥ãæ­¤æ¶æ­¤åæ»ççé£ä¸æ¬¡è¯·æ±è¿æ¥ï¼ç½ç»éçäºå°è¾¾äºæå¡å¨ï¼è¿ä¸ªæ¥ææ¬è¯¥æ¯å¤±æçï¼ä½æ¯ï¼ä¸¤æ¬¡æ¡æçæºå¶å°ä¼è®©å®¢æ·ç«¯åæå¡å¨åæ¬¡å»ºç«è¿æ¥ï¼è¿å°å¯¼è´ä¸å¿è¦çéè¯¯åèµæºçæµªè´¹ã\n\nå¦æéç¨çæ¯ä¸æ¬¡æ¡æï¼å°±ç®æ¯é£ä¸æ¬¡å¤±æçæ¥æä¼ éè¿æ¥äºï¼æå¡ç«¯æ¥åå°äºé£æ¡å¤±ææ¥æå¹¶ä¸åå¤äºç¡®è®¤æ¥æï¼ä½æ¯å®¢æ·ç«¯ä¸ä¼åæ¬¡ååºç¡®è®¤ãç±äºæå¡å¨æ¶ä¸å°ç¡®è®¤ï¼å°±ç¥éå®¢æ·ç«¯å¹¶æ²¡æè¯·æ±è¿æ¥ã\n\n\n * ä¸ºä»ä¹å»ºç«è¿æ¥æ¯ä¸æ¬¡æ¡æï¼å³é­è¿æ¥ç¡®æ¯åæ¬¡æ¥æå¢ï¼\n\nå»ºç«è¿æ¥çæ¶åï¼ æå¡å¨å¨listenç¶æä¸ï¼æ¶å°å»ºç«è¿æ¥è¯·æ±çsynæ¥æåï¼æackåsynæ¾å¨ä¸ä¸ªæ¥æéåéç»å®¢æ·ç«¯ã\nèå³é­è¿æ¥æ¶ï¼æå¡å¨æ¶å°å¯¹æ¹çfinæ¥ææ¶ï¼ä»ä»è¡¨ç¤ºå¯¹æ¹ä¸ååéæ°æ®äºä½æ¯è¿è½æ¥æ¶æ°æ®ï¼èèªå·±ä¹æªå¿å¨é¨æ°æ®é½åéç»å¯¹æ¹äºï¼æä»¥å·±æ¹å¯ä»¥ç«å³å³é­ï¼ä¹å¯ä»¥åéä¸äºæ°æ®ç»å¯¹æ¹åï¼ååéfinæ¥æç»å¯¹æ¹æ¥è¡¨ç¤ºåæç°å¨å³é­è¿æ¥ï¼å æ­¤ï¼å·±æ¹ackåfinä¸è¬é½ä¼åå¼åéï¼ä»èå¯¼è´å¤äºä¸æ¬¡ã\n\n\n\n# tcpå¦ä½å¯é ä¼ è¾\n\n * éä¼ æºå¶\n * æ»å¨çªå£\n   * å¯ä»¥æå®çªå£å¤§å°ï¼çªå£å¤§å°å°±æ¯ææ éç­å¾ç¡®è®¤åºç­ï¼èå¯ä»¥ç»§ç»­åéæ°æ®çæå¤§å¼ã\n * æµéæ§å¶\n   * tcp æä¾ä¸ç§æºå¶å¯ä»¥è®©ãåéæ¹ãæ ¹æ®ãæ¥æ¶æ¹ãçå®éæ¥æ¶è½åæ§å¶åéçæ°æ®éï¼è¿å°±æ¯æè°çæµéæ§å¶ã\n * æ¥å¡æ§å¶\n   * æ¢å¯å¨\n   * æ¥å¡é¿å\n   * æ¥å¡åç\n   * å¿«éæ¢å¤\n\n\n# tcpæ¥å¡æ§å¶\n\næ¥å¡æ§å¶ä¸»è¦æ¯åä¸ªç®æ³ï¼\n\n * æ¢å¯å¨\n * æ¥å¡é¿å\n * æ¥å¡åç\n * å¿«éæ¢å¤\n\nå¾ç¤º\n\n\n# æ¢ç­å¯å¨ç®æ³ â slow start\n\næè°æ¢å¯å¨ï¼ä¹å°±æ¯tcpè¿æ¥åå»ºç«ï¼ä¸ç¹ä¸ç¹å°æéï¼è¯æ¢ä¸ä¸ç½ç»çæ¿åè½åï¼ä»¥åç´æ¥æ°ä¹±äºç½ç»ééçç§©åºã\n\n>  1. è¿æ¥å»ºå¥½çå¼å§ååå§åæ¥å¡çªå£cwndå¤§å°ä¸º1ï¼è¡¨æå¯ä»¥ä¼ ä¸ä¸ªmsså¤§å°çæ°æ®ã 2) æ¯å½æ¶å°ä¸ä¸ªackï¼cwndå¤§å°å ä¸ï¼åçº¿æ§ä¸åã 3) æ¯å½è¿äºä¸ä¸ªå¾è¿å»¶è¿æ¶é´rtt(round-trip time)ï¼cwndå¤§å°ç´æ¥ç¿»åï¼ä¹ä»¥2ï¼åææ°è®©åã 4) è¿æä¸ä¸ªssthreshï¼slow start thresholdï¼ï¼æ¯ä¸ä¸ªä¸éï¼å½cwnd >= ssthreshæ¶ï¼å°±ä¼è¿å¥âæ¥å¡é¿åç®æ³âï¼åé¢ä¼è¯´è¿ä¸ªç®æ³ï¼\n\n\n# æ¥å¡é¿åç®æ³ â congestion avoidance\n\nå¦ååè¾¹è¯´çï¼å½æ¥å¡çªå£å¤§å°cwndå¤§äºç­äºæ¢å¯å¨éå¼ssthreshåï¼å°±è¿å¥æ¥å¡é¿åç®æ³ãç®æ³å¦ä¸ï¼\n\n> æ¶å°ä¸ä¸ªackï¼åcwnd = cwnd + 1 / cwnd 2) æ¯å½è¿äºä¸ä¸ªå¾è¿å»¶è¿æ¶é´rttï¼cwndå¤§å°å ä¸ãè¿äºæ¢å¯å¨éå¼åï¼æ¥å¡é¿åç®æ³å¯ä»¥é¿åçªå£å¢é¿è¿å¿«å¯¼è´çªå£æ¥å¡ï¼èæ¯ç¼æ¢çå¢å è°æ´å°ç½ç»çæä½³å¼ã\n\n\n# æ¥å¡åç\n\næä¸ºæ©æçtcp tahoeç®æ³å°±åªä½¿ç¨ä¸è¿°å¤çåæ³ï¼ä½æ¯ç±äºä¸ä¸¢åå°±ä¸åéæ¥ï¼å¯¼è´cwndåéç½®ä¸º1ï¼ååä¸å©äºç½ç»æ°æ®çç¨³å®ä¼ éã\n\næä»¥ï¼tcp renoç®æ³è¿è¡äºä¼åãå½æ¶å°ä¸ä¸ªéå¤ç¡®è®¤ackæ¶ï¼tcpå¼å¯å¿«ééä¼ fast retransmitç®æ³ï¼èä¸ç¨ç­å°rtoè¶æ¶åè¿è¡éä¼ ï¼\n\n * cwndå¤§å°ç¼©å°ä¸ºå½åçä¸å\n * ssthreshè®¾ç½®ä¸ºç¼©å°åçcwndå¤§å°\n * ç¶åè¿å¥å¿«éæ¢å¤ç®æ³fast recoveryã\n\n\n# å¿«æ¢å¤\n\nå¨è¿å¥å¿«éæ¢å¤ä¹åï¼cwndåssthreshå·²ç»è¢«æ´æ¹ä¸ºåæcwndçä¸åãå¿«éæ¢å¤ç®æ³çé»è¾å¦ä¸ï¼\n\n * cwnd = cwnd + 3 * mssï¼å 3 * mssçåå æ¯å ä¸ºæ¶å°3ä¸ªéå¤çackã\n * éä¼ dacksæå®çæ°æ®åã\n * å¦æåæ¶å°dacksï¼é£ä¹cwndå¤§å°å¢å ä¸ã\n * å¦ææ¶å°æ°çackï¼è¡¨æéä¼ çåæåäºï¼é£ä¹éåºå¿«éæ¢å¤ç®æ³ãå°cwndè®¾ç½®ä¸ºssthreshï¼ç¶åè¿å¥æ¥å¡é¿åç®æ³ã\n\n\n# ä»ä¹æ¯ http åè®®\n\n> è¶ææ¬ä¼ è¾åè®®ï¼æ¯ä¸ä¸ªåºäºè¯·æ±ä¸ååºï¼æ ç¶æçï¼åºç¨å±çåè®®ï¼å¸¸åºäºtcp/ipåè®®ä¼ è¾æ°æ®ï¼äºèç½ä¸åºç¨æä¸ºå¹¿æ³çä¸ç§ç½ç»åè®®,ææçwwwæä»¶é½å¿é¡»éµå®è¿ä¸ªæ åãè®¾è®¡httpçåè¡·æ¯ä¸ºäºæä¾ä¸ç§åå¸åæ¥æ¶htmlé¡µé¢çæ¹æ³ã\n\nçæ¬         äº§çæ¶é´    åå®¹                                             åå±ç°ç¶\nhttp/0.9   1991å¹´   ä¸æ¶åæ°æ®åä¼ è¾ï¼è§å®å®¢æ·ç«¯åæå¡å¨ä¹é´éä¿¡æ ¼å¼ï¼åªè½getè¯·æ±               æ²¡æä½ä¸ºæ­£å¼çæ å\nhttp/1.0   1996å¹´   ä¼ è¾åå®¹æ ¼å¼ä¸éå¶ï¼å¢å putãpatchãheadã optionsãdeleteå½ä»¤   æ­£å¼ä½ä¸ºæ å\nhttp/1.1   1997å¹´   æä¹è¿æ¥(é¿è¿æ¥)ãèçº¦å¸¦å®½ãhoståãç®¡éæºå¶ãååä¼ è¾ç¼ç                2015å¹´åä½¿ç¨æå¹¿æ³\nhttp/2     2015å¹´   å¤è·¯å¤ç¨ãæå¡å¨æ¨éãå¤´ä¿¡æ¯åç¼©ãäºè¿å¶åè®®ç­                        éæ¸è¦çå¸åº\n\n\n# é¿è¿æ¥ä¸å¤è·¯å¤ç¨\n\n * é¿è¿æ¥ï¼å¨ä¸ä¸ªtcpè¿æ¥ä¸å¯ä»¥ä¼ éå¤ä¸ªhttpè¯·æ±åååºï¼åå°äºå»ºç«åå³é­è¿æ¥çæ¶èåå»¶è¿ï¼å¨http1.1ä¸­é»è®¤å¼å¯connectionï¼ keep-aliveï¼ä¸å®ç¨åº¦ä¸å¼¥è¡¥äºhttp1.0æ¯æ¬¡è¯·æ±é½è¦åå»ºè¿æ¥çç¼ºç¹ã\n\n * äºè¿å¶åå¸§ï¼å¨http1.xä¸­ï¼æä»¬æ¯éè¿ææ¬çæ¹å¼ä¼ è¾æ°æ®ãåºäºææ¬çæ¹å¼ä¼ è¾æ°æ®å­å¨å¾å¤ç¼ºé·ï¼ææ¬çè¡¨ç°å½¢å¼æå¤æ ·æ§ï¼å æ­¤è¦åå°å¥å£®æ§èèçåºæ¯å¿ç¶æå¾å¤ï¼ä½æ¯äºè¿å¶åä¸åï¼åªæ0å1çç»åï¼å æ­¤éæ©äºäºè¿å¶ä¼ è¾ï¼å®ç°æ¹ä¾¿ä¸å¥å£®ãï¼1å¸§ = 8å­èï¼æå°éä¿¡åä½ï¼\n\n * é¦é¨åç¼©ï¼å¨http1.0ä¸­ï¼æä»¬ä½¿ç¨ææ¬çå½¢å¼ä¼ è¾headerï¼å¨headerä¸­æºå¸¦cookieçè¯ï¼æ¯æ¬¡é½éè¦éå¤ä¼ è¾å ç¾å°å åçå­èï¼è¿çå®æ¯ä¸ç¬ä¸å°çå¼éã\n   \n   å¨http2.0ä¸­ï¼æä»¬ä½¿ç¨äºhpackï¼http2å¤´é¨åç¼©ç®æ³ï¼åç¼©æ ¼å¼å¯¹ä¼ è¾çheaderè¿è¡ç¼ç ï¼åå°äºheaderçå¤§å°ãå¹¶å¨ä¸¤ç«¯ç»´æ¤äºç´¢å¼è¡¨ï¼ç¨äºè®°å½åºç°è¿çheaderï¼åé¢å¨ä¼ è¾è¿ç¨ä¸­å°±å¯ä»¥ä¼ è¾å·²ç»è®°å½è¿çheaderçé®åï¼å¯¹ç«¯æ¶å°æ°æ®åå°±å¯ä»¥éè¿é®åæ¾å°å¯¹åºçå¼ã\n\n * è¯·æ±ä¼åçº§ï¼æhttpæ¶æ¯åä¸ºå¾å¤ç¬ç«å¸§ä¹åï¼å°±å¯ä»¥éè¿ä¼åè¿äºå¸§çäº¤éåä¼ è¾é¡ºåºè¿ä¸æ­¥ä¼åæ§è½ã\n\n * å¤è·¯å¤ç¨ï¼å¨ http 1.0 ä¸­ï¼åèµ·ä¸ä¸ªè¯·æ±æ¯è¿æ ·çï¼\n\næµè§å¨è¯·æ± url -> è§£æåå -> å»ºç« http è¿æ¥ -> æå¡å¨å¤çæä»¶ -> è¿åæ°æ® -> æµè§å¨è§£æãæ¸²ææä»¶ \n\nè¿ä¸ªæµç¨æå¤§çé®é¢æ¯ï¼æ¯æ¬¡è¯·æ±é½éè¦å»ºç«ä¸æ¬¡ http è¿æ¥ï¼ä¹å°±æ¯æä»¬å¸¸è¯´ç3æ¬¡æ¡æ4æ¬¡æ¥æï¼è¿ä¸ªè¿ç¨å¨ä¸æ¬¡è¯·æ±è¿ç¨ä¸­å ç¨äºç¸å½é¿çæ¶é´ï¼èä¸é»è¾ä¸æ¯éå¿éçï¼å ä¸ºä¸é´æ­çè¯·æ±æ°æ®ï¼ç¬¬ä¸æ¬¡å»ºç«è¿æ¥æ¯æ­£å¸¸çï¼ä»¥åå°±å ç¨è¿ä¸ªééï¼ä¸è½½å¶ä»æä»¶ï¼è¿æ ·æçå¤é«åï¼\n\nä¸ºäºè§£å³è¿ä¸ªé®é¢ï¼ http 1.1 ä¸­æä¾äº keep-aliveï¼åè®¸æä»¬å»ºç«ä¸æ¬¡è¿æ¥ï¼æ¥è¿åå¤æ¬¡è¯·æ±æ°æ®ã\n\nä½æ¯è¿éæä¸¤ä¸ªé®é¢ï¼\n\nhttp 1.1 åºäºä¸²è¡æä»¶ä¼ è¾æ°æ®ï¼å æ­¤è¿äºè¯·æ±å¿é¡»æ¯æåºçï¼æ¯å¦éè¦ä¼ è¾ï¼hello worldï¼åªè½ä»hå°dä¸ä¸ªä¸ä¸ªçä¼ è¾ï¼ä¸è½å¹¶è¡ä¼ è¾ï¼å ä¸ºæ¥æ¶ç«¯å¹¶ä¸ç¥éè¿äºå­ç¬¦çé¡ºåºãæä»¥å®éä¸æä»¬åªæ¯èçäºå»ºç«è¿æ¥çæ¶é´ï¼èè·åæ°æ®çæ¶é´å¹¶æ²¡æåå°\n\næå¤§å¹¶åæ°é®é¢ï¼åè®¾æä»¬å¨ apache ä¸­è®¾ç½®äºæå¤§å¹¶åæ° 300ï¼èå ä¸ºæµè§å¨æ¬èº«çéå¶ï¼æå¤§è¯·æ±æ°ä¸º 6ï¼é£ä¹æå¡å¨è½æ¿è½½çæé«å¹¶åæ°æ¯ 50\n\nè http/2 å¼å¥äºè¿å¶æ°æ®å¸§åæµçæ¦å¿µï¼å¶ä¸­å¸§å¯¹æ°æ®è¿è¡é¡ºåºæ è¯ï¼è¿æ ·æµè§å¨æ¶å°æ°æ®ä¹åï¼å°±å¯ä»¥æç§åºåå¯¹æ°æ®è¿è¡åå¹¶ï¼èä¸ä¼åºç°åå¹¶åæ°æ®éä¹±çæåµãåæ ·æ¯å ä¸ºæäºåºåï¼æå¡å¨å°±å¯ä»¥å¹¶è¡çä¼ è¾æ°æ®ã\n\nhttp/2 å¯¹åä¸ååä¸ææè¯·æ±é½æ¯åºäºæµï¼ä¹å°±æ¯è¯´åä¸ååä¸ç®¡è®¿é®å¤å°æä»¶ï¼ä¹åªå»ºç«ä¸è·¯è¿æ¥ãåæ ·apacheçæå¤§è¿æ¥æ°ä¸º300ï¼å ä¸ºæäºè¿ä¸ªæ°ç¹æ§ï¼æå¤§çå¹¶åå°±å¯ä»¥æåå°300ï¼æ¯åæ¥æåäº6åã\n\nå°±å¥½æ¯é¢è¯ï¼http1.1æ¯ä¸é¢ä¹åï¼è§é¢ä¸æ­ç»§ç»­äºé¢ï¼http2.0æ¯åªè¦æé¢è¯å®æ¥äºå°±åæ¶é¢è¯ï¼ä¼ è¾æ°æ®ï¼\n\n\n\n\n\n# æä¹çè§£å¤è·¯å¤ç¨\n\nhttp/2æ¯åºäºäºè¿å¶âå¸§âçåè®®ï¼http/1.1æ¯åºäºâææ¬åå²âè§£æçåè®®ã\n\nhttp 1.1 åºäºä¸²è¡æä»¶ä¼ è¾æ°æ®ï¼å æ­¤è¿äºè¯·æ±å¿é¡»æ¯æåºçï¼æ¯å¦éè¦ä¼ è¾ï¼hello worldï¼åªè½ä»hå°dä¸ä¸ªä¸ä¸ªçä¼ è¾ï¼ä¸è½å¹¶è¡ä¼ è¾ï¼å ä¸ºæ¥æ¶ç«¯å¹¶ä¸ç¥éè¿äºå­ç¬¦çé¡ºåºã\n\nè http/2 å¼å¥äºè¿å¶æ°æ®å¸§åæµçæ¦å¿µï¼å¶ä¸­å¸§å¯¹æ°æ®è¿è¡é¡ºåºæ è¯ï¼è¿æ ·æµè§å¨æ¶å°æ°æ®ä¹åï¼å°±å¯ä»¥æç§åºåå¯¹æ°æ®è¿è¡åå¹¶ï¼èä¸ä¼åºç°åå¹¶åæ°æ®éä¹±çæåµãåæ ·æ¯å ä¸ºæäºåºåï¼æå¡å¨å°±å¯ä»¥å¹¶è¡çä¼ è¾æ°æ®ã\n\n\n# tcp éå¤´é»å¡å http éå¤´é»å¡\n\n * tcp éå¤´é»å¡ï¼tcpæ°æ®åæ¯æåºä¼ è¾ï¼ä¸­é´ä¸ä¸ªæ°æ®åä¸¢å¤±ï¼ä¼ç­å¾è¯¥æ°æ®åéä¼ ï¼é æåé¢çæ°æ®åçé»å¡ã\n * http éå¤´é»å¡ï¼http1.1éç¨é¿è¿æ¥ï¼å¯ä»¥å¨ä¸ä¸ªtcpè¯·æ±ä¸ï¼åéå¤ä¸ªhttpè¯·æ±ãç®¡éåçæºå¶ä½¿å¾è¯·æ±å¯ä»¥å¹¶è¡ååºï¼ä½æ¯ååºå¿é¡»ä¸²è¡è¿åãåä¸ä¸ªååºå¿é¡»å¨åä¸ä¸ªååºä¹åãåå æ¯ï¼æ²¡æåºå·æ æé¡ºåºï¼åªè½ä¸²è¡æ¥æ¶ãè¿å°±ä¼é æéå¤´é»å¡ï¼åä¸ä¸ªååºæªåæ¶è¿åï¼åé¢çååºè¢«é»å¡\n\n\n# tcp é¿è¿æ¥å http é¿è¿æ¥\n\n * http ç keep-alive ä¹å« http é¿è¿æ¥ï¼è¯¥åè½æ¯ç±ãåºç¨ç¨åºãå®ç°çï¼å¯ä»¥ä½¿å¾ç¨åä¸ä¸ª tcp è¿æ¥æ¥åéåæ¥æ¶å¤ä¸ª http è¯·æ±/åºç­ï¼åå°äº http ç­è¿æ¥å¸¦æ¥çå¤æ¬¡ tcp è¿æ¥å»ºç«åéæ¾çå¼éã\n\n * tcp ç keepalive ä¹å« tcp ä¿æ´»æºå¶ï¼è¯¥åè½æ¯ç±ãåæ ¸ãå®ç°çï¼å½å®¢æ·ç«¯åæå¡ç«¯é¿è¾¾ä¸å®æ¶é´æ²¡æè¿è¡æ°æ®äº¤äºæ¶ï¼åæ ¸ä¸ºäºç¡®ä¿è¯¥è¿æ¥æ¯å¦è¿ææï¼å°±ä¼åéæ¢æµæ¥æï¼æ¥æ£æµå¯¹æ¹æ¯å¦è¿å¨çº¿ï¼ç¶åæ¥å³å®æ¯å¦è¦å³é­è¯¥è¿æ¥ã\n\n\n# å¦ä½è§£å³éå¤´é»å¡\n\n * tcp éå¤´é»å¡ï¼ç´æ¥å¼ç¨ããè¯¦è§http3\n * http éå¤´é»å¡ï¼\n   * å»ºç«å¤ä¸ª tcp è¿æ¥ï¼å¦ chrome æå¤éå¶6ä¸ªå¹¶åè¯·æ±ï¼æ¯ä¸ª tcp è¿æ¥å¯¹åºä¸ä¸ª connection id\n   * http2 å¤è·¯å¤ç¨ï¼å¯¹äºåä¸åååªéè¦åå»ºä¸ä¸ªè¿æ¥ï¼èä¸æ¯å http/1.1 é£æ ·åå»º 6~8 ä¸ªè¿æ¥\n\n\n\n\n# å¦ä½å¨ chrome ä¸­æ¥ç http åè®®\n\nåªéå¨ network ä¸­å³é®ç¹å»è¡¨å¤´ï¼å°±å¯ä»¥æ§å¶å±ç¤ºçåï¼å¶ä¸­å°±æ protocol éé¡¹ã\n\n\n\n\n# http 1.1 å http 2 å¯¹æ¯\n\nå¨http 1.1ï¼æä»¥æµè§å¨ä¼éå¶åä¸ä¸ªåçåæ¶è¯·æ±æ°ï¼chromeæ¯éå¶6ä¸ªï¼å¦å¾ï¼\n\n\n\nä½å½æä»¬å¼å¯äºhttp/2ä¹åï¼ä¸ªæ°å ä¹æ²¡æéå¶äºï¼å¦ä¸å¾æç¤ºï¼\n\n\n\nä¸è¿è¯·æ±çé¡ºåºåå¹¶åå¹¶ä¸å®å¨ä¾èµäºæ­¤ï¼å¦æå¨é¡¹ç®ä¸­åäºå¦ä¸ä»£ç ï¼\n\nasync getdata() {\n  await this.getlist1();\n  await this.getlist2();\n  await this.getlist3();\n  await this.getlist4();\n  await this.getlist5();\n}\n\n\né£ä¹å¨ chrome ä¸­çè¡¨ç°å¦ä¸ï¼\n\n\n\næä»¬ä¸è¬å¯ä»¥ä¼åä¸ºï¼\n\nasync getdata() {\n  await promise.all([\n    this.getlist1(),\n    this.getlist2(),\n    this.getlist3(),\n    this.getlist4(),\n    this.getlist5(),\n  ]);\n}\n\n\n\n# https\n\nhttpè¯·æ±é½æ¯ææä¼ è¾çï¼æè°çæææçæ¯æ²¡æç»è¿å å¯çä¿¡æ¯ï¼å¦æhttpè¯·æ±è¢«é»å®¢æ¦æªï¼å¹¶ä¸éé¢å«æé¶è¡å¡å¯ç ç­æææ°æ®çè¯ï¼ä¼éå¸¸å±é©ãä¸ºäºè§£å³è¿ä¸ªé®é¢ï¼netscape å¬å¸å¶å®äºhttpsåè®®ï¼httpså¯ä»¥å°æ°æ®å å¯ä¼ è¾ï¼ä¹å°±æ¯ä¼ è¾çæ¯å¯æï¼å³ä¾¿é»å®¢å¨ä¼ è¾è¿ç¨ä¸­æ¦æªå°æ°æ®ä¹æ æ³ç ´è¯ï¼è¿å°±ä¿è¯äºç½ç»éä¿¡çå®å¨ã\n\n * httpåè®®è¿è¡å¨tcpä¹ä¸ï¼ææä¼ è¾çåå®¹é½æ¯ææï¼httpsè¿è¡å¨ssl/tlsä¹ä¸ï¼ssl/tlsè¿è¡å¨tcpä¹ä¸ï¼ææä¼ è¾çåå®¹é½ç»è¿å å¯çï¼ä¿è¯äºéä¿¡çä¿å¯æ§ãå½ç¶sslåè®®å¹¶ä¸è½å¯¹udpåºç¨è¿è¡ä¿æ¤\n\n * è½ç¶ä½¿ç¨ http åè®®æ æ³ç¡®å®éä¿¡æ¹ï¼ä½¿ç¨ sslå¯ä»¥ãsslä½¿ç¨äºä¸ç§è¢«ç§°ä¸ºè¯ä¹¦çææ®µï¼è¯ä¹¦ç±å¼å¾ä¿¡ä»»çç¬¬ä¸æ¹æºæé¢åï¼ä½¿ç¨httpsåè®®éè¦å°caç³è¯·è¯ä¹¦ï¼ä¸è¬åè´¹è¯ä¹¦å¾å°ï¼éè¦äº¤è´¹ãè¯ä¹¦ç¨ä»¥è¯ææå¡å¨åå®¢æ·ç«¯æ¯å®éå­å¨çãèº«ä»½ç¡®è®¤è¿ç¨ä½¿ç¨rsaéå¯¹ç§°å¯é¥å å¯æ¹å¼ï¼ç ´è§£é¾åº¦åºäºä¸¤ä¸ªå¤§ç´ æ°ä¹ç§¯çå å¼åè§£é¾åº¦ï¼ï¼ä½æ¯ä¸ºäºæé«æçï¼èº«ä»½ç¡®è®¤å®æåä½¿ç¨å±ååçå¯¹ç§°å¯é¥ã\n\n * sslåè®®ä½äºtcp/ipåè®®ä¸åç§åºç¨å±åè®®ï¼ä¸æ­¢è½ç¨äºhttpï¼ä¹é´ï¼ä¸ºæ°æ®éè®¯æä¾å®å¨æ¯æã\n   \n   sslåè®®å¯åä¸ºä¸¤å±ï¼\n   \n   ï¼1ï¼sslè®°å½åè®®ï¼å»ºç«å¨å¯é çä¼ è¾åè®®ï¼å¦tcpï¼ä¹ä¸ï¼ä¸ºé«å±åè®®æä¾æ°æ®å°è£ãåç¼©ãå å¯ç­åºæ¬åè½çæ¯æã\n   \n   ï¼2ï¼sslæ¡æåè®®ï¼å»ºç«å¨è®°å½åè®®ä¹ä¸ï¼ç¨äºæ°æ®ä¼ è¾å¼å§åçåæ¹èº«ä»½è®¤è¯ãååå å¯ç®æ³ãäº¤æ¢å å¯å¯é¥ç­ã\n\n * ä¸»è¦æµç¨ï¼\n   \n   * å®¢æ·ç«¯åæå¡å¨åèµ·httpsè¯·æ±ï¼è¿æ¥å°æå¡å¨ç443ç«¯å£\n   * æå¡å¨ç«¯æä¸ä¸ªå¯é¥å¯¹ï¼å³å¬é¥åç§é¥ï¼æ¯ç¨æ¥è¿è¡éå¯¹ç§°å å¯ä½¿ç¨çï¼æå¡å¨ç«¯ä¿å­çç§é¥ï¼ä¸è½å°å¶æ³é²ï¼å¬é¥å¯ä»¥åéç»ä»»ä½äººã\n   * æå¡å¨å°èªå·±çå¬é¥åéç»å®¢æ·ç«¯ã\n   * å®¢æ·ç«¯æ¶å°æå¡å¨ç«¯çè¯ä¹¦ä¹åï¼ä¼å¯¹è¯ä¹¦è¿è¡æ£æ¥ï¼éªè¯å¶åæ³æ§ï¼å¦æåç°åç°è¯ä¹¦æé®é¢ï¼é£ä¹httpsä¼ è¾å°±æ æ³ç»§ç»­ãå¦æå¬é¥åæ ¼ï¼é£ä¹å®¢æ·ç«¯ä¼çæä¸ä¸ªéæºå¼ï¼è¿ä¸ªéæºå¼å°±æ¯ç¨äºè¿è¡å¯¹ç§°å å¯çå¯é¥ï¼æä»¬å°è¯¥å¯é¥ç§°ä¹ä¸ºclient keyï¼å³å®¢æ·ç«¯å¯é¥ï¼è¿æ ·å¨æ¦å¿µä¸åæå¡å¨ç«¯çå¯é¥å®¹æè¿è¡åºåãç¶åç¨æå¡å¨çå¬é¥å¯¹å®¢æ·ç«¯å¯é¥è¿è¡éå¯¹ç§°å å¯ï¼è¿æ ·å®¢æ·ç«¯å¯é¥å°±åæå¯æäºï¼è³æ­¤ï¼httpsä¸­çç¬¬ä¸æ¬¡httpè¯·æ±ç»æã\n   * å®¢æ·ç«¯ä¼åèµ·httpsä¸­çç¬¬äºä¸ªhttpè¯·æ±ï¼å°å å¯ä¹åçå®¢æ·ç«¯å¯é¥åéç»æå¡å¨ã\n   * æå¡å¨æ¥æ¶å°å®¢æ·ç«¯åæ¥çå¯æä¹åï¼ä¼ç¨èªå·±çç§é¥å¯¹å¶è¿è¡éå¯¹ç§°è§£å¯ï¼è§£å¯ä¹åçææå°±æ¯å®¢æ·ç«¯å¯é¥ï¼ç¶åç¨å®¢æ·ç«¯å¯é¥å¯¹æ°æ®è¿è¡å¯¹ç§°å å¯ï¼è¿æ ·æ°æ®å°±åæäºå¯æã\n   * ç¶åæå¡å¨å°å å¯åçå¯æåéç»å®¢æ·ç«¯ã\n   * å®¢æ·ç«¯æ¶å°æå¡å¨åéæ¥çå¯æï¼ç¨å®¢æ·ç«¯å¯é¥å¯¹å¶è¿è¡å¯¹ç§°è§£å¯ï¼å¾å°æå¡å¨åéçæ°æ®ãè¿æ ·httpsä¸­çç¬¬äºä¸ªhttpè¯·æ±ç»æï¼æ´ä¸ªhttpsä¼ è¾å®æã\n\n * æ³¨æï¼ https å¨åå®¹ä¼ è¾çå å¯ä¸ä½¿ç¨çæ¯å¯¹ç§°å å¯ï¼éå¯¹ç§°å å¯åªä½ç¨å¨è¯ä¹¦éªè¯é¶æ®µã\n\n * ä¸ºä»ä¹æ°æ®ä¼ è¾æ¯ç¨å¯¹ç§°å å¯çï¼\n   \n   * éå¯¹ç§°å å¯çå è§£å¯æçéå¸¸ä½ï¼èhttpçåºç¨åºæ¯ä¸­éå¸¸ç«¯ä¸ç«¯ä¹é´å­å¨å¤§éçäº¤äºï¼éå¯¹ç§°å å¯çæçæ¯æ æ³æ¥åçã\n   * å¨ https çåºæ¯ä¸­åªææå¡ç«¯ä¿å­äºç§é¥ï¼å®¢æ·ç«¯ä¸åéå¯¹ç§°å¯é¥çæï¼ä¸å¯¹å¬é¥åç§é¥åªè½å®ç°ååçå è§£å¯ï¼æä»¥https ä¸­åå®¹ä¼ è¾å å¯éåçæ¯å¯¹ç§°å å¯ï¼èä¸æ¯éå¯¹ç§°å å¯ã\n\n----------------------------------------\n\n> httpså¹¶éåºç¨å±çä¸ç§æ°åè®®ï¼åªæ¯httpéä¿¡æ¥å£é¨åç¨ssl/tlsåè®®ä»£æ¿èå·²ã\n> \n> sslåtlsé½æ¯å å¯åè®® éå¸¸httpç´æ¥åtcpéä¿¡ï¼å½ä½¿ç¨sslæ¶åæ¼åæååssléä¿¡ï¼åç±sslåtcpéä¿¡ã æè°httpsï¼å¶å®å°±æ¯èº«æ«sslåè®®è¿å±å¤å£³çhttpãï¼åå¿ä¸ä¸osi7å±,tcp/ip4å±ï¼æä»¬å­¦çæ¯5å±ï¼\n> \n> sslåè®®éç¨çæ¯éå¯¹ç§°å å¯ç®æ³ï¼å®¢æ·ç«¯ååæå¡å¨ç«¯ç´¢è¦å¬é¥ï¼ç¶åç¨å¬é¥å å¯ä¿¡æ¯ï¼æå¡å¨æ¶å°å¯æåï¼ç¨èªå·±çç§é¥è§£å¯.\n> \n> rsaç®æ³ï¼ä¸¤ä¸ªå¤§ç´ æ°p,qï¼n=pq,f(n)=(p-1)(q-1),1<b<f(n),a=b^-1modf(n),å¬é¥n,b,ç§é¥p,q,a\n> \n> è¯ä¹¦ï¼é¡¾åæä¹ï¼å°±æ¯è¯æçæä»¶ãä¾å¦æµè§å¨å tlanyan.me æå¡å¨éä¿¡ï¼æµè§å¨æä¹ç¥éå¯¹æ¹å°±æ¯ tlanyan.me å¯¹åºçæå¡å¨å¢ï¼å¨ä¸å¯ä¿¡çç½ç»ä¸éä¿¡ï¼ä¸­ç«çç¬¬ä¸æ¹ä½ç¨å°±æ¾ç°åºæ¥äºãæå¨çç¬¬ä¸æ¹ä¸­ç«æºæï¼ certificate authority, caï¼æ¶å° tlanyan.me ææèçè¯ä¹¦è¯·æ±å¹¶æ ¸éªä¿¡æ¯åï¼å°ææèçåç§°ãå¬é¥ä¸ ca ç¨ç§é¥çæçæ°å­ç­¾åç­ä¿¡æ¯åæè¯ä¹¦é¢åç»ç³è¯·èã\n> \n> å½ä½ è®¿é®ä½¿ç¨ httpsï¼è¿æ¥å®å¨ï¼çç½ç«æ¶ï¼è¯¥ç½ç«çæå¡å¨ä¼ä½¿ç¨è¯ä¹¦åæµè§å¨ï¼å¦ chromeï¼è¯æè¯¥ç½ç«çèº«ä»½ãä»»ä½äººé½å¯ä»¥åå»ºè¯ä¹¦ï¼éæå£°ç§°å¯¹åºçç½ç«æ¯ä»»æç½ç«ã\n> \n> ä¸ºäºç¡®ä¿æ¨å®å¨ä¸ç½ï¼chrome ä¼è¦æ±ç½ç«ä½¿ç¨æ¥èªåä¿¡ä»»ç»ç»åæ¾çè¯ä¹¦ã\n\n\n# httpè¯·æ±æ¹æ³\n\nget\n\n\ngetæ¹æ³è¯·æ±ä¸ä¸ªæå®èµæºçè¡¨ç¤ºå½¢å¼. ä½¿ç¨getçè¯·æ±åºè¯¥åªè¢«ç¨äºè·åæ°æ®.\n\nhead\n\n\nheadæ¹æ³è¯·æ±ä¸ä¸ªä¸getè¯·æ±çååºç¸åçååºï¼ä½æ²¡æååºä½ï¼ä¸è¬ç¨äº1.æ£æ¥èµæºçæææ§ã 2.æ£æ¥è¶é¾æ¥çæææ§ã 3.æ£æ¥ç½é¡µæ¯å¦è¢«ä¸²æ¹ã\n\npost\n\n\npostæ¹æ³ç¨äºå°å®ä½æäº¤å°æå®çèµæºï¼éå¸¸å¯¼è´å¨æå¡å¨ä¸çç¶æååæå¯ä½ç¨.\n\nput\n\n\nputæ¹æ³ç¨è¯·æ±ææè½½è·æ¿æ¢ç®æ èµæºçææå½åè¡¨ç¤ºã\n\ndelete\n\n\ndeleteæ¹æ³å é¤æå®çèµæºã\n\nconnect\n\n\nconnectæ¹æ³å»ºç«ä¸ä¸ªå°ç±ç®æ èµæºæ è¯çæå¡å¨çé§éã\n\noptions\n\n\noptionsæ¹æ³ç¨äºæè¿°ç®æ èµæºçéä¿¡éé¡¹ã\n\ntrace\n\n\ntraceæ¹æ³æ²¿çå°ç®æ èµæºçè·¯å¾æ§è¡ä¸ä¸ªæ¶æ¯ç¯åæµè¯ã\n\npatch\n\n\npatchæ¹æ³ç¨äºå¯¹èµæºåºç¨é¨åä¿®æ¹ã\n\n\n# å¸¸è§è¯·æ±å¤´\n\nhttp é¦é¨å­æ®µæ¯ç±é¦é¨å­æ®µååå­æ®µå¼ææçï¼ä¸­é´ç¨åå· : åéã\n\né¦é¨å­æ®µå: å­æ®µå¼\n\n\nå¦å¤ï¼å­æ®µå¼å¯¹åºåä¸ª http é¦é¨å­æ®µå¯ä»¥æå¤ä¸ªå¼ï¼å¤ä¸ªæä»¤ä¹é´éè¿ ,åéãå¦ä¸æç¤ºã\n\nkeep-alive: timeout=15, max=100\n\n\nè¥æ³è¦å ä¼åçº§ï¼åä½¿ç¨ q=æ¥é¢å¤è¡¨ç¤ºæéå¼ 1 ï¼ç¨åå·ï¼;ï¼è¿è¡åéãæéå¼ q çèå´æ¯ 0~1ï¼å¯ç²¾ç¡®å°å°æ°ç¹å 3ä½ï¼ï¼ä¸ 1 ä¸ºæå¤§å¼ãä¸æå®æé q å¼æ¶ï¼é»è®¤æéä¸º q=1.0ã\n\naccept-language: zh-cn,zh;q=0.9,en;q=0.8\n\n\n\n# è¯·æ±å¤´å­æ®µ\n\n * accept\n\naccept: image/webp,image/apng,image/*,*/*;q=0.8\n\naccept é¦é¨å­æ®µå¯éç¥æå¡å¨ï¼ç¨æ·ä»£çè½å¤å¤ççåªä½ç±»åååªä½ç±»åçç¸å¯¹ä¼åçº§ãå¯ä½¿ç¨type/subtype è¿ç§å½¢å¼ï¼ä¸æ¬¡æå®å¤ç§åªä½ç±»åã\n\n\n * accept-encoding\n\naccept-encoding: gzip, deflate, br\n\naccept-encoding é¦é¨å­æ®µç¨æ¥åç¥æå¡å¨ç¨æ·ä»£çæ¯æçåå®¹ç¼ç ååå®¹ç¼ç çä¼åçº§é¡ºåºãå¯ä¸æ¬¡æ§æå®å¤ç§åå®¹ç¼ç ã\n\n\n * accept-language\n\naccept-language: zh-cn,zh;q=0.9,en;q=0.8\n\né¦é¨å­æ®µ accept-language ç¨æ¥åç¥æå¡å¨ç¨æ·ä»£çè½å¤å¤ççèªç¶è¯­è¨éï¼æä¸­ææè±æç­ï¼ï¼ä»¥åèªç¶è¯­è¨éçç¸å¯¹ä¼åçº§ãå¯ä¸æ¬¡æå®å¤ç§èªç¶è¯­è¨éã\n\n\n * cache-control\n\ncache-control: no-cacheï¼ç¼å­\n\n\n * connection\n\nconnection: keep-alive\n\nhttp/1.1 ä¹åç http çæ¬çé»è®¤è¿æ¥é½æ¯éæä¹è¿æ¥ãä¸ºæ­¤ï¼å¦ææ³å¨æ§çæ¬çhttp åè®®ä¸ç»´ææç»­è¿æ¥ï¼åéè¦æå®connection é¦é¨å­æ®µçå¼ä¸º keep-aliveã\n\n\n * cookie\n\né¦é¨å­æ®µ cookie ä¼åç¥æå¡å¨ï¼å½å®¢æ·ç«¯æ³è·å¾http ç¶æç®¡çæ¯ææ¶ï¼å°±ä¼å¨è¯·æ±ä¸­åå«ä»æå¡å¨æ¥æ¶å°ç cookieã\n\n\n * host\n\nhost: www.baidu.com\n\né¦é¨å­æ®µ host ä¼åç¥æå¡å¨ï¼è¯·æ±çèµæºæå¤çäºèç½ä¸»æºååç«¯å£å·ãhost é¦é¨å­æ®µå¨http/1.1 è§èåæ¯å¯ä¸ä¸ä¸ªå¿é¡»è¢«åå«å¨è¯·æ±åçé¦é¨å­æ®µã\n\n\n * referer\n\né¦é¨å­æ®µ referer ä¼åç¥æå¡å¨è¯·æ±çåå§èµæºç uriãå®è®°å½äºè¯¥ http è¯·æ±çæ¥æºå°åã\n\nå¦æé»å®¢è¦å¯¹é¶è¡ç½ç«å®æ½ csrf æ»å»ï¼ä»åªè½å¨ä»èªå·±çç½ç«æé è¯·æ±ï¼å½ç¨æ·éè¿é»å®¢çç½ç«åéè¯·æ±å°é¶è¡æ¶ï¼è¯¥è¯·æ±ç referer æ¯æåé»å®¢èªå·±çç½ç«ãå æ­¤ï¼è¦é²å¾¡ csrf æ»å»ï¼é¶è¡ç½ç«åªéè¦å¯¹äºæ¯ä¸ä¸ªè½¬è´¦è¯·æ±éªè¯å¶ referer å¼ ã\n\nç¶èï¼è¿ç§æ¹æ³å¹¶éä¸æ ä¸å¤±ãreferer çå¼æ¯ç±æµè§å¨æä¾ç ï¼ç®åå·²ç»æä¸äºæ¹æ³å¯ä»¥ç¯¡æ¹ referer å¼ \n\nå³ä¾¿æ¯ä½¿ç¨ææ°çæµè§å¨ï¼é»å®¢æ æ³ç¯¡æ¹ referer å¼ï¼è¿ç§æ¹æ³ä»ç¶æé®é¢ãå ä¸º referer å¼ä¼è®°å½ä¸ç¨æ·çè®¿é®æ¥æºï¼æäºç¨æ·è®¤ä¸ºè¿æ ·ä¼ä¾µç¯å°ä»ä»¬èªå·±çéç§æï¼å æ­¤ï¼ç¨æ·èªå·±å¯ä»¥è®¾ç½®æµè§å¨ä½¿å¶å¨åéè¯·æ±æ¶ä¸åæä¾ refererãå½ä»ä»¬æ­£å¸¸è®¿é®é¶è¡ç½ç«æ¶ï¼ç½ç«ä¼å ä¸ºè¯·æ±æ²¡æ referer å¼èè®¤ä¸ºæ¯ csrf æ»å»ï¼æç»åæ³ç¨æ·çè®¿é®ã\n\n\n * origin\n\nç¨æ¥è¯´æè¯·æ±ä»åªéåèµ·çï¼åæ¬ï¼ä¸ä»ä»åæ¬ åè®®åååã\nè¿ä¸ªåæ°ä¸è¬åªå­å¨äºcorsè·¨åè¯·æ±ä¸­ï¼å¯ä»¥çå° response æå¯¹åºç headerï¼access-control-allow-originã\n\n\n * user-agent\n\né¦é¨å­æ®µ user-agent ä¼å°åå»ºè¯·æ±çæµè§å¨åç¨æ·ä»£çåç§°ç­ä¿¡æ¯ä¼ è¾¾ç»æå¡å¨ã\n\n\n * pragma\n\npragma: no-cache\n\npragma æ¯ http/1.1 ä¹åçæ¬çåå²éçå­æ®µï¼ä»ä½ä¸ºä¸ http/1.0 çååå¼å®¹èå®ä¹ãå®¢æ·ç«¯ä¼è¦æ±ææçä¸­é´æå¡å¨ä¸è¿åç¼å­çèµæºã\n\n\n * content-type\n\ncontent-typeæ¥è¡¨ç¤ºå·ä½è¯·æ±ä¸­çåªä½ç±»åä¿¡æ¯ã\n\napplication/x-www-form-urlencoded\n\nè¯·æ±åæ°æ ¼å¼`key1=val1&key2=val2`çæ¹å¼è¿è¡æ¼æ¥ï¼å¹¶æ¾å°è¯·æ±å®ä½éé¢ï¼å¦ææ¯ä¸­ææç¹æ®å­ç¬¦ç­ä¼èªå¨è¿è¡urlè½¬ç ãä¸è¬ç¨äºè¡¨åæäº¤\n\napplication/json\n\napplication/json ä½ä¸ºååºå¤´æ¯è¾å¸¸è§ï¼ç¨æ¥åè¯æå¡ç«¯æ¶æ¯ä¸»ä½æ¯åºåååç json å­ç¬¦ä¸²ï¼å¶ä¸­ä¸ä¸ªå¥½å¤å°±æ¯json æ ¼å¼æ¯ææ¯é®å¼å¯¹å¤æå¾å¤çç»æåæ°æ®ãç±äº json è§èçæµè¡ï¼é¤äºä½çæ¬ ie ä¹å¤çåå¤§æµè§å¨é½åçæ¯æjson.stringifyï¼æå¡ç«¯è¯­è¨ä¹é½æå¤ç json çå½æ°ï¼ä½¿ç¨èµ·æ¥æ²¡æå°é¾ã\n\n\n\n# ååºå¤´å­æ®µ\n\né¢æ£è¯·æ±ç¸å³ååºå¤´\n\n * access-control-allow-originï¼ååºå¤´æå®äºè¯¥ååºçèµæºæ¯å¦è¢«åè®¸ä¸ç»å®çoriginå±äº«ã\n\n * access-control-allow-methods: ååºé¦é¨ access-control-allow-methods å¨å¯¹ preflight request.ï¼é¢æ£è¯·æ±ï¼çåºç­ä¸­æç¡®äºå®¢æ·ç«¯æè¦è®¿é®çèµæºåè®¸ä½¿ç¨çæ¹æ³ææ¹æ³åè¡¨ã\n\n * access-control-allow-headers: ååºé¦é¨ access-control-allow-headers ç¨äº preflight request ï¼é¢æ£è¯·æ±ï¼ä¸­ï¼ååºäºå°ä¼å¨æ­£å¼è¯·æ±ç access-control-request-headers å­æ®µä¸­åºç°çé¦é¨ä¿¡æ¯ã\n\n * access-control-allow-credentials: å½è¯·æ±è¦æ±æºå¸¦è¯ä¹¦ä¿¡æ¯ï¼ä¾å¦cookie,ææä¿¡æ¯ç­ï¼éªè¯ï¼æå¡å¨ç«¯æ¯å¦åè®¸æºå¸¦\n\n * access-control-max-age: æ¬æ¬¡é¢æ£è¯·æ±çæææï¼åä½ä¸ºç§\n\n----------------------------------------\n\n * date\n\næå¡ç«¯ååºå®¢æ·ç«¯çæ¶é´\n\n\n * server\n\næå¡å¨åå­\n\n\n * content-type\n\næå¡ç«¯åéçåªä½ç±»å\n\n\n * set-cookie\n\næµè§å¨ä¼å¨å½åé¡µé¢æå¨ååè®¾ç½®cookieï¼å½æµè§å¨åæ¬¡åéè¯·æ±æ¶ï¼æµè§å¨é»è®¤ä¼èªå¨å°cookieæ¾å¨è¯·æ±å¤´ä¸­çcookieé¡¹ä¸­åéç»æå¡å¨ã\n\n\n * cache-controlãe-tag ã last-modified\n\n * content-encoding\n\nææ¡£çç¼ç ï¼encodeï¼æ¹æ³ãåªæå¨è§£ç ä¹åæå¯ä»¥å¾å°content-typeå¤´æå®çåå®¹ç±»åãå©ç¨gzipåç¼©ææ¡£è½å¤æ¾èå°åå°htmlææ¡£çä¸è½½æ¶é´ã\n\n\n * connection\n\nkeep-alive é¿è¿æ¥\n\n\n\n# content-type\n\n\n# ç¨äºåç«¯è¯·æ±\n\n * content-type è®¾ç½®ä¸ get è¯·æ±æ å³,ä¸è¬ä¸postè¯·æ±ç¸å³\n\n * å½ç¨ form è¡¨åæäº¤æ¶ content-type é»è®¤ä¸ºapplication/x-www-form-urlencodedï¼å½ç¨xhræäº¤æ¶ï¼content-typeé»è®¤ä¸ºapplication/json\n\n * content-type ä¸º application/x-www-form-urlencodedæ¶æäº¤æ°æ®çæ¹å¼ä¸ºa = 123&b = 456&c = [1,2,3]\n\n * content-typeä¸ºapplication/jsonæ¶éè¦ä»¥jsonå½¢å¼æäº¤body: '{\"a\":123,\"b\":456}'\n\n\n# ç¨äºåç«¯ååº\n\n * 'text/html' // ç¨äºæå®htmlæä»¶\n\n * 'text/plain' // htmlçæºç ä¼æ¾ç¤ºå°é¡µé¢ä¸\n\n * 'text/css' // ç¨äºæå®cssæä»¶\n\n * 'image/jpg' // ç¨äºæå®å¾çæ ¼å¼\n\n * 'aplication/javascript' // ç¨äºæå®jsæä»¶\n\n * 'application/json' // ç¨äºæå®è¯·æ±æ¥å£çæ°æ®æ ¼å¼\n\n\n# è¿ç¨ä¸çº¿ç¨\n\n * è¿ç¨æ¯cpuèµæºåéçæå°åä½ï¼è½æ¥æèµæºåç¬ç«è¿è¡çæå°åä½ï¼\n * çº¿ç¨æ¯cpuè°åº¦çæå°åä½ï¼çº¿ç¨æ¯å»ºç«å¨è¿ç¨åºç¡ä¸çä¸æ¬¡ç¨åºè¿è¡åä½ï¼ä¸ä¸ªè¿ç¨å¯ä»¥æå¤ä¸ªçº¿ç¨ï¼\n * åä¸è¿ç¨ä¸­çå¤æ¡çº¿ç¨è®²å±äº«è¯¥è¿ç¨ä¸­çå¨é¨ç³»ç»èµæºï¼ä½æ¯åä¸è¿ç¨ä¸­çå¤ä¸ªçº¿ç¨æåèªçè°ç¨æ ï¼èªå·±ççº¿ç¨æ¬å°å­å¨ãä¸ä¸ªè¿ç¨å¯ä»¥æå¾å¤çº¿ç¨ï¼æ¯æ¡çº¿ç¨å¹¶è¡æ§è¡ä¸åçä»»å¡\n * è¿ç¨é´éä¿¡æ¹å¼ï¼ç®¡éãä¿¡å·éãæ¶æ¯éåãå±äº«åå­ãå¥æ¥å­ï¼socketï¼ã\n * çº¿ç¨é´çéä¿¡ç®çä¸»è¦æ¯ç¨äºçº¿ç¨åæ­¥ï¼æä»¥çº¿ç¨æ²¡æåè¿ç¨éä¿¡ä¸­çç¨äºæ°æ®äº¤æ¢çéä¿¡æºå¶ãï¼éæºå¶ï¼åæ¬äºæ¥éãæ¡ä»¶åéãè¯»åéï¼ä¿¡å·éæºå¶(semaphore)ï¼ä¿¡å·æºå¶(signal)ï¼\n\n\n# åºäºå¯¹è±¡ä¸é¢åå¯¹è±¡\n\n * é¢åå¯¹è±¡çä¸å¤§ç¹ç¹ï¼å°è£ï¼ç»§æ¿ï¼å¤æï¼ç¼ºä¸ä¸å¯ï¼ä¾å¦ c++ï¼java\n * åºäºå¯¹è±¡çè¯­è¨ï¼ä½¿ç¨ä¸äºå°è£å¥½çå¯¹è±¡ï¼è°ç¨å¯¹è±¡çæ¹æ³ï¼è®¾ç½®å¯¹è±¡çå±æ§ï¼ä½æ¯æ æ³æ´¾çæ°çå¯¹è±¡ç±»åï¼åªè½ä½¿ç¨ç°æå¯¹è±¡çæ¹æ³åå±æ§ã\n * javascriptè½ç¶éè¿ååé¾ç­å®ç°äºç»§æ¿ï¼éè¿argumentså®ç°å½æ°éè½½ç­ç¹ç¹ï¼ä½æ¯é½æ¯å±äºæ¨¡æå®ç°ï¼æ¬è´¨ä¸è¿æ¯åºäºå¯¹è±¡çè¯­è¨ï¼å®éä¸å¯ä»¥å®ç°é¢åå¯¹è±¡ç¼ç¨ã\n\n\n# arpï¼rarp åè®®\n\narpåè®®ï¼å°åè§£æåè®®\n\nå¨å±åç½ä¸­ï¼å½ä¸»æº a ææ°æ®è¦åéç»ä¸»æº b æ¶ï¼a å¿é¡»ç¥é b ç ip å°åã\n\nä½æ¯ä»ä»æipå°åè¿æ¯ä¸å¤çï¼å ä¸ºipæ°æ®æ¥æè¿éè¦å¨æ°æ®é¾è·¯å±å°è£æå¸§æè½éè¿ç©çç½ç»åéãå ä¸ºåéç«¯è¿å¿é¡»ææ¥æ¶ç«¯çmacå°åï¼æä»¥éè¦ä¸ä¸ªä»ipå°åå°macå°åçæ å°ãarpå°±æ¯å¹²è¿äºæçåè®®ã\n\n>  1. ä¸»æº a èªèº« arp ç¼å­è¡¨ä¸­ï¼æ²¡æä¸»æº b ç mac ä¿¡æ¯ï¼ä¼å¨æ´ä¸ªç½ç»ä¸­å¹¿æ­ arp è¯·æ±\n>  2. ä¸»æº b æ¥æ¶å° arp è¯·æ±åï¼åå°ä¸»æº a ç mac çå°åå å¥èªå·±ç arp ç¼å­è¡¨ä¸­\n>  3. ååé arp ç­å¤ï¼ææ¯ä¸»æº bï¼æç mac å°åæ¯ä»ä¹\n>  4. ä¸»æº a æ·»å ä¸»æº b ç mac å°åä¿¡æ¯ï¼ç»ä¸»æº b åéä¿¡æ¯ï¼æ ¹æ® arp ç¼å­è¡¨ç´æ¥åé\n> \n> rarpåè®®ï¼ååå°åè§£æåè®®\n> \n> å±åç½ä¸­ï¼ç¥éäºæä¸ªä¸»æºç mac å°åï¼ä¸ç¥éæä¸ªä¸»æºç ip å°åï¼éè¿ rarp åè®®è·å¾å°åã\n\n\n# æ°æ®åºäºå¡çåä¸ªç¹æ§\n\näºå¡ï¼transactionï¼æ¯å¹¶åæ§å¶åä½ï¼æ¯ç¨æ·å®ä¹çä¸ä¸ªæä½åºåï¼è¿äºæä½è¦ä¹é½åï¼è¦ä¹é½ä¸åï¼æ¯ä¸ä¸ªä¸å¯åå²çå·¥ä½åä½ã\n\näºå¡å·æåä¸ªç¹å¾ï¼åå­æ§ï¼ atomicity ï¼ãä¸è´æ§ï¼ consistency ï¼ãéç¦»æ§ï¼ isolation ï¼åæç»­æ§ï¼ durability ï¼ãè¿åä¸ªç¹æ§ç®ç§°ä¸º acid ç¹æ§ã\n\n\n# æ°æ®åºç´¢å¼ä¸b+æ \n\næ°æ®åºç´¢å¼å¶å®å°±æ¯ä¸ºäºä½¿æ¥è¯¢æ°æ®æçå¿«ã\n\n 1. èéç´¢å¼ï¼ä¸»é®ç´¢å¼ï¼ï¼å¨æ°æ®åºéé¢ï¼ææè¡æ°é½ä¼æç§ä¸»é®ç´¢å¼è¿è¡æåºã(æ¼é³é¦å­æ¯ä½ä¸ºä¸»é®æ¥å­å¸)\n 2. éèéç´¢å¼ï¼å°±æ¯ç»æ®éå­æ®µå ä¸ç´¢å¼ãï¼åæé¨é¦å»æ¥ï¼\n 3. èåç´¢å¼ï¼å°±æ¯å¥½å ä¸ªå­æ®µç»æçç´¢å¼ï¼ç§°ä¸ºèåç´¢å¼ãï¼æ¼é³+åæé¨é¦å»æ¥ï¼\n\nb+æ \n\n\n# æ­»é\n\næ­»éæ¯æä¸¤ä¸ªæä¸¤ä¸ªä»¥ä¸çè¿ç¨å¨æ§è¡è¿ç¨ä¸­ï¼ç±äºç«äºèµæºæèç±äºå½¼æ­¤éä¿¡èé æçä¸ç§é»å¡çç°è±¡ï¼è¥æ å¤åä½ç¨ï¼å®ä»¬é½å°æ æ³æ¨è¿ä¸å»ãæ­¤æ¶ç§°ç³»ç»å¤äºæ­»éç¶ææç³»ç»äº§çäºæ­»éï¼è¿äºæ°¸è¿å¨äºç¸ç­å¾çè¿ç¨ç§°ä¸ºæ­»éè¿ç¨ã\n\nä¾å¦ï¼çº¿ç¨ a ææ locka å¯¹è±¡ï¼å¹¶è¯·æ± lockb å¯¹è±¡ï¼çº¿ç¨ b ææ lockb å¯¹è±¡ï¼å¹¶è¯·æ± locka å¯¹è±¡ãç±äºä»ä»¬é½å¨ç­å¾å¯¹æ¹éæ¾èµæºï¼æä»¥ä¼äº§çæ­»é\n\n\n# æéèªå¨æº\n\n * ä¸è¬æä»¬ä¼ç¨ç¶æå¾æ¥æè¿°ä¸ä¸ªæéèªå¨æºï¼finite automataï¼ãå®æä¸åªæä¸ä¸ªèµ·å§ç¶æï¼å¨ç¶æå¾ä¸­ï¼ä¸ä¸ªä»ä¸ç¥éä»ä¹å°æ¹æ¥çç®­å¤´æåçç¶æï¼ï¼æä¸äºæ¥åç¶æï¼ç¶æå¾ä¸­æä¸¤ä¸ªååèµ·æ¥çç¶æï¼ã\n * æéèªå¨æºçè¾åºæ¯æ¥åæèæç»ã\n\n\n# ç¼è¯åççè¿ç¨\n\n> è¯æ³åæçætokensæµï¼è¯­æ³åæè½¬æ¢æastï¼astèç¹éåè¿è¡å¤ç\n\n\n# linux è§£åå½ä»¤\n\nhttps://blog.csdn.net/qq_40232872/article/details/79159753",charsets:{cjk:!0}},{title:"è®¾è®¡æ¨¡å¼",frontmatter:{},regularPath:"/design-pattern/design-pattern.html",relativePath:"design-pattern/design-pattern.md",key:"v-f33b1342",path:"/design-pattern/design-pattern.html",headers:[{level:2,title:"å·¥åæ¨¡å¼(Factory pattern)",slug:"å·¥åæ¨¡å¼-factory-pattern",normalizedTitle:"å·¥åæ¨¡å¼(factory pattern)",charIndex:591},{level:3,title:"å·¥åæ¨¡å¼çå®ä¾",slug:"å·¥åæ¨¡å¼çå®ä¾",normalizedTitle:"å·¥åæ¨¡å¼çå®ä¾",charIndex:697},{level:3,title:"å·¥åæ¨¡å¼çä¼å¿",slug:"å·¥åæ¨¡å¼çä¼å¿",normalizedTitle:"å·¥åæ¨¡å¼çä¼å¿",charIndex:1793},{level:2,title:"æ½è±¡å·¥åæ¨¡å¼(abstract Factory Pattern)",slug:"æ½è±¡å·¥åæ¨¡å¼-abstract-factory-pattern",normalizedTitle:"æ½è±¡å·¥åæ¨¡å¼(abstract factory pattern)",charIndex:1937},{level:3,title:"æ½è±¡å·¥åæ¨¡å¼çå®ä¾",slug:"æ½è±¡å·¥åæ¨¡å¼çå®ä¾",normalizedTitle:"æ½è±¡å·¥åæ¨¡å¼çå®ä¾",charIndex:2166},{level:3,title:"æ½è±¡å·¥åæ¨¡å¼çä¼å¿",slug:"æ½è±¡å·¥åæ¨¡å¼çä¼å¿",normalizedTitle:"æ½è±¡å·¥åæ¨¡å¼çä¼å¿",charIndex:4408},{level:2,title:"åä¾æ¨¡å¼(Singleton Pattern)",slug:"åä¾æ¨¡å¼-singleton-pattern",normalizedTitle:"åä¾æ¨¡å¼(singleton pattern)",charIndex:4478},{level:3,title:"åä¾æ¨¡å¼çå®ä¾",slug:"åä¾æ¨¡å¼çå®ä¾",normalizedTitle:"åä¾æ¨¡å¼çå®ä¾",charIndex:4532},{level:3,title:"åä¾æ¨¡å¼çä¼å¿",slug:"åä¾æ¨¡å¼çä¼å¿",normalizedTitle:"åä¾æ¨¡å¼çä¼å¿",charIndex:5459},{level:3,title:"åä¾æ¨¡å¼çä½¿ç¨åºæ¯",slug:"åä¾æ¨¡å¼çä½¿ç¨åºæ¯",normalizedTitle:"åä¾æ¨¡å¼çä½¿ç¨åºæ¯",charIndex:5510},{level:2,title:"å»ºé èæ¨¡å¼",slug:"å»ºé èæ¨¡å¼",normalizedTitle:"å»ºé èæ¨¡å¼",charIndex:312},{level:3,title:"ç½è¯è§£é",slug:"ç½è¯è§£é",normalizedTitle:"ç½è¯è§£é",charIndex:6199},{level:2,title:"ééå¨æ¨¡å¼(Adapter Pattern)",slug:"ééå¨æ¨¡å¼-adapter-pattern",normalizedTitle:"ééå¨æ¨¡å¼(adapter pattern)",charIndex:7648},{level:3,title:"ééå¨æ¨¡å¼çå®ä¾",slug:"ééå¨æ¨¡å¼çå®ä¾",normalizedTitle:"ééå¨æ¨¡å¼çå®ä¾",charIndex:7736},{level:3,title:"ééå¨æ¨¡å¼çä¼å¿",slug:"ééå¨æ¨¡å¼çä¼å¿",normalizedTitle:"ééå¨æ¨¡å¼çä¼å¿",charIndex:9801},{level:2,title:"è£é¥°å¨æ¨¡å¼(Decorator Pattern)",slug:"è£é¥°å¨æ¨¡å¼-decorator-pattern",normalizedTitle:"è£é¥°å¨æ¨¡å¼(decorator pattern)",charIndex:9850},{level:3,title:"è£é¥°å¨æ¨¡å¼çå®ä¾",slug:"è£é¥°å¨æ¨¡å¼çå®ä¾",normalizedTitle:"è£é¥°å¨æ¨¡å¼çå®ä¾",charIndex:9926},{level:3,title:"è£é¥°å¨æ¨¡å¼çä¼å¿",slug:"è£é¥°å¨æ¨¡å¼çä¼å¿",normalizedTitle:"è£é¥°å¨æ¨¡å¼çä¼å¿",charIndex:11018},{level:2,title:"è¿æ»¤å¨æ¨¡å¼(Filter Pattern)",slug:"è¿æ»¤å¨æ¨¡å¼-filter-pattern",normalizedTitle:"è¿æ»¤å¨æ¨¡å¼(filter pattern)",charIndex:11074},{level:3,title:"è¿æ»¤å¨æ¨¡å¼çå®ä¾",slug:"è¿æ»¤å¨æ¨¡å¼çå®ä¾",normalizedTitle:"è¿æ»¤å¨æ¨¡å¼çå®ä¾",charIndex:11126},{level:3,title:"è¿æ»¤å¨æ¨¡å¼ä¼å¿",slug:"è¿æ»¤å¨æ¨¡å¼ä¼å¿",normalizedTitle:"è¿æ»¤å¨æ¨¡å¼ä¼å¿",charIndex:15407}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"å·¥åæ¨¡å¼(Factory pattern) å·¥åæ¨¡å¼çå®ä¾ å·¥åæ¨¡å¼çä¼å¿ æ½è±¡å·¥åæ¨¡å¼(abstract Factory Pattern) æ½è±¡å·¥åæ¨¡å¼çå®ä¾ æ½è±¡å·¥åæ¨¡å¼çä¼å¿ åä¾æ¨¡å¼(Singleton Pattern) åä¾æ¨¡å¼çå®ä¾ åä¾æ¨¡å¼çä¼å¿ åä¾æ¨¡å¼çä½¿ç¨åºæ¯ å»ºé èæ¨¡å¼ ç½è¯è§£é ééå¨æ¨¡å¼(Adapter Pattern) ééå¨æ¨¡å¼çå®ä¾ ééå¨æ¨¡å¼çä¼å¿ è£é¥°å¨æ¨¡å¼(Decorator Pattern) è£é¥°å¨æ¨¡å¼çå®ä¾ è£é¥°å¨æ¨¡å¼çä¼å¿ è¿æ»¤å¨æ¨¡å¼(Filter Pattern) è¿æ»¤å¨æ¨¡å¼çå®ä¾ è¿æ»¤å¨æ¨¡å¼ä¼å¿",content:"# è®¾è®¡æ¨¡å¼\n\nJavaScript è®¾è®¡æ¨¡å¼ï¼è®¾è®¡æ¨¡å¼æ¯ä¸ç§ææ³ï¼åè¯­è¨æ å³ã\n\n * å¼åæç\n * å¯ç»´æ¤æ§\n\nç¸å³ä¹¦ç±\n\n * ãå¤§è¯è®¾è®¡æ¨¡å¼ã\n * ãè®¾è®¡æ¨¡å¼ï¼å¯æç¨é¢åå¯¹è±¡è½¯ä»¶çåºç¡ã\n * ãheadfirst è®¾è®¡æ¨¡å¼ã\n * ãJavaScript è®¾è®¡æ¨¡å¼ã\n * ãJavaScriptä¸­çè®¾è®¡æ¨¡å¼ã\n\n\n# é¢åå¯¹è±¡ç JavaScript\n\n * ç±»\n * å®ä¾\n * æé å½æ°\n * ç»§æ¿\n * å¤æ\n * å°è£\n * åå\n * classè¯­æ³\n * å·ä½çé¢åå¯¹è±¡ç¼ç¨\n\n\n# è®¾è®¡æ¨¡å¼\n\n * åå»ºåæ¨¡å¼\n   \n   * å·¥åæ¨¡å¼\n   * æ½è±¡å·¥åæ¨¡å¼\n   * åä¾æ¨¡å¼\n   * å»ºé èæ¨¡å¼\n   * ååæ¨¡å¼\n\n * ç»æåæ¨¡å¼\n   \n   * ééå¨æ¨¡å¼\n   * æ¡¥æ¥æ¨¡å¼\n   * è¿æ»¤å¨æ¨¡å¼\n   * ç»åæ¨¡å¼\n   * è£é¥°å¨æ¨¡å¼\n   * å¤è§æ¨¡å¼\n   * äº«åæ¨¡å¼\n   * ä»£çæ¨¡å¼\n\n * è¡ä¸ºåæ¨¡å¼\n   \n   * è´£ä»»é¾æ¨¡å¼\n   * å½ä»¤æ¨¡å¼\n   * è§£éå¨æ¨¡å¼\n   * è¿­ä»£å¨æ¨¡å¼\n   * ä¸­ä»èæ¨¡å¼\n   * å¤å¿å½æ¨¡å¼\n   * è§å¯èæ¨¡å¼\n   * ç¶ææ¨¡å¼\n   * ç©ºå¯¹è±¡æ¨¡å¼\n   * ç­ç¥æ¨¡å¼\n   * æ¨¡æ¿æ¨¡å¼\n   * è®¿é®èæ¨¡å¼\n\n * ééå¨æ¨¡å¼\n\n * è£é¥°å¨æ¨¡å¼\n\n\n# å·¥åæ¨¡å¼(Factory pattern)\n\nå·¥åæ¨¡å¼æ¯æ¯è¾å¸¸ç¨çè®¾è®¡æ¨¡å¼ä¹ä¸ï¼é£ä¹ä»ä¹å«å·¥åæ¨¡å¼å¢ï¼ç®åæ¥è¯´ï¼å°±æ¯ä½ éè¦ä»ä¹ä¸è¥¿ä¸ç´æ¥ä½¿ç¨newçæ¹æ³çæå®ä¾ï¼ç¶åç»ä¸éè¿å·¥åè¿è¡çäº§å å·¥åçæå®ä¾ã\n\n\n# å·¥åæ¨¡å¼çå®ä¾\n\næ¯å¦æä»¬ç°å¨æå¾å¤å½¢ç¶æ¯å¦åå½¢ï¼ç©å½¢åæ­£æ¹å½¢ãè¿ç±»é½æ¯å±äºå½¢ç¶ï¼é£æä»¬æ¯ä¸æ¯å¯ä»¥éè¿ä¸é¨çäº§å½¢ç¶çå·¥åæ¥çæå®ä»¬çå®ä¾ä¹ï¼\n\nclass Circle {\n    draw() {\n        console.log(\"I'm a circle\")\n    }\n}\nclass Rectangle {\n    draw() {\n        console.log(\"I'm a rectangle\")\n    }\n}\nclass Square {\n    draw() {\n        console.log(\"I'm a square\")\n    }\n}\n\n\né£ä¹æ¥ä¸æ¥ï¼æä»¬å¯ä»¥å»ºç«ä¸ä¸ªä¸é¨çäº§å½¢ç¶çå·¥åæ¥çäº§å®ä»¬äºãå³æ ¹æ®å­ç¬¦ä¸²æ¥äº§çå¯¹åºéè¦çç±»ãä½ å¨è¿éå¯ä»¥çå°ç±»çåºå£é½å·²ç»å¨ä¸ä¸ªæ¹æ³ä¸­äºã\n\nclass ShapeFactory {\n    getShape(shapeType){\n        switch(shapeType) {\n            case 'CIRCLE':\n                return new Circle();\n            case 'RECTANGLE':\n                return new Rectangle();\n            case 'SQUARE':\n                return new Square();\n            default:\n                return null;\n        }\n    }\n}\n\n\né£ä¹æä»¬éè¦ä½¿ç¨çæ¶åï¼å°±å¯ä»¥ç´æ¥åªéè¦newåºä¸ä¸ªå·¥åï¼å¨æ ¹æ®å­ç¬¦ä¸²å°±è½æ¿å°å¯¹åºçéè¦çäº§çç±»äºãèä¸éè¦åå«å¯¹ç±»è¿è¡newã\n\nconst shapeFactory = new ShapeFactory();\n// éè¿å·¥åæ¿åç§å½¢ç¶\nconst shape1 = shapeFactory.getShape('CIRCLE');\nshape1.draw();\nconst shape2 = shapeFactory.getShape('RECTANGLE');\nshape2.draw();\nconst shape3 = shapeFactory.getShape('SQUARE');\nshape3.draw();\n/**\n * output:\n * I'm a circle\n * I'm a rectangle\n * I'm a square\n */\n\n\n\n# å·¥åæ¨¡å¼çä¼å¿\n\né£ä¹ä½¿ç¨å·¥åæ¨¡å¼çå¥½å¤ä¹æ¯æ¾èæè§çï¼æ¯å¦å®ä¾ççäº§æ¯è¾å¤æï¼æèè¯´çæå®ä¾åè¿éè¦é¢å¤å å·¥ï¼è¿ä¸ªæ¶åå·¥åç»äºæä»¬ä¸ä¸ªç»ä¸çåºå¥å£ï¼ä¹æ¹ä¾¿äºæ¥åå¯¹è¿ä¸ªå®ä¾çä¿®æ¹ãæ¯å¦ä½ è¦ä¿®æ¹å·¥åäº§åºæ¯ä¸ä¸ªåä¾çæ¶åï¼å°±ä¸éè¦å¨ææçç±»ä¸­ä¿®æ¹ï¼èåªè¦å¨å·¥ååºå£ä¿®æ¹å³å¯è¾¾å°ç®æ ã\n\n\n# æ½è±¡å·¥åæ¨¡å¼(abstract Factory Pattern)\n\nä¸æè®²å°äºå·¥åæ¨¡å¼ï¼è¿ç¯æç« å°æ½è±¡å·¥åï¼æ½è±¡å·¥åçåå­æ¯ççå¾æ½è±¡ï¼ä¹å¾å®¹æè®©äººæ½è±¡ççè§£ï¼é£ä¹ä»ä¹æ¯æ½è±¡å·¥åå¢ï¼\n\nå¶å®æ½è±¡å·¥åï¼ç®åæ¥è¯´å°±æ¯å·¥åçå·¥åï¼å ä¸ºä¸è¬æ¥è¯´ä¸ä¸ªå·¥ååªè´è´£å è½½ä¸ç±»ç»ä»¶ï¼é£ä¹ä½ æå¾å¤å°ç±»ç»ä»¶éè¦çäº§ï¼é£ä¹å¿å¿ä¼æå¾å¤å°ç±»çå·¥åãé£ä¹ä½ æç»çäº§ä¸ä¸ªå¤§ç±»ï¼é£å°±è¦å¾å¤å°ç±»çå·¥åè´è´£çäº§ãé£ä¹å¦ä½æ´æ¹ä¾¿çç®¡çæèè¯´çäº§è¿äºå·¥åå¢ï¼é£å°±ç¨çäº§å·¥åçå·¥åæ¥çæå§ã\n\n\n# æ½è±¡å·¥åæ¨¡å¼çå®ä¾\n\nåæä¸æè¯´çå½¢ç¶å·¥åæ¬è¿æ¥\n\n// è¿æ¯ä¹åä¸æè¯´çå½¢ç¶å·¥å\nclass Circle {\n    draw() {\n        console.log(\"I'm a circle\")\n    }\n}\nclass Rectangle {\n    draw() {\n        console.log(\"I'm a rectangle\")\n    }\n}\nclass Square {\n    draw() {\n        console.log(\"I'm a square\")\n    }\n}\nclass ShapeFactory {\n    getShape(shapeType){\n        switch(shapeType) {\n            case 'CIRCLE':\n                return new Circle();\n            case 'RECTANGLE':\n                return new Rectangle();\n            case 'SQUARE':\n                return new Square();\n            default:\n                return null;\n        }\n    }\n}\n\n\nè¿æ¶åä½ å·²ç»æå½¢ç¶äºï¼ä½ä½ è§å¾ä¸ç¾è§ï¼ä½ è¿éè¦é¢è²ï¼é£ä¹ä½ è¿ä¸ªæ¶åï¼ä½ åæäºä¸ªé¢è²å·¥åï¼å¦ä¸ï¼\n\n// åæ°å ä¸ä¸ªé¢è²å·¥å\nclass Red {\n    fill() {\n        console.log(\"fill red\")\n    }\n}\nclass Blue {\n    fill() {\n        console.log(\"fill blue\")\n    }\n}\nclass Green {\n    fill() {\n        console.log(\"fill green\")\n    }\n}\nclass ColorFactory {\n    getColor(color){\n        switch(color) {\n            case 'RED':\n                return new Red();\n            case 'BLUE':\n                return new Blue();\n            case 'GREEN':\n                return new Green();\n            default:\n                return null;\n        }\n    }\n}\n\n\né¢è²å·¥åå¥½äºï¼ä½æ¯ä½ æå¿ï¼ä»¥åå·¥åå¤äºï¼ä¸å¥½ç®¡çååï¼é£è¿æ¯èµ°ä¹åçå¥è·¯ï¼æå·¥åéè¿æ½è±¡å·¥åçäº§åºæ¥ãå¦ä¸ï¼\n\n// æåæ·»å æ½è±¡å·¥å\nclass FactoryProducer {\n    static getFactory(choice){\n        switch(choice) {\n            case 'SHAPE':\n                return new ShapeFactory();\n            case 'COLOR':\n                return new ColorFactory();\n            default:\n                return null;\n        }\n    }\n}\n\n\né£ä¹è¿ä¸ªæ¶ååä¸æä¸æ ·åªéè¦newåºä¸ä¸ªæ½è±¡å·¥åï¼å°±è½æææéè¦çä¸è¥¿æ¿å°æäº:\n\n//éè¿æ½è±¡å·¥åæ¿å½¢ç¶å·¥å\nconst shapeFactory = FactoryProducer.getFactory('SHAPE');\n// éè¿å·¥åæ¿åç§å½¢ç¶\nconst shape1 = shapeFactory.getShape('CIRCLE');\nshape1.draw();\nconst shape2 = shapeFactory.getShape('RECTANGLE');\nshape2.draw();\nconst shape3 = shapeFactory.getShape('SQUARE');\nshape3.draw();\n//éè¿æ½è±¡å·¥åæ¿é¢è²å·¥å\nconst colorFactory = FactoryProducer.getFactory('COLOR');\n// éè¿å·¥åæ¿åç§é¢è²\nconst color1 = colorFactory.getColor('RED');\ncolor1.fill();\nconst color2 = colorFactory.getColor('BLUE');\ncolor2.fill();\nconst color3 = colorFactory.getColor('GREEN');\ncolor3.fill();\n/**\n * outputï¼\n * I'm a circle\n * I'm a rectangle\n * I'm a square\n * fill red\n * fill blue\n * fill green\n */\n\n\n\n# æ½è±¡å·¥åæ¨¡å¼çä¼å¿\n\né£ä¹ä½¿ç¨æ½è±¡å·¥åæ¨¡å¼çå¥½å¤åå·¥åæ¨¡å¼çå¥½å¤å¾ç¸ä¼¼ï¼ç»å·¥ååäºä¸ä¸ªç»ä¸çåºå¥å£ï¼ä¹æ¹ä¾¿äºæ¥åå¯¹è¿ä¸ªå·¥åçä¿®æ¹ã\n\n\n# åä¾æ¨¡å¼(Singleton Pattern)\n\nä»ä¹å«åä¾æ¨¡å¼ï¼ç®åæ¥è¯´å°±æ¯ä¸ä¸ªå®ä¾åªçäº§ä¸æ¬¡ã\n\n\n# åä¾æ¨¡å¼çå®ä¾\n\nè¿ä¸ªå¾ç®åï¼æè§å¾å¯ä»¥ç´æ¥çä»£ç ã\n\nè¿æ¯ä¸ç§âææ±å¼âåæ³ï¼è¿æä¸ç§å«é¥¿æ±å¼åæ³ï¼åºå«æ¯ææ±ä½¿ç¨æ¶æåå§åï¼é¥¿æ±åååå§åï¼ç¨çæ¶åç´æ¥ç»ã\n\nç±äºjsä¸éè¦èèçº¿ç¨å®å¨ï¼æä»¥æ¨èä½¿ç¨ææ±å¼åæ³ï¼é¥¿æ±å¨JSä¸­åèå®¹æäº§çæ²¡å¿è¦çåå¾ã\n\n> æ°æ§åä¾æ¯æå¨éè¦çæ¶åæåå»º\n\nclass SingleObject {\n    constructor() {\n        // é²æ­¢è°ç¨newåå§å\n        if(new.target != undefined) {\n            const errorMsg = \"This is single object,Can't use keyword new!\";\n            const tipMsg = \"You should use method getInstance to get instanceã\";\n            throw new Error(`\\n${errorMsg}\\n${tipMsg}`)\n        }\n    }\n    static getInstance(){\n        // çäº§åä¾\n        if(SingleObject.instance) {\n            return SingleObject.instance;\n        }\n        SingleObject.instance = {};\n        SingleObject.instance.__proto__ = SingleObject.prototype;\n        return SingleObject.instance;\n    }\n    showMessage(){\n       console.log(\"Hello World!\");\n    }\n}\nconst instance = SingleObject.getInstance();\ninstance.showMessage();\n/**\n * output:\n * Hello World!\n */\n\n\n\n# åä¾æ¨¡å¼çä¼å¿\n\nå¯¹äºé¢ç¹ä½¿ç¨ä¸å¯éå¤ä½¿ç¨çå¯¹è±¡ï¼å¯ä»¥æå¤§æ¥åå°åå­æ¶èåæ²¡å¿è¦çåå¾åæ¶ã\n\n\n# åä¾æ¨¡å¼çä½¿ç¨åºæ¯\n\nå¨ä¸ä¸ªç³»ç»ä¸­ï¼è¦æ±ä¸ä¸ªç±»æä¸ä»æä¸ä¸ªå¯¹è±¡ï¼å¦æåºç°å¤ä¸ªå¯¹è±¡å°±ä¼åºç°âä¸è¯ååºâï¼å¯ä»¥éç¨åä¾æ¨¡å¼ï¼å·ä½çåºæ¯å¦ä¸ï¼\n\n * å¨æ´ä¸ªé¡¹ç®ä¸­éè¦ä¸ä¸ªå±äº«è®¿é®ç¹æå±äº«æ°æ®ï¼ä¾å¦ä¸ä¸ªWebä¸çè®¡æ°å¨ï¼å¯ä»¥ä¸ç¨æ¯æ¬¡æå·æ°é½è®°å½å°æ°æ®åºä¸­ï¼ä½¿ç¨åä¾æ¨¡å¼ä¿æè®¡æ°å¨çå¼ï¼å¹¶ç¡®ä¿æ¯çº¿ç¨å®å¨çï¼\n * éè¦å®ä¹å¤§éçéæå¸¸éåéææ¹æ³ï¼å¦å·¥å·ç±»ï¼çç¯å¢ï¼å¯ä»¥éç¨åä¾æ¨¡å¼ï¼å½ç¶ï¼ä¹å¯ä»¥ç´æ¥å£°æä¸ºstaticçæ¹å¼ï¼ã\n * å¨é¡¹ç®å¼åæ¶æä¸äºå¯¹è±¡å¶å®æä»¬åªéè¦ä¸ä¸ªï¼æ¯å¦ï¼çº¿ç¨æ± ãç¼å­ãæ¥å¿å¯¹è±¡ç­ç­ã\n\n\n# å»ºé èæ¨¡å¼\n\nå¨è½¯ä»¶ç³»ç»ä¸­ï¼ææ¶åé¢ä¸´çâä¸ä¸ªå¤æå¯¹è±¡âçåå»ºå·¥ä½ï¼å¶éå¸¸ç±åä¸ªé¨åçå­å¯¹è±¡ç¨ä¸å®çç®æ³ææï¼ç±äºéæ±çååï¼è¿ä¸ªå¤æå¯¹è±¡çåä¸ªé¨åç»å¸¸é¢ä¸´çå§ççååï¼ä½æ¯å°å®ä»¬ç»åå¨ä¸èµ·çç®æ³ç¡®ç¸å¯¹ç¨³å®ãå¦ä½åºå¯¹è¿ç§ååï¼å¦ä½æä¾ä¸ç§âå°è£æºå¶âæ¥éç¦»åºâå¤æå¯¹è±¡çåä¸ªé¨åâçååï¼ä»èä¿æç³»ç»ä¸­çâç¨³å®æå»ºç®æ³âä¸éçéæ±æ¹åèæ¹åï¼è¿å°±æ¯è¦è¯´çå»ºé èæ¨¡å¼ã\n\nå»ºé èæ¨¡å¼(Builder pattern)ï¼å°ä¸ä¸ªå¤æå¯¹è±¡çæå»ºå±ä¸å¶è¡¨ç¤ºå±ç¸äºåç¦»ï¼ä½¿å¾åæ ·çæå»ºè¿ç¨å¯ä»¥éç¨ä¸åçè¡¨ç¤ºãä¹å°±æ¯è¯´å¦ææä»¬ç¨äºå»ºé èæ¨¡å¼ï¼é£ä¹ç¨æ·å°±éè¦æå®éè¦å»ºé çç±»åå°±å¯ä»¥å¾å°å®ä»¬ï¼èå·ä½å»ºé çè¿ç¨åç»èå°±ä¸éè¦ç¥éäºã\n\nå¨å·¥åæ¨¡å¼ä¸­ï¼å¯¹åå»ºçç»æé½æ¯ä¸ä¸ªå®æ´çä¸ªä½ï¼æä»¬å¯¹åè§çè¿ç¨ä¸ä¸ºæç¥ï¼åªäºè§£åå»ºçç»æå¯¹è±¡ãèå¨å»ºé èæ¨¡å¼ä¸­æä»¬å³å¿çæ¯å¯¹è±¡çåå»ºè¿ç¨ï¼å æ­¤æä»¬éå¸¸å°åå»ºå¯¹è±¡çç±»æ¨¡ååï¼è¿æ ·ä½¿è¢«åå»ºçç±»çæ¯ä¸ä¸ªæ¨¡åé½å¯ä»¥å¾å°çµæ´»çè¿ç¨åé«è´¨éçå¤ç¨ã\n\n\n# ç½è¯è§£é\n\n> å¨å»ºé èæ¨¡å¼éï¼æä¸ªæå¯¼è(Director)ï¼ç±æå¯¼èæ¥ç®¡çå»ºé èï¼ç¨æ·æ¯ä¸æå¯¼èèç³»çï¼æå¯¼èèç³»å»ºé èæåå¾å°äº§åãå³å»ºé èæ¨¡å¼å¯ä»¥å¼ºå¶å®è¡ä¸ç§åæ­¥éª¤è¿è¡çå»ºé è¿ç¨ã\n\n    //äº§åââäº§åç±»\n    function Product(){\n        this.design = \"\";\n        this.db = \"\";\n        this.front = \"\";\n        this.back = \"\";\n    }\n    //äº§åç»çââæå¯¼ç±»\n    function ProductManager(){\n        this.startWork = function(engineer){\n            engineer.productDesign();\n            engineer.frontEnd();\n            engineer.backEnd();\n            engineer.dbManageer();\n        }\n    }\n    //å·¥ç¨å¸ââå»ºé èç±»\n    function Engineer(){\n        this.productDesign = function(){\n            console.log(\"äº§åè®¾è®¡å¥½äº\");\n        };\n        this.dbManageer = function(){\n            console.log(\"æ°æ®åºè®¾è®¡å¥½äº\");\n        };\n        this.backEnd = function(){\n            console.log(\"åå°åå¥½äº\");\n        };\n        this.frontEnd = function(){\n            console.log(\"åå°åå¥½äº\");\n        };\n        this.done = function(){\n            var product = new Product();\n            product.design = \"done\";\n            product.db = \"done\";\n            product.back = \"done\";\n            product.front = \"done\";\n            return product;\n        }\n    }\n\n\t\tlet engineer = new Engineer()\n    let productmanager = new ProductManager()\n    productmanager.startWork(engineer)\n\t\t// äº§åè®¾è®¡å¥½äº\n    // åå°åå¥½äº\n\t\t// åå°åå¥½äº\n\t\t// æ°æ®åºè®¾è®¡å¥½äº\n\t\tlet product = engineer.done()\n\t\tconsole.log(product)\n\t\t/**\n\t\t\tProduct\n        back: \"done\"\n        db: \"done\"\n        design: \"done\"\n        front: \"done\"\n\t\t*/\n\n\n\n# ééå¨æ¨¡å¼(Adapter Pattern)\n\nééå¨æ¨¡å¼æ¯ä½ä¸ºä¸¤ä¸ªä¸åæ¥å£çä¸ç§èåï¼ææ¯å¦è¯´SDå¡ééå¨ï¼æ è®ºä½¿ç¨TFæSDå¡æèå¶å®å¡ï¼å¯¹å¤è¾åºé½æ¯USBæ¥å£ã\n\n\n# ééå¨æ¨¡å¼çå®ä¾\n\né¦åæä»¬æä¸¤ä¸ªè®¾å¤ä¸ä¸ªæ¯Vlcæ­æ¾å¨ï¼ä¸ä¸ªæ¯Mp4æ­æ¾å¨ï¼ä¸ä¸ªéè¦ä½¿ç¨playVlcæé®æ¥æ­æ¾ï¼ä¸ä¸ªè¦ä½¿ç¨playMp4æ¥æ­æ¾ã\n\nclass VlcPlayer {\n    playVlc(fileName) {\n       console.log(\"Playing vlc file. Name: \"+ fileName);      \n    }\n}\nclass Mp4Player  {\n    playMp4(fileName) {\n        console.log(\"Playing mp4 file. Name: \"+ fileName);      \n    }\n}\n\n\nä½æ¯æå°±æ³éè¿ä¸ä¸ªæ­æ¾æé®æ¥æ­æ¾ï¼æä¸ç®¡ä»æ¯ä»ä¹æ­æ¾è®¾å¤ï¼è¿ä¸ªæ¶åï¼æä»¬å°±éè¦ä¸ä¸ªééå¨æ¥åè¿ä¸ªäºæã\n\nclass MediaAdapter {\n    constructor(audioType){\n        switch(audioType) {\n            case 'vlc':\n                MediaAdapter.advancedMusicPlayer = new VlcPlayer();\n                break;\n            case 'mp4':\n                MediaAdapter.advancedMusicPlayer = new Mp4Player();\n                break;\n        }\n    }\n    play(audioType, fileName) {\n        switch(audioType) {\n            case 'vlc':\n                MediaAdapter.advancedMusicPlayer.playVlc(fileName);\n                break;\n            case 'mp4':\n                MediaAdapter.advancedMusicPlayer.playMp4(fileName);\n                break;\n        }\n    }\n }\n\n\néè¿ééå¨æä»¬å¯ä»¥æåç§è®¾å¤æ¡¥æ¥å°ä¸ä¸ªé³é¢è®¾å¤ä¸ã\n\nclass AudioPlayer{\n    play(audioType, fileName) {\n        switch(audioType) {\n            case 'mp3':\n                console.log(\"Playing mp3 file. Name: \"+ fileName);\n                break;\n            case 'vlc':\n            case 'mp4':\n                    AudioPlayer.mediaAdapter = new MediaAdapter(audioType);\n                    AudioPlayer.mediaAdapter.play(audioType, fileName);\n                break;\n            default:\n                console.log(\"Invalid media. \"+\n                    audioType + \" format not supported\");\n                break;\n        }\n    }  \n }\n\n\né£ä¹è¿ä¸ªæ¶åæä»¬å°±å¯ä»¥ç´æ¥éè¿è¿ä¸ªé³é¢è®¾å¤æ¥æ­æ¾æä»¬æ³è¦æ­æ¾çé³é¢äº\n\nconst audioPlayer = new AudioPlayer();\n audioPlayer.play(\"mp3\", \"beyond the horizon.mp3\");\n audioPlayer.play(\"mp4\", \"alone.mp4\");\n audioPlayer.play(\"vlc\", \"far far away.vlc\");\n audioPlayer.play(\"avi\", \"mind me.avi\");\n  /**\n  * output:\n  * Playing mp3 file. Name: beyond the horizon.mp3\n  * Playing mp4 file. Name: alone.mp4\n  * Playing vlc file. Name: far far away.vlc\n  * Invalid media. avi format not supported\n  */\n\n\n\n# ééå¨æ¨¡å¼çä¼å¿\n\nå¯ä»¥è®©ä¸¤ä¸ªä¸åæ¥å£ä½ä¸ºä¸ä¸ªééçæ¥å£ä½¿ç¨ï¼è¿æ ·å¯¹ä¸å±çå³å¿å¯ä»¥åå°.\n\n\n# è£é¥°å¨æ¨¡å¼(Decorator Pattern)\n\nè£é¥°å¨æ¨¡å¼å®ç°äºä¸æ¹ååæå¯¹è±¡ï¼å¨åæå¯¹è±¡ä¸å®ç°åè½çæ·»å ãè¿æ¯ä¸ç§å¯¹åæå¯¹è±¡çä¸ç§åè£ã\n\n\n# è£é¥°å¨æ¨¡å¼çå®ä¾\n\nåè®¾ç°å¨æä¸¤ä¸ªå½¢ç¶ï¼ä¸ä¸ªç©å½¢ä¸ä¸ªåå½¢ï¼è¿æ¶åæä»¬å¸æè½å¨å½¢ç¶ä¸å®ç°ä¸äºç¹æ®çåè½ï¼ä½åä¸æ¹ååæ¥çç±»ï¼æä»¬è¦å¦ä½åå¢ï¼\n\nclass Rectangle {\n    draw() {\n       console.log(\"Shape: Rectangle\");\n    }\n}\nclass Circle {\n    draw() {\n       console.log(\"Shape: Circle\");\n    }\n}\n\n\nè¿æ¶æä»¬å¯ä»¥ç¨è£é¥°å¨æ¥å®ç°ï¼åè®¾æä»¬è¦ç»å½¢ç¶æ·»å é¢è²åè½\n\nclass RedShapeDecorator {\n    constructor(decoratedShape) {\n       this.decoratedShape = decoratedShape;    \n    }\n    draw() {\n       this.decoratedShape.draw();        \n       this.setRedBorder();\n    }\n    setRedBorder(){\n       console.log(\"Border Color: Red\");\n    }\n}\n\n\né£ä¹å¨ä½¿ç¨è£é¥°å¨çç±»ï¼å¨ç»åçæ¶åå°±å®ç°äºäºç»è¾¹æ¡çé¢è²ã\n\nconst circle = new Circle();\nconst redCircle = new RedShapeDecorator(new Circle());\nconst redRectangle = new RedShapeDecorator(new Rectangle());\nconsole.log(\"Circle with normal border\");\ncircle.draw();\nconsole.log(\"\\nCircle of red border\");\nredCircle.draw();\nconsole.log(\"\\nRectangle of red border\");\nredRectangle.draw();\n/**\n * output:\n * Circle with normal border\n * Shape: Circle\n * \n * Circle of red border\n * Shape: Circle\n * Border Color: Red\n * \n * Rectangle of red border\n * Shape: Rectangle\n * Border Color: Red\n */\n\n\n\n# è£é¥°å¨æ¨¡å¼çä¼å¿\n\nå³ä½¿åæå¯¹è±¡åçæ¹åï¼è£é¥°å¨æ¯ç§éä¾µå¥å¼åè½æ·»å ï¼å¯¹åæå¯¹è±¡çå½±åä¹è½éä½å°æå°ã\n\n\n# è¿æ»¤å¨æ¨¡å¼(Filter Pattern)\n\néè¿å¤ä¸ªåä¸çåè½ç­éæå»ºåºä¸ä¸ªå¤æçç­éåè½ã\n\n\n# è¿æ»¤å¨æ¨¡å¼çå®ä¾\n\né¦åå®ä¹ä¸ä¸ªå¯¹è±¡ï¼æä»¬åç»­å¯ä»¥éè¿åå­(name)ï¼æ§å«(gender)ï¼å©å§»ç¶åµ(maritalStatus)\n\n// å®ä¹å¯¹è±¡\nclass Person {\n    constructor(name, gender, maritalStatus){\n       this.name = name;\n       this.gender = gender;\n       this.maritalStatus = maritalStatus;    \n    }\n    getName() {\n       return this.name;\n    }\n    getGender() {\n       return this.gender;\n    }\n    getMaritalStatus() {\n       return this.maritalStatus;\n    }  \n}\n\n\nå®ä¹ä¸äºåä¸åè½çç­éæ¡ä»¶ï¼æ¯å¦åå¤æ­æ¯ç·ï¼æ¯å¥³ï¼æ¯ä¸æ¯åèº«ã\n\n// æ·»å ç­éæ¡ä»¶\nclass CriteriaMale {\n    meetCriteria(persons) {\n       const malePersons = [];\n       for (const person of persons) {\n          if(person.getGender().toUpperCase() == \"MALE\"){\n             malePersons.push(person);\n          }\n       }\n       return malePersons;\n    }\n}\nclass CriteriaFemale {\n    meetCriteria(persons) {\n       const femalePersons = [];\n       for (const person of persons) {\n          if(person.getGender().toUpperCase() == \"FEMALE\"){\n             femalePersons.push(person);\n          }\n       }\n       return femalePersons;\n    }\n}\nclass CriteriaSingle {\n    meetCriteria(persons) {\n       const singlePersons = [];\n       for (const person of persons) {\n          if(person.getMaritalStatus().toUpperCase() == \"SINGLE\"){\n             singlePersons.push(person);\n          }\n       }\n       return singlePersons;\n    }\n}\n\n\nå°åä¸åè½å¢å å¯¹åºçæä½ç¬¦ï¼ä½¿åä¸åè½ç­éæ¡ä»¶è½éè¿ç»åæ¥å®ç°å¤æçç­éã\n\n// æ·»å ç­éæä½ç¬¦\nclass AndCriteria {\n    constructor(criteria, otherCriteria) {\n       this.criteria = criteria;\n       this.otherCriteria = otherCriteria;\n    }\n    meetCriteria(persons) {\n       const firstCriteriaPersons = this.criteria.meetCriteria(persons);\n       return this.otherCriteria.meetCriteria(firstCriteriaPersons);\n    }\n }\n class OrCriteria{\n    constructor(criteria, otherCriteria) {\n       this.criteria = criteria;\n       this.otherCriteria = otherCriteria;\n    }\n    meetCriteria(persons) {\n       const firstCriteriaItems = this.criteria.meetCriteria(persons);\n       const otherCriteriaItems = this.otherCriteria.meetCriteria(persons);\n       for (const person of otherCriteriaItems) {\n          if(firstCriteriaItems.indexOf(person)==-1){\n            firstCriteriaItems.push(person);\n          }\n       }\n       return firstCriteriaItems;\n    }\n }\n\n\nä½¿ç¨åä¸ç­éæ¡ä»¶ææ¯ç»ååä¸ç­éæ¡ä»¶æ¥ç­éï¼è¾¾å°å¤æç­éç®ç\n\nfunction printPersons(persons){\n    for (const  person of persons) {\n       console.log(person);\n    }\n}\nconst persons = [];\npersons.push(new Person(\"Robert\",\"Male\", \"Single\"));\npersons.push(new Person(\"John\",\"Male\", \"Married\"));\npersons.push(new Person(\"Laura\",\"Female\", \"Married\"));\npersons.push(new Person(\"Diana\",\"Female\", \"Single\"));\npersons.push(new Person(\"Mike\",\"Male\", \"Single\"));\npersons.push(new Person(\"Bobby\",\"Male\", \"Single\"));\nconst male = new CriteriaMale();\nconst female = new CriteriaFemale();\nconst single = new CriteriaSingle();\nconst singleMale = new AndCriteria(single, male);\nconst singleOrFemale = new OrCriteria(single, female);\nconsole.log(\"Males: \");\nprintPersons(male.meetCriteria(persons));\nconsole.log(\"\\nFemales: \");\nprintPersons(female.meetCriteria(persons));\nconsole.log(\"\\nSingle Males: \");\nprintPersons(singleMale.meetCriteria(persons));\nconsole.log(\"\\nSingle Or Females: \");\nprintPersons(singleOrFemale.meetCriteria(persons));\n/**\n * output:\n * Males: \n * Person { name: 'Robert', gender: 'Male', maritalStatus: 'Single' }\n * Person { name: 'John', gender: 'Male', maritalStatus: 'Married' }\n * Person { name: 'Mike', gender: 'Male', maritalStatus: 'Single' }\n * Person { name: 'Bobby', gender: 'Male', maritalStatus: 'Single' }\n * \n * Females: \n * Person { name: 'Laura', gender: 'Female', maritalStatus: 'Married' }\n * Person { name: 'Diana', gender: 'Female', maritalStatus: 'Single' }\n * \n * Single Males: \n * Person { name: 'Robert', gender: 'Male', maritalStatus: 'Single' }\n * Person { name: 'Mike', gender: 'Male', maritalStatus: 'Single' }\n * Person { name: 'Bobby', gender: 'Male', maritalStatus: 'Single' }\n * \n * Single Or Females: \n * Person { name: 'Robert', gender: 'Male', maritalStatus: 'Single' }\n * Person { name: 'Diana', gender: 'Female', maritalStatus: 'Single' }\n * Person { name: 'Mike', gender: 'Male', maritalStatus: 'Single' }\n * Person { name: 'Bobby', gender: 'Male', maritalStatus: 'Single' }\n * Person { name: 'Laura', gender: 'Female', maritalStatus: 'Married' }\n */\n\n\n\n# è¿æ»¤å¨æ¨¡å¼ä¼å¿\n\nå¨éè¦åç±»çç­éçæ¶åï¼éè¿æ¯æ¬¡åä¸åè½çç­éï¼ååèåè½æå¤§çéä½ç­éåè½çå¤ææ§ã",normalizedContent:"# è®¾è®¡æ¨¡å¼\n\njavascript è®¾è®¡æ¨¡å¼ï¼è®¾è®¡æ¨¡å¼æ¯ä¸ç§ææ³ï¼åè¯­è¨æ å³ã\n\n * å¼åæç\n * å¯ç»´æ¤æ§\n\nç¸å³ä¹¦ç±\n\n * ãå¤§è¯è®¾è®¡æ¨¡å¼ã\n * ãè®¾è®¡æ¨¡å¼ï¼å¯æç¨é¢åå¯¹è±¡è½¯ä»¶çåºç¡ã\n * ãheadfirst è®¾è®¡æ¨¡å¼ã\n * ãjavascript è®¾è®¡æ¨¡å¼ã\n * ãjavascriptä¸­çè®¾è®¡æ¨¡å¼ã\n\n\n# é¢åå¯¹è±¡ç javascript\n\n * ç±»\n * å®ä¾\n * æé å½æ°\n * ç»§æ¿\n * å¤æ\n * å°è£\n * åå\n * classè¯­æ³\n * å·ä½çé¢åå¯¹è±¡ç¼ç¨\n\n\n# è®¾è®¡æ¨¡å¼\n\n * åå»ºåæ¨¡å¼\n   \n   * å·¥åæ¨¡å¼\n   * æ½è±¡å·¥åæ¨¡å¼\n   * åä¾æ¨¡å¼\n   * å»ºé èæ¨¡å¼\n   * ååæ¨¡å¼\n\n * ç»æåæ¨¡å¼\n   \n   * ééå¨æ¨¡å¼\n   * æ¡¥æ¥æ¨¡å¼\n   * è¿æ»¤å¨æ¨¡å¼\n   * ç»åæ¨¡å¼\n   * è£é¥°å¨æ¨¡å¼\n   * å¤è§æ¨¡å¼\n   * äº«åæ¨¡å¼\n   * ä»£çæ¨¡å¼\n\n * è¡ä¸ºåæ¨¡å¼\n   \n   * è´£ä»»é¾æ¨¡å¼\n   * å½ä»¤æ¨¡å¼\n   * è§£éå¨æ¨¡å¼\n   * è¿­ä»£å¨æ¨¡å¼\n   * ä¸­ä»èæ¨¡å¼\n   * å¤å¿å½æ¨¡å¼\n   * è§å¯èæ¨¡å¼\n   * ç¶ææ¨¡å¼\n   * ç©ºå¯¹è±¡æ¨¡å¼\n   * ç­ç¥æ¨¡å¼\n   * æ¨¡æ¿æ¨¡å¼\n   * è®¿é®èæ¨¡å¼\n\n * ééå¨æ¨¡å¼\n\n * è£é¥°å¨æ¨¡å¼\n\n\n# å·¥åæ¨¡å¼(factory pattern)\n\nå·¥åæ¨¡å¼æ¯æ¯è¾å¸¸ç¨çè®¾è®¡æ¨¡å¼ä¹ä¸ï¼é£ä¹ä»ä¹å«å·¥åæ¨¡å¼å¢ï¼ç®åæ¥è¯´ï¼å°±æ¯ä½ éè¦ä»ä¹ä¸è¥¿ä¸ç´æ¥ä½¿ç¨newçæ¹æ³çæå®ä¾ï¼ç¶åç»ä¸éè¿å·¥åè¿è¡çäº§å å·¥åçæå®ä¾ã\n\n\n# å·¥åæ¨¡å¼çå®ä¾\n\næ¯å¦æä»¬ç°å¨æå¾å¤å½¢ç¶æ¯å¦åå½¢ï¼ç©å½¢åæ­£æ¹å½¢ãè¿ç±»é½æ¯å±äºå½¢ç¶ï¼é£æä»¬æ¯ä¸æ¯å¯ä»¥éè¿ä¸é¨çäº§å½¢ç¶çå·¥åæ¥çæå®ä»¬çå®ä¾ä¹ï¼\n\nclass circle {\n    draw() {\n        console.log(\"i'm a circle\")\n    }\n}\nclass rectangle {\n    draw() {\n        console.log(\"i'm a rectangle\")\n    }\n}\nclass square {\n    draw() {\n        console.log(\"i'm a square\")\n    }\n}\n\n\né£ä¹æ¥ä¸æ¥ï¼æä»¬å¯ä»¥å»ºç«ä¸ä¸ªä¸é¨çäº§å½¢ç¶çå·¥åæ¥çäº§å®ä»¬äºãå³æ ¹æ®å­ç¬¦ä¸²æ¥äº§çå¯¹åºéè¦çç±»ãä½ å¨è¿éå¯ä»¥çå°ç±»çåºå£é½å·²ç»å¨ä¸ä¸ªæ¹æ³ä¸­äºã\n\nclass shapefactory {\n    getshape(shapetype){\n        switch(shapetype) {\n            case 'circle':\n                return new circle();\n            case 'rectangle':\n                return new rectangle();\n            case 'square':\n                return new square();\n            default:\n                return null;\n        }\n    }\n}\n\n\né£ä¹æä»¬éè¦ä½¿ç¨çæ¶åï¼å°±å¯ä»¥ç´æ¥åªéè¦newåºä¸ä¸ªå·¥åï¼å¨æ ¹æ®å­ç¬¦ä¸²å°±è½æ¿å°å¯¹åºçéè¦çäº§çç±»äºãèä¸éè¦åå«å¯¹ç±»è¿è¡newã\n\nconst shapefactory = new shapefactory();\n// éè¿å·¥åæ¿åç§å½¢ç¶\nconst shape1 = shapefactory.getshape('circle');\nshape1.draw();\nconst shape2 = shapefactory.getshape('rectangle');\nshape2.draw();\nconst shape3 = shapefactory.getshape('square');\nshape3.draw();\n/**\n * output:\n * i'm a circle\n * i'm a rectangle\n * i'm a square\n */\n\n\n\n# å·¥åæ¨¡å¼çä¼å¿\n\né£ä¹ä½¿ç¨å·¥åæ¨¡å¼çå¥½å¤ä¹æ¯æ¾èæè§çï¼æ¯å¦å®ä¾ççäº§æ¯è¾å¤æï¼æèè¯´çæå®ä¾åè¿éè¦é¢å¤å å·¥ï¼è¿ä¸ªæ¶åå·¥åç»äºæä»¬ä¸ä¸ªç»ä¸çåºå¥å£ï¼ä¹æ¹ä¾¿äºæ¥åå¯¹è¿ä¸ªå®ä¾çä¿®æ¹ãæ¯å¦ä½ è¦ä¿®æ¹å·¥åäº§åºæ¯ä¸ä¸ªåä¾çæ¶åï¼å°±ä¸éè¦å¨ææçç±»ä¸­ä¿®æ¹ï¼èåªè¦å¨å·¥ååºå£ä¿®æ¹å³å¯è¾¾å°ç®æ ã\n\n\n# æ½è±¡å·¥åæ¨¡å¼(abstract factory pattern)\n\nä¸æè®²å°äºå·¥åæ¨¡å¼ï¼è¿ç¯æç« å°æ½è±¡å·¥åï¼æ½è±¡å·¥åçåå­æ¯ççå¾æ½è±¡ï¼ä¹å¾å®¹æè®©äººæ½è±¡ççè§£ï¼é£ä¹ä»ä¹æ¯æ½è±¡å·¥åå¢ï¼\n\nå¶å®æ½è±¡å·¥åï¼ç®åæ¥è¯´å°±æ¯å·¥åçå·¥åï¼å ä¸ºä¸è¬æ¥è¯´ä¸ä¸ªå·¥ååªè´è´£å è½½ä¸ç±»ç»ä»¶ï¼é£ä¹ä½ æå¾å¤å°ç±»ç»ä»¶éè¦çäº§ï¼é£ä¹å¿å¿ä¼æå¾å¤å°ç±»çå·¥åãé£ä¹ä½ æç»çäº§ä¸ä¸ªå¤§ç±»ï¼é£å°±è¦å¾å¤å°ç±»çå·¥åè´è´£çäº§ãé£ä¹å¦ä½æ´æ¹ä¾¿çç®¡çæèè¯´çäº§è¿äºå·¥åå¢ï¼é£å°±ç¨çäº§å·¥åçå·¥åæ¥çæå§ã\n\n\n# æ½è±¡å·¥åæ¨¡å¼çå®ä¾\n\nåæä¸æè¯´çå½¢ç¶å·¥åæ¬è¿æ¥\n\n// è¿æ¯ä¹åä¸æè¯´çå½¢ç¶å·¥å\nclass circle {\n    draw() {\n        console.log(\"i'm a circle\")\n    }\n}\nclass rectangle {\n    draw() {\n        console.log(\"i'm a rectangle\")\n    }\n}\nclass square {\n    draw() {\n        console.log(\"i'm a square\")\n    }\n}\nclass shapefactory {\n    getshape(shapetype){\n        switch(shapetype) {\n            case 'circle':\n                return new circle();\n            case 'rectangle':\n                return new rectangle();\n            case 'square':\n                return new square();\n            default:\n                return null;\n        }\n    }\n}\n\n\nè¿æ¶åä½ å·²ç»æå½¢ç¶äºï¼ä½ä½ è§å¾ä¸ç¾è§ï¼ä½ è¿éè¦é¢è²ï¼é£ä¹ä½ è¿ä¸ªæ¶åï¼ä½ åæäºä¸ªé¢è²å·¥åï¼å¦ä¸ï¼\n\n// åæ°å ä¸ä¸ªé¢è²å·¥å\nclass red {\n    fill() {\n        console.log(\"fill red\")\n    }\n}\nclass blue {\n    fill() {\n        console.log(\"fill blue\")\n    }\n}\nclass green {\n    fill() {\n        console.log(\"fill green\")\n    }\n}\nclass colorfactory {\n    getcolor(color){\n        switch(color) {\n            case 'red':\n                return new red();\n            case 'blue':\n                return new blue();\n            case 'green':\n                return new green();\n            default:\n                return null;\n        }\n    }\n}\n\n\né¢è²å·¥åå¥½äºï¼ä½æ¯ä½ æå¿ï¼ä»¥åå·¥åå¤äºï¼ä¸å¥½ç®¡çååï¼é£è¿æ¯èµ°ä¹åçå¥è·¯ï¼æå·¥åéè¿æ½è±¡å·¥åçäº§åºæ¥ãå¦ä¸ï¼\n\n// æåæ·»å æ½è±¡å·¥å\nclass factoryproducer {\n    static getfactory(choice){\n        switch(choice) {\n            case 'shape':\n                return new shapefactory();\n            case 'color':\n                return new colorfactory();\n            default:\n                return null;\n        }\n    }\n}\n\n\né£ä¹è¿ä¸ªæ¶ååä¸æä¸æ ·åªéè¦newåºä¸ä¸ªæ½è±¡å·¥åï¼å°±è½æææéè¦çä¸è¥¿æ¿å°æäº:\n\n//éè¿æ½è±¡å·¥åæ¿å½¢ç¶å·¥å\nconst shapefactory = factoryproducer.getfactory('shape');\n// éè¿å·¥åæ¿åç§å½¢ç¶\nconst shape1 = shapefactory.getshape('circle');\nshape1.draw();\nconst shape2 = shapefactory.getshape('rectangle');\nshape2.draw();\nconst shape3 = shapefactory.getshape('square');\nshape3.draw();\n//éè¿æ½è±¡å·¥åæ¿é¢è²å·¥å\nconst colorfactory = factoryproducer.getfactory('color');\n// éè¿å·¥åæ¿åç§é¢è²\nconst color1 = colorfactory.getcolor('red');\ncolor1.fill();\nconst color2 = colorfactory.getcolor('blue');\ncolor2.fill();\nconst color3 = colorfactory.getcolor('green');\ncolor3.fill();\n/**\n * outputï¼\n * i'm a circle\n * i'm a rectangle\n * i'm a square\n * fill red\n * fill blue\n * fill green\n */\n\n\n\n# æ½è±¡å·¥åæ¨¡å¼çä¼å¿\n\né£ä¹ä½¿ç¨æ½è±¡å·¥åæ¨¡å¼çå¥½å¤åå·¥åæ¨¡å¼çå¥½å¤å¾ç¸ä¼¼ï¼ç»å·¥ååäºä¸ä¸ªç»ä¸çåºå¥å£ï¼ä¹æ¹ä¾¿äºæ¥åå¯¹è¿ä¸ªå·¥åçä¿®æ¹ã\n\n\n# åä¾æ¨¡å¼(singleton pattern)\n\nä»ä¹å«åä¾æ¨¡å¼ï¼ç®åæ¥è¯´å°±æ¯ä¸ä¸ªå®ä¾åªçäº§ä¸æ¬¡ã\n\n\n# åä¾æ¨¡å¼çå®ä¾\n\nè¿ä¸ªå¾ç®åï¼æè§å¾å¯ä»¥ç´æ¥çä»£ç ã\n\nè¿æ¯ä¸ç§âææ±å¼âåæ³ï¼è¿æä¸ç§å«é¥¿æ±å¼åæ³ï¼åºå«æ¯ææ±ä½¿ç¨æ¶æåå§åï¼é¥¿æ±åååå§åï¼ç¨çæ¶åç´æ¥ç»ã\n\nç±äºjsä¸éè¦èèçº¿ç¨å®å¨ï¼æä»¥æ¨èä½¿ç¨ææ±å¼åæ³ï¼é¥¿æ±å¨jsä¸­åèå®¹æäº§çæ²¡å¿è¦çåå¾ã\n\n> æ°æ§åä¾æ¯æå¨éè¦çæ¶åæåå»º\n\nclass singleobject {\n    constructor() {\n        // é²æ­¢è°ç¨newåå§å\n        if(new.target != undefined) {\n            const errormsg = \"this is single object,can't use keyword new!\";\n            const tipmsg = \"you should use method getinstance to get instanceã\";\n            throw new error(`\\n${errormsg}\\n${tipmsg}`)\n        }\n    }\n    static getinstance(){\n        // çäº§åä¾\n        if(singleobject.instance) {\n            return singleobject.instance;\n        }\n        singleobject.instance = {};\n        singleobject.instance.__proto__ = singleobject.prototype;\n        return singleobject.instance;\n    }\n    showmessage(){\n       console.log(\"hello world!\");\n    }\n}\nconst instance = singleobject.getinstance();\ninstance.showmessage();\n/**\n * output:\n * hello world!\n */\n\n\n\n# åä¾æ¨¡å¼çä¼å¿\n\nå¯¹äºé¢ç¹ä½¿ç¨ä¸å¯éå¤ä½¿ç¨çå¯¹è±¡ï¼å¯ä»¥æå¤§æ¥åå°åå­æ¶èåæ²¡å¿è¦çåå¾åæ¶ã\n\n\n# åä¾æ¨¡å¼çä½¿ç¨åºæ¯\n\nå¨ä¸ä¸ªç³»ç»ä¸­ï¼è¦æ±ä¸ä¸ªç±»æä¸ä»æä¸ä¸ªå¯¹è±¡ï¼å¦æåºç°å¤ä¸ªå¯¹è±¡å°±ä¼åºç°âä¸è¯ååºâï¼å¯ä»¥éç¨åä¾æ¨¡å¼ï¼å·ä½çåºæ¯å¦ä¸ï¼\n\n * å¨æ´ä¸ªé¡¹ç®ä¸­éè¦ä¸ä¸ªå±äº«è®¿é®ç¹æå±äº«æ°æ®ï¼ä¾å¦ä¸ä¸ªwebä¸çè®¡æ°å¨ï¼å¯ä»¥ä¸ç¨æ¯æ¬¡æå·æ°é½è®°å½å°æ°æ®åºä¸­ï¼ä½¿ç¨åä¾æ¨¡å¼ä¿æè®¡æ°å¨çå¼ï¼å¹¶ç¡®ä¿æ¯çº¿ç¨å®å¨çï¼\n * éè¦å®ä¹å¤§éçéæå¸¸éåéææ¹æ³ï¼å¦å·¥å·ç±»ï¼çç¯å¢ï¼å¯ä»¥éç¨åä¾æ¨¡å¼ï¼å½ç¶ï¼ä¹å¯ä»¥ç´æ¥å£°æä¸ºstaticçæ¹å¼ï¼ã\n * å¨é¡¹ç®å¼åæ¶æä¸äºå¯¹è±¡å¶å®æä»¬åªéè¦ä¸ä¸ªï¼æ¯å¦ï¼çº¿ç¨æ± ãç¼å­ãæ¥å¿å¯¹è±¡ç­ç­ã\n\n\n# å»ºé èæ¨¡å¼\n\nå¨è½¯ä»¶ç³»ç»ä¸­ï¼ææ¶åé¢ä¸´çâä¸ä¸ªå¤æå¯¹è±¡âçåå»ºå·¥ä½ï¼å¶éå¸¸ç±åä¸ªé¨åçå­å¯¹è±¡ç¨ä¸å®çç®æ³ææï¼ç±äºéæ±çååï¼è¿ä¸ªå¤æå¯¹è±¡çåä¸ªé¨åç»å¸¸é¢ä¸´çå§ççååï¼ä½æ¯å°å®ä»¬ç»åå¨ä¸èµ·çç®æ³ç¡®ç¸å¯¹ç¨³å®ãå¦ä½åºå¯¹è¿ç§ååï¼å¦ä½æä¾ä¸ç§âå°è£æºå¶âæ¥éç¦»åºâå¤æå¯¹è±¡çåä¸ªé¨åâçååï¼ä»èä¿æç³»ç»ä¸­çâç¨³å®æå»ºç®æ³âä¸éçéæ±æ¹åèæ¹åï¼è¿å°±æ¯è¦è¯´çå»ºé èæ¨¡å¼ã\n\nå»ºé èæ¨¡å¼(builder pattern)ï¼å°ä¸ä¸ªå¤æå¯¹è±¡çæå»ºå±ä¸å¶è¡¨ç¤ºå±ç¸äºåç¦»ï¼ä½¿å¾åæ ·çæå»ºè¿ç¨å¯ä»¥éç¨ä¸åçè¡¨ç¤ºãä¹å°±æ¯è¯´å¦ææä»¬ç¨äºå»ºé èæ¨¡å¼ï¼é£ä¹ç¨æ·å°±éè¦æå®éè¦å»ºé çç±»åå°±å¯ä»¥å¾å°å®ä»¬ï¼èå·ä½å»ºé çè¿ç¨åç»èå°±ä¸éè¦ç¥éäºã\n\nå¨å·¥åæ¨¡å¼ä¸­ï¼å¯¹åå»ºçç»æé½æ¯ä¸ä¸ªå®æ´çä¸ªä½ï¼æä»¬å¯¹åè§çè¿ç¨ä¸ä¸ºæç¥ï¼åªäºè§£åå»ºçç»æå¯¹è±¡ãèå¨å»ºé èæ¨¡å¼ä¸­æä»¬å³å¿çæ¯å¯¹è±¡çåå»ºè¿ç¨ï¼å æ­¤æä»¬éå¸¸å°åå»ºå¯¹è±¡çç±»æ¨¡ååï¼è¿æ ·ä½¿è¢«åå»ºçç±»çæ¯ä¸ä¸ªæ¨¡åé½å¯ä»¥å¾å°çµæ´»çè¿ç¨åé«è´¨éçå¤ç¨ã\n\n\n# ç½è¯è§£é\n\n> å¨å»ºé èæ¨¡å¼éï¼æä¸ªæå¯¼è(director)ï¼ç±æå¯¼èæ¥ç®¡çå»ºé èï¼ç¨æ·æ¯ä¸æå¯¼èèç³»çï¼æå¯¼èèç³»å»ºé èæåå¾å°äº§åãå³å»ºé èæ¨¡å¼å¯ä»¥å¼ºå¶å®è¡ä¸ç§åæ­¥éª¤è¿è¡çå»ºé è¿ç¨ã\n\n    //äº§åââäº§åç±»\n    function product(){\n        this.design = \"\";\n        this.db = \"\";\n        this.front = \"\";\n        this.back = \"\";\n    }\n    //äº§åç»çââæå¯¼ç±»\n    function productmanager(){\n        this.startwork = function(engineer){\n            engineer.productdesign();\n            engineer.frontend();\n            engineer.backend();\n            engineer.dbmanageer();\n        }\n    }\n    //å·¥ç¨å¸ââå»ºé èç±»\n    function engineer(){\n        this.productdesign = function(){\n            console.log(\"äº§åè®¾è®¡å¥½äº\");\n        };\n        this.dbmanageer = function(){\n            console.log(\"æ°æ®åºè®¾è®¡å¥½äº\");\n        };\n        this.backend = function(){\n            console.log(\"åå°åå¥½äº\");\n        };\n        this.frontend = function(){\n            console.log(\"åå°åå¥½äº\");\n        };\n        this.done = function(){\n            var product = new product();\n            product.design = \"done\";\n            product.db = \"done\";\n            product.back = \"done\";\n            product.front = \"done\";\n            return product;\n        }\n    }\n\n\t\tlet engineer = new engineer()\n    let productmanager = new productmanager()\n    productmanager.startwork(engineer)\n\t\t// äº§åè®¾è®¡å¥½äº\n    // åå°åå¥½äº\n\t\t// åå°åå¥½äº\n\t\t// æ°æ®åºè®¾è®¡å¥½äº\n\t\tlet product = engineer.done()\n\t\tconsole.log(product)\n\t\t/**\n\t\t\tproduct\n        back: \"done\"\n        db: \"done\"\n        design: \"done\"\n        front: \"done\"\n\t\t*/\n\n\n\n# ééå¨æ¨¡å¼(adapter pattern)\n\nééå¨æ¨¡å¼æ¯ä½ä¸ºä¸¤ä¸ªä¸åæ¥å£çä¸ç§èåï¼ææ¯å¦è¯´sdå¡ééå¨ï¼æ è®ºä½¿ç¨tfæsdå¡æèå¶å®å¡ï¼å¯¹å¤è¾åºé½æ¯usbæ¥å£ã\n\n\n# ééå¨æ¨¡å¼çå®ä¾\n\né¦åæä»¬æä¸¤ä¸ªè®¾å¤ä¸ä¸ªæ¯vlcæ­æ¾å¨ï¼ä¸ä¸ªæ¯mp4æ­æ¾å¨ï¼ä¸ä¸ªéè¦ä½¿ç¨playvlcæé®æ¥æ­æ¾ï¼ä¸ä¸ªè¦ä½¿ç¨playmp4æ¥æ­æ¾ã\n\nclass vlcplayer {\n    playvlc(filename) {\n       console.log(\"playing vlc file. name: \"+ filename);      \n    }\n}\nclass mp4player  {\n    playmp4(filename) {\n        console.log(\"playing mp4 file. name: \"+ filename);      \n    }\n}\n\n\nä½æ¯æå°±æ³éè¿ä¸ä¸ªæ­æ¾æé®æ¥æ­æ¾ï¼æä¸ç®¡ä»æ¯ä»ä¹æ­æ¾è®¾å¤ï¼è¿ä¸ªæ¶åï¼æä»¬å°±éè¦ä¸ä¸ªééå¨æ¥åè¿ä¸ªäºæã\n\nclass mediaadapter {\n    constructor(audiotype){\n        switch(audiotype) {\n            case 'vlc':\n                mediaadapter.advancedmusicplayer = new vlcplayer();\n                break;\n            case 'mp4':\n                mediaadapter.advancedmusicplayer = new mp4player();\n                break;\n        }\n    }\n    play(audiotype, filename) {\n        switch(audiotype) {\n            case 'vlc':\n                mediaadapter.advancedmusicplayer.playvlc(filename);\n                break;\n            case 'mp4':\n                mediaadapter.advancedmusicplayer.playmp4(filename);\n                break;\n        }\n    }\n }\n\n\néè¿ééå¨æä»¬å¯ä»¥æåç§è®¾å¤æ¡¥æ¥å°ä¸ä¸ªé³é¢è®¾å¤ä¸ã\n\nclass audioplayer{\n    play(audiotype, filename) {\n        switch(audiotype) {\n            case 'mp3':\n                console.log(\"playing mp3 file. name: \"+ filename);\n                break;\n            case 'vlc':\n            case 'mp4':\n                    audioplayer.mediaadapter = new mediaadapter(audiotype);\n                    audioplayer.mediaadapter.play(audiotype, filename);\n                break;\n            default:\n                console.log(\"invalid media. \"+\n                    audiotype + \" format not supported\");\n                break;\n        }\n    }  \n }\n\n\né£ä¹è¿ä¸ªæ¶åæä»¬å°±å¯ä»¥ç´æ¥éè¿è¿ä¸ªé³é¢è®¾å¤æ¥æ­æ¾æä»¬æ³è¦æ­æ¾çé³é¢äº\n\nconst audioplayer = new audioplayer();\n audioplayer.play(\"mp3\", \"beyond the horizon.mp3\");\n audioplayer.play(\"mp4\", \"alone.mp4\");\n audioplayer.play(\"vlc\", \"far far away.vlc\");\n audioplayer.play(\"avi\", \"mind me.avi\");\n  /**\n  * output:\n  * playing mp3 file. name: beyond the horizon.mp3\n  * playing mp4 file. name: alone.mp4\n  * playing vlc file. name: far far away.vlc\n  * invalid media. avi format not supported\n  */\n\n\n\n# ééå¨æ¨¡å¼çä¼å¿\n\nå¯ä»¥è®©ä¸¤ä¸ªä¸åæ¥å£ä½ä¸ºä¸ä¸ªééçæ¥å£ä½¿ç¨ï¼è¿æ ·å¯¹ä¸å±çå³å¿å¯ä»¥åå°.\n\n\n# è£é¥°å¨æ¨¡å¼(decorator pattern)\n\nè£é¥°å¨æ¨¡å¼å®ç°äºä¸æ¹ååæå¯¹è±¡ï¼å¨åæå¯¹è±¡ä¸å®ç°åè½çæ·»å ãè¿æ¯ä¸ç§å¯¹åæå¯¹è±¡çä¸ç§åè£ã\n\n\n# è£é¥°å¨æ¨¡å¼çå®ä¾\n\nåè®¾ç°å¨æä¸¤ä¸ªå½¢ç¶ï¼ä¸ä¸ªç©å½¢ä¸ä¸ªåå½¢ï¼è¿æ¶åæä»¬å¸æè½å¨å½¢ç¶ä¸å®ç°ä¸äºç¹æ®çåè½ï¼ä½åä¸æ¹ååæ¥çç±»ï¼æä»¬è¦å¦ä½åå¢ï¼\n\nclass rectangle {\n    draw() {\n       console.log(\"shape: rectangle\");\n    }\n}\nclass circle {\n    draw() {\n       console.log(\"shape: circle\");\n    }\n}\n\n\nè¿æ¶æä»¬å¯ä»¥ç¨è£é¥°å¨æ¥å®ç°ï¼åè®¾æä»¬è¦ç»å½¢ç¶æ·»å é¢è²åè½\n\nclass redshapedecorator {\n    constructor(decoratedshape) {\n       this.decoratedshape = decoratedshape;    \n    }\n    draw() {\n       this.decoratedshape.draw();        \n       this.setredborder();\n    }\n    setredborder(){\n       console.log(\"border color: red\");\n    }\n}\n\n\né£ä¹å¨ä½¿ç¨è£é¥°å¨çç±»ï¼å¨ç»åçæ¶åå°±å®ç°äºäºç»è¾¹æ¡çé¢è²ã\n\nconst circle = new circle();\nconst redcircle = new redshapedecorator(new circle());\nconst redrectangle = new redshapedecorator(new rectangle());\nconsole.log(\"circle with normal border\");\ncircle.draw();\nconsole.log(\"\\ncircle of red border\");\nredcircle.draw();\nconsole.log(\"\\nrectangle of red border\");\nredrectangle.draw();\n/**\n * output:\n * circle with normal border\n * shape: circle\n * \n * circle of red border\n * shape: circle\n * border color: red\n * \n * rectangle of red border\n * shape: rectangle\n * border color: red\n */\n\n\n\n# è£é¥°å¨æ¨¡å¼çä¼å¿\n\nå³ä½¿åæå¯¹è±¡åçæ¹åï¼è£é¥°å¨æ¯ç§éä¾µå¥å¼åè½æ·»å ï¼å¯¹åæå¯¹è±¡çå½±åä¹è½éä½å°æå°ã\n\n\n# è¿æ»¤å¨æ¨¡å¼(filter pattern)\n\néè¿å¤ä¸ªåä¸çåè½ç­éæå»ºåºä¸ä¸ªå¤æçç­éåè½ã\n\n\n# è¿æ»¤å¨æ¨¡å¼çå®ä¾\n\né¦åå®ä¹ä¸ä¸ªå¯¹è±¡ï¼æä»¬åç»­å¯ä»¥éè¿åå­(name)ï¼æ§å«(gender)ï¼å©å§»ç¶åµ(maritalstatus)\n\n// å®ä¹å¯¹è±¡\nclass person {\n    constructor(name, gender, maritalstatus){\n       this.name = name;\n       this.gender = gender;\n       this.maritalstatus = maritalstatus;    \n    }\n    getname() {\n       return this.name;\n    }\n    getgender() {\n       return this.gender;\n    }\n    getmaritalstatus() {\n       return this.maritalstatus;\n    }  \n}\n\n\nå®ä¹ä¸äºåä¸åè½çç­éæ¡ä»¶ï¼æ¯å¦åå¤æ­æ¯ç·ï¼æ¯å¥³ï¼æ¯ä¸æ¯åèº«ã\n\n// æ·»å ç­éæ¡ä»¶\nclass criteriamale {\n    meetcriteria(persons) {\n       const malepersons = [];\n       for (const person of persons) {\n          if(person.getgender().touppercase() == \"male\"){\n             malepersons.push(person);\n          }\n       }\n       return malepersons;\n    }\n}\nclass criteriafemale {\n    meetcriteria(persons) {\n       const femalepersons = [];\n       for (const person of persons) {\n          if(person.getgender().touppercase() == \"female\"){\n             femalepersons.push(person);\n          }\n       }\n       return femalepersons;\n    }\n}\nclass criteriasingle {\n    meetcriteria(persons) {\n       const singlepersons = [];\n       for (const person of persons) {\n          if(person.getmaritalstatus().touppercase() == \"single\"){\n             singlepersons.push(person);\n          }\n       }\n       return singlepersons;\n    }\n}\n\n\nå°åä¸åè½å¢å å¯¹åºçæä½ç¬¦ï¼ä½¿åä¸åè½ç­éæ¡ä»¶è½éè¿ç»åæ¥å®ç°å¤æçç­éã\n\n// æ·»å ç­éæä½ç¬¦\nclass andcriteria {\n    constructor(criteria, othercriteria) {\n       this.criteria = criteria;\n       this.othercriteria = othercriteria;\n    }\n    meetcriteria(persons) {\n       const firstcriteriapersons = this.criteria.meetcriteria(persons);\n       return this.othercriteria.meetcriteria(firstcriteriapersons);\n    }\n }\n class orcriteria{\n    constructor(criteria, othercriteria) {\n       this.criteria = criteria;\n       this.othercriteria = othercriteria;\n    }\n    meetcriteria(persons) {\n       const firstcriteriaitems = this.criteria.meetcriteria(persons);\n       const othercriteriaitems = this.othercriteria.meetcriteria(persons);\n       for (const person of othercriteriaitems) {\n          if(firstcriteriaitems.indexof(person)==-1){\n            firstcriteriaitems.push(person);\n          }\n       }\n       return firstcriteriaitems;\n    }\n }\n\n\nä½¿ç¨åä¸ç­éæ¡ä»¶ææ¯ç»ååä¸ç­éæ¡ä»¶æ¥ç­éï¼è¾¾å°å¤æç­éç®ç\n\nfunction printpersons(persons){\n    for (const  person of persons) {\n       console.log(person);\n    }\n}\nconst persons = [];\npersons.push(new person(\"robert\",\"male\", \"single\"));\npersons.push(new person(\"john\",\"male\", \"married\"));\npersons.push(new person(\"laura\",\"female\", \"married\"));\npersons.push(new person(\"diana\",\"female\", \"single\"));\npersons.push(new person(\"mike\",\"male\", \"single\"));\npersons.push(new person(\"bobby\",\"male\", \"single\"));\nconst male = new criteriamale();\nconst female = new criteriafemale();\nconst single = new criteriasingle();\nconst singlemale = new andcriteria(single, male);\nconst singleorfemale = new orcriteria(single, female);\nconsole.log(\"males: \");\nprintpersons(male.meetcriteria(persons));\nconsole.log(\"\\nfemales: \");\nprintpersons(female.meetcriteria(persons));\nconsole.log(\"\\nsingle males: \");\nprintpersons(singlemale.meetcriteria(persons));\nconsole.log(\"\\nsingle or females: \");\nprintpersons(singleorfemale.meetcriteria(persons));\n/**\n * output:\n * males: \n * person { name: 'robert', gender: 'male', maritalstatus: 'single' }\n * person { name: 'john', gender: 'male', maritalstatus: 'married' }\n * person { name: 'mike', gender: 'male', maritalstatus: 'single' }\n * person { name: 'bobby', gender: 'male', maritalstatus: 'single' }\n * \n * females: \n * person { name: 'laura', gender: 'female', maritalstatus: 'married' }\n * person { name: 'diana', gender: 'female', maritalstatus: 'single' }\n * \n * single males: \n * person { name: 'robert', gender: 'male', maritalstatus: 'single' }\n * person { name: 'mike', gender: 'male', maritalstatus: 'single' }\n * person { name: 'bobby', gender: 'male', maritalstatus: 'single' }\n * \n * single or females: \n * person { name: 'robert', gender: 'male', maritalstatus: 'single' }\n * person { name: 'diana', gender: 'female', maritalstatus: 'single' }\n * person { name: 'mike', gender: 'male', maritalstatus: 'single' }\n * person { name: 'bobby', gender: 'male', maritalstatus: 'single' }\n * person { name: 'laura', gender: 'female', maritalstatus: 'married' }\n */\n\n\n\n# è¿æ»¤å¨æ¨¡å¼ä¼å¿\n\nå¨éè¦åç±»çç­éçæ¶åï¼éè¿æ¯æ¬¡åä¸åè½çç­éï¼ååèåè½æå¤§çéä½ç­éåè½çå¤ææ§ã",charsets:{cjk:!0}},{title:"commanderåInquirer",frontmatter:{},regularPath:"/engineering/commander.html",relativePath:"engineering/commander.md",key:"v-02e836bf",path:"/engineering/commander.html",headers:[{level:2,title:"commander",slug:"commander",normalizedTitle:"commander",charIndex:2},{level:3,title:"program åé",slug:"program-åé",normalizedTitle:"program åé",charIndex:125},{level:3,title:"version",slug:"version",normalizedTitle:"version",charIndex:357},{level:3,title:"option",slug:"option",normalizedTitle:"option",charIndex:489},{level:2,title:"Inquirer",slug:"inquirer",normalizedTitle:"inquirer",charIndex:12}],lastUpdated:"3/29/2022, 12:21:20 PM",lastUpdatedTimestamp:164852768e4,headersStr:"commander program åé version option Inquirer",content:"# commanderåInquirer\n\næ¬æä¸»è¦ä»ç» node å½ä»¤è¡çäº¤äºå·¥å· commanderï¼å¤çå½ä»¤è¡åæ°ï¼ å inquirerï¼å¤çé®é¢äº¤äºï¼\n\n\n# commander\n\nå®æ´ç node.js å½ä»¤è¡è§£å³æ¹æ¡ï¼å®æ¹ææ¡£\n\n\n# program åé\n\nä¸ºç®åä½¿ç¨ï¼Commander æä¾äºä¸ä¸ªå¨å±å¯¹è±¡ program\n\nconst { program } = require('commander');\n\n\nå¦æç¨åºè¾ä¸ºå¤æï¼ç¨æ·éè¦ä»¥å¤ç§æ¹å¼æ¥ä½¿ç¨ Commanderï¼å¦ååæµè¯ç­ãåå»ºæ¬å°Commandå¯¹è±¡æ¯ä¸ç§æ´å¥½çæ¹å¼ï¼\n\nconst { Command } = require('commander');\nconst program = new Command();\n\n\n\n# version\n\nä½ç¨ï¼å®ä¹å½ä»¤ç¨åºççæ¬å· ç¨æ³ç¤ºä¾ï¼.version('0.0.1', '-v, --version') åæ°è§£æï¼\n\n 1. ç¬¬ä¸ä¸ªåæ° çæ¬å·<å¿é¡»>\n 2. ç¬¬äºä¸ªåæ° èªå®ä¹æ å¿<å¯çç¥>ï¼é»è®¤ä¸º -V å --version\n\n\n# option\n\nCommander ä½¿ç¨.option()æ¹æ³æ¥å®ä¹éé¡¹ï¼åæ¶å¯ä»¥éå éé¡¹çç®ä»ãæ¯ä¸ªéé¡¹å¯ä»¥å®ä¹ä¸ä¸ªç­éé¡¹åç§°ï¼-åé¢æ¥åä¸ªå­ç¬¦ï¼åä¸ä¸ªé¿éé¡¹åç§°ï¼--åé¢æ¥ä¸ä¸ªæå¤ä¸ªåè¯ï¼ï¼ä½¿ç¨éå·ãç©ºæ ¼æ|åéã\n\nboolean åéé¡¹ ãå¸¦åæ°éé¡¹\n\næä¸¤ç§æå¸¸ç¨çéé¡¹ï¼ä¸ç±»æ¯ boolean åéé¡¹ï¼éé¡¹æ ééç½®åæ°ï¼å¦ä¸ç±»éé¡¹åå¯ä»¥è®¾ç½®åæ°ï¼ä½¿ç¨å°æ¬å·å£°æå¨è¯¥éé¡¹åï¼å¦--expect <value>ï¼ãå¦æå¨å½ä»¤è¡ä¸­ä¸æå®å·ä½çéé¡¹ååæ°ï¼åä¼è¢«å®ä¹ä¸ºundefinedãç¬¬ä¸ä¸ªåæ°ä¸ºé»è®¤å¼ã\n\n// test.js\nprogram\n  .version('0.0.1', '-v, --version')\n  .option('-d, --debug', 'output extra debugging')\n  .option('-s, --small', 'small pizza size')\n  .option('-p, --pizza-type <type>', 'flavour of pizza');\n\n// è§£æ process.argv\nprogram.parse(process.argv);\n\nif (program.debug) console.log(program.opts());\nif (program.small) console.log('- small pizza size');\nif (program.pizzaType) console.log(`- ${program.pizzaType}`);\n\n\næµè¯è¾åº\n\nnode test.js -v    \n# 0.0.1\n\nnode test.js --help\n# Usage: test [options]\n# Options:\n#   -v, --version            output the version number\n#   -d, --debug              output extra debugging\n#   -s, --small              small pizza size\n#   -p, --pizza-type <type>  flavour of pizza\n#   -h, --help               display help for command\n\nnode test.js -d -s\n# { version: '0.0.1', debug: true, small: true, pizzaType: undefined }\n# - small pizza size\n\nnode test.js -d -s -p\n# error: option '-p, --pizza-type <type>' argument missing\n\nnode test.js -d -s -p fruit \n# { version: '0.0.1', debug: true, small: true, pizzaType: 'fruit' }\n# - small pizza size\n# - fruit\n\n\n\n# Inquirer\n\nä¸ç»éç¨çäº¤äºå¼å½ä»¤è¡ç¨æ·çé¢ï¼å®æ¹ææ¡£\n\nvar inquirer = require('inquirer');\ninquirer\n  .prompt([\n    /* Pass your questions in here */\n  ])\n  .then(answers => {\n    // Use user feedback for... whatever!!\n  })\n  .catch(error => {\n    if (error.isTtyError) {\n      // Prompt couldn't be rendered in the current environment\n    } else {\n      // Something else when wrong\n    }\n  });\n\n\nè¿éåªä¸¾ä¸ä¸ªç®åçä¾å­ï¼æ´å¤åæ°æ¥çææ¡£\n\n// test.js\nconst inquirer = require('inquirer');\ninquirer\n    .prompt([{\n        type: 'list',\n        name: 'type',\n        message: 'éæ©åå»ºç±»å',\n        choices: [{ name: 'åºç¨ç¨åº' }, { name: 'ç»ä»¶åº' }]\n    }, {\n        type: 'input',\n        name: 'name',\n        message: 'è¾å¥åç§°',\n        validate: function (value) {\n            if (value) {\n                return true;\n            }\n            return 'è¾å¥åç§°';\n        }\n    }]).then((answers) => {\n        console.log(answers);\n    });\n\n\näº¤äºçé¢\n\nnode tset.js\n\n? éæ©åå»ºç±»å (Use arrow keys)\nâ¯ åºç¨ç¨åº \n  ç»ä»¶åº \n\n# éæ© \"åºç¨ç¨åº\" åè¾å¥åç§° test\n? éæ©åå»ºç±»å åºç¨ç¨åº\n? è¾å¥åç§° test\n{ type: 'åºç¨ç¨åº', name: 'test' }\n",normalizedContent:"# commanderåinquirer\n\næ¬æä¸»è¦ä»ç» node å½ä»¤è¡çäº¤äºå·¥å· commanderï¼å¤çå½ä»¤è¡åæ°ï¼ å inquirerï¼å¤çé®é¢äº¤äºï¼\n\n\n# commander\n\nå®æ´ç node.js å½ä»¤è¡è§£å³æ¹æ¡ï¼å®æ¹ææ¡£\n\n\n# program åé\n\nä¸ºç®åä½¿ç¨ï¼commander æä¾äºä¸ä¸ªå¨å±å¯¹è±¡ program\n\nconst { program } = require('commander');\n\n\nå¦æç¨åºè¾ä¸ºå¤æï¼ç¨æ·éè¦ä»¥å¤ç§æ¹å¼æ¥ä½¿ç¨ commanderï¼å¦ååæµè¯ç­ãåå»ºæ¬å°commandå¯¹è±¡æ¯ä¸ç§æ´å¥½çæ¹å¼ï¼\n\nconst { command } = require('commander');\nconst program = new command();\n\n\n\n# version\n\nä½ç¨ï¼å®ä¹å½ä»¤ç¨åºççæ¬å· ç¨æ³ç¤ºä¾ï¼.version('0.0.1', '-v, --version') åæ°è§£æï¼\n\n 1. ç¬¬ä¸ä¸ªåæ° çæ¬å·<å¿é¡»>\n 2. ç¬¬äºä¸ªåæ° èªå®ä¹æ å¿<å¯çç¥>ï¼é»è®¤ä¸º -v å --version\n\n\n# option\n\ncommander ä½¿ç¨.option()æ¹æ³æ¥å®ä¹éé¡¹ï¼åæ¶å¯ä»¥éå éé¡¹çç®ä»ãæ¯ä¸ªéé¡¹å¯ä»¥å®ä¹ä¸ä¸ªç­éé¡¹åç§°ï¼-åé¢æ¥åä¸ªå­ç¬¦ï¼åä¸ä¸ªé¿éé¡¹åç§°ï¼--åé¢æ¥ä¸ä¸ªæå¤ä¸ªåè¯ï¼ï¼ä½¿ç¨éå·ãç©ºæ ¼æ|åéã\n\nboolean åéé¡¹ ãå¸¦åæ°éé¡¹\n\næä¸¤ç§æå¸¸ç¨çéé¡¹ï¼ä¸ç±»æ¯ boolean åéé¡¹ï¼éé¡¹æ ééç½®åæ°ï¼å¦ä¸ç±»éé¡¹åå¯ä»¥è®¾ç½®åæ°ï¼ä½¿ç¨å°æ¬å·å£°æå¨è¯¥éé¡¹åï¼å¦--expect <value>ï¼ãå¦æå¨å½ä»¤è¡ä¸­ä¸æå®å·ä½çéé¡¹ååæ°ï¼åä¼è¢«å®ä¹ä¸ºundefinedãç¬¬ä¸ä¸ªåæ°ä¸ºé»è®¤å¼ã\n\n// test.js\nprogram\n  .version('0.0.1', '-v, --version')\n  .option('-d, --debug', 'output extra debugging')\n  .option('-s, --small', 'small pizza size')\n  .option('-p, --pizza-type <type>', 'flavour of pizza');\n\n// è§£æ process.argv\nprogram.parse(process.argv);\n\nif (program.debug) console.log(program.opts());\nif (program.small) console.log('- small pizza size');\nif (program.pizzatype) console.log(`- ${program.pizzatype}`);\n\n\næµè¯è¾åº\n\nnode test.js -v    \n# 0.0.1\n\nnode test.js --help\n# usage: test [options]\n# options:\n#   -v, --version            output the version number\n#   -d, --debug              output extra debugging\n#   -s, --small              small pizza size\n#   -p, --pizza-type <type>  flavour of pizza\n#   -h, --help               display help for command\n\nnode test.js -d -s\n# { version: '0.0.1', debug: true, small: true, pizzatype: undefined }\n# - small pizza size\n\nnode test.js -d -s -p\n# error: option '-p, --pizza-type <type>' argument missing\n\nnode test.js -d -s -p fruit \n# { version: '0.0.1', debug: true, small: true, pizzatype: 'fruit' }\n# - small pizza size\n# - fruit\n\n\n\n# inquirer\n\nä¸ç»éç¨çäº¤äºå¼å½ä»¤è¡ç¨æ·çé¢ï¼å®æ¹ææ¡£\n\nvar inquirer = require('inquirer');\ninquirer\n  .prompt([\n    /* pass your questions in here */\n  ])\n  .then(answers => {\n    // use user feedback for... whatever!!\n  })\n  .catch(error => {\n    if (error.isttyerror) {\n      // prompt couldn't be rendered in the current environment\n    } else {\n      // something else when wrong\n    }\n  });\n\n\nè¿éåªä¸¾ä¸ä¸ªç®åçä¾å­ï¼æ´å¤åæ°æ¥çææ¡£\n\n// test.js\nconst inquirer = require('inquirer');\ninquirer\n    .prompt([{\n        type: 'list',\n        name: 'type',\n        message: 'éæ©åå»ºç±»å',\n        choices: [{ name: 'åºç¨ç¨åº' }, { name: 'ç»ä»¶åº' }]\n    }, {\n        type: 'input',\n        name: 'name',\n        message: 'è¾å¥åç§°',\n        validate: function (value) {\n            if (value) {\n                return true;\n            }\n            return 'è¾å¥åç§°';\n        }\n    }]).then((answers) => {\n        console.log(answers);\n    });\n\n\näº¤äºçé¢\n\nnode tset.js\n\n? éæ©åå»ºç±»å (use arrow keys)\nâ¯ åºç¨ç¨åº \n  ç»ä»¶åº \n\n# éæ© \"åºç¨ç¨åº\" åè¾å¥åç§° test\n? éæ©åå»ºç±»å åºç¨ç¨åº\n? è¾å¥åç§° test\n{ type: 'åºç¨ç¨åº', name: 'test' }\n",charsets:{cjk:!0}},{title:"å£æ¯å¸å±ååé£ç¿¼å¸å±",frontmatter:{title:"å£æ¯å¸å±ååé£ç¿¼å¸å±",date:"2018-09-18T19:00:54.000Z",categories:"CSS"},regularPath:"/css/layout.html",relativePath:"css/layout.md",key:"v-37be6dff",path:"/css/layout.html",headers:[{level:2,title:"ä¼ ç»ä¸æ å¸å±",slug:"ä¼ ç»ä¸æ å¸å±",normalizedTitle:"ä¼ ç»ä¸æ å¸å±",charIndex:2},{level:2,title:"å£æ¯å¸å±",slug:"å£æ¯å¸å±",normalizedTitle:"å£æ¯å¸å±",charIndex:1292},{level:3,title:"1.è¿æ¯åå§ç¶æï¼æä»¬æ¥æé å£æ¯å¸å±",slug:"_1-è¿æ¯åå§ç¶æ-æä»¬æ¥æé å£æ¯å¸å±",normalizedTitle:"1.è¿æ¯åå§ç¶æï¼æä»¬æ¥æé å£æ¯å¸å±",charIndex:1355},{level:3,title:"2.æä»¬é¦åç»middle,left,rightä¸ä¸ªçå­å ä¸æµ®å¨",slug:"_2-æä»¬é¦åç»middle-left-rightä¸ä¸ªçå­å ä¸æµ®å¨",normalizedTitle:"2.æä»¬é¦åç»middle,left,rightä¸ä¸ªçå­å ä¸æµ®å¨",charIndex:2003},{level:3,title:"3.è¿éåä»ç»ä¸ä¸margin-left",slug:"_3-è¿éåä»ç»ä¸ä¸margin-left",normalizedTitle:"3.è¿éåä»ç»ä¸ä¸margin-left",charIndex:2086},{level:3,title:"3.æåç¨ç¸å¯¹å®ä½è°æ´ä½ç½®",slug:"_3-æåç¨ç¸å¯¹å®ä½è°æ´ä½ç½®",normalizedTitle:"3.æåç¨ç¸å¯¹å®ä½è°æ´ä½ç½®",charIndex:2200},{level:2,title:"åé£ç¿¼å¸å±",slug:"åé£ç¿¼å¸å±",normalizedTitle:"åé£ç¿¼å¸å±",charIndex:1297},{level:3,title:"1.åå§ç¶æ",slug:"_1-åå§ç¶æ",normalizedTitle:"1.åå§ç¶æ",charIndex:3075},{level:3,title:"2.ç»left,right,middleå æµ®å¨",slug:"_2-ç»left-right-middleå æµ®å¨",normalizedTitle:"2.ç»left,right,middleå æµ®å¨",charIndex:3296},{level:3,title:"3.margin-leftè°æ´ä½ç½®",slug:"_3-margin-leftè°æ´ä½ç½®",normalizedTitle:"3.margin-leftè°æ´ä½ç½®",charIndex:3324}],lastUpdated:"3/7/2023, 7:37:22 PM",lastUpdatedTimestamp:1678189042e3,headersStr:"ä¼ ç»ä¸æ å¸å± å£æ¯å¸å± 1.è¿æ¯åå§ç¶æï¼æä»¬æ¥æé å£æ¯å¸å± 2.æä»¬é¦åç»middle,left,rightä¸ä¸ªçå­å ä¸æµ®å¨ 3.è¿éåä»ç»ä¸ä¸margin-left 3.æåç¨ç¸å¯¹å®ä½è°æ´ä½ç½® åé£ç¿¼å¸å± 1.åå§ç¶æ 2.ç»left,right,middleå æµ®å¨ 3.margin-leftè°æ´ä½ç½®",content:'# ä¼ ç»ä¸æ å¸å±\n\n<style>\n    .wrap {\n        display: flex;\n    }\n    .middle {        \n        flex: 1;\n    }\n    .left {\n        width: 300px;\n    }\n    .right {        \n        width: 300px;\n    }\n</style>\n\n</head>\n<body>\n    <div class="wrap">\n        <div class="left"></div>\n        <div class="middle"></div>\n        <div class="right"></div>\n    </div>\n</body>\n\n\n<style>\n    .middle {\n        margin: 0 300px;\n    }\n    .left {\n        width: 300px;\n        float: left;\n    }\n    .right {        \n        width: 300px;\n        float: right;\n    }\n</style>\n\n</head>\n<body>\n    <div class="left"></div>\n    <div class="right"></div>\n    <div class="middle"></div>\n</body>\n\n\n<style>\n    .middle {\n        margin: 0 300px;\n    }\n    .left {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 300px;\n    }\n    .right {  \n        position: absolute;\n        top: 0;\n        right: 0;      \n        width: 300px;\n    }\n</style>\n\n</head>\n<body>\n    <div class="left"></div>\n    <div class="right"></div>\n    <div class="middle"></div>\n</body>\n\n\n<style>\n\t.box {\n\t\tdisplay: grid;\n    \tgrid-template-columns: 200px auto 200px;\n\t}\n</style>\n\n</head>\n<body>\n\t<div class="box">\n\t\t<div class="left"></div>\n\t\t<div class="middle"></div>\n\t\t<div class="right"></div>\n\t</div>\n</body>\n\n\nå£æ¯å¸å±è·åé£ç¿¼å¸å±çå®ç°ï¼ç®çé½æ¯å·¦å³ä¸¤æ åºå®å®½åº¦ï¼ä¸­é´é¨åèªéåºã ä¸­é´æ æ¾å¨æåé¢ä¼åæ¸²æã\n\n\n# å£æ¯å¸å±\n\n\n# 1.è¿æ¯åå§ç¶æï¼æä»¬æ¥æé å£æ¯å¸å±\n\n\t<style>\n\t\t.header {\n\t\t\twidth: 100%;\n\t\t\theight: 30px;\n\t\t\tbackground: red;\n\t\t}\n\t\t.content {\n\t\t\tpadding: 0 100px;/*å·¦å³åçåº100px*/\n\t\t}\n\t\t.footer {\n\t\t\twidth: 100%;\n\t\t\theight: 30px;\n\t\t\tbackground: red;\n\t\t}\n\t\t.middle {\t\t\n\t\t\twidth: 100%;\n\t\t\theight: 80px;\n\t\t\tbackground: green;\n\t\t}\n\t\t.left {\n\t\t\twidth: 100px;\n\t\t\theight: 80px;\n\t\t\tbackground: yellow;\n\t\t}\n\t\t.right {\t\t\n\t\t\twidth: 100px;\n\t\t\theight: 80px;\n\t\t\tbackground: pink\n\t\t}\n\t</style>\n<body>\n\t  <div class="header"></div>\n     \t<div class="content">\n\t\t\t<div class="middle"></div>\n\t\t\t<div class="left"></div>\n\t\t\t<div class="right"></div>\n\t\t</div>\n\t  <div class="footer"></div>\n</body>\n\n\n\n# 2.æä»¬é¦åç»middle,left,rightä¸ä¸ªçå­å ä¸æµ®å¨\n\nfloat:left\n\nåºç°äºé«åº¦å¡é·ç»contentå ä¸overflow:hidden\n\n\n# 3.è¿éåä»ç»ä¸ä¸margin-left\n\nå½margin-leftçå¼ä¸º%æ¶ï¼æ°å¼åºäºç¶å¯¹è±¡çç¾åæ¯å·¦å¤è¾¹è·ã\n\nç»é»è²çå­å ä¸margin-left:-100%\n\nç»ç²è²çå­å ä¸margin-left:-100px\n\n\n# 3.æåç¨ç¸å¯¹å®ä½è°æ´ä½ç½®\n\nç»é»è²çå­å ä¸position:relative;right:100px\n\nç»ç²è²çå­å ä¸position:relative;left:100px\n\n\n# åé£ç¿¼å¸å±\n\n<style>\n        .header {\n\t\t\twidth: 100%;\n\t\t\theight: 30px;\n\t\t\tbackground: red;\n\t\t}\n\n\t\t.content {\n\t\t\toverflow: hidden;\n\t\t}\n\n\t\t.footer {\n\t\t\twidth: 100%;\n\t\t\theight: 30px;\n\t\t\tbackground: red;\n\t\t}\n\n\t\t.middle {\t\t\t\n\t\t\twidth: 100%;\n\t\t\tfloat: left;\n\t\t}\n         .inner-middle{\n\t\t\twidth:100%;\n\t\t\theight: 80px;\n\t\t\tbackground: green;\t\t\t\n\t\t}\n\t\t.left {\n\t\t\twidth: 100px;\n\t\t\tfloat: left;\n\t\t\theight: 80px;\n\t\t\tmargin-left: -100%;\n\t\t\tbackground: yellow;\n\t\t}\n\n\t\t.right {\t\t\t\n\t\t\twidth: 100px;\n\t\t\tfloat: left;\n\t\t\theight: 80px;\n\t\t\tmargin-left: -100px;\n\t\t\tbackground: pink\n\t\t}\n</style>\n\n<div class="header"></div>\n\t<div class="content">\n\t\t<div class="middle">\n\t\t\t<div class="inner-middle"></div>\n\t\t</div>\n\t\t<div class="left"></div>\n\t\t<div class="right"></div>\n\t</div>\n<div class="footer"></div>\n\n\n\n# 1.åå§ç¶æ\n\n<div class="header"></div>\n\t<div class="content">\n\t\t<div class="middle">\n\t\t\t<div class="inner-middle"></div>\n\t\t</div>\n\t\t<div class="left"></div>\n\t\t<div class="right"></div>\n\t</div>\n<div class="footer"></div>\n\n\n\n# 2.ç»left,right,middleå æµ®å¨\n\n\n# 3.margin-leftè°æ´ä½ç½®\n\nç»é»è²çå­å ä¸margin-left:-100%\n\nç»ç²è²çå­å ä¸margin-left:-100px',normalizedContent:'# ä¼ ç»ä¸æ å¸å±\n\n<style>\n    .wrap {\n        display: flex;\n    }\n    .middle {        \n        flex: 1;\n    }\n    .left {\n        width: 300px;\n    }\n    .right {        \n        width: 300px;\n    }\n</style>\n\n</head>\n<body>\n    <div class="wrap">\n        <div class="left"></div>\n        <div class="middle"></div>\n        <div class="right"></div>\n    </div>\n</body>\n\n\n<style>\n    .middle {\n        margin: 0 300px;\n    }\n    .left {\n        width: 300px;\n        float: left;\n    }\n    .right {        \n        width: 300px;\n        float: right;\n    }\n</style>\n\n</head>\n<body>\n    <div class="left"></div>\n    <div class="right"></div>\n    <div class="middle"></div>\n</body>\n\n\n<style>\n    .middle {\n        margin: 0 300px;\n    }\n    .left {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 300px;\n    }\n    .right {  \n        position: absolute;\n        top: 0;\n        right: 0;      \n        width: 300px;\n    }\n</style>\n\n</head>\n<body>\n    <div class="left"></div>\n    <div class="right"></div>\n    <div class="middle"></div>\n</body>\n\n\n<style>\n\t.box {\n\t\tdisplay: grid;\n    \tgrid-template-columns: 200px auto 200px;\n\t}\n</style>\n\n</head>\n<body>\n\t<div class="box">\n\t\t<div class="left"></div>\n\t\t<div class="middle"></div>\n\t\t<div class="right"></div>\n\t</div>\n</body>\n\n\nå£æ¯å¸å±è·åé£ç¿¼å¸å±çå®ç°ï¼ç®çé½æ¯å·¦å³ä¸¤æ åºå®å®½åº¦ï¼ä¸­é´é¨åèªéåºã ä¸­é´æ æ¾å¨æåé¢ä¼åæ¸²æã\n\n\n# å£æ¯å¸å±\n\n\n# 1.è¿æ¯åå§ç¶æï¼æä»¬æ¥æé å£æ¯å¸å±\n\n\t<style>\n\t\t.header {\n\t\t\twidth: 100%;\n\t\t\theight: 30px;\n\t\t\tbackground: red;\n\t\t}\n\t\t.content {\n\t\t\tpadding: 0 100px;/*å·¦å³åçåº100px*/\n\t\t}\n\t\t.footer {\n\t\t\twidth: 100%;\n\t\t\theight: 30px;\n\t\t\tbackground: red;\n\t\t}\n\t\t.middle {\t\t\n\t\t\twidth: 100%;\n\t\t\theight: 80px;\n\t\t\tbackground: green;\n\t\t}\n\t\t.left {\n\t\t\twidth: 100px;\n\t\t\theight: 80px;\n\t\t\tbackground: yellow;\n\t\t}\n\t\t.right {\t\t\n\t\t\twidth: 100px;\n\t\t\theight: 80px;\n\t\t\tbackground: pink\n\t\t}\n\t</style>\n<body>\n\t  <div class="header"></div>\n     \t<div class="content">\n\t\t\t<div class="middle"></div>\n\t\t\t<div class="left"></div>\n\t\t\t<div class="right"></div>\n\t\t</div>\n\t  <div class="footer"></div>\n</body>\n\n\n\n# 2.æä»¬é¦åç»middle,left,rightä¸ä¸ªçå­å ä¸æµ®å¨\n\nfloat:left\n\nåºç°äºé«åº¦å¡é·ç»contentå ä¸overflow:hidden\n\n\n# 3.è¿éåä»ç»ä¸ä¸margin-left\n\nå½margin-leftçå¼ä¸º%æ¶ï¼æ°å¼åºäºç¶å¯¹è±¡çç¾åæ¯å·¦å¤è¾¹è·ã\n\nç»é»è²çå­å ä¸margin-left:-100%\n\nç»ç²è²çå­å ä¸margin-left:-100px\n\n\n# 3.æåç¨ç¸å¯¹å®ä½è°æ´ä½ç½®\n\nç»é»è²çå­å ä¸position:relative;right:100px\n\nç»ç²è²çå­å ä¸position:relative;left:100px\n\n\n# åé£ç¿¼å¸å±\n\n<style>\n        .header {\n\t\t\twidth: 100%;\n\t\t\theight: 30px;\n\t\t\tbackground: red;\n\t\t}\n\n\t\t.content {\n\t\t\toverflow: hidden;\n\t\t}\n\n\t\t.footer {\n\t\t\twidth: 100%;\n\t\t\theight: 30px;\n\t\t\tbackground: red;\n\t\t}\n\n\t\t.middle {\t\t\t\n\t\t\twidth: 100%;\n\t\t\tfloat: left;\n\t\t}\n         .inner-middle{\n\t\t\twidth:100%;\n\t\t\theight: 80px;\n\t\t\tbackground: green;\t\t\t\n\t\t}\n\t\t.left {\n\t\t\twidth: 100px;\n\t\t\tfloat: left;\n\t\t\theight: 80px;\n\t\t\tmargin-left: -100%;\n\t\t\tbackground: yellow;\n\t\t}\n\n\t\t.right {\t\t\t\n\t\t\twidth: 100px;\n\t\t\tfloat: left;\n\t\t\theight: 80px;\n\t\t\tmargin-left: -100px;\n\t\t\tbackground: pink\n\t\t}\n</style>\n\n<div class="header"></div>\n\t<div class="content">\n\t\t<div class="middle">\n\t\t\t<div class="inner-middle"></div>\n\t\t</div>\n\t\t<div class="left"></div>\n\t\t<div class="right"></div>\n\t</div>\n<div class="footer"></div>\n\n\n\n# 1.åå§ç¶æ\n\n<div class="header"></div>\n\t<div class="content">\n\t\t<div class="middle">\n\t\t\t<div class="inner-middle"></div>\n\t\t</div>\n\t\t<div class="left"></div>\n\t\t<div class="right"></div>\n\t</div>\n<div class="footer"></div>\n\n\n\n# 2.ç»left,right,middleå æµ®å¨\n\n\n# 3.margin-leftè°æ´ä½ç½®\n\nç»é»è²çå­å ä¸margin-left:-100%\n\nç»ç²è²çå­å ä¸margin-left:-100px',charsets:{cjk:!0}},{title:"çå­æ¨¡å",frontmatter:{title:"çå­æ¨¡å",date:"2020-11-26T11:27:54.000Z",categories:"CSS"},regularPath:"/css/box.html",relativePath:"css/box.md",key:"v-0a94c1c2",path:"/css/box.html",headers:[{level:2,title:"åç±»",slug:"åç±»",normalizedTitle:"åç±»",charIndex:44},{level:2,title:"è±ç¦»ææ¡£æµ",slug:"è±ç¦»ææ¡£æµ",normalizedTitle:"è±ç¦»ææ¡£æµ",charIndex:19},{level:2,title:"BFC",slug:"bfc",normalizedTitle:"bfc",charIndex:28},{level:2,title:"æ¸é¤æµ®å¨",slug:"æ¸é¤æµ®å¨",normalizedTitle:"æ¸é¤æµ®å¨",charIndex:35}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"åç±» è±ç¦»ææ¡£æµ BFC æ¸é¤æµ®å¨",content:'# çå­æ¨¡å\n\n * çå­æ¨¡å\n * è±ç¦»ææ¡£æµ\n * BFC\n * æ¸é¤æµ®å¨\n\n\n# åç±»\n\n * w3cæ åçæ¨¡å\n   * åæ¬ width, height, margin, padding, border\n   * å¯è§å®½åº¦æ¯ width + padding + border\n   * box-sizing: content-box;\n * ieçæ¨¡å\n   * ä¹åæ¬ width, height, margin, padding, border\n   * å¯è§å®½åº¦ width\n   * box-sizing: border-box;\n\n\n# è±ç¦»ææ¡£æµ\n\n * æè°çææ¡£æµï¼æçæ¯åç´ æçå¸å±è¿ç¨ä¸­ï¼åç´ ä¼èªå¨ä»å·¦å¾å³ï¼ä»ä¸å¾ä¸çæµå¼æåã\n * è±ç¦»ææ¡£æµï¼ä¹å°±æ¯å°åç´ ä»æ®éçå¸å±æçä¸­æ¿èµ°ï¼å¶ä»çå­å¨å®ä½çæ¶åï¼ä¼å½åè±ç¦»ææ¡£æµçåç´ ä¸å­å¨èè¿è¡å®ä½ã\n * æµ®å¨ ( float ) åç»å¯¹å®ä½ ( position:absolute )\n   * åè±ç¦»ææ¡£æµ\n   * åä¸å ä½\n   * æµ®å¨æåµä¸ï¼å¶ä»åç´ ä¼èªå¨å¨å¶å³è¾¹æåãç»å¯¹å®ä½ä¼å®å¨å¿½è§å¶å­å¨ã\n\n\n# BFC\n\n * BFCçå®ä¹:\n\nBFCï¼Block formatting context ï¼âåçº§æ ¼å¼ä¸ä¸æâã æ¯ç¨äºå¸å±åçº§çå­çä¸åæ¸²æåºåãå¹¶ä¸ä¸è¿ä¸ªåºåçå¤é¨æ¯«æ å³ç³»ã\n\n\n * BFCçå¸å±è§å\n\n åé¨çBoxä¼å¨åç´æ¹åï¼ä¸ä¸ªæ¥ä¸ä¸ªå°æ¾ç½®ã\n\n Boxåç´æ¹åçè·ç¦»ç±marginå³å®ãå±äºåä¸ä¸ªBFCçä¸¤ä¸ªç¸é»Boxçmarginä¼åçéå ã\n\n æ¯ä¸ªçå­ï¼åçä¸è¡çï¼çmargin boxçå·¦è¾¹ï¼ä¸åå«åborder boxçå·¦è¾¹ç¸æ¥è§¦(å¯¹äºä»å·¦å¾å³çæ ¼å¼åï¼å¦åç¸å)ãå³ä½¿å­å¨æµ®å¨ä¹æ¯å¦æ­¤ã\n\n BFCçåºåä¸ä¼ä¸float boxéå ã\n\n BFCå°±æ¯é¡µé¢ä¸çä¸ä¸ªéç¦»çç¬ç«å®¹å¨ï¼å®¹å¨éé¢çå­åç´ ä¸ä¼å½±åå°å¤é¢çåç´ ãåä¹ä¹å¦æ­¤ã\n\n è®¡ç®BFCçé«åº¦æ¶ï¼æµ®å¨åç´ ä¹åä¸è®¡ç®ã\n\n\n * è§¦åBFCçæ¡ä»¶:\n\næ»¡è¶³ä¸åæ¡ä»¶ä¹ä¸å°±å¯ä»¥è§¦åBFC\n\n 1ï¼æ ¹åç´ ï¼å³htmlåç´ \n\n 2ï¼floatçå¼ä¸ä¸ºnone\n\n 3ï¼overflowçå¼ä¸ä¸ºvisible\n\n 4ï¼displayçå¼ä¸ºinline-blockãtable-cellãtable-caption\n\n 5ï¼positionçå¼ä¸ºabsoluteæèfixed\n\n\n * BFCçä½ç¨\n\nï¼1ï¼å¯ä»¥é»æ­¢åç´ è¢«æµ®å¨çåç´ è¦çï¼å¯åä¸¤æ å¸å±èªéåºï¼\n\n\n\nè§¦åçº¢è²çå­çBFCå\n\n\n\n<style>\n       .box1{\n            float: left;\n            width: 100px;\n            height: 100px;\n            background: green;\n        }\n        .box2{\n            height: 500px;\n            background: red;\n            overflow: hidden;\n        }\n    </style>\n</head>\n<body>\n  <div class="box1"></div>\n  <div class="box2"></div>\n</body>\n\n\nï¼2ï¼è§£å³é«åº¦å¡é·ï¼æä»¬ç¥éå½æµ®å¨ççå­çç¶åç´ æ²¡æé«åº¦æ¶ï¼ä¼åºç°é«åº¦å¡é·ç°è±¡ã\n\n\n\nç¶çå­è§¦åBFCå¯ä»¥è§£å³è¿ä¸ªé®é¢,æ ¹æ®å¸å±è§åçæåä¸æ¡ã\n\nï¼3ï¼è§£å³åä¸ä¸ªBFCåºåçåç´æ¹åmarginå¡é·çé®é¢\n\n\n\nåä¸ºä¸¤ä¸ªä¸åçBFCä¹åå¯ä»¥è§£å³\n\n\n# æ¸é¤æµ®å¨\n\n>  1. æµ®å¨åç´ åé¢å ç©º div\n>  2. å©ç¨ BFC\n>  3. å©ç¨ after ä¼ªåç´ \n\n * æµ®å¨åç´ åé¢å ä¸ä¸ªç©ºçdivï¼å¹¶ä¸ºå®æ¸é¤æµ®å¨\n\n<style>\n  .wrap{\n    width:500px;\n    height:400px;\n    border:1px solid red;\n    margin:0 auto;\n  }\n  .float{\n    width:200px;\n    height:200px;\n    background:#ccc;\n    float:left;\n  }\n  .nofloat{\n    width:300px;\n    height:150px;\n    background:red;\n  }\n  .clear{\n    clear:both;\n  }\n</style>\n\n<div class="wrap">\n  <div class="float">æµ®å¨</div>\n  <div class="clear"></div>\n  <div class="nofloat">ä¸æ³è¢«æµ®å¨å½±å</div>\n</div>\n\n\n * å©ç¨BFCç¹æ§æ¸é¤æµ®å¨ï¼BFCä¸­æµ®å¨åç´ ä¹ä¼åä¸è®¡ç®é«åº¦ï¼\n\n<style>\n  .wrap{\n    width:500px;\n    border:1px solid red;\n    margin:0 auto;\n    overflow:hidden;\n  }\n  .float{\n    width:200px;\n    height:200px;\n    background:#ccc;\n    float:left;\n  }\n  .nofloat{\n    width:300px;\n    height:150px;\n    background:red;\n  }\n</style>\n\n<div class="wrap">\n  <div class="float">æµ®å¨</div>\n  <div class="nofloat">ä¸æ³è¢«æµ®å¨å½±å</div>\n</div>\n\n\n * ä½¿ç¨afterä¼ªåç´ ï¼ç»æµ®å¨åç´ çç¶åç´ æ¸é¤æµ®å¨\n\n<style>\n  .wrap{\n    width:500px;\n    border:1px solid red;\n    margin:0 auto;\n  }\n  .float{\n    width:200px;\n    height:200px;\n    background:#ccc;\n    float:left;\n  }\n\n  .wrap:after{\n    content:\'clear\';\n    display:block;\n    height:0;\n    clear:both;\n    overflow:hidden;\n    visibility:hidden;\n  }\n</style>\n\n<div class="wrap">\n  <div class="float">æµ®å¨</div>\n</div>\n',normalizedContent:'# çå­æ¨¡å\n\n * çå­æ¨¡å\n * è±ç¦»ææ¡£æµ\n * bfc\n * æ¸é¤æµ®å¨\n\n\n# åç±»\n\n * w3cæ åçæ¨¡å\n   * åæ¬ width, height, margin, padding, border\n   * å¯è§å®½åº¦æ¯ width + padding + border\n   * box-sizing: content-box;\n * ieçæ¨¡å\n   * ä¹åæ¬ width, height, margin, padding, border\n   * å¯è§å®½åº¦ width\n   * box-sizing: border-box;\n\n\n# è±ç¦»ææ¡£æµ\n\n * æè°çææ¡£æµï¼æçæ¯åç´ æçå¸å±è¿ç¨ä¸­ï¼åç´ ä¼èªå¨ä»å·¦å¾å³ï¼ä»ä¸å¾ä¸çæµå¼æåã\n * è±ç¦»ææ¡£æµï¼ä¹å°±æ¯å°åç´ ä»æ®éçå¸å±æçä¸­æ¿èµ°ï¼å¶ä»çå­å¨å®ä½çæ¶åï¼ä¼å½åè±ç¦»ææ¡£æµçåç´ ä¸å­å¨èè¿è¡å®ä½ã\n * æµ®å¨ ( float ) åç»å¯¹å®ä½ ( position:absolute )\n   * åè±ç¦»ææ¡£æµ\n   * åä¸å ä½\n   * æµ®å¨æåµä¸ï¼å¶ä»åç´ ä¼èªå¨å¨å¶å³è¾¹æåãç»å¯¹å®ä½ä¼å®å¨å¿½è§å¶å­å¨ã\n\n\n# bfc\n\n * bfcçå®ä¹:\n\nbfcï¼block formatting context ï¼âåçº§æ ¼å¼ä¸ä¸æâã æ¯ç¨äºå¸å±åçº§çå­çä¸åæ¸²æåºåãå¹¶ä¸ä¸è¿ä¸ªåºåçå¤é¨æ¯«æ å³ç³»ã\n\n\n * bfcçå¸å±è§å\n\n åé¨çboxä¼å¨åç´æ¹åï¼ä¸ä¸ªæ¥ä¸ä¸ªå°æ¾ç½®ã\n\n boxåç´æ¹åçè·ç¦»ç±marginå³å®ãå±äºåä¸ä¸ªbfcçä¸¤ä¸ªç¸é»boxçmarginä¼åçéå ã\n\n æ¯ä¸ªçå­ï¼åçä¸è¡çï¼çmargin boxçå·¦è¾¹ï¼ä¸åå«åborder boxçå·¦è¾¹ç¸æ¥è§¦(å¯¹äºä»å·¦å¾å³çæ ¼å¼åï¼å¦åç¸å)ãå³ä½¿å­å¨æµ®å¨ä¹æ¯å¦æ­¤ã\n\n bfcçåºåä¸ä¼ä¸float boxéå ã\n\n bfcå°±æ¯é¡µé¢ä¸çä¸ä¸ªéç¦»çç¬ç«å®¹å¨ï¼å®¹å¨éé¢çå­åç´ ä¸ä¼å½±åå°å¤é¢çåç´ ãåä¹ä¹å¦æ­¤ã\n\n è®¡ç®bfcçé«åº¦æ¶ï¼æµ®å¨åç´ ä¹åä¸è®¡ç®ã\n\n\n * è§¦åbfcçæ¡ä»¶:\n\næ»¡è¶³ä¸åæ¡ä»¶ä¹ä¸å°±å¯ä»¥è§¦åbfc\n\n 1ï¼æ ¹åç´ ï¼å³htmlåç´ \n\n 2ï¼floatçå¼ä¸ä¸ºnone\n\n 3ï¼overflowçå¼ä¸ä¸ºvisible\n\n 4ï¼displayçå¼ä¸ºinline-blockãtable-cellãtable-caption\n\n 5ï¼positionçå¼ä¸ºabsoluteæèfixed\n\n\n * bfcçä½ç¨\n\nï¼1ï¼å¯ä»¥é»æ­¢åç´ è¢«æµ®å¨çåç´ è¦çï¼å¯åä¸¤æ å¸å±èªéåºï¼\n\n\n\nè§¦åçº¢è²çå­çbfcå\n\n\n\n<style>\n       .box1{\n            float: left;\n            width: 100px;\n            height: 100px;\n            background: green;\n        }\n        .box2{\n            height: 500px;\n            background: red;\n            overflow: hidden;\n        }\n    </style>\n</head>\n<body>\n  <div class="box1"></div>\n  <div class="box2"></div>\n</body>\n\n\nï¼2ï¼è§£å³é«åº¦å¡é·ï¼æä»¬ç¥éå½æµ®å¨ççå­çç¶åç´ æ²¡æé«åº¦æ¶ï¼ä¼åºç°é«åº¦å¡é·ç°è±¡ã\n\n\n\nç¶çå­è§¦åbfcå¯ä»¥è§£å³è¿ä¸ªé®é¢,æ ¹æ®å¸å±è§åçæåä¸æ¡ã\n\nï¼3ï¼è§£å³åä¸ä¸ªbfcåºåçåç´æ¹åmarginå¡é·çé®é¢\n\n\n\nåä¸ºä¸¤ä¸ªä¸åçbfcä¹åå¯ä»¥è§£å³\n\n\n# æ¸é¤æµ®å¨\n\n>  1. æµ®å¨åç´ åé¢å ç©º div\n>  2. å©ç¨ bfc\n>  3. å©ç¨ after ä¼ªåç´ \n\n * æµ®å¨åç´ åé¢å ä¸ä¸ªç©ºçdivï¼å¹¶ä¸ºå®æ¸é¤æµ®å¨\n\n<style>\n  .wrap{\n    width:500px;\n    height:400px;\n    border:1px solid red;\n    margin:0 auto;\n  }\n  .float{\n    width:200px;\n    height:200px;\n    background:#ccc;\n    float:left;\n  }\n  .nofloat{\n    width:300px;\n    height:150px;\n    background:red;\n  }\n  .clear{\n    clear:both;\n  }\n</style>\n\n<div class="wrap">\n  <div class="float">æµ®å¨</div>\n  <div class="clear"></div>\n  <div class="nofloat">ä¸æ³è¢«æµ®å¨å½±å</div>\n</div>\n\n\n * å©ç¨bfcç¹æ§æ¸é¤æµ®å¨ï¼bfcä¸­æµ®å¨åç´ ä¹ä¼åä¸è®¡ç®é«åº¦ï¼\n\n<style>\n  .wrap{\n    width:500px;\n    border:1px solid red;\n    margin:0 auto;\n    overflow:hidden;\n  }\n  .float{\n    width:200px;\n    height:200px;\n    background:#ccc;\n    float:left;\n  }\n  .nofloat{\n    width:300px;\n    height:150px;\n    background:red;\n  }\n</style>\n\n<div class="wrap">\n  <div class="float">æµ®å¨</div>\n  <div class="nofloat">ä¸æ³è¢«æµ®å¨å½±å</div>\n</div>\n\n\n * ä½¿ç¨afterä¼ªåç´ ï¼ç»æµ®å¨åç´ çç¶åç´ æ¸é¤æµ®å¨\n\n<style>\n  .wrap{\n    width:500px;\n    border:1px solid red;\n    margin:0 auto;\n  }\n  .float{\n    width:200px;\n    height:200px;\n    background:#ccc;\n    float:left;\n  }\n\n  .wrap:after{\n    content:\'clear\';\n    display:block;\n    height:0;\n    clear:both;\n    overflow:hidden;\n    visibility:hidden;\n  }\n</style>\n\n<div class="wrap">\n  <div class="float">æµ®å¨</div>\n</div>\n',charsets:{cjk:!0}},{title:"process.envå¨å±åé",frontmatter:{},regularPath:"/engineering/env.html",relativePath:"engineering/env.md",key:"v-69e9675f",path:"/engineering/env.html",headers:[{level:2,title:"vue-cli",slug:"vue-cli",normalizedTitle:"vue-cli",charIndex:24},{level:3,title:"æ¨¡å¼",slug:"æ¨¡å¼",normalizedTitle:"æ¨¡å¼",charIndex:222},{level:3,title:"ç¯å¢åé",slug:"ç¯å¢åé",normalizedTitle:"ç¯å¢åé",charIndex:159},{level:3,title:"ä¼åçº§",slug:"ä¼åçº§",normalizedTitle:"ä¼åçº§",charIndex:827},{level:3,title:"å¨å®¢æ·ç«¯ä¾§ä»£ç ä¸­ä½¿ç¨ç¯å¢åé",slug:"å¨å®¢æ·ç«¯ä¾§ä»£ç ä¸­ä½¿ç¨ç¯å¢åé",normalizedTitle:"å¨å®¢æ·ç«¯ä¾§ä»£ç ä¸­ä½¿ç¨ç¯å¢åé",charIndex:899},{level:2,title:"å®ç°åç",slug:"å®ç°åç",normalizedTitle:"å®ç°åç",charIndex:984},{level:3,title:"process.env",slug:"process-env",normalizedTitle:"process.env",charIndex:2},{level:3,title:"process.cwd",slug:"process-cwd",normalizedTitle:"process.cwd",charIndex:2149},{level:3,title:"compiler",slug:"compiler",normalizedTitle:"compiler",charIndex:2204},{level:3,title:"webpack.DefinePlugin",slug:"webpack-defineplugin",normalizedTitle:"webpack.defineplugin",charIndex:2338},{level:2,title:"å·ä½å®ç°",slug:"å·ä½å®ç°",normalizedTitle:"å·ä½å®ç°",charIndex:2913},{level:2,title:"å¦ä½éªè¯",slug:"å¦ä½éªè¯",normalizedTitle:"å¦ä½éªè¯",charIndex:4723},{level:2,title:"æ»ç»",slug:"æ»ç»",normalizedTitle:"æ»ç»",charIndex:4815}],lastUpdated:"3/31/2022, 7:39:54 PM",lastUpdatedTimestamp:1648726794e3,headersStr:"vue-cli æ¨¡å¼ ç¯å¢åé ä¼åçº§ å¨å®¢æ·ç«¯ä¾§ä»£ç ä¸­ä½¿ç¨ç¯å¢åé å®ç°åç process.env process.cwd compiler webpack.DefinePlugin å·ä½å®ç° å¦ä½éªè¯ æ»ç»",content:'# process.envå¨å±åé\n\nä¼æå¨ç¥ï¼vue-cli ä¸­æ .env åå»ºå¨å±åéçåè½ï¼é¡¹ç®ä¸­å¯ä»¥ç´æ¥ä½¿ç¨ process.env.[åéå] æ¥ä½¿ç¨ã\n\næè¿å¨å¬å¸èªç  cli åå»ºçé¡¹ç®ä¸­å¹¶æ²¡æåç°æ­¤åè½ï¼äºæ¯æç®äºè§£ä¸ä¸ process.env çåçå¹¶æ¢ç´¢å¦ä½å¨ cli å·¥å·ä¸­å®ç°è¯»å .env ç¯å¢åéçåè½ï¼ä½¿å¶å¨å®¢æ·ç«¯ä¾§ä½¿ç¨ã\n\n\n# vue-cli\n\né¦åæä»¬çä¸ä¸ vue-cli çç¸å³æ¦å¿µï¼åæå°å\n\n\n# æ¨¡å¼\n\nä¸ä¸ª Vue CLI é¡¹ç®æä¸ä¸ªæ¨¡å¼ï¼\n\n * development æ¨¡å¼ç¨äº vue-cli-service serve\n * test æ¨¡å¼ç¨äº vue-cli-service test:unit\n * production æ¨¡å¼ç¨äº vue-cli-service build å vue-cli-service test:e2e\n\nå½è¿è¡ vue-cli-service å½ä»¤æ¶ï¼ææçç¯å¢åéé½ä»å¯¹åºçç¯å¢æä»¶ä¸­è½½å¥ãå¦ææä»¶åé¨ä¸åå« NODE_ENV åéï¼å®çå¼å°åå³äºæ¨¡å¼ï¼ä¾å¦ï¼\n\n * å¨ production æ¨¡å¼ä¸è¢«è®¾ç½®ä¸º "production"\n * å¨ test æ¨¡å¼ä¸è¢«è®¾ç½®ä¸º "test"ï¼é»è®¤åæ¯ "development"ã\n\n\n# ç¯å¢åé\n\nä½ å¯ä»¥å¨ä½ çé¡¹ç®æ ¹ç®å½ä¸­æ¾ç½®ä¸åæä»¶æ¥æå®ç¯å¢åéï¼\n\n.env                # å¨ææçç¯å¢ä¸­è¢«è½½å¥\n.env.local          # å¨ææçç¯å¢ä¸­è¢«è½½å¥ï¼ä½ä¼è¢« git å¿½ç¥\n.env.[mode]         # åªå¨æå®çæ¨¡å¼ä¸­è¢«è½½å¥\n.env.[mode].local   # åªå¨æå®çæ¨¡å¼ä¸­è¢«è½½å¥ï¼ä½ä¼è¢« git å¿½ç¥\n\n\nä¸ä¸ªç¯å¢æä»¶åªåå«ç¯å¢åéçâé®=å¼âå¯¹ï¼\n\nFOO=bar\nVUE_APP_NOT_SECRET_CODE=some_value\n\n\n\n# ä¼åçº§\n\nä¸ºä¸ä¸ªç¹å®æ¨¡å¼åå¤çç¯å¢æä»¶ï¼ä¾å¦ .env.productionï¼å°ä¼æ¯ä¸è¬çç¯å¢æä»¶ï¼ä¾å¦ .envï¼æ¥ææ´é«çä¼åçº§ã\n\n\n# å¨å®¢æ·ç«¯ä¾§ä»£ç ä¸­ä½¿ç¨ç¯å¢åé\n\nconsole.log(process.env.VUE_APP_NOT_SECRET_CODE); // some_value\n\n\n\n# å®ç°åç\n\næ´ä¸ªè¿ç¨å¶å®åä¸ºä¸¤æ­¥ï¼\n\n 1. å¦ä½è¯»å .env ä¸­çåé\n 2. å¦ä½å¨å®¢æ·ç«¯ä¾§ä»£ç ä¸­å¨å±ä½¿ç¨\n\nå¨ä»ç»ä¹åï¼åæ¥å¤ä¹ ä¸äºç¸å³çç¥è¯ç¹ã\n\n\n# process.env\n\nprocess å¯¹è±¡æä¾æå³å½å Node.js è¿ç¨çä¿¡æ¯å¹¶å¯¹å¶è¿è¡æ§å¶ãå®å¯ä»¥ä½ä¸ºå¨å±å¯ç¨ã\n\nprocess.env å±æ§è¿ååå«ç¨æ·ç¯å¢çå¯¹è±¡ï¼åå«äºå½åShellçææç¯å¢åéãæ¯å¦ï¼process.env.HOME è¿åç¨æ·çä¸»ç®å½ã\n\n// å¯ä»¥ç´æ¥å¨ node ç¨åºä¸­è¾åº\nconsole.log(process.env);\n\n\né¡¹ç®ä¸­éå¸¸çåæ³æ¯ï¼æ°å»ºä¸ä¸ªç¯å¢åéNODE_ENVï¼ç¨å®ç¡®å®å½åæå¤çé¶æ®µï¼çäº§é¶æ®µè®¾ä¸º productionï¼å¼åé¶æ®µè®¾ä¸º developmentãNODE_ENV è¿ä¸ªåç§°åªæ¯å¼åç¤¾åºçä¸ç§å±è¯ï¼åç§°åå®¹æ¯å¯ä»¥ä¿®æ¹çã\n\nå¦ä½è®¾ç½® è¿ä¸ª process.env.NODE_ENV ç¯å¢åéå¢ï¼å¨webpacké¡¹ç®éï¼æä»¬å¯ä»¥éè¿è®¾ç½®package.jsonæ¥å®ç°ï¼ä½æ¯Windows ç³»ç»åMacç³»ç»æåºå«ã\n\n// windows\n{\n  "scripts": {\n    "dev": "set NODE_ENV=development &&  webpack-dev-server --open --hot",\n    "build": "set NODE_ENV=production &&   --progress --hide-modules"\n  }\n}\n\n// mac\n{\n  "scripts": {\n    "dev": "export NODE_ENV=development &&  webpack-dev-server --open --hot",\n    "build": "export NODE_ENV=production &&   --progress --hide-modules"\n  }\n}\n\n\ncross-env æ¯ä¸ä¸ªè·¨å¹³å°è®¾ç½®ç¯å¢åéçç¬¬ä¸æ¹åï¼å®å¯ä»¥è®©ä½ åªéç½®ä¸è¡å½ä»¤ï¼å°±è½è½»æ¾å°å¨å¤ä¸ªå¹³å°è®¾ç½®ç¯å¢åéã\n\n{\n  ...\n  "scripts": {\n    "dev": "cross-env NODE_ENV=development webpack-dev-server --open --hot",\n    "build": "cross-env NODE_ENV=production webpack --mode=production  --progress --hide-modules"\n  },\n}\n\n\nè¿æ ·æä»¬å°±å¯ä»¥å¨é¡¹ç®éåå° process.env.NODE_ENV çå¼ï¼ç¶åå©ç¨è¿ä¸ªå¼æ¥åºåå½åç¯å¢ã\n\n\n# process.cwd\n\nprocess.cwd() æ¹æ³è¿å Node.js è¿ç¨çå½åå·¥ä½ç®å½ã\n\n\n# compiler\n\nCompiler å¯¹è±¡åå«äºå½åè¿è¡Webpackçéç½®ï¼åæ¬entryãoutputãloadersç­éç½®ï¼è¿ä¸ªå¯¹è±¡å¨å¯å¨Webpackæ¶è¢«å®ä¾åï¼èä¸æ¯å¨å±å¯ä¸çãPluginå¯ä»¥éè¿è¯¥å¯¹è±¡è·åå° Webpack çéç½®ä¿¡æ¯è¿è¡å¤çã\n\n\n# webpack.DefinePlugin\n\nDefinePlugin åè®¸å¨ ç¼è¯æ¶ å°ä½ ä»£ç ä¸­çåéæ¿æ¢ä¸ºå¶ä»å¼æè¡¨è¾¾å¼ã\n\næ¢ç§æ¹å¼çè§£å°±æ¯å¯ä»¥ååºç¨ä¸­æ³¨å¥å¨å±åéã\n\nTIP\n\nè¯·æ³¨æï¼ç±äºæ¬æä»¶ä¼ç´æ¥æ¿æ¢ææ¬ï¼å æ­¤æä¾çå¼å¿é¡»å¨å­ç¬¦ä¸²æ¬èº«ä¸­ååå«ä¸ä¸ª å®éçå¼å· ãéå¸¸ï¼å¯ä»¥ä½¿ç¨ç±»ä¼¼ \'"production"\' è¿æ ·çæ¿æ¢å¼å·ï¼æèç´æ¥ç¨ JSON.stringify(\'production\')ã\n\n// è¿æ ·åçè¯\nnew webpack.DefinePlugin({\n    \'process.env.NODE_ENV\': \'production\',\n})\n\n// productionæ¯ä¸ä¸ªåéï¼å¹¶ä¸æ¯æä»¬æ³è±¡ä¸­çå­ç¬¦ä¸²\nif (production === \'production\') {\n    console.log(\'production\');\n}\n\n\n// æä»¥éè¦è¿ä¹å\nnew webpack.DefinePlugin({\n    \'process.env.NODE_ENV\': JSON.stringify(\'production\'),\n})\n// æè\nnew webpack.DefinePlugin({\n    \'process.env.NODE_ENV\': \'"production"\',\n})\n\n\n\n# å·ä½å®ç°\n\né¦åæä»¬éè¦è¯»å .env æä»¶ä¸­çåå®¹å¹¶è§£æåºæ¥ï¼å¹¶èµå¼å° process.env ä¸­å»ã\n\nè¿éå¯ä»¥ç¨å°å·¥å·åº dotenvï¼ä½¿ç¨å¶ä¸­ç parse æ¹æ³æ¥è§£æã\n\nimport * as dotenv from \'dotenv\';\n// ä» .env æä»¶ä¸­ååºåéèµå¼ç» process.env\nfunction loadEnv (mode) {\n    // å½åè·¯å¾\n    const basePath = path.resolve(process.cwd());\n\n    const load = envPath => {\n        let env = {};\n        try {\n            const content = fs.readFileSync(envPath);\n            env = dotenv.parse(content) || {};\n        } catch (err) {\n            if (err.toString().indexOf(\'ENOENT\') < 0) {\n                logger.error(err);\n            }\n        }\n        return env;\n    };\n\n    let env = {};\n    // æ³¨ææ­¤å¤çä¼åçº§\n    [\'.env\', `.env.${mode}`, `.env.${mode}.local`].forEach(envName => {\n        const envPath = path.resolve(basePath, envName);\n        if (fs.existsSync(envPath)) {\n            env = Object.assign(env, load(envPath));\n        }\n    });\n    process.env.NODE_ENV = mode;\n    Object.keys(env).forEach(key => {\n        if (!process.env.hasOwnProperty(key)) {\n            process.env[key] = env[key];\n        }\n    });\n}\n\n\næ¾å° cli é¡¹ç®ä¸­ webpack éç½®é¡¹çé¨åï¼ä½¿ç¨ webpack.DefinePlugin æ¥æ³¨å¥åé\n\nmodule: {\n  \trules: [],\n    plugins: [\n      new webpack.DefinePlugin({\n        ...resolveClientEnv(),\n        \'__GLOBAL_VAR__\': \'1\'\n      })\n    ]\n}\n\n\nå¶ä¸­ç resolveClientEnv çåè½æ¯ä» process.env ä¸­è§£æåºæ¥ç¨å°çåéï¼å ä¸ºå¶ä¸­çåéä¸ä¸å®é½æ¯æä»¬æéè¦çï¼åæ¶æä»¬ä¹å¯ä»¥å¨è¿ä¸ªæ¹æ³ä¸­è¦æ±åéåçåç¼ï¼å³ä¸æ»¡è¶³åç¼è¦æ±çä¸è½è¢«è§£æã\n\n/**\n * è§£æ process.env ä¸­ç¬¦åè¦æ±çåéå¨å®¢æç«¯ä¾§ä½¿ç¨\n * è¦æ±åéåç¼ç¬¦å: GLOBAL_VAR_\n */\nexport function resolveClientEnv () {\n    const prefixRE = /^GLOBAL_VAR_/;\n    const env = {};\n    Object.keys(process.env).forEach(key => {\n        if (prefixRE.test(key) || key === \'NODE_ENV\') {\n            env[key] = process.env[key];\n        }\n    });\n\n    for (const key in env) {\n        env[key] = JSON.stringify(env[key]);\n    }\n    return {\n        \'process.env\': env\n    };\n}\n\n\n\n# å¦ä½éªè¯\n\nå¨é¡¹ç®ä¸­åå»º .envã.env.developmentã.env.production ä¸ä¸ªæä»¶ï¼ä½¿ç¨ cli å¯å¨é¡¹ç®ï¼æµè¯å®¢æ·ç«¯ä¾§ä»£ç ä¸­çåéè¾åºåä¼åçº§ã\n\n\n# æ»ç»\n\nç»¼ä¸æè¿°ï¼é¡¹ç®ä¸­ä½¿ç¨ç process.env å¶å®å node ä¸­ç process.env ä¸æ¯ä¸åäºï¼é¡¹ç®ä¸­ä½¿ç¨çæ¯æä»¬èªå®ä¹çå¨å±åéï¼å¯ä»¥æ´æ¹ä¸ºå¶ä»åå­ï¼å®ç°åçå¶å®æ¯ webpack + dotenv + webpack.definePlugin çä½ç¨ã\n\nnode ä¸­ç process.env æ¯èªå¸¦ç apiã',normalizedContent:'# process.envå¨å±åé\n\nä¼æå¨ç¥ï¼vue-cli ä¸­æ .env åå»ºå¨å±åéçåè½ï¼é¡¹ç®ä¸­å¯ä»¥ç´æ¥ä½¿ç¨ process.env.[åéå] æ¥ä½¿ç¨ã\n\næè¿å¨å¬å¸èªç  cli åå»ºçé¡¹ç®ä¸­å¹¶æ²¡æåç°æ­¤åè½ï¼äºæ¯æç®äºè§£ä¸ä¸ process.env çåçå¹¶æ¢ç´¢å¦ä½å¨ cli å·¥å·ä¸­å®ç°è¯»å .env ç¯å¢åéçåè½ï¼ä½¿å¶å¨å®¢æ·ç«¯ä¾§ä½¿ç¨ã\n\n\n# vue-cli\n\né¦åæä»¬çä¸ä¸ vue-cli çç¸å³æ¦å¿µï¼åæå°å\n\n\n# æ¨¡å¼\n\nä¸ä¸ª vue cli é¡¹ç®æä¸ä¸ªæ¨¡å¼ï¼\n\n * development æ¨¡å¼ç¨äº vue-cli-service serve\n * test æ¨¡å¼ç¨äº vue-cli-service test:unit\n * production æ¨¡å¼ç¨äº vue-cli-service build å vue-cli-service test:e2e\n\nå½è¿è¡ vue-cli-service å½ä»¤æ¶ï¼ææçç¯å¢åéé½ä»å¯¹åºçç¯å¢æä»¶ä¸­è½½å¥ãå¦ææä»¶åé¨ä¸åå« node_env åéï¼å®çå¼å°åå³äºæ¨¡å¼ï¼ä¾å¦ï¼\n\n * å¨ production æ¨¡å¼ä¸è¢«è®¾ç½®ä¸º "production"\n * å¨ test æ¨¡å¼ä¸è¢«è®¾ç½®ä¸º "test"ï¼é»è®¤åæ¯ "development"ã\n\n\n# ç¯å¢åé\n\nä½ å¯ä»¥å¨ä½ çé¡¹ç®æ ¹ç®å½ä¸­æ¾ç½®ä¸åæä»¶æ¥æå®ç¯å¢åéï¼\n\n.env                # å¨ææçç¯å¢ä¸­è¢«è½½å¥\n.env.local          # å¨ææçç¯å¢ä¸­è¢«è½½å¥ï¼ä½ä¼è¢« git å¿½ç¥\n.env.[mode]         # åªå¨æå®çæ¨¡å¼ä¸­è¢«è½½å¥\n.env.[mode].local   # åªå¨æå®çæ¨¡å¼ä¸­è¢«è½½å¥ï¼ä½ä¼è¢« git å¿½ç¥\n\n\nä¸ä¸ªç¯å¢æä»¶åªåå«ç¯å¢åéçâé®=å¼âå¯¹ï¼\n\nfoo=bar\nvue_app_not_secret_code=some_value\n\n\n\n# ä¼åçº§\n\nä¸ºä¸ä¸ªç¹å®æ¨¡å¼åå¤çç¯å¢æä»¶ï¼ä¾å¦ .env.productionï¼å°ä¼æ¯ä¸è¬çç¯å¢æä»¶ï¼ä¾å¦ .envï¼æ¥ææ´é«çä¼åçº§ã\n\n\n# å¨å®¢æ·ç«¯ä¾§ä»£ç ä¸­ä½¿ç¨ç¯å¢åé\n\nconsole.log(process.env.vue_app_not_secret_code); // some_value\n\n\n\n# å®ç°åç\n\næ´ä¸ªè¿ç¨å¶å®åä¸ºä¸¤æ­¥ï¼\n\n 1. å¦ä½è¯»å .env ä¸­çåé\n 2. å¦ä½å¨å®¢æ·ç«¯ä¾§ä»£ç ä¸­å¨å±ä½¿ç¨\n\nå¨ä»ç»ä¹åï¼åæ¥å¤ä¹ ä¸äºç¸å³çç¥è¯ç¹ã\n\n\n# process.env\n\nprocess å¯¹è±¡æä¾æå³å½å node.js è¿ç¨çä¿¡æ¯å¹¶å¯¹å¶è¿è¡æ§å¶ãå®å¯ä»¥ä½ä¸ºå¨å±å¯ç¨ã\n\nprocess.env å±æ§è¿ååå«ç¨æ·ç¯å¢çå¯¹è±¡ï¼åå«äºå½åshellçææç¯å¢åéãæ¯å¦ï¼process.env.home è¿åç¨æ·çä¸»ç®å½ã\n\n// å¯ä»¥ç´æ¥å¨ node ç¨åºä¸­è¾åº\nconsole.log(process.env);\n\n\né¡¹ç®ä¸­éå¸¸çåæ³æ¯ï¼æ°å»ºä¸ä¸ªç¯å¢åénode_envï¼ç¨å®ç¡®å®å½åæå¤çé¶æ®µï¼çäº§é¶æ®µè®¾ä¸º productionï¼å¼åé¶æ®µè®¾ä¸º developmentãnode_env è¿ä¸ªåç§°åªæ¯å¼åç¤¾åºçä¸ç§å±è¯ï¼åç§°åå®¹æ¯å¯ä»¥ä¿®æ¹çã\n\nå¦ä½è®¾ç½® è¿ä¸ª process.env.node_env ç¯å¢åéå¢ï¼å¨webpacké¡¹ç®éï¼æä»¬å¯ä»¥éè¿è®¾ç½®package.jsonæ¥å®ç°ï¼ä½æ¯windows ç³»ç»åmacç³»ç»æåºå«ã\n\n// windows\n{\n  "scripts": {\n    "dev": "set node_env=development &&  webpack-dev-server --open --hot",\n    "build": "set node_env=production &&   --progress --hide-modules"\n  }\n}\n\n// mac\n{\n  "scripts": {\n    "dev": "export node_env=development &&  webpack-dev-server --open --hot",\n    "build": "export node_env=production &&   --progress --hide-modules"\n  }\n}\n\n\ncross-env æ¯ä¸ä¸ªè·¨å¹³å°è®¾ç½®ç¯å¢åéçç¬¬ä¸æ¹åï¼å®å¯ä»¥è®©ä½ åªéç½®ä¸è¡å½ä»¤ï¼å°±è½è½»æ¾å°å¨å¤ä¸ªå¹³å°è®¾ç½®ç¯å¢åéã\n\n{\n  ...\n  "scripts": {\n    "dev": "cross-env node_env=development webpack-dev-server --open --hot",\n    "build": "cross-env node_env=production webpack --mode=production  --progress --hide-modules"\n  },\n}\n\n\nè¿æ ·æä»¬å°±å¯ä»¥å¨é¡¹ç®éåå° process.env.node_env çå¼ï¼ç¶åå©ç¨è¿ä¸ªå¼æ¥åºåå½åç¯å¢ã\n\n\n# process.cwd\n\nprocess.cwd() æ¹æ³è¿å node.js è¿ç¨çå½åå·¥ä½ç®å½ã\n\n\n# compiler\n\ncompiler å¯¹è±¡åå«äºå½åè¿è¡webpackçéç½®ï¼åæ¬entryãoutputãloadersç­éç½®ï¼è¿ä¸ªå¯¹è±¡å¨å¯å¨webpackæ¶è¢«å®ä¾åï¼èä¸æ¯å¨å±å¯ä¸çãpluginå¯ä»¥éè¿è¯¥å¯¹è±¡è·åå° webpack çéç½®ä¿¡æ¯è¿è¡å¤çã\n\n\n# webpack.defineplugin\n\ndefineplugin åè®¸å¨ ç¼è¯æ¶ å°ä½ ä»£ç ä¸­çåéæ¿æ¢ä¸ºå¶ä»å¼æè¡¨è¾¾å¼ã\n\næ¢ç§æ¹å¼çè§£å°±æ¯å¯ä»¥ååºç¨ä¸­æ³¨å¥å¨å±åéã\n\ntip\n\nè¯·æ³¨æï¼ç±äºæ¬æä»¶ä¼ç´æ¥æ¿æ¢ææ¬ï¼å æ­¤æä¾çå¼å¿é¡»å¨å­ç¬¦ä¸²æ¬èº«ä¸­ååå«ä¸ä¸ª å®éçå¼å· ãéå¸¸ï¼å¯ä»¥ä½¿ç¨ç±»ä¼¼ \'"production"\' è¿æ ·çæ¿æ¢å¼å·ï¼æèç´æ¥ç¨ json.stringify(\'production\')ã\n\n// è¿æ ·åçè¯\nnew webpack.defineplugin({\n    \'process.env.node_env\': \'production\',\n})\n\n// productionæ¯ä¸ä¸ªåéï¼å¹¶ä¸æ¯æä»¬æ³è±¡ä¸­çå­ç¬¦ä¸²\nif (production === \'production\') {\n    console.log(\'production\');\n}\n\n\n// æä»¥éè¦è¿ä¹å\nnew webpack.defineplugin({\n    \'process.env.node_env\': json.stringify(\'production\'),\n})\n// æè\nnew webpack.defineplugin({\n    \'process.env.node_env\': \'"production"\',\n})\n\n\n\n# å·ä½å®ç°\n\né¦åæä»¬éè¦è¯»å .env æä»¶ä¸­çåå®¹å¹¶è§£æåºæ¥ï¼å¹¶èµå¼å° process.env ä¸­å»ã\n\nè¿éå¯ä»¥ç¨å°å·¥å·åº dotenvï¼ä½¿ç¨å¶ä¸­ç parse æ¹æ³æ¥è§£æã\n\nimport * as dotenv from \'dotenv\';\n// ä» .env æä»¶ä¸­ååºåéèµå¼ç» process.env\nfunction loadenv (mode) {\n    // å½åè·¯å¾\n    const basepath = path.resolve(process.cwd());\n\n    const load = envpath => {\n        let env = {};\n        try {\n            const content = fs.readfilesync(envpath);\n            env = dotenv.parse(content) || {};\n        } catch (err) {\n            if (err.tostring().indexof(\'enoent\') < 0) {\n                logger.error(err);\n            }\n        }\n        return env;\n    };\n\n    let env = {};\n    // æ³¨ææ­¤å¤çä¼åçº§\n    [\'.env\', `.env.${mode}`, `.env.${mode}.local`].foreach(envname => {\n        const envpath = path.resolve(basepath, envname);\n        if (fs.existssync(envpath)) {\n            env = object.assign(env, load(envpath));\n        }\n    });\n    process.env.node_env = mode;\n    object.keys(env).foreach(key => {\n        if (!process.env.hasownproperty(key)) {\n            process.env[key] = env[key];\n        }\n    });\n}\n\n\næ¾å° cli é¡¹ç®ä¸­ webpack éç½®é¡¹çé¨åï¼ä½¿ç¨ webpack.defineplugin æ¥æ³¨å¥åé\n\nmodule: {\n  \trules: [],\n    plugins: [\n      new webpack.defineplugin({\n        ...resolveclientenv(),\n        \'__global_var__\': \'1\'\n      })\n    ]\n}\n\n\nå¶ä¸­ç resolveclientenv çåè½æ¯ä» process.env ä¸­è§£æåºæ¥ç¨å°çåéï¼å ä¸ºå¶ä¸­çåéä¸ä¸å®é½æ¯æä»¬æéè¦çï¼åæ¶æä»¬ä¹å¯ä»¥å¨è¿ä¸ªæ¹æ³ä¸­è¦æ±åéåçåç¼ï¼å³ä¸æ»¡è¶³åç¼è¦æ±çä¸è½è¢«è§£æã\n\n/**\n * è§£æ process.env ä¸­ç¬¦åè¦æ±çåéå¨å®¢æç«¯ä¾§ä½¿ç¨\n * è¦æ±åéåç¼ç¬¦å: global_var_\n */\nexport function resolveclientenv () {\n    const prefixre = /^global_var_/;\n    const env = {};\n    object.keys(process.env).foreach(key => {\n        if (prefixre.test(key) || key === \'node_env\') {\n            env[key] = process.env[key];\n        }\n    });\n\n    for (const key in env) {\n        env[key] = json.stringify(env[key]);\n    }\n    return {\n        \'process.env\': env\n    };\n}\n\n\n\n# å¦ä½éªè¯\n\nå¨é¡¹ç®ä¸­åå»º .envã.env.developmentã.env.production ä¸ä¸ªæä»¶ï¼ä½¿ç¨ cli å¯å¨é¡¹ç®ï¼æµè¯å®¢æ·ç«¯ä¾§ä»£ç ä¸­çåéè¾åºåä¼åçº§ã\n\n\n# æ»ç»\n\nç»¼ä¸æè¿°ï¼é¡¹ç®ä¸­ä½¿ç¨ç process.env å¶å®å node ä¸­ç process.env ä¸æ¯ä¸åäºï¼é¡¹ç®ä¸­ä½¿ç¨çæ¯æä»¬èªå®ä¹çå¨å±åéï¼å¯ä»¥æ´æ¹ä¸ºå¶ä»åå­ï¼å®ç°åçå¶å®æ¯ webpack + dotenv + webpack.defineplugin çä½ç¨ã\n\nnode ä¸­ç process.env æ¯èªå¸¦ç apiã',charsets:{cjk:!0}},{title:"é¢åå¯¹è±¡ç¼ç¨",frontmatter:{title:"é¢åå¯¹è±¡ç¼ç¨",date:"2019-01-18T16:00:54.000Z",categories:"è®¾è®¡æ¨¡å¼"},regularPath:"/design-pattern/object.html",relativePath:"design-pattern/object.md",key:"v-5946fd9f",path:"/design-pattern/object.html",headers:[{level:2,title:"å¦ä½åå»ºä¸ä¸ªç±»",slug:"å¦ä½åå»ºä¸ä¸ªç±»",normalizedTitle:"å¦ä½åå»ºä¸ä¸ªç±»",charIndex:93},{level:3,title:"å±æ§ä¸æ¹æ³çå°è£",slug:"å±æ§ä¸æ¹æ³çå°è£",normalizedTitle:"å±æ§ä¸æ¹æ³çå°è£",charIndex:427},{level:2,title:"éè¿é­åå®ç°ç±»çéæåé",slug:"éè¿é­åå®ç°ç±»çéæåé",normalizedTitle:"éè¿é­åå®ç°ç±»çéæåé",charIndex:1521},{level:2,title:"åå»ºå¯¹è±¡çå®å¨æ¨¡å¼",slug:"åå»ºå¯¹è±¡çå®å¨æ¨¡å¼",normalizedTitle:"åå»ºå¯¹è±¡çå®å¨æ¨¡å¼",charIndex:2534},{level:3,title:"ç»§æ¿",slug:"ç»§æ¿",normalizedTitle:"ç»§æ¿",charIndex:3208},{level:3,title:"æé å½æ°ç»§æ¿",slug:"æé å½æ°ç»§æ¿",normalizedTitle:"æé å½æ°ç»§æ¿",charIndex:4093},{level:3,title:"ç»åç»§æ¿",slug:"ç»åç»§æ¿",normalizedTitle:"ç»åç»§æ¿",charIndex:4959},{level:3,title:"ååå¼ç»§æ¿",slug:"ååå¼ç»§æ¿",normalizedTitle:"ååå¼ç»§æ¿",charIndex:5940},{level:3,title:"å¯çå¼ç»§æ¿",slug:"å¯çå¼ç»§æ¿",normalizedTitle:"å¯çå¼ç»§æ¿",charIndex:6330},{level:3,title:"å¯çç»åå¼ç»§æ¿",slug:"å¯çç»åå¼ç»§æ¿",normalizedTitle:"å¯çç»åå¼ç»§æ¿",charIndex:6685},{level:3,title:"ç»§æ¿åå¯¹è±¡å±æ§çextendæ¹æ³",slug:"ç»§æ¿åå¯¹è±¡å±æ§çextendæ¹æ³",normalizedTitle:"ç»§æ¿åå¯¹è±¡å±æ§çextendæ¹æ³",charIndex:8063},{level:3,title:"å¤ç»§æ¿",slug:"å¤ç»§æ¿",normalizedTitle:"å¤ç»§æ¿",charIndex:8269},{level:2,title:"å¤æ",slug:"å¤æ",normalizedTitle:"å¤æ",charIndex:9044},{level:3,title:"ç±»å½¢å¼å®ç°",slug:"ç±»å½¢å¼å®ç°",normalizedTitle:"ç±»å½¢å¼å®ç°",charIndex:9470}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"å¦ä½åå»ºä¸ä¸ªç±» å±æ§ä¸æ¹æ³çå°è£ éè¿é­åå®ç°ç±»çéæåé åå»ºå¯¹è±¡çå®å¨æ¨¡å¼ ç»§æ¿ æé å½æ°ç»§æ¿ ç»åç»§æ¿ ååå¼ç»§æ¿ å¯çå¼ç»§æ¿ å¯çç»åå¼ç»§æ¿ ç»§æ¿åå¯¹è±¡å±æ§çextendæ¹æ³ å¤ç»§æ¿ å¤æ ç±»å½¢å¼å®ç°",content:"# é¢åå¯¹è±¡ç¼ç¨\n\nJavaScriptè¿ç§è§£éåçå¼±ç±»åè¯­è¨æ²¡æç»å¸å¼ºç±»åè¯­è¨ä¸­é£ç§éè¿classç­å³é®å­å®ç°ç±»çå°è£æ¹å¼ï¼JavaScriptä¸­é½æ¯éè¿ä¸äºç¹æ§æ¨¡ä»¿å®ç°çã\n\n\n# å¦ä½åå»ºä¸ä¸ªç±»\n\né¦åå£°æä¸ä¸ªå½æ°ä¿å­å¨ä¸ä¸ªåééï¼ç¶åå¨è¿ä¸ªå½æ°ï¼ç±»ï¼çåé¨éè¿thisåéæ·»å å±æ§æèæ¹æ³æ¥å®ç°å¯¹ç±»æ·»å å±æ§æèæ¹æ³ã\n\nvar Book = functoin(id,bookname,price){\n    this.id = id;\n    this.bookname = bookname;\n    this.price = price;\n}\n//è¿æ ·æä»¬å®ç°äºå°è£ï¼å½ä½¿ç¨åè½æ¹æ³æ¶ï¼æä»¬ä¸è½ç´æ¥ä½¿ç¨è¿ä¸ªBookç±»ï¼éè¦ç¨newå³é®å­æ¥å®ä¾å\n//å¯ä»¥ä½¿ç¨ç¹è¯­æ³è®¿é®å®ä¾åå¯¹è±¡çå±æ§åæ¹æ³\n\nvar book = new Book(10,'è®¾è®¡æ¨¡å¼',50);\nconsole.log(book.bookname);//è®¾è®¡æ¨¡å¼\n\n\n\n# å±æ§ä¸æ¹æ³çå°è£\n\nç±äºJavaScriptçå½æ°çº§ä½ç¨åï¼å£°æå¨å½æ°åé¨çåéä»¥åæ¹æ³å¨å¤çæ¯è®¿é®ä¸å°çï¼ç§æåéï¼ç§ææ¹æ³\n\nå½æ°åé¨éè¿thisåå»ºçå±æ§å¯çåæ¯å¯¹è±¡çï¼å±æå±æ§ï¼å±ææ¹æ³\n\nèéè¿thisåå»ºçæ¹æ³ï¼ä¸ä½å¯ä»¥è®¿é®å°å¯¹è±¡çå±æå±æ§ä¸å±ææ¹æ³ï¼èä¸è¿è½è®¿é®å°ç§æå±æ§åç§ææ¹æ³ï¼å¯ä»¥çåï¼ç¹ææ¹æ³\n\nå¨å¯¹è±¡åå»ºæ¶éè¿è¿äºç¹ææ¹æ³å¯ä»¥åå§åå®ä¾å¯¹è±¡çä¸äºå±æ§ï¼æé å¨\n\nvar Book = function(id,name,price){\n    //ç§æå±æ§\n    var num = 1;\n    //ç§ææ¹æ³\n    function checkId(){\n        \n    };\n    //ç¹ææ¹æ³\n    this.getName = function(){};\n    this.getPrice = function(){};\n    this.setName = function(){};\n    this.setPrice = function(){};\n    //å¯¹è±¡å¬æå±æ§\n    this.copy = function(){};\n    //æé å¨\n    this.setName(name);\n    this.setPrice(price);\n}\n\n\nå¨ç±»å¤é¢éè¿ç¹è¯­æ³å®ä¹çå±æ§ä»¥åæ¹æ³è¢«ç§°ä¸ºç±»çéæå±æå±æ§åç±»çéæå±ææ¹æ³\n\nprototypeå¯¹è±¡ä¸­çå±æ§åæ¹æ³ç§°ä¸ºå±æå±æ§åå±ææ¹æ³\n\nï¼ æ éå®ä¾åå°±å¯ä»¥è°ç¨çæ¹æ³å°±å«éææ¹æ³ã ï¼\n\n//ç±»éæå¬æå±æ§ï¼æ¹æ³\nBook.isChinese = true;\nBook.resetTime = function(){\n    console.log('new Time')\n};\nBook.prototype = {\n    //å¬æå±æ§\n    isJSBook: false\n    //å¬ææ¹æ³\n    display: function(){}\n}\n\n//æµè¯ä»£ç \nvar b = new Book(11,'è®¾è®¡æ¨¡å¼',50)ï¼\nconsole.log(b.num);     //undefined\nconsole.log(b.isJSBook);//false\nconsole.log(b.id);      //11\nconsole.log(b.isChinese);//undefined\nconsole.log(Book.isChinese);//true\nBook.resetTime();        //undefined\n\n\n\n# éè¿é­åå®ç°ç±»çéæåé\n\né­åæ¯ææè®¿é®å¦ä¸ä¸ªå½æ°ä½ç¨åä¸­åéçå½æ°ï¼å³å¨ä¸ä¸ªå½æ°åé¨åå»ºå¦å¤ä¸ä¸ªå½æ°ãæä»¬å°è¿ä¸ªé­åä½ä¸ºåå»ºå¯¹è±¡çæé å½æ°ï¼è¿æ ·ä»æ¢æ¯é­ååæ¯å¯å®ä¾å¯¹è±¡çå½æ°ï¼å³å¯è®¿é®å°ç±»å½æ°ä½ç¨åä¸­çåéï¼å¦\n\nbookNumï¼ éæç§æåé\n\ncheckBook()ï¼éæç§ææ¹æ³\n\nprice,checkID()ï¼é­ååé¨çç§æåéä»¥åç§ææ¹æ³\n\n//å©ç¨é­åå®ç°\nvar Book = (function(){\n    //éæç§æåé\n    var bookNum = 0;\n    //éæç§ææ¹æ³\n    function checkBook(name){}\n    //åå»ºç±»\n    function book(newId,newName,newPrice){\n        //ç§æåé\n        var name,price;\n        //ç§ææ¹æ³\n        function checkID(id){}\n        //ç¹ææ¹æ³\n        this.getName = function(){};\n        this.getPrice = function(){};\n        this.setName = function(){};\n        this.setPrice = function(){};\n        //å¬æå±æ§\n        this.id = newId;\n        //å¬ææ¹æ³\n        this.copy = function(){}\n        bookNum++\n        if(bookNum > 100)\n            throw new Error('æä»¬ä»åºç100æ¬ä¹¦')\n        //æé å¨\n        this.setName(name);\n        this.setPrice(price);\n    }\n    //æé åå\n    _book.prototype = {\n        //éæå¬æå±æ§\n        isJSBook:false,\n        //éæå¬ææ¹æ³\n        display: function(){}\n    };\n    //è¿åç±»\n    return _bookï¼\n})()\n\n\n\n# åå»ºå¯¹è±¡çå®å¨æ¨¡å¼\n\nvar Book = function(title,time,type){\n    this.title = title;\n    this.time = time;\n    this.type = type;\n}\n//å®ä¾åä¸æ¬ä¹¦\nvar book = Book('JavaScript','2014','js');\n//æµè¯\nconsole.log(book);//undefined\nconsole.log(window.title);//JavaScript\nconsole.log(window.time);//2014\nconsole.log(window.type);//js\n\n\nnewå³é®å­çä½ç¨å¯ä»¥çä½æ¯å¯¹å½åå¯¹è±¡çthisä¸åå°èµå¼\n\nä¾å­ä¸­æ²¡ænewï¼åä¼ç´æ¥æ§è¡è¿ä¸ªå½æ°\n\n//å¾ä¹¦å®å¨ç±»\nvar Book = function(title,time,type){\n    //å¤æ­æ§è¡è¿ç¨ä¸­thisæ¯å¦æ¯å½åè¿ä¸ªå¯¹è±¡ï¼å¦ææ¯è¯´ææ¯ç¨newåå»ºçï¼\n    if(this instanceof Book){\n        this.title = title;\n        this.time = time;\n        this.type = type;\n    }else{\n        return new Book((title,time,type);\n    }\n}\n//æµè¯\nvar book = Book('JavaScript','2014','js');\n\n\n\n# ç»§æ¿\n\n# ç±»å¼ç»§æ¿\n\n//å£°æç¶ç±»\nfunction SuperClass(){\n    this.superValue = true;\n}\n//ä¸ºç¶ç±»æ·»å å±ææ¹æ³\nSuperClass.prototype.getSuperValue = function(){\n  \treturn this.superValue;  \n};\n//å£°æå­ç±»\nfunction SubClass(){\n    this.subValue = false;\n}\n\n//ç»§æ¿ç¶ç±»\nSubClass.prototype = new SuperClass()'\n//ä¸ºå­ç±»æ·»å å±ææ¹æ³\nSubClass.prototype.getSubValue = function(){\n    return this.subValue;\n}'\n\n//æµè¯\nvar instance = new SubClass();\nconsole.log(instance.getSubValue);   //false\nconsole.log(instance.getSuperValue); //true\n\n\ninstanceof å¯ä»¥æ£æµæä¸ªå¯¹è±¡æ¯å¦æ¯æä¸ªç±»çå®ä¾\n\nconsole.log(instance instanceof SuperClass); //true\nconsole.log(instance instanceof SubClass);   //true\nconsole.log(SubClass instanceof SuperClass); //false\nconsole.log(SubClass.prototype instanceof SuperClass) //true\n\n//ææåå»ºçå¯¹è±¡é½æ¯åçå¯¹è±¡Objectçå®ä¾\n\n\nç¼ºç¹ï¼\n\n 1. ç¶ç±»ä¸­çå±æå±æ§è¦æ¯å¼ç¨ç±»åï¼å°±ä¼å¨å­ç±»ä¸­è¢«ææå®ä¾å±ç¨\n\n 2. ç±äºå­ç±»å®ç°çç»§æ¿æ¯é ååå¯¹ç¶ç±»çå®ä¾åå®ç°çï¼å æ­¤å¨åå»ºç¶ç±»çæ¶åï¼æ¯æ æ³åç¶ç±»ä¼ éåæ°çï¼å èå¨å®ä¾åç¶ç±»çæ¶åä¹æ æ³å¯¹ç¶ç±»æé å½æ°åçå±æ§è¿è¡åå§åã\n\n\n# æé å½æ°ç»§æ¿\n\n//å£°æç¶ç±»\nfunction SuperClass(id){\n    //å¼ç¨ç±»åå±æå±æ§\n    this.books = ['JavaScript','html','css'];\n    //å¼ç±»åå±æå±æ§\n    this.id = id;\n}\n\n//ç¶ç±»å£°æååæ¹æ³\nSuperClass.prototype.showBooks = function(){\n    console.log(this.books);\n}\n\n//å£°æå­ç±»\nfunction SubClass(id){\n    //ç»§æ¿ç¶ç±»\n    SuperClass.call(this,id);\n}\n\n//åå»ºç¬¬ä¸ä¸ªå­ç±»çå®ä¾\nvar instance1 = new SubClass(10);\n//åå»ºç¬¬äºä¸ªå­ç±»çå®ä¾\nvar instance2 = new SubClass(11);\n\ninstance1.books.push('è®¾è®¡æ¨¡å¼');\nconsole.log(instance1.books); //['JavaScript','html','css','è®¾è®¡æ¨¡å¼']\nconsole.log(instance1.id);  //10\nconsole.log(instance2.books); //['JavaScript','html','css']\nconsole.log(instance2.id);\t//11\n\ninstance1.showBooks(); //TypeError\n\n\nSuperClass.call(this,id);è¿æ¡è¯­å¥æ¯æé å½æ°ç»§æ¿çç²¾åï¼ç±äºcallè¿ä¸ªæ¹æ³å¯ä»¥æ´æ¹å½æ°çä½ç¨ç¯å¢ï¼å æ­¤å¨å­ç±»ä¸­ï¼å¯¹superClassè°ç¨è¿ä¸ªæ¹æ³å°±æ¯å°å­ç±»ä¸­çåéå¨ç¶ç±»ä¸­æ§è¡ä¸éï¼ç±äºç¶ç±»ä¸­æ¯ç»thisç»å®å±æ§çï¼å æ­¤å­ç±»ç»§æ¿äºç¶ç±»çå±æå±æ§ã\n\nç¼ºç¹ï¼ç¶ç±»çååæ¹æ³ä¸ä¼è¢«å­ç±»ç»§æ¿ï¼å¦æè¦è¢«ç»§æ¿å¿é¡»æ¾å¨æé å½æ°ä¸­ï¼è¿æ ·åå»ºåºæ¥çæ¯ä¸ªå®ä¾é½ä¼åç¬æ¥æä¸ä»½èä¸è½å±æï¼è¿åäºä»£ç å¤ç¨çååå¨\n\n\n# ç»åç»§æ¿\n\n * ç±»å¼ç»§æ¿æ¯éè¿å­ç±»çååå¯¹ç¶ç±»å®ä¾åæ¥å®ç°ç\n * æé å½æ°å¼ç»§æ¿æ¯éè¿å¨å­ç±»çæé å½æ°ä½ç¨ç¯å¢ä¸­æ§è¡ä¸æ¬¡ç¶ç±»çæé å½æ°æ¥å®ç°ç\n * ç»åç»§æ¿åæ¶å®ç°è¿ä¸¤ç¹\n\n//å£°æç¶ç±»\nfunction SuperClass(id){\n    //å¼ç¨ç±»åå±æå±æ§\n    this.books = ['JavaScript','html','css'];\n    //å¼ç±»åå±æå±æ§\n    this.name = name;\n}\n\n//ç¶ç±»å£°æååæ¹æ³\nSuperClass.prototype.getName = function(){\n    console.log(this.name);\n}\n\n//å£°æå­ç±»\nfunction SubClass(name,time){\n    //æé å½æ°ç»§æ¿ç¶ç±»nameå±æ§\n    SuperClass.call(this,name);\n}\n\n//ç±»å¼ç»§æ¿ \nSubClass.prototype = new SuperClass();\n//å­ç±»ååæ¹æ³\nSubClass.prototype.getTime = function(){\n    console.log(this.time)\n};\n\n//æµè¯\n\nvar instance1 = new SubClass('js book',2014);\ninstance1.books.push('è®¾è®¡æ¨¡å¼');\nconsole.log(instance1.books); //['JavaScript','html','css','è®¾è®¡æ¨¡å¼']\ninstance1.getName(); //js book\ninstance1.getTime();//2014\n\nvar instance2 = new SubClass('css book',2013);\nconsole.log(instance1.books); //['JavaScript','html','css']\ninstance1.getName(); //css book\ninstance1.getTime();//2013\n\n\nç¼ºç¹ï¼\n\n 1. ä½¿ç¨æé å½æ°ç»§æ¿æ¶æ§è¡äºä¸éç¶ç±»çæé å½æ°ï¼èå¨å®ç°å­ç±»ååçç±»å¼ç»§æ¿æ¶åè°ç¨äºä¸éç¶ç±»æé å½æ°ï¼å æ­¤ç¶ç±»æé å½æ°è°ç¨äºä¸¤éã\n\n\n# ååå¼ç»§æ¿\n\n//è¿æ¯å¯¹ç±»å¼ç»§æ¿çå°è£ï¼å¶ä¸­çè¿æ¸¡å¯¹è±¡å°±ç¸å½äºç±»å¼ç»§æ¿ä¸­çå­ç±»\nfunction inheritObkect(o){\n    //å£°æä¸ä¸ªè¿æ¸¡å½æ°å¯¹è±¡\n    function F(){}\n    //è¿æ¸¡å¯¹è±¡çååç»§æ¿ç¶å¯¹è±¡\n    F.prototype = o;\n    //è¿åè¿æ¸¡å¯¹è±¡çä¸ä¸ªå®ä¾ï¼è¯¥å®ä¾çååç»§æ¿äºç¶å¯¹è±¡\n    return new F();\n}\n\nvar book = {\n    name: 'js book',\n    alikeBook:['css book','html book']\n};\nvar newBook = inheritObkect(book);\nvar newBook.name = 'ajax book'\n\n\nè¿ç§æ¹å¼ç±äºFè¿æ¸¡ç±»ä¸­çæé å½æ°æ åå®¹ï¼æä»¥å¼éæ¯è¾å°ã\n\nç¼ºç¹ï¼ä»ç¶å­å¨ç±»å¼ç»§æ¿çç¼ºç¹\n\n\n# å¯çå¼ç»§æ¿\n\nvar book = {\n    name: 'js book',\n    alikeBook:['css book','html book']\n};\n\nfunction createBook(obj){\n    //éè¿ååç»§æ¿æ¹å¼åå»ºæ°å¯¹è±¡\n    var o = new inheritObject(obj);\n    //æå±æ°å¯¹è±¡\n    o.getName = function(){\n        console.log(name);\n    };\n    //è¿åæå±åçæ°å¯¹è±¡\n    return o;\n}\n\n\nå¯çå¼ç»§æ¿å°±æ¯å¯¹ååç»§æ¿çç¬¬äºæ¬¡å°è£ï¼å¹¶ä¸å¨è¿ç¬¬äºæ¬¡å°è£è¿ç¨ä¸­å¯¹ç»§æ¿çå¯¹è±¡è¿è¡äºæå±ï¼è¿æ ·æ°åå»ºçå¯¹è±¡ä¸ä»ä»æç¶ç±»ä¸­çå±æ§åæ¹æ³èä¸è¿æ·»å æ°çå±æ§åæ¹æ³\n\n\n# å¯çç»åå¼ç»§æ¿\n\nå¯çå¼ç»§æ¿ä¾æäºååç»§æ¿ï¼ååç»§æ¿åä¸ç±»å¼ç»§æ¿ç¸åã\n\nå¯çç»åå¼ç»§æ¿æ¯å¯çå¼ç»§æ¿åæé å½æ°ç»§æ¿ä¸¤ç§æ¨¡å¼çç»åï¼ä¹æ¯å¯¹ç»åç»§æ¿çæ¹è¿ã\n\nç»åç»§æ¿ = ç±»å¼ç»§æ¿+æé å½æ°ç»§æ¿ï¼å­ç±»ä¸æ¯ç¶ç±»çå®ä¾ï¼èå­ç±»çååæ¯ç¶ç±»çå®ä¾ï¼\n\nå¯çç»åå¼ç»§æ¿= å¯çå¼ç»§æ¿+æé å½æ°ç»§æ¿\n\nfunction inheritPrototype(subClass,superClass){\n    //å¤å¶ä¸ä»½ç¶ç±»çååå¯æ¬ä¿å­å¨åéä¸­\n    var p = inheritObject(superClass.prototype);\n    //ä¿®æ­£å ä¸ºéåå­ç±»ååå¯¼è´å­ç±»çconstructorå±æ§è¢«ä¿®æ¹\n    p.construcor = subClass;\n    //è®¾ç½®å­ç±»çåå\n    subClass.prototype = p;\n}\n\n\nç»åå¼ç»§æ¿ä¸­ï¼éè¿æé å½æ°ç»§æ¿çå±æ§åæ¹æ³æ¯æ²¡æé®é¢çï¼æä»¥æä»¬ä¸»è¦æ¢ç©¶éè¿å¯çå¼ç»§æ¿éæ°ç»§æ¿ç¶ç±»çååãå¨æé å½æ°ç»§æ¿ä¸­æä»¬å·²ç»è°ç¨äºç¶ç±»çæé å½æ°ãå æ­¤æä»¬éè¦çå°±æ¯ç¶ç±»çååå¯¹è±¡çä¸ä¸ªå¯æ¬ï¼è¿ä¸ªå¯æ¬æä»¬éè¿ååç»§æ¿ä¾¿å¯å¾å°ï¼ä½æ¯è¿ä¸ªå¤å¶å¯¹è±¡pä¸­çconstrustoræåçä¸æ¯subClassï¼å æ­¤å¨å¯çå¼ç»§æ¿ä¸­è¦å¯¹påä¸æ¬¡å¢å¼ºï¼ä¿®å¤å¶construstoræåä¸æ­£ç¡®çé®é¢ï¼åèµç»å­ç±»çååã\n\n\t\t//å®ä¹ç¶ç±»\n\t\tfunction SuperClass(name){\n\t\t\tthis.name = name;\n\t\t\tthis.colors = ['red','blue','green'];\n\t\t}\n\t\t//å®ä¹ç¶ç±»ååæ¹æ³\n\t\tSuperClass.prototype.getName = function(){\n\t\t\tconsole.log(this.name);\n\t\t}\n\t\t//å®ä¹å­ç±»\n\t\tfunction SubClass(name,time){\n\t\t\t//æé å½æ°å¼ç»§æ¿\n\t\t\tSuperClass.call(this,name);\n\t\t\t//å­ç±»æ°å¢å±æ§\n\t\t\tthis.time = time;\n\t\t}\n\t\t//å¯çå¼ç»§æ¿ç¶ç±»åå\n\t\tinheritPrototype(SubClass,SuperClass);\n\t\t//å­ç±»æ°å¢ååæ¹æ³\n\t\tSubClass.prototype.getTime = function(){\n\t\t\tconsole.log(this.time);\n\t\t};\n\n\t\t//æµè¯\n\t\tvar instance1 = new SubClass('js book',2014);\n\t\tvar instance2 = new SubClass('css book',2013);\n\n\t\tinstance1.colors.push('black');\n\t\tconsole.log(instance1.colors); //[\"red\", \"blue\", \"green\", \"black\"]\n\t\tconsole.log(instance2.colors); //[\"red\", \"blue\", \"green\"]\n\t\tinstance2.getTime(); //2013\n\t\tinstance2.getName(); //css book\n\n\n\n# ç»§æ¿åå¯¹è±¡å±æ§çextendæ¹æ³\n\n//åç»§æ¿ å±æ§å¤å¶\nvar extend = function(target,source){\n    //éåæºå¯¹è±¡ä¸­çå±æ§\n    for(var property in source){\n        target[property] = source[property];\n    }\n    //è¿åç®æ å¯¹è±¡\n    return target;\n}\n\n\n\n# å¤ç»§æ¿\n\nvar mix = function(){\n    var i = 1,                    //ä»ç¬¬äºä¸ªåæ°èµ·ä¸ºè¢«ç»§æ¿çå¯¹è±¡\n    \tlen = arguments.length,   //è·ååæ°é¿åº¦\n        target = arguments[0],    //ç¬¬ä¸ä¸ªå¯¹è±¡ä¸ºç®æ å¯¹è±¡\n        arg;                      //ç¼å­åæ°å¯¹è±¡\n    for(;i < len;i++){\n        arg = arguments[i];\n        for(var property in arg){\n            target[property] = arg[property];\n        }\n    }\n    return target;\n}\n\n\næä»¬ä¹å¯ä»¥å°å®ç»å®å°åçå¯¹è±¡Objectä¸ï¼è¿æ ·ææçå¯¹è±¡å°±å¯ä»¥æ¥æè¿ä¸ªæ¹æ³äºã\n\nObject.prototype.mix = function(){\n    var i = 1,                    //ä»ç¬¬äºä¸ªåæ°èµ·ä¸ºè¢«ç»§æ¿çå¯¹è±¡\n    \tlen = arguments.length,   //è·ååæ°é¿åº¦\n        arg;                      //ç¼å­åæ°å¯¹è±¡\n    for(;i < len;i++){\n        arg = arguments[i];\n        for(var property in arg){\n            this[property] = arg[property];\n        }\n    }\n}\n\n//æµè¯\notherBook.mix(book1,book2);\n\n\n\n# å¤æ\n\nå¤æï¼å¯¹åä¸ä¸ªæ¹æ³å¤ç§è°ç¨æ¹å¼ï¼è¦å¯¹ä¼ å¥çåæ°åå¤æ­ä»¥å®ç°å¤ç§è°ç¨æ¹å¼ï¼å¦ææä»¬å®ä¹ä¸ä¸ªaddæ¹æ³ï¼å¦æä¸ä¼ åæ°è¿å10ï¼å¦æä¼ ä¸ä¸ªåæ°è¿å10+åæ°ï¼å¦æä¼ ä¸¤ä¸ªåæ°è¿åç¸å çç»æ\n\nfunction add(){\n    //è·ååæ°\n    var arg = arguments;\n    //è·ååæ°é¿åº¦\n        len = arg.length;\n    switch(len){\n        case 0:\n            return 10;\n        case 1:\n            return 10 + arg[0];\n        case 2:\n            return arg[0] + arg[1];\n    }\n}\n\n//æµè¯\nconsole.log(add());\nconsole.log(add(5));\nconsole.log(add(6,7));\n\n\n\n# ç±»å½¢å¼å®ç°\n\nfunction Add(){\n    function zero(){\n        return 10;\n    }\n    function one(num){\n        return 10+num;\n    }\n    function two(num1,num2){\n        return num1+num2\n    }\n    //ç¸å å±ææ¹æ³\n    this.add = function(){\n        var arg = arguments;\n    \t//è·ååæ°é¿åº¦\n            len = arg.length;\n    switch(len){\n        case 0:\n            return zero();\n        case 1:\n            return one(arg[0]);\n        case 2:\n            return two(arg[0],arg[1]);\n    }\n}\n    \n//æµè¯\nvar A = new add();\nconsole.log(A.add());\nconsole.log(A.add(5));\nconsole.log(A.add(6,7))\n",normalizedContent:"# é¢åå¯¹è±¡ç¼ç¨\n\njavascriptè¿ç§è§£éåçå¼±ç±»åè¯­è¨æ²¡æç»å¸å¼ºç±»åè¯­è¨ä¸­é£ç§éè¿classç­å³é®å­å®ç°ç±»çå°è£æ¹å¼ï¼javascriptä¸­é½æ¯éè¿ä¸äºç¹æ§æ¨¡ä»¿å®ç°çã\n\n\n# å¦ä½åå»ºä¸ä¸ªç±»\n\né¦åå£°æä¸ä¸ªå½æ°ä¿å­å¨ä¸ä¸ªåééï¼ç¶åå¨è¿ä¸ªå½æ°ï¼ç±»ï¼çåé¨éè¿thisåéæ·»å å±æ§æèæ¹æ³æ¥å®ç°å¯¹ç±»æ·»å å±æ§æèæ¹æ³ã\n\nvar book = functoin(id,bookname,price){\n    this.id = id;\n    this.bookname = bookname;\n    this.price = price;\n}\n//è¿æ ·æä»¬å®ç°äºå°è£ï¼å½ä½¿ç¨åè½æ¹æ³æ¶ï¼æä»¬ä¸è½ç´æ¥ä½¿ç¨è¿ä¸ªbookç±»ï¼éè¦ç¨newå³é®å­æ¥å®ä¾å\n//å¯ä»¥ä½¿ç¨ç¹è¯­æ³è®¿é®å®ä¾åå¯¹è±¡çå±æ§åæ¹æ³\n\nvar book = new book(10,'è®¾è®¡æ¨¡å¼',50);\nconsole.log(book.bookname);//è®¾è®¡æ¨¡å¼\n\n\n\n# å±æ§ä¸æ¹æ³çå°è£\n\nç±äºjavascriptçå½æ°çº§ä½ç¨åï¼å£°æå¨å½æ°åé¨çåéä»¥åæ¹æ³å¨å¤çæ¯è®¿é®ä¸å°çï¼ç§æåéï¼ç§ææ¹æ³\n\nå½æ°åé¨éè¿thisåå»ºçå±æ§å¯çåæ¯å¯¹è±¡çï¼å±æå±æ§ï¼å±ææ¹æ³\n\nèéè¿thisåå»ºçæ¹æ³ï¼ä¸ä½å¯ä»¥è®¿é®å°å¯¹è±¡çå±æå±æ§ä¸å±ææ¹æ³ï¼èä¸è¿è½è®¿é®å°ç§æå±æ§åç§ææ¹æ³ï¼å¯ä»¥çåï¼ç¹ææ¹æ³\n\nå¨å¯¹è±¡åå»ºæ¶éè¿è¿äºç¹ææ¹æ³å¯ä»¥åå§åå®ä¾å¯¹è±¡çä¸äºå±æ§ï¼æé å¨\n\nvar book = function(id,name,price){\n    //ç§æå±æ§\n    var num = 1;\n    //ç§ææ¹æ³\n    function checkid(){\n        \n    };\n    //ç¹ææ¹æ³\n    this.getname = function(){};\n    this.getprice = function(){};\n    this.setname = function(){};\n    this.setprice = function(){};\n    //å¯¹è±¡å¬æå±æ§\n    this.copy = function(){};\n    //æé å¨\n    this.setname(name);\n    this.setprice(price);\n}\n\n\nå¨ç±»å¤é¢éè¿ç¹è¯­æ³å®ä¹çå±æ§ä»¥åæ¹æ³è¢«ç§°ä¸ºç±»çéæå±æå±æ§åç±»çéæå±ææ¹æ³\n\nprototypeå¯¹è±¡ä¸­çå±æ§åæ¹æ³ç§°ä¸ºå±æå±æ§åå±ææ¹æ³\n\nï¼ æ éå®ä¾åå°±å¯ä»¥è°ç¨çæ¹æ³å°±å«éææ¹æ³ã ï¼\n\n//ç±»éæå¬æå±æ§ï¼æ¹æ³\nbook.ischinese = true;\nbook.resettime = function(){\n    console.log('new time')\n};\nbook.prototype = {\n    //å¬æå±æ§\n    isjsbook: false\n    //å¬ææ¹æ³\n    display: function(){}\n}\n\n//æµè¯ä»£ç \nvar b = new book(11,'è®¾è®¡æ¨¡å¼',50)ï¼\nconsole.log(b.num);     //undefined\nconsole.log(b.isjsbook);//false\nconsole.log(b.id);      //11\nconsole.log(b.ischinese);//undefined\nconsole.log(book.ischinese);//true\nbook.resettime();        //undefined\n\n\n\n# éè¿é­åå®ç°ç±»çéæåé\n\né­åæ¯ææè®¿é®å¦ä¸ä¸ªå½æ°ä½ç¨åä¸­åéçå½æ°ï¼å³å¨ä¸ä¸ªå½æ°åé¨åå»ºå¦å¤ä¸ä¸ªå½æ°ãæä»¬å°è¿ä¸ªé­åä½ä¸ºåå»ºå¯¹è±¡çæé å½æ°ï¼è¿æ ·ä»æ¢æ¯é­ååæ¯å¯å®ä¾å¯¹è±¡çå½æ°ï¼å³å¯è®¿é®å°ç±»å½æ°ä½ç¨åä¸­çåéï¼å¦\n\nbooknumï¼ éæç§æåé\n\ncheckbook()ï¼éæç§ææ¹æ³\n\nprice,checkid()ï¼é­ååé¨çç§æåéä»¥åç§ææ¹æ³\n\n//å©ç¨é­åå®ç°\nvar book = (function(){\n    //éæç§æåé\n    var booknum = 0;\n    //éæç§ææ¹æ³\n    function checkbook(name){}\n    //åå»ºç±»\n    function book(newid,newname,newprice){\n        //ç§æåé\n        var name,price;\n        //ç§ææ¹æ³\n        function checkid(id){}\n        //ç¹ææ¹æ³\n        this.getname = function(){};\n        this.getprice = function(){};\n        this.setname = function(){};\n        this.setprice = function(){};\n        //å¬æå±æ§\n        this.id = newid;\n        //å¬ææ¹æ³\n        this.copy = function(){}\n        booknum++\n        if(booknum > 100)\n            throw new error('æä»¬ä»åºç100æ¬ä¹¦')\n        //æé å¨\n        this.setname(name);\n        this.setprice(price);\n    }\n    //æé åå\n    _book.prototype = {\n        //éæå¬æå±æ§\n        isjsbook:false,\n        //éæå¬ææ¹æ³\n        display: function(){}\n    };\n    //è¿åç±»\n    return _bookï¼\n})()\n\n\n\n# åå»ºå¯¹è±¡çå®å¨æ¨¡å¼\n\nvar book = function(title,time,type){\n    this.title = title;\n    this.time = time;\n    this.type = type;\n}\n//å®ä¾åä¸æ¬ä¹¦\nvar book = book('javascript','2014','js');\n//æµè¯\nconsole.log(book);//undefined\nconsole.log(window.title);//javascript\nconsole.log(window.time);//2014\nconsole.log(window.type);//js\n\n\nnewå³é®å­çä½ç¨å¯ä»¥çä½æ¯å¯¹å½åå¯¹è±¡çthisä¸åå°èµå¼\n\nä¾å­ä¸­æ²¡ænewï¼åä¼ç´æ¥æ§è¡è¿ä¸ªå½æ°\n\n//å¾ä¹¦å®å¨ç±»\nvar book = function(title,time,type){\n    //å¤æ­æ§è¡è¿ç¨ä¸­thisæ¯å¦æ¯å½åè¿ä¸ªå¯¹è±¡ï¼å¦ææ¯è¯´ææ¯ç¨newåå»ºçï¼\n    if(this instanceof book){\n        this.title = title;\n        this.time = time;\n        this.type = type;\n    }else{\n        return new book((title,time,type);\n    }\n}\n//æµè¯\nvar book = book('javascript','2014','js');\n\n\n\n# ç»§æ¿\n\n# ç±»å¼ç»§æ¿\n\n//å£°æç¶ç±»\nfunction superclass(){\n    this.supervalue = true;\n}\n//ä¸ºç¶ç±»æ·»å å±ææ¹æ³\nsuperclass.prototype.getsupervalue = function(){\n  \treturn this.supervalue;  \n};\n//å£°æå­ç±»\nfunction subclass(){\n    this.subvalue = false;\n}\n\n//ç»§æ¿ç¶ç±»\nsubclass.prototype = new superclass()'\n//ä¸ºå­ç±»æ·»å å±ææ¹æ³\nsubclass.prototype.getsubvalue = function(){\n    return this.subvalue;\n}'\n\n//æµè¯\nvar instance = new subclass();\nconsole.log(instance.getsubvalue);   //false\nconsole.log(instance.getsupervalue); //true\n\n\ninstanceof å¯ä»¥æ£æµæä¸ªå¯¹è±¡æ¯å¦æ¯æä¸ªç±»çå®ä¾\n\nconsole.log(instance instanceof superclass); //true\nconsole.log(instance instanceof subclass);   //true\nconsole.log(subclass instanceof superclass); //false\nconsole.log(subclass.prototype instanceof superclass) //true\n\n//ææåå»ºçå¯¹è±¡é½æ¯åçå¯¹è±¡objectçå®ä¾\n\n\nç¼ºç¹ï¼\n\n 1. ç¶ç±»ä¸­çå±æå±æ§è¦æ¯å¼ç¨ç±»åï¼å°±ä¼å¨å­ç±»ä¸­è¢«ææå®ä¾å±ç¨\n\n 2. ç±äºå­ç±»å®ç°çç»§æ¿æ¯é ååå¯¹ç¶ç±»çå®ä¾åå®ç°çï¼å æ­¤å¨åå»ºç¶ç±»çæ¶åï¼æ¯æ æ³åç¶ç±»ä¼ éåæ°çï¼å èå¨å®ä¾åç¶ç±»çæ¶åä¹æ æ³å¯¹ç¶ç±»æé å½æ°åçå±æ§è¿è¡åå§åã\n\n\n# æé å½æ°ç»§æ¿\n\n//å£°æç¶ç±»\nfunction superclass(id){\n    //å¼ç¨ç±»åå±æå±æ§\n    this.books = ['javascript','html','css'];\n    //å¼ç±»åå±æå±æ§\n    this.id = id;\n}\n\n//ç¶ç±»å£°æååæ¹æ³\nsuperclass.prototype.showbooks = function(){\n    console.log(this.books);\n}\n\n//å£°æå­ç±»\nfunction subclass(id){\n    //ç»§æ¿ç¶ç±»\n    superclass.call(this,id);\n}\n\n//åå»ºç¬¬ä¸ä¸ªå­ç±»çå®ä¾\nvar instance1 = new subclass(10);\n//åå»ºç¬¬äºä¸ªå­ç±»çå®ä¾\nvar instance2 = new subclass(11);\n\ninstance1.books.push('è®¾è®¡æ¨¡å¼');\nconsole.log(instance1.books); //['javascript','html','css','è®¾è®¡æ¨¡å¼']\nconsole.log(instance1.id);  //10\nconsole.log(instance2.books); //['javascript','html','css']\nconsole.log(instance2.id);\t//11\n\ninstance1.showbooks(); //typeerror\n\n\nsuperclass.call(this,id);è¿æ¡è¯­å¥æ¯æé å½æ°ç»§æ¿çç²¾åï¼ç±äºcallè¿ä¸ªæ¹æ³å¯ä»¥æ´æ¹å½æ°çä½ç¨ç¯å¢ï¼å æ­¤å¨å­ç±»ä¸­ï¼å¯¹superclassè°ç¨è¿ä¸ªæ¹æ³å°±æ¯å°å­ç±»ä¸­çåéå¨ç¶ç±»ä¸­æ§è¡ä¸éï¼ç±äºç¶ç±»ä¸­æ¯ç»thisç»å®å±æ§çï¼å æ­¤å­ç±»ç»§æ¿äºç¶ç±»çå±æå±æ§ã\n\nç¼ºç¹ï¼ç¶ç±»çååæ¹æ³ä¸ä¼è¢«å­ç±»ç»§æ¿ï¼å¦æè¦è¢«ç»§æ¿å¿é¡»æ¾å¨æé å½æ°ä¸­ï¼è¿æ ·åå»ºåºæ¥çæ¯ä¸ªå®ä¾é½ä¼åç¬æ¥æä¸ä»½èä¸è½å±æï¼è¿åäºä»£ç å¤ç¨çååå¨\n\n\n# ç»åç»§æ¿\n\n * ç±»å¼ç»§æ¿æ¯éè¿å­ç±»çååå¯¹ç¶ç±»å®ä¾åæ¥å®ç°ç\n * æé å½æ°å¼ç»§æ¿æ¯éè¿å¨å­ç±»çæé å½æ°ä½ç¨ç¯å¢ä¸­æ§è¡ä¸æ¬¡ç¶ç±»çæé å½æ°æ¥å®ç°ç\n * ç»åç»§æ¿åæ¶å®ç°è¿ä¸¤ç¹\n\n//å£°æç¶ç±»\nfunction superclass(id){\n    //å¼ç¨ç±»åå±æå±æ§\n    this.books = ['javascript','html','css'];\n    //å¼ç±»åå±æå±æ§\n    this.name = name;\n}\n\n//ç¶ç±»å£°æååæ¹æ³\nsuperclass.prototype.getname = function(){\n    console.log(this.name);\n}\n\n//å£°æå­ç±»\nfunction subclass(name,time){\n    //æé å½æ°ç»§æ¿ç¶ç±»nameå±æ§\n    superclass.call(this,name);\n}\n\n//ç±»å¼ç»§æ¿ \nsubclass.prototype = new superclass();\n//å­ç±»ååæ¹æ³\nsubclass.prototype.gettime = function(){\n    console.log(this.time)\n};\n\n//æµè¯\n\nvar instance1 = new subclass('js book',2014);\ninstance1.books.push('è®¾è®¡æ¨¡å¼');\nconsole.log(instance1.books); //['javascript','html','css','è®¾è®¡æ¨¡å¼']\ninstance1.getname(); //js book\ninstance1.gettime();//2014\n\nvar instance2 = new subclass('css book',2013);\nconsole.log(instance1.books); //['javascript','html','css']\ninstance1.getname(); //css book\ninstance1.gettime();//2013\n\n\nç¼ºç¹ï¼\n\n 1. ä½¿ç¨æé å½æ°ç»§æ¿æ¶æ§è¡äºä¸éç¶ç±»çæé å½æ°ï¼èå¨å®ç°å­ç±»ååçç±»å¼ç»§æ¿æ¶åè°ç¨äºä¸éç¶ç±»æé å½æ°ï¼å æ­¤ç¶ç±»æé å½æ°è°ç¨äºä¸¤éã\n\n\n# ååå¼ç»§æ¿\n\n//è¿æ¯å¯¹ç±»å¼ç»§æ¿çå°è£ï¼å¶ä¸­çè¿æ¸¡å¯¹è±¡å°±ç¸å½äºç±»å¼ç»§æ¿ä¸­çå­ç±»\nfunction inheritobkect(o){\n    //å£°æä¸ä¸ªè¿æ¸¡å½æ°å¯¹è±¡\n    function f(){}\n    //è¿æ¸¡å¯¹è±¡çååç»§æ¿ç¶å¯¹è±¡\n    f.prototype = o;\n    //è¿åè¿æ¸¡å¯¹è±¡çä¸ä¸ªå®ä¾ï¼è¯¥å®ä¾çååç»§æ¿äºç¶å¯¹è±¡\n    return new f();\n}\n\nvar book = {\n    name: 'js book',\n    alikebook:['css book','html book']\n};\nvar newbook = inheritobkect(book);\nvar newbook.name = 'ajax book'\n\n\nè¿ç§æ¹å¼ç±äºfè¿æ¸¡ç±»ä¸­çæé å½æ°æ åå®¹ï¼æä»¥å¼éæ¯è¾å°ã\n\nç¼ºç¹ï¼ä»ç¶å­å¨ç±»å¼ç»§æ¿çç¼ºç¹\n\n\n# å¯çå¼ç»§æ¿\n\nvar book = {\n    name: 'js book',\n    alikebook:['css book','html book']\n};\n\nfunction createbook(obj){\n    //éè¿ååç»§æ¿æ¹å¼åå»ºæ°å¯¹è±¡\n    var o = new inheritobject(obj);\n    //æå±æ°å¯¹è±¡\n    o.getname = function(){\n        console.log(name);\n    };\n    //è¿åæå±åçæ°å¯¹è±¡\n    return o;\n}\n\n\nå¯çå¼ç»§æ¿å°±æ¯å¯¹ååç»§æ¿çç¬¬äºæ¬¡å°è£ï¼å¹¶ä¸å¨è¿ç¬¬äºæ¬¡å°è£è¿ç¨ä¸­å¯¹ç»§æ¿çå¯¹è±¡è¿è¡äºæå±ï¼è¿æ ·æ°åå»ºçå¯¹è±¡ä¸ä»ä»æç¶ç±»ä¸­çå±æ§åæ¹æ³èä¸è¿æ·»å æ°çå±æ§åæ¹æ³\n\n\n# å¯çç»åå¼ç»§æ¿\n\nå¯çå¼ç»§æ¿ä¾æäºååç»§æ¿ï¼ååç»§æ¿åä¸ç±»å¼ç»§æ¿ç¸åã\n\nå¯çç»åå¼ç»§æ¿æ¯å¯çå¼ç»§æ¿åæé å½æ°ç»§æ¿ä¸¤ç§æ¨¡å¼çç»åï¼ä¹æ¯å¯¹ç»åç»§æ¿çæ¹è¿ã\n\nç»åç»§æ¿ = ç±»å¼ç»§æ¿+æé å½æ°ç»§æ¿ï¼å­ç±»ä¸æ¯ç¶ç±»çå®ä¾ï¼èå­ç±»çååæ¯ç¶ç±»çå®ä¾ï¼\n\nå¯çç»åå¼ç»§æ¿= å¯çå¼ç»§æ¿+æé å½æ°ç»§æ¿\n\nfunction inheritprototype(subclass,superclass){\n    //å¤å¶ä¸ä»½ç¶ç±»çååå¯æ¬ä¿å­å¨åéä¸­\n    var p = inheritobject(superclass.prototype);\n    //ä¿®æ­£å ä¸ºéåå­ç±»ååå¯¼è´å­ç±»çconstructorå±æ§è¢«ä¿®æ¹\n    p.construcor = subclass;\n    //è®¾ç½®å­ç±»çåå\n    subclass.prototype = p;\n}\n\n\nç»åå¼ç»§æ¿ä¸­ï¼éè¿æé å½æ°ç»§æ¿çå±æ§åæ¹æ³æ¯æ²¡æé®é¢çï¼æä»¥æä»¬ä¸»è¦æ¢ç©¶éè¿å¯çå¼ç»§æ¿éæ°ç»§æ¿ç¶ç±»çååãå¨æé å½æ°ç»§æ¿ä¸­æä»¬å·²ç»è°ç¨äºç¶ç±»çæé å½æ°ãå æ­¤æä»¬éè¦çå°±æ¯ç¶ç±»çååå¯¹è±¡çä¸ä¸ªå¯æ¬ï¼è¿ä¸ªå¯æ¬æä»¬éè¿ååç»§æ¿ä¾¿å¯å¾å°ï¼ä½æ¯è¿ä¸ªå¤å¶å¯¹è±¡pä¸­çconstrustoræåçä¸æ¯subclassï¼å æ­¤å¨å¯çå¼ç»§æ¿ä¸­è¦å¯¹påä¸æ¬¡å¢å¼ºï¼ä¿®å¤å¶construstoræåä¸æ­£ç¡®çé®é¢ï¼åèµç»å­ç±»çååã\n\n\t\t//å®ä¹ç¶ç±»\n\t\tfunction superclass(name){\n\t\t\tthis.name = name;\n\t\t\tthis.colors = ['red','blue','green'];\n\t\t}\n\t\t//å®ä¹ç¶ç±»ååæ¹æ³\n\t\tsuperclass.prototype.getname = function(){\n\t\t\tconsole.log(this.name);\n\t\t}\n\t\t//å®ä¹å­ç±»\n\t\tfunction subclass(name,time){\n\t\t\t//æé å½æ°å¼ç»§æ¿\n\t\t\tsuperclass.call(this,name);\n\t\t\t//å­ç±»æ°å¢å±æ§\n\t\t\tthis.time = time;\n\t\t}\n\t\t//å¯çå¼ç»§æ¿ç¶ç±»åå\n\t\tinheritprototype(subclass,superclass);\n\t\t//å­ç±»æ°å¢ååæ¹æ³\n\t\tsubclass.prototype.gettime = function(){\n\t\t\tconsole.log(this.time);\n\t\t};\n\n\t\t//æµè¯\n\t\tvar instance1 = new subclass('js book',2014);\n\t\tvar instance2 = new subclass('css book',2013);\n\n\t\tinstance1.colors.push('black');\n\t\tconsole.log(instance1.colors); //[\"red\", \"blue\", \"green\", \"black\"]\n\t\tconsole.log(instance2.colors); //[\"red\", \"blue\", \"green\"]\n\t\tinstance2.gettime(); //2013\n\t\tinstance2.getname(); //css book\n\n\n\n# ç»§æ¿åå¯¹è±¡å±æ§çextendæ¹æ³\n\n//åç»§æ¿ å±æ§å¤å¶\nvar extend = function(target,source){\n    //éåæºå¯¹è±¡ä¸­çå±æ§\n    for(var property in source){\n        target[property] = source[property];\n    }\n    //è¿åç®æ å¯¹è±¡\n    return target;\n}\n\n\n\n# å¤ç»§æ¿\n\nvar mix = function(){\n    var i = 1,                    //ä»ç¬¬äºä¸ªåæ°èµ·ä¸ºè¢«ç»§æ¿çå¯¹è±¡\n    \tlen = arguments.length,   //è·ååæ°é¿åº¦\n        target = arguments[0],    //ç¬¬ä¸ä¸ªå¯¹è±¡ä¸ºç®æ å¯¹è±¡\n        arg;                      //ç¼å­åæ°å¯¹è±¡\n    for(;i < len;i++){\n        arg = arguments[i];\n        for(var property in arg){\n            target[property] = arg[property];\n        }\n    }\n    return target;\n}\n\n\næä»¬ä¹å¯ä»¥å°å®ç»å®å°åçå¯¹è±¡objectä¸ï¼è¿æ ·ææçå¯¹è±¡å°±å¯ä»¥æ¥æè¿ä¸ªæ¹æ³äºã\n\nobject.prototype.mix = function(){\n    var i = 1,                    //ä»ç¬¬äºä¸ªåæ°èµ·ä¸ºè¢«ç»§æ¿çå¯¹è±¡\n    \tlen = arguments.length,   //è·ååæ°é¿åº¦\n        arg;                      //ç¼å­åæ°å¯¹è±¡\n    for(;i < len;i++){\n        arg = arguments[i];\n        for(var property in arg){\n            this[property] = arg[property];\n        }\n    }\n}\n\n//æµè¯\notherbook.mix(book1,book2);\n\n\n\n# å¤æ\n\nå¤æï¼å¯¹åä¸ä¸ªæ¹æ³å¤ç§è°ç¨æ¹å¼ï¼è¦å¯¹ä¼ å¥çåæ°åå¤æ­ä»¥å®ç°å¤ç§è°ç¨æ¹å¼ï¼å¦ææä»¬å®ä¹ä¸ä¸ªaddæ¹æ³ï¼å¦æä¸ä¼ åæ°è¿å10ï¼å¦æä¼ ä¸ä¸ªåæ°è¿å10+åæ°ï¼å¦æä¼ ä¸¤ä¸ªåæ°è¿åç¸å çç»æ\n\nfunction add(){\n    //è·ååæ°\n    var arg = arguments;\n    //è·ååæ°é¿åº¦\n        len = arg.length;\n    switch(len){\n        case 0:\n            return 10;\n        case 1:\n            return 10 + arg[0];\n        case 2:\n            return arg[0] + arg[1];\n    }\n}\n\n//æµè¯\nconsole.log(add());\nconsole.log(add(5));\nconsole.log(add(6,7));\n\n\n\n# ç±»å½¢å¼å®ç°\n\nfunction add(){\n    function zero(){\n        return 10;\n    }\n    function one(num){\n        return 10+num;\n    }\n    function two(num1,num2){\n        return num1+num2\n    }\n    //ç¸å å±ææ¹æ³\n    this.add = function(){\n        var arg = arguments;\n    \t//è·ååæ°é¿åº¦\n            len = arg.length;\n    switch(len){\n        case 0:\n            return zero();\n        case 1:\n            return one(arg[0]);\n        case 2:\n            return two(arg[0],arg[1]);\n    }\n}\n    \n//æµè¯\nvar a = new add();\nconsole.log(a.add());\nconsole.log(a.add(5));\nconsole.log(a.add(6,7))\n",charsets:{cjk:!0}},{title:"yeomanèææ¶å·¥å·",frontmatter:{title:"yeomanèææ¶å·¥å·",date:"2020-08-28T10:37:54.000Z",categories:"åç«¯å·¥ç¨å"},regularPath:"/engineering/engineering.html",relativePath:"engineering/engineering.md",key:"v-2c5dd41f",path:"/engineering/engineering.html",headers:[{level:2,title:"å·¥ç¨ååèææ¶ççè§£",slug:"å·¥ç¨ååèææ¶ççè§£",normalizedTitle:"å·¥ç¨ååèææ¶ççè§£",charIndex:2},{level:2,title:"yeoman",slug:"yeoman",normalizedTitle:"yeoman",charIndex:254},{level:3,title:"sub-generator",slug:"sub-generator",normalizedTitle:"sub-generator",charIndex:717},{level:3,title:"æ»ç»ä¸ä¸ä½¿ç¨æ­¥éª¤",slug:"æ»ç»ä¸ä¸ä½¿ç¨æ­¥éª¤",normalizedTitle:"æ»ç»ä¸ä¸ä½¿ç¨æ­¥éª¤",charIndex:817},{level:3,title:"èªå®ä¹Generatoræ¥æ­å»ºèªå·±çèææ¶",slug:"èªå®ä¹generatoræ¥æ­å»ºèªå·±çèææ¶",normalizedTitle:"èªå®ä¹generatoræ¥æ­å»ºèªå·±çèææ¶",charIndex:937},{level:3,title:"å¦ä½ä½¿ç¨å½ä»¤è¡äº¤äºçæ¹å¼å®ç°è¯¢é®ç¨æ·è¾å¥",slug:"å¦ä½ä½¿ç¨å½ä»¤è¡äº¤äºçæ¹å¼å®ç°è¯¢é®ç¨æ·è¾å¥",normalizedTitle:"å¦ä½ä½¿ç¨å½ä»¤è¡äº¤äºçæ¹å¼å®ç°è¯¢é®ç¨æ·è¾å¥",charIndex:2189},{level:3,title:"å¦ä½åå»ºä¸ä¸ªèªå®ä¹çvueèææ¶",slug:"å¦ä½åå»ºä¸ä¸ªèªå®ä¹çvueèææ¶",normalizedTitle:"å¦ä½åå»ºä¸ä¸ªèªå®ä¹çvueèææ¶",charIndex:2916}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"å·¥ç¨ååèææ¶ççè§£ yeoman sub-generator æ»ç»ä¸ä¸ä½¿ç¨æ­¥éª¤ èªå®ä¹Generatoræ¥æ­å»ºèªå·±çèææ¶ å¦ä½ä½¿ç¨å½ä»¤è¡äº¤äºçæ¹å¼å®ç°è¯¢é®ç¨æ·è¾å¥ å¦ä½åå»ºä¸ä¸ªèªå®ä¹çvueèææ¶",content:"# å·¥ç¨ååèææ¶ççè§£\n\nè°è°ä½ å¯¹å·¥ç¨åçåæ­¥è®¤è¯ï¼\n\n> åç«¯å·¥ç¨åæè®¤ä¸ºå¯ä»¥æé«å¼åæçï¼æé«ä»£ç è´¨éï¼ç®ä¾¿æµç¨ã\n> \n> å°±ç®åå¬å¸æåçé¡¹ç®æ¥è¯´ï¼å·¥ç¨åæå¸¦æ¥çä¼ç¹æ¯ï¼æ è®ºä»é¡¹ç®çç¼ç å°ç¼è¯ï¼æåå°é¨ç½²ï¼é½ååæ¹ä¾¿åè§èï¼å¯¹å¼åäººåç¹å«åå¥½ã\n\nä½ è®¤ä¸ºèææ¶é¤äºä¸ºæä»¬åå»ºé¡¹ç®ç»æï¼è¿æä»ä¹æ´æ·±çæä¹ï¼\n\n> æè§å¾èææ¶æ¯å¸®æä»¬åå°ãä¸ºåå°éå¤æ§å·¥ä½èåçéå¤æ§å·¥ä½ãçå·¥å·ï¼åªéè¦å è¡å½ä»¤ï¼ç®å½ç»æï¼èæ¬ï¼éç½®ç­ç­é½å·²ç»æå¥½äºï¼æä»¬åªéè¦åæ ¸å¿ä»£ç å°±å¥½ï¼èä¸ç¨å³å¿å¶ä»éå¤æ§çäºæã\n\n\n# yeoman\n\nå¨è°è®ºèææ¶æ¶ï¼æä»¬æ³å°çé½æ¯vue-cliç­æ¯è¾éæçèææ¶ï¼èYeomanæ¯ä¸ç§éç¨çå·¥å·ï¼ä¾¿äºåå»ºå±äºèªå·±çèææ¶ï¼å¾å¼å¾å­¦ä¹ ã\n\n> Yeomanä¸»è¦æä¸é¨åç»æï¼yoï¼èææ¶å·¥å·ï¼ãgruntï¼æå»ºå·¥å·ï¼ãbowerï¼åç®¡çå¨ï¼ãè¿ä¸ä¸ªå·¥å·æ¯åå«ç¬ç«å¼åçï¼ä½æ¯éè¦éåä½¿ç¨ï¼æ¥å®ç°æä»¬é«æçå·¥ä½æµæ¨¡å¼ã\n\nå®è£ï¼cnpm install -g yo grunt-cli bower\n\nå®è£åå¨å½ä»¤è¡ä¸­è¾å¥ yoï¼å¨è¿éæ¾ç¤ºçæ¯æçç³»ç»ä¸­å·²ç»å®è£çgeneratorçåº\n\nå¯ä»¥éæ©install generatorï¼ç¶åæç´¢æä»¬æ³å®è£çgeneratorï¼æ¯å¦webappï¼ç¶åå®è£å³å¯ã\n\n----------------------------------------\n\nç°å¨æä»¬è¦ä½¿ç¨generator-nodeï¼creates a base template to start a new Node.js module.\n\nç´æ¥è¿è¡yo nodeï¼åä¼ç´æ¥å¨æä»¶å¤¹ä¸­åå»ºå¥½ç®å½ç»æ\n\n\n# sub-generator\n\nå¦æä¸éè¦çææ´ä¸ªé¡¹ç®ç»æï¼åªéçæESLintç­éç½®æä»¶ï¼å°±å¯ä»¥ç¨sub-generator,ç¨:æ¥è¡¨ç¤º\n\nyo node:cliï¼å¶ä¸­çcliå°±æ¯å­éçæå¨\n\n\n# æ»ç»ä¸ä¸ä½¿ç¨æ­¥éª¤\n\n 1. æç¡®éæ±\n 2. æ¾å°åéçGenerator\n 3. å¨å±èå´å®è£æ¾å°çGenerator\n 4. éè¿Yoè¿è¡å¯¹åºçGenerator\n 5. éè¿å½ä»¤è¡äº¤äºå¡«åéé¡¹\n 6. çæä½ æéè¦çé¡¹ç®ç»æ\n\n\n# èªå®ä¹Generatoræ¥æ­å»ºèªå·±çèææ¶\n\næ¯å¦ç¨vue-cliåå»ºé¡¹ç®æ¶ï¼å¹¶æ²¡ævue-router,vuexç­ï¼éè¦æå¨å¼å¥ï¼å¦ææè¿äºä¹æ¾å¥èææ¶ä¸­å°±å¾æ¹ä¾¿\n\né¦åä½¿ç¨npm initåå§åä¸ä¸ªpackage.jsonæä»¶\n\nå®è£cnpm install yeoman-generator,æä¾äºçæå¨çåºç±»\n\nGeneratorçä¸ä¸ªåºæ¬ç»æå¦ä¸\n\n> |- generators/..........çæå¨ç®å½ |- app/..............é»è®¤çæå¨ç®å½ |- index.js.......é»è®¤çæå¨å®ç° |- templates/foo.txt..æ¨¡æ¿æä»¶ |-package.json..........æ¨¡ååéç½®æä»¶\n> \n> å¶ä¸­çindex.jsæ¯ä½ä¸ºGenerator çæ ¸å¿å¥å£\n> \n> éè¦å¯¼åºä¸ä¸ªç»§æ¿èª Yeoman Generator çç±»å\n> \n> Yeoman Generator å¨å·¥ä½æ¶ä¼èªå¨è°ç¨æ­¤ç±»åå®ä¹çæ¹æ³\n\nconst Generator = require('yeoman-generator')\n\nmodule.exports = class extends Generator {\n    writing () {\n        // Yeoman èªå¨å¨çææä»¶é¶æ®µè°ç¨æ­¤æ¹æ³\n        // æä»¬å°è¯å¾é¡¹ç®ç®å½ä¸­åå¥æä»¶\n        this.fs.write(\n        \tthis.destinationPath('temp.txt'),\n            Math.random().toString()\n        )\n        \n        // è¿å¯ä»¥éè¿æ¨¡æ¿æ¹å¼åå¥æä»¶å°ç®æ ç®å½\n        // æ¨¡æ¿æä»¶è·¯å¾\n        const tmpl = this.templatePath('foo.txt')\n        // è¾åºç®æ è·¯å¾\n        const output = this.destinationPath('foo.txt')\n        // æ¨¡æ¿æ°æ®ä¸ä¸æ\n        const context = { title: 'hello', success: false }\n        \n        this.fs.copyTpl(tmpl, output, context)\n    }\n}\n\n\nç¼åå¥½ä¹åä½¿ç¨npm linkä½¿å¶æä¸ºä¸ä¸ªå¨å±æ¨¡ååï¼è¿æ ·å¨å«çå°æ¹ä¹è½ä½¿ç¨yo 'name'è°ç¨è¿ä¸ªæ¨¡å\n\n# ä½¿ç¨æ¨¡æ¿æä»¶\n\næ¨¡æ¿æä»¶ï¼æ¯æ EJS æ¨¡æ¿æ è®°\n<%= title %>\n\n<% if (success) { %>\nååå\n<% } %>\n\ntitleåsuccesså¨æ¨¡æ¿ä¸ä¸æä¸­èµå¼\n\n\nä¹ååæ ·è¿è¡yo 'name'åå»ºæ¨¡æ¿æä»¶ï¼å¦ä¸ï¼\n\n> æ¨¡æ¿æä»¶ï¼æ¯æ EJS æ¨¡æ¿æ è®° hello\n\n\n# å¦ä½ä½¿ç¨å½ä»¤è¡äº¤äºçæ¹å¼å®ç°è¯¢é®ç¨æ·è¾å¥\n\nconst Generator = require('yeoman-generator')\n\nmodule.exports = class extends Generator {\n    prompting () {\n      return this.prompt([\n        {\n          type: 'input',\n          name: 'name', // å½ä»¤è¡éè¦è¾å¥ç\n          message: 'Your project name',\n          default: this.appname\n        }\n      ])\n      .then(answers => {\n        this.answers = answers\n      })\n    }\n    writing () {\n        // æ¨¡æ¿æä»¶è·¯å¾\n        const tmpl = this.templatePath('bar.html') // å¨bar.htmlä¸­å¯ä»¥å <h1><%= name %></h1>\n        // è¾åºç®æ è·¯å¾\n        const output = this.destinationPath('bar.html')\n        // æ¨¡æ¿æ°æ®ä¸ä¸æ\n        const context = this.answers // nameä¼ è¿ä¸ä¸æ\n        \n        this.fs.copyTpl(tmpl, output, context)\n    }\n}\n\n\n\n# å¦ä½åå»ºä¸ä¸ªèªå®ä¹çvueèææ¶\n\n * æåå¥½çvueæä»¶ç®å½ç»ææ·è´å°templatesç®å½ä¸\n * éåwritingæ¹æ³ï¼å ä¸ºä¸åªæ¯åå»ºåä¸ªæä»¶ï¼æ¯ä¸ä¸ªæä»¶é½éè¦åå»º\n\nconst Generator = require('yeoman-generator')\n\nmodule.exports = class extends Generator {\n    prompting () {\n      return this.prompt([\n        {\n          type: 'input',\n          name: 'name', // å½ä»¤è¡éè¦è¾å¥ç\n          message: 'Your project name',\n          default: this.appname\n        }\n      ])\n      .then(answers => {\n        this.answers = answers\n      })\n    }\n    writing () {\n        const templates = [\n            'a.js',\n            'src/main.js',\n            //...éè¦çæä»¶\n        ]\n        templates.forEach(item => {\n            this.fs.copyTpl(\n                this.templatePath(item),\n                this.destinationPath(item),\n                this.answers\n            )\n        })\n    }\n}\n",normalizedContent:"# å·¥ç¨ååèææ¶ççè§£\n\nè°è°ä½ å¯¹å·¥ç¨åçåæ­¥è®¤è¯ï¼\n\n> åç«¯å·¥ç¨åæè®¤ä¸ºå¯ä»¥æé«å¼åæçï¼æé«ä»£ç è´¨éï¼ç®ä¾¿æµç¨ã\n> \n> å°±ç®åå¬å¸æåçé¡¹ç®æ¥è¯´ï¼å·¥ç¨åæå¸¦æ¥çä¼ç¹æ¯ï¼æ è®ºä»é¡¹ç®çç¼ç å°ç¼è¯ï¼æåå°é¨ç½²ï¼é½ååæ¹ä¾¿åè§èï¼å¯¹å¼åäººåç¹å«åå¥½ã\n\nä½ è®¤ä¸ºèææ¶é¤äºä¸ºæä»¬åå»ºé¡¹ç®ç»æï¼è¿æä»ä¹æ´æ·±çæä¹ï¼\n\n> æè§å¾èææ¶æ¯å¸®æä»¬åå°ãä¸ºåå°éå¤æ§å·¥ä½èåçéå¤æ§å·¥ä½ãçå·¥å·ï¼åªéè¦å è¡å½ä»¤ï¼ç®å½ç»æï¼èæ¬ï¼éç½®ç­ç­é½å·²ç»æå¥½äºï¼æä»¬åªéè¦åæ ¸å¿ä»£ç å°±å¥½ï¼èä¸ç¨å³å¿å¶ä»éå¤æ§çäºæã\n\n\n# yeoman\n\nå¨è°è®ºèææ¶æ¶ï¼æä»¬æ³å°çé½æ¯vue-cliç­æ¯è¾éæçèææ¶ï¼èyeomanæ¯ä¸ç§éç¨çå·¥å·ï¼ä¾¿äºåå»ºå±äºèªå·±çèææ¶ï¼å¾å¼å¾å­¦ä¹ ã\n\n> yeomanä¸»è¦æä¸é¨åç»æï¼yoï¼èææ¶å·¥å·ï¼ãgruntï¼æå»ºå·¥å·ï¼ãbowerï¼åç®¡çå¨ï¼ãè¿ä¸ä¸ªå·¥å·æ¯åå«ç¬ç«å¼åçï¼ä½æ¯éè¦éåä½¿ç¨ï¼æ¥å®ç°æä»¬é«æçå·¥ä½æµæ¨¡å¼ã\n\nå®è£ï¼cnpm install -g yo grunt-cli bower\n\nå®è£åå¨å½ä»¤è¡ä¸­è¾å¥ yoï¼å¨è¿éæ¾ç¤ºçæ¯æçç³»ç»ä¸­å·²ç»å®è£çgeneratorçåº\n\nå¯ä»¥éæ©install generatorï¼ç¶åæç´¢æä»¬æ³å®è£çgeneratorï¼æ¯å¦webappï¼ç¶åå®è£å³å¯ã\n\n----------------------------------------\n\nç°å¨æä»¬è¦ä½¿ç¨generator-nodeï¼creates a base template to start a new node.js module.\n\nç´æ¥è¿è¡yo nodeï¼åä¼ç´æ¥å¨æä»¶å¤¹ä¸­åå»ºå¥½ç®å½ç»æ\n\n\n# sub-generator\n\nå¦æä¸éè¦çææ´ä¸ªé¡¹ç®ç»æï¼åªéçæeslintç­éç½®æä»¶ï¼å°±å¯ä»¥ç¨sub-generator,ç¨:æ¥è¡¨ç¤º\n\nyo node:cliï¼å¶ä¸­çcliå°±æ¯å­éçæå¨\n\n\n# æ»ç»ä¸ä¸ä½¿ç¨æ­¥éª¤\n\n 1. æç¡®éæ±\n 2. æ¾å°åéçgenerator\n 3. å¨å±èå´å®è£æ¾å°çgenerator\n 4. éè¿yoè¿è¡å¯¹åºçgenerator\n 5. éè¿å½ä»¤è¡äº¤äºå¡«åéé¡¹\n 6. çæä½ æéè¦çé¡¹ç®ç»æ\n\n\n# èªå®ä¹generatoræ¥æ­å»ºèªå·±çèææ¶\n\næ¯å¦ç¨vue-cliåå»ºé¡¹ç®æ¶ï¼å¹¶æ²¡ævue-router,vuexç­ï¼éè¦æå¨å¼å¥ï¼å¦ææè¿äºä¹æ¾å¥èææ¶ä¸­å°±å¾æ¹ä¾¿\n\né¦åä½¿ç¨npm initåå§åä¸ä¸ªpackage.jsonæä»¶\n\nå®è£cnpm install yeoman-generator,æä¾äºçæå¨çåºç±»\n\ngeneratorçä¸ä¸ªåºæ¬ç»æå¦ä¸\n\n> |- generators/..........çæå¨ç®å½ |- app/..............é»è®¤çæå¨ç®å½ |- index.js.......é»è®¤çæå¨å®ç° |- templates/foo.txt..æ¨¡æ¿æä»¶ |-package.json..........æ¨¡ååéç½®æä»¶\n> \n> å¶ä¸­çindex.jsæ¯ä½ä¸ºgenerator çæ ¸å¿å¥å£\n> \n> éè¦å¯¼åºä¸ä¸ªç»§æ¿èª yeoman generator çç±»å\n> \n> yeoman generator å¨å·¥ä½æ¶ä¼èªå¨è°ç¨æ­¤ç±»åå®ä¹çæ¹æ³\n\nconst generator = require('yeoman-generator')\n\nmodule.exports = class extends generator {\n    writing () {\n        // yeoman èªå¨å¨çææä»¶é¶æ®µè°ç¨æ­¤æ¹æ³\n        // æä»¬å°è¯å¾é¡¹ç®ç®å½ä¸­åå¥æä»¶\n        this.fs.write(\n        \tthis.destinationpath('temp.txt'),\n            math.random().tostring()\n        )\n        \n        // è¿å¯ä»¥éè¿æ¨¡æ¿æ¹å¼åå¥æä»¶å°ç®æ ç®å½\n        // æ¨¡æ¿æä»¶è·¯å¾\n        const tmpl = this.templatepath('foo.txt')\n        // è¾åºç®æ è·¯å¾\n        const output = this.destinationpath('foo.txt')\n        // æ¨¡æ¿æ°æ®ä¸ä¸æ\n        const context = { title: 'hello', success: false }\n        \n        this.fs.copytpl(tmpl, output, context)\n    }\n}\n\n\nç¼åå¥½ä¹åä½¿ç¨npm linkä½¿å¶æä¸ºä¸ä¸ªå¨å±æ¨¡ååï¼è¿æ ·å¨å«çå°æ¹ä¹è½ä½¿ç¨yo 'name'è°ç¨è¿ä¸ªæ¨¡å\n\n# ä½¿ç¨æ¨¡æ¿æä»¶\n\næ¨¡æ¿æä»¶ï¼æ¯æ ejs æ¨¡æ¿æ è®°\n<%= title %>\n\n<% if (success) { %>\nååå\n<% } %>\n\ntitleåsuccesså¨æ¨¡æ¿ä¸ä¸æä¸­èµå¼\n\n\nä¹ååæ ·è¿è¡yo 'name'åå»ºæ¨¡æ¿æä»¶ï¼å¦ä¸ï¼\n\n> æ¨¡æ¿æä»¶ï¼æ¯æ ejs æ¨¡æ¿æ è®° hello\n\n\n# å¦ä½ä½¿ç¨å½ä»¤è¡äº¤äºçæ¹å¼å®ç°è¯¢é®ç¨æ·è¾å¥\n\nconst generator = require('yeoman-generator')\n\nmodule.exports = class extends generator {\n    prompting () {\n      return this.prompt([\n        {\n          type: 'input',\n          name: 'name', // å½ä»¤è¡éè¦è¾å¥ç\n          message: 'your project name',\n          default: this.appname\n        }\n      ])\n      .then(answers => {\n        this.answers = answers\n      })\n    }\n    writing () {\n        // æ¨¡æ¿æä»¶è·¯å¾\n        const tmpl = this.templatepath('bar.html') // å¨bar.htmlä¸­å¯ä»¥å <h1><%= name %></h1>\n        // è¾åºç®æ è·¯å¾\n        const output = this.destinationpath('bar.html')\n        // æ¨¡æ¿æ°æ®ä¸ä¸æ\n        const context = this.answers // nameä¼ è¿ä¸ä¸æ\n        \n        this.fs.copytpl(tmpl, output, context)\n    }\n}\n\n\n\n# å¦ä½åå»ºä¸ä¸ªèªå®ä¹çvueèææ¶\n\n * æåå¥½çvueæä»¶ç®å½ç»ææ·è´å°templatesç®å½ä¸\n * éåwritingæ¹æ³ï¼å ä¸ºä¸åªæ¯åå»ºåä¸ªæä»¶ï¼æ¯ä¸ä¸ªæä»¶é½éè¦åå»º\n\nconst generator = require('yeoman-generator')\n\nmodule.exports = class extends generator {\n    prompting () {\n      return this.prompt([\n        {\n          type: 'input',\n          name: 'name', // å½ä»¤è¡éè¦è¾å¥ç\n          message: 'your project name',\n          default: this.appname\n        }\n      ])\n      .then(answers => {\n        this.answers = answers\n      })\n    }\n    writing () {\n        const templates = [\n            'a.js',\n            'src/main.js',\n            //...éè¦çæä»¶\n        ]\n        templates.foreach(item => {\n            this.fs.copytpl(\n                this.templatepath(item),\n                this.destinationpath(item),\n                this.answers\n            )\n        })\n    }\n}\n",charsets:{cjk:!0}},{title:"è§èåæ åESLint",frontmatter:{title:"è§èåæ åESLint",date:"2020-09-10T22:27:54.000Z",categories:"åç«¯å·¥ç¨å"},regularPath:"/engineering/eslint.html",relativePath:"engineering/eslint.md",key:"v-627741de",path:"/engineering/eslint.html",headers:[{level:2,title:"ESLint å®è£ä¸éç½®",slug:"eslint-å®è£ä¸éç½®",normalizedTitle:"eslint å®è£ä¸éç½®",charIndex:2},{level:2,title:"éç½®æ³¨é",slug:"éç½®æ³¨é",normalizedTitle:"éç½®æ³¨é",charIndex:536},{level:2,title:"ESLint ç»åèªå¨åå·¥å·",slug:"eslint-ç»åèªå¨åå·¥å·",normalizedTitle:"eslint ç»åèªå¨åå·¥å·",charIndex:744},{level:3,title:"eslint æ£æ¥ TypeScript",slug:"eslint-æ£æ¥-typescript",normalizedTitle:"eslint æ£æ¥ typescript",charIndex:1939},{level:2,title:"Stylelint",slug:"stylelint",normalizedTitle:"stylelint",charIndex:2257},{level:2,title:"Prettier",slug:"prettier",normalizedTitle:"prettier",charIndex:2619},{level:2,title:"Git Hooks",slug:"git-hooks",normalizedTitle:"git hooks",charIndex:2705}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"ESLint å®è£ä¸éç½® éç½®æ³¨é ESLint ç»åèªå¨åå·¥å· eslint æ£æ¥ TypeScript Stylelint Prettier Git Hooks",content:"# ESLint å®è£ä¸éç½®\n\nå®è£ï¼npm init --yesï¼npm intall eslint --save-dev\n\néç½®ï¼eslint --initï¼æ­¤æ¶ä¼æä¸äºé®é¢ï¼æéåç­å³å¯ï¼ä¸è¬éç¨ Standard è§èï¼å®è£ä¸äºä¾èµä¹å\n\nä½¿ç¨eslint foo.jsæ£æ¥ç®æ æä»¶å³å¯\n\n// .eslintrc.js\nmodule.exports = {\n  env: {\n    browser: true, // è¿è¡ç¯å¢ browser/node/commonjsç­ï¼å¯ä»¥åæ¶ä½¿ç¨\n    es6: false\n  },\n  extends: [ // ç»§æ¿å¬å±éç½®\n    'standard'\n  ],\n  parserOptions: { // è¯­æ³è§£æå¨ï¼åªæ¯æ£æµè¯­æ³ï¼envä¸­ç es6 è®¾ç½®äº falseï¼è¿æ¯ä¸å¯ç¨\n    ecmaVersion: 2015\n  },\n  rules: { // æ ¡éªè§å\n    'no-alert': \"error\" // æ off/warn/error éé¡¹\n  },\n  globals: { // å£°æå¯ä»¥ä½¿ç¨çå¨å±æå\n    \"jQuery\": \"readonly\"\n  }\n}\n\n\n\n# éç½®æ³¨é\n\n> standard æ åä¸æ¯æ æ¨¡æ¿å­ç¬¦ä¸²è¯­æ³ï¼ä½æ¯å¨é¡¹ç®ä¸­æä¸è¡æè¿æ¯æ³ç¨ä¸ä¸æä¹åï¼å¯ä»¥éè¿éç½®æ³¨é\n> \n> ç¦ç¨è§åï¼no-template-curly-in-string\n\nconst str1 = '${name} is a coder' // eslint-disable-line no-template-curly-in-string\n\nconsole.log(str1)\n\n\n\n# ESLint ç»åèªå¨åå·¥å·\n\n# ESLint ç»å gulp\n\nå¨å·²ç»éç½®å¥½ gulp çé¡¹ç®ä¸­å®è£gulp-eslintï¼yarn add gulp-eslint --save-dev\n\nåå§å.eslintrc.jséç½®æä»¶\n\n// gulpfile.js\nconst script = () => {\n  return src('src/assets/scripts/*.js', { base: 'src' })\n    .pipe(plugins.eslint()) // å¦æåªå å¥è¿ä¸è¡åªä¼æ£æ¥éè¯¯ï¼èä¸ä¼æåºéè¯¯\n    .pipe(plugins.eslint.format())\n    .pipe(plugins.eslint.failAfterError())\n    .pipe(plugins.babel({ presets: ['@babel/preset-env'] }))\n    .pipe(dest('temp'))\n    .pipe(bs.reload({ stream: true }))\n}\n\n\n# ESLint ç»å webpack\n\nå®è£eslint-loaderï¼åå§å.eslintrc.jséç½®æä»¶\n\n// webpack.config.js\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n  mode: 'production',\n  entry: './src/main.js',\n  module: {\n    rules: [\n      {\n        test: /\\.js$/, \n        exclude: /node_modules/, \n        use: 'babel-loader'\n      },\n      {\n        test: /\\.js$/, \n        exclude: /node_modules/, \n        use: 'eslint-loader',\n        enfore: 'pre' // ä¼åçº§æé«\n      },\n      {\n        test: /\\.css$/, \n        use: [\n          'style-loader',\n          'css-loader'\n        ]\n      }\n    ]\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: 'src/index.html'\n    })\n  ]\n}\n\n\n> vue-cli å¨å®è£è¿ç¨ä¸­æéé¡¹ä¼èªå¨éæ eslint éç½®\n\n\n# eslint æ£æ¥ TypeScript\n\n * eslint åå§åæ¶éæ© TypeScript\n\n// .eslintrc.js\n\nmodule.exports = {\n  env: {\n    browser: true,\n    es2020: true\n  },\n  extends: [\n    'standard'\n  ],\n  parser: '@typescript-eslint/parser',\n  parserOptions: {\n    ecmaVersion: 11\n  },\n  plugins: [\n    '@typescript-eslint'\n  ],\n  rules: {\n  }\n}\n\n\n\n# Stylelint\n\n * æä¾é»è®¤çä»£ç æ£æ¥è§å\n * æä¾CLIå·¥å·ï¼å¿«éè°ç¨\n * éè¿æä»¶æ¯æSassï¼Lessï¼PostCSS\n * æ¯æ Gulp æ Webpack éæ\n\nå®è£ stylelint ï¼yarn add stylelint -D\n\nå®è£éç½®æ¨¡åï¼stylelint-config-standard\n\nsasséç½®æ¨¡åï¼stylelint-config-sass-guidelines\n\n// .stylelintrc.js\nmodules.exports = {\n    extends: [\"stylelint-config-standard\", \"stylelint-config-sass-guidelines\"]\n}\n\n\næ§è¡æ£æ¥ï¼stylelint ./index.sass\n\n\n# Prettier\n\nå®è£ï¼yarn add prettier -D\n\nè¿è¡ï¼prettier style.css --writeå¯ä»¥èªå¨å°æ ¼å¼ååçæä»¶è¦çæºæä»¶\n\n\n# Git Hooks\n\n * Git Hooksä¹ç§°ä¹ä¸º git é©å­ï¼æ¯ä¸ªé©å­é½å¯¹åºä¸ä¸ªä»»å¡ï¼commit/pushï¼\n * éè¿ shell èæ¬å¯ä»¥ç¼åé©å­ä»»å¡è§¦åæ¶è¦å·ä½æ§è¡çæä½\n\n.git/hooks/pre-commit.sampleä¸ºcommitä¹åçé©å­å½æ°ï¼å¯ä»¥æ°å»ºä¸ä¸ªpre-commitæä»¶åä¸äºæä½\n\nHuskyå¯ä»¥å®ç°Git Hooksçä½¿ç¨éæ±\n\nå®è£ï¼yarn add Husky -D\n\n// å¨package.jsonä¸­éç½®\n\n{\n    \"husky\": {\n        \"hooks\": {\n            \"pre-commit\": \"eslint ./index.js\"\n        }\n    }   \n}\n\n\næ­¤å¤è¿ælint-stagedæ¨¡åç­",normalizedContent:"# eslint å®è£ä¸éç½®\n\nå®è£ï¼npm init --yesï¼npm intall eslint --save-dev\n\néç½®ï¼eslint --initï¼æ­¤æ¶ä¼æä¸äºé®é¢ï¼æéåç­å³å¯ï¼ä¸è¬éç¨ standard è§èï¼å®è£ä¸äºä¾èµä¹å\n\nä½¿ç¨eslint foo.jsæ£æ¥ç®æ æä»¶å³å¯\n\n// .eslintrc.js\nmodule.exports = {\n  env: {\n    browser: true, // è¿è¡ç¯å¢ browser/node/commonjsç­ï¼å¯ä»¥åæ¶ä½¿ç¨\n    es6: false\n  },\n  extends: [ // ç»§æ¿å¬å±éç½®\n    'standard'\n  ],\n  parseroptions: { // è¯­æ³è§£æå¨ï¼åªæ¯æ£æµè¯­æ³ï¼envä¸­ç es6 è®¾ç½®äº falseï¼è¿æ¯ä¸å¯ç¨\n    ecmaversion: 2015\n  },\n  rules: { // æ ¡éªè§å\n    'no-alert': \"error\" // æ off/warn/error éé¡¹\n  },\n  globals: { // å£°æå¯ä»¥ä½¿ç¨çå¨å±æå\n    \"jquery\": \"readonly\"\n  }\n}\n\n\n\n# éç½®æ³¨é\n\n> standard æ åä¸æ¯æ æ¨¡æ¿å­ç¬¦ä¸²è¯­æ³ï¼ä½æ¯å¨é¡¹ç®ä¸­æä¸è¡æè¿æ¯æ³ç¨ä¸ä¸æä¹åï¼å¯ä»¥éè¿éç½®æ³¨é\n> \n> ç¦ç¨è§åï¼no-template-curly-in-string\n\nconst str1 = '${name} is a coder' // eslint-disable-line no-template-curly-in-string\n\nconsole.log(str1)\n\n\n\n# eslint ç»åèªå¨åå·¥å·\n\n# eslint ç»å gulp\n\nå¨å·²ç»éç½®å¥½ gulp çé¡¹ç®ä¸­å®è£gulp-eslintï¼yarn add gulp-eslint --save-dev\n\nåå§å.eslintrc.jséç½®æä»¶\n\n// gulpfile.js\nconst script = () => {\n  return src('src/assets/scripts/*.js', { base: 'src' })\n    .pipe(plugins.eslint()) // å¦æåªå å¥è¿ä¸è¡åªä¼æ£æ¥éè¯¯ï¼èä¸ä¼æåºéè¯¯\n    .pipe(plugins.eslint.format())\n    .pipe(plugins.eslint.failaftererror())\n    .pipe(plugins.babel({ presets: ['@babel/preset-env'] }))\n    .pipe(dest('temp'))\n    .pipe(bs.reload({ stream: true }))\n}\n\n\n# eslint ç»å webpack\n\nå®è£eslint-loaderï¼åå§å.eslintrc.jséç½®æä»¶\n\n// webpack.config.js\nconst htmlwebpackplugin = require('html-webpack-plugin')\n\nmodule.exports = {\n  mode: 'production',\n  entry: './src/main.js',\n  module: {\n    rules: [\n      {\n        test: /\\.js$/, \n        exclude: /node_modules/, \n        use: 'babel-loader'\n      },\n      {\n        test: /\\.js$/, \n        exclude: /node_modules/, \n        use: 'eslint-loader',\n        enfore: 'pre' // ä¼åçº§æé«\n      },\n      {\n        test: /\\.css$/, \n        use: [\n          'style-loader',\n          'css-loader'\n        ]\n      }\n    ]\n  },\n  plugins: [\n    new htmlwebpackplugin({\n      template: 'src/index.html'\n    })\n  ]\n}\n\n\n> vue-cli å¨å®è£è¿ç¨ä¸­æéé¡¹ä¼èªå¨éæ eslint éç½®\n\n\n# eslint æ£æ¥ typescript\n\n * eslint åå§åæ¶éæ© typescript\n\n// .eslintrc.js\n\nmodule.exports = {\n  env: {\n    browser: true,\n    es2020: true\n  },\n  extends: [\n    'standard'\n  ],\n  parser: '@typescript-eslint/parser',\n  parseroptions: {\n    ecmaversion: 11\n  },\n  plugins: [\n    '@typescript-eslint'\n  ],\n  rules: {\n  }\n}\n\n\n\n# stylelint\n\n * æä¾é»è®¤çä»£ç æ£æ¥è§å\n * æä¾cliå·¥å·ï¼å¿«éè°ç¨\n * éè¿æä»¶æ¯æsassï¼lessï¼postcss\n * æ¯æ gulp æ webpack éæ\n\nå®è£ stylelint ï¼yarn add stylelint -d\n\nå®è£éç½®æ¨¡åï¼stylelint-config-standard\n\nsasséç½®æ¨¡åï¼stylelint-config-sass-guidelines\n\n// .stylelintrc.js\nmodules.exports = {\n    extends: [\"stylelint-config-standard\", \"stylelint-config-sass-guidelines\"]\n}\n\n\næ§è¡æ£æ¥ï¼stylelint ./index.sass\n\n\n# prettier\n\nå®è£ï¼yarn add prettier -d\n\nè¿è¡ï¼prettier style.css --writeå¯ä»¥èªå¨å°æ ¼å¼ååçæä»¶è¦çæºæä»¶\n\n\n# git hooks\n\n * git hooksä¹ç§°ä¹ä¸º git é©å­ï¼æ¯ä¸ªé©å­é½å¯¹åºä¸ä¸ªä»»å¡ï¼commit/pushï¼\n * éè¿ shell èæ¬å¯ä»¥ç¼åé©å­ä»»å¡è§¦åæ¶è¦å·ä½æ§è¡çæä½\n\n.git/hooks/pre-commit.sampleä¸ºcommitä¹åçé©å­å½æ°ï¼å¯ä»¥æ°å»ºä¸ä¸ªpre-commitæä»¶åä¸äºæä½\n\nhuskyå¯ä»¥å®ç°git hooksçä½¿ç¨éæ±\n\nå®è£ï¼yarn add husky -d\n\n// å¨package.jsonä¸­éç½®\n\n{\n    \"husky\": {\n        \"hooks\": {\n            \"pre-commit\": \"eslint ./index.js\"\n        }\n    }   \n}\n\n\næ­¤å¤è¿ælint-stagedæ¨¡åç­",charsets:{cjk:!0}},{title:"gulpæå»ºå·¥å·",frontmatter:{title:"gulpæå»ºå·¥å·",date:"2020-09-01T09:47:00.000Z",categories:"åç«¯å·¥ç¨å"},regularPath:"/engineering/gulp.html",relativePath:"engineering/gulp.md",key:"v-a28862e2",path:"/engineering/gulp.html",headers:[{level:2,title:"ä»ä¹æ¯gulp",slug:"ä»ä¹æ¯gulp",normalizedTitle:"ä»ä¹æ¯gulp",charIndex:2},{level:2,title:"gulpåä½éª",slug:"gulpåä½éª",normalizedTitle:"gulpåä½éª",charIndex:153},{level:3,title:"ç»åä»»å¡ï¼ä¸²è¡ï¼å¹¶è¡ï¼",slug:"ç»åä»»å¡-ä¸²è¡-å¹¶è¡",normalizedTitle:"ç»åä»»å¡ï¼ä¸²è¡ï¼å¹¶è¡ï¼",charIndex:601},{level:3,title:"gulpå¤çå¼æ­¥ä»»å¡",slug:"gulpå¤çå¼æ­¥ä»»å¡",normalizedTitle:"gulpå¤çå¼æ­¥ä»»å¡",charIndex:1076},{level:2,title:"åç¼©è¿ç¨å®ç°",slug:"åç¼©è¿ç¨å®ç°",normalizedTitle:"åç¼©è¿ç¨å®ç°",charIndex:1839},{level:3,title:"å©ç¨gulpçAPIæ¥ç®å",slug:"å©ç¨gulpçapiæ¥ç®å",normalizedTitle:"å©ç¨gulpçapiæ¥ç®å",charIndex:2433},{level:2,title:"æå»ºå®ä¾",slug:"æå»ºå®ä¾",normalizedTitle:"æå»ºå®ä¾",charIndex:2716},{level:3,title:"æä»¶è¶æ¥è¶å¤æä¹å",slug:"æä»¶è¶æ¥è¶å¤æä¹å",normalizedTitle:"æä»¶è¶æ¥è¶å¤æä¹å",charIndex:4419},{level:2,title:"æä¹å®ç°ç­æ´æ°",slug:"æä¹å®ç°ç­æ´æ°",normalizedTitle:"æä¹å®ç°ç­æ´æ°",charIndex:4739},{level:3,title:"æä¹å®ç°ä¿®æ¹srcä¸é¢çæä»¶ï¼èªå¨æ§è¡ç¼è¯è¿ç¨ï¼åæ´æ°å°é¡µé¢",slug:"æä¹å®ç°ä¿®æ¹srcä¸é¢çæä»¶-èªå¨æ§è¡ç¼è¯è¿ç¨-åæ´æ°å°é¡µé¢",normalizedTitle:"æä¹å®ç°ä¿®æ¹srcä¸é¢çæä»¶ï¼èªå¨æ§è¡ç¼è¯è¿ç¨ï¼åæ´æ°å°é¡µé¢",charIndex:5192},{level:3,title:"åç¼©æä»¶",slug:"åç¼©æä»¶",normalizedTitle:"åç¼©æä»¶",charIndex:6480},{level:3,title:"æå»ºå®æçå¤ç",slug:"æå»ºå®æçå¤ç",normalizedTitle:"æå»ºå®æçå¤ç",charIndex:6937},{level:3,title:"å°è£å·¥ä½æµ",slug:"å°è£å·¥ä½æµ",normalizedTitle:"å°è£å·¥ä½æµ",charIndex:7098}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"ä»ä¹æ¯gulp gulpåä½éª ç»åä»»å¡ï¼ä¸²è¡ï¼å¹¶è¡ï¼ gulpå¤çå¼æ­¥ä»»å¡ åç¼©è¿ç¨å®ç° å©ç¨gulpçAPIæ¥ç®å æå»ºå®ä¾ æä»¶è¶æ¥è¶å¤æä¹å æä¹å®ç°ç­æ´æ° æä¹å®ç°ä¿®æ¹srcä¸é¢çæä»¶ï¼èªå¨æ§è¡ç¼è¯è¿ç¨ï¼åæ´æ°å°é¡µé¢ åç¼©æä»¶ æå»ºå®æçå¤ç å°è£å·¥ä½æµ",content:"# ä»ä¹æ¯gulp\n\ngulpjsæ¯ä¸ä¸ªåç«¯æå»ºå·¥å·ï¼ä¸gruntjsç¸æ¯ï¼gulpjsæ éåä¸å¤§å ç¹æçéç½®åæ°ï¼APIä¹éå¸¸ç®åï¼å­¦ä¹ èµ·æ¥å¾å®¹æï¼èä¸gulpjsä½¿ç¨çæ¯nodejsä¸­streamæ¥è¯»ååæä½æ°æ®ï¼å¶éåº¦æ´å¿«ã\n\ngulpï¼The streaming build system\n\n\n# gulpåä½éª\n\nåå§ä¸ä¸ªé¡¹ç®æä»¶å¤¹å«gulpï¼ä½¿ç¨npm initåå§åpackage.jsonæä»¶ï¼ç¶åä½¿ç¨cnpm install -g gulpå®è£\n\nä¾èµï¼code gulpfile.jsæ°å»ºä¸ä¸ªgulpfile.jsæä»¶ï¼ä½ä¸ºå¥å£æä»¶ï¼ç¤ºä¾å¦ä¸ï¼\n\nexports.foo = done => {\n  console.log('foo task working~')\n  done() // æ è¯ä»»å¡å®æ\n}\n\nexports.default = done => {\n  console.log('default task working~')\n  done() // æ è¯ä»»å¡å®æ\n}\n\nconst gulp = require('gulp')\n\ngulp.task('bar', done => {\n  console.log('bar working')\n  done()\n})\n\n// åå«è¿è¡å¦ä¸ï¼\n// gulp foo\n// gulp\n// gulp bar\n\n\n\n# ç»åä»»å¡ï¼ä¸²è¡ï¼å¹¶è¡ï¼\n\nconst { series, parallel } = require('gulp')\n\nconst task1 = done => {\n  setTimeout(() => {\n    console.log('task1')\n    done()\n  }, 1000)\n}\n\nconst task2 = done => {\n  setTimeout(() => {\n    console.log('task2')\n    done()\n  }, 1000)\n}\n\nconst task3 = done => {\n  setTimeout(() => {\n    console.log('task3')\n    done()\n  }, 1000)\n}\n\nexports.foo = series(task1, task2, task3)   // ä¸²è¡\nexports.bar = parallel(task1, task2, task3) // å¹¶è¡\n\n// æ§è¡ gulp foo, gulp bar\n\n\n\n# gulpå¤çå¼æ­¥ä»»å¡\n\nexports.callback = done => {\n  console.log('callback')\n  done()\n}\n\nexports.callback_error = done => {\n  console.log('callback error')\n  done(new Error('task failed'))\n}\n\nexports.promise = () => {\n  console.log('promise task')\n  return Promise.resolve()\n}\n\nexports.promise_error = () => {\n  console.log('promise task')\n  return Promise.reject('task failed')\n}\n\nconst timeout = time => {\n  return new Promise(resolve => {\n    setTimeout(resolve, time)\n  })\n}\n\nexports.async = async () => {\n  await timeout(1000)\n  console.log('async task')\n}\n\n// å¤çæä»¶ stream\nexports.stream = () => {\n  const readStream = fs.createReadStream('package.json')\n  const writeStream = fs.createWriteStream('temp.txt')\n  readStream.pipe(writeStream)\n  return readStream\n}\n\n\n\n# åç¼©è¿ç¨å®ç°\n\nconst fs = require('fs')\nconst { Transform } = require('stream')\n\nexports.default = () => {\n  // æä»¶è¯»åæµ\n  const read = fs.createReadStream('foo.css')\n  // æä»¶åå¥æµ\n  const write = fs.createWriteStream('foo.min.css')\n  // æä»¶è½¬æ¢æµ\n  const transform = new Transform({\n    transform: (chunk, encoding, callback) => {\n      // æ ¸å¿è½¬æ¢è¿ç¨å®ç°\n      // chunk => è¯»åæµä¸­è¯»åå°çåå®¹\n      const input = chunk.toString()\n      const output = input.replace(/\\s+/g, '').replace(/\\/\\*.+?\\*\\//g, '')\n      callback(null, output)\n    }\n  })\n\n  read\n    .pipe(transform) // è½¬æ¢\n    .pipe(write) // åå¥\n\n  return read\n}\n\n\n\n# å©ç¨gulpçAPIæ¥ç®å\n\nconst { src, dest } = require('gulp')\nconst cleanCss = require('gulp-clean-css')\nconst rename = require('gulp-rename')\n\nexports.default = () => {\n  return src('src/*.css')\n    .pipe(cleanCss())\n    .pipe(rename({ extname: '.min.css' }))\n    .pipe(dest('dist'))\n}\n\n\n\n# æå»ºå®ä¾\n\nç°å¨æä¸ä¸ªç®å½ç»æï¼å¦ä½å®ç°æå»º\n\n> ââ src âââ about.html âââ index.html âââ assets âââ styles âââ demo.scss âââ main.scss âââ _icons.scss âââ _variables.scss âââ scripts âââ main.js âââ images âââ logo.png âââ a.svg\n\n * éè¦å¨srcçåçº§ç®å½ä¸åå»ºdistç®å½ï¼ä¸ä¿çsrcçç®å½ç»æ\n * scssç¼è¯æcss\n * å©ç¨ babel å° es6 è½¬æ es5\n * pngï¼svgå¾çè¿è¡åç¼©è¦å\n * æ¯æ¬¡æå»ºè¦åå é¤åæçdist\n\n// gulpfile.js\nconst { src, dest, parallel, series } = require('gulp')\nconst sass = require('gulp-sass') // cnpm install -D gulp-sass\nconst babel = require('gulp-babel')\nconst swig = require('gulp-swig') // htmlæ¨¡æ¿å¼æ cnpm install -D gulp-swig \nconst imagemin = require('gulp-imagemin')\n\nconst del = require('del') // å é¤åè½çæä»¶ cnpm install -D del\n\nconst data = { // æ¨¡æ¿æ°æ®\n    // ...\n}\n\nconst clean = () => {\n  return del(['dist'])\n}\n\nconst style = () => {\n    return src('src/assets/styles/*.scss', { base: 'src' }) // base åºåç®å½\n    \t.pipe(sass())\n    \t.pipe(dest('dist'))\n}\n\nconst script = () => {\n    return src('src/assets/scripts/*.js', { base: 'src' })\n    \t.pipe(babel({ presets: ['@babel/preset-env'] })) //babelåªæ¯å¹³å°ï¼éè¦å®è£\n\t\t.pipe(dest('dist'))                             // @babel/core å @babel/preset-env\n}                \n\nconst page = () => {\n    return src('src/*.html, { base: 'src' }ï¼\n         .pipe(swig({ data }))\n    \t .pipe(dest('dist'))\n}\n\nconst image = () => {\n     return src('src/assets/images/**', { base: 'src' })\n         .pipe(imagemin())\n    \t .pipe(dest('dist'))\n}\n\n// publicç®å½çæ·è´\nconst extra = () => {\n  return src('public/**', { base: 'public' })\n    .pipe(dest('dist'))\n}\n\nconst compile = parallel(style, script, page, image) // compileåªæ§è¡srcçå¤ç\n\nconst build = series(clean, parallel(compile, extra)) // åå é¤\n\nmodule.exports = {\n  compile,\n  build\n}\n\n\n\n# æä»¶è¶æ¥è¶å¤æä¹å\n\ncnpm install -D gulp-load-plugins ä½¿ç¨è¿ä¸ªæä»¶èªå¨å è½½æä»¶ææ\n\n// gulpfile.js\nconst loadPlugins = require('gulp-load-plugins')\nconst plugins = loadPlugins()\n\nconst style = () => {\n  return src('src/assets/styles/*.scss', { base: 'src' }) \n    .pipe(plugins.sass()) // æææä»¶ä½¿ç¨plugin.sass()å»ä½¿ç¨\n    .pipe(dest('dist'))\n}\n\n\n\n# æä¹å®ç°ç­æ´æ°\n\n * ä¼èªå¨æå¼æµè§å¨\n * ä¿®æ¹distä¸çæä»¶ï¼é¡µé¢ä¼èªå¨æ´æ°\n\n----------------------------------------\n\nå®è£browser-syncæä»¶ï¼cnpm install -D browser-sync\n\n// gulpfile.jsä¸­å¢å ä»¥ä¸åå®¹\n\nconst browserSync = require('browser-sync')\nconst bs = browserSync.create()\n\nconst serve = () => {\n  bs.init({\n    notify: false,\n    files: 'dist/**',    // ç­æ´æ°æä»¶\n    port: 2080,\n    server: {\n      baseDir: 'dist'    // åºåç®å½\n    }\n  })\n}\n\nmodule.exports = {\n  compile,\n  build,\n  serve  \n}\n\n\n\n# æä¹å®ç°ä¿®æ¹srcä¸é¢çæä»¶ï¼èªå¨æ§è¡ç¼è¯è¿ç¨ï¼åæ´æ°å°é¡µé¢\n\nä½¿ç¨watchæä»¶æ¥çå¬ï¼åæ¶ä¼åä¸ä¸ç»åä»»å¡\n\nconst { src, dest, parallel, series, watch } = require('gulp')\n\nconst serve = () => {\n  watch('src/assets/styles/*.scss', style)\n  watch('src/assets/scripts/*.js', script)\n  watch('src/*.html', page)\n    \n  watch([\n    'src/assets/images/**',\n    'public/**'\n  ], bs.reload)\n\n  bs.init({\n    notify: false,\n    files: 'dist/**',\n    server: {\n      baseDir: ['dist', 'src', 'public'] // èµ·æå¡æ¶æé¡ºåºæ¾æä»¶ï¼distæ¾ä¸å°å°±æ¾src,å¾çå°±å¨srcä¸­\n      routes: {\n        '/node_modules': 'node_modules' // htmlæä»¶ä¸­\n      }\n    }\n  })\n}\n\n// ç¼è¯æºæä»¶å°distç®å½\nconst compile = parallel(style, script, page)\n\n// ä¸çº¿ä¹åæ§è¡çä»»å¡ï¼åæ¬å¯¹å¾ççåç¼©ç­åªéæ§è¡ä¸æ¬¡çä»»å¡\nconst build = series(clean, parallel(compile, image, extra))\n\n// å¼åè¿ç¨ä¸­çä»»å¡ï¼åç¼è¯åèµ·æå¡å¨\nconst develop = series(compile, serve)\n\nmodule.exports = {\n  compile,\n  build,\n  serve,\n  develop\n}\n\n\nç°å¨htmlæä»¶ä¸­å­å¨å¼ç¨å¤é¨æä»¶çæ¹å¼\n\n  \x3c!-- build:css assets/styles/main.css --\x3e\n  <link rel=\"stylesheet\" href=\"assets/styles/main.css\">\n  \x3c!-- endbuild --\x3e\n\n  \x3c!-- å¤çæä¸é¢è¿ç§ --\x3e\n  <link rel=\"stylesheet\" href=\"assets/styles/vendor.css\">\n\n\néè¦å®è£userefæä»¶ï¼cnpm install -D gulp-userefï¼å¨gulpfile.jsä¸­åå»ºä¸ä¸ªæ°ä»»å¡\n\nconst useref = () => {\n  return src('dist/*.html', { base: 'dist' })\n    .pipe(plugins.useref({ searchPath: ['dist', '.'] }))\n    .pipe(dest('dist'))\n}\n\n\n\n# åç¼©æä»¶\n\nå®è£cnpm install -D gulp-htmlmin gulp-uglify gulp-clean-css\n\nconst min = () => {\n  return src('dist/**', { base: 'dist' })\n    .pipe(plugins.if(/\\.js$/, plugins.uglify()))\n    .pipe(plugins.if(/\\.css$/, plugins.cleanCss()))\n    .pipe(plugins.if(/\\.html$/, plugins.htmlmin({\n      collapseWhitespace: true,\n      minifyCSS: true,\n      minifyJS: true\n    })))\n    .pipe(dest('release')) // å¦æådistä¼ææä»¶å²çª\n}\n\n// è§£å³åæ³æ¯æç®åçdistæ¹ä¸ºtempï¼ä½ä¸ºä¸­é´æä»¶ï¼æåååç¼©å°distä¸­\n\n\n\n# æå»ºå®æçå¤ç\n\n// éæ©éè¦å¯¼åºçä»»å¡\nmodule.exports = {\n  build,\n  develop\n}\n\n// æä»åå¨package.jsonä¸­\n\"scripts\": {\n    \"build\": \"gulp build\",\n    \"develop\": \"gulp develop\"\n}\n\n\n\n# å°è£å·¥ä½æµ\n\nå°æå»ºè¿ç¨å°è£ï¼åå¸å¹¶ä½¿ç¨æ¨¡åï¼å°±ä¸å¿å¨æ¯ä¸ªé¡¹ç®ä¸­åç¬å»éå¤ågulpfile.js",normalizedContent:"# ä»ä¹æ¯gulp\n\ngulpjsæ¯ä¸ä¸ªåç«¯æå»ºå·¥å·ï¼ä¸gruntjsç¸æ¯ï¼gulpjsæ éåä¸å¤§å ç¹æçéç½®åæ°ï¼apiä¹éå¸¸ç®åï¼å­¦ä¹ èµ·æ¥å¾å®¹æï¼èä¸gulpjsä½¿ç¨çæ¯nodejsä¸­streamæ¥è¯»ååæä½æ°æ®ï¼å¶éåº¦æ´å¿«ã\n\ngulpï¼the streaming build system\n\n\n# gulpåä½éª\n\nåå§ä¸ä¸ªé¡¹ç®æä»¶å¤¹å«gulpï¼ä½¿ç¨npm initåå§åpackage.jsonæä»¶ï¼ç¶åä½¿ç¨cnpm install -g gulpå®è£\n\nä¾èµï¼code gulpfile.jsæ°å»ºä¸ä¸ªgulpfile.jsæä»¶ï¼ä½ä¸ºå¥å£æä»¶ï¼ç¤ºä¾å¦ä¸ï¼\n\nexports.foo = done => {\n  console.log('foo task working~')\n  done() // æ è¯ä»»å¡å®æ\n}\n\nexports.default = done => {\n  console.log('default task working~')\n  done() // æ è¯ä»»å¡å®æ\n}\n\nconst gulp = require('gulp')\n\ngulp.task('bar', done => {\n  console.log('bar working')\n  done()\n})\n\n// åå«è¿è¡å¦ä¸ï¼\n// gulp foo\n// gulp\n// gulp bar\n\n\n\n# ç»åä»»å¡ï¼ä¸²è¡ï¼å¹¶è¡ï¼\n\nconst { series, parallel } = require('gulp')\n\nconst task1 = done => {\n  settimeout(() => {\n    console.log('task1')\n    done()\n  }, 1000)\n}\n\nconst task2 = done => {\n  settimeout(() => {\n    console.log('task2')\n    done()\n  }, 1000)\n}\n\nconst task3 = done => {\n  settimeout(() => {\n    console.log('task3')\n    done()\n  }, 1000)\n}\n\nexports.foo = series(task1, task2, task3)   // ä¸²è¡\nexports.bar = parallel(task1, task2, task3) // å¹¶è¡\n\n// æ§è¡ gulp foo, gulp bar\n\n\n\n# gulpå¤çå¼æ­¥ä»»å¡\n\nexports.callback = done => {\n  console.log('callback')\n  done()\n}\n\nexports.callback_error = done => {\n  console.log('callback error')\n  done(new error('task failed'))\n}\n\nexports.promise = () => {\n  console.log('promise task')\n  return promise.resolve()\n}\n\nexports.promise_error = () => {\n  console.log('promise task')\n  return promise.reject('task failed')\n}\n\nconst timeout = time => {\n  return new promise(resolve => {\n    settimeout(resolve, time)\n  })\n}\n\nexports.async = async () => {\n  await timeout(1000)\n  console.log('async task')\n}\n\n// å¤çæä»¶ stream\nexports.stream = () => {\n  const readstream = fs.createreadstream('package.json')\n  const writestream = fs.createwritestream('temp.txt')\n  readstream.pipe(writestream)\n  return readstream\n}\n\n\n\n# åç¼©è¿ç¨å®ç°\n\nconst fs = require('fs')\nconst { transform } = require('stream')\n\nexports.default = () => {\n  // æä»¶è¯»åæµ\n  const read = fs.createreadstream('foo.css')\n  // æä»¶åå¥æµ\n  const write = fs.createwritestream('foo.min.css')\n  // æä»¶è½¬æ¢æµ\n  const transform = new transform({\n    transform: (chunk, encoding, callback) => {\n      // æ ¸å¿è½¬æ¢è¿ç¨å®ç°\n      // chunk => è¯»åæµä¸­è¯»åå°çåå®¹\n      const input = chunk.tostring()\n      const output = input.replace(/\\s+/g, '').replace(/\\/\\*.+?\\*\\//g, '')\n      callback(null, output)\n    }\n  })\n\n  read\n    .pipe(transform) // è½¬æ¢\n    .pipe(write) // åå¥\n\n  return read\n}\n\n\n\n# å©ç¨gulpçapiæ¥ç®å\n\nconst { src, dest } = require('gulp')\nconst cleancss = require('gulp-clean-css')\nconst rename = require('gulp-rename')\n\nexports.default = () => {\n  return src('src/*.css')\n    .pipe(cleancss())\n    .pipe(rename({ extname: '.min.css' }))\n    .pipe(dest('dist'))\n}\n\n\n\n# æå»ºå®ä¾\n\nç°å¨æä¸ä¸ªç®å½ç»æï¼å¦ä½å®ç°æå»º\n\n> ââ src âââ about.html âââ index.html âââ assets âââ styles âââ demo.scss âââ main.scss âââ _icons.scss âââ _variables.scss âââ scripts âââ main.js âââ images âââ logo.png âââ a.svg\n\n * éè¦å¨srcçåçº§ç®å½ä¸åå»ºdistç®å½ï¼ä¸ä¿çsrcçç®å½ç»æ\n * scssç¼è¯æcss\n * å©ç¨ babel å° es6 è½¬æ es5\n * pngï¼svgå¾çè¿è¡åç¼©è¦å\n * æ¯æ¬¡æå»ºè¦åå é¤åæçdist\n\n// gulpfile.js\nconst { src, dest, parallel, series } = require('gulp')\nconst sass = require('gulp-sass') // cnpm install -d gulp-sass\nconst babel = require('gulp-babel')\nconst swig = require('gulp-swig') // htmlæ¨¡æ¿å¼æ cnpm install -d gulp-swig \nconst imagemin = require('gulp-imagemin')\n\nconst del = require('del') // å é¤åè½çæä»¶ cnpm install -d del\n\nconst data = { // æ¨¡æ¿æ°æ®\n    // ...\n}\n\nconst clean = () => {\n  return del(['dist'])\n}\n\nconst style = () => {\n    return src('src/assets/styles/*.scss', { base: 'src' }) // base åºåç®å½\n    \t.pipe(sass())\n    \t.pipe(dest('dist'))\n}\n\nconst script = () => {\n    return src('src/assets/scripts/*.js', { base: 'src' })\n    \t.pipe(babel({ presets: ['@babel/preset-env'] })) //babelåªæ¯å¹³å°ï¼éè¦å®è£\n\t\t.pipe(dest('dist'))                             // @babel/core å @babel/preset-env\n}                \n\nconst page = () => {\n    return src('src/*.html, { base: 'src' }ï¼\n         .pipe(swig({ data }))\n    \t .pipe(dest('dist'))\n}\n\nconst image = () => {\n     return src('src/assets/images/**', { base: 'src' })\n         .pipe(imagemin())\n    \t .pipe(dest('dist'))\n}\n\n// publicç®å½çæ·è´\nconst extra = () => {\n  return src('public/**', { base: 'public' })\n    .pipe(dest('dist'))\n}\n\nconst compile = parallel(style, script, page, image) // compileåªæ§è¡srcçå¤ç\n\nconst build = series(clean, parallel(compile, extra)) // åå é¤\n\nmodule.exports = {\n  compile,\n  build\n}\n\n\n\n# æä»¶è¶æ¥è¶å¤æä¹å\n\ncnpm install -d gulp-load-plugins ä½¿ç¨è¿ä¸ªæä»¶èªå¨å è½½æä»¶ææ\n\n// gulpfile.js\nconst loadplugins = require('gulp-load-plugins')\nconst plugins = loadplugins()\n\nconst style = () => {\n  return src('src/assets/styles/*.scss', { base: 'src' }) \n    .pipe(plugins.sass()) // æææä»¶ä½¿ç¨plugin.sass()å»ä½¿ç¨\n    .pipe(dest('dist'))\n}\n\n\n\n# æä¹å®ç°ç­æ´æ°\n\n * ä¼èªå¨æå¼æµè§å¨\n * ä¿®æ¹distä¸çæä»¶ï¼é¡µé¢ä¼èªå¨æ´æ°\n\n----------------------------------------\n\nå®è£browser-syncæä»¶ï¼cnpm install -d browser-sync\n\n// gulpfile.jsä¸­å¢å ä»¥ä¸åå®¹\n\nconst browsersync = require('browser-sync')\nconst bs = browsersync.create()\n\nconst serve = () => {\n  bs.init({\n    notify: false,\n    files: 'dist/**',    // ç­æ´æ°æä»¶\n    port: 2080,\n    server: {\n      basedir: 'dist'    // åºåç®å½\n    }\n  })\n}\n\nmodule.exports = {\n  compile,\n  build,\n  serve  \n}\n\n\n\n# æä¹å®ç°ä¿®æ¹srcä¸é¢çæä»¶ï¼èªå¨æ§è¡ç¼è¯è¿ç¨ï¼åæ´æ°å°é¡µé¢\n\nä½¿ç¨watchæä»¶æ¥çå¬ï¼åæ¶ä¼åä¸ä¸ç»åä»»å¡\n\nconst { src, dest, parallel, series, watch } = require('gulp')\n\nconst serve = () => {\n  watch('src/assets/styles/*.scss', style)\n  watch('src/assets/scripts/*.js', script)\n  watch('src/*.html', page)\n    \n  watch([\n    'src/assets/images/**',\n    'public/**'\n  ], bs.reload)\n\n  bs.init({\n    notify: false,\n    files: 'dist/**',\n    server: {\n      basedir: ['dist', 'src', 'public'] // èµ·æå¡æ¶æé¡ºåºæ¾æä»¶ï¼distæ¾ä¸å°å°±æ¾src,å¾çå°±å¨srcä¸­\n      routes: {\n        '/node_modules': 'node_modules' // htmlæä»¶ä¸­\n      }\n    }\n  })\n}\n\n// ç¼è¯æºæä»¶å°distç®å½\nconst compile = parallel(style, script, page)\n\n// ä¸çº¿ä¹åæ§è¡çä»»å¡ï¼åæ¬å¯¹å¾ççåç¼©ç­åªéæ§è¡ä¸æ¬¡çä»»å¡\nconst build = series(clean, parallel(compile, image, extra))\n\n// å¼åè¿ç¨ä¸­çä»»å¡ï¼åç¼è¯åèµ·æå¡å¨\nconst develop = series(compile, serve)\n\nmodule.exports = {\n  compile,\n  build,\n  serve,\n  develop\n}\n\n\nç°å¨htmlæä»¶ä¸­å­å¨å¼ç¨å¤é¨æä»¶çæ¹å¼\n\n  \x3c!-- build:css assets/styles/main.css --\x3e\n  <link rel=\"stylesheet\" href=\"assets/styles/main.css\">\n  \x3c!-- endbuild --\x3e\n\n  \x3c!-- å¤çæä¸é¢è¿ç§ --\x3e\n  <link rel=\"stylesheet\" href=\"assets/styles/vendor.css\">\n\n\néè¦å®è£userefæä»¶ï¼cnpm install -d gulp-userefï¼å¨gulpfile.jsä¸­åå»ºä¸ä¸ªæ°ä»»å¡\n\nconst useref = () => {\n  return src('dist/*.html', { base: 'dist' })\n    .pipe(plugins.useref({ searchpath: ['dist', '.'] }))\n    .pipe(dest('dist'))\n}\n\n\n\n# åç¼©æä»¶\n\nå®è£cnpm install -d gulp-htmlmin gulp-uglify gulp-clean-css\n\nconst min = () => {\n  return src('dist/**', { base: 'dist' })\n    .pipe(plugins.if(/\\.js$/, plugins.uglify()))\n    .pipe(plugins.if(/\\.css$/, plugins.cleancss()))\n    .pipe(plugins.if(/\\.html$/, plugins.htmlmin({\n      collapsewhitespace: true,\n      minifycss: true,\n      minifyjs: true\n    })))\n    .pipe(dest('release')) // å¦æådistä¼ææä»¶å²çª\n}\n\n// è§£å³åæ³æ¯æç®åçdistæ¹ä¸ºtempï¼ä½ä¸ºä¸­é´æä»¶ï¼æåååç¼©å°distä¸­\n\n\n\n# æå»ºå®æçå¤ç\n\n// éæ©éè¦å¯¼åºçä»»å¡\nmodule.exports = {\n  build,\n  develop\n}\n\n// æä»åå¨package.jsonä¸­\n\"scripts\": {\n    \"build\": \"gulp build\",\n    \"develop\": \"gulp develop\"\n}\n\n\n\n# å°è£å·¥ä½æµ\n\nå°æå»ºè¿ç¨å°è£ï¼åå¸å¹¶ä½¿ç¨æ¨¡åï¼å°±ä¸å¿å¨æ¯ä¸ªé¡¹ç®ä¸­åç¬å»éå¤ågulpfile.js",charsets:{cjk:!0}},{title:"èªå¨åæå»ºä¸grunt",frontmatter:{title:"èªå¨åæå»ºä¸grunt",date:"2020-08-31T20:53:00.000Z",categories:"åç«¯å·¥ç¨å"},regularPath:"/engineering/grunt.html",relativePath:"engineering/grunt.md",key:"v-1c0f0a82",path:"/engineering/grunt.html",headers:[{level:2,title:"ä»ä¹æ¯èªå¨åæå»º",slug:"ä»ä¹æ¯èªå¨åæå»º",normalizedTitle:"ä»ä¹æ¯èªå¨åæå»º",charIndex:2},{level:2,title:"grunt",slug:"grunt",normalizedTitle:"grunt",charIndex:372}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"ä»ä¹æ¯èªå¨åæå»º grunt",content:"# ä»ä¹æ¯èªå¨åæå»º\n\næ¯å¦å¨é¡¹ç®ä¸­éè¦éè¿sass main.cssæ¥ç¼è¯cssæä»¶ï¼ä¸å¿è¦æ¯æ¬¡é½ä½¿ç¨å½ä»¤è¡å½ä»¤æ¥ç¼è¯ã\n\nå¯ä»¥ç¨npm scriptsæ¥å®ç°èªå¨åæå»ºï¼å¨package.jsonä¸­ä¹¦å\n\n// ç±»ä¼¼ä¸è¿ç§å°±æ¯èªå¨åæå»º \n\"scripts\": {\n    \"dev\": \"webpack-dev-server --inline --progress --config build/webpack.dev.conf.js\",\n    \"start\": \"npm run dev\",\n    \"build\": \"node build/build.js\",\n    \"lint\": \"eslint --fix --ext .js,.vue src\",\n    \"precommit\": \"npm run lint\"\n}\n\n\n\n# grunt\n\ngruntæ¯ä¸æ¬¾æå»ºå·¥å·ï¼å¨é¡¹ç®ä¸­ä½¿ç¨npm initåå§åä¸ä¸ªpackage.jsonæä»¶ï¼ç¶åä½¿ç¨npm install grunt\n\nå®è£ï¼å®è£æåä¹ååå»ºgruntfile.jsä½ä¸ºå¥å£æä»¶ï¼ç¼åå¦ä¸ï¼\n\n// Gruntçå¥å£æä»¶\n// éè¦å¯¼åºä¸ä¸ªå½æ°ï¼æ­¤å½æ°æ¥æ¶ä¸ä¸ª grunt çå½¢å\n\nmodule.exports = grunt => {\n  grunt.registerTask('foo', ()=>{\n    console.log('hello grunt')\n  }) // grunt foo\n\n  grunt.registerTask('bar', ()=>{\n    console.log('hello grunt bar')\n  }) // grunt bar\n\n  grunt.registerTask('default', ()=>{\n    console.log('default task')\n  }) // grunt\n\n  grunt.registerTask('default', ['foo', 'bar']) // grunt\n\n  // æ¨¡æå¼æ­¥ä»»å¡\n  grunt.registerTask('async', function () {\n    const done = this.async()\n    setTimeout(() => {\n      console.log('async task')\n      done()\n    })\n  }, 1000) // grunt async\n  \n  // æ è®°ä»»å¡å¤±è´¥\n  grunt.registerTask('bad', ()=>{\n    console.log('hello grunt bar')\n    return false\n  }) // grunt bad ä¼æ§è¡å¤±è´¥\n}\n\n\ninitConfigæ¹æ³\n\nmodule.exports = grunt => {\n    grunt.initConfig({\n        foo: {\n            bar: 123\n        }\n    })  \n  \n  grunt.registerTask('foo', ()=>{\n    console.log(grunt.config('foo.bar'))\n  }) // grunt foo è¾åº 123\n}\n\n\nå¤ç®æ ä»»å¡\n\nmodule.exports = grunt => {\n\n  grunt.initConfig({\n    build: {\n      options: { // éç½®éé¡¹\n        foo: 'bar'\n      },\n      css: {\n        options: {\n          foo: 'baz'\n        }\n      },\n      js: '2'\n    }\n  })\n\n  // å¤ç®æ æ¨¡å¼ï¼å¯ä»¥è®©ä»»å¡æ ¹æ®éç½®å½¢æå¤ä¸ªå­ä»»å¡\n  grunt.registerMultiTask('build', function () {\n    console.log(this.options())\n    console.log(`target: ${this.target}, data: ${this.data}`)\n  })\n}\n\n// grunt build\n// è¾åº\n\nRunning \"build:css\" (build) task\n{ foo: 'baz' }\ntarget: css, data: [object Object]\n\nRunning \"build:js\" (build) task\n{ foo: 'bar' }\ntarget: js, data: 2\n\nDone.\n\n\næä»¶ä½¿ç¨ï¼cleanæä»¶å é¤æä»¶\n\nmodule.exports = grunt => {\n    grunt.initConfig({\n        clean: {\n            temp: 'temp/**'\n        }\n    })\n    \n    grunt.loadNpmTasks('grunt-contrib-clean')\n}\n\n// grunt clean å¯å é¤tempä¸å¯¹åºæä»¶\n\n\n * grunt-sass\n * grunt-babel\n\nconst sass = require('sass')\nconst loadGruntTasks = require('load-grunt-tasks')\n\nmodule.exports = grunt => {\n  grunt.initConfig({\n    sass: {\n      options: {\n        sourceMap: true, // çæmapæä»¶\n        implementation: sass\n      },\n      main: {\n        files: {\n          'dist/css/main.css': 'src/scss/main.scss' // ç®å½\n        }\n      }\n    },\n    babel: {\n      options: {\n        sourceMap: true,\n        presets: ['@babel/preset-env']\n      },\n      main: {\n        files: {\n          'dist/js/app.js': 'src/js/app.js'\n        }\n      }\n    },\n    watch: { // çå¬\n      js: {\n        files: ['src/js/*.js'],\n        tasks: ['babel']\n      },\n      css: {\n        files: ['src/scss/*.scss'],\n        tasks: ['sass']\n      }\n    }\n  })\n\n  // grunt.loadNpmTasks('grunt-sass')\n  loadGruntTasks(grunt) // èªå¨å è½½ææç grunt æä»¶ä¸­çä»»å¡\n\n  grunt.registerTask('default', ['sass', 'babel', 'watch']) // é¦åæ§è¡ sass, babel ä»»å¡ï¼åçå¬\n}\n",normalizedContent:"# ä»ä¹æ¯èªå¨åæå»º\n\næ¯å¦å¨é¡¹ç®ä¸­éè¦éè¿sass main.cssæ¥ç¼è¯cssæä»¶ï¼ä¸å¿è¦æ¯æ¬¡é½ä½¿ç¨å½ä»¤è¡å½ä»¤æ¥ç¼è¯ã\n\nå¯ä»¥ç¨npm scriptsæ¥å®ç°èªå¨åæå»ºï¼å¨package.jsonä¸­ä¹¦å\n\n// ç±»ä¼¼ä¸è¿ç§å°±æ¯èªå¨åæå»º \n\"scripts\": {\n    \"dev\": \"webpack-dev-server --inline --progress --config build/webpack.dev.conf.js\",\n    \"start\": \"npm run dev\",\n    \"build\": \"node build/build.js\",\n    \"lint\": \"eslint --fix --ext .js,.vue src\",\n    \"precommit\": \"npm run lint\"\n}\n\n\n\n# grunt\n\ngruntæ¯ä¸æ¬¾æå»ºå·¥å·ï¼å¨é¡¹ç®ä¸­ä½¿ç¨npm initåå§åä¸ä¸ªpackage.jsonæä»¶ï¼ç¶åä½¿ç¨npm install grunt\n\nå®è£ï¼å®è£æåä¹ååå»ºgruntfile.jsä½ä¸ºå¥å£æä»¶ï¼ç¼åå¦ä¸ï¼\n\n// gruntçå¥å£æä»¶\n// éè¦å¯¼åºä¸ä¸ªå½æ°ï¼æ­¤å½æ°æ¥æ¶ä¸ä¸ª grunt çå½¢å\n\nmodule.exports = grunt => {\n  grunt.registertask('foo', ()=>{\n    console.log('hello grunt')\n  }) // grunt foo\n\n  grunt.registertask('bar', ()=>{\n    console.log('hello grunt bar')\n  }) // grunt bar\n\n  grunt.registertask('default', ()=>{\n    console.log('default task')\n  }) // grunt\n\n  grunt.registertask('default', ['foo', 'bar']) // grunt\n\n  // æ¨¡æå¼æ­¥ä»»å¡\n  grunt.registertask('async', function () {\n    const done = this.async()\n    settimeout(() => {\n      console.log('async task')\n      done()\n    })\n  }, 1000) // grunt async\n  \n  // æ è®°ä»»å¡å¤±è´¥\n  grunt.registertask('bad', ()=>{\n    console.log('hello grunt bar')\n    return false\n  }) // grunt bad ä¼æ§è¡å¤±è´¥\n}\n\n\ninitconfigæ¹æ³\n\nmodule.exports = grunt => {\n    grunt.initconfig({\n        foo: {\n            bar: 123\n        }\n    })  \n  \n  grunt.registertask('foo', ()=>{\n    console.log(grunt.config('foo.bar'))\n  }) // grunt foo è¾åº 123\n}\n\n\nå¤ç®æ ä»»å¡\n\nmodule.exports = grunt => {\n\n  grunt.initconfig({\n    build: {\n      options: { // éç½®éé¡¹\n        foo: 'bar'\n      },\n      css: {\n        options: {\n          foo: 'baz'\n        }\n      },\n      js: '2'\n    }\n  })\n\n  // å¤ç®æ æ¨¡å¼ï¼å¯ä»¥è®©ä»»å¡æ ¹æ®éç½®å½¢æå¤ä¸ªå­ä»»å¡\n  grunt.registermultitask('build', function () {\n    console.log(this.options())\n    console.log(`target: ${this.target}, data: ${this.data}`)\n  })\n}\n\n// grunt build\n// è¾åº\n\nrunning \"build:css\" (build) task\n{ foo: 'baz' }\ntarget: css, data: [object object]\n\nrunning \"build:js\" (build) task\n{ foo: 'bar' }\ntarget: js, data: 2\n\ndone.\n\n\næä»¶ä½¿ç¨ï¼cleanæä»¶å é¤æä»¶\n\nmodule.exports = grunt => {\n    grunt.initconfig({\n        clean: {\n            temp: 'temp/**'\n        }\n    })\n    \n    grunt.loadnpmtasks('grunt-contrib-clean')\n}\n\n// grunt clean å¯å é¤tempä¸å¯¹åºæä»¶\n\n\n * grunt-sass\n * grunt-babel\n\nconst sass = require('sass')\nconst loadgrunttasks = require('load-grunt-tasks')\n\nmodule.exports = grunt => {\n  grunt.initconfig({\n    sass: {\n      options: {\n        sourcemap: true, // çæmapæä»¶\n        implementation: sass\n      },\n      main: {\n        files: {\n          'dist/css/main.css': 'src/scss/main.scss' // ç®å½\n        }\n      }\n    },\n    babel: {\n      options: {\n        sourcemap: true,\n        presets: ['@babel/preset-env']\n      },\n      main: {\n        files: {\n          'dist/js/app.js': 'src/js/app.js'\n        }\n      }\n    },\n    watch: { // çå¬\n      js: {\n        files: ['src/js/*.js'],\n        tasks: ['babel']\n      },\n      css: {\n        files: ['src/scss/*.scss'],\n        tasks: ['sass']\n      }\n    }\n  })\n\n  // grunt.loadnpmtasks('grunt-sass')\n  loadgrunttasks(grunt) // èªå¨å è½½ææç grunt æä»¶ä¸­çä»»å¡\n\n  grunt.registertask('default', ['sass', 'babel', 'watch']) // é¦åæ§è¡ sass, babel ä»»å¡ï¼åçå¬\n}\n",charsets:{cjk:!0}},{title:"Rollup",frontmatter:{title:"Rollup",date:"2020-09-10T10:27:54.000Z",categories:"åç«¯å·¥ç¨å"},regularPath:"/engineering/rollup.html",relativePath:"engineering/rollup.md",key:"v-5907ba7a",path:"/engineering/rollup.html",headers:[{level:2,title:"Rollupå¿«éä¸æ",slug:"rollupå¿«éä¸æ",normalizedTitle:"rollupå¿«éä¸æ",charIndex:2},{level:2,title:"rollupéç½®æä»¶",slug:"rollupéç½®æä»¶",normalizedTitle:"rollupéç½®æä»¶",charIndex:987},{level:2,title:"Rollupä½¿ç¨æä»¶",slug:"rollupä½¿ç¨æä»¶",normalizedTitle:"rollupä½¿ç¨æä»¶",charIndex:1183},{level:3,title:"Rollup å è½½ node_modules ä¸­ç NPM æ¨¡å",slug:"rollup-å è½½-node-modules-ä¸­ç-npm-æ¨¡å",normalizedTitle:"rollup å è½½ node_modules ä¸­ç npm æ¨¡å",charIndex:1436},{level:3,title:"Rollup å è½½ CommonJS",slug:"rollup-å è½½-commonjs",normalizedTitle:"rollup å è½½ commonjs",charIndex:1707},{level:2,title:"ä»£ç æå",slug:"ä»£ç æå",normalizedTitle:"ä»£ç æå",charIndex:1925},{level:3,title:"å¤å¥å£æå",slug:"å¤å¥å£æå",normalizedTitle:"å¤å¥å£æå",charIndex:2227},{level:2,title:"ä¼ç¼ºç¹",slug:"ä¼ç¼ºç¹",normalizedTitle:"ä¼ç¼ºç¹",charIndex:2630}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"Rollupå¿«éä¸æ rollupéç½®æä»¶ Rollupä½¿ç¨æä»¶ Rollup å è½½ node_modules ä¸­ç NPM æ¨¡å Rollup å è½½ CommonJS ä»£ç æå å¤å¥å£æå ä¼ç¼ºç¹",content:"# Rollupå¿«éä¸æ\n\nä¸¾ä¾ï¼src ç®å½ä¸æå¦ä¸ä¸ä¸ªæä»¶\n\n// messages.js\nexport default {\n  hi: 'Hey Guys, I am zce~'\n}\n\n// logger.js\nexport const log = msg => {\n  console.log('---------- INFO ----------')\n  console.log(msg)\n  console.log('--------------------------')\n}\n\nexport const error = msg => {\n  console.error('---------- ERROR ----------')\n  console.error(msg)\n  console.error('---------------------------')\n}\n\n// index.js\n// å¯¼å¥æ¨¡åæå\nimport { log } from './logger'\nimport messages from './messages'\n\n// ä½¿ç¨æ¨¡åæå\nconst msg = messages.hi\n\nlog(msg)\n\n\nå®è£ Rollupï¼yarn add rollup --dev\n\næ§è¡æåå½ä»¤ï¼yarn rollup ./src/index.js --format iife --file dist/bundle.js\n\nRollupä¼èªå¨æ§è¡tree shakingï¼å»é¤æ æä»£ç \n\n// bundle.js\n(function () {\n  'use strict';\n\n  const log = msg => {\n    console.log('---------- INFO ----------');\n    console.log(msg);\n    console.log('--------------------------');\n  };\n\n  var messages = {\n    hi: 'Hey Guys, I am zce~'\n  };\n\n  // å¯¼å¥æ¨¡åæå\n\n  // ä½¿ç¨æ¨¡åæå\n  const msg = messages.hi;\n\n  log(msg);\n\n}());\n\n\n\n# rollupéç½®æä»¶\n\n// rollup.config.js\nexport default {\n  input: 'src/index.js',   // å¥å£\n  output: {\n    file: 'dist/bundle.js',\n    format: 'iife'\n  }\n}\n\n\nè¿è¡å½ä»¤ï¼yarn rollup --config rollup.config.js\n\n\n# Rollupä½¿ç¨æä»¶\n\nå®è£å¯ä»¥å¯¼å¥ json çæä»¶ï¼yarn add rollup-plugin-json --dev\n\nimport json from 'rollup-plugin-json'\n\nexport default {\n  input: 'src/index.js',\n  output: {\n    file: 'dist/bundle.js',\n    format: 'iife'\n  },\n  plugins: [\n    json()  // è°ç¨çç»æ\n  ]\n}\n\n\n\n# Rollup å è½½ node_modules ä¸­ç NPM æ¨¡å\n\nyarn add rollup-plugin-node-resolve --devï¼éç½®åä¸\n\n// index.js\n\n// å¯¼å¥æ¨¡åæå\nimport _ from 'lodash-es'\nimport { log } from './logger'\n\n// ä½¿ç¨æ¨¡åæå\nlog(_.camelCase('hello world'))\n\n\n> Rollup é»è®¤åªè½ä½¿ç¨ ES Modulesæ¨¡åï¼æä»¥è¦å¯¼å¥ lodash-esï¼ä¸è½å¯¼å¥åæ¬ç lodash\n\n\n# Rollup å è½½ CommonJS\n\n> å ä¸ºä¾æ§å¾å¤ç¬¬ä¸æ¹æ¨¡åä½¿ç¨ ComminJS è§èï¼æä»¥éè¦æä»¶å¤ç\n\nyarn add rollup-plugin-commonjs --dev\n\n// èªå·±åä¸ä¸ª CommonJS è§èçæ¨¡å cjs-module.js\nmodule.exports = {\n  foo: 'bar'\n}\n\n// index.js\nimport cjs from './cjs-module'\n\n\n\n# ä»£ç æå\n\n// å¨æå¯¼å¥\nimport('./logger').then(({ log }) => { // import('./logger')è¿åpromiseï¼è§£ææålogæ¹æ³\n  log('code splitting~')\n})\n\n\n> ä½¿ç¨ä»£ç æåä¸è½ç¨ iife æ ¼å¼ï¼åºè¯¥ä½¿ç¨ AMD æè CommonJS è§èï¼èå¨æµè§å¨ç«¯åªè½ä½¿ç¨ AMD è§è\n\nexport default {\n  input: 'src/index.js',\n  output: {\n    dir: 'dist', // å¤ä¸ªæä»¶ï¼ä½¿ç¨ dir\n    format: 'amd'\n  }\n}\n\n\n\n# å¤å¥å£æå\n\nexport default {\n  input: {\n    foo: 'src/index.js',  // ä¸¤ä¸ªå¥å£\n    bar: 'src/album.js'\n  },\n  output: {\n    dir: 'dist',\n    format: 'amd'\n  }\n}\n\n// æåå¨ dist ç®å½ä¸çæ3ä¸ªæä»¶ï¼foo.jsï¼bar.jsï¼åå¬å±é¨åçjs\n\n\n  \x3c!-- AMD æ åæ ¼å¼çè¾åº bundle ä¸è½ç´æ¥å¼ç¨ --\x3e\n  \x3c!-- <script src=\"foo.js\"><\/script> --\x3e\n  \x3c!-- éè¦ Require.js è¿æ ·çåº --\x3e\n  <script src=\"https://unpkg.com/requirejs@2.3.6/require.js\" data-main=\"foo.js\"><\/script>\n\n\n\n# ä¼ç¼ºç¹\n\n * è¾åºç»ææ´å æå¹³\n * èªå¨ç§»é¤æªå¼ç¨ä»£ç \n * æåç»æä¾ç¶å®å¨å¯è¯»\n\n----------------------------------------\n\n * å è½½é ESM çç¬¬ä¸æ¹æ¨¡åæ¯è¾å¤æ\n * æ¨¡åæç»é½è¢«æåå°ä¸ä¸ªå½æ°ä¸­ï¼æ æ³å®ç° HMR\n * æµè§å¨ç¯å¢ä¸­ï¼ä»£ç æååè½ä¾èµ AMD åº\n\n----------------------------------------\n\nå¼ååºç¨ç¨åºä½¿ç¨ webpackï¼å¼åä¸ä¸ªæ¡æ¶æèç±»åºä½¿ç¨ Rollup",normalizedContent:"# rollupå¿«éä¸æ\n\nä¸¾ä¾ï¼src ç®å½ä¸æå¦ä¸ä¸ä¸ªæä»¶\n\n// messages.js\nexport default {\n  hi: 'hey guys, i am zce~'\n}\n\n// logger.js\nexport const log = msg => {\n  console.log('---------- info ----------')\n  console.log(msg)\n  console.log('--------------------------')\n}\n\nexport const error = msg => {\n  console.error('---------- error ----------')\n  console.error(msg)\n  console.error('---------------------------')\n}\n\n// index.js\n// å¯¼å¥æ¨¡åæå\nimport { log } from './logger'\nimport messages from './messages'\n\n// ä½¿ç¨æ¨¡åæå\nconst msg = messages.hi\n\nlog(msg)\n\n\nå®è£ rollupï¼yarn add rollup --dev\n\næ§è¡æåå½ä»¤ï¼yarn rollup ./src/index.js --format iife --file dist/bundle.js\n\nrollupä¼èªå¨æ§è¡tree shakingï¼å»é¤æ æä»£ç \n\n// bundle.js\n(function () {\n  'use strict';\n\n  const log = msg => {\n    console.log('---------- info ----------');\n    console.log(msg);\n    console.log('--------------------------');\n  };\n\n  var messages = {\n    hi: 'hey guys, i am zce~'\n  };\n\n  // å¯¼å¥æ¨¡åæå\n\n  // ä½¿ç¨æ¨¡åæå\n  const msg = messages.hi;\n\n  log(msg);\n\n}());\n\n\n\n# rollupéç½®æä»¶\n\n// rollup.config.js\nexport default {\n  input: 'src/index.js',   // å¥å£\n  output: {\n    file: 'dist/bundle.js',\n    format: 'iife'\n  }\n}\n\n\nè¿è¡å½ä»¤ï¼yarn rollup --config rollup.config.js\n\n\n# rollupä½¿ç¨æä»¶\n\nå®è£å¯ä»¥å¯¼å¥ json çæä»¶ï¼yarn add rollup-plugin-json --dev\n\nimport json from 'rollup-plugin-json'\n\nexport default {\n  input: 'src/index.js',\n  output: {\n    file: 'dist/bundle.js',\n    format: 'iife'\n  },\n  plugins: [\n    json()  // è°ç¨çç»æ\n  ]\n}\n\n\n\n# rollup å è½½ node_modules ä¸­ç npm æ¨¡å\n\nyarn add rollup-plugin-node-resolve --devï¼éç½®åä¸\n\n// index.js\n\n// å¯¼å¥æ¨¡åæå\nimport _ from 'lodash-es'\nimport { log } from './logger'\n\n// ä½¿ç¨æ¨¡åæå\nlog(_.camelcase('hello world'))\n\n\n> rollup é»è®¤åªè½ä½¿ç¨ es modulesæ¨¡åï¼æä»¥è¦å¯¼å¥ lodash-esï¼ä¸è½å¯¼å¥åæ¬ç lodash\n\n\n# rollup å è½½ commonjs\n\n> å ä¸ºä¾æ§å¾å¤ç¬¬ä¸æ¹æ¨¡åä½¿ç¨ comminjs è§èï¼æä»¥éè¦æä»¶å¤ç\n\nyarn add rollup-plugin-commonjs --dev\n\n// èªå·±åä¸ä¸ª commonjs è§èçæ¨¡å cjs-module.js\nmodule.exports = {\n  foo: 'bar'\n}\n\n// index.js\nimport cjs from './cjs-module'\n\n\n\n# ä»£ç æå\n\n// å¨æå¯¼å¥\nimport('./logger').then(({ log }) => { // import('./logger')è¿åpromiseï¼è§£ææålogæ¹æ³\n  log('code splitting~')\n})\n\n\n> ä½¿ç¨ä»£ç æåä¸è½ç¨ iife æ ¼å¼ï¼åºè¯¥ä½¿ç¨ amd æè commonjs è§èï¼èå¨æµè§å¨ç«¯åªè½ä½¿ç¨ amd è§è\n\nexport default {\n  input: 'src/index.js',\n  output: {\n    dir: 'dist', // å¤ä¸ªæä»¶ï¼ä½¿ç¨ dir\n    format: 'amd'\n  }\n}\n\n\n\n# å¤å¥å£æå\n\nexport default {\n  input: {\n    foo: 'src/index.js',  // ä¸¤ä¸ªå¥å£\n    bar: 'src/album.js'\n  },\n  output: {\n    dir: 'dist',\n    format: 'amd'\n  }\n}\n\n// æåå¨ dist ç®å½ä¸çæ3ä¸ªæä»¶ï¼foo.jsï¼bar.jsï¼åå¬å±é¨åçjs\n\n\n  \x3c!-- amd æ åæ ¼å¼çè¾åº bundle ä¸è½ç´æ¥å¼ç¨ --\x3e\n  \x3c!-- <script src=\"foo.js\"><\/script> --\x3e\n  \x3c!-- éè¦ require.js è¿æ ·çåº --\x3e\n  <script src=\"https://unpkg.com/requirejs@2.3.6/require.js\" data-main=\"foo.js\"><\/script>\n\n\n\n# ä¼ç¼ºç¹\n\n * è¾åºç»ææ´å æå¹³\n * èªå¨ç§»é¤æªå¼ç¨ä»£ç \n * æåç»æä¾ç¶å®å¨å¯è¯»\n\n----------------------------------------\n\n * å è½½é esm çç¬¬ä¸æ¹æ¨¡åæ¯è¾å¤æ\n * æ¨¡åæç»é½è¢«æåå°ä¸ä¸ªå½æ°ä¸­ï¼æ æ³å®ç° hmr\n * æµè§å¨ç¯å¢ä¸­ï¼ä»£ç æååè½ä¾èµ amd åº\n\n----------------------------------------\n\nå¼ååºç¨ç¨åºä½¿ç¨ webpackï¼å¼åä¸ä¸ªæ¡æ¶æèç±»åºä½¿ç¨ rollup",charsets:{cjk:!0}},{title:"ååæµè¯",frontmatter:{},regularPath:"/engineering/test.html",relativePath:"engineering/test.md",key:"v-5446e962",path:"/engineering/test.html",headers:[{level:2,title:"Jest",slug:"jest",normalizedTitle:"jest",charIndex:34},{level:3,title:"éç½®æ¹å¼",slug:"éç½®æ¹å¼",normalizedTitle:"éç½®æ¹å¼",charIndex:125},{level:3,title:"transform",slug:"transform",normalizedTitle:"transform",charIndex:494},{level:3,title:"testEnvironment",slug:"testenvironment",normalizedTitle:"testenvironment",charIndex:464},{level:3,title:"testEnvironmentOptions",slug:"testenvironmentoptions",normalizedTitle:"testenvironmentoptions",charIndex:1916},{level:2,title:"æ¡æ¶æä¾çåæµå·¥å·",slug:"æ¡æ¶æä¾çåæµå·¥å·",normalizedTitle:"æ¡æ¶æä¾çåæµå·¥å·",charIndex:2198},{level:3,title:"Vue Test Utils",slug:"vue-test-utils",normalizedTitle:"vue test utils",charIndex:2212},{level:3,title:"San-test-utils",slug:"san-test-utils",normalizedTitle:"san-test-utils",charIndex:2331},{level:2,title:"åæµè¦çç",slug:"åæµè¦çç",normalizedTitle:"åæµè¦çç",charIndex:2372}],lastUpdated:"8/3/2022, 8:01:09 PM",lastUpdatedTimestamp:1659528069e3,headersStr:"Jest éç½®æ¹å¼ transform testEnvironment testEnvironmentOptions æ¡æ¶æä¾çåæµå·¥å· Vue Test Utils San-test-utils åæµè¦çç",content:"# ååæµè¯\n\nåç«¯æ¢é¥­ç¢ç³»åä¹Vueé¡¹ç®ä¸­å¦ä½åååæµè¯\n\n\n# Jest\n\nJestæ¯Facebookåºåçä¸ä¸ªæµè¯æ¡æ¶ï¼ç¸è¾äºå¶ä»æµè¯æ¡æ¶ï¼æå¤§çç¹ç¹å°±æ¯åç½®äºå¸¸ç¨çæµè¯å·¥å·ï¼æ¯å¦èªå¸¦æ­è¨ãæµè¯è¦ççå·¥å·ï¼å®ç°äºå¼ç®±å³ç¨ã\n\nå®æ¹ææ¡£\n\n\n# éç½®æ¹å¼\n\npackage.json æè jest.config.js\n\n// package.json\n{\n  \"name\": \"my-project\",\n  \"jest\": {\n    // ...\n  }\n}\n\n\n// jest.config.js\nmodule.exports = {\n  \trootDir: path.resolve(__dirname, '../../'),\n    moduleFileExtensions: ['js', 'json', 'vue'],\n    moduleNameMapper: {\n        '^@/(.*)$': '<rootDir>/src/$1', // æ @ è®¾ç½®ä¸º /src çå«å\n    },\n    testEnvironment: 'jsdom',\n    transform: {\n        '^.+\\\\.js$': '<rootDir>/node_modules/babel-jest',\n        '.*\\\\.(vue)$': '<rootDir>/node_modules/vue-jest',\n    },\n    snapshotSerializers: ['<rootDir>/node_modules/jest-serializer-vue'],\n    setupFiles: ['<rootDir>/test/unit/setup'],\n    coverageDirectory: '<rootDir>/test/unit/coverage',\n    collectCoverageFrom: ['src/**/*.{js,vue}', '!src/main.js', '!src/router/index.js', '!**/node_modules/**'],\n};\n\n\n\n# transform\n\nJest é»è®¤åªä¼å¤ç javascript è¯­æ³ï¼æä»¥é¡¹ç®ä¸­å¦ææ ES6ãvue ç­è¯­æ³ï¼éè¦éç½® transformï¼é¢å¤çå¨ï¼æ¥å¤çã\n\n{\n  // ...\n  \"jest\": {\n    // åè¯ Jest å¤ç `*.vue` æä»¶\n    \"moduleFileExtensions\": [\"js\", \"json\", \"vue\"],\n    // ç¨ `vue-jest` å¤ç `*.vue` æä»¶\n    \"transform\": {\n      \"\\\\.[jt]sx?$\": \"babel-jest\",\n      \".*\\\\.(vue)$\": \"vue-jest\"\n    }\n  }\n}\n\n\nä½¿ç¨babel\n\nç±äºæä»¬éç½®çç¯å¢æ¯ nodeï¼å®çè¯­æ³æ¯CommonJSï¼å æ­¤ test æä»¶ä¸­ä½¿ç¨ES6 è¯­æ³ import æ¶ä¼æ¥éã\n\nbabel-jest ä¸æ¯æ babel7 çæ¬ï¼å¯ä»¥å®è£å¦ä¸ï¼\n\nyarn add babel-jest babel-core@^7.0.0-bridge.0 @babel/core\n\n\nå½è¿è¡jest å½ä»¤æ¶ï¼babel-jest ä¼æ£æµå½åç¯å¢æ¯å¦å®è£äº babel-coreï¼å¦æå®è£äºï¼ä¼å»å .babelrc çéç½®å¹¶æ§è¡ babel å¯¹ä»£ç è¿è¡è½¬åãæä»¬è¿éå¨æ ¹ç®å½ä¸åå»º .babelrc æä»¶ï¼\n\n{\n    \"presets\": [\"@babel/preset-env\"],\n    \"plugins\": [\n        \"@babel/plugin-syntax-dynamic-import\" // æ¯æ import è¯­æ³\n    ]\n}\n\n\n\n# testEnvironment\n\njest é»è®¤ä¸º node ç¯å¢ï¼å¦æä½ æå»ºçæ¯ä¸ä¸ª web app ï¼é£ä¹éè¦ä½¿ç¨ jsdomãæèå¯ä»¥å¨æµè¯æä»¶é¡¶é¨å ä¸å¦ä¸éç½®ï¼\n\n/**\n * @jest-environment jsdom\n */\n\ntest('use jsdom in this test file', () => {\n  const element = document.createElement('div');\n  expect(element).not.toBeNull();\n});\n\n\n\n# testEnvironmentOptions\n\nOptions ä¼ä½ä¸ºåæ°ä¼ éç» testEnvironmentã\n\n/**\n * @jest-environment jsdom\n * @jest-environment-options {\"url\": \"https://jestjs.io/\"}\n */\n\ntest('use jsdom and set the URL in this test file', () => {\n  expect(window.location.href).toBe('https://jestjs.io/');\n});\n\n\n\n# æ¡æ¶æä¾çåæµå·¥å·\n\n\n# Vue Test Utils\n\nVue Test Utils æ¯ Vue.js å®æ¹çååæµè¯å®ç¨å·¥å·åºã\n\n * Vue Test Utils 1 ç¨äº Vue 2.\n * Vue Test Utils 2 ç¨äº Vue 3.\n\n\n# San-test-utils\n\n * githubå°å\n\n * å®æ¹ææ¡£\n\n\n# åæµè¦çç\n\n * ååæµè¯è¦çç\n * ä»£ç è¦ççå·¥å· Istanbul å¥é¨æç¨",normalizedContent:"# ååæµè¯\n\nåç«¯æ¢é¥­ç¢ç³»åä¹vueé¡¹ç®ä¸­å¦ä½åååæµè¯\n\n\n# jest\n\njestæ¯facebookåºåçä¸ä¸ªæµè¯æ¡æ¶ï¼ç¸è¾äºå¶ä»æµè¯æ¡æ¶ï¼æå¤§çç¹ç¹å°±æ¯åç½®äºå¸¸ç¨çæµè¯å·¥å·ï¼æ¯å¦èªå¸¦æ­è¨ãæµè¯è¦ççå·¥å·ï¼å®ç°äºå¼ç®±å³ç¨ã\n\nå®æ¹ææ¡£\n\n\n# éç½®æ¹å¼\n\npackage.json æè jest.config.js\n\n// package.json\n{\n  \"name\": \"my-project\",\n  \"jest\": {\n    // ...\n  }\n}\n\n\n// jest.config.js\nmodule.exports = {\n  \trootdir: path.resolve(__dirname, '../../'),\n    modulefileextensions: ['js', 'json', 'vue'],\n    modulenamemapper: {\n        '^@/(.*)$': '<rootdir>/src/$1', // æ @ è®¾ç½®ä¸º /src çå«å\n    },\n    testenvironment: 'jsdom',\n    transform: {\n        '^.+\\\\.js$': '<rootdir>/node_modules/babel-jest',\n        '.*\\\\.(vue)$': '<rootdir>/node_modules/vue-jest',\n    },\n    snapshotserializers: ['<rootdir>/node_modules/jest-serializer-vue'],\n    setupfiles: ['<rootdir>/test/unit/setup'],\n    coveragedirectory: '<rootdir>/test/unit/coverage',\n    collectcoveragefrom: ['src/**/*.{js,vue}', '!src/main.js', '!src/router/index.js', '!**/node_modules/**'],\n};\n\n\n\n# transform\n\njest é»è®¤åªä¼å¤ç javascript è¯­æ³ï¼æä»¥é¡¹ç®ä¸­å¦ææ es6ãvue ç­è¯­æ³ï¼éè¦éç½® transformï¼é¢å¤çå¨ï¼æ¥å¤çã\n\n{\n  // ...\n  \"jest\": {\n    // åè¯ jest å¤ç `*.vue` æä»¶\n    \"modulefileextensions\": [\"js\", \"json\", \"vue\"],\n    // ç¨ `vue-jest` å¤ç `*.vue` æä»¶\n    \"transform\": {\n      \"\\\\.[jt]sx?$\": \"babel-jest\",\n      \".*\\\\.(vue)$\": \"vue-jest\"\n    }\n  }\n}\n\n\nä½¿ç¨babel\n\nç±äºæä»¬éç½®çç¯å¢æ¯ nodeï¼å®çè¯­æ³æ¯commonjsï¼å æ­¤ test æä»¶ä¸­ä½¿ç¨es6 è¯­æ³ import æ¶ä¼æ¥éã\n\nbabel-jest ä¸æ¯æ babel7 çæ¬ï¼å¯ä»¥å®è£å¦ä¸ï¼\n\nyarn add babel-jest babel-core@^7.0.0-bridge.0 @babel/core\n\n\nå½è¿è¡jest å½ä»¤æ¶ï¼babel-jest ä¼æ£æµå½åç¯å¢æ¯å¦å®è£äº babel-coreï¼å¦æå®è£äºï¼ä¼å»å .babelrc çéç½®å¹¶æ§è¡ babel å¯¹ä»£ç è¿è¡è½¬åãæä»¬è¿éå¨æ ¹ç®å½ä¸åå»º .babelrc æä»¶ï¼\n\n{\n    \"presets\": [\"@babel/preset-env\"],\n    \"plugins\": [\n        \"@babel/plugin-syntax-dynamic-import\" // æ¯æ import è¯­æ³\n    ]\n}\n\n\n\n# testenvironment\n\njest é»è®¤ä¸º node ç¯å¢ï¼å¦æä½ æå»ºçæ¯ä¸ä¸ª web app ï¼é£ä¹éè¦ä½¿ç¨ jsdomãæèå¯ä»¥å¨æµè¯æä»¶é¡¶é¨å ä¸å¦ä¸éç½®ï¼\n\n/**\n * @jest-environment jsdom\n */\n\ntest('use jsdom in this test file', () => {\n  const element = document.createelement('div');\n  expect(element).not.tobenull();\n});\n\n\n\n# testenvironmentoptions\n\noptions ä¼ä½ä¸ºåæ°ä¼ éç» testenvironmentã\n\n/**\n * @jest-environment jsdom\n * @jest-environment-options {\"url\": \"https://jestjs.io/\"}\n */\n\ntest('use jsdom and set the url in this test file', () => {\n  expect(window.location.href).tobe('https://jestjs.io/');\n});\n\n\n\n# æ¡æ¶æä¾çåæµå·¥å·\n\n\n# vue test utils\n\nvue test utils æ¯ vue.js å®æ¹çååæµè¯å®ç¨å·¥å·åºã\n\n * vue test utils 1 ç¨äº vue 2.\n * vue test utils 2 ç¨äº vue 3.\n\n\n# san-test-utils\n\n * githubå°å\n\n * å®æ¹ææ¡£\n\n\n# åæµè¦çç\n\n * ååæµè¯è¦çç\n * ä»£ç è¦ççå·¥å· istanbul å¥é¨æç¨",charsets:{cjk:!0}},{title:"gitæä½",frontmatter:{title:"gitæä½",date:"2020-12-17T11:27:54.000Z",categories:"è§è"},regularPath:"/git/git.html",relativePath:"git/git.md",key:"v-1a6af8df",path:"/git/git.html",headers:[{level:2,title:"git",slug:"git",normalizedTitle:"git",charIndex:2},{level:3,title:"commit è§è",slug:"commit-è§è",normalizedTitle:"commit è§è",charIndex:19},{level:3,title:"sourceTree",slug:"sourcetree",normalizedTitle:"sourcetree",charIndex:32},{level:3,title:"åå¹¶å¤æ¡ commit",slug:"åå¹¶å¤æ¡-commit",normalizedTitle:"åå¹¶å¤æ¡ commit",charIndex:46},{level:3,title:"git reset --soft [commitID]",slug:"git-reset-soft-commitid",normalizedTitle:"git reset --soft [commitid]",charIndex:1180},{level:3,title:"git stash",slug:"git-stash",normalizedTitle:"git stash",charIndex:61},{level:3,title:"git commit --amend",slug:"git-commit-amend",normalizedTitle:"git commit --amend",charIndex:74},{level:3,title:"æåæ¬å°ä¸å­å¨çè¿ç¨åæ¯",slug:"æåæ¬å°ä¸å­å¨çè¿ç¨åæ¯",normalizedTitle:"æåæ¬å°ä¸å­å¨çè¿ç¨åæ¯",charIndex:1458},{level:2,title:"gitemoji",slug:"gitemoji",normalizedTitle:"gitemoji",charIndex:96},{level:2,title:"cherry-pick",slug:"cherry-pick",normalizedTitle:"cherry-pick",charIndex:108},{level:2,title:"ä¸äºé®é¢",slug:"ä¸äºé®é¢",normalizedTitle:"ä¸äºé®é¢",charIndex:1694}],lastUpdated:"10/14/2022, 2:59:06 PM",lastUpdatedTimestamp:1665730746e3,headersStr:"git commit è§è sourceTree åå¹¶å¤æ¡ commit git reset --soft [commitID] git stash git commit --amend æåæ¬å°ä¸å­å¨çè¿ç¨åæ¯ gitemoji cherry-pick ä¸äºé®é¢",content:"# gitæä½\n\n * git\n * commit è§è\n * sourceTree\n * åå¹¶å¤æ¡ commit\n * git stash\n * git commit --amend\n * gitemoji\n * cherry-pick\n\n\n# git\n\n * gitå¸¸è§å½ä»¤ï¼https://blog.csdn.net/web_csdn_share/article/details/79243308\n * git resetåçï¼https://www.cnblogs.com/wangwenjin2026/p/11549285.html\n * ä»ä¹æ¯forkï¼https://www.liaoxuefeng.com/wiki/896043488029600/900937935629664\n\n\n# commit è§è\n\n> commitizenæ¯ä¸ä¸ªnodejså½ä»¤è¡å·¥å·ï¼éè¿äº¤äºçæ¹å¼ï¼çæç¬¦åè§èçgit commitï¼ä½¿ç¨å¦ä¸\n\ngit add .\ngit cz\n\n\n# å¦ä½å®è£\n\n// å¨å±å®è£\nnpm install -g commitizen \n// ææ¬å°å®è£\n$ npm install --save-dev commitizen\n// å®è£ééå¨\nnpm install cz-conventional-changelog\n\n\n\n# sourceTree\n\n * ä¾¿äºæ¥çåæ¯å¾è¡¨\n * Dark ä¸»é¢\n\n\n# åå¹¶å¤æ¡ commit\n\n# git rebase\n\næ¼ç¤ºå°å\n\nåèè¿ä¸æ¬¡å½»åºææ Git Rebaseï¼å®ç¾çæ´»ï¼git rebase -i | Linux ä¸­å½ï¼ãGitãrebase ç¨æ³å°ç»\n\ngit rebase -i head~3 // åå¹¶æè¿ä¸æ¡commit\n\n\nå¼¹åºç¼è¾çé¢\n\n> pick b931dac ä¿®æ¹test2ä¸ºtest pick efd10a0 feat: ç¾¤å¼æµå å¥½åæ¶é´ pick 860aea3 åå¹¶\n> \n> # commands\n> \n> pickï¼ä¿çè¯¥commitï¼ç¼©å:pï¼\n> \n> rewordï¼ä¿çè¯¥commitï¼ä½æéè¦ä¿®æ¹è¯¥commitçæ³¨éï¼ç¼©å:rï¼\n> \n> editï¼ä¿çè¯¥commit, ä½æè¦åä¸æ¥ä¿®æ¹è¯¥æäº¤(ä¸ä»ä»ä¿®æ¹æ³¨é)ï¼ç¼©å:eï¼\n> \n> squashï¼å°è¯¥commitååä¸ä¸ªcommitåå¹¶ï¼ç¼©å:sï¼\n> \n> fixupï¼å°è¯¥commitååä¸ä¸ªcommitåå¹¶ï¼ä½æä¸è¦ä¿çè¯¥æäº¤çæ³¨éä¿¡æ¯ï¼ç¼©å:fï¼\n> \n> execï¼æ§è¡shellå½ä»¤ï¼ç¼©å:xï¼\n> \n> dropï¼æè¦ä¸¢å¼è¯¥commitï¼ç¼©å:dï¼\n\næä¸è¬éæ©rffå½ä»¤ï¼ä½¿ç¨æä¸é¢çæäº¤å¹¶ä¿®æ¹ï¼åä¸¤æ¡åå¹¶ï¼ç¶åç»§ç»­è¿å¥ç¼è¾çé¢ä¿®æ¹æäº¤è®°å½ï¼:wq éåº\n\n\n# git reset --soft [commitID]\n\n> å¸¦ --soft åæ°çåºå«å¨äºææ¹å¨åå®¹æ·»å å°æå­åº ç¸å½äºæ§è¡äºgit add .\n\n\n# git stash\n\nåºæ¯ï¼æ­£å¨featureåæ¯åä»£ç æ¶ï¼çº¿ä¸åºç°bugï¼éè¦ååmasterä¿®å¤\n\ngit stash\ngit checkout master\n// ä¿®å¤ä¸­...\ngit checkout <feture_branch> //åæ¢åæåè½å¼åçåæ¯\ngit stash pop //ååºä¿®æ¹\n\n\n\n# git commit --amend\n\nä¿®æ¹gitæäº¤è®°å½ç¨æ³è¯¦è§£\n\n\n# æåæ¬å°ä¸å­å¨çè¿ç¨åæ¯\n\ngit checkout -b 1.0 origin/1.0\ngit pull\n\n\n\n# gitemoji\n\nhttps://gitmoji.js.org/\n\n\n# cherry-pick\n\ngit cherry-pick æç¨\n\nå¦æå²çªåè§£å³å²çªå git add . git cherry-pick --continue\n\nrebaseãmergeãcherry-pick é½æ --abortï¼ç¸å½äºåæï¼åå°æä½ä¹åçç¶æï¼\n\n\n# ä¸äºé®é¢\n\n1ã2021.8.14 githubä¿®æ¹å¯ç æ ¡éªä¸º token æ ¡éª\n\n * https://blog.csdn.net/weixin_41010198/article/details/119698015\n\n * https://blog.csdn.net/m0_46332820/article/details/119708248\n\n2ãæä¹éç½®å½ä»¤è¡ä»£ç\n\n// éç½®ä»£çï¼\ngit config --global http.proxy <ä»£çå°å>\n// ç¨å®éç½®ï¼\ngit config --global --unset http.proxy\n\n\n3ãcd .. å cd - æä»ä¹åºå«\n\n * cd..ï¼è¿åå°ä¸ä¸çº§ç®å½\n * cd -ï¼è¿åå°ä¸ä¸æ¬¡çå·¥ä½ç®å½\n\n4ãgit add .ä¸git add -Açåºå«\n\n * git add .ï¼å°ä¿®æ¹åæ°å¢çæä»¶æ·»å å°æå­åº\n * git add -Aï¼å°ä¿®æ¹ï¼æ°å¢åå é¤çæä»¶æ·»å å°æå­åºï¼æ¹ä¾¿æ¢å¤è¢«å é¤çæä»¶ï¼",normalizedContent:"# gitæä½\n\n * git\n * commit è§è\n * sourcetree\n * åå¹¶å¤æ¡ commit\n * git stash\n * git commit --amend\n * gitemoji\n * cherry-pick\n\n\n# git\n\n * gitå¸¸è§å½ä»¤ï¼https://blog.csdn.net/web_csdn_share/article/details/79243308\n * git resetåçï¼https://www.cnblogs.com/wangwenjin2026/p/11549285.html\n * ä»ä¹æ¯forkï¼https://www.liaoxuefeng.com/wiki/896043488029600/900937935629664\n\n\n# commit è§è\n\n> commitizenæ¯ä¸ä¸ªnodejså½ä»¤è¡å·¥å·ï¼éè¿äº¤äºçæ¹å¼ï¼çæç¬¦åè§èçgit commitï¼ä½¿ç¨å¦ä¸\n\ngit add .\ngit cz\n\n\n# å¦ä½å®è£\n\n// å¨å±å®è£\nnpm install -g commitizen \n// ææ¬å°å®è£\n$ npm install --save-dev commitizen\n// å®è£ééå¨\nnpm install cz-conventional-changelog\n\n\n\n# sourcetree\n\n * ä¾¿äºæ¥çåæ¯å¾è¡¨\n * dark ä¸»é¢\n\n\n# åå¹¶å¤æ¡ commit\n\n# git rebase\n\næ¼ç¤ºå°å\n\nåèè¿ä¸æ¬¡å½»åºææ git rebaseï¼å®ç¾çæ´»ï¼git rebase -i | linux ä¸­å½ï¼ãgitãrebase ç¨æ³å°ç»\n\ngit rebase -i head~3 // åå¹¶æè¿ä¸æ¡commit\n\n\nå¼¹åºç¼è¾çé¢\n\n> pick b931dac ä¿®æ¹test2ä¸ºtest pick efd10a0 feat: ç¾¤å¼æµå å¥½åæ¶é´ pick 860aea3 åå¹¶\n> \n> # commands\n> \n> pickï¼ä¿çè¯¥commitï¼ç¼©å:pï¼\n> \n> rewordï¼ä¿çè¯¥commitï¼ä½æéè¦ä¿®æ¹è¯¥commitçæ³¨éï¼ç¼©å:rï¼\n> \n> editï¼ä¿çè¯¥commit, ä½æè¦åä¸æ¥ä¿®æ¹è¯¥æäº¤(ä¸ä»ä»ä¿®æ¹æ³¨é)ï¼ç¼©å:eï¼\n> \n> squashï¼å°è¯¥commitååä¸ä¸ªcommitåå¹¶ï¼ç¼©å:sï¼\n> \n> fixupï¼å°è¯¥commitååä¸ä¸ªcommitåå¹¶ï¼ä½æä¸è¦ä¿çè¯¥æäº¤çæ³¨éä¿¡æ¯ï¼ç¼©å:fï¼\n> \n> execï¼æ§è¡shellå½ä»¤ï¼ç¼©å:xï¼\n> \n> dropï¼æè¦ä¸¢å¼è¯¥commitï¼ç¼©å:dï¼\n\næä¸è¬éæ©rffå½ä»¤ï¼ä½¿ç¨æä¸é¢çæäº¤å¹¶ä¿®æ¹ï¼åä¸¤æ¡åå¹¶ï¼ç¶åç»§ç»­è¿å¥ç¼è¾çé¢ä¿®æ¹æäº¤è®°å½ï¼:wq éåº\n\n\n# git reset --soft [commitid]\n\n> å¸¦ --soft åæ°çåºå«å¨äºææ¹å¨åå®¹æ·»å å°æå­åº ç¸å½äºæ§è¡äºgit add .\n\n\n# git stash\n\nåºæ¯ï¼æ­£å¨featureåæ¯åä»£ç æ¶ï¼çº¿ä¸åºç°bugï¼éè¦ååmasterä¿®å¤\n\ngit stash\ngit checkout master\n// ä¿®å¤ä¸­...\ngit checkout <feture_branch> //åæ¢åæåè½å¼åçåæ¯\ngit stash pop //ååºä¿®æ¹\n\n\n\n# git commit --amend\n\nä¿®æ¹gitæäº¤è®°å½ç¨æ³è¯¦è§£\n\n\n# æåæ¬å°ä¸å­å¨çè¿ç¨åæ¯\n\ngit checkout -b 1.0 origin/1.0\ngit pull\n\n\n\n# gitemoji\n\nhttps://gitmoji.js.org/\n\n\n# cherry-pick\n\ngit cherry-pick æç¨\n\nå¦æå²çªåè§£å³å²çªå git add . git cherry-pick --continue\n\nrebaseãmergeãcherry-pick é½æ --abortï¼ç¸å½äºåæï¼åå°æä½ä¹åçç¶æï¼\n\n\n# ä¸äºé®é¢\n\n1ã2021.8.14 githubä¿®æ¹å¯ç æ ¡éªä¸º token æ ¡éª\n\n * https://blog.csdn.net/weixin_41010198/article/details/119698015\n\n * https://blog.csdn.net/m0_46332820/article/details/119708248\n\n2ãæä¹éç½®å½ä»¤è¡ä»£ç\n\n// éç½®ä»£çï¼\ngit config --global http.proxy <ä»£çå°å>\n// ç¨å®éç½®ï¼\ngit config --global --unset http.proxy\n\n\n3ãcd .. å cd - æä»ä¹åºå«\n\n * cd..ï¼è¿åå°ä¸ä¸çº§ç®å½\n * cd -ï¼è¿åå°ä¸ä¸æ¬¡çå·¥ä½ç®å½\n\n4ãgit add .ä¸git add -açåºå«\n\n * git add .ï¼å°ä¿®æ¹åæ°å¢çæä»¶æ·»å å°æå­åº\n * git add -aï¼å°ä¿®æ¹ï¼æ°å¢åå é¤çæä»¶æ·»å å°æå­åºï¼æ¹ä¾¿æ¢å¤è¢«å é¤çæä»¶ï¼",charsets:{cjk:!0}},{title:"è±è¯­å­¦ä¹ ",frontmatter:{},regularPath:"/interview/english.html",relativePath:"interview/english.md",key:"v-614479ff",path:"/interview/english.html",headers:[{level:2,title:"åè¯",slug:"åè¯",normalizedTitle:"åè¯",charIndex:11},{level:2,title:"é¿å¥",slug:"é¿å¥",normalizedTitle:"é¿å¥",charIndex:489},{level:2,title:"æç« ",slug:"æç« ",normalizedTitle:"æç« ",charIndex:1763}],lastUpdated:"9/2/2022, 8:20:25 PM",lastUpdatedTimestamp:1662121225e3,headersStr:"åè¯ é¿å¥ æç« ",content:"# è±è¯­å­¦ä¹ \n\n\n# åè¯\n\nMISSION       PLUG IN       THRESHOLD   RIPPLE EFFECT   BENCHMARKS     DELIMITED\niteration     conflated     hazards     handy           capable        clumsy\nsomewhat      reach for     underused   literal         mechanism      collision\nergonomic     intuitively   nuances     constitute      introduce      infamously\nretrieve      dedicated     awkward     clunk           Nevertheless   melt\ncome across   recursive     grasp       crude           paradigm       \n\n\n# é¿å¥\n\n * This is done on a best-effort basis as some compile-to-JavaScript languages may provide more accurate source maps than others.\n * resource-intensive\n * Jest will use them to try and map code coverage against the original source code when writing reports and checking thresholds.\n * jest transform: A map from regular expressions to paths to transformers. Optionally, a tuple with configuration options can be passed as second argument: {filePattern: ['path-to-transformer', {options}]}. For example, here is how you can configure babel-jest for non-default behavior: {'\\\\.js$': ['babel-jest', {rootMode: 'upward'}]}.\n * Jest runs the code of your project as JavaScript, hence a transformer is needed if you use some syntax not supported by Node out of the box (such as JSX, TypeScript, Vue templates). By default, Jest will use babel-jest transformer, which will load your project's Babel configuration and transform any file matching the /\\.[jt]sx?$/ RegExp (in other words, any .js, .jsx, .ts or .tsx file). In addition, babel-jest will inject the Babel plugin necessary for mock hoisting talked about in ES Module mocking.\n * Remember to include the default babel-jest transformer explicitly, if you wish to use it alongside with additional code preprocessors\n\n\n# æç« \n\n * When You Should Prefer Map Over Object In JavaScript",normalizedContent:"# è±è¯­å­¦ä¹ \n\n\n# åè¯\n\nmission       plug in       threshold   ripple effect   benchmarks     delimited\niteration     conflated     hazards     handy           capable        clumsy\nsomewhat      reach for     underused   literal         mechanism      collision\nergonomic     intuitively   nuances     constitute      introduce      infamously\nretrieve      dedicated     awkward     clunk           nevertheless   melt\ncome across   recursive     grasp       crude           paradigm       \n\n\n# é¿å¥\n\n * this is done on a best-effort basis as some compile-to-javascript languages may provide more accurate source maps than others.\n * resource-intensive\n * jest will use them to try and map code coverage against the original source code when writing reports and checking thresholds.\n * jest transform: a map from regular expressions to paths to transformers. optionally, a tuple with configuration options can be passed as second argument: {filepattern: ['path-to-transformer', {options}]}. for example, here is how you can configure babel-jest for non-default behavior: {'\\\\.js$': ['babel-jest', {rootmode: 'upward'}]}.\n * jest runs the code of your project as javascript, hence a transformer is needed if you use some syntax not supported by node out of the box (such as jsx, typescript, vue templates). by default, jest will use babel-jest transformer, which will load your project's babel configuration and transform any file matching the /\\.[jt]sx?$/ regexp (in other words, any .js, .jsx, .ts or .tsx file). in addition, babel-jest will inject the babel plugin necessary for mock hoisting talked about in es module mocking.\n * remember to include the default babel-jest transformer explicitly, if you wish to use it alongside with additional code preprocessors\n\n\n# æç« \n\n * when you should prefer map over object in javascript",charsets:{cjk:!0}},{title:"å¸¸èç®æ³æ´ç",frontmatter:{title:"å¸¸èç®æ³æ´ç",date:"2021-03-12T09:21:01.000Z",categories:"é¢è¯"},regularPath:"/interview/algorithm.html",relativePath:"interview/algorithm.md",key:"v-4f8373df",path:"/interview/algorithm.html",headers:[{level:2,title:"å¨æè§å",slug:"å¨æè§å",normalizedTitle:"å¨æè§å",charIndex:2},{level:2,title:"åæº¯ç®æ³",slug:"åæº¯ç®æ³",normalizedTitle:"åæº¯ç®æ³",charIndex:149},{level:2,title:"æ ",slug:"æ ",normalizedTitle:"æ ",charIndex:254},{level:2,title:"å­ç¬¦ä¸²",slug:"å­ç¬¦ä¸²",normalizedTitle:"å­ç¬¦ä¸²",charIndex:332},{level:2,title:"é¾è¡¨",slug:"é¾è¡¨",normalizedTitle:"é¾è¡¨",charIndex:380},{level:2,title:"æ°ç»",slug:"æ°ç»",normalizedTitle:"æ°ç»",charIndex:35},{level:2,title:"äºåæ ",slug:"äºåæ ",normalizedTitle:"äºåæ ",charIndex:585},{level:2,title:"DFS / BFS",slug:"dfs-bfs",normalizedTitle:"dfs / bfs",charIndex:730},{level:2,title:"åå¤§æåºç®æ³",slug:"åå¤§æåºç®æ³",normalizedTitle:"åå¤§æåºç®æ³",charIndex:847},{level:2,title:"åæé",slug:"åæé",normalizedTitle:"åæé",charIndex:1044}],lastUpdated:"3/16/2023, 6:45:18 PM",lastUpdatedTimestamp:1678963518e3,headersStr:"å¨æè§å åæº¯ç®æ³ æ  å­ç¬¦ä¸² é¾è¡¨ æ°ç» äºåæ  DFS / BFS åå¤§æåºç®æ³ åæé",content:"# å¨æè§å\n\n * ç¬æ¥¼æ¢¯\n * æå¤§å­åºåå / æå¤§å­åºååå¯¹åºæ°ç»\n * æé¿éå¤å­æ°ç»\n * æ éå¤å­ç¬¦çæé¿å­ä¸²\n * æé¿éå¢å­åºå\n * æé¿å¬å±å­åºå\n * ä¹°åè¡ç¥¨çæä½³æ¶æº\n * ä¸è§å½¢æå°è·¯å¾å\n * æå®¶å«è\n * ä¸åè·¯å¾\n * æå°è·¯å¾å\n * åå²ç­åå­é\n\n\n# åæº¯ç®æ³\n\n * ç»åæ»å i / ç»åæ»å ii / æ°ç»æ¾nä¸ªæ°æ±å\n * æ°å­å¨æå / äºç»´æ°ç»å¨æå\n * æ¬å·çæ\n * çµè¯å·ç çæ°å­ç»å\n * å­é\n * è·¯å¾æ»å\n * è·¯å¾æ»åii\n\n\n# æ \n\n * æé¿æææ¬å·\n * å»é¤éå¤å­æ¯\n * ç§»æ k ä½æ°å­\n * æ¥é¨æ°´\n * æ±ç¶å¾ä¸­çæå¤§ç©å½¢\n * æå¤§ç©å½¢\n * ä¸¤ä¸ªæ å®ç°éå\n\n\n# å­ç¬¦ä¸²\n\n * æé¿å¬å±åç¼\n * éå¤çå­å­ç¬¦ä¸²\n * å­ç¬¦ä¸²ç¸å \n * æ¯è¾çæ¬å·\n\n\n# é¾è¡¨\n\n * ç¯å½¢é¾è¡¨ i\n * ç¯å½¢é¾è¡¨ ii\n * åè½¬é¾è¡¨\n * åå¹¶ä¸¤ä¸ªæåºé¾è¡¨\n * åå¹¶ k ä¸ªæåºé¾è¡¨\n * å é¤é¾è¡¨åæ°ç¬¬ n ä¸ªèç¹\n * é¾è¡¨ä¸­åæ°ç¬¬kä¸ªèç¹\n * å¥å¶é¾è¡¨\n * ç¸äº¤é¾è¡¨\n\n\n# æ°ç»\n\n * åå¹¶ä¸¤ä¸ªæåºæ°ç»\n * åå¹¶åºé´\n * æè½¬ç©éµ\n * é¡ºæ¶éæå°ç©éµ\n * äºåæ¥æ¾\n * æ°ç»ä¸­ç¬¬kå¤§åç´ \n * é¿åº¦æå°å­æ°ç»\n * ä¸ä¸ä¸ªæå\n * äºåæ¥æ¾\n\n\n# äºåæ \n\n * ååºï¼ä¸­åºï¼ååºï¼éå½ / ééå½ï¼\n * å¤æ­äºåæ æ¯å¦ç¸å\n * å¤æ­äºåæ æ¯å¦å¯¹ç§°\n * åå¹¶äºåæ \n * æ±äºåæ çæ·±åº¦\n * ç¿»è½¬äºåæ \n * äºåæ çå±æ¬¡éå\n * æ±äºåæ çå®½åº¦\n * äºåæ çå³è§å¾\n * äºåæç´¢æ çç¬¬Kå¤§èç¹\n * æè¿å¬å±ç¥å\n\n\n# DFS / BFS\n\n * DFS (éå½ / ééå½)\n * BFSï¼ééå½ï¼\n * æ±æ ¹å°å¶å­èç¹æ°å­ä¹å\n * è·¯å¾æ»å\n * å²å±¿æ°é\n * å²å±¿æå¤§é¢ç§¯\n * æå®¶å«èiii\n * åè¯æ¥é¾\n * Nåæ°çæå¤§æ·±åº¦\n\n\n# åå¤§æåºç®æ³\n\n * åæ³¡æåº\n * éæ©æåº\n * æå¥æåº\n * å¸å°æåº\n * å½å¹¶æåº\n * å¿«éæåº\n * å æåº\n * è®¡æ°æåº\n * æ¡¶æåº\n * åºæ°æåº\n * sortåçï¼å½æ°ç»é¿åº¦å°äºç­äº10çæ¶åï¼éç¨æå¥æåºï¼å¤§äº10çæ¶åï¼éç¨å¿«æã å¯¹äºé¿åº¦å¤§äº1000çæ°ç»ï¼éç¨çæ¯å¿«æä¸æå¥æåºæ··åçæ¹å¼è¿è¡æåºçï¼å ä¸ºï¼å½æ°æ®éå¾å°çæ¶åï¼æå¥æåºæçä¼äºå¿«æã\n\n\n# åæé\n\n * xçå¹³æ¹æ ¹",normalizedContent:"# å¨æè§å\n\n * ç¬æ¥¼æ¢¯\n * æå¤§å­åºåå / æå¤§å­åºååå¯¹åºæ°ç»\n * æé¿éå¤å­æ°ç»\n * æ éå¤å­ç¬¦çæé¿å­ä¸²\n * æé¿éå¢å­åºå\n * æé¿å¬å±å­åºå\n * ä¹°åè¡ç¥¨çæä½³æ¶æº\n * ä¸è§å½¢æå°è·¯å¾å\n * æå®¶å«è\n * ä¸åè·¯å¾\n * æå°è·¯å¾å\n * åå²ç­åå­é\n\n\n# åæº¯ç®æ³\n\n * ç»åæ»å i / ç»åæ»å ii / æ°ç»æ¾nä¸ªæ°æ±å\n * æ°å­å¨æå / äºç»´æ°ç»å¨æå\n * æ¬å·çæ\n * çµè¯å·ç çæ°å­ç»å\n * å­é\n * è·¯å¾æ»å\n * è·¯å¾æ»åii\n\n\n# æ \n\n * æé¿æææ¬å·\n * å»é¤éå¤å­æ¯\n * ç§»æ k ä½æ°å­\n * æ¥é¨æ°´\n * æ±ç¶å¾ä¸­çæå¤§ç©å½¢\n * æå¤§ç©å½¢\n * ä¸¤ä¸ªæ å®ç°éå\n\n\n# å­ç¬¦ä¸²\n\n * æé¿å¬å±åç¼\n * éå¤çå­å­ç¬¦ä¸²\n * å­ç¬¦ä¸²ç¸å \n * æ¯è¾çæ¬å·\n\n\n# é¾è¡¨\n\n * ç¯å½¢é¾è¡¨ i\n * ç¯å½¢é¾è¡¨ ii\n * åè½¬é¾è¡¨\n * åå¹¶ä¸¤ä¸ªæåºé¾è¡¨\n * åå¹¶ k ä¸ªæåºé¾è¡¨\n * å é¤é¾è¡¨åæ°ç¬¬ n ä¸ªèç¹\n * é¾è¡¨ä¸­åæ°ç¬¬kä¸ªèç¹\n * å¥å¶é¾è¡¨\n * ç¸äº¤é¾è¡¨\n\n\n# æ°ç»\n\n * åå¹¶ä¸¤ä¸ªæåºæ°ç»\n * åå¹¶åºé´\n * æè½¬ç©éµ\n * é¡ºæ¶éæå°ç©éµ\n * äºåæ¥æ¾\n * æ°ç»ä¸­ç¬¬kå¤§åç´ \n * é¿åº¦æå°å­æ°ç»\n * ä¸ä¸ä¸ªæå\n * äºåæ¥æ¾\n\n\n# äºåæ \n\n * ååºï¼ä¸­åºï¼ååºï¼éå½ / ééå½ï¼\n * å¤æ­äºåæ æ¯å¦ç¸å\n * å¤æ­äºåæ æ¯å¦å¯¹ç§°\n * åå¹¶äºåæ \n * æ±äºåæ çæ·±åº¦\n * ç¿»è½¬äºåæ \n * äºåæ çå±æ¬¡éå\n * æ±äºåæ çå®½åº¦\n * äºåæ çå³è§å¾\n * äºåæç´¢æ çç¬¬kå¤§èç¹\n * æè¿å¬å±ç¥å\n\n\n# dfs / bfs\n\n * dfs (éå½ / ééå½)\n * bfsï¼ééå½ï¼\n * æ±æ ¹å°å¶å­èç¹æ°å­ä¹å\n * è·¯å¾æ»å\n * å²å±¿æ°é\n * å²å±¿æå¤§é¢ç§¯\n * æå®¶å«èiii\n * åè¯æ¥é¾\n * nåæ°çæå¤§æ·±åº¦\n\n\n# åå¤§æåºç®æ³\n\n * åæ³¡æåº\n * éæ©æåº\n * æå¥æåº\n * å¸å°æåº\n * å½å¹¶æåº\n * å¿«éæåº\n * å æåº\n * è®¡æ°æåº\n * æ¡¶æåº\n * åºæ°æåº\n * sortåçï¼å½æ°ç»é¿åº¦å°äºç­äº10çæ¶åï¼éç¨æå¥æåºï¼å¤§äº10çæ¶åï¼éç¨å¿«æã å¯¹äºé¿åº¦å¤§äº1000çæ°ç»ï¼éç¨çæ¯å¿«æä¸æå¥æåºæ··åçæ¹å¼è¿è¡æåºçï¼å ä¸ºï¼å½æ°æ®éå¾å°çæ¶åï¼æå¥æåºæçä¼äºå¿«æã\n\n\n# åæé\n\n * xçå¹³æ¹æ ¹",charsets:{cjk:!0}},{title:"å¤ä¼æ´ç",frontmatter:{},regularPath:"/interview/foreign-company.html",relativePath:"interview/foreign-company.md",key:"v-9f6e0502",path:"/interview/foreign-company.html",lastUpdated:"1/27/2022, 4:20:48 PM",lastUpdatedTimestamp:1643271648e3,headersStr:null,content:"# å¤ä¼æ´ç\n\n * jerry.ai ï¼ç¡è°·ææåä¸å¬å¸ï¼è¿ç¨å·¥ä½ï¼ç¸å³æç« ",normalizedContent:"# å¤ä¼æ´ç\n\n * jerry.ai ï¼ç¡è°·ææåä¸å¬å¸ï¼è¿ç¨å·¥ä½ï¼ç¸å³æç« ",charsets:{cjk:!0}},{title:"é¢è¯é¢ï¼åï¼",frontmatter:{title:"é¢è¯é¢ï¼åï¼",date:"2018-08-03T09:21:01.000Z",categories:"é¢è¯"},regularPath:"/interview/interview-10.html",relativePath:"interview/interview-10.md",key:"v-374d8d79",path:"/interview/interview-10.html",headers:[{level:2,title:"call, apply, bind çåºå«ï¼æä¹å®ç°",slug:"call-apply-bind-çåºå«-æä¹å®ç°",normalizedTitle:"call, apply, bind çåºå«ï¼æä¹å®ç°",charIndex:13},{level:2,title:"vueççå½å¨æ",slug:"vueççå½å¨æ",normalizedTitle:"vueççå½å¨æ",charIndex:47},{level:3,title:"beforeCreate( åå»ºå )",slug:"beforecreate-åå»ºå",normalizedTitle:"beforecreate( åå»ºå )",charIndex:534},{level:3,title:"created ( åå»ºå ï¼",slug:"created-åå»ºå",normalizedTitle:"created ( åå»ºå ï¼",charIndex:641},{level:3,title:"beforeMountï¼æè½½ä¹åï¼",slug:"beforemount-æè½½ä¹å",normalizedTitle:"beforemountï¼æè½½ä¹åï¼",charIndex:969},{level:3,title:"mountedï¼æè½½ï¼",slug:"mounted-æè½½",normalizedTitle:"mountedï¼æè½½ï¼",charIndex:1082},{level:3,title:"beforeUpdateï¼æ´æ°ä¹åï¼",slug:"beforeupdate-æ´æ°ä¹å",normalizedTitle:"beforeupdateï¼æ´æ°ä¹åï¼",charIndex:1154},{level:3,title:"updatedï¼æ´æ°åï¼",slug:"updated-æ´æ°å",normalizedTitle:"updatedï¼æ´æ°åï¼",charIndex:1224},{level:3,title:"beforeDestroyï¼éæ¯åï¼",slug:"beforedestroy-éæ¯å",normalizedTitle:"beforedestroyï¼éæ¯åï¼",charIndex:1355},{level:3,title:"destroyedï¼éæ¯åï¼",slug:"destroyed-éæ¯å",normalizedTitle:"destroyedï¼éæ¯åï¼",charIndex:1437},{level:2,title:"16è¿å¶é¢è²è½¬æ¢ä¸ºrgb",slug:"_16è¿å¶é¢è²è½¬æ¢ä¸ºrgb",normalizedTitle:"16è¿å¶é¢è²è½¬æ¢ä¸ºrgb",charIndex:59},{level:2,title:"keep-aliveäºè§£å",slug:"keep-aliveäºè§£å",normalizedTitle:"keep-aliveäºè§£å",charIndex:75},{level:3,title:"ä¸ä¸ªåºæ¯",slug:"ä¸ä¸ªåºæ¯",normalizedTitle:"ä¸ä¸ªåºæ¯",charIndex:1903},{level:2,title:"èèLRUç®æ³",slug:"èèlruç®æ³",normalizedTitle:"èèlruç®æ³",charIndex:92},{level:2,title:"Vueä¸­ç»ä»¶çå½å¨æè°ç¨é¡ºåº",slug:"vueä¸­ç»ä»¶çå½å¨æè°ç¨é¡ºåº",normalizedTitle:"vueä¸­ç»ä»¶çå½å¨æè°ç¨é¡ºåº",charIndex:103},{level:3,title:"å è½½æ¸²æè¿ç¨",slug:"å è½½æ¸²æè¿ç¨",normalizedTitle:"å è½½æ¸²æè¿ç¨",charIndex:2807},{level:3,title:"å­ç»ä»¶æ´æ°è¿ç¨",slug:"å­ç»ä»¶æ´æ°è¿ç¨",normalizedTitle:"å­ç»ä»¶æ´æ°è¿ç¨",charIndex:2918},{level:3,title:"ç¶ç»ä»¶æ´æ°è¿ç¨",slug:"ç¶ç»ä»¶æ´æ°è¿ç¨",normalizedTitle:"ç¶ç»ä»¶æ´æ°è¿ç¨",charIndex:2981},{level:3,title:"éæ¯è¿ç¨",slug:"éæ¯è¿ç¨",normalizedTitle:"éæ¯è¿ç¨",charIndex:3023},{level:2,title:"ä½ é½åè¿åªäºVueçæ§è½ä¼å",slug:"ä½ é½åè¿åªäºvueçæ§è½ä¼å",normalizedTitle:"ä½ é½åè¿åªäºvueçæ§è½ä¼å",charIndex:121},{level:2,title:"npm install åç",slug:"npm-install-åç",normalizedTitle:"npm install åç",charIndex:139},{level:2,title:"Map,weakMap,Set,weakSet",slug:"map-weakmap-set-weakset",normalizedTitle:"map,weakmap,set,weakset",charIndex:157},{level:2,title:"ä»ä¹æ¯å°¾éå½åå°¾è°ç¨",slug:"ä»ä¹æ¯å°¾éå½åå°¾è°ç¨",normalizedTitle:"ä»ä¹æ¯å°¾éå½åå°¾è°ç¨",charIndex:184},{level:2,title:"link ä¸ @import çåºå«",slug:"link-ä¸-import-çåºå«",normalizedTitle:"link ä¸ @import çåºå«",charIndex:198},{level:2,title:"æ°ç» map() å forEach() æ¹æ³çåºå«ï¼",slug:"æ°ç»-map-å-foreach-æ¹æ³çåºå«",normalizedTitle:"æ°ç» map() å foreach() æ¹æ³çåºå«ï¼",charIndex:220},{level:2,title:"éæç½ç«",slug:"éæç½ç«",normalizedTitle:"éæç½ç«",charIndex:254},{level:3,title:"ä»ä¹æ¯éæç½ç«çæå¨",slug:"ä»ä¹æ¯éæç½ç«çæå¨",normalizedTitle:"ä»ä¹æ¯éæç½ç«çæå¨",charIndex:5041},{level:3,title:"å¸¸è§çéæç½ç«çæå¨",slug:"å¸¸è§çéæç½ç«çæå¨",normalizedTitle:"å¸¸è§çéæç½ç«çæå¨",charIndex:5166},{level:3,title:"åºç¨åºæ¯",slug:"åºç¨åºæ¯",normalizedTitle:"åºç¨åºæ¯",charIndex:5321}],lastUpdated:"3/15/2023, 7:26:00 PM",lastUpdatedTimestamp:167887956e4,headersStr:"call, apply, bind çåºå«ï¼æä¹å®ç° vueççå½å¨æ beforeCreate( åå»ºå ) created ( åå»ºå ï¼ beforeMountï¼æè½½ä¹åï¼ mountedï¼æè½½ï¼ beforeUpdateï¼æ´æ°ä¹åï¼ updatedï¼æ´æ°åï¼ beforeDestroyï¼éæ¯åï¼ destroyedï¼éæ¯åï¼ 16è¿å¶é¢è²è½¬æ¢ä¸ºrgb keep-aliveäºè§£å ä¸ä¸ªåºæ¯ èèLRUç®æ³ Vueä¸­ç»ä»¶çå½å¨æè°ç¨é¡ºåº å è½½æ¸²æè¿ç¨ å­ç»ä»¶æ´æ°è¿ç¨ ç¶ç»ä»¶æ´æ°è¿ç¨ éæ¯è¿ç¨ ä½ é½åè¿åªäºVueçæ§è½ä¼å npm install åç Map,weakMap,Set,weakSet ä»ä¹æ¯å°¾éå½åå°¾è°ç¨ link ä¸ @import çåºå« æ°ç» map() å forEach() æ¹æ³çåºå«ï¼ éæç½ç« ä»ä¹æ¯éæç½ç«çæå¨ å¸¸è§çéæç½ç«çæå¨ åºç¨åºæ¯",content:'# é¢è¯é¢ï¼åï¼\n\n * call, apply, bind çåºå«ï¼æä¹å®ç°\n * ä»ç»ä¸ä¸vueççå½å¨æ\n * 16è¿å¶é¢è²è½¬æ¢ä¸ºrgb\n * keep-aliveäºè§£å\n * èèLRUç®æ³\n * Vueä¸­ç»ä»¶çå½å¨æè°ç¨é¡ºåº\n * ä½ é½åè¿åªäºVueçæ§è½ä¼å\n * npm install åç\n * Map,weakMap,Set,weakSet\n * ä»ä¹æ¯å°¾éå½åå°¾è°ç¨\n * link ä¸ @import çåºå«\n * æ°ç» map() å forEach() æ¹æ³çåºå«ï¼\n * ä»ä¹æ¯éæç½ç«\n\n\n# call, apply, bind çåºå«ï¼æä¹å®ç°\n\n> é½æ¯ç¨æ¥æ¹åå½æ°ç this å¯¹è±¡çæåçã\n> \n> ç¬¬ä¸ä¸ªåæ°é½æ¯ this è¦æåçå¯¹è±¡ã\n> \n> é½å¯ä»¥å©ç¨åç»­åæ°ä¼ åã åºå«ï¼\n> \n> call æ¥åå½æ°ä¼ åæ¹å¼ä¸ºï¼fn.call(this, 1, 2, 3)\n> \n> apply æ¥åå½æ°ä¼ åæ¹å¼ä¸ºï¼fn.apply(this,[1, 2, 3])\n> \n> bind çè¿åå¼ä¸ºä¸ä¸ªæ°çå½æ°ï¼éè¦åæ¬¡è°ç¨ï¼ fn.bind(this)(1, 2, 3)\n\n * æåä»£ç æ´ç\n\n\n# vueççå½å¨æ\n\n\n# beforeCreate( åå»ºå )\n\nä½¿ç¨è¿ä¸ªé©å­ï¼ç»ä»¶çéé¡¹å¯¹è±¡å¹¶æ²¡æåå»ºï¼elådataé½è¿æ²¡åå§åï¼æä»¥dataãmethodsåcomputedç­é½ç¨ä¸äºãä¸è¬ç¨æ¥å¨ç»ä»¶æå¨ä¹åæ¸²æä¸äºä¸è¥¿ã\n\n\n# created ( åå»ºå ï¼\n\nè¿æ¶åä¸é¢çdataãmethodsãcomputedé½å·²ç»åå»ºå®æäºï¼æ°æ®è§æµï¼å±æ§åæ¹æ³çè¿ç®ï¼watch/eventäºä»¶åè°é½å®æäºï¼ä½è¿æ¶åæè½½é¶æ®µmountè¿æ²¡å¼å§ï¼æ¯elå¹¶æ²¡æå®æãè¿æ¯æå¸¸ç¨ççå½å¨æé©å­ï¼å¯ä»¥è°ç¨methodsä¸­çæ¹æ³ï¼æ¹ådataä¸­çæ°æ®ï¼å¹¶ä¸ä¿®æ¹å¯ä»¥éè¿vueçååºå¼ç»å®ä½ç°å¨é¡µé¢ä¸ï¼ï¼è·åcomputedä¸­çè®¡ç®å±æ§ç­ç­ï¼éå¸¸æä»¬å¯ä»¥å¨è¿éå¯¹å®ä¾è¿è¡é¢å¤çï¼ä¹å¨è¿éåajaxè¯·æ±ï¼è¿ä¸ªå¨æä¸­æ¯æ²¡æä»ä¹æ¹æ³æ¥å¯¹å®ä¾åè¿ç¨è¿è¡æ¦æªçï¼å æ­¤åå¦ææäºæ°æ®å¿é¡»è·åæåè®¸è¿å¥é¡µé¢çè¯ï¼å¹¶ä¸éåå¨è¿ä¸ªæ¹æ³åè¯·æ±ï¼å»ºè®®å¨ç»ä»¶è·¯ç±é©å­beforeRouteEnterï¼è·¯ç±å®å«ï¼ä¸­å®æ\n\n\n# beforeMountï¼æè½½ä¹åï¼\n\næè½½ä¹åè¢«è°ç¨ï¼renderï¼æ¸²æï¼å½æ°é¦æ¬¡è¢«è°ç¨ï¼èæDOMï¼ï¼è¿éå·²ç»å®æäºæ¨¡æ¿ç¼è¯ï¼dataéé¢çæ°æ®åæ¨¡æ¿ä¼çäº§HTMLï¼è¿éelä¹å®æäºï¼ä½å¹¶æ²¡ææè½½å°htmlé¡µé¢ä¸ã\n\n\n# mountedï¼æè½½ï¼\n\næè½½å®æäºï¼è¿æ¶åHTMLæ¨¡æ¿ä¼è¢«æ¸²æå°HTMLä¸­ï¼è¿å¯ä»¥åä¸äºajaxæä½ãä½mountedåªè½æ§è¡ä¸æ¬¡ã\n\n\n# beforeUpdateï¼æ´æ°ä¹åï¼\n\næ´æ°ææ°æ®æ´æ°ï¼åçå¨èæDOMéæ°æ¸²æåè¡¥ä¸ä¹åï¼å¨è¿ä¸ªé©å­ä¸­å¯ä»¥æ´æ¹ç¶æèä¸åçéç»ã\n\n\n# updatedï¼æ´æ°åï¼\n\nå¨ç±äºæ°æ®æ´æ¹å¯¼è´å°èæDOMéæ°æ¸²æåæè¡¥ä¸åªä¼è°ç¨ï¼è°ç¨æ¶ï¼ç»ä»¶DOMå·²ç»æ´æ°ï¼æä»¥å¯ä»¥æ§è¡ä¾èµäºDOMçæä½ï¼ç¶åå¨å¤§å¤æ¯æåµä¸ï¼åºè¯¥é¿åå¨æ­¤æé´æ´æ¹ç¶æï¼å ä¸ºè¿å¯è½ä¼å¯¼è´æ´æ°æ éå¾ªç¯ï¼è¯¥é©å­å¨æå¡å¨ç«¯æ¸²ææé´ä¸è¢«è°ç¨\n\n\n# beforeDestroyï¼éæ¯åï¼\n\nå¨å®ä¾éæ¯åè°ç¨ï¼ä½å®ä¾è¿å¯ä»¥ç¨ã\n\nè¿éè¿å¯ä»¥ä½¿ç¨thisï¼ä¸è¬ç¨æ¥åéç½®æä½ï¼æ¯å¦æ¸é¤å®æ¶å¨åDOMçå¬äºä»¶ã\n\n\n# destroyedï¼éæ¯åï¼\n\nå¨å®ä¾éæ¯ä¹åè°ç¨ï¼è°ç¨åï¼æä»¥çäºä»¶çå¬å¨ä¼è¢«ç§»åºï¼ææçå­å®ä¾ä¹ä¼è¢«éæ¯ï¼è¯¥é©å­å¨æå¡å¨ç«¯æ¸²ææé´ä¸è¢«è°ç¨\n\n\n# 16è¿å¶é¢è²è½¬æ¢ä¸ºrgb\n\nfunction hex2rgb(hex) {\n\tconst str = hex.slice(1),\n\t\tres = []\n\tif (str.length === 3) {\n\t\tfor (const w of str) {\n\t\t\tres.push(parseInt(w + w, 16))\n\t\t}\n\t} else {\n\t\tfor (let i = 0; i < 6; i += 2) {\n\t\t\tres.push(parseInt(str[i] + str[i + 1], 16))\n\t\t}\n\t}\n\treturn res\n}\n\n\n\n# keep-aliveäºè§£å\n\n> keep-aliveæ¯ä¸ä¸ªæ½è±¡ç»ä»¶ï¼å®èªèº«ä¸ä¼æ¸²æä¸ä¸ª DOM åç´ ï¼ä¹ä¸ä¼åºç°å¨ç¶ç»ä»¶é¾ä¸­ï¼ä½¿ç¨keep-aliveåè£¹å¨æç»ä»¶æ¶ï¼ä¼ç¼å­ä¸æ´»å¨çç»ä»¶å®ä¾ï¼èä¸æ¯éæ¯å®ä»¬ã\n\n\n# ä¸ä¸ªåºæ¯\n\nç¨æ·å¨æä¸ªåè¡¨é¡µé¢éæ©ç­éæ¡ä»¶è¿æ»¤åºä¸ä»½æ°æ®åè¡¨ï¼ç±åè¡¨é¡µé¢è¿å¥æ°æ®è¯¦æé¡µé¢ï¼åè¿åè¯¥åè¡¨é¡µé¢ï¼æä»¬å¸æï¼åè¡¨é¡µé¢å¯ä»¥ä¿çç¨æ·çç­éï¼æéä¸­ï¼ç¶æãkeep-aliveå°±æ¯ç¨æ¥è§£å³è¿ç§åºæ¯ãå½ç¶keep-aliveä¸ä»ä»æ¯è½å¤ä¿å­é¡µé¢/ç»ä»¶çç¶æè¿ä¹ç®åï¼å®è¿å¯ä»¥é¿åç»ä»¶åå¤åå»ºåæ¸²æï¼æææåç³»ç»æ§è½ã æ»çæ¥è¯´ï¼keep-aliveç¨äºä¿å­ç»ä»¶çæ¸²æç¶æ\n\n> keep-aliveå¯ä»¥å®ç°ç»ä»¶ç¼å­ï¼å½ç»ä»¶åæ¢æ¶ä¸ä¼å¯¹å½åç»ä»¶è¿è¡å¸è½½ã\n> \n> å¸¸ç¨çä¸¤ä¸ªå±æ§include/excludeï¼åè®¸ç»ä»¶ææ¡ä»¶çè¿è¡ç¼å­ã\n> \n> ä¸¤ä¸ªçå½å¨æactivated/deactivatedï¼ç¨æ¥å¾ç¥å½åç»ä»¶æ¯å¦å¤äºæ´»è·ç¶æã\n> \n> keep-aliveçä¸­è¿è¿ç¨äºLRU(Least Recently Used)ç®æ³ã\n> \n> ä½¿ç¨ vue-des-tools å¯ä»¥æ¥çå½åç»ä»¶æ¯å¦ç¼å­\n\n<keep-alive> æ¯ä¸ä¸ªæ½è±¡ç»ä»¶ï¼\n\n * é¦æ¬¡æ¸²æçæ¶åè®¾ç½®ç¼å­\n * ç¼å­æ¸²æçæ¶åä¸ä¼æ§è¡ç»ä»¶ç createdãmounted ç­é©å­å½æ°, èæ¯å¯¹ç¼å­çç»ä»¶æ§è¡patch è¿ç¨ï¼æåç´æ¥æ´æ°å°ç®æ åç´ ã\n\nä½¿ç¨ LRU ç¼å­ç­ç¥å¯¹ç»ä»¶è¿è¡ç¼å­\n\n * å½ä¸­ç¼å­ï¼åç´æ¥è¿åç¼å­ï¼åæ¶æ´æ°ç¼å­keyçä½ç½®\n * ä¸å½ä¸­ç¼å­åè®¾ç½®è¿ç¼å­ï¼åæ¶æ£æ¥ç¼å­çå®ä¾æ°éæ¯å¦è¶è¿ max\n\n * Vue keep-aliveæ·±å¥çè§£åå®è·µæ»ç»\n * keep-aliveçå®ç°åçåLRUç¼å­ç­ç¥\n * vueå¤çº§èå(è·¯ç±)å¯¼è´ç¼å­(keep-alive)å¤±æ\n\n\n# èèLRUç®æ³\n\n> æä½ç³»ç»åå­ç®¡çï¼åé¡µï¼åæ®µï¼æ®µé¡µç»å\n> \n> LRUï¼æè¿æä¹æªä½¿ç¨ï¼å±äºé¡µé¢ç½®æ¢ç®æ³ä¸­çä¸ç§ï¼å¶ä»è¿æ FIFOï¼åè¿ååºç®æ³ï¼ï¼OPTï¼æä½³ç½®æ¢ç®æ³ï¼ç­ç­\n\næä½ç³»ç»é¡µé¢ç½®æ¢ç®æ³\n\nleetcode146ï¼LRUç¼å­æºå¶\n\né¢è§£\n\n\n# Vueä¸­ç»ä»¶çå½å¨æè°ç¨é¡ºåº\n\nç»ä»¶çè°ç¨é¡ºåºé½æ¯åç¶åå­,æ¸²æå®æçé¡ºåºæ¯åå­åç¶ã\n\nç»ä»¶çéæ¯æä½æ¯åç¶åå­ï¼éæ¯å®æçé¡ºåºæ¯åå­åç¶ã\n\n\n# å è½½æ¸²æè¿ç¨\n\nç¶beforeCreate->ç¶created->ç¶beforeMount->å­beforeCreate->å­created->å­beforeMount- >å­mounted->ç¶mounted\n\n\n\n# å­ç»ä»¶æ´æ°è¿ç¨\n\nç¶beforeUpdate->å­beforeUpdate->å­updated->ç¶updated\n\n\n\n# ç¶ç»ä»¶æ´æ°è¿ç¨\n\nç¶ beforeUpdate -> ç¶ updated\n\n\n\n# éæ¯è¿ç¨\n\nç¶beforeDestroy->å­beforeDestroy->å­destroyed->ç¶destroyed\n\n\n\n# ä½ é½åè¿åªäºVueçæ§è½ä¼å\n\n * v-ifä¸v-show\n * ä½¿ç¨è®¡ç®å±æ§çç¼å­æ§\n * v-ifä¸v-forè¿ç¨çé®é¢\n * V-forå¿é¡»ä¸ºitemæ·»å keyï¼ä¸é¿åä½¿ç¨ index ä½ä¸ºæ è¯\n * é¿åè¡¨ä¼å\n   * åªéè¦éæå±ç¤ºä¸éè¦ååºå¼çæ°æ®ï¼ä½¿ç¨Object.freezeå»ç»\n   * èæåè¡¨ï¼vue-infinite-scroll\n * éæ¾ç»ä»¶èµæºï¼çå¬äºä»¶ï¼å®æ¶å¨éæ¯\n * å¾çèµæºä¼å\n   * å¤§å¾ cdn å é\n   * å¾çæå è½½\n   * åç¼©å¾çå¤§å°ï¼å¤§å¤ä½¿ç¨ä»è´¹äºæå¡\n * SPA é¡µé¢éç¨keep-aliveç¼å­ç»ä»¶\n * ä½¿ç¨è·¯ç±æå è½½ãå¼æ­¥ç»ä»¶ï¼ä¹ä¸å®å¤ªå¤\n * é²æãèæµ\n * ç¬¬ä¸æ¹æ¨¡åæéå¯¼å¥ï¼ä¾å¦Element ui\n * sourcemap\n * é¦å±æ¸²æä¼å\n   * æå¡ç«¯æ¸²æ\n   * é¢æ¸²æ\n   * è·¯ç±æå è½½\n   * loadingå¨ç»\n\n\n# npm install åç\n\nnpm install åçåæ\n\n\n# Map,weakMap,Set,weakSet\n\nJavaScriptä¸­çMapãWeakMapãSetåWeakSetä»ç»\n\n\n# ä»ä¹æ¯å°¾éå½åå°¾è°ç¨\n\né¶ä¹å½æ°\n\nint fact(int n) {\n    if (n < 0)\n        return 0;\n    else if(n == 0 || n == 1)\n        return 1;\n    else\n        return n * fact(n - 1);\n}\n\n\nå°¾éå½å®ç°\n\nint facttail(int n, int res)\n{\n    if (n < 0)\n        return 0;\n    else if(n == 0)\n        return 1;\n    else if(n == 1)\n        return res;\n    else\n        return facttail(n - 1, n * res);\n}\n\n\nåä¸¾ä¸ä¸ªä¾å­ï¼è®¡ç® 1 å° n çæ´æ°çå\n\nconst sum = (n) => {\n  if (n <= 1) return n;\n  return n + sum(n-1) // å½åè°ç¨æ ä¿çï¼è¿éè®¡ç® n + ...\n}\n\nconst sum = (n, prevSum = 0) => {\n  if (n <= 1) return n + prevSum;\n  return sum(n-1, n + prevSum)\n}\n\n\næ ¹æ¬ææ³ï¼é¿åäºå¥æ åºæ é æçæ¶é´ç©ºé´æè\n\n// å°¾è°ç¨\nfunction f() {\n  let m = 1;\n  let n = 2;\n  return g(m + n);\n}\nf();\n\n// ç­åäº\nfunction f() {\n  return g(3);\n}\nf();\n\n// ç­åäº\ng(3);\n\n\n> ä¸é¢ä»£ç ä¸­ï¼å¦æå½æ°gä¸æ¯å°¾è°ç¨ï¼å½æ°få°±éè¦ä¿å­åé¨åémånçå¼ãgçè°ç¨ä½ç½®ç­ä¿¡æ¯ãä½ç±äºè°ç¨gä¹åï¼å½æ°få°±ç»æäºï¼æä»¥æ§è¡å°æåä¸æ­¥ï¼å®å¨å¯ä»¥å é¤ f() çè°ç¨è®°å½ï¼åªä¿ç g(3) çè°ç¨è®°å½ã\n> \n> è¿å°±å«å"å°¾è°ç¨ä¼å"ï¼Tail call optimizationï¼ï¼å³åªä¿çåå±å½æ°çè°ç¨è®°å½ãå¦æææå½æ°é½æ¯å°¾è°ç¨ï¼é£ä¹å®å¨å¯ä»¥åå°æ¯æ¬¡æ§è¡æ¶ï¼è°ç¨è®°å½åªæä¸é¡¹ï¼è¿å°å¤§å¤§èçåå­ãè¿å°±æ¯"å°¾è°ç¨ä¼å"çæä¹ã\n\nå°¾è°ç¨ä¼å\n\n\n# link ä¸ @import çåºå«\n\n * linkæ¯HTMLæä¾çæ ç­¾ï¼ä¸ä»å¯ä»¥å è½½CSS æä»¶ï¼è¿å¯ä»¥å®ä¹RSSãrel è¿æ¥å±æ§ç­ã @importæ¯CSS æä¾çè¯­æ³è§åï¼åªæå¯¼å¥CSSçä½ç¨ã\n * å è½½é¡µé¢æ¶ï¼link æ ç­¾å¼å¥ç CSS è¢«åæ¶å è½½ã @import å¼å¥ç CSS å°å¨é¡µé¢å è½½å®æ¯åè¢«å è½½ã\n\n\n# æ°ç» map() å forEach() æ¹æ³çåºå«ï¼\n\nè¿ä¸¤ä¸ªæ¹æ³é½æ¯è¿è¡éåæ°ç»çæ¹æ³ãmap() æ¹æ³éè¿è°ååè°å½æ°æ å°æ¯ä¸ä¸ªåç´ å°æ°åç´ ä¸ï¼å¹¶ä¸è¿åçæ¯ä¸ä¸ªæ°æ°ç»ãå¦ä¸æ¹é¢ï¼forEach() ä¸ºæ¯ä¸ªåç´ è°ç¨åè°å½æ°ï¼ä½æ¯å®ä¸è¿åæ°æ°ç»ãforEach() å½æ°éå¸¸ç¨äºå¨è¿­ä»£ä¸­äº§çå¯ä½ç¨ï¼è map() å½æ°æ¯ä¸ç§å¸¸è§çå½æ°å¼ç¼ç¨ææ¯\n\n * å¦æä½ éè¦éåæ°ç»ï¼ä¼é æåç´ ååï¼èä¸ä¸éè¦è¿åå¼æ¥çæä¸ä¸ªæ°æ°ç»ï¼ä½ å¯ä»¥ä½¿ç¨ forEach()\n * å¯¹äºä¿ææ°æ®çä¸åï¼map() æ¯æ­£ç¡®çéæ©ï¼åå§æ°ç»çæ¯ä¸ä¸ªå¼é½ä¼æ å°å°ä¸ä¸ªæ°æ°ç»ä¸­\n\n\n# éæç½ç«\n\n\n# ä»ä¹æ¯éæç½ç«çæå¨\n\n * éæç½ç«çæå¨æ¯ä½¿ç¨ä¸ç³»åéç½®ï¼æ¨¡æ¿ä»¥åæ°æ®ï¼çæéæHTMLæä»¶åç¸å³èµæºçå·¥å·\n * è¿ä¸ªåè½ä¹å«é¢æ¸²æ\n * çæçç½ç«ä¸éè¦æå¡å¨ï¼åªéè¦æ¾å°æ¯æéæèµæºç Web Server æ CDN ä¸å³å¯è¿è¡\n\n\n# å¸¸è§çéæç½ç«çæå¨\n\n * Jekyllï¼Rubyï¼\n * Hexoï¼Nodeï¼\n * Hugoï¼Golangï¼\n * Gatsbyï¼Node/Reactï¼\n * Gridsomeï¼Node/Vueï¼\n * å¦å¤ï¼Next.jsï¼Nuxt.js ä¹è½çæéæç½ç«ï¼ä½æ¯å®ä»¬æ´å¤è¢«è®¤ä¸ºæ¯æå¡ç«¯æ¸²ææ¡æ¶\n\n\n# åºç¨åºæ¯\n\n * ä¸éåæå¤§éè·¯ç±é¡µé¢çåºç¨\n * ä¸éåæå¤§éå¨æåå®¹çåºç¨\n * éç¨äºçº¯åå®¹å±ç¤ºç½ç«ï¼åå®¢ï¼ææ¡£ï¼å®£ä¼ ç«ç­',normalizedContent:'# é¢è¯é¢ï¼åï¼\n\n * call, apply, bind çåºå«ï¼æä¹å®ç°\n * ä»ç»ä¸ä¸vueççå½å¨æ\n * 16è¿å¶é¢è²è½¬æ¢ä¸ºrgb\n * keep-aliveäºè§£å\n * èèlruç®æ³\n * vueä¸­ç»ä»¶çå½å¨æè°ç¨é¡ºåº\n * ä½ é½åè¿åªäºvueçæ§è½ä¼å\n * npm install åç\n * map,weakmap,set,weakset\n * ä»ä¹æ¯å°¾éå½åå°¾è°ç¨\n * link ä¸ @import çåºå«\n * æ°ç» map() å foreach() æ¹æ³çåºå«ï¼\n * ä»ä¹æ¯éæç½ç«\n\n\n# call, apply, bind çåºå«ï¼æä¹å®ç°\n\n> é½æ¯ç¨æ¥æ¹åå½æ°ç this å¯¹è±¡çæåçã\n> \n> ç¬¬ä¸ä¸ªåæ°é½æ¯ this è¦æåçå¯¹è±¡ã\n> \n> é½å¯ä»¥å©ç¨åç»­åæ°ä¼ åã åºå«ï¼\n> \n> call æ¥åå½æ°ä¼ åæ¹å¼ä¸ºï¼fn.call(this, 1, 2, 3)\n> \n> apply æ¥åå½æ°ä¼ åæ¹å¼ä¸ºï¼fn.apply(this,[1, 2, 3])\n> \n> bind çè¿åå¼ä¸ºä¸ä¸ªæ°çå½æ°ï¼éè¦åæ¬¡è°ç¨ï¼ fn.bind(this)(1, 2, 3)\n\n * æåä»£ç æ´ç\n\n\n# vueççå½å¨æ\n\n\n# beforecreate( åå»ºå )\n\nä½¿ç¨è¿ä¸ªé©å­ï¼ç»ä»¶çéé¡¹å¯¹è±¡å¹¶æ²¡æåå»ºï¼elådataé½è¿æ²¡åå§åï¼æä»¥dataãmethodsåcomputedç­é½ç¨ä¸äºãä¸è¬ç¨æ¥å¨ç»ä»¶æå¨ä¹åæ¸²æä¸äºä¸è¥¿ã\n\n\n# created ( åå»ºå ï¼\n\nè¿æ¶åä¸é¢çdataãmethodsãcomputedé½å·²ç»åå»ºå®æäºï¼æ°æ®è§æµï¼å±æ§åæ¹æ³çè¿ç®ï¼watch/eventäºä»¶åè°é½å®æäºï¼ä½è¿æ¶åæè½½é¶æ®µmountè¿æ²¡å¼å§ï¼æ¯elå¹¶æ²¡æå®æãè¿æ¯æå¸¸ç¨ççå½å¨æé©å­ï¼å¯ä»¥è°ç¨methodsä¸­çæ¹æ³ï¼æ¹ådataä¸­çæ°æ®ï¼å¹¶ä¸ä¿®æ¹å¯ä»¥éè¿vueçååºå¼ç»å®ä½ç°å¨é¡µé¢ä¸ï¼ï¼è·åcomputedä¸­çè®¡ç®å±æ§ç­ç­ï¼éå¸¸æä»¬å¯ä»¥å¨è¿éå¯¹å®ä¾è¿è¡é¢å¤çï¼ä¹å¨è¿éåajaxè¯·æ±ï¼è¿ä¸ªå¨æä¸­æ¯æ²¡æä»ä¹æ¹æ³æ¥å¯¹å®ä¾åè¿ç¨è¿è¡æ¦æªçï¼å æ­¤åå¦ææäºæ°æ®å¿é¡»è·åæåè®¸è¿å¥é¡µé¢çè¯ï¼å¹¶ä¸éåå¨è¿ä¸ªæ¹æ³åè¯·æ±ï¼å»ºè®®å¨ç»ä»¶è·¯ç±é©å­beforerouteenterï¼è·¯ç±å®å«ï¼ä¸­å®æ\n\n\n# beforemountï¼æè½½ä¹åï¼\n\næè½½ä¹åè¢«è°ç¨ï¼renderï¼æ¸²æï¼å½æ°é¦æ¬¡è¢«è°ç¨ï¼èædomï¼ï¼è¿éå·²ç»å®æäºæ¨¡æ¿ç¼è¯ï¼dataéé¢çæ°æ®åæ¨¡æ¿ä¼çäº§htmlï¼è¿éelä¹å®æäºï¼ä½å¹¶æ²¡ææè½½å°htmlé¡µé¢ä¸ã\n\n\n# mountedï¼æè½½ï¼\n\næè½½å®æäºï¼è¿æ¶åhtmlæ¨¡æ¿ä¼è¢«æ¸²æå°htmlä¸­ï¼è¿å¯ä»¥åä¸äºajaxæä½ãä½mountedåªè½æ§è¡ä¸æ¬¡ã\n\n\n# beforeupdateï¼æ´æ°ä¹åï¼\n\næ´æ°ææ°æ®æ´æ°ï¼åçå¨èædoméæ°æ¸²æåè¡¥ä¸ä¹åï¼å¨è¿ä¸ªé©å­ä¸­å¯ä»¥æ´æ¹ç¶æèä¸åçéç»ã\n\n\n# updatedï¼æ´æ°åï¼\n\nå¨ç±äºæ°æ®æ´æ¹å¯¼è´å°èædoméæ°æ¸²æåæè¡¥ä¸åªä¼è°ç¨ï¼è°ç¨æ¶ï¼ç»ä»¶domå·²ç»æ´æ°ï¼æä»¥å¯ä»¥æ§è¡ä¾èµäºdomçæä½ï¼ç¶åå¨å¤§å¤æ¯æåµä¸ï¼åºè¯¥é¿åå¨æ­¤æé´æ´æ¹ç¶æï¼å ä¸ºè¿å¯è½ä¼å¯¼è´æ´æ°æ éå¾ªç¯ï¼è¯¥é©å­å¨æå¡å¨ç«¯æ¸²ææé´ä¸è¢«è°ç¨\n\n\n# beforedestroyï¼éæ¯åï¼\n\nå¨å®ä¾éæ¯åè°ç¨ï¼ä½å®ä¾è¿å¯ä»¥ç¨ã\n\nè¿éè¿å¯ä»¥ä½¿ç¨thisï¼ä¸è¬ç¨æ¥åéç½®æä½ï¼æ¯å¦æ¸é¤å®æ¶å¨ådomçå¬äºä»¶ã\n\n\n# destroyedï¼éæ¯åï¼\n\nå¨å®ä¾éæ¯ä¹åè°ç¨ï¼è°ç¨åï¼æä»¥çäºä»¶çå¬å¨ä¼è¢«ç§»åºï¼ææçå­å®ä¾ä¹ä¼è¢«éæ¯ï¼è¯¥é©å­å¨æå¡å¨ç«¯æ¸²ææé´ä¸è¢«è°ç¨\n\n\n# 16è¿å¶é¢è²è½¬æ¢ä¸ºrgb\n\nfunction hex2rgb(hex) {\n\tconst str = hex.slice(1),\n\t\tres = []\n\tif (str.length === 3) {\n\t\tfor (const w of str) {\n\t\t\tres.push(parseint(w + w, 16))\n\t\t}\n\t} else {\n\t\tfor (let i = 0; i < 6; i += 2) {\n\t\t\tres.push(parseint(str[i] + str[i + 1], 16))\n\t\t}\n\t}\n\treturn res\n}\n\n\n\n# keep-aliveäºè§£å\n\n> keep-aliveæ¯ä¸ä¸ªæ½è±¡ç»ä»¶ï¼å®èªèº«ä¸ä¼æ¸²æä¸ä¸ª dom åç´ ï¼ä¹ä¸ä¼åºç°å¨ç¶ç»ä»¶é¾ä¸­ï¼ä½¿ç¨keep-aliveåè£¹å¨æç»ä»¶æ¶ï¼ä¼ç¼å­ä¸æ´»å¨çç»ä»¶å®ä¾ï¼èä¸æ¯éæ¯å®ä»¬ã\n\n\n# ä¸ä¸ªåºæ¯\n\nç¨æ·å¨æä¸ªåè¡¨é¡µé¢éæ©ç­éæ¡ä»¶è¿æ»¤åºä¸ä»½æ°æ®åè¡¨ï¼ç±åè¡¨é¡µé¢è¿å¥æ°æ®è¯¦æé¡µé¢ï¼åè¿åè¯¥åè¡¨é¡µé¢ï¼æä»¬å¸æï¼åè¡¨é¡µé¢å¯ä»¥ä¿çç¨æ·çç­éï¼æéä¸­ï¼ç¶æãkeep-aliveå°±æ¯ç¨æ¥è§£å³è¿ç§åºæ¯ãå½ç¶keep-aliveä¸ä»ä»æ¯è½å¤ä¿å­é¡µé¢/ç»ä»¶çç¶æè¿ä¹ç®åï¼å®è¿å¯ä»¥é¿åç»ä»¶åå¤åå»ºåæ¸²æï¼æææåç³»ç»æ§è½ã æ»çæ¥è¯´ï¼keep-aliveç¨äºä¿å­ç»ä»¶çæ¸²æç¶æ\n\n> keep-aliveå¯ä»¥å®ç°ç»ä»¶ç¼å­ï¼å½ç»ä»¶åæ¢æ¶ä¸ä¼å¯¹å½åç»ä»¶è¿è¡å¸è½½ã\n> \n> å¸¸ç¨çä¸¤ä¸ªå±æ§include/excludeï¼åè®¸ç»ä»¶ææ¡ä»¶çè¿è¡ç¼å­ã\n> \n> ä¸¤ä¸ªçå½å¨æactivated/deactivatedï¼ç¨æ¥å¾ç¥å½åç»ä»¶æ¯å¦å¤äºæ´»è·ç¶æã\n> \n> keep-aliveçä¸­è¿è¿ç¨äºlru(least recently used)ç®æ³ã\n> \n> ä½¿ç¨ vue-des-tools å¯ä»¥æ¥çå½åç»ä»¶æ¯å¦ç¼å­\n\n<keep-alive> æ¯ä¸ä¸ªæ½è±¡ç»ä»¶ï¼\n\n * é¦æ¬¡æ¸²æçæ¶åè®¾ç½®ç¼å­\n * ç¼å­æ¸²æçæ¶åä¸ä¼æ§è¡ç»ä»¶ç createdãmounted ç­é©å­å½æ°, èæ¯å¯¹ç¼å­çç»ä»¶æ§è¡patch è¿ç¨ï¼æåç´æ¥æ´æ°å°ç®æ åç´ ã\n\nä½¿ç¨ lru ç¼å­ç­ç¥å¯¹ç»ä»¶è¿è¡ç¼å­\n\n * å½ä¸­ç¼å­ï¼åç´æ¥è¿åç¼å­ï¼åæ¶æ´æ°ç¼å­keyçä½ç½®\n * ä¸å½ä¸­ç¼å­åè®¾ç½®è¿ç¼å­ï¼åæ¶æ£æ¥ç¼å­çå®ä¾æ°éæ¯å¦è¶è¿ max\n\n * vue keep-aliveæ·±å¥çè§£åå®è·µæ»ç»\n * keep-aliveçå®ç°åçålruç¼å­ç­ç¥\n * vueå¤çº§èå(è·¯ç±)å¯¼è´ç¼å­(keep-alive)å¤±æ\n\n\n# èèlruç®æ³\n\n> æä½ç³»ç»åå­ç®¡çï¼åé¡µï¼åæ®µï¼æ®µé¡µç»å\n> \n> lruï¼æè¿æä¹æªä½¿ç¨ï¼å±äºé¡µé¢ç½®æ¢ç®æ³ä¸­çä¸ç§ï¼å¶ä»è¿æ fifoï¼åè¿ååºç®æ³ï¼ï¼optï¼æä½³ç½®æ¢ç®æ³ï¼ç­ç­\n\næä½ç³»ç»é¡µé¢ç½®æ¢ç®æ³\n\nleetcode146ï¼lruç¼å­æºå¶\n\né¢è§£\n\n\n# vueä¸­ç»ä»¶çå½å¨æè°ç¨é¡ºåº\n\nç»ä»¶çè°ç¨é¡ºåºé½æ¯åç¶åå­,æ¸²æå®æçé¡ºåºæ¯åå­åç¶ã\n\nç»ä»¶çéæ¯æä½æ¯åç¶åå­ï¼éæ¯å®æçé¡ºåºæ¯åå­åç¶ã\n\n\n# å è½½æ¸²æè¿ç¨\n\nç¶beforecreate->ç¶created->ç¶beforemount->å­beforecreate->å­created->å­beforemount- >å­mounted->ç¶mounted\n\n\n\n# å­ç»ä»¶æ´æ°è¿ç¨\n\nç¶beforeupdate->å­beforeupdate->å­updated->ç¶updated\n\n\n\n# ç¶ç»ä»¶æ´æ°è¿ç¨\n\nç¶ beforeupdate -> ç¶ updated\n\n\n\n# éæ¯è¿ç¨\n\nç¶beforedestroy->å­beforedestroy->å­destroyed->ç¶destroyed\n\n\n\n# ä½ é½åè¿åªäºvueçæ§è½ä¼å\n\n * v-ifä¸v-show\n * ä½¿ç¨è®¡ç®å±æ§çç¼å­æ§\n * v-ifä¸v-forè¿ç¨çé®é¢\n * v-forå¿é¡»ä¸ºitemæ·»å keyï¼ä¸é¿åä½¿ç¨ index ä½ä¸ºæ è¯\n * é¿åè¡¨ä¼å\n   * åªéè¦éæå±ç¤ºä¸éè¦ååºå¼çæ°æ®ï¼ä½¿ç¨object.freezeå»ç»\n   * èæåè¡¨ï¼vue-infinite-scroll\n * éæ¾ç»ä»¶èµæºï¼çå¬äºä»¶ï¼å®æ¶å¨éæ¯\n * å¾çèµæºä¼å\n   * å¤§å¾ cdn å é\n   * å¾çæå è½½\n   * åç¼©å¾çå¤§å°ï¼å¤§å¤ä½¿ç¨ä»è´¹äºæå¡\n * spa é¡µé¢éç¨keep-aliveç¼å­ç»ä»¶\n * ä½¿ç¨è·¯ç±æå è½½ãå¼æ­¥ç»ä»¶ï¼ä¹ä¸å®å¤ªå¤\n * é²æãèæµ\n * ç¬¬ä¸æ¹æ¨¡åæéå¯¼å¥ï¼ä¾å¦element ui\n * sourcemap\n * é¦å±æ¸²æä¼å\n   * æå¡ç«¯æ¸²æ\n   * é¢æ¸²æ\n   * è·¯ç±æå è½½\n   * loadingå¨ç»\n\n\n# npm install åç\n\nnpm install åçåæ\n\n\n# map,weakmap,set,weakset\n\njavascriptä¸­çmapãweakmapãsetåweaksetä»ç»\n\n\n# ä»ä¹æ¯å°¾éå½åå°¾è°ç¨\n\né¶ä¹å½æ°\n\nint fact(int n) {\n    if (n < 0)\n        return 0;\n    else if(n == 0 || n == 1)\n        return 1;\n    else\n        return n * fact(n - 1);\n}\n\n\nå°¾éå½å®ç°\n\nint facttail(int n, int res)\n{\n    if (n < 0)\n        return 0;\n    else if(n == 0)\n        return 1;\n    else if(n == 1)\n        return res;\n    else\n        return facttail(n - 1, n * res);\n}\n\n\nåä¸¾ä¸ä¸ªä¾å­ï¼è®¡ç® 1 å° n çæ´æ°çå\n\nconst sum = (n) => {\n  if (n <= 1) return n;\n  return n + sum(n-1) // å½åè°ç¨æ ä¿çï¼è¿éè®¡ç® n + ...\n}\n\nconst sum = (n, prevsum = 0) => {\n  if (n <= 1) return n + prevsum;\n  return sum(n-1, n + prevsum)\n}\n\n\næ ¹æ¬ææ³ï¼é¿åäºå¥æ åºæ é æçæ¶é´ç©ºé´æè\n\n// å°¾è°ç¨\nfunction f() {\n  let m = 1;\n  let n = 2;\n  return g(m + n);\n}\nf();\n\n// ç­åäº\nfunction f() {\n  return g(3);\n}\nf();\n\n// ç­åäº\ng(3);\n\n\n> ä¸é¢ä»£ç ä¸­ï¼å¦æå½æ°gä¸æ¯å°¾è°ç¨ï¼å½æ°få°±éè¦ä¿å­åé¨åémånçå¼ãgçè°ç¨ä½ç½®ç­ä¿¡æ¯ãä½ç±äºè°ç¨gä¹åï¼å½æ°få°±ç»æäºï¼æä»¥æ§è¡å°æåä¸æ­¥ï¼å®å¨å¯ä»¥å é¤ f() çè°ç¨è®°å½ï¼åªä¿ç g(3) çè°ç¨è®°å½ã\n> \n> è¿å°±å«å"å°¾è°ç¨ä¼å"ï¼tail call optimizationï¼ï¼å³åªä¿çåå±å½æ°çè°ç¨è®°å½ãå¦æææå½æ°é½æ¯å°¾è°ç¨ï¼é£ä¹å®å¨å¯ä»¥åå°æ¯æ¬¡æ§è¡æ¶ï¼è°ç¨è®°å½åªæä¸é¡¹ï¼è¿å°å¤§å¤§èçåå­ãè¿å°±æ¯"å°¾è°ç¨ä¼å"çæä¹ã\n\nå°¾è°ç¨ä¼å\n\n\n# link ä¸ @import çåºå«\n\n * linkæ¯htmlæä¾çæ ç­¾ï¼ä¸ä»å¯ä»¥å è½½css æä»¶ï¼è¿å¯ä»¥å®ä¹rssãrel è¿æ¥å±æ§ç­ã @importæ¯css æä¾çè¯­æ³è§åï¼åªæå¯¼å¥cssçä½ç¨ã\n * å è½½é¡µé¢æ¶ï¼link æ ç­¾å¼å¥ç css è¢«åæ¶å è½½ã @import å¼å¥ç css å°å¨é¡µé¢å è½½å®æ¯åè¢«å è½½ã\n\n\n# æ°ç» map() å foreach() æ¹æ³çåºå«ï¼\n\nè¿ä¸¤ä¸ªæ¹æ³é½æ¯è¿è¡éåæ°ç»çæ¹æ³ãmap() æ¹æ³éè¿è°ååè°å½æ°æ å°æ¯ä¸ä¸ªåç´ å°æ°åç´ ä¸ï¼å¹¶ä¸è¿åçæ¯ä¸ä¸ªæ°æ°ç»ãå¦ä¸æ¹é¢ï¼foreach() ä¸ºæ¯ä¸ªåç´ è°ç¨åè°å½æ°ï¼ä½æ¯å®ä¸è¿åæ°æ°ç»ãforeach() å½æ°éå¸¸ç¨äºå¨è¿­ä»£ä¸­äº§çå¯ä½ç¨ï¼è map() å½æ°æ¯ä¸ç§å¸¸è§çå½æ°å¼ç¼ç¨ææ¯\n\n * å¦æä½ éè¦éåæ°ç»ï¼ä¼é æåç´ ååï¼èä¸ä¸éè¦è¿åå¼æ¥çæä¸ä¸ªæ°æ°ç»ï¼ä½ å¯ä»¥ä½¿ç¨ foreach()\n * å¯¹äºä¿ææ°æ®çä¸åï¼map() æ¯æ­£ç¡®çéæ©ï¼åå§æ°ç»çæ¯ä¸ä¸ªå¼é½ä¼æ å°å°ä¸ä¸ªæ°æ°ç»ä¸­\n\n\n# éæç½ç«\n\n\n# ä»ä¹æ¯éæç½ç«çæå¨\n\n * éæç½ç«çæå¨æ¯ä½¿ç¨ä¸ç³»åéç½®ï¼æ¨¡æ¿ä»¥åæ°æ®ï¼çæéæhtmlæä»¶åç¸å³èµæºçå·¥å·\n * è¿ä¸ªåè½ä¹å«é¢æ¸²æ\n * çæçç½ç«ä¸éè¦æå¡å¨ï¼åªéè¦æ¾å°æ¯æéæèµæºç web server æ cdn ä¸å³å¯è¿è¡\n\n\n# å¸¸è§çéæç½ç«çæå¨\n\n * jekyllï¼rubyï¼\n * hexoï¼nodeï¼\n * hugoï¼golangï¼\n * gatsbyï¼node/reactï¼\n * gridsomeï¼node/vueï¼\n * å¦å¤ï¼next.jsï¼nuxt.js ä¹è½çæéæç½ç«ï¼ä½æ¯å®ä»¬æ´å¤è¢«è®¤ä¸ºæ¯æå¡ç«¯æ¸²ææ¡æ¶\n\n\n# åºç¨åºæ¯\n\n * ä¸éåæå¤§éè·¯ç±é¡µé¢çåºç¨\n * ä¸éåæå¤§éå¨æåå®¹çåºç¨\n * éç¨äºçº¯åå®¹å±ç¤ºç½ç«ï¼åå®¢ï¼ææ¡£ï¼å®£ä¼ ç«ç­',charsets:{cjk:!0}},{title:"æåä»£ç ï¼ä¸ï¼",frontmatter:{title:"æåä»£ç ï¼ä¸ï¼",date:"2020-03-20T09:52:01.000Z",categories:"é¢è¯"},regularPath:"/interview/code-1.html",relativePath:"interview/code-1.md",key:"v-2e1355ed",path:"/interview/code-1.html",headers:[{level:2,title:"é²æ",slug:"é²æ",normalizedTitle:"é²æ",charIndex:14},{level:2,title:"èæµ",slug:"èæµ",normalizedTitle:"èæµ",charIndex:20},{level:2,title:"æ·±æ·è´",slug:"æ·±æ·è´",normalizedTitle:"æ·±æ·è´",charIndex:26},{level:2,title:"æ¯éå",slug:"æ¯éå",normalizedTitle:"æ¯éå",charIndex:33},{level:2,title:"å½æ°ç»å",slug:"å½æ°ç»å",normalizedTitle:"å½æ°ç»å",charIndex:40},{level:2,title:"new",slug:"new",normalizedTitle:"new",charIndex:48},{level:2,title:"instanceof",slug:"instanceof",normalizedTitle:"instanceof",charIndex:55},{level:2,title:"applyï¼callï¼bind",slug:"apply-call-bind",normalizedTitle:"applyï¼callï¼bind",charIndex:3394},{level:2,title:"promise.all",slug:"promise-all",normalizedTitle:"promise.all",charIndex:88},{level:2,title:"promise.race",slug:"promise-race",normalizedTitle:"promise.race",charIndex:103},{level:2,title:"promise.resolve",slug:"promise-resolve",normalizedTitle:"promise.resolve",charIndex:5451},{level:2,title:"Promise",slug:"promise",normalizedTitle:"promise",charIndex:4297},{level:2,title:"promiseå°è£ajax",slug:"promiseå°è£ajax",normalizedTitle:"promiseå°è£ajax",charIndex:130},{level:2,title:"åå¸è®¢éæ¨¡å¼",slug:"åå¸è®¢éæ¨¡å¼",normalizedTitle:"åå¸è®¢éæ¨¡å¼",charIndex:147},{level:2,title:"Symbol.iterator",slug:"symbol-iterator",normalizedTitle:"symbol.iterator",charIndex:157},{level:2,title:"æ°ç»æå¹³å",slug:"æ°ç»æå¹³å",normalizedTitle:"æ°ç»æå¹³å",charIndex:176},{level:2,title:"æ°ç»å»é",slug:"æ°ç»å»é",normalizedTitle:"æ°ç»å»é",charIndex:185},{level:2,title:"å¹¶åè¯·æ±æ§å¶",slug:"å¹¶åè¯·æ±æ§å¶",normalizedTitle:"å¹¶åè¯·æ±æ§å¶",charIndex:193},{level:2,title:"å®ç°ä¸ä¸ªsleepå½æ°",slug:"å®ç°ä¸ä¸ªsleepå½æ°",normalizedTitle:"å®ç°ä¸ä¸ªsleepå½æ°",charIndex:12629},{level:2,title:"å®ç° map å reduce",slug:"å®ç°-map-å-reduce",normalizedTitle:"å®ç° map å reduce",charIndex:203},{level:2,title:"å®ç° 'abcd'.f() è¿å 'd-c-b-a'",slug:"å®ç°-abcd-f-è¿å-d-c-b-a",normalizedTitle:"å®ç° 'abcd'.f() è¿å 'd-c-b-a'",charIndex:222},{level:2,title:"Object.create",slug:"object-create",normalizedTitle:"object.create",charIndex:252}],lastUpdated:"8/4/2025, 3:49:09 PM",lastUpdatedTimestamp:1754293749e3,headersStr:"é²æ èæµ æ·±æ·è´ æ¯éå å½æ°ç»å new instanceof applyï¼callï¼bind promise.all promise.race promise.resolve Promise promiseå°è£ajax åå¸è®¢éæ¨¡å¼ Symbol.iterator æ°ç»æå¹³å æ°ç»å»é å¹¶åè¯·æ±æ§å¶ å®ç°ä¸ä¸ªsleepå½æ° å®ç° map å reduce å®ç° 'abcd'.f() è¿å 'd-c-b-a' Object.create",content:"# æåä»£ç ï¼ä¸ï¼\n\n * é²æ\n * èæµ\n * æ·±æ·è´\n * æ¯éå\n * å½æ°ç»å\n * new\n * instanceof\n * apply,bind,call\n * promise.all\n * promise.race\n * promise\n * promiseå°è£ajax\n * åå¸è®¢éæ¨¡å¼\n * Symbol.iterator\n * æ°ç»æå¹³å\n * æ°ç»å»é\n * å¹¶åè¯·æ±æ§å¶\n * å®ç° map å reduce\n * å®ç° 'abcd'.f() è¿å 'd-c-b-a'\n * Object.create\n\n\n# é²æ\n\næè°é²æï¼å°±æ¯æè§¦åäºä»¶å n ç§åææ§è¡å½æ°ï¼å¦æå¨ n ç§ååè§¦åäºäºä»¶ï¼åä¼éæ°è®¡ç®å½æ°æ§è¡æ¶é´ã\n\n// é²ædebounce\nfunction debounce(fn, delay) {\n  let timer = null\n  return function () {\n    timer && clearTimeout(timer)\n    timer = setTimeout(() => {\n      /**\n      \tfn ä¸­ç this æå debounce ä¸­ return çè¿ä¸ªå½æ°ä¸­ç this\n      \treturn åæ¥çè¿ä¸ªå½æ°ä¸­ç this ä¹å°±æ¯æåç´æ¥è°ç¨ return å½æ°é£ä¸ªå¯¹è±¡\n      */\n      fn.apply(this, arguments)\n    }, delay)\n  }\n}\n\nfunction out(){\n    console.log(\"é²æ\")\n}\nwindow.onscroll = debounce(out, 1000)\n\n\n\n# èæµ\n\næè°èæµï¼å°±æ¯æè¿ç»­è§¦åäºä»¶ä½æ¯å¨ n ç§ä¸­åªæ§è¡ä¸æ¬¡å½æ°ã èæµä¼ç¨éå½æ°çæ§è¡é¢çã\n\n// ä½¿ç¨æ¶é´æ³åæ³ï¼äºä»¶ä¼ç«å³æ§è¡ï¼åæ­¢è§¦ååæ²¡æåæ³åæ¬¡æ§è¡\nfunction throttle(fn, delay) {\n  let lastTime = 0;\n  return function() {\n    let now = Date.now();\n    if (now - lastTime >= delay) {\n      fn.apply(this, arguments);\n      lastTime = now;\n    }\n  }\n}\n\n// ä½¿ç¨å®æ¶å¨åæ³ï¼delay æ¯«ç§åç¬¬ä¸æ¬¡æ§è¡ï¼ç¬¬äºæ¬¡äºä»¶åæ­¢è§¦ååä¾ç¶ä¼åä¸æ¬¡æ§è¡\nfunction throttle2(fn, delay) {\n  let timer = null;\n  return function() {\n    if (!timer) {\n      timer = setTimeout(() => {\n        fn.apply(this, arguments);\n        timer = null;\n      }, delay);\n    }\n  };\n}\n\n// ä½¿ç¨å®æ¶å¨åæ³ï¼äºä»¶ä¼ç«å³æ§è¡\nfunction throttle(fn, delay) {\n  let timer = null;\n  return function() {\n    if (!timer) {\n      fn.apply(this, arguments);\n      timer = setTimeout(() => {\n        timer = null;\n      }, delay)\n    }\n  };\n}\n\n\n\n# æ·±æ·è´\n\nfunction deepClone(obj, hash = new WeakMap()) {\n    if (obj instanceof Date) return new Date(obj);\n    if (obj instanceof Error) return new Error(obj);\n    if (obj instanceof RegExp) return new RegExp(obj);\n    if (typeof obj !== \"object\" || obj === null) return obj; // èèæ°ç»\n    if (hash.get(obj)) return hash.get(obj);\n    let cloneObj = new Object();\n    hash.set(obj, cloneObj);\n    for (let key in obj) {\n        if (Object.hasOwn(obj, key)) {\n            cloneObj[key] = deepClone(obj[key], hash);\n        }\n    }\n    return cloneObj;\n}\n\n\n> ä½¿ç¨WeakMapï¼hashåobjå­å¨çå°±æ¯å¼±å¼ç¨å³ç³»ï¼å½ä¸ä¸æ¬¡åå¾åæ¶æºå¶æ§è¡æ¶ï¼è¿ååå­å°±ä¼è¢«éæ¾æãè®¾æ³ä¸ä¸ï¼å¦ææä»¬è¦æ·è´çå¯¹è±¡éå¸¸åºå¤§æ¶ï¼ä½¿ç¨Mapä¼å¯¹åå­é æéå¸¸å¤§çé¢å¤æ¶èï¼èä¸æä»¬éè¦æå¨æ¸é¤Mapçå±æ§æè½éæ¾è¿ååå­ï¼èWeakMapä¼å¸®æä»¬å·§å¦åè§£è¿ä¸ªé®é¢ã\n\n\n# æ¯éå\n\nlet curry = (fn,...args)=> args.length < fn.length\n                ?(...arguments) => curry(fn,...args,...arguments)\n                :fn(...args)\n\n\n\n# å½æ°ç»å\n\nfunction compose(...args) {\n    return function(value) {\n        return args.reverse().reduce((acc, cur) => cur(acc), value)\n    }\n}\n\n\n\n# new\n\n>  1. åé ä¸ä¸ªæ°çç©ºå¯¹è±¡\n>  2. æ°å¯¹è±¡ç__proto__æåæé å½æ°çååå¯¹è±¡\n>  3. æé å½æ°çthisæåæ­£å¨åå»ºçæ°å¯¹è±¡ï¼å¹¶æ§è¡æé å½æ°çä»£ç ï¼åæ°å¯¹è±¡ä¸­æ·»å å±æ§åæ¹æ³ã\n>  4. è¿åæ°å¯¹è±¡å°å\n\nfunction _new(constructor, ...args) {\n    let obj = new Object()\n    obj.__proto__ = constructor.prototype\n    constructor.call(obj, ...args)\n    return obj\n}\n\n/**\n\t\tä¸é¢ä»£ç å¯ä»¥åä¼åä¸ä¸ï¼æ¨¡æäº new å°±å«åç¨ new äº\n\t\tèä¸æ²¡æèèæé å½æ°å­å¨è¿åå¼çæåµï¼å¦ææé å½æ°è¿åäºå¯¹è±¡é£ä¹åè¿åè¿ä¸ªå¯¹è±¡\n*/\nfunction _new(constructor, ...args) {\n  const obj = Object.create(fn.prototype); // ååå¼ç»§æ¿\n  const ret = constructor.call(obj, ...args); // ç»§æ¿å±æ§\n  return typeof ret === \"object\" ? ret : obj;\n}\n\n\n\n# instanceof\n\nfunction _instanceof(left, right) {\n \t\tif (typeof L !== 'object') return false\n    let l = left.__proto__;\n    let r = right.prototype;\n    while (true) {\n        if (l === null) {\n            return false;\n        }\n        if (l === r) {\n            return true;\n        }\n        l = l.__proto__;\n    }\n}\n\n\n\n# applyï¼callï¼bind\n\n//apply\nFunction.prototype.myApply = function(context, args) {\n    context = context || window;\n    context.fn = this;\n    const result = context.fn(...args);\n    delete context.fn;\n    return result;\n    \n}\n\nlet obj = {}\nconsole.log(Math.max.myApply(obj, [1, 2, 3])) //3\n\n//call\nFunction.prototype.myCall = function(context, ...args) {\n    context = context || window;\n    context.fn = this;\n    const result = context.fn(...args);\n    delete context.fn;\n    return result;\n}\n\nlet obj = {}\nconsole.log(Math.max.myCall(obj, 1, 2, 3)) // 3\n\n//bind\nFunction.prototype.myBind = function(context, ...args) {\n    context = context || window;\n    context.fn = this;\n    return function() {\n        const result = context.fn(...args, ...arguments);\n        delete context.fn;\n        return result;   \n    }\n}\n\nlet obj = {}\nconsole.log(Math.max.myBind(obj, 1, 2, 3)(4)) // 4\n\n\n\n# promise.all\n\nPromise.all = function (promises) {\n    return new Promise((resolve, reject) => {\n        if (!promises || promises.length === 0) {\n            resolve([]);\n        }\n        let count = 0;\n        const result = [];\n        for (let i = 0; i < promises[i].length; i++) {\n            // èèå°promises[i]å¯è½æ¯æ®éå¯¹è±¡ï¼åç»ä¸åè£ä¸ºPromiseå¯¹è±¡\n            Promise.resolve(promises[i]).then(res => {\n                result[i] = res;\n                if (++count === promises.length) {\n                    resolve(res);\n                }\n            }).catch(err => {\n                // ä»»ä½ä¸ä¸ªPromiseå¯¹è±¡æ§è¡å¤±è´¥ï¼åè°ç¨reject()æ¹æ³\n                reject(err);\n                return;\n            });\n        }\n    });\n}\n\n\n\n# promise.race\n\nPromise.race = function(promises) {\n    return new Promise((resolve, reject) => {\n       \t if (!promises || promises.length === 0) {\n            return;\n         }\n         for (const item of promises) {\n              Promise.resolve(item).then((res) => {\n                  resolve(res);\n                  return;\n              }).catch((err) => {\n                  reject(err);\n                  return;\n              })\n          }\n    });\n}\n\n\n\n# promise.resolve\n\nPromise.resolve = function (value) {\n    if (value instanceof promise) return value\n    return new Promise(resolve => resolve(value))\n}\n\n// ä¾å­\nPromise.resolve(100).then(value => console.log(value))\n\n\n\n# Promise\n\n * ä¸ç§ç¶æï¼pendingï¼fulfilledï¼rejected\n * new Promise æ¶ä¼ è¿æ¥ä¸ä¸ªæ§è¡å¨ï¼åæ°æ¯resolveårejectï¼ï¼æ¯ç«å³æ§è¡ç\n * resolveå½æ°çä½ç¨æ¯æ¹åç¶æä¸ºfulfilledï¼å­å¨æåçå¼ï¼value\n * rejectå½æ°çä½ç¨çæ¹åç¶æä¸ºrejectedï¼å­å¨å¤±è´¥çåå ï¼reason\n * thenå½æ°æä¸¤ä¸ªåæ°ï¼æååè°åå¤±è´¥åè°ï¼é¦åå¤æ­ç¶æï¼fulfilledåæ§è¡æååè°ï¼rejectedåæ§è¡å¤±è´¥åè°ï¼pendingåæåè°å­å¨èµ·æ¥\n * thenè¦å®ç°é¾å¼è°ç¨ï¼éè¦è¿å promiseï¼thenæ¹æ³åæ¥çæä½å¯ä»¥æ¾è¿æ°å»º promise2 çæ§è¡å¨ä¸­ç«å³æ§è¡ï¼å¹¶ä¸éè¦è·åå½åçè¿åå¼ xï¼ä¼ éç»ä¸ä¸ä¸ª then æ¹æ³\n\nconst PENDING = 'pending' // ç­å¾\nconst FULFILLED = 'fulfilled' // æå\nconst REJECTED = 'rejected' //å¤±è´¥\n\nclass MyPromise {\n  constructor (executor) {\n    executor(this.resolve, this.reject);\n  }\n  // promise ç¶æ\n  status = PENDING;\n  // æåä¹åçå¼\n  value = undefined;\n  // å¤±è´¥åçåå \n  reason = undefined;\n  // æååè°ï¼ç¨æ°ç»çåå æ¯å¯è½æå¤ä¸ª promise.then\n  successCallback = [];\n  // å¤±è´¥åè°\n  failCallback = [];\n  // å®ä¹æç®­å¤´å½æ°çå¥½å¤æ¯ this æåå½åç±»\n  resolve = value => {\n    // å¦æç¶æä¸æ¯ç­å¾ é»æ­¢ç¨åºåä¸æ§è¡ å ä¸ºç¶æä¸æ¦ç¡®å®å°±ä¸å¯ä»¥åæ¹å\n    if (this.status !== PENDING) return;\n    // å°ç¶ææ´æ¹ä¸ºæå\n    this.status = FULFILLED;\n    // ä¿å­æåä¹åçå¼\n    this.value = value;\n    // å¤æ­æååè°æ¯å¦å­å¨ å­å¨åè°ç¨\n    while (this.successCallback.length) {\n     \tthis.successCallback.shift()(this.value);\n    }\n  }\n  reject = reason => {\n    // å¦æç¶æä¸æ¯ç­å¾ é»æ­¢ç¨åºåä¸æ§è¡\n    if (this.status !== PENDING) return;\n    // å°ç¶ææ´æ¹ä¸ºå¤±è´¥\n    this.status = REJECTED;\n    // ä¿å­å¤±è´¥åçåå \n    this.reason = reason;\n    // å¤æ­å¤±è´¥åè°æ¯å¦å­å¨ å­å¨åè°ç¨\n    while (this.failCallback.length) {\n     \tthis.failCallback.shift()(this.reason); \n    }\n  }\n then = (successCallback, failCallback) => {\n   successCallback = successCallback ? successCallback : value => value;\n   return new MyPromise((resolve, reject) => {\n     if (this.status === FULLFILLED) {\n       let x = successCallback(this.value);\n       x instanceof MyPromise ? x.then(resolve, reject) : resolve(x);\n     }\n     else if (this.status === REJECTED) {\n       failCallback(this.reason);\n     }\n     else {\n       this.successCallback.push(successCallback);\n       this.failCallback.push(failCallback);\n     }\n   });\n }\n catch = (failCallback) => {\n   return this.then(undefined, failCallback);\n }\n}\n\n// æµè¯\n\n// 1. æµè¯åºæ¬åè½\nlet p = new MyPromise((resolve, reject) => {\n    resolve('success')\n    reject('fail')\n})\n\np.then(val => {\n  console.log(val)\n}, reason => {\n  console.log(reason)\n})\n\n// 2. æµè¯å¼æ­¥\nlet p = new MyPromise((resolve, reject) => {\n    setTimeout(() => {\n        resolve('success')   \n    }, 2000)\n})\n\np.then(val => {\n  console.log(val)\n}, reason => {\n  console.log(reason)\n})\n\n// 3. æµè¯é¾å¼è°ç¨\nlet p = new MyPromise((resolve, reject) => {\n    resolve('success')\n})\n\np.then(res => {\n    console.log(res)\n    return 100\n}).then(val => {\n    console.log(val)\n})\n\n// 4. æµè¯ then è¿åä¹æ¯ promise\nlet p = new MyPromise((resolve, reject) => {\n    resolve('success')\n})\n\np.then(res => {\n    console.log(res)\n    return new MyPromise((resolve, reject) => {\n        resolve('other')\n    })\n}).then(val => {\n    console.log(val)\n})\n\n// 5. æµè¯ then ä¸ä¼ åæ°\nlet promise = new MyPromise((resolve, reject) => {\n    resolve('æå')\n})\n\np.then().then().then(val => console.log(val))\n\n\n\n# promiseå°è£ajax\n\nfunction ajax (url) {\n    return new Promise(function (reslove, reject) {\n        var xhr = new XMLHttpRequest()\n        xhr.open('GET', url) \n        xhr.reponeseType = 'json'\n        xhr.onload = function () {\n            if(this.status === 200) {\n                reslove(this.response)\n            } else {\n                reject(new Error(this.statusText))\n            }\n        }\n        xhr.send()\n    })\n}\n\najax('/api/')\n\t.then(res => console.log(res))\n\t.catch(err => console.log(err))\n\n\n//promise.reslove\nPromise.resolve('foo')\n    .then(function (value) {\n \t   \t\tconsole.log(value)\n\t\t})\n\n\n\n# åå¸è®¢éæ¨¡å¼\n\n    // ç±»åé¨å­å¨ä¸ä¸ªå¯¹è±¡ï¼åå«äºä»¶ååå¯¹åºçè§¦åå½æ°\n    // { click: [fn1, fn2], change: fn }\n    class EventEmitter {\n      constructor () {\n        this.subs = Object.create(null)\n      }\n      // æ³¨åäºä»¶\n      $on (eventType, handler) {\n        this.subs[eventType] = this.subs[eventType] || []\n        this.subs[eventType].push(handler)\n      }\n\n      // è§¦åäºä»¶\n      $emit (eventType) {\n        if (this.subs[eventType]) {\n          this.subs[eventType].foreach(handler => {\n            handler()\n          })\n        }\n      }\n    }\n\n    // æµè¯\n    let em = new EventEmitter() // ä¿¡å·ä¸­å¿\n    em.$on('click', () => {\n      console.log('click1')\n    })\n    em.$on('click', () => {\n      console.log('click2')\n    })\n    em.$emit('click')\n\n\n\n# Symbol.iterator\n\nconst todos = {\n    life: ['åé¥­', 'ç¡è§', 'æè±è±'],\n    learn: ['è¯­æ', 'æ°å­¦', 'å¤è¯­'],\n    work: ['åè¶'],\n\n    [Symbol.iterator]: function * () {\n        const all = [...this.life, ...this.learn, ...this.work]\n        for(const item of all) {\n            yield item\n        }\n    }\n}\n\nfor (let item of todos) {\n    console.log(item)\n}\n\n\n\n# æ°ç»æå¹³å\n\n// ä¸å¸¦åæ°\nfunction flattern(arr) {\n    let res = [];\n    for (const item of arr) {\n        if (Array.isArray(item)) {\n            res = res.concat(flattern(item));\n        } else {\n            res.push(item);\n        }\n    }\n    return res;\n}\n// å¸¦åæ°\nfunction flattern(arr, depth) {\n    let res = []\n    for(let item of arr){\n        if (Array.isArray(item) && depth > 0) {\n            res = res.concat(flattern(item, depth - 1))\n        } else {\n            res.push(item)\n        }\n    }\n    return res\n}\n\n// ä¸æ¬¡æ§æå¹³\nfunction flat(arr) {\n  return arr.toString().split(',').map(item => +item)\n}\n\n\n\n# æ°ç»å»é\n\nï¼1ï¼reduce + includes\n\nfunction deduplicate(arr) {\n    return arr.reduce((acc, cur) => acc.includes(cur) ? acc : acc.concat(cur), []);\n}\n// concat ä¸ä¼æ¹ååææ°ç»ï¼è¿åå¼ä¸ºæ°æ°ç»ï¼å¯æ¼æ¥åä¸ªåç´ \n\n\nï¼2ï¼å©ç¨ES6çSetæ°æ®ç»æ\n\n> setÂ ç±»ä¼¼äºæ°ç»ï¼ä¸æåå¼ä¸éå¤é½æ¯å¯ä¸çï¼setæ¬èº«æ¯ä¸ä¸ªæé å½æ°ã\n\nfunction deduplicate(arr) {\n    return [...new Set(arr)];\n}\n\n\nï¼3ï¼å©ç¨sort\n\nfunction deduplicate(arr) {\n    arr = arr.sort();\n    const res = [];\n    for (let i = 1; i < arr.length; i++) {\n        if (arr[i] !== arr[i - 1]) {\n            res.push(arr[i]);\n        }\n    }\n    return res;\n}\n\n\nï¼4ï¼å©ç¨includes\n\nfunction deduplicate(arr) {\n    const res = [];\n    for (let i = 0; i < arr.length; i++) {\n        if (!res.includes(arr[i])) {\n            res.push(arr[i]);\n        }\n    }\n    return res;\n}\n\n\n\n# å¹¶åè¯·æ±æ§å¶\n\n> å®ç°ä¸ä¸ªæ¹éè¯·æ±å½æ° multiRequest(urls, maxNum)ï¼è¦æ±å¦ä¸ï¼ â¢ è¦æ±æå¤§å¹¶åæ° maxNum â¢ æ¯å½æä¸ä¸ªè¯·æ±è¿åï¼å°±çä¸ä¸ä¸ªç©ºä½ï¼å¯ä»¥å¢å æ°çè¯·æ± â¢ ææè¯·æ±å®æåï¼ç»ææç§ urls éé¢çé¡ºåºä¾æ¬¡æåº\n\nfunction multiRequest(urls = [], maxNum) {\n    const len = urls.length\n    const result = new Array(len).fill(false)\n    let count = 0\n  \n    return new Promise((resolve, reject) => {\n        while (count < maxNum) {\n            next();\n        }\n        function next() {\n            let current = count++;\n            if (current >= len) {\n                !result.includes(false) && resolve(result);\n                return;\n            }\n            const url = urls[current];\n            fetch(url).then((res) => {\n                result[current] = res;\n                if (current < len) {\n                    next();\n                }\n            }).catch((err) => {\n                result[current] = err;\n                if (current < len) {\n                    next();\n                }\n            })\n        }\n    })\n}\n\n\n\n# å®ç°ä¸ä¸ªsleepå½æ°\n\nconst sleep = (time) => {\n  return new Promise(resolve => setTimeout(resolve, time))\n}\n\nsleep(1000).then(() => {\n  // è¿éåä½ çæä½\n})\n\n\n\n# å®ç° map å reduce\n\nArray.prototype.myMap = function(fn) {\n    const arr = this;\n    const res = [];\n    for (let i = 0; i < arr.length; i++) {\n        res[i] = fn(arr[i], i, arr)\n    }\n    return res;\n};\n\nArray.prototype.myReduce = function(fn, initValue) {\n    const arr = this;\n    let val = initValue || arr[0]\n    for (let i = initValue ? 0 : 1; i < arr.length; i++) {\n        val = fn(val, arr[i], i, arr)\n    }\n    return val;\n};\n\n\n\n# å®ç° 'abcd'.f() è¿å 'd-c-b-a'\n\nString.prototype.f = function() {\n    return this.split('').reverse().join('-')\n}\n\n\n\n# Object.create\n\n// Object.create å®ç°\nlet o = Object.create(obj) // o.__proto__ === obj\nObject.create = function (obj) {\n    function F() {}\n    F.prototype = obj;\n    return new F();\n};\n\n// å¯ä»¥çè§£ä¸º\nObject.create = function (obj) {\n  return {\n    __proto__: obj\n  }\n}\n",normalizedContent:"# æåä»£ç ï¼ä¸ï¼\n\n * é²æ\n * èæµ\n * æ·±æ·è´\n * æ¯éå\n * å½æ°ç»å\n * new\n * instanceof\n * apply,bind,call\n * promise.all\n * promise.race\n * promise\n * promiseå°è£ajax\n * åå¸è®¢éæ¨¡å¼\n * symbol.iterator\n * æ°ç»æå¹³å\n * æ°ç»å»é\n * å¹¶åè¯·æ±æ§å¶\n * å®ç° map å reduce\n * å®ç° 'abcd'.f() è¿å 'd-c-b-a'\n * object.create\n\n\n# é²æ\n\næè°é²æï¼å°±æ¯æè§¦åäºä»¶å n ç§åææ§è¡å½æ°ï¼å¦æå¨ n ç§ååè§¦åäºäºä»¶ï¼åä¼éæ°è®¡ç®å½æ°æ§è¡æ¶é´ã\n\n// é²ædebounce\nfunction debounce(fn, delay) {\n  let timer = null\n  return function () {\n    timer && cleartimeout(timer)\n    timer = settimeout(() => {\n      /**\n      \tfn ä¸­ç this æå debounce ä¸­ return çè¿ä¸ªå½æ°ä¸­ç this\n      \treturn åæ¥çè¿ä¸ªå½æ°ä¸­ç this ä¹å°±æ¯æåç´æ¥è°ç¨ return å½æ°é£ä¸ªå¯¹è±¡\n      */\n      fn.apply(this, arguments)\n    }, delay)\n  }\n}\n\nfunction out(){\n    console.log(\"é²æ\")\n}\nwindow.onscroll = debounce(out, 1000)\n\n\n\n# èæµ\n\næè°èæµï¼å°±æ¯æè¿ç»­è§¦åäºä»¶ä½æ¯å¨ n ç§ä¸­åªæ§è¡ä¸æ¬¡å½æ°ã èæµä¼ç¨éå½æ°çæ§è¡é¢çã\n\n// ä½¿ç¨æ¶é´æ³åæ³ï¼äºä»¶ä¼ç«å³æ§è¡ï¼åæ­¢è§¦ååæ²¡æåæ³åæ¬¡æ§è¡\nfunction throttle(fn, delay) {\n  let lasttime = 0;\n  return function() {\n    let now = date.now();\n    if (now - lasttime >= delay) {\n      fn.apply(this, arguments);\n      lasttime = now;\n    }\n  }\n}\n\n// ä½¿ç¨å®æ¶å¨åæ³ï¼delay æ¯«ç§åç¬¬ä¸æ¬¡æ§è¡ï¼ç¬¬äºæ¬¡äºä»¶åæ­¢è§¦ååä¾ç¶ä¼åä¸æ¬¡æ§è¡\nfunction throttle2(fn, delay) {\n  let timer = null;\n  return function() {\n    if (!timer) {\n      timer = settimeout(() => {\n        fn.apply(this, arguments);\n        timer = null;\n      }, delay);\n    }\n  };\n}\n\n// ä½¿ç¨å®æ¶å¨åæ³ï¼äºä»¶ä¼ç«å³æ§è¡\nfunction throttle(fn, delay) {\n  let timer = null;\n  return function() {\n    if (!timer) {\n      fn.apply(this, arguments);\n      timer = settimeout(() => {\n        timer = null;\n      }, delay)\n    }\n  };\n}\n\n\n\n# æ·±æ·è´\n\nfunction deepclone(obj, hash = new weakmap()) {\n    if (obj instanceof date) return new date(obj);\n    if (obj instanceof error) return new error(obj);\n    if (obj instanceof regexp) return new regexp(obj);\n    if (typeof obj !== \"object\" || obj === null) return obj; // èèæ°ç»\n    if (hash.get(obj)) return hash.get(obj);\n    let cloneobj = new object();\n    hash.set(obj, cloneobj);\n    for (let key in obj) {\n        if (object.hasown(obj, key)) {\n            cloneobj[key] = deepclone(obj[key], hash);\n        }\n    }\n    return cloneobj;\n}\n\n\n> ä½¿ç¨weakmapï¼hashåobjå­å¨çå°±æ¯å¼±å¼ç¨å³ç³»ï¼å½ä¸ä¸æ¬¡åå¾åæ¶æºå¶æ§è¡æ¶ï¼è¿ååå­å°±ä¼è¢«éæ¾æãè®¾æ³ä¸ä¸ï¼å¦ææä»¬è¦æ·è´çå¯¹è±¡éå¸¸åºå¤§æ¶ï¼ä½¿ç¨mapä¼å¯¹åå­é æéå¸¸å¤§çé¢å¤æ¶èï¼èä¸æä»¬éè¦æå¨æ¸é¤mapçå±æ§æè½éæ¾è¿ååå­ï¼èweakmapä¼å¸®æä»¬å·§å¦åè§£è¿ä¸ªé®é¢ã\n\n\n# æ¯éå\n\nlet curry = (fn,...args)=> args.length < fn.length\n                ?(...arguments) => curry(fn,...args,...arguments)\n                :fn(...args)\n\n\n\n# å½æ°ç»å\n\nfunction compose(...args) {\n    return function(value) {\n        return args.reverse().reduce((acc, cur) => cur(acc), value)\n    }\n}\n\n\n\n# new\n\n>  1. åé ä¸ä¸ªæ°çç©ºå¯¹è±¡\n>  2. æ°å¯¹è±¡ç__proto__æåæé å½æ°çååå¯¹è±¡\n>  3. æé å½æ°çthisæåæ­£å¨åå»ºçæ°å¯¹è±¡ï¼å¹¶æ§è¡æé å½æ°çä»£ç ï¼åæ°å¯¹è±¡ä¸­æ·»å å±æ§åæ¹æ³ã\n>  4. è¿åæ°å¯¹è±¡å°å\n\nfunction _new(constructor, ...args) {\n    let obj = new object()\n    obj.__proto__ = constructor.prototype\n    constructor.call(obj, ...args)\n    return obj\n}\n\n/**\n\t\tä¸é¢ä»£ç å¯ä»¥åä¼åä¸ä¸ï¼æ¨¡æäº new å°±å«åç¨ new äº\n\t\tèä¸æ²¡æèèæé å½æ°å­å¨è¿åå¼çæåµï¼å¦ææé å½æ°è¿åäºå¯¹è±¡é£ä¹åè¿åè¿ä¸ªå¯¹è±¡\n*/\nfunction _new(constructor, ...args) {\n  const obj = object.create(fn.prototype); // ååå¼ç»§æ¿\n  const ret = constructor.call(obj, ...args); // ç»§æ¿å±æ§\n  return typeof ret === \"object\" ? ret : obj;\n}\n\n\n\n# instanceof\n\nfunction _instanceof(left, right) {\n \t\tif (typeof l !== 'object') return false\n    let l = left.__proto__;\n    let r = right.prototype;\n    while (true) {\n        if (l === null) {\n            return false;\n        }\n        if (l === r) {\n            return true;\n        }\n        l = l.__proto__;\n    }\n}\n\n\n\n# applyï¼callï¼bind\n\n//apply\nfunction.prototype.myapply = function(context, args) {\n    context = context || window;\n    context.fn = this;\n    const result = context.fn(...args);\n    delete context.fn;\n    return result;\n    \n}\n\nlet obj = {}\nconsole.log(math.max.myapply(obj, [1, 2, 3])) //3\n\n//call\nfunction.prototype.mycall = function(context, ...args) {\n    context = context || window;\n    context.fn = this;\n    const result = context.fn(...args);\n    delete context.fn;\n    return result;\n}\n\nlet obj = {}\nconsole.log(math.max.mycall(obj, 1, 2, 3)) // 3\n\n//bind\nfunction.prototype.mybind = function(context, ...args) {\n    context = context || window;\n    context.fn = this;\n    return function() {\n        const result = context.fn(...args, ...arguments);\n        delete context.fn;\n        return result;   \n    }\n}\n\nlet obj = {}\nconsole.log(math.max.mybind(obj, 1, 2, 3)(4)) // 4\n\n\n\n# promise.all\n\npromise.all = function (promises) {\n    return new promise((resolve, reject) => {\n        if (!promises || promises.length === 0) {\n            resolve([]);\n        }\n        let count = 0;\n        const result = [];\n        for (let i = 0; i < promises[i].length; i++) {\n            // èèå°promises[i]å¯è½æ¯æ®éå¯¹è±¡ï¼åç»ä¸åè£ä¸ºpromiseå¯¹è±¡\n            promise.resolve(promises[i]).then(res => {\n                result[i] = res;\n                if (++count === promises.length) {\n                    resolve(res);\n                }\n            }).catch(err => {\n                // ä»»ä½ä¸ä¸ªpromiseå¯¹è±¡æ§è¡å¤±è´¥ï¼åè°ç¨reject()æ¹æ³\n                reject(err);\n                return;\n            });\n        }\n    });\n}\n\n\n\n# promise.race\n\npromise.race = function(promises) {\n    return new promise((resolve, reject) => {\n       \t if (!promises || promises.length === 0) {\n            return;\n         }\n         for (const item of promises) {\n              promise.resolve(item).then((res) => {\n                  resolve(res);\n                  return;\n              }).catch((err) => {\n                  reject(err);\n                  return;\n              })\n          }\n    });\n}\n\n\n\n# promise.resolve\n\npromise.resolve = function (value) {\n    if (value instanceof promise) return value\n    return new promise(resolve => resolve(value))\n}\n\n// ä¾å­\npromise.resolve(100).then(value => console.log(value))\n\n\n\n# promise\n\n * ä¸ç§ç¶æï¼pendingï¼fulfilledï¼rejected\n * new promise æ¶ä¼ è¿æ¥ä¸ä¸ªæ§è¡å¨ï¼åæ°æ¯resolveårejectï¼ï¼æ¯ç«å³æ§è¡ç\n * resolveå½æ°çä½ç¨æ¯æ¹åç¶æä¸ºfulfilledï¼å­å¨æåçå¼ï¼value\n * rejectå½æ°çä½ç¨çæ¹åç¶æä¸ºrejectedï¼å­å¨å¤±è´¥çåå ï¼reason\n * thenå½æ°æä¸¤ä¸ªåæ°ï¼æååè°åå¤±è´¥åè°ï¼é¦åå¤æ­ç¶æï¼fulfilledåæ§è¡æååè°ï¼rejectedåæ§è¡å¤±è´¥åè°ï¼pendingåæåè°å­å¨èµ·æ¥\n * thenè¦å®ç°é¾å¼è°ç¨ï¼éè¦è¿å promiseï¼thenæ¹æ³åæ¥çæä½å¯ä»¥æ¾è¿æ°å»º promise2 çæ§è¡å¨ä¸­ç«å³æ§è¡ï¼å¹¶ä¸éè¦è·åå½åçè¿åå¼ xï¼ä¼ éç»ä¸ä¸ä¸ª then æ¹æ³\n\nconst pending = 'pending' // ç­å¾\nconst fulfilled = 'fulfilled' // æå\nconst rejected = 'rejected' //å¤±è´¥\n\nclass mypromise {\n  constructor (executor) {\n    executor(this.resolve, this.reject);\n  }\n  // promise ç¶æ\n  status = pending;\n  // æåä¹åçå¼\n  value = undefined;\n  // å¤±è´¥åçåå \n  reason = undefined;\n  // æååè°ï¼ç¨æ°ç»çåå æ¯å¯è½æå¤ä¸ª promise.then\n  successcallback = [];\n  // å¤±è´¥åè°\n  failcallback = [];\n  // å®ä¹æç®­å¤´å½æ°çå¥½å¤æ¯ this æåå½åç±»\n  resolve = value => {\n    // å¦æç¶æä¸æ¯ç­å¾ é»æ­¢ç¨åºåä¸æ§è¡ å ä¸ºç¶æä¸æ¦ç¡®å®å°±ä¸å¯ä»¥åæ¹å\n    if (this.status !== pending) return;\n    // å°ç¶ææ´æ¹ä¸ºæå\n    this.status = fulfilled;\n    // ä¿å­æåä¹åçå¼\n    this.value = value;\n    // å¤æ­æååè°æ¯å¦å­å¨ å­å¨åè°ç¨\n    while (this.successcallback.length) {\n     \tthis.successcallback.shift()(this.value);\n    }\n  }\n  reject = reason => {\n    // å¦æç¶æä¸æ¯ç­å¾ é»æ­¢ç¨åºåä¸æ§è¡\n    if (this.status !== pending) return;\n    // å°ç¶ææ´æ¹ä¸ºå¤±è´¥\n    this.status = rejected;\n    // ä¿å­å¤±è´¥åçåå \n    this.reason = reason;\n    // å¤æ­å¤±è´¥åè°æ¯å¦å­å¨ å­å¨åè°ç¨\n    while (this.failcallback.length) {\n     \tthis.failcallback.shift()(this.reason); \n    }\n  }\n then = (successcallback, failcallback) => {\n   successcallback = successcallback ? successcallback : value => value;\n   return new mypromise((resolve, reject) => {\n     if (this.status === fullfilled) {\n       let x = successcallback(this.value);\n       x instanceof mypromise ? x.then(resolve, reject) : resolve(x);\n     }\n     else if (this.status === rejected) {\n       failcallback(this.reason);\n     }\n     else {\n       this.successcallback.push(successcallback);\n       this.failcallback.push(failcallback);\n     }\n   });\n }\n catch = (failcallback) => {\n   return this.then(undefined, failcallback);\n }\n}\n\n// æµè¯\n\n// 1. æµè¯åºæ¬åè½\nlet p = new mypromise((resolve, reject) => {\n    resolve('success')\n    reject('fail')\n})\n\np.then(val => {\n  console.log(val)\n}, reason => {\n  console.log(reason)\n})\n\n// 2. æµè¯å¼æ­¥\nlet p = new mypromise((resolve, reject) => {\n    settimeout(() => {\n        resolve('success')   \n    }, 2000)\n})\n\np.then(val => {\n  console.log(val)\n}, reason => {\n  console.log(reason)\n})\n\n// 3. æµè¯é¾å¼è°ç¨\nlet p = new mypromise((resolve, reject) => {\n    resolve('success')\n})\n\np.then(res => {\n    console.log(res)\n    return 100\n}).then(val => {\n    console.log(val)\n})\n\n// 4. æµè¯ then è¿åä¹æ¯ promise\nlet p = new mypromise((resolve, reject) => {\n    resolve('success')\n})\n\np.then(res => {\n    console.log(res)\n    return new mypromise((resolve, reject) => {\n        resolve('other')\n    })\n}).then(val => {\n    console.log(val)\n})\n\n// 5. æµè¯ then ä¸ä¼ åæ°\nlet promise = new mypromise((resolve, reject) => {\n    resolve('æå')\n})\n\np.then().then().then(val => console.log(val))\n\n\n\n# promiseå°è£ajax\n\nfunction ajax (url) {\n    return new promise(function (reslove, reject) {\n        var xhr = new xmlhttprequest()\n        xhr.open('get', url) \n        xhr.reponesetype = 'json'\n        xhr.onload = function () {\n            if(this.status === 200) {\n                reslove(this.response)\n            } else {\n                reject(new error(this.statustext))\n            }\n        }\n        xhr.send()\n    })\n}\n\najax('/api/')\n\t.then(res => console.log(res))\n\t.catch(err => console.log(err))\n\n\n//promise.reslove\npromise.resolve('foo')\n    .then(function (value) {\n \t   \t\tconsole.log(value)\n\t\t})\n\n\n\n# åå¸è®¢éæ¨¡å¼\n\n    // ç±»åé¨å­å¨ä¸ä¸ªå¯¹è±¡ï¼åå«äºä»¶ååå¯¹åºçè§¦åå½æ°\n    // { click: [fn1, fn2], change: fn }\n    class eventemitter {\n      constructor () {\n        this.subs = object.create(null)\n      }\n      // æ³¨åäºä»¶\n      $on (eventtype, handler) {\n        this.subs[eventtype] = this.subs[eventtype] || []\n        this.subs[eventtype].push(handler)\n      }\n\n      // è§¦åäºä»¶\n      $emit (eventtype) {\n        if (this.subs[eventtype]) {\n          this.subs[eventtype].foreach(handler => {\n            handler()\n          })\n        }\n      }\n    }\n\n    // æµè¯\n    let em = new eventemitter() // ä¿¡å·ä¸­å¿\n    em.$on('click', () => {\n      console.log('click1')\n    })\n    em.$on('click', () => {\n      console.log('click2')\n    })\n    em.$emit('click')\n\n\n\n# symbol.iterator\n\nconst todos = {\n    life: ['åé¥­', 'ç¡è§', 'æè±è±'],\n    learn: ['è¯­æ', 'æ°å­¦', 'å¤è¯­'],\n    work: ['åè¶'],\n\n    [symbol.iterator]: function * () {\n        const all = [...this.life, ...this.learn, ...this.work]\n        for(const item of all) {\n            yield item\n        }\n    }\n}\n\nfor (let item of todos) {\n    console.log(item)\n}\n\n\n\n# æ°ç»æå¹³å\n\n// ä¸å¸¦åæ°\nfunction flattern(arr) {\n    let res = [];\n    for (const item of arr) {\n        if (array.isarray(item)) {\n            res = res.concat(flattern(item));\n        } else {\n            res.push(item);\n        }\n    }\n    return res;\n}\n// å¸¦åæ°\nfunction flattern(arr, depth) {\n    let res = []\n    for(let item of arr){\n        if (array.isarray(item) && depth > 0) {\n            res = res.concat(flattern(item, depth - 1))\n        } else {\n            res.push(item)\n        }\n    }\n    return res\n}\n\n// ä¸æ¬¡æ§æå¹³\nfunction flat(arr) {\n  return arr.tostring().split(',').map(item => +item)\n}\n\n\n\n# æ°ç»å»é\n\nï¼1ï¼reduce + includes\n\nfunction deduplicate(arr) {\n    return arr.reduce((acc, cur) => acc.includes(cur) ? acc : acc.concat(cur), []);\n}\n// concat ä¸ä¼æ¹ååææ°ç»ï¼è¿åå¼ä¸ºæ°æ°ç»ï¼å¯æ¼æ¥åä¸ªåç´ \n\n\nï¼2ï¼å©ç¨es6çsetæ°æ®ç»æ\n\n> setÂ ç±»ä¼¼äºæ°ç»ï¼ä¸æåå¼ä¸éå¤é½æ¯å¯ä¸çï¼setæ¬èº«æ¯ä¸ä¸ªæé å½æ°ã\n\nfunction deduplicate(arr) {\n    return [...new set(arr)];\n}\n\n\nï¼3ï¼å©ç¨sort\n\nfunction deduplicate(arr) {\n    arr = arr.sort();\n    const res = [];\n    for (let i = 1; i < arr.length; i++) {\n        if (arr[i] !== arr[i - 1]) {\n            res.push(arr[i]);\n        }\n    }\n    return res;\n}\n\n\nï¼4ï¼å©ç¨includes\n\nfunction deduplicate(arr) {\n    const res = [];\n    for (let i = 0; i < arr.length; i++) {\n        if (!res.includes(arr[i])) {\n            res.push(arr[i]);\n        }\n    }\n    return res;\n}\n\n\n\n# å¹¶åè¯·æ±æ§å¶\n\n> å®ç°ä¸ä¸ªæ¹éè¯·æ±å½æ° multirequest(urls, maxnum)ï¼è¦æ±å¦ä¸ï¼ â¢ è¦æ±æå¤§å¹¶åæ° maxnum â¢ æ¯å½æä¸ä¸ªè¯·æ±è¿åï¼å°±çä¸ä¸ä¸ªç©ºä½ï¼å¯ä»¥å¢å æ°çè¯·æ± â¢ ææè¯·æ±å®æåï¼ç»ææç§ urls éé¢çé¡ºåºä¾æ¬¡æåº\n\nfunction multirequest(urls = [], maxnum) {\n    const len = urls.length\n    const result = new array(len).fill(false)\n    let count = 0\n  \n    return new promise((resolve, reject) => {\n        while (count < maxnum) {\n            next();\n        }\n        function next() {\n            let current = count++;\n            if (current >= len) {\n                !result.includes(false) && resolve(result);\n                return;\n            }\n            const url = urls[current];\n            fetch(url).then((res) => {\n                result[current] = res;\n                if (current < len) {\n                    next();\n                }\n            }).catch((err) => {\n                result[current] = err;\n                if (current < len) {\n                    next();\n                }\n            })\n        }\n    })\n}\n\n\n\n# å®ç°ä¸ä¸ªsleepå½æ°\n\nconst sleep = (time) => {\n  return new promise(resolve => settimeout(resolve, time))\n}\n\nsleep(1000).then(() => {\n  // è¿éåä½ çæä½\n})\n\n\n\n# å®ç° map å reduce\n\narray.prototype.mymap = function(fn) {\n    const arr = this;\n    const res = [];\n    for (let i = 0; i < arr.length; i++) {\n        res[i] = fn(arr[i], i, arr)\n    }\n    return res;\n};\n\narray.prototype.myreduce = function(fn, initvalue) {\n    const arr = this;\n    let val = initvalue || arr[0]\n    for (let i = initvalue ? 0 : 1; i < arr.length; i++) {\n        val = fn(val, arr[i], i, arr)\n    }\n    return val;\n};\n\n\n\n# å®ç° 'abcd'.f() è¿å 'd-c-b-a'\n\nstring.prototype.f = function() {\n    return this.split('').reverse().join('-')\n}\n\n\n\n# object.create\n\n// object.create å®ç°\nlet o = object.create(obj) // o.__proto__ === obj\nobject.create = function (obj) {\n    function f() {}\n    f.prototype = obj;\n    return new f();\n};\n\n// å¯ä»¥çè§£ä¸º\nobject.create = function (obj) {\n  return {\n    __proto__: obj\n  }\n}\n",charsets:{cjk:!0}},{title:"é¢è¯é¢ï¼åä¸ï¼",frontmatter:{title:"é¢è¯é¢ï¼åä¸ï¼",date:"2018-08-03T09:21:01.000Z",categories:"é¢è¯"},regularPath:"/interview/interview-11.html",relativePath:"interview/interview-11.md",key:"v-7d9ab412",path:"/interview/interview-11.html",headers:[{level:2,title:"MVVM",slug:"mvvm",normalizedTitle:"mvvm",charIndex:14},{level:2,title:"Vueæ¸²ææµç¨",slug:"vueæ¸²ææµç¨",normalizedTitle:"vueæ¸²ææµç¨",charIndex:22},{level:2,title:"Vueçå½å¨æ",slug:"vueçå½å¨æ",normalizedTitle:"vueçå½å¨æ",charIndex:33},{level:2,title:"ç¶å­ç»ä»¶çå½å¨æ",slug:"ç¶å­ç»ä»¶çå½å¨æ",normalizedTitle:"ç¶å­ç»ä»¶çå½å¨æ",charIndex:1497},{level:2,title:"vueåreactçå¼å",slug:"vueåreactçå¼å",normalizedTitle:"vueåreactçå¼å",charIndex:56},{level:3,title:"1.æ ¸å¿ææ³",slug:"_1-æ ¸å¿ææ³",normalizedTitle:"1.æ ¸å¿ææ³",charIndex:1800},{level:3,title:"vue",slug:"vue",normalizedTitle:"vue",charIndex:56},{level:3,title:"react",slug:"react",normalizedTitle:"react",charIndex:60}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"MVVM Vueæ¸²ææµç¨ Vueçå½å¨æ ç¶å­ç»ä»¶çå½å¨æ vueåreactçå¼å 1.æ ¸å¿ææ³ vue react",content:"# é¢è¯é¢ï¼åä¸ï¼\n\n * MVVM\n * Vueæ¸²ææµç¨\n * Vueçå½å¨æ\n * ç¶å­ç»ä»¶å£°æå¨æ\n * vueåreactçå¼å\n\n\n# MVVM\n\nMVVM å¯¹åº 3ä¸ªç»æé¨åï¼Modelï¼æ¨¡åï¼ãViewï¼è§å¾ï¼ å ViewModelï¼è§å¾æ¨¡åï¼ã\n\n * View æ¯ç¨æ·å¨å±å¹ä¸çå°çç»æãå¸å±åå¤è§ï¼ä¹ç§°UIã\n * ViewModel æ¯ä¸ä¸ªç»å®å¨ï¼è½å View å±å Model å±è¿è¡éä¿¡ã\n * Model æ¯æ°æ®åé»è¾ã\n\nView ä¸è½å Model ç´æ¥éä¿¡ï¼å®ä»¬åªè½éè¿ ViewModel éä¿¡ãModel å ViewModel ä¹é´çäº¤äºæ¯ååçï¼ViewModel éè¿ååæ°æ®ç»å®æ View å±å Model å±è¿æ¥èµ·æ¥ï¼å æ­¤ View æ°æ®çååä¼åæ­¥å° Model ä¸­ï¼è Model æ°æ®çååä¹ä¼ç«å³ååºå° View ä¸ã\n\nä¸¥æ ¼ç MVVM è¦æ± View ä¸è½å Model ç´æ¥éä¿¡ï¼è Vue å¨ç»ä»¶æä¾äº $refs è¿ä¸ªå±æ§ï¼è®© Model å¯ä»¥ç´æ¥æä½ Viewï¼è¿åäºè¿ä¸è§å®ã\n\n\n# Vueæ¸²ææµç¨\n\næµç¨ä¸»è¦åä¸ºä¸ä¸ªé¨åï¼\n\n 1. æ¨¡æ¿ç¼è¯ï¼parse è§£ææ¨¡æ¿çææ½è±¡è¯­æ³æ ï¼ASTï¼ï¼optimize æ è®°éæèç¹ï¼å¨åç»­é¡µé¢æ´æ°æ¶ä¼è·³è¿éæèç¹ï¼generate å°ASTè½¬æ render å½æ°ï¼render å½æ°ç¨äºæå»º VNodeã\n 2. æå»ºVNodeï¼èædomï¼ï¼æå»ºè¿ç¨ä½¿ç¨ createElement æå»º VNodeï¼createElement ä¹æ¯èªå®ä¹ render å½æ°æ¶æ¥åå°çç¬¬ä¸ä¸ªåæ°ã\n 3. VNodeè½¬çå®domï¼patch å½æ°è´è´£å° VNode è½¬æ¢æçå®domï¼æ ¸å¿æ¹æ³æ¯createElmï¼éå½åå»ºçå®domæ ï¼æç»æ¸²æå°é¡µé¢ä¸ã\n\n\n# Vueçå½å¨æ\n\n 1. beforeCreate: å¨å®ä¾åå»ºä¹åè°ç¨ï¼ç±äºå®ä¾è¿æªåå»ºï¼æä»¥æ æ³è®¿é®å®ä¾ä¸ç dataãcomputedãmethodç­ã\n 2. created: å¨å®ä¾åå»ºå®æåè°ç¨ï¼è¿æ¶å·²å®ææ°æ®çè§æµï¼å¯ä»¥è·åæ°æ®åæ´æ¹æ°æ®ï¼ä½è¿æ æ³ä¸domè¿è¡äº¤äºï¼å¦ææ³è¦è®¿é®domï¼å¯ä»¥ä½¿ç¨ vm.$nextTickãæ­¤æ¶å¯ä»¥å¯¹æ°æ®è¿è¡æ´æ¹ï¼ä¸ä¼è§¦å updatedã\n 3. beforeMount: å¨æè½½ä¹åè°ç¨ï¼è¿æ¶çæ¨¡æ¿å·²ç¼è¯å®æå¹¶çærenderå½æ°ï¼åå¤å¼å§æ¸²æãå¨æ­¤æ¶ä¹å¯ä»¥å¯¹æ°æ®è¿è¡æ´æ¹ï¼ä¸ä¼è§¦å updatedã\n 4. mounted: å¨æè½½å®æåè°ç¨ï¼çå®çdomæè½½å®æ¯ï¼å¯ä»¥è®¿é®å°domèç¹ï¼ä½¿ç¨ $refs å±æ§å¯¹domè¿è¡æä½ã\n 5. beforeUpdate: å¨æ´æ°ä¹åè°ç¨ï¼ä¹å°±æ¯ååºå¼æ°æ®åçæ´æ°ï¼èædoméæ°æ¸²æä¹åè¢«è§¦åï¼å¨å½åé¶æ®µè¿è¡æ´æ¹æ°æ®ï¼ä¸ä¼é æéæ¸²æã\n 6. updatedï¼ å¨æ´æ°å®æä¹åè°ç¨ï¼ç»ä»¶domå·²å®ææ´æ°ãè¦æ³¨æçæ¯é¿åå¨æ­¤æé´æ´æ¹æ°æ®ï¼è¿å¯è½ä¼å¯¼è´æ­»å¾ªç¯ã\n 7. beforeDestroyï¼ å¨å®ä¾éæ¯ä¹åè°ç¨ï¼è¿æ¶å®ä¾è¿å¯ä»¥è¢«ä½¿ç¨ï¼ä¸è¬è¿ä¸ªå¨æåå¯ä»¥åæ¸é¤è®¡æ¶å¨ååæ¶äºä»¶çå¬çå·¥ä½ã\n 8. destroyedï¼ å¨å®ä¾éæ¯ä¹åè°ç¨ï¼è¿æ¶å·²æ æ³è®¿é®å®ä¾ãå½åå®ä¾ä»ç¶å®ä¾ä¸­è¢«ç§»é¤ï¼è§æµè¢«å¸è½½ï¼ææäºä»¶çå¬å¨åç§»é¤ï¼å­å®ä¾ä¹ç»ç»è¢«éæ¯ã\n\n> createdæ¶å·²ç»å¯ä»¥è®¿é®å°dataåmethodsäºï¼å¯ä»¥å¨æ­¤æ¶è¿è¡è°ç¨æ¥å£ã\n> \n> mountedæ¯å¯ä»¥è®¿é®å°DOMäºï¼éè¦ç¨å°DOMçæä½å¯ä»¥å¨æ­¤è¿è¡ã\n\n\n# ç¶å­ç»ä»¶çå½å¨æ\n\nå è½½æ¸²æè¿ç¨ï¼\n\n> ç¶beforeCreate->ç¶created->ç¶beforeMount->å­beforeCreate->å­created->å­beforeMount->å­mounted->ç¶mounted\n\nå­ç»ä»¶æ´æ°è¿ç¨ï¼\n\n> ç¶beforeUpdate->å­beforeUpdate->å­updated->ç¶updated\n\nç¶ç»ä»¶æ´æ°è¿ç¨ï¼\n\n> ç¶beforeUpdate->ç¶updated\n\néæ¯è¿ç¨ï¼\n\n> ç¶beforeDestroy->å­beforeDestroy->å­destroyed->ç¶destroyed\n\n\n# vueåreactçå¼å\n\n\n# 1.æ ¸å¿ææ³\n\nvueä¸reacté½æ¨å´ç»ä»¶å¼çå¼åçå¿µï¼ä½æ¯å¨è®¾è®¡çæ ¸å¿ææ³ä¸æå¾å¤§å·®å«ã\n\n\n# vue\n\nvueçæ´ä½ææ³ä»ç¶æ¯æ¥æ±ç»å¸çhtml(ç»æ)+css(è¡¨ç°)+js(è¡ä¸º)çå½¢å¼ï¼vueé¼å±å¼åèä½¿ç¨templateæ¨¡æ¿ï¼å¹¶æä¾æä»¤ä¾å¼åèä½¿ç¨(v-ifãv-showãv-forç­ç­)ï¼å æ­¤å¨å¼åvueåºç¨çæ¶åä¼æä¸ç§å¨åç»å¸webåºç¨ï¼ç»æãè¡¨ç°ãè¡ä¸ºåç¦»ï¼çæè§ãå¦ä¸æ¹é¢ï¼å¨éå¯¹ç»ä»¶æ°æ®ä¸ï¼vue2.0éè¿Object.definePropertyå¯¹æ°æ®åå°äºæ´ç»è´ççå¬ï¼ç²¾åå®ç°ç»ä»¶çº§å«çæ´æ°ã\n\n\n# react\n\nreactæ´ä½ä¸æ¯å½æ°å¼çææ³ï¼ç»ä»¶ä½¿ç¨jsxè¯­æ³ï¼all in jsï¼å°htmlä¸csså¨é½èå¥javaScriptï¼jsxè¯­æ³ç¸å¯¹æ¥è¯´æ´å çµæ´»ï¼æä¸å¼å§åè½¬è¿æ¥ä¹ä¸æ¯å¾éåºï¼æè§åreactåºç¨æè§å°±åæ¯å¨åjavaScriptãå½ç»ä»¶è°ç¨setStateæpropsååçæ¶åï¼ç»ä»¶åé¨renderä¼éæ°æ¸²æï¼å­ç»ä»¶ä¹ä¼éä¹éæ°æ¸²æï¼å¯ä»¥éè¿shouldComponentUpdateæèPureComponentå¯ä»¥é¿åä¸å¿è¦çéæ°æ¸²æï¼ä¸ªäººæè§è¿ä¸ç¹ä¸ä¸å¦vueåçå¥½ï¼ã",normalizedContent:"# é¢è¯é¢ï¼åä¸ï¼\n\n * mvvm\n * vueæ¸²ææµç¨\n * vueçå½å¨æ\n * ç¶å­ç»ä»¶å£°æå¨æ\n * vueåreactçå¼å\n\n\n# mvvm\n\nmvvm å¯¹åº 3ä¸ªç»æé¨åï¼modelï¼æ¨¡åï¼ãviewï¼è§å¾ï¼ å viewmodelï¼è§å¾æ¨¡åï¼ã\n\n * view æ¯ç¨æ·å¨å±å¹ä¸çå°çç»æãå¸å±åå¤è§ï¼ä¹ç§°uiã\n * viewmodel æ¯ä¸ä¸ªç»å®å¨ï¼è½å view å±å model å±è¿è¡éä¿¡ã\n * model æ¯æ°æ®åé»è¾ã\n\nview ä¸è½å model ç´æ¥éä¿¡ï¼å®ä»¬åªè½éè¿ viewmodel éä¿¡ãmodel å viewmodel ä¹é´çäº¤äºæ¯ååçï¼viewmodel éè¿ååæ°æ®ç»å®æ view å±å model å±è¿æ¥èµ·æ¥ï¼å æ­¤ view æ°æ®çååä¼åæ­¥å° model ä¸­ï¼è model æ°æ®çååä¹ä¼ç«å³ååºå° view ä¸ã\n\nä¸¥æ ¼ç mvvm è¦æ± view ä¸è½å model ç´æ¥éä¿¡ï¼è vue å¨ç»ä»¶æä¾äº $refs è¿ä¸ªå±æ§ï¼è®© model å¯ä»¥ç´æ¥æä½ viewï¼è¿åäºè¿ä¸è§å®ã\n\n\n# vueæ¸²ææµç¨\n\næµç¨ä¸»è¦åä¸ºä¸ä¸ªé¨åï¼\n\n 1. æ¨¡æ¿ç¼è¯ï¼parse è§£ææ¨¡æ¿çææ½è±¡è¯­æ³æ ï¼astï¼ï¼optimize æ è®°éæèç¹ï¼å¨åç»­é¡µé¢æ´æ°æ¶ä¼è·³è¿éæèç¹ï¼generate å°astè½¬æ render å½æ°ï¼render å½æ°ç¨äºæå»º vnodeã\n 2. æå»ºvnodeï¼èædomï¼ï¼æå»ºè¿ç¨ä½¿ç¨ createelement æå»º vnodeï¼createelement ä¹æ¯èªå®ä¹ render å½æ°æ¶æ¥åå°çç¬¬ä¸ä¸ªåæ°ã\n 3. vnodeè½¬çå®domï¼patch å½æ°è´è´£å° vnode è½¬æ¢æçå®domï¼æ ¸å¿æ¹æ³æ¯createelmï¼éå½åå»ºçå®domæ ï¼æç»æ¸²æå°é¡µé¢ä¸ã\n\n\n# vueçå½å¨æ\n\n 1. beforecreate: å¨å®ä¾åå»ºä¹åè°ç¨ï¼ç±äºå®ä¾è¿æªåå»ºï¼æä»¥æ æ³è®¿é®å®ä¾ä¸ç dataãcomputedãmethodç­ã\n 2. created: å¨å®ä¾åå»ºå®æåè°ç¨ï¼è¿æ¶å·²å®ææ°æ®çè§æµï¼å¯ä»¥è·åæ°æ®åæ´æ¹æ°æ®ï¼ä½è¿æ æ³ä¸domè¿è¡äº¤äºï¼å¦ææ³è¦è®¿é®domï¼å¯ä»¥ä½¿ç¨ vm.$nexttickãæ­¤æ¶å¯ä»¥å¯¹æ°æ®è¿è¡æ´æ¹ï¼ä¸ä¼è§¦å updatedã\n 3. beforemount: å¨æè½½ä¹åè°ç¨ï¼è¿æ¶çæ¨¡æ¿å·²ç¼è¯å®æå¹¶çærenderå½æ°ï¼åå¤å¼å§æ¸²æãå¨æ­¤æ¶ä¹å¯ä»¥å¯¹æ°æ®è¿è¡æ´æ¹ï¼ä¸ä¼è§¦å updatedã\n 4. mounted: å¨æè½½å®æåè°ç¨ï¼çå®çdomæè½½å®æ¯ï¼å¯ä»¥è®¿é®å°domèç¹ï¼ä½¿ç¨ $refs å±æ§å¯¹domè¿è¡æä½ã\n 5. beforeupdate: å¨æ´æ°ä¹åè°ç¨ï¼ä¹å°±æ¯ååºå¼æ°æ®åçæ´æ°ï¼èædoméæ°æ¸²æä¹åè¢«è§¦åï¼å¨å½åé¶æ®µè¿è¡æ´æ¹æ°æ®ï¼ä¸ä¼é æéæ¸²æã\n 6. updatedï¼ å¨æ´æ°å®æä¹åè°ç¨ï¼ç»ä»¶domå·²å®ææ´æ°ãè¦æ³¨æçæ¯é¿åå¨æ­¤æé´æ´æ¹æ°æ®ï¼è¿å¯è½ä¼å¯¼è´æ­»å¾ªç¯ã\n 7. beforedestroyï¼ å¨å®ä¾éæ¯ä¹åè°ç¨ï¼è¿æ¶å®ä¾è¿å¯ä»¥è¢«ä½¿ç¨ï¼ä¸è¬è¿ä¸ªå¨æåå¯ä»¥åæ¸é¤è®¡æ¶å¨ååæ¶äºä»¶çå¬çå·¥ä½ã\n 8. destroyedï¼ å¨å®ä¾éæ¯ä¹åè°ç¨ï¼è¿æ¶å·²æ æ³è®¿é®å®ä¾ãå½åå®ä¾ä»ç¶å®ä¾ä¸­è¢«ç§»é¤ï¼è§æµè¢«å¸è½½ï¼ææäºä»¶çå¬å¨åç§»é¤ï¼å­å®ä¾ä¹ç»ç»è¢«éæ¯ã\n\n> createdæ¶å·²ç»å¯ä»¥è®¿é®å°dataåmethodsäºï¼å¯ä»¥å¨æ­¤æ¶è¿è¡è°ç¨æ¥å£ã\n> \n> mountedæ¯å¯ä»¥è®¿é®å°domäºï¼éè¦ç¨å°domçæä½å¯ä»¥å¨æ­¤è¿è¡ã\n\n\n# ç¶å­ç»ä»¶çå½å¨æ\n\nå è½½æ¸²æè¿ç¨ï¼\n\n> ç¶beforecreate->ç¶created->ç¶beforemount->å­beforecreate->å­created->å­beforemount->å­mounted->ç¶mounted\n\nå­ç»ä»¶æ´æ°è¿ç¨ï¼\n\n> ç¶beforeupdate->å­beforeupdate->å­updated->ç¶updated\n\nç¶ç»ä»¶æ´æ°è¿ç¨ï¼\n\n> ç¶beforeupdate->ç¶updated\n\néæ¯è¿ç¨ï¼\n\n> ç¶beforedestroy->å­beforedestroy->å­destroyed->ç¶destroyed\n\n\n# vueåreactçå¼å\n\n\n# 1.æ ¸å¿ææ³\n\nvueä¸reacté½æ¨å´ç»ä»¶å¼çå¼åçå¿µï¼ä½æ¯å¨è®¾è®¡çæ ¸å¿ææ³ä¸æå¾å¤§å·®å«ã\n\n\n# vue\n\nvueçæ´ä½ææ³ä»ç¶æ¯æ¥æ±ç»å¸çhtml(ç»æ)+css(è¡¨ç°)+js(è¡ä¸º)çå½¢å¼ï¼vueé¼å±å¼åèä½¿ç¨templateæ¨¡æ¿ï¼å¹¶æä¾æä»¤ä¾å¼åèä½¿ç¨(v-ifãv-showãv-forç­ç­)ï¼å æ­¤å¨å¼åvueåºç¨çæ¶åä¼æä¸ç§å¨åç»å¸webåºç¨ï¼ç»æãè¡¨ç°ãè¡ä¸ºåç¦»ï¼çæè§ãå¦ä¸æ¹é¢ï¼å¨éå¯¹ç»ä»¶æ°æ®ä¸ï¼vue2.0éè¿object.definepropertyå¯¹æ°æ®åå°äºæ´ç»è´ççå¬ï¼ç²¾åå®ç°ç»ä»¶çº§å«çæ´æ°ã\n\n\n# react\n\nreactæ´ä½ä¸æ¯å½æ°å¼çææ³ï¼ç»ä»¶ä½¿ç¨jsxè¯­æ³ï¼all in jsï¼å°htmlä¸csså¨é½èå¥javascriptï¼jsxè¯­æ³ç¸å¯¹æ¥è¯´æ´å çµæ´»ï¼æä¸å¼å§åè½¬è¿æ¥ä¹ä¸æ¯å¾éåºï¼æè§åreactåºç¨æè§å°±åæ¯å¨åjavascriptãå½ç»ä»¶è°ç¨setstateæpropsååçæ¶åï¼ç»ä»¶åé¨renderä¼éæ°æ¸²æï¼å­ç»ä»¶ä¹ä¼éä¹éæ°æ¸²æï¼å¯ä»¥éè¿shouldcomponentupdateæèpurecomponentå¯ä»¥é¿åä¸å¿è¦çéæ°æ¸²æï¼ä¸ªäººæè§è¿ä¸ç¹ä¸ä¸å¦vueåçå¥½ï¼ã",charsets:{cjk:!0}},{title:"æåä»£ç ï¼äºï¼",frontmatter:{title:"æåä»£ç ï¼äºï¼",date:"2020-03-20T09:52:01.000Z",categories:"é¢è¯"},regularPath:"/interview/code-2.html",relativePath:"interview/code-2.md",key:"v-31a181ab",path:"/interview/code-2.html",headers:[{level:2,title:"newç¸å³",slug:"newç¸å³",normalizedTitle:"newç¸å³",charIndex:14},{level:2,title:"Promiseç¸å³",slug:"promiseç¸å³",normalizedTitle:"promiseç¸å³",charIndex:23},{level:2,title:"ä½ç¨åç¸å³",slug:"ä½ç¨åç¸å³",normalizedTitle:"ä½ç¨åç¸å³",charIndex:36},{level:2,title:"thisç¸å³",slug:"thisç¸å³",normalizedTitle:"thisç¸å³",charIndex:45},{level:2,title:"cssç¸å³",slug:"cssç¸å³",normalizedTitle:"cssç¸å³",charIndex:55},{level:2,title:"ååç¸å³",slug:"ååç¸å³",normalizedTitle:"ååç¸å³",charIndex:64},{level:2,title:"æ­£åç¸å³",slug:"æ­£åç¸å³",normalizedTitle:"æ­£åç¸å³",charIndex:72},{level:2,title:"åºæ¯é¢",slug:"åºæ¯é¢",normalizedTitle:"åºæ¯é¢",charIndex:80},{level:3,title:"è§£æurlä¸­",slug:"è§£æurlä¸­",normalizedTitle:"è§£æurlä¸­",charIndex:11110},{level:3,title:"repeatå½æ°",slug:"repeatå½æ°",normalizedTitle:"repeatå½æ°",charIndex:12769},{level:3,title:"æ¾kå¥½æç»©",slug:"æ¾kå¥½æç»©",normalizedTitle:"æ¾kå¥½æç»©",charIndex:13126},{level:3,title:"è¿å¶è½¬æ¢",slug:"è¿å¶è½¬æ¢",normalizedTitle:"è¿å¶è½¬æ¢",charIndex:13614},{level:3,title:"éæºçæ16è¿å¶",slug:"éæºçæ16è¿å¶",normalizedTitle:"éæºçæ16è¿å¶",charIndex:13838},{level:3,title:"16è¿å¶é¢è²è½¬ rgb",slug:"_16è¿å¶é¢è²è½¬-rgb",normalizedTitle:"16è¿å¶é¢è²è½¬ rgb",charIndex:13943},{level:3,title:"æåºæ°ç»æ¾æ°æ±å",slug:"æåºæ°ç»æ¾æ°æ±å",normalizedTitle:"æåºæ°ç»æ¾æ°æ±å",charIndex:14286},{level:3,title:"å¤æ­2çæ´æ°æ¬¡å¹",slug:"å¤æ­2çæ´æ°æ¬¡å¹",normalizedTitle:"å¤æ­2çæ´æ°æ¬¡å¹",charIndex:14638},{level:3,title:"å¯¹è±¡è½¬ä¸ºæ°ç»é®å¼å¯¹",slug:"å¯¹è±¡è½¬ä¸ºæ°ç»é®å¼å¯¹",normalizedTitle:"å¯¹è±¡è½¬ä¸ºæ°ç»é®å¼å¯¹",charIndex:14846},{level:3,title:"å¼æ ¹å·",slug:"å¼æ ¹å·",normalizedTitle:"å¼æ ¹å·",charIndex:14992},{level:3,title:"å¹¶åè¯·æ±æ§å¶",slug:"å¹¶åè¯·æ±æ§å¶",normalizedTitle:"å¹¶åè¯·æ±æ§å¶",charIndex:15033},{level:3,title:"å°è¯éæ°è¯·æ±",slug:"å°è¯éæ°è¯·æ±",normalizedTitle:"å°è¯éæ°è¯·æ±",charIndex:15913},{level:3,title:"loadingå¨ç»",slug:"loadingå¨ç»",normalizedTitle:"loadingå¨ç»",charIndex:17133},{level:3,title:"å®ç°ä¸ä¸ªcashç±»",slug:"å®ç°ä¸ä¸ªcashç±»",normalizedTitle:"å®ç°ä¸ä¸ªcashç±»",charIndex:17556},{level:3,title:"å­ç¬¦ä¸²æ¿æ¢",slug:"å­ç¬¦ä¸²æ¿æ¢",normalizedTitle:"å­ç¬¦ä¸²æ¿æ¢",charIndex:18741},{level:2,title:"å¤æ­å¯¹è±¡ææ²¡æç©ºå¼",slug:"å¤æ­å¯¹è±¡ææ²¡æç©ºå¼",normalizedTitle:"å¤æ­å¯¹è±¡ææ²¡æç©ºå¼",charIndex:19250}],lastUpdated:"3/16/2023, 6:45:18 PM",lastUpdatedTimestamp:1678963518e3,headersStr:"newç¸å³ Promiseç¸å³ ä½ç¨åç¸å³ thisç¸å³ cssç¸å³ ååç¸å³ æ­£åç¸å³ åºæ¯é¢ è§£æurlä¸­ repeatå½æ° æ¾kå¥½æç»© è¿å¶è½¬æ¢ éæºçæ16è¿å¶ 16è¿å¶é¢è²è½¬ rgb æåºæ°ç»æ¾æ°æ±å å¤æ­2çæ´æ°æ¬¡å¹ å¯¹è±¡è½¬ä¸ºæ°ç»é®å¼å¯¹ å¼æ ¹å· å¹¶åè¯·æ±æ§å¶ å°è¯éæ°è¯·æ± loadingå¨ç» å®ç°ä¸ä¸ªcashç±» å­ç¬¦ä¸²æ¿æ¢ å¤æ­å¯¹è±¡ææ²¡æç©ºå¼",content:"# æåä»£ç ï¼äºï¼\n\n * newç¸å³\n * Promiseç¸å³\n * ä½ç¨åç¸å³\n * thisç¸å³\n * cssç¸å³\n * ååç¸å³\n * æ­£åç¸å³\n * åºæ¯é¢\n\n\n# newç¸å³\n\nfunction Person(name) {\n  this.name = name\n  return name\n}\n\nlet p = new Person('Tom')\n// è¿åä»ä¹ Person {name: \"Tom\"}\n\n\nfunction Person(name) {\n  this.name = name\n  return {}\n}\n\nlet p = new Person('Tom')\n// è¿åä»ä¹ {}\n\n\næé å½æ°ä¸éè¦æ¾å¼çè¿åå¼ãä½¿ç¨newæ¥åå»ºå¯¹è±¡(è°ç¨æé å½æ°)æ¶ï¼å¦æreturnçæ¯éå¯¹è±¡(æ°å­ãå­ç¬¦ä¸²ãå¸å°ç±»åç­)ä¼å¿½èç¥è¿åå¼ï¼å¿½ç¥returnï¼;å¦æreturnçæ¯å¯¹è±¡ï¼å¦ææ¯å¯¹è±¡åªä¹å°±ä¼ä¸¢å¤±åæå¯¹è±¡ï¼ï¼åè¿åè¯¥å¯¹è±¡ã\n\n\n# Promiseç¸å³\n\nfunction a() {\n    console.log('a')\n    Promise.resolve().then(() => {\n        console.log('e')\n    })\n}\nfunction b() {\n    console.log('b')\n}\nfunction c() {\n    console.log('c')\n}\nfunction d() {\n    setTimeout(a, 0)\n\n    var temp = Promise.resolve().then(b) \n    setTimeout(c, 0)\n    console.log('d')\n}\n\nd() // d b a e c\n\n\n> æå¸¸è§çé¢è¯é¢\n\nasync function async1(){\n    console.log('async1 start')  //2\n    await async2()               \n    console.log('async1 end')    //6 æ¾å¥äºå¾®éå  \n}                                //    ç¸å½äºasync2.then(()=>{console.log('async1 end')})\nasync function async2(){\n    console.log('async2')       //3\n}\nconsole.log('script start')     //1\nsetTimeout(function(){\n    console.log('setTimeout')   //8\n},0)\nasync1()\nnew Promise(function(resolve){\n    console.log('promise1')     //4\n    resolve()\n}).then(function(){\n    console.log('promise2')    //7   æ¾å¥äºå¾®éå\n})\nconsole.log('script end')     //5\n\n//awaitæ¯ä¸ä¸ªè®©åºçº¿ç¨çæ å¿ãawaitåé¢çè¡¨è¾¾å¼ä¼åæ§è¡ä¸éï¼å°await åé¢çä»£ç å å¥å°microtaskä¸­ï¼ç¶åå°±ä¼è·³åºæ´ä¸ªasyncå½æ°æ¥æ§è¡åé¢çä»£ç \nscript start\nasync1 start\nasync2\npromise1\nscript end\nasync1 end\npromise2\nsetTimeout\n\n\n> ä¸é¢åå½¢\n\nasync function async1() {\n    console.log('async1 start')\n    await async2() \n    console.log('async1 end')\n}\nasync function async2() {\n    console.log('async2 start')\n    return new Promise((resolve, reject) => {\n        resolve()\n        console.log('async2 promise')\n    })\n}\nconsole.log('script start')\nsetTimeout(function() {\n    console.log('setTimeout')\n}, 0)\nasync1()\nnew Promise(function(resolve) {\n    console.log('promise1')\n    resolve()\n}).then(function() {\n    console.log('promise2')\n}).then(function() {\n    console.log('promise3')\n})\nconsole.log('script end')\n\n/**\nscript start\nasync1 start\nasync2 start\nasync2 promise\npromise1\nscript end\npromise2\npromise3\nasync1 end     æ³¨æè¿é async æ¾ç¤ºè¿åäº promise ï¼æåæ§è¡\nsetTimeout\n*/\n\n\n> å¾®ä»»å¡éåå ä¸ä¸ªå¾®ä»»å¡\n\nconsole.log(1);\nsetTimeout(() => {\n  console.log(2);\n});\nnew Promise(resolve => {\n  console.log(5);\n  resolve();\n  console.log(6);\n}).then(() => {\n  console.log(7);\n});\nPromise.resolve().then(() => {\n  console.log(8);\n  process.nextTick(() => {\n    console.log(9);\n  });\n});\n// 1 5 6 7 8 9 2\n\n\n> è®¾è®¡ä¸ä¸ª defer å½æ°ï¼å®ç°defer(3000).then(res => { // 30ms åæ§è¡ }) ;\n> \n> åæï¼å»¶æ¶å½æ°\n\nfunction defer(time) {\n    return new Promise((resolve, reject) => {\n        setTimeout(() => {\n            resolve(1)\n        }, time)\n    })\n}\n\ndefer(3000).then(res => {\n    console.log(res)\n})\n// æè\nfunction defer(time) {\n    return new Promise((resolve, reject) => {\n        setTimeout(resolve, time, 1)\n    })\n}\n\ndefer(3000).then(res => {\n    console.log(res)\n})\n\n\n> æ¹ååè°\n\nsetTimeout(() => {\n    console.log(1)\n    setTimeout(() => {\n        console.log(2)\n        setTimeout(() => {\n            console.log(3)\n        }, 3000)\n    }, 2000)\n}, 1000)\n\n// promise æ¹å\nlet fn = (value, time) => {\n    return new Promise((resolve, reject) => {\n        setTimeout(() => {\n            console.log(value)\n            resolve()\n        }, time)\n    })\n}\nfn(1, 1000).then(() => fn(2, 2000)).then(() => fn(3, 3000))\n\n// async await æ¹å\nasync function todo() {\n    await fn(1, 1000)\n    await fn(2, 2000)\n    await fn(3, 3000)\n}\ntodo()\n\n\n> äº¤æ¿æ§è¡\n\nPromise.resolve().then(() => {\n    console.log('a')\n}).then(() => {\n    console.log('b')\n}).then(() => {\n    console.log('c')\n}).then(() => {\n    console.log('d')\n}).then(() => {\n    console.log('e')\n})\n\nPromise.resolve().then(() => {\n    console.log(1)\n}).then(() => {\n    console.log(2)\n}).then(() => {\n    console.log(3)\n}).then(() => {\n    console.log(4)\n}).then(() => {\n    console.log(5)\n})\n\n// a 1 b 2 c 3 d 4 e 5\n\n\nPromise.resolve().then(() => {\n    console.log(0)\n    return Promise.resolve(4)\n  \t/**\n  \t\tç¸å½äºè¿éå¤äºä¸¤ä¸ªå¾®ä»»å¡ï¼ç¶åäº¤æ¿æ§è¡\n  \t\tå ä¸ºè¿åå¼å¯è½æ¯ Promise çåµå¥ï¼å½å then ä¸å®éå½è®¡ç®å®çæç»å¼ï¼ä¼ ç»ä¸ä¸ä¸ª then çåè°\n  \t*/\n}).then(res => {\n    console.log(res)\n})\n\nPromise.resolve().then(() => {\n    console.log(1)\n}).then(() => {\n    console.log(2)\n}).then(() => {\n    console.log(3)\n}).then(() => {\n    console.log(5)\n}).then(() => {\n    console.log(6)\n})\n\n// 0 1 2 3 4 5 6\n\n\nconsole.log(1); \nsetTimeout(() => {\n  console.log(2);\n});\nnew Promise(resolve => {\n  console.log(3);\n  resolve('resolve');\n  console.log(4);\n  reject('error')\n}).catch((err) => {\n  console.log(err);\n}).then((res) => {\n  console.log(res)\n});\nPromise.resolve().then(() => {\n  console.log(5);\n});\nconsole.log(6);\n\n// 1 3 4 6 5 resolve 2\n\n\nsetTimeout(() => {\n    console.log(\"setTimeout\");\n});\nconsole.log(1);\nnew Promise(function(resolve, reject) {\n    console.log(2);\n    for (var i = 0; i < 1000; i ++) {\n        if (i === 10) {\n            console.log(10);\n        }\n        if (i === 999) {\n            resolve(999);\n        }\n    }\n    console.log(3); // resolveåé¢çä»£ç ä¾æ§ä¼æ§è¡\n}).then((val) => {\n    console.log(val);\n});\nconsole.log(4);\n\n// 1 2 10 3 4 999 setTimeout\n\n\n\n# ä½ç¨åç¸å³\n\nvar length = 10;\nfunction fn() {\n    return this.length+1;\n}\nvar obj = {\n    length: 5,\n    test1: function() {\n        return fn();\n    }\n};\nobj.test2 = fn;\nconsole.log(obj.test1()) // 11\nconsole.log(fn() === obj.test1()) // true\n\n\n\nvar a = function () { \n    this.b =3\n}\nvar c = new a()\na.prototype.b = 9\nvar b = 7\na()\nconsole.log(b) // 3\nconsole.log(c.b) // 3\n\n\n\nvar obj1 = (function() {\n  var inner = '1-1';\n  return {\n    inner: '1-2',\n    say: function() {\n      console.log(inner); \n      console.log(this.inner);\n    }\n  }\n})();\n\nvar obj2 = { inner: '2-1' }\ndebugger\nobj1.say(); // 1-1, 1-2\nobj2.say = obj1.say;\nobj2.say(); // 1-1, 2-1\n\nvar a = 3\n(function (){\n    console.log(a)\n    var a = 4;\n})()\n// Uncaught TypeError: 3 is not a function\n\nvar a = 3;\n(function (){\n    console.log(a)\n    var a = 4;\n})()\n// undefined\n\n\nvar name = '123';\nvar obj = {\n   name: '456',\n   getName: function () {\n       function printName () {\n           console.log(this.name);\n       }\n       printName();\n   }\n}\nobj.getName(); // 123\n\n\n\nvar obj = {\n    say: function () {\n        var f1 = () => {\n            console.log(this)\n        }\n        f1()\n    },\n    pro: {\n        getPro: () => {\n            console.log(this)\n        }\n    }\n}\nvar o = obj.say\no() // window\nobj.say() // obj\nobj.pro.getPro() // window\n\n\nfunction a(b, c) {\n    var b;\n    alert(b); // 1\n}\na(1, 2);\n\n\nfor (var i = 0; i < 5; i++) {\n    setTimeout(function() {\n        console.log(i)\n    }, 1000 * i)\n}\n// æ¯éä¸ç§è¾åºä¸æ¬¡ 5ï¼æ¶é´ä¸­çiä½ä¸ºåæ°æåä¼ äºè¿å»ï¼å®æ¶å¨å å¥éåï¼æåæ§è¡çæ¶åä»ä½ç¨åæ¾iï¼ä¸º5\n\nfor (var i = 0; i < 5; i++) {\n    (function(i) {\n        setTimeout(function() {\n            console.log(i)\n        }, 1000 * i)\n    })(i)\n}\n// è¾åº0ï¼1ï¼2ï¼3ï¼4ï¼é­åï¼içå¼ä¼ä¿å­ä¸æ¥\n\nfor (var i = 0; i < 5; i++) {\n    (function() {\n        setTimeout(function() {\n            console.log(i)\n        }, 1000 * i)\n    })(i)\n}\n// æ¯éä¸ç§è¾åºä¸æ¬¡ 5ï¼içå¼æ²¡æä¼ è¿å»\n\n\n\n# thisç¸å³\n\nfunction Person() {  \n    this.age = 0;  \n    setTimeout(() => {\n        this.age++; // æå Person\n    }, 3000);\n}\nvar p = new Person();\n\n\nfunction Person() {  \n    this.age = 0\n    setTimeout(function() {\n        console.log(this) // æå window\n    }, 3000)\n}\nvar p = new Person();\n\n// é¡ºä¾¿å¤ä¹ ä»¥ä¸ç®­å¤´å½æ°è¯­æ³\nvar func1 = x => x;\nvar func2 = x => {x};\nvar func3 = x => ({x});\nconsole.log(func1(1)); // 1\nconsole.log(func2(1)); // undefined\nconsole.log(func3(1)); // {x: 1}\n\n\nconst fn = () => {\nthis.x = 'z';\n};\n\nconst b = {x: 'y'};\nfn.call(b);\nconsole.log(b); // {x: 'y'};\n\n\n\n# cssç¸å³\n\n<div class=\"lightblue\">\n   <div class=\"darkblue\">\n      <p>1. é¢è²æ¯ï¼</p> \x3c!-- æ·±è ï¼pæ²¡è®¾ç½®ï¼ç»§æ¿ä¸é¢ç--\x3e\n   </div>\n</div>\n<div class=\"darkblue\">\n   <div class=\"lightblue\">\n      <p>2. é¢è²æ¯ï¼</p> \x3c!-- æµè --\x3e\n   </div>\n</div>\n.lightblue { color: lightblue; }\n.darkblue { color: darkblue; }\n\n\x3c!-------------------------------------------\x3e\n\n<div class=\"lightblue\"> \n   <div class=\"darkblue\"> \x3c!-- æ·±è --\x3e\n      <p>1. é¢è²æ¯ï¼</p>\n   </div>\n</div>\n<div class=\"darkblue\">\n   <div class=\"lightblue\"> \x3c!-- æ·±è --\x3e\n      <p>2. é¢è²æ¯ï¼</p>\n   </div>\n</div>\n.lightblue p { color: lightblue; } \x3c!-- ä¼åçº§ç¸åé½æ¯10 + 1ï¼åå¨åé¢çè¦çåå¨åé¢ç --\x3e\n.darkblue p { color: darkblue; }\n\n\n<style>\n    .green {\n        background-color: green;\n    }\n\n    .red {\n        background-color: red;\n    }\n\n    .blue {\n        background-color: blue;\n    }\n</style>\n<body>\n    <div class=\"green blue red\">\n        fsdfasdfasd\n    </div>\n</body>\n\n\x3c!-- èè² --\x3e\n\n\n\n# ååç¸å³\n\nfunction Animal() {}\nvar cat = new Animal();\nAnimal.prototype = {bark: true}; // ç ´åäºååé¾\nvar dog = new Animal();\nconsole.log(cat.bark); // undefined\nconsole.log(dog.bark); // true\n\n\nfunction Animal() {}\nvar cat = new Animal();\nAnimal.prototype.bark = true;\nvar dog = new Animal();\nconsole.log(cat.bark); // true\nconsole.log(dog.bark); // true\n\nfunction Person(name) {\n\tthis.name = name;\n}\nPerson.prototype.print = function() {\n\treturn this.name;\n};\n\nconst a = new Person('abc').print.call({});\nconsole.log(a); // undefined\n\n\n// æä¹å®ç°ä¸ä¸ªå¤éç»§æ¿ããå¯ä»¥å¨ä¸ä¸ªobjectå¯¹è±¡å³å¯ä»¥è¾åºM1çhelloä¹å¯ä»¥è¾åºM2.world\nfunction M1() {\nthis.hello = 'hello';\n}\n\nfunction M2() {\nthis.world = 'world';\n}\n\n// é¦åè®© M2 ç»§æ¿ M1\nM2.prototype = new M1()\n\nlet obj = {}\nobj.__proto__ = new M2()\n\nconsole.log(obj.hello, obj.world) // hello world\n\n\nFunction.prototype.a = () => console.log(1); \nObject.prototype.b = () => console.log(2); \nfunction A() {} const a = new A(); \na.a(); // a.a is not a function\na.b(); // 2\n\na.__proto__.__proto__ === A.prototype.__proto__ === Object.prototype\nA.__proto__.__proto__ === Function.prototype.__proto__ === Object.prototype\n\n\n// åä¸pãParentãFunctionãObjectçååé¾\nfunction Parent() {}\nvar p = new Parent()\n\nconsole.log(p.__proto__ === Parent.prototype) // true\nconsole.log(Parent.__proto__ === Function.prototype) // true\nconsole.log(Parent.prototype.__proto__ === Object.prototype) // true\nconsole.log(Function.prototype.__proto__ === Object.prototype) // true\nconsole.log(Object.__proto__ === Function.prototype) // true\n\n\n\n# æ­£åç¸å³\n\n * æ­£åä¸­éè¦è½¬ä¹çå­ç¬¦ï¼* . ? + $ ^ [ ] ( ) { } | \\ /\n\nvar a = 'hi, my name is {name}, I am {age} years old, my email is {email}.';\nvar b = {name:'max', age: 12, email: 'max@gmail.com'};\n\n\nfunction replace(tpl, data){\n    return tpl.replace(/\\{(\\w+)\\}/g, (matchStr, group) => data[group])\n}\n\n\n// ä¸åçº¿è½¬æ¢é©¼å³°\nconst toHump = str => {\n    return str.replace(/\\_(\\w)/g, (matchStr, group) => group.toUpperCase())\n}\n\n// é©¼å³°è½¬æ¢ä¸åçº¿\nconst toLine = str => {\n    return str.replace(/([A-Z])/g, (matchStr, group) => `_${group.toLowerCase()}`)\n}\n\n\n\n# åºæ¯é¢\n\n> ç¬è«å¨ç¬åé¡µé¢åï¼éè¦å¯¹urlåè¡¨è¿è¡æ ååï¼å®ç°ä¸ä¸ªå¤çurlåè¡¨çå½æ°-å¯¹ç¼ºå°httpåç¼çurlæ·»å åç¼ï¼è¿åçurlä¸è½éå¤\n> \n> [\"nodejs.org\", \"http://nodejs.org\", \"http://bytedance.com\"] => [\"http://nodejs.org\", \"http://bytedance.com\"]\n\nfunction formaturl(urllist){\n    const res = []\n    for (let i in urllist) {\n        const reg = /^http:\\/\\//\n        const url = urllist[i]\n        const newUrl = reg.test(url) ? url : `http://${url}`\n        if (!res.includes(newUrl)) {\n            res.push(newUrl)\n        }\n    }\n    return res\n}\n\n\n\n# è§£æurlä¸­\n\nåæ°ä¸ºå¯¹è±¡ï¼èè key éå¤ï¼æ²¡æ val å è½¬ç \n\n// https://weibo.com/u/1627615060/home?wvr=5&from_outside&key=12&key=4&l=%E4%BB%8A%E6%97%A5%E7%89%B9%E5%8D%96\n\nconst getQuery = url => {\n    let query = {}\n    if (url.includes(\"?\")) {\n        const str = url.split(\"?\")[1]\n        const params = str.split(\"&\")\n        for(let i = 0; i < params.length; i++) {\n            let key = null, val = null\n            if (params[i].includes(\"=\")) {\n                key = params[i].split(\"=\")[0]\n                val = decodeURIComponent(params[i].split(\"=\")[1])\n            } else {\n                key = params[i]\n                val = null\n            }\n            if (query[key]) {\n                Array.isArray(query[key]) ?\n                    query[key].push(val) : query[key] = [query[key], val]\n            } else {\n                query[key] = val\n            }\n        }\n    }\n    return query\n}\n\n\n> å®ç°å¦ä¸ææu.console(\"hello\").settimeout(3000).console(\"world\").settimeout(3000).console(\"hah\").settimeout(0).console(\"111\")ï¼é¦åè¾åºhelloï¼3såè¾åºworld,åé´é3s,åè¾åº\n\n// èç¹ this æ¯ç«å³è¿åçï¼setTimeout å å¥ä»»å¡éåï¼æ¶é´éè¦ç´¯å è®¡ç®\nclass U {\n    constructor() {\n        this.time = null\n        this.totalTime = 0\n    }\n\n    console(val) {\n        if (this.time === null) {\n            console.log(val)\n        } else {\n            this.totalTime += this.time\n            setTimeout(() => {\n                console.log(val)\n            }, this.totalTime)\n        }\n        return this\n    }\n\n    settimeout(time) {\n        this.time = time\n        return this\n    }\n}\n\nlet u = new U()\nu.console(\"hello\").settimeout(3000).console(\"world\").settimeout(3000).console(\"hah\").settimeout(0).console(\"111\")\n\n\n\n# repeatå½æ°\n\n> ä½¿ä¸é¢è°ç¨ä»£ç è½æ­£å¸¸å·¥ä½ const repeatFunc = repeat(console.log, 4, 3000); repeatFunc(\"helloworld\") //ä¼è¾åº4æ¬¡ helloworld, æ¯æ¬¡é´é3ç§\n\n// éè¦å®ç°çå½æ°\nfunction repeat (func, times, wait) {\n    return function() {\n        for (let i = 1; i <= times; i++) {\n            setTimeout(() => {\n                func(...arguments)\n            }, wait * i)\n        }\n    }\n}\n\n\n\n# æ¾kå¥½æç»©\n\n> ä»ä¸ä¸ªåå«å­¦çæç»©æ°ç»çä¸­æ¾å°æç»©ç¬¬kå¥½çææå­¦ççid, å­¦çä¿¡æ¯å¦ä¸ï¼[{score:89,id:1}, {score:23,id:4}]ã\n\nconst findK = (arr, k) => {\n    const store = Array.from(new Array(101), () => new Array())\n    for (let i = 0; i < arr.length; i++) {\n        store[arr[i].score].push(arr[i].id)\n    }\n    let count = 0\n    for (let i = 100; i >= 0; i--) {\n        if (!store[i].length) continue\n        count++\n        if (k === count) return store[i]\n    }\n}\n\n// æ³¨ï¼åå»ºäºç»´æ°ç»æ¶ï¼åä¸ä¸è¦ new Array(101).fill([]), [] æåçé½æ¯åä¸ä¸ª\n\n\n\n# è¿å¶è½¬æ¢\n\nfunction mulBase(num, base){\n    let str = \"\"\n    while (num !== 0) {\n        str += num % base\n        num = Math.floor(num / base)\n    }\n    return str.split('').reverse().join('')\n}\nconsole.log(mulBase(64,8));\n\n\n\n# éæºçæ16è¿å¶\n\nfunction geneHex() {\n  return \"#\" + Math.floor((Math.random() * 0xFFFFFF)).toString(16)\n}\n\n\n\n# 16è¿å¶é¢è²è½¬ rgb\n\nfunction hex2rgb(hex) {\n    const str = hex.slice(1),\n        res = []\n    if (str.length === 3) {\n        for (const w of str) {\n            res.push(parseInt(w + w, 16))\n        }\n    } else {\n        for (let i = 0; i < 6; i += 2) {\n            res.push(parseInt(str[i] + str[i + 1], 16))\n        }\n    }\n    return res\n}\n\n\n\n# æåºæ°ç»æ¾æ°æ±å\n\n> è¾å¥ï¼[1,2,3,4,5]ï¼ 6\n\n * åæé\n\nfunction foo(arr, target) {\n    let left = 0, right = arr.length - 1\n    while (left < right) {\n        if (arr[left] + arr[right] > target) {\n            right --\n        } else if (arr[left] + arr[right] === target) {\n            return [left, right]\n        } else {\n            left ++\n        }\n    }\n}\n\n\n\n# å¤æ­2çæ´æ°æ¬¡å¹\n\n// 2: 10, 4: 100, 8: 1000, 16: 10000\n// å¯ä»¥åç°2çæ´æ°æ¬¡å¹é½æ¯1åé¢è·çè®¸å¤0ï¼å¦æå1åå«å¯¹åº\n// 1: 01, 3: 011, 7: 0111, 15: 01111\n// å¦æä½ä¸è¿ç®ï¼2 & 1 == 0ï¼4 & 3 == 0\nfunction judge(num) {\n  return (num&(num - 1)) == 0\n}\n\n\n\n# å¯¹è±¡è½¬ä¸ºæ°ç»é®å¼å¯¹\n\n{\n  name: 'A',\n\tage: 10\n}\n// è½¬æ¢ä¸º\n[\n  {\n        key: 'name',\n        value: 'A'\n\t},\n\t{\n        key: 'age',\n        value: 10\n  }\n]\n\n\n\n# å¼æ ¹å·\n\nè¦æ±ä½æ° 0.0001ï¼èè 0 - 1 å¼æ ¹å·è¶æ¥è¶å¤§\n\n\n\n\n\n# å¹¶åè¯·æ±æ§å¶\n\nfunction multiRequest(urls = [], maxNum) {\n    const len = urls.length\n    const result = new Array(len).fill(false)\n    let count = 0\n\n    return new Promise((resolve, reject) => {\n        while (count < maxNum) {\n            next()\n        }\n        function next() {\n            let current = count++\n            if (current >= len) {\n                !result.includes(false) && resolve(result)\n                return\n            }\n            const url = urls[current]\n            fetch(url)\n                .then((res) => {\n                    result[current] = res\n                    if (current < len) {\n                        next()\n                    }\n                })\n            .catch((err) => {\n                result[current] = err\n                if (current < len) {\n                    next()\n                }\n            })\n        }\n    })\n}\n\n\n\n# å°è¯éæ°è¯·æ±\n\nfunction requestRetry (url, retryNum) {\n    return request(url).catch(e => {\n        if (retryNum) {\n            return requestRetry(url, --retryNum)\n        } else {\n            return Promise.reject(e)\n        }\n    })\n}\n\n\nå¤±è´¥æµè¯\n\nfunction tryRequest(request, times = 3) {\n    return request().catch(e => {\n        if (times) {\n            console.log('æ­£å¨éè¯')\n            return tryRequest(request, --times)\n        } else {\n            return Promise.reject(e)\n        }\n    })\n}\n\nfunction request() {\n    return new Promise((resolve, reject) => {\n        setTimeout(() => {\n            reject('error')\n        }, 1000)\n    })\n}\n\ntryRequest(request, 3).then(console.log).catch(console.log)\n\n// æ­£å¨éè¯\n// æ­£å¨éè¯\n// æ­£å¨éè¯\n// error\n\n\næåæµè¯\n\nfunction tryRequest(request, times = 3) {\n    return request().catch(e => {\n        if (times) {\n            console.log('æ­£å¨éè¯')\n            return tryRequest(request, --times)\n        } else {\n            return Promise.reject(e)\n        }\n    })\n}\n\nfunction request() {\n    return new Promise((resolve, reject) => {\n        setTimeout(() => {\n            resolve('success')\n        }, 1000)\n    })\n}\n\ntryRequest(request, 3).then(console.log).catch(console.log) // success\n\n\n\n# loadingå¨ç»\n\n> vueé¡¹ç®ä¸­ï¼loadingæ§å¶é¡µé¢å è½½å¨ç»ï¼sortæ¯ä¸ä¸ªæ¶èæ¶é´çæåºæä½ï¼é®loadingå¨ç»ä¼æ¾ç¤ºåï¼\n\nthis.loading = true\nthis.data.sort()\nthis.loading = false\n\n// ç­ï¼ä¸ä¼ï¼vueæ´æ°è§å¾æ¯å¼æ­¥çï¼è½ç¶sortæ¶èæ¶é´ï¼è¿æ¯ä¼æloadingæ°æ®çæ¹åç¼å²ä¸ºä¸æ¬¡\n\nthis.loading = true // å®\nthis.$nextTick(() => { // å¾®\n  this.data.sort()\n  this.loading = false\n})\n\n// è¿æ¯ä¸ä¼ï¼$nextTickä¼åä½¿ç¨å¾®ä»»å¡ï¼å® => å¾® => uiæ¸²æ\n\nthis.loading = true\nsetTimeout(() => {\n  this.data.sort()\n  this.loading = false\n}, 5000)\n// ä¼\n\n\n\n# å®ç°ä¸ä¸ªcashç±»\n\n//å®ç°ä¸ä¸ª Cash ç±»ï¼æææ§è¡ä¸é¢ä»£ç ï¼\nconst cash1 = new Cash(105);\nconst cash2 = new Cash(66);\nconst cash3 = cash1.add(cash2);\nconst cash4 = Cash.add(cash1, cash2);\nconst cash5 = new Cash(cash1 + cash2); // èè valueOf\nconsole.log(`${cash3}`, `${cash4}`, `${cash5}`); // èè toString\n// 1å7è§1å 1å7è§1å 1å7è§1å\n\n\n// åä¹ååå¤ä¹ ä¸ä¸ valueOf å toString\nconst a = {\n    val: 1,\n    valueOf() {\n        console.log('valueOf')\n        return this.val\n    },\n    toString() {\n        console.log('toString')\n        return this.val\n    }\n}\nconsole.log(a) // {val: 1, valueOf: Æ, toString: Æ}\nconsole.log(a + \"\") // valueOf 1\nconsole.log(a + 1) // valueOf 2\nconsole.log(a + {}) // valueOf 1[object Object]\nconsole.log(`${a}`) // toString 1\n\n\nclass Cash {\n    constructor(num) {\n        this.num = num\n    }\n    add(c1) {\n        return new Cash(this + c1)\n    }\n    static add(c1, c2) {\n        return new Cash(c1 + c2)\n    }\n    // valueOf ç¨äºå¤ç new Cash(cash1 + cash2)\n    valueOf() {\n        return this.num\n    }\n    // toString ç¨äºå¤ç cash3 => `${cash3}`\n    toString() {\n        this.sum=`${this.num}`\n        return `${this.sum[0]}å${this.sum[1]}è§${this.sum[2]}å`\n    }\n}\n\n\nclassä¸­staticæ¹æ³ä¸­çthisæååªé\n\n\n# å­ç¬¦ä¸²æ¿æ¢\n\n\"ababab\".match(/a.*b/) // \"ababab\"ï¼.æ¯ä»»æå­ç¬¦ï¼è´ªå©ªå¹éï¼å°½å¯è½å¤çå¹é\n\"ababab\".match(/a.*?b/) // \"ab\"ï¼éè´ªå©ªï¼å°½å¯è½å°çå¹é\n\n\nconst template = \"{{name }}å¾ånameå®³ï¼æ{{age }}å²\"\nconst context = { name: \"jawil\", age: \"15\" }\n\n// vue æå¼è¡¨è¾¾å¼\nfunction fn(template, context) {\n    return template.replace(/\\{\\{(.*?)\\}\\}/g, (matchStr, group) => {\n        return context[group.trim()]\n    })\n}\n\n// es6æ¨¡æ¿å­ç¬¦ä¸²\nfunction replaceStr(str, obj) {\n    return str.replace(/\\$\\{(.*?)\\}/g, (matchStr, group) => {\n        return obj[group]\n    })\n}\n\n\n\n# å¤æ­å¯¹è±¡ææ²¡æç©ºå¼\n\n> å¤æ­ä¸ä¸ªå¯¹è±¡æ²¡æç©ºå±æ§ï¼undefinedã nullï¼\n\n// æµè¯ç¨ä¾\nconst obj1 = {\n  prop1:{\n    subProp1: 0,\n    subPorp2: undefined,\n    subProp3: {\n      pp1: 123,\n      pp2: \"\"\n    },\n\t},\n\tprop2:\"test\"\n}\n\n// éå½\nfunction hasEmptyProp(obj){\n    for (let key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            if (obj[key] === null || obj[key] === undefined) {\n                return true\n            } else if (typeof obj[key] === 'object') {\n                if (hasEmptyProp(obj[key])) {\n                    return true\n                }\n            }\n        }\n    }\n    return false\n}\n\n// è¿ç§ä¸ºä»ä¹ä¸å¯¹ï¼return æ¯ç®­å¤´å½æ°åé¨ç returnï¼æä»¥æ´ä½å½æ°ä¼ä¸ç´è¿å false\nfunction hasEmptyProp(obj){\n    Object.keys(obj).forEach(key => {\n      \tif (obj[key] === null || obj[key] === undefined) {\n          return true\n        } else if (typeof obj[key] === 'object') {\n          if (hasEmptyProp(obj[key])) {\n            return true\n          }\n        }\n    })\n    return false\n}\n\n// ééå½ï¼å¯¹è±¡å¯ä»¥çè§£ä¸ºæ ï¼ç¨å¹¿åº¦ä¼åçææ³\nfunction hasEmptyProp(obj){\n    const queue = [obj]\n    while (queue.length) {\n        let prop = queue.shift()\n        if (prop === null || prop === undefined) {\n            return true\n        } else if (typeof prop === 'object') {\n            for (let key in prop) {\n                queue.push(prop[key])\n            }\n        }\n    }\n    return false\n}\n",normalizedContent:"# æåä»£ç ï¼äºï¼\n\n * newç¸å³\n * promiseç¸å³\n * ä½ç¨åç¸å³\n * thisç¸å³\n * cssç¸å³\n * ååç¸å³\n * æ­£åç¸å³\n * åºæ¯é¢\n\n\n# newç¸å³\n\nfunction person(name) {\n  this.name = name\n  return name\n}\n\nlet p = new person('tom')\n// è¿åä»ä¹ person {name: \"tom\"}\n\n\nfunction person(name) {\n  this.name = name\n  return {}\n}\n\nlet p = new person('tom')\n// è¿åä»ä¹ {}\n\n\næé å½æ°ä¸éè¦æ¾å¼çè¿åå¼ãä½¿ç¨newæ¥åå»ºå¯¹è±¡(è°ç¨æé å½æ°)æ¶ï¼å¦æreturnçæ¯éå¯¹è±¡(æ°å­ãå­ç¬¦ä¸²ãå¸å°ç±»åç­)ä¼å¿½èç¥è¿åå¼ï¼å¿½ç¥returnï¼;å¦æreturnçæ¯å¯¹è±¡ï¼å¦ææ¯å¯¹è±¡åªä¹å°±ä¼ä¸¢å¤±åæå¯¹è±¡ï¼ï¼åè¿åè¯¥å¯¹è±¡ã\n\n\n# promiseç¸å³\n\nfunction a() {\n    console.log('a')\n    promise.resolve().then(() => {\n        console.log('e')\n    })\n}\nfunction b() {\n    console.log('b')\n}\nfunction c() {\n    console.log('c')\n}\nfunction d() {\n    settimeout(a, 0)\n\n    var temp = promise.resolve().then(b) \n    settimeout(c, 0)\n    console.log('d')\n}\n\nd() // d b a e c\n\n\n> æå¸¸è§çé¢è¯é¢\n\nasync function async1(){\n    console.log('async1 start')  //2\n    await async2()               \n    console.log('async1 end')    //6 æ¾å¥äºå¾®éå  \n}                                //    ç¸å½äºasync2.then(()=>{console.log('async1 end')})\nasync function async2(){\n    console.log('async2')       //3\n}\nconsole.log('script start')     //1\nsettimeout(function(){\n    console.log('settimeout')   //8\n},0)\nasync1()\nnew promise(function(resolve){\n    console.log('promise1')     //4\n    resolve()\n}).then(function(){\n    console.log('promise2')    //7   æ¾å¥äºå¾®éå\n})\nconsole.log('script end')     //5\n\n//awaitæ¯ä¸ä¸ªè®©åºçº¿ç¨çæ å¿ãawaitåé¢çè¡¨è¾¾å¼ä¼åæ§è¡ä¸éï¼å°await åé¢çä»£ç å å¥å°microtaskä¸­ï¼ç¶åå°±ä¼è·³åºæ´ä¸ªasyncå½æ°æ¥æ§è¡åé¢çä»£ç \nscript start\nasync1 start\nasync2\npromise1\nscript end\nasync1 end\npromise2\nsettimeout\n\n\n> ä¸é¢åå½¢\n\nasync function async1() {\n    console.log('async1 start')\n    await async2() \n    console.log('async1 end')\n}\nasync function async2() {\n    console.log('async2 start')\n    return new promise((resolve, reject) => {\n        resolve()\n        console.log('async2 promise')\n    })\n}\nconsole.log('script start')\nsettimeout(function() {\n    console.log('settimeout')\n}, 0)\nasync1()\nnew promise(function(resolve) {\n    console.log('promise1')\n    resolve()\n}).then(function() {\n    console.log('promise2')\n}).then(function() {\n    console.log('promise3')\n})\nconsole.log('script end')\n\n/**\nscript start\nasync1 start\nasync2 start\nasync2 promise\npromise1\nscript end\npromise2\npromise3\nasync1 end     æ³¨æè¿é async æ¾ç¤ºè¿åäº promise ï¼æåæ§è¡\nsettimeout\n*/\n\n\n> å¾®ä»»å¡éåå ä¸ä¸ªå¾®ä»»å¡\n\nconsole.log(1);\nsettimeout(() => {\n  console.log(2);\n});\nnew promise(resolve => {\n  console.log(5);\n  resolve();\n  console.log(6);\n}).then(() => {\n  console.log(7);\n});\npromise.resolve().then(() => {\n  console.log(8);\n  process.nexttick(() => {\n    console.log(9);\n  });\n});\n// 1 5 6 7 8 9 2\n\n\n> è®¾è®¡ä¸ä¸ª defer å½æ°ï¼å®ç°defer(3000).then(res => { // 30ms åæ§è¡ }) ;\n> \n> åæï¼å»¶æ¶å½æ°\n\nfunction defer(time) {\n    return new promise((resolve, reject) => {\n        settimeout(() => {\n            resolve(1)\n        }, time)\n    })\n}\n\ndefer(3000).then(res => {\n    console.log(res)\n})\n// æè\nfunction defer(time) {\n    return new promise((resolve, reject) => {\n        settimeout(resolve, time, 1)\n    })\n}\n\ndefer(3000).then(res => {\n    console.log(res)\n})\n\n\n> æ¹ååè°\n\nsettimeout(() => {\n    console.log(1)\n    settimeout(() => {\n        console.log(2)\n        settimeout(() => {\n            console.log(3)\n        }, 3000)\n    }, 2000)\n}, 1000)\n\n// promise æ¹å\nlet fn = (value, time) => {\n    return new promise((resolve, reject) => {\n        settimeout(() => {\n            console.log(value)\n            resolve()\n        }, time)\n    })\n}\nfn(1, 1000).then(() => fn(2, 2000)).then(() => fn(3, 3000))\n\n// async await æ¹å\nasync function todo() {\n    await fn(1, 1000)\n    await fn(2, 2000)\n    await fn(3, 3000)\n}\ntodo()\n\n\n> äº¤æ¿æ§è¡\n\npromise.resolve().then(() => {\n    console.log('a')\n}).then(() => {\n    console.log('b')\n}).then(() => {\n    console.log('c')\n}).then(() => {\n    console.log('d')\n}).then(() => {\n    console.log('e')\n})\n\npromise.resolve().then(() => {\n    console.log(1)\n}).then(() => {\n    console.log(2)\n}).then(() => {\n    console.log(3)\n}).then(() => {\n    console.log(4)\n}).then(() => {\n    console.log(5)\n})\n\n// a 1 b 2 c 3 d 4 e 5\n\n\npromise.resolve().then(() => {\n    console.log(0)\n    return promise.resolve(4)\n  \t/**\n  \t\tç¸å½äºè¿éå¤äºä¸¤ä¸ªå¾®ä»»å¡ï¼ç¶åäº¤æ¿æ§è¡\n  \t\tå ä¸ºè¿åå¼å¯è½æ¯ promise çåµå¥ï¼å½å then ä¸å®éå½è®¡ç®å®çæç»å¼ï¼ä¼ ç»ä¸ä¸ä¸ª then çåè°\n  \t*/\n}).then(res => {\n    console.log(res)\n})\n\npromise.resolve().then(() => {\n    console.log(1)\n}).then(() => {\n    console.log(2)\n}).then(() => {\n    console.log(3)\n}).then(() => {\n    console.log(5)\n}).then(() => {\n    console.log(6)\n})\n\n// 0 1 2 3 4 5 6\n\n\nconsole.log(1); \nsettimeout(() => {\n  console.log(2);\n});\nnew promise(resolve => {\n  console.log(3);\n  resolve('resolve');\n  console.log(4);\n  reject('error')\n}).catch((err) => {\n  console.log(err);\n}).then((res) => {\n  console.log(res)\n});\npromise.resolve().then(() => {\n  console.log(5);\n});\nconsole.log(6);\n\n// 1 3 4 6 5 resolve 2\n\n\nsettimeout(() => {\n    console.log(\"settimeout\");\n});\nconsole.log(1);\nnew promise(function(resolve, reject) {\n    console.log(2);\n    for (var i = 0; i < 1000; i ++) {\n        if (i === 10) {\n            console.log(10);\n        }\n        if (i === 999) {\n            resolve(999);\n        }\n    }\n    console.log(3); // resolveåé¢çä»£ç ä¾æ§ä¼æ§è¡\n}).then((val) => {\n    console.log(val);\n});\nconsole.log(4);\n\n// 1 2 10 3 4 999 settimeout\n\n\n\n# ä½ç¨åç¸å³\n\nvar length = 10;\nfunction fn() {\n    return this.length+1;\n}\nvar obj = {\n    length: 5,\n    test1: function() {\n        return fn();\n    }\n};\nobj.test2 = fn;\nconsole.log(obj.test1()) // 11\nconsole.log(fn() === obj.test1()) // true\n\n\n\nvar a = function () { \n    this.b =3\n}\nvar c = new a()\na.prototype.b = 9\nvar b = 7\na()\nconsole.log(b) // 3\nconsole.log(c.b) // 3\n\n\n\nvar obj1 = (function() {\n  var inner = '1-1';\n  return {\n    inner: '1-2',\n    say: function() {\n      console.log(inner); \n      console.log(this.inner);\n    }\n  }\n})();\n\nvar obj2 = { inner: '2-1' }\ndebugger\nobj1.say(); // 1-1, 1-2\nobj2.say = obj1.say;\nobj2.say(); // 1-1, 2-1\n\nvar a = 3\n(function (){\n    console.log(a)\n    var a = 4;\n})()\n// uncaught typeerror: 3 is not a function\n\nvar a = 3;\n(function (){\n    console.log(a)\n    var a = 4;\n})()\n// undefined\n\n\nvar name = '123';\nvar obj = {\n   name: '456',\n   getname: function () {\n       function printname () {\n           console.log(this.name);\n       }\n       printname();\n   }\n}\nobj.getname(); // 123\n\n\n\nvar obj = {\n    say: function () {\n        var f1 = () => {\n            console.log(this)\n        }\n        f1()\n    },\n    pro: {\n        getpro: () => {\n            console.log(this)\n        }\n    }\n}\nvar o = obj.say\no() // window\nobj.say() // obj\nobj.pro.getpro() // window\n\n\nfunction a(b, c) {\n    var b;\n    alert(b); // 1\n}\na(1, 2);\n\n\nfor (var i = 0; i < 5; i++) {\n    settimeout(function() {\n        console.log(i)\n    }, 1000 * i)\n}\n// æ¯éä¸ç§è¾åºä¸æ¬¡ 5ï¼æ¶é´ä¸­çiä½ä¸ºåæ°æåä¼ äºè¿å»ï¼å®æ¶å¨å å¥éåï¼æåæ§è¡çæ¶åä»ä½ç¨åæ¾iï¼ä¸º5\n\nfor (var i = 0; i < 5; i++) {\n    (function(i) {\n        settimeout(function() {\n            console.log(i)\n        }, 1000 * i)\n    })(i)\n}\n// è¾åº0ï¼1ï¼2ï¼3ï¼4ï¼é­åï¼içå¼ä¼ä¿å­ä¸æ¥\n\nfor (var i = 0; i < 5; i++) {\n    (function() {\n        settimeout(function() {\n            console.log(i)\n        }, 1000 * i)\n    })(i)\n}\n// æ¯éä¸ç§è¾åºä¸æ¬¡ 5ï¼içå¼æ²¡æä¼ è¿å»\n\n\n\n# thisç¸å³\n\nfunction person() {  \n    this.age = 0;  \n    settimeout(() => {\n        this.age++; // æå person\n    }, 3000);\n}\nvar p = new person();\n\n\nfunction person() {  \n    this.age = 0\n    settimeout(function() {\n        console.log(this) // æå window\n    }, 3000)\n}\nvar p = new person();\n\n// é¡ºä¾¿å¤ä¹ ä»¥ä¸ç®­å¤´å½æ°è¯­æ³\nvar func1 = x => x;\nvar func2 = x => {x};\nvar func3 = x => ({x});\nconsole.log(func1(1)); // 1\nconsole.log(func2(1)); // undefined\nconsole.log(func3(1)); // {x: 1}\n\n\nconst fn = () => {\nthis.x = 'z';\n};\n\nconst b = {x: 'y'};\nfn.call(b);\nconsole.log(b); // {x: 'y'};\n\n\n\n# cssç¸å³\n\n<div class=\"lightblue\">\n   <div class=\"darkblue\">\n      <p>1. é¢è²æ¯ï¼</p> \x3c!-- æ·±è ï¼pæ²¡è®¾ç½®ï¼ç»§æ¿ä¸é¢ç--\x3e\n   </div>\n</div>\n<div class=\"darkblue\">\n   <div class=\"lightblue\">\n      <p>2. é¢è²æ¯ï¼</p> \x3c!-- æµè --\x3e\n   </div>\n</div>\n.lightblue { color: lightblue; }\n.darkblue { color: darkblue; }\n\n\x3c!-------------------------------------------\x3e\n\n<div class=\"lightblue\"> \n   <div class=\"darkblue\"> \x3c!-- æ·±è --\x3e\n      <p>1. é¢è²æ¯ï¼</p>\n   </div>\n</div>\n<div class=\"darkblue\">\n   <div class=\"lightblue\"> \x3c!-- æ·±è --\x3e\n      <p>2. é¢è²æ¯ï¼</p>\n   </div>\n</div>\n.lightblue p { color: lightblue; } \x3c!-- ä¼åçº§ç¸åé½æ¯10 + 1ï¼åå¨åé¢çè¦çåå¨åé¢ç --\x3e\n.darkblue p { color: darkblue; }\n\n\n<style>\n    .green {\n        background-color: green;\n    }\n\n    .red {\n        background-color: red;\n    }\n\n    .blue {\n        background-color: blue;\n    }\n</style>\n<body>\n    <div class=\"green blue red\">\n        fsdfasdfasd\n    </div>\n</body>\n\n\x3c!-- èè² --\x3e\n\n\n\n# ååç¸å³\n\nfunction animal() {}\nvar cat = new animal();\nanimal.prototype = {bark: true}; // ç ´åäºååé¾\nvar dog = new animal();\nconsole.log(cat.bark); // undefined\nconsole.log(dog.bark); // true\n\n\nfunction animal() {}\nvar cat = new animal();\nanimal.prototype.bark = true;\nvar dog = new animal();\nconsole.log(cat.bark); // true\nconsole.log(dog.bark); // true\n\nfunction person(name) {\n\tthis.name = name;\n}\nperson.prototype.print = function() {\n\treturn this.name;\n};\n\nconst a = new person('abc').print.call({});\nconsole.log(a); // undefined\n\n\n// æä¹å®ç°ä¸ä¸ªå¤éç»§æ¿ããå¯ä»¥å¨ä¸ä¸ªobjectå¯¹è±¡å³å¯ä»¥è¾åºm1çhelloä¹å¯ä»¥è¾åºm2.world\nfunction m1() {\nthis.hello = 'hello';\n}\n\nfunction m2() {\nthis.world = 'world';\n}\n\n// é¦åè®© m2 ç»§æ¿ m1\nm2.prototype = new m1()\n\nlet obj = {}\nobj.__proto__ = new m2()\n\nconsole.log(obj.hello, obj.world) // hello world\n\n\nfunction.prototype.a = () => console.log(1); \nobject.prototype.b = () => console.log(2); \nfunction a() {} const a = new a(); \na.a(); // a.a is not a function\na.b(); // 2\n\na.__proto__.__proto__ === a.prototype.__proto__ === object.prototype\na.__proto__.__proto__ === function.prototype.__proto__ === object.prototype\n\n\n// åä¸pãparentãfunctionãobjectçååé¾\nfunction parent() {}\nvar p = new parent()\n\nconsole.log(p.__proto__ === parent.prototype) // true\nconsole.log(parent.__proto__ === function.prototype) // true\nconsole.log(parent.prototype.__proto__ === object.prototype) // true\nconsole.log(function.prototype.__proto__ === object.prototype) // true\nconsole.log(object.__proto__ === function.prototype) // true\n\n\n\n# æ­£åç¸å³\n\n * æ­£åä¸­éè¦è½¬ä¹çå­ç¬¦ï¼* . ? + $ ^ [ ] ( ) { } | \\ /\n\nvar a = 'hi, my name is {name}, i am {age} years old, my email is {email}.';\nvar b = {name:'max', age: 12, email: 'max@gmail.com'};\n\n\nfunction replace(tpl, data){\n    return tpl.replace(/\\{(\\w+)\\}/g, (matchstr, group) => data[group])\n}\n\n\n// ä¸åçº¿è½¬æ¢é©¼å³°\nconst tohump = str => {\n    return str.replace(/\\_(\\w)/g, (matchstr, group) => group.touppercase())\n}\n\n// é©¼å³°è½¬æ¢ä¸åçº¿\nconst toline = str => {\n    return str.replace(/([a-z])/g, (matchstr, group) => `_${group.tolowercase()}`)\n}\n\n\n\n# åºæ¯é¢\n\n> ç¬è«å¨ç¬åé¡µé¢åï¼éè¦å¯¹urlåè¡¨è¿è¡æ ååï¼å®ç°ä¸ä¸ªå¤çurlåè¡¨çå½æ°-å¯¹ç¼ºå°httpåç¼çurlæ·»å åç¼ï¼è¿åçurlä¸è½éå¤\n> \n> [\"nodejs.org\", \"http://nodejs.org\", \"http://bytedance.com\"] => [\"http://nodejs.org\", \"http://bytedance.com\"]\n\nfunction formaturl(urllist){\n    const res = []\n    for (let i in urllist) {\n        const reg = /^http:\\/\\//\n        const url = urllist[i]\n        const newurl = reg.test(url) ? url : `http://${url}`\n        if (!res.includes(newurl)) {\n            res.push(newurl)\n        }\n    }\n    return res\n}\n\n\n\n# è§£æurlä¸­\n\nåæ°ä¸ºå¯¹è±¡ï¼èè key éå¤ï¼æ²¡æ val å è½¬ç \n\n// https://weibo.com/u/1627615060/home?wvr=5&from_outside&key=12&key=4&l=%e4%bb%8a%e6%97%a5%e7%89%b9%e5%8d%96\n\nconst getquery = url => {\n    let query = {}\n    if (url.includes(\"?\")) {\n        const str = url.split(\"?\")[1]\n        const params = str.split(\"&\")\n        for(let i = 0; i < params.length; i++) {\n            let key = null, val = null\n            if (params[i].includes(\"=\")) {\n                key = params[i].split(\"=\")[0]\n                val = decodeuricomponent(params[i].split(\"=\")[1])\n            } else {\n                key = params[i]\n                val = null\n            }\n            if (query[key]) {\n                array.isarray(query[key]) ?\n                    query[key].push(val) : query[key] = [query[key], val]\n            } else {\n                query[key] = val\n            }\n        }\n    }\n    return query\n}\n\n\n> å®ç°å¦ä¸ææu.console(\"hello\").settimeout(3000).console(\"world\").settimeout(3000).console(\"hah\").settimeout(0).console(\"111\")ï¼é¦åè¾åºhelloï¼3såè¾åºworld,åé´é3s,åè¾åº\n\n// èç¹ this æ¯ç«å³è¿åçï¼settimeout å å¥ä»»å¡éåï¼æ¶é´éè¦ç´¯å è®¡ç®\nclass u {\n    constructor() {\n        this.time = null\n        this.totaltime = 0\n    }\n\n    console(val) {\n        if (this.time === null) {\n            console.log(val)\n        } else {\n            this.totaltime += this.time\n            settimeout(() => {\n                console.log(val)\n            }, this.totaltime)\n        }\n        return this\n    }\n\n    settimeout(time) {\n        this.time = time\n        return this\n    }\n}\n\nlet u = new u()\nu.console(\"hello\").settimeout(3000).console(\"world\").settimeout(3000).console(\"hah\").settimeout(0).console(\"111\")\n\n\n\n# repeatå½æ°\n\n> ä½¿ä¸é¢è°ç¨ä»£ç è½æ­£å¸¸å·¥ä½ const repeatfunc = repeat(console.log, 4, 3000); repeatfunc(\"helloworld\") //ä¼è¾åº4æ¬¡ helloworld, æ¯æ¬¡é´é3ç§\n\n// éè¦å®ç°çå½æ°\nfunction repeat (func, times, wait) {\n    return function() {\n        for (let i = 1; i <= times; i++) {\n            settimeout(() => {\n                func(...arguments)\n            }, wait * i)\n        }\n    }\n}\n\n\n\n# æ¾kå¥½æç»©\n\n> ä»ä¸ä¸ªåå«å­¦çæç»©æ°ç»çä¸­æ¾å°æç»©ç¬¬kå¥½çææå­¦ççid, å­¦çä¿¡æ¯å¦ä¸ï¼[{score:89,id:1}, {score:23,id:4}]ã\n\nconst findk = (arr, k) => {\n    const store = array.from(new array(101), () => new array())\n    for (let i = 0; i < arr.length; i++) {\n        store[arr[i].score].push(arr[i].id)\n    }\n    let count = 0\n    for (let i = 100; i >= 0; i--) {\n        if (!store[i].length) continue\n        count++\n        if (k === count) return store[i]\n    }\n}\n\n// æ³¨ï¼åå»ºäºç»´æ°ç»æ¶ï¼åä¸ä¸è¦ new array(101).fill([]), [] æåçé½æ¯åä¸ä¸ª\n\n\n\n# è¿å¶è½¬æ¢\n\nfunction mulbase(num, base){\n    let str = \"\"\n    while (num !== 0) {\n        str += num % base\n        num = math.floor(num / base)\n    }\n    return str.split('').reverse().join('')\n}\nconsole.log(mulbase(64,8));\n\n\n\n# éæºçæ16è¿å¶\n\nfunction genehex() {\n  return \"#\" + math.floor((math.random() * 0xffffff)).tostring(16)\n}\n\n\n\n# 16è¿å¶é¢è²è½¬ rgb\n\nfunction hex2rgb(hex) {\n    const str = hex.slice(1),\n        res = []\n    if (str.length === 3) {\n        for (const w of str) {\n            res.push(parseint(w + w, 16))\n        }\n    } else {\n        for (let i = 0; i < 6; i += 2) {\n            res.push(parseint(str[i] + str[i + 1], 16))\n        }\n    }\n    return res\n}\n\n\n\n# æåºæ°ç»æ¾æ°æ±å\n\n> è¾å¥ï¼[1,2,3,4,5]ï¼ 6\n\n * åæé\n\nfunction foo(arr, target) {\n    let left = 0, right = arr.length - 1\n    while (left < right) {\n        if (arr[left] + arr[right] > target) {\n            right --\n        } else if (arr[left] + arr[right] === target) {\n            return [left, right]\n        } else {\n            left ++\n        }\n    }\n}\n\n\n\n# å¤æ­2çæ´æ°æ¬¡å¹\n\n// 2: 10, 4: 100, 8: 1000, 16: 10000\n// å¯ä»¥åç°2çæ´æ°æ¬¡å¹é½æ¯1åé¢è·çè®¸å¤0ï¼å¦æå1åå«å¯¹åº\n// 1: 01, 3: 011, 7: 0111, 15: 01111\n// å¦æä½ä¸è¿ç®ï¼2 & 1 == 0ï¼4 & 3 == 0\nfunction judge(num) {\n  return (num&(num - 1)) == 0\n}\n\n\n\n# å¯¹è±¡è½¬ä¸ºæ°ç»é®å¼å¯¹\n\n{\n  name: 'a',\n\tage: 10\n}\n// è½¬æ¢ä¸º\n[\n  {\n        key: 'name',\n        value: 'a'\n\t},\n\t{\n        key: 'age',\n        value: 10\n  }\n]\n\n\n\n# å¼æ ¹å·\n\nè¦æ±ä½æ° 0.0001ï¼èè 0 - 1 å¼æ ¹å·è¶æ¥è¶å¤§\n\n\n\n\n\n# å¹¶åè¯·æ±æ§å¶\n\nfunction multirequest(urls = [], maxnum) {\n    const len = urls.length\n    const result = new array(len).fill(false)\n    let count = 0\n\n    return new promise((resolve, reject) => {\n        while (count < maxnum) {\n            next()\n        }\n        function next() {\n            let current = count++\n            if (current >= len) {\n                !result.includes(false) && resolve(result)\n                return\n            }\n            const url = urls[current]\n            fetch(url)\n                .then((res) => {\n                    result[current] = res\n                    if (current < len) {\n                        next()\n                    }\n                })\n            .catch((err) => {\n                result[current] = err\n                if (current < len) {\n                    next()\n                }\n            })\n        }\n    })\n}\n\n\n\n# å°è¯éæ°è¯·æ±\n\nfunction requestretry (url, retrynum) {\n    return request(url).catch(e => {\n        if (retrynum) {\n            return requestretry(url, --retrynum)\n        } else {\n            return promise.reject(e)\n        }\n    })\n}\n\n\nå¤±è´¥æµè¯\n\nfunction tryrequest(request, times = 3) {\n    return request().catch(e => {\n        if (times) {\n            console.log('æ­£å¨éè¯')\n            return tryrequest(request, --times)\n        } else {\n            return promise.reject(e)\n        }\n    })\n}\n\nfunction request() {\n    return new promise((resolve, reject) => {\n        settimeout(() => {\n            reject('error')\n        }, 1000)\n    })\n}\n\ntryrequest(request, 3).then(console.log).catch(console.log)\n\n// æ­£å¨éè¯\n// æ­£å¨éè¯\n// æ­£å¨éè¯\n// error\n\n\næåæµè¯\n\nfunction tryrequest(request, times = 3) {\n    return request().catch(e => {\n        if (times) {\n            console.log('æ­£å¨éè¯')\n            return tryrequest(request, --times)\n        } else {\n            return promise.reject(e)\n        }\n    })\n}\n\nfunction request() {\n    return new promise((resolve, reject) => {\n        settimeout(() => {\n            resolve('success')\n        }, 1000)\n    })\n}\n\ntryrequest(request, 3).then(console.log).catch(console.log) // success\n\n\n\n# loadingå¨ç»\n\n> vueé¡¹ç®ä¸­ï¼loadingæ§å¶é¡µé¢å è½½å¨ç»ï¼sortæ¯ä¸ä¸ªæ¶èæ¶é´çæåºæä½ï¼é®loadingå¨ç»ä¼æ¾ç¤ºåï¼\n\nthis.loading = true\nthis.data.sort()\nthis.loading = false\n\n// ç­ï¼ä¸ä¼ï¼vueæ´æ°è§å¾æ¯å¼æ­¥çï¼è½ç¶sortæ¶èæ¶é´ï¼è¿æ¯ä¼æloadingæ°æ®çæ¹åç¼å²ä¸ºä¸æ¬¡\n\nthis.loading = true // å®\nthis.$nexttick(() => { // å¾®\n  this.data.sort()\n  this.loading = false\n})\n\n// è¿æ¯ä¸ä¼ï¼$nexttickä¼åä½¿ç¨å¾®ä»»å¡ï¼å® => å¾® => uiæ¸²æ\n\nthis.loading = true\nsettimeout(() => {\n  this.data.sort()\n  this.loading = false\n}, 5000)\n// ä¼\n\n\n\n# å®ç°ä¸ä¸ªcashç±»\n\n//å®ç°ä¸ä¸ª cash ç±»ï¼æææ§è¡ä¸é¢ä»£ç ï¼\nconst cash1 = new cash(105);\nconst cash2 = new cash(66);\nconst cash3 = cash1.add(cash2);\nconst cash4 = cash.add(cash1, cash2);\nconst cash5 = new cash(cash1 + cash2); // èè valueof\nconsole.log(`${cash3}`, `${cash4}`, `${cash5}`); // èè tostring\n// 1å7è§1å 1å7è§1å 1å7è§1å\n\n\n// åä¹ååå¤ä¹ ä¸ä¸ valueof å tostring\nconst a = {\n    val: 1,\n    valueof() {\n        console.log('valueof')\n        return this.val\n    },\n    tostring() {\n        console.log('tostring')\n        return this.val\n    }\n}\nconsole.log(a) // {val: 1, valueof: Æ, tostring: Æ}\nconsole.log(a + \"\") // valueof 1\nconsole.log(a + 1) // valueof 2\nconsole.log(a + {}) // valueof 1[object object]\nconsole.log(`${a}`) // tostring 1\n\n\nclass cash {\n    constructor(num) {\n        this.num = num\n    }\n    add(c1) {\n        return new cash(this + c1)\n    }\n    static add(c1, c2) {\n        return new cash(c1 + c2)\n    }\n    // valueof ç¨äºå¤ç new cash(cash1 + cash2)\n    valueof() {\n        return this.num\n    }\n    // tostring ç¨äºå¤ç cash3 => `${cash3}`\n    tostring() {\n        this.sum=`${this.num}`\n        return `${this.sum[0]}å${this.sum[1]}è§${this.sum[2]}å`\n    }\n}\n\n\nclassä¸­staticæ¹æ³ä¸­çthisæååªé\n\n\n# å­ç¬¦ä¸²æ¿æ¢\n\n\"ababab\".match(/a.*b/) // \"ababab\"ï¼.æ¯ä»»æå­ç¬¦ï¼è´ªå©ªå¹éï¼å°½å¯è½å¤çå¹é\n\"ababab\".match(/a.*?b/) // \"ab\"ï¼éè´ªå©ªï¼å°½å¯è½å°çå¹é\n\n\nconst template = \"{{name }}å¾ånameå®³ï¼æ{{age }}å²\"\nconst context = { name: \"jawil\", age: \"15\" }\n\n// vue æå¼è¡¨è¾¾å¼\nfunction fn(template, context) {\n    return template.replace(/\\{\\{(.*?)\\}\\}/g, (matchstr, group) => {\n        return context[group.trim()]\n    })\n}\n\n// es6æ¨¡æ¿å­ç¬¦ä¸²\nfunction replacestr(str, obj) {\n    return str.replace(/\\$\\{(.*?)\\}/g, (matchstr, group) => {\n        return obj[group]\n    })\n}\n\n\n\n# å¤æ­å¯¹è±¡ææ²¡æç©ºå¼\n\n> å¤æ­ä¸ä¸ªå¯¹è±¡æ²¡æç©ºå±æ§ï¼undefinedã nullï¼\n\n// æµè¯ç¨ä¾\nconst obj1 = {\n  prop1:{\n    subprop1: 0,\n    subporp2: undefined,\n    subprop3: {\n      pp1: 123,\n      pp2: \"\"\n    },\n\t},\n\tprop2:\"test\"\n}\n\n// éå½\nfunction hasemptyprop(obj){\n    for (let key in obj) {\n        if (obj.hasownproperty(key)) {\n            if (obj[key] === null || obj[key] === undefined) {\n                return true\n            } else if (typeof obj[key] === 'object') {\n                if (hasemptyprop(obj[key])) {\n                    return true\n                }\n            }\n        }\n    }\n    return false\n}\n\n// è¿ç§ä¸ºä»ä¹ä¸å¯¹ï¼return æ¯ç®­å¤´å½æ°åé¨ç returnï¼æä»¥æ´ä½å½æ°ä¼ä¸ç´è¿å false\nfunction hasemptyprop(obj){\n    object.keys(obj).foreach(key => {\n      \tif (obj[key] === null || obj[key] === undefined) {\n          return true\n        } else if (typeof obj[key] === 'object') {\n          if (hasemptyprop(obj[key])) {\n            return true\n          }\n        }\n    })\n    return false\n}\n\n// ééå½ï¼å¯¹è±¡å¯ä»¥çè§£ä¸ºæ ï¼ç¨å¹¿åº¦ä¼åçææ³\nfunction hasemptyprop(obj){\n    const queue = [obj]\n    while (queue.length) {\n        let prop = queue.shift()\n        if (prop === null || prop === undefined) {\n            return true\n        } else if (typeof prop === 'object') {\n            for (let key in prop) {\n                queue.push(prop[key])\n            }\n        }\n    }\n    return false\n}\n",charsets:{cjk:!0}},{title:"é¢è¯é¢ï¼åï¼",frontmatter:{title:"é¢è¯é¢ï¼åï¼",date:"2018-03-09T09:52:01.000Z",categories:"é¢è¯"},regularPath:"/interview/interview-4.html",relativePath:"interview/interview-4.md",key:"v-6650d0ff",path:"/interview/interview-4.html",headers:[{level:2,title:"æ·±æ·è´ä¸æµæ·è´",slug:"æ·±æ·è´ä¸æµæ·è´",normalizedTitle:"æ·±æ·è´ä¸æµæ·è´",charIndex:13},{level:2,title:"ä»ä¹æ¯BFCï¼BFCçå¸å±è§åæ¯ä»ä¹ï¼å¦ä½åå»ºBFC",slug:"ä»ä¹æ¯bfc-bfcçå¸å±è§åæ¯ä»ä¹-å¦ä½åå»ºbfc",normalizedTitle:"ä»ä¹æ¯bfcï¼bfcçå¸å±è§åæ¯ä»ä¹ï¼å¦ä½åå»ºbfc",charIndex:24},{level:2,title:"éèé¡µé¢ä¸­æä¸ªåç´ çæ¹æ³",slug:"éèé¡µé¢ä¸­æä¸ªåç´ çæ¹æ³",normalizedTitle:"éèé¡µé¢ä¸­æä¸ªåç´ çæ¹æ³",charIndex:54},{level:2,title:"è¯´ä¸ä¸ä½ å¯¹JSæ§è¡ä¸ä¸ææ åä½ç¨åé¾ççè§£",slug:"è¯´ä¸ä¸ä½ å¯¹jsæ§è¡ä¸ä¸ææ åä½ç¨åé¾ççè§£",normalizedTitle:"è¯´ä¸ä¸ä½ å¯¹jsæ§è¡ä¸ä¸ææ åä½ç¨åé¾ççè§£",charIndex:872},{level:2,title:"é²æå½æ°ï¼èæµå½æ°çä½ç¨ä¸å®ç°",slug:"é²æå½æ°-èæµå½æ°çä½ç¨ä¸å®ç°",normalizedTitle:"é²æå½æ°ï¼èæµå½æ°çä½ç¨ä¸å®ç°",charIndex:94},{level:2,title:"ä»ä¹æ¯é­åï¼é­åçä½ç¨æ¯ä»ä¹",slug:"ä»ä¹æ¯é­å-é­åçä½ç¨æ¯ä»ä¹",normalizedTitle:"ä»ä¹æ¯é­åï¼é­åçä½ç¨æ¯ä»ä¹",charIndex:113},{level:2,title:"å³äºreduceå½æ°",slug:"å³äºreduceå½æ°",normalizedTitle:"å³äºreduceå½æ°",charIndex:131},{level:2,title:"æ°ç»å»é",slug:"æ°ç»å»é",normalizedTitle:"æ°ç»å»é",charIndex:145},{level:2,title:"æ¶é´å¤æåº¦åç©ºé´å¤æåº¦åå«å¯¹åºè®¡ç®æºä»ä¹èµæº",slug:"æ¶é´å¤æåº¦åç©ºé´å¤æåº¦åå«å¯¹åºè®¡ç®æºä»ä¹èµæº",normalizedTitle:"æ¶é´å¤æåº¦åç©ºé´å¤æåº¦åå«å¯¹åºè®¡ç®æºä»ä¹èµæº",charIndex:156},{level:2,title:"cssç»ä¸è§å½¢åæå½¢",slug:"cssç»ä¸è§å½¢åæå½¢",normalizedTitle:"cssç»ä¸è§å½¢åæå½¢",charIndex:182}],lastUpdated:"3/15/2023, 7:26:00 PM",lastUpdatedTimestamp:167887956e4,headersStr:"æ·±æ·è´ä¸æµæ·è´ ä»ä¹æ¯BFCï¼BFCçå¸å±è§åæ¯ä»ä¹ï¼å¦ä½åå»ºBFC éèé¡µé¢ä¸­æä¸ªåç´ çæ¹æ³ è¯´ä¸ä¸ä½ å¯¹JSæ§è¡ä¸ä¸ææ åä½ç¨åé¾ççè§£ é²æå½æ°ï¼èæµå½æ°çä½ç¨ä¸å®ç° ä»ä¹æ¯é­åï¼é­åçä½ç¨æ¯ä»ä¹ å³äºreduceå½æ° æ°ç»å»é æ¶é´å¤æåº¦åç©ºé´å¤æåº¦åå«å¯¹åºè®¡ç®æºä»ä¹èµæº cssç»ä¸è§å½¢åæå½¢",content:'# é¢è¯é¢ï¼åï¼\n\n * æ·±æ·è´ä¸æµæ·è´\n * ä»ä¹æ¯BFCï¼BFCçå¸å±è§åæ¯ä»ä¹ï¼å¦ä½åå»ºBFC\n * éèé¡µé¢ä¸­æä¸ªåç´ çæ¹æ³\n * è¯´ä¸ä¸ä½ å¯¹JSæ§è¡ä¸ä¸æåä½ç¨åé¾ççè§£\n * é²æå½æ°ï¼èæµå½æ°çä½ç¨ä¸å®ç°\n * ä»ä¹æ¯é­åï¼é­åçä½ç¨æ¯ä»ä¹\n * å³äºreduceå½æ°\n * æ°ç»å»éçæ¹æ³\n * æ¶é´å¤æåº¦åç©ºé´å¤æåº¦åå«å¯¹åºè®¡ç®æºä»ä¹èµæº\n * cssç»ä¸è§å½¢åæå½¢\n\n\n# æ·±æ·è´ä¸æµæ·è´\n\n * æ·±æ·è´ä¸æµæ·è´\n\n\n# ä»ä¹æ¯BFCï¼BFCçå¸å±è§åæ¯ä»ä¹ï¼å¦ä½åå»ºBFC\n\n * çå­æ¨¡å\n\n\n# éèé¡µé¢ä¸­æä¸ªåç´ çæ¹æ³\n\néèç±»åï¼\n\n * å®å¨éèï¼åç´ ä»æ¸²ææ ä¸­æ¶å¤±ï¼ä¸å æ®ç©ºé´\n * è§è§ä¸éèï¼å±å¹ä¸­ä¸å¯è§ï¼å æ®ç©ºé´\n * è¯­ä¹ä¸éèï¼è¯»å±è½¯ä»¶ä¸å¯è¯»ï¼ä½æ­£å¸¸å æ®ç©ºé´\n\nå®å¨éèï¼\n\n1. display: none;\n2. <div hidden></div>  hiddenå±æ§\n\n\nè§è§ä¸éèï¼\n\n1.å©ç¨poisitionåçæ¨¡åå°åç´ ç§»åºå¯è§åºèå´\nposition:absolute;\nleft:-9999px;\n\n2.å©ç¨transform\nï¼1ï¼ç¼©æ¾ï¼transform: scale(0);\nï¼2ï¼ç§»å¨ï¼transformï¼translateX(-9999px)\n (3) æè½¬ï¼transform: rotateY(90deg);\n \n3.éæåº¦\nopacity: 0;\n\n4.visibility: hidden;\n\n5.å±çº§è¦çï¼ z-index å±æ§\nz-index: -999;\n\n6.clip-path è£åª\nclip-path: polygon(00,00,00,00);\n\n\nè¯­ä¹ä¸éè\n\n<div aria-hidden="true">\n</div>\n\n\n * display:none å³é­åç´ çå¸å±ï¼æä»¥åç´ ä¸è¢«æ¸²æ\n * visibility:hidden éèåç´ ï¼èä¸æ¹åå®ä»¬çå¸å±\n * opacity:0 ä½¿åç´ éå¸¸éæï¼ä½æ¯ç¨æ·ä¾ç¶å¯ä»¥ååç´ äº¤äº\n\n\n# è¯´ä¸ä¸ä½ å¯¹JSæ§è¡ä¸ä¸ææ åä½ç¨åé¾ççè§£\n\njsæ§è¡ä¸ä¸æ\n\n> æ§è¡ä¸ä¸æå°±æ¯å½å JavaScript ä»£ç è¢«è§£æåæ§è¡æ¶æå¨ç¯å¢çæ½è±¡æ¦å¿µï¼ JavaScript ä¸­è¿è¡ä»»ä½çä»£ç é½æ¯å¨æ§è¡ä¸ä¸æä¸­è¿è¡ï¼ä¸ä¸ææ¯å¨æ§è¡é¶æ®µæåå»ºç\n> \n> æ§è¡ä¸ä¸æç±»ååä¸ºï¼\n> \n> å¨å±æ§è¡ä¸ä¸æ / å½æ°æ§è¡ä¸ä¸æ / evalæ§è¡ä¸ä¸æ\n\nä½ç¨å\n\n> ä½ç¨å:æ§å¶çåéä¸å½æ°çå¯è§æ§åçå½å¨æï¼åå³äºä»£ç å®ä¹çä½ç½®ã\n> \n> ä½ç¨åæä¸¤ç§å·¥ä½æ¨¡åï¼è¯æ³ä½ç¨ååå¨æä½ç¨åï¼JSéç¨çæ¯è¯æ³ä½ç¨åå·¥ä½æ¨¡åï¼è¯æ³ä½ç¨åæå³çä½ç¨åæ¯ç±ä¹¦åä»£ç æ¶åéåå½æ°å£°æçä½ç½®å³å®çã\n> \n> åä¸ºï¼\n> \n> æå®éæåµåï¼å¨å±ä½ç¨å / å½æ°ä½ç¨å / åçº§ä½ç¨å\n> \n> æå·¥ä½æ¨¡ååï¼è¯æ³ä½ç¨å / å¨æä½ç¨å\n\næ§è¡ä¸ä¸ææ \n\n/**\n\té¦æ¬¡è¿è¡JavaScriptä»£ç çæ¶å,ä¼åå»ºä¸ä¸ªå¨å±æ§è¡çä¸ä¸æå¹¶Pushå°å½åçæ§è¡æ ä¸­ï¼æ¯å½åçå½æ°è°ç¨ï¼å¼æé½ä¼ä¸ºè¯¥å½æ°åå»ºä¸ä¸ªæ°çå½æ°æ§è¡ä¸ä¸æå¹¶Pushå½åæ§è¡æ çæ é¡¶ã\n\nå½æ é¡¶çå½æ°è¿è¡å®æåï¼å¶å¯¹åºçå½æ°æ§è¡ä¸ä¸æå°ä¼ä»æ§è¡æ ä¸­Popåºï¼ä¸ä¸æçæ§å¶æå°ç§»å¨å°å½åæ§è¡æ çä¸ä¸ä¸ªæ§è¡ä¸ä¸æã\n*/\n\nfunction fun3(){\n    console.log(\'fun3\')\n}\nfunction fun2(){\n    fun3()\n}\nfunction fun1(){\n    fun2()\n}\nfun1()\n\n// å¥æ ï¼å¨å±ï¼f1,f2,f3\n// åºæ ï¼f3,f2,f1\n\n\nä½ç¨åé¾\n\n> ä½ç¨åé¾å°±æ¯ä»å½åä½ç¨åå¼å§ä¸å±ä¸å±åä¸å¯»æ¾æä¸ªåéï¼ç´å°æ¾å°å¨å±ä½ç¨åè¿æ¯æ²¡æ¾å°ï¼å°±å®£å¸æ¾å¼ãè¿ç§ä¸å±ä¸å±çå³ç³»ï¼å°±æ¯ä½ç¨åé¾ã\n\nå½æ°çé¶æ®µåä¸ºå½æ°å»ºç«é¶æ®µåå½æ°æ§è¡é¶æ®µ\n\n * å½æ°å»ºç«é¶æ®µï¼è°ç¨å½æ°ï¼è¿æ²¡ææ§è¡å½æ°åé¨çä»£ç \n   \n   * åå»ºæ§è¡ä¸ä¸æå¯¹è±¡\n   \n   fn.ExecutionContext = {\n     variableObject: // å½æ°ä¸­ç argumentsï¼å±é¨æå\n     scopeChains: // ä½ç¨åé¾\n     this: {} // å½åå½æ°åé¨ç this æå\n   }\n   \n\n * å½æ°æ§è¡é¶æ®µï¼æåéå¯¹è±¡è½¬æ¢ä¸ºæ´»å¨å¯¹è±¡\n\nfn.ExecutionContext = {\n  activationObject: // å½æ°ä¸­ç argumentsï¼å±é¨æå\n  scopeChains: // ä½ç¨åé¾\n  this: {} // å½åå½æ°åé¨ç this æå\n}\n\n\nå°è¯è°è¯ä»¥ä¸å½æ°\n\nfunction fn(a, b) {\n  function inner() {\n    console.log(a, b)\n  }\n  console.dir(inner)\n}\nconsole.dir(fn)\nconst f = fn(1, 2)\n\n\n\n# é²æå½æ°ï¼èæµå½æ°çä½ç¨ä¸å®ç°\n\n * æåä»£ç æ´ç\n\n\n# ä»ä¹æ¯é­åï¼é­åçä½ç¨æ¯ä»ä¹\n\né­åæ¯æææè®¿é®å¦ä¸ä¸ªå½æ°ä½ç¨åä¸­çåéçå½æ°\n\n//åå»ºä¸ä¸ªé­å\nfunction foo(){\n    var a=2;\n    return function fn(){\n        console.log(a)\n    }\n}\nlet func = foo()\nfunc()//è¾åº2\n\n\né­åçä½ç¨ï¼\n\nï¼1ï¼è®¿é®å¦ä¸ä¸ªå½æ°ä½ç¨åä¸­çåé\n\nï¼2ï¼ç§æååé\n\nfunction privateVariable() {\n    var value;\n    this.setValue = function(value) {\n        value= value;\n    };\n    this.getValue = function() {\n        return value;\n    };\n}\nvar x = new privateVariable();\nx.setValue("abcd");\nconsole.log(x.value); //undefined\nconsole.log(x.getValue ()); //abcd\n\n\nï¼3ï¼æ¨¡æåçº§ä½ç¨å\n\nfor(var i=0;i<10;i++){\n    (function(i){\n        console.log(i)\n    })(i)\n}\n\n\n\n# å³äºreduceå½æ°\n\n> reduce() æ¹æ³æ¥æ¶ä¸ä¸ªå½æ°ä½ä¸ºç´¯å å¨ï¼æ°ç»ä¸­çæ¯ä¸ªå¼ï¼ä»å·¦å°å³ï¼å¼å§ç¼©åï¼æç»è®¡ç®ä¸ºä¸ä¸ªå¼ãå¯¹ç©ºæ°ç»æ¯ä¸ä¼æ§è¡åè°å½æ°çã\n\n//æ°ç»æ±å\nconst arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\nconst sum = arr.reduce(function (prev, current) {\n    return prev+current\n}, 0)\nconsole.log(sum) //55\n\n//åå¹¶äºç»´æ°ç»\nvar twoArr = [[\'mu\',\'zi\'],[\'dig\',\'big\'],[\'lucky\',\'jiji\']];\nvar oneArr = twoArr.reduce(function(total,currentValue){\n  // console.log(total)\n  return total.concat(currentValue);\n})\nconsole.log(oneArr);//["mu", "zi", "dig", "big", "lucky", "jiji"]\n\n\n\n# æ°ç»å»é\n\nï¼1ï¼reduce + includes\n\nlet arr = [1, 2, 2, 4, null, null].reduce((prev, current) => {\n    return prev.includes(current) ? prev : prev.concat(current);\n}, []);\n\n\nï¼2ï¼å©ç¨ES6çSetæ°æ®ç»æ\n\n> setÂ ç±»ä¼¼äºæ°ç»ï¼ä¸æåå¼ä¸éå¤é½æ¯å¯ä¸çï¼setæ¬èº«æ¯ä¸ä¸ªæé å½æ°ã\n\nlet arr = [1,2,2,3]\n[...new Set(arr)]  //[1,2,3]\n\n\nï¼3ï¼forå¾ªç¯+splice\n\nfor(var i=0;i<arr.length;i++){\n    for(var j=i+1;j<arr.length;j++){\n        if(arr[i]==arr[j]){\n            arr.splice(j,1)\n            j--\n        }\n    }\n}\n\n\nï¼4ï¼å©ç¨indexOf\n\nvar array = [];\nfor (var i = 0; i < arr.length; i++) {\n    if (array .indexOf(arr[i]) === -1) {\n            array .push(arr[i])\n     }\n}\n\n\nï¼5ï¼å©ç¨sort\n\narr = arr.sort()\nvar array = []\nfor(var i=0;i<arr.length;i++){\n    if(arr[i]!==arr[i-1]){\n        array.push(arr[i])\n    }\n}\n\n\nï¼6ï¼å©ç¨includes\n\nvar array = []\nfor(var i=0;i<arr.length;i++){\n    if(!array.includes(arr[i])){\n        array.push(arr[i])\n    }\n}\n\n\n\n# æ¶é´å¤æåº¦åç©ºé´å¤æåº¦åå«å¯¹åºè®¡ç®æºä»ä¹èµæº\n\n> æ¶é´å¤æåº¦å¯¹åºçæ¯cpuï¼cpuå°±æ¯ç¨æ¥åè¿ç®çï¼æ¯ä¸ªCPUé½æä¸å¥èªå·±å¯ä»¥æ§è¡çä¸é¨çæä»¤éï¼ç»è¿åæï¼è§£ç ï¼æ§è¡çè¿ç¨ææcpuçä¸ä¸ªåºæ¬å¨æï¼ç©ºé´å¤æåº¦å¯¹åºçæ¯åå­ã\n\n\n# cssç»ä¸è§å½¢åæå½¢\n\n/*æå½¢*/\n#box1 {\n  width: 0;\n  height: 0;\n  border: 40px solid;\n  border-color: transparent transparent red;\n  border-radius: 50%;\n}\n\n/*ä¸è§å½¢*/\n#box2 {\n  width: 0;\n  height: 0;\n  border: 40px solid;\n  border-color: transparent transparent red;\n}\n',normalizedContent:'# é¢è¯é¢ï¼åï¼\n\n * æ·±æ·è´ä¸æµæ·è´\n * ä»ä¹æ¯bfcï¼bfcçå¸å±è§åæ¯ä»ä¹ï¼å¦ä½åå»ºbfc\n * éèé¡µé¢ä¸­æä¸ªåç´ çæ¹æ³\n * è¯´ä¸ä¸ä½ å¯¹jsæ§è¡ä¸ä¸æåä½ç¨åé¾ççè§£\n * é²æå½æ°ï¼èæµå½æ°çä½ç¨ä¸å®ç°\n * ä»ä¹æ¯é­åï¼é­åçä½ç¨æ¯ä»ä¹\n * å³äºreduceå½æ°\n * æ°ç»å»éçæ¹æ³\n * æ¶é´å¤æåº¦åç©ºé´å¤æåº¦åå«å¯¹åºè®¡ç®æºä»ä¹èµæº\n * cssç»ä¸è§å½¢åæå½¢\n\n\n# æ·±æ·è´ä¸æµæ·è´\n\n * æ·±æ·è´ä¸æµæ·è´\n\n\n# ä»ä¹æ¯bfcï¼bfcçå¸å±è§åæ¯ä»ä¹ï¼å¦ä½åå»ºbfc\n\n * çå­æ¨¡å\n\n\n# éèé¡µé¢ä¸­æä¸ªåç´ çæ¹æ³\n\néèç±»åï¼\n\n * å®å¨éèï¼åç´ ä»æ¸²ææ ä¸­æ¶å¤±ï¼ä¸å æ®ç©ºé´\n * è§è§ä¸éèï¼å±å¹ä¸­ä¸å¯è§ï¼å æ®ç©ºé´\n * è¯­ä¹ä¸éèï¼è¯»å±è½¯ä»¶ä¸å¯è¯»ï¼ä½æ­£å¸¸å æ®ç©ºé´\n\nå®å¨éèï¼\n\n1. display: none;\n2. <div hidden></div>  hiddenå±æ§\n\n\nè§è§ä¸éèï¼\n\n1.å©ç¨poisitionåçæ¨¡åå°åç´ ç§»åºå¯è§åºèå´\nposition:absolute;\nleft:-9999px;\n\n2.å©ç¨transform\nï¼1ï¼ç¼©æ¾ï¼transform: scale(0);\nï¼2ï¼ç§»å¨ï¼transformï¼translatex(-9999px)\n (3) æè½¬ï¼transform: rotatey(90deg);\n \n3.éæåº¦\nopacity: 0;\n\n4.visibility: hidden;\n\n5.å±çº§è¦çï¼ z-index å±æ§\nz-index: -999;\n\n6.clip-path è£åª\nclip-path: polygon(00,00,00,00);\n\n\nè¯­ä¹ä¸éè\n\n<div aria-hidden="true">\n</div>\n\n\n * display:none å³é­åç´ çå¸å±ï¼æä»¥åç´ ä¸è¢«æ¸²æ\n * visibility:hidden éèåç´ ï¼èä¸æ¹åå®ä»¬çå¸å±\n * opacity:0 ä½¿åç´ éå¸¸éæï¼ä½æ¯ç¨æ·ä¾ç¶å¯ä»¥ååç´ äº¤äº\n\n\n# è¯´ä¸ä¸ä½ å¯¹jsæ§è¡ä¸ä¸ææ åä½ç¨åé¾ççè§£\n\njsæ§è¡ä¸ä¸æ\n\n> æ§è¡ä¸ä¸æå°±æ¯å½å javascript ä»£ç è¢«è§£æåæ§è¡æ¶æå¨ç¯å¢çæ½è±¡æ¦å¿µï¼ javascript ä¸­è¿è¡ä»»ä½çä»£ç é½æ¯å¨æ§è¡ä¸ä¸æä¸­è¿è¡ï¼ä¸ä¸ææ¯å¨æ§è¡é¶æ®µæåå»ºç\n> \n> æ§è¡ä¸ä¸æç±»ååä¸ºï¼\n> \n> å¨å±æ§è¡ä¸ä¸æ / å½æ°æ§è¡ä¸ä¸æ / evalæ§è¡ä¸ä¸æ\n\nä½ç¨å\n\n> ä½ç¨å:æ§å¶çåéä¸å½æ°çå¯è§æ§åçå½å¨æï¼åå³äºä»£ç å®ä¹çä½ç½®ã\n> \n> ä½ç¨åæä¸¤ç§å·¥ä½æ¨¡åï¼è¯æ³ä½ç¨ååå¨æä½ç¨åï¼jséç¨çæ¯è¯æ³ä½ç¨åå·¥ä½æ¨¡åï¼è¯æ³ä½ç¨åæå³çä½ç¨åæ¯ç±ä¹¦åä»£ç æ¶åéåå½æ°å£°æçä½ç½®å³å®çã\n> \n> åä¸ºï¼\n> \n> æå®éæåµåï¼å¨å±ä½ç¨å / å½æ°ä½ç¨å / åçº§ä½ç¨å\n> \n> æå·¥ä½æ¨¡ååï¼è¯æ³ä½ç¨å / å¨æä½ç¨å\n\næ§è¡ä¸ä¸ææ \n\n/**\n\té¦æ¬¡è¿è¡javascriptä»£ç çæ¶å,ä¼åå»ºä¸ä¸ªå¨å±æ§è¡çä¸ä¸æå¹¶pushå°å½åçæ§è¡æ ä¸­ï¼æ¯å½åçå½æ°è°ç¨ï¼å¼æé½ä¼ä¸ºè¯¥å½æ°åå»ºä¸ä¸ªæ°çå½æ°æ§è¡ä¸ä¸æå¹¶pushå½åæ§è¡æ çæ é¡¶ã\n\nå½æ é¡¶çå½æ°è¿è¡å®æåï¼å¶å¯¹åºçå½æ°æ§è¡ä¸ä¸æå°ä¼ä»æ§è¡æ ä¸­popåºï¼ä¸ä¸æçæ§å¶æå°ç§»å¨å°å½åæ§è¡æ çä¸ä¸ä¸ªæ§è¡ä¸ä¸æã\n*/\n\nfunction fun3(){\n    console.log(\'fun3\')\n}\nfunction fun2(){\n    fun3()\n}\nfunction fun1(){\n    fun2()\n}\nfun1()\n\n// å¥æ ï¼å¨å±ï¼f1,f2,f3\n// åºæ ï¼f3,f2,f1\n\n\nä½ç¨åé¾\n\n> ä½ç¨åé¾å°±æ¯ä»å½åä½ç¨åå¼å§ä¸å±ä¸å±åä¸å¯»æ¾æä¸ªåéï¼ç´å°æ¾å°å¨å±ä½ç¨åè¿æ¯æ²¡æ¾å°ï¼å°±å®£å¸æ¾å¼ãè¿ç§ä¸å±ä¸å±çå³ç³»ï¼å°±æ¯ä½ç¨åé¾ã\n\nå½æ°çé¶æ®µåä¸ºå½æ°å»ºç«é¶æ®µåå½æ°æ§è¡é¶æ®µ\n\n * å½æ°å»ºç«é¶æ®µï¼è°ç¨å½æ°ï¼è¿æ²¡ææ§è¡å½æ°åé¨çä»£ç \n   \n   * åå»ºæ§è¡ä¸ä¸æå¯¹è±¡\n   \n   fn.executioncontext = {\n     variableobject: // å½æ°ä¸­ç argumentsï¼å±é¨æå\n     scopechains: // ä½ç¨åé¾\n     this: {} // å½åå½æ°åé¨ç this æå\n   }\n   \n\n * å½æ°æ§è¡é¶æ®µï¼æåéå¯¹è±¡è½¬æ¢ä¸ºæ´»å¨å¯¹è±¡\n\nfn.executioncontext = {\n  activationobject: // å½æ°ä¸­ç argumentsï¼å±é¨æå\n  scopechains: // ä½ç¨åé¾\n  this: {} // å½åå½æ°åé¨ç this æå\n}\n\n\nå°è¯è°è¯ä»¥ä¸å½æ°\n\nfunction fn(a, b) {\n  function inner() {\n    console.log(a, b)\n  }\n  console.dir(inner)\n}\nconsole.dir(fn)\nconst f = fn(1, 2)\n\n\n\n# é²æå½æ°ï¼èæµå½æ°çä½ç¨ä¸å®ç°\n\n * æåä»£ç æ´ç\n\n\n# ä»ä¹æ¯é­åï¼é­åçä½ç¨æ¯ä»ä¹\n\né­åæ¯æææè®¿é®å¦ä¸ä¸ªå½æ°ä½ç¨åä¸­çåéçå½æ°\n\n//åå»ºä¸ä¸ªé­å\nfunction foo(){\n    var a=2;\n    return function fn(){\n        console.log(a)\n    }\n}\nlet func = foo()\nfunc()//è¾åº2\n\n\né­åçä½ç¨ï¼\n\nï¼1ï¼è®¿é®å¦ä¸ä¸ªå½æ°ä½ç¨åä¸­çåé\n\nï¼2ï¼ç§æååé\n\nfunction privatevariable() {\n    var value;\n    this.setvalue = function(value) {\n        value= value;\n    };\n    this.getvalue = function() {\n        return value;\n    };\n}\nvar x = new privatevariable();\nx.setvalue("abcd");\nconsole.log(x.value); //undefined\nconsole.log(x.getvalue ()); //abcd\n\n\nï¼3ï¼æ¨¡æåçº§ä½ç¨å\n\nfor(var i=0;i<10;i++){\n    (function(i){\n        console.log(i)\n    })(i)\n}\n\n\n\n# å³äºreduceå½æ°\n\n> reduce() æ¹æ³æ¥æ¶ä¸ä¸ªå½æ°ä½ä¸ºç´¯å å¨ï¼æ°ç»ä¸­çæ¯ä¸ªå¼ï¼ä»å·¦å°å³ï¼å¼å§ç¼©åï¼æç»è®¡ç®ä¸ºä¸ä¸ªå¼ãå¯¹ç©ºæ°ç»æ¯ä¸ä¼æ§è¡åè°å½æ°çã\n\n//æ°ç»æ±å\nconst arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\nconst sum = arr.reduce(function (prev, current) {\n    return prev+current\n}, 0)\nconsole.log(sum) //55\n\n//åå¹¶äºç»´æ°ç»\nvar twoarr = [[\'mu\',\'zi\'],[\'dig\',\'big\'],[\'lucky\',\'jiji\']];\nvar onearr = twoarr.reduce(function(total,currentvalue){\n  // console.log(total)\n  return total.concat(currentvalue);\n})\nconsole.log(onearr);//["mu", "zi", "dig", "big", "lucky", "jiji"]\n\n\n\n# æ°ç»å»é\n\nï¼1ï¼reduce + includes\n\nlet arr = [1, 2, 2, 4, null, null].reduce((prev, current) => {\n    return prev.includes(current) ? prev : prev.concat(current);\n}, []);\n\n\nï¼2ï¼å©ç¨es6çsetæ°æ®ç»æ\n\n> setÂ ç±»ä¼¼äºæ°ç»ï¼ä¸æåå¼ä¸éå¤é½æ¯å¯ä¸çï¼setæ¬èº«æ¯ä¸ä¸ªæé å½æ°ã\n\nlet arr = [1,2,2,3]\n[...new set(arr)]  //[1,2,3]\n\n\nï¼3ï¼forå¾ªç¯+splice\n\nfor(var i=0;i<arr.length;i++){\n    for(var j=i+1;j<arr.length;j++){\n        if(arr[i]==arr[j]){\n            arr.splice(j,1)\n            j--\n        }\n    }\n}\n\n\nï¼4ï¼å©ç¨indexof\n\nvar array = [];\nfor (var i = 0; i < arr.length; i++) {\n    if (array .indexof(arr[i]) === -1) {\n            array .push(arr[i])\n     }\n}\n\n\nï¼5ï¼å©ç¨sort\n\narr = arr.sort()\nvar array = []\nfor(var i=0;i<arr.length;i++){\n    if(arr[i]!==arr[i-1]){\n        array.push(arr[i])\n    }\n}\n\n\nï¼6ï¼å©ç¨includes\n\nvar array = []\nfor(var i=0;i<arr.length;i++){\n    if(!array.includes(arr[i])){\n        array.push(arr[i])\n    }\n}\n\n\n\n# æ¶é´å¤æåº¦åç©ºé´å¤æåº¦åå«å¯¹åºè®¡ç®æºä»ä¹èµæº\n\n> æ¶é´å¤æåº¦å¯¹åºçæ¯cpuï¼cpuå°±æ¯ç¨æ¥åè¿ç®çï¼æ¯ä¸ªcpué½æä¸å¥èªå·±å¯ä»¥æ§è¡çä¸é¨çæä»¤éï¼ç»è¿åæï¼è§£ç ï¼æ§è¡çè¿ç¨ææcpuçä¸ä¸ªåºæ¬å¨æï¼ç©ºé´å¤æåº¦å¯¹åºçæ¯åå­ã\n\n\n# cssç»ä¸è§å½¢åæå½¢\n\n/*æå½¢*/\n#box1 {\n  width: 0;\n  height: 0;\n  border: 40px solid;\n  border-color: transparent transparent red;\n  border-radius: 50%;\n}\n\n/*ä¸è§å½¢*/\n#box2 {\n  width: 0;\n  height: 0;\n  border: 40px solid;\n  border-color: transparent transparent red;\n}\n',charsets:{cjk:!0}},{title:"é¢è¯é¢ï¼ä¸ï¼",frontmatter:{title:"é¢è¯é¢ï¼ä¸ï¼",date:"2018-08-03T09:21:01.000Z",categories:"é¢è¯"},regularPath:"/interview/interview-1.html",relativePath:"interview/interview-1.md",key:"v-2277ee5f",path:"/interview/interview-1.html",headers:[{level:2,title:"Vueçç»ä»¶ä¼ å¼çæ¹å¼ï¼12ç§ï¼",slug:"vueçç»ä»¶ä¼ å¼çæ¹å¼-12ç§",normalizedTitle:"vueçç»ä»¶ä¼ å¼çæ¹å¼ï¼12ç§ï¼",charIndex:500},{level:2,title:"propsçåæ³",slug:"propsçåæ³",normalizedTitle:"propsçåæ³",charIndex:634},{level:2,title:"æåå·¥å·webpackï¼rollupï¼parcelåå«éç¨äºä»ä¹åºæ¯ï¼",slug:"æåå·¥å·webpack-rollup-parcelåå«éç¨äºä»ä¹åºæ¯",normalizedTitle:"æåå·¥å·webpackï¼rollupï¼parcelåå«éç¨äºä»ä¹åºæ¯ï¼",charIndex:118},{level:2,title:"å¦ä½çè§£ vue ååºå¼åçï¼",slug:"å¦ä½çè§£-vue-ååºå¼åç",normalizedTitle:"å¦ä½çè§£ vue ååºå¼åçï¼",charIndex:1862},{level:2,title:"computedåwatcherçåçï¼æä»ä¹åºå«ååºç¨åºæ¯ï¼ï¼Watcherï¼æ°æ§ï¼",slug:"computedåwatcherçåç-æä»ä¹åºå«ååºç¨åºæ¯-watcher-æ°æ§",normalizedTitle:"computedåwatcherçåçï¼æä»ä¹åºå«ååºç¨åºæ¯ï¼ï¼watcherï¼æ°æ§ï¼",charIndex:185},{level:3,title:"watchçä¸¤ä¸ªåæ°",slug:"watchçä¸¤ä¸ªåæ°",normalizedTitle:"watchçä¸¤ä¸ªåæ°",charIndex:4091},{level:3,title:"ä¸ç§ç±»åç Watcher å¯¹è±¡",slug:"ä¸ç§ç±»åç-watcher-å¯¹è±¡",normalizedTitle:"ä¸ç§ç±»åç watcher å¯¹è±¡",charIndex:4546},{level:2,title:"ä¸ºä»ä¹ Vue3.0 éç¨äº proxyï¼æä»ä¹ä¼å¿ï¼",slug:"ä¸ºä»ä¹-vue3-0-éç¨äº-proxy-æä»ä¹ä¼å¿",normalizedTitle:"ä¸ºä»ä¹ vue3.0 éç¨äº proxyï¼æä»ä¹ä¼å¿ï¼",charIndex:232},{level:2,title:"è¯´ä¸ä¸æ¨¡ååçæ¹æ¡ï¼CommonJsï¼AMDï¼CMDï¼ESModules",slug:"è¯´ä¸ä¸æ¨¡ååçæ¹æ¡-commonjs-amd-cmd-esmodules",normalizedTitle:"è¯´ä¸ä¸æ¨¡ååçæ¹æ¡ï¼commonjsï¼amdï¼cmdï¼esmodules",charIndex:5773},{level:2,title:"ä»ç»ä¸ä¸ Vue ç Virtual DOM ä¸ Diff ç®æ³",slug:"ä»ç»ä¸ä¸-vue-ç-virtual-dom-ä¸-diff-ç®æ³",normalizedTitle:"ä»ç»ä¸ä¸ vue ç virtual dom ä¸ diff ç®æ³",charIndex:304},{level:2,title:"è¯´ä¸ä¸ $nextTick çåç",slug:"è¯´ä¸ä¸-nexttick-çåç",normalizedTitle:"è¯´ä¸ä¸ $nexttick çåç",charIndex:340},{level:2,title:"Vue ç»ä»¶ data ä¸ºä»ä¹å¿é¡»æ¯å½æ° ?",slug:"vue-ç»ä»¶-data-ä¸ºä»ä¹å¿é¡»æ¯å½æ°",normalizedTitle:"vue ç»ä»¶ data ä¸ºä»ä¹å¿é¡»æ¯å½æ° ?",charIndex:361},{level:2,title:"webpackæä»¶ä¸»è¦æ¯åä»ä¹çï¼å¸¸ç¨çæåªäºï¼èªå·±åè¿webpackæä»¶å",slug:"webpackæä»¶ä¸»è¦æ¯åä»ä¹ç-å¸¸ç¨çæåªäº-èªå·±åè¿webpackæä»¶å",normalizedTitle:"webpackæä»¶ä¸»è¦æ¯åä»ä¹çï¼å¸¸ç¨çæåªäºï¼èªå·±åè¿webpackæä»¶å",charIndex:387},{level:2,title:"webpack ç­æ´æ°åç",slug:"webpack-ç­æ´æ°åç",normalizedTitle:"webpack ç­æ´æ°åç",charIndex:429},{level:2,title:"jsæ§è¡ä¼é»å¡DOMæ çè§£æåæ¸²æï¼é£ä¹csså è½½ä¼é»å¡DOMæ çè§£æåæ¸²æåï¼cssä¼é»å¡jså",slug:"jsæ§è¡ä¼é»å¡domæ çè§£æåæ¸²æ-é£ä¹csså è½½ä¼é»å¡domæ çè§£æåæ¸²æå-cssä¼é»å¡jså",normalizedTitle:"jsæ§è¡ä¼é»å¡domæ çè§£æåæ¸²æï¼é£ä¹csså è½½ä¼é»å¡domæ çè§£æåæ¸²æåï¼cssä¼é»å¡jså",charIndex:446}],lastUpdated:"6/25/2025, 8:09:31 PM",lastUpdatedTimestamp:1750853371e3,headersStr:"Vueçç»ä»¶ä¼ å¼çæ¹å¼ï¼12ç§ï¼ propsçåæ³ æåå·¥å·webpackï¼rollupï¼parcelåå«éç¨äºä»ä¹åºæ¯ï¼ å¦ä½çè§£ vue ååºå¼åçï¼ computedåwatcherçåçï¼æä»ä¹åºå«ååºç¨åºæ¯ï¼ï¼Watcherï¼æ°æ§ï¼ watchçä¸¤ä¸ªåæ° ä¸ç§ç±»åç Watcher å¯¹è±¡ ä¸ºä»ä¹ Vue3.0 éç¨äº proxyï¼æä»ä¹ä¼å¿ï¼ è¯´ä¸ä¸æ¨¡ååçæ¹æ¡ï¼CommonJsï¼AMDï¼CMDï¼ESModules ä»ç»ä¸ä¸ Vue ç Virtual DOM ä¸ Diff ç®æ³ è¯´ä¸ä¸ $nextTick çåç Vue ç»ä»¶ data ä¸ºä»ä¹å¿é¡»æ¯å½æ° ? webpackæä»¶ä¸»è¦æ¯åä»ä¹çï¼å¸¸ç¨çæåªäºï¼èªå·±åè¿webpackæä»¶å webpack ç­æ´æ°åç jsæ§è¡ä¼é»å¡DOMæ çè§£æåæ¸²æï¼é£ä¹csså è½½ä¼é»å¡DOMæ çè§£æåæ¸²æåï¼cssä¼é»å¡jså",content:"# é¢è¯é¢ï¼ä¸ï¼\n\n * Vueçç»ä»¶ä¼ å¼çæ¹å¼ï¼8ç§ï¼\n   * ç¶ä¼ å­ï¼æ°ç»/å¯¹è±¡å½¢å¼ï¼ååæ°æ®æµï¼å¨å­ç»ä»¶ä¸­æ¹åpropä¼åºç°è­¦åï¼\n   * å­ä¼ ç¶ï¼èç³»åå¸è®¢éæ¨¡å¼ï¼$emit,$onï¼è®²ä¸ä¸ï¼æä¹å®ç°ä¸ä¸ªåå¸è®¢éæ¨¡å¼\n * æåå·¥å·webpackï¼rollupï¼parcelåå«éç¨äºä»ä¹åºæ¯ï¼\n * å¦ä½çè§£ vue ååºå¼åçï¼2.0/3.0ï¼ï¼\n * computedåwatcherçåçï¼æä»ä¹åºå«ååºç¨åºæ¯ï¼ï¼Watcherï¼æ°æ§ï¼\n * ä¸ºä»ä¹ Vue3.0 éç¨äº proxyï¼æä»ä¹ä¼å¿ï¼\n * è¯´ä¸ä¸æ¨¡ååçæ¹æ¡ï¼CommonJsï¼AMDï¼CMDï¼ES Modules\n * ä»ç»ä¸ä¸ Vue ç Virtual DOM ä¸ Diff ç®æ³\n * è¯´ä¸ä¸ $nextTick çåç\n * Vue ç»ä»¶ data ä¸ºä»ä¹å¿é¡»æ¯å½æ° ?\n * webpackæä»¶ä¸»è¦æ¯åä»ä¹çï¼å¸¸ç¨çæåªäºï¼èªå·±åè¿webpackæä»¶å\n * webpack ç­æ´æ°åç\n * jsæ§è¡ä¼é»å¡DOMæ çè§£æåæ¸²æï¼é£ä¹csså è½½ä¼é»å¡DOMæ çè§£æåæ¸²æåï¼cssä¼é»å¡jså\n\n\n# Vueçç»ä»¶ä¼ å¼çæ¹å¼ï¼12ç§ï¼\n\nprops $emit .sync v-model ref $children / $parent $attrs / $listeners provide / inject EventBus Vuex $root slot\n\n\n# propsçåæ³\n\n * props å¯ä»¥æ¯æ°ç»æå¯¹è±¡ï¼ç¨äºæ¥æ¶æ¥èªç¶ç»ä»¶çæ°æ®ãprops å¯ä»¥æ¯ç®åçæ°ç»ï¼æèä½¿ç¨å¯¹è±¡ä½ä¸ºæ¿ä»£ï¼å¯¹è±¡åè®¸éç½®é«çº§éé¡¹ï¼å¦ç±»åæ£æµãèªå®ä¹éªè¯åè®¾ç½®é»è®¤å¼ã\n   \n   ä½ å¯ä»¥åºäºå¯¹è±¡çè¯­æ³ä½¿ç¨ä»¥ä¸éé¡¹ï¼\n   \n   * typeï¼å¯ä»¥æ¯ä¸ååçæé å½æ°ä¸­çä¸ç§ï¼StringãNumberãBooleanãArrayãObjectãDateãFunctionãSymbolãä»»ä½èªå®ä¹æé å½æ°ãæä¸è¿°åå®¹ç»æçæ°ç»ãä¼æ£æ¥ä¸ä¸ª prop æ¯å¦æ¯ç»å®çç±»åï¼å¦åæåºè­¦åã\n   * defaultï¼any ä¸ºè¯¥ prop æå®ä¸ä¸ªé»è®¤å¼ãå¦æè¯¥ prop æ²¡æè¢«ä¼ å¥ï¼åæ¢åç¨è¿ä¸ªå¼ãå¯¹è±¡ææ°ç»çé»è®¤å¼å¿é¡»ä»ä¸ä¸ªå·¥åå½æ°è¿åã\n   * requiredï¼Boolean å®ä¹è¯¥ prop æ¯å¦æ¯å¿å¡«é¡¹ãå¨éçäº§ç¯å¢ä¸­ï¼å¦æè¿ä¸ªå¼ä¸º truthy ä¸è¯¥ prop æ²¡æè¢«ä¼ å¥çï¼åä¸ä¸ªæ§å¶å°è­¦åå°ä¼è¢«æåºã\n   * validatorï¼Function èªå®ä¹éªè¯å½æ°ä¼å°è¯¥ prop çå¼ä½ä¸ºå¯ä¸çåæ°ä»£å¥ãå¨éçäº§ç¯å¢ä¸ï¼å¦æè¯¥å½æ°è¿åä¸ä¸ª false çå¼ (ä¹å°±æ¯éªè¯å¤±è´¥)ï¼ä¸ä¸ªæ§å¶å°è­¦åå°ä¼è¢«æåºãä½ å¯ä»¥å¨è¿éæ¥éæ´å¤ prop éªè¯çç¸å³ä¿¡æ¯ã\n\nprops: {\n        detail: {\n            type: Object,\n            default: () => {},\n            required: true\n        },\n        age: {\n          type: Number,\n          default: 0,\n          required: true,\n          validator: function (value) {\n            return value >= 0\n          }\n        }\n}\n\n// å­ç»ä»¶åç¶ç»ä»¶ä¼ å¼æ¶ï¼ä¸ä¸ªäºä»¶å¯ä»¥ä¼ éå¤ä¸ªåæ°\n\n// å­ç»ä»¶ç¹å»äºä»¶\nclick(params1, params2) {\n    this.$emit('selectDay', params1, params2)\n}\n\n// ç¶ç»ä»¶è·åå¼\n// <child  @selectDay=\"fun\"></child>\nfun (params1, params2) {\n   console.log(params1, params2) \n}\n\n\n\n# æåå·¥å·webpackï¼rollupï¼parcelåå«éç¨äºä»ä¹åºæ¯ï¼\n\n> webpackï¼ä¸è¬ç¨äºå¤§åå¤æåºç¨\n> \n> rollupï¼ä¸è¬ç¨äºå¼åç¬¬ä¸æ¹ç±»åºï¼ä¾å¦ vue æºç å°±æ¯ç¨ rollup æåç\n> \n> parcelï¼è½»éå¿«æ·ï¼ä¸è¬ç¨äºèªå·±åä¸äºå°ç demo\n\n\n# å¦ä½çè§£ vue ååºå¼åçï¼\n\n * Vueååºå¼åçè¯¦è§£\n * Vue 3.0ååºå¼åç\n\n\n# computedåwatcherçåçï¼æä»ä¹åºå«ååºç¨åºæ¯ï¼ï¼Watcherï¼æ°æ§ï¼\n\nä¸ã è®¡ç®å±æ§ï¼computedï¼\n\n> computed æ¯è®¡ç®å±æ§ï¼å®ä¼æ ¹æ®ä½ æä¾èµçæ°æ®å¨ææ¾ç¤ºæ°çè®¡ç®ç»æ\n\néè¿è®¡ç®åºæ¥çå±æ§ä¸éè¦è°ç¨ç´æ¥å¯ä»¥å¨ DOM éä½¿ç¨\n\n<div id='app'>\n  <p>ææ¯åå§å¼: {{ message }}</p>\n  <p>ææ¯è®¡ç®å±æ§çå¼: {{ computedMessage }}</p> \n</div>\n\n    <script>\n        let app = new Vue({\n            el:'#app',\n            data: {\n                message: 'hello'\n            },\n            computed: {\n                computedMessage: function () {\n                    return this.message.split('').reverse().join('')\n                }\n            }      \n        })\n    <\/script>\n\n\nè®¡ç®å±æ§çsetæä½\n\n// set æä½\ncomputedMessage: {\n  get() {\n\t\treturn\n  }\n  set() {\n\t\treturn\n  }\n}\n\n\näºãmethodsåæ ·å¯å®ç° ï¼æ²¡æç¼å­ï¼ä¼è®¡ç®å¤æ¬¡ï¼\n\n<div id=\"app\">\n  <p>Original message: \"{{ message }}\"</p>\n  <p>Computed reversed message: \"{{ reversedMessage() }}\"</p>\n  <p>Computed reversed message: \"{{ reversedMessage() }}\"</p>\n  <p>Computed reversed message: \"{{ reversedMessage() }}\"</p>\n  <p>Computed reversed message: \"{{ reversedMessage() }}\"</p>\n  <p>Computed reversed message: \"{{ reversedMessage() }}\"</p>\n</div>\n\n<script>\nconst app = new Vue({\n  el: '#app',\n  data: {\n    message: 'Hello'\n  },\n  methods: {\n    // è®¡ç®å±æ§ç getter\n    reversedMessage: function () {\n      // this æå Vue å®ä¾\n      return this.message.split('').reverse().join('')\n    }\n  }\n})\n<\/script>script>\n\n\nä¸ãçå¬å±æ§ï¼watchï¼\n\n> ä¾¦å¬å±æ§Â watchÂ ç¨æ¥è§å¯åååºæ°æ®çåå¨ã\n\n    <div id=\"demodiv\">      \n        <input type=\"text\" v-model=\"text\">\n        {{text}}         \n    </div>\n\n    <script>\n        new Vue({\n            el:\"#demodiv\",\n            data:{\n                    text:\"abcdefg\"\n            },\n            watch:{\n                text(newval,oldval){\n                    console.log(newval+'========'+oldval)\n                }\n            }\n        })\n    <\/script>\n\n\nï¼1ï¼é¦åè¡¨æï¼computed å watch é½å±äº watcherï¼å¨initStateä¸­åå§åï¼ä¸å±æä¸ç§è¿æä¸ç§æ¯æ¸²æ Watcher å¨ mount ä¸­åå§åï¼æ¬è´¨ä¸é½ä¾èµäº Vue çååºå¼åçã\n\nï¼2ï¼computed æ¬è´¨æ¯ä¸ä¸ªæ°æ§æ±å¼çè§å¯èï¼å·æç¼å­æ§ï¼åªæå½ä¾èµåååï¼ç¬¬ä¸æ¬¡è®¿é® computed å±æ§ï¼æä¼è®¡ç®æ°çå¼ï¼å¶åé¨éè¿dirtyå±æ§æ è®°è®¡ç®å±æ§æ¯å¦éè¦éæ°æ±å¼ãè watch åæ¯å½æ°æ®åçååä¾¿ä¼è°ç¨æ§è¡å½æ°ã\n\nï¼3ï¼computed: å½æä¸ªæ°æ®éè¦éçï¼ä¾èµäºï¼å¦ä¸ä¸ªæ°æ®çåå¨èä½åºæ¹åæ¶ï¼è¿æ¶åä½ éè¦ä½¿ç¨è®¡ç®å±æ§ã watch: å½æä¸ªæ°æ®åçååæ¶ï¼éè¦å¯¹è¿ä¸ªæ°æ®çååè¿è¡ååºï¼è¿è¡ä¸ç³»åæä½ï¼ï¼è¿æ¶åä½ éè¦ä½¿ç¨ä¾¦å¬å±æ§ãmethods: ä¸è®¡ç®å±æ§ä¸åçæ¯ï¼æ¯æ¬¡è¯»åæ°æ®æ¶ï¼é½æ¯è®¡ç®ä¸éï¼é¤éä½ ä¸éè¦ç¼å­ï¼å¦åè¿æ ·åéè¦å¤§éçæ§è½å¼éã\n\n\n# watchçä¸¤ä¸ªåæ°\n\n * immediateï¼ä»£è¡¨ç«å³æ§è¡ï¼èä¸æ¯ç­çå¬å¯¹è±¡æ¹ååæ§è¡\n * deepï¼æ·±åº¦çå¬ï¼å¯¹è±¡çå±æ§æ¹åä¹å¯ä»¥çå¬çå°\n\nå¯ä»¥åèè¿ç¯æç« \n\n// ä¸¤ç§åæ³\nwatch: {\n    'user.firstName': function (newValue, oldValue) {\n        this.user.fullName = this.user.firstName + '' + this.user.lastName\n    }\n}\n\nwatch: {\n    'user': {\n        handler: function (newValue, oldValue) {\n        \tthis.user.fullName = this.user.firstName + '' + this.user.lastName\n    \t  },\n        deep: true,\n        immediate: true\n    }\n}\n\n\n\n# ä¸ç§ç±»åç Watcher å¯¹è±¡\n\n * æ²¡æéææ¹æ³ï¼å ä¸º $watch æ¹æ³ä¸­è¦ä½¿ç¨ Vue çå®ä¾\n\n * Watcher åä¸ç§ï¼è®¡ç®å±æ§ Watcherãç¨æ· Watcher (ä¾¦å¬å¨)ãæ¸²æ Watcher\n   \n   * è®¡ç®å±æ§ Watcher å¨ initComputd ä¸­åå»º\n   * ç¨æ· Watcher (ä¾¦å¬å¨) å¨ Vue.$watch ä¸­åå»º\n   * æ¸²æ Watcher å¨ mountComponent ä¸­åå»º\n\n * Watcheråé¨å®ç°æ¯ä¸æ ·çï¼src/core/observer/watcher.jsä¸­ï¼å¹¶ä¸æ¯ä¸ä¸ªWatcheré½æä¸ä¸ªid\n\n * åå»ºé¡ºåºï¼è®¡ç®å±æ§ Watcherãç¨æ· Watcher (ä¾¦å¬å¨)ãæ¸²æ Watcher\n\n * vm.$watch()\n   \n   * src\\core\\instance\\state.js\n\nVue.prototype.$watch = function (\n    expOrFn: string | Function,\n    cb: any,\n    options?: Object\n  ): Function {\n    // è·å Vue å®ä¾ this\n    const vm: Component = this\n    if (isPlainObject(cb)) {\n      // å¤æ­å¦æ cb æ¯å¯¹è±¡æ§è¡ createWatcher\n      return createWatcher(vm, expOrFn, cb, options)\n    }\n    options = options || {}\n    options.user = true\n    // åå»ºç¨æ· watcher å¯¹è±¡\n    const watcher = new Watcher(vm, expOrFn, cb, options)\n    // å¤æ­ immediate å¦æä¸º true\n    if (options.immediate) {\n      // ç«å³æ§è¡ä¸æ¬¡ cb åè°ï¼å¹¶ä¸æå½åå¼ä¼ å¥\n      try {\n        cb.call(vm, watcher.value)\n      } catch (error) {\n        handleError(error, vm, `callback for immediate watcher \"${watcher.expression}\"`)\n      }\n    }\n    // è¿ååæ¶çå¬çæ¹æ³\n    return function unwatchFn () {\n      watcher.teardown()\n    }\n  }\n\n\n\n# ä¸ºä»ä¹ Vue3.0 éç¨äº proxyï¼æä»ä¹ä¼å¿ï¼\n\n * Vueååºå¼åçè¯¦è§£\n\n\n# è¯´ä¸ä¸æ¨¡ååçæ¹æ¡ï¼CommonJsï¼AMDï¼CMDï¼ESModules\n\n * æ¨¡åå\n\n\n# ä»ç»ä¸ä¸ Vue ç Virtual DOM ä¸ Diff ç®æ³\n\n * Virtual DOM ä¸ Diff ç®æ³\n\n\n# è¯´ä¸ä¸ $nextTick çåç\n\n * nextTick\n\n\n# Vue ç»ä»¶ data ä¸ºä»ä¹å¿é¡»æ¯å½æ° ?\n\n> vueä¸­data æ¯å¯ä»¥ç´æ¥åæä¸ä¸ªå¯¹è±¡ç,ä½è¿æ¯ä¿è¯è¿ä¸ªç»ä»¶ä¸ä¼è¢«å¤ç¨çæåµä¸\n> \n> ç±äºç»ä»·çå¤ç¨,å¶å®æ¯åå»ºå¤ä¸ªvueå®ä¾,å¦ædataä¸­ä»ç¶æ¯åªæ¯ä¸ä¸ªå¯¹è±¡,é£ä¹å¶å®åå»ºåºæ¥çå®ä¾ä¿æçé½æ¯å¯¹åä¸ä¸ªå¯¹è±¡çå¼ç¨ã\n> \n> æä»¥æä»¬éè¿ ä¸ä¸ª å½æ°æ§è¡è¿åäºä¸ä¸ªæ°çå¨æ°çæ°æ®å¯¹è±¡ã\n\n\n# webpackæä»¶ä¸»è¦æ¯åä»ä¹çï¼å¸¸ç¨çæåªäºï¼èªå·±åè¿webpackæä»¶å\n\n * webpackæä»¶\n\n\n# webpack ç­æ´æ°åç\n\n * ä»é¶å®ç°webpackç­æ´æ°HMR\n\n\n# jsæ§è¡ä¼é»å¡DOMæ çè§£æåæ¸²æï¼é£ä¹csså è½½ä¼é»å¡DOMæ çè§£æåæ¸²æåï¼cssä¼é»å¡jså\n\n * csså è½½ä¸ä¼é»å¡DOMæ çè§£æ\n * csså è½½ä¼é»å¡DOMæ çæ¸²æ\n * csså è½½ä¼é»å¡åé¢jsè¯­å¥çæ§è¡",normalizedContent:"# é¢è¯é¢ï¼ä¸ï¼\n\n * vueçç»ä»¶ä¼ å¼çæ¹å¼ï¼8ç§ï¼\n   * ç¶ä¼ å­ï¼æ°ç»/å¯¹è±¡å½¢å¼ï¼ååæ°æ®æµï¼å¨å­ç»ä»¶ä¸­æ¹åpropä¼åºç°è­¦åï¼\n   * å­ä¼ ç¶ï¼èç³»åå¸è®¢éæ¨¡å¼ï¼$emit,$onï¼è®²ä¸ä¸ï¼æä¹å®ç°ä¸ä¸ªåå¸è®¢éæ¨¡å¼\n * æåå·¥å·webpackï¼rollupï¼parcelåå«éç¨äºä»ä¹åºæ¯ï¼\n * å¦ä½çè§£ vue ååºå¼åçï¼2.0/3.0ï¼ï¼\n * computedåwatcherçåçï¼æä»ä¹åºå«ååºç¨åºæ¯ï¼ï¼watcherï¼æ°æ§ï¼\n * ä¸ºä»ä¹ vue3.0 éç¨äº proxyï¼æä»ä¹ä¼å¿ï¼\n * è¯´ä¸ä¸æ¨¡ååçæ¹æ¡ï¼commonjsï¼amdï¼cmdï¼es modules\n * ä»ç»ä¸ä¸ vue ç virtual dom ä¸ diff ç®æ³\n * è¯´ä¸ä¸ $nexttick çåç\n * vue ç»ä»¶ data ä¸ºä»ä¹å¿é¡»æ¯å½æ° ?\n * webpackæä»¶ä¸»è¦æ¯åä»ä¹çï¼å¸¸ç¨çæåªäºï¼èªå·±åè¿webpackæä»¶å\n * webpack ç­æ´æ°åç\n * jsæ§è¡ä¼é»å¡domæ çè§£æåæ¸²æï¼é£ä¹csså è½½ä¼é»å¡domæ çè§£æåæ¸²æåï¼cssä¼é»å¡jså\n\n\n# vueçç»ä»¶ä¼ å¼çæ¹å¼ï¼12ç§ï¼\n\nprops $emit .sync v-model ref $children / $parent $attrs / $listeners provide / inject eventbus vuex $root slot\n\n\n# propsçåæ³\n\n * props å¯ä»¥æ¯æ°ç»æå¯¹è±¡ï¼ç¨äºæ¥æ¶æ¥èªç¶ç»ä»¶çæ°æ®ãprops å¯ä»¥æ¯ç®åçæ°ç»ï¼æèä½¿ç¨å¯¹è±¡ä½ä¸ºæ¿ä»£ï¼å¯¹è±¡åè®¸éç½®é«çº§éé¡¹ï¼å¦ç±»åæ£æµãèªå®ä¹éªè¯åè®¾ç½®é»è®¤å¼ã\n   \n   ä½ å¯ä»¥åºäºå¯¹è±¡çè¯­æ³ä½¿ç¨ä»¥ä¸éé¡¹ï¼\n   \n   * typeï¼å¯ä»¥æ¯ä¸ååçæé å½æ°ä¸­çä¸ç§ï¼stringãnumberãbooleanãarrayãobjectãdateãfunctionãsymbolãä»»ä½èªå®ä¹æé å½æ°ãæä¸è¿°åå®¹ç»æçæ°ç»ãä¼æ£æ¥ä¸ä¸ª prop æ¯å¦æ¯ç»å®çç±»åï¼å¦åæåºè­¦åã\n   * defaultï¼any ä¸ºè¯¥ prop æå®ä¸ä¸ªé»è®¤å¼ãå¦æè¯¥ prop æ²¡æè¢«ä¼ å¥ï¼åæ¢åç¨è¿ä¸ªå¼ãå¯¹è±¡ææ°ç»çé»è®¤å¼å¿é¡»ä»ä¸ä¸ªå·¥åå½æ°è¿åã\n   * requiredï¼boolean å®ä¹è¯¥ prop æ¯å¦æ¯å¿å¡«é¡¹ãå¨éçäº§ç¯å¢ä¸­ï¼å¦æè¿ä¸ªå¼ä¸º truthy ä¸è¯¥ prop æ²¡æè¢«ä¼ å¥çï¼åä¸ä¸ªæ§å¶å°è­¦åå°ä¼è¢«æåºã\n   * validatorï¼function èªå®ä¹éªè¯å½æ°ä¼å°è¯¥ prop çå¼ä½ä¸ºå¯ä¸çåæ°ä»£å¥ãå¨éçäº§ç¯å¢ä¸ï¼å¦æè¯¥å½æ°è¿åä¸ä¸ª false çå¼ (ä¹å°±æ¯éªè¯å¤±è´¥)ï¼ä¸ä¸ªæ§å¶å°è­¦åå°ä¼è¢«æåºãä½ å¯ä»¥å¨è¿éæ¥éæ´å¤ prop éªè¯çç¸å³ä¿¡æ¯ã\n\nprops: {\n        detail: {\n            type: object,\n            default: () => {},\n            required: true\n        },\n        age: {\n          type: number,\n          default: 0,\n          required: true,\n          validator: function (value) {\n            return value >= 0\n          }\n        }\n}\n\n// å­ç»ä»¶åç¶ç»ä»¶ä¼ å¼æ¶ï¼ä¸ä¸ªäºä»¶å¯ä»¥ä¼ éå¤ä¸ªåæ°\n\n// å­ç»ä»¶ç¹å»äºä»¶\nclick(params1, params2) {\n    this.$emit('selectday', params1, params2)\n}\n\n// ç¶ç»ä»¶è·åå¼\n// <child  @selectday=\"fun\"></child>\nfun (params1, params2) {\n   console.log(params1, params2) \n}\n\n\n\n# æåå·¥å·webpackï¼rollupï¼parcelåå«éç¨äºä»ä¹åºæ¯ï¼\n\n> webpackï¼ä¸è¬ç¨äºå¤§åå¤æåºç¨\n> \n> rollupï¼ä¸è¬ç¨äºå¼åç¬¬ä¸æ¹ç±»åºï¼ä¾å¦ vue æºç å°±æ¯ç¨ rollup æåç\n> \n> parcelï¼è½»éå¿«æ·ï¼ä¸è¬ç¨äºèªå·±åä¸äºå°ç demo\n\n\n# å¦ä½çè§£ vue ååºå¼åçï¼\n\n * vueååºå¼åçè¯¦è§£\n * vue 3.0ååºå¼åç\n\n\n# computedåwatcherçåçï¼æä»ä¹åºå«ååºç¨åºæ¯ï¼ï¼watcherï¼æ°æ§ï¼\n\nä¸ã è®¡ç®å±æ§ï¼computedï¼\n\n> computed æ¯è®¡ç®å±æ§ï¼å®ä¼æ ¹æ®ä½ æä¾èµçæ°æ®å¨ææ¾ç¤ºæ°çè®¡ç®ç»æ\n\néè¿è®¡ç®åºæ¥çå±æ§ä¸éè¦è°ç¨ç´æ¥å¯ä»¥å¨ dom éä½¿ç¨\n\n<div id='app'>\n  <p>ææ¯åå§å¼: {{ message }}</p>\n  <p>ææ¯è®¡ç®å±æ§çå¼: {{ computedmessage }}</p> \n</div>\n\n    <script>\n        let app = new vue({\n            el:'#app',\n            data: {\n                message: 'hello'\n            },\n            computed: {\n                computedmessage: function () {\n                    return this.message.split('').reverse().join('')\n                }\n            }      \n        })\n    <\/script>\n\n\nè®¡ç®å±æ§çsetæä½\n\n// set æä½\ncomputedmessage: {\n  get() {\n\t\treturn\n  }\n  set() {\n\t\treturn\n  }\n}\n\n\näºãmethodsåæ ·å¯å®ç° ï¼æ²¡æç¼å­ï¼ä¼è®¡ç®å¤æ¬¡ï¼\n\n<div id=\"app\">\n  <p>original message: \"{{ message }}\"</p>\n  <p>computed reversed message: \"{{ reversedmessage() }}\"</p>\n  <p>computed reversed message: \"{{ reversedmessage() }}\"</p>\n  <p>computed reversed message: \"{{ reversedmessage() }}\"</p>\n  <p>computed reversed message: \"{{ reversedmessage() }}\"</p>\n  <p>computed reversed message: \"{{ reversedmessage() }}\"</p>\n</div>\n\n<script>\nconst app = new vue({\n  el: '#app',\n  data: {\n    message: 'hello'\n  },\n  methods: {\n    // è®¡ç®å±æ§ç getter\n    reversedmessage: function () {\n      // this æå vue å®ä¾\n      return this.message.split('').reverse().join('')\n    }\n  }\n})\n<\/script>script>\n\n\nä¸ãçå¬å±æ§ï¼watchï¼\n\n> ä¾¦å¬å±æ§Â watchÂ ç¨æ¥è§å¯åååºæ°æ®çåå¨ã\n\n    <div id=\"demodiv\">      \n        <input type=\"text\" v-model=\"text\">\n        {{text}}         \n    </div>\n\n    <script>\n        new vue({\n            el:\"#demodiv\",\n            data:{\n                    text:\"abcdefg\"\n            },\n            watch:{\n                text(newval,oldval){\n                    console.log(newval+'========'+oldval)\n                }\n            }\n        })\n    <\/script>\n\n\nï¼1ï¼é¦åè¡¨æï¼computed å watch é½å±äº watcherï¼å¨initstateä¸­åå§åï¼ä¸å±æä¸ç§è¿æä¸ç§æ¯æ¸²æ watcher å¨ mount ä¸­åå§åï¼æ¬è´¨ä¸é½ä¾èµäº vue çååºå¼åçã\n\nï¼2ï¼computed æ¬è´¨æ¯ä¸ä¸ªæ°æ§æ±å¼çè§å¯èï¼å·æç¼å­æ§ï¼åªæå½ä¾èµåååï¼ç¬¬ä¸æ¬¡è®¿é® computed å±æ§ï¼æä¼è®¡ç®æ°çå¼ï¼å¶åé¨éè¿dirtyå±æ§æ è®°è®¡ç®å±æ§æ¯å¦éè¦éæ°æ±å¼ãè watch åæ¯å½æ°æ®åçååä¾¿ä¼è°ç¨æ§è¡å½æ°ã\n\nï¼3ï¼computed: å½æä¸ªæ°æ®éè¦éçï¼ä¾èµäºï¼å¦ä¸ä¸ªæ°æ®çåå¨èä½åºæ¹åæ¶ï¼è¿æ¶åä½ éè¦ä½¿ç¨è®¡ç®å±æ§ã watch: å½æä¸ªæ°æ®åçååæ¶ï¼éè¦å¯¹è¿ä¸ªæ°æ®çååè¿è¡ååºï¼è¿è¡ä¸ç³»åæä½ï¼ï¼è¿æ¶åä½ éè¦ä½¿ç¨ä¾¦å¬å±æ§ãmethods: ä¸è®¡ç®å±æ§ä¸åçæ¯ï¼æ¯æ¬¡è¯»åæ°æ®æ¶ï¼é½æ¯è®¡ç®ä¸éï¼é¤éä½ ä¸éè¦ç¼å­ï¼å¦åè¿æ ·åéè¦å¤§éçæ§è½å¼éã\n\n\n# watchçä¸¤ä¸ªåæ°\n\n * immediateï¼ä»£è¡¨ç«å³æ§è¡ï¼èä¸æ¯ç­çå¬å¯¹è±¡æ¹ååæ§è¡\n * deepï¼æ·±åº¦çå¬ï¼å¯¹è±¡çå±æ§æ¹åä¹å¯ä»¥çå¬çå°\n\nå¯ä»¥åèè¿ç¯æç« \n\n// ä¸¤ç§åæ³\nwatch: {\n    'user.firstname': function (newvalue, oldvalue) {\n        this.user.fullname = this.user.firstname + '' + this.user.lastname\n    }\n}\n\nwatch: {\n    'user': {\n        handler: function (newvalue, oldvalue) {\n        \tthis.user.fullname = this.user.firstname + '' + this.user.lastname\n    \t  },\n        deep: true,\n        immediate: true\n    }\n}\n\n\n\n# ä¸ç§ç±»åç watcher å¯¹è±¡\n\n * æ²¡æéææ¹æ³ï¼å ä¸º $watch æ¹æ³ä¸­è¦ä½¿ç¨ vue çå®ä¾\n\n * watcher åä¸ç§ï¼è®¡ç®å±æ§ watcherãç¨æ· watcher (ä¾¦å¬å¨)ãæ¸²æ watcher\n   \n   * è®¡ç®å±æ§ watcher å¨ initcomputd ä¸­åå»º\n   * ç¨æ· watcher (ä¾¦å¬å¨) å¨ vue.$watch ä¸­åå»º\n   * æ¸²æ watcher å¨ mountcomponent ä¸­åå»º\n\n * watcheråé¨å®ç°æ¯ä¸æ ·çï¼src/core/observer/watcher.jsä¸­ï¼å¹¶ä¸æ¯ä¸ä¸ªwatcheré½æä¸ä¸ªid\n\n * åå»ºé¡ºåºï¼è®¡ç®å±æ§ watcherãç¨æ· watcher (ä¾¦å¬å¨)ãæ¸²æ watcher\n\n * vm.$watch()\n   \n   * src\\core\\instance\\state.js\n\nvue.prototype.$watch = function (\n    exporfn: string | function,\n    cb: any,\n    options?: object\n  ): function {\n    // è·å vue å®ä¾ this\n    const vm: component = this\n    if (isplainobject(cb)) {\n      // å¤æ­å¦æ cb æ¯å¯¹è±¡æ§è¡ createwatcher\n      return createwatcher(vm, exporfn, cb, options)\n    }\n    options = options || {}\n    options.user = true\n    // åå»ºç¨æ· watcher å¯¹è±¡\n    const watcher = new watcher(vm, exporfn, cb, options)\n    // å¤æ­ immediate å¦æä¸º true\n    if (options.immediate) {\n      // ç«å³æ§è¡ä¸æ¬¡ cb åè°ï¼å¹¶ä¸æå½åå¼ä¼ å¥\n      try {\n        cb.call(vm, watcher.value)\n      } catch (error) {\n        handleerror(error, vm, `callback for immediate watcher \"${watcher.expression}\"`)\n      }\n    }\n    // è¿ååæ¶çå¬çæ¹æ³\n    return function unwatchfn () {\n      watcher.teardown()\n    }\n  }\n\n\n\n# ä¸ºä»ä¹ vue3.0 éç¨äº proxyï¼æä»ä¹ä¼å¿ï¼\n\n * vueååºå¼åçè¯¦è§£\n\n\n# è¯´ä¸ä¸æ¨¡ååçæ¹æ¡ï¼commonjsï¼amdï¼cmdï¼esmodules\n\n * æ¨¡åå\n\n\n# ä»ç»ä¸ä¸ vue ç virtual dom ä¸ diff ç®æ³\n\n * virtual dom ä¸ diff ç®æ³\n\n\n# è¯´ä¸ä¸ $nexttick çåç\n\n * nexttick\n\n\n# vue ç»ä»¶ data ä¸ºä»ä¹å¿é¡»æ¯å½æ° ?\n\n> vueä¸­data æ¯å¯ä»¥ç´æ¥åæä¸ä¸ªå¯¹è±¡ç,ä½è¿æ¯ä¿è¯è¿ä¸ªç»ä»¶ä¸ä¼è¢«å¤ç¨çæåµä¸\n> \n> ç±äºç»ä»·çå¤ç¨,å¶å®æ¯åå»ºå¤ä¸ªvueå®ä¾,å¦ædataä¸­ä»ç¶æ¯åªæ¯ä¸ä¸ªå¯¹è±¡,é£ä¹å¶å®åå»ºåºæ¥çå®ä¾ä¿æçé½æ¯å¯¹åä¸ä¸ªå¯¹è±¡çå¼ç¨ã\n> \n> æä»¥æä»¬éè¿ ä¸ä¸ª å½æ°æ§è¡è¿åäºä¸ä¸ªæ°çå¨æ°çæ°æ®å¯¹è±¡ã\n\n\n# webpackæä»¶ä¸»è¦æ¯åä»ä¹çï¼å¸¸ç¨çæåªäºï¼èªå·±åè¿webpackæä»¶å\n\n * webpackæä»¶\n\n\n# webpack ç­æ´æ°åç\n\n * ä»é¶å®ç°webpackç­æ´æ°hmr\n\n\n# jsæ§è¡ä¼é»å¡domæ çè§£æåæ¸²æï¼é£ä¹csså è½½ä¼é»å¡domæ çè§£æåæ¸²æåï¼cssä¼é»å¡jså\n\n * csså è½½ä¸ä¼é»å¡domæ çè§£æ\n * csså è½½ä¼é»å¡domæ çæ¸²æ\n * csså è½½ä¼é»å¡åé¢jsè¯­å¥çæ§è¡",charsets:{cjk:!0}},{title:"é¢è¯é¢ï¼äºï¼",frontmatter:{title:"é¢è¯é¢ï¼äºï¼",date:"2018-08-03T09:21:01.000Z",categories:"é¢è¯"},regularPath:"/interview/interview-2.html",relativePath:"interview/interview-2.md",key:"v-39158f3f",path:"/interview/interview-2.html",headers:[{level:2,title:"ä½¿ç¨æ­£åå¤æ­é®ç®±æ¯å¦åæ³",slug:"ä½¿ç¨æ­£åå¤æ­é®ç®±æ¯å¦åæ³",normalizedTitle:"ä½¿ç¨æ­£åå¤æ­é®ç®±æ¯å¦åæ³",charIndex:13},{level:2,title:"Cooike,sessionStorge,localStorgeçåºå«",slug:"cooike-sessionstorge-localstorgeçåºå«",normalizedTitle:"cooike,sessionstorge,localstorgeçåºå«",charIndex:29},{level:2,title:"http å https",slug:"http-å-https",normalizedTitle:"http å https",charIndex:68},{level:2,title:"æä¹è§£å³è·¨åé®é¢",slug:"æä¹è§£å³è·¨åé®é¢",normalizedTitle:"æä¹è§£å³è·¨åé®é¢",charIndex:84},{level:2,title:"è¾å¥ååå°å±ç¤ºé¡µé¢åçäºä»ä¹",slug:"è¾å¥ååå°å±ç¤ºé¡µé¢åçäºä»ä¹",normalizedTitle:"è¾å¥ååå°å±ç¤ºé¡µé¢åçäºä»ä¹",charIndex:96},{level:2,title:"å¸¸è§çç¶æç ",slug:"å¸¸è§çç¶æç ",normalizedTitle:"å¸¸è§çç¶æç ",charIndex:114},{level:2,title:"getä¸postçåºå«",slug:"getä¸postçåºå«",normalizedTitle:"getä¸postçåºå«",charIndex:124},{level:2,title:"åå¾åæ¶æºå¶ï¼GCç®æ³ï¼",slug:"åå¾åæ¶æºå¶-gcç®æ³",normalizedTitle:"åå¾åæ¶æºå¶ï¼gcç®æ³ï¼",charIndex:139},{level:2,title:"JSéå¼è½¬æ¢ä¸æ¾ç¤ºè½¬æ¢",slug:"jséå¼è½¬æ¢ä¸æ¾ç¤ºè½¬æ¢",normalizedTitle:"jséå¼è½¬æ¢ä¸æ¾ç¤ºè½¬æ¢",charIndex:155},{level:3,title:"éå¼è½¬æ¢",slug:"éå¼è½¬æ¢",normalizedTitle:"éå¼è½¬æ¢",charIndex:157},{level:3,title:"æ¾å¼è½¬æ¢",slug:"æ¾å¼è½¬æ¢",normalizedTitle:"æ¾å¼è½¬æ¢",charIndex:6494},{level:3,title:"å éå°é¢",slug:"å éå°é¢",normalizedTitle:"å éå°é¢",charIndex:6947},{level:2,title:"å¯¹è±¡çé®æ¯æä»ä¹ç±»å",slug:"å¯¹è±¡çé®æ¯æä»ä¹ç±»å",normalizedTitle:"å¯¹è±¡çé®æ¯æä»ä¹ç±»å",charIndex:170}],lastUpdated:"7/14/2022, 8:08:21 PM",lastUpdatedTimestamp:1657800501e3,headersStr:"ä½¿ç¨æ­£åå¤æ­é®ç®±æ¯å¦åæ³ Cooike,sessionStorge,localStorgeçåºå« http å https æä¹è§£å³è·¨åé®é¢ è¾å¥ååå°å±ç¤ºé¡µé¢åçäºä»ä¹ å¸¸è§çç¶æç  getä¸postçåºå« åå¾åæ¶æºå¶ï¼GCç®æ³ï¼ JSéå¼è½¬æ¢ä¸æ¾ç¤ºè½¬æ¢ éå¼è½¬æ¢ æ¾å¼è½¬æ¢ å éå°é¢ å¯¹è±¡çé®æ¯æä»ä¹ç±»å",content:'# é¢è¯é¢ï¼äºï¼\n\n * ä½¿ç¨æ­£åå¤æ­é®ç®±æ¯å¦åæ³\n * Cooike,sessionStorge,localStorgeçåºå«\n * http å https\n * æä¹è§£å³è·¨åé®é¢\n * è¾å¥ååå°å±ç¤ºé¡µé¢åçäºä»ä¹\n * å¸¸è§çç¶æç \n * getä¸postçåºå«\n * åå¾åæ¶æºå¶ï¼GCç®æ³ï¼\n * JSéå¼è½¬æ¢ä¸æ¾ç¤ºè½¬æ¢\n * å¯¹è±¡çé®æ¯æä»ä¹ç±»å\n\n\n# ä½¿ç¨æ­£åå¤æ­é®ç®±æ¯å¦åæ³\n\nconst pattern = /^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/;\n//å­ç¬¦+@+å­ç¬¦+.+å­æ¯\npattern.test(str) // true or false\n\n\n> æ­£ååºæ¬ç¥è¯\n\n//1.æ¨ªåæ¨¡ç³å¹é,ä¸ä¸ªæ­£åå¯å¹éçå­ç¬¦ä¸²çé¿åº¦ä¸æ¯åºå®ç\n//æ¯å¦/ab{2,5}c/è¡¨ç¤ºå¹éè¿æ ·ä¸ä¸ªå­ç¬¦ä¸²ï¼ç¬¬ä¸ä¸ªå­ç¬¦æ¯âaâï¼æ¥ä¸æ¥æ¯2å°5ä¸ªå­ç¬¦âbâï¼æåæ¯å­ç¬¦âcâ\nvar regex = /ab{2,5}c/g;\nvar string = "abc abbc abbbc abbbbc abbbbbc abbbbbbc";\nconsole.log( string.match(regex) ); \n// => ["abbc", "abbbc", "abbbbc", "abbbbbc"]\n\n//2.çºµåæ¨¡ç³å¹éï¼ä¸ä¸ªæ­£åå¹éçå­ç¬¦ä¸²ï¼å·ä½å°æä¸ä½å­ç¬¦æ¶ï¼å®å¯ä»¥ä¸æ¯æä¸ªç¡®å®çå­ç¬¦\n//æ¯å¦/a[123]b/å¯ä»¥å¹éå¦ä¸ä¸ç§å­ç¬¦ä¸²ï¼"a1b"ã"a2b"ã"a3b"ãæµè¯å¦ä¸ï¼\nvar regex = /a[123]b/g;\nvar string = "a0b a1b a2b a3b a4b";\nconsole.log( string.match(regex) ); \n// => ["a1b", "a2b", "a3b"]\n\n//3.èå´è¡¨ç¤ºæ³ï¼æ¯å¦[123456abcdefGHIJKLM]ï¼å¯ä»¥åæ[1-6a-fG-M]\n//è¦å¹éâaâãâ-âãâzâè¿ä¸èä¸­ä»»æä¸ä¸ªå­ç¬¦ï¼ä¸è½åæ[a-z]ï¼å¯ä»¥åæå¦ä¸çæ¹å¼ï¼[-az]æ[az-]æ[a\\-z]\n\n//4.æé¤å­ç¬¦ç»\nvar regex = = /[^abc]/\n\n//5.å¸¸è§ç®å\n/*\n\\då°±æ¯[0-9]ãè¡¨ç¤ºæ¯ä¸ä½æ°å­ãè®°å¿æ¹å¼ï¼å¶è±ææ¯digitï¼æ°å­ï¼ã\n\\Då°±æ¯[^0-9]ãè¡¨ç¤ºé¤æ°å­å¤çä»»æå­ç¬¦ã\n\\wå°±æ¯[0-9a-zA-Z_]ãè¡¨ç¤ºæ°å­ãå¤§å°åå­æ¯åä¸åçº¿ãè®°å¿æ¹å¼ï¼wæ¯wordçç®åï¼ä¹ç§°åè¯å­ç¬¦ã\n\\Wæ¯[^0-9a-zA-Z_]ãéåè¯å­ç¬¦ã\n\\sæ¯[ \\t\\v\\n\\r\\f]ãè¡¨ç¤ºç©ºç½ç¬¦ï¼åæ¬ç©ºæ ¼ãæ°´å¹³å¶è¡¨ç¬¦ãåç´å¶è¡¨ç¬¦ãæ¢è¡ç¬¦ãåè½¦ç¬¦ãæ¢é¡µç¬¦ãè®°å¿æ¹å¼ï¼sæ¯space characterçé¦å­æ¯ã\n\\Sæ¯[^ \\t\\v\\n\\r\\f]ã éç©ºç½ç¬¦ã\n.ééç¬¦ï¼è¡¨ç¤ºå ä¹ä»»æå­ç¬¦ã\n*/\n\n//6.å¤éåæ¯\nvar regex = /good|nice/g;\nvar string = "good idea, nice try.";\nconsole.log( string.match(regex) ); \n// => ["good", "nice"]\n\n//7. ^ä»£è¡¨å¼å¤´ï¼$ä»£è¡¨ç»å°¾\n\n\n\n# Cooike,sessionStorge,localStorgeçåºå«\n\n> Cooikeå§ç»å¨åæºçHTTPè¯·æ±ä¸­æºå¸¦ï¼ä¼å¨æµè§å¨åæå¡å¨ä¹é´ä¼ éã sessionStorgeålocalStorgeä¸ä¼åéç»æå¡å¨ï¼ä»å¨æ¬å°ä¿å­ Cooikeä¸è½è¶è¿4kï¼sessionålocalä¸è¬å°äº5M localStorgeå­å¨çæ¯æä¹æ°æ®ï¼æµè§å¨å³é­ä¸ä¸¢å¤±ãSessionStorgeå¨å³é­çªå£åä¼èªå¨å é¤ã\n\n\n# http å https\n\n> httpså¹¶éåºç¨å±çä¸ç§æ°åè®®ï¼åªæ¯httpéä¿¡æ¥å£é¨åç¨ssl/tlsåè®®ä»£æ¿èå·²ã SSLåTLSé½æ¯å å¯åè®® éå¸¸httpç´æ¥åtcpéä¿¡ï¼å½ä½¿ç¨sslæ¶åæ¼åæååssléä¿¡ï¼åç±sslåtcpéä¿¡ã æè°httpsï¼å¶å®å°±æ¯èº«æ«sslåè®®è¿å±å¤å£³çhttpãï¼åå¿ä¸ä¸osi7å±,TCP/IP4å±ï¼æä»¬å­¦çæ¯5å±ï¼\n> \n> SSLåè®®éç¨çæ¯éå¯¹ç§°å å¯ç®æ³ï¼å®¢æ·ç«¯ååæå¡å¨ç«¯ç´¢è¦å¬é¥ï¼ç¶åç¨å¬é¥å å¯ä¿¡æ¯ï¼æå¡å¨æ¶å°å¯æåï¼ç¨èªå·±çç§é¥è§£å¯.\n> \n> RSAç®æ³ï¼ä¸¤ä¸ªå¤§ç´ æ°p,qï¼n=pq,f(n)=(p-1)(q-1),1<b<f(n),a=b^-1modf(n),å¬é¥n,b,ç§é¥p,q,a\n> \n> è¯ä¹¦ï¼é¡¾åæä¹ï¼å°±æ¯è¯æçæä»¶ãä¾å¦æµè§å¨å tlanyan.me æå¡å¨éä¿¡ï¼æµè§å¨æä¹ç¥éå¯¹æ¹å°±æ¯ tlanyan.me å¯¹åºçæå¡å¨å¢ï¼å¨ä¸å¯ä¿¡çç½ç»ä¸éä¿¡ï¼ä¸­ç«çç¬¬ä¸æ¹ä½ç¨å°±æ¾ç°åºæ¥äºãæå¨çç¬¬ä¸æ¹ä¸­ç«æºæï¼ Certificate Authority, CAï¼æ¶å° tlanyan.me ææèçè¯ä¹¦è¯·æ±å¹¶æ ¸éªä¿¡æ¯åï¼å°ææèçåç§°ãå¬é¥ä¸ CA ç¨ç§é¥çæçæ°å­ç­¾åç­ä¿¡æ¯åæè¯ä¹¦é¢åç»ç³è¯·èã\n\n\n# æä¹è§£å³è·¨åé®é¢\n\nhttp://www.a.com/a.js è®¿é®ä»¥ä¸URLçç»æ\n\nURL                            è¯´æ            æ¯å¦åè®¸éä¿¡\nhttp://www.a.com/b.js          åä¸ååä¸         åè®¸\nhttp://www.a.com/script/b.js   åä¸ååä¸ä¸åæä»¶     åè®¸\nhttp://www.a.com:8000/b.js     åä¸ååï¼ä¸åç«¯å£     ä¸åè®¸\nhttps://www.a.com/b.js         åä¸ååï¼ä¸ååè®®     ä¸åè®¸\nhttp://70.32.92.74/b.js        åååååå¯¹åºIP     ä¸åè®¸\nhttp://script.a.com/b.js       ä¸»åç¸åå­åä¸å      ä¸åè®¸\nhttp://a.com/b.js              åä¸ååï¼ä¸åäºçº§åå   ä¸åè®¸\nhttp://www.b.com/b.js          ä¸ååå          ä¸åè®¸\n\n> 1ã éè¿jsonpè·¨å: ç´æ¥è¯·æ±æä»¶ä¸è¡ï¼è¯·æ±JSå¯ä»¥ï¼æä»¬å°±ææ°æ®ä»¥JSONæ ¼å¼è£è¿JSæä»¶éï¼å¶å®jsonpæ¯ååç«¯å±åçº¦å®çä¸ç§ç»æã\n\n// jsonpåç(åªæ¯ægetè¯·æ±)\n// 1. åå»ºä¸ä¸ªå¨æscriptèç¹\nlet jsonp = document.createElement(\'script\');\n// 2. å£°ææ¥æ¶æ°æ®çåè°å½æ°\nfunction res(ev) {\n  // evæ¥æ¶çå°±æ¯æå¡ç«¯åå¤çæ°æ®\n  console.log(ev)\n}\n// 3. ä¸ºèç¹è®¾ç½®srcå±æ§, srcå±æ§ä¸ºgetè¯·æ±, åé¢æ¼æ¥ä¸ä¸ªåè°å½æ°\njsonp.src = \'http://www.ceshi.com/api/jsonp?callback=res\';\n// 4. å°èç¹æå¥é¡µé¢\nlet head = document.querySelector(\'head\');\nhead.appendChild(jsonp);\n// 5. è·åå®æ°æ®å é¤èç¹\nhead.removeChild(jsonp);\n\n\næ¥æ¶å°çæå¡ç«¯è¿ååå®¹ä¸º:\n\nres({"message":"JSONPè¯·æ±æµè¯æå","data":{}})\n\n\nå¯ä»¥ççè¿åçåå®¹, æ¯æä»¬ä¹åä¼ å¥çåæ°res, resè¢«ä½ä¸ºä¸ä¸ªå½æ°è°ç¨äº, èä¼ éçæ°æ®ä½ä¸ºè¯¥åè°å½æ°çå®åä¼ éäºè¿æ¥, å¨scriptæ ç­¾æ§è¡çæ¶å, å°±ç¸å½äºæ§è¡äºres()è¿ä¸ªå½æ°, æ¬å·åé¨çæ°æ®ä¹å°±åæäºåæ°, å¯ä»¥ç´æ¥è¢«å½æ°æ¥æ¶å¤ç, å¦æ­¤ä¾¿å®ç°äºè·¨åè·åæ°æ®ã\n\n> 2ã document.domain + iframeè·¨å: news.baidu.comåmap.baidu.comçä¸çº§ååç¸åï¼æå¯ä»¥è®¾ç½®document.domain = âbaidu.comâ;å°±å¯ä»¥è·¨å\n> \n> 3ã location.hash + iframe\n> \n> 4ã window.name + iframeè·¨å\n> \n> 5ã postMessageè·¨å\n> \n> 6ã è·¨åèµæºå±äº«ï¼CORSï¼ Access-Control-Allow-Origin: *\n> \n> ä¸»è¦éè¿åç«¯æ¥éç½®ï¼CORSè§èå°è¯·æ±åä¸ºä¸¤ç§ç±»åï¼ä¸ç§æ¯ç®åè¯·æ±ï¼ä¸ç§æ¯å¸¦é¢æ£çéç®åè¯·æ±ã å¦ææ¯ç®åè¯·æ±ï¼å°±åæ§è¡æå¡ç«¯ç¨åºï¼ç¶åæµè§å¨æä¼å¤æ­æ¯å¦è·¨åï¼GET HEAD,POST èå¯¹äºéç®åè¯·æ±ï¼æµè§å¨ä¼å¨åéå®éè¯·æ±ä¹åååéä¸ä¸ªOPTIONSçHTTPè¯·æ±æ¥å¤æ­æå¡å¨æ¯å¦è½æ¥åè¯¥è·¨å è¯·æ±ï¼å¦æä¸è½æ¥åçè¯ï¼æµè§å¨ä¼ç´æ¥é»æ­¢æ¥ä¸æ¥å®éè¯·æ±çåçã æå¡ç«¯å¯ä»¥è®¾ç½®æºå¸¦cooike\n> \n> 7ã nginxä»£çè·¨å\n> \n> æ­£åä»£çï¼æä»¬å°è¯·æ±åéç»ä»£çæå¡å¨ï¼ä»£çæå¡å¨å»è®¿é®ï¼ç¶åå°è®¿é®å°çæ°æ®ä¼ éç»æä»¬ãéèäºå®¢æ·ç«¯\n> \n> ååä»£çï¼å¨æå¡å¨ç«¯ï¼æå¾å¤æå¡å¨å¤çè¯·æ±ï¼nginxæ®æ¼çå°±æ¯ä¸ä¸ªååä»£çè§è²ï¼éèäºæå¡å¨ã å¯å¨nginxæå¡å¨æserver_nameè®¾ç½®æåç«¯çååï¼æ­¤æ¶åç«¯åèµ·çè¯·æ±ç¸å½äºæ¯localhostå¯¹localhostå èµ·ï¼è¿æ ·æ¯ä¸ä¼å¼èµ·è·¨åçã\n> \n> 8ã nodejsä¸­é´ä»¶ä»£çè·¨å ä¸nginxä»£çè·¨åç±»ä¼¼\n> \n> 9ã WebSocketåè®®è·¨å WebSocket protocolæ¯HTML5ä¸ç§æ°çåè®®ãå®å®ç°äºæµè§å¨ä¸æå¡å¨å¨åå·¥éä¿¡ï¼åæ¶åè®¸è·¨åéè®¯\n> \n> 10ãwebpackçproxyï¼webpackçdev-serveræ¨¡åä¼å¯å¨ä¸ä¸ªæå¡å¨ï¼è¿ä¸ªæå¡å¨ä¸æ­¢å¸®æä»¬åäºèªå¨æ´æ°ï¼åæ¶ä¹å¯ä»¥åå°ååä»£çãå°±æ¯æä»¬æè¯·æ±åéç»webpack-dev-server, ç¶åwebpack-dev-serveråå»è¯·æ±åç«¯æå¡å¨ï¼æå¡ä¹é´çè¯·æ±æ¯æ²¡æè·¨åé®é¢ç\n\næ­£åä»£ç&ååä»£ç\n\n\n# è¾å¥ååå°å±ç¤ºé¡µé¢åçäºä»ä¹\n\n(è¶è¯¦ç»ï¼ä»è¾å¥urlå°é¡µé¢å±ç¤ºåçäºä»ä¹ï¼\n\n> DNSï¼Domain Name Systemï¼ååç³»ç»ï¼ï¼ç®åçè¯´ï¼å°±æ¯ææä»¬è¾å¥çç½ç«ååç¿»è¯æIPå°åçç³»ç».\n> \n> 1.å¨æµè§å¨ä¸­è¾å¥url\n> \n> 2.å®¢æ·ç«¯åæ£æ¥æ¬å°æ¯å¦æå¯¹åºçIPå°åï¼è¥æ¾å°åè¿åååºçIPå°åãè¥æ²¡æ¾å°åè¯·æ±ä¸çº§DNSæå¡å¨ï¼ç´è³æ¾å°\n> \n> 3.æäºæå¡å¨çIPï¼ æµè§å¨å°±è¦å¯ä»¥åèµ·HTTPè¯·æ±äº,èç³»ä¹åçHTTPåHTTPS\n> \n> 4.Httpä¼åºäºTCPå»ºç«èµ·ä¸ä¸ªå°æå¡å¨çè¿æ¥ééï¼TCPæ¯é¢åè¿æ¥å¯é çæå¡ï¼èç³»ä¸æ¬¡æ¡æåæ¬¡æ¡æ Udpæ¯æ è¿æ¥çï¼æ³åå°±åï¼ä¸ä¼å¯¹æ°æ®è¿è¡å°è£ãéç¨äºå®æ¶åºç¨ï¼å°±æ¯å¦è§é¢é¢è¯ãTCPå¯é ï¼ç¨äºæä»¶ä¼ è¾ã\n> \n> 5.ä¼ è¾å±ä¸é¢æ¯ç½ç»å±ï¼ä½ç¨æ¯æTCPåå²å¥½çåç§æ°æ®åä¼ éç»æ¥æ¶æ¹ï¼è¿ééè¦ç¨å°macå°åï¼ä¸ä¸ªç½ç»è®¾å¤çIPå° åå¯ä»¥æ´æ¢ï¼ä½æ¯MACå°åä¸è¬æ¯åºå®ä¸åç.ARPåè®®å¯ä»¥å°IPå°åè§£ææå¯¹åºçMACå°åã\n> \n> 6.å¨æ¾å°å¯¹æ¹çMACå°ååï¼å°±å°æ°æ®åéå°æ°æ®é¾è·¯å±ä¼ è¾ãè¿æ¶ï¼å®¢æ·ç«¯åéè¯·æ±çé¶æ®µç»æ\n> \n> 7.æ¥æ¶ç«¯çæå¡å¨å¨é¾è·¯å±æ¥æ¶å°æ°æ®åï¼åå±å±åä¸ç´å°åºç¨å±ãè¿è¿ç¨ä¸­åæ¬å¨è¿è¾å±éè¿TCPåè®®è®²åæ®µçæ°æ®åéæ°ç»æåæ¥çHTTPè¯·æ±æ¥æ,è¿åååºæ¥æï¼èç³»è¿åç ã\n> \n> 8.è¯·æ±æåä¹åï¼æå¡å¨ä¼è¿åååºçHTMLæä»¶ï¼æ¥ä¸æ¥å°±å°é¡µé¢æ¸²æäºï¼èç³»å°æ¸²æå¼æã\n> \n> 9.æå»ºdomæ ->è®¡ç®DOMæ æ¯ä¸ªç»ç¹çæ ·å¼->é¡µé¢å¸å±->çæåå±æ ->æ æ ¼åï¼è½¬åä¸ºä½å¾ï¼GPUå¯ä»¥å¤çï¼->æ¾ç¤º\n\n\n# å¸¸è§çç¶æç \n\nç¶æç \n\n\n# getä¸postçåºå«\n\n> GETè¯·æ±ï¼è¯·æ±çæ°æ®ä¼éå å¨URLä¹åï¼ä»¥?åå²URLåä¼ è¾æ°æ®ï¼å¤ä¸ªåæ°ç¨&è¿æ¥ï¼ä¼ è¾æ°æ®ä¼åURLé¿åº¦éå¶ POSTè¯·æ±ï¼POSTè¯·æ±ä¼æè¯·æ±çæ°æ®æ¾ç½®å¨HTTPè¯·æ±åçåä½ä¸­ï¼æ°æ®ä¸åéå¶ï¼æ°æ®ä¸æ´é²ä¼æ´å®å¨\n\n * GET æ¹æ³åæ°åæ³æ¯åºå®çåï¼\n\nå¨çº¦å®ä¸­ï¼æä»¬çåæ°æ¯åå¨ ? åé¢ï¼ç¨ & åå²ã\n\næä»¬ç¥éï¼è§£ææ¥æçè¿ç¨æ¯éè¿è·å TCP æ°æ®ï¼ç¨æ­£åç­å·¥å·ä»æ°æ®ä¸­è·å Header å Bodyï¼ä»èæååæ°ã\n\nä¹å°±æ¯è¯´ï¼æä»¬å¯ä»¥èªå·±çº¦å®åæ°çåæ³ï¼åªè¦æå¡ç«¯è½å¤è§£éåºæ¥å°±è¡ã\n\n * POST æ¹æ³æ¯ GET æ¹æ³å®å¨ï¼\n\næç§ç½ä¸å¤§é¨åæç« çè§£éï¼POST æ¯ GET å®å¨ï¼å ä¸ºæ°æ®å¨å°åæ ä¸ä¸å¯è§ã\n\nç¶èï¼ä»ä¼ è¾çè§åº¦æ¥è¯´ï¼ä»ä»¬é½æ¯ä¸å®å¨çï¼å ä¸º HTTP å¨ç½ç»ä¸æ¯ææä¼ è¾çï¼åªè¦å¨ç½ç»èç¹ä¸æåï¼å°±è½å®æ´å°è·åæ°æ®æ¥æã\n\nè¦æ³å®å¨ä¼ è¾ï¼å°±åªæå å¯ï¼ä¹å°±æ¯ HTTPSã\n\n * GET æ¹æ³çé¿åº¦éå¶æ¯æä¹åäºï¼\n\nå¨ç½ä¸çå°å¾å¤å³äºä¸¤èåºå«çæç« é½æè¿ä¸æ¡ï¼æå°æµè§å¨å°åæ è¾å¥çåæ°æ¯æéçã\n\né¦åè¯´æä¸ç¹ï¼HTTP åè®®æ²¡æ Body å URL çé¿åº¦éå¶ï¼å¯¹ URL éå¶çå¤§å¤æ¯æµè§å¨åæå¡å¨çåå ã\n\næµè§å¨åå å°±ä¸è¯´äºï¼æå¡å¨æ¯å ä¸ºå¤çé¿ URL è¦æ¶èæ¯è¾å¤çèµæºï¼ä¸ºäºæ§è½åå®å¨ï¼é²æ­¢æ¶ææé é¿ URL æ¥æ»å»ï¼èèï¼ä¼ç» URL é¿åº¦å éå¶ã\n\n * POST æ¹æ³ä¼äº§çä¸¤ä¸ª TCP æ°æ®åï¼\n\næäºæç« ä¸­æå°ï¼post ä¼å° header å body åå¼åéï¼ååé headerï¼æå¡ç«¯è¿å 100 ç¶æç ååé bodyã\n\nHTTP åè®®ä¸­æ²¡ææç¡®è¯´æ POST ä¼äº§çä¸¤ä¸ª TCP æ°æ®åï¼èä¸å®éæµè¯(Chrome)åç°ï¼header å body ä¸ä¼åå¼åéãæä»¥ï¼header å body åå¼åéæ¯é¨åæµè§å¨ææ¡æ¶çè¯·æ±æ¹æ³ï¼ä¸å±äº post å¿ç¶è¡ä¸º\n\n\n# åå¾åæ¶æºå¶ï¼GCç®æ³ï¼\n\nGCç®æ³ï¼V8å¼æ\n\n\n# JSéå¼è½¬æ¢ä¸æ¾ç¤ºè½¬æ¢\n\n\n# éå¼è½¬æ¢\n\n> 1.undefinedä¸nullç¸ç­ï¼ä½ä¸æç­ï¼===ï¼ 2.ä¸ä¸ªæ¯numberä¸ä¸ªæ¯stringæ¶ï¼ä¼å°è¯å°stringè½¬æ¢ä¸ºnumber 3.éå¼è½¬æ¢å°booleanè½¬æ¢ä¸ºnumberï¼0æ1 4.éå¼è½¬æ¢å°Objectè½¬æ¢ænumberæstringï¼åå³äºå¦å¤ä¸ä¸ªå¯¹æ¯éçç±»å 5.å¯¹äº0ãç©ºå­ç¬¦ä¸²çå¤æ­ï¼å»ºè®®ä½¿ç¨ â===â ã 6.â==âä¼å¯¹ä¸åç±»åå¼è¿è¡ç±»åè½¬æ¢åå¤æ­ï¼â===âåä¸ä¼ãå®ä¼åå¤æ­ä¸¤è¾¹çå¼ç±»åï¼ç±»åä¸å¹éæ¶ç´æ¥ä¸ºfalseã\n\nundefined == null;  // true   \n== true;  // true  \n== true;  // false  \n== false;  // true\n== \'\';  // true   \nNaN == NaN;  // false  NaNä¸ç­äºä»»ä½å¼\n[] == false;  // true  \n[] == ![];  // true           !ä¼å°å¶è½¬ä¸ºå¸å°å¼ï¼![]çå¼ä¸ºfalseï¼==æä½ç¬¦å°falseè½¬ä¸º0ï¼[]==0\n\'6\' - \'3\'  // 3               []ä¹ä¼è½¬ä¸ºæ°å­0   0==0\n{} == !{}  //false           {} == false  ->  {} == 0  ->   NaN == 0    ->  false\n1234 + \'abcd\' // "1234abcd"\n\n\n\n# æ¾å¼è½¬æ¢\n\n> æ¾ç¤ºè½¬æ¢ä¸è¬æä½¿ç¨NumberãStringåBooleanä¸ä¸ªæé å½æ°ï¼æå¨å°åç§ç±»åçå¼ï¼è½¬æ¢ææ°å­ãå­ç¬¦ä¸²æèå¸å°å¼ã\n\nNumber(\'1234\') // 1234\nNumber(\'1234abcd\') // NaN\nNumber(\'\') // 0\nNumber(true) // 1\nNumber(null) // 0\nNumber(undefined) // NaN\nString(1234)  // "1234"\nString(\'abcd\')  // "abcd"\nString(true)  // "true"\nString(undefined) // "undefined"\nString(null)  // "null"\nBoolean(0)  // false\nBoolean(undefined)  // false\nBoolean(null)  // false\nBoolean(NaN)  // false\nBoolean(\'\')  // false\n\n\n\n# å éå°é¢\n\n[]+{}     //"[object Object]"\n{}+[]     //0\n1+-\'1\'+1  //1\n\'A\'-\'B\'   //NaN\n\n\n\n# å¯¹è±¡çé®æ¯æä»ä¹ç±»å\n\nå­ç¬¦ä¸²æsymbol\n\nconst person = {\n   \tname: \'yd\',\n    [Symbol()]: 18\n}\n',normalizedContent:'# é¢è¯é¢ï¼äºï¼\n\n * ä½¿ç¨æ­£åå¤æ­é®ç®±æ¯å¦åæ³\n * cooike,sessionstorge,localstorgeçåºå«\n * http å https\n * æä¹è§£å³è·¨åé®é¢\n * è¾å¥ååå°å±ç¤ºé¡µé¢åçäºä»ä¹\n * å¸¸è§çç¶æç \n * getä¸postçåºå«\n * åå¾åæ¶æºå¶ï¼gcç®æ³ï¼\n * jséå¼è½¬æ¢ä¸æ¾ç¤ºè½¬æ¢\n * å¯¹è±¡çé®æ¯æä»ä¹ç±»å\n\n\n# ä½¿ç¨æ­£åå¤æ­é®ç®±æ¯å¦åæ³\n\nconst pattern = /^([a-za-z0-9_\\-\\.])+\\@([a-za-z0-9_\\-\\.])+\\.([a-za-z]{2,4})$/;\n//å­ç¬¦+@+å­ç¬¦+.+å­æ¯\npattern.test(str) // true or false\n\n\n> æ­£ååºæ¬ç¥è¯\n\n//1.æ¨ªåæ¨¡ç³å¹é,ä¸ä¸ªæ­£åå¯å¹éçå­ç¬¦ä¸²çé¿åº¦ä¸æ¯åºå®ç\n//æ¯å¦/ab{2,5}c/è¡¨ç¤ºå¹éè¿æ ·ä¸ä¸ªå­ç¬¦ä¸²ï¼ç¬¬ä¸ä¸ªå­ç¬¦æ¯âaâï¼æ¥ä¸æ¥æ¯2å°5ä¸ªå­ç¬¦âbâï¼æåæ¯å­ç¬¦âcâ\nvar regex = /ab{2,5}c/g;\nvar string = "abc abbc abbbc abbbbc abbbbbc abbbbbbc";\nconsole.log( string.match(regex) ); \n// => ["abbc", "abbbc", "abbbbc", "abbbbbc"]\n\n//2.çºµåæ¨¡ç³å¹éï¼ä¸ä¸ªæ­£åå¹éçå­ç¬¦ä¸²ï¼å·ä½å°æä¸ä½å­ç¬¦æ¶ï¼å®å¯ä»¥ä¸æ¯æä¸ªç¡®å®çå­ç¬¦\n//æ¯å¦/a[123]b/å¯ä»¥å¹éå¦ä¸ä¸ç§å­ç¬¦ä¸²ï¼"a1b"ã"a2b"ã"a3b"ãæµè¯å¦ä¸ï¼\nvar regex = /a[123]b/g;\nvar string = "a0b a1b a2b a3b a4b";\nconsole.log( string.match(regex) ); \n// => ["a1b", "a2b", "a3b"]\n\n//3.èå´è¡¨ç¤ºæ³ï¼æ¯å¦[123456abcdefghijklm]ï¼å¯ä»¥åæ[1-6a-fg-m]\n//è¦å¹éâaâãâ-âãâzâè¿ä¸èä¸­ä»»æä¸ä¸ªå­ç¬¦ï¼ä¸è½åæ[a-z]ï¼å¯ä»¥åæå¦ä¸çæ¹å¼ï¼[-az]æ[az-]æ[a\\-z]\n\n//4.æé¤å­ç¬¦ç»\nvar regex = = /[^abc]/\n\n//5.å¸¸è§ç®å\n/*\n\\då°±æ¯[0-9]ãè¡¨ç¤ºæ¯ä¸ä½æ°å­ãè®°å¿æ¹å¼ï¼å¶è±ææ¯digitï¼æ°å­ï¼ã\n\\då°±æ¯[^0-9]ãè¡¨ç¤ºé¤æ°å­å¤çä»»æå­ç¬¦ã\n\\wå°±æ¯[0-9a-za-z_]ãè¡¨ç¤ºæ°å­ãå¤§å°åå­æ¯åä¸åçº¿ãè®°å¿æ¹å¼ï¼wæ¯wordçç®åï¼ä¹ç§°åè¯å­ç¬¦ã\n\\wæ¯[^0-9a-za-z_]ãéåè¯å­ç¬¦ã\n\\sæ¯[ \\t\\v\\n\\r\\f]ãè¡¨ç¤ºç©ºç½ç¬¦ï¼åæ¬ç©ºæ ¼ãæ°´å¹³å¶è¡¨ç¬¦ãåç´å¶è¡¨ç¬¦ãæ¢è¡ç¬¦ãåè½¦ç¬¦ãæ¢é¡µç¬¦ãè®°å¿æ¹å¼ï¼sæ¯space characterçé¦å­æ¯ã\n\\sæ¯[^ \\t\\v\\n\\r\\f]ã éç©ºç½ç¬¦ã\n.ééç¬¦ï¼è¡¨ç¤ºå ä¹ä»»æå­ç¬¦ã\n*/\n\n//6.å¤éåæ¯\nvar regex = /good|nice/g;\nvar string = "good idea, nice try.";\nconsole.log( string.match(regex) ); \n// => ["good", "nice"]\n\n//7. ^ä»£è¡¨å¼å¤´ï¼$ä»£è¡¨ç»å°¾\n\n\n\n# cooike,sessionstorge,localstorgeçåºå«\n\n> cooikeå§ç»å¨åæºçhttpè¯·æ±ä¸­æºå¸¦ï¼ä¼å¨æµè§å¨åæå¡å¨ä¹é´ä¼ éã sessionstorgeålocalstorgeä¸ä¼åéç»æå¡å¨ï¼ä»å¨æ¬å°ä¿å­ cooikeä¸è½è¶è¿4kï¼sessionålocalä¸è¬å°äº5m localstorgeå­å¨çæ¯æä¹æ°æ®ï¼æµè§å¨å³é­ä¸ä¸¢å¤±ãsessionstorgeå¨å³é­çªå£åä¼èªå¨å é¤ã\n\n\n# http å https\n\n> httpså¹¶éåºç¨å±çä¸ç§æ°åè®®ï¼åªæ¯httpéä¿¡æ¥å£é¨åç¨ssl/tlsåè®®ä»£æ¿èå·²ã sslåtlsé½æ¯å å¯åè®® éå¸¸httpç´æ¥åtcpéä¿¡ï¼å½ä½¿ç¨sslæ¶åæ¼åæååssléä¿¡ï¼åç±sslåtcpéä¿¡ã æè°httpsï¼å¶å®å°±æ¯èº«æ«sslåè®®è¿å±å¤å£³çhttpãï¼åå¿ä¸ä¸osi7å±,tcp/ip4å±ï¼æä»¬å­¦çæ¯5å±ï¼\n> \n> sslåè®®éç¨çæ¯éå¯¹ç§°å å¯ç®æ³ï¼å®¢æ·ç«¯ååæå¡å¨ç«¯ç´¢è¦å¬é¥ï¼ç¶åç¨å¬é¥å å¯ä¿¡æ¯ï¼æå¡å¨æ¶å°å¯æåï¼ç¨èªå·±çç§é¥è§£å¯.\n> \n> rsaç®æ³ï¼ä¸¤ä¸ªå¤§ç´ æ°p,qï¼n=pq,f(n)=(p-1)(q-1),1<b<f(n),a=b^-1modf(n),å¬é¥n,b,ç§é¥p,q,a\n> \n> è¯ä¹¦ï¼é¡¾åæä¹ï¼å°±æ¯è¯æçæä»¶ãä¾å¦æµè§å¨å tlanyan.me æå¡å¨éä¿¡ï¼æµè§å¨æä¹ç¥éå¯¹æ¹å°±æ¯ tlanyan.me å¯¹åºçæå¡å¨å¢ï¼å¨ä¸å¯ä¿¡çç½ç»ä¸éä¿¡ï¼ä¸­ç«çç¬¬ä¸æ¹ä½ç¨å°±æ¾ç°åºæ¥äºãæå¨çç¬¬ä¸æ¹ä¸­ç«æºæï¼ certificate authority, caï¼æ¶å° tlanyan.me ææèçè¯ä¹¦è¯·æ±å¹¶æ ¸éªä¿¡æ¯åï¼å°ææèçåç§°ãå¬é¥ä¸ ca ç¨ç§é¥çæçæ°å­ç­¾åç­ä¿¡æ¯åæè¯ä¹¦é¢åç»ç³è¯·èã\n\n\n# æä¹è§£å³è·¨åé®é¢\n\nhttp://www.a.com/a.js è®¿é®ä»¥ä¸urlçç»æ\n\nurl                            è¯´æ            æ¯å¦åè®¸éä¿¡\nhttp://www.a.com/b.js          åä¸ååä¸         åè®¸\nhttp://www.a.com/script/b.js   åä¸ååä¸ä¸åæä»¶     åè®¸\nhttp://www.a.com:8000/b.js     åä¸ååï¼ä¸åç«¯å£     ä¸åè®¸\nhttps://www.a.com/b.js         åä¸ååï¼ä¸ååè®®     ä¸åè®¸\nhttp://70.32.92.74/b.js        åååååå¯¹åºip     ä¸åè®¸\nhttp://script.a.com/b.js       ä¸»åç¸åå­åä¸å      ä¸åè®¸\nhttp://a.com/b.js              åä¸ååï¼ä¸åäºçº§åå   ä¸åè®¸\nhttp://www.b.com/b.js          ä¸ååå          ä¸åè®¸\n\n> 1ã éè¿jsonpè·¨å: ç´æ¥è¯·æ±æä»¶ä¸è¡ï¼è¯·æ±jså¯ä»¥ï¼æä»¬å°±ææ°æ®ä»¥jsonæ ¼å¼è£è¿jsæä»¶éï¼å¶å®jsonpæ¯ååç«¯å±åçº¦å®çä¸ç§ç»æã\n\n// jsonpåç(åªæ¯ægetè¯·æ±)\n// 1. åå»ºä¸ä¸ªå¨æscriptèç¹\nlet jsonp = document.createelement(\'script\');\n// 2. å£°ææ¥æ¶æ°æ®çåè°å½æ°\nfunction res(ev) {\n  // evæ¥æ¶çå°±æ¯æå¡ç«¯åå¤çæ°æ®\n  console.log(ev)\n}\n// 3. ä¸ºèç¹è®¾ç½®srcå±æ§, srcå±æ§ä¸ºgetè¯·æ±, åé¢æ¼æ¥ä¸ä¸ªåè°å½æ°\njsonp.src = \'http://www.ceshi.com/api/jsonp?callback=res\';\n// 4. å°èç¹æå¥é¡µé¢\nlet head = document.queryselector(\'head\');\nhead.appendchild(jsonp);\n// 5. è·åå®æ°æ®å é¤èç¹\nhead.removechild(jsonp);\n\n\næ¥æ¶å°çæå¡ç«¯è¿ååå®¹ä¸º:\n\nres({"message":"jsonpè¯·æ±æµè¯æå","data":{}})\n\n\nå¯ä»¥ççè¿åçåå®¹, æ¯æä»¬ä¹åä¼ å¥çåæ°res, resè¢«ä½ä¸ºä¸ä¸ªå½æ°è°ç¨äº, èä¼ éçæ°æ®ä½ä¸ºè¯¥åè°å½æ°çå®åä¼ éäºè¿æ¥, å¨scriptæ ç­¾æ§è¡çæ¶å, å°±ç¸å½äºæ§è¡äºres()è¿ä¸ªå½æ°, æ¬å·åé¨çæ°æ®ä¹å°±åæäºåæ°, å¯ä»¥ç´æ¥è¢«å½æ°æ¥æ¶å¤ç, å¦æ­¤ä¾¿å®ç°äºè·¨åè·åæ°æ®ã\n\n> 2ã document.domain + iframeè·¨å: news.baidu.comåmap.baidu.comçä¸çº§ååç¸åï¼æå¯ä»¥è®¾ç½®document.domain = âbaidu.comâ;å°±å¯ä»¥è·¨å\n> \n> 3ã location.hash + iframe\n> \n> 4ã window.name + iframeè·¨å\n> \n> 5ã postmessageè·¨å\n> \n> 6ã è·¨åèµæºå±äº«ï¼corsï¼ access-control-allow-origin: *\n> \n> ä¸»è¦éè¿åç«¯æ¥éç½®ï¼corsè§èå°è¯·æ±åä¸ºä¸¤ç§ç±»åï¼ä¸ç§æ¯ç®åè¯·æ±ï¼ä¸ç§æ¯å¸¦é¢æ£çéç®åè¯·æ±ã å¦ææ¯ç®åè¯·æ±ï¼å°±åæ§è¡æå¡ç«¯ç¨åºï¼ç¶åæµè§å¨æä¼å¤æ­æ¯å¦è·¨åï¼get head,post èå¯¹äºéç®åè¯·æ±ï¼æµè§å¨ä¼å¨åéå®éè¯·æ±ä¹åååéä¸ä¸ªoptionsçhttpè¯·æ±æ¥å¤æ­æå¡å¨æ¯å¦è½æ¥åè¯¥è·¨å è¯·æ±ï¼å¦æä¸è½æ¥åçè¯ï¼æµè§å¨ä¼ç´æ¥é»æ­¢æ¥ä¸æ¥å®éè¯·æ±çåçã æå¡ç«¯å¯ä»¥è®¾ç½®æºå¸¦cooike\n> \n> 7ã nginxä»£çè·¨å\n> \n> æ­£åä»£çï¼æä»¬å°è¯·æ±åéç»ä»£çæå¡å¨ï¼ä»£çæå¡å¨å»è®¿é®ï¼ç¶åå°è®¿é®å°çæ°æ®ä¼ éç»æä»¬ãéèäºå®¢æ·ç«¯\n> \n> ååä»£çï¼å¨æå¡å¨ç«¯ï¼æå¾å¤æå¡å¨å¤çè¯·æ±ï¼nginxæ®æ¼çå°±æ¯ä¸ä¸ªååä»£çè§è²ï¼éèäºæå¡å¨ã å¯å¨nginxæå¡å¨æserver_nameè®¾ç½®æåç«¯çååï¼æ­¤æ¶åç«¯åèµ·çè¯·æ±ç¸å½äºæ¯localhostå¯¹localhostå èµ·ï¼è¿æ ·æ¯ä¸ä¼å¼èµ·è·¨åçã\n> \n> 8ã nodejsä¸­é´ä»¶ä»£çè·¨å ä¸nginxä»£çè·¨åç±»ä¼¼\n> \n> 9ã websocketåè®®è·¨å websocket protocolæ¯html5ä¸ç§æ°çåè®®ãå®å®ç°äºæµè§å¨ä¸æå¡å¨å¨åå·¥éä¿¡ï¼åæ¶åè®¸è·¨åéè®¯\n> \n> 10ãwebpackçproxyï¼webpackçdev-serveræ¨¡åä¼å¯å¨ä¸ä¸ªæå¡å¨ï¼è¿ä¸ªæå¡å¨ä¸æ­¢å¸®æä»¬åäºèªå¨æ´æ°ï¼åæ¶ä¹å¯ä»¥åå°ååä»£çãå°±æ¯æä»¬æè¯·æ±åéç»webpack-dev-server, ç¶åwebpack-dev-serveråå»è¯·æ±åç«¯æå¡å¨ï¼æå¡ä¹é´çè¯·æ±æ¯æ²¡æè·¨åé®é¢ç\n\næ­£åä»£ç&ååä»£ç\n\n\n# è¾å¥ååå°å±ç¤ºé¡µé¢åçäºä»ä¹\n\n(è¶è¯¦ç»ï¼ä»è¾å¥urlå°é¡µé¢å±ç¤ºåçäºä»ä¹ï¼\n\n> dnsï¼domain name systemï¼ååç³»ç»ï¼ï¼ç®åçè¯´ï¼å°±æ¯ææä»¬è¾å¥çç½ç«ååç¿»è¯æipå°åçç³»ç».\n> \n> 1.å¨æµè§å¨ä¸­è¾å¥url\n> \n> 2.å®¢æ·ç«¯åæ£æ¥æ¬å°æ¯å¦æå¯¹åºçipå°åï¼è¥æ¾å°åè¿åååºçipå°åãè¥æ²¡æ¾å°åè¯·æ±ä¸çº§dnsæå¡å¨ï¼ç´è³æ¾å°\n> \n> 3.æäºæå¡å¨çipï¼ æµè§å¨å°±è¦å¯ä»¥åèµ·httpè¯·æ±äº,èç³»ä¹åçhttpåhttps\n> \n> 4.httpä¼åºäºtcpå»ºç«èµ·ä¸ä¸ªå°æå¡å¨çè¿æ¥ééï¼tcpæ¯é¢åè¿æ¥å¯é çæå¡ï¼èç³»ä¸æ¬¡æ¡æåæ¬¡æ¡æ udpæ¯æ è¿æ¥çï¼æ³åå°±åï¼ä¸ä¼å¯¹æ°æ®è¿è¡å°è£ãéç¨äºå®æ¶åºç¨ï¼å°±æ¯å¦è§é¢é¢è¯ãtcpå¯é ï¼ç¨äºæä»¶ä¼ è¾ã\n> \n> 5.ä¼ è¾å±ä¸é¢æ¯ç½ç»å±ï¼ä½ç¨æ¯ætcpåå²å¥½çåç§æ°æ®åä¼ éç»æ¥æ¶æ¹ï¼è¿ééè¦ç¨å°macå°åï¼ä¸ä¸ªç½ç»è®¾å¤çipå° åå¯ä»¥æ´æ¢ï¼ä½æ¯macå°åä¸è¬æ¯åºå®ä¸åç.arpåè®®å¯ä»¥å°ipå°åè§£ææå¯¹åºçmacå°åã\n> \n> 6.å¨æ¾å°å¯¹æ¹çmacå°ååï¼å°±å°æ°æ®åéå°æ°æ®é¾è·¯å±ä¼ è¾ãè¿æ¶ï¼å®¢æ·ç«¯åéè¯·æ±çé¶æ®µç»æ\n> \n> 7.æ¥æ¶ç«¯çæå¡å¨å¨é¾è·¯å±æ¥æ¶å°æ°æ®åï¼åå±å±åä¸ç´å°åºç¨å±ãè¿è¿ç¨ä¸­åæ¬å¨è¿è¾å±éè¿tcpåè®®è®²åæ®µçæ°æ®åéæ°ç»æåæ¥çhttpè¯·æ±æ¥æ,è¿åååºæ¥æï¼èç³»è¿åç ã\n> \n> 8.è¯·æ±æåä¹åï¼æå¡å¨ä¼è¿åååºçhtmlæä»¶ï¼æ¥ä¸æ¥å°±å°é¡µé¢æ¸²æäºï¼èç³»å°æ¸²æå¼æã\n> \n> 9.æå»ºdomæ ->è®¡ç®domæ æ¯ä¸ªç»ç¹çæ ·å¼->é¡µé¢å¸å±->çæåå±æ ->æ æ ¼åï¼è½¬åä¸ºä½å¾ï¼gpuå¯ä»¥å¤çï¼->æ¾ç¤º\n\n\n# å¸¸è§çç¶æç \n\nç¶æç \n\n\n# getä¸postçåºå«\n\n> getè¯·æ±ï¼è¯·æ±çæ°æ®ä¼éå å¨urlä¹åï¼ä»¥?åå²urlåä¼ è¾æ°æ®ï¼å¤ä¸ªåæ°ç¨&è¿æ¥ï¼ä¼ è¾æ°æ®ä¼åurlé¿åº¦éå¶ postè¯·æ±ï¼postè¯·æ±ä¼æè¯·æ±çæ°æ®æ¾ç½®å¨httpè¯·æ±åçåä½ä¸­ï¼æ°æ®ä¸åéå¶ï¼æ°æ®ä¸æ´é²ä¼æ´å®å¨\n\n * get æ¹æ³åæ°åæ³æ¯åºå®çåï¼\n\nå¨çº¦å®ä¸­ï¼æä»¬çåæ°æ¯åå¨ ? åé¢ï¼ç¨ & åå²ã\n\næä»¬ç¥éï¼è§£ææ¥æçè¿ç¨æ¯éè¿è·å tcp æ°æ®ï¼ç¨æ­£åç­å·¥å·ä»æ°æ®ä¸­è·å header å bodyï¼ä»èæååæ°ã\n\nä¹å°±æ¯è¯´ï¼æä»¬å¯ä»¥èªå·±çº¦å®åæ°çåæ³ï¼åªè¦æå¡ç«¯è½å¤è§£éåºæ¥å°±è¡ã\n\n * post æ¹æ³æ¯ get æ¹æ³å®å¨ï¼\n\næç§ç½ä¸å¤§é¨åæç« çè§£éï¼post æ¯ get å®å¨ï¼å ä¸ºæ°æ®å¨å°åæ ä¸ä¸å¯è§ã\n\nç¶èï¼ä»ä¼ è¾çè§åº¦æ¥è¯´ï¼ä»ä»¬é½æ¯ä¸å®å¨çï¼å ä¸º http å¨ç½ç»ä¸æ¯ææä¼ è¾çï¼åªè¦å¨ç½ç»èç¹ä¸æåï¼å°±è½å®æ´å°è·åæ°æ®æ¥æã\n\nè¦æ³å®å¨ä¼ è¾ï¼å°±åªæå å¯ï¼ä¹å°±æ¯ httpsã\n\n * get æ¹æ³çé¿åº¦éå¶æ¯æä¹åäºï¼\n\nå¨ç½ä¸çå°å¾å¤å³äºä¸¤èåºå«çæç« é½æè¿ä¸æ¡ï¼æå°æµè§å¨å°åæ è¾å¥çåæ°æ¯æéçã\n\né¦åè¯´æä¸ç¹ï¼http åè®®æ²¡æ body å url çé¿åº¦éå¶ï¼å¯¹ url éå¶çå¤§å¤æ¯æµè§å¨åæå¡å¨çåå ã\n\næµè§å¨åå å°±ä¸è¯´äºï¼æå¡å¨æ¯å ä¸ºå¤çé¿ url è¦æ¶èæ¯è¾å¤çèµæºï¼ä¸ºäºæ§è½åå®å¨ï¼é²æ­¢æ¶ææé é¿ url æ¥æ»å»ï¼èèï¼ä¼ç» url é¿åº¦å éå¶ã\n\n * post æ¹æ³ä¼äº§çä¸¤ä¸ª tcp æ°æ®åï¼\n\næäºæç« ä¸­æå°ï¼post ä¼å° header å body åå¼åéï¼ååé headerï¼æå¡ç«¯è¿å 100 ç¶æç ååé bodyã\n\nhttp åè®®ä¸­æ²¡ææç¡®è¯´æ post ä¼äº§çä¸¤ä¸ª tcp æ°æ®åï¼èä¸å®éæµè¯(chrome)åç°ï¼header å body ä¸ä¼åå¼åéãæä»¥ï¼header å body åå¼åéæ¯é¨åæµè§å¨ææ¡æ¶çè¯·æ±æ¹æ³ï¼ä¸å±äº post å¿ç¶è¡ä¸º\n\n\n# åå¾åæ¶æºå¶ï¼gcç®æ³ï¼\n\ngcç®æ³ï¼v8å¼æ\n\n\n# jséå¼è½¬æ¢ä¸æ¾ç¤ºè½¬æ¢\n\n\n# éå¼è½¬æ¢\n\n> 1.undefinedä¸nullç¸ç­ï¼ä½ä¸æç­ï¼===ï¼ 2.ä¸ä¸ªæ¯numberä¸ä¸ªæ¯stringæ¶ï¼ä¼å°è¯å°stringè½¬æ¢ä¸ºnumber 3.éå¼è½¬æ¢å°booleanè½¬æ¢ä¸ºnumberï¼0æ1 4.éå¼è½¬æ¢å°objectè½¬æ¢ænumberæstringï¼åå³äºå¦å¤ä¸ä¸ªå¯¹æ¯éçç±»å 5.å¯¹äº0ãç©ºå­ç¬¦ä¸²çå¤æ­ï¼å»ºè®®ä½¿ç¨ â===â ã 6.â==âä¼å¯¹ä¸åç±»åå¼è¿è¡ç±»åè½¬æ¢åå¤æ­ï¼â===âåä¸ä¼ãå®ä¼åå¤æ­ä¸¤è¾¹çå¼ç±»åï¼ç±»åä¸å¹éæ¶ç´æ¥ä¸ºfalseã\n\nundefined == null;  // true   \n== true;  // true  \n== true;  // false  \n== false;  // true\n== \'\';  // true   \nnan == nan;  // false  nanä¸ç­äºä»»ä½å¼\n[] == false;  // true  \n[] == ![];  // true           !ä¼å°å¶è½¬ä¸ºå¸å°å¼ï¼![]çå¼ä¸ºfalseï¼==æä½ç¬¦å°falseè½¬ä¸º0ï¼[]==0\n\'6\' - \'3\'  // 3               []ä¹ä¼è½¬ä¸ºæ°å­0   0==0\n{} == !{}  //false           {} == false  ->  {} == 0  ->   nan == 0    ->  false\n1234 + \'abcd\' // "1234abcd"\n\n\n\n# æ¾å¼è½¬æ¢\n\n> æ¾ç¤ºè½¬æ¢ä¸è¬æä½¿ç¨numberãstringåbooleanä¸ä¸ªæé å½æ°ï¼æå¨å°åç§ç±»åçå¼ï¼è½¬æ¢ææ°å­ãå­ç¬¦ä¸²æèå¸å°å¼ã\n\nnumber(\'1234\') // 1234\nnumber(\'1234abcd\') // nan\nnumber(\'\') // 0\nnumber(true) // 1\nnumber(null) // 0\nnumber(undefined) // nan\nstring(1234)  // "1234"\nstring(\'abcd\')  // "abcd"\nstring(true)  // "true"\nstring(undefined) // "undefined"\nstring(null)  // "null"\nboolean(0)  // false\nboolean(undefined)  // false\nboolean(null)  // false\nboolean(nan)  // false\nboolean(\'\')  // false\n\n\n\n# å éå°é¢\n\n[]+{}     //"[object object]"\n{}+[]     //0\n1+-\'1\'+1  //1\n\'a\'-\'b\'   //nan\n\n\n\n# å¯¹è±¡çé®æ¯æä»ä¹ç±»å\n\nå­ç¬¦ä¸²æsymbol\n\nconst person = {\n   \tname: \'yd\',\n    [symbol()]: 18\n}\n',charsets:{cjk:!0}},{title:"é¢è¯é¢ï¼å­ï¼",frontmatter:{title:"é¢è¯é¢ï¼å­ï¼",date:"2018-08-03T09:21:01.000Z",categories:"é¢è¯"},regularPath:"/interview/interview-6.html",relativePath:"interview/interview-6.md",key:"v-d8e7da82",path:"/interview/interview-6.html",headers:[{level:2,title:"ä»ä¹æ¯è±ç¦»ææ¡£æµï¼å®ä½ä¸æµ®å¨",slug:"ä»ä¹æ¯è±ç¦»ææ¡£æµ-å®ä½ä¸æµ®å¨",normalizedTitle:"ä»ä¹æ¯è±ç¦»ææ¡£æµï¼å®ä½ä¸æµ®å¨",charIndex:13},{level:2,title:"å¼ç±»åä¸å¼ç¨ç±»åï¼å åæ ",slug:"å¼ç±»åä¸å¼ç¨ç±»å-å åæ ",normalizedTitle:"å¼ç±»åä¸å¼ç¨ç±»åï¼å åæ ",charIndex:31},{level:2,title:"MVCä¸MVVM",slug:"mvcä¸mvvm",normalizedTitle:"mvcä¸mvvm",charIndex:47},{level:2,title:"cookieåsessionçåºå«",slug:"cookieåsessionçåºå«",normalizedTitle:"cookieåsessionçåºå«",charIndex:59},{level:3,title:"CookieåSessionå³ç³»",slug:"cookieåsessionå³ç³»",normalizedTitle:"cookieåsessionå³ç³»",charIndex:1393},{level:3,title:"Cookieå¸¦æ¥çå®å¨æ§é®é¢",slug:"cookieå¸¦æ¥çå®å¨æ§é®é¢",normalizedTitle:"cookieå¸¦æ¥çå®å¨æ§é®é¢",charIndex:1526},{level:3,title:"å¦ä½é²å¾¡",slug:"å¦ä½é²å¾¡",normalizedTitle:"å¦ä½é²å¾¡",charIndex:1561},{level:2,title:"html5çæ ç­¾",slug:"html5çæ ç­¾",normalizedTitle:"html5çæ ç­¾",charIndex:80},{level:2,title:"æ°ç»åé¾è¡¨çå¯¹æ¯",slug:"æ°ç»åé¾è¡¨çå¯¹æ¯",normalizedTitle:"æ°ç»åé¾è¡¨çå¯¹æ¯",charIndex:92},{level:2,title:"æä¹å®ç°è½®æ­å¾",slug:"æä¹å®ç°è½®æ­å¾",normalizedTitle:"æä¹å®ç°è½®æ­å¾",charIndex:104},{level:2,title:"ååé¾",slug:"ååé¾",normalizedTitle:"ååé¾",charIndex:122},{level:2,title:"instanceof",slug:"instanceof",normalizedTitle:"instanceof",charIndex:133},{level:2,title:"æ°ç»æå¹³åå¸¦æ·±åº¦åæ°",slug:"æ°ç»æå¹³åå¸¦æ·±åº¦åæ°",normalizedTitle:"æ°ç»æå¹³åå¸¦æ·±åº¦åæ°",charIndex:147},{level:2,title:"for å¾ªç¯çé®é¢æä¹è§£å³",slug:"for-å¾ªç¯çé®é¢æä¹è§£å³",normalizedTitle:"for å¾ªç¯çé®é¢æä¹è§£å³",charIndex:161}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"ä»ä¹æ¯è±ç¦»ææ¡£æµï¼å®ä½ä¸æµ®å¨ å¼ç±»åä¸å¼ç¨ç±»åï¼å åæ  MVCä¸MVVM cookieåsessionçåºå« CookieåSessionå³ç³» Cookieå¸¦æ¥çå®å¨æ§é®é¢ å¦ä½é²å¾¡ html5çæ ç­¾ æ°ç»åé¾è¡¨çå¯¹æ¯ æä¹å®ç°è½®æ­å¾ ååé¾ instanceof æ°ç»æå¹³åå¸¦æ·±åº¦åæ° for å¾ªç¯çé®é¢æä¹è§£å³",content:'# é¢è¯é¢ï¼å­ï¼\n\n * ä»ä¹æ¯è±ç¦»ææ¡£æµï¼å®ä½ä¸æµ®å¨\n * å¼ç±»åä¸å¼ç¨ç±»åï¼å åæ \n * MVCä¸MVVM\n * cookieåsessionçåºå«\n * html5çæ ç­¾\n * æ°ç»åé¾è¡¨çå¯¹æ¯\n * æä¹å®ç°è½®æ­å¾\n * å£è¿°ä¸ä¸ä»ä¹æ¯ååé¾\n * è¯¦ç»çè§£instanceof\n * æ°ç»æå¹³åå¸¦æ·±åº¦åæ°\n * for å¾ªç¯çé®é¢æä¹è§£å³\n\n\n# ä»ä¹æ¯è±ç¦»ææ¡£æµï¼å®ä½ä¸æµ®å¨\n\næè°çææ¡£æµï¼æçæ¯åç´ æçå¸å±è¿ç¨ä¸­ï¼åç´ ä¼èªå¨ä»å·¦å¾å³ï¼ä»ä¸å¾ä¸çæµå¼æåã\n\nè±ç¦»ææ¡£æµï¼ä¹å°±æ¯å°åç´ ä»æ®éçå¸å±æçä¸­æ¿èµ°ï¼å¶ä»çå­å¨å®ä½çæ¶åï¼ä¼å½åè±ç¦»ææ¡£æµçåç´ ä¸å­å¨èè¿è¡å®ä½ã\n\næµ®å¨ ( float ) åç»å¯¹å®ä½ ( position:absolute )\n\nï¼1ï¼åè±ç¦»ææ¡£æµ\n\nï¼2ï¼åä¸å ä½\n\nï¼3ï¼æµ®å¨æåµä¸ï¼å¶ä»åç´ ä¼èªå¨å¨å¶å³è¾¹æåãç»å¯¹å®ä½ä¼å®å¨å¿½è§å¶å­å¨ã\n\n * çå­æ¨¡å\n\n\n# å¼ç±»åä¸å¼ç¨ç±»åï¼å åæ \n\n * undefined null number string boolean symbol å±äºå¼ç±»åï¼object array function å±äºå¼ç¨ç±»å\n\n * å¼ç±»åå­å¨å¨æ ä¸­ï¼å¼ç¨ç±»åå­å¨å¨å ä¸­ã\n\n * å¼ç±»åæåºå®çå¤§å°åå¼ï¼å­æ¾å¨æ ä¸­ï¼èå¼ç¨ç±»åä¸ç¡®å®å¤§å°ï¼ä½æ¯å¶å¼ç¨å°åæ¯åºå®çï¼å æ­¤ï¼å®çå°åå­å¨æ ä¸­ï¼æåå­å¨å ä¸­çå¯¹è±¡ã\n\n * å¼ç±»åä¸å¯æ·»å å±æ§åæ¹æ³ï¼èå¼ç¨ç±»åå¯ä»¥æ·»å å±æ§åæ¹æ³\n\n * å¼ç±»åæ¯è¾åªè¦ç¸ç­ï¼å°±å¯ä»¥ç¨==æè===æ¥æ¯è¾ï¼ä½æ¯å¼ç¨ç±»åï¼å³ä½¿let s = {};let s1 = {};ä½ä»ä»¬çåå­å°åä¸ä¸æ ·ï¼æ¯è¾ä¾ç¶ä¸ç¸ç­ã\n\n * stackä¸ºèªå¨åéçåå­ç©ºé´ï¼å®ç±ç³»ç»èªå¨éæ¾ï¼èheapåæ¯å¨æåéçåå­ï¼å¤§å°ä¸å®ä¹ä¸ä¼èªå¨éæ¾ã\n\n * å¾ç¤º\n\n\n# MVCä¸MVVM\n\nï¼1ï¼MVCçå®ä¹ï¼MVCæ¯Model-View- Controllerçç®åãå³æ¨¡å-è§å¾-æ§å¶å¨ã\n\n * Modelï¼æ¨¡åï¼è¡¨ç¤ºåºç¨ç¨åºæ ¸å¿ï¼å¦æ°æ®åºï¼ã\n * Viewï¼è§å¾ï¼æ¾ç¤ºææï¼HTMLé¡µé¢ï¼ã\n * Controllerï¼æ§å¶å¨ï¼å¤çè¾å¥ï¼ä¸å¡é»è¾ï¼ã\n\nï¼2ï¼MVVMæ¯Model-View-ViewModelçç®åãå³æ¨¡å-è§å¾-è§å¾æ¨¡åãæ¯MVCçåçº§ç\n\n * ãæ¨¡åãæçæ¯åç«¯ä¼ éçæ°æ®ã\n * ãè§å¾ãæçæ¯æçå°çé¡µé¢ã\n * ãè§å¾æ¨¡åãmvvmæ¨¡å¼çæ ¸å¿ï¼å®æ¯è¿æ¥viewåmodelçæ¡¥æ¢ãå®æä¸¤ä¸ªæ¹åï¼ä¹å°±æ¯å¸¸è¯´çååç»å®ã\n\nï¼3ï¼å¨ä»¥åä¼ ç»çå¼åæ¨¡å¼å½ä¸­å³MVCæ¨¡å¼ï¼åç«¯äººååªè´è´£MVCå½ä¸­çViewï¼è§å¾ï¼é¨åï¼åå¥½é¡µé¢äº¤ç±åç«¯åå»ºæ¸²ææ¨¡æ¿å¹¶æä¾æ°æ®ï¼éçMVVMæ¨¡å¼çåºç°åç«¯å·²ç»å¯ä»¥èªå·±åä¸å¡é»è¾ä»¥åæ¸²ææ¨¡æ¿ï¼åç«¯åªè´è´£æ°æ®å³å¯ï¼åç«¯æè½åçäºæè¶æ¥è¶å¤ã\n\n\n# cookieåsessionçåºå«\n\n> Sessionæ¯å¦ä¸ç§è®°å½å®¢æ·ç¶æçæºå¶ï¼ä¸åçæ¯Cookieä¿å­å¨å®¢æ·ç«¯æµè§å¨ä¸­ï¼èSessionä¿å­å¨æå¡å¨ä¸ãå®¢æ·ç«¯æµè§å¨è®¿é®æå¡å¨çæ¶åï¼æå¡å¨æå®¢æ·ç«¯ä¿¡æ¯ä»¥æç§å½¢å¼è®°å½å¨æå¡å¨ä¸ãè¿å°±æ¯Sessionãå®¢æ·ç«¯æµè§å¨åæ¬¡è®¿é®æ¶åªéè¦ä»è¯¥Sessionä¸­æ¥æ¾è¯¥å®¢æ·çç¶æå°±å¯ä»¥äº ã\n\n * Cookie å Session å³ç³»ååºå«\n\n\n# CookieåSessionå³ç³»\n\n 1. é½æ¯ä¸ºäºå®ç°å®¢æ·ç«¯ä¸æå¡ç«¯äº¤äºèäº§åº\n 2. Cookieæ¯ä¿å­å¨å®¢æ·ç«¯ï¼ç¼ºç¹æä¼ªé ãä¸å®å¨\n 3. Sessionæ¯ä¿å­å¨æå¡ç«¯ï¼ä¼æ¶èæå¡å¨èµæº\n 4. Sessionå®ç°æä¸¤ç§æ¹å¼ï¼CookieåURLéå\n\n\n# Cookieå¸¦æ¥çå®å¨æ§é®é¢\n\n * CSRF\n * XSS\n\n\n# å¦ä½é²å¾¡\n\n\n# html5çæ ç­¾\n\n<footer>:å®ä¹åºæ®µæé¡µé¢çé¡µè.(è¶³é¨)\n<section>:å®ä¹ææ¡£ä¸­çåºæ®µ.\n<article>:å®ä¹æç« .\n<aside>:å®ä¹é¡µé¢åå®¹ä¹å¤çåå®¹.\n<details>:å®ä¹åç´ çç»è.\n<audio>:å®ä¹å£°é³åå®¹.\n<video>:å®ä¹è§é¢.\n<iframe>:åèæ¡æ¶.\n\n\n\n# æ°ç»åé¾è¡¨çå¯¹æ¯\n\næ°ç»å­å¨æ¹å¼éç¨çº¿æ§ç»æï¼å£°ææ°ç»æ¶éè¦å£°æç±»åï¼å¹¶ä¸å¤§å°ä¹ä¼åºå®ï¼\n\n * ä¼ç¹ï¼\n\nå æ­¤è®¿é®æ°ç»åç´ å¯æ ¹æ®æ°ç»ä¸æ éæºè®¿é®ï¼O(1).\n\n * ç¼ºç¹ï¼\n\nå¤§å°åºå®ï¼å¯è½ä¼é æç©ºé´æµªè´¹ï¼æç©ºé´ä¸å¤å½±åç¨åºè¿è¡ï¼\n\næå¥åå é¤åç´ å´æ¯è¾éº»ç¦ï¼å¯è½éè¦ç§»å¨é¨åæ°ç»åç´ ä»¥ä¿è¯æ°ç»åç´ çç©çä½ç½®ä¿æè¿ç»­ã\n\né¾è¡¨éç¨é¾å¼å­å¨ç»æï¼å¨å£°ææ¶åªéå£°æç»æç±»åï¼ï¼\n\n * ä¼ç¹ï¼\n\né¾è¡¨å¤§å°å¨å®éä½¿ç¨ä¸­å¯ä»¥å¨æå¢å¤§ååå°ï¼\n\næå¥åå é¤æä½å°±å¾æ¹ä¾¿ï¼åªéä¿®æ¹è¯¥åç´ èç¹é»æ¥åç´ å³å¯O(1).\n\n * ç¼ºç¹ï¼\n\nè®¿é®åç´ æ¯è¾è´¹æ¶ï¼éè¦éä¸ªèç¹è¿è¡æ¥çæè½æ¾å°ç®æ åç´ ã\n\n\n# æä¹å®ç°è½®æ­å¾\n\n// è¥ææå¨ç­å¾çå®æ¶å¨ï¼åæ¸æ\nif (timer) {\n    clearInterval(timer);\n    timer = null;\n}\n//èªå¨åæ¢\ntimer = setInterval(autoPlay, 4000);\n\n//å®ä¹èªå¨æ­æ¾å½æ°\nfunction autoPlay() {\n    index++;\n    if (list.length <=index) {\n        index = 0;\n    }\n\n    changeImg(index);\n    // alert("ææ­£å¨autoplay");\n}\n\n// å®ä¹å¾çåæ¢å½æ°ï¼æ ¹æ®å½åçindexå¼ä¹å°±æ¯curindexï¼\nfunction changeImg(curIndex) {\n    for (var j = 0; j < list.length; j++) {\n        list[j].className = "";\n    }\n    // æ¹åå½åæ¾ç¤ºç´¢å¼\n    list[curIndex].className = "on";\n    pic.style.marginLeft = -1920 * curIndex + "px";\n    index = curIndex;\n}\n\n// é¼ æ åè¿æ´ä¸ªå®¹å¨æ¶åæ­¢èªå¨æ­æ¾\nwrap.onmouseover = function(curIndex) {\n    clearInterval(timer);\n    //ç¹å»å³æé®\n}\n\n// é¼ æ ç¦»å¼æ´ä¸ªå®¹å¨æ¶ç»§ç»­æ­æ¾è³ä¸ä¸å¼ \nwrap.onmouseout = function() {\n    timer = setInterval(autoPlay, 4000);\n    // alert("é¼ æ ç§»èµ°äº");\n}\n\n// éåæææ°å­å¯¼èªå®ç°åè¿åæ¢è³å¯¹åºçå¾ç\nfor (var i = 0; i < list.length; i++) {\n    list[i].id = i;\n    list[i].onmouseover = function() {\n        clearInterval(timer);\n        changeImg(this.id);\n    }\n}\n\n\n\n# ååé¾\n\n> æ¯ä¸ªå¯¹è±¡é½æä¸ä¸ªæåå®çååï¼prototypeï¼å¯¹è±¡çåé¨é¾æ¥ãè¿ä¸ªååå¯¹è±¡åæèªå·±çååï¼ç´å°æä¸ªå¯¹è±¡çååä¸º null ä¸ºæ­¢ï¼ä¹å°±æ¯ä¸åæååæåï¼ï¼ç»æè¿æ¡é¾çæåä¸ç¯ãè¿ç§ä¸çº§ä¸çº§çé¾ç»æå°±ç§°ä¸ºååé¾ï¼prototype chainï¼ã\n\n * åååååé¾\n\n\n# instanceof\n\n> instanceof è¿ç®ç¬¦ç¨æ¥æµè¯ä¸ä¸ªå¯¹è±¡å¨å¶ååé¾ä¸­æ¯å¦å­å¨ä¸ä¸ªæé å½æ°ç prototype å±æ§ã A instanceof B //å¤æ­ B ç prototype å±æ§æåçååå¯¹è±¡(B.prototype)æ¯å¦å¨å¯¹è±¡ A çååé¾ä¸ã\n\nfunction _instanceof(L, R) { //Lä¸ºinstanceofå·¦è¡¨è¾¾å¼ï¼Rä¸ºå³è¡¨è¾¾å¼\n  let Ro = R.prototype //åå\n  L = L.__proto__ //éå¼åå\n  while (true) {\n    if (L === null) { //å½å°è¾¾Lååé¾é¡¶ç«¯è¿æªå¹éï¼è¿åfalse\n      return false\n    }\n    if (L === Ro) { //å¨ç­æ¶ï¼è¿åtrue\n      return true\n    }\n    L = L.__proto__\n  }\n}\n\nlet num = 1\nnum.__proto__ === Number.prototype // true\nnum instanceof Number // false\n\nnum = new Number(1)\nnum.__proto__ === Number.prototype // true\nnum instanceof Number // true\n\nnum.__proto__ === (new Number(1)).__proto__ // true\n\n\nObject instanceof Object // true\nFunction instanceof Function // true\nFunction instanceof Object // true\n\nNumber instanceof Number // false\nString instanceof String // false\n\n// ObjectåFunctioné½æ¯æé å½æ°ï¼èææçæé å½æ°é½æ¯Functionçå®ä¾ï¼å æ­¤ï¼Objectæ¯Functionçå®ä¾å¯¹è±¡ã\n\nconsole.log(Object instanceof Function)\nconsole.log(Number instanceof Function) \nconsole.log(String instanceof Function)\nconsole.log(Function instanceof Function)\n\nconsole.log(Function instanceof Object)\n\nconsole.log(Object instanceof Object)\nconsole.log(Number instanceof Object) \nconsole.log(String instanceof Object)\nconsole.log(Function instanceof Object)\n\n// åä¸º true\n\n\n * ObjectåFunctionå¾ç¤º\n\n\n# æ°ç»æå¹³åå¸¦æ·±åº¦åæ°\n\nfunction flattern(list,depth){\n    let res = []\n    for(let item of list){\n        if(Array.isArray(item)&&depth>0){\n            res = res.concat(flattern(item,depth-1))\n        }else{\n            res.push(item)\n        }\n    }\n    return res\n}\n\n// åä¸ä¸ªå½æ°ï¼å°ä¼ è¿å»çæ°ç»ææ·±åº¦å±å¼\nlist = [1,2,[3,4],[5,6,[7,8],9],10,11]\n// depth ç­äº 1 æ¶è¾åº\n//depth = 1 :[1,2,3,4,5,6,[7,8],9,10,11]\n// depth ç­äº 2 æ¶è¾åº\n//depth = 2 :[1,2,3,4,5,6,7,8,9,10,11]\n\nconsole.log(flattern(list,1))\nconsole.log(flattern(list,2))\n\n\n\n# for å¾ªç¯çé®é¢æä¹è§£å³\n\n<ul>\n    <li>ç¬¬ä¸ä¸ª</li>\n    <li>ç¬¬äºä¸ª</li>\n    <li>ç¬¬ä¸ä¸ª</li>\n    <li>ç¬¬åä¸ª</li>\n</ul>\n\n<script>\n    let oli = document.getElementsByTagName("li")\n    for(var i=0;i<4;i++){\n        oli[i].onclick = function(){\n            console.log(i)\n        }\n    }\n    // //ç¸å½äº\n    var i\n    i=0\n    oli[0].onclick = function(){\n        console.log(i)\n    }\n    i=1\n    oli[1].onclick = function(){\n        console.log(i)\n    }\n    i=2\n    oli[2].onclick = function(){\n        console.log(i)\n    }\n    i=3\n    oli[3].onclick = function(){\n        console.log(i)\n    }\n    //æç§è¯æ³ä½ç¨åæ¥æ¾ï¼ä¼æ¯æ¬¡é½æ¾å°å¨å±çi\n\n\n    //æ¹æ³ä¸ï¼æ¹ä¸ºlet\n    for(let i=0;i<4;i++){\n        oli[i].onclick = function(){\n            console.log(i)\n        }\n    }\n    //letå£°æäºä¸ä¸ªåçº§ä½ç¨åï¼ä»¥ä¸ç¸å½äº\n    for(let i=0;i<4;i++){\n        let i = //éèä½ç¨åéçi\n            oli[i].onclick = function(){\n                console.log(i)\n            }\n        }\n    //è¿ä¸ªæ¶åå¨æ§è¡ç¹å»äºä»¶æ¶ï¼iä¼å¨forå¾ªç¯çç¬¬ä¸è¡æ¾å°içå¼\n\n    //æ¹æ³äºï¼é­å\n    for(var i=0;i<4;i++){\n        (function(i){\n            oli[i].onclick = function(){\n                console.log(i)\n            }\n        })(i)\n    }\n\n    //æ¹æ³ä¸ï¼æå­æ°æ®,åletåçç±»ä¼¼\n    for(var i=0;i<4;i++){\n        oli[i].index = i\n        oli[i].onclick = function(){\n            console.log(this.index)\n        }\n    }\n\n    //æ¹æ³åï¼äºä»¶å§æ\n    var oul = document.getElementsByTagName("ul")[0];\n    oul.onclick = function(e){\n        var e = e || window.event\n        var target = e.target || e.srcElement\n        if(target.nodeName.toLowerCase() == \'li\'){\n            var li=this.querySelectorAll("li");\n            var index = Array.prototype.indexOf.call(li,target);\n            console.log(index);\n        }\n    }\n\n\nfor (let i = 0; i < 3; i++) {\n    let i = \'foo\'\n    console.log(i) //foo foo foo\n}\n',normalizedContent:'# é¢è¯é¢ï¼å­ï¼\n\n * ä»ä¹æ¯è±ç¦»ææ¡£æµï¼å®ä½ä¸æµ®å¨\n * å¼ç±»åä¸å¼ç¨ç±»åï¼å åæ \n * mvcä¸mvvm\n * cookieåsessionçåºå«\n * html5çæ ç­¾\n * æ°ç»åé¾è¡¨çå¯¹æ¯\n * æä¹å®ç°è½®æ­å¾\n * å£è¿°ä¸ä¸ä»ä¹æ¯ååé¾\n * è¯¦ç»çè§£instanceof\n * æ°ç»æå¹³åå¸¦æ·±åº¦åæ°\n * for å¾ªç¯çé®é¢æä¹è§£å³\n\n\n# ä»ä¹æ¯è±ç¦»ææ¡£æµï¼å®ä½ä¸æµ®å¨\n\næè°çææ¡£æµï¼æçæ¯åç´ æçå¸å±è¿ç¨ä¸­ï¼åç´ ä¼èªå¨ä»å·¦å¾å³ï¼ä»ä¸å¾ä¸çæµå¼æåã\n\nè±ç¦»ææ¡£æµï¼ä¹å°±æ¯å°åç´ ä»æ®éçå¸å±æçä¸­æ¿èµ°ï¼å¶ä»çå­å¨å®ä½çæ¶åï¼ä¼å½åè±ç¦»ææ¡£æµçåç´ ä¸å­å¨èè¿è¡å®ä½ã\n\næµ®å¨ ( float ) åç»å¯¹å®ä½ ( position:absolute )\n\nï¼1ï¼åè±ç¦»ææ¡£æµ\n\nï¼2ï¼åä¸å ä½\n\nï¼3ï¼æµ®å¨æåµä¸ï¼å¶ä»åç´ ä¼èªå¨å¨å¶å³è¾¹æåãç»å¯¹å®ä½ä¼å®å¨å¿½è§å¶å­å¨ã\n\n * çå­æ¨¡å\n\n\n# å¼ç±»åä¸å¼ç¨ç±»åï¼å åæ \n\n * undefined null number string boolean symbol å±äºå¼ç±»åï¼object array function å±äºå¼ç¨ç±»å\n\n * å¼ç±»åå­å¨å¨æ ä¸­ï¼å¼ç¨ç±»åå­å¨å¨å ä¸­ã\n\n * å¼ç±»åæåºå®çå¤§å°åå¼ï¼å­æ¾å¨æ ä¸­ï¼èå¼ç¨ç±»åä¸ç¡®å®å¤§å°ï¼ä½æ¯å¶å¼ç¨å°åæ¯åºå®çï¼å æ­¤ï¼å®çå°åå­å¨æ ä¸­ï¼æåå­å¨å ä¸­çå¯¹è±¡ã\n\n * å¼ç±»åä¸å¯æ·»å å±æ§åæ¹æ³ï¼èå¼ç¨ç±»åå¯ä»¥æ·»å å±æ§åæ¹æ³\n\n * å¼ç±»åæ¯è¾åªè¦ç¸ç­ï¼å°±å¯ä»¥ç¨==æè===æ¥æ¯è¾ï¼ä½æ¯å¼ç¨ç±»åï¼å³ä½¿let s = {};let s1 = {};ä½ä»ä»¬çåå­å°åä¸ä¸æ ·ï¼æ¯è¾ä¾ç¶ä¸ç¸ç­ã\n\n * stackä¸ºèªå¨åéçåå­ç©ºé´ï¼å®ç±ç³»ç»èªå¨éæ¾ï¼èheapåæ¯å¨æåéçåå­ï¼å¤§å°ä¸å®ä¹ä¸ä¼èªå¨éæ¾ã\n\n * å¾ç¤º\n\n\n# mvcä¸mvvm\n\nï¼1ï¼mvcçå®ä¹ï¼mvcæ¯model-view- controllerçç®åãå³æ¨¡å-è§å¾-æ§å¶å¨ã\n\n * modelï¼æ¨¡åï¼è¡¨ç¤ºåºç¨ç¨åºæ ¸å¿ï¼å¦æ°æ®åºï¼ã\n * viewï¼è§å¾ï¼æ¾ç¤ºææï¼htmlé¡µé¢ï¼ã\n * controllerï¼æ§å¶å¨ï¼å¤çè¾å¥ï¼ä¸å¡é»è¾ï¼ã\n\nï¼2ï¼mvvmæ¯model-view-viewmodelçç®åãå³æ¨¡å-è§å¾-è§å¾æ¨¡åãæ¯mvcçåçº§ç\n\n * ãæ¨¡åãæçæ¯åç«¯ä¼ éçæ°æ®ã\n * ãè§å¾ãæçæ¯æçå°çé¡µé¢ã\n * ãè§å¾æ¨¡åãmvvmæ¨¡å¼çæ ¸å¿ï¼å®æ¯è¿æ¥viewåmodelçæ¡¥æ¢ãå®æä¸¤ä¸ªæ¹åï¼ä¹å°±æ¯å¸¸è¯´çååç»å®ã\n\nï¼3ï¼å¨ä»¥åä¼ ç»çå¼åæ¨¡å¼å½ä¸­å³mvcæ¨¡å¼ï¼åç«¯äººååªè´è´£mvcå½ä¸­çviewï¼è§å¾ï¼é¨åï¼åå¥½é¡µé¢äº¤ç±åç«¯åå»ºæ¸²ææ¨¡æ¿å¹¶æä¾æ°æ®ï¼éçmvvmæ¨¡å¼çåºç°åç«¯å·²ç»å¯ä»¥èªå·±åä¸å¡é»è¾ä»¥åæ¸²ææ¨¡æ¿ï¼åç«¯åªè´è´£æ°æ®å³å¯ï¼åç«¯æè½åçäºæè¶æ¥è¶å¤ã\n\n\n# cookieåsessionçåºå«\n\n> sessionæ¯å¦ä¸ç§è®°å½å®¢æ·ç¶æçæºå¶ï¼ä¸åçæ¯cookieä¿å­å¨å®¢æ·ç«¯æµè§å¨ä¸­ï¼èsessionä¿å­å¨æå¡å¨ä¸ãå®¢æ·ç«¯æµè§å¨è®¿é®æå¡å¨çæ¶åï¼æå¡å¨æå®¢æ·ç«¯ä¿¡æ¯ä»¥æç§å½¢å¼è®°å½å¨æå¡å¨ä¸ãè¿å°±æ¯sessionãå®¢æ·ç«¯æµè§å¨åæ¬¡è®¿é®æ¶åªéè¦ä»è¯¥sessionä¸­æ¥æ¾è¯¥å®¢æ·çç¶æå°±å¯ä»¥äº ã\n\n * cookie å session å³ç³»ååºå«\n\n\n# cookieåsessionå³ç³»\n\n 1. é½æ¯ä¸ºäºå®ç°å®¢æ·ç«¯ä¸æå¡ç«¯äº¤äºèäº§åº\n 2. cookieæ¯ä¿å­å¨å®¢æ·ç«¯ï¼ç¼ºç¹æä¼ªé ãä¸å®å¨\n 3. sessionæ¯ä¿å­å¨æå¡ç«¯ï¼ä¼æ¶èæå¡å¨èµæº\n 4. sessionå®ç°æä¸¤ç§æ¹å¼ï¼cookieåurléå\n\n\n# cookieå¸¦æ¥çå®å¨æ§é®é¢\n\n * csrf\n * xss\n\n\n# å¦ä½é²å¾¡\n\n\n# html5çæ ç­¾\n\n<footer>:å®ä¹åºæ®µæé¡µé¢çé¡µè.(è¶³é¨)\n<section>:å®ä¹ææ¡£ä¸­çåºæ®µ.\n<article>:å®ä¹æç« .\n<aside>:å®ä¹é¡µé¢åå®¹ä¹å¤çåå®¹.\n<details>:å®ä¹åç´ çç»è.\n<audio>:å®ä¹å£°é³åå®¹.\n<video>:å®ä¹è§é¢.\n<iframe>:åèæ¡æ¶.\n\n\n\n# æ°ç»åé¾è¡¨çå¯¹æ¯\n\næ°ç»å­å¨æ¹å¼éç¨çº¿æ§ç»æï¼å£°ææ°ç»æ¶éè¦å£°æç±»åï¼å¹¶ä¸å¤§å°ä¹ä¼åºå®ï¼\n\n * ä¼ç¹ï¼\n\nå æ­¤è®¿é®æ°ç»åç´ å¯æ ¹æ®æ°ç»ä¸æ éæºè®¿é®ï¼o(1).\n\n * ç¼ºç¹ï¼\n\nå¤§å°åºå®ï¼å¯è½ä¼é æç©ºé´æµªè´¹ï¼æç©ºé´ä¸å¤å½±åç¨åºè¿è¡ï¼\n\næå¥åå é¤åç´ å´æ¯è¾éº»ç¦ï¼å¯è½éè¦ç§»å¨é¨åæ°ç»åç´ ä»¥ä¿è¯æ°ç»åç´ çç©çä½ç½®ä¿æè¿ç»­ã\n\né¾è¡¨éç¨é¾å¼å­å¨ç»æï¼å¨å£°ææ¶åªéå£°æç»æç±»åï¼ï¼\n\n * ä¼ç¹ï¼\n\né¾è¡¨å¤§å°å¨å®éä½¿ç¨ä¸­å¯ä»¥å¨æå¢å¤§ååå°ï¼\n\næå¥åå é¤æä½å°±å¾æ¹ä¾¿ï¼åªéä¿®æ¹è¯¥åç´ èç¹é»æ¥åç´ å³å¯o(1).\n\n * ç¼ºç¹ï¼\n\nè®¿é®åç´ æ¯è¾è´¹æ¶ï¼éè¦éä¸ªèç¹è¿è¡æ¥çæè½æ¾å°ç®æ åç´ ã\n\n\n# æä¹å®ç°è½®æ­å¾\n\n// è¥ææå¨ç­å¾çå®æ¶å¨ï¼åæ¸æ\nif (timer) {\n    clearinterval(timer);\n    timer = null;\n}\n//èªå¨åæ¢\ntimer = setinterval(autoplay, 4000);\n\n//å®ä¹èªå¨æ­æ¾å½æ°\nfunction autoplay() {\n    index++;\n    if (list.length <=index) {\n        index = 0;\n    }\n\n    changeimg(index);\n    // alert("ææ­£å¨autoplay");\n}\n\n// å®ä¹å¾çåæ¢å½æ°ï¼æ ¹æ®å½åçindexå¼ä¹å°±æ¯curindexï¼\nfunction changeimg(curindex) {\n    for (var j = 0; j < list.length; j++) {\n        list[j].classname = "";\n    }\n    // æ¹åå½åæ¾ç¤ºç´¢å¼\n    list[curindex].classname = "on";\n    pic.style.marginleft = -1920 * curindex + "px";\n    index = curindex;\n}\n\n// é¼ æ åè¿æ´ä¸ªå®¹å¨æ¶åæ­¢èªå¨æ­æ¾\nwrap.onmouseover = function(curindex) {\n    clearinterval(timer);\n    //ç¹å»å³æé®\n}\n\n// é¼ æ ç¦»å¼æ´ä¸ªå®¹å¨æ¶ç»§ç»­æ­æ¾è³ä¸ä¸å¼ \nwrap.onmouseout = function() {\n    timer = setinterval(autoplay, 4000);\n    // alert("é¼ æ ç§»èµ°äº");\n}\n\n// éåæææ°å­å¯¼èªå®ç°åè¿åæ¢è³å¯¹åºçå¾ç\nfor (var i = 0; i < list.length; i++) {\n    list[i].id = i;\n    list[i].onmouseover = function() {\n        clearinterval(timer);\n        changeimg(this.id);\n    }\n}\n\n\n\n# ååé¾\n\n> æ¯ä¸ªå¯¹è±¡é½æä¸ä¸ªæåå®çååï¼prototypeï¼å¯¹è±¡çåé¨é¾æ¥ãè¿ä¸ªååå¯¹è±¡åæèªå·±çååï¼ç´å°æä¸ªå¯¹è±¡çååä¸º null ä¸ºæ­¢ï¼ä¹å°±æ¯ä¸åæååæåï¼ï¼ç»æè¿æ¡é¾çæåä¸ç¯ãè¿ç§ä¸çº§ä¸çº§çé¾ç»æå°±ç§°ä¸ºååé¾ï¼prototype chainï¼ã\n\n * åååååé¾\n\n\n# instanceof\n\n> instanceof è¿ç®ç¬¦ç¨æ¥æµè¯ä¸ä¸ªå¯¹è±¡å¨å¶ååé¾ä¸­æ¯å¦å­å¨ä¸ä¸ªæé å½æ°ç prototype å±æ§ã a instanceof b //å¤æ­ b ç prototype å±æ§æåçååå¯¹è±¡(b.prototype)æ¯å¦å¨å¯¹è±¡ a çååé¾ä¸ã\n\nfunction _instanceof(l, r) { //lä¸ºinstanceofå·¦è¡¨è¾¾å¼ï¼rä¸ºå³è¡¨è¾¾å¼\n  let ro = r.prototype //åå\n  l = l.__proto__ //éå¼åå\n  while (true) {\n    if (l === null) { //å½å°è¾¾lååé¾é¡¶ç«¯è¿æªå¹éï¼è¿åfalse\n      return false\n    }\n    if (l === ro) { //å¨ç­æ¶ï¼è¿åtrue\n      return true\n    }\n    l = l.__proto__\n  }\n}\n\nlet num = 1\nnum.__proto__ === number.prototype // true\nnum instanceof number // false\n\nnum = new number(1)\nnum.__proto__ === number.prototype // true\nnum instanceof number // true\n\nnum.__proto__ === (new number(1)).__proto__ // true\n\n\nobject instanceof object // true\nfunction instanceof function // true\nfunction instanceof object // true\n\nnumber instanceof number // false\nstring instanceof string // false\n\n// objectåfunctioné½æ¯æé å½æ°ï¼èææçæé å½æ°é½æ¯functionçå®ä¾ï¼å æ­¤ï¼objectæ¯functionçå®ä¾å¯¹è±¡ã\n\nconsole.log(object instanceof function)\nconsole.log(number instanceof function) \nconsole.log(string instanceof function)\nconsole.log(function instanceof function)\n\nconsole.log(function instanceof object)\n\nconsole.log(object instanceof object)\nconsole.log(number instanceof object) \nconsole.log(string instanceof object)\nconsole.log(function instanceof object)\n\n// åä¸º true\n\n\n * objectåfunctionå¾ç¤º\n\n\n# æ°ç»æå¹³åå¸¦æ·±åº¦åæ°\n\nfunction flattern(list,depth){\n    let res = []\n    for(let item of list){\n        if(array.isarray(item)&&depth>0){\n            res = res.concat(flattern(item,depth-1))\n        }else{\n            res.push(item)\n        }\n    }\n    return res\n}\n\n// åä¸ä¸ªå½æ°ï¼å°ä¼ è¿å»çæ°ç»ææ·±åº¦å±å¼\nlist = [1,2,[3,4],[5,6,[7,8],9],10,11]\n// depth ç­äº 1 æ¶è¾åº\n//depth = 1 :[1,2,3,4,5,6,[7,8],9,10,11]\n// depth ç­äº 2 æ¶è¾åº\n//depth = 2 :[1,2,3,4,5,6,7,8,9,10,11]\n\nconsole.log(flattern(list,1))\nconsole.log(flattern(list,2))\n\n\n\n# for å¾ªç¯çé®é¢æä¹è§£å³\n\n<ul>\n    <li>ç¬¬ä¸ä¸ª</li>\n    <li>ç¬¬äºä¸ª</li>\n    <li>ç¬¬ä¸ä¸ª</li>\n    <li>ç¬¬åä¸ª</li>\n</ul>\n\n<script>\n    let oli = document.getelementsbytagname("li")\n    for(var i=0;i<4;i++){\n        oli[i].onclick = function(){\n            console.log(i)\n        }\n    }\n    // //ç¸å½äº\n    var i\n    i=0\n    oli[0].onclick = function(){\n        console.log(i)\n    }\n    i=1\n    oli[1].onclick = function(){\n        console.log(i)\n    }\n    i=2\n    oli[2].onclick = function(){\n        console.log(i)\n    }\n    i=3\n    oli[3].onclick = function(){\n        console.log(i)\n    }\n    //æç§è¯æ³ä½ç¨åæ¥æ¾ï¼ä¼æ¯æ¬¡é½æ¾å°å¨å±çi\n\n\n    //æ¹æ³ä¸ï¼æ¹ä¸ºlet\n    for(let i=0;i<4;i++){\n        oli[i].onclick = function(){\n            console.log(i)\n        }\n    }\n    //letå£°æäºä¸ä¸ªåçº§ä½ç¨åï¼ä»¥ä¸ç¸å½äº\n    for(let i=0;i<4;i++){\n        let i = //éèä½ç¨åéçi\n            oli[i].onclick = function(){\n                console.log(i)\n            }\n        }\n    //è¿ä¸ªæ¶åå¨æ§è¡ç¹å»äºä»¶æ¶ï¼iä¼å¨forå¾ªç¯çç¬¬ä¸è¡æ¾å°içå¼\n\n    //æ¹æ³äºï¼é­å\n    for(var i=0;i<4;i++){\n        (function(i){\n            oli[i].onclick = function(){\n                console.log(i)\n            }\n        })(i)\n    }\n\n    //æ¹æ³ä¸ï¼æå­æ°æ®,åletåçç±»ä¼¼\n    for(var i=0;i<4;i++){\n        oli[i].index = i\n        oli[i].onclick = function(){\n            console.log(this.index)\n        }\n    }\n\n    //æ¹æ³åï¼äºä»¶å§æ\n    var oul = document.getelementsbytagname("ul")[0];\n    oul.onclick = function(e){\n        var e = e || window.event\n        var target = e.target || e.srcelement\n        if(target.nodename.tolowercase() == \'li\'){\n            var li=this.queryselectorall("li");\n            var index = array.prototype.indexof.call(li,target);\n            console.log(index);\n        }\n    }\n\n\nfor (let i = 0; i < 3; i++) {\n    let i = \'foo\'\n    console.log(i) //foo foo foo\n}\n',charsets:{cjk:!0}},{title:"é¢è¯é¢ï¼äºï¼",frontmatter:{title:"é¢è¯é¢ï¼äºï¼",date:"2018-08-03T09:21:01.000Z",categories:"é¢è¯"},regularPath:"/interview/interview-5.html",relativePath:"interview/interview-5.md",key:"v-7cee71df",path:"/interview/interview-5.html",headers:[{level:2,title:"ä»ä¹æ¯äºä»¶åæ³¡ï¼äºä»¶æè·ï¼äºä»¶å§æ",slug:"ä»ä¹æ¯äºä»¶åæ³¡-äºä»¶æè·-äºä»¶å§æ",normalizedTitle:"ä»ä¹æ¯äºä»¶åæ³¡ï¼äºä»¶æè·ï¼äºä»¶å§æ",charIndex:13},{level:3,title:"å¦ä½é»æ­¢åæ³¡åé»è®¤äºä»¶",slug:"å¦ä½é»æ­¢åæ³¡åé»è®¤äºä»¶",normalizedTitle:"å¦ä½é»æ­¢åæ³¡åé»è®¤äºä»¶",charIndex:2553},{level:2,title:"éç»ååæµ",slug:"éç»ååæµ",normalizedTitle:"éç»ååæµ",charIndex:34},{level:3,title:"ä»ä¹æ¯åæµ",slug:"ä»ä¹æ¯åæµ",normalizedTitle:"ä»ä¹æ¯åæµ",charIndex:4088},{level:3,title:"ä»ä¹æ¯éç»",slug:"ä»ä¹æ¯éç»",normalizedTitle:"ä»ä¹æ¯éç»",charIndex:4291},{level:3,title:"åºå«ï¼",slug:"åºå«",normalizedTitle:"åºå«ï¼",charIndex:4382},{level:3,title:"æµè§å¨çä¼åæºå¶",slug:"æµè§å¨çä¼åæºå¶",normalizedTitle:"æµè§å¨çä¼åæºå¶",charIndex:4517},{level:3,title:"å¦ä½åå°åæµï¼éç»",slug:"å¦ä½åå°åæµ-éç»",normalizedTitle:"å¦ä½åå°åæµï¼éç»",charIndex:4622},{level:2,title:"requestAnimationFrame å setTimeout",slug:"requestanimationframe-å-settimeout",normalizedTitle:"requestanimationframe å settimeout",charIndex:43},{level:3,title:"ï¼1ï¼seTimeoutå®ç°å¨ç»ï¼",slug:"_1-setimeoutå®ç°å¨ç»",normalizedTitle:"ï¼1ï¼setimeoutå®ç°å¨ç»ï¼",charIndex:4816},{level:3,title:"ï¼2ï¼requestAnimationFrameå®ç°å¨ç»ï¼",slug:"_2-requestanimationframeå®ç°å¨ç»",normalizedTitle:"ï¼2ï¼requestanimationframeå®ç°å¨ç»ï¼",charIndex:5319},{level:2,title:"ä»ç»ä¸ä¸åç«¯è·¯ç±",slug:"ä»ç»ä¸ä¸åç«¯è·¯ç±",normalizedTitle:"ä»ç»ä¸ä¸åç«¯è·¯ç±",charIndex:81},{level:2,title:"for in å for of",slug:"for-in-å-for-of",normalizedTitle:"for in å for of",charIndex:93},{level:3,title:"è¿­ä»£å¨",slug:"è¿­ä»£å¨",normalizedTitle:"è¿­ä»£å¨",charIndex:6658},{level:2,title:"åºæ¯é¢ï¼åæ°æ¼æ¥",slug:"åºæ¯é¢-åæ°æ¼æ¥",normalizedTitle:"åºæ¯é¢ï¼åæ°æ¼æ¥",charIndex:112},{level:2,title:"csså¯ç»§æ¿çå±æ§",slug:"csså¯ç»§æ¿çå±æ§",normalizedTitle:"csså¯ç»§æ¿çå±æ§",charIndex:124},{level:2,title:"gitæå ç§ç¶æ",slug:"gitæå ç§ç¶æ",normalizedTitle:"gitæå ç§ç¶æ",charIndex:137},{level:2,title:"ç®è¿° new ä¸ä¸ªå¯¹è±¡çè¿ç¨",slug:"ç®è¿°-new-ä¸ä¸ªå¯¹è±¡çè¿ç¨",normalizedTitle:"ç®è¿° new ä¸ä¸ªå¯¹è±¡çè¿ç¨",charIndex:149},{level:3,title:"ä¸éé¢è¯é¢",slug:"ä¸éé¢è¯é¢",normalizedTitle:"ä¸éé¢è¯é¢",charIndex:10456},{level:2,title:"æ°æ®å±æ§ä¸è®¿é®å¨å±æ§",slug:"æ°æ®å±æ§ä¸è®¿é®å¨å±æ§",normalizedTitle:"æ°æ®å±æ§ä¸è®¿é®å¨å±æ§",charIndex:167}],lastUpdated:"6/20/2025, 5:49:03 PM",lastUpdatedTimestamp:1750412943e3,headersStr:"ä»ä¹æ¯äºä»¶åæ³¡ï¼äºä»¶æè·ï¼äºä»¶å§æ å¦ä½é»æ­¢åæ³¡åé»è®¤äºä»¶ éç»ååæµ ä»ä¹æ¯åæµ ä»ä¹æ¯éç» åºå«ï¼ æµè§å¨çä¼åæºå¶ å¦ä½åå°åæµï¼éç» requestAnimationFrame å setTimeout ï¼1ï¼seTimeoutå®ç°å¨ç»ï¼ ï¼2ï¼requestAnimationFrameå®ç°å¨ç»ï¼ ä»ç»ä¸ä¸åç«¯è·¯ç± for in å for of è¿­ä»£å¨ åºæ¯é¢ï¼åæ°æ¼æ¥ csså¯ç»§æ¿çå±æ§ gitæå ç§ç¶æ ç®è¿° new ä¸ä¸ªå¯¹è±¡çè¿ç¨ ä¸éé¢è¯é¢ æ°æ®å±æ§ä¸è®¿é®å¨å±æ§",content:"# é¢è¯é¢ï¼äºï¼\n\n * ä»ä¹æ¯äºä»¶åæ³¡ï¼äºä»¶æè·ï¼äºä»¶å§æ\n * éç»ååæµ\n * requestAnimationFrame å setTimeout\n * ä»ç»ä¸ä¸åç«¯è·¯ç±\n * for in å for of\n * åºæ¯é¢ï¼åæ°æ¼æ¥\n * csså¯ç»§æ¿çå±æ§\n * gitæå ç§ç¶æ\n * ç®è¿° new ä¸ä¸ªå¯¹è±¡çè¿ç¨\n * æ°æ®å±æ§ä¸è®¿é®å¨å±æ§\n\n\n# ä»ä¹æ¯äºä»¶åæ³¡ï¼äºä»¶æè·ï¼äºä»¶å§æ\n\n * äºä»¶åæ³¡\n\n> å½ç»ç¶å­åç´ çåä¸äºä»¶ç»å®æ¹æ³çæ¶åï¼è§¦åå­åç´ èº«ä¸çäºä»¶ï¼æ§è¡å®æ¯ä¹åï¼ä¹ä¼è§¦åç¶çº§åç´ ç¸åçäºä»¶ï¼è¿ç§æºå¶å«äºä»¶åæ³¡\n\n * äºä»¶æè·\n\n> ç»ç¶å­åç´ ç¨ç»å®åä¸äºä»¶æ¶ï¼å½è§¦åå­åç´ èº«ä¸çäºä»¶æ¶ï¼åè§¦åç¶åç´ ï¼ç¶åå¨ä¼ éç»å­åç´ ï¼è¿ç§ä¼ æ­æºå¶å«äºä»¶æè·ï¼\n\nå®éæä½ä¸­ï¼æä»¬å¯ä»¥éè¿ element.addEventListener() è®¾ç½®ä¸ä¸ªåç´ çäºä»¶æ¨¡åä¸ºåæ³¡äºä»¶æèæè·äºä»¶ã åæ¥çä¸ä¸ addEventListener å½æ°çè¯­æ³ï¼\n\nelement.addEventListener(type, listener, useCapture)\n\n\n * type çå¬äºä»¶ç±»åçå­ç¬¦ä¸²\n * listener äºä»¶çå¬åè°å½æ°ï¼å³äºä»¶è§¦ååè¦å¤ççå½æ°\n * useCapture é»è®¤å¼falseï¼è¡¨ç¤ºäºä»¶åæ³¡ï¼è®¾ä¸ºtrueæ¶ï¼è¡¨ç¤ºäºä»¶æè·\n\n       <div id=\"box1\">\n            <div id=\"box2\">\n                <div id=\"box3\"></div>\n            </div>\n        </div>\n\n        <script>\n            function sayBox3() {\n                console.log('ä½ ç¹äºæéé¢çbox');\n            }\n            function sayBox2() {\n                console.log('ä½ ç¹äºæä¸­é´çbox');\n            }\n            function sayBox1() {\n                console.log('ä½ ç¹äºæå¤é¢çbox');\n            }\n            // äºä»¶çå¬ï¼ç¬¬ä¸ä¸ªåæ°æ¯å¸å°å¼ï¼é»è®¤falseï¼falseæ¯äºä»¶åæ³¡ï¼trueæ¯äºä»¶æè·\n            document.getElementById('box3').addEventListener('click', sayBox3, false);\n            document.getElementById('box2').addEventListener('click', sayBox2, false);\n            document.getElementById('box1').addEventListener('click', sayBox1, false);\n\n        <\/script>\n\n\n * äºä»¶å§æ\n\näºä»¶å§æå°±æ¯åªæå®ä¸ä¸ªäºä»¶å¤çç¨åºï¼å°±å¯ä»¥ç®¡çæä¸ç±»åçææäºä»¶ã\n\nä¸ºä»ä¹è¦ç¨äºä»¶å§æ\n\nä¸è¬æ¥è¯´ï¼doméè¦æäºä»¶å¤çç¨åºï¼æä»¬é½ä¼ç´æ¥ç»å®è®¾äºä»¶å¤çç¨åºå°±å¥½äºï¼é£å¦ææ¯å¾å¤çdoméè¦æ·»å äºä»¶å¤çå¢ï¼æ¯å¦æä»¬æ100ä¸ªliï¼æ¯ä¸ªlié½æç¸åçclickç¹å»äºä»¶ï¼å¯è½æä»¬ä¼ç¨forå¾ªç¯çæ¹æ³ï¼æ¥éåææçliï¼ç¶åç»å®ä»¬æ·»å äºä»¶ï¼é£è¿ä¹åä¼å­å¨ä»ä¹å½±åå¢ï¼\n\nå¨JavaScriptä¸­ï¼æ·»å å°é¡µé¢ä¸çäºä»¶å¤çç¨åºæ°éå°ç´æ¥å³ç³»å°é¡µé¢çæ´ä½è¿è¡æ§è½ï¼å ä¸ºéè¦ä¸æ­çä¸domèç¹è¿è¡äº¤äºï¼è®¿é®domçæ¬¡æ°è¶å¤ï¼å¼èµ·æµè§å¨éç»ä¸éæçæ¬¡æ°ä¹å°±è¶å¤ï¼å°±ä¼å»¶é¿æ´ä¸ªé¡µé¢çäº¤äºå°±ç»ªæ¶é´ï¼è¿å°±æ¯ä¸ºä»ä¹æ§è½ä¼åçä¸»è¦ææ³ä¹ä¸å°±æ¯åå°DOMæä½çåå ï¼å¦æè¦ç¨äºä»¶å§æï¼å°±ä¼å°ææçæä½æ¾å°jsç¨åºéé¢ï¼ä¸domçæä½å°±åªéè¦äº¤äºä¸æ¬¡ï¼è¿æ ·å°±è½å¤§å¤§çåå°ä¸domçäº¤äºæ¬¡æ°ï¼æé«æ§è½ï¼\n\næ¯ä¸ªå½æ°é½æ¯ä¸ä¸ªå¯¹è±¡ï¼æ¯å¯¹è±¡å°±ä¼å ç¨åå­ï¼å¯¹è±¡è¶å¤ï¼åå­å ç¨çå°±è¶å¤§ï¼èªç¶æ§è½å°±è¶å·®äºï¼æ¯å¦ä¸é¢ç100ä¸ªliï¼å°±è¦å ç¨100ä¸ªåå­ç©ºé´ï¼å¦æç¨äºä»¶å§æï¼é£ä¹æä»¬å°±å¯ä»¥åªå¯¹å®çç¶çº§ï¼å¦æåªæä¸ä¸ªç¶çº§ï¼è¿ä¸ä¸ªå¯¹è±¡è¿è¡æä½ï¼è¿æ ·æä»¬å°±éè¦ä¸ä¸ªåå­ç©ºé´å°±å¤äºï¼æ¯ä¸æ¯çäºå¾å¤ï¼èªç¶æ§è½å°±ä¼æ´å¥½ã\n\nå¦ä½å®ç°å¢ï¼\n\ne.targetå¯ä»¥ç¨æ¥å®ç°äºä»¶å§æï¼è¯¥åçæ¯éè¿äºä»¶åæ³¡ï¼æèäºä»¶æè·ï¼ç»ç¶åç´ æ·»å äºä»¶çå¬ï¼e.targetæåå¼åè§¦åäºä»¶çåç´ ï¼å¦ä¾å­ä¸­ï¼e.targetæåç¨æ·ç¹å»çliï¼ç±äºäºä»¶åæ³¡ï¼liçç¹å»äºä»¶åæ³¡å°äºulä¸ï¼éè¿ç»ulæ·»å çå¬äºä»¶èè¾¾å°äºç»æ¯ä¸ä¸ªliæ·»å çå¬äºä»¶çææï¼èe.currentTargetæåçæ¯ç»ç»å®äºä»¶çå¬çé£ä¸ªå¯¹è±¡ï¼å³ulï¼ä»è¿éå¯ä»¥åç°ï¼e.currentTarget===thisè¿åtrueï¼èe.target===thisè¿åfalseãe.currenttargetåe.targetæ¯ä¸ç¸ç­çã\n\n<ul id=\"item-list\">\n\t<li>item1</li>\n\t<li>item2</li>\n\t<li>item3</li>\n\t<li>item4</li>\n</ul>\n\n<script>\nvar items = document.getElementById('item-list');\n  \n//äºä»¶æè·å®ç°äºä»¶ä»£ç\nitems.addEventListener('click', (e) => {console.log('æè·ï¼click ',e.target.innerHTML)}, true);\n  \n//äºä»¶åæ³¡å®ç°äºä»¶ä»£ç\nitems.addEventListener('click', (e) => {console.log('åæ³¡ï¼click ',e.target.innerHTML)}, false);\n<\/script>\n\n\n\n# å¦ä½é»æ­¢åæ³¡åé»è®¤äºä»¶\n\nä»ä¹æ¯åæ³¡äºä»¶ï¼å¦å¨ä¸ä¸ªæé®æ¯ç»å®ä¸ä¸ªâclickâäºä»¶ï¼é£ä¹âclickâäºä»¶ä¼ä¾æ¬¡å¨å®çç¶çº§åç´ ä¸­è¢«è§¦å\n\n    <div id='div'>\n        <ul>\n            <li>test</li>\n        </ul>\n    </div>\n    <script>\n        let div = document.getElementById('div')\n        let ul = document.getElementsByTagName('ul')[0]\n        let li = document.getElementsByTagName('li')[0]\n\n        div.onclick = function(){\n            alert(\"div\")\n        }\n        ul.onclick = function(){\n            alert(\"ul\")\n        }\n        li.onclick = function(){\n            // window.event? window.event.cancelBubble = true : e.stopPropagation();\n            alert(\"li\")\n        }\n    <\/script>\n\n\né»æ­¢åæ³¡\n\nw3cçæ¹æ³æ¯e.stopPropagation()ï¼IEåæ¯ä½¿ç¨e.cancelBubble = true ï¼å¼å®¹æ§åæ³å¦ä¸ï¼åªä¼è¾åºli\n\né»æ­¢é»è®¤äºä»¶\n\nw3cçæ¹æ³æ¯e.preventDefault()ï¼IEåæ¯ä½¿ç¨window.event.returnValue = false;\n\njavascriptçreturn falseåªä¼é»æ­¢é»è®¤è¡ä¸º\n\n<a href=\"http://caibaojian.com/\" id=\"testA\" >caibaojian.com</a>\n    <script>\n        var a = document.getElementById(\"testA\");\n            a.onclick =function(e){\n                if(e.preventDefault){\n                    e.preventDefault();\n                }else{\n                    window.event.returnValue == false;\n                }\n        }\n <\/script>\n\n\n * DOMäºä»¶æµæ3ä¸ªé¶æ®µï¼æè·é¶æ®µï¼ç®æ é¶æ®µï¼åæ³¡é¶æ®µï¼ä¸ä¸ªé¶æ®µçé¡ºåºä¸ºï¼æè·é¶æ®µââç®æ é¶æ®µââåæ³¡é¶æ®µï¼è¿ä¸ªé¡ºåºæ¯åºå®çï¼æä»¬ä¸é¢å®ç°çäºä»¶æè·æèäºä»¶åæ³¡ï¼åªæ¯å¨è¿ä¸ä¸ªé¶æ®µçæä¸ªé¶æ®µå»æ§è¡èå·²\n * å½æä¸ªç±»åçäºä»¶Aåçåï¼DOMä¼ä»¥--ä»Windowå¯¹è±¡å¼å§ä¾æ¬¡éçº§ï¼æ¾å°ç®æ DOMå¯¹è±¡ï¼åä»ç®æ å¯¹è±¡ä¾æ¬¡åçº§è³Window--è¿æ ·ä¸ä¸ªé¡ºåºï¼å¯»æ¾åçº§çè¯¥äºä»¶(äºä»¶A)çäºä»¶çå¬ã\n\n\n# éç»ååæµ\n\nå¨é¡µé¢å è½½æ¶ï¼æµè§å¨æè·åå°çHTMLä»£ç è§£ææ1ä¸ªDOMæ ã DOM Tree åæ ·å¼ç»æä½ç»ååæå»ºrender treeï¼render treeä¸­æ¯ä¸ªNODEé½æèªå·±çstyleï¼èä¸render treeä¸åå«éèçèç¹ï¼å ä¸ºè¿äºèç¹ä¸ä¼ç¨äºåç°ï¼èä¸ä¸ä¼å½±ååç°çã\n\n * å¾ç¤º\n\n\n# ä»ä¹æ¯åæµ\n\nå½render treeä¸­çä¸é¨å(æå¨é¨)å ä¸ºåç´ çè§æ¨¡å°ºå¯¸ï¼å¸å±ï¼éèç­æ¹åèéè¦éæ°æå»ºãè¿å°±ç§°ä¸ºåæµ(reflow)ãæ¯ä¸ªé¡µé¢è³å°éè¦ä¸æ¬¡åæµï¼å°±æ¯å¨é¡µé¢ç¬¬ä¸æ¬¡å è½½çæ¶åï¼è¿æ¶åæ¯ä¸å®ä¼åçåæµçï¼å ä¸ºè¦æå»ºrender treeãå¨åæµçæ¶åï¼æµè§å¨ä¼ä½¿æ¸²ææ ä¸­åå°å½±åçé¨åå¤±æï¼å¹¶éæ°æé è¿é¨åæ¸²ææ ï¼å®æåæµåï¼æµè§å¨ä¼éæ°ç»å¶åå½±åçé¨åå°å±å¹ä¸­ï¼è¯¥è¿ç¨æä¸ºéç»ã\n\n\n# ä»ä¹æ¯éç»\n\nå½render treeä¸­çä¸äºåç´ éè¦æ´æ°å±æ§ï¼èè¿äºå±æ§åªæ¯å½±ååç´ çå¤è§ï¼é£æ ¼ï¼èä¸ä¼å½±åå¸å±çï¼æ¯å¦background-colorãåå°±å«ç§°ä¸ºéç»ã\n\n\n# åºå«ï¼\n\n * åæµå¿å°å¼èµ·éç»ï¼èéç»ä¸ä¸å®ä¼å¼èµ·åæµãæ¯å¦ï¼åªæé¢è²æ¹åçæ¶åå°±åªä¼åçéç»èä¸ä¼å¼èµ·åæµ\n * å½é¡µé¢å¸å±åå ä½å±æ§æ¹åæ¶å°±éè¦åæµãæ¯å¦ï¼æ·»å æèå é¤å¯è§çDOMåç´ ï¼åç´ ä½ç½®æ¹åï¼åç´ å°ºå¯¸æ¹åââè¾¹è·ãå¡«åãè¾¹æ¡ãå®½åº¦åé«åº¦ï¼åå®¹æ¹å\n\n\n# æµè§å¨çä¼åæºå¶\n\nç±äºæ¯æ¬¡åæµé½ä¼é æé¢å¤çè®¡ç®æ¶èï¼å æ­¤å¤§å¤æ°æµè§å¨é½ä¼éè¿éååä¿®æ¹å¹¶æ¹éæ§è¡æ¥ä¼ååæµè¿ç¨ãæµè§å¨ä¼å°ä¿®æ¹æä½æ¾å¥å°éåéï¼ç´å°è¿äºä¸æ®µæ¶é´æèæä½è¾¾å°äºä¸ä¸ªéå¼ï¼ææ¸ç©ºéåã\n\n\n# å¦ä½åå°åæµï¼éç»\n\n * ç´æ¥é¿åï¼éç¨transform,opacityå¯ä»¥ç´æ¥è·³è¿ä¸»çº¿ç¨ï¼ç¨compositerçº¿ç¨å®æ\n * åå¹¶å¤æ¬¡å¯¹DOMåæ ·å¼çä¿®æ¹\n * å°å¤æçåç´ ç»å¯¹å®ä½ï¼è±ç¦»ææ¡£æµï¼å¦ååæµçä»£ä»·å¾é«ã\n\n * æµè§å¨æ¸²æç¸å³\n * å­èåç«¯æåæ¹é¢è¯é¢ï¼è§¦åäºå æ¬¡åæµå æ¬¡éç»\n\n\n# requestAnimationFrame å setTimeout\n\n\n# ï¼1ï¼seTimeoutå®ç°å¨ç»ï¼\n\nå©ç¨seTimeoutå®ç°çå¨ç»å¨æäºä½ç«¯æºä¸ä¼åºç°å¡é¡¿ãæå¨çç°è±¡\n\nåå ä¸ãsetTimeoutçæ§è¡æ¶é´å¹¶ä¸æ¯ç¡®å®çãå½è°ç¨ setTimeout(fn, 0) æ¶ï¼fn ä¼è¢«æ¨å¥å®ä»»å¡éåãä½å½åæ§è¡æ ï¼åæ­¥ä»£ç ï¼å¿é¡»åå®å¨æ¸ç©ºãæ¸ç©ºåï¼å¼æä¼åå¤çææå¾®ä»»å¡ï¼å¦ Promise.then çåè°ï¼ãå¾®ä»»å¡éåæ¸ç©ºåï¼æä¼ä»å®ä»»å¡éåä¸­ååº fn æ§è¡ãå æ­¤ï¼å³ä½¿ setTimeout çå»¶è¿è®¾ä¸º 0ï¼å®ä»éç­å¾å½åä»£ç æ§è¡å®æ¯ + ææå¾®ä»»å¡æ§è¡å®æ¯ï¼å¯¼è´å®éæ§è¡æ¶é´ç¨æã\n\nåå äºãå·æ°é¢çåå±å¹åè¾¨çåå±å¹å°ºå¯¸çå½±åï¼å æ­¤ä¸åè®¾å¤çå±å¹å·æ°é¢çå¯è½ä¼ä¸åï¼è setTimeoutåªè½è®¾ç½®ä¸ä¸ªåºå®çæ¶é´é´éï¼è¿ä¸ªæ¶é´ä¸ä¸å®åå±å¹çå·æ°æ¶é´ç¸åã\n\nä¸ä¸¤ç§æåµé½ä¼å¯¼è´setTimeoutçæ§è¡æ­¥è°åå±å¹çå·æ°æ­¥è°ä¸ä¸è´ï¼ä»èå¼èµ·ä¸¢å¸§ç°è±¡ã\n\nsetTimeoutçæ§è¡åªæ¯å¨åå­ä¸­å¯¹å¾åå±æ§è¿è¡æ¹åï¼è¿ä¸ªååå¿é¡»è¦ç­å°å±å¹ä¸æ¬¡å·æ°æ¶æä¼è¢«æ´æ°å°å±å¹ä¸ãå¦æä¸¤èçæ­¥è°ä¸ä¸è´ï¼å°±å¯è½ä¼å¯¼è´ä¸­é´æä¸å¸§çæä½è¢«è·¨è¶è¿å»ï¼èç´æ¥æ´æ°ä¸ä¸å¸§çå¾åã\n\n\n# ï¼2ï¼requestAnimationFrameå®ç°å¨ç»ï¼\n\nrequestAnimationFrameæå¤§çä¼å¿æ¯ç±ç³»ç»æ¥å³å®åè°å½æ°çæ§è¡æ¶æºã\n\nå¦æå±å¹å·æ°çæ¯60Hz,é£ä¹åè°å½æ°å°±æ¯16.7msè¢«æ§è¡ä¸æ¬¡ï¼å¦æå·æ°çæ¯75Hzï¼é£ä¹è¿ä¸ªæ¶é´é´éå°±åæäº1000/75=13.3msï¼æ¢å¥è¯è¯´å°±æ¯ï¼requestAnimationFrameçæ­¥ä¼è·çç³»ç»çå·æ°æ­¥ä¼èµ°ãå®è½ä¿è¯åè°å½æ°å¨å±å¹æ¯ä¸æ¬¡çå·æ°é´éä¸­åªè¢«æ§è¡ä¸æ¬¡ï¼è¿æ ·å°±ä¸ä¼å¼èµ·ä¸¢å¸§ç°è±¡ï¼ä¹ä¸ä¼å¯¼è´å¨ç»åºç°å¡é¡¿çé®é¢ã\n\njs\n\nvar num = 0;\nanimation = null;\n\nfunction fn(){\n    console.log( num++ );\n    animation = requestAnimationFrame(fn);//å¼æ­¥\n}\nfn();\n\ndocument.onclick = function(){\n    cancelAnimation( animation );\n}\n\n\n\n# ä»ç»ä¸ä¸åç«¯è·¯ç±\n\n * historyæ¨¡å¼åhashæ¨¡å¼\n\n\n# for in å for of\n\næç´æ¥çåºå«æ¯ï¼\n\n * for...in è¯­å¥ä»¥ä»»æé¡ºåºè¿­ä»£å¯¹è±¡çå¯æä¸¾å±æ§ã\n * for...of è¯­å¥éåå¯è¿­ä»£å¯¹è±¡å®ä¹è¦è¿­ä»£çæ°æ®ã\n   * åæ¬ Arrayï¼Mapï¼Setï¼Stringï¼TypedArrayï¼arguments å¯¹è±¡ç­ç­\n\né¤æ­¤ä¹å¤ï¼å¯¹äºfor inçç¼ºç¹\n\n 1. ç´¢å¼æ¯å­ç¬¦ä¸²åçæ°å­ï¼å èä¸è½ç´æ¥è¿è¡å ä½è¿ç®\n 2. éåé¡ºåºå¯è½ä¸æ¯å®éçåé¨é¡ºåº\n 3. for inä¼éåæ°ç»ææçå¯æä¸¾å±æ§ï¼åæ¬ååãä¾å¦çååæ¹æ³methodånameå±æ§\n\n> æ­¤å¤ï¼for ... inæ¯ä¸ºéåå¯¹è±¡å±æ§èæå»ºçï¼ä¸å»ºè®®ä¸æ°ç»ä¸èµ·ä½¿ç¨ï¼æ°ç»å¯ä»¥ç¨Array.prototype.forEach()åfor ... of\n\narr = [1,2,3,4]\nfor(let i in arr){\n    console.log(i + 1)\n}\n// è¾åº\n// 01\n// 11\n// 21\n// 31\n\n\nç¸å¯¹äºfor ofçç¼ºç¹ï¼\n\nArray.prototype.method=function(){}\nvar myArray=[1,2,4];\nmyArray.name=\"æ°ç»\";\n\nfor (var index in myArray)\n    console.log(myArray[index]);    //0,1,2,method,name\n\nfor (var value of myArray) \n    console.log(value);    //1,2,4\n\nvar obj = {\n    a:1,\n    b:2\n}\nfor(var i in obj){\n    console.log(obj[i])   //1,2\n}\nfor(var j of obj){\n    console.log(j)        //æ¥éobj[Symbol.iterator] is not a function\n}\n\n\n\n# è¿­ä»£å¨\n\nå½æä»¬ç¨forâ¦oféåå¯¹è±¡æ¶\n\nconst obj = { foo: 123, bar: 456 }\n\nfor(const item of obj) {\n    console.log(item)\n}\n// æ¥é obj is not iterable\n\n\nArray,Set,Mapé½æIteratorå±æ§ï¼æä»¥å¯ä»¥ç¨forâ¦oféå\n\nconst arr = [1, 2, 3]\narr[Symbol.iterator]()\n\n// Array Iterator {} å¶ä¸­è¿ænextæ¹æ³\n\nconst iterator = arr[Symbol.iterator]()\niterator.next() // {value: 1, done: false}\niterator.next() // {value: 2, done: false}\niterator.next() // {value: 3, done: false}\niterator.next() // {value: undefined, done: true}\n\n\nfor..ofå¶å®å°±æ¯å»è°ç¨iteratoræ¥å£\n\n// è¿­ä»£å¨æ¨¡å¼\n\n// åºæ¯ï¼ååå¼åä¸ä¸ªä»»å¡æ¸å\n\n// açä»£ç \nconst todos = {\n    life: ['åé¥­', 'ç¡è§', 'æè±è±'],\n    learn: ['è¯­æ', 'æ°å­¦', 'å¤è¯­'],\n    work: ['åè¶']\n}\n\n// bçä»£ç ,éè¦ç¥éå¯¹è±¡ç»æ\nfor (const item of todos.life) {\n    console.log(item)\n}\nfor (const item of todos.learn) {\n    console.log(item)\n}\nfor (const item of todos.work) {\n    console.log(item)\n}\n\n// è¿æ¶å¦ææå¨aä»£ç çtodoså¯¹è±¡ä¸­å ä¸ä¸ªæ¥å£\neach: function (callback) {\n    const all = [].concat(this.life, this.learn, this.work)\n    for(const item of all) {\n        callback(item)\n    }\n}\n\n// bä¸­å°±å¯ä»¥è¿æ ·è°ç¨\ntodo.each(item => console.log(item))\n\n\nè¿­ä»£å¨å®ç°ï¼å¯¹å¤æä¾ç»ä¸éåæ¥å£\n\nconst todos = {\n    life: ['åé¥­', 'ç¡è§', 'æè±è±'],\n    learn: ['è¯­æ', 'æ°å­¦', 'å¤è¯­'],\n    work: ['åè¶'],\n\n    [Symbol.iterator]: function () {\n        const all = [...this.life, ...this.learn, ...this.work]\n        let index = 0\n        return {\n            next: function () {\n                return {\n                    value: all[index]\n                    done: index++ >= all.length\n                }\n            }\n        }\n    }\n}\n\nfor(const item of todos) {\n    console.log(item)\n}\n\n\nçæå¨å®ç°è¿­ä»£å¨\n\nconst todos = {\n    life: ['åé¥­', 'ç¡è§', 'æè±è±'],\n    learn: ['è¯­æ', 'æ°å­¦', 'å¤è¯­'],\n    work: ['åè¶'],\n\n    [Symbol.iterator]: function * () {\n        const all = [...this.life, ...this.learn, ...this.work]\n        for(const item of all) {\n            yield item\n        }\n    }\n}\n\nfor(const item of todos) {\n    console.log(item)\n}\n\n\n\n# åºæ¯é¢ï¼åæ°æ¼æ¥\n\n * å¦ä½ä¿è¯æè¿ä¸ªåæ°æ¶æ¼æ¥ï¼æ²¡æçæ¶åä¸æ¼æ¥å¢\n\n    let options = {\n        'name': this.name,\n        'age': this.age,\n        'sex': this.sex\n      }\n      let paramsurl = ''\n      for(const key in options) {\n        const value = options[key]\n        value &&\n          (paramsurl += paramsurl ? `&${key}=${value}` : `${key}=${value}`)\n      }\n\n\n\n# csså¯ç»§æ¿çå±æ§\n\n * å­ä½ç³»åå±æ§\n\n> font-familyï¼å­ä½ç³»å\n> \n> font-weightï¼å­ä½çç²ç»\n> \n> font-sizeï¼å­ä½çå¤§å°\n> \n> font-styleï¼å­ä½çé£æ ¼\n\n * ææ¬ç³»åå±æ§\n\n> text-indentï¼ææ¬ç¼©è¿\n> \n> text-alignï¼ææ¬æ°´å¹³å¯¹é½\n> \n> line-heightï¼è¡é«\n> \n> word-spacingï¼åè¯ä¹é´çé´è·\n> \n> letter-spacingï¼ä¸­ææèå­æ¯ä¹é´çé´è·\n> \n> text-transformï¼æ§å¶ææ¬å¤§å°åï¼å°±æ¯uppercaseãlowercaseãcapitalizeè¿ä¸ä¸ªï¼\n> \n> colorï¼ææ¬é¢è²\n\n * åç´ å¯è§æ§\n\n> visibilityï¼æ§å¶åç´ æ¾ç¤ºéè\n\n * åè¡¨å¸å±å±æ§\n\n> list-styleï¼åè¡¨é£æ ¼ï¼åæ¬list-style-typeãlist-style-imageç­\n\n * åæ å±æ§\n\n> cursorï¼åæ æ¾ç¤ºä¸ºä½ç§å½¢æ\n\n\n# gitæå ç§ç¶æ\n\nGit æä¸ç§ç¶æï¼ä½ çæä»¶å¯è½å¤äºå¶ä¸­ä¹ä¸ï¼\n\n * å·²æäº¤ï¼committedï¼ï¼æ°æ®å·²ç»å®å¨çä¿å­å¨æ¬å°æ°æ®åºä¸­ã\n * å·²ä¿®æ¹ï¼modifiedï¼ï¼å·²ä¿®æ¹è¡¨ç¤ºä¿®æ¹äºæä»¶ï¼ä½è¿æ²¡ä¿å­å°æ°æ®åºä¸­ã\n * å·²æå­ï¼stagedï¼ï¼è¡¨ç¤ºå¯¹ä¸ä¸ªå·²ä¿®æ¹æä»¶çå½åçæ¬åäºæ è®°ï¼ä½¿ä¹åå«å¨ä¸æ¬¡æäº¤çå¿«ç§ä¸­ã\n\nç±æ­¤å¼å¥ Git é¡¹ç®çä¸ä¸ªå·¥ä½åºåçæ¦å¿µï¼\n\n * Git ä»åº(.git directoty)\n * å·¥ä½ç®å½(Working Directory)\n * æå­åºå(Staging Area)\n\n# åºæ¬ç Git å·¥ä½æµç¨å¦ä¸ï¼\n\n * å¨å·¥ä½ç®å½ä¸­ä¿®æ¹æä»¶ã\n * æå­æä»¶ï¼å°æä»¶çå¿«ç§æ¾å¥æå­åºåã\n * æäº¤æ´æ°ï¼æ¾å°æå­åºåçæä»¶ï¼å°å¿«ç§æ°¸ä¹æ§å­å¨å° Git ä»åºç®å½\n\n----------------------------------------\n\n * Workspaceï¼å·¥ä½åº\n * Index / Stageï¼æå­åº\n * Repositoryï¼ä»åºåºï¼ææ¬å°ä»åºï¼\n * Remoteï¼è¿ç¨ä»åº\n\n\n# ç®è¿° new ä¸ä¸ªå¯¹è±¡çè¿ç¨\n\nç®è¿°newä¸ä¸ªå¯¹è±¡çè¿ç¨ï¼\n\n> åé ä¸ä¸ªæ°çç©ºå¯¹è±¡ æ°å¯¹è±¡ç_proto_æåæé å½æ°çååå¯¹è±¡ æé å½æ°çthisæåæ­£å¨åå»ºçæ°å¯¹è±¡ï¼å¹¶æ§è¡æé å½æ°çä»£ç ï¼åæ°å¯¹è±¡ä¸­æ·»å å±æ§åæ¹æ³ã è¿åæ°å¯¹è±¡å°å\n\n        function book(name,value){\n            this.name = name\n            this.value = value\n        }\n\n        let book1 = new book(\"abc\",\"100\")\n        console.log(book1)\n\n        function myNew(constructor,...args){\n            let obj = new Object()\n            constructor.call(obj,...args)\n            obj.__proto__ = constructor.prototype\n            return obj\n        }\n        let book2 = myNew(book,\"def\",\"200\")\n        console.log(book2)\n\n        console.log(book2 instanceof book) //true\n\n\n\n# ä¸éé¢è¯é¢\n\nfunction ClassA()\n{\n    this.name = 'classA'\n}\nconst classA = new ClassA ()\nClassA.prototype =\nclassA.__proto__ =\nclassA instanceof ClassA\n\n\n * new åºæ¥çå®ä¾ this æååª (æ°å®ä¾)\n * æä¹ä¿®æ¹ new åºæ¥ç this çæåï¼returnä¸ä¸ªæ°å¯¹è±¡ï¼\n * ClassA.prototype == classA.proto\n * ååé¾è®²ä¸ä¸\n * instanceof ä»ä¹æ¶åè¿å trueï¼ä»ä¹æ¶åè¿å false\n * æä¹è®© classA instanceof ClassA è¿å false ( æ¹åClassA.prototypeæclassA.proto)\n\n\n# æ°æ®å±æ§ä¸è®¿é®å¨å±æ§\n\né¦åæç¡®ï¼è¿ä¸¤ä¸ªæ¦å¿µæ¯éå¯¹æ°æ®æ¥å®ä¹çã\n\n# æ°æ®å±æ§\n\næ°æ®å±æ§ï¼propertyï¼ç¨äºå®ç°JavaScriptå¼æï¼æ¯å±æ§(property)çåé¨å¼ï¼å®åå«ä¸ä¸ªæ°æ®å¼çä½ç½®ãæå¦ä¸4ç§è¡ä¸ºç¹æ§ã\n\n * [[Configurable]]ï¼è½å¦è¢«deleteå é¤å±æ§éæ°å®ä¹\n * [[Enumerable]]ï¼è½å¦è¢«for-inæä¸¾\n * [[Writable]]ï¼è½å¦ä¿®æ¹å±æ§å¼\n * [[Value]]ï¼æ°æ®çæ°æ®å¼\n\nlet person = {}\nObject.defineProperty(person,\"name\",{\n    writable:false   //ä¸å¯ä¿®æ¹å±æ§\n    value:\"abc\"\n})\n\nconsole.log(person.name) //abc\nperson.name = bcd\nconsole.log(person.name) //abc\n\n\n# è®¿é®å¨å±æ§\n\nè®¿é®å¨å±æ§ä¸»è¦ç±setterågetterå½æ°ç»æï¼åå«å¦ä¸4ä¸ªç¹æ§ï¼\n\n * [[Configurable]]ï¼è½å¦è¢«deleteå é¤å±æ§éæ°å®ä¹ãé»è®¤å¼ï¼true\n * [[Enumerable]]ï¼è½å¦è¢«for-inæä¸¾ãé»è®¤å¼ï¼true\n * [[Get]]ï¼è¯»åå±æ§å¼ãé»è®¤å¼ï¼undefined\n * [[Set]]ï¼åå¥å±æ§å¼ãé»è®¤å¼ï¼undefined\n\nlet book = {\n    _year:2004, //_yearåé¢çä¸åçº¿æ¯ä¸ç§å¸¸ç¨çè®°å·ï¼ç¨äºè¡¨ç¤ºåªè½éè¿å¯¹è±¡æ¹æ³è®¿é®çå±æ§ã\n    edition:1\n}\nObject.defineProperty(book,\"year\",{\n    get:function(){\n        return this._year\n    },\n    set:function(newValue){\n        if(newValue>2004){\n            this._year = newValue\n            this.edition += newValue-2004\n        }\n    }\n})\n\nbook.year = 2005\nconsole.log(book.edition)\n\n\nå¶å®_yearåyearæ¯ä¸¤ä¸ªå±æ§ï¼_yearæ¯æ°æ®å±æ§ï¼yearæ¯è®¿é®å¨å±æ§ï¼_yearä¸ºåé¨ä½¿ç¨çï¼yearä¸ºå¤é¨ä½¿ç¨çã\n\nå¦æé½æ¹ä¸ºyearï¼è°ç¨book.yearä¼æ¥éï¼å ä¸ºè¿å¥è¯æ¢å¯ä»¥è¾åºæ°æ®å±æ§ï¼ä¹å¯ä»¥è°ç¨è®¿é®å¨å±æ§ï¼äº§çå²çªã",normalizedContent:"# é¢è¯é¢ï¼äºï¼\n\n * ä»ä¹æ¯äºä»¶åæ³¡ï¼äºä»¶æè·ï¼äºä»¶å§æ\n * éç»ååæµ\n * requestanimationframe å settimeout\n * ä»ç»ä¸ä¸åç«¯è·¯ç±\n * for in å for of\n * åºæ¯é¢ï¼åæ°æ¼æ¥\n * csså¯ç»§æ¿çå±æ§\n * gitæå ç§ç¶æ\n * ç®è¿° new ä¸ä¸ªå¯¹è±¡çè¿ç¨\n * æ°æ®å±æ§ä¸è®¿é®å¨å±æ§\n\n\n# ä»ä¹æ¯äºä»¶åæ³¡ï¼äºä»¶æè·ï¼äºä»¶å§æ\n\n * äºä»¶åæ³¡\n\n> å½ç»ç¶å­åç´ çåä¸äºä»¶ç»å®æ¹æ³çæ¶åï¼è§¦åå­åç´ èº«ä¸çäºä»¶ï¼æ§è¡å®æ¯ä¹åï¼ä¹ä¼è§¦åç¶çº§åç´ ç¸åçäºä»¶ï¼è¿ç§æºå¶å«äºä»¶åæ³¡\n\n * äºä»¶æè·\n\n> ç»ç¶å­åç´ ç¨ç»å®åä¸äºä»¶æ¶ï¼å½è§¦åå­åç´ èº«ä¸çäºä»¶æ¶ï¼åè§¦åç¶åç´ ï¼ç¶åå¨ä¼ éç»å­åç´ ï¼è¿ç§ä¼ æ­æºå¶å«äºä»¶æè·ï¼\n\nå®éæä½ä¸­ï¼æä»¬å¯ä»¥éè¿ element.addeventlistener() è®¾ç½®ä¸ä¸ªåç´ çäºä»¶æ¨¡åä¸ºåæ³¡äºä»¶æèæè·äºä»¶ã åæ¥çä¸ä¸ addeventlistener å½æ°çè¯­æ³ï¼\n\nelement.addeventlistener(type, listener, usecapture)\n\n\n * type çå¬äºä»¶ç±»åçå­ç¬¦ä¸²\n * listener äºä»¶çå¬åè°å½æ°ï¼å³äºä»¶è§¦ååè¦å¤ççå½æ°\n * usecapture é»è®¤å¼falseï¼è¡¨ç¤ºäºä»¶åæ³¡ï¼è®¾ä¸ºtrueæ¶ï¼è¡¨ç¤ºäºä»¶æè·\n\n       <div id=\"box1\">\n            <div id=\"box2\">\n                <div id=\"box3\"></div>\n            </div>\n        </div>\n\n        <script>\n            function saybox3() {\n                console.log('ä½ ç¹äºæéé¢çbox');\n            }\n            function saybox2() {\n                console.log('ä½ ç¹äºæä¸­é´çbox');\n            }\n            function saybox1() {\n                console.log('ä½ ç¹äºæå¤é¢çbox');\n            }\n            // äºä»¶çå¬ï¼ç¬¬ä¸ä¸ªåæ°æ¯å¸å°å¼ï¼é»è®¤falseï¼falseæ¯äºä»¶åæ³¡ï¼trueæ¯äºä»¶æè·\n            document.getelementbyid('box3').addeventlistener('click', saybox3, false);\n            document.getelementbyid('box2').addeventlistener('click', saybox2, false);\n            document.getelementbyid('box1').addeventlistener('click', saybox1, false);\n\n        <\/script>\n\n\n * äºä»¶å§æ\n\näºä»¶å§æå°±æ¯åªæå®ä¸ä¸ªäºä»¶å¤çç¨åºï¼å°±å¯ä»¥ç®¡çæä¸ç±»åçææäºä»¶ã\n\nä¸ºä»ä¹è¦ç¨äºä»¶å§æ\n\nä¸è¬æ¥è¯´ï¼doméè¦æäºä»¶å¤çç¨åºï¼æä»¬é½ä¼ç´æ¥ç»å®è®¾äºä»¶å¤çç¨åºå°±å¥½äºï¼é£å¦ææ¯å¾å¤çdoméè¦æ·»å äºä»¶å¤çå¢ï¼æ¯å¦æä»¬æ100ä¸ªliï¼æ¯ä¸ªlié½æç¸åçclickç¹å»äºä»¶ï¼å¯è½æä»¬ä¼ç¨forå¾ªç¯çæ¹æ³ï¼æ¥éåææçliï¼ç¶åç»å®ä»¬æ·»å äºä»¶ï¼é£è¿ä¹åä¼å­å¨ä»ä¹å½±åå¢ï¼\n\nå¨javascriptä¸­ï¼æ·»å å°é¡µé¢ä¸çäºä»¶å¤çç¨åºæ°éå°ç´æ¥å³ç³»å°é¡µé¢çæ´ä½è¿è¡æ§è½ï¼å ä¸ºéè¦ä¸æ­çä¸domèç¹è¿è¡äº¤äºï¼è®¿é®domçæ¬¡æ°è¶å¤ï¼å¼èµ·æµè§å¨éç»ä¸éæçæ¬¡æ°ä¹å°±è¶å¤ï¼å°±ä¼å»¶é¿æ´ä¸ªé¡µé¢çäº¤äºå°±ç»ªæ¶é´ï¼è¿å°±æ¯ä¸ºä»ä¹æ§è½ä¼åçä¸»è¦ææ³ä¹ä¸å°±æ¯åå°domæä½çåå ï¼å¦æè¦ç¨äºä»¶å§æï¼å°±ä¼å°ææçæä½æ¾å°jsç¨åºéé¢ï¼ä¸domçæä½å°±åªéè¦äº¤äºä¸æ¬¡ï¼è¿æ ·å°±è½å¤§å¤§çåå°ä¸domçäº¤äºæ¬¡æ°ï¼æé«æ§è½ï¼\n\næ¯ä¸ªå½æ°é½æ¯ä¸ä¸ªå¯¹è±¡ï¼æ¯å¯¹è±¡å°±ä¼å ç¨åå­ï¼å¯¹è±¡è¶å¤ï¼åå­å ç¨çå°±è¶å¤§ï¼èªç¶æ§è½å°±è¶å·®äºï¼æ¯å¦ä¸é¢ç100ä¸ªliï¼å°±è¦å ç¨100ä¸ªåå­ç©ºé´ï¼å¦æç¨äºä»¶å§æï¼é£ä¹æä»¬å°±å¯ä»¥åªå¯¹å®çç¶çº§ï¼å¦æåªæä¸ä¸ªç¶çº§ï¼è¿ä¸ä¸ªå¯¹è±¡è¿è¡æä½ï¼è¿æ ·æä»¬å°±éè¦ä¸ä¸ªåå­ç©ºé´å°±å¤äºï¼æ¯ä¸æ¯çäºå¾å¤ï¼èªç¶æ§è½å°±ä¼æ´å¥½ã\n\nå¦ä½å®ç°å¢ï¼\n\ne.targetå¯ä»¥ç¨æ¥å®ç°äºä»¶å§æï¼è¯¥åçæ¯éè¿äºä»¶åæ³¡ï¼æèäºä»¶æè·ï¼ç»ç¶åç´ æ·»å äºä»¶çå¬ï¼e.targetæåå¼åè§¦åäºä»¶çåç´ ï¼å¦ä¾å­ä¸­ï¼e.targetæåç¨æ·ç¹å»çliï¼ç±äºäºä»¶åæ³¡ï¼liçç¹å»äºä»¶åæ³¡å°äºulä¸ï¼éè¿ç»ulæ·»å çå¬äºä»¶èè¾¾å°äºç»æ¯ä¸ä¸ªliæ·»å çå¬äºä»¶çææï¼èe.currenttargetæåçæ¯ç»ç»å®äºä»¶çå¬çé£ä¸ªå¯¹è±¡ï¼å³ulï¼ä»è¿éå¯ä»¥åç°ï¼e.currenttarget===thisè¿åtrueï¼èe.target===thisè¿åfalseãe.currenttargetåe.targetæ¯ä¸ç¸ç­çã\n\n<ul id=\"item-list\">\n\t<li>item1</li>\n\t<li>item2</li>\n\t<li>item3</li>\n\t<li>item4</li>\n</ul>\n\n<script>\nvar items = document.getelementbyid('item-list');\n  \n//äºä»¶æè·å®ç°äºä»¶ä»£ç\nitems.addeventlistener('click', (e) => {console.log('æè·ï¼click ',e.target.innerhtml)}, true);\n  \n//äºä»¶åæ³¡å®ç°äºä»¶ä»£ç\nitems.addeventlistener('click', (e) => {console.log('åæ³¡ï¼click ',e.target.innerhtml)}, false);\n<\/script>\n\n\n\n# å¦ä½é»æ­¢åæ³¡åé»è®¤äºä»¶\n\nä»ä¹æ¯åæ³¡äºä»¶ï¼å¦å¨ä¸ä¸ªæé®æ¯ç»å®ä¸ä¸ªâclickâäºä»¶ï¼é£ä¹âclickâäºä»¶ä¼ä¾æ¬¡å¨å®çç¶çº§åç´ ä¸­è¢«è§¦å\n\n    <div id='div'>\n        <ul>\n            <li>test</li>\n        </ul>\n    </div>\n    <script>\n        let div = document.getelementbyid('div')\n        let ul = document.getelementsbytagname('ul')[0]\n        let li = document.getelementsbytagname('li')[0]\n\n        div.onclick = function(){\n            alert(\"div\")\n        }\n        ul.onclick = function(){\n            alert(\"ul\")\n        }\n        li.onclick = function(){\n            // window.event? window.event.cancelbubble = true : e.stoppropagation();\n            alert(\"li\")\n        }\n    <\/script>\n\n\né»æ­¢åæ³¡\n\nw3cçæ¹æ³æ¯e.stoppropagation()ï¼ieåæ¯ä½¿ç¨e.cancelbubble = true ï¼å¼å®¹æ§åæ³å¦ä¸ï¼åªä¼è¾åºli\n\né»æ­¢é»è®¤äºä»¶\n\nw3cçæ¹æ³æ¯e.preventdefault()ï¼ieåæ¯ä½¿ç¨window.event.returnvalue = false;\n\njavascriptçreturn falseåªä¼é»æ­¢é»è®¤è¡ä¸º\n\n<a href=\"http://caibaojian.com/\" id=\"testa\" >caibaojian.com</a>\n    <script>\n        var a = document.getelementbyid(\"testa\");\n            a.onclick =function(e){\n                if(e.preventdefault){\n                    e.preventdefault();\n                }else{\n                    window.event.returnvalue == false;\n                }\n        }\n <\/script>\n\n\n * domäºä»¶æµæ3ä¸ªé¶æ®µï¼æè·é¶æ®µï¼ç®æ é¶æ®µï¼åæ³¡é¶æ®µï¼ä¸ä¸ªé¶æ®µçé¡ºåºä¸ºï¼æè·é¶æ®µââç®æ é¶æ®µââåæ³¡é¶æ®µï¼è¿ä¸ªé¡ºåºæ¯åºå®çï¼æä»¬ä¸é¢å®ç°çäºä»¶æè·æèäºä»¶åæ³¡ï¼åªæ¯å¨è¿ä¸ä¸ªé¶æ®µçæä¸ªé¶æ®µå»æ§è¡èå·²\n * å½æä¸ªç±»åçäºä»¶aåçåï¼domä¼ä»¥--ä»windowå¯¹è±¡å¼å§ä¾æ¬¡éçº§ï¼æ¾å°ç®æ domå¯¹è±¡ï¼åä»ç®æ å¯¹è±¡ä¾æ¬¡åçº§è³window--è¿æ ·ä¸ä¸ªé¡ºåºï¼å¯»æ¾åçº§çè¯¥äºä»¶(äºä»¶a)çäºä»¶çå¬ã\n\n\n# éç»ååæµ\n\nå¨é¡µé¢å è½½æ¶ï¼æµè§å¨æè·åå°çhtmlä»£ç è§£ææ1ä¸ªdomæ ã dom tree åæ ·å¼ç»æä½ç»ååæå»ºrender treeï¼render treeä¸­æ¯ä¸ªnodeé½æèªå·±çstyleï¼èä¸render treeä¸åå«éèçèç¹ï¼å ä¸ºè¿äºèç¹ä¸ä¼ç¨äºåç°ï¼èä¸ä¸ä¼å½±ååç°çã\n\n * å¾ç¤º\n\n\n# ä»ä¹æ¯åæµ\n\nå½render treeä¸­çä¸é¨å(æå¨é¨)å ä¸ºåç´ çè§æ¨¡å°ºå¯¸ï¼å¸å±ï¼éèç­æ¹åèéè¦éæ°æå»ºãè¿å°±ç§°ä¸ºåæµ(reflow)ãæ¯ä¸ªé¡µé¢è³å°éè¦ä¸æ¬¡åæµï¼å°±æ¯å¨é¡µé¢ç¬¬ä¸æ¬¡å è½½çæ¶åï¼è¿æ¶åæ¯ä¸å®ä¼åçåæµçï¼å ä¸ºè¦æå»ºrender treeãå¨åæµçæ¶åï¼æµè§å¨ä¼ä½¿æ¸²ææ ä¸­åå°å½±åçé¨åå¤±æï¼å¹¶éæ°æé è¿é¨åæ¸²ææ ï¼å®æåæµåï¼æµè§å¨ä¼éæ°ç»å¶åå½±åçé¨åå°å±å¹ä¸­ï¼è¯¥è¿ç¨æä¸ºéç»ã\n\n\n# ä»ä¹æ¯éç»\n\nå½render treeä¸­çä¸äºåç´ éè¦æ´æ°å±æ§ï¼èè¿äºå±æ§åªæ¯å½±ååç´ çå¤è§ï¼é£æ ¼ï¼èä¸ä¼å½±åå¸å±çï¼æ¯å¦background-colorãåå°±å«ç§°ä¸ºéç»ã\n\n\n# åºå«ï¼\n\n * åæµå¿å°å¼èµ·éç»ï¼èéç»ä¸ä¸å®ä¼å¼èµ·åæµãæ¯å¦ï¼åªæé¢è²æ¹åçæ¶åå°±åªä¼åçéç»èä¸ä¼å¼èµ·åæµ\n * å½é¡µé¢å¸å±åå ä½å±æ§æ¹åæ¶å°±éè¦åæµãæ¯å¦ï¼æ·»å æèå é¤å¯è§çdomåç´ ï¼åç´ ä½ç½®æ¹åï¼åç´ å°ºå¯¸æ¹åââè¾¹è·ãå¡«åãè¾¹æ¡ãå®½åº¦åé«åº¦ï¼åå®¹æ¹å\n\n\n# æµè§å¨çä¼åæºå¶\n\nç±äºæ¯æ¬¡åæµé½ä¼é æé¢å¤çè®¡ç®æ¶èï¼å æ­¤å¤§å¤æ°æµè§å¨é½ä¼éè¿éååä¿®æ¹å¹¶æ¹éæ§è¡æ¥ä¼ååæµè¿ç¨ãæµè§å¨ä¼å°ä¿®æ¹æä½æ¾å¥å°éåéï¼ç´å°è¿äºä¸æ®µæ¶é´æèæä½è¾¾å°äºä¸ä¸ªéå¼ï¼ææ¸ç©ºéåã\n\n\n# å¦ä½åå°åæµï¼éç»\n\n * ç´æ¥é¿åï¼éç¨transform,opacityå¯ä»¥ç´æ¥è·³è¿ä¸»çº¿ç¨ï¼ç¨compositerçº¿ç¨å®æ\n * åå¹¶å¤æ¬¡å¯¹domåæ ·å¼çä¿®æ¹\n * å°å¤æçåç´ ç»å¯¹å®ä½ï¼è±ç¦»ææ¡£æµï¼å¦ååæµçä»£ä»·å¾é«ã\n\n * æµè§å¨æ¸²æç¸å³\n * å­èåç«¯æåæ¹é¢è¯é¢ï¼è§¦åäºå æ¬¡åæµå æ¬¡éç»\n\n\n# requestanimationframe å settimeout\n\n\n# ï¼1ï¼setimeoutå®ç°å¨ç»ï¼\n\nå©ç¨setimeoutå®ç°çå¨ç»å¨æäºä½ç«¯æºä¸ä¼åºç°å¡é¡¿ãæå¨çç°è±¡\n\nåå ä¸ãsettimeoutçæ§è¡æ¶é´å¹¶ä¸æ¯ç¡®å®çãå½è°ç¨ settimeout(fn, 0) æ¶ï¼fn ä¼è¢«æ¨å¥å®ä»»å¡éåãä½å½åæ§è¡æ ï¼åæ­¥ä»£ç ï¼å¿é¡»åå®å¨æ¸ç©ºãæ¸ç©ºåï¼å¼æä¼åå¤çææå¾®ä»»å¡ï¼å¦ promise.then çåè°ï¼ãå¾®ä»»å¡éåæ¸ç©ºåï¼æä¼ä»å®ä»»å¡éåä¸­ååº fn æ§è¡ãå æ­¤ï¼å³ä½¿ settimeout çå»¶è¿è®¾ä¸º 0ï¼å®ä»éç­å¾å½åä»£ç æ§è¡å®æ¯ + ææå¾®ä»»å¡æ§è¡å®æ¯ï¼å¯¼è´å®éæ§è¡æ¶é´ç¨æã\n\nåå äºãå·æ°é¢çåå±å¹åè¾¨çåå±å¹å°ºå¯¸çå½±åï¼å æ­¤ä¸åè®¾å¤çå±å¹å·æ°é¢çå¯è½ä¼ä¸åï¼è settimeoutåªè½è®¾ç½®ä¸ä¸ªåºå®çæ¶é´é´éï¼è¿ä¸ªæ¶é´ä¸ä¸å®åå±å¹çå·æ°æ¶é´ç¸åã\n\nä¸ä¸¤ç§æåµé½ä¼å¯¼è´settimeoutçæ§è¡æ­¥è°åå±å¹çå·æ°æ­¥è°ä¸ä¸è´ï¼ä»èå¼èµ·ä¸¢å¸§ç°è±¡ã\n\nsettimeoutçæ§è¡åªæ¯å¨åå­ä¸­å¯¹å¾åå±æ§è¿è¡æ¹åï¼è¿ä¸ªååå¿é¡»è¦ç­å°å±å¹ä¸æ¬¡å·æ°æ¶æä¼è¢«æ´æ°å°å±å¹ä¸ãå¦æä¸¤èçæ­¥è°ä¸ä¸è´ï¼å°±å¯è½ä¼å¯¼è´ä¸­é´æä¸å¸§çæä½è¢«è·¨è¶è¿å»ï¼èç´æ¥æ´æ°ä¸ä¸å¸§çå¾åã\n\n\n# ï¼2ï¼requestanimationframeå®ç°å¨ç»ï¼\n\nrequestanimationframeæå¤§çä¼å¿æ¯ç±ç³»ç»æ¥å³å®åè°å½æ°çæ§è¡æ¶æºã\n\nå¦æå±å¹å·æ°çæ¯60hz,é£ä¹åè°å½æ°å°±æ¯16.7msè¢«æ§è¡ä¸æ¬¡ï¼å¦æå·æ°çæ¯75hzï¼é£ä¹è¿ä¸ªæ¶é´é´éå°±åæäº1000/75=13.3msï¼æ¢å¥è¯è¯´å°±æ¯ï¼requestanimationframeçæ­¥ä¼è·çç³»ç»çå·æ°æ­¥ä¼èµ°ãå®è½ä¿è¯åè°å½æ°å¨å±å¹æ¯ä¸æ¬¡çå·æ°é´éä¸­åªè¢«æ§è¡ä¸æ¬¡ï¼è¿æ ·å°±ä¸ä¼å¼èµ·ä¸¢å¸§ç°è±¡ï¼ä¹ä¸ä¼å¯¼è´å¨ç»åºç°å¡é¡¿çé®é¢ã\n\njs\n\nvar num = 0;\nanimation = null;\n\nfunction fn(){\n    console.log( num++ );\n    animation = requestanimationframe(fn);//å¼æ­¥\n}\nfn();\n\ndocument.onclick = function(){\n    cancelanimation( animation );\n}\n\n\n\n# ä»ç»ä¸ä¸åç«¯è·¯ç±\n\n * historyæ¨¡å¼åhashæ¨¡å¼\n\n\n# for in å for of\n\næç´æ¥çåºå«æ¯ï¼\n\n * for...in è¯­å¥ä»¥ä»»æé¡ºåºè¿­ä»£å¯¹è±¡çå¯æä¸¾å±æ§ã\n * for...of è¯­å¥éåå¯è¿­ä»£å¯¹è±¡å®ä¹è¦è¿­ä»£çæ°æ®ã\n   * åæ¬ arrayï¼mapï¼setï¼stringï¼typedarrayï¼arguments å¯¹è±¡ç­ç­\n\né¤æ­¤ä¹å¤ï¼å¯¹äºfor inçç¼ºç¹\n\n 1. ç´¢å¼æ¯å­ç¬¦ä¸²åçæ°å­ï¼å èä¸è½ç´æ¥è¿è¡å ä½è¿ç®\n 2. éåé¡ºåºå¯è½ä¸æ¯å®éçåé¨é¡ºåº\n 3. for inä¼éåæ°ç»ææçå¯æä¸¾å±æ§ï¼åæ¬ååãä¾å¦çååæ¹æ³methodånameå±æ§\n\n> æ­¤å¤ï¼for ... inæ¯ä¸ºéåå¯¹è±¡å±æ§èæå»ºçï¼ä¸å»ºè®®ä¸æ°ç»ä¸èµ·ä½¿ç¨ï¼æ°ç»å¯ä»¥ç¨array.prototype.foreach()åfor ... of\n\narr = [1,2,3,4]\nfor(let i in arr){\n    console.log(i + 1)\n}\n// è¾åº\n// 01\n// 11\n// 21\n// 31\n\n\nç¸å¯¹äºfor ofçç¼ºç¹ï¼\n\narray.prototype.method=function(){}\nvar myarray=[1,2,4];\nmyarray.name=\"æ°ç»\";\n\nfor (var index in myarray)\n    console.log(myarray[index]);    //0,1,2,method,name\n\nfor (var value of myarray) \n    console.log(value);    //1,2,4\n\nvar obj = {\n    a:1,\n    b:2\n}\nfor(var i in obj){\n    console.log(obj[i])   //1,2\n}\nfor(var j of obj){\n    console.log(j)        //æ¥éobj[symbol.iterator] is not a function\n}\n\n\n\n# è¿­ä»£å¨\n\nå½æä»¬ç¨forâ¦oféåå¯¹è±¡æ¶\n\nconst obj = { foo: 123, bar: 456 }\n\nfor(const item of obj) {\n    console.log(item)\n}\n// æ¥é obj is not iterable\n\n\narray,set,mapé½æiteratorå±æ§ï¼æä»¥å¯ä»¥ç¨forâ¦oféå\n\nconst arr = [1, 2, 3]\narr[symbol.iterator]()\n\n// array iterator {} å¶ä¸­è¿ænextæ¹æ³\n\nconst iterator = arr[symbol.iterator]()\niterator.next() // {value: 1, done: false}\niterator.next() // {value: 2, done: false}\niterator.next() // {value: 3, done: false}\niterator.next() // {value: undefined, done: true}\n\n\nfor..ofå¶å®å°±æ¯å»è°ç¨iteratoræ¥å£\n\n// è¿­ä»£å¨æ¨¡å¼\n\n// åºæ¯ï¼ååå¼åä¸ä¸ªä»»å¡æ¸å\n\n// açä»£ç \nconst todos = {\n    life: ['åé¥­', 'ç¡è§', 'æè±è±'],\n    learn: ['è¯­æ', 'æ°å­¦', 'å¤è¯­'],\n    work: ['åè¶']\n}\n\n// bçä»£ç ,éè¦ç¥éå¯¹è±¡ç»æ\nfor (const item of todos.life) {\n    console.log(item)\n}\nfor (const item of todos.learn) {\n    console.log(item)\n}\nfor (const item of todos.work) {\n    console.log(item)\n}\n\n// è¿æ¶å¦ææå¨aä»£ç çtodoså¯¹è±¡ä¸­å ä¸ä¸ªæ¥å£\neach: function (callback) {\n    const all = [].concat(this.life, this.learn, this.work)\n    for(const item of all) {\n        callback(item)\n    }\n}\n\n// bä¸­å°±å¯ä»¥è¿æ ·è°ç¨\ntodo.each(item => console.log(item))\n\n\nè¿­ä»£å¨å®ç°ï¼å¯¹å¤æä¾ç»ä¸éåæ¥å£\n\nconst todos = {\n    life: ['åé¥­', 'ç¡è§', 'æè±è±'],\n    learn: ['è¯­æ', 'æ°å­¦', 'å¤è¯­'],\n    work: ['åè¶'],\n\n    [symbol.iterator]: function () {\n        const all = [...this.life, ...this.learn, ...this.work]\n        let index = 0\n        return {\n            next: function () {\n                return {\n                    value: all[index]\n                    done: index++ >= all.length\n                }\n            }\n        }\n    }\n}\n\nfor(const item of todos) {\n    console.log(item)\n}\n\n\nçæå¨å®ç°è¿­ä»£å¨\n\nconst todos = {\n    life: ['åé¥­', 'ç¡è§', 'æè±è±'],\n    learn: ['è¯­æ', 'æ°å­¦', 'å¤è¯­'],\n    work: ['åè¶'],\n\n    [symbol.iterator]: function * () {\n        const all = [...this.life, ...this.learn, ...this.work]\n        for(const item of all) {\n            yield item\n        }\n    }\n}\n\nfor(const item of todos) {\n    console.log(item)\n}\n\n\n\n# åºæ¯é¢ï¼åæ°æ¼æ¥\n\n * å¦ä½ä¿è¯æè¿ä¸ªåæ°æ¶æ¼æ¥ï¼æ²¡æçæ¶åä¸æ¼æ¥å¢\n\n    let options = {\n        'name': this.name,\n        'age': this.age,\n        'sex': this.sex\n      }\n      let paramsurl = ''\n      for(const key in options) {\n        const value = options[key]\n        value &&\n          (paramsurl += paramsurl ? `&${key}=${value}` : `${key}=${value}`)\n      }\n\n\n\n# csså¯ç»§æ¿çå±æ§\n\n * å­ä½ç³»åå±æ§\n\n> font-familyï¼å­ä½ç³»å\n> \n> font-weightï¼å­ä½çç²ç»\n> \n> font-sizeï¼å­ä½çå¤§å°\n> \n> font-styleï¼å­ä½çé£æ ¼\n\n * ææ¬ç³»åå±æ§\n\n> text-indentï¼ææ¬ç¼©è¿\n> \n> text-alignï¼ææ¬æ°´å¹³å¯¹é½\n> \n> line-heightï¼è¡é«\n> \n> word-spacingï¼åè¯ä¹é´çé´è·\n> \n> letter-spacingï¼ä¸­ææèå­æ¯ä¹é´çé´è·\n> \n> text-transformï¼æ§å¶ææ¬å¤§å°åï¼å°±æ¯uppercaseãlowercaseãcapitalizeè¿ä¸ä¸ªï¼\n> \n> colorï¼ææ¬é¢è²\n\n * åç´ å¯è§æ§\n\n> visibilityï¼æ§å¶åç´ æ¾ç¤ºéè\n\n * åè¡¨å¸å±å±æ§\n\n> list-styleï¼åè¡¨é£æ ¼ï¼åæ¬list-style-typeãlist-style-imageç­\n\n * åæ å±æ§\n\n> cursorï¼åæ æ¾ç¤ºä¸ºä½ç§å½¢æ\n\n\n# gitæå ç§ç¶æ\n\ngit æä¸ç§ç¶æï¼ä½ çæä»¶å¯è½å¤äºå¶ä¸­ä¹ä¸ï¼\n\n * å·²æäº¤ï¼committedï¼ï¼æ°æ®å·²ç»å®å¨çä¿å­å¨æ¬å°æ°æ®åºä¸­ã\n * å·²ä¿®æ¹ï¼modifiedï¼ï¼å·²ä¿®æ¹è¡¨ç¤ºä¿®æ¹äºæä»¶ï¼ä½è¿æ²¡ä¿å­å°æ°æ®åºä¸­ã\n * å·²æå­ï¼stagedï¼ï¼è¡¨ç¤ºå¯¹ä¸ä¸ªå·²ä¿®æ¹æä»¶çå½åçæ¬åäºæ è®°ï¼ä½¿ä¹åå«å¨ä¸æ¬¡æäº¤çå¿«ç§ä¸­ã\n\nç±æ­¤å¼å¥ git é¡¹ç®çä¸ä¸ªå·¥ä½åºåçæ¦å¿µï¼\n\n * git ä»åº(.git directoty)\n * å·¥ä½ç®å½(working directory)\n * æå­åºå(staging area)\n\n# åºæ¬ç git å·¥ä½æµç¨å¦ä¸ï¼\n\n * å¨å·¥ä½ç®å½ä¸­ä¿®æ¹æä»¶ã\n * æå­æä»¶ï¼å°æä»¶çå¿«ç§æ¾å¥æå­åºåã\n * æäº¤æ´æ°ï¼æ¾å°æå­åºåçæä»¶ï¼å°å¿«ç§æ°¸ä¹æ§å­å¨å° git ä»åºç®å½\n\n----------------------------------------\n\n * workspaceï¼å·¥ä½åº\n * index / stageï¼æå­åº\n * repositoryï¼ä»åºåºï¼ææ¬å°ä»åºï¼\n * remoteï¼è¿ç¨ä»åº\n\n\n# ç®è¿° new ä¸ä¸ªå¯¹è±¡çè¿ç¨\n\nç®è¿°newä¸ä¸ªå¯¹è±¡çè¿ç¨ï¼\n\n> åé ä¸ä¸ªæ°çç©ºå¯¹è±¡ æ°å¯¹è±¡ç_proto_æåæé å½æ°çååå¯¹è±¡ æé å½æ°çthisæåæ­£å¨åå»ºçæ°å¯¹è±¡ï¼å¹¶æ§è¡æé å½æ°çä»£ç ï¼åæ°å¯¹è±¡ä¸­æ·»å å±æ§åæ¹æ³ã è¿åæ°å¯¹è±¡å°å\n\n        function book(name,value){\n            this.name = name\n            this.value = value\n        }\n\n        let book1 = new book(\"abc\",\"100\")\n        console.log(book1)\n\n        function mynew(constructor,...args){\n            let obj = new object()\n            constructor.call(obj,...args)\n            obj.__proto__ = constructor.prototype\n            return obj\n        }\n        let book2 = mynew(book,\"def\",\"200\")\n        console.log(book2)\n\n        console.log(book2 instanceof book) //true\n\n\n\n# ä¸éé¢è¯é¢\n\nfunction classa()\n{\n    this.name = 'classa'\n}\nconst classa = new classa ()\nclassa.prototype =\nclassa.__proto__ =\nclassa instanceof classa\n\n\n * new åºæ¥çå®ä¾ this æååª (æ°å®ä¾)\n * æä¹ä¿®æ¹ new åºæ¥ç this çæåï¼returnä¸ä¸ªæ°å¯¹è±¡ï¼\n * classa.prototype == classa.proto\n * ååé¾è®²ä¸ä¸\n * instanceof ä»ä¹æ¶åè¿å trueï¼ä»ä¹æ¶åè¿å false\n * æä¹è®© classa instanceof classa è¿å false ( æ¹åclassa.prototypeæclassa.proto)\n\n\n# æ°æ®å±æ§ä¸è®¿é®å¨å±æ§\n\né¦åæç¡®ï¼è¿ä¸¤ä¸ªæ¦å¿µæ¯éå¯¹æ°æ®æ¥å®ä¹çã\n\n# æ°æ®å±æ§\n\næ°æ®å±æ§ï¼propertyï¼ç¨äºå®ç°javascriptå¼æï¼æ¯å±æ§(property)çåé¨å¼ï¼å®åå«ä¸ä¸ªæ°æ®å¼çä½ç½®ãæå¦ä¸4ç§è¡ä¸ºç¹æ§ã\n\n * [[configurable]]ï¼è½å¦è¢«deleteå é¤å±æ§éæ°å®ä¹\n * [[enumerable]]ï¼è½å¦è¢«for-inæä¸¾\n * [[writable]]ï¼è½å¦ä¿®æ¹å±æ§å¼\n * [[value]]ï¼æ°æ®çæ°æ®å¼\n\nlet person = {}\nobject.defineproperty(person,\"name\",{\n    writable:false   //ä¸å¯ä¿®æ¹å±æ§\n    value:\"abc\"\n})\n\nconsole.log(person.name) //abc\nperson.name = bcd\nconsole.log(person.name) //abc\n\n\n# è®¿é®å¨å±æ§\n\nè®¿é®å¨å±æ§ä¸»è¦ç±setterågetterå½æ°ç»æï¼åå«å¦ä¸4ä¸ªç¹æ§ï¼\n\n * [[configurable]]ï¼è½å¦è¢«deleteå é¤å±æ§éæ°å®ä¹ãé»è®¤å¼ï¼true\n * [[enumerable]]ï¼è½å¦è¢«for-inæä¸¾ãé»è®¤å¼ï¼true\n * [[get]]ï¼è¯»åå±æ§å¼ãé»è®¤å¼ï¼undefined\n * [[set]]ï¼åå¥å±æ§å¼ãé»è®¤å¼ï¼undefined\n\nlet book = {\n    _year:2004, //_yearåé¢çä¸åçº¿æ¯ä¸ç§å¸¸ç¨çè®°å·ï¼ç¨äºè¡¨ç¤ºåªè½éè¿å¯¹è±¡æ¹æ³è®¿é®çå±æ§ã\n    edition:1\n}\nobject.defineproperty(book,\"year\",{\n    get:function(){\n        return this._year\n    },\n    set:function(newvalue){\n        if(newvalue>2004){\n            this._year = newvalue\n            this.edition += newvalue-2004\n        }\n    }\n})\n\nbook.year = 2005\nconsole.log(book.edition)\n\n\nå¶å®_yearåyearæ¯ä¸¤ä¸ªå±æ§ï¼_yearæ¯æ°æ®å±æ§ï¼yearæ¯è®¿é®å¨å±æ§ï¼_yearä¸ºåé¨ä½¿ç¨çï¼yearä¸ºå¤é¨ä½¿ç¨çã\n\nå¦æé½æ¹ä¸ºyearï¼è°ç¨book.yearä¼æ¥éï¼å ä¸ºè¿å¥è¯æ¢å¯ä»¥è¾åºæ°æ®å±æ§ï¼ä¹å¯ä»¥è°ç¨è®¿é®å¨å±æ§ï¼äº§çå²çªã",charsets:{cjk:!0}},{title:"é¢è¯é¢ï¼ä¸ï¼",frontmatter:{title:"é¢è¯é¢ï¼ä¸ï¼",date:"2018-08-03T09:21:01.000Z",categories:"é¢è¯"},regularPath:"/interview/interview-7.html",relativePath:"interview/interview-7.md",key:"v-abac98c2",path:"/interview/interview-7.html",headers:[{level:2,title:"åçajax",slug:"åçajax",normalizedTitle:"åçajax",charIndex:13},{level:2,title:"displayæåªäºå±æ§",slug:"displayæåªäºå±æ§",normalizedTitle:"displayæåªäºå±æ§",charIndex:23},{level:2,title:"positionæåªäºå±æ§",slug:"positionæåªäºå±æ§",normalizedTitle:"positionæåªäºå±æ§",charIndex:39},{level:2,title:"transformæåªäºå±æ§",slug:"transformæåªäºå±æ§",normalizedTitle:"transformæåªäºå±æ§",charIndex:56},{level:2,title:"inputæ ç­¾çå±æ§",slug:"inputæ ç­¾çå±æ§",normalizedTitle:"inputæ ç­¾çå±æ§",charIndex:74},{level:2,title:"å¦ä½ç»ä¸ä¸ªé¡µé¢æ·»å 10000ä¸ªdiv",slug:"å¦ä½ç»ä¸ä¸ªé¡µé¢æ·»å 10000ä¸ªdiv",normalizedTitle:"å¦ä½ç»ä¸ä¸ªé¡µé¢æ·»å 10000ä¸ªdiv",charIndex:88},{level:2,title:"åçjsæä½DOMçAPI",slug:"åçjsæä½domçapi",normalizedTitle:"åçjsæä½domçapi",charIndex:110},{level:2,title:"ä¼ªç±»åä¼ªåç´ ",slug:"ä¼ªç±»åä¼ªåç´ ",normalizedTitle:"ä¼ªç±»åä¼ªåç´ ",charIndex:127},{level:3,title:"ç»ææ§ä¼ªç±»åç´ ",slug:"ç»ææ§ä¼ªç±»åç´ ",normalizedTitle:"ç»ææ§ä¼ªç±»åç´ ",charIndex:6565},{level:2,title:"åéæåçä¸éé¢",slug:"åéæåçä¸éé¢",normalizedTitle:"åéæåçä¸éé¢",charIndex:137},{level:2,title:"æ­£åå°ææºå·ä¸­é´åä½åä¸º*",slug:"æ­£åå°ææºå·ä¸­é´åä½åä¸º",normalizedTitle:"æ­£åå°ææºå·ä¸­é´åä½åä¸º*",charIndex:149},{level:2,title:"å¾çæå è½½",slug:"å¾çæå è½½",normalizedTitle:"å¾çæå è½½",charIndex:166},{level:2,title:"äºåæ¥æ¾",slug:"äºåæ¥æ¾",normalizedTitle:"äºåæ¥æ¾",charIndex:175},{level:2,title:"promiseè½å°è£setIntervalå",slug:"promiseè½å°è£setintervalå",normalizedTitle:"promiseè½å°è£setintervalå",charIndex:183}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"åçajax displayæåªäºå±æ§ positionæåªäºå±æ§ transformæåªäºå±æ§ inputæ ç­¾çå±æ§ å¦ä½ç»ä¸ä¸ªé¡µé¢æ·»å 10000ä¸ªdiv åçjsæä½DOMçAPI ä¼ªç±»åä¼ªåç´  ç»ææ§ä¼ªç±»åç´  åéæåçä¸éé¢ æ­£åå°ææºå·ä¸­é´åä½åä¸º* å¾çæå è½½ äºåæ¥æ¾ promiseè½å°è£setIntervalå",content:'# é¢è¯é¢ï¼ä¸ï¼\n\n * åçajax\n * displayæåªäºå±æ§\n * positionæåªäºå±æ§\n * transformæåªäºå±æ§\n * inputæ ç­¾çå±æ§\n * å¦ä½ç»ä¸ä¸ªé¡µé¢æ·»å 10000ä¸ªdiv\n * åçjsæä½DOMçAPI\n * ä¼ªç±»åä¼ªåç´ \n * åéæåçä¸éé¢\n * æ­£åå°ææºå·ä¸­é´åä½åä¸º*\n * å¾çæå è½½\n * äºåæ¥æ¾\n * promiseè½å°è£setIntervalå\n\n\n# åçajax\n\n// åçajaxå®ç°\nfunction ajax() {\n    var xhr = new XMLHttpRequest();\n    xhr.open(\'method\', \'url\');\n    xhr.send();\n    xhr.onreadystatechange = function() {\n        if ( xhr.readyState==4 && xhr.status==200) {\n            console.log(\'success\', xhr.responseText);\n        } else {\n            console.log(\'error\', xhr.responseText);\n        }\n    }\n}\n\n//readyState\n//0ï¼åå§åï¼XMLHttpRequestå¯¹è±¡è¿æ²¡æå®æåå§å\n//1ï¼è½½å¥ï¼XMLHttpRequestå¯¹è±¡å¼å§åéè¯·æ±\n//2ï¼è½½å¥å®æï¼XMLHttpRequestå¯¹è±¡çè¯·æ±åéå®æ\n//3ï¼è§£æï¼XMLHttpRequestå¯¹è±¡å¼å§è¯»åæå¡å¨çååº\n//4ï¼å®æï¼XMLHttpRequestå¯¹è±¡è¯»åæå¡å¨ååºç»æ\n\n\n\n# displayæåªäºå±æ§\n\n * display: none;è¡¨ç¤ºæ­¤åç´ å°ä¸è¢«æ¾ç¤ºã\n * display: block;å°åç´ æ¾ç¤ºä¸ºååç´ ãï¼åå«åçº§åç´ ï¼\n * display: inline;å°åç´ æ¾ç¤ºä¸ºåèåç´ ãï¼åå«è¡ååç´ ï¼\n\n> åèåç´ ä¸å¯ä»¥è®¾ç½®é«åº¦ãå®½åº¦ åªè½è®¾ç½®å·¦å³çmarginå¼åå·¦å³çpaddingå¼ï¼èä¸è½è®¾ç½®ä¸ä¸çmarginå¼åä¸ä¸çpaddingå¼ å¸¸è§ï¼spanãimgãinputãaãlabelãbutton\n\n * display: inline-block;å°åç´ æ¾ç¤ºä¸ºåèååç´ ã\n\n> ä¸æ¢è¡ï¼ä½å¯ä»¥è®¾ç½®å®½é«\n\n * display: inherit;è§å®åºè¯¥ä»ç¶åç´ ç»§æ¿ display å±æ§çå¼ã\n * display: tableï¼display: table-cell\n\n\n# positionæåªäºå±æ§\n\n * position:staticï¼åºç°å¨ææ¡£æµä¸­ï¼ä¸åtopï¼leftå½±å\n * position:relativeï¼ç¸å¯¹å®ä½ï¼æ ¹æ®åç´ åæ¥ä½ç½®å®ä½ï¼å¨ææ¡£æµä¸­\n * position:absoluteï¼ç»å¯¹å®ä½ï¼æ ¹æ®relativeçç¶åç´ å®ä½ï¼è±ç¦»ææ¡£æµ\n * positoin:fixedï¼ç¸å¯¹äºæµè§å¨çªå£åºå®ä½ç½®ï¼è±ç¦»ææ¡£æµã\n * position:inherit,ç»§æ¿\n * position:initial\n * position:stickyï¼\n\n> position: sticky;Â åºäºç¨æ·çæ»å¨ä½ç½®æ¥å®ä½ã\n\nç²æ§å®ä½çåç´ æ¯ä¾èµäºç¨æ·çæ»å¨ï¼å¨Â position:relativeÂ ä¸Â position:fixedÂ å®ä½ä¹é´åæ¢ã\n\nå¨ç®æ åºåä»¥åï¼å®çè¡ä¸ºå°±åÂ position:relative;Â èå½é¡µé¢æ»å¨è¶åºç®æ åºåæ¶ï¼å®çè¡¨ç°å°±åÂ position:fixed;ï¼å®ä¼åºå®å¨ç®æ ä½ç½®ã\n\n<style>\n    .top,\n    .middle,\n    .bottom {\n        position: relative;\n        background: lightblue;\n        height: 200px;\n    }\n    .middle {\n        background: yellow;\n    }\n    .bottom {\n        background: pink;\n    }\n    .fixed {\n        width: 100px;\n        height: 100px;\n        position: fixed;\n        background: red;\n    }\n</style>\n\n<div class="top"></div>\n<div class="middle"></div>\n<div class="fixed"></div>\n<div class="bottom"></div>\n\n\x3c!--fixedå¨bottomçå·¦ä¸è§ï¼è±ç¦»ææ¡£æµåè¢«è¦çäº--\x3e\n\n\n\n# transformæåªäºå±æ§\n\ntransform: rotate | scale | skew | translate |matrix;\n\n * transform:rotate(30deg)\n\n * scale(x,y)ä½¿åç´ æ°´å¹³æ¹åååç´æ¹ååæ¶ç¼©æ¾ï¼ä¹å°±æ¯Xè½´åYè½´åæ¶ç¼©æ¾ï¼ï¼\n   \n   scaleX(x)åç´ ä»æ°´å¹³æ¹åç¼©æ¾ï¼Xè½´ç¼©æ¾ï¼ï¼\n   \n   scaleY(y)åç´ ä»åç´æ¹åç¼©æ¾ï¼Yè½´ç¼©æ¾ï¼\n\n * skew(x,y)ä½¿åç´ å¨æ°´å¹³ååç´æ¹ååæ¶æ­æ²ï¼Xè½´åYè½´åæ¶æä¸å®çè§åº¦å¼è¿è¡æ­æ²åå½¢ï¼ï¼\n   \n   skewX(x)ä»ä½¿åç´ å¨æ°´å¹³æ¹åæ­æ²åå½¢ï¼Xè½´æ­æ²åå½¢ï¼ï¼\n   \n   skewY(y)ä»ä½¿åç´ å¨åç´æ¹åæ­æ²åå½¢ï¼Yè½´æ­æ²åå½¢ï¼ï¼\n\n * translate:åæ ·æä¸ç§æ¹æ³\n\n * matrix\n\n\n# inputæ ç­¾çå±æ§\n\n\x3c!-- maxlength å±æ§è§å®è¾å¥å­æ®µçæå¤§é¿åº¦--\x3e\n<input maxlength="value">\n\n\x3c!-- autocomplete å±æ§è§å®è¾å¥å­æ®µæ¯å¦åºè¯¥å¯ç¨èªå¨å®æåè½ãèªå¨å®æåè®¸æµè§å¨é¢æµå¯¹å­æ®µçè¾å¥ãå½ç¨æ·å¨å­æ®µå¼å§é®å¥æ¶ï¼æµè§å¨åºäºä¹åé®å¥è¿çå¼ï¼åºè¯¥æ¾ç¤ºåºå¨å­æ®µä¸­å¡«åçéé¡¹ã å¼å¯ä¸ºé»è®¤--\x3e\n\n<input autocomplete="on/off">\n\n\n\n# å¦ä½ç»ä¸ä¸ªé¡µé¢æ·»å 10000ä¸ªdiv\n\n<!DOCTYPE html>\n<html lang="zh-cn">\n<head>\n    <meta charset="UTF-8">\n    <title>Title</title>\n    <style>\n        body div {\n            width: 30px;\n            height: 2px;\n            border: 1px solid #ee3333;\n        }\n    </style>\n</head>\n<body>\n\n\n<script>\n    // å©ç¨ innerHTML æ¼æ¥å­ç¬¦ä¸²çæ¹å¼     (æ·»å 10000ä¸ªdiv)  (èæ¶çº¦900msï¼ ææ¢\n    // function f() {\n    //     var date = +new Date();\n    //     for (var i = 1; i <= 10000; i++) {\n    //         document.body.innerHTML += "<div></div>"\n    //     }\n    //     var date1 = +new Date();\n    //     console.log(date1-date);\n    // }\n    // f();\n\n    // å©ç¨ innerHTML æ°ç»èµå¼çæ¹å¼  ç»æç¨å¾®å¤æ  ï¼æ·»å 10000ä¸ªdiv)   ï¼èæ¶çº¦15ms)  æå¿«\n    function f() {\n        var date = +new Date();\n        var str = [];\n        for (var i = 1; i <= 10000; i++) {\n            str.push(\'<div></div>\');\n        }\n        str = str.join(\'\');\n        document.body.innerHTML = str;\n        var date1 = +new Date();\n        console.log(date1 - date);\n    }\n\n    f();\n\n    // å©ç¨ createElement    ç»ææ¸æ°ç®å          (æ·»å 10000ä¸ªdiv)   (èæ¶çº¦20ms) æ¯æå¿«æ¢ä¸ä¸¢ä¸¢\n    // function f() {\n    //     var date = +new Date();\n    //     for (var i = 1; i <= 10000; i++) {\n    //         var div = document.createElement(\'div\');\n    //         document.body.appendChild(div);\n    //     }\n    //     var date1 = +new Date();\n    //     console.log(date1 - date);\n    // }\n    // f();\n\n<\/script>\n</body>\n</html>\n\n\n\n# åçjsæä½DOMçAPI\n\n# åå»ºåAPIæ»ç»\n\n> åå»ºåAPIåæ¬createElement,createTextNode,cloneNodeåcreateDocumentFragmentåä¸ªæ¹æ³ï¼éè¦æ³¨æä¸é¢å ç¹: (1) å®ä»¬åå»ºçèç¹ï¼åªæ¯ä¸ä¸ªå­¤ç«çèç¹ï¼éè¦éè¿appendChildæ·»å å°ææ¡£ä¸­ã (2) cloneNodeè¦æ³¨æï¼å¦æè¢«å¤å¶ï¼æ¯å¦åå«å­èç¹ä»¥åäºä»¶ç»å®ç­é®é¢ã (3) ä½¿ç¨createDocumentFragmentæ¥è§£å³æ·»å å¤§éèç¹æ¶çæ§è½é®é¢ ã\n\n----------------------------------------\n\n# é¡µé¢ä¿®æ¹åAPIæ»ç»\n\n> ä¿®æ¹é¡µé¢åå®¹çAPIä¸»è¦åæ¬ï¼appendChild,removeChild,insertBefore,replaceChild éè¦æ³¨æå ç¹ï¼ (1) ä¸ç®¡æ¯æ°å¢è¿æ¯æ¿æ¢èç¹ï¼å¦ææ°å¢æèæ¿æ¢çèç¹åæ¬æ¯å­å¨äºé¡µé¢ä¸çï¼åå¶åæ¥ä½ç½®çèç¹å°è¢«ç§»é¤ï¼ä¹å°±æ¯è¯´åä¸ä¸ªèç¹ï¼ä¸è½å­å¨äºé¡µé¢ä¸çå¤ä¸ªä½ç½®ã (2) èç¹æ¬èº«ç»å®çäºä»¶ä¸ä¼æ¶å¤±ï¼ä¼ä¸ç´ä¿çã\n\n----------------------------------------\n\n# èç¹æ¥è¯¢åAPIæ»ç»\n\n> document.getElementById document.getElementByName document.getElementByTagName document.getElementByClassName document.querySelectorådocument.querySelectorAllï¼éè¿CSSéæ©å¨æ¥æ¥æ¾åç´ ï¼æ³¨æéæ©å¨è¦å¤åCSSéæ©å¨çè§åãä½¿ç¨æ·±åº¦ä¼åæç´¢æ¥è·ååç´ ã\n\n----------------------------------------\n\n# èç¹å³ç³»åAPIæ»ç»\n\nç¶å³ç³»åAPI\n\n * parentNode: Elementçç¶èç¹å¯è½æ¯Element,DocumentåDocumentFragment\n * parentElement:ä¸parentNodeçåºå«å¨äºï¼å¶ç¶èç¹å¿é¡»æ¯ä¸ä¸ªElementï¼å¦æä¸æ¯ï¼åè¿ånullã\n\nåå¼å³ç³»åAPI\n\n * previousSibling: èç¹çåä¸ä¸ªèç¹ï¼å¦æè¯¥èç¹æ¯ç¬¬ä¸ä¸ªèç¹ï¼åä¸ºnull.æ³¨ææå¯è½æ¿å°çèç¹æ¯ææ¬èç¹ææ³¨éèç¹ï¼ä¸é¢æçä¸ç¬¦ï¼è¦è¿è¡å¤çä¸ä¸ã\n * previousElementSibling:è¿ååä¸ä¸ªåç´ èç¹ï¼åä¸ä¸ªèç¹å¿é¡»æ¯Element,æ³¨æIE9ä»¥ä¸æµè§å¨ä¸æ¯æã\n * nextSibling: èç¹çåä¸ä¸ªèç¹ï¼å¦æè¯¥èç¹æ¯æåä¸ä¸ªèç¹ï¼åä¸ºnull. æ³¨ææå¯è½æ¿å°çèç¹æ¯ææ¬èç¹ï¼ä¸é¢æçä¸ç¬¦ï¼è¦è¿è¡å¤çä¸ä¸ã\n * nextElementSibling: è¿ååä¸ä¸ªåç´ èç¹ï¼åä¸ä¸ªèç¹å¿é¡»æ¯Elementï¼æ³¨æIE9ä»¥ä¸æµè§å¨ä¸æ¯æã\n\nå­å³ç³»åAPI\n\n * childNodes :è¿åä¸ä¸ªå³æ¶çnodeList,è¡¨ç¤ºåç´ çå­èç¹åè¡¨ï¼å­èç¹å¯è½ä¼åå«ææ¬èç¹ï¼æ³¨éèç¹ç­ã\n * children: ä¸ä¸ªå³æ¶çHTMLCollection,å­èç¹é½æ¯Elementï¼IE9ä»¥ä¸æµè§å¨ä¸æ¯æã\n * firstNode: ç¬¬ä¸ä¸ªå­èç¹\n * lastNode: æåä¸ä¸ªå­èç¹\n * hasChildNodesæ¹æ³ï¼å¯ä»¥ç¨æ¥å¤æ­æ¯å¦åå«å­èç¹\n\n----------------------------------------\n\n# åç´ å±æ§åAPI\n\n> setAttribute: æ ¹æ®åç§°åå¼ä¿®æ¹åç´ çç¹æ§ï¼eg:element.setAttribute(name,value); getAttribute: è¿åæå®çç¹æ§åç¸åºçç¹æ§å¼ï¼å¦æä¸å­å¨ï¼åè¿ånullæç©ºå­ç¬¦ä¸²ã\n\n# åç´ æ ·å¼åAPI\n\nwindow.getComutedStyleæ¯ç¨æ¥è·ååºç¨å°åç´ åçæ ·å¼ï¼åè®¾æä¸ªåç´ å¹¶æªè®¾ç½®é«åº¦ï¼èæ¯éè¿å¶åå®¹å°å¶é«åº¦æå¼ï¼è¿æ¶åè¦è·åå®çé«åº¦ï¼å°±è¦ç¨å°getComutedStyleï¼ç¨æ³å¦ä¸ï¼\n\nvar style = window.getComputedStyle(element[, pseudoElt]);\n\n\n> elementæ¯è¦è·åçåç´ ï¼pseudoEltæå®ä¸ä¸ªä¼ªåç´ è¿è¡å¹éã è¿åçstyleæ¯ä¸ä¸ªCSSStyleDeclarationå¯¹è±¡ã éè¿styleå¯ä»¥è®¿é®å°åç´ è®¡ç®åçæ ·å¼ clientRectæ¯ä¸ä¸ªDOMRectå¯¹è±¡ï¼åå«leftï¼topï¼rightï¼bottomï¼å®æ¯ç¸å¯¹äºå¯è§çªå£çè·ç¦»ï¼æ»å¨ä½ç½®åçæ¹åæ¶ï¼å®ä»¬çå¼æ¯ä¼åçååçãé¤äºIE9ä»¥ä¸æµè§å¨ï¼è¿åå«åç´ çheightåwidthç­æ°æ®ï¼\n\n\n# ä¼ªç±»åä¼ªåç´ \n\nä¼ªç±»ï¼:focus,:hoverä»¥å<a>æ ç­¾ç:linkãvisitedç­ï¼\n\nä¼ªåç´ ï¼è¾å¸¸è§çæ¯å¦:beforeã:afterç­ã\n\nï¼1ï¼ä¼ªç±»çåè½\n\n1.è·åä¸å­å¨ä¸DOMæ ä¸­çä¿¡æ¯ ãæ¯å¦ï¼ <a> æ ç­¾ç:linkã:visited ç­ãè¿äºä¿¡æ¯ä¸å­å¨äºDOMæ ä¸­ã\n\n2.è·å ä¸è½è¢«å¸¸è§CSSéæ©å¨è·åå°çä¿¡æ¯ãæ¯å¦ï¼è¦è·åç¬¬ä¸ä¸ªå­åç´ ï¼æä»¬æ æ³ç¨å¸¸è§çCSSéæ©å¨è·åï¼ä½å¯ä»¥éè¿ :first-child æ¥è·åå°ã\n\n> ä¼ªç±»å¶å®æ¯å¼¥è¡¥äºCSSéæ©å¨çä¸è¶³ï¼ç¨æ¥æ´æ¹ä¾¿å°è·åä¿¡æ¯ã\n\nï¼2ï¼ä¼ªåç´ çåè½\n\n> èä¼ªåç´ æ¬è´¨ä¸æ¯åå»ºäºä¸ä¸ªèæå®¹å¨(åç´ )ï¼æä»¬å¯ä»¥å¨å¶ä¸­æ·»å åå®¹ææ ·å¼ã\n\nï¼3ï¼åå·åºå«\n\n> ä¼ªåç´ çç±ä¸¤ä¸ªåå·::å¼å¤´ï¼ç¶åæ¯ä¼ªåç´ çåç§°ã\n\n> ä½¿ç¨ä¸¤ä¸ªåå·::æ¯ä¸ºäºåºå«ä¼ªç±»åä¼ªåç´ ï¼CSS2ä¸­å¹¶æ²¡æåºå«ï¼ãå½ç¶ï¼èèå°å¼å®¹æ§ï¼CSS2ä¸­å·²å­çä¼ªåç´ ä»ç¶å¯ä»¥ä½¿ç¨ä¸ä¸ªåå·:çè¯­æ³ï¼ä½æ¯CSS3ä¸­æ°å¢çä¼ªåç´ å¿é¡»ä½¿ç¨ä¸¤ä¸ªåå·::\n\ndiv:after\ndiv::after\ndiv:first-child\ndiv::first-child //é\n\n\n\n# ç»ææ§ä¼ªç±»åç´ \n\nç»ææ§ä¼ªç±»éæ©å¨çå¬å±ç¹å¾æ¯åè®¸å¼åèæ ¹æ®ææ¡£ç»ææ¥æå®åç´ çæ ·å¼ã\n\nï¼1ï¼nth-childånth-last-child\n\n \t  p:nth-child(n){background:red}  è¡¨ç¤ºEç¶åç´ ä¸­çç¬¬nä¸ªå­èç¹\n      p:nth-child(odd){background:red}/*å¹éå¥æ°è¡*/\n      p:nth-child(even){background:red}/*å¹éå¶æ°è¡*/\n      p:nth-child(2n){background:red}/*å¶ä¸­næ¯ä»0å¼å§è®¡ç®*/\n\n\nï¼2ï¼E:first-childåE:last-child\n\nï¼3ï¼nth-of-type(n) åE:nth-last-of-type(n)\n\nï¼4ï¼ï¼E:rootï¼æ ¹èç¹ï¼ãE:only-childï¼ç¬å­åç´ ï¼ãE:only-of-typeï¼ç¬å­ç±»ååç´ ï¼åE:emptyï¼å­¤èç¹ï¼\n\n\n# åéæåçä¸éé¢\n\n\t   setTimeout(() => console.log(\'1\', a));\n\n        new Promise(resolve => resolve()).then(() => console.log(\'2\', a));\n\n        console.log(\'3\', a);\n        var a = \'åå\'\n        console.log(\'4\', a);\n        function a() {};\n\n//3,f\n//4,åå\n//2ï¼åå\n//1ï¼åå\n\n\n\n# æ­£åå°ææºå·ä¸­é´åä½åä¸º*\n\nfunction replacePhone(str){\n    let reg = /^(\\d{3})(\\d{4})(\\d{4})$/\n   \treturn  str.replace(reg,\'$1****$3\')\n}\n\n\n\n# å¾çæå è½½\n\nä¸å¼ å¾çå°±æ¯ä¸ä¸ªæ ç­¾ï¼èå¾ççæ¥æºä¸»è¦æ¯srcå±æ§ãæµè§å¨æ¯å¦åèµ·äº²æ±å°±æ¯æ ¹æ®æ¯å¦æsrcå±æ§å³å®çã\n\næ¢ç¶è¿æ ·ï¼é£ä¹æä»¬å°±è¦å¯¹æ ç­¾çsrcå±æ§ä¸æäºï¼å¨æ²¡è¿å¥å¯è§åºåçæ¶åï¼æä»¬åä¸ç»è¿ä¸ªæ ç­¾èµsrcå±æ§ï¼è¿æ ·å²ä¸æ¯æµè§å¨å°±ä¸ä¼åéè¯·æ±äºã\n\ndocument.documentElement.clientHeight//è·åå±å¹å¯è§åºåçé«åº¦\nelement.offsetTop//è·ååç´ ç¸å¯¹äºææ¡£é¡¶é¨çé«åº¦\ndocument.documentElement.scrollTop//è·åæµè§å¨çªå£é¡¶é¨ä¸ææ¡£é¡¶é¨ä¹é´çè·ç¦»ï¼ä¹å°±æ¯æ»å¨æ¡æ»å¨çè·ç¦»\n\n\n\n\nå¦æï¼offsetTop-scroolTop<clientHeightï¼åå¾çè¿å¥äºå¯è§åºåï¼åè¢«è¯·æ±ã\n\n<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta http-equiv="X-UA-Compatible" content="ie=edge">\n    <title>å¾çæå è½½</title>\n    <style>\n        img {\n            display: block;\n            width: 100%;\n            height: 300px;\n            margin-bottom: 20px;\n        }\n    </style>\n</head>\n<body>\n    <img data-src="./images/1.jpg" alt="">\n    <img data-src="./images/2.jpg" alt="">\n    <img data-src="./images/3.jpg" alt="">\n    <img data-src="./images/4.jpg" alt="">\n    <img data-src="./images/5.jpg" alt="">\n    <img data-src="./images/6.jpg" alt="">\n    <img data-src="./images/7.jpg" alt="">\n    <img data-src="./images/8.jpg" alt="">\n    <img data-src="./images/9.jpg" alt="">\n    <img data-src="./images/10.jpg" alt="">\n    <img data-src="./images/1.jpg" alt="">\n    <img data-src="./images/2.jpg" alt="">\n</body>\n<script>\n        var imgs = document.querySelectorAll(\'img\');\n\n        //offsetTopæ¯åç´ ä¸offsetParentçè·ç¦»ï¼å¾ªç¯è·åç´å°é¡µé¢é¡¶é¨\n        function getTop(e) {\n            var T = e.offsetTop;\n            while(e = e.offsetParent) {\n                T += e.offsetTop;\n            }\n            return T;\n        }\n\n        function lazyLoad(imgs) {\n            var H = document.documentElement.clientHeight;//è·åå¯è§åºåé«åº¦\n            var S = document.documentElement.scrollTop || document.body.scrollTop;\n            for (var i = 0; i < imgs.length; i++) {\n                if (H > getTop(imgs[i])-S) {\n                    imgs[i].src = imgs[i].getAttribute(\'data-src\');\n                }\n            }\n        }\n\n        window.onload = window.onscroll = function () { //onscroll()å¨æ»å¨æ¡æ»å¨çæ¶åè§¦å\n            lazyLoad(imgs);\n        }\n<\/script>\n</html>\n\n\n\n# äºåæ¥æ¾\n\nfunction binary_search(arr, key) {\n    var low = 0,\n        high = arr.length - 1;\n\n    while (low <= high) {\n        var mid = parseInt((high + low) / 2);\n        if (key == arr[mid]) {\n            return mid;\n        } else if (key > arr[mid]) {\n            low = mid + 1;\n        } else if (key < arr[mid]) {\n            high = mid - 1;\n        } else {\n            return -1;\n        }\n    }\n}\n\n\n\n# promiseè½å°è£setIntervalå\n\nä¸è½ï¼å ä¸ºpromiseåªè½æ§è¡ä¸æ¬¡\n\n\t\t  new Promise(function(resolve,reject){\n                setTimeout(function(){\n                    resolve()\n                },1000)\n            }).then(function(){\n                console.log(1)\n            })\n\n            new Promise(function(resolve,reject){\n                setInterval(function(){\n                    resolve()\n                },1000)\n            }).then(function(){\n                console.log(2)\n            })\n\n\nè§£å³åæ³\n\n\t\t   function p(){\n                return new Promise(function(resolve,reject){\n                    setTimeout(function(){\n                        resolve()\n                    },1000)\n                }).then(function(){\n                    console.log("1")\n                })\n            }\n            setInterval(p,1000)\n',normalizedContent:'# é¢è¯é¢ï¼ä¸ï¼\n\n * åçajax\n * displayæåªäºå±æ§\n * positionæåªäºå±æ§\n * transformæåªäºå±æ§\n * inputæ ç­¾çå±æ§\n * å¦ä½ç»ä¸ä¸ªé¡µé¢æ·»å 10000ä¸ªdiv\n * åçjsæä½domçapi\n * ä¼ªç±»åä¼ªåç´ \n * åéæåçä¸éé¢\n * æ­£åå°ææºå·ä¸­é´åä½åä¸º*\n * å¾çæå è½½\n * äºåæ¥æ¾\n * promiseè½å°è£setintervalå\n\n\n# åçajax\n\n// åçajaxå®ç°\nfunction ajax() {\n    var xhr = new xmlhttprequest();\n    xhr.open(\'method\', \'url\');\n    xhr.send();\n    xhr.onreadystatechange = function() {\n        if ( xhr.readystate==4 && xhr.status==200) {\n            console.log(\'success\', xhr.responsetext);\n        } else {\n            console.log(\'error\', xhr.responsetext);\n        }\n    }\n}\n\n//readystate\n//0ï¼åå§åï¼xmlhttprequestå¯¹è±¡è¿æ²¡æå®æåå§å\n//1ï¼è½½å¥ï¼xmlhttprequestå¯¹è±¡å¼å§åéè¯·æ±\n//2ï¼è½½å¥å®æï¼xmlhttprequestå¯¹è±¡çè¯·æ±åéå®æ\n//3ï¼è§£æï¼xmlhttprequestå¯¹è±¡å¼å§è¯»åæå¡å¨çååº\n//4ï¼å®æï¼xmlhttprequestå¯¹è±¡è¯»åæå¡å¨ååºç»æ\n\n\n\n# displayæåªäºå±æ§\n\n * display: none;è¡¨ç¤ºæ­¤åç´ å°ä¸è¢«æ¾ç¤ºã\n * display: block;å°åç´ æ¾ç¤ºä¸ºååç´ ãï¼åå«åçº§åç´ ï¼\n * display: inline;å°åç´ æ¾ç¤ºä¸ºåèåç´ ãï¼åå«è¡ååç´ ï¼\n\n> åèåç´ ä¸å¯ä»¥è®¾ç½®é«åº¦ãå®½åº¦ åªè½è®¾ç½®å·¦å³çmarginå¼åå·¦å³çpaddingå¼ï¼èä¸è½è®¾ç½®ä¸ä¸çmarginå¼åä¸ä¸çpaddingå¼ å¸¸è§ï¼spanãimgãinputãaãlabelãbutton\n\n * display: inline-block;å°åç´ æ¾ç¤ºä¸ºåèååç´ ã\n\n> ä¸æ¢è¡ï¼ä½å¯ä»¥è®¾ç½®å®½é«\n\n * display: inherit;è§å®åºè¯¥ä»ç¶åç´ ç»§æ¿ display å±æ§çå¼ã\n * display: tableï¼display: table-cell\n\n\n# positionæåªäºå±æ§\n\n * position:staticï¼åºç°å¨ææ¡£æµä¸­ï¼ä¸åtopï¼leftå½±å\n * position:relativeï¼ç¸å¯¹å®ä½ï¼æ ¹æ®åç´ åæ¥ä½ç½®å®ä½ï¼å¨ææ¡£æµä¸­\n * position:absoluteï¼ç»å¯¹å®ä½ï¼æ ¹æ®relativeçç¶åç´ å®ä½ï¼è±ç¦»ææ¡£æµ\n * positoin:fixedï¼ç¸å¯¹äºæµè§å¨çªå£åºå®ä½ç½®ï¼è±ç¦»ææ¡£æµã\n * position:inherit,ç»§æ¿\n * position:initial\n * position:stickyï¼\n\n> position: sticky;Â åºäºç¨æ·çæ»å¨ä½ç½®æ¥å®ä½ã\n\nç²æ§å®ä½çåç´ æ¯ä¾èµäºç¨æ·çæ»å¨ï¼å¨Â position:relativeÂ ä¸Â position:fixedÂ å®ä½ä¹é´åæ¢ã\n\nå¨ç®æ åºåä»¥åï¼å®çè¡ä¸ºå°±åÂ position:relative;Â èå½é¡µé¢æ»å¨è¶åºç®æ åºåæ¶ï¼å®çè¡¨ç°å°±åÂ position:fixed;ï¼å®ä¼åºå®å¨ç®æ ä½ç½®ã\n\n<style>\n    .top,\n    .middle,\n    .bottom {\n        position: relative;\n        background: lightblue;\n        height: 200px;\n    }\n    .middle {\n        background: yellow;\n    }\n    .bottom {\n        background: pink;\n    }\n    .fixed {\n        width: 100px;\n        height: 100px;\n        position: fixed;\n        background: red;\n    }\n</style>\n\n<div class="top"></div>\n<div class="middle"></div>\n<div class="fixed"></div>\n<div class="bottom"></div>\n\n\x3c!--fixedå¨bottomçå·¦ä¸è§ï¼è±ç¦»ææ¡£æµåè¢«è¦çäº--\x3e\n\n\n\n# transformæåªäºå±æ§\n\ntransform: rotate | scale | skew | translate |matrix;\n\n * transform:rotate(30deg)\n\n * scale(x,y)ä½¿åç´ æ°´å¹³æ¹åååç´æ¹ååæ¶ç¼©æ¾ï¼ä¹å°±æ¯xè½´åyè½´åæ¶ç¼©æ¾ï¼ï¼\n   \n   scalex(x)åç´ ä»æ°´å¹³æ¹åç¼©æ¾ï¼xè½´ç¼©æ¾ï¼ï¼\n   \n   scaley(y)åç´ ä»åç´æ¹åç¼©æ¾ï¼yè½´ç¼©æ¾ï¼\n\n * skew(x,y)ä½¿åç´ å¨æ°´å¹³ååç´æ¹ååæ¶æ­æ²ï¼xè½´åyè½´åæ¶æä¸å®çè§åº¦å¼è¿è¡æ­æ²åå½¢ï¼ï¼\n   \n   skewx(x)ä»ä½¿åç´ å¨æ°´å¹³æ¹åæ­æ²åå½¢ï¼xè½´æ­æ²åå½¢ï¼ï¼\n   \n   skewy(y)ä»ä½¿åç´ å¨åç´æ¹åæ­æ²åå½¢ï¼yè½´æ­æ²åå½¢ï¼ï¼\n\n * translate:åæ ·æä¸ç§æ¹æ³\n\n * matrix\n\n\n# inputæ ç­¾çå±æ§\n\n\x3c!-- maxlength å±æ§è§å®è¾å¥å­æ®µçæå¤§é¿åº¦--\x3e\n<input maxlength="value">\n\n\x3c!-- autocomplete å±æ§è§å®è¾å¥å­æ®µæ¯å¦åºè¯¥å¯ç¨èªå¨å®æåè½ãèªå¨å®æåè®¸æµè§å¨é¢æµå¯¹å­æ®µçè¾å¥ãå½ç¨æ·å¨å­æ®µå¼å§é®å¥æ¶ï¼æµè§å¨åºäºä¹åé®å¥è¿çå¼ï¼åºè¯¥æ¾ç¤ºåºå¨å­æ®µä¸­å¡«åçéé¡¹ã å¼å¯ä¸ºé»è®¤--\x3e\n\n<input autocomplete="on/off">\n\n\n\n# å¦ä½ç»ä¸ä¸ªé¡µé¢æ·»å 10000ä¸ªdiv\n\n<!doctype html>\n<html lang="zh-cn">\n<head>\n    <meta charset="utf-8">\n    <title>title</title>\n    <style>\n        body div {\n            width: 30px;\n            height: 2px;\n            border: 1px solid #ee3333;\n        }\n    </style>\n</head>\n<body>\n\n\n<script>\n    // å©ç¨ innerhtml æ¼æ¥å­ç¬¦ä¸²çæ¹å¼     (æ·»å 10000ä¸ªdiv)  (èæ¶çº¦900msï¼ ææ¢\n    // function f() {\n    //     var date = +new date();\n    //     for (var i = 1; i <= 10000; i++) {\n    //         document.body.innerhtml += "<div></div>"\n    //     }\n    //     var date1 = +new date();\n    //     console.log(date1-date);\n    // }\n    // f();\n\n    // å©ç¨ innerhtml æ°ç»èµå¼çæ¹å¼  ç»æç¨å¾®å¤æ  ï¼æ·»å 10000ä¸ªdiv)   ï¼èæ¶çº¦15ms)  æå¿«\n    function f() {\n        var date = +new date();\n        var str = [];\n        for (var i = 1; i <= 10000; i++) {\n            str.push(\'<div></div>\');\n        }\n        str = str.join(\'\');\n        document.body.innerhtml = str;\n        var date1 = +new date();\n        console.log(date1 - date);\n    }\n\n    f();\n\n    // å©ç¨ createelement    ç»ææ¸æ°ç®å          (æ·»å 10000ä¸ªdiv)   (èæ¶çº¦20ms) æ¯æå¿«æ¢ä¸ä¸¢ä¸¢\n    // function f() {\n    //     var date = +new date();\n    //     for (var i = 1; i <= 10000; i++) {\n    //         var div = document.createelement(\'div\');\n    //         document.body.appendchild(div);\n    //     }\n    //     var date1 = +new date();\n    //     console.log(date1 - date);\n    // }\n    // f();\n\n<\/script>\n</body>\n</html>\n\n\n\n# åçjsæä½domçapi\n\n# åå»ºåapiæ»ç»\n\n> åå»ºåapiåæ¬createelement,createtextnode,clonenodeåcreatedocumentfragmentåä¸ªæ¹æ³ï¼éè¦æ³¨æä¸é¢å ç¹: (1) å®ä»¬åå»ºçèç¹ï¼åªæ¯ä¸ä¸ªå­¤ç«çèç¹ï¼éè¦éè¿appendchildæ·»å å°ææ¡£ä¸­ã (2) clonenodeè¦æ³¨æï¼å¦æè¢«å¤å¶ï¼æ¯å¦åå«å­èç¹ä»¥åäºä»¶ç»å®ç­é®é¢ã (3) ä½¿ç¨createdocumentfragmentæ¥è§£å³æ·»å å¤§éèç¹æ¶çæ§è½é®é¢ ã\n\n----------------------------------------\n\n# é¡µé¢ä¿®æ¹åapiæ»ç»\n\n> ä¿®æ¹é¡µé¢åå®¹çapiä¸»è¦åæ¬ï¼appendchild,removechild,insertbefore,replacechild éè¦æ³¨æå ç¹ï¼ (1) ä¸ç®¡æ¯æ°å¢è¿æ¯æ¿æ¢èç¹ï¼å¦ææ°å¢æèæ¿æ¢çèç¹åæ¬æ¯å­å¨äºé¡µé¢ä¸çï¼åå¶åæ¥ä½ç½®çèç¹å°è¢«ç§»é¤ï¼ä¹å°±æ¯è¯´åä¸ä¸ªèç¹ï¼ä¸è½å­å¨äºé¡µé¢ä¸çå¤ä¸ªä½ç½®ã (2) èç¹æ¬èº«ç»å®çäºä»¶ä¸ä¼æ¶å¤±ï¼ä¼ä¸ç´ä¿çã\n\n----------------------------------------\n\n# èç¹æ¥è¯¢åapiæ»ç»\n\n> document.getelementbyid document.getelementbyname document.getelementbytagname document.getelementbyclassname document.queryselectorådocument.queryselectorallï¼éè¿csséæ©å¨æ¥æ¥æ¾åç´ ï¼æ³¨æéæ©å¨è¦å¤åcsséæ©å¨çè§åãä½¿ç¨æ·±åº¦ä¼åæç´¢æ¥è·ååç´ ã\n\n----------------------------------------\n\n# èç¹å³ç³»åapiæ»ç»\n\nç¶å³ç³»åapi\n\n * parentnode: elementçç¶èç¹å¯è½æ¯element,documentådocumentfragment\n * parentelement:ä¸parentnodeçåºå«å¨äºï¼å¶ç¶èç¹å¿é¡»æ¯ä¸ä¸ªelementï¼å¦æä¸æ¯ï¼åè¿ånullã\n\nåå¼å³ç³»åapi\n\n * previoussibling: èç¹çåä¸ä¸ªèç¹ï¼å¦æè¯¥èç¹æ¯ç¬¬ä¸ä¸ªèç¹ï¼åä¸ºnull.æ³¨ææå¯è½æ¿å°çèç¹æ¯ææ¬èç¹ææ³¨éèç¹ï¼ä¸é¢æçä¸ç¬¦ï¼è¦è¿è¡å¤çä¸ä¸ã\n * previouselementsibling:è¿ååä¸ä¸ªåç´ èç¹ï¼åä¸ä¸ªèç¹å¿é¡»æ¯element,æ³¨æie9ä»¥ä¸æµè§å¨ä¸æ¯æã\n * nextsibling: èç¹çåä¸ä¸ªèç¹ï¼å¦æè¯¥èç¹æ¯æåä¸ä¸ªèç¹ï¼åä¸ºnull. æ³¨ææå¯è½æ¿å°çèç¹æ¯ææ¬èç¹ï¼ä¸é¢æçä¸ç¬¦ï¼è¦è¿è¡å¤çä¸ä¸ã\n * nextelementsibling: è¿ååä¸ä¸ªåç´ èç¹ï¼åä¸ä¸ªèç¹å¿é¡»æ¯elementï¼æ³¨æie9ä»¥ä¸æµè§å¨ä¸æ¯æã\n\nå­å³ç³»åapi\n\n * childnodes :è¿åä¸ä¸ªå³æ¶çnodelist,è¡¨ç¤ºåç´ çå­èç¹åè¡¨ï¼å­èç¹å¯è½ä¼åå«ææ¬èç¹ï¼æ³¨éèç¹ç­ã\n * children: ä¸ä¸ªå³æ¶çhtmlcollection,å­èç¹é½æ¯elementï¼ie9ä»¥ä¸æµè§å¨ä¸æ¯æã\n * firstnode: ç¬¬ä¸ä¸ªå­èç¹\n * lastnode: æåä¸ä¸ªå­èç¹\n * haschildnodesæ¹æ³ï¼å¯ä»¥ç¨æ¥å¤æ­æ¯å¦åå«å­èç¹\n\n----------------------------------------\n\n# åç´ å±æ§åapi\n\n> setattribute: æ ¹æ®åç§°åå¼ä¿®æ¹åç´ çç¹æ§ï¼eg:element.setattribute(name,value); getattribute: è¿åæå®çç¹æ§åç¸åºçç¹æ§å¼ï¼å¦æä¸å­å¨ï¼åè¿ånullæç©ºå­ç¬¦ä¸²ã\n\n# åç´ æ ·å¼åapi\n\nwindow.getcomutedstyleæ¯ç¨æ¥è·ååºç¨å°åç´ åçæ ·å¼ï¼åè®¾æä¸ªåç´ å¹¶æªè®¾ç½®é«åº¦ï¼èæ¯éè¿å¶åå®¹å°å¶é«åº¦æå¼ï¼è¿æ¶åè¦è·åå®çé«åº¦ï¼å°±è¦ç¨å°getcomutedstyleï¼ç¨æ³å¦ä¸ï¼\n\nvar style = window.getcomputedstyle(element[, pseudoelt]);\n\n\n> elementæ¯è¦è·åçåç´ ï¼pseudoeltæå®ä¸ä¸ªä¼ªåç´ è¿è¡å¹éã è¿åçstyleæ¯ä¸ä¸ªcssstyledeclarationå¯¹è±¡ã éè¿styleå¯ä»¥è®¿é®å°åç´ è®¡ç®åçæ ·å¼ clientrectæ¯ä¸ä¸ªdomrectå¯¹è±¡ï¼åå«leftï¼topï¼rightï¼bottomï¼å®æ¯ç¸å¯¹äºå¯è§çªå£çè·ç¦»ï¼æ»å¨ä½ç½®åçæ¹åæ¶ï¼å®ä»¬çå¼æ¯ä¼åçååçãé¤äºie9ä»¥ä¸æµè§å¨ï¼è¿åå«åç´ çheightåwidthç­æ°æ®ï¼\n\n\n# ä¼ªç±»åä¼ªåç´ \n\nä¼ªç±»ï¼:focus,:hoverä»¥å<a>æ ç­¾ç:linkãvisitedç­ï¼\n\nä¼ªåç´ ï¼è¾å¸¸è§çæ¯å¦:beforeã:afterç­ã\n\nï¼1ï¼ä¼ªç±»çåè½\n\n1.è·åä¸å­å¨ä¸domæ ä¸­çä¿¡æ¯ ãæ¯å¦ï¼ <a> æ ç­¾ç:linkã:visited ç­ãè¿äºä¿¡æ¯ä¸å­å¨äºdomæ ä¸­ã\n\n2.è·å ä¸è½è¢«å¸¸è§csséæ©å¨è·åå°çä¿¡æ¯ãæ¯å¦ï¼è¦è·åç¬¬ä¸ä¸ªå­åç´ ï¼æä»¬æ æ³ç¨å¸¸è§çcsséæ©å¨è·åï¼ä½å¯ä»¥éè¿ :first-child æ¥è·åå°ã\n\n> ä¼ªç±»å¶å®æ¯å¼¥è¡¥äºcsséæ©å¨çä¸è¶³ï¼ç¨æ¥æ´æ¹ä¾¿å°è·åä¿¡æ¯ã\n\nï¼2ï¼ä¼ªåç´ çåè½\n\n> èä¼ªåç´ æ¬è´¨ä¸æ¯åå»ºäºä¸ä¸ªèæå®¹å¨(åç´ )ï¼æä»¬å¯ä»¥å¨å¶ä¸­æ·»å åå®¹ææ ·å¼ã\n\nï¼3ï¼åå·åºå«\n\n> ä¼ªåç´ çç±ä¸¤ä¸ªåå·::å¼å¤´ï¼ç¶åæ¯ä¼ªåç´ çåç§°ã\n\n> ä½¿ç¨ä¸¤ä¸ªåå·::æ¯ä¸ºäºåºå«ä¼ªç±»åä¼ªåç´ ï¼css2ä¸­å¹¶æ²¡æåºå«ï¼ãå½ç¶ï¼èèå°å¼å®¹æ§ï¼css2ä¸­å·²å­çä¼ªåç´ ä»ç¶å¯ä»¥ä½¿ç¨ä¸ä¸ªåå·:çè¯­æ³ï¼ä½æ¯css3ä¸­æ°å¢çä¼ªåç´ å¿é¡»ä½¿ç¨ä¸¤ä¸ªåå·::\n\ndiv:after\ndiv::after\ndiv:first-child\ndiv::first-child //é\n\n\n\n# ç»ææ§ä¼ªç±»åç´ \n\nç»ææ§ä¼ªç±»éæ©å¨çå¬å±ç¹å¾æ¯åè®¸å¼åèæ ¹æ®ææ¡£ç»ææ¥æå®åç´ çæ ·å¼ã\n\nï¼1ï¼nth-childånth-last-child\n\n \t  p:nth-child(n){background:red}  è¡¨ç¤ºeç¶åç´ ä¸­çç¬¬nä¸ªå­èç¹\n      p:nth-child(odd){background:red}/*å¹éå¥æ°è¡*/\n      p:nth-child(even){background:red}/*å¹éå¶æ°è¡*/\n      p:nth-child(2n){background:red}/*å¶ä¸­næ¯ä»0å¼å§è®¡ç®*/\n\n\nï¼2ï¼e:first-childåe:last-child\n\nï¼3ï¼nth-of-type(n) åe:nth-last-of-type(n)\n\nï¼4ï¼ï¼e:rootï¼æ ¹èç¹ï¼ãe:only-childï¼ç¬å­åç´ ï¼ãe:only-of-typeï¼ç¬å­ç±»ååç´ ï¼åe:emptyï¼å­¤èç¹ï¼\n\n\n# åéæåçä¸éé¢\n\n\t   settimeout(() => console.log(\'1\', a));\n\n        new promise(resolve => resolve()).then(() => console.log(\'2\', a));\n\n        console.log(\'3\', a);\n        var a = \'åå\'\n        console.log(\'4\', a);\n        function a() {};\n\n//3,f\n//4,åå\n//2ï¼åå\n//1ï¼åå\n\n\n\n# æ­£åå°ææºå·ä¸­é´åä½åä¸º*\n\nfunction replacephone(str){\n    let reg = /^(\\d{3})(\\d{4})(\\d{4})$/\n   \treturn  str.replace(reg,\'$1****$3\')\n}\n\n\n\n# å¾çæå è½½\n\nä¸å¼ å¾çå°±æ¯ä¸ä¸ªæ ç­¾ï¼èå¾ççæ¥æºä¸»è¦æ¯srcå±æ§ãæµè§å¨æ¯å¦åèµ·äº²æ±å°±æ¯æ ¹æ®æ¯å¦æsrcå±æ§å³å®çã\n\næ¢ç¶è¿æ ·ï¼é£ä¹æä»¬å°±è¦å¯¹æ ç­¾çsrcå±æ§ä¸æäºï¼å¨æ²¡è¿å¥å¯è§åºåçæ¶åï¼æä»¬åä¸ç»è¿ä¸ªæ ç­¾èµsrcå±æ§ï¼è¿æ ·å²ä¸æ¯æµè§å¨å°±ä¸ä¼åéè¯·æ±äºã\n\ndocument.documentelement.clientheight//è·åå±å¹å¯è§åºåçé«åº¦\nelement.offsettop//è·ååç´ ç¸å¯¹äºææ¡£é¡¶é¨çé«åº¦\ndocument.documentelement.scrolltop//è·åæµè§å¨çªå£é¡¶é¨ä¸ææ¡£é¡¶é¨ä¹é´çè·ç¦»ï¼ä¹å°±æ¯æ»å¨æ¡æ»å¨çè·ç¦»\n\n\n\n\nå¦æï¼offsettop-scrooltop<clientheightï¼åå¾çè¿å¥äºå¯è§åºåï¼åè¢«è¯·æ±ã\n\n<!doctype html>\n<html lang="en">\n<head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta http-equiv="x-ua-compatible" content="ie=edge">\n    <title>å¾çæå è½½</title>\n    <style>\n        img {\n            display: block;\n            width: 100%;\n            height: 300px;\n            margin-bottom: 20px;\n        }\n    </style>\n</head>\n<body>\n    <img data-src="./images/1.jpg" alt="">\n    <img data-src="./images/2.jpg" alt="">\n    <img data-src="./images/3.jpg" alt="">\n    <img data-src="./images/4.jpg" alt="">\n    <img data-src="./images/5.jpg" alt="">\n    <img data-src="./images/6.jpg" alt="">\n    <img data-src="./images/7.jpg" alt="">\n    <img data-src="./images/8.jpg" alt="">\n    <img data-src="./images/9.jpg" alt="">\n    <img data-src="./images/10.jpg" alt="">\n    <img data-src="./images/1.jpg" alt="">\n    <img data-src="./images/2.jpg" alt="">\n</body>\n<script>\n        var imgs = document.queryselectorall(\'img\');\n\n        //offsettopæ¯åç´ ä¸offsetparentçè·ç¦»ï¼å¾ªç¯è·åç´å°é¡µé¢é¡¶é¨\n        function gettop(e) {\n            var t = e.offsettop;\n            while(e = e.offsetparent) {\n                t += e.offsettop;\n            }\n            return t;\n        }\n\n        function lazyload(imgs) {\n            var h = document.documentelement.clientheight;//è·åå¯è§åºåé«åº¦\n            var s = document.documentelement.scrolltop || document.body.scrolltop;\n            for (var i = 0; i < imgs.length; i++) {\n                if (h > gettop(imgs[i])-s) {\n                    imgs[i].src = imgs[i].getattribute(\'data-src\');\n                }\n            }\n        }\n\n        window.onload = window.onscroll = function () { //onscroll()å¨æ»å¨æ¡æ»å¨çæ¶åè§¦å\n            lazyload(imgs);\n        }\n<\/script>\n</html>\n\n\n\n# äºåæ¥æ¾\n\nfunction binary_search(arr, key) {\n    var low = 0,\n        high = arr.length - 1;\n\n    while (low <= high) {\n        var mid = parseint((high + low) / 2);\n        if (key == arr[mid]) {\n            return mid;\n        } else if (key > arr[mid]) {\n            low = mid + 1;\n        } else if (key < arr[mid]) {\n            high = mid - 1;\n        } else {\n            return -1;\n        }\n    }\n}\n\n\n\n# promiseè½å°è£setintervalå\n\nä¸è½ï¼å ä¸ºpromiseåªè½æ§è¡ä¸æ¬¡\n\n\t\t  new promise(function(resolve,reject){\n                settimeout(function(){\n                    resolve()\n                },1000)\n            }).then(function(){\n                console.log(1)\n            })\n\n            new promise(function(resolve,reject){\n                setinterval(function(){\n                    resolve()\n                },1000)\n            }).then(function(){\n                console.log(2)\n            })\n\n\nè§£å³åæ³\n\n\t\t   function p(){\n                return new promise(function(resolve,reject){\n                    settimeout(function(){\n                        resolve()\n                    },1000)\n                }).then(function(){\n                    console.log("1")\n                })\n            }\n            setinterval(p,1000)\n',charsets:{cjk:!0}},{title:"é¢è¯é¢ï¼ä¹ï¼",frontmatter:{title:"é¢è¯é¢ï¼ä¹ï¼",date:"2018-03-09T09:52:01.000Z",categories:"é¢è¯"},regularPath:"/interview/interview-9.html",relativePath:"interview/interview-9.md",key:"v-51361542",path:"/interview/interview-9.html",headers:[{level:2,title:"content-typeæ¯ä»ä¹",slug:"content-typeæ¯ä»ä¹",normalizedTitle:"content-typeæ¯ä»ä¹",charIndex:13},{level:2,title:"ä»ä¹æ¯é¢æ£è¯·æ±",slug:"ä»ä¹æ¯é¢æ£è¯·æ±",normalizedTitle:"ä»ä¹æ¯é¢æ£è¯·æ±",charIndex:32},{level:2,title:"éå·è¿ç®ç¬¦",slug:"éå·è¿ç®ç¬¦",normalizedTitle:"éå·è¿ç®ç¬¦",charIndex:43},{level:2,title:"(0,function)",slug:"_0-function",normalizedTitle:"(0,function)",charIndex:590},{level:2,title:"parseIntæä»ä¹ç¨",slug:"parseintæä»ä¹ç¨",normalizedTitle:"parseintæä»ä¹ç¨",charIndex:52},{level:2,title:"setTimeoutåè®¡æ¶ä¸ºä»ä¹ä¼åºç°è¯¯å·®",slug:"settimeoutåè®¡æ¶ä¸ºä»ä¹ä¼åºç°è¯¯å·®",normalizedTitle:"settimeoutåè®¡æ¶ä¸ºä»ä¹ä¼åºç°è¯¯å·®",charIndex:68},{level:2,title:"åç«¯ç»é",slug:"åç«¯ç»é",normalizedTitle:"åç«¯ç»é",charIndex:95},{level:2,title:"è¯·è¯¦ç»ä»ç»ä¸ä¸ä»è¾å¥ URL å°é¡µé¢å è½½å®æçè¿ç¨ï¼",slug:"è¯·è¯¦ç»ä»ç»ä¸ä¸ä»è¾å¥-url-å°é¡µé¢å è½½å®æçè¿ç¨",normalizedTitle:"è¯·è¯¦ç»ä»ç»ä¸ä¸ä»è¾å¥ url å°é¡µé¢å è½½å®æçè¿ç¨ï¼",charIndex:103},{level:2,title:"fetch/Body.json()",slug:"fetch-body-json",normalizedTitle:"fetch/body.json()",charIndex:133},{level:2,title:"Object.prototype.hasOwnProperty()",slug:"object-prototype-hasownproperty",normalizedTitle:"object.prototype.hasownproperty()",charIndex:154}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"content-typeæ¯ä»ä¹ ä»ä¹æ¯é¢æ£è¯·æ± éå·è¿ç®ç¬¦ (0,function) parseIntæä»ä¹ç¨ setTimeoutåè®¡æ¶ä¸ºä»ä¹ä¼åºç°è¯¯å·® åç«¯ç»é è¯·è¯¦ç»ä»ç»ä¸ä¸ä»è¾å¥ URL å°é¡µé¢å è½½å®æçè¿ç¨ï¼ fetch/Body.json() Object.prototype.hasOwnProperty()",content:'# é¢è¯é¢ï¼ä¹ï¼\n\n * content-typeæ¯ä»ä¹\n * ä»ä¹æ¯é¢æ£è¯·æ±\n * éå·è¿ç®ç¬¦\n * parseIntæä»ä¹ç¨\n * setTimeoutåè®¡æ¶ä¸ºä»ä¹ä¼åºç°è¯¯å·®\n * èèåç«¯ç»é\n * è¯·è¯¦ç»ä»ç»ä¸ä¸ä»è¾å¥ URL å°é¡µé¢å è½½å®æçè¿ç¨ï¼\n * fetch/Body.json()\n * Object.prototype.hasOwnProperty()\n\n\n# content-typeæ¯ä»ä¹\n\n * application/x-www-form-urlencoded\n   * HTTPä¼å°è¯·æ±åæ°ç¨key1=val1&key2=val2çæ¹å¼è¿è¡ç»ç»ï¼å¹¶æ¾å°è¯·æ±å®ä½éé¢\n * application/json\n   * JSON æ¯ä¸ç§è½»éçº§çæ°æ®æ ¼å¼ï¼ä»¥âé®-å¼âå¯¹çæ¹å¼ç»ç»çæ°æ®ãè¿ä¸ªä½¿ç¨è¿ä¸ªç±»åï¼éè¦åæ°æ¬èº«å°±æ¯jsonæ ¼å¼çæ°æ®ï¼åæ°ä¼è¢«ç´æ¥æ¾å°è¯·æ±å®ä½éï¼ä¸è¿è¡ä»»ä½å¤çã\n * å¯ä»¥åèContent-Type è¯¦è§£\n\n\n# ä»ä¹æ¯é¢æ£è¯·æ±\n\n * é¢æ£è¯·æ±ä¼åæå¡å¨ç¡®è®¤è·¨åæ¯å¦åè®¸ï¼æå¡è¿åçååºå¤´éæå¯¹åºå­æ®µAccess-Control-Allow-Originæ¥ç»æµè§å¨å¤æ­ï¼å¦æåè®¸ï¼æµè§å¨ç´§æ¥çåéå®éè¯·æ±ï¼ä¸åè®¸ï¼æ¥éå¹¶ç¦æ­¢å®¢æ·ç«¯èæ¬è¯»åååºç¸å³çä»»ä½ä¸è¥¿ã\n * åèé¢æ£è¯·æ± OPTIONS\n\n\n# éå·è¿ç®ç¬¦\n\n\n# (0,function)\n\n> éå·è¿ç®ç¬¦ï¼å®å°åè®¡ç®å·¦è¾¹çåæ°ï¼åè®¡ç®å³è¾¹çåæ°å¼ãç¶åè¿åæå³è¾¹åæ°çå¼ã\n\nvar a = {\n  foo: function() {\n    console.log(this === window);\n  }\n};\n \na.foo(); // Returns \'false\' in console\n(0, a.foo)(); // Returns \'true\' in console\n\n\nBut, if you were callÂ (0, a.foo)(). The expressionÂ (0, a.foo)Â will evaluate each of its operands (from left to right) and returns the value of the last operand. In other words,Â (0, a.foo)Â is equivalent to\n\nfunction() {\n  console.log(this === window);\n} \n\n\n\n# parseIntæä»ä¹ç¨\n\nparseInt("10");\t\t\t//è¿å 10\nparseInt("19",10);\t\t//è¿å 19 (10+9)\nparseInt("11",2);\t\t//è¿å 3 (2+1)\nparseInt("17",8);\t\t//è¿å 15 (8+7)\nparseInt("1f",16);\t\t//è¿å 31 (16+15)\nparseInt("010");\t\t//æªå®ï¼è¿å 10 æ 8\n\n//BigIntä¹æè½¬æ¢è¿å¶çåè½\nBigInt("0b"+"10") //2\nBigInt("0o"+"10") //8\nBigInt("0x"+"10") //16\n\n//é£ä¹10è¿å¶æä¹è½¬æ¢æ2è¿å¶å¢\nNumberObject.toString(radix);\n\n//parseIntè¿å·æåä¸åæ´çåè½\nparseInt(2.5) //2\n\n\n\n# setTimeoutåè®¡æ¶ä¸ºä»ä¹ä¼åºç°è¯¯å·®\n\n> setTimeout() åªæ¯å°äºä»¶æå¥äºâä»»å¡éåâï¼å¿é¡»ç­å½åä»£ç ï¼æ§è¡æ ï¼æ§è¡å®ï¼ä¸»çº¿ç¨æä¼å»æ§è¡å®æå®çåè°å½æ°ãè¦æ¯å½åä»£ç æ¶èæ¶é´å¾é¿ï¼ä¹æå¯è½è¦ç­å¾ä¹ï¼æä»¥å¹¶æ²¡åæ³ä¿è¯åè°å½æ°ä¸å®ä¼å¨ setTimeout() æå®çæ¶é´æ§è¡ãæä»¥ï¼ setTimeout() çç¬¬äºä¸ªåæ°è¡¨ç¤ºçæ¯æå°æ¶é´ï¼å¹¶éæ¯ç¡®åæ¶é´ã\n> \n> HTML5æ åè§å®äº setTimeout() çç¬¬äºä¸ªåæ°çæå°å¼ä¸å¾å°äº4æ¯«ç§ï¼å¦æä½äºè¿ä¸ªå¼ï¼åé»è®¤æ¯4æ¯«ç§ãå¨æ­¤ä¹åãèçæ¬çæµè§å¨é½å°æç­æ¶é´è®¾ä¸º10æ¯«ç§ãå¦å¤ï¼å¯¹äºé£äºDOMçåå¨ï¼å°¤å¶æ¯æ¶åé¡µé¢éæ°æ¸²æçé¨åï¼ï¼éå¸¸æ¯é´é16æ¯«ç§æ§è¡ãè¿æ¶ä½¿ç¨ requestAnimationFrame() çææè¦å¥½äº setTimeout();\n\nsetTimeout(() => {\n    console.log(\'setTimeout\', 10)\n})\n\nfor (let i = 0; i < 10000; i++) {\n    console.log(i)\n}\n\n\nwindow.requestAnimationFrame() åè¯æµè§å¨ââä½ å¸ææ§è¡ä¸ä¸ªå¨ç»ï¼å¹¶ä¸è¦æ±æµè§å¨å¨ä¸æ¬¡éç»ä¹åè°ç¨æå®çåè°å½æ°æ´æ°å¨ç»ãè¯¥æ¹æ³éè¦ä¼ å¥ä¸ä¸ªåè°å½æ°ä½ä¸ºåæ°ï¼è¯¥åè°å½æ°ä¼å¨æµè§å¨ä¸ä¸æ¬¡éç»ä¹åæ§è¡\n\n\n# åç«¯ç»é\n\n * Cookie + Session ç»å½\n   * æå¡ç«¯å­å¨ session ï¼å®¢æ·ç«¯å­å¨ cookieï¼å¶ä¸­ cookie ä¿å­çä¸º sessionID\n   * å¯ä»¥çµæ´» revoke æéï¼æ´æ°ä¿¡æ¯åå¯ä»¥æ¹ä¾¿çåæ­¥ session ä¸­ç¸åºåå®¹\n   * åå¸å¼ session ä¸è¬ä½¿ç¨ redis(æå¶ä»KV) å­å¨\n   * éåä¼ ç»ç³»ç»ç¬ç«é´æ\n * Token ç»å½\n * SSO åç¹ç»å½\n * OAuth ç¬¬ä¸æ¹ç»å½\n\nåç«¯ç»å½ï¼è¿ä¸ç¯å°±å¤äº\n\n\n# è¯·è¯¦ç»ä»ç»ä¸ä¸ä»è¾å¥ URL å°é¡µé¢å è½½å®æçè¿ç¨ï¼\n\nä¸éé¢è¯é¢æ¯å¦ä½å¼åæ·±å±æ¬¡ççµé­æ·é®\n\n\n# fetch/Body.json()\n\nä½¿ç¨ Fetch\n\nBody.json()\n\n\n# Object.prototype.hasOwnProperty()\n\n> hasOwnProperty() æ¹æ³ä¼è¿åä¸ä¸ªå¸å°å¼ï¼æç¤ºå¯¹è±¡èªèº«å±æ§ä¸­æ¯å¦å·ææå®çå±æ§ï¼ä¹å°±æ¯ï¼æ¯å¦ææå®çé®ï¼ã\n\nconst object1 = {};\nobject1.property1 = 42;\n\nconsole.log(object1.hasOwnProperty(\'property1\'));\n// expected output: true\n\nconsole.log(object1.hasOwnProperty(\'toString\'));\n// expected output: false\n\nconsole.log(object1.hasOwnProperty(\'hasOwnProperty\'));\n// expected output: false\n\n\n> ææç»§æ¿äº Object çå¯¹è±¡é½ä¼ç»§æ¿å° hasOwnProperty æ¹æ³ãè¿ä¸ªæ¹æ³å¯ä»¥ç¨æ¥æ£æµä¸ä¸ªå¯¹è±¡æ¯å¦å«æç¹å®çèªèº«å±æ§ï¼å in è¿ç®ç¬¦ä¸åï¼è¯¥æ¹æ³ä¼å¿½ç¥æé£äºä»ååé¾ä¸ç»§æ¿å°çå±æ§ã\n> \n> å³ä½¿å±æ§çå¼æ¯ null æ undefinedï¼åªè¦å±æ§å­å¨ï¼hasOwnProperty ä¾æ§ä¼è¿å trueã\n\no = new Object();\no.propOne = null;\no.hasOwnProperty(\'propOne\'); // è¿å true\no.propTwo = undefined;\no.hasOwnProperty(\'propTwo\'); // è¿å true\n',normalizedContent:'# é¢è¯é¢ï¼ä¹ï¼\n\n * content-typeæ¯ä»ä¹\n * ä»ä¹æ¯é¢æ£è¯·æ±\n * éå·è¿ç®ç¬¦\n * parseintæä»ä¹ç¨\n * settimeoutåè®¡æ¶ä¸ºä»ä¹ä¼åºç°è¯¯å·®\n * èèåç«¯ç»é\n * è¯·è¯¦ç»ä»ç»ä¸ä¸ä»è¾å¥ url å°é¡µé¢å è½½å®æçè¿ç¨ï¼\n * fetch/body.json()\n * object.prototype.hasownproperty()\n\n\n# content-typeæ¯ä»ä¹\n\n * application/x-www-form-urlencoded\n   * httpä¼å°è¯·æ±åæ°ç¨key1=val1&key2=val2çæ¹å¼è¿è¡ç»ç»ï¼å¹¶æ¾å°è¯·æ±å®ä½éé¢\n * application/json\n   * json æ¯ä¸ç§è½»éçº§çæ°æ®æ ¼å¼ï¼ä»¥âé®-å¼âå¯¹çæ¹å¼ç»ç»çæ°æ®ãè¿ä¸ªä½¿ç¨è¿ä¸ªç±»åï¼éè¦åæ°æ¬èº«å°±æ¯jsonæ ¼å¼çæ°æ®ï¼åæ°ä¼è¢«ç´æ¥æ¾å°è¯·æ±å®ä½éï¼ä¸è¿è¡ä»»ä½å¤çã\n * å¯ä»¥åècontent-type è¯¦è§£\n\n\n# ä»ä¹æ¯é¢æ£è¯·æ±\n\n * é¢æ£è¯·æ±ä¼åæå¡å¨ç¡®è®¤è·¨åæ¯å¦åè®¸ï¼æå¡è¿åçååºå¤´éæå¯¹åºå­æ®µaccess-control-allow-originæ¥ç»æµè§å¨å¤æ­ï¼å¦æåè®¸ï¼æµè§å¨ç´§æ¥çåéå®éè¯·æ±ï¼ä¸åè®¸ï¼æ¥éå¹¶ç¦æ­¢å®¢æ·ç«¯èæ¬è¯»åååºç¸å³çä»»ä½ä¸è¥¿ã\n * åèé¢æ£è¯·æ± options\n\n\n# éå·è¿ç®ç¬¦\n\n\n# (0,function)\n\n> éå·è¿ç®ç¬¦ï¼å®å°åè®¡ç®å·¦è¾¹çåæ°ï¼åè®¡ç®å³è¾¹çåæ°å¼ãç¶åè¿åæå³è¾¹åæ°çå¼ã\n\nvar a = {\n  foo: function() {\n    console.log(this === window);\n  }\n};\n \na.foo(); // returns \'false\' in console\n(0, a.foo)(); // returns \'true\' in console\n\n\nbut, if you were callÂ (0, a.foo)(). the expressionÂ (0, a.foo)Â will evaluate each of its operands (from left to right) and returns the value of the last operand. in other words,Â (0, a.foo)Â is equivalent to\n\nfunction() {\n  console.log(this === window);\n} \n\n\n\n# parseintæä»ä¹ç¨\n\nparseint("10");\t\t\t//è¿å 10\nparseint("19",10);\t\t//è¿å 19 (10+9)\nparseint("11",2);\t\t//è¿å 3 (2+1)\nparseint("17",8);\t\t//è¿å 15 (8+7)\nparseint("1f",16);\t\t//è¿å 31 (16+15)\nparseint("010");\t\t//æªå®ï¼è¿å 10 æ 8\n\n//bigintä¹æè½¬æ¢è¿å¶çåè½\nbigint("0b"+"10") //2\nbigint("0o"+"10") //8\nbigint("0x"+"10") //16\n\n//é£ä¹10è¿å¶æä¹è½¬æ¢æ2è¿å¶å¢\nnumberobject.tostring(radix);\n\n//parseintè¿å·æåä¸åæ´çåè½\nparseint(2.5) //2\n\n\n\n# settimeoutåè®¡æ¶ä¸ºä»ä¹ä¼åºç°è¯¯å·®\n\n> settimeout() åªæ¯å°äºä»¶æå¥äºâä»»å¡éåâï¼å¿é¡»ç­å½åä»£ç ï¼æ§è¡æ ï¼æ§è¡å®ï¼ä¸»çº¿ç¨æä¼å»æ§è¡å®æå®çåè°å½æ°ãè¦æ¯å½åä»£ç æ¶èæ¶é´å¾é¿ï¼ä¹æå¯è½è¦ç­å¾ä¹ï¼æä»¥å¹¶æ²¡åæ³ä¿è¯åè°å½æ°ä¸å®ä¼å¨ settimeout() æå®çæ¶é´æ§è¡ãæä»¥ï¼ settimeout() çç¬¬äºä¸ªåæ°è¡¨ç¤ºçæ¯æå°æ¶é´ï¼å¹¶éæ¯ç¡®åæ¶é´ã\n> \n> html5æ åè§å®äº settimeout() çç¬¬äºä¸ªåæ°çæå°å¼ä¸å¾å°äº4æ¯«ç§ï¼å¦æä½äºè¿ä¸ªå¼ï¼åé»è®¤æ¯4æ¯«ç§ãå¨æ­¤ä¹åãèçæ¬çæµè§å¨é½å°æç­æ¶é´è®¾ä¸º10æ¯«ç§ãå¦å¤ï¼å¯¹äºé£äºdomçåå¨ï¼å°¤å¶æ¯æ¶åé¡µé¢éæ°æ¸²æçé¨åï¼ï¼éå¸¸æ¯é´é16æ¯«ç§æ§è¡ãè¿æ¶ä½¿ç¨ requestanimationframe() çææè¦å¥½äº settimeout();\n\nsettimeout(() => {\n    console.log(\'settimeout\', 10)\n})\n\nfor (let i = 0; i < 10000; i++) {\n    console.log(i)\n}\n\n\nwindow.requestanimationframe() åè¯æµè§å¨ââä½ å¸ææ§è¡ä¸ä¸ªå¨ç»ï¼å¹¶ä¸è¦æ±æµè§å¨å¨ä¸æ¬¡éç»ä¹åè°ç¨æå®çåè°å½æ°æ´æ°å¨ç»ãè¯¥æ¹æ³éè¦ä¼ å¥ä¸ä¸ªåè°å½æ°ä½ä¸ºåæ°ï¼è¯¥åè°å½æ°ä¼å¨æµè§å¨ä¸ä¸æ¬¡éç»ä¹åæ§è¡\n\n\n# åç«¯ç»é\n\n * cookie + session ç»å½\n   * æå¡ç«¯å­å¨ session ï¼å®¢æ·ç«¯å­å¨ cookieï¼å¶ä¸­ cookie ä¿å­çä¸º sessionid\n   * å¯ä»¥çµæ´» revoke æéï¼æ´æ°ä¿¡æ¯åå¯ä»¥æ¹ä¾¿çåæ­¥ session ä¸­ç¸åºåå®¹\n   * åå¸å¼ session ä¸è¬ä½¿ç¨ redis(æå¶ä»kv) å­å¨\n   * éåä¼ ç»ç³»ç»ç¬ç«é´æ\n * token ç»å½\n * sso åç¹ç»å½\n * oauth ç¬¬ä¸æ¹ç»å½\n\nåç«¯ç»å½ï¼è¿ä¸ç¯å°±å¤äº\n\n\n# è¯·è¯¦ç»ä»ç»ä¸ä¸ä»è¾å¥ url å°é¡µé¢å è½½å®æçè¿ç¨ï¼\n\nä¸éé¢è¯é¢æ¯å¦ä½å¼åæ·±å±æ¬¡ççµé­æ·é®\n\n\n# fetch/body.json()\n\nä½¿ç¨ fetch\n\nbody.json()\n\n\n# object.prototype.hasownproperty()\n\n> hasownproperty() æ¹æ³ä¼è¿åä¸ä¸ªå¸å°å¼ï¼æç¤ºå¯¹è±¡èªèº«å±æ§ä¸­æ¯å¦å·ææå®çå±æ§ï¼ä¹å°±æ¯ï¼æ¯å¦ææå®çé®ï¼ã\n\nconst object1 = {};\nobject1.property1 = 42;\n\nconsole.log(object1.hasownproperty(\'property1\'));\n// expected output: true\n\nconsole.log(object1.hasownproperty(\'tostring\'));\n// expected output: false\n\nconsole.log(object1.hasownproperty(\'hasownproperty\'));\n// expected output: false\n\n\n> ææç»§æ¿äº object çå¯¹è±¡é½ä¼ç»§æ¿å° hasownproperty æ¹æ³ãè¿ä¸ªæ¹æ³å¯ä»¥ç¨æ¥æ£æµä¸ä¸ªå¯¹è±¡æ¯å¦å«æç¹å®çèªèº«å±æ§ï¼å in è¿ç®ç¬¦ä¸åï¼è¯¥æ¹æ³ä¼å¿½ç¥æé£äºä»ååé¾ä¸ç»§æ¿å°çå±æ§ã\n> \n> å³ä½¿å±æ§çå¼æ¯ null æ undefinedï¼åªè¦å±æ§å­å¨ï¼hasownproperty ä¾æ§ä¼è¿å trueã\n\no = new object();\no.propone = null;\no.hasownproperty(\'propone\'); // è¿å true\no.proptwo = undefined;\no.hasownproperty(\'proptwo\'); // è¿å true\n',charsets:{cjk:!0}},{title:"é¢è¯é¢ï¼ä¸ï¼",frontmatter:{title:"é¢è¯é¢ï¼ä¸ï¼",date:"2018-08-04T09:21:01.000Z",categories:"é¢è¯"},regularPath:"/interview/interview-3.html",relativePath:"interview/interview-3.md",key:"v-4fb3301f",path:"/interview/interview-3.html",headers:[{level:2,title:"== å === çåºå«",slug:"å-çåºå«",normalizedTitle:"== å === çåºå«",charIndex:13},{level:2,title:"è®²è®² js çç»§æ¿æ¹å¼",slug:"è®²è®²-js-çç»§æ¿æ¹å¼",normalizedTitle:"è®²è®² js çç»§æ¿æ¹å¼",charIndex:29},{level:2,title:"ä»ç»ä¸ä¸ç®­å¤´å½æ°",slug:"ä»ç»ä¸ä¸ç®­å¤´å½æ°",normalizedTitle:"ä»ç»ä¸ä¸ç®­å¤´å½æ°",charIndex:44},{level:2,title:"this çæå",slug:"this-çæå",normalizedTitle:"this çæå",charIndex:56},{level:2,title:"ç®è¿°CSSéæ©å¨çä¼åçº§è§å",slug:"ç®è¿°csséæ©å¨çä¼åçº§è§å",normalizedTitle:"ç®è¿°csséæ©å¨çä¼åçº§è§å",charIndex:68},{level:2,title:"ç®è¿°å±ä¸­ä¸ä¸ªåç´ çæ¹æ³",slug:"ç®è¿°å±ä¸­ä¸ä¸ªåç´ çæ¹æ³",normalizedTitle:"ç®è¿°å±ä¸­ä¸ä¸ªåç´ çæ¹æ³",charIndex:86},{level:2,title:"æµè§å¨ç¼å­åwebpackç¼å­éç½®",slug:"æµè§å¨ç¼å­åwebpackç¼å­éç½®",normalizedTitle:"æµè§å¨ç¼å­åwebpackç¼å­éç½®",charIndex:101},{level:3,title:"EtagåLast-Modifiedåºå«",slug:"etagålast-modifiedåºå«",normalizedTitle:"etagålast-modifiedåºå«",charIndex:6698},{level:3,title:"cache control åæ°",slug:"cache-control-åæ°",normalizedTitle:"cache control åæ°",charIndex:7534},{level:2,title:"metaæ ç­¾ä¸è§å£",slug:"metaæ ç­¾ä¸è§å£",normalizedTitle:"metaæ ç­¾ä¸è§å£",charIndex:122},{level:2,title:"margin å 3 ä¸ªå¼",slug:"margin-å-3-ä¸ªå¼",normalizedTitle:"margin å 3 ä¸ªå¼",charIndex:9363},{level:2,title:"background-size",slug:"background-size",normalizedTitle:"background-size",charIndex:150},{level:2,title:"æµè§å¨æ ç­¾é¡µéä¿¡",slug:"æµè§å¨æ ç­¾é¡µéä¿¡",normalizedTitle:"æµè§å¨æ ç­¾é¡µéä¿¡",charIndex:169},{level:3,title:"cookie + setInterval",slug:"cookie-setinterval",normalizedTitle:"cookie + setinterval",charIndex:10149},{level:3,title:"localStorage",slug:"localstorage",normalizedTitle:"localstorage",charIndex:189},{level:3,title:"webworker",slug:"webworker",normalizedTitle:"webworker",charIndex:10511},{level:3,title:"websocket",slug:"websocket",normalizedTitle:"websocket",charIndex:10829},{level:2,title:"cookie, localStorage, sessionStorage",slug:"cookie-localstorage-sessionstorage",normalizedTitle:"cookie, localstorage, sessionstorage",charIndex:181}],lastUpdated:"2/9/2023, 7:49:33 PM",lastUpdatedTimestamp:1675943373e3,headersStr:"== å === çåºå« è®²è®² js çç»§æ¿æ¹å¼ ä»ç»ä¸ä¸ç®­å¤´å½æ° this çæå ç®è¿°CSSéæ©å¨çä¼åçº§è§å ç®è¿°å±ä¸­ä¸ä¸ªåç´ çæ¹æ³ æµè§å¨ç¼å­åwebpackç¼å­éç½® EtagåLast-Modifiedåºå« cache control åæ° metaæ ç­¾ä¸è§å£ margin å 3 ä¸ªå¼ background-size æµè§å¨æ ç­¾é¡µéä¿¡ cookie + setInterval localStorage webworker websocket cookie, localStorage, sessionStorage",content:"# é¢è¯é¢ï¼ä¸ï¼\n\n * == å === çåºå«\n * è®²è®² js çç»§æ¿æ¹å¼\n * ä»ç»ä¸ä¸ç®­å¤´å½æ°\n * this çæå\n * ç®è¿°CSSéæ©å¨çä¼åçº§è§å\n * ç®è¿°å±ä¸­ä¸ä¸ªåç´ çæ¹æ³\n * æµè§å¨ç¼å­åwebpackç¼å­éç½®\n * metaæ ç­¾ä¸è§å£\n * margin å3ä¸ªå¼\n * background-size\n * æµè§å¨æ ç­¾é¡µéä¿¡\n * cookie, localStorage, sessionStorage\n\n\n# == å === çåºå«\n\n> == ä»£è¡¨ç¸åï¼ ===ä»£è¡¨ä¸¥æ ¼ç¸å\n> \n> å½è¿è¡åç­å·æ¯è¾æ¶åï¼ åæ£æ¥ä¸¤ä¸ªæä½æ°æ°æ®ç±»åï¼å¦æç¸åï¼ åè¿è¡===æ¯è¾ï¼ å¦æä¸åï¼ åæ¿æä¸ºä½ è¿è¡ä¸æ¬¡ç±»åè½¬æ¢ï¼ è½¬æ¢æç¸åç±»åååè¿è¡æ¯è¾ï¼ è===æ¯è¾æ¶ï¼ å¦æç±»åä¸åï¼ç´æ¥å°±æ¯false.\n> \n> null == undefined // trueï¼æ¯ä¸ç§è§å® null === undefined // false\n> \n> typeof null // object typeof undefined // undefined\n> \n> [1] == [1] // falseï¼å°åä¸å\n> \n> [1] == \"1\" //trueï¼éå¼ç±»åè½¬æ¢\n\n\n# è®²è®² js çç»§æ¿æ¹å¼\n\nï¼1ï¼ååé¾ç»§æ¿ï¼å­ç±»ååæ¯å¯¹ç¶ç±»çå®ä¾å\n\nfunction Father(){}\nfunction Son(){}\nSon.prototype = new Father()   //å®ä¾åå¯¹è±¡ä¼æåç¶ç±»çååï¼å¦å¾\n\n// æèä½¿ç¨ Object.create()\nSon.prototype = Object.create(Father.prototype);\n\nlet son = new Son()\nson instanceof Son // true\nson instanceof Father // true\n\n// Object.create å®ç°\nlet o = Object.create(obj) // o.__proto__ === obj\nObject.create = function (obj) {\n    function F() {}\n    F.prototype = obj;\n    return new F();\n};\n\n\n\n\nç¼ºç¹ï¼\n\n1.ç¶ç±»çå±æå±æ§ä¼è¢«å­ç±»å®ä¾å±äº«\n\n2.åå»ºå­ç±»å¯¹è±¡æ æ³ä¼ åï¼å ä¸ºåªæSon.prototype = new Father()å¯ä»¥ä¼ ï¼ä½æ¯ä¼å¯¹ææå­ç±»ææã\n\nï¼2ï¼æé å½æ°ç»§æ¿\n\nfunction Father(name,age){\n    this.name = name;\n    this.age = age;\n}\nfunction Son(name,age,sex){\n    this.sex = sex;\n    Father.call(this,name,age)\n}\nvar son1 = new Son('å¼ ä¸','30','ç·')\n\n//ç®è¿°newä¸ä¸ªå¯¹è±¡çè¿ç¨\n//1.åé ä¸ä¸ªæ°çç©ºå¯¹è±¡\n//2.æ°å¯¹è±¡ç_proto_æåæé å½æ°çååå¯¹è±¡\n//3.æé å½æ°çthisæåæ­£å¨åå»ºçæ°å¯¹è±¡ï¼å¹¶æ§è¡æé å½æ°çä»£ç ï¼åæ°å¯¹è±¡ä¸­æ·»å å±æ§åæ¹æ³ã\n//4.è¿åæ°å¯¹è±¡å°å\n\n//è®²ä¸ä¸_proto_åprototypeçåºå«\n//1.__proto__æ¯ å¯¹è±¡å®ä¾ é½æçï¼è prototype æ¯å½æ°å¯¹è±¡ç¹æç\n//2.prototype ååå¯¹è±¡ æ constructor å±æ§ï¼åæå æé å½æ°\n//3.å¯¹è±¡å®ä¾ç __proto__ åé»è®¤æå å®ä»¬ç æé å½æ°ç prototype\n\n\nç¼ºç¹ï¼\n\n1.ç¶ç±»çååæ¹æ³ä¸ä¼è¢«å­ç±»ç»§æ¿ï¼å¦æå¨æ¾å°æé å½æ°ä¸­ï¼æ¯ä¸ªå­ç±»å®ä¾é½åç¬æ¥æä¸ä»½ï¼è¿åå¤ç¨æ§ã\n\n2.ä¸è½éè¿ son instanceof Father\n\nï¼3ï¼ç»åç»§æ¿\n\nfunction Father(name,age){\n    this.name = name;\n    this.age = age;\n}\nfunction Son(name,age,sex){\n    this.sex = sex;\n    Father.call(this,name,age)\n}\nSon.prototype = new Father()\n\n\nç¼ºç¹ï¼ç¶ç±»çæé å½æ°æ§è¡äºä¸¤é\n\nï¼4ï¼ååå¼ç»§æ¿ï¼å¯¹ååé¾ç»§æ¿çå°è£\n\nfunction inheritObject(o){\n    function F(){}\n    F.prototype = o;\n    return new F();\n}\nvar book = {\n    name:'js book'\n}\nvar newBook = inheritObject(book)\nvar newBook.name = 'ajax book'\n\n\nç¼ºç¹ï¼ä»å­å¨ååé¾ç»§æ¿çç¼ºç¹\n\nä¼ç¹ï¼Fä¸­æ åå®¹ï¼å¼éæ¯è¾å°ã\n\nï¼5ï¼å¯çå¼ç»§æ¿ï¼å¯¹ååç»§æ¿çäºæ¬¡å°è£å¹¶è¿è¡äºæ©å±\n\nvar book = {\n    name:'js book'\n}\nfunction creteBook(obj){\n    var o = inheritObject(obj); //ä¸ä»æç¶ç±»ä¸­çå±æ§åæ¹æ³\n    //æ©å±æ°å¯¹è±¡\n    o.getName = function(){     //è¿æ·»å äºæ°çå±æ§åæ¹æ³\n        console.log(name)\n    }\n    return o\n}\n\n\nç¼ºç¹ï¼æ¹æ³å¨å½æ°ä¸­å®ä¹ï¼æ æ³å¾å°å¤ç¨\n\nï¼6ï¼å¯çç»åç»§æ¿ï¼æçæ³ï¼\n\nç»åç»§æ¿= ååé¾ç»§æ¿ + æé å½æ°ç»§æ¿\n\nå¯çç»åå¼ç»§æ¿=å¯çå¼ç»§æ¿+æé å½æ°ç»§æ¿\n\nfunction inheritObject(o){\n    function F(){}\n    F.prototype = o;\n    return new F();\n}\nfunction inheritPrototype(subClass,superClass){\n    var p = inheritObject(superClass.prototype)\n    p.constructor = subClass\n    subClass.prototype = p\n}\n//ç¶ç±»\nfunction SuperClass(name){\n    this.name = name\n}\n//å­ç±»\nfunction SubClass(name,time){\n    //æé å½æ°å¼ç»§æ¿\n    SuperClass.call(this,name)\n    this.time = time\n}\n//å¯çå¼ç»§æ¿ç¶ç±»åå\ninheritPrototype(subClass,superClass)\n\n\n\n# ä»ç»ä¸ä¸ç®­å¤´å½æ°\n\nç®­å¤´å½æ°çå«ä¹\n\nx => x * x  // ç¸å½äº\nfunction (x) {\n    return x * x;\n}\n\n\n * è¯´ä¸ä¸ç®­å¤´å½æ°åæ®éå½æ°çåºå«\n\nï¼1ï¼ç®­å¤´å½æ°æ¯å¿åå½æ°ï¼ä¸è½ä½ä¸ºæé å½æ°ï¼ä¸è½ä½¿ç¨new ï¼2ï¼ç®­å¤´å½æ°ä¸ç»å®argumentsï¼åèä»£ä¹ç¨reståæ°â¦è§£å³\n\nlet B = (b)=>{\n\tconsole.log(arguments);\n}\nB(2,92,32,32); // Uncaught ReferenceError: arguments is not defined\n\nlet C = (...c) => {\n  console.log(c);\n}\nC(3,82,32,11323);  // [3, 82, 32, 11323]   \n\n\nï¼3ï¼ç®­å¤´å½æ°ä¸ç»å®thisï¼ä¼æè·å¶æå¨çä¸ä¸æçthiså¼ï¼ä½ä¸ºèªå·±çthiså¼ ï¼4ï¼ç®­å¤´å½æ°éè¿ call() æ apply() æ¹æ³è°ç¨ä¸ä¸ªå½æ°æ¶ï¼å¯¹ this å¹¶æ²¡æå½±åã ï¼5ï¼ç®­å¤´å½æ°æ²¡æååå±æ§\n\n\n# this çæå\n\n * æ®éå½æ°æåå½æ°è°ç¨èï¼æ§è¡çæ¶åæç¡®å®ï¼\n * ç®­å¤´å½æ°æåå½æ°æå¨çä½ç¨åï¼å¯¹è±¡ç{}åif(){}é½æä¸æä½ç¨åï¼\n\nconst obj = {\n    name:'objName',\n    say:function(){console.log(this.name)},\n    read:()=>{console.log(this.name)}\n}\nobj.say();  //objName     æåçæ¯è°ç¨è\nobj.read(); //undefined   æåçæ¯window.name\n\n\næä¹ç­ï¼\n\n 1. å¨å±ç¯å¢ä¸­çthisæåå¨å±å¯¹è±¡window\n 2. newç»å®ï¼å¹¶ä¸æé å½æ°æ²¡æè¿åå¶ä»å¯¹è±¡ï¼thisæåè¿ä¸ªæ°å¯¹è±¡\n 3. éè¿callï¼applyï¼bindï¼å¹¶ä¸ç¬¬ä¸ä¸ªåæ°å¼ä¸æ¯Null,undefinedï¼é£ä¹thisç»å®çå°±æ¯æå®çå¯¹è±¡\n 4. æ®éå½æ°æåå½æ°è°ç¨èï¼æ§è¡çæ¶åæç¡®å®ï¼\n 5. ç®­å¤´å½æ°æåå½æ°æå¨çä½ç¨åï¼æ ¹æ®ä¸ä¸æç¡®å®\n\nå³äºç¬¬äºæ¡\n\nfunction fn()  \n{  \n    this.user = 'è¿½æ¢¦å­';  \n    return {};  \n}\nvar a = new fn;  \nconsole.log(a.user); //undefined\n\n\n\n# ç®è¿°CSSéæ©å¨çä¼åçº§è§å\n\n> ä¼åçº§ä¸åï¼é«ä¼åçº§å±æ§è¦çä½ä¼åçº§å±æ§ ä¼åçº§ç¸åï¼å®ä¹å¨åè¦çå®ä¹å¨å\n> \n> åè > IDéæ©å¨ > ç±»éæ©å¨ > æ ç­¾éæ©å¨ï¼ä¼ªç±»>åç´ æ è®° !importantæé«ï¼ä½æ¯å¨ä½çæ¬IEæå¼å®¹æ§é®é¢\n> \n> å¦ælinkå¼å¥å¤é¨æ ·å¼è¡¨ï¼èæ¬èº«åæåé¨æ ·å¼è¡¨ï¼åè¡åæ ·å¼ä¾æ§ä¼åçº§æé«ï¼åé¨æ ·å¼è¡¨åå¤é¨æ ·å¼è¡¨çä¼åçº§åå®ä¹ååé¡ºåºæå³ï¼å®ä¹å¨åçä¼åçº§æ´é«ã\n\n\n# ç®è¿°å±ä¸­ä¸ä¸ªåç´ çæ¹æ³\n\nèèï¼æ°´å¹³è¿æ¯åç´ï¼åè¿æ¯è¡åï¼æ¯å¦éè¦ç¥éå®½é«ï¼å¼å®¹æ§\n\nï¼1ï¼æ°´å¹³ï¼\n\n1. margin: 0 auto; // å¯¹äº block çæ\n2. text-align: center; // å¯¹äº inline å inline-block åçæ\n\n\nï¼2ï¼åç´ï¼\n\n3. line-heightï¼xxpx\n4. vertical-alignï¼middle // è¿æä¸¤ä¸ªå¼text-top / text-bottomï¼å¸¸ç¨äºå¾çå¯¹é½æå­\n5. align-items: center; // flexå¸å±çå±ä¸­æ¹æ³\n\n\nï¼3ï¼æ°´å¹³ç«ç´åæ¶å±ä¸­\n\nabsoluteæ¹æ³ï¼\n\n 5. å·²ç¥å®½é«ï¼è´æ°margin\n\n.parent{\n    position: relative;\n}\n.child{\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 80px;\n    height: 60px;\n    margin-left: -40px;\n    margin-top: -30px;\n}\n\n\n 6. å·²ç¥å®½é«ï¼calc\n\n.parent{\n    position:relative;\n}\n.child{\n    position:absolute;\n    width: 80px;\n    height: 60px;\n    top:calc(50% - 30px);\n    left:calc(50% - 40px);\n}\n\n\n 7. éè¦è®¾å®å®½é«ï¼margin auto\n\n    .f14 .parent{\n        position: relative;\n    }\n    .f14 .child{\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        height: 50px;\n        width: 80px;\n        margin: auto;\n    }\n\n\n 8. ä¸éè¦è®¾å®å®½é«ï¼transform(css3,IE8åä»¥ä¸ä¸æ¯æ)\n\n    .f15 .parent{\n        position: relative;\n    }\n    .f15 .child{\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%,-50%);  èªèº«åç§»\n    }\n\n\n 9. flexå¸å±\n\n.main{\n     display: flex;\n     justify-content: center;\n     align-items: center;\n }\n\n\n 10. table-cell + inline-block\n\ncssæ°å¢çtableå±æ§ï¼å¯ä»¥è®©æä»¬ææ®éåç´ ï¼åä¸ºtableåç´ çç°å®ææï¼éè¿è¿ä¸ªç¹æ§ä¹å¯ä»¥å®ç°æ°´å¹³åç´å±ä¸­ï¼è¿ä¸ªå±æ§åtableæ ç­¾ä¸æ ·çå±ä¸­åçã\n\n.parent{\n    display: table-cell;\n    text-align: center;\n    vertical-align: middle;\n}\n.child{\n    display: inline-block;\n}\n\n\n\n# æµè§å¨ç¼å­åwebpackç¼å­éç½®\n\næä»¬ç»å¸¸è°è®ºçæµè§å¨ç¼å­ï¼å¼ºç¼å­ï¼ååç¼å­ï¼æçé½æ¯HTTPç¼å­\n\n * æµè§å¨ç¼å­: éç¹ç\n * hashãchunkhashåcontenthashåºå«\n * HTTPç¼å­ãæµè§å¨ç¼å­ãåºç¨ç¨åºç¼å­\n\n> å½æµè§å¨åæ¬¡è®¿é®ä¸ä¸ªå·²ç»è®¿é®è¿çèµæºæ¶ï¼å®ä¼è¿æ ·åï¼\n> \n>  1. ççæ¯å¦å½ä¸­å¼ºç¼å­ï¼å¦æå½ä¸­ï¼å°±ç´æ¥ä½¿ç¨ç¼å­äºã\n>  2. å¦ææ²¡æå½ä¸­å¼ºç¼å­ï¼å°±åè¯·æ±å°æå¡å¨æ£æ¥æ¯å¦å½ä¸­ååç¼å­ï¼Etag, Last-modifiedï¼ã\n>  3. å¦æå½ä¸­ååç¼å­ï¼æå¡å¨ä¼è¿å 304 åè¯æµè§å¨ä½¿ç¨æ¬å°ç¼å­ã\n>  4. å¦åï¼è¯·æ±ç½ç»è¿åææ°çèµæºã\n> \n> æµè§å¨ç¼å­çä½ç½®ï¼\n> \n>  1. Service Workerï¼ æ¯è¿è¡å¨æµè§å¨èåçç¬ç«çº¿ç¨ï¼å®å¯ä»¥è®©æä»¬èªç±æ§å¶ç¼å­åªäºæä»¶ãå¦ä½å¹éç¼å­ãå¦ä½è¯»åç¼å­ï¼å¹¶ä¸ç¼å­æ¯æç»­æ§çã\n>  2. Memory Cacheï¼ åå­ç¼å­ï¼è¯»ååå­ä¸­çæ°æ®è¯å®æ¯ç£çå¿«ãä½æ¯åå­ç¼å­è½ç¶è¯»åé«æï¼å¯æ¯ç¼å­æç»­æ§å¾ç­ï¼ä¼éçè¿ç¨çéæ¾èéæ¾ã ä¸æ¦æä»¬å³é­ Tab é¡µé¢ï¼åå­ä¸­çç¼å­ä¹å°±è¢«éæ¾äºã\n>  3. Disk Cache: Disk Cache ä¹å°±æ¯å­å¨å¨ç¡¬çä¸­çç¼å­ï¼è¯»åéåº¦æ¢ç¹ï¼ä½æ¯ä»ä¹é½è½å­å¨å°ç£çä¸­ï¼æ¯ä¹ Memory Cache èå¨å®¹éåå­å¨æ¶ææ§ä¸ã\n\n> HTTPç¼å­çåºæ¬ç®çå°±æ¯ä½¿åºç¨æ§è¡çæ´å¿«ï¼æ´ææ©å±ï¼ä½æ¯HTTPç¼å­éå¸¸åªéç¨äºidempotent requestï¼å¯ä»¥çè§£ä¸ºæ¥è¯¢è¯·æ±ï¼ä¹å°±æ¯ä¸æ´æ°æå¡ç«¯æ°æ®çè¯·æ±ï¼ï¼è¿ä¹å°±å¯¼è´äºå¨HTTPçä¸çéï¼ä¸è¬é½æ¯å¯¹GETè¯·æ±åç¼å­ï¼POSTè¯·æ±å¾å°æç¼å­ã\n> \n> GETå¤ç¨æ¥ç´æ¥è·åæ°æ®ï¼ä¸ä¿®æ¹æ°æ®ï¼ä¸»è¦ç®çå°±æ¯databaseçsearchè¯­å¥çæè§ãç¨ç¼å­ï¼æä¸ªä»£çæå¡å¨çæ¦å¿µï¼çç®çå°±æ¯æ¥dbçéåº¦åå¿«ã\n> \n> POSTåæ¯åéæ°æ®å°æå¡å¨ç«¯å»å­å¨ãç±»ä¼¼dbéçupdate deleteåinsertè¯­å¥çæè§ãæ´æ°dbçææãæ°æ®å¿é¡»æ¾å¨æ°æ®åºï¼æä»¥ä¸è¬é½å¾å»è®¿é®æå¡å¨ç«¯ï¼èæå°éè¦ç¼å­ã\n\nç¼å­çå®ç°ï¼ å¼ºç¼å­åååç¼å­é½æ¯æ ¹æ® HTTP Header æ¥å®ç°çï¼å°±ç response ä¸­ Cache-Control çå¼ï¼å¦ææmax-age=xxxç§ï¼åå½ä¸­å¼ºç¼å­ãå¦æCache-Controlçå¼æ¯no-cacheï¼è¯´ææ²¡å½ä¸­å¼ºç¼å­ï¼èµ°ååç¼å­ã\n\n\n# EtagåLast-Modifiedåºå«\n\nLast-Modifiedåå«äºä¸æ¬¡æ´æ¹ææ¡£çæ¥æãäºå®è¯æï¼å¨å°è¯ç¡®å®ææ¡£æ¯å¦å·²æ´æ¹æ¶ï¼Last-Modifiedæ¥æå¹¶ä¸å¾å¯é ã**ææ¶å¼åäººåä¼å¨ä¿®å¤æäºåå®¹åå°æææä»¶ä¸ä¼ å°æå¡å¨ï¼å³ä½¿åå®¹ä»å¨å­éä¸æ´æ¹ï¼ä¹ä¼éç½®æææä»¶çLast-Modifiedæ¥æã**ä¸ºäºéåºè¿ç§æåµï¼å¤§å¤æ°æå¡å¨ä¹ä¼åéä¸ä¸ªETagã ETagä»£è¡¨å®ä½æ è®°ï¼å¹¶ä¸æ¯å¯ä¸çæ è¯ç¬¦ï¼å¶ä»æ ¹æ®æä»¶çåå®¹èæ¹åãå¤§å¤æ°æå¡å¨å®éä¸ä½¿ç¨åSHA256è¿æ ·çæ£åå½æ°æ¥è®¡ç®ETagã\n\nLast-Modifiedä¸Etagç±»ä¼¼ãä¸è¿Last-Modifiedè¡¨ç¤ºååºèµæºå¨æå¡å¨æåä¿®æ¹æ¶é´èå·²ãä¸Etagç¸æ¯ï¼ä¸è¶³ä¸ºï¼\n\n 1. Last-Modifiedæ æ³¨çæåä¿®æ¹åªè½ç²¾ç¡®å°ç§çº§ï¼å¦ææäºæä»¶å¨1ç§éä»¥åï¼è¢«ä¿®æ¹å¤æ¬¡çè¯ï¼å®å°ä¸è½åç¡®æ æ³¨æä»¶çä¿®æ¹æ¶é´ãå¦æ1såæä»¶è¢«ä¿®æ¹äºï¼ä½æ¯Last-Modifiedæ²¡åï¼æ­¤æ¶ä¸è½æ ¹æ®Last-Modifiedå¤æ­æä»¶æ¯å¦è¢«ä¿®æ¹è¿ã\n 2. å¦ææäºæä»¶ä¼è¢«å®æçæï¼ææ¶åå®¹å¹¶æ²¡æä»»ä½ååï¼ä½Last-Modifiedå´æ¹åäºï¼å¯¼è´æä»¶æ²¡æ³ä½¿ç¨ç¼å­ï¼\n 3. æå¯è½å­å¨æå¡å¨æ²¡æåç¡®è·åæä»¶ä¿®æ¹æ¶é´ï¼æèä¸ä»£çæå¡å¨æ¶é´ä¸ä¸è´ç­æå½¢ã\n\nç¶èï¼Etagæ¯æå¡å¨èªå¨çææèç±å¼åèçæçå¯¹åºèµæºå¨æå¡å¨ç«¯çå¯ä¸æ è¯ç¬¦ï¼è½å¤æ´å åç¡®çæ§å¶ç¼å­ã\n\nETagçæçå¸¸ç¨æ¹æ³åæ¬ä½¿ç¨èµæºåå®¹çæå²çªæ£åå½æ°çæçåå¸å¼ãæåä¿®æ¹æ¶é´æ³çæ£åæçè³ä»ä½¿ç¨èµæºççæ¬å·ã å³ ETag å°±æ¯æå¡å¨çæçä¸ä¸ªæ è®°ï¼ç¨æ¥æ è¯è¿åå¼æ¯å¦æååï¼ä¸Etagçä¼åçº§é«äºLast-Modifiedã\n\n> æ»ç»å°±æ¯ä¸è¬æåµä¸Last-Modifiedå·²ç»è¶³å¤ï¼ETagåªå¨ç¹å®æåµä¸ææ´æç¨ï¼åç«¯åå¸æä»¶ä¸å¯è½ä¸ç§åå¸å¥½å¤æ¬¡ï¼èä¸ETagå¯è½ä¼ç»æå¡å¨å¸¦æ¥æ´å¤§çå¼éï¼æä»¥ä¸è¬å°±ç¨Last-Modifiedå°±è¡\n\n\n# cache control åæ°\n\npublic\n\n> ä»£è¡¨ http è¯·æ±è¿åçåå®¹æç»è¿çä»»ä½è·¯å¾å½ä¸­ï¼åæ¬ä¸­é´ä¸äºhttpä»£çæå¡å¨ä»¥åååºè¯·æ±çå®¢æ·ç«¯æµè§å¨ï¼ï¼é½å¯ä»¥å¯¹è¿ååå®¹è¿è¡ç¼å­æä½\n\nprivate\n\n> ä»£è¡¨åªæåèµ·è¯·æ±çæµè§å¨æå¯ä»¥è¿è¡ç¼å­\n\nno-cache\n\n> ä¸èµ°å¼ºç¼å­ï¼å¿é¡»åä¸æå¡å¨ç¡®è®¤è¿åçååºæ¯å¦è¢«æ´æ¹ï¼ç¶åæè½ä½¿ç¨è¯¥ååºæ¥æ»¡è¶³åç»­å¯¹åä¸ä¸ªç½åçè¯·æ±ãå æ­¤ï¼å¦æå­å¨åéçéªè¯ä»¤ç (ETag)ï¼no-cache ä¼åèµ·å¾è¿éä¿¡æ¥éªè¯ç¼å­çååºï¼å¦æèµæºæªè¢«æ´æ¹ï¼å¯ä»¥é¿åä¸è½½ã\n\nno-store\n\n> ææåå®¹é½ä¸ä¼è¢«ç¼å­å°ç¼å­æ Internet ä¸´æ¶æä»¶ä¸­\n\nmust-revalidation/proxy-revalidation\n\n> å¦æç¼å­çåå®¹å¤±æï¼è¯·æ±å¿é¡»åéå°æå¡å¨/ä»£çä»¥è¿è¡éæ°éªè¯\n\nmax-age=xxx\n\n> ç¼å­çåå®¹å°å¨ xxx ç§åå¤±æ, è¿ä¸ªéé¡¹åªå¨HTTP 1.1å¯ç¨, å¹¶å¦æåLast-Modifiedä¸èµ·ä½¿ç¨æ¶, ä¼åçº§è¾é«\n\ns-maxage=xxx\n\n> åmax-ageä½ç¨ä¸æ ·ï¼åªå¨ä»£çæå¡å¨ä¸­çæï¼æ¯å¦CDNç¼å­ï¼ãæ¯å¦å½s-maxage=60æ¶ï¼å¨è¿60ç§ä¸­ï¼å³ä½¿æ´æ°äºCDNçåå®¹ï¼æµè§å¨ä¹ä¸ä¼è¿è¡è¯·æ±ãmax-ageç¨äºæ®éç¼å­ï¼ès-maxageç¨äºä»£çç¼å­ãs-maxageçä¼åçº§é«äºmax-ageãå¦æå­å¨s-maxageï¼åä¼è¦çæmax-ageåExpires headerã\n\nimmutable\n\n> immutableè¡¨ç¤ºååºåå®¹å°ä¸ç´ä¸ä¼æ¹åï¼å®åmax-ageæ¯å¯¹ç¼å­çå½å¨ææ§å¶çäºè¡¥æ§å±æ§ï¼å·ä½ä¸¾ä¾å¦ä¸ï¼cache-control: public, max-age=31536000, s-maxage=31536000, immutable\n\n\n# metaæ ç­¾ä¸è§å£\n\né¦åä»ç»3ä¸ªè§å£çæ¦å¿µ\n\n * **layout viewport(å¸å±è§å£)ï¼**å¨PCç«¯ä¸ï¼å¸å±è§å£ç­äºæµè§å¨çªå£çå®½åº¦ãèå¨ç§»å¨ç«¯ä¸ï¼ç±äºè¦ä½¿ä¸ºPCç«¯æµè§å¨è®¾è®¡çç½ç«è½å¤å®å¨æ¾ç¤ºå¨ç§»å¨ç«¯çå°å±å¹éï¼æ­¤æ¶çå¸å±è§å£ä¼è¿å¤§äºç§»å¨è®¾å¤çå±å¹ï¼å°±ä¼åºç°æ»å¨æ¡ãjsè·åå¸å±è§å£ï¼document.documentElement.clientWidth | document.body.clientWidthï¼\n * **visual viewport(è§è§è§å£)ï¼**ç¨æ·æ­£å¨çå°çç½é¡µçåºåãç¨æ·å¯ä»¥éè¿ç¼©æ¾æ¥æ¥çç½ç«çåå®¹ãå¦æç¨æ·ç¼©å°ç½ç«ï¼æä»¬çå°çç½ç«åºåå°åå¤§ï¼æ­¤æ¶è§è§è§å£ä¹åå¤§äºï¼åçï¼ç¨æ·æ¾å¤§ç½ç«ï¼æä»¬è½çå°çç½ç«åºåå°ç¼©å°ï¼æ­¤æ¶è§è§è§å£ä¹åå°äºãä¸ç®¡ç¨æ·å¦ä½ç¼©æ¾ï¼é½ä¸ä¼å½±åå°å¸å±è§å£çå®½åº¦ãjsè·åè§è§è§å£ï¼window.innerWidthï¼\n * **ideal viewport(çæ³è§å£)ï¼**å¸å±è§å£çä¸ä¸ªçæ³å°ºå¯¸ï¼åªæå½å¸å±è§å£çå°ºå¯¸ç­äºè®¾å¤å±å¹çå°ºå¯¸æ¶ï¼ææ¯çæ³è§å£ãjsè·åçæ³è§å£ï¼window.screen.widthï¼\n * é¡µé¢çæ»å¨æ¡åå³äºè§è§è§å£åå¸å±è§å£ï¼é¡µé¢åç´ å®½åº¦åå³äºå¸å±è§å£å¤§å°\n\næä»¬å¨å¼åæ¶ï¼å¸¸å¸¸å å¥è¿æ ·ä¸è¡ä»£ç \n\n<meta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\">\n\n\n * width=device-widthï¼è¿å¥ä»£ç çææå°±æ¯æå¸å±è§å£ = çæ³è§å£ã\n * initial-scaleæçæ¯ç¼©æ¾ç³»æ°ãå¶ä¸­æè¿æ ·çå¬å¼ï¼\n\nè§è§è§å£å®½åº¦ = çæ³è§å£å®½åº¦ / ç¼©æ¾ç³»æ° \n\næ¯å¦iphoneå å¥è¿æ®µä»£ç æ¶ï¼\nè§è§è§å£ = 320/1.0 = 320\nå¸å±è§å£ = 320\nå½è§è§è§å£= å¸å±è§å£ï¼é¡µé¢æ æ»å¨æ¡ã\n\nå½æ¹åinitial-scaleæ¶ï¼\n\ninitial-scale = 0.5 \nè§è§è§å£å®½åº¦ = 320 / 0.5 = 640\nå¸å±è§å£å®½åº¦ = 320\nåå ä¸ºï¼è§è§è§å£ä¸è½å¤§äºå¸å±è§å£ï¼æä»¥æ­¤æ¶ï¼å°å¸å±è§å£çå®½åº¦æé«ç­äº640\næ»ç»ï¼è§è§è§å£ = å¸å±è§å£ = 640\n\ninitial-scale = 2 ã divå®½åº¦320ï¼é¡µé¢ææ»å¨æ¡ ã\nè§è§è§å£å®½åº¦ = 320 / 2 = 160\nå¸å±è§å£å®½åº¦ = 320\næ»ç»ï¼è§è§è§å£ < å¸å±è§å£ é¡µé¢åºç°äºæ»å¨æ¡ã\n\n\n\n# margin å 3 ä¸ªå¼\n\n> margin: 20px 40px 60px;ï¼ä¸20pxï¼å·¦ãå³40pxï¼ä¸60pxï¼\n\n\n# background-size\n\næ­£å¸¸ä¸ä¸ªç«å±çå°é¢å¾ï¼æä¹æªåä¸­é´é¨åä½ä¸ºå°é¢å¢ï¼\n\néç¨backgroundå±æ§è®¾ç½®\n\n <div class=\"imagecover\" \n      :style=\"{'background-image': 'url(' + CoverUrl ')'}\"></div>\n\n<style>\n\t.imagecover {              \n        width: 345px;\n        height: 194px;\n        overflow: hidden;\n        background-size: cover;\n        background-position: center;\n        background-repeat: no-repeat;\n    }\n</style>\n\n\n * background-sizeå±æ§\n\n> cover\n\nç¼©æ¾èæ¯å¾çä»¥å®å¨è¦çèæ¯åºï¼å¯è½èæ¯å¾çé¨åçä¸è§ãå contain å¼ç¸åï¼cover å¼å°½å¯è½å¤§çç¼©æ¾èæ¯å¾åå¹¶ä¿æå¾åçå®½é«æ¯ä¾ï¼å¾åä¸ä¼è¢«åæï¼ãè¯¥èæ¯å¾ä»¥å®çå¨é¨å®½æèé«è¦çæå¨å®¹å¨ãå½å®¹å¨åèæ¯å¾å¤§å°ä¸åæ¶ï¼èæ¯å¾ç å·¦/å³ æè ä¸/ä¸ é¨åä¼è¢«è£åªã\n\n> contain\n\nç¼©æ¾èæ¯å¾çä»¥å®å¨è£å¥èæ¯åºï¼å¯è½èæ¯åºé¨åç©ºç½ãcontain å°½å¯è½çç¼©æ¾èæ¯å¹¶ä¿æå¾åçå®½é«æ¯ä¾ï¼å¾åä¸ä¼è¢«åç¼©ï¼ãè¯¥èæ¯å¾ä¼å¡«åæå¨çå®¹å¨ãå½èæ¯å¾åå®¹å¨çå¤§å°çä¸åæ¶ï¼å®¹å¨çç©ºç½åºåï¼ä¸/ä¸æèå·¦/å³ï¼ä¼æ¾ç¤ºç± background-color è®¾ç½®çèæ¯é¢è²ã\n\n\n# æµè§å¨æ ç­¾é¡µéä¿¡\n\n\n# cookie + setInterval\n\n> æ³å¨ææçæ ç­¾é¡µä¸­å®ç°éä¿¡ï¼æä»¬å¿é¡»å°æ°æ®å­æ¾å°ä¸ä¸ªå¬å±çå­å¨ç©ºé´ï¼ææçæ ç­¾é¡µé½è½è·åå¹¶ä¸è¿è½è¿è¡ä¿®æ¹ï¼æä»¬ç¥éï¼cookieå¨ç¨æ·æææµè§å¨æ ç­¾é¡µä¸­é½æ¯å±äº«çï¼å æ­¤ï¼æä»¬å¯ä»¥å°è¯æéä¸­çæ°æ®å­æ¾å°cookieä¸­å»ï¼ç±äºæ´æ°cookieå¹¶ä¸è½è§¦åä»»ä½äºä»¶ï¼å æ­¤æä»¬éè¦éè¿å®æ¶å¨setIntervalæ¥ä¸»å¨çå¬cookieä¸­çå¼æ¯å¦æ¹åã\n> \n> ç¼ºç¹ï¼å®æ¶å¨å­å¨å»¶æ¶æåµ\n\n\n# localStorage\n\n> localStorageä¹æ¯æµè§å¨å¤ä¸ªé¡µé¢å±ç¨çå­å¨ç©ºé´ï¼èä¸localStorageå¨ä¸ä¸ªé¡µé¢ä¸­æ·»å ãä¿®æ¹æèå é¤æ¶ï¼é½ä¼å¨éå½åé¡µé¢ä¸­è¢«å¨è§¦åä¸ä¸ªstorageäºä»¶ï¼æä»¬éè¿å¨å¶ä»é¡µé¢ä¸­çå¬storageäºä»¶ï¼å³å¯æ¿å°storageæ´æ°ååçå¼\n\n\n# webworker\n\n> HTML5å¼å¥äºä¸ä¸ª**å·¥ä½çº¿ç¨ï¼webWorkerï¼**çæ¦å¿µãå®åè®¸å¼åäººåç¼åè½å¤é¿æ¶é´è¿è¡èä¸è¢«ç¨æ·æä¸­æ­çåå°ç¨åºï¼å»æ§è¡äºå¡æèé»è¾ï¼å¹¶åæ¶ä¿è¯é¡µé¢å¯¹ç¨æ·çååºã\n> \n> ç®èè¨ä¹ï¼å°±æ¯åè®¸JavaScriptåå»ºå¤ä¸ªçº¿ç¨ï¼ä½æ¯å­çº¿ç¨å®å¨åä¸»çº¿ç¨æ§å¶ï¼ä¸ä¸å¾æä½DOMã\n> \n> **ä»èï¼**å¯ä»¥ç¨webWorkeræ¥å¤çä¸äºæ¯è¾èæ¶çè®¡ç®ã\n> \n> webworkerä¹åä¸ºWorkeråSharedWorkerï¼æ®éçworkerå¯ä»¥ç´æ¥ä½¿ç¨new Worker()åå»ºï¼åªå¨å½åé¡µé¢ä¸­ä½¿ç¨ï¼èSharedWorkeréè¿åå­æä»¬ä¹è½çåºï¼æ¯å¯ä»¥å¨å¤ä¸ªæ ç­¾é¡µé¢ä¸­æ°æ®æ¯å±äº«çï¼\n\n\n# websocket\n\n> websocketä½ä¸ºå¨åå·¥éä¿¡ï¼èªç¶å¯ä»¥å®ç°å¤ä¸ªæ ç­¾é¡µä¹é´çéä¿¡ï¼WebSocketæ¯HTML5æ°å¢çåè®®ï¼å®çç®çæ¯å¨æµè§å¨åæå¡å¨ä¹é´å»ºç«ä¸ä¸ªä¸åéçååéä¿¡çééã\n\n\n# cookie, localStorage, sessionStorage\n\n> cookieæ¯ç½ç«ä¸ºäºæ ç¤ºç¨æ·èº«ä»½èå¨å­å¨ç¨æ·æ¬å°ç»ç«¯ï¼Client Sideï¼ä¸çæ°æ®ï¼éå¸¸ç»è¿å å¯ï¼ã\n> \n> cookieæ°æ®å§ç»å¨åæºçhttpè¯·æ±ä¸­æºå¸¦ï¼å³ä½¿ä¸éè¦ï¼ï¼è®°ä¼å¨æµè§å¨åæå¡å¨é´æ¥åä¼ éã\n> \n> sessionStorageålocalStorageä¸ä¼èªå¨ææ°æ®åç»æå¡å¨ï¼ä»å¨æ¬å°ä¿å­ã\n\nå­å¨å¤§å°ï¼\n\n> cookieæ°æ®å¤§å°ä¸è½è¶è¿4kã\n> \n> sessionStorageålocalStorage è½ç¶ä¹æå­å¨å¤§å°çéå¶ï¼ä½æ¯cookieå¤§å¾å¤ï¼å¯ä»¥è¾¾å°5Mææ´å¤§\n\næææ¶é´ï¼\n\n> localStorage å­å¨æä¹æ°æ®ï¼æµè§å¨å³é­åæ°æ®ä¸ä¸¢å¤±é¤éä¸»å¨å é¤æ°æ®ï¼\n> \n> sessionStorage æ°æ®å¨å½åæµè§å¨çªå£å³é­åèªå¨å é¤ã\n> \n> cookie è®¾ç½®çcookieè¿ææ¶é´ä¹åä¸ç´ææï¼å³ä½¿çªå£ææµè§å¨å³é­",normalizedContent:"# é¢è¯é¢ï¼ä¸ï¼\n\n * == å === çåºå«\n * è®²è®² js çç»§æ¿æ¹å¼\n * ä»ç»ä¸ä¸ç®­å¤´å½æ°\n * this çæå\n * ç®è¿°csséæ©å¨çä¼åçº§è§å\n * ç®è¿°å±ä¸­ä¸ä¸ªåç´ çæ¹æ³\n * æµè§å¨ç¼å­åwebpackç¼å­éç½®\n * metaæ ç­¾ä¸è§å£\n * margin å3ä¸ªå¼\n * background-size\n * æµè§å¨æ ç­¾é¡µéä¿¡\n * cookie, localstorage, sessionstorage\n\n\n# == å === çåºå«\n\n> == ä»£è¡¨ç¸åï¼ ===ä»£è¡¨ä¸¥æ ¼ç¸å\n> \n> å½è¿è¡åç­å·æ¯è¾æ¶åï¼ åæ£æ¥ä¸¤ä¸ªæä½æ°æ°æ®ç±»åï¼å¦æç¸åï¼ åè¿è¡===æ¯è¾ï¼ å¦æä¸åï¼ åæ¿æä¸ºä½ è¿è¡ä¸æ¬¡ç±»åè½¬æ¢ï¼ è½¬æ¢æç¸åç±»åååè¿è¡æ¯è¾ï¼ è===æ¯è¾æ¶ï¼ å¦æç±»åä¸åï¼ç´æ¥å°±æ¯false.\n> \n> null == undefined // trueï¼æ¯ä¸ç§è§å® null === undefined // false\n> \n> typeof null // object typeof undefined // undefined\n> \n> [1] == [1] // falseï¼å°åä¸å\n> \n> [1] == \"1\" //trueï¼éå¼ç±»åè½¬æ¢\n\n\n# è®²è®² js çç»§æ¿æ¹å¼\n\nï¼1ï¼ååé¾ç»§æ¿ï¼å­ç±»ååæ¯å¯¹ç¶ç±»çå®ä¾å\n\nfunction father(){}\nfunction son(){}\nson.prototype = new father()   //å®ä¾åå¯¹è±¡ä¼æåç¶ç±»çååï¼å¦å¾\n\n// æèä½¿ç¨ object.create()\nson.prototype = object.create(father.prototype);\n\nlet son = new son()\nson instanceof son // true\nson instanceof father // true\n\n// object.create å®ç°\nlet o = object.create(obj) // o.__proto__ === obj\nobject.create = function (obj) {\n    function f() {}\n    f.prototype = obj;\n    return new f();\n};\n\n\n\n\nç¼ºç¹ï¼\n\n1.ç¶ç±»çå±æå±æ§ä¼è¢«å­ç±»å®ä¾å±äº«\n\n2.åå»ºå­ç±»å¯¹è±¡æ æ³ä¼ åï¼å ä¸ºåªæson.prototype = new father()å¯ä»¥ä¼ ï¼ä½æ¯ä¼å¯¹ææå­ç±»ææã\n\nï¼2ï¼æé å½æ°ç»§æ¿\n\nfunction father(name,age){\n    this.name = name;\n    this.age = age;\n}\nfunction son(name,age,sex){\n    this.sex = sex;\n    father.call(this,name,age)\n}\nvar son1 = new son('å¼ ä¸','30','ç·')\n\n//ç®è¿°newä¸ä¸ªå¯¹è±¡çè¿ç¨\n//1.åé ä¸ä¸ªæ°çç©ºå¯¹è±¡\n//2.æ°å¯¹è±¡ç_proto_æåæé å½æ°çååå¯¹è±¡\n//3.æé å½æ°çthisæåæ­£å¨åå»ºçæ°å¯¹è±¡ï¼å¹¶æ§è¡æé å½æ°çä»£ç ï¼åæ°å¯¹è±¡ä¸­æ·»å å±æ§åæ¹æ³ã\n//4.è¿åæ°å¯¹è±¡å°å\n\n//è®²ä¸ä¸_proto_åprototypeçåºå«\n//1.__proto__æ¯ å¯¹è±¡å®ä¾ é½æçï¼è prototype æ¯å½æ°å¯¹è±¡ç¹æç\n//2.prototype ååå¯¹è±¡ æ constructor å±æ§ï¼åæå æé å½æ°\n//3.å¯¹è±¡å®ä¾ç __proto__ åé»è®¤æå å®ä»¬ç æé å½æ°ç prototype\n\n\nç¼ºç¹ï¼\n\n1.ç¶ç±»çååæ¹æ³ä¸ä¼è¢«å­ç±»ç»§æ¿ï¼å¦æå¨æ¾å°æé å½æ°ä¸­ï¼æ¯ä¸ªå­ç±»å®ä¾é½åç¬æ¥æä¸ä»½ï¼è¿åå¤ç¨æ§ã\n\n2.ä¸è½éè¿ son instanceof father\n\nï¼3ï¼ç»åç»§æ¿\n\nfunction father(name,age){\n    this.name = name;\n    this.age = age;\n}\nfunction son(name,age,sex){\n    this.sex = sex;\n    father.call(this,name,age)\n}\nson.prototype = new father()\n\n\nç¼ºç¹ï¼ç¶ç±»çæé å½æ°æ§è¡äºä¸¤é\n\nï¼4ï¼ååå¼ç»§æ¿ï¼å¯¹ååé¾ç»§æ¿çå°è£\n\nfunction inheritobject(o){\n    function f(){}\n    f.prototype = o;\n    return new f();\n}\nvar book = {\n    name:'js book'\n}\nvar newbook = inheritobject(book)\nvar newbook.name = 'ajax book'\n\n\nç¼ºç¹ï¼ä»å­å¨ååé¾ç»§æ¿çç¼ºç¹\n\nä¼ç¹ï¼fä¸­æ åå®¹ï¼å¼éæ¯è¾å°ã\n\nï¼5ï¼å¯çå¼ç»§æ¿ï¼å¯¹ååç»§æ¿çäºæ¬¡å°è£å¹¶è¿è¡äºæ©å±\n\nvar book = {\n    name:'js book'\n}\nfunction cretebook(obj){\n    var o = inheritobject(obj); //ä¸ä»æç¶ç±»ä¸­çå±æ§åæ¹æ³\n    //æ©å±æ°å¯¹è±¡\n    o.getname = function(){     //è¿æ·»å äºæ°çå±æ§åæ¹æ³\n        console.log(name)\n    }\n    return o\n}\n\n\nç¼ºç¹ï¼æ¹æ³å¨å½æ°ä¸­å®ä¹ï¼æ æ³å¾å°å¤ç¨\n\nï¼6ï¼å¯çç»åç»§æ¿ï¼æçæ³ï¼\n\nç»åç»§æ¿= ååé¾ç»§æ¿ + æé å½æ°ç»§æ¿\n\nå¯çç»åå¼ç»§æ¿=å¯çå¼ç»§æ¿+æé å½æ°ç»§æ¿\n\nfunction inheritobject(o){\n    function f(){}\n    f.prototype = o;\n    return new f();\n}\nfunction inheritprototype(subclass,superclass){\n    var p = inheritobject(superclass.prototype)\n    p.constructor = subclass\n    subclass.prototype = p\n}\n//ç¶ç±»\nfunction superclass(name){\n    this.name = name\n}\n//å­ç±»\nfunction subclass(name,time){\n    //æé å½æ°å¼ç»§æ¿\n    superclass.call(this,name)\n    this.time = time\n}\n//å¯çå¼ç»§æ¿ç¶ç±»åå\ninheritprototype(subclass,superclass)\n\n\n\n# ä»ç»ä¸ä¸ç®­å¤´å½æ°\n\nç®­å¤´å½æ°çå«ä¹\n\nx => x * x  // ç¸å½äº\nfunction (x) {\n    return x * x;\n}\n\n\n * è¯´ä¸ä¸ç®­å¤´å½æ°åæ®éå½æ°çåºå«\n\nï¼1ï¼ç®­å¤´å½æ°æ¯å¿åå½æ°ï¼ä¸è½ä½ä¸ºæé å½æ°ï¼ä¸è½ä½¿ç¨new ï¼2ï¼ç®­å¤´å½æ°ä¸ç»å®argumentsï¼åèä»£ä¹ç¨reståæ°â¦è§£å³\n\nlet b = (b)=>{\n\tconsole.log(arguments);\n}\nb(2,92,32,32); // uncaught referenceerror: arguments is not defined\n\nlet c = (...c) => {\n  console.log(c);\n}\nc(3,82,32,11323);  // [3, 82, 32, 11323]   \n\n\nï¼3ï¼ç®­å¤´å½æ°ä¸ç»å®thisï¼ä¼æè·å¶æå¨çä¸ä¸æçthiså¼ï¼ä½ä¸ºèªå·±çthiså¼ ï¼4ï¼ç®­å¤´å½æ°éè¿ call() æ apply() æ¹æ³è°ç¨ä¸ä¸ªå½æ°æ¶ï¼å¯¹ this å¹¶æ²¡æå½±åã ï¼5ï¼ç®­å¤´å½æ°æ²¡æååå±æ§\n\n\n# this çæå\n\n * æ®éå½æ°æåå½æ°è°ç¨èï¼æ§è¡çæ¶åæç¡®å®ï¼\n * ç®­å¤´å½æ°æåå½æ°æå¨çä½ç¨åï¼å¯¹è±¡ç{}åif(){}é½æä¸æä½ç¨åï¼\n\nconst obj = {\n    name:'objname',\n    say:function(){console.log(this.name)},\n    read:()=>{console.log(this.name)}\n}\nobj.say();  //objname     æåçæ¯è°ç¨è\nobj.read(); //undefined   æåçæ¯window.name\n\n\næä¹ç­ï¼\n\n 1. å¨å±ç¯å¢ä¸­çthisæåå¨å±å¯¹è±¡window\n 2. newç»å®ï¼å¹¶ä¸æé å½æ°æ²¡æè¿åå¶ä»å¯¹è±¡ï¼thisæåè¿ä¸ªæ°å¯¹è±¡\n 3. éè¿callï¼applyï¼bindï¼å¹¶ä¸ç¬¬ä¸ä¸ªåæ°å¼ä¸æ¯null,undefinedï¼é£ä¹thisç»å®çå°±æ¯æå®çå¯¹è±¡\n 4. æ®éå½æ°æåå½æ°è°ç¨èï¼æ§è¡çæ¶åæç¡®å®ï¼\n 5. ç®­å¤´å½æ°æåå½æ°æå¨çä½ç¨åï¼æ ¹æ®ä¸ä¸æç¡®å®\n\nå³äºç¬¬äºæ¡\n\nfunction fn()  \n{  \n    this.user = 'è¿½æ¢¦å­';  \n    return {};  \n}\nvar a = new fn;  \nconsole.log(a.user); //undefined\n\n\n\n# ç®è¿°csséæ©å¨çä¼åçº§è§å\n\n> ä¼åçº§ä¸åï¼é«ä¼åçº§å±æ§è¦çä½ä¼åçº§å±æ§ ä¼åçº§ç¸åï¼å®ä¹å¨åè¦çå®ä¹å¨å\n> \n> åè > idéæ©å¨ > ç±»éæ©å¨ > æ ç­¾éæ©å¨ï¼ä¼ªç±»>åç´ æ è®° !importantæé«ï¼ä½æ¯å¨ä½çæ¬ieæå¼å®¹æ§é®é¢\n> \n> å¦ælinkå¼å¥å¤é¨æ ·å¼è¡¨ï¼èæ¬èº«åæåé¨æ ·å¼è¡¨ï¼åè¡åæ ·å¼ä¾æ§ä¼åçº§æé«ï¼åé¨æ ·å¼è¡¨åå¤é¨æ ·å¼è¡¨çä¼åçº§åå®ä¹ååé¡ºåºæå³ï¼å®ä¹å¨åçä¼åçº§æ´é«ã\n\n\n# ç®è¿°å±ä¸­ä¸ä¸ªåç´ çæ¹æ³\n\nèèï¼æ°´å¹³è¿æ¯åç´ï¼åè¿æ¯è¡åï¼æ¯å¦éè¦ç¥éå®½é«ï¼å¼å®¹æ§\n\nï¼1ï¼æ°´å¹³ï¼\n\n1. margin: 0 auto; // å¯¹äº block çæ\n2. text-align: center; // å¯¹äº inline å inline-block åçæ\n\n\nï¼2ï¼åç´ï¼\n\n3. line-heightï¼xxpx\n4. vertical-alignï¼middle // è¿æä¸¤ä¸ªå¼text-top / text-bottomï¼å¸¸ç¨äºå¾çå¯¹é½æå­\n5. align-items: center; // flexå¸å±çå±ä¸­æ¹æ³\n\n\nï¼3ï¼æ°´å¹³ç«ç´åæ¶å±ä¸­\n\nabsoluteæ¹æ³ï¼\n\n 5. å·²ç¥å®½é«ï¼è´æ°margin\n\n.parent{\n    position: relative;\n}\n.child{\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 80px;\n    height: 60px;\n    margin-left: -40px;\n    margin-top: -30px;\n}\n\n\n 6. å·²ç¥å®½é«ï¼calc\n\n.parent{\n    position:relative;\n}\n.child{\n    position:absolute;\n    width: 80px;\n    height: 60px;\n    top:calc(50% - 30px);\n    left:calc(50% - 40px);\n}\n\n\n 7. éè¦è®¾å®å®½é«ï¼margin auto\n\n    .f14 .parent{\n        position: relative;\n    }\n    .f14 .child{\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        height: 50px;\n        width: 80px;\n        margin: auto;\n    }\n\n\n 8. ä¸éè¦è®¾å®å®½é«ï¼transform(css3,ie8åä»¥ä¸ä¸æ¯æ)\n\n    .f15 .parent{\n        position: relative;\n    }\n    .f15 .child{\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%,-50%);  èªèº«åç§»\n    }\n\n\n 9. flexå¸å±\n\n.main{\n     display: flex;\n     justify-content: center;\n     align-items: center;\n }\n\n\n 10. table-cell + inline-block\n\ncssæ°å¢çtableå±æ§ï¼å¯ä»¥è®©æä»¬ææ®éåç´ ï¼åä¸ºtableåç´ çç°å®ææï¼éè¿è¿ä¸ªç¹æ§ä¹å¯ä»¥å®ç°æ°´å¹³åç´å±ä¸­ï¼è¿ä¸ªå±æ§åtableæ ç­¾ä¸æ ·çå±ä¸­åçã\n\n.parent{\n    display: table-cell;\n    text-align: center;\n    vertical-align: middle;\n}\n.child{\n    display: inline-block;\n}\n\n\n\n# æµè§å¨ç¼å­åwebpackç¼å­éç½®\n\næä»¬ç»å¸¸è°è®ºçæµè§å¨ç¼å­ï¼å¼ºç¼å­ï¼ååç¼å­ï¼æçé½æ¯httpç¼å­\n\n * æµè§å¨ç¼å­: éç¹ç\n * hashãchunkhashåcontenthashåºå«\n * httpç¼å­ãæµè§å¨ç¼å­ãåºç¨ç¨åºç¼å­\n\n> å½æµè§å¨åæ¬¡è®¿é®ä¸ä¸ªå·²ç»è®¿é®è¿çèµæºæ¶ï¼å®ä¼è¿æ ·åï¼\n> \n>  1. ççæ¯å¦å½ä¸­å¼ºç¼å­ï¼å¦æå½ä¸­ï¼å°±ç´æ¥ä½¿ç¨ç¼å­äºã\n>  2. å¦ææ²¡æå½ä¸­å¼ºç¼å­ï¼å°±åè¯·æ±å°æå¡å¨æ£æ¥æ¯å¦å½ä¸­ååç¼å­ï¼etag, last-modifiedï¼ã\n>  3. å¦æå½ä¸­ååç¼å­ï¼æå¡å¨ä¼è¿å 304 åè¯æµè§å¨ä½¿ç¨æ¬å°ç¼å­ã\n>  4. å¦åï¼è¯·æ±ç½ç»è¿åææ°çèµæºã\n> \n> æµè§å¨ç¼å­çä½ç½®ï¼\n> \n>  1. service workerï¼ æ¯è¿è¡å¨æµè§å¨èåçç¬ç«çº¿ç¨ï¼å®å¯ä»¥è®©æä»¬èªç±æ§å¶ç¼å­åªäºæä»¶ãå¦ä½å¹éç¼å­ãå¦ä½è¯»åç¼å­ï¼å¹¶ä¸ç¼å­æ¯æç»­æ§çã\n>  2. memory cacheï¼ åå­ç¼å­ï¼è¯»ååå­ä¸­çæ°æ®è¯å®æ¯ç£çå¿«ãä½æ¯åå­ç¼å­è½ç¶è¯»åé«æï¼å¯æ¯ç¼å­æç»­æ§å¾ç­ï¼ä¼éçè¿ç¨çéæ¾èéæ¾ã ä¸æ¦æä»¬å³é­ tab é¡µé¢ï¼åå­ä¸­çç¼å­ä¹å°±è¢«éæ¾äºã\n>  3. disk cache: disk cache ä¹å°±æ¯å­å¨å¨ç¡¬çä¸­çç¼å­ï¼è¯»åéåº¦æ¢ç¹ï¼ä½æ¯ä»ä¹é½è½å­å¨å°ç£çä¸­ï¼æ¯ä¹ memory cache èå¨å®¹éåå­å¨æ¶ææ§ä¸ã\n\n> httpç¼å­çåºæ¬ç®çå°±æ¯ä½¿åºç¨æ§è¡çæ´å¿«ï¼æ´ææ©å±ï¼ä½æ¯httpç¼å­éå¸¸åªéç¨äºidempotent requestï¼å¯ä»¥çè§£ä¸ºæ¥è¯¢è¯·æ±ï¼ä¹å°±æ¯ä¸æ´æ°æå¡ç«¯æ°æ®çè¯·æ±ï¼ï¼è¿ä¹å°±å¯¼è´äºå¨httpçä¸çéï¼ä¸è¬é½æ¯å¯¹getè¯·æ±åç¼å­ï¼postè¯·æ±å¾å°æç¼å­ã\n> \n> getå¤ç¨æ¥ç´æ¥è·åæ°æ®ï¼ä¸ä¿®æ¹æ°æ®ï¼ä¸»è¦ç®çå°±æ¯databaseçsearchè¯­å¥çæè§ãç¨ç¼å­ï¼æä¸ªä»£çæå¡å¨çæ¦å¿µï¼çç®çå°±æ¯æ¥dbçéåº¦åå¿«ã\n> \n> poståæ¯åéæ°æ®å°æå¡å¨ç«¯å»å­å¨ãç±»ä¼¼dbéçupdate deleteåinsertè¯­å¥çæè§ãæ´æ°dbçææãæ°æ®å¿é¡»æ¾å¨æ°æ®åºï¼æä»¥ä¸è¬é½å¾å»è®¿é®æå¡å¨ç«¯ï¼èæå°éè¦ç¼å­ã\n\nç¼å­çå®ç°ï¼ å¼ºç¼å­åååç¼å­é½æ¯æ ¹æ® http header æ¥å®ç°çï¼å°±ç response ä¸­ cache-control çå¼ï¼å¦ææmax-age=xxxç§ï¼åå½ä¸­å¼ºç¼å­ãå¦æcache-controlçå¼æ¯no-cacheï¼è¯´ææ²¡å½ä¸­å¼ºç¼å­ï¼èµ°ååç¼å­ã\n\n\n# etagålast-modifiedåºå«\n\nlast-modifiedåå«äºä¸æ¬¡æ´æ¹ææ¡£çæ¥æãäºå®è¯æï¼å¨å°è¯ç¡®å®ææ¡£æ¯å¦å·²æ´æ¹æ¶ï¼last-modifiedæ¥æå¹¶ä¸å¾å¯é ã**ææ¶å¼åäººåä¼å¨ä¿®å¤æäºåå®¹åå°æææä»¶ä¸ä¼ å°æå¡å¨ï¼å³ä½¿åå®¹ä»å¨å­éä¸æ´æ¹ï¼ä¹ä¼éç½®æææä»¶çlast-modifiedæ¥æã**ä¸ºäºéåºè¿ç§æåµï¼å¤§å¤æ°æå¡å¨ä¹ä¼åéä¸ä¸ªetagã etagä»£è¡¨å®ä½æ è®°ï¼å¹¶ä¸æ¯å¯ä¸çæ è¯ç¬¦ï¼å¶ä»æ ¹æ®æä»¶çåå®¹èæ¹åãå¤§å¤æ°æå¡å¨å®éä¸ä½¿ç¨åsha256è¿æ ·çæ£åå½æ°æ¥è®¡ç®etagã\n\nlast-modifiedä¸etagç±»ä¼¼ãä¸è¿last-modifiedè¡¨ç¤ºååºèµæºå¨æå¡å¨æåä¿®æ¹æ¶é´èå·²ãä¸etagç¸æ¯ï¼ä¸è¶³ä¸ºï¼\n\n 1. last-modifiedæ æ³¨çæåä¿®æ¹åªè½ç²¾ç¡®å°ç§çº§ï¼å¦ææäºæä»¶å¨1ç§éä»¥åï¼è¢«ä¿®æ¹å¤æ¬¡çè¯ï¼å®å°ä¸è½åç¡®æ æ³¨æä»¶çä¿®æ¹æ¶é´ãå¦æ1såæä»¶è¢«ä¿®æ¹äºï¼ä½æ¯last-modifiedæ²¡åï¼æ­¤æ¶ä¸è½æ ¹æ®last-modifiedå¤æ­æä»¶æ¯å¦è¢«ä¿®æ¹è¿ã\n 2. å¦ææäºæä»¶ä¼è¢«å®æçæï¼ææ¶åå®¹å¹¶æ²¡æä»»ä½ååï¼ä½last-modifiedå´æ¹åäºï¼å¯¼è´æä»¶æ²¡æ³ä½¿ç¨ç¼å­ï¼\n 3. æå¯è½å­å¨æå¡å¨æ²¡æåç¡®è·åæä»¶ä¿®æ¹æ¶é´ï¼æèä¸ä»£çæå¡å¨æ¶é´ä¸ä¸è´ç­æå½¢ã\n\nç¶èï¼etagæ¯æå¡å¨èªå¨çææèç±å¼åèçæçå¯¹åºèµæºå¨æå¡å¨ç«¯çå¯ä¸æ è¯ç¬¦ï¼è½å¤æ´å åç¡®çæ§å¶ç¼å­ã\n\netagçæçå¸¸ç¨æ¹æ³åæ¬ä½¿ç¨èµæºåå®¹çæå²çªæ£åå½æ°çæçåå¸å¼ãæåä¿®æ¹æ¶é´æ³çæ£åæçè³ä»ä½¿ç¨èµæºççæ¬å·ã å³ etag å°±æ¯æå¡å¨çæçä¸ä¸ªæ è®°ï¼ç¨æ¥æ è¯è¿åå¼æ¯å¦æååï¼ä¸etagçä¼åçº§é«äºlast-modifiedã\n\n> æ»ç»å°±æ¯ä¸è¬æåµä¸last-modifiedå·²ç»è¶³å¤ï¼etagåªå¨ç¹å®æåµä¸ææ´æç¨ï¼åç«¯åå¸æä»¶ä¸å¯è½ä¸ç§åå¸å¥½å¤æ¬¡ï¼èä¸etagå¯è½ä¼ç»æå¡å¨å¸¦æ¥æ´å¤§çå¼éï¼æä»¥ä¸è¬å°±ç¨last-modifiedå°±è¡\n\n\n# cache control åæ°\n\npublic\n\n> ä»£è¡¨ http è¯·æ±è¿åçåå®¹æç»è¿çä»»ä½è·¯å¾å½ä¸­ï¼åæ¬ä¸­é´ä¸äºhttpä»£çæå¡å¨ä»¥åååºè¯·æ±çå®¢æ·ç«¯æµè§å¨ï¼ï¼é½å¯ä»¥å¯¹è¿ååå®¹è¿è¡ç¼å­æä½\n\nprivate\n\n> ä»£è¡¨åªæåèµ·è¯·æ±çæµè§å¨æå¯ä»¥è¿è¡ç¼å­\n\nno-cache\n\n> ä¸èµ°å¼ºç¼å­ï¼å¿é¡»åä¸æå¡å¨ç¡®è®¤è¿åçååºæ¯å¦è¢«æ´æ¹ï¼ç¶åæè½ä½¿ç¨è¯¥ååºæ¥æ»¡è¶³åç»­å¯¹åä¸ä¸ªç½åçè¯·æ±ãå æ­¤ï¼å¦æå­å¨åéçéªè¯ä»¤ç (etag)ï¼no-cache ä¼åèµ·å¾è¿éä¿¡æ¥éªè¯ç¼å­çååºï¼å¦æèµæºæªè¢«æ´æ¹ï¼å¯ä»¥é¿åä¸è½½ã\n\nno-store\n\n> ææåå®¹é½ä¸ä¼è¢«ç¼å­å°ç¼å­æ internet ä¸´æ¶æä»¶ä¸­\n\nmust-revalidation/proxy-revalidation\n\n> å¦æç¼å­çåå®¹å¤±æï¼è¯·æ±å¿é¡»åéå°æå¡å¨/ä»£çä»¥è¿è¡éæ°éªè¯\n\nmax-age=xxx\n\n> ç¼å­çåå®¹å°å¨ xxx ç§åå¤±æ, è¿ä¸ªéé¡¹åªå¨http 1.1å¯ç¨, å¹¶å¦æålast-modifiedä¸èµ·ä½¿ç¨æ¶, ä¼åçº§è¾é«\n\ns-maxage=xxx\n\n> åmax-ageä½ç¨ä¸æ ·ï¼åªå¨ä»£çæå¡å¨ä¸­çæï¼æ¯å¦cdnç¼å­ï¼ãæ¯å¦å½s-maxage=60æ¶ï¼å¨è¿60ç§ä¸­ï¼å³ä½¿æ´æ°äºcdnçåå®¹ï¼æµè§å¨ä¹ä¸ä¼è¿è¡è¯·æ±ãmax-ageç¨äºæ®éç¼å­ï¼ès-maxageç¨äºä»£çç¼å­ãs-maxageçä¼åçº§é«äºmax-ageãå¦æå­å¨s-maxageï¼åä¼è¦çæmax-ageåexpires headerã\n\nimmutable\n\n> immutableè¡¨ç¤ºååºåå®¹å°ä¸ç´ä¸ä¼æ¹åï¼å®åmax-ageæ¯å¯¹ç¼å­çå½å¨ææ§å¶çäºè¡¥æ§å±æ§ï¼å·ä½ä¸¾ä¾å¦ä¸ï¼cache-control: public, max-age=31536000, s-maxage=31536000, immutable\n\n\n# metaæ ç­¾ä¸è§å£\n\né¦åä»ç»3ä¸ªè§å£çæ¦å¿µ\n\n * **layout viewport(å¸å±è§å£)ï¼**å¨pcç«¯ä¸ï¼å¸å±è§å£ç­äºæµè§å¨çªå£çå®½åº¦ãèå¨ç§»å¨ç«¯ä¸ï¼ç±äºè¦ä½¿ä¸ºpcç«¯æµè§å¨è®¾è®¡çç½ç«è½å¤å®å¨æ¾ç¤ºå¨ç§»å¨ç«¯çå°å±å¹éï¼æ­¤æ¶çå¸å±è§å£ä¼è¿å¤§äºç§»å¨è®¾å¤çå±å¹ï¼å°±ä¼åºç°æ»å¨æ¡ãjsè·åå¸å±è§å£ï¼document.documentelement.clientwidth | document.body.clientwidthï¼\n * **visual viewport(è§è§è§å£)ï¼**ç¨æ·æ­£å¨çå°çç½é¡µçåºåãç¨æ·å¯ä»¥éè¿ç¼©æ¾æ¥æ¥çç½ç«çåå®¹ãå¦æç¨æ·ç¼©å°ç½ç«ï¼æä»¬çå°çç½ç«åºåå°åå¤§ï¼æ­¤æ¶è§è§è§å£ä¹åå¤§äºï¼åçï¼ç¨æ·æ¾å¤§ç½ç«ï¼æä»¬è½çå°çç½ç«åºåå°ç¼©å°ï¼æ­¤æ¶è§è§è§å£ä¹åå°äºãä¸ç®¡ç¨æ·å¦ä½ç¼©æ¾ï¼é½ä¸ä¼å½±åå°å¸å±è§å£çå®½åº¦ãjsè·åè§è§è§å£ï¼window.innerwidthï¼\n * **ideal viewport(çæ³è§å£)ï¼**å¸å±è§å£çä¸ä¸ªçæ³å°ºå¯¸ï¼åªæå½å¸å±è§å£çå°ºå¯¸ç­äºè®¾å¤å±å¹çå°ºå¯¸æ¶ï¼ææ¯çæ³è§å£ãjsè·åçæ³è§å£ï¼window.screen.widthï¼\n * é¡µé¢çæ»å¨æ¡åå³äºè§è§è§å£åå¸å±è§å£ï¼é¡µé¢åç´ å®½åº¦åå³äºå¸å±è§å£å¤§å°\n\næä»¬å¨å¼åæ¶ï¼å¸¸å¸¸å å¥è¿æ ·ä¸è¡ä»£ç \n\n<meta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\">\n\n\n * width=device-widthï¼è¿å¥ä»£ç çææå°±æ¯æå¸å±è§å£ = çæ³è§å£ã\n * initial-scaleæçæ¯ç¼©æ¾ç³»æ°ãå¶ä¸­æè¿æ ·çå¬å¼ï¼\n\nè§è§è§å£å®½åº¦ = çæ³è§å£å®½åº¦ / ç¼©æ¾ç³»æ° \n\næ¯å¦iphoneå å¥è¿æ®µä»£ç æ¶ï¼\nè§è§è§å£ = 320/1.0 = 320\nå¸å±è§å£ = 320\nå½è§è§è§å£= å¸å±è§å£ï¼é¡µé¢æ æ»å¨æ¡ã\n\nå½æ¹åinitial-scaleæ¶ï¼\n\ninitial-scale = 0.5 \nè§è§è§å£å®½åº¦ = 320 / 0.5 = 640\nå¸å±è§å£å®½åº¦ = 320\nåå ä¸ºï¼è§è§è§å£ä¸è½å¤§äºå¸å±è§å£ï¼æä»¥æ­¤æ¶ï¼å°å¸å±è§å£çå®½åº¦æé«ç­äº640\næ»ç»ï¼è§è§è§å£ = å¸å±è§å£ = 640\n\ninitial-scale = 2 ã divå®½åº¦320ï¼é¡µé¢ææ»å¨æ¡ ã\nè§è§è§å£å®½åº¦ = 320 / 2 = 160\nå¸å±è§å£å®½åº¦ = 320\næ»ç»ï¼è§è§è§å£ < å¸å±è§å£ é¡µé¢åºç°äºæ»å¨æ¡ã\n\n\n\n# margin å 3 ä¸ªå¼\n\n> margin: 20px 40px 60px;ï¼ä¸20pxï¼å·¦ãå³40pxï¼ä¸60pxï¼\n\n\n# background-size\n\næ­£å¸¸ä¸ä¸ªç«å±çå°é¢å¾ï¼æä¹æªåä¸­é´é¨åä½ä¸ºå°é¢å¢ï¼\n\néç¨backgroundå±æ§è®¾ç½®\n\n <div class=\"imagecover\" \n      :style=\"{'background-image': 'url(' + coverurl ')'}\"></div>\n\n<style>\n\t.imagecover {              \n        width: 345px;\n        height: 194px;\n        overflow: hidden;\n        background-size: cover;\n        background-position: center;\n        background-repeat: no-repeat;\n    }\n</style>\n\n\n * background-sizeå±æ§\n\n> cover\n\nç¼©æ¾èæ¯å¾çä»¥å®å¨è¦çèæ¯åºï¼å¯è½èæ¯å¾çé¨åçä¸è§ãå contain å¼ç¸åï¼cover å¼å°½å¯è½å¤§çç¼©æ¾èæ¯å¾åå¹¶ä¿æå¾åçå®½é«æ¯ä¾ï¼å¾åä¸ä¼è¢«åæï¼ãè¯¥èæ¯å¾ä»¥å®çå¨é¨å®½æèé«è¦çæå¨å®¹å¨ãå½å®¹å¨åèæ¯å¾å¤§å°ä¸åæ¶ï¼èæ¯å¾ç å·¦/å³ æè ä¸/ä¸ é¨åä¼è¢«è£åªã\n\n> contain\n\nç¼©æ¾èæ¯å¾çä»¥å®å¨è£å¥èæ¯åºï¼å¯è½èæ¯åºé¨åç©ºç½ãcontain å°½å¯è½çç¼©æ¾èæ¯å¹¶ä¿æå¾åçå®½é«æ¯ä¾ï¼å¾åä¸ä¼è¢«åç¼©ï¼ãè¯¥èæ¯å¾ä¼å¡«åæå¨çå®¹å¨ãå½èæ¯å¾åå®¹å¨çå¤§å°çä¸åæ¶ï¼å®¹å¨çç©ºç½åºåï¼ä¸/ä¸æèå·¦/å³ï¼ä¼æ¾ç¤ºç± background-color è®¾ç½®çèæ¯é¢è²ã\n\n\n# æµè§å¨æ ç­¾é¡µéä¿¡\n\n\n# cookie + setinterval\n\n> æ³å¨ææçæ ç­¾é¡µä¸­å®ç°éä¿¡ï¼æä»¬å¿é¡»å°æ°æ®å­æ¾å°ä¸ä¸ªå¬å±çå­å¨ç©ºé´ï¼ææçæ ç­¾é¡µé½è½è·åå¹¶ä¸è¿è½è¿è¡ä¿®æ¹ï¼æä»¬ç¥éï¼cookieå¨ç¨æ·æææµè§å¨æ ç­¾é¡µä¸­é½æ¯å±äº«çï¼å æ­¤ï¼æä»¬å¯ä»¥å°è¯æéä¸­çæ°æ®å­æ¾å°cookieä¸­å»ï¼ç±äºæ´æ°cookieå¹¶ä¸è½è§¦åä»»ä½äºä»¶ï¼å æ­¤æä»¬éè¦éè¿å®æ¶å¨setintervalæ¥ä¸»å¨çå¬cookieä¸­çå¼æ¯å¦æ¹åã\n> \n> ç¼ºç¹ï¼å®æ¶å¨å­å¨å»¶æ¶æåµ\n\n\n# localstorage\n\n> localstorageä¹æ¯æµè§å¨å¤ä¸ªé¡µé¢å±ç¨çå­å¨ç©ºé´ï¼èä¸localstorageå¨ä¸ä¸ªé¡µé¢ä¸­æ·»å ãä¿®æ¹æèå é¤æ¶ï¼é½ä¼å¨éå½åé¡µé¢ä¸­è¢«å¨è§¦åä¸ä¸ªstorageäºä»¶ï¼æä»¬éè¿å¨å¶ä»é¡µé¢ä¸­çå¬storageäºä»¶ï¼å³å¯æ¿å°storageæ´æ°ååçå¼\n\n\n# webworker\n\n> html5å¼å¥äºä¸ä¸ª**å·¥ä½çº¿ç¨ï¼webworkerï¼**çæ¦å¿µãå®åè®¸å¼åäººåç¼åè½å¤é¿æ¶é´è¿è¡èä¸è¢«ç¨æ·æä¸­æ­çåå°ç¨åºï¼å»æ§è¡äºå¡æèé»è¾ï¼å¹¶åæ¶ä¿è¯é¡µé¢å¯¹ç¨æ·çååºã\n> \n> ç®èè¨ä¹ï¼å°±æ¯åè®¸javascriptåå»ºå¤ä¸ªçº¿ç¨ï¼ä½æ¯å­çº¿ç¨å®å¨åä¸»çº¿ç¨æ§å¶ï¼ä¸ä¸å¾æä½domã\n> \n> **ä»èï¼**å¯ä»¥ç¨webworkeræ¥å¤çä¸äºæ¯è¾èæ¶çè®¡ç®ã\n> \n> webworkerä¹åä¸ºworkeråsharedworkerï¼æ®éçworkerå¯ä»¥ç´æ¥ä½¿ç¨new worker()åå»ºï¼åªå¨å½åé¡µé¢ä¸­ä½¿ç¨ï¼èsharedworkeréè¿åå­æä»¬ä¹è½çåºï¼æ¯å¯ä»¥å¨å¤ä¸ªæ ç­¾é¡µé¢ä¸­æ°æ®æ¯å±äº«çï¼\n\n\n# websocket\n\n> websocketä½ä¸ºå¨åå·¥éä¿¡ï¼èªç¶å¯ä»¥å®ç°å¤ä¸ªæ ç­¾é¡µä¹é´çéä¿¡ï¼websocketæ¯html5æ°å¢çåè®®ï¼å®çç®çæ¯å¨æµè§å¨åæå¡å¨ä¹é´å»ºç«ä¸ä¸ªä¸åéçååéä¿¡çééã\n\n\n# cookie, localstorage, sessionstorage\n\n> cookieæ¯ç½ç«ä¸ºäºæ ç¤ºç¨æ·èº«ä»½èå¨å­å¨ç¨æ·æ¬å°ç»ç«¯ï¼client sideï¼ä¸çæ°æ®ï¼éå¸¸ç»è¿å å¯ï¼ã\n> \n> cookieæ°æ®å§ç»å¨åæºçhttpè¯·æ±ä¸­æºå¸¦ï¼å³ä½¿ä¸éè¦ï¼ï¼è®°ä¼å¨æµè§å¨åæå¡å¨é´æ¥åä¼ éã\n> \n> sessionstorageålocalstorageä¸ä¼èªå¨ææ°æ®åç»æå¡å¨ï¼ä»å¨æ¬å°ä¿å­ã\n\nå­å¨å¤§å°ï¼\n\n> cookieæ°æ®å¤§å°ä¸è½è¶è¿4kã\n> \n> sessionstorageålocalstorage è½ç¶ä¹æå­å¨å¤§å°çéå¶ï¼ä½æ¯cookieå¤§å¾å¤ï¼å¯ä»¥è¾¾å°5mææ´å¤§\n\næææ¶é´ï¼\n\n> localstorage å­å¨æä¹æ°æ®ï¼æµè§å¨å³é­åæ°æ®ä¸ä¸¢å¤±é¤éä¸»å¨å é¤æ°æ®ï¼\n> \n> sessionstorage æ°æ®å¨å½åæµè§å¨çªå£å³é­åèªå¨å é¤ã\n> \n> cookie è®¾ç½®çcookieè¿ææ¶é´ä¹åä¸ç´ææï¼å³ä½¿çªå£ææµè§å¨å³é­",charsets:{cjk:!0}},{title:"æºåé¢",frontmatter:{title:"æºåé¢",date:"2018-08-03T09:21:01.000Z",categories:"é¢è¯"},regularPath:"/interview/iq.html",relativePath:"interview/iq.md",key:"v-1ef1807f",path:"/interview/iq.html",headers:[{level:2,title:"æç³å­",slug:"æç³å­",normalizedTitle:"æç³å­",charIndex:2},{level:2,title:"çº¢å¢¨æ°´èå¢¨æ°´",slug:"çº¢å¢¨æ°´èå¢¨æ°´",normalizedTitle:"çº¢å¢¨æ°´èå¢¨æ°´",charIndex:874},{level:2,title:"ç§°é",slug:"ç§°é",normalizedTitle:"ç§°é",charIndex:1120},{level:2,title:"åæ°´",slug:"åæ°´",normalizedTitle:"åæ°´",charIndex:1174}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"æç³å­ çº¢å¢¨æ°´èå¢¨æ°´ ç§°é åæ°´",content:"# æç³å­\n\n> AãBä»ä¸ä¸ªç³å­å éæç³å­ï¼äº¤æ¿è¿è¡ï¼ä¸ä¸ªäººå¯ä»¥æ1æè2é¢ï¼Aåèµ°ï¼å ç§å¯è½æ§ã\n\n// åç¬æ¥¼æ¢¯ç±»ä¼¼ f(n) = f(n-1) + f(n-2)\nfunction getClimbingWays(n) {\n    if (n < 1) return 0\n    if (n === 1) return 1\n    if (n === 2) return 2\n    let a = 1, b = 2, temp = 0\n    for (let i = 3; i <= n; i++) {\n        temp = a + b\n        a = b\n        b = temp\n    }\n    return temp\n}\n\n\n> æåæçç®è´ï¼16é¢çæåµä¸ï¼AãBæå¿èå¯è½ä¹(è°åæï¼æä¹æï¼è°å¿è)ã\n\nå·´ä»åå¥(Bash Game):\n\nåªæä¸å nä¸ªç©å,ä¸¤ä¸ªäººè½®æµä»è¿å ç©åä¸­åç©,è§å®æ¯æ¬¡è³å°åä¸ä¸ª,æå¤åmä¸ª.æåååèå¾è\n\n> ç»è®ºï¼è¥n%(m+1)=0ï¼ååæå¿è´¥ï¼å¦ååæå¿è\n\næ¾ç¶,å¦æn=m+1,é£ä¹ç±äºä¸æ¬¡æå¤åªè½åmä¸ª,æä»¥,æ è®ºååèæ¿èµ°å¤å°ä¸ª,ååèé½è½å¤ä¸æ¬¡æ¿èµ°å©ä½çç©å,åèåèã å¼å¥ä¸ä¸ªæ¦å¿µï¼å¥å¼å±å¿ãå½é¢å¯¹è¿ä¸ªå±å¿æ¶åä¼å¤±è´¥ã\n\nå¥å¼å±å¿çå¤å®ï¼\n\n> ä¸è¬çå¥å¼å±å¿æ¯n=(m+1)*iï¼å¶ä¸­iä¸ºèªç¶æ°ï¼å³n%(m+1)=0ï¼é¢å¯¹è¿ç§æåµæ è®ºææä¹åï¼å¯¹æ¹æ»å¯ä»¥å°å¶æ¢å¤ä¸ºn%(m+1)=0ï¼ä¸ç´å°n=(m+1)å±å¿ã\n\nç©å®¶çç­ç¥ï¼\n\n> å°±æ¯æå½åé¢å¯¹çéå¥å¼å±å¿åä¸ºå¥å¼å±å¿çç»å¯¹æ¹ãå¦æå½åçç³å­ä¸ªæ°ä¸º(m+1)*i+sï¼é£ä¹å°±å°sä¸ªç³å­åèµ°ï¼ä½¿å¶è¾¾å°å¥å¼å±å¿ã\n\nåå°åé¢å¦ææåæçç®è´\n\n> ç»è®ºï¼è¥n%(m+1)=1ï¼ååæå¿è´¥ãå³n%3==1ï¼ååæå¿è´¥\n> \n> æå©1ä¸ªå¿è¾\n> \n> å¦ææ4ä¸ªï¼æ è®ºææä¹åå¯¹æ¹é½å¯ä»¥è®©æå©1ä¸ª\n> \n> å¦ææ7ä¸ªï¼æ è®ºææä¹åå¯¹æ¹é½å¯ä»¥è®©æå©4ä¸ª\n> \n> å¦æ16ä¸ªçè¯ï¼åæå¿è´¥\n\n\n# çº¢å¢¨æ°´èå¢¨æ°´\n\n> ä¸ç¶çº¢å¢¨æ°´50å,ä¸ç¶èå¢¨æ°´50å,ä»çº¢å¢¨æ°´ä¸­åä¸åçº¢å¢¨æ°´æ¾å¥èå¢¨æ°´ä¸­ï¼ç¶ååä»èå¢¨æ°´ç¶ä¸­ååºä¸åæ··åå¢¨æ°´éè¿å°çº¢å¢¨æ°´ç¶ä¸­ï¼è¯·é®ç°å¨æ¯çº¢å¢¨æ°´ç¶çèå¢¨æ°´å¤è¿æ¯èå¢¨æ°´ç¶ä¸­ççº¢å¢¨æ°´å¤ï¼ä¸æ ·å¤\n\nç¬¬ä¸æ¬¡åï¼æ­¤æ¶èå¢¨æ°´ç¶ä¸­çæ··åå¢¨æ°´çæ¯ä¾ä¸º50:1ï¼å³æ··åå¢¨æ°´çåºä¸º1/51ççº¢å¢¨æ°´å50/51çèå¢¨æ°´ã\n\n1åæ··åå¢¨æ°´çåºä¸º1/51åççº¢å¢¨æ°´å 50/51åçèå¢¨æ°´ã\n\nç¬¬äºæ¬¡åï¼\n\nçº¢å¢¨æ°´ç¶ä¸­çèå¢¨æ°´ 50/51\nèå¢¨æ°´ç¶ä¸­ççº¢å¢¨æ°´ 1 - 1/51 = 50/51\n\n\n\n# ç§°é\n\n12ä¸ªçéé¢æä¸ä¸ªè´¨éä¸ååï¼ç»ä¸ä¸ªå¤©å¹³ï¼å¦æç¨æå°æ¯è¾æ¬¡æ°æ¾åºä¸ååççã\n\nç­æ¡ï¼ä¸æ¬¡\n\n\n# åæ°´\n\nå¦ä½ç¨ä¸ä¸ª3åï¼ä¸ä¸ª5åçæ°´æ¯ï¼ååºä¸æ¯4åçæ°´\n\n1. 3Lè£æ»¡åå¥5L\n2. 3Lç»§ç»­è£æ»¡åå¥5Lï¼3Léè¿å©1L\n3. 5Læ°´å¨ååºï¼1Låå¥5Læ¯\n4. 3Læ°´è£æ»¡åå¥5Læ¯å­\n",normalizedContent:"# æç³å­\n\n> aãbä»ä¸ä¸ªç³å­å éæç³å­ï¼äº¤æ¿è¿è¡ï¼ä¸ä¸ªäººå¯ä»¥æ1æè2é¢ï¼aåèµ°ï¼å ç§å¯è½æ§ã\n\n// åç¬æ¥¼æ¢¯ç±»ä¼¼ f(n) = f(n-1) + f(n-2)\nfunction getclimbingways(n) {\n    if (n < 1) return 0\n    if (n === 1) return 1\n    if (n === 2) return 2\n    let a = 1, b = 2, temp = 0\n    for (let i = 3; i <= n; i++) {\n        temp = a + b\n        a = b\n        b = temp\n    }\n    return temp\n}\n\n\n> æåæçç®è´ï¼16é¢çæåµä¸ï¼aãbæå¿èå¯è½ä¹(è°åæï¼æä¹æï¼è°å¿è)ã\n\nå·´ä»åå¥(bash game):\n\nåªæä¸å nä¸ªç©å,ä¸¤ä¸ªäººè½®æµä»è¿å ç©åä¸­åç©,è§å®æ¯æ¬¡è³å°åä¸ä¸ª,æå¤åmä¸ª.æåååèå¾è\n\n> ç»è®ºï¼è¥n%(m+1)=0ï¼ååæå¿è´¥ï¼å¦ååæå¿è\n\næ¾ç¶,å¦æn=m+1,é£ä¹ç±äºä¸æ¬¡æå¤åªè½åmä¸ª,æä»¥,æ è®ºååèæ¿èµ°å¤å°ä¸ª,ååèé½è½å¤ä¸æ¬¡æ¿èµ°å©ä½çç©å,åèåèã å¼å¥ä¸ä¸ªæ¦å¿µï¼å¥å¼å±å¿ãå½é¢å¯¹è¿ä¸ªå±å¿æ¶åä¼å¤±è´¥ã\n\nå¥å¼å±å¿çå¤å®ï¼\n\n> ä¸è¬çå¥å¼å±å¿æ¯n=(m+1)*iï¼å¶ä¸­iä¸ºèªç¶æ°ï¼å³n%(m+1)=0ï¼é¢å¯¹è¿ç§æåµæ è®ºææä¹åï¼å¯¹æ¹æ»å¯ä»¥å°å¶æ¢å¤ä¸ºn%(m+1)=0ï¼ä¸ç´å°n=(m+1)å±å¿ã\n\nç©å®¶çç­ç¥ï¼\n\n> å°±æ¯æå½åé¢å¯¹çéå¥å¼å±å¿åä¸ºå¥å¼å±å¿çç»å¯¹æ¹ãå¦æå½åçç³å­ä¸ªæ°ä¸º(m+1)*i+sï¼é£ä¹å°±å°sä¸ªç³å­åèµ°ï¼ä½¿å¶è¾¾å°å¥å¼å±å¿ã\n\nåå°åé¢å¦ææåæçç®è´\n\n> ç»è®ºï¼è¥n%(m+1)=1ï¼ååæå¿è´¥ãå³n%3==1ï¼ååæå¿è´¥\n> \n> æå©1ä¸ªå¿è¾\n> \n> å¦ææ4ä¸ªï¼æ è®ºææä¹åå¯¹æ¹é½å¯ä»¥è®©æå©1ä¸ª\n> \n> å¦ææ7ä¸ªï¼æ è®ºææä¹åå¯¹æ¹é½å¯ä»¥è®©æå©4ä¸ª\n> \n> å¦æ16ä¸ªçè¯ï¼åæå¿è´¥\n\n\n# çº¢å¢¨æ°´èå¢¨æ°´\n\n> ä¸ç¶çº¢å¢¨æ°´50å,ä¸ç¶èå¢¨æ°´50å,ä»çº¢å¢¨æ°´ä¸­åä¸åçº¢å¢¨æ°´æ¾å¥èå¢¨æ°´ä¸­ï¼ç¶ååä»èå¢¨æ°´ç¶ä¸­ååºä¸åæ··åå¢¨æ°´éè¿å°çº¢å¢¨æ°´ç¶ä¸­ï¼è¯·é®ç°å¨æ¯çº¢å¢¨æ°´ç¶çèå¢¨æ°´å¤è¿æ¯èå¢¨æ°´ç¶ä¸­ççº¢å¢¨æ°´å¤ï¼ä¸æ ·å¤\n\nç¬¬ä¸æ¬¡åï¼æ­¤æ¶èå¢¨æ°´ç¶ä¸­çæ··åå¢¨æ°´çæ¯ä¾ä¸º50:1ï¼å³æ··åå¢¨æ°´çåºä¸º1/51ççº¢å¢¨æ°´å50/51çèå¢¨æ°´ã\n\n1åæ··åå¢¨æ°´çåºä¸º1/51åççº¢å¢¨æ°´å 50/51åçèå¢¨æ°´ã\n\nç¬¬äºæ¬¡åï¼\n\nçº¢å¢¨æ°´ç¶ä¸­çèå¢¨æ°´ 50/51\nèå¢¨æ°´ç¶ä¸­ççº¢å¢¨æ°´ 1 - 1/51 = 50/51\n\n\n\n# ç§°é\n\n12ä¸ªçéé¢æä¸ä¸ªè´¨éä¸ååï¼ç»ä¸ä¸ªå¤©å¹³ï¼å¦æç¨æå°æ¯è¾æ¬¡æ°æ¾åºä¸ååççã\n\nç­æ¡ï¼ä¸æ¬¡\n\n\n# åæ°´\n\nå¦ä½ç¨ä¸ä¸ª3åï¼ä¸ä¸ª5åçæ°´æ¯ï¼ååºä¸æ¯4åçæ°´\n\n1. 3lè£æ»¡åå¥5l\n2. 3lç»§ç»­è£æ»¡åå¥5lï¼3léè¿å©1l\n3. 5læ°´å¨ååºï¼1låå¥5læ¯\n4. 3læ°´è£æ»¡åå¥5læ¯å­\n",charsets:{cjk:!0}},{title:"é¢è¯é¢ï¼å«ï¼",frontmatter:{title:"é¢è¯é¢ï¼å«ï¼",date:"2018-08-03T09:21:01.000Z",categories:"é¢è¯"},regularPath:"/interview/interview-8.html",relativePath:"interview/interview-8.md",key:"v-7e715702",path:"/interview/interview-8.html",headers:[{level:2,title:"v-show ä¸ v-if åºå«",slug:"v-show-ä¸-v-if-åºå«",normalizedTitle:"v-show ä¸ v-if åºå«",charIndex:13},{level:2,title:"å¨æç»å®classçæ¹æ³",slug:"å¨æç»å®classçæ¹æ³",normalizedTitle:"å¨æç»å®classçæ¹æ³",charIndex:33},{level:3,title:"ï¼1ï¼å¯¹è±¡è¯­æ³",slug:"_1-å¯¹è±¡è¯­æ³",normalizedTitle:"ï¼1ï¼å¯¹è±¡è¯­æ³",charIndex:932},{level:3,title:"ï¼2ï¼ç´æ¥è®¾ç½®ä¸ºå¯¹è±¡",slug:"_2-ç´æ¥è®¾ç½®ä¸ºå¯¹è±¡",normalizedTitle:"ï¼2ï¼ç´æ¥è®¾ç½®ä¸ºå¯¹è±¡",charIndex:1587},{level:3,title:"ï¼3ï¼æ°ç»æ¹æ³",slug:"_3-æ°ç»æ¹æ³",normalizedTitle:"ï¼3ï¼æ°ç»æ¹æ³",charIndex:1687},{level:3,title:"ï¼4ï¼ä¸åè¿ç®ç¬¦",slug:"_4-ä¸åè¿ç®ç¬¦",normalizedTitle:"ï¼4ï¼ä¸åè¿ç®ç¬¦",charIndex:1862},{level:3,title:"ï¼5ï¼computed",slug:"_5-computed",normalizedTitle:"ï¼5ï¼computed",charIndex:2003},{level:2,title:"v-model",slug:"v-model",normalizedTitle:"v-model",charIndex:49},{level:2,title:"Sassä¸Stylusçå¸¸è§è¯­æ³",slug:"sassä¸stylusçå¸¸è§è¯­æ³",normalizedTitle:"sassä¸stylusçå¸¸è§è¯­æ³",charIndex:66},{level:3,title:"Sassä¸Stylusçå¯¹æ¯",slug:"sassä¸stylusçå¯¹æ¯",normalizedTitle:"sassä¸stylusçå¯¹æ¯",charIndex:2434},{level:2,title:"å°ç¨åºçé¡µé¢æ ä¸çå½å¨æ",slug:"å°ç¨åºçé¡µé¢æ ä¸çå½å¨æ",normalizedTitle:"å°ç¨åºçé¡µé¢æ ä¸çå½å¨æ",charIndex:86},{level:3,title:"å°ç¨åºçé¡µé¢æ ",slug:"å°ç¨åºçé¡µé¢æ ",normalizedTitle:"å°ç¨åºçé¡µé¢æ ",charIndex:86},{level:3,title:"å°ç¨åºççå½å¨æ",slug:"å°ç¨åºççå½å¨æ",normalizedTitle:"å°ç¨åºççå½å¨æ",charIndex:4135},{level:3,title:"é¡µé¢ççå½å¨æ",slug:"é¡µé¢ççå½å¨æ",normalizedTitle:"é¡µé¢ççå½å¨æ",charIndex:4300},{level:2,title:"window.length",slug:"window-length",normalizedTitle:"window.length",charIndex:4565},{level:2,title:"package.jsonåpackage-lock.json",slug:"package-jsonåpackage-lock-json",normalizedTitle:"package.jsonåpackage-lock.json",charIndex:112},{level:3,title:"çæ¬å·åºå",slug:"çæ¬å·åºå",normalizedTitle:"çæ¬å·åºå",charIndex:5197},{level:2,title:"npm nrm yarn",slug:"npm-nrm-yarn",normalizedTitle:"npm nrm yarn",charIndex:146},{level:3,title:"å¸¸ç¨å½ä»¤",slug:"å¸¸ç¨å½ä»¤",normalizedTitle:"å¸¸ç¨å½ä»¤",charIndex:5422},{level:3,title:"npmä¸­ç --saveä¸--save-dev",slug:"npmä¸­ç-saveä¸-save-dev",normalizedTitle:"npmä¸­ç --saveä¸--save-dev",charIndex:5998},{level:2,title:"ä»ä¹æ¯node-sass",slug:"ä»ä¹æ¯node-sass",normalizedTitle:"ä»ä¹æ¯node-sass",charIndex:162},{level:2,title:"urlç¼ç ä¸è§£ç ",slug:"urlç¼ç ä¸è§£ç ",normalizedTitle:"urlç¼ç ä¸è§£ç ",charIndex:196}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"v-show ä¸ v-if åºå« å¨æç»å®classçæ¹æ³ ï¼1ï¼å¯¹è±¡è¯­æ³ ï¼2ï¼ç´æ¥è®¾ç½®ä¸ºå¯¹è±¡ ï¼3ï¼æ°ç»æ¹æ³ ï¼4ï¼ä¸åè¿ç®ç¬¦ ï¼5ï¼computed v-model Sassä¸Stylusçå¸¸è§è¯­æ³ Sassä¸Stylusçå¯¹æ¯ å°ç¨åºçé¡µé¢æ ä¸çå½å¨æ å°ç¨åºçé¡µé¢æ  å°ç¨åºççå½å¨æ é¡µé¢ççå½å¨æ window.length package.jsonåpackage-lock.json çæ¬å·åºå npm nrm yarn å¸¸ç¨å½ä»¤ npmä¸­ç --saveä¸--save-dev ä»ä¹æ¯node-sass urlç¼ç ä¸è§£ç ",content:'# é¢è¯é¢ï¼å«ï¼\n\n * v-show ä¸ v-if åºå«\n * å¨æç»å®classçæ¹æ³\n * v-modelæ¯æä¹å®ç°ç\n * Sassä¸Stylusçå¸¸è§è¯­æ³\n * å°ç¨åºçé¡µé¢æ ä¸çå½å¨æ\n * çä»£ç è¯´è¾åº\n * package.jsonåpackage-lock.json\n * npm nrm yarn\n * ä»ä¹æ¯node-sass\n * å°è£å°ç¨åºåäº«åæ°,è·ååæ°\n * urlç¼ç ä¸è§£ç \n\n\n# v-show ä¸ v-if åºå«\n\nç¸åç¹ï¼v-ifä¸v-showé½å¯ä»¥å¨ææ§å¶domåç´ æ¾ç¤ºéè\n\nä¸åç¹ï¼v-ifæ¾ç¤ºéèæ¯å°domåç´ æ´ä¸ªæ·»å æå é¤ï¼èv-showéèåæ¯ä¸ºè¯¥åç´ æ·»å display:noneï¼domåç´ è¿å¨ã\n\nvisibility:hiddenådisplay:noneçåºå«\n\nvisibility:hidden; å¯ä»¥éèæä¸ªåç´ ï¼ä½æ¯éèçåç´ ä»è¦å æ®ç©ºé´ï¼ä»è¦å½±åå¸å±ï¼ä¼è§¦åéç»\ndisplay:none; ä¸ä¼å æ®ç©ºé´ï¼ä¼è§¦ååæµ\n\n\n\t<div id=\'app\'>\n        <div v-if=\'isIf\'>ææ¯v-if</div>\n        <div v-show=\'isShow\'>ææ¯v-show</div>\n    </div>\n\n    <script src=\'vue.min.js\'><\/script>\n    <script>\n        let app = new Vue({\n            el:\'#app\',\n            data:{\n                isIf:true,\n                isShow:false\n            }\n        })\n    <\/script>\n\n\n**æ§è½æ¶èï¼**v-ifææ´é«çåæ¢æ¶èï¼v-showææ´é«çåå§æ¸²ææ¶èï¼\n\n**ä½¿ç¨åºæ¯ï¼**v-iféåè¿è¥æ¡ä»¶ä¸å¤§å¯è½æ¹åï¼v-showéåé¢ç¹åæ¢ã\n\nå¯¹äºç®¡çç³»ç»çæéåè¡¨çå±ç¤ºï¼è¿éå¯ä»¥ä½¿ç¨V-ifæ¥æ¸²æ,å¯¹äºåå°é¡µé¢çæ°æ®å±ç¤ºï¼è¿éæ¨èä½¿ç¨V-show\n\n\n# å¨æç»å®classçæ¹æ³\n\n\n# ï¼1ï¼å¯¹è±¡è¯­æ³\n\nç»v-bind:class è®¾ç½®ä¸ä¸ªå¯¹è±¡ï¼å¯ä»¥å¨æå°åæ¢classï¼å¦ä¸\n\n<div id="app">\n    <div :class="{\'active\':isActive}"></div>\n</div>\n\n<script>\n    var app = new Vue({\n        el:\'#app\',\n        data:{\n            isActive:true\n        }\n    })\n<\/script>\n\n\næç»æ¸²æç»æä¸ºï¼<div class="active">\\</div>\n\nv-bindå°±æ¯ç¨äºç»å®æ°æ®ååç´ å±æ§ç\n\n<div class="app">\n    <a v-bind:href="url">click me</a>\n</div>  \n\n<script>\n    var app = new Vue({\n        el:\'.app\',\n        data:{\n            url:"https://www.baidu.com",\n        }\n    });\n<\/script>\n\n\nå½ç¶å¯¹è±¡ä¸­ä¹å¯ä»¥ä¼ å¥å¤ä¸ªå±æ§\n\n<div id="app">\n    <div :class="{\'active\':isActive,\'error\':isError}"></div>\n</div>\n\n\x3c!--å½å¼åä¸ºtrueæ¶--\x3e\n<div class="active error"></div>\n\n\n\n# ï¼2ï¼ç´æ¥è®¾ç½®ä¸ºå¯¹è±¡\n\n<div :class="classObject"></div>\n\ndata: {\n  classObject: {\n    active: true,\n  }\n}\n\n\n\n# ï¼3ï¼æ°ç»æ¹æ³\n\n<div :class="[activeClass, errorClass]"></div>\n\n data:{\n      activeClass: "active",\n      errorClass: "disActive"\n },\n\næ¸²æä¸º\n<div class="active disActive"></div>\n\n\n\n# ï¼4ï¼ä¸åè¿ç®ç¬¦\n\n<div :class="[isActive?\'active\':\'disActive\']"></div>\n\n data:{\n      isActive: false,\n  },\n\næ¸²æä¸ºï¼\n<div class="disActive"></div>\n\n\n\n# ï¼5ï¼computed\n\n<div :class="classObject"></div>\n\n  data:{\n    isActive: true,\n  },\n  computed: {\n      classObject: {\n          active: this.isActive,\n\t  }\n  }\n\n\n\n# v-model\n\nv-modelæ¬è´¨ä¸æ¯ä¸ä¸ªè¯­æ³ç³ãï¼ååçï¼\n\nå¦ä¸ä»£ç <input v-model="test">æ¬è´¨ä¸æ¯<input :value="test" @input="test = $event.target.value">\n\n:value="test"è®¾ç½®inputåå§å¼ä¸ºtextå¼ï¼\n\n@input="test = $event.target.value,å½è¾å¥çå¼æ¹åæ¶ï¼testæ´æ°\n\n\n# Sassä¸Stylusçå¸¸è§è¯­æ³\n\nSass,Stylusé½æ¯cssé¢å¤çå¨ï¼é¤äºè¿ä¸¤ç§ä¹å¤è¿ælessç­ã\n\n\n# Sassä¸Stylusçå¯¹æ¯\n\nåèäºè¿ç¯æç« \n\n 1. åé\n\nsassåè®¸ä½¿ç¨åéï¼ææçåéä»¥$å¼å¤´ã\n\n$blue: #1875e7;\ndiv {\n   color: $blue\n }\n\n\nstylusä¹åè®¸ä½¿ç¨åéï¼åéåç$æ¯å¯éçï¼åéå¼å¯ä»¥æ¯è¡¨è¾¾å¼ã\n\ncolor = blue æè  $color = blue\ndiv\n    color: color\n\n\n 2. è®¡ç®å±æ§\n\nsassåè®¸å¨ä»£ç ä¸­ä½¿ç¨ç®å¼:\n\nbody {\n    margin: (14px/2);\n    top: 50px + 100px;\n    right: $var * 10%;\n  }\n\n\nstylusåæ ·ä¹æ¯æå¨ä»£ç ä¸­ä½¿ç¨ç®å¼:\n\n body\n    margin: (14px/2)\n    top: 50px + 100px\n    right: var * 10%\n\n\n 3. åµå¥\n\nsassåè®¸éæ©å¨åµå¥ãæ¯å¦ä¸é¢çcssä»£ç :\n\n  div h1 {\n    color: red\n  }\n  \n å¯ä»¥åæï¼\n \n  div {\n    h1{\n      color: red\n   }\n }\n\n\nstylusåæ ·æ¯æéæ©å¨åµå¥ï¼ä¸é¢çä»£ç å¯ä»¥åæ:\n\ndiv\n  h1\n    color: red\n\n\nsassä¹æ¯æå±æ§åµå¥,æ¯å¦border-colorå±æ§å¯ä»¥åæ:\n\n p{\n     border: {\n       color: red;\n     }\n }\n \n borderåé¢éè¦å ä¸åå·\n\n\nstylusæ²¡æè¿ä¸ªåè½\n\n 4. ç»§æ¿\n\nsassåè®¸ä¸ä¸ªéæ©å¨ï¼ç»§æ¿å¦ä¸ä¸ªéæ©å¨ãæ¯å¦ï¼ç°å¨class1ï¼\n\n.class1 {\n    border: 1px solid #ddd\n  }\n  \n  class2è¦ç»§æ¿class1ï¼å°±è¦ä½¿ç¨@extendå½ä»¤ã\n  \n  .class2 {\n    @extend .class1\n    font-size: 120%\n  }\n\n\nstylusçç»§æ¿æ¹å¼åsassåºæ¬ä¸è´ï¼ä½æä¸äºç¨å¾®çä¸åã\n\nstyluså®ç°ç»§æ¿:\n\n.class1\n    border: 1px solid #ddd\n    \n .class2\n    @extend .class1\n    font-size: 120%\n\n\nä¸¤èçåºå«ä¸»è¦å¨äº--sassä¸åè®¸@extendåµå¥éæ©å¨: å¦ä¸é¢çæ ·å¼:\n\ndiv\n  h1\n   color: red\n\n\nå¨sassä¸­ï¼å¦ææç§ä¸é¢è¿æ ·åå°±ä¼ç´æ¥ç¼è¯éè¯¯ã\n\n .div2 {\n    @extend div h1\n }\n\n\nèå¨stylusä¸­å´å¯ä»¥æåç¼è¯ï¼å ä¸ºstylusä¸­ï¼åªè¦éæ©å¨å¹éï¼ç»§æ¿å°±ä¼çæã\n\n.div2\n   @extend div h1\n\n\n\n# å°ç¨åºçé¡µé¢æ ä¸çå½å¨æ\n\n\n# å°ç¨åºçé¡µé¢æ \n\nè·¯ç±æ¹å¼                          é¡µé¢æ \nåå§å                           æ°é¡µé¢å¥æ \næå¼æ°é¡µé¢ï¼wx.navigateToï¼          æ°é¡µé¢å¥æ \né¡µé¢éå®åï¼wx.redirctToï¼           å½åé¡µé¢åºæ ï¼æ°é¡µé¢å¥æ \né¡µé¢è¿åï¼wx.navigateBackï¼         é¡µé¢ä¸æ­åºæ ï¼ç´å°ç®æ è¿åé¡µï¼æ°é¡µé¢å¥æ \nTabåæ¢ï¼wx.switchTabæåºé¨tabåæ¢ï¼   é¡µé¢å¨é¨åºæ ï¼åªçä¸æ°çTabé¡µé¢\néå¯å¨ï¼wx.relaunchï¼              é¡µé¢å¨é¨åºæ ï¼åªçä¸æ°çé¡µé¢\n\n * navigateTo, redirectTo åªè½æå¼é tabBar é¡µé¢ã\n * switchTab åªè½æå¼ tabBar é¡µé¢ã\n * reLaunch å¯ä»¥æå¼ä»»æé¡µé¢ã\n * é¡µé¢åºé¨ç tabBar ç±é¡µé¢å³å®ï¼å³åªè¦æ¯å®ä¹ä¸º tabBar çé¡µé¢ï¼åºé¨é½æ tabBarã\n * è°ç¨é¡µé¢è·¯ç±å¸¦çåæ°å¯ä»¥å¨ç®æ é¡µé¢çonLoadä¸­è·åã\n\n\n# å°ç¨åºççå½å¨æ\n\nonLaunch() {\n    console.log(\'onLaunchçå¬å°ç¨åºåå§å\');\n}\n\nonShow() {\n    console.log(\'onShowçå¬å°ç¨åºæ¾ç¤º\');\n}\n\nonHide() {\n    console.log(\'onLaunchçå¬å°ç¨åºéè\');\n}\n\n\n\n# é¡µé¢ççå½å¨æ\n\nonLoad(options) {\n    console.log(\'onLoadçå¬é¡µé¢å è½½\');\n}\n\nonReady() {\n    console.log(\'onReadyçå¬é¡µé¢åæ¬¡æ¸²æå®æ\');\n}\n\nonShow() {\n    console.log(\'onShowçå¬é¡µé¢æ¾ç¤º\');\n}\n\nonHide() {\n    console.log(\'onHideçå¬é¡µé¢éè\');\n}\n\nonUnload() {\n    console.log(\'onUnloadçå¬é¡µé¢å¸è½½\');\n}\n\n\n\n# window.length\n\nfunction foo(){\n    console.log(length)  //è¯æ³ä½ç¨åï¼æ¾fooå½æ°å¤é¢å®ä¹çlengthï¼å³window.length\n}\nfunction bar(){\n    var length = \'jin\'\n    foo()\n}\nbar()  //è¾åºçä¸ºwindow.lengthå³ä¸ºiframeçä¸ªæ°\n\n\n\n# package.jsonåpackage-lock.json\n\nnpmæè¿°æ¨¡åä¿¡æ¯çæä»¶å°±æ¯ package.json ï¼npm installä¼æ ¹æ®package.jsonå®è£ä¾èµ\n\næ¯æ¬¡æ§è¡å®npm installä¹åä¼å¯¹åºçæpackage-lockæä»¶ï¼è¯¥æä»¶è®°å½äºä¸ä¸æ¬¡å®è£çå·ä½ççæ¬å·ã\n\n> åæ¥ç package.json æä»¶åªè½éå®å¤§çæ¬ï¼ä¹å°±æ¯çæ¬å·çç¬¬ä¸ä½ï¼å¹¶ä¸è½éå®åé¢çå°çæ¬ï¼ä½ æ¯æ¬¡npm installé½æ¯æåçè¯¥å¤§çæ¬ä¸çææ°ççæ¬ï¼ä¸ºäºç¨³å®æ§èèæä»¬å ä¹æ¯ä¸æ¢éæåçº§ä¾èµåçï¼è¿å°å¯¼è´å¤åºæ¥å¾å¤å·¥ä½éï¼æµè¯/ééç­ï¼æä»¥package-lock.jsonæä»¶åºæ¥äºï¼å½ä½ æ¯æ¬¡å®è£ä¸ä¸ªä¾èµçæ¶åå°±éå®å¨ä½ å®è£çè¿ä¸ªçæ¬ã\n\nå½æä»¶ä¸­å­å¨package-lock.jsonæ¶ï¼æ§è¡npm installï¼nodeä»package.jsonæä»¶è¯»åæ¨¡ååç§°ï¼ä»package-lock.jsonæä»¶ä¸­è·åçæ¬å·ï¼ç¶åè¿è¡ä¸è½½æèæ´æ°ã\n\n\n# çæ¬å·åºå\n\n * ^16.8.0è¡¨ç¤ºå®è£16.x.xçææ°çæ¬ï¼å®è£æ¶ä¸æ¹åå¤§çæ¬å·ã\n * ~16.8.0è¡¨ç¤ºå®è£16.8.xçææ°çæ¬ï¼å®è£æ¶ä¸æ¹åå¤§çæ¬å·åæ¬¡è¦çæ¬å·ã\n * 16.8.0 è¡¨ç¤ºå®è£æå®ççæ¬å·ï¼ä¹å°±æ¯å®è£16.8.0çæ¬ã\n\n\n# npm nrm yarn\n\n * npm,nrm,yarnçå³ç³»\n\n> yarn æ¯ FaceBook å¼æºçä¸ä¸ªæ°çåç®¡çå¨ï¼ ånpmçä½ç¨æ¯ä¸æ ·çï¼ä½æ¯è§£å³äºä¸äºnpmççç¹ã\n\n\n# å¸¸ç¨å½ä»¤\n\nNPM                             YARN\nnpm init                        yarn init\nnpm install                     yarn install\nnpm install --no-package-lock   yarn install --no-package-lock\nnpm install xxx --save          yarn add xxx\nnpm install xxx --save-dev      yarn add xxx --dev\nnpm uninstall xxx --save        yarn remove xxx\nyarn add xx@version             npm install xx@vision\nyarn upgrade xx                 npm update xx\nyarn upgrade xx@version         npm update xx@vision\nyarn why xx                     -\nyarn config list                npm config list\n\n\n# npmä¸­ç --saveä¸--save-dev\n\n * i æ¯ install çç®å\n * -g æ¯å¨å±å®è£ï¼ä¸å¸¦ -g ä¼å®è£å¨ä¸ªäººæä»¶å¤¹\n * -S ä¸ --save çç®åï¼å®è£åä¿¡æ¯ä¼åå¥ dependencies ä¸­\n * -D ä¸ --save-dev çç®åï¼å®è£ååå¥ devDependencies ä¸­\n * dependencies çäº§é¶æ®µçä¾èµ,ä¹å°±æ¯é¡¹ç®è¿è¡æ¶çä¾èµ\n * devDependencies å¼åé¶æ®µçä¾èµï¼å°±æ¯æä»¬å¨å¼åè¿ç¨ä¸­éè¦çä¾èµï¼åªå¨å¼åé¶æ®µèµ·ä½ç¨ç\n\n----------------------------------------\n\næ¯å¦å ES6 ä»£ç ï¼éè¦ babel è½¬æ¢æ es5 ï¼è½¬æ¢å®æåï¼æä»¬åªéè¦è½¬æ¢åçä»£ç ï¼ä¸çº¿çæ¶åï¼ç´æ¥æè½¬æ¢åçä»£ç é¨ç½²å°çäº§ç¯å¢ï¼ä¸éè¦ bebal äºï¼çäº§ç¯å¢ä¸éè¦ãè¿å°±å¯ä»¥å®è£å° devDependencies ï¼åæ¯å¦è¯´ä»£ç æç¤ºå·¥å·ï¼ä¹å¯ä»¥å®è£å° devDependencies ã\n\nå¦æä½ ç¨äº Element-UIï¼ç±äºåå¸å°çäº§åè¿æ¯ä¾èµ Element-UIï¼è¿å°±å¯ä»¥å®è£å° dependencies ã\n\n\n# ä»ä¹æ¯node-sass\n\n> Node-sassæ¯ä¸ä¸ªåºï¼å®å°Node.jsç»å®å°LibSassï¼æµè¡æ ·å¼è¡¨é¢å¤çå¨SassçCçæ¬ï¼ãå®åè®¸ç¨æ·ä»¥ä»¤äººé¾ä»¥ç½®ä¿¡çéåº¦å°.scssæä»¶æ¬å°ç¼è¯ä¸ºcssï¼å¹¶éè¿è¿æ¥ä¸­é´ä»¶èªå¨ç¼è¯ã\n\n\n# urlç¼ç ä¸è§£ç \n\nç½é¡µURLåªè½ä½¿ç¨è±æãæ°å­ãè¿æä¸äºç¹å®çå­ç¬¦ï¼è¥åºç°ä¸­æå­ç¬¦å°±å¿é¡»ç»è¿ç¼ç è§£ç ï¼å¦åæå¡å¨æ æ³è¯å«\n\nç¼ç æ¹æ³æä¸ç§ï¼\n\næ¹æ³                                             è§å                                                          ç¹ç¹\nescapeï¼ç¼ç ï¼ unescape                            é¤äºASCIIå­æ¯ãæ°å­ãæ ç¹ç¬¦å·"@ * _ + - . /"ä»¥å¤ï¼å¯¹å¶ä»ææå­ç¬¦è¿è¡ç¼ç               ä¸æå¡\nencodeURIï¼ç¼ç ï¼ decodeURIï¼è§£ç ï¼                    é¤äºå¸¸è§çç¬¦å·ä»¥å¤ï¼å¯¹å¶ä»ä¸äºå¨ç½åä¸­æç¹æ®å«ä¹çç¬¦å·"; / ? : @ & = + $ , #"ï¼ä¹ä¸è¿è¡ç¼ç    encodeURI()æ¯Javascriptä¸­çæ­£ç¨æ¥å¯¹URLç¼ç çå½æ°ï¼å®çç¼äºå¯¹æ´ä¸ªURLè¿è¡ç¼ç \nencodeURIComponentï¼ç¼ç ï¼ decodeURIComponentè§£ç ï¼   å¨encodeURI()ä¸­ä¸è¢«ç¼ç çç¬¦å·"; / ? : @ & = + $ ,                    ä¸encodeURI()çåºå«æ¯ï¼å®ç¨äºå¯¹URLçç»æé¨åè¿è¡ä¸ªå«ç¼ç ï¼èä¸ç¨äºå¯¹æ´ä¸ªURLè¿è¡ç¼ç \n                                               #"ï¼å¨encodeURIComponent()ä¸­ç»ç»ä¼è¢«ç¼ç \n\nencodeURIComponent("http://www.test.com?a=åå")\n// "http%3A%2F%2Fwww.test.com%3Fa%3D%E5%93%88%E5%93%88"\n\nencodeURI("http://www.test.com?a=åå")\n// "http://www.test.com?a=%E5%93%88%E5%93%88"\n',normalizedContent:'# é¢è¯é¢ï¼å«ï¼\n\n * v-show ä¸ v-if åºå«\n * å¨æç»å®classçæ¹æ³\n * v-modelæ¯æä¹å®ç°ç\n * sassä¸stylusçå¸¸è§è¯­æ³\n * å°ç¨åºçé¡µé¢æ ä¸çå½å¨æ\n * çä»£ç è¯´è¾åº\n * package.jsonåpackage-lock.json\n * npm nrm yarn\n * ä»ä¹æ¯node-sass\n * å°è£å°ç¨åºåäº«åæ°,è·ååæ°\n * urlç¼ç ä¸è§£ç \n\n\n# v-show ä¸ v-if åºå«\n\nç¸åç¹ï¼v-ifä¸v-showé½å¯ä»¥å¨ææ§å¶domåç´ æ¾ç¤ºéè\n\nä¸åç¹ï¼v-ifæ¾ç¤ºéèæ¯å°domåç´ æ´ä¸ªæ·»å æå é¤ï¼èv-showéèåæ¯ä¸ºè¯¥åç´ æ·»å display:noneï¼domåç´ è¿å¨ã\n\nvisibility:hiddenådisplay:noneçåºå«\n\nvisibility:hidden; å¯ä»¥éèæä¸ªåç´ ï¼ä½æ¯éèçåç´ ä»è¦å æ®ç©ºé´ï¼ä»è¦å½±åå¸å±ï¼ä¼è§¦åéç»\ndisplay:none; ä¸ä¼å æ®ç©ºé´ï¼ä¼è§¦ååæµ\n\n\n\t<div id=\'app\'>\n        <div v-if=\'isif\'>ææ¯v-if</div>\n        <div v-show=\'isshow\'>ææ¯v-show</div>\n    </div>\n\n    <script src=\'vue.min.js\'><\/script>\n    <script>\n        let app = new vue({\n            el:\'#app\',\n            data:{\n                isif:true,\n                isshow:false\n            }\n        })\n    <\/script>\n\n\n**æ§è½æ¶èï¼**v-ifææ´é«çåæ¢æ¶èï¼v-showææ´é«çåå§æ¸²ææ¶èï¼\n\n**ä½¿ç¨åºæ¯ï¼**v-iféåè¿è¥æ¡ä»¶ä¸å¤§å¯è½æ¹åï¼v-showéåé¢ç¹åæ¢ã\n\nå¯¹äºç®¡çç³»ç»çæéåè¡¨çå±ç¤ºï¼è¿éå¯ä»¥ä½¿ç¨v-ifæ¥æ¸²æ,å¯¹äºåå°é¡µé¢çæ°æ®å±ç¤ºï¼è¿éæ¨èä½¿ç¨v-show\n\n\n# å¨æç»å®classçæ¹æ³\n\n\n# ï¼1ï¼å¯¹è±¡è¯­æ³\n\nç»v-bind:class è®¾ç½®ä¸ä¸ªå¯¹è±¡ï¼å¯ä»¥å¨æå°åæ¢classï¼å¦ä¸\n\n<div id="app">\n    <div :class="{\'active\':isactive}"></div>\n</div>\n\n<script>\n    var app = new vue({\n        el:\'#app\',\n        data:{\n            isactive:true\n        }\n    })\n<\/script>\n\n\næç»æ¸²æç»æä¸ºï¼<div class="active">\\</div>\n\nv-bindå°±æ¯ç¨äºç»å®æ°æ®ååç´ å±æ§ç\n\n<div class="app">\n    <a v-bind:href="url">click me</a>\n</div>  \n\n<script>\n    var app = new vue({\n        el:\'.app\',\n        data:{\n            url:"https://www.baidu.com",\n        }\n    });\n<\/script>\n\n\nå½ç¶å¯¹è±¡ä¸­ä¹å¯ä»¥ä¼ å¥å¤ä¸ªå±æ§\n\n<div id="app">\n    <div :class="{\'active\':isactive,\'error\':iserror}"></div>\n</div>\n\n\x3c!--å½å¼åä¸ºtrueæ¶--\x3e\n<div class="active error"></div>\n\n\n\n# ï¼2ï¼ç´æ¥è®¾ç½®ä¸ºå¯¹è±¡\n\n<div :class="classobject"></div>\n\ndata: {\n  classobject: {\n    active: true,\n  }\n}\n\n\n\n# ï¼3ï¼æ°ç»æ¹æ³\n\n<div :class="[activeclass, errorclass]"></div>\n\n data:{\n      activeclass: "active",\n      errorclass: "disactive"\n },\n\næ¸²æä¸º\n<div class="active disactive"></div>\n\n\n\n# ï¼4ï¼ä¸åè¿ç®ç¬¦\n\n<div :class="[isactive?\'active\':\'disactive\']"></div>\n\n data:{\n      isactive: false,\n  },\n\næ¸²æä¸ºï¼\n<div class="disactive"></div>\n\n\n\n# ï¼5ï¼computed\n\n<div :class="classobject"></div>\n\n  data:{\n    isactive: true,\n  },\n  computed: {\n      classobject: {\n          active: this.isactive,\n\t  }\n  }\n\n\n\n# v-model\n\nv-modelæ¬è´¨ä¸æ¯ä¸ä¸ªè¯­æ³ç³ãï¼ååçï¼\n\nå¦ä¸ä»£ç <input v-model="test">æ¬è´¨ä¸æ¯<input :value="test" @input="test = $event.target.value">\n\n:value="test"è®¾ç½®inputåå§å¼ä¸ºtextå¼ï¼\n\n@input="test = $event.target.value,å½è¾å¥çå¼æ¹åæ¶ï¼testæ´æ°\n\n\n# sassä¸stylusçå¸¸è§è¯­æ³\n\nsass,stylusé½æ¯cssé¢å¤çå¨ï¼é¤äºè¿ä¸¤ç§ä¹å¤è¿ælessç­ã\n\n\n# sassä¸stylusçå¯¹æ¯\n\nåèäºè¿ç¯æç« \n\n 1. åé\n\nsassåè®¸ä½¿ç¨åéï¼ææçåéä»¥$å¼å¤´ã\n\n$blue: #1875e7;\ndiv {\n   color: $blue\n }\n\n\nstylusä¹åè®¸ä½¿ç¨åéï¼åéåç$æ¯å¯éçï¼åéå¼å¯ä»¥æ¯è¡¨è¾¾å¼ã\n\ncolor = blue æè  $color = blue\ndiv\n    color: color\n\n\n 2. è®¡ç®å±æ§\n\nsassåè®¸å¨ä»£ç ä¸­ä½¿ç¨ç®å¼:\n\nbody {\n    margin: (14px/2);\n    top: 50px + 100px;\n    right: $var * 10%;\n  }\n\n\nstylusåæ ·ä¹æ¯æå¨ä»£ç ä¸­ä½¿ç¨ç®å¼:\n\n body\n    margin: (14px/2)\n    top: 50px + 100px\n    right: var * 10%\n\n\n 3. åµå¥\n\nsassåè®¸éæ©å¨åµå¥ãæ¯å¦ä¸é¢çcssä»£ç :\n\n  div h1 {\n    color: red\n  }\n  \n å¯ä»¥åæï¼\n \n  div {\n    h1{\n      color: red\n   }\n }\n\n\nstylusåæ ·æ¯æéæ©å¨åµå¥ï¼ä¸é¢çä»£ç å¯ä»¥åæ:\n\ndiv\n  h1\n    color: red\n\n\nsassä¹æ¯æå±æ§åµå¥,æ¯å¦border-colorå±æ§å¯ä»¥åæ:\n\n p{\n     border: {\n       color: red;\n     }\n }\n \n borderåé¢éè¦å ä¸åå·\n\n\nstylusæ²¡æè¿ä¸ªåè½\n\n 4. ç»§æ¿\n\nsassåè®¸ä¸ä¸ªéæ©å¨ï¼ç»§æ¿å¦ä¸ä¸ªéæ©å¨ãæ¯å¦ï¼ç°å¨class1ï¼\n\n.class1 {\n    border: 1px solid #ddd\n  }\n  \n  class2è¦ç»§æ¿class1ï¼å°±è¦ä½¿ç¨@extendå½ä»¤ã\n  \n  .class2 {\n    @extend .class1\n    font-size: 120%\n  }\n\n\nstylusçç»§æ¿æ¹å¼åsassåºæ¬ä¸è´ï¼ä½æä¸äºç¨å¾®çä¸åã\n\nstyluså®ç°ç»§æ¿:\n\n.class1\n    border: 1px solid #ddd\n    \n .class2\n    @extend .class1\n    font-size: 120%\n\n\nä¸¤èçåºå«ä¸»è¦å¨äº--sassä¸åè®¸@extendåµå¥éæ©å¨: å¦ä¸é¢çæ ·å¼:\n\ndiv\n  h1\n   color: red\n\n\nå¨sassä¸­ï¼å¦ææç§ä¸é¢è¿æ ·åå°±ä¼ç´æ¥ç¼è¯éè¯¯ã\n\n .div2 {\n    @extend div h1\n }\n\n\nèå¨stylusä¸­å´å¯ä»¥æåç¼è¯ï¼å ä¸ºstylusä¸­ï¼åªè¦éæ©å¨å¹éï¼ç»§æ¿å°±ä¼çæã\n\n.div2\n   @extend div h1\n\n\n\n# å°ç¨åºçé¡µé¢æ ä¸çå½å¨æ\n\n\n# å°ç¨åºçé¡µé¢æ \n\nè·¯ç±æ¹å¼                          é¡µé¢æ \nåå§å                           æ°é¡µé¢å¥æ \næå¼æ°é¡µé¢ï¼wx.navigatetoï¼          æ°é¡µé¢å¥æ \né¡µé¢éå®åï¼wx.redircttoï¼           å½åé¡µé¢åºæ ï¼æ°é¡µé¢å¥æ \né¡µé¢è¿åï¼wx.navigatebackï¼         é¡µé¢ä¸æ­åºæ ï¼ç´å°ç®æ è¿åé¡µï¼æ°é¡µé¢å¥æ \ntabåæ¢ï¼wx.switchtabæåºé¨tabåæ¢ï¼   é¡µé¢å¨é¨åºæ ï¼åªçä¸æ°çtabé¡µé¢\néå¯å¨ï¼wx.relaunchï¼              é¡µé¢å¨é¨åºæ ï¼åªçä¸æ°çé¡µé¢\n\n * navigateto, redirectto åªè½æå¼é tabbar é¡µé¢ã\n * switchtab åªè½æå¼ tabbar é¡µé¢ã\n * relaunch å¯ä»¥æå¼ä»»æé¡µé¢ã\n * é¡µé¢åºé¨ç tabbar ç±é¡µé¢å³å®ï¼å³åªè¦æ¯å®ä¹ä¸º tabbar çé¡µé¢ï¼åºé¨é½æ tabbarã\n * è°ç¨é¡µé¢è·¯ç±å¸¦çåæ°å¯ä»¥å¨ç®æ é¡µé¢çonloadä¸­è·åã\n\n\n# å°ç¨åºççå½å¨æ\n\nonlaunch() {\n    console.log(\'onlaunchçå¬å°ç¨åºåå§å\');\n}\n\nonshow() {\n    console.log(\'onshowçå¬å°ç¨åºæ¾ç¤º\');\n}\n\nonhide() {\n    console.log(\'onlaunchçå¬å°ç¨åºéè\');\n}\n\n\n\n# é¡µé¢ççå½å¨æ\n\nonload(options) {\n    console.log(\'onloadçå¬é¡µé¢å è½½\');\n}\n\nonready() {\n    console.log(\'onreadyçå¬é¡µé¢åæ¬¡æ¸²æå®æ\');\n}\n\nonshow() {\n    console.log(\'onshowçå¬é¡µé¢æ¾ç¤º\');\n}\n\nonhide() {\n    console.log(\'onhideçå¬é¡µé¢éè\');\n}\n\nonunload() {\n    console.log(\'onunloadçå¬é¡µé¢å¸è½½\');\n}\n\n\n\n# window.length\n\nfunction foo(){\n    console.log(length)  //è¯æ³ä½ç¨åï¼æ¾fooå½æ°å¤é¢å®ä¹çlengthï¼å³window.length\n}\nfunction bar(){\n    var length = \'jin\'\n    foo()\n}\nbar()  //è¾åºçä¸ºwindow.lengthå³ä¸ºiframeçä¸ªæ°\n\n\n\n# package.jsonåpackage-lock.json\n\nnpmæè¿°æ¨¡åä¿¡æ¯çæä»¶å°±æ¯ package.json ï¼npm installä¼æ ¹æ®package.jsonå®è£ä¾èµ\n\næ¯æ¬¡æ§è¡å®npm installä¹åä¼å¯¹åºçæpackage-lockæä»¶ï¼è¯¥æä»¶è®°å½äºä¸ä¸æ¬¡å®è£çå·ä½ççæ¬å·ã\n\n> åæ¥ç package.json æä»¶åªè½éå®å¤§çæ¬ï¼ä¹å°±æ¯çæ¬å·çç¬¬ä¸ä½ï¼å¹¶ä¸è½éå®åé¢çå°çæ¬ï¼ä½ æ¯æ¬¡npm installé½æ¯æåçè¯¥å¤§çæ¬ä¸çææ°ççæ¬ï¼ä¸ºäºç¨³å®æ§èèæä»¬å ä¹æ¯ä¸æ¢éæåçº§ä¾èµåçï¼è¿å°å¯¼è´å¤åºæ¥å¾å¤å·¥ä½éï¼æµè¯/ééç­ï¼æä»¥package-lock.jsonæä»¶åºæ¥äºï¼å½ä½ æ¯æ¬¡å®è£ä¸ä¸ªä¾èµçæ¶åå°±éå®å¨ä½ å®è£çè¿ä¸ªçæ¬ã\n\nå½æä»¶ä¸­å­å¨package-lock.jsonæ¶ï¼æ§è¡npm installï¼nodeä»package.jsonæä»¶è¯»åæ¨¡ååç§°ï¼ä»package-lock.jsonæä»¶ä¸­è·åçæ¬å·ï¼ç¶åè¿è¡ä¸è½½æèæ´æ°ã\n\n\n# çæ¬å·åºå\n\n * ^16.8.0è¡¨ç¤ºå®è£16.x.xçææ°çæ¬ï¼å®è£æ¶ä¸æ¹åå¤§çæ¬å·ã\n * ~16.8.0è¡¨ç¤ºå®è£16.8.xçææ°çæ¬ï¼å®è£æ¶ä¸æ¹åå¤§çæ¬å·åæ¬¡è¦çæ¬å·ã\n * 16.8.0 è¡¨ç¤ºå®è£æå®ççæ¬å·ï¼ä¹å°±æ¯å®è£16.8.0çæ¬ã\n\n\n# npm nrm yarn\n\n * npm,nrm,yarnçå³ç³»\n\n> yarn æ¯ facebook å¼æºçä¸ä¸ªæ°çåç®¡çå¨ï¼ ånpmçä½ç¨æ¯ä¸æ ·çï¼ä½æ¯è§£å³äºä¸äºnpmççç¹ã\n\n\n# å¸¸ç¨å½ä»¤\n\nnpm                             yarn\nnpm init                        yarn init\nnpm install                     yarn install\nnpm install --no-package-lock   yarn install --no-package-lock\nnpm install xxx --save          yarn add xxx\nnpm install xxx --save-dev      yarn add xxx --dev\nnpm uninstall xxx --save        yarn remove xxx\nyarn add xx@version             npm install xx@vision\nyarn upgrade xx                 npm update xx\nyarn upgrade xx@version         npm update xx@vision\nyarn why xx                     -\nyarn config list                npm config list\n\n\n# npmä¸­ç --saveä¸--save-dev\n\n * i æ¯ install çç®å\n * -g æ¯å¨å±å®è£ï¼ä¸å¸¦ -g ä¼å®è£å¨ä¸ªäººæä»¶å¤¹\n * -s ä¸ --save çç®åï¼å®è£åä¿¡æ¯ä¼åå¥ dependencies ä¸­\n * -d ä¸ --save-dev çç®åï¼å®è£ååå¥ devdependencies ä¸­\n * dependencies çäº§é¶æ®µçä¾èµ,ä¹å°±æ¯é¡¹ç®è¿è¡æ¶çä¾èµ\n * devdependencies å¼åé¶æ®µçä¾èµï¼å°±æ¯æä»¬å¨å¼åè¿ç¨ä¸­éè¦çä¾èµï¼åªå¨å¼åé¶æ®µèµ·ä½ç¨ç\n\n----------------------------------------\n\næ¯å¦å es6 ä»£ç ï¼éè¦ babel è½¬æ¢æ es5 ï¼è½¬æ¢å®æåï¼æä»¬åªéè¦è½¬æ¢åçä»£ç ï¼ä¸çº¿çæ¶åï¼ç´æ¥æè½¬æ¢åçä»£ç é¨ç½²å°çäº§ç¯å¢ï¼ä¸éè¦ bebal äºï¼çäº§ç¯å¢ä¸éè¦ãè¿å°±å¯ä»¥å®è£å° devdependencies ï¼åæ¯å¦è¯´ä»£ç æç¤ºå·¥å·ï¼ä¹å¯ä»¥å®è£å° devdependencies ã\n\nå¦æä½ ç¨äº element-uiï¼ç±äºåå¸å°çäº§åè¿æ¯ä¾èµ element-uiï¼è¿å°±å¯ä»¥å®è£å° dependencies ã\n\n\n# ä»ä¹æ¯node-sass\n\n> node-sassæ¯ä¸ä¸ªåºï¼å®å°node.jsç»å®å°libsassï¼æµè¡æ ·å¼è¡¨é¢å¤çå¨sassçcçæ¬ï¼ãå®åè®¸ç¨æ·ä»¥ä»¤äººé¾ä»¥ç½®ä¿¡çéåº¦å°.scssæä»¶æ¬å°ç¼è¯ä¸ºcssï¼å¹¶éè¿è¿æ¥ä¸­é´ä»¶èªå¨ç¼è¯ã\n\n\n# urlç¼ç ä¸è§£ç \n\nç½é¡µurlåªè½ä½¿ç¨è±æãæ°å­ãè¿æä¸äºç¹å®çå­ç¬¦ï¼è¥åºç°ä¸­æå­ç¬¦å°±å¿é¡»ç»è¿ç¼ç è§£ç ï¼å¦åæå¡å¨æ æ³è¯å«\n\nç¼ç æ¹æ³æä¸ç§ï¼\n\næ¹æ³                                             è§å                                                          ç¹ç¹\nescapeï¼ç¼ç ï¼ unescape                            é¤äºasciiå­æ¯ãæ°å­ãæ ç¹ç¬¦å·"@ * _ + - . /"ä»¥å¤ï¼å¯¹å¶ä»ææå­ç¬¦è¿è¡ç¼ç               ä¸æå¡\nencodeuriï¼ç¼ç ï¼ decodeuriï¼è§£ç ï¼                    é¤äºå¸¸è§çç¬¦å·ä»¥å¤ï¼å¯¹å¶ä»ä¸äºå¨ç½åä¸­æç¹æ®å«ä¹çç¬¦å·"; / ? : @ & = + $ , #"ï¼ä¹ä¸è¿è¡ç¼ç    encodeuri()æ¯javascriptä¸­çæ­£ç¨æ¥å¯¹urlç¼ç çå½æ°ï¼å®çç¼äºå¯¹æ´ä¸ªurlè¿è¡ç¼ç \nencodeuricomponentï¼ç¼ç ï¼ decodeuricomponentè§£ç ï¼   å¨encodeuri()ä¸­ä¸è¢«ç¼ç çç¬¦å·"; / ? : @ & = + $ ,                    ä¸encodeuri()çåºå«æ¯ï¼å®ç¨äºå¯¹urlçç»æé¨åè¿è¡ä¸ªå«ç¼ç ï¼èä¸ç¨äºå¯¹æ´ä¸ªurlè¿è¡ç¼ç \n                                               #"ï¼å¨encodeuricomponent()ä¸­ç»ç»ä¼è¢«ç¼ç \n\nencodeuricomponent("http://www.test.com?a=åå")\n// "http%3a%2f%2fwww.test.com%3fa%3d%e5%93%88%e5%93%88"\n\nencodeuri("http://www.test.com?a=åå")\n// "http://www.test.com?a=%e5%93%88%e5%93%88"\n',charsets:{cjk:!0}},{title:"htmlåºç¡",frontmatter:{},regularPath:"/interview/interview.html",relativePath:"interview/interview.md",key:"v-4cc5601f",path:"/interview/interview.html",headers:[{level:2,title:"htmlåºç¡",slug:"htmlåºç¡",normalizedTitle:"htmlåºç¡",charIndex:2},{level:2,title:"JavaScriptåºç¡",slug:"javascriptåºç¡",normalizedTitle:"javascriptåºç¡",charIndex:158},{level:2,title:"CSSåºç¡",slug:"cssåºç¡",normalizedTitle:"cssåºç¡",charIndex:4063},{level:2,title:"Vueç¸å³",slug:"vueç¸å³",normalizedTitle:"vueç¸å³",charIndex:5059},{level:2,title:"æµè§å¨ç¸å³",slug:"æµè§å¨ç¸å³",normalizedTitle:"æµè§å¨ç¸å³",charIndex:5865},{level:2,title:"ç½ç»ä¸åè®®ç¸å³",slug:"ç½ç»ä¸åè®®ç¸å³",normalizedTitle:"ç½ç»ä¸åè®®ç¸å³",charIndex:9454},{level:2,title:"åç«¯å®å¨",slug:"åç«¯å®å¨",normalizedTitle:"åç«¯å®å¨",charIndex:13872},{level:2,title:"è®¾è®¡æ¨¡å¼ï¼ç®åä»ç»ä¸ä¸",slug:"è®¾è®¡æ¨¡å¼-ç®åä»ç»ä¸ä¸",normalizedTitle:"è®¾è®¡æ¨¡å¼ï¼ç®åä»ç»ä¸ä¸",charIndex:15036},{level:2,title:"webpack",slug:"webpack",normalizedTitle:"webpack",charIndex:13653},{level:2,title:"git",slug:"git",normalizedTitle:"git",charIndex:15416},{level:2,title:"å¨ç»ç¸å³",slug:"å¨ç»ç¸å³",normalizedTitle:"å¨ç»ç¸å³",charIndex:15474},{level:2,title:"å¸¸ç¨æåä»£ç ",slug:"å¸¸ç¨æåä»£ç ",normalizedTitle:"å¸¸ç¨æåä»£ç ",charIndex:17680},{level:2,title:"è®¡ç®æºåºç¡",slug:"è®¡ç®æºåºç¡",normalizedTitle:"è®¡ç®æºåºç¡",charIndex:17893},{level:2,title:"é¡¹ç®",slug:"é¡¹ç®",normalizedTitle:"é¡¹ç®",charIndex:18331},{level:2,title:"æéç®¡ç",slug:"æéç®¡ç",normalizedTitle:"æéç®¡ç",charIndex:21932},{level:3,title:"RABC",slug:"rabc",normalizedTitle:"rabc",charIndex:21941},{level:3,title:"åç«¯æéæ§å¶æµç¨",slug:"åç«¯æéæ§å¶æµç¨",normalizedTitle:"åç«¯æéæ§å¶æµç¨",charIndex:22168},{level:2,title:"ä»0å°1çBç«¯å¹³å°é¡¹ç®",slug:"ä»0å°1çbç«¯å¹³å°é¡¹ç®",normalizedTitle:"ä»0å°1çbç«¯å¹³å°é¡¹ç®",charIndex:22776},{level:3,title:"ææ¯éå",slug:"ææ¯éå",normalizedTitle:"ææ¯éå",charIndex:22792},{level:3,title:"æ¶æè®¾è®¡",slug:"æ¶æè®¾è®¡",normalizedTitle:"æ¶æè®¾è®¡",charIndex:22912},{level:3,title:"å·¥ç¨å",slug:"å·¥ç¨å",normalizedTitle:"å·¥ç¨å",charIndex:20411},{level:3,title:"æ§è½ä¼å",slug:"æ§è½ä¼å",normalizedTitle:"æ§è½ä¼å",charIndex:5746}],lastUpdated:"9/2/2025, 11:24:35 AM",lastUpdatedTimestamp:1756783475e3,headersStr:"htmlåºç¡ JavaScriptåºç¡ CSSåºç¡ Vueç¸å³ æµè§å¨ç¸å³ ç½ç»ä¸åè®®ç¸å³ åç«¯å®å¨ è®¾è®¡æ¨¡å¼ï¼ç®åä»ç»ä¸ä¸ webpack git å¨ç»ç¸å³ å¸¸ç¨æåä»£ç  è®¡ç®æºåºç¡ é¡¹ç® æéç®¡ç RABC åç«¯æéæ§å¶æµç¨ ä»0å°1çBç«¯å¹³å°é¡¹ç® ææ¯éå æ¶æè®¾è®¡ å·¥ç¨å æ§è½ä¼å",content:"# htmlåºç¡\n\n * å¸¸è§è¡ååç´ ï¼<span>ã<a>ã<b>ã<strong>ã<img>ã<input>\n * å¸¸è§ååç´ ï¼<p>ã<h1>~<h6>ã<ul>ã<div>ã<form>\n * è¡ååç´ ãååç´ ãè¡åååç´ çåºå«ï¼input å img å±äºåªç§ï¼\n * html5å¸¸è§è¯­ä¹åæ ç­¾\n\n\n# JavaScriptåºç¡\n\n * é¢åå¯¹è±¡ä¸åºäºå¯¹è±¡\n   \n   * é¢åå¯¹è±¡çä¸ä¸ªåºæ¬ç¹å¾\n   * Jsæ¯åºäºå¯¹è±¡ä½å®ç°äºé¢åå¯¹è±¡ç¼ç¨(ç»§æ¿ï¼å½æ°éè½½)\n   * å¦ä½å®ç°ç»§æ¿ï¼ES5å­ç§ï¼ES6çclassï¼\n   * ååä¸ååé¾\n   * Objectä¸Functionååå³ç³»\n   * å¦ä½å®ç°å½æ°éè½½ï¼argumentsï¼\n   * Object.create, å¦ä½å®ç°\n\n * è¯­è¨çå¼ºç±»å/å¼±ç±»åï¼éæç±»å/å¨æç±»å\n\n * ä¸ºä»ä¹åçº¿ç¨ï¼webworker\n\n * æ°æ®ç±»åï¼å¿èï¼\n   \n   * 5ç§åºæ¬ + 1ç§å¤æ + 2ç§æ°å¢\n   * nullåundefinedåºå«\n     * nullæ¯ä¸åºè¯¥æå¼ï¼å¦ååé¾ç»ç¹\n     * undefinedæ¯ç¼ºå°å¼ï¼å¦åéå£°ææªèµå¼\n   * Symbolï¼å®ä¹å¯¹è±¡çå¯ä¸å±æ§å\n   * BigIntè§£å³çé®é¢ï¼ä»64ä½æµ®ç¹æ°è°èµ·\n   * å¼ç±»å / å¼ç¨ç±»åï¼å  / æ \n   * å¦ä½å®ä¹ä¸ä¸ªå¸¸éå¯¹è±¡Object.freeze\n\n * è¿è¡ç±»åå¤æ­çæ¹å¼åä¼ç¼ºç¹\n   \n   * typeofï¼type of nullï¼ typeof NaNï¼\n   * instanceofï¼æåå®ç°ï¼\n   * Object.prototype.toString.callï¼ä¸ºä»ä¹ç¨callï¼åé¨å±æ§[[Class]]ï¼\n   * å¤æ­æ°ç»çæ¹æ³è³å°è¯´åº5ç§\n\n * ç±»åè½¬æ¢\n   \n   * è¿ç®ç¬¦å¸¦æ¥çç±»åè½¬æ¢ï¼-ï¼*ï¼ãï¼%ä¼åè½¬æ°å¼ï¼+ é¤å¤\n   * +çè§åï¼[] + {}ï¼{} + []\n   * == å === çåºå«\n   * ä»ä¹æåµ a === a-1ï¼Number.MAX_SAFE_INTEGER\n   * ä»ä¹æåµ a == 1 && a == 2 && a == 3 ä¸ºtrue\n\n * ä½ç¨å\n   \n   * å¨å±ä½ç¨å\n   * å½æ°ä½ç¨å\n   * åçº§ä½ç¨å\n   * è¯æ³ä½ç¨å\n   * å¨æä½ç¨å\n\n * ä½ç¨åï¼é¾ï¼ä¸æ§è¡ä¸ä¸æï¼æ ï¼çåºå«\n\n * thisçæåï¼ç®­å¤´å½æ°ä¸æ®éå½æ°åºå«ä¸newä¸ä¸ªå¯¹è±¡çè¿ç¨\n\n * call / apply / bind\n\n * é­åï¼é«é¶å½æ°ï¼vueä¸­æä»ä¹åºç¨\n\n * æ·±æ·è´ä¸æµæ·è´\n   \n   * JSON.stringifyä¸­ä¸å®å¨çJSONå¼ï¼åæ°\n   * JSON.parse(JSON.stringify)çé®é¢\n   * æåä¸ä¸ªæ·±æ·è´æ¹æ³\n\n * å½æ°ä¸åéè§£æé¡ºåºï¼ä¸è¬ä¸ºçä»£ç è¯´ç»æï¼\n   \n   * åéæå\n   * å½æ°å£°æä¼åçº§æé«\n   * let / const ææ¶æ§æ­»åº\n\n * ES6\n   \n   * let / const ï¼åçº§ä½ç¨åï¼ä¸åè®¸éå¤å£°æï¼ææ¶æ§æ­»åºï¼\n   * ç®­å¤´å½æ°\n     * æ²¡ææé å½æ°ï¼æ²¡æåå(prototype)\n     * çç¥ return å³é®å­ï¼éå¼è¿å\n     * ç»§æ¿å½åä¸ä¸æç this å³é®å­\n     * æ²¡æargumentså±æ§ï¼å©ä½è¿ç®ç¬¦\n     * ç±äº ç®­å¤´å½æ°æ²¡æèªå·±çthisæéï¼éè¿ call() æ apply() æ¹æ³è°ç¨ä¸ä¸ªç®­å¤´å½æ°æ¶ï¼åªè½ä¼ éåæ°ï¼ä¸è½ç»å®thisï¼ï¼ä»ä»¬çç¬¬ä¸ä¸ªåæ°ä¼è¢«å¿½ç¥ã\n     * ç¨å¤ï¼ç®­å¤´å½æ°è¡¨è¾¾å¼å¯¹éæ¹æ³å½æ°æ¯æåéç\n   * æ©å±è¿ç®ç¬¦ï¼æé æ°ç»ï¼è§£ææ°ç»ï¼åæ°èµå¼ï¼\n   * å©ä½è¿ç®ç¬¦ï¼æ¥æ¶åæ°ï¼\n   * Map, WeakMap, Set, WeakSetï¼å¦ä½çè§£weak\n     * WeakMapåWeakSetçé®åªè½ä¸ºå¯¹è±¡\n     * å¼±å¼ç¨ï¼GCç®æ³ï¼åå­æ³æ¼çåºæ¯ï¼4ç§ï¼\n     * ä¸å¯è¿­ä»£ï¼åªæ¯æé¨åæ¹æ³\n   * æ¨¡æ¿å­ç¬¦ä¸²\n   * å¯¹è±¡å­é¢éçå¢å¼º\n   * Object.assign / Object.is / Object.keys / Object.values / Object.entries\n\n * ES2016~ES2022\n   \n   * includes\n   \n   * æ±å¹è¿ç®ç¬¦ï¼**ï¼\n   \n   * Object.values ä¸ Object.entries\n   \n   * Object.hasOwn()\n   \n   * String.prototype.padStart ä¸ Sting.prototype.padEnd\n   \n   * async/await\n   \n   * å¼æ­¥è¿­ä»£ for await...of\n   \n   * é¡¶å± await\n   \n   * Promise.prototype.finally\n   \n   * Promise.allSettled\n   \n   * Promise.any\n   \n   * flat ä¸ flatMap\n   \n   * ç©ºå¼åå¹¶è¿ç®ç¬¦\n   \n   * å¯éé¾æä½ç¬¦\n   \n   * Dynamic import\n   \n   * BigInt\n   \n   * æ°å¼åéç¬¦\n   \n   * at() æ¹æ³\n   \n   * class ç§æå­æ®µ\n\n * æ°ç»æ¹æ³ï¼forEach/find/map/filer/reduce/every/some\n\n * Array.fromï¼å¦ä½åå§åä¸ä¸ªäºç»´æ°ç»\n\n * promise\n\n * æåpromise.allåpromise.race\n\n * promise.resolveåç§åæ°\n\n * reject å catch çåºå«\n   \n   * reject æ¯ç¨æ¥æåºå¼å¸¸ï¼catch æ¯ç¨æ¥å¤çå¼å¸¸\n   * reject æ¯ Promise çæ¹æ³ï¼è catch æ¯ Promise å®ä¾çæ¹æ³\n   * rejectåçä¸è¥¿ï¼ä¸å®ä¼è¿å¥thenä¸­çç¬¬äºä¸ªåè°ï¼å¦æthenä¸­æ²¡æåç¬¬äºä¸ªåè°ï¼åè¿å¥catch\n   * ç½ç»å¼å¸¸ï¼æ¯å¦æ­ç½ï¼ï¼ä¼ç´æ¥è¿å¥catchèä¸ä¼è¿å¥thençç¬¬äºä¸ªåè°\n\n * Generator\n\n * async / await ï¼Generator + èªå¨æ§è¡å¨ï¼\n   \n   * æ´å¥½çè¯­ä¹\n   \n   > async å await, æ¯èµ·æå·åyieldï¼è¯­ä¹æ´å æ¸æ¥ï¼asyncè¡¨ç¤ºå½æ°éé¢æå¼æ­¥æä½ï¼awaitè¡¨ç¤ºç´§è·å¨åé¢çè¡¨è¾¾å¼éè¦ç­å¾ç»æã\n   \n   * æ´å¹¿çéç¨æ§\n   \n   > coæ¨¡åçº¦å®ï¼yieldå½ä»¤åé¢åªè½æ¯Thunkå½æ°æèPromiseå¯¹è±¡ï¼ èasyncå½æ°çawaitåé¢ï¼å¯ä»¥æ¯Promiseååå§ç±»åå¼(æ°å¼ãå­ç¬¦ä¸²åå¸å°å¼ï¼ä½è¿æ¶ä¼èªå¨è½¬æç«å³ resolved ç Promise å¯¹è±¡, æ¥çspawnå½æ°ä¸­Promise.resolve(next.value))\n   \n   * è¿åå¼æ¯Promise\n   \n   > æ¯Generatorå½æ°çè¿åå¼æ¯Iteratorå¯¹è±¡æ¹ä¾¿ï¼å¯ä»¥ä½¿ç¨thenæ¹æ³æå®ä¸ä¸æ­¥æä½\n\n * å®ä»»å¡/å¾®ä»»å¡/äºä»¶å¾ªç¯\n   \n   * æµè§å¨ä¸nodeäºä»¶å¾ªç¯åºå«ï¼libuvï¼cè¯­è¨ï¼\n\n * å¾®ä»»å¡æåªäºï¼MutationObserveræ¯ä»ä¹\n   \n   * é¢è¯é¢çä»£ç è¯´ç»æ\n\n * for in ä¸ for of\n   \n   * for inï¼å­ç¬¦ä¸²ï¼/ Object.keys / Object.getOwnPropertyNames åºå«\n   * æ§è½ for...i > forEach > for...of > map > for...in\n   * for in ä¸ºä»ä¹æçä½ï¼è¿æ¯å ä¸º for...in æä¸äºç¹æ®çè¦æ±ï¼åæ¬ï¼\n     * éåææå±æ§ï¼ä¸ä»æ¯ own properties ä¹åæ¬ååé¾ä¸çææå±æ§ã\n     * å¿½ç¥ enumerable ä¸º false çå±æ§ã\n     * å¿é¡»æç¹å®é¡ºåºéåï¼åéåæææ°å­é®ï¼ç¶åæç§åå»ºå±æ§çé¡ºåºéåå©ä¸çã\n\n * for of ï¼è¿­ä»£å¨ï¼Generator\n\n * äºä»¶åæ³¡ / äºä»¶æè· / äºä»¶å§æ\n   \n   * DOM äºä»¶æµ\n   * target å currentTarget çåºå«\n     * targetè·åæ¯è§¦åäºä»¶çæºå¯¹è±¡\n     * currentTargetè·åçäºä»¶ç»å®çå¯¹è±¡\n\n * å½æ°å¼ç¼ç¨\n   \n   * é«é¶å½æ°\n   * çº¯å½æ° / è®°å¿å½æ°\n   * å½æ°æ¯éå / å½æ°ç»å\n   * å°¾éå½ / å°¾è°ç¨\n   * å¸¸è§æ°ç»æ¹æ³ï¼åªäºæ¯é«é¶å½æ°ï¼åªäºä¼æ¹åæ°ç»æ¬èº«\n     * push,pop,splice,unshift,shift,reverse\n     * slice,concat,forEach,map,filter,some,every\n     * ['1', '2', '3'].map(parseInt)çç»æ\n\n * setTimeoutè¯¯å·®\n\n * babel\n   \n   * ä¸ºä»ä¹ä½¿ç¨babel\n\n * babelåçï¼è¯æ³åæçætokensæµï¼è¯­æ³åæè½¬æ¢æASTï¼ASTèç¹éåè¿è¡æ·»å æ´æ°ç§»é¤ï¼çæES5å­ç¬¦ä¸²ï¼\n   \n   * babelæä¹å¤çESMæ¨¡ååï¼ç¼è¯æCommonJSé£æ ¼ï¼\n\n\n# CSSåºç¡\n\n * çæ¨¡å\n\n * å±ä¸­ä¸ä¸ªåç´ çæ¹æ³\n   \n   * æ°´å¹³2ç§ï¼åç´3ç§ï¼åç´æ°´å¹³5ç§\n   * åè¡ææ¬æ°´å¹³åç´å±ä¸­ï¼text-align + line-heightï¼ï¼å¤è¡ææ¬æ°´å¹³åç´å±ä¸­ï¼table-cellï¼\n\n * BFCå¸å±è§åï¼å¦ä½åå»ºBFC\n\n * Grid ç½æ ¼å¸å±ï¼å®ç°ä¸ä¸ªå®½åº¦1ï¼2ï¼3çç½æ ¼å¸å±\n\n * ä¸¤æ å¸å±ï¼å³ä¾§èªéåºï¼\n   \n   * æµ®å¨ï¼è§¦åBFC\n   * flexå¸å±ï¼å·¦ä¾§åºå®å®½åº¦ï¼å³ä¾§flex: 1\n   * å·¦ä¾§æµ®å¨ï¼å³ä¾§è®¾ç½®å·¦è¾¹è·\n\n * ä¸æ å¸å±ï¼ä¸­é´èªéåºï¼\n   \n   * å·¦å³ä¾§æµ®å¨ï¼ä¸­é´è®¾ç½®å·¦å³è¾¹è·ï¼å·¦å³é«åº¦400ï¼ä¸­é´é«åº¦300ï¼bodyé«åº¦ï¼å¦ä½æ¸é¤æµ®å¨ï¼\n   * å·¦å³ä¾§ç»å¯¹å®ä½ï¼ä¸­é´è®¾ç½®å·¦å³è¾¹è·\n   * ä¸­é´ flex: 1\n   * grid å¸å±ï¼grid-template-columns: 200px auto 200px;\n   * å£æ¯å¸å±ä¸åé£ç¿¼å¸å±ï¼margin-left: -100%;ç¸å¯¹äºç¶åç´ å®½åº¦çç¾åæ¯\n\n * Flex å¸å±ï¼ä¸ä¸ªå¼çå«ä¹\n\n * marginåä¸¤ä¸ªå¼ï¼ä¸ä¸ªå¼ï¼åä¸ªå¼\n\n * csséæ©å¨çä¼åçº§è§å\n\n * è±ç¦»ææ¡£æµ / å®ä½ / æµ®å¨çåºå«\n\n * æ¸é¤æµ®å¨çæ¹æ³\n\n * link ä¸ @import çåºå«\n\n * jsæ§è¡ä¼é»å¡DOMæ çè§£æåæ¸²æï¼é£ä¹csså è½½ä¼é»å¡DOMæ çè§£æåæ¸²æåï¼cssä¼é»å¡jså\n\n * DOMContentLoaded å window.onload åºå«\n\n * ç»ä¸ä¸ªä¸è§å½¢ / æå½¢\n\n * éèä¸ä¸ªåç´ çæ¹æ³\n\n * é»è¾åç´ ä¸ç©çåç´ \n\n * DPR\n\n * em / rem / rpx / vw / vh\n\n * rpxå¦ä½è®¡ç®çï¼iphone6ä¸750rpx = 375pxï¼é»è¾åç´ ï¼iphone5ä¸750rpx = 320pxï¼é»è¾åç´ ï¼\n\n * ç§»å¨ç«¯ 1px é®é¢\n\n * display / position / transformæåªäºå±æ§\n\n * å¦ä½å®ç°å¾çæå è½½\n   \n   * çå¬äºä»¶å¨åªä¸ªé¶æ®µåï¼ï¼mountedï¼çå®DOMæè½½å®æ¯ï¼beforeDestroyéæ¯ï¼\n\n * ä¼ªç±»åä¼ªåç´ \n\n * cssç¡¬ä»¶å é\n\n * åªäºcsså±æ§ä¼è§¦ååæµä¸éç»\n\n\n# Vueç¸å³\n\n * Vue ååºå¼åç 2.x\n   * åå¸è®¢éæ¨¡å¼ï¼æåï¼\n   * è§å¯èæ¨¡å¼ï¼æåï¼\n   * Vue å®ä¾åå§åè¿ç¨\n   * ç»ä»¶æ¸²æè¿ç¨ï¼3ç§Watcherï¼\n   * ååºå¼è¿ç¨æ»ç»\n   * computedåwatcherçåçï¼æä»ä¹åºå«ååºç¨åºæ¯\n * Vue ååºå¼åç 3.0\n   * Composition API\n   * å½æ°å¼ç¼ç¨\n   * æ§è½æå\n     * proxy å¯¹æ¯ä¸ä¸ Object.defineProperty\n     * ç¼è¯ä¼åï¼Fragmentsï¼éææåï¼Patch flag\n     * æºç ä½ç§¯ä¼å\n   * reactive / ref / toRefs åºå«\n   * effect / track / trigger åè½\n * Vue ç»ä»¶éä¿¡çæ¹å¼ï¼8ç§ï¼\n * Vuex\n   * State\n   * Getters\n   * Mutations\n   * Actions\n   * Modules\n * Vue ä¸­ç keyçä½ç¨\n   * ä»ä¹æ¯èæ DOM\n   * Diffç®æ³çè¿ç¨ï¼patch / patchVnode / updateChildrenï¼\n * nextTickçåç\n * dataä¸ºä»ä¹æ¯å½æ°ï¼å¯ä»¥æ¢æç®­å¤´å½æ°åï¼thisæåé®é¢ï¼åºè¯¥æåvmå®ä¾ï¼\n * Keep-aliveçåç\n   * LRUç®æ³ï¼FIFO / OPTï¼\n   * èå°æä½ç³»ç»é¡ºä¾¿è¯´ä¸ä¸è¿ç¨ä¸çº¿ç¨çåºå«\n   * è¿ç¨é´éä¿¡çæ¹å¼\n * ä½ åè¿åªäº Vue çæ§è½ä¼å\n * MVVM\n * Vueæ¸²ææµç¨\n * Vueçå½å¨æ\n * Mountedåcreatedä½ æä¹åºååä½¿ç¨ï¼å­èï¼\n * ç¶å­ç»ä»¶ççå½å¨æè§¦åé¡ºåº\n * å¦ä½çè§£ææ§½slot\n * Vue css scoped\n\n\n# æµè§å¨ç¸å³\n\n * è¾å¥ URL å°é¡µé¢å±ç°çè¿ç¨\n   \n   * åè¾å¥æ¶ï¼æµè§å¨ä¼ä»åå²è®°å½ãä¹¦ç­¾æç¼å­ä¸­æ¥æ¾å°åï¼æ¾å°äºï¼ä¼ä»ç¼å­ä¸­è°åºé¡µé¢æ¾ç¤ºåºæ¥\n   \n   * ååè§£æipå°åï¼æµè§å¨ç¼å­ => æä½ç³»ç»ç¼å­ => æ¬å°dnsæå¡å¨ => æ ¹ååæå¡å¨ => é¡¶çº§ååæå¡å¨ => äºçº§ååæå¡å¨)ï¼è¿­ä»£æ¥è¯¢ä¸éå½æ¥è¯¢çåºå«ï¼å¦æå¼å¥äºCDNï¼åæ¬å°DNSç³»ç»ä¼å°ååçè§£ææäº¤ç»CNAMEæåçCDNä¸ç¨DNSæå¡å¨ï¼CDNçDNSæå¡å¨å°CDNçå¨å±è´è½½åè¡¡è®¾å¤IPå°åè¿åç»ç¨æ·ãCDNå¨å±è´è½½åè¡¡è®¾å¤ä¼éæ©ä¸å°ç¨æ·æå±åºåçåºåè´è½½åè¡¡è®¾å¤ï¼å¹¶å°è¯·æ±è½¬åå°æ­¤è®¾å¤ä¸ãï¼\n   \n   * TCPä¸æ¬¡æ¡æ\n   \n   * TCPå®å¨è¿æ¥ä¸åé HTTP è¯·æ±\n     \n     * å¸¸è§è¯·æ±å¤´å­æ®µï¼connectionï¼cookieï¼hostï¼refererï¼originï¼content-type\n   \n   * æå¡å¨å¤çè¯·æ±å¹¶è¿å HTTP ååº\n   \n   *       ç±»å«                       åå ç­è¯­\n     1XX   Informationalï¼ä¿¡æ¯æ§ç¶æç ï¼    æ¥æ¶çè¯·æ±æ­£å¨å¤ç\n     2XX   Successï¼æåç¶æç ï¼           è¯·æ±æ­£å¸¸å¤çå®æ¯\n     3XX   Redirectionï¼éå®åç¶æç ï¼      éè¦è¿è¡éå æä½ä»¥å®æè¯·æ±\n     4XX   Client Errorï¼å®¢æ·ç«¯éè¯¯ç¶æç ï¼   æå¡å¨æ æ³å¤çè¯·æ±\n     5XX   Server Errorï¼æå¡å¨éè¯¯ç¶æç ï¼   æå¡å¨å¤çè¯·æ±åºé\n     \n     1xxï¼ä¿¡æ¯æ§ç¶æç ï¼è¡¨ç¤ºæå¡å¨å·²æ¥æ¶äºå®¢æ·ç«¯è¯·æ±ï¼å®¢æ·ç«¯å¯ç»§ç»­åéè¯·æ±ã\n     \n     100 Continue\n     103 Early Hints ç¨äºå¨æç»ååºä¹ååéä¸ä¸ªåæ­¥ç HTTP ååºï¼æåé¡µé¢æ¸²ææ§è½ã\n     \n     \n     HTTP æ°å¢ç 103 ç¶æç ï¼è¿æ¬¡ç»äºæ´¾ä¸ç¨åºäºï¼\n     \n     2xxï¼æåç¶æç ï¼è¡¨ç¤ºæå¡å¨å·²æåæ¥æ¶å°è¯·æ±å¹¶è¿è¡å¤çã\n     \n     200 OK è¡¨ç¤ºå®¢æ·ç«¯è¯·æ±æå\n     204 No Content è¯·æ±å¤çæåï¼ä½æ²¡æèµæºå¯è¿åï¼æµè§å¨é¡µé¢ä¸ä¼åçæ´æ°ï¼ä¸è¬å¨åªéè¦ä»å®¢æ·ç«¯å¾æå¡å¨åéä¿¡æ¯ï¼èå¯¹å®¢æ·ç«¯ä¸éè¦åéæ°ä¿¡æ¯åå®¹çæåµä¸ä½¿ç¨ã\n     206 Partial Content è¡¨ç¤ºå®¢æ·ç«¯è¿è¡äºèå´è¯·æ±ï¼èæå¡å¨æ§è¡äºè¿é¨åç GET è¯·æ±ãååºæ¥æä¸­åå«ç± Content-Range æå®èå´çå®ä½åå®¹ã\n     \n     \n     3xxï¼éå®åç¶æç ï¼è¡¨ç¤ºæå¡å¨è¦æ±å®¢æ·ç«¯éå®åã\n     \n     301å302å¯¹SEOçå½±å\n     \n     301 Moved Permanently æ°¸ä¹æ§éå®åï¼ååºæ¥æçLocationé¦é¨åºè¯¥æè¯¥èµæºçæ°URL\n     302 Found ä¸´æ¶æ§éå®åï¼ååºæ¥æçLocationé¦é¨ç»åºçURLç¨æ¥ä¸´æ¶å®ä½èµæº\n     303 See Other è¯·æ±çèµæºå­å¨çå¦ä¸ä¸ªURIï¼å®¢æ·ç«¯åºä½¿ç¨ GET æ¹æ³å®åè·åè¯·æ±çèµæº\n     304 Not Modified æå¡å¨åå®¹æ²¡ææ´æ°ï¼å¯ä»¥ç´æ¥è¯»åæµè§å¨ç¼å­\n     \n     301å302æä»ä¹åºå«ï¼\n     \n     è¯¦ç»æ¥è¯´ï¼301å302ç¶æç é½è¡¨ç¤ºéå®åï¼å°±æ¯è¯´æµè§å¨å¨æ¿å°æå¡å¨è¿åçè¿ä¸ªç¶æç åä¼èªå¨è·³è½¬å°ä¸ä¸ªæ°çURLå°åï¼è¿ä¸ªå°åå¯ä»¥ä»ååºçLocationé¦é¨ä¸­è·åï¼ç¨æ·çå°çææå°±æ¯ä»è¾å¥çå°åAç¬é´åæäºå¦ä¸ä¸ªå°åBï¼ââè¿æ¯å®ä»¬çå±åç¹ãä»ä»¬çä¸åå¨äºã301è¡¨ç¤ºæ§å°åAçèµæºå·²ç»è¢«æ°¸ä¹å°ç§»é¤äºï¼è¿ä¸ªèµæºä¸å¯è®¿é®äºï¼ï¼æç´¢å¼æå¨æåæ°åå®¹çåæ¶ä¹å°æ§çç½åäº¤æ¢ä¸ºéå®åä¹åçç½åï¼302è¡¨ç¤ºæ§å°åAçèµæºè¿å¨ï¼ä»ç¶å¯ä»¥è®¿é®ï¼ï¼è¿ä¸ªéå®ååªæ¯ä¸´æ¶å°ä»æ§å°åAè·³è½¬å°å°åBï¼æç´¢å¼æä¼æåæ°çåå®¹èä¿å­æ§çç½åã\n     \n     307 Temporary Redirectï¼ä¸´æ¶éå®åï¼ï¼å°½ç®¡ 302 æ åç¦æ­¢ POST åæ¢æ GETï¼ä½å®éä½¿ç¨æ¶å¤§å®¶å¹¶ä¸éµå®ã307 ä¼éµç§æµè§å¨æ åï¼ä¸ä¼ä» POST åæ GETã\n     308 Permanent Redirect ï¼æ°¸ä¹éå®åï¼\n     \n     307å308çåºç°ä¹æ¯ç»ä¸é¢çè¡ä¸ºåä¸ªè§èï¼ä¸è¿æ¯ä¸åè®¸éå®åæ¶æ¹åè¯·æ±æ¹æ³\n     \n     302 å¨æåçå®ä¹ä¸­ï¼åå®¹åç°å¨ç 307 æ¯ä¸æ ·çï¼ä¸åè®¸éå®åæ¹æ³çæ¹åãä½æ¯æ©ææµè§å¨å¨å®ç°çæ¶åæçå®ç°æ 303ï¼GETï¼ çææï¼æçå®ç°æ 307ï¼POSTï¼ çææãç®åè¯´ä¸å°±æ¯ http 1.0éé¢302å·æäºä¹æ§ï¼å¨http 1.1ä¸­å å¥303å307å°±æ¯ä¸ºäºæ¶é¤äºä¹æ§ã\n     \n     \n     4xxï¼å®¢æ·ç«¯éè¯¯ç¶æç ï¼è¡¨ç¤ºå®¢æ·ç«¯çè¯·æ±æéæ³åå®¹ã\n     \n     400 Bad Request è¡¨ç¤ºå®¢æ·ç«¯è¯·æ±æè¯­æ³éè¯¯ï¼ä¸è½è¢«æå¡å¨æçè§£\n     401 Unauthonzed è¡¨ç¤ºè¯·æ±æªç»ææï¼è¯¥ç¶æä»£ç å¿é¡»ä¸ WWW-Authenticate æ¥å¤´åä¸èµ·ä½¿ç¨\n     403 Forbidden è¡¨ç¤ºæå¡å¨æ¶å°è¯·æ±ï¼ä½æ¯æç»æä¾æå¡ï¼éå¸¸ä¼å¨ååºæ­£æä¸­ç»åºä¸æä¾æå¡çåå \n     404 Not Found è¯·æ±çèµæºä¸å­å¨ï¼ä¾å¦ï¼è¾å¥äºéè¯¯çURL\n     \n     \n     5xxï¼æå¡å¨éè¯¯ç¶æç ï¼è¡¨ç¤ºæå¡å¨æªè½æ­£å¸¸å¤çå®¢æ·ç«¯çè¯·æ±èåºç°æå¤éè¯¯ã\n     \n     500 Internel Server Error è¡¨ç¤ºæå¡å¨åçä¸å¯é¢æçéè¯¯ï¼å¯¼è´æ æ³å®æå®¢æ·ç«¯çè¯·æ±\n     503 Service Unavailable è¡¨ææå¡å¨ææ¶å¤äºè¶è´è½½ææ­£å¨è¿è¡åæºç»´æ¤ï¼ç°å¨æ æ³å¤çè¯·æ±ã\n     \n\n * å¸¸è§ååºå¤´å­æ®µï¼Set-cookieï¼Cache-Controlï¼E-Tagï¼Last-Modifiedï¼Access-Control-Allow-Origin\n   \n   * TCP åæ¬¡æ¥æï¼ä¸ºä»ä¹è¦ç­ 2MSL\n\n * æµè§å¨è§£ææ¸²æ\n   \n   * GCç®æ³\n     \n     * æ è®°æ¸é¤ / å¼ç¨è®¡æ° / æ è®°æ´ç\n     * åå­æ³æ¼ / åå­æº¢åº\n     * æ°çä»£ / èçä»£\n   \n   * ä»ç»ä¸æµè§å¨å¤è¿ç¨æ¶æï¼ç½ç«éç¦»ææ¯\n   \n   * æ¸²æè¿ç¨\n     \n     * ä¸ä¸ªçº¿ç¨ï¼Compositor Thread / Main Thread / Compositor Tile Worker(s)ï¼\n     * js ä¼é»å¡ DOM è§£æ\n     * css ä¸ä¼é»å¡ DOM è§£æä¼é»å¡æ¸²æ\n     * scriptæ ç­¾ä¸­çasync / defer\n     * DOMContentloadedåonloadçåºå«ï¼1æ¯å¨DOMæ è§£æå®æ¯ï¼2æ¯é¡µé¢å®å¨å è½½å®ï¼\n   \n   * æµè§å¨ç¼å­\n     \n     * åç«¯ç¼å­ï¼HTTPç¼å­ / æµè§å¨ç¼å­ï¼\n     * ç¼å­å­å¨å¨åªéï¼\n     * å¼ºç¼å­ / ååç¼å­ï¼ä¼åçº§ï¼\n     * expiresï¼http1.0 å·²è¿æ¶ï¼ç¼ºç¹è¦æ±æ¶é´ä¸¥æ ¼åæ­¥ï¼\n     * Cache-Control ï¼http1.1 / max-age / no-cache / no-store / public / private / s-maxageï¼\n     * Max-age = 0 ä¼ææ ·\n     * ETag / Last-Modifiedï¼E-Tagå¯¹æå¡ç«¯æä»ä¹å½±åï¼æ§è½ï¼è®¡ç®hashï¼å¦ä½è®¡ç® last-modify + content-lengthï¼\n     * hashãchunkhashãcontenthash\n     * localStorage / sessionStorage / cookie\n   \n   * é¤äºcss,jsèµæºï¼é£htmlæä»¶ä¼ç¼å­å\n   \n   * æ ç­¾é¡µå¦ä½éä¿¡\n   \n   * Cookie + serInterval\n     \n     * localStorage\n   \n   * webworker\n   \n   * Websocket\n   \n   * é¢æ£è¯·æ±\n   \n   * æµè§å¨æå¤§å¹¶åè¯·æ±èµæºæ°\n\n\n# ç½ç»ä¸åè®®ç¸å³\n\n * ä»ä¹æ¯ajaxï¼æåï¼\n\n * è·¨åçåå ä»¥åè§£å³æ¹å¼\n   \n   * jsonp\n     * JSONPè¯·æ±é¦åæ¯ä¸ºäºè§£å³è·¨åé®é¢èå­å¨çä¸ç§æ°é´è§£å³æ¹æ¡\n     * éè¿æ ç­¾çå½¢å¼åè¯·æ±\n     * éè¦ååç«¯åå­¦è¿è¡çº¦æ\n     * åªè½ä½¿ç¨getè¯·æ±\n   * CORS\n   * iframeçå ç§æ¹å¼\n   * postMessageï¼window.postMessage(message,targetOrigin) æ¹æ³æ¯html5æ°å¼è¿çç¹æ§ï¼å¯ä»¥ä½¿ç¨å®æ¥åå¶å®çwindowå¯¹è±¡åéæ¶æ¯ï¼æ è®ºè¿ä¸ªwindowå¯¹è±¡æ¯å±äºåæºæä¸åæºï¼\n   * Iframe + document.domainï¼ç¨äºäºçº§ååç¸åçæåµä¸ï¼æ¯å¦ a.test.com å b.test.com ï¼\n   * iframe + window.name\n   * Iframe + location.hash\n   * nginxååä»£ç\n   * websocket\n   * web-dev-serverä¸­çproxy\n   \n   æµè§å¨çåæºç­ç¥çç®çå°±æ¯ä¸ºäºé²æ­¢ XSSï¼CSRF ç­æ¶ææ»å»ã\n   \n   è·¨åéå¶çèµæº:\n   1.æ°æ®å­å¨éå¶ï¼Cookie, LocalStorage, IndexDB æ æ³è¯»å\n   2.èæ¬ API éå¶ï¼DOM æ æ³æä½\n   3.ç½ç»è¯·æ±éå¶ï¼XHR è¯·æ±æ æ³æ¥æ¶ååº\n   \n   åçè·¨åæ¶ï¼åè®¸è¿è¡çæä½:\n   1.éå¸¸åè®¸è·¨ååæä½ï¼linkãredirectãè¡¨åæäº¤ï¼\n   2.éå¸¸åè®¸è·¨åèµæºåµå¥ï¼scriptãimgãvideo...ï¼\n   3.éå¸¸ç¦æ­¢è·¨åè¯»æä½(ajax)\n   4.å¯ä»¥æ­£å¸¸åéè¯·æ±ï¼å¯ä»¥æºå¸¦Cookie(withCredentials)ï¼ä½æ¯æµè§å¨ä¼éå¶æ¥èªäºä¸ååçèµæºçæ¥æ¶\n   \n\n * http å https\n   \n   * http 0.9 / 1.0 / 1.1 / 2.0\n     \n     * http0.9\n       * åªæ¯æ get\n       * æ²¡æè¯·æ±å¤´æ¦å¿µï¼ååºååªè½è¿å html\n     * http1.0\n       * è¯·æ±æ¹å¼æ°å¢äºpostï¼headç­æ¹å¼\n       * å¢æ·»äºè¯·æ±å¤´åååºå¤´çæ¦å¿µ\n       * æ©åäºä¼ è¾åå®¹æ ¼å¼ï¼å¾çãé³è§é¢èµæºãäºè¿å¶ç­é½å¯ä»¥è¿è¡ä¼ è¾\n       * é®é¢ï¼æ¯è¯·æ±ä¸æ¬¡é½è¦å»ºç«ä¸æ¬¡è¿æ¥\n     * http1.1\n       * é¿è¿æ¥ï¼æ°å¢Connectionå­æ®µï¼å¯ä»¥è®¾ç½®keep-aliveå¼ä¿æè¿æ¥ä¸æ­å¼\n       * ç®¡éåï¼åºäºä¸é¢é¿è¿æ¥çåºç¡ï¼ç®¡éåå¯ä»¥ä¸ç­ç¬¬ä¸ä¸ªè¯·æ±ååºç»§ç»­åéåé¢çè¯·æ±ï¼ä½ååºçé¡ºåºè¿æ¯æç§è¯·æ±çé¡ºåºè¿åï¼æ¯è¾é¸¡èï¼ä»ç¶ä¼é»å¡ã\n     * ç¼å­å¤çï¼æ°å¢å­æ®µcache-controlï¼æ°å¢ç¶æç 303ï¼307\n       * é®é¢ï¼åºäºæä»¶ä¸²è¡ä¼ è¾ï¼éå¤´é»å¡ï¼åä¸è¯·æ±éè¦ç­åä¸è¯·æ±è¿åï¼ï¼æå¤§å¹¶åæ°éå¶\n   \n   * http2.0\n     \n     * äºè¿å¶åå¸§\n     * é¦é¨åç¼©\n     * å¤è·¯å¤ç¨\n   \n   * TCPéå¤´é»å¡\n     \n     * http2éè¿åå¸§é¿åäºè¯·æ±æ¶çéé¦é»å¡é®é¢ï¼ä½TCPå±é¢çé»å¡æ¯HTTP2æ æ³è§£å³çãå ä¸ºTCPæ¯å¯é çä¼ è¾ï¼ä¸æ¦ä¸¢åå°±è¦éæ°ååï¼é»å¡åç»­ï¼è½ç¶ææ»å¨çªå£ï¼ä½ä¹æ²¡æå½»åºè§£å³\n   \n   * æä¹åå° http è¯·æ±\n     \n     * éªç¢§å¾\n     * åå¹¶ js å cssï¼æå»ºå·¥å·å®æï¼\n     * å©ç¨æµè§å¨ç¼å­\n\n * é¿è¿æ¥ä¸å¤è·¯å¤ç¨\n\n * SSL/TLSï¼å¯¹ç§°å å¯ / éå¯¹ç§°å å¯\n\n * httpsä¸»è¦æµç¨ï¼è¯ä¹¦çä½ç¨\n\n * ä¸­é´äººæ»å»\n   \n   1)å®¢æ·ç«¯åéè¯·æ±å°æå¡ç«¯ï¼è¯·æ±è¢«ä¸­é´äººæªè·ã\n   \n   2)æå¡å¨åå®¢æ·ç«¯åéå¬é¥ã\n   \n   3)ä¸­é´äººæªè·å¬é¥ï¼ä¿çå¨èªå·±æä¸ãç¶åèªå·±çæä¸ä¸ªãä¼ªé çãå¬é¥ï¼åç»å®¢æ·ç«¯ã\n   \n   4)å®¢æ·ç«¯æ¶å°ä¼ªé çå¬é¥åï¼çæå¯æåç»æå¡å¨ã\n   \n   5)ä¸­é´äººè·å¾å¯æï¼ç¨èªå·±çç§é¥è§£å¯ãåæ¶ç¨çæ­£çå¬é¥åç»æå¡å¨ã\n   \n   6)æå¡å¨è·å¾å å¯ä¿¡æ¯ï¼ç¨èªå·±çç§é¥è§£å¯ã\n   \n\n * httpè¯·æ±æ¹æ³\n\n * Content-typeæåªäº\n\n * ç®åè¯·æ±åå¤æè¯·æ±\n   \n   * åªè¦åæ¶æ»¡è¶³ä»¥ä¸ä¸¤å¤§æ¡ä»¶ï¼å°±å±äºç®åè¯·æ±\n     \n     æ¡ä»¶1ï¼ä½¿ç¨ä¸åæ¹æ³ä¹ä¸ï¼GETï¼HEADï¼POST\n     \n     æ¡ä»¶2ï¼Content-Type çå¼ä»éäºä¸åä¸èä¹ä¸ï¼\n     \n     * text/plain\n       * multipart/form-data\n       * application/x-www-form-urlencoded\n\n * TCP ä¸æ¬¡æ¡æ / åæ¬¡æ¥æ\n   \n   * SYN (synchronouså»ºç«èæº)\n   * ACK (acknowledgement ç¡®è®¤)\n   * FIN (finishç»æ)\n\n * Sequence number (é¡ºåºå·ç )\n\n * TCP ä¸ UDP çåºå«äºåºç¨åºæ¯\n   \n   * osiä¸å±æ¨¡åä¸ tcp/ip äºå±æ¨¡å\n   \n   * cookieï¼sessionï¼tokenï¼JWT\n     \n     * cookieå¸¦æ¥çå®å¨æ§é®é¢åå¦ä½é²å¾¡\n     \n     * cookieçå±æ§\n       \n       * expireå±æ§ï¼æå®æµè§å¨å¯åé Cookie çæææï¼\n       * domainå±æ§ï¼æå® cookie å¯ä»¥éè¾¾çä¸»æºåï¼å¨set-cookieä¸­è®¾ç½®ï¼\n       * secure å±æ§ï¼å±æ§ç¨äºéå¶ Web é¡µé¢ä»å¨ HTTPS å®å¨è¿æ¥æ¶ï¼æå¯ä»¥åé Cookieï¼\n       * HttpOnly å±æ§ï¼ Cookie çæ©å±åè½ï¼å®ä½¿ JavaScript èæ¬æ æ³è·å¾ Cookieï¼\n     \n     * cookieå¦ä½è¢«æºå¸¦\n       \n       * ååè¯·æ±ä¸ï¼ajaxä¼èªå¨å¸¦ä¸åæºçcookieï¼\n       * è·¨åè¯·æ±ä¸ï¼ajaxä¸ä¼èªå¨æºå¸¦åæºçcookieï¼éè¦éè¿åç«¯éç½®ç¸åºåæ°æå¯ä»¥è·¨åæºå¸¦åæºcookieï¼ withCredentials: true\n       * ajaxè¯·æ±ä»»ä½æ¶åé½ä¸ä¼å¸¦ä¸ä¸åæºçcookie\n     \n     * Sessionæµç¨ï¼\n       \n       * ç¨æ·ç¬¬ä¸æ¬¡è¯·æ±æå¡å¨çæ¶åï¼æå¡å¨æ ¹æ®ç¨æ·æäº¤çç¸å³ä¿¡æ¯ï¼åå»ºå¯¹åºç Sessionï¼ä¿å­ç¸å³æ°æ®ï¼æ¯å¦ç¨æ·è§è²ãç»å½æ¶é´ç­ç­ã\n       * è¯·æ±è¿åæ¶å°æ­¤ Session çå¯ä¸æ è¯ä¿¡æ¯ SessionID è¿åç»æµè§å¨\n       * æµè§å¨æ¥æ¶å°æå¡å¨è¿åç SessionID ä¿¡æ¯åï¼ä¼å°æ­¤ä¿¡æ¯å­å¥å° Cookie ä¸­ï¼åæ¶ Cookie è®°å½æ­¤ SessionID å±äºåªä¸ªåå\n       * å½ç¨æ·ç¬¬äºæ¬¡è®¿é®æå¡å¨çæ¶åï¼è¯·æ±ä¼èªå¨å¤æ­æ­¤ååä¸æ¯å¦å­å¨ Cookie ä¿¡æ¯ï¼å¦æå­å¨èªå¨å° Cookie ä¿¡æ¯ä¹åéç»æå¡ç«¯ï¼æå¡ç«¯ä¼ä» Cookie ä¸­è·å SessionIDï¼åæ ¹æ® SessionID æ¥æ¾å¯¹åºç Session ä¿¡æ¯ï¼å¦ææ²¡ææ¾å°è¯´æç¨æ·æ²¡æç»å½æèç»å½å¤±æï¼å¦ææ¾å° Session è¯æç¨æ·å·²ç»ç»å½å¯æ§è¡åé¢æä½ã\n     \n     * æ ¹æ®ä»¥ä¸æµç¨å¯ç¥ï¼SessionID æ¯è¿æ¥ Cookie å Session çä¸éæ¡¥æ¢ï¼å¤§é¨åç³»ç»ä¹æ¯æ ¹æ®æ­¤åçæ¥éªè¯ç¨æ·ç»å½ç¶æã\n       \n       * sessionIDæ¯æä¹çæçï¼(Tomcatçsessionidççæä¸»è¦æ¯éæºæ°ï¼ä¾èµçç±»æ¯java.security.SecureRandom)\n     \n     * Token: ä»¤ç**ï¼**è®¿é®èµæºæ¥å£ï¼APIï¼æ¶æéè¦çèµæºå­è¯ãtokenæ¯æå¡ç«¯çæçä¸ä¸²å­ç¬¦ä¸²,ä»¥ä½å®¢æ·ç«¯è¿è¡è¯·æ±çä»¤ç,å½ç¬¬ä¸æ¬¡ç»éå,æå¡å¨çæä¸ä¸ªtokenä¾¿å°æ­¤tokenè¿åç»å®¢æ·ç«¯,ä»¥åå®¢æ·ç«¯åªè¦å¸¦ä¸è¿ä¸ªtokenåæ¥è¯·æ±æ°æ®å³å¯,æ éåæ¬¡å¸¦ä¸ç¨æ·ååå¯ç ã**Token **ä½¿æå¡ç«¯æ ç¶æåï¼ä¸ä¼å­å¨ä¼è¯ä¿¡æ¯ãç¸æ¯äºSessionçä¼ç¹æ¯ï¼å³ä½¿æäºå¤å°æå¡å¨ï¼æå¡å¨ä¹åªæ¯åäºtokençè§£å¯åç¨æ·æ°æ®çæ¥è¯¢ï¼å®ä¸éè¦å¨æå¡ç«¯å»ä¿çç¨æ·çè®¤è¯ä¿¡æ¯æèä¼è¯ä¿¡æ¯ï¼è¿å°±æå³çåºäºtokenè®¤è¯æºå¶çåºç¨ä¸éè¦å»èèç¨æ·å¨åªä¸å°æå¡å¨ç»å½äºï¼è¿å°±ä¸ºåºç¨çæ©å±æä¾äºä¾¿å©ï¼è§£å³äºsessionæ©å±æ§çå¼ç«¯ãæå¸¸è§ççææ¹å¼æ¯JWTï¼JSON Web Token å¥é¨æç¨ã\n       \n       æ¾å¨åªï¼å¯ä»¥æå®æ¾å¨ Cookie éé¢èªå¨åéï¼ä½æ¯è¿æ ·ä¸è½è·¨åï¼æä»¥æ´å¥½çåæ³æ¯æ¾å¨ HTTP è¯·æ±çå¤´ä¿¡æ¯Authorizationå­æ®µéé¢ã\n       \n       > Authorization: Bearer <token>\n       \n       å¦ä¸ç§åæ³æ¯ï¼è·¨åçæ¶åï¼JWT å°±æ¾å¨ POST è¯·æ±çæ°æ®ä½éé¢ã\n\n * CDNæ¯ä»ä¹ï¼åå®¹ååç½ç»ï¼\n   \n   * å°æºç«åå®¹ååè³ææ¥è¿ç¨æ·çèç¹ï¼ä½¿ç¨æ·å°±è¿åå¾æéåå®¹ãè§£å³äºå åå¸ï¼å¸¦å®½ï¼æå¡å¨æ§è½å¸¦æ¥çè®¿é®å»¶è¿é®é¢ãCDNè´è½½åè¡¡ç³»ç»è´è´£åè¯ç¨æ·ç¼å­æå¡å¨çipå°å\n\n * åç«¯æ¨¡åå\n   \n   * æä»¶åå / å½åç©ºé´ / IIFE / CommonJS / AMD / CMD\n   * ESModules\n   * ESMä¸CommonJSçåºå«\n     * CommonJSæ¨¡åè¾åºæ·è´ï¼ES6 æ¨¡åè¾åºå¼ç¨\n     * CommonJS æ¨¡åæ¯è¿è¡æ¶å è½½ï¼ES6 æ¨¡åæ¯ç¼è¯æ¶å è½½ï¼ä¹æä»¥webpackçtree-shakingåªè½ä½ç¨äºES6æ¨¡åï¼å°±æ¯å ä¸ºES6æ¨¡åå¨ç¼è¯æ¶å°±è½ç¡®å®ä¾èµã\n     * CommonJSæ¯require()åæ­¥å è½½æ¨¡åï¼ES6æ¨¡åæ¯importå½ä»¤æ¯å¼æ­¥å è½½ï¼æä¸ä¸ªç¬ç«çæ¨¡åä¾èµçè§£æé¶æ®µ\n     * CommonJSç¬¬ä¸æ¬¡å è½½æ¨¡åå°±ä¼æ§è¡æ´ä¸ªæ¨¡åçæä¸ä¸ªå¯¹è±¡, åæ¬¡ç¨å°æ¶å°ç¼å­ä¸­è¯»åï¼ES6 æ¨¡åä¸ä¼ç¼å­è¿è¡ç»æï¼èæ¯å¨æå°å»è¢«å è½½çæ¨¡ååå¼\n     * å¾ªç¯å¼ç¨çå¤ç\n\n\n# åç«¯å®å¨\n\n * XSSï¼åå°å / å­å¨å / DOMåï¼\n   \n   * httpOnly\n   * çº¯åç«¯æ¸²æ\n   * HTMLè½¬ä¹\n   * CSP\n   * X-Xss-Protection\n\n * CSRFï¼ç¬¬ä¸æ¹ç½ç«å¦ä½æ¿å°cookieï¼scriptãimageãiframeçsrcé½ä¸ååæºç­ç¥çå½±åãæä»¥æä»¬å¯ä»¥åå©è¿ä¸ç¹ç¹ï¼å®ç°è·¨åï¼\n   \n   * originï¼ä¸è¬åªå­å¨äºCORSè·¨åè¯·æ±ä¸­ï¼ä¸ºä»ä¹è¦è·¨åï¼ åæºç­ç¥æä¹é²æ­¢csrfæ»å»ï¼\n     \n     å¨ä»¥ä¸æåµä¸å­å¨æ­¤è¯·æ±å¤´ï¼\n     \n     302 éå®åï¼ \n     1. å¨ 302 éå®åä¹å Origin ä¸åå«å¨éå®åçè¯·æ±ä¸­ï¼å ä¸º Origin å¯è½ä¼è¢«è®¤ä¸ºæ¯å¶ä»æ¥æºçææä¿¡æ¯ã\n     2.å¯¹äº 302 éå®åçæåµæ¥è¯´é½æ¯å®åå°æ°çæå¡å¨ä¸ç URLï¼å æ­¤æµè§å¨ä¸æ³å° Origin æ³æ¼å°æ°çæå¡å¨ä¸ã\n     \n     Origin å Referer å­å¨ç¸åçé®é¢ï¼åæ ·æå¯è½ä¸¢å¤±è¯¥å­æ®µã\n     \n   \n   * refererï¼åè®®+åå+æ¥è¯¢åæ°ï¼\n     \n     éå¯¹éè¿ Referer å­æ®µå»å¤æ­è¯·æ±æ¥æºæ¯å¦åæ³æ¯ä¸å¤ªé è°±çï¼è¿ä¸ªå­æ®µå¾æå¯è½ä¼ä¸¢å¤±ï¼\n     \n     1.IE6ã7ä¸ä½¿ç¨ window.location.href=url è¿è¡çé¢çè·³è½¬æè window.openï¼é½ä¼é æ Referer ä¸¢å¤±ã\n     \n     2.HTTPS é¡µé¢è·³è½¬å° HTTP é¡µé¢ï¼æææµè§å¨ Referer é½ä¸¢å¤±ã\n     \n     3.ç¹å» Flash ä¸å°è¾¾å¦å¤ä¸ä¸ªç½ç«çæ¶åï¼Referer çæåµå°±æ¯è¾æä¹±ï¼ä¸å¤ªå¯ä¿¡ã\n     \n     å¯ä»¥éå ä½¿ç¨äºå¤æ­è¯·æ±æ¥æºï¼ä½æ¯ä»éè¿è¯¥å­æ®µè¿è¡å¤æ­æ¯ä¸å¤ªé è°±çï¼å¦æè¯·æ±å¤´ä¸¢å¤±è¯¥å­æ®µï¼åæå¡ç«¯æ æ³å¤æ­å½åè¯·æ±æ¥æºï¼æ æ³æ ¡éªè¯·æ±æ¯å¦åæ³ã\n     \n   \n   * Samesite Cookie\n   \n   * CSRF Token\n     \n     * å¨è¯·æ±å¤´ä¸­å°è·åå°ç token è®¾ç½®å° cookie ä¸­ã\n     * å° token æ¾å°è¯·æ±åæ°ä¸­ã\n   \n   * éªè¯ç \n\n * ç¹å»å«æ\n\n * ä¸­é´äººæ»å»\n\n * HTTPä¼ è¾å®å¨\n\n * ç¬¬ä¸æ¹ä¾èµå®å¨\n\n * æ§å¶å°æ³¨å¥ä»£ç \n\n * éé±¼\n\n * åç«¯è·¯ç±\n   \n   * hashæ¨¡å¼\n     * window.location.hash\n     * onhashchange\n   * historyæ¨¡å¼\n     * pushState / replaceState / popState\n\n\n# è®¾è®¡æ¨¡å¼ï¼ç®åä»ç»ä¸ä¸\n\n * å·¥åæ¨¡å¼\n * æ½è±¡å·¥åæ¨¡å¼\n * åä¾æ¨¡å¼\n * å»ºé èæ¨¡å¼\n * ééå¨æ¨¡å¼\n * è£é¥°å¨æ¨¡å¼\n * è¿æ»¤å¨æ¨¡å¼\n\n\n# webpack\n\n * webpackï¼gruntï¼gulpçåºå«\n * webpackï¼rollupï¼parcelåå«éç¨äºä»ä¹åºæ¯\n * webpackæä»¶ä¸»è¦æ¯åä»ä¹çï¼å¸¸ç¨çæåªäº\n * èªå·±åè¿webpackæä»¶åï¼compiler / compilationï¼\n * Webpack loaderä¸»è¦æ¯åä»ä¹çï¼å¸¸ç¨çæåªäº\n * loader å plugin çåºå«åç¨å¤\n * webpack ç­æ´æ°åç\n * Sourcemapï¼cheap-module-eval-source-mapï¼\n * Webpack-dev-server\n * webpackæåæµç¨åçå½å¨æ\n\n\n# git\n\n * Git reset å git revert çåºå«\n * Git rebaseçä¸¤ç§ç¨é\n\n\n# å¨ç»ç¸å³\n\n * csså¨ç»\n   \n   * transition: è¿æ¸¡ï¼æ¯ä¸æ¬¡æ§çï¼åªè½å®ä¹èµ·å§åç»æç¶æã\n     \n     #box {\n       height: 100px;\n       width: 100px;\n       background: green;\n       transition: transform 1s ease-in 1s;\n     }\n     #box:hover {\n       transform: rotate(180deg) scale(.5, .5);\n     }\n     \n   \n   * animationï¼å¨ç»ï¼å¾å¤æ§çï¼keyframesæä¾æ´å¤çæ§å¶ï¼å°¤å¶æ¯æ¶é´ç¾åæ¯çæ§å¶\n     \n     .box {\n       height: 100px;\n       width: 100px;\n       border: 15px solid black;\n       animation: changebox 1s ease-in-out 1s infinite alternate running forwards;\n     }\n     \n     @keyframes changebox {\n       10% {\n         background: red;\n       }\n       50% {\n         width: 80px;\n       }\n       70% {\n         border: 15px solid yellow;\n       }\n       100% {\n         width: 180px;\n         height: 180px;\n       }\n     }\n     \n\n * jså¨ç»\n   \n   * å®æ¶å¨ï¼ä¼åºç°å¡é¡¿æå¨ï¼å®æ¶å¨å®éæ§è¡å®éè¾æï¼ä¸ç¨è®¾å¤å±å¹å·æ°é¢çä¸å\n     \n     var offsetX = 500  //è¦æ°´å¹³ç§»å¨çè·ç¦»\n     var moveOffset = 0  //å½åå·²ç»ç§»å¨çè·ç¦»\n     var step = 5   //æ¯æ¬¡ç§»å¨çè·ç¦»\n     \n     function move(){\n       if(moveOffset < offsetX){\n         ball.style.left = parseInt(getComputedStyle(ball).left) + step + 'px'\n         moveOffset += step\n         setTimeout(move, 5)\n       }\n     }\n     move()\n     \n   \n   * requestAnimationframeï¼ç±ç³»ç»æ¥å³å®åè°å½æ°çæ§è¡æ¶æºãä¿è¯åè°å½æ°å¨å±å¹æ¯ä¸æ¬¡çå·æ°é´éä¸­åªè¢«æ§è¡ä¸æ¬¡ï¼è¿æ ·å°±ä¸ä¼å¼èµ·ä¸¢å¸§ç°è±¡ï¼ä¹ä¸ä¼å¯¼è´å¨ç»åºç°å¡é¡¿çé®é¢ã\n     \n     var offsetX = 500  //è¦æ°´å¹³ç§»å¨çè·ç¦»\n     var moveOffset = 0  //å½åå·²ç»ç§»å¨çè·ç¦»\n     var step = 5   //æ¯æ¬¡ç§»å¨çè·ç¦»\n     \n     function move(){\n       if(moveOffset < offsetX){\n         ball.style.left = parseInt(getComputedStyle(ball).left) + step + 'px'\n         moveOffset += step\n         requestAnimationFrame(move)\n       }\n     }\n     move()\n     \n\n * æä¹å®ç°åå°é¡¶é¨å¨ç»ï¼\n   \n   function toTOp() {\n     let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\n     let timer = setInterval(() => {\n       scrollTop -= 100;\n       window.scrollTo(0, scrollTop)\n       if (scrollTop <= 0) {\n         clearInterval(timer)\n       }\n     }, 10)\n   }\n   \n   function toTOp() {\n     let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\n     if (scrollTop > 0) {\n       requestAnimationFrame(function() {\n         scrollTop -= 100;\n       \twindow.scrollTo(0, scrollTop)\n       })\n     }\n   }\n   \n\n\n# å¸¸ç¨æåä»£ç \n\n * é²æ / èæµ\n * æ¯éå\n * apply,bind,call\n * promise.all\n * promise.race\n * åå¸è®¢éæ¨¡å¼\n * æ°ç»æå¹³åå¸¦åæ°\n * æ°ç»å»é 4 ç§\n * instanceof\n * new\n * æ·±æ·è´\n * ajaxè¯·æ±\n * å¿«æ / åæ³¡ / å æåº\n * æå map / reduce\n * å¹¶åè¯·æ±æ§å¶\n * å®ç°ä¸ä¸ªsleepå½æ°\n\n\n# è®¡ç®æºåºç¡\n\n * 32ä½å64ä½çåºå«ï¼\n   \n   > å¯»åç©ºé´åå«ä¸º2^32 = 4Gå2^64ï¼å¯»åç©ºé´ä¸è¬æçæ¯CPUå¯¹äºåå­å¯»åçè½åãéä¿å°è®²ï¼å°±æ¯æå¤è½ç¨å°å¤å°åå­çä¸ä¸ªé®é¢ã\n\n * cpuå¦ä½è®¿é®åå­ï¼\n   \n   > é¦å CPU å¨è®¿é®åå­çæ¶åé½éè¦éè¿ MMUï¼åå­ç®¡çååï¼ æèæå°åè½¬åä¸ºç©çå°åï¼ç¶åéè¿æ»çº¿è®¿é®åå­ãMMU å¼å¯å CPU çå°çææå°åé½æ¯èæå°åï¼CPU æè¿ä¸ªèæå°ååç» MMU åï¼MMU ä¼éè¿é¡µè¡¨å¨é¡µè¡¨éæ¥åºè¿ä¸ªèæå°åå¯¹åºçç©çå°åæ¯ä»ä¹ï¼ä»èå»è®¿é®å¤é¢ç DDRï¼åå­æ¡ï¼ã\n\n * ä»ä¹æ¯å¹³è¡¡äºåæ åçº¢é»æ \n   \n   * å¹³è¡¡äºåæ å·¦å³ä¸¤ä¸ªå­æ çé«åº¦å·®çç»å¯¹å¼ä¸è¶è¿1ï¼å¹¶ä¸å·¦å³ä¸¤ä¸ªå­æ é½æ¯ä¸æ£µå¹³è¡¡äºåæ ã\n   * çº¢é»æ æ¯ä¸ä¸ªèªå¹³è¡¡(ä¸æ¯ç»å¯¹çå¹³è¡¡)çäºåæ¥æ¾æ \n   * çº¢é»æ ç¸æ¯äºAVLæ ï¼çºç²äºé¨åå¹³è¡¡æ§ï¼ä»¥æ¢åå é¤/æå¥æä½æ¶å°éçæè½¬æ¬¡æ°ï¼æ´ä½æ¥è¯´ï¼æ§è½ä¼äºAVLæ ã\n\n\n# é¡¹ç®\n\n * å°ç¨åº\n   \n   * é¿åè¡¨ä¼åï¼ä¸ºä»ä¹è¦åä¼åï¼1.å°ç¨åºåçº¿ç¨ 2. æ¡æ¶ç¼ºé·\n   \n   * å°ç¨åºåçº¿ç¨åç\n   \n   * å°ç¨åºçåçº¿ç¨è®¾è®¡ï¼ä¸»è¦ä¸ºäºç®¡æ§å®å¨ï¼é¿åæä½ DOMãé»è¾çº¿ç¨æ¯ä¸ä¸ªåªè½å¤è¿è¡JavaScriptçæ²ç®±ç¯å¢ï¼ä¸æä¾DOMæä½ç¸å³çAPIï¼æä»¥ä¸è½ç´æ¥æä½UIï¼åªè½å¤éè¿setDataæ´æ°æ°æ®çæ¹å¼å¼æ­¥æ´æ°UIã\n     \n   \n   * setDataå·¥ä½åç\n     \n     å°ç¨åºçè§å¾å±ç®åä½¿ç¨ WebView ä½ä¸ºæ¸²æè½½ä½ï¼èé»è¾å±æ¯ç±ç¬ç«ç JavascriptCore ä½ä¸ºè¿è¡ç¯å¢ãå¨æ¶æä¸ï¼WebView å JavascriptCore é½æ¯ç¬ç«çæ¨¡åï¼å¹¶ä¸å·å¤æ°æ®ç´æ¥å±äº«çééãå½åï¼è§å¾å±åé»è¾å±çæ°æ®ä¼ è¾ï¼å®éä¸éè¿ä¸¤è¾¹æä¾ç evaluateJavascript æå®ç°ãå³ç¨æ·ä¼ è¾çæ°æ®ï¼éè¦å°å¶è½¬æ¢ä¸ºå­ç¬¦ä¸²å½¢å¼ä¼ éï¼åæ¶æè½¬æ¢åçæ°æ®åå®¹æ¼æ¥æä¸ä»½ JS èæ¬ï¼åéè¿æ§è¡ JS èæ¬çå½¢å¼ä¼ éå°ä¸¤è¾¹ç¬ç«ç¯å¢ã\n     \n     è evaluateJavascript çæ§è¡ä¼åå¾å¤æ¹é¢çå½±åï¼æ°æ®å°è¾¾è§å¾å±å¹¶ä¸æ¯å®æ¶çãæä»¥æä»¬çsetDataå½æ°å°æ°æ®ä»é»è¾å±åéå°è§å¾å±ï¼æ¯å¼æ­¥çã\n     \n     \n     var initData = {\n         info: {\n             name: 'hh'\n         }\n     };\n     \n     Page({\n         data: initData,\n         onClick() {\n             this.setData({\n                 'info.name': 'xx'\n             }, () => {\n                 console.log(initData.info.name) // hh\n             })\n         }\n     })\n     // 1. pageåå§åçæ¶ådataæ¯æ·±æ·è´çæçï¼æä»¥ä¸ä¼æ¹ååæ¥initDataçå¼\n     // 2. å¦ææ¹åäºinitDataçå¼ï¼é¡µé¢çåå§å¼å°±ä¼è¢«æ¹åäºï¼navigateTo/redicetToé¡µé¢æ°æ®ä¸ä¸æ ·\n     \n   \n   * é¡¹ç®ä¼å\n   \n   * mpvueåç\n     \n     * mpvue ä¿çäº vue.runtime æ ¸å¿æ¹æ³ï¼æ ç¼ç»§æ¿äº Vue.js çåºç¡è½å\n     * mpvue-template-compiler æä¾äºå° vue çæ¨¡æ¿è¯­æ³è½¬æ¢å°å°ç¨åºç wxml è¯­æ³çè½å\n     * ä¿®æ¹äº vue çå»ºæéç½®ï¼ä½¿ä¹æå»ºåºç¬¦åå°ç¨åºé¡¹ç®ç»æçä»£ç æ ¼å¼ï¼ json/wxml/wxss/js æä»¶\n   \n   * å°ç¨åºæ¡æ¶å¯¹æ¯ï¼åºäºå¾®ä¿¡èªå®ä¹ç»ä»¶å®ç°ç»ä»¶å¼åçæ¡æ¶ï¼uni-app/taro/chameleonï¼ï¼ç»ä»¶æ°æ®éè®¯æ§è½æ¥è¿äºå¾®ä¿¡åçæ¡æ¶ï¼è¿é«äºåºäºtemplateå®ç°ç»ä»¶å¼åçæ¡æ¶ï¼wepy/mpvueï¼æ§è½\n   \n   * å°ç¨åºä¸ºåçº¿ç¨æ¨¡åï¼é»è¾å±åè§å¾å±ï¼éè¿ Native å±éä¿¡ãä¸åå¨ web ä¸ js å ui ä¼äºæ¥ï¼å°ç¨åºä¸­ä¼éå¶ js æä½ domï¼æä»¥ä¸ç¨æå¿ä¸åæ­¥é®é¢ã\n   \n   * é»è¾å±åè§å¾å±éè¿ setData è¿è¡éä¿¡ï¼ä¼ææ°æ®è½¬æ¢æå­ç¬¦ä¸²å¹¶æ¼æ¥ä¸æ®µ js èæ¬ï¼evaluateJavascriptï¼ä¼ å°è§å¾å±ï¼è¿ä¸ªè¿ç¨æ¯å¼æ­¥çã\n   \n   * å¦ææ¯æ¬¡ setData çæ°æ®éè¿å¤§ï¼ä¼éå¸¸æèæ§è½ï¼æå¥½æ¯å¢éæ´æ°ãuni-appãtaro é½å¨è°ç¨setDataä¹åèªå¨ådiffè®¡ç®ï¼æ¯æ¬¡ä»ä¼ éåå¨çæ°æ®ã\n   \n   * èä¸åºäºå¾®ä¿¡èªå®ä¹ç»ä»¶å®ç°ç»ä»¶å¼åçæ¡æ¶ï¼uni-app/taroï¼ï¼ç»ä»¶æ°æ®éè®¯æ§è½æ¥è¿äºå¾®ä¿¡åçæ¡æ¶ï¼è¿é«äºåºäºtemplateå®ç°ç»ä»¶å¼åçæ¡æ¶ï¼wepy/mpvueï¼æ§è½ã\n   \n   * è·¨ç«¯è½åï¼uni-app æ¯è¾ä¼ç§ï¼åæ¶æ¯æH5ãå¤å®¶å°ç¨åºãè·¨å¹³å°Appï¼ä½æ¯ä¸å¥ä»£ç æ¨ªè·¨ iOS Android Web åå°ç¨åºæ¯è¾å¤æï¼å¯è½ä¼å­å¨å¤§éå¼å®¹æ§é®é¢ã\n\n * el-selectçä½¿ç¨ï¼vueèªå®ä¹æä»¤\n\n * Mixin\n\n * å¶å®\n   \n   * èªæä»ç»\n   * ä¸ºä»ä¹éæ©åç«¯ï¼å¦ä½å­¦ä¹ ï¼ä¸ºä»ä¹éæ©è¿ç§å­¦ä¹ æ¹å¼ï¼\n   * å¯¹åç«¯åå±ççæ³ï¼\n     * æ©äºæ¶åï¼ç±äºæ¶ä»£çé®é¢ï¼å½æ¶çwebåç«¯ä»ä»æ¯å±ç¤ºä¸äºç®åçææ¬ãå¾çï¼é¡µé¢è¾ä¸ºç®å\n     * ååç«¯åç¦»ï¼MVVMæ¡æ¶(Vue, React, Angularç­)çåºç°ï¼ä½¿å¾åç«¯æ´å åºç¨åï¼æ§è½æ´é«ã\n     * V8å¼æånodeçåºç°ï¼ä¿ä½¿åç«¯è½ç¨èªå·±çæçè¯­æ³ç¼ååå°ç³»ç»ã\n     * åç«¯å·¥ç¨åçæåºï¼æé«äºåç«¯çå¼åæçï¼å¢å¼ºäºå¯ç»´æ¤æ§\n     * æ°æ®å¯è§åç¾å®¶äºé¸£ï¼åºäºsvgï¼canvasï¼webGLå¼åçå¯è§åï¼3Då¨ç»å·²è¢«å¹¿æ³çåºç¨å°ç½ç«ä¸­ã\n     * å¤§åç«¯æ¶ä»£ï¼éçæºè½ææºçæ®åï¼å¦ä»Androidç«¯ãiOSç«¯ç­åç§ç§»å¨ç«¯çåºç¨ä¹è¶æ¥è¶æ®åï¼åä¸é¢åäºPCç«¯çwebåºç¨ï¼ä¹åçç§»å¨ç«¯åå±ãç±»ä¼¼åç§ææºappï¼å°ç¨åºçè¯çï¼ä½¿å¾äººä»¬ççæ´»è¶æ¥è¶ä¾¿å©ï¼è®©äººä¸ç¦éæ³ï¼å°æ¥çåç«¯æ¯å¦è½åºç¨å°å¨ç«¯ï¼å³ä¸å¥ä»£ç è½éç¨å¤ç§å¹³å°ã\n   * æè¿å¨å­¦ä»ä¹ï¼\n   * é¡¹ç®ä¸­ä½ å°è±¡ææ·±çå°æ¹ï¼æä»ä¹é¾ç¹ï¼æä¹è§£å³çï¼\n   * æè½åæ§æ ¼æä»ä¹ç¼ºé·ï¼\n   * å¹³æ¶çä»ä¹ä¹¦ï¼\n   * ä¼ç¹ï¼ç¼ºç¹ï¼\n   * è¯´è¯´å¯¹æä»¬å¬å¸çäºè§£ï¼\n   * èä¸è§åï¼\n   * åé®\n     * å¯¹æçè¯ä»·ï¼å»ºè®®ï¼\n     * é¨é¨çä¸å¡æåµï¼\n     * å¢éæ¶æï¼\n\n * santd\n   \n   * uploadï¼åºå±å®ç°è¿æ¯åºäºinputè¾å¥æ¡ï¼type=fileï¼ï¼ç¶åå©ç¨onchangeäºä»¶ï¼çå¬æä»¶éæ©çäºä»¶ï¼ç¶åå©ç¨formDataå¯¹è±¡è£è½½éè¦ä¸ä¼ çæä»¶ï¼æåéè¿XMLHttpRequestæ¥è¿è¡æä»¶çç½ç»å¼æ­¥ä¼ è¾ãéè¿xhr.upload çonprogress äºä»¶ççå¬ï¼å¯ä»¥æ­£ç¡®çè·åå°ä¸ä¼ æä»¶çtotalå¼åloadedçå¼ï¼ä»èå®æ¶çè®¡ç®åºå½åä¸ä¼ çè¿åº¦ã\n   * tabï¼keyãactive_key\n   * tableï¼éè¿ slot è®©ç¨æ·å¯ä»¥èªå®ä¹ column title å¹¶æ¯æè·å column ä¿¡æ¯\n\n * eslint-plugin-san\n   \n   * eslint-plugin-san æ¯ eslint çä¸ä¸ªæä»¶ï¼ç±»ä¼¼äº eslint-plugin-vueï¼åé¨éç½®äºä¸ç³»åéå¯¹æ§çè§å\n   * eslintæ§è¡åçï¼ä½¿ç¨è§£æå¨ espree å°ä»£ç è§£ææ ASTï¼è¿è¡è¯æ³åæä»¥åè¯­æ³åæï¼éè¿ DFS æ¥éå ASTï¼å¨éåçè¿ç¨ä¸­ eslint éè¿éæ©å¨æ¥å¹é AST ä¸çèç¹ï¼éè¿ä»£ç è·¯å¾åææ¥æ§å¶ä»£ç æ£æµçèå´ãæ¯ä¸ª rule é½å®ä¹äº create æ¹æ³ï¼ä¼è¿åä¸ä¸ª vistorï¼å³è®¿é®å°æäºèç¹æ¶ååºçæä½ï¼ï¼eslint ä¼æ¶ééç½®æä»¶ä¸­ææè§åç vistorï¼éå AST å¹¶è°ç¨ vistorï¼å¾å°æ£æµç»æãè§ååè¿å¯ä»¥å®ä¹ fix æ¹æ³ï¼å¨æ¥éçæ¶åå¯ä»¥è¿è¡ä¿®æ­£ã\n   * no-empty-attributes: é»è®¤æ£æµ class å style å±æ§ä¸è½ä¸ºç©ºï¼å¯ä»¥éè¿ options éç½®å¶ä»ä¸åè®¸ä¸ºç©ºçå±æ§ã\n   * data-name-casingï¼dataTypes, initData, computed ä¸­çæ°æ®å¨å¤ä¸ªåè¯çæåµä¸ä½¿ç¨ \"ä¸åçº¿\"ã\"ç­æ¨ªçº¿\"ã\"å¸æ¯å¡\"å½åè§åä¼æ¥éï¼æç¤ºç»ä¸ä½¿ç¨é©¼å³°å¼å½åæ³ã\n   * boolean-valueï¼å¼ºå¶å¸å°å±æ§ã<div attr></div>\n\n * san-loader:\n   \n   * SanLoaderPlugin å¨ webpack æ­£å¼æå»ºä¹åä¿®æ¹åæçéç½® rulesã\n   * webpack ä»å¥å£æä»¶åºå, éå°.sanæä»¶ï¼ç¬¬ä¸æ¬¡è°ç¨ san-loader æ¥å¤ç san åæä»¶, è¿ä¸ªè¿ç¨ä¼è°ç¨ san-sfc-compiler ç parseSFC æ¹æ³æ¥è§£ææä»¶åå®¹çæ import è¯­å¥ï¼å¯¹äºæ¯ä¸æ¡ import è¯­å¥åéå rules è¿è¡è§åå¹éãæåæåä»£ç åäº¤ç»å¯¹åº loader å¤ç\n\n\n# æéç®¡ç\n\n\n# RABC\n\nåºäºè§è²çè®¿é®æ§å¶ï¼Role-Based Access Controlï¼ç®ç§° RBACï¼ï¼æçæ¯éè¿ç¨æ·çè§è²ï¼Roleï¼ææå¶ç¸å³æéï¼å®ç°äºçµæ´»çè®¿é®æ§å¶ï¼ç¸æ¯ç´æ¥æäºç¨æ·æéï¼è¦æ´å ç®åãé«æãå¯æ©å±ã\n\n * ç¨æ·ï¼Userï¼ï¼ç³»ç»å®éä½¿ç¨èï¼å¦åå·¥ãç®¡çåï¼\n * è§è²ï¼Roleï¼ï¼èçº§æèè½çæ½è±¡éåï¼å¦ãè´¢å¡ä¸åããé¨é¨ä¸»ç®¡ãï¼\n * æéï¼Permissionï¼ï¼å¯¹ç³»ç»èµæºçæä½è®¸å¯ï¼å¦ãæ¥çæ¥è¡¨ããå¯¼åºæ°æ®ãï¼\n\n\n# åç«¯æéæ§å¶æµç¨\n\n 1. ç¨æ·ç»å½ä¸æéåå§å ç¨æ·ç»å½åï¼åç«¯è¿åè§è²æ è¯ï¼å¦roles: [\"finance_staff\"]ï¼åæéæ¸åï¼å¦permissions: [\"invoice:view\", \"budget:edit\"]ï¼åç«¯å°æéæ°æ®å­å¥ç¶æç®¡çå·¥å·ï¼å¦Vuex/Piniaï¼ï¼ä¸ºåç»­æ§å¶æä¾ä¾æ®\n 2. å¨æè·¯ç±çæ\n\n * è·¯ç±åçº§éç½®ï¼\n   * åºç¡è·¯ç±ï¼å¬å±é¡µé¢ï¼ç»å½é¡µã404ï¼\n   * å¨æè·¯ç±ï¼éæéæ§å¶ï¼ä»ªè¡¨çãè®¢åç®¡çï¼\n   * æ¯ä¸ªå¨æè·¯ç±éç½®meta.permissionså­æ®µæ è®°æéæéï¼å¦{ path: \"/pay\", meta: { permissions: [\"payment:access\"] } }ï¼\n * è·¯ç±è¿æ»¤é»è¾ï¼æ ¹æ®ç¨æ·æéæ¸åè¿æ»¤å¨æè·¯ç±ï¼ä»ä¿çç¨æ·ææè®¿é®çè·¯ç±éç½®ï¼éè¿router.addRoute()å¨ææè½½\n\n 3. åç½®å®å«æ ¡éª\n\n * å¨å±è·¯ç±å®å«ï¼å¨vue-routerçbeforeEaché©å­ä¸­ï¼å¯¹æ¯æ¬¡è·¯ç±è·³è½¬è¿è¡ä¸éæ ¡éªï¼\n   * æ¯å¦å·²ç»å½ï¼æªç»å½è·³è½¬è³ç»å½é¡µï¼\n   * æ¯å¦å·²è·åæéï¼é²æ­¢é¡µé¢å·æ°åæéä¸¢å¤±ï¼\n   * ç®æ è·¯ç±æ¯å¦å¨ç¨æ·æéèå´åï¼æ æéè·³è½¬è³403é¡µï¼\n * åµå¥è·¯ç±å¤çï¼å¯¹ç¶çº§è·¯ç±è®¾ç½®alwaysShow: trueï¼ç¡®ä¿å³ä½¿å­è·¯ç±æ æéï¼ç¶çº§èåä»å¯å±ç¤ºï¼ä½å­èåé¡¹ç½®ç°æéèï¼\n\n\n# ä»0å°1çBç«¯å¹³å°é¡¹ç®\n\n\n# ææ¯éå\n\n 1. æ¡æ¶éæ©ï¼ä¼åæçæ¡æ¶ï¼React/Vueï¼\n 2. è¯­è¨ä¸å·¥å·ï¼TypeScriptåå°è¿è¡æ¶éè¯¯ï¼ç»åViteæåæå»ºæçã\n 3. UIæ¡æ¶ï¼Ant Designï¼Reactï¼/ Elementï¼Vueï¼\n\n\n# æ¶æè®¾è®¡\n\n 1. æ¨¡ååä¸ç»ä»¶åï¼å¾®åç«¯ï¼ç¬ç«é¨ç½²ãææ¯æ è§£è¦ï¼/ æ¨¡ååï¼é«åèãä½è¦åï¼å¤ç¨ï¼\n 2. ç¶æç®¡çï¼vuex / redux\n 3. è·¯ç±è®¾è®¡ï¼æéæ§å¶ï¼RBACï¼/ å¨æè·¯ç±ï¼æ ¹æ®ç¨æ·è§è²å è½½ï¼\n\n\n# å·¥ç¨å\n\n 1. ä»£ç è§èï¼ESLint + Stylelint + Prettier\n 2. æµè¯ç­ç¥ï¼ååæµè¯ / e2eæµè¯\n 3. çæ§ä¸æ¥å¿ï¼æ§è½çæ§ï¼sentryæè·éè¯¯ï¼ / æ¥å¿ç®¡ç\n 4. éæé¨ç½²ï¼CI/CD\n\n\n# æ§è½ä¼å\n\n 1. å è½½ä¼åï¼æå è½½ / èµæºåç¼©\n 2. æ¸²æä¼åï¼é¿åéæ / èæåè¡¨\n 3. æå»ºä¼åï¼Tree shaking / æºè½åå",normalizedContent:"# htmlåºç¡\n\n * å¸¸è§è¡ååç´ ï¼<span>ã<a>ã<b>ã<strong>ã<img>ã<input>\n * å¸¸è§ååç´ ï¼<p>ã<h1>~<h6>ã<ul>ã<div>ã<form>\n * è¡ååç´ ãååç´ ãè¡åååç´ çåºå«ï¼input å img å±äºåªç§ï¼\n * html5å¸¸è§è¯­ä¹åæ ç­¾\n\n\n# javascriptåºç¡\n\n * é¢åå¯¹è±¡ä¸åºäºå¯¹è±¡\n   \n   * é¢åå¯¹è±¡çä¸ä¸ªåºæ¬ç¹å¾\n   * jsæ¯åºäºå¯¹è±¡ä½å®ç°äºé¢åå¯¹è±¡ç¼ç¨(ç»§æ¿ï¼å½æ°éè½½)\n   * å¦ä½å®ç°ç»§æ¿ï¼es5å­ç§ï¼es6çclassï¼\n   * ååä¸ååé¾\n   * objectä¸functionååå³ç³»\n   * å¦ä½å®ç°å½æ°éè½½ï¼argumentsï¼\n   * object.create, å¦ä½å®ç°\n\n * è¯­è¨çå¼ºç±»å/å¼±ç±»åï¼éæç±»å/å¨æç±»å\n\n * ä¸ºä»ä¹åçº¿ç¨ï¼webworker\n\n * æ°æ®ç±»åï¼å¿èï¼\n   \n   * 5ç§åºæ¬ + 1ç§å¤æ + 2ç§æ°å¢\n   * nullåundefinedåºå«\n     * nullæ¯ä¸åºè¯¥æå¼ï¼å¦ååé¾ç»ç¹\n     * undefinedæ¯ç¼ºå°å¼ï¼å¦åéå£°ææªèµå¼\n   * symbolï¼å®ä¹å¯¹è±¡çå¯ä¸å±æ§å\n   * bigintè§£å³çé®é¢ï¼ä»64ä½æµ®ç¹æ°è°èµ·\n   * å¼ç±»å / å¼ç¨ç±»åï¼å  / æ \n   * å¦ä½å®ä¹ä¸ä¸ªå¸¸éå¯¹è±¡object.freeze\n\n * è¿è¡ç±»åå¤æ­çæ¹å¼åä¼ç¼ºç¹\n   \n   * typeofï¼type of nullï¼ typeof nanï¼\n   * instanceofï¼æåå®ç°ï¼\n   * object.prototype.tostring.callï¼ä¸ºä»ä¹ç¨callï¼åé¨å±æ§[[class]]ï¼\n   * å¤æ­æ°ç»çæ¹æ³è³å°è¯´åº5ç§\n\n * ç±»åè½¬æ¢\n   \n   * è¿ç®ç¬¦å¸¦æ¥çç±»åè½¬æ¢ï¼-ï¼*ï¼ãï¼%ä¼åè½¬æ°å¼ï¼+ é¤å¤\n   * +çè§åï¼[] + {}ï¼{} + []\n   * == å === çåºå«\n   * ä»ä¹æåµ a === a-1ï¼number.max_safe_integer\n   * ä»ä¹æåµ a == 1 && a == 2 && a == 3 ä¸ºtrue\n\n * ä½ç¨å\n   \n   * å¨å±ä½ç¨å\n   * å½æ°ä½ç¨å\n   * åçº§ä½ç¨å\n   * è¯æ³ä½ç¨å\n   * å¨æä½ç¨å\n\n * ä½ç¨åï¼é¾ï¼ä¸æ§è¡ä¸ä¸æï¼æ ï¼çåºå«\n\n * thisçæåï¼ç®­å¤´å½æ°ä¸æ®éå½æ°åºå«ä¸newä¸ä¸ªå¯¹è±¡çè¿ç¨\n\n * call / apply / bind\n\n * é­åï¼é«é¶å½æ°ï¼vueä¸­æä»ä¹åºç¨\n\n * æ·±æ·è´ä¸æµæ·è´\n   \n   * json.stringifyä¸­ä¸å®å¨çjsonå¼ï¼åæ°\n   * json.parse(json.stringify)çé®é¢\n   * æåä¸ä¸ªæ·±æ·è´æ¹æ³\n\n * å½æ°ä¸åéè§£æé¡ºåºï¼ä¸è¬ä¸ºçä»£ç è¯´ç»æï¼\n   \n   * åéæå\n   * å½æ°å£°æä¼åçº§æé«\n   * let / const ææ¶æ§æ­»åº\n\n * es6\n   \n   * let / const ï¼åçº§ä½ç¨åï¼ä¸åè®¸éå¤å£°æï¼ææ¶æ§æ­»åºï¼\n   * ç®­å¤´å½æ°\n     * æ²¡ææé å½æ°ï¼æ²¡æåå(prototype)\n     * çç¥ return å³é®å­ï¼éå¼è¿å\n     * ç»§æ¿å½åä¸ä¸æç this å³é®å­\n     * æ²¡æargumentså±æ§ï¼å©ä½è¿ç®ç¬¦\n     * ç±äº ç®­å¤´å½æ°æ²¡æèªå·±çthisæéï¼éè¿ call() æ apply() æ¹æ³è°ç¨ä¸ä¸ªç®­å¤´å½æ°æ¶ï¼åªè½ä¼ éåæ°ï¼ä¸è½ç»å®thisï¼ï¼ä»ä»¬çç¬¬ä¸ä¸ªåæ°ä¼è¢«å¿½ç¥ã\n     * ç¨å¤ï¼ç®­å¤´å½æ°è¡¨è¾¾å¼å¯¹éæ¹æ³å½æ°æ¯æåéç\n   * æ©å±è¿ç®ç¬¦ï¼æé æ°ç»ï¼è§£ææ°ç»ï¼åæ°èµå¼ï¼\n   * å©ä½è¿ç®ç¬¦ï¼æ¥æ¶åæ°ï¼\n   * map, weakmap, set, weaksetï¼å¦ä½çè§£weak\n     * weakmapåweaksetçé®åªè½ä¸ºå¯¹è±¡\n     * å¼±å¼ç¨ï¼gcç®æ³ï¼åå­æ³æ¼çåºæ¯ï¼4ç§ï¼\n     * ä¸å¯è¿­ä»£ï¼åªæ¯æé¨åæ¹æ³\n   * æ¨¡æ¿å­ç¬¦ä¸²\n   * å¯¹è±¡å­é¢éçå¢å¼º\n   * object.assign / object.is / object.keys / object.values / object.entries\n\n * es2016~es2022\n   \n   * includes\n   \n   * æ±å¹è¿ç®ç¬¦ï¼**ï¼\n   \n   * object.values ä¸ object.entries\n   \n   * object.hasown()\n   \n   * string.prototype.padstart ä¸ sting.prototype.padend\n   \n   * async/await\n   \n   * å¼æ­¥è¿­ä»£ for await...of\n   \n   * é¡¶å± await\n   \n   * promise.prototype.finally\n   \n   * promise.allsettled\n   \n   * promise.any\n   \n   * flat ä¸ flatmap\n   \n   * ç©ºå¼åå¹¶è¿ç®ç¬¦\n   \n   * å¯éé¾æä½ç¬¦\n   \n   * dynamic import\n   \n   * bigint\n   \n   * æ°å¼åéç¬¦\n   \n   * at() æ¹æ³\n   \n   * class ç§æå­æ®µ\n\n * æ°ç»æ¹æ³ï¼foreach/find/map/filer/reduce/every/some\n\n * array.fromï¼å¦ä½åå§åä¸ä¸ªäºç»´æ°ç»\n\n * promise\n\n * æåpromise.allåpromise.race\n\n * promise.resolveåç§åæ°\n\n * reject å catch çåºå«\n   \n   * reject æ¯ç¨æ¥æåºå¼å¸¸ï¼catch æ¯ç¨æ¥å¤çå¼å¸¸\n   * reject æ¯ promise çæ¹æ³ï¼è catch æ¯ promise å®ä¾çæ¹æ³\n   * rejectåçä¸è¥¿ï¼ä¸å®ä¼è¿å¥thenä¸­çç¬¬äºä¸ªåè°ï¼å¦æthenä¸­æ²¡æåç¬¬äºä¸ªåè°ï¼åè¿å¥catch\n   * ç½ç»å¼å¸¸ï¼æ¯å¦æ­ç½ï¼ï¼ä¼ç´æ¥è¿å¥catchèä¸ä¼è¿å¥thençç¬¬äºä¸ªåè°\n\n * generator\n\n * async / await ï¼generator + èªå¨æ§è¡å¨ï¼\n   \n   * æ´å¥½çè¯­ä¹\n   \n   > async å await, æ¯èµ·æå·åyieldï¼è¯­ä¹æ´å æ¸æ¥ï¼asyncè¡¨ç¤ºå½æ°éé¢æå¼æ­¥æä½ï¼awaitè¡¨ç¤ºç´§è·å¨åé¢çè¡¨è¾¾å¼éè¦ç­å¾ç»æã\n   \n   * æ´å¹¿çéç¨æ§\n   \n   > coæ¨¡åçº¦å®ï¼yieldå½ä»¤åé¢åªè½æ¯thunkå½æ°æèpromiseå¯¹è±¡ï¼ èasyncå½æ°çawaitåé¢ï¼å¯ä»¥æ¯promiseååå§ç±»åå¼(æ°å¼ãå­ç¬¦ä¸²åå¸å°å¼ï¼ä½è¿æ¶ä¼èªå¨è½¬æç«å³ resolved ç promise å¯¹è±¡, æ¥çspawnå½æ°ä¸­promise.resolve(next.value))\n   \n   * è¿åå¼æ¯promise\n   \n   > æ¯generatorå½æ°çè¿åå¼æ¯iteratorå¯¹è±¡æ¹ä¾¿ï¼å¯ä»¥ä½¿ç¨thenæ¹æ³æå®ä¸ä¸æ­¥æä½\n\n * å®ä»»å¡/å¾®ä»»å¡/äºä»¶å¾ªç¯\n   \n   * æµè§å¨ä¸nodeäºä»¶å¾ªç¯åºå«ï¼libuvï¼cè¯­è¨ï¼\n\n * å¾®ä»»å¡æåªäºï¼mutationobserveræ¯ä»ä¹\n   \n   * é¢è¯é¢çä»£ç è¯´ç»æ\n\n * for in ä¸ for of\n   \n   * for inï¼å­ç¬¦ä¸²ï¼/ object.keys / object.getownpropertynames åºå«\n   * æ§è½ for...i > foreach > for...of > map > for...in\n   * for in ä¸ºä»ä¹æçä½ï¼è¿æ¯å ä¸º for...in æä¸äºç¹æ®çè¦æ±ï¼åæ¬ï¼\n     * éåææå±æ§ï¼ä¸ä»æ¯ own properties ä¹åæ¬ååé¾ä¸çææå±æ§ã\n     * å¿½ç¥ enumerable ä¸º false çå±æ§ã\n     * å¿é¡»æç¹å®é¡ºåºéåï¼åéåæææ°å­é®ï¼ç¶åæç§åå»ºå±æ§çé¡ºåºéåå©ä¸çã\n\n * for of ï¼è¿­ä»£å¨ï¼generator\n\n * äºä»¶åæ³¡ / äºä»¶æè· / äºä»¶å§æ\n   \n   * dom äºä»¶æµ\n   * target å currenttarget çåºå«\n     * targetè·åæ¯è§¦åäºä»¶çæºå¯¹è±¡\n     * currenttargetè·åçäºä»¶ç»å®çå¯¹è±¡\n\n * å½æ°å¼ç¼ç¨\n   \n   * é«é¶å½æ°\n   * çº¯å½æ° / è®°å¿å½æ°\n   * å½æ°æ¯éå / å½æ°ç»å\n   * å°¾éå½ / å°¾è°ç¨\n   * å¸¸è§æ°ç»æ¹æ³ï¼åªäºæ¯é«é¶å½æ°ï¼åªäºä¼æ¹åæ°ç»æ¬èº«\n     * push,pop,splice,unshift,shift,reverse\n     * slice,concat,foreach,map,filter,some,every\n     * ['1', '2', '3'].map(parseint)çç»æ\n\n * settimeoutè¯¯å·®\n\n * babel\n   \n   * ä¸ºä»ä¹ä½¿ç¨babel\n\n * babelåçï¼è¯æ³åæçætokensæµï¼è¯­æ³åæè½¬æ¢æastï¼astèç¹éåè¿è¡æ·»å æ´æ°ç§»é¤ï¼çæes5å­ç¬¦ä¸²ï¼\n   \n   * babelæä¹å¤çesmæ¨¡ååï¼ç¼è¯æcommonjsé£æ ¼ï¼\n\n\n# cssåºç¡\n\n * çæ¨¡å\n\n * å±ä¸­ä¸ä¸ªåç´ çæ¹æ³\n   \n   * æ°´å¹³2ç§ï¼åç´3ç§ï¼åç´æ°´å¹³5ç§\n   * åè¡ææ¬æ°´å¹³åç´å±ä¸­ï¼text-align + line-heightï¼ï¼å¤è¡ææ¬æ°´å¹³åç´å±ä¸­ï¼table-cellï¼\n\n * bfcå¸å±è§åï¼å¦ä½åå»ºbfc\n\n * grid ç½æ ¼å¸å±ï¼å®ç°ä¸ä¸ªå®½åº¦1ï¼2ï¼3çç½æ ¼å¸å±\n\n * ä¸¤æ å¸å±ï¼å³ä¾§èªéåºï¼\n   \n   * æµ®å¨ï¼è§¦åbfc\n   * flexå¸å±ï¼å·¦ä¾§åºå®å®½åº¦ï¼å³ä¾§flex: 1\n   * å·¦ä¾§æµ®å¨ï¼å³ä¾§è®¾ç½®å·¦è¾¹è·\n\n * ä¸æ å¸å±ï¼ä¸­é´èªéåºï¼\n   \n   * å·¦å³ä¾§æµ®å¨ï¼ä¸­é´è®¾ç½®å·¦å³è¾¹è·ï¼å·¦å³é«åº¦400ï¼ä¸­é´é«åº¦300ï¼bodyé«åº¦ï¼å¦ä½æ¸é¤æµ®å¨ï¼\n   * å·¦å³ä¾§ç»å¯¹å®ä½ï¼ä¸­é´è®¾ç½®å·¦å³è¾¹è·\n   * ä¸­é´ flex: 1\n   * grid å¸å±ï¼grid-template-columns: 200px auto 200px;\n   * å£æ¯å¸å±ä¸åé£ç¿¼å¸å±ï¼margin-left: -100%;ç¸å¯¹äºç¶åç´ å®½åº¦çç¾åæ¯\n\n * flex å¸å±ï¼ä¸ä¸ªå¼çå«ä¹\n\n * marginåä¸¤ä¸ªå¼ï¼ä¸ä¸ªå¼ï¼åä¸ªå¼\n\n * csséæ©å¨çä¼åçº§è§å\n\n * è±ç¦»ææ¡£æµ / å®ä½ / æµ®å¨çåºå«\n\n * æ¸é¤æµ®å¨çæ¹æ³\n\n * link ä¸ @import çåºå«\n\n * jsæ§è¡ä¼é»å¡domæ çè§£æåæ¸²æï¼é£ä¹csså è½½ä¼é»å¡domæ çè§£æåæ¸²æåï¼cssä¼é»å¡jså\n\n * domcontentloaded å window.onload åºå«\n\n * ç»ä¸ä¸ªä¸è§å½¢ / æå½¢\n\n * éèä¸ä¸ªåç´ çæ¹æ³\n\n * é»è¾åç´ ä¸ç©çåç´ \n\n * dpr\n\n * em / rem / rpx / vw / vh\n\n * rpxå¦ä½è®¡ç®çï¼iphone6ä¸750rpx = 375pxï¼é»è¾åç´ ï¼iphone5ä¸750rpx = 320pxï¼é»è¾åç´ ï¼\n\n * ç§»å¨ç«¯ 1px é®é¢\n\n * display / position / transformæåªäºå±æ§\n\n * å¦ä½å®ç°å¾çæå è½½\n   \n   * çå¬äºä»¶å¨åªä¸ªé¶æ®µåï¼ï¼mountedï¼çå®domæè½½å®æ¯ï¼beforedestroyéæ¯ï¼\n\n * ä¼ªç±»åä¼ªåç´ \n\n * cssç¡¬ä»¶å é\n\n * åªäºcsså±æ§ä¼è§¦ååæµä¸éç»\n\n\n# vueç¸å³\n\n * vue ååºå¼åç 2.x\n   * åå¸è®¢éæ¨¡å¼ï¼æåï¼\n   * è§å¯èæ¨¡å¼ï¼æåï¼\n   * vue å®ä¾åå§åè¿ç¨\n   * ç»ä»¶æ¸²æè¿ç¨ï¼3ç§watcherï¼\n   * ååºå¼è¿ç¨æ»ç»\n   * computedåwatcherçåçï¼æä»ä¹åºå«ååºç¨åºæ¯\n * vue ååºå¼åç 3.0\n   * composition api\n   * å½æ°å¼ç¼ç¨\n   * æ§è½æå\n     * proxy å¯¹æ¯ä¸ä¸ object.defineproperty\n     * ç¼è¯ä¼åï¼fragmentsï¼éææåï¼patch flag\n     * æºç ä½ç§¯ä¼å\n   * reactive / ref / torefs åºå«\n   * effect / track / trigger åè½\n * vue ç»ä»¶éä¿¡çæ¹å¼ï¼8ç§ï¼\n * vuex\n   * state\n   * getters\n   * mutations\n   * actions\n   * modules\n * vue ä¸­ç keyçä½ç¨\n   * ä»ä¹æ¯èæ dom\n   * diffç®æ³çè¿ç¨ï¼patch / patchvnode / updatechildrenï¼\n * nexttickçåç\n * dataä¸ºä»ä¹æ¯å½æ°ï¼å¯ä»¥æ¢æç®­å¤´å½æ°åï¼thisæåé®é¢ï¼åºè¯¥æåvmå®ä¾ï¼\n * keep-aliveçåç\n   * lruç®æ³ï¼fifo / optï¼\n   * èå°æä½ç³»ç»é¡ºä¾¿è¯´ä¸ä¸è¿ç¨ä¸çº¿ç¨çåºå«\n   * è¿ç¨é´éä¿¡çæ¹å¼\n * ä½ åè¿åªäº vue çæ§è½ä¼å\n * mvvm\n * vueæ¸²ææµç¨\n * vueçå½å¨æ\n * mountedåcreatedä½ æä¹åºååä½¿ç¨ï¼å­èï¼\n * ç¶å­ç»ä»¶ççå½å¨æè§¦åé¡ºåº\n * å¦ä½çè§£ææ§½slot\n * vue css scoped\n\n\n# æµè§å¨ç¸å³\n\n * è¾å¥ url å°é¡µé¢å±ç°çè¿ç¨\n   \n   * åè¾å¥æ¶ï¼æµè§å¨ä¼ä»åå²è®°å½ãä¹¦ç­¾æç¼å­ä¸­æ¥æ¾å°åï¼æ¾å°äºï¼ä¼ä»ç¼å­ä¸­è°åºé¡µé¢æ¾ç¤ºåºæ¥\n   \n   * ååè§£æipå°åï¼æµè§å¨ç¼å­ => æä½ç³»ç»ç¼å­ => æ¬å°dnsæå¡å¨ => æ ¹ååæå¡å¨ => é¡¶çº§ååæå¡å¨ => äºçº§ååæå¡å¨)ï¼è¿­ä»£æ¥è¯¢ä¸éå½æ¥è¯¢çåºå«ï¼å¦æå¼å¥äºcdnï¼åæ¬å°dnsç³»ç»ä¼å°ååçè§£ææäº¤ç»cnameæåçcdnä¸ç¨dnsæå¡å¨ï¼cdnçdnsæå¡å¨å°cdnçå¨å±è´è½½åè¡¡è®¾å¤ipå°åè¿åç»ç¨æ·ãcdnå¨å±è´è½½åè¡¡è®¾å¤ä¼éæ©ä¸å°ç¨æ·æå±åºåçåºåè´è½½åè¡¡è®¾å¤ï¼å¹¶å°è¯·æ±è½¬åå°æ­¤è®¾å¤ä¸ãï¼\n   \n   * tcpä¸æ¬¡æ¡æ\n   \n   * tcpå®å¨è¿æ¥ä¸åé http è¯·æ±\n     \n     * å¸¸è§è¯·æ±å¤´å­æ®µï¼connectionï¼cookieï¼hostï¼refererï¼originï¼content-type\n   \n   * æå¡å¨å¤çè¯·æ±å¹¶è¿å http ååº\n   \n   *       ç±»å«                       åå ç­è¯­\n     1xx   informationalï¼ä¿¡æ¯æ§ç¶æç ï¼    æ¥æ¶çè¯·æ±æ­£å¨å¤ç\n     2xx   successï¼æåç¶æç ï¼           è¯·æ±æ­£å¸¸å¤çå®æ¯\n     3xx   redirectionï¼éå®åç¶æç ï¼      éè¦è¿è¡éå æä½ä»¥å®æè¯·æ±\n     4xx   client errorï¼å®¢æ·ç«¯éè¯¯ç¶æç ï¼   æå¡å¨æ æ³å¤çè¯·æ±\n     5xx   server errorï¼æå¡å¨éè¯¯ç¶æç ï¼   æå¡å¨å¤çè¯·æ±åºé\n     \n     1xxï¼ä¿¡æ¯æ§ç¶æç ï¼è¡¨ç¤ºæå¡å¨å·²æ¥æ¶äºå®¢æ·ç«¯è¯·æ±ï¼å®¢æ·ç«¯å¯ç»§ç»­åéè¯·æ±ã\n     \n     100 continue\n     103 early hints ç¨äºå¨æç»ååºä¹ååéä¸ä¸ªåæ­¥ç http ååºï¼æåé¡µé¢æ¸²ææ§è½ã\n     \n     \n     http æ°å¢ç 103 ç¶æç ï¼è¿æ¬¡ç»äºæ´¾ä¸ç¨åºäºï¼\n     \n     2xxï¼æåç¶æç ï¼è¡¨ç¤ºæå¡å¨å·²æåæ¥æ¶å°è¯·æ±å¹¶è¿è¡å¤çã\n     \n     200 ok è¡¨ç¤ºå®¢æ·ç«¯è¯·æ±æå\n     204 no content è¯·æ±å¤çæåï¼ä½æ²¡æèµæºå¯è¿åï¼æµè§å¨é¡µé¢ä¸ä¼åçæ´æ°ï¼ä¸è¬å¨åªéè¦ä»å®¢æ·ç«¯å¾æå¡å¨åéä¿¡æ¯ï¼èå¯¹å®¢æ·ç«¯ä¸éè¦åéæ°ä¿¡æ¯åå®¹çæåµä¸ä½¿ç¨ã\n     206 partial content è¡¨ç¤ºå®¢æ·ç«¯è¿è¡äºèå´è¯·æ±ï¼èæå¡å¨æ§è¡äºè¿é¨åç get è¯·æ±ãååºæ¥æä¸­åå«ç± content-range æå®èå´çå®ä½åå®¹ã\n     \n     \n     3xxï¼éå®åç¶æç ï¼è¡¨ç¤ºæå¡å¨è¦æ±å®¢æ·ç«¯éå®åã\n     \n     301å302å¯¹seoçå½±å\n     \n     301 moved permanently æ°¸ä¹æ§éå®åï¼ååºæ¥æçlocationé¦é¨åºè¯¥æè¯¥èµæºçæ°url\n     302 found ä¸´æ¶æ§éå®åï¼ååºæ¥æçlocationé¦é¨ç»åºçurlç¨æ¥ä¸´æ¶å®ä½èµæº\n     303 see other è¯·æ±çèµæºå­å¨çå¦ä¸ä¸ªuriï¼å®¢æ·ç«¯åºä½¿ç¨ get æ¹æ³å®åè·åè¯·æ±çèµæº\n     304 not modified æå¡å¨åå®¹æ²¡ææ´æ°ï¼å¯ä»¥ç´æ¥è¯»åæµè§å¨ç¼å­\n     \n     301å302æä»ä¹åºå«ï¼\n     \n     è¯¦ç»æ¥è¯´ï¼301å302ç¶æç é½è¡¨ç¤ºéå®åï¼å°±æ¯è¯´æµè§å¨å¨æ¿å°æå¡å¨è¿åçè¿ä¸ªç¶æç åä¼èªå¨è·³è½¬å°ä¸ä¸ªæ°çurlå°åï¼è¿ä¸ªå°åå¯ä»¥ä»ååºçlocationé¦é¨ä¸­è·åï¼ç¨æ·çå°çææå°±æ¯ä»è¾å¥çå°åaç¬é´åæäºå¦ä¸ä¸ªå°åbï¼ââè¿æ¯å®ä»¬çå±åç¹ãä»ä»¬çä¸åå¨äºã301è¡¨ç¤ºæ§å°åaçèµæºå·²ç»è¢«æ°¸ä¹å°ç§»é¤äºï¼è¿ä¸ªèµæºä¸å¯è®¿é®äºï¼ï¼æç´¢å¼æå¨æåæ°åå®¹çåæ¶ä¹å°æ§çç½åäº¤æ¢ä¸ºéå®åä¹åçç½åï¼302è¡¨ç¤ºæ§å°åaçèµæºè¿å¨ï¼ä»ç¶å¯ä»¥è®¿é®ï¼ï¼è¿ä¸ªéå®ååªæ¯ä¸´æ¶å°ä»æ§å°åaè·³è½¬å°å°åbï¼æç´¢å¼æä¼æåæ°çåå®¹èä¿å­æ§çç½åã\n     \n     307 temporary redirectï¼ä¸´æ¶éå®åï¼ï¼å°½ç®¡ 302 æ åç¦æ­¢ post åæ¢æ getï¼ä½å®éä½¿ç¨æ¶å¤§å®¶å¹¶ä¸éµå®ã307 ä¼éµç§æµè§å¨æ åï¼ä¸ä¼ä» post åæ getã\n     308 permanent redirect ï¼æ°¸ä¹éå®åï¼\n     \n     307å308çåºç°ä¹æ¯ç»ä¸é¢çè¡ä¸ºåä¸ªè§èï¼ä¸è¿æ¯ä¸åè®¸éå®åæ¶æ¹åè¯·æ±æ¹æ³\n     \n     302 å¨æåçå®ä¹ä¸­ï¼åå®¹åç°å¨ç 307 æ¯ä¸æ ·çï¼ä¸åè®¸éå®åæ¹æ³çæ¹åãä½æ¯æ©ææµè§å¨å¨å®ç°çæ¶åæçå®ç°æ 303ï¼getï¼ çææï¼æçå®ç°æ 307ï¼postï¼ çææãç®åè¯´ä¸å°±æ¯ http 1.0éé¢302å·æäºä¹æ§ï¼å¨http 1.1ä¸­å å¥303å307å°±æ¯ä¸ºäºæ¶é¤äºä¹æ§ã\n     \n     \n     4xxï¼å®¢æ·ç«¯éè¯¯ç¶æç ï¼è¡¨ç¤ºå®¢æ·ç«¯çè¯·æ±æéæ³åå®¹ã\n     \n     400 bad request è¡¨ç¤ºå®¢æ·ç«¯è¯·æ±æè¯­æ³éè¯¯ï¼ä¸è½è¢«æå¡å¨æçè§£\n     401 unauthonzed è¡¨ç¤ºè¯·æ±æªç»ææï¼è¯¥ç¶æä»£ç å¿é¡»ä¸ www-authenticate æ¥å¤´åä¸èµ·ä½¿ç¨\n     403 forbidden è¡¨ç¤ºæå¡å¨æ¶å°è¯·æ±ï¼ä½æ¯æç»æä¾æå¡ï¼éå¸¸ä¼å¨ååºæ­£æä¸­ç»åºä¸æä¾æå¡çåå \n     404 not found è¯·æ±çèµæºä¸å­å¨ï¼ä¾å¦ï¼è¾å¥äºéè¯¯çurl\n     \n     \n     5xxï¼æå¡å¨éè¯¯ç¶æç ï¼è¡¨ç¤ºæå¡å¨æªè½æ­£å¸¸å¤çå®¢æ·ç«¯çè¯·æ±èåºç°æå¤éè¯¯ã\n     \n     500 internel server error è¡¨ç¤ºæå¡å¨åçä¸å¯é¢æçéè¯¯ï¼å¯¼è´æ æ³å®æå®¢æ·ç«¯çè¯·æ±\n     503 service unavailable è¡¨ææå¡å¨ææ¶å¤äºè¶è´è½½ææ­£å¨è¿è¡åæºç»´æ¤ï¼ç°å¨æ æ³å¤çè¯·æ±ã\n     \n\n * å¸¸è§ååºå¤´å­æ®µï¼set-cookieï¼cache-controlï¼e-tagï¼last-modifiedï¼access-control-allow-origin\n   \n   * tcp åæ¬¡æ¥æï¼ä¸ºä»ä¹è¦ç­ 2msl\n\n * æµè§å¨è§£ææ¸²æ\n   \n   * gcç®æ³\n     \n     * æ è®°æ¸é¤ / å¼ç¨è®¡æ° / æ è®°æ´ç\n     * åå­æ³æ¼ / åå­æº¢åº\n     * æ°çä»£ / èçä»£\n   \n   * ä»ç»ä¸æµè§å¨å¤è¿ç¨æ¶æï¼ç½ç«éç¦»ææ¯\n   \n   * æ¸²æè¿ç¨\n     \n     * ä¸ä¸ªçº¿ç¨ï¼compositor thread / main thread / compositor tile worker(s)ï¼\n     * js ä¼é»å¡ dom è§£æ\n     * css ä¸ä¼é»å¡ dom è§£æä¼é»å¡æ¸²æ\n     * scriptæ ç­¾ä¸­çasync / defer\n     * domcontentloadedåonloadçåºå«ï¼1æ¯å¨domæ è§£æå®æ¯ï¼2æ¯é¡µé¢å®å¨å è½½å®ï¼\n   \n   * æµè§å¨ç¼å­\n     \n     * åç«¯ç¼å­ï¼httpç¼å­ / æµè§å¨ç¼å­ï¼\n     * ç¼å­å­å¨å¨åªéï¼\n     * å¼ºç¼å­ / ååç¼å­ï¼ä¼åçº§ï¼\n     * expiresï¼http1.0 å·²è¿æ¶ï¼ç¼ºç¹è¦æ±æ¶é´ä¸¥æ ¼åæ­¥ï¼\n     * cache-control ï¼http1.1 / max-age / no-cache / no-store / public / private / s-maxageï¼\n     * max-age = 0 ä¼ææ ·\n     * etag / last-modifiedï¼e-tagå¯¹æå¡ç«¯æä»ä¹å½±åï¼æ§è½ï¼è®¡ç®hashï¼å¦ä½è®¡ç® last-modify + content-lengthï¼\n     * hashãchunkhashãcontenthash\n     * localstorage / sessionstorage / cookie\n   \n   * é¤äºcss,jsèµæºï¼é£htmlæä»¶ä¼ç¼å­å\n   \n   * æ ç­¾é¡µå¦ä½éä¿¡\n   \n   * cookie + serinterval\n     \n     * localstorage\n   \n   * webworker\n   \n   * websocket\n   \n   * é¢æ£è¯·æ±\n   \n   * æµè§å¨æå¤§å¹¶åè¯·æ±èµæºæ°\n\n\n# ç½ç»ä¸åè®®ç¸å³\n\n * ä»ä¹æ¯ajaxï¼æåï¼\n\n * è·¨åçåå ä»¥åè§£å³æ¹å¼\n   \n   * jsonp\n     * jsonpè¯·æ±é¦åæ¯ä¸ºäºè§£å³è·¨åé®é¢èå­å¨çä¸ç§æ°é´è§£å³æ¹æ¡\n     * éè¿æ ç­¾çå½¢å¼åè¯·æ±\n     * éè¦ååç«¯åå­¦è¿è¡çº¦æ\n     * åªè½ä½¿ç¨getè¯·æ±\n   * cors\n   * iframeçå ç§æ¹å¼\n   * postmessageï¼window.postmessage(message,targetorigin) æ¹æ³æ¯html5æ°å¼è¿çç¹æ§ï¼å¯ä»¥ä½¿ç¨å®æ¥åå¶å®çwindowå¯¹è±¡åéæ¶æ¯ï¼æ è®ºè¿ä¸ªwindowå¯¹è±¡æ¯å±äºåæºæä¸åæºï¼\n   * iframe + document.domainï¼ç¨äºäºçº§ååç¸åçæåµä¸ï¼æ¯å¦ a.test.com å b.test.com ï¼\n   * iframe + window.name\n   * iframe + location.hash\n   * nginxååä»£ç\n   * websocket\n   * web-dev-serverä¸­çproxy\n   \n   æµè§å¨çåæºç­ç¥çç®çå°±æ¯ä¸ºäºé²æ­¢ xssï¼csrf ç­æ¶ææ»å»ã\n   \n   è·¨åéå¶çèµæº:\n   1.æ°æ®å­å¨éå¶ï¼cookie, localstorage, indexdb æ æ³è¯»å\n   2.èæ¬ api éå¶ï¼dom æ æ³æä½\n   3.ç½ç»è¯·æ±éå¶ï¼xhr è¯·æ±æ æ³æ¥æ¶ååº\n   \n   åçè·¨åæ¶ï¼åè®¸è¿è¡çæä½:\n   1.éå¸¸åè®¸è·¨ååæä½ï¼linkãredirectãè¡¨åæäº¤ï¼\n   2.éå¸¸åè®¸è·¨åèµæºåµå¥ï¼scriptãimgãvideo...ï¼\n   3.éå¸¸ç¦æ­¢è·¨åè¯»æä½(ajax)\n   4.å¯ä»¥æ­£å¸¸åéè¯·æ±ï¼å¯ä»¥æºå¸¦cookie(withcredentials)ï¼ä½æ¯æµè§å¨ä¼éå¶æ¥èªäºä¸ååçèµæºçæ¥æ¶\n   \n\n * http å https\n   \n   * http 0.9 / 1.0 / 1.1 / 2.0\n     \n     * http0.9\n       * åªæ¯æ get\n       * æ²¡æè¯·æ±å¤´æ¦å¿µï¼ååºååªè½è¿å html\n     * http1.0\n       * è¯·æ±æ¹å¼æ°å¢äºpostï¼headç­æ¹å¼\n       * å¢æ·»äºè¯·æ±å¤´åååºå¤´çæ¦å¿µ\n       * æ©åäºä¼ è¾åå®¹æ ¼å¼ï¼å¾çãé³è§é¢èµæºãäºè¿å¶ç­é½å¯ä»¥è¿è¡ä¼ è¾\n       * é®é¢ï¼æ¯è¯·æ±ä¸æ¬¡é½è¦å»ºç«ä¸æ¬¡è¿æ¥\n     * http1.1\n       * é¿è¿æ¥ï¼æ°å¢connectionå­æ®µï¼å¯ä»¥è®¾ç½®keep-aliveå¼ä¿æè¿æ¥ä¸æ­å¼\n       * ç®¡éåï¼åºäºä¸é¢é¿è¿æ¥çåºç¡ï¼ç®¡éåå¯ä»¥ä¸ç­ç¬¬ä¸ä¸ªè¯·æ±ååºç»§ç»­åéåé¢çè¯·æ±ï¼ä½ååºçé¡ºåºè¿æ¯æç§è¯·æ±çé¡ºåºè¿åï¼æ¯è¾é¸¡èï¼ä»ç¶ä¼é»å¡ã\n     * ç¼å­å¤çï¼æ°å¢å­æ®µcache-controlï¼æ°å¢ç¶æç 303ï¼307\n       * é®é¢ï¼åºäºæä»¶ä¸²è¡ä¼ è¾ï¼éå¤´é»å¡ï¼åä¸è¯·æ±éè¦ç­åä¸è¯·æ±è¿åï¼ï¼æå¤§å¹¶åæ°éå¶\n   \n   * http2.0\n     \n     * äºè¿å¶åå¸§\n     * é¦é¨åç¼©\n     * å¤è·¯å¤ç¨\n   \n   * tcpéå¤´é»å¡\n     \n     * http2éè¿åå¸§é¿åäºè¯·æ±æ¶çéé¦é»å¡é®é¢ï¼ä½tcpå±é¢çé»å¡æ¯http2æ æ³è§£å³çãå ä¸ºtcpæ¯å¯é çä¼ è¾ï¼ä¸æ¦ä¸¢åå°±è¦éæ°ååï¼é»å¡åç»­ï¼è½ç¶ææ»å¨çªå£ï¼ä½ä¹æ²¡æå½»åºè§£å³\n   \n   * æä¹åå° http è¯·æ±\n     \n     * éªç¢§å¾\n     * åå¹¶ js å cssï¼æå»ºå·¥å·å®æï¼\n     * å©ç¨æµè§å¨ç¼å­\n\n * é¿è¿æ¥ä¸å¤è·¯å¤ç¨\n\n * ssl/tlsï¼å¯¹ç§°å å¯ / éå¯¹ç§°å å¯\n\n * httpsä¸»è¦æµç¨ï¼è¯ä¹¦çä½ç¨\n\n * ä¸­é´äººæ»å»\n   \n   1)å®¢æ·ç«¯åéè¯·æ±å°æå¡ç«¯ï¼è¯·æ±è¢«ä¸­é´äººæªè·ã\n   \n   2)æå¡å¨åå®¢æ·ç«¯åéå¬é¥ã\n   \n   3)ä¸­é´äººæªè·å¬é¥ï¼ä¿çå¨èªå·±æä¸ãç¶åèªå·±çæä¸ä¸ªãä¼ªé çãå¬é¥ï¼åç»å®¢æ·ç«¯ã\n   \n   4)å®¢æ·ç«¯æ¶å°ä¼ªé çå¬é¥åï¼çæå¯æåç»æå¡å¨ã\n   \n   5)ä¸­é´äººè·å¾å¯æï¼ç¨èªå·±çç§é¥è§£å¯ãåæ¶ç¨çæ­£çå¬é¥åç»æå¡å¨ã\n   \n   6)æå¡å¨è·å¾å å¯ä¿¡æ¯ï¼ç¨èªå·±çç§é¥è§£å¯ã\n   \n\n * httpè¯·æ±æ¹æ³\n\n * content-typeæåªäº\n\n * ç®åè¯·æ±åå¤æè¯·æ±\n   \n   * åªè¦åæ¶æ»¡è¶³ä»¥ä¸ä¸¤å¤§æ¡ä»¶ï¼å°±å±äºç®åè¯·æ±\n     \n     æ¡ä»¶1ï¼ä½¿ç¨ä¸åæ¹æ³ä¹ä¸ï¼getï¼headï¼post\n     \n     æ¡ä»¶2ï¼content-type çå¼ä»éäºä¸åä¸èä¹ä¸ï¼\n     \n     * text/plain\n       * multipart/form-data\n       * application/x-www-form-urlencoded\n\n * tcp ä¸æ¬¡æ¡æ / åæ¬¡æ¥æ\n   \n   * syn (synchronouså»ºç«èæº)\n   * ack (acknowledgement ç¡®è®¤)\n   * fin (finishç»æ)\n\n * sequence number (é¡ºåºå·ç )\n\n * tcp ä¸ udp çåºå«äºåºç¨åºæ¯\n   \n   * osiä¸å±æ¨¡åä¸ tcp/ip äºå±æ¨¡å\n   \n   * cookieï¼sessionï¼tokenï¼jwt\n     \n     * cookieå¸¦æ¥çå®å¨æ§é®é¢åå¦ä½é²å¾¡\n     \n     * cookieçå±æ§\n       \n       * expireå±æ§ï¼æå®æµè§å¨å¯åé cookie çæææï¼\n       * domainå±æ§ï¼æå® cookie å¯ä»¥éè¾¾çä¸»æºåï¼å¨set-cookieä¸­è®¾ç½®ï¼\n       * secure å±æ§ï¼å±æ§ç¨äºéå¶ web é¡µé¢ä»å¨ https å®å¨è¿æ¥æ¶ï¼æå¯ä»¥åé cookieï¼\n       * httponly å±æ§ï¼ cookie çæ©å±åè½ï¼å®ä½¿ javascript èæ¬æ æ³è·å¾ cookieï¼\n     \n     * cookieå¦ä½è¢«æºå¸¦\n       \n       * ååè¯·æ±ä¸ï¼ajaxä¼èªå¨å¸¦ä¸åæºçcookieï¼\n       * è·¨åè¯·æ±ä¸ï¼ajaxä¸ä¼èªå¨æºå¸¦åæºçcookieï¼éè¦éè¿åç«¯éç½®ç¸åºåæ°æå¯ä»¥è·¨åæºå¸¦åæºcookieï¼ withcredentials: true\n       * ajaxè¯·æ±ä»»ä½æ¶åé½ä¸ä¼å¸¦ä¸ä¸åæºçcookie\n     \n     * sessionæµç¨ï¼\n       \n       * ç¨æ·ç¬¬ä¸æ¬¡è¯·æ±æå¡å¨çæ¶åï¼æå¡å¨æ ¹æ®ç¨æ·æäº¤çç¸å³ä¿¡æ¯ï¼åå»ºå¯¹åºç sessionï¼ä¿å­ç¸å³æ°æ®ï¼æ¯å¦ç¨æ·è§è²ãç»å½æ¶é´ç­ç­ã\n       * è¯·æ±è¿åæ¶å°æ­¤ session çå¯ä¸æ è¯ä¿¡æ¯ sessionid è¿åç»æµè§å¨\n       * æµè§å¨æ¥æ¶å°æå¡å¨è¿åç sessionid ä¿¡æ¯åï¼ä¼å°æ­¤ä¿¡æ¯å­å¥å° cookie ä¸­ï¼åæ¶ cookie è®°å½æ­¤ sessionid å±äºåªä¸ªåå\n       * å½ç¨æ·ç¬¬äºæ¬¡è®¿é®æå¡å¨çæ¶åï¼è¯·æ±ä¼èªå¨å¤æ­æ­¤ååä¸æ¯å¦å­å¨ cookie ä¿¡æ¯ï¼å¦æå­å¨èªå¨å° cookie ä¿¡æ¯ä¹åéç»æå¡ç«¯ï¼æå¡ç«¯ä¼ä» cookie ä¸­è·å sessionidï¼åæ ¹æ® sessionid æ¥æ¾å¯¹åºç session ä¿¡æ¯ï¼å¦ææ²¡ææ¾å°è¯´æç¨æ·æ²¡æç»å½æèç»å½å¤±æï¼å¦ææ¾å° session è¯æç¨æ·å·²ç»ç»å½å¯æ§è¡åé¢æä½ã\n     \n     * æ ¹æ®ä»¥ä¸æµç¨å¯ç¥ï¼sessionid æ¯è¿æ¥ cookie å session çä¸éæ¡¥æ¢ï¼å¤§é¨åç³»ç»ä¹æ¯æ ¹æ®æ­¤åçæ¥éªè¯ç¨æ·ç»å½ç¶æã\n       \n       * sessionidæ¯æä¹çæçï¼(tomcatçsessionidççæä¸»è¦æ¯éæºæ°ï¼ä¾èµçç±»æ¯java.security.securerandom)\n     \n     * token: ä»¤ç**ï¼**è®¿é®èµæºæ¥å£ï¼apiï¼æ¶æéè¦çèµæºå­è¯ãtokenæ¯æå¡ç«¯çæçä¸ä¸²å­ç¬¦ä¸²,ä»¥ä½å®¢æ·ç«¯è¿è¡è¯·æ±çä»¤ç,å½ç¬¬ä¸æ¬¡ç»éå,æå¡å¨çæä¸ä¸ªtokenä¾¿å°æ­¤tokenè¿åç»å®¢æ·ç«¯,ä»¥åå®¢æ·ç«¯åªè¦å¸¦ä¸è¿ä¸ªtokenåæ¥è¯·æ±æ°æ®å³å¯,æ éåæ¬¡å¸¦ä¸ç¨æ·ååå¯ç ã**token **ä½¿æå¡ç«¯æ ç¶æåï¼ä¸ä¼å­å¨ä¼è¯ä¿¡æ¯ãç¸æ¯äºsessionçä¼ç¹æ¯ï¼å³ä½¿æäºå¤å°æå¡å¨ï¼æå¡å¨ä¹åªæ¯åäºtokençè§£å¯åç¨æ·æ°æ®çæ¥è¯¢ï¼å®ä¸éè¦å¨æå¡ç«¯å»ä¿çç¨æ·çè®¤è¯ä¿¡æ¯æèä¼è¯ä¿¡æ¯ï¼è¿å°±æå³çåºäºtokenè®¤è¯æºå¶çåºç¨ä¸éè¦å»èèç¨æ·å¨åªä¸å°æå¡å¨ç»å½äºï¼è¿å°±ä¸ºåºç¨çæ©å±æä¾äºä¾¿å©ï¼è§£å³äºsessionæ©å±æ§çå¼ç«¯ãæå¸¸è§ççææ¹å¼æ¯jwtï¼json web token å¥é¨æç¨ã\n       \n       æ¾å¨åªï¼å¯ä»¥æå®æ¾å¨ cookie éé¢èªå¨åéï¼ä½æ¯è¿æ ·ä¸è½è·¨åï¼æä»¥æ´å¥½çåæ³æ¯æ¾å¨ http è¯·æ±çå¤´ä¿¡æ¯authorizationå­æ®µéé¢ã\n       \n       > authorization: bearer <token>\n       \n       å¦ä¸ç§åæ³æ¯ï¼è·¨åçæ¶åï¼jwt å°±æ¾å¨ post è¯·æ±çæ°æ®ä½éé¢ã\n\n * cdnæ¯ä»ä¹ï¼åå®¹ååç½ç»ï¼\n   \n   * å°æºç«åå®¹ååè³ææ¥è¿ç¨æ·çèç¹ï¼ä½¿ç¨æ·å°±è¿åå¾æéåå®¹ãè§£å³äºå åå¸ï¼å¸¦å®½ï¼æå¡å¨æ§è½å¸¦æ¥çè®¿é®å»¶è¿é®é¢ãcdnè´è½½åè¡¡ç³»ç»è´è´£åè¯ç¨æ·ç¼å­æå¡å¨çipå°å\n\n * åç«¯æ¨¡åå\n   \n   * æä»¶åå / å½åç©ºé´ / iife / commonjs / amd / cmd\n   * esmodules\n   * esmä¸commonjsçåºå«\n     * commonjsæ¨¡åè¾åºæ·è´ï¼es6 æ¨¡åè¾åºå¼ç¨\n     * commonjs æ¨¡åæ¯è¿è¡æ¶å è½½ï¼es6 æ¨¡åæ¯ç¼è¯æ¶å è½½ï¼ä¹æä»¥webpackçtree-shakingåªè½ä½ç¨äºes6æ¨¡åï¼å°±æ¯å ä¸ºes6æ¨¡åå¨ç¼è¯æ¶å°±è½ç¡®å®ä¾èµã\n     * commonjsæ¯require()åæ­¥å è½½æ¨¡åï¼es6æ¨¡åæ¯importå½ä»¤æ¯å¼æ­¥å è½½ï¼æä¸ä¸ªç¬ç«çæ¨¡åä¾èµçè§£æé¶æ®µ\n     * commonjsç¬¬ä¸æ¬¡å è½½æ¨¡åå°±ä¼æ§è¡æ´ä¸ªæ¨¡åçæä¸ä¸ªå¯¹è±¡, åæ¬¡ç¨å°æ¶å°ç¼å­ä¸­è¯»åï¼es6 æ¨¡åä¸ä¼ç¼å­è¿è¡ç»æï¼èæ¯å¨æå°å»è¢«å è½½çæ¨¡ååå¼\n     * å¾ªç¯å¼ç¨çå¤ç\n\n\n# åç«¯å®å¨\n\n * xssï¼åå°å / å­å¨å / domåï¼\n   \n   * httponly\n   * çº¯åç«¯æ¸²æ\n   * htmlè½¬ä¹\n   * csp\n   * x-xss-protection\n\n * csrfï¼ç¬¬ä¸æ¹ç½ç«å¦ä½æ¿å°cookieï¼scriptãimageãiframeçsrcé½ä¸ååæºç­ç¥çå½±åãæä»¥æä»¬å¯ä»¥åå©è¿ä¸ç¹ç¹ï¼å®ç°è·¨åï¼\n   \n   * originï¼ä¸è¬åªå­å¨äºcorsè·¨åè¯·æ±ä¸­ï¼ä¸ºä»ä¹è¦è·¨åï¼ åæºç­ç¥æä¹é²æ­¢csrfæ»å»ï¼\n     \n     å¨ä»¥ä¸æåµä¸å­å¨æ­¤è¯·æ±å¤´ï¼\n     \n     302 éå®åï¼ \n     1. å¨ 302 éå®åä¹å origin ä¸åå«å¨éå®åçè¯·æ±ä¸­ï¼å ä¸º origin å¯è½ä¼è¢«è®¤ä¸ºæ¯å¶ä»æ¥æºçææä¿¡æ¯ã\n     2.å¯¹äº 302 éå®åçæåµæ¥è¯´é½æ¯å®åå°æ°çæå¡å¨ä¸ç urlï¼å æ­¤æµè§å¨ä¸æ³å° origin æ³æ¼å°æ°çæå¡å¨ä¸ã\n     \n     origin å referer å­å¨ç¸åçé®é¢ï¼åæ ·æå¯è½ä¸¢å¤±è¯¥å­æ®µã\n     \n   \n   * refererï¼åè®®+åå+æ¥è¯¢åæ°ï¼\n     \n     éå¯¹éè¿ referer å­æ®µå»å¤æ­è¯·æ±æ¥æºæ¯å¦åæ³æ¯ä¸å¤ªé è°±çï¼è¿ä¸ªå­æ®µå¾æå¯è½ä¼ä¸¢å¤±ï¼\n     \n     1.ie6ã7ä¸ä½¿ç¨ window.location.href=url è¿è¡çé¢çè·³è½¬æè window.openï¼é½ä¼é æ referer ä¸¢å¤±ã\n     \n     2.https é¡µé¢è·³è½¬å° http é¡µé¢ï¼æææµè§å¨ referer é½ä¸¢å¤±ã\n     \n     3.ç¹å» flash ä¸å°è¾¾å¦å¤ä¸ä¸ªç½ç«çæ¶åï¼referer çæåµå°±æ¯è¾æä¹±ï¼ä¸å¤ªå¯ä¿¡ã\n     \n     å¯ä»¥éå ä½¿ç¨äºå¤æ­è¯·æ±æ¥æºï¼ä½æ¯ä»éè¿è¯¥å­æ®µè¿è¡å¤æ­æ¯ä¸å¤ªé è°±çï¼å¦æè¯·æ±å¤´ä¸¢å¤±è¯¥å­æ®µï¼åæå¡ç«¯æ æ³å¤æ­å½åè¯·æ±æ¥æºï¼æ æ³æ ¡éªè¯·æ±æ¯å¦åæ³ã\n     \n   \n   * samesite cookie\n   \n   * csrf token\n     \n     * å¨è¯·æ±å¤´ä¸­å°è·åå°ç token è®¾ç½®å° cookie ä¸­ã\n     * å° token æ¾å°è¯·æ±åæ°ä¸­ã\n   \n   * éªè¯ç \n\n * ç¹å»å«æ\n\n * ä¸­é´äººæ»å»\n\n * httpä¼ è¾å®å¨\n\n * ç¬¬ä¸æ¹ä¾èµå®å¨\n\n * æ§å¶å°æ³¨å¥ä»£ç \n\n * éé±¼\n\n * åç«¯è·¯ç±\n   \n   * hashæ¨¡å¼\n     * window.location.hash\n     * onhashchange\n   * historyæ¨¡å¼\n     * pushstate / replacestate / popstate\n\n\n# è®¾è®¡æ¨¡å¼ï¼ç®åä»ç»ä¸ä¸\n\n * å·¥åæ¨¡å¼\n * æ½è±¡å·¥åæ¨¡å¼\n * åä¾æ¨¡å¼\n * å»ºé èæ¨¡å¼\n * ééå¨æ¨¡å¼\n * è£é¥°å¨æ¨¡å¼\n * è¿æ»¤å¨æ¨¡å¼\n\n\n# webpack\n\n * webpackï¼gruntï¼gulpçåºå«\n * webpackï¼rollupï¼parcelåå«éç¨äºä»ä¹åºæ¯\n * webpackæä»¶ä¸»è¦æ¯åä»ä¹çï¼å¸¸ç¨çæåªäº\n * èªå·±åè¿webpackæä»¶åï¼compiler / compilationï¼\n * webpack loaderä¸»è¦æ¯åä»ä¹çï¼å¸¸ç¨çæåªäº\n * loader å plugin çåºå«åç¨å¤\n * webpack ç­æ´æ°åç\n * sourcemapï¼cheap-module-eval-source-mapï¼\n * webpack-dev-server\n * webpackæåæµç¨åçå½å¨æ\n\n\n# git\n\n * git reset å git revert çåºå«\n * git rebaseçä¸¤ç§ç¨é\n\n\n# å¨ç»ç¸å³\n\n * csså¨ç»\n   \n   * transition: è¿æ¸¡ï¼æ¯ä¸æ¬¡æ§çï¼åªè½å®ä¹èµ·å§åç»æç¶æã\n     \n     #box {\n       height: 100px;\n       width: 100px;\n       background: green;\n       transition: transform 1s ease-in 1s;\n     }\n     #box:hover {\n       transform: rotate(180deg) scale(.5, .5);\n     }\n     \n   \n   * animationï¼å¨ç»ï¼å¾å¤æ§çï¼keyframesæä¾æ´å¤çæ§å¶ï¼å°¤å¶æ¯æ¶é´ç¾åæ¯çæ§å¶\n     \n     .box {\n       height: 100px;\n       width: 100px;\n       border: 15px solid black;\n       animation: changebox 1s ease-in-out 1s infinite alternate running forwards;\n     }\n     \n     @keyframes changebox {\n       10% {\n         background: red;\n       }\n       50% {\n         width: 80px;\n       }\n       70% {\n         border: 15px solid yellow;\n       }\n       100% {\n         width: 180px;\n         height: 180px;\n       }\n     }\n     \n\n * jså¨ç»\n   \n   * å®æ¶å¨ï¼ä¼åºç°å¡é¡¿æå¨ï¼å®æ¶å¨å®éæ§è¡å®éè¾æï¼ä¸ç¨è®¾å¤å±å¹å·æ°é¢çä¸å\n     \n     var offsetx = 500  //è¦æ°´å¹³ç§»å¨çè·ç¦»\n     var moveoffset = 0  //å½åå·²ç»ç§»å¨çè·ç¦»\n     var step = 5   //æ¯æ¬¡ç§»å¨çè·ç¦»\n     \n     function move(){\n       if(moveoffset < offsetx){\n         ball.style.left = parseint(getcomputedstyle(ball).left) + step + 'px'\n         moveoffset += step\n         settimeout(move, 5)\n       }\n     }\n     move()\n     \n   \n   * requestanimationframeï¼ç±ç³»ç»æ¥å³å®åè°å½æ°çæ§è¡æ¶æºãä¿è¯åè°å½æ°å¨å±å¹æ¯ä¸æ¬¡çå·æ°é´éä¸­åªè¢«æ§è¡ä¸æ¬¡ï¼è¿æ ·å°±ä¸ä¼å¼èµ·ä¸¢å¸§ç°è±¡ï¼ä¹ä¸ä¼å¯¼è´å¨ç»åºç°å¡é¡¿çé®é¢ã\n     \n     var offsetx = 500  //è¦æ°´å¹³ç§»å¨çè·ç¦»\n     var moveoffset = 0  //å½åå·²ç»ç§»å¨çè·ç¦»\n     var step = 5   //æ¯æ¬¡ç§»å¨çè·ç¦»\n     \n     function move(){\n       if(moveoffset < offsetx){\n         ball.style.left = parseint(getcomputedstyle(ball).left) + step + 'px'\n         moveoffset += step\n         requestanimationframe(move)\n       }\n     }\n     move()\n     \n\n * æä¹å®ç°åå°é¡¶é¨å¨ç»ï¼\n   \n   function totop() {\n     let scrolltop = document.documentelement.scrolltop || document.body.scrolltop;\n     let timer = setinterval(() => {\n       scrolltop -= 100;\n       window.scrollto(0, scrolltop)\n       if (scrolltop <= 0) {\n         clearinterval(timer)\n       }\n     }, 10)\n   }\n   \n   function totop() {\n     let scrolltop = document.documentelement.scrolltop || document.body.scrolltop;\n     if (scrolltop > 0) {\n       requestanimationframe(function() {\n         scrolltop -= 100;\n       \twindow.scrollto(0, scrolltop)\n       })\n     }\n   }\n   \n\n\n# å¸¸ç¨æåä»£ç \n\n * é²æ / èæµ\n * æ¯éå\n * apply,bind,call\n * promise.all\n * promise.race\n * åå¸è®¢éæ¨¡å¼\n * æ°ç»æå¹³åå¸¦åæ°\n * æ°ç»å»é 4 ç§\n * instanceof\n * new\n * æ·±æ·è´\n * ajaxè¯·æ±\n * å¿«æ / åæ³¡ / å æåº\n * æå map / reduce\n * å¹¶åè¯·æ±æ§å¶\n * å®ç°ä¸ä¸ªsleepå½æ°\n\n\n# è®¡ç®æºåºç¡\n\n * 32ä½å64ä½çåºå«ï¼\n   \n   > å¯»åç©ºé´åå«ä¸º2^32 = 4gå2^64ï¼å¯»åç©ºé´ä¸è¬æçæ¯cpuå¯¹äºåå­å¯»åçè½åãéä¿å°è®²ï¼å°±æ¯æå¤è½ç¨å°å¤å°åå­çä¸ä¸ªé®é¢ã\n\n * cpuå¦ä½è®¿é®åå­ï¼\n   \n   > é¦å cpu å¨è®¿é®åå­çæ¶åé½éè¦éè¿ mmuï¼åå­ç®¡çååï¼ æèæå°åè½¬åä¸ºç©çå°åï¼ç¶åéè¿æ»çº¿è®¿é®åå­ãmmu å¼å¯å cpu çå°çææå°åé½æ¯èæå°åï¼cpu æè¿ä¸ªèæå°ååç» mmu åï¼mmu ä¼éè¿é¡µè¡¨å¨é¡µè¡¨éæ¥åºè¿ä¸ªèæå°åå¯¹åºçç©çå°åæ¯ä»ä¹ï¼ä»èå»è®¿é®å¤é¢ç ddrï¼åå­æ¡ï¼ã\n\n * ä»ä¹æ¯å¹³è¡¡äºåæ åçº¢é»æ \n   \n   * å¹³è¡¡äºåæ å·¦å³ä¸¤ä¸ªå­æ çé«åº¦å·®çç»å¯¹å¼ä¸è¶è¿1ï¼å¹¶ä¸å·¦å³ä¸¤ä¸ªå­æ é½æ¯ä¸æ£µå¹³è¡¡äºåæ ã\n   * çº¢é»æ æ¯ä¸ä¸ªèªå¹³è¡¡(ä¸æ¯ç»å¯¹çå¹³è¡¡)çäºåæ¥æ¾æ \n   * çº¢é»æ ç¸æ¯äºavlæ ï¼çºç²äºé¨åå¹³è¡¡æ§ï¼ä»¥æ¢åå é¤/æå¥æä½æ¶å°éçæè½¬æ¬¡æ°ï¼æ´ä½æ¥è¯´ï¼æ§è½ä¼äºavlæ ã\n\n\n# é¡¹ç®\n\n * å°ç¨åº\n   \n   * é¿åè¡¨ä¼åï¼ä¸ºä»ä¹è¦åä¼åï¼1.å°ç¨åºåçº¿ç¨ 2. æ¡æ¶ç¼ºé·\n   \n   * å°ç¨åºåçº¿ç¨åç\n   \n   * å°ç¨åºçåçº¿ç¨è®¾è®¡ï¼ä¸»è¦ä¸ºäºç®¡æ§å®å¨ï¼é¿åæä½ domãé»è¾çº¿ç¨æ¯ä¸ä¸ªåªè½å¤è¿è¡javascriptçæ²ç®±ç¯å¢ï¼ä¸æä¾domæä½ç¸å³çapiï¼æä»¥ä¸è½ç´æ¥æä½uiï¼åªè½å¤éè¿setdataæ´æ°æ°æ®çæ¹å¼å¼æ­¥æ´æ°uiã\n     \n   \n   * setdataå·¥ä½åç\n     \n     å°ç¨åºçè§å¾å±ç®åä½¿ç¨ webview ä½ä¸ºæ¸²æè½½ä½ï¼èé»è¾å±æ¯ç±ç¬ç«ç javascriptcore ä½ä¸ºè¿è¡ç¯å¢ãå¨æ¶æä¸ï¼webview å javascriptcore é½æ¯ç¬ç«çæ¨¡åï¼å¹¶ä¸å·å¤æ°æ®ç´æ¥å±äº«çééãå½åï¼è§å¾å±åé»è¾å±çæ°æ®ä¼ è¾ï¼å®éä¸éè¿ä¸¤è¾¹æä¾ç evaluatejavascript æå®ç°ãå³ç¨æ·ä¼ è¾çæ°æ®ï¼éè¦å°å¶è½¬æ¢ä¸ºå­ç¬¦ä¸²å½¢å¼ä¼ éï¼åæ¶æè½¬æ¢åçæ°æ®åå®¹æ¼æ¥æä¸ä»½ js èæ¬ï¼åéè¿æ§è¡ js èæ¬çå½¢å¼ä¼ éå°ä¸¤è¾¹ç¬ç«ç¯å¢ã\n     \n     è evaluatejavascript çæ§è¡ä¼åå¾å¤æ¹é¢çå½±åï¼æ°æ®å°è¾¾è§å¾å±å¹¶ä¸æ¯å®æ¶çãæä»¥æä»¬çsetdataå½æ°å°æ°æ®ä»é»è¾å±åéå°è§å¾å±ï¼æ¯å¼æ­¥çã\n     \n     \n     var initdata = {\n         info: {\n             name: 'hh'\n         }\n     };\n     \n     page({\n         data: initdata,\n         onclick() {\n             this.setdata({\n                 'info.name': 'xx'\n             }, () => {\n                 console.log(initdata.info.name) // hh\n             })\n         }\n     })\n     // 1. pageåå§åçæ¶ådataæ¯æ·±æ·è´çæçï¼æä»¥ä¸ä¼æ¹ååæ¥initdataçå¼\n     // 2. å¦ææ¹åäºinitdataçå¼ï¼é¡µé¢çåå§å¼å°±ä¼è¢«æ¹åäºï¼navigateto/redicettoé¡µé¢æ°æ®ä¸ä¸æ ·\n     \n   \n   * é¡¹ç®ä¼å\n   \n   * mpvueåç\n     \n     * mpvue ä¿çäº vue.runtime æ ¸å¿æ¹æ³ï¼æ ç¼ç»§æ¿äº vue.js çåºç¡è½å\n     * mpvue-template-compiler æä¾äºå° vue çæ¨¡æ¿è¯­æ³è½¬æ¢å°å°ç¨åºç wxml è¯­æ³çè½å\n     * ä¿®æ¹äº vue çå»ºæéç½®ï¼ä½¿ä¹æå»ºåºç¬¦åå°ç¨åºé¡¹ç®ç»æçä»£ç æ ¼å¼ï¼ json/wxml/wxss/js æä»¶\n   \n   * å°ç¨åºæ¡æ¶å¯¹æ¯ï¼åºäºå¾®ä¿¡èªå®ä¹ç»ä»¶å®ç°ç»ä»¶å¼åçæ¡æ¶ï¼uni-app/taro/chameleonï¼ï¼ç»ä»¶æ°æ®éè®¯æ§è½æ¥è¿äºå¾®ä¿¡åçæ¡æ¶ï¼è¿é«äºåºäºtemplateå®ç°ç»ä»¶å¼åçæ¡æ¶ï¼wepy/mpvueï¼æ§è½\n   \n   * å°ç¨åºä¸ºåçº¿ç¨æ¨¡åï¼é»è¾å±åè§å¾å±ï¼éè¿ native å±éä¿¡ãä¸åå¨ web ä¸ js å ui ä¼äºæ¥ï¼å°ç¨åºä¸­ä¼éå¶ js æä½ domï¼æä»¥ä¸ç¨æå¿ä¸åæ­¥é®é¢ã\n   \n   * é»è¾å±åè§å¾å±éè¿ setdata è¿è¡éä¿¡ï¼ä¼ææ°æ®è½¬æ¢æå­ç¬¦ä¸²å¹¶æ¼æ¥ä¸æ®µ js èæ¬ï¼evaluatejavascriptï¼ä¼ å°è§å¾å±ï¼è¿ä¸ªè¿ç¨æ¯å¼æ­¥çã\n   \n   * å¦ææ¯æ¬¡ setdata çæ°æ®éè¿å¤§ï¼ä¼éå¸¸æèæ§è½ï¼æå¥½æ¯å¢éæ´æ°ãuni-appãtaro é½å¨è°ç¨setdataä¹åèªå¨ådiffè®¡ç®ï¼æ¯æ¬¡ä»ä¼ éåå¨çæ°æ®ã\n   \n   * èä¸åºäºå¾®ä¿¡èªå®ä¹ç»ä»¶å®ç°ç»ä»¶å¼åçæ¡æ¶ï¼uni-app/taroï¼ï¼ç»ä»¶æ°æ®éè®¯æ§è½æ¥è¿äºå¾®ä¿¡åçæ¡æ¶ï¼è¿é«äºåºäºtemplateå®ç°ç»ä»¶å¼åçæ¡æ¶ï¼wepy/mpvueï¼æ§è½ã\n   \n   * è·¨ç«¯è½åï¼uni-app æ¯è¾ä¼ç§ï¼åæ¶æ¯æh5ãå¤å®¶å°ç¨åºãè·¨å¹³å°appï¼ä½æ¯ä¸å¥ä»£ç æ¨ªè·¨ ios android web åå°ç¨åºæ¯è¾å¤æï¼å¯è½ä¼å­å¨å¤§éå¼å®¹æ§é®é¢ã\n\n * el-selectçä½¿ç¨ï¼vueèªå®ä¹æä»¤\n\n * mixin\n\n * å¶å®\n   \n   * èªæä»ç»\n   * ä¸ºä»ä¹éæ©åç«¯ï¼å¦ä½å­¦ä¹ ï¼ä¸ºä»ä¹éæ©è¿ç§å­¦ä¹ æ¹å¼ï¼\n   * å¯¹åç«¯åå±ççæ³ï¼\n     * æ©äºæ¶åï¼ç±äºæ¶ä»£çé®é¢ï¼å½æ¶çwebåç«¯ä»ä»æ¯å±ç¤ºä¸äºç®åçææ¬ãå¾çï¼é¡µé¢è¾ä¸ºç®å\n     * ååç«¯åç¦»ï¼mvvmæ¡æ¶(vue, react, angularç­)çåºç°ï¼ä½¿å¾åç«¯æ´å åºç¨åï¼æ§è½æ´é«ã\n     * v8å¼æånodeçåºç°ï¼ä¿ä½¿åç«¯è½ç¨èªå·±çæçè¯­æ³ç¼ååå°ç³»ç»ã\n     * åç«¯å·¥ç¨åçæåºï¼æé«äºåç«¯çå¼åæçï¼å¢å¼ºäºå¯ç»´æ¤æ§\n     * æ°æ®å¯è§åç¾å®¶äºé¸£ï¼åºäºsvgï¼canvasï¼webglå¼åçå¯è§åï¼3då¨ç»å·²è¢«å¹¿æ³çåºç¨å°ç½ç«ä¸­ã\n     * å¤§åç«¯æ¶ä»£ï¼éçæºè½ææºçæ®åï¼å¦ä»androidç«¯ãiosç«¯ç­åç§ç§»å¨ç«¯çåºç¨ä¹è¶æ¥è¶æ®åï¼åä¸é¢åäºpcç«¯çwebåºç¨ï¼ä¹åçç§»å¨ç«¯åå±ãç±»ä¼¼åç§ææºappï¼å°ç¨åºçè¯çï¼ä½¿å¾äººä»¬ççæ´»è¶æ¥è¶ä¾¿å©ï¼è®©äººä¸ç¦éæ³ï¼å°æ¥çåç«¯æ¯å¦è½åºç¨å°å¨ç«¯ï¼å³ä¸å¥ä»£ç è½éç¨å¤ç§å¹³å°ã\n   * æè¿å¨å­¦ä»ä¹ï¼\n   * é¡¹ç®ä¸­ä½ å°è±¡ææ·±çå°æ¹ï¼æä»ä¹é¾ç¹ï¼æä¹è§£å³çï¼\n   * æè½åæ§æ ¼æä»ä¹ç¼ºé·ï¼\n   * å¹³æ¶çä»ä¹ä¹¦ï¼\n   * ä¼ç¹ï¼ç¼ºç¹ï¼\n   * è¯´è¯´å¯¹æä»¬å¬å¸çäºè§£ï¼\n   * èä¸è§åï¼\n   * åé®\n     * å¯¹æçè¯ä»·ï¼å»ºè®®ï¼\n     * é¨é¨çä¸å¡æåµï¼\n     * å¢éæ¶æï¼\n\n * santd\n   \n   * uploadï¼åºå±å®ç°è¿æ¯åºäºinputè¾å¥æ¡ï¼type=fileï¼ï¼ç¶åå©ç¨onchangeäºä»¶ï¼çå¬æä»¶éæ©çäºä»¶ï¼ç¶åå©ç¨formdataå¯¹è±¡è£è½½éè¦ä¸ä¼ çæä»¶ï¼æåéè¿xmlhttprequestæ¥è¿è¡æä»¶çç½ç»å¼æ­¥ä¼ è¾ãéè¿xhr.upload çonprogress äºä»¶ççå¬ï¼å¯ä»¥æ­£ç¡®çè·åå°ä¸ä¼ æä»¶çtotalå¼åloadedçå¼ï¼ä»èå®æ¶çè®¡ç®åºå½åä¸ä¼ çè¿åº¦ã\n   * tabï¼keyãactive_key\n   * tableï¼éè¿ slot è®©ç¨æ·å¯ä»¥èªå®ä¹ column title å¹¶æ¯æè·å column ä¿¡æ¯\n\n * eslint-plugin-san\n   \n   * eslint-plugin-san æ¯ eslint çä¸ä¸ªæä»¶ï¼ç±»ä¼¼äº eslint-plugin-vueï¼åé¨éç½®äºä¸ç³»åéå¯¹æ§çè§å\n   * eslintæ§è¡åçï¼ä½¿ç¨è§£æå¨ espree å°ä»£ç è§£ææ astï¼è¿è¡è¯æ³åæä»¥åè¯­æ³åæï¼éè¿ dfs æ¥éå astï¼å¨éåçè¿ç¨ä¸­ eslint éè¿éæ©å¨æ¥å¹é ast ä¸çèç¹ï¼éè¿ä»£ç è·¯å¾åææ¥æ§å¶ä»£ç æ£æµçèå´ãæ¯ä¸ª rule é½å®ä¹äº create æ¹æ³ï¼ä¼è¿åä¸ä¸ª vistorï¼å³è®¿é®å°æäºèç¹æ¶ååºçæä½ï¼ï¼eslint ä¼æ¶ééç½®æä»¶ä¸­ææè§åç vistorï¼éå ast å¹¶è°ç¨ vistorï¼å¾å°æ£æµç»æãè§ååè¿å¯ä»¥å®ä¹ fix æ¹æ³ï¼å¨æ¥éçæ¶åå¯ä»¥è¿è¡ä¿®æ­£ã\n   * no-empty-attributes: é»è®¤æ£æµ class å style å±æ§ä¸è½ä¸ºç©ºï¼å¯ä»¥éè¿ options éç½®å¶ä»ä¸åè®¸ä¸ºç©ºçå±æ§ã\n   * data-name-casingï¼datatypes, initdata, computed ä¸­çæ°æ®å¨å¤ä¸ªåè¯çæåµä¸ä½¿ç¨ \"ä¸åçº¿\"ã\"ç­æ¨ªçº¿\"ã\"å¸æ¯å¡\"å½åè§åä¼æ¥éï¼æç¤ºç»ä¸ä½¿ç¨é©¼å³°å¼å½åæ³ã\n   * boolean-valueï¼å¼ºå¶å¸å°å±æ§ã<div attr></div>\n\n * san-loader:\n   \n   * sanloaderplugin å¨ webpack æ­£å¼æå»ºä¹åä¿®æ¹åæçéç½® rulesã\n   * webpack ä»å¥å£æä»¶åºå, éå°.sanæä»¶ï¼ç¬¬ä¸æ¬¡è°ç¨ san-loader æ¥å¤ç san åæä»¶, è¿ä¸ªè¿ç¨ä¼è°ç¨ san-sfc-compiler ç parsesfc æ¹æ³æ¥è§£ææä»¶åå®¹çæ import è¯­å¥ï¼å¯¹äºæ¯ä¸æ¡ import è¯­å¥åéå rules è¿è¡è§åå¹éãæåæåä»£ç åäº¤ç»å¯¹åº loader å¤ç\n\n\n# æéç®¡ç\n\n\n# rabc\n\nåºäºè§è²çè®¿é®æ§å¶ï¼role-based access controlï¼ç®ç§° rbacï¼ï¼æçæ¯éè¿ç¨æ·çè§è²ï¼roleï¼ææå¶ç¸å³æéï¼å®ç°äºçµæ´»çè®¿é®æ§å¶ï¼ç¸æ¯ç´æ¥æäºç¨æ·æéï¼è¦æ´å ç®åãé«æãå¯æ©å±ã\n\n * ç¨æ·ï¼userï¼ï¼ç³»ç»å®éä½¿ç¨èï¼å¦åå·¥ãç®¡çåï¼\n * è§è²ï¼roleï¼ï¼èçº§æèè½çæ½è±¡éåï¼å¦ãè´¢å¡ä¸åããé¨é¨ä¸»ç®¡ãï¼\n * æéï¼permissionï¼ï¼å¯¹ç³»ç»èµæºçæä½è®¸å¯ï¼å¦ãæ¥çæ¥è¡¨ããå¯¼åºæ°æ®ãï¼\n\n\n# åç«¯æéæ§å¶æµç¨\n\n 1. ç¨æ·ç»å½ä¸æéåå§å ç¨æ·ç»å½åï¼åç«¯è¿åè§è²æ è¯ï¼å¦roles: [\"finance_staff\"]ï¼åæéæ¸åï¼å¦permissions: [\"invoice:view\", \"budget:edit\"]ï¼åç«¯å°æéæ°æ®å­å¥ç¶æç®¡çå·¥å·ï¼å¦vuex/piniaï¼ï¼ä¸ºåç»­æ§å¶æä¾ä¾æ®\n 2. å¨æè·¯ç±çæ\n\n * è·¯ç±åçº§éç½®ï¼\n   * åºç¡è·¯ç±ï¼å¬å±é¡µé¢ï¼ç»å½é¡µã404ï¼\n   * å¨æè·¯ç±ï¼éæéæ§å¶ï¼ä»ªè¡¨çãè®¢åç®¡çï¼\n   * æ¯ä¸ªå¨æè·¯ç±éç½®meta.permissionså­æ®µæ è®°æéæéï¼å¦{ path: \"/pay\", meta: { permissions: [\"payment:access\"] } }ï¼\n * è·¯ç±è¿æ»¤é»è¾ï¼æ ¹æ®ç¨æ·æéæ¸åè¿æ»¤å¨æè·¯ç±ï¼ä»ä¿çç¨æ·ææè®¿é®çè·¯ç±éç½®ï¼éè¿router.addroute()å¨ææè½½\n\n 3. åç½®å®å«æ ¡éª\n\n * å¨å±è·¯ç±å®å«ï¼å¨vue-routerçbeforeeaché©å­ä¸­ï¼å¯¹æ¯æ¬¡è·¯ç±è·³è½¬è¿è¡ä¸éæ ¡éªï¼\n   * æ¯å¦å·²ç»å½ï¼æªç»å½è·³è½¬è³ç»å½é¡µï¼\n   * æ¯å¦å·²è·åæéï¼é²æ­¢é¡µé¢å·æ°åæéä¸¢å¤±ï¼\n   * ç®æ è·¯ç±æ¯å¦å¨ç¨æ·æéèå´åï¼æ æéè·³è½¬è³403é¡µï¼\n * åµå¥è·¯ç±å¤çï¼å¯¹ç¶çº§è·¯ç±è®¾ç½®alwaysshow: trueï¼ç¡®ä¿å³ä½¿å­è·¯ç±æ æéï¼ç¶çº§èåä»å¯å±ç¤ºï¼ä½å­èåé¡¹ç½®ç°æéèï¼\n\n\n# ä»0å°1çbç«¯å¹³å°é¡¹ç®\n\n\n# ææ¯éå\n\n 1. æ¡æ¶éæ©ï¼ä¼åæçæ¡æ¶ï¼react/vueï¼\n 2. è¯­è¨ä¸å·¥å·ï¼typescriptåå°è¿è¡æ¶éè¯¯ï¼ç»åviteæåæå»ºæçã\n 3. uiæ¡æ¶ï¼ant designï¼reactï¼/ elementï¼vueï¼\n\n\n# æ¶æè®¾è®¡\n\n 1. æ¨¡ååä¸ç»ä»¶åï¼å¾®åç«¯ï¼ç¬ç«é¨ç½²ãææ¯æ è§£è¦ï¼/ æ¨¡ååï¼é«åèãä½è¦åï¼å¤ç¨ï¼\n 2. ç¶æç®¡çï¼vuex / redux\n 3. è·¯ç±è®¾è®¡ï¼æéæ§å¶ï¼rbacï¼/ å¨æè·¯ç±ï¼æ ¹æ®ç¨æ·è§è²å è½½ï¼\n\n\n# å·¥ç¨å\n\n 1. ä»£ç è§èï¼eslint + stylelint + prettier\n 2. æµè¯ç­ç¥ï¼ååæµè¯ / e2eæµè¯\n 3. çæ§ä¸æ¥å¿ï¼æ§è½çæ§ï¼sentryæè·éè¯¯ï¼ / æ¥å¿ç®¡ç\n 4. éæé¨ç½²ï¼ci/cd\n\n\n# æ§è½ä¼å\n\n 1. å è½½ä¼åï¼æå è½½ / èµæºåç¼©\n 2. æ¸²æä¼åï¼é¿åéæ / èæåè¡¨\n 3. æå»ºä¼åï¼tree shaking / æºè½åå",charsets:{cjk:!0}},{title:"ES2016 - ES2022",frontmatter:{},regularPath:"/javascript/ES2017-2022.html",relativePath:"javascript/ES2017-2022.md",key:"v-389f887d",path:"/javascript/ES2017-2022.html",headers:[{level:2,title:"ES2016",slug:"es2016",normalizedTitle:"es2016",charIndex:2},{level:3,title:"Array.prototype.includes",slug:"array-prototype-includes",normalizedTitle:"array.prototype.includes",charIndex:180},{level:3,title:"æ±å¹è¿ç®ç¬¦",slug:"æ±å¹è¿ç®ç¬¦",normalizedTitle:"æ±å¹è¿ç®ç¬¦",charIndex:208},{level:2,title:"ES2017",slug:"es2017",normalizedTitle:"es2017",charIndex:522},{level:3,title:"Object.values ä¸ Object.entries",slug:"object-values-ä¸-object-entries",normalizedTitle:"object.values ä¸ object.entries",charIndex:533},{level:3,title:"Object.getOwnPropertyDescriptors",slug:"object-getownpropertydescriptors",normalizedTitle:"object.getownpropertydescriptors",charIndex:567},{level:3,title:"padStart ä¸ padEnd",slug:"padstart-ä¸-padend",normalizedTitle:"padstart ä¸ padend",charIndex:1629},{level:3,title:"å°¾éå·",slug:"å°¾éå·",normalizedTitle:"å°¾éå·",charIndex:664},{level:2,title:"ES2018",slug:"es2018",normalizedTitle:"es2018",charIndex:2004},{level:3,title:"å¼æ­¥è¿­ä»£",slug:"å¼æ­¥è¿­ä»£",normalizedTitle:"å¼æ­¥è¿­ä»£",charIndex:2015},{level:3,title:"Promise.finally",slug:"promise-finally",normalizedTitle:"promise.finally",charIndex:2782},{level:3,title:"rest/spread",slug:"rest-spread",normalizedTitle:"rest/spread",charIndex:2070},{level:3,title:"Regexp",slug:"regexp",normalizedTitle:"regexp",charIndex:2085},{level:2,title:"ES2019",slug:"es2019",normalizedTitle:"es2019",charIndex:3999},{level:3,title:"Object.fromEntries",slug:"object-fromentries",normalizedTitle:"object.fromentries",charIndex:4010},{level:3,title:"flat ä¸ flatMap",slug:"flat-ä¸-flatmap",normalizedTitle:"flat ä¸ flatmap",charIndex:4032},{level:3,title:"trimStart ä¸ trimEnd",slug:"trimstart-ä¸-trimend",normalizedTitle:"trimstart ä¸ trimend",charIndex:4050},{level:2,title:"ES2020",slug:"es2020",normalizedTitle:"es2020",charIndex:4727},{level:3,title:"matchAll",slug:"matchall",normalizedTitle:"matchall",charIndex:4767},{level:3,title:"Promise.allSettled",slug:"promise-allsettled",normalizedTitle:"promise.allsettled",charIndex:4800},{level:3,title:"Dynamic import",slug:"dynamic-import",normalizedTitle:"dynamic import",charIndex:4822},{level:2,title:"ES2021",slug:"es2021",normalizedTitle:"es2021",charIndex:6344},{level:3,title:"é»è¾èµå¼è¿ç®ç¬¦",slug:"é»è¾èµå¼è¿ç®ç¬¦",normalizedTitle:"é»è¾èµå¼è¿ç®ç¬¦",charIndex:6384},{level:3,title:"replaceAll",slug:"replaceall",normalizedTitle:"replaceall",charIndex:6395},{level:3,title:"Promise.any",slug:"promise-any",normalizedTitle:"promise.any",charIndex:6409},{level:3,title:"æ°å¼åéç¬¦",slug:"æ°å¼åéç¬¦",normalizedTitle:"æ°å¼åéç¬¦",charIndex:6424},{level:2,title:"ES2022",slug:"es2022",normalizedTitle:"es2022",charIndex:11},{level:3,title:"é¡¶å± await",slug:"é¡¶å±-await",normalizedTitle:"é¡¶å± await",charIndex:7791},{level:3,title:"at() æ¹æ³",slug:"at-æ¹æ³",normalizedTitle:"at() æ¹æ³",charIndex:7803},{level:3,title:"Object.hasOwn()",slug:"object-hasown",normalizedTitle:"object.hasown()",charIndex:7814},{level:3,title:"class ç§æå­æ®µ",slug:"class-ç§æå­æ®µ",normalizedTitle:"class ç§æå­æ®µ",charIndex:7833}],lastUpdated:"12/26/2022, 6:16:52 PM",lastUpdatedTimestamp:1672049812e3,headersStr:"ES2016 Array.prototype.includes æ±å¹è¿ç®ç¬¦ ES2017 Object.values ä¸ Object.entries Object.getOwnPropertyDescriptors padStart ä¸ padEnd å°¾éå· ES2018 å¼æ­¥è¿­ä»£ Promise.finally rest/spread Regexp ES2019 Object.fromEntries flat ä¸ flatMap trimStart ä¸ trimEnd ES2020 matchAll Promise.allSettled Dynamic import ES2021 é»è¾èµå¼è¿ç®ç¬¦ replaceAll Promise.any æ°å¼åéç¬¦ ES2022 é¡¶å± await at() æ¹æ³ Object.hasOwn() class ç§æå­æ®µ",content:"# ES2016 - ES2022\n\n> ESå¨ç§°ECMAScriptï¼ECMAScriptæ¯ECMAå¶å®çæ ååèæ¬è¯­è¨ãç®åJavaScriptä½¿ç¨çECMAScriptçæ¬ä¸ºECMA-417ãå³äºECMAçææ°èµè®¯å¯ä»¥æµè§ ECMA newsæ¥çã\n> \n> ES2016 - ES2022 å¯¹åºçæ¯ ES7 - ES13\n\n\n# ES2016\n\n * Array.prototype.includes\n * æ±å¹è¿ç®ç¬¦\n\n\n# Array.prototype.includes\n\nconst arr = [1, 3, 5, 2, '8', NaN, -0]\narr.includes(1) // true\narr.includes(1, 2) // false è¯¥æ¹æ³çç¬¬äºä¸ªåæ°è¡¨ç¤ºæç´¢çèµ·å§ä½ç½®ï¼é»è®¤ä¸º0\narr.includes('1') // false\narr.includes(NaN) // true\narr.includes(+0) // true\n\n\n\n# æ±å¹è¿ç®ç¬¦\n\nconsole.log(2**10);// è¾åº1024\nconsole.log(Math.pow(2, 10)) // è¾åº1024\n\n\n\n# ES2017\n\n * Object.values ä¸ Object.entries\n * Object.getOwnPropertyDescriptors\n * String.prototype.padStart ä¸ Sting.prototype.padEnd\n * å½æ°åæ°ä¸­æ·»å å°¾éå·\n * async/await\n\n\n# Object.values ä¸ Object.entries\n\nconst obj = {\n    foo: 'value1',\n    bar: 'value2'\n}\n\nconsole.log(Object.keys(obj))   // é®\nconsole.log(Object.values(obj)) // å¼\n\nconsole.log(Object.entries(obj))\n// [[\"foo\", \"value1\"], [\"bar\", \"value2\"]]\n\n// å¯ä»¥ç¨è¿ç§æ¹æ³æ¥éåå¯¹è±¡\nfor(const [key, value] of Object.entries(obj)) {\n    console.log(key, value)\n}\n\n// å¯¹è±¡è½¬æ¢ä¸ºMap\nnew Map(Object.entries(obj))\n\n\n\n# Object.getOwnPropertyDescriptors\n\nè¯¥å½æ°è¿åæå®å¯¹è±¡ï¼åæ°ï¼çææèªèº«å±æ§æè¿°ç¬¦ãæè°èªèº«å±æ§æè¿°ç¬¦å°±æ¯å¨å¯¹è±¡èªèº«åå®ä¹ï¼ä¸æ¯éè¿ååé¾ç»§æ¿æ¥çå±æ§ã\n\næè¿°ç¬¦ï¼\n\n * writableï¼è¡¨ç¤ºè¯¥å±æ§çå¼æ¯å¦å¯ä»¥è¢«ä¿®æ¹\n\n * enumerableï¼è¡¨ç¤ºè¯¥å±æ§ä¼æ¯å¦åºç°å¨å¯¹è±¡çæä¸¾å±æ§ä¸­ã(for...in å Object.keys)\n\n * configurableï¼è¡¨ç¤ºå¯¹è±¡çå±æ§æ¯å¦å¯ä»¥è¢«å é¤ï¼ä»¥åé¤ value å writable ç¹æ§å¤çå¶ä»ç¹æ§æ¯å¦å¯ä»¥è¢«ä¿®æ¹ã\n\nconst obj = {foo: 'value1', bar: 'value2'}\nObject.getOwnPropertyDescriptors(obj)\n\n// è·åå¯¹è±¡çå®æ´æè¿°ä¿¡æ¯\n{\n  foo: {\n    value: \"value1\",\n    writable: true,\n    enumerable: true,\n    configurable: true\n  },\n  bar: {\n    value: \"value2\",\n    writable: true,\n    enumerable: true,\n    configurable: true\n  }\n}\n\n\n\n# padStart ä¸ padEnd\n\n// padEndåpadStartå¯ä»¥ä½¿è¾åºæ´å·¥æ´\nconst books = {\n    html: 5,\n    css: 16,\n    javascript: 128\n}\nfor(const [name, count] of Object.entries(books)) {\n    console.log(`${name.padEnd(16, '-')}|${count.toString().padStart(3, '0')}`)\n}\n\n// html------------|005\n// css-------------|016\n// javascript------|128\n\n\n\n# å°¾éå·\n\nconst arr = [\n    100,\n    200,\n    300,\n]\n\n\n\n# ES2018\n\n * å¼æ­¥è¿­ä»£ for await...of\n * Promise.prototype.finally\n * å¯¹è±¡ rest/spread\n * Regexp\n   * dotAll\n   * å½ååç»æè·\n\n\n# å¼æ­¥è¿­ä»£\n\nfor...of åé¨æ¯è¿­ä»£å¨çåºç¨ï¼è for await...of å¯¹åºçæ¯å¼æ­¥è¿­ä»£å¨ã\n\nfunction fetchData(d) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n        resolve(d)\n    }, 1000)\n  })\n}\nconst dataList = [1, 2, 3];\n\nconst promiseList = [];\ndataList.forEach(d => {\n    promiseList.push(fetchData(d)); // æ­¤å¤ fetchData å·²ç»å¼å§æ§è¡äº\n});\n\nfor await (p of promiseList) {\n  console.log(p) // éä¸ç§åæ¶ä¸æé¡ºåºè¾åº 1,2,3\n}\n\n\n> For await...of å°ä¼æè¿­ä»£é¡ºåºæ¶å°ååºãé¤éå½åè¿­ä»£çè®¡ç®åå³äºä¹åçä¸äºè¿­ä»£ï¼å¦åå¤§é¨åä¸å¡åºæ¯ä¸ç¨ promise.all å³å¯è§£å³é®é¢ã\n\nconst promiseList = [];\ndataList.forEach(d => {\n    promiseList.push(fetchData(d)); // æ­¤å¤å·²ç»å¼å§æ§è¡äº\n});\n\nPromise.all(promiseList).then(res => {\n  console.log(res) // [1, 2, 3]\n})\n\n\n\n# Promise.finally\n\nES6ä¸ºæä»¬å¸¦æ¥äº Promiseï¼ä½æ¯å®çç»æè¦ä¹æå then è¦ä¹å¤±è´¥ catchï¼ä½¿å¾æä»¬çä¸äºé»è¾ï¼å¦æ§è¡ç¶æä¿®æ¹ï¼ç»æåè°é½å¾å¨ä¸¤è¾¹åä¸éãæäº finally()ï¼é»è¾åªå¯ä»¥æ¾å¨ä¸ä¸ªå°æ¹äºã\n\nnew Promise((reslove, reject) => {\n  // ...\n}).then((res) => {\n  // reslove\n}).catch((err) => {\n  // reject\n}).finally(() => {\n  // complete\n});\n\n\n\n# rest/spread\n\nES2015 å¼å¥äºä¸ä¸ªç¹ï¼...ï¼è¿ç®ç¬¦ï¼è¿ä¸ªè¿ç®ç¬¦æ¢è½ç¨æ¥æ¶éå½æ°çå©ä½åæ°ï¼ä¹å¯ä»¥ç¨æ¥æ©å±æ°ç»ã\n\nES2018 å¯¹å¶è¿è¡äºå¢å¼ºï¼å°æ©å±åæ¶éåæ°çè½åæ©å¤§å°äºå¯¹è±¡ãä½¿å¾ ... è¿ç®ç¬¦ä¹å¯ä»¥ç¨æ¥æ¶éå¯¹è±¡çâå©ä½å±æ§âã\n\n// rest\nconst obj = {\n  a: 1,\n  b: 2,\n  c: 3\n};\n\nconst { a, ...x } = obj; // a = 1ï¼ x = { b: 2, c: 3 }\n\n// spread\nconst obj1 = { a: 1, b: 2, c: 3 };\nconst obj2 = { ...obj1, z: 26 }; // { a: 1, b: 2, c: 3, z: 26 }\n\n\n\n# Regexp\n\nRegExp å¨ ES2018 ä¸­æ°å¢dotAll ï¼ç¹å¹éï¼ãå½ååç»æè·ç­ã\n\n// ES2018å¼å¥äºdotAllæ¨¡å¼ï¼éè¿ä½¿ç¨æ è®°séé¡¹ï¼.å°±å¯ä»¥å¹éæ¢è¡ç¬¦ã\n/hello.es9/.test('hello\\nes9');  // false\n/hello.es9/s.test('hello\\nes9');  // true\n\n// å½ååç»æè·ï¼ES2018åè®¸å½åæè·ç»ä½¿ç¨ç¬¦å·?<name>, å¯ä»¥æå®å°æ¬å·ä¸­å¹éåå®¹çåç§°æ¾å¨groupsé\nconst reg = /(\\d{4})-(\\d{2})-(\\d{2})/u;\nconst matched = reg.exec('2018-12-31');\nmatched[0];  // 2018-12-12\nmatched[1];  // 2018\nmatched[2];  // 12\nmatched[3];  // 31\n\nconst reg = /(?<year>\\d{4})-(?<month>\\d{2})-(?<day>\\d{2})/u;\nconst matched = reg.exec('2018-12-31');\nmatched.groups.year;   // 2018\nmatched.groups.month;  // 12\nmatched.groups.day;    // 31\n\n\n\n# ES2019\n\n * Object.fromEntries\n * flat ä¸ flatMap\n * trimStart ä¸ trimEnd\n\n\n# Object.fromEntries\n\néå¸¸ç¨äºå°æ°ç»è½¬åä¸ºå¯¹è±¡,éå¸¸å¯ä»¥ä½ä¸º Object.entries() çåæä½ã\n\nconst obj = {name: 'å°ç±³', skin: 'white', age: 2}\nconsole.log(Object.entries(obj)); \n// [['name','å°ç±³'],['skin','white'],['age',2]]\n\nconst arr = [['name','å°ç±³'],['skin','white'],['age',2]];\nconsole.log(Object.fromEntries(arr));\n// {name: 'å°ç±³', skin: 'white', age: 2}\n\n\n\n# flat ä¸ flatMap\n\nflat å¸¸ç¨äºå°å¤ç»´æ°ç»éç»´ä¸ºä¸ç»´æ°ç»ï¼å¯ä»¥ä¼ åæ°ï¼è¡¨ç¤ºéç»´çæ·±åº¦ï¼é»è®¤æ¯1\n\nflatMap ç¸å½äºåå¯¹æ°ç»è¿è¡mapæä½ï¼ç¶åè¿è¡flatæä½\n\n[[1,2],[3,4]].flat(); // [1, 2, 3, 4]\n[[1,2],[3,4]].flatMap(i => i.reverse()) //  [2, 1, 4, 3]\n\n\n\n# trimStart ä¸ trimEnd\n\nå»é¤å­ç¬¦ä¸²ï¼åï¼åé¢çç©ºæ ¼\n\nconst str = ' Hello,ES2019! ';\nconsole.log(str.trimStart().trimEnd()); // Hello,ES2019!\n\n\n\n# ES2020\n\nhttps://h3manth.com/ES2020/\n\n * matchAll\n * ç©ºå¼åå¹¶è¿ç®ç¬¦\n * å¯éé¾æä½ç¬¦\n * Promise.allSettled\n * Dynamic import\n * BigInt\n\n\n# matchAll\n\n// match\nconst str = 'Dr. Smith and Dr. Anderson';\nconst re = /(Dr\\. )\\w+/g;\nconst res = str.match(re);  //[\"Dr. Smith\", \"Dr. Anderson\"]\n\n// matchAll\nconst re = /(Dr\\. )\\w+/g;\nconst str = 'Dr. Smith and Dr. Anderson';\nconst matches = str.matchAll(re);\n\n// è¿åçæ¯è¿­ä»£å¨å¯¹è±¡éè¦ for...of éå\nfor (const match of matches) {\n  console.log(match);\n}\n\n// [\"Dr. Smith\", \"Dr. \", index: 0, input: \"Dr. Smith and Dr. Anderson\", groups: undefined]\n// [\"Dr. Anderson\", \"Dr. \", index: 14, input: \"Dr. Smith and Dr. Anderson\", groups: undefined]\n\n\n\n# Promise.allSettled\n\n> Promise.all å·æå¹¶åæ§è¡å¼æ­¥ä»»å¡çè½åãä½å®çæå¤§é®é¢å°±æ¯å¦æåæ°ä¸­çä»»ä½ä¸ä¸ªpromiseä¸ºrejectçè¯ï¼åæ´ä¸ªPromise.all è°ç¨ä¼ç«å³ç»æ­¢ï¼å¹¶è¿åä¸ä¸ªrejectçæ°ç Promise å¯¹è±¡ãPromise.allSettled çåºç°å°±å¯ä»¥è§£å³è¿ä¸ªçç¹\n\nPromise.allSettled([\n  Promise.reject({ code: 500, msg: 'æå¡å¼å¸¸' }),\n  Promise.resolve({ code: 200, list: [] }),\n  Promise.resolve({ code: 200, list: [] })\n]).then(res => {\n  console.log(res)\n  /*\n        0: {status: \"rejected\", reason: {â¦}}\n        1: {status: \"fulfilled\", value: {â¦}}\n        2: {status: \"fulfilled\", value: {â¦}}\n   */\n})\n\n\n\n# Dynamic import\n\nå¨æå¯¼å¥è¡¨è¾¾å¼æ¯ ECMAScript çä¸ä¸ªæ°åè½ï¼å®åè®¸ä½ å¨ç¨åºçä»»æä½ç½®å¼æ­¥å è½½ä¸ä¸ªæ¨¡åã\n\nç°å¨åç«¯æåèµæºè¶æ¥è¶å¤§ï¼åç«¯åºç¨åå§åæ¶æ ¹æ¬ä¸éè¦å¨é¨å è½½è¿äºé»è¾èµæºï¼ä¸ºäºé¦å±æ¸²æéåº¦æ´å¿«ï¼å¾å¤æ¶åé½æ¯å¨æå¯¼å¥ï¼æéå è½½ï¼æ¨¡åï¼æ¯å¦æå è½½å¾çç­ï¼è¿æ ·å¯ä»¥å¸®å©æ¨æé«åºç¨ç¨åºçæ§è½ã\n\nå¶ä¸­æéå è½½è¿äºé»è¾èµæºé½ä¸è¬ä¼å¨æä¸ä¸ªäºä»¶åè°ä¸­å»æ§è¡ï¼\n\nel.onclick = () => {\n  import('/modules/my-module.js')\n    .then(module => {\n      // Do something with the module.\n    })\n    .catch(err => {\n      // load error;\n    })\n}\n\n\nè¿ç§ä½¿ç¨æ¹å¼ä¹æ¯æ await å³é®å­ã\n\nlet module = await import('/modules/my-module.js');\n\n\n\n# ES2021\n\nhttps://h3manth.com/ES2021/\n\n * é»è¾èµå¼è¿ç®ç¬¦\n * replaceAll\n * Promise.any\n * æ°å¼åéç¬¦\n\n\n# é»è¾èµå¼è¿ç®ç¬¦\n\n||=  // a ||= b ç¸å½äº a = a || b\n&&=  // a &&= b ç¸å½äº a = a && b\n??=  // a ??= b ç¸å½äº a = a ?? b\n\n\n\n# replaceAll\n\n// ES2021 ä¹å\n'1 2 1 2 1 2'.replace(/2/g, '0'); // '1 0 1 0 1 0'\n\n// ç°å¨\n'1 2 1 2 1 2'.replaceAll('2', '0'); // '1 0 1 0 1 0'\n\n\n\n# Promise.any\n\n>  * Promise.all()ä¸­çPromiseåºåä¼å¨é¨æ§è¡éè¿æè®¤ä¸ºæ¯æåï¼å¦åè®¤ä¸ºæ¯å¤±è´¥ï¼\n>  * Promise.race()ä¸­çPromiseåºåä¸­ç¬¬ä¸ä¸ªæ§è¡å®æ¯çæ¯éè¿ï¼åè®¤ä¸ºæåï¼å¦æç¬¬ä¸ä¸ªæ§è¡å®æ¯çPromiseæ¯æç»ï¼åè®¤ä¸ºå¤±è´¥ï¼\n>  * Promise.any()ä¸­çPromiseåºååªè¦æä¸ä¸ªæ§è¡éè¿ï¼åè®¤ä¸ºæåï¼å¦æå¨é¨æç»ï¼åè®¤ä¸ºå¤±è´¥ï¼\n\nPromise.any()éåç¨å¨éè¿ä¸åè·¯å¾è¯·æ±åä¸ä¸ªèµæºçéæ±ä¸ã\n\nä¾å¦ï¼Vue3.0å¨unpkgåjsdelivré½æå¨çº¿çCDNèµæºï¼é½æ¯å½å¤çCDNï¼å½åç´æ¥è°ç¨ä¸ç¡®å®åªä¸ªç«ç¹ä¼æ½é£ï¼å è½½æ¢ï¼è¿æ¶åå¯ä»¥ä¸¤ä¸ªèµæºé½è¯·æ±ï¼åªä¸ªè¯·æ±åæåå°±ä½¿ç¨åªä¸ä¸ªã\n\næ¯æ¹è¯´unpkgçå°åæ¯ï¼https://unpkg.com/vue@3.0.11/dist/vue.global.js jsdelivrçå°åæ¯ï¼https://cdn.jsdelivr.net/npm/vue@3.0.11/dist/vue.global.js\n\nlet startTime = +new Date();\nlet importUnpkg = import('https://unpkg.com/vue@3.0.11/dist/vue.runtime.esm-browser.js');\nlet importJsdelivr = import('https://cdn.jsdelivr.net/npm/vue@3.0.11/dist/vue.runtime.esm-browser.js');\nPromise.any([importUnpkg, importJsdelivr]).then(vue => {\n  console.log('å è½½å®æ¯ï¼æ¶é´æ¯ï¼' + (+new Date() - startTime) + 'ms');\n  console.log(vue.version);\n});\n\n\n\n# æ°å¼åéç¬¦\n\nconst a = 785_00;\nconst b = 1_000_000_000;\nconsole.log(a);                // 78500\nconsole.log(b);                  // 1000000000\nconsole.log(a === 78500);      // true\nconsole.log(b === 1000000000);   // true\n\n\n\n# ES2022\n\nhttps://h3manth.com/ES2022/\n\n * é¡¶å± await\n * at() æ¹æ³\n * Object.hasOwn()\n * class ç§æå­æ®µ\n\n\n# é¡¶å± await\n\nåè®¸å¼åèå¨ async å½æ°å¤é¨ä½¿ç¨ await å­æ®µãå®å°±åå·¨å¤§ç async å½æ°ï¼åå æ¯ import å®ä»¬çæ¨¡åä¼ç­å¾å®ä»¬å¼å§æ§è¡å®çä»£ç ã\n\n// è¿å»\nawait Promise.resolve(console.log('ð'));\n// â SyntaxError: await is only valid in async function\n\n(async function () {\n  await Promise.resolve(console.log('ð'));\n  // â ð\n})();\n\n// ç°å¨\nawait Promise.resolve(console.log('ð'));\n\n\nä»¥ä¸ä¾å­å°è¯å è½½ä¸ä¸ªæ¥èª first.com ç JavaScript æ¨¡åï¼å è½½å¤±è´¥ä¼æåéæ¹æ¡ï¼\n\n//module.mjs\nlet module;\n\ntry {\n  module = await import('https://first.com/libs.com/module1');\n} catch {\n  module = await import('https://second.com/libs/module1');\n}\n\n\nè¿é res åéçåå§å¼ç±æåç»æçä¸è½½è¯·æ±å³å®ã\n\n//module.mjs\nconst resPromises = [    \n    donwloadFromResource1Site,\n    donwloadFromResource2Site\n];\n\nconst res = await Promise.any(resPromises);\n\n\n\n# at() æ¹æ³\n\nå¨æ­¤ä¹åæä»¬ä½¿ç¨æ¹æ¬å· ([]) æ¥è®¿é®æ°ç»çç¬¬ N ä¸ªåç´ ãä½æ¯ï¼å¦ææä»¬æ³ä½¿ç¨æ¹æ¬å·è®¿é®æ°ç»æ«å°¾çç¬¬ N ä¸ªé¡¹ç®ï¼æä»¬å¿é¡»ä½¿ç¨ arr.length - N çç´¢å¼ãat æ¹æ³å¯ä»¥è§£å³è¿ä¸ªé®é¢ã\n\nconst arr = ['a', 'b', 'c', 'd'];\nconsole.log(arr.at(0)); // a\nconsole.log(arr.at(-1)); // d\nconsole.log(arr.at(-2)); // c\n\n\n\n# Object.hasOwn()\n\nå¨æ­¤ä¹åï¼æä»¬å¤æ­å¯¹è±¡èªèº«æ¯å¦æ¥ææå±æ§æ¶ï¼å¯ä»¥ä½¿ç¨ hasOwnPropertyï¼ä½æ¯ä¼æä¸äºé®é¢ã\n\n// å¯¹äºä½¿ç¨ null åååå»ºçå¯¹è±¡å°è¯å¯¹å¶è°ç¨æ­¤æ¹æ³ä¼å¯¼è´éè¯¯ã\nconst obj = Object.create(null);\nobj.color = 'green';\n// TypeError: obj.hasOwnProperty is not a function\nconsole.log(obj.hasOwnProperty('color'));\n\n// hasOwnProperty() æ¹æ³ä¸åä¿æ¤, å¯ä»¥è¢«è¦ç\nconst car = {\n color: 'green',\n hasOwnProperty: function() {\n   return false;\n }\n}\nconsole.log(car.hasOwnProperty('age')); // false\n\n\nå½ç¶ä»¥ä¸é®é¢é½å¯ä»¥ä½¿ç¨ Object.prototype.hasOwnProperty æ¥è§£å³ï¼ä½æ¯æä»¬ä»¥åå¯ä»¥ç´æ¥ç¨ Object.hasOwn æ¥æ¿æ¢ã\n\nå¦ææå®çå¯¹è±¡èªèº«ææå®çå±æ§ï¼åéææ¹æ³ Object.hasOwn() è¿å trueãå¦æå±æ§æ¯ç»§æ¿çæèä¸å­å¨ï¼è¯¥æ¹æ³è¿å falseã\n\nconst object1 = {\n  prop: 'exists'\n};\n\nconsole.log(Object.hasOwn(object1, 'prop'));\n// expected output: true\n\nconsole.log(Object.hasOwn(object1, 'toString'));\n// expected output: false\n\n\n\n# class ç§æå­æ®µ\n\nclass Foo {\n  #iteration = 0;\n  \n  increment() {\n    this.#iteration++;\n  }\n  \n  #auditIncrement() {\n    console.log('auditing');\n  }\n\n  logIteration() {\n    console.log(this.#iteration);\n  }\n}\n\nconst x = new Foo();\n\nx.#iteration // error\nx.#auditIncrement() // error\nx.increment(); // â works\nx.logIteration(); // â works\n",normalizedContent:"# es2016 - es2022\n\n> eså¨ç§°ecmascriptï¼ecmascriptæ¯ecmaå¶å®çæ ååèæ¬è¯­è¨ãç®åjavascriptä½¿ç¨çecmascriptçæ¬ä¸ºecma-417ãå³äºecmaçææ°èµè®¯å¯ä»¥æµè§ ecma newsæ¥çã\n> \n> es2016 - es2022 å¯¹åºçæ¯ es7 - es13\n\n\n# es2016\n\n * array.prototype.includes\n * æ±å¹è¿ç®ç¬¦\n\n\n# array.prototype.includes\n\nconst arr = [1, 3, 5, 2, '8', nan, -0]\narr.includes(1) // true\narr.includes(1, 2) // false è¯¥æ¹æ³çç¬¬äºä¸ªåæ°è¡¨ç¤ºæç´¢çèµ·å§ä½ç½®ï¼é»è®¤ä¸º0\narr.includes('1') // false\narr.includes(nan) // true\narr.includes(+0) // true\n\n\n\n# æ±å¹è¿ç®ç¬¦\n\nconsole.log(2**10);// è¾åº1024\nconsole.log(math.pow(2, 10)) // è¾åº1024\n\n\n\n# es2017\n\n * object.values ä¸ object.entries\n * object.getownpropertydescriptors\n * string.prototype.padstart ä¸ sting.prototype.padend\n * å½æ°åæ°ä¸­æ·»å å°¾éå·\n * async/await\n\n\n# object.values ä¸ object.entries\n\nconst obj = {\n    foo: 'value1',\n    bar: 'value2'\n}\n\nconsole.log(object.keys(obj))   // é®\nconsole.log(object.values(obj)) // å¼\n\nconsole.log(object.entries(obj))\n// [[\"foo\", \"value1\"], [\"bar\", \"value2\"]]\n\n// å¯ä»¥ç¨è¿ç§æ¹æ³æ¥éåå¯¹è±¡\nfor(const [key, value] of object.entries(obj)) {\n    console.log(key, value)\n}\n\n// å¯¹è±¡è½¬æ¢ä¸ºmap\nnew map(object.entries(obj))\n\n\n\n# object.getownpropertydescriptors\n\nè¯¥å½æ°è¿åæå®å¯¹è±¡ï¼åæ°ï¼çææèªèº«å±æ§æè¿°ç¬¦ãæè°èªèº«å±æ§æè¿°ç¬¦å°±æ¯å¨å¯¹è±¡èªèº«åå®ä¹ï¼ä¸æ¯éè¿ååé¾ç»§æ¿æ¥çå±æ§ã\n\næè¿°ç¬¦ï¼\n\n * writableï¼è¡¨ç¤ºè¯¥å±æ§çå¼æ¯å¦å¯ä»¥è¢«ä¿®æ¹\n\n * enumerableï¼è¡¨ç¤ºè¯¥å±æ§ä¼æ¯å¦åºç°å¨å¯¹è±¡çæä¸¾å±æ§ä¸­ã(for...in å object.keys)\n\n * configurableï¼è¡¨ç¤ºå¯¹è±¡çå±æ§æ¯å¦å¯ä»¥è¢«å é¤ï¼ä»¥åé¤ value å writable ç¹æ§å¤çå¶ä»ç¹æ§æ¯å¦å¯ä»¥è¢«ä¿®æ¹ã\n\nconst obj = {foo: 'value1', bar: 'value2'}\nobject.getownpropertydescriptors(obj)\n\n// è·åå¯¹è±¡çå®æ´æè¿°ä¿¡æ¯\n{\n  foo: {\n    value: \"value1\",\n    writable: true,\n    enumerable: true,\n    configurable: true\n  },\n  bar: {\n    value: \"value2\",\n    writable: true,\n    enumerable: true,\n    configurable: true\n  }\n}\n\n\n\n# padstart ä¸ padend\n\n// padendåpadstartå¯ä»¥ä½¿è¾åºæ´å·¥æ´\nconst books = {\n    html: 5,\n    css: 16,\n    javascript: 128\n}\nfor(const [name, count] of object.entries(books)) {\n    console.log(`${name.padend(16, '-')}|${count.tostring().padstart(3, '0')}`)\n}\n\n// html------------|005\n// css-------------|016\n// javascript------|128\n\n\n\n# å°¾éå·\n\nconst arr = [\n    100,\n    200,\n    300,\n]\n\n\n\n# es2018\n\n * å¼æ­¥è¿­ä»£ for await...of\n * promise.prototype.finally\n * å¯¹è±¡ rest/spread\n * regexp\n   * dotall\n   * å½ååç»æè·\n\n\n# å¼æ­¥è¿­ä»£\n\nfor...of åé¨æ¯è¿­ä»£å¨çåºç¨ï¼è for await...of å¯¹åºçæ¯å¼æ­¥è¿­ä»£å¨ã\n\nfunction fetchdata(d) {\n  return new promise((resolve, reject) => {\n    settimeout(() => {\n        resolve(d)\n    }, 1000)\n  })\n}\nconst datalist = [1, 2, 3];\n\nconst promiselist = [];\ndatalist.foreach(d => {\n    promiselist.push(fetchdata(d)); // æ­¤å¤ fetchdata å·²ç»å¼å§æ§è¡äº\n});\n\nfor await (p of promiselist) {\n  console.log(p) // éä¸ç§åæ¶ä¸æé¡ºåºè¾åº 1,2,3\n}\n\n\n> for await...of å°ä¼æè¿­ä»£é¡ºåºæ¶å°ååºãé¤éå½åè¿­ä»£çè®¡ç®åå³äºä¹åçä¸äºè¿­ä»£ï¼å¦åå¤§é¨åä¸å¡åºæ¯ä¸ç¨ promise.all å³å¯è§£å³é®é¢ã\n\nconst promiselist = [];\ndatalist.foreach(d => {\n    promiselist.push(fetchdata(d)); // æ­¤å¤å·²ç»å¼å§æ§è¡äº\n});\n\npromise.all(promiselist).then(res => {\n  console.log(res) // [1, 2, 3]\n})\n\n\n\n# promise.finally\n\nes6ä¸ºæä»¬å¸¦æ¥äº promiseï¼ä½æ¯å®çç»æè¦ä¹æå then è¦ä¹å¤±è´¥ catchï¼ä½¿å¾æä»¬çä¸äºé»è¾ï¼å¦æ§è¡ç¶æä¿®æ¹ï¼ç»æåè°é½å¾å¨ä¸¤è¾¹åä¸éãæäº finally()ï¼é»è¾åªå¯ä»¥æ¾å¨ä¸ä¸ªå°æ¹äºã\n\nnew promise((reslove, reject) => {\n  // ...\n}).then((res) => {\n  // reslove\n}).catch((err) => {\n  // reject\n}).finally(() => {\n  // complete\n});\n\n\n\n# rest/spread\n\nes2015 å¼å¥äºä¸ä¸ªç¹ï¼...ï¼è¿ç®ç¬¦ï¼è¿ä¸ªè¿ç®ç¬¦æ¢è½ç¨æ¥æ¶éå½æ°çå©ä½åæ°ï¼ä¹å¯ä»¥ç¨æ¥æ©å±æ°ç»ã\n\nes2018 å¯¹å¶è¿è¡äºå¢å¼ºï¼å°æ©å±åæ¶éåæ°çè½åæ©å¤§å°äºå¯¹è±¡ãä½¿å¾ ... è¿ç®ç¬¦ä¹å¯ä»¥ç¨æ¥æ¶éå¯¹è±¡çâå©ä½å±æ§âã\n\n// rest\nconst obj = {\n  a: 1,\n  b: 2,\n  c: 3\n};\n\nconst { a, ...x } = obj; // a = 1ï¼ x = { b: 2, c: 3 }\n\n// spread\nconst obj1 = { a: 1, b: 2, c: 3 };\nconst obj2 = { ...obj1, z: 26 }; // { a: 1, b: 2, c: 3, z: 26 }\n\n\n\n# regexp\n\nregexp å¨ es2018 ä¸­æ°å¢dotall ï¼ç¹å¹éï¼ãå½ååç»æè·ç­ã\n\n// es2018å¼å¥äºdotallæ¨¡å¼ï¼éè¿ä½¿ç¨æ è®°séé¡¹ï¼.å°±å¯ä»¥å¹éæ¢è¡ç¬¦ã\n/hello.es9/.test('hello\\nes9');  // false\n/hello.es9/s.test('hello\\nes9');  // true\n\n// å½ååç»æè·ï¼es2018åè®¸å½åæè·ç»ä½¿ç¨ç¬¦å·?<name>, å¯ä»¥æå®å°æ¬å·ä¸­å¹éåå®¹çåç§°æ¾å¨groupsé\nconst reg = /(\\d{4})-(\\d{2})-(\\d{2})/u;\nconst matched = reg.exec('2018-12-31');\nmatched[0];  // 2018-12-12\nmatched[1];  // 2018\nmatched[2];  // 12\nmatched[3];  // 31\n\nconst reg = /(?<year>\\d{4})-(?<month>\\d{2})-(?<day>\\d{2})/u;\nconst matched = reg.exec('2018-12-31');\nmatched.groups.year;   // 2018\nmatched.groups.month;  // 12\nmatched.groups.day;    // 31\n\n\n\n# es2019\n\n * object.fromentries\n * flat ä¸ flatmap\n * trimstart ä¸ trimend\n\n\n# object.fromentries\n\néå¸¸ç¨äºå°æ°ç»è½¬åä¸ºå¯¹è±¡,éå¸¸å¯ä»¥ä½ä¸º object.entries() çåæä½ã\n\nconst obj = {name: 'å°ç±³', skin: 'white', age: 2}\nconsole.log(object.entries(obj)); \n// [['name','å°ç±³'],['skin','white'],['age',2]]\n\nconst arr = [['name','å°ç±³'],['skin','white'],['age',2]];\nconsole.log(object.fromentries(arr));\n// {name: 'å°ç±³', skin: 'white', age: 2}\n\n\n\n# flat ä¸ flatmap\n\nflat å¸¸ç¨äºå°å¤ç»´æ°ç»éç»´ä¸ºä¸ç»´æ°ç»ï¼å¯ä»¥ä¼ åæ°ï¼è¡¨ç¤ºéç»´çæ·±åº¦ï¼é»è®¤æ¯1\n\nflatmap ç¸å½äºåå¯¹æ°ç»è¿è¡mapæä½ï¼ç¶åè¿è¡flatæä½\n\n[[1,2],[3,4]].flat(); // [1, 2, 3, 4]\n[[1,2],[3,4]].flatmap(i => i.reverse()) //  [2, 1, 4, 3]\n\n\n\n# trimstart ä¸ trimend\n\nå»é¤å­ç¬¦ä¸²ï¼åï¼åé¢çç©ºæ ¼\n\nconst str = ' hello,es2019! ';\nconsole.log(str.trimstart().trimend()); // hello,es2019!\n\n\n\n# es2020\n\nhttps://h3manth.com/es2020/\n\n * matchall\n * ç©ºå¼åå¹¶è¿ç®ç¬¦\n * å¯éé¾æä½ç¬¦\n * promise.allsettled\n * dynamic import\n * bigint\n\n\n# matchall\n\n// match\nconst str = 'dr. smith and dr. anderson';\nconst re = /(dr\\. )\\w+/g;\nconst res = str.match(re);  //[\"dr. smith\", \"dr. anderson\"]\n\n// matchall\nconst re = /(dr\\. )\\w+/g;\nconst str = 'dr. smith and dr. anderson';\nconst matches = str.matchall(re);\n\n// è¿åçæ¯è¿­ä»£å¨å¯¹è±¡éè¦ for...of éå\nfor (const match of matches) {\n  console.log(match);\n}\n\n// [\"dr. smith\", \"dr. \", index: 0, input: \"dr. smith and dr. anderson\", groups: undefined]\n// [\"dr. anderson\", \"dr. \", index: 14, input: \"dr. smith and dr. anderson\", groups: undefined]\n\n\n\n# promise.allsettled\n\n> promise.all å·æå¹¶åæ§è¡å¼æ­¥ä»»å¡çè½åãä½å®çæå¤§é®é¢å°±æ¯å¦æåæ°ä¸­çä»»ä½ä¸ä¸ªpromiseä¸ºrejectçè¯ï¼åæ´ä¸ªpromise.all è°ç¨ä¼ç«å³ç»æ­¢ï¼å¹¶è¿åä¸ä¸ªrejectçæ°ç promise å¯¹è±¡ãpromise.allsettled çåºç°å°±å¯ä»¥è§£å³è¿ä¸ªçç¹\n\npromise.allsettled([\n  promise.reject({ code: 500, msg: 'æå¡å¼å¸¸' }),\n  promise.resolve({ code: 200, list: [] }),\n  promise.resolve({ code: 200, list: [] })\n]).then(res => {\n  console.log(res)\n  /*\n        0: {status: \"rejected\", reason: {â¦}}\n        1: {status: \"fulfilled\", value: {â¦}}\n        2: {status: \"fulfilled\", value: {â¦}}\n   */\n})\n\n\n\n# dynamic import\n\nå¨æå¯¼å¥è¡¨è¾¾å¼æ¯ ecmascript çä¸ä¸ªæ°åè½ï¼å®åè®¸ä½ å¨ç¨åºçä»»æä½ç½®å¼æ­¥å è½½ä¸ä¸ªæ¨¡åã\n\nç°å¨åç«¯æåèµæºè¶æ¥è¶å¤§ï¼åç«¯åºç¨åå§åæ¶æ ¹æ¬ä¸éè¦å¨é¨å è½½è¿äºé»è¾èµæºï¼ä¸ºäºé¦å±æ¸²æéåº¦æ´å¿«ï¼å¾å¤æ¶åé½æ¯å¨æå¯¼å¥ï¼æéå è½½ï¼æ¨¡åï¼æ¯å¦æå è½½å¾çç­ï¼è¿æ ·å¯ä»¥å¸®å©æ¨æé«åºç¨ç¨åºçæ§è½ã\n\nå¶ä¸­æéå è½½è¿äºé»è¾èµæºé½ä¸è¬ä¼å¨æä¸ä¸ªäºä»¶åè°ä¸­å»æ§è¡ï¼\n\nel.onclick = () => {\n  import('/modules/my-module.js')\n    .then(module => {\n      // do something with the module.\n    })\n    .catch(err => {\n      // load error;\n    })\n}\n\n\nè¿ç§ä½¿ç¨æ¹å¼ä¹æ¯æ await å³é®å­ã\n\nlet module = await import('/modules/my-module.js');\n\n\n\n# es2021\n\nhttps://h3manth.com/es2021/\n\n * é»è¾èµå¼è¿ç®ç¬¦\n * replaceall\n * promise.any\n * æ°å¼åéç¬¦\n\n\n# é»è¾èµå¼è¿ç®ç¬¦\n\n||=  // a ||= b ç¸å½äº a = a || b\n&&=  // a &&= b ç¸å½äº a = a && b\n??=  // a ??= b ç¸å½äº a = a ?? b\n\n\n\n# replaceall\n\n// es2021 ä¹å\n'1 2 1 2 1 2'.replace(/2/g, '0'); // '1 0 1 0 1 0'\n\n// ç°å¨\n'1 2 1 2 1 2'.replaceall('2', '0'); // '1 0 1 0 1 0'\n\n\n\n# promise.any\n\n>  * promise.all()ä¸­çpromiseåºåä¼å¨é¨æ§è¡éè¿æè®¤ä¸ºæ¯æåï¼å¦åè®¤ä¸ºæ¯å¤±è´¥ï¼\n>  * promise.race()ä¸­çpromiseåºåä¸­ç¬¬ä¸ä¸ªæ§è¡å®æ¯çæ¯éè¿ï¼åè®¤ä¸ºæåï¼å¦æç¬¬ä¸ä¸ªæ§è¡å®æ¯çpromiseæ¯æç»ï¼åè®¤ä¸ºå¤±è´¥ï¼\n>  * promise.any()ä¸­çpromiseåºååªè¦æä¸ä¸ªæ§è¡éè¿ï¼åè®¤ä¸ºæåï¼å¦æå¨é¨æç»ï¼åè®¤ä¸ºå¤±è´¥ï¼\n\npromise.any()éåç¨å¨éè¿ä¸åè·¯å¾è¯·æ±åä¸ä¸ªèµæºçéæ±ä¸ã\n\nä¾å¦ï¼vue3.0å¨unpkgåjsdelivré½æå¨çº¿çcdnèµæºï¼é½æ¯å½å¤çcdnï¼å½åç´æ¥è°ç¨ä¸ç¡®å®åªä¸ªç«ç¹ä¼æ½é£ï¼å è½½æ¢ï¼è¿æ¶åå¯ä»¥ä¸¤ä¸ªèµæºé½è¯·æ±ï¼åªä¸ªè¯·æ±åæåå°±ä½¿ç¨åªä¸ä¸ªã\n\næ¯æ¹è¯´unpkgçå°åæ¯ï¼https://unpkg.com/vue@3.0.11/dist/vue.global.js jsdelivrçå°åæ¯ï¼https://cdn.jsdelivr.net/npm/vue@3.0.11/dist/vue.global.js\n\nlet starttime = +new date();\nlet importunpkg = import('https://unpkg.com/vue@3.0.11/dist/vue.runtime.esm-browser.js');\nlet importjsdelivr = import('https://cdn.jsdelivr.net/npm/vue@3.0.11/dist/vue.runtime.esm-browser.js');\npromise.any([importunpkg, importjsdelivr]).then(vue => {\n  console.log('å è½½å®æ¯ï¼æ¶é´æ¯ï¼' + (+new date() - starttime) + 'ms');\n  console.log(vue.version);\n});\n\n\n\n# æ°å¼åéç¬¦\n\nconst a = 785_00;\nconst b = 1_000_000_000;\nconsole.log(a);                // 78500\nconsole.log(b);                  // 1000000000\nconsole.log(a === 78500);      // true\nconsole.log(b === 1000000000);   // true\n\n\n\n# es2022\n\nhttps://h3manth.com/es2022/\n\n * é¡¶å± await\n * at() æ¹æ³\n * object.hasown()\n * class ç§æå­æ®µ\n\n\n# é¡¶å± await\n\nåè®¸å¼åèå¨ async å½æ°å¤é¨ä½¿ç¨ await å­æ®µãå®å°±åå·¨å¤§ç async å½æ°ï¼åå æ¯ import å®ä»¬çæ¨¡åä¼ç­å¾å®ä»¬å¼å§æ§è¡å®çä»£ç ã\n\n// è¿å»\nawait promise.resolve(console.log('ð'));\n// â syntaxerror: await is only valid in async function\n\n(async function () {\n  await promise.resolve(console.log('ð'));\n  // â ð\n})();\n\n// ç°å¨\nawait promise.resolve(console.log('ð'));\n\n\nä»¥ä¸ä¾å­å°è¯å è½½ä¸ä¸ªæ¥èª first.com ç javascript æ¨¡åï¼å è½½å¤±è´¥ä¼æåéæ¹æ¡ï¼\n\n//module.mjs\nlet module;\n\ntry {\n  module = await import('https://first.com/libs.com/module1');\n} catch {\n  module = await import('https://second.com/libs/module1');\n}\n\n\nè¿é res åéçåå§å¼ç±æåç»æçä¸è½½è¯·æ±å³å®ã\n\n//module.mjs\nconst respromises = [    \n    donwloadfromresource1site,\n    donwloadfromresource2site\n];\n\nconst res = await promise.any(respromises);\n\n\n\n# at() æ¹æ³\n\nå¨æ­¤ä¹åæä»¬ä½¿ç¨æ¹æ¬å· ([]) æ¥è®¿é®æ°ç»çç¬¬ n ä¸ªåç´ ãä½æ¯ï¼å¦ææä»¬æ³ä½¿ç¨æ¹æ¬å·è®¿é®æ°ç»æ«å°¾çç¬¬ n ä¸ªé¡¹ç®ï¼æä»¬å¿é¡»ä½¿ç¨ arr.length - n çç´¢å¼ãat æ¹æ³å¯ä»¥è§£å³è¿ä¸ªé®é¢ã\n\nconst arr = ['a', 'b', 'c', 'd'];\nconsole.log(arr.at(0)); // a\nconsole.log(arr.at(-1)); // d\nconsole.log(arr.at(-2)); // c\n\n\n\n# object.hasown()\n\nå¨æ­¤ä¹åï¼æä»¬å¤æ­å¯¹è±¡èªèº«æ¯å¦æ¥ææå±æ§æ¶ï¼å¯ä»¥ä½¿ç¨ hasownpropertyï¼ä½æ¯ä¼æä¸äºé®é¢ã\n\n// å¯¹äºä½¿ç¨ null åååå»ºçå¯¹è±¡å°è¯å¯¹å¶è°ç¨æ­¤æ¹æ³ä¼å¯¼è´éè¯¯ã\nconst obj = object.create(null);\nobj.color = 'green';\n// typeerror: obj.hasownproperty is not a function\nconsole.log(obj.hasownproperty('color'));\n\n// hasownproperty() æ¹æ³ä¸åä¿æ¤, å¯ä»¥è¢«è¦ç\nconst car = {\n color: 'green',\n hasownproperty: function() {\n   return false;\n }\n}\nconsole.log(car.hasownproperty('age')); // false\n\n\nå½ç¶ä»¥ä¸é®é¢é½å¯ä»¥ä½¿ç¨ object.prototype.hasownproperty æ¥è§£å³ï¼ä½æ¯æä»¬ä»¥åå¯ä»¥ç´æ¥ç¨ object.hasown æ¥æ¿æ¢ã\n\nå¦ææå®çå¯¹è±¡èªèº«ææå®çå±æ§ï¼åéææ¹æ³ object.hasown() è¿å trueãå¦æå±æ§æ¯ç»§æ¿çæèä¸å­å¨ï¼è¯¥æ¹æ³è¿å falseã\n\nconst object1 = {\n  prop: 'exists'\n};\n\nconsole.log(object.hasown(object1, 'prop'));\n// expected output: true\n\nconsole.log(object.hasown(object1, 'tostring'));\n// expected output: false\n\n\n\n# class ç§æå­æ®µ\n\nclass foo {\n  #iteration = 0;\n  \n  increment() {\n    this.#iteration++;\n  }\n  \n  #auditincrement() {\n    console.log('auditing');\n  }\n\n  logiteration() {\n    console.log(this.#iteration);\n  }\n}\n\nconst x = new foo();\n\nx.#iteration // error\nx.#auditincrement() // error\nx.increment(); // â works\nx.logiteration(); // â works\n",charsets:{cjk:!0}},{title:"ESæ©å±",frontmatter:{title:"ESæ©å±",date:"2020-11-06T09:52:01.000Z",categories:"JavaScript"},regularPath:"/javascript/ES6.html",relativePath:"javascript/ES6.md",key:"v-2e49301f",path:"/javascript/ES6.html",headers:[{level:2,title:"class",slug:"class",normalizedTitle:"class",charIndex:15},{level:2,title:"ç»§æ¿",slug:"ç»§æ¿",normalizedTitle:"ç»§æ¿",charIndex:28},{level:3,title:"ç»§æ¿çæ¶åextendså¹²äºä»ä¹",slug:"ç»§æ¿çæ¶åextendså¹²äºä»ä¹",normalizedTitle:"ç»§æ¿çæ¶åextendså¹²äºä»ä¹",charIndex:1845},{level:2,title:"letå½ä»¤",slug:"letå½ä»¤",normalizedTitle:"letå½ä»¤",charIndex:2249},{level:2,title:"constå½ä»¤",slug:"constå½ä»¤",normalizedTitle:"constå½ä»¤",charIndex:2884},{level:2,title:"æ¨¡æ¿å­ç¬¦ä¸²",slug:"æ¨¡æ¿å­ç¬¦ä¸²",normalizedTitle:"æ¨¡æ¿å­ç¬¦ä¸²",charIndex:7704},{level:2,title:"å¯¹è±¡å­é¢éçå¢å¼º",slug:"å¯¹è±¡å­é¢éçå¢å¼º",normalizedTitle:"å¯¹è±¡å­é¢éçå¢å¼º",charIndex:64},{level:2,title:"object.assign",slug:"object-assign",normalizedTitle:"object.assign",charIndex:76},{level:2,title:"object.is",slug:"object-is",normalizedTitle:"object.is",charIndex:8292},{level:2,title:"Mapæ°æ®ç»æ",slug:"mapæ°æ®ç»æ",normalizedTitle:"mapæ°æ®ç»æ",charIndex:93},{level:2,title:"Setæ°æ®ç»æ",slug:"setæ°æ®ç»æ",normalizedTitle:"setæ°æ®ç»æ",charIndex:104},{level:2,title:"Symbol",slug:"symbol",normalizedTitle:"symbol",charIndex:115},{level:2,title:"forEachãfindãmapãfilterãreduceãeveryãsome",slug:"foreachãfindãmapãfilterãreduceãeveryãsome",normalizedTitle:"foreachãfindãmapãfilterãreduceãeveryãsome",charIndex:129},{level:2,title:"Array.from",slug:"array-from",normalizedTitle:"array.from",charIndex:174},{level:3,title:"ä» String çææ°ç»",slug:"ä»-string-çææ°ç»",normalizedTitle:"ä» string çææ°ç»",charIndex:11151},{level:3,title:"ä» Set çææ°ç»",slug:"ä»-set-çææ°ç»",normalizedTitle:"ä» set çææ°ç»",charIndex:11223},{level:3,title:"ä» Map çææ°ç»",slug:"ä»-map-çææ°ç»",normalizedTitle:"ä» map çææ°ç»",charIndex:11335},{level:3,title:"ä»ç±»æ°ç»å¯¹è±¡ï¼argumentsï¼çææ°ç»",slug:"ä»ç±»æ°ç»å¯¹è±¡-arguments-çææ°ç»",normalizedTitle:"ä»ç±»æ°ç»å¯¹è±¡ï¼argumentsï¼çææ°ç»",charIndex:11582},{level:3,title:"å¨ Array.from ä¸­ä½¿ç¨ç®­å¤´å½æ°",slug:"å¨-array-from-ä¸­ä½¿ç¨ç®­å¤´å½æ°",normalizedTitle:"å¨ array.from ä¸­ä½¿ç¨ç®­å¤´å½æ°",charIndex:11688},{level:3,title:"åå§åäºç»´æ°ç»",slug:"åå§åäºç»´æ°ç»",normalizedTitle:"åå§åäºç»´æ°ç»",charIndex:12048},{level:2,title:"Array.of",slug:"array-of",normalizedTitle:"array.of",charIndex:12114}],lastUpdated:"12/7/2022, 2:52:13 PM",lastUpdatedTimestamp:1670395933e3,headersStr:"class ç»§æ¿ ç»§æ¿çæ¶åextendså¹²äºä»ä¹ letå½ä»¤ constå½ä»¤ æ¨¡æ¿å­ç¬¦ä¸² å¯¹è±¡å­é¢éçå¢å¼º object.assign object.is Mapæ°æ®ç»æ Setæ°æ®ç»æ Symbol forEachãfindãmapãfilterãreduceãeveryãsome Array.from ä» String çææ°ç» ä» Set çææ°ç» ä» Map çææ°ç» ä»ç±»æ°ç»å¯¹è±¡ï¼argumentsï¼çææ°ç» å¨ Array.from ä¸­ä½¿ç¨ç®­å¤´å½æ° åå§åäºç»´æ°ç» Array.of",content:"# ESæ©å±\n\n * ES6çclass\n * ES6çç»§æ¿ï¼extendä¸super\n * ES6çletä¸const\n * å¯¹è±¡å­é¢éçå¢å¼º\n * object.assign\n * Mapæ°æ®ç»æ\n * Setæ°æ®ç»æ\n * Symbolå¯ä½ä¸ºé®\n * forEachãfindãmapãfilterãreduceãeveryãsome\n * Array.from\n\n\n# class\n\nclass Person{//å®ä¹äºä¸ä¸ªåå­ä¸ºPersonçç±»\n    constructor(name,age){//constructoræ¯ä¸ä¸ªæé æ¹æ³ï¼ç¨æ¥æ¥æ¶åæ°\n        this.name = name;//thisä»£è¡¨çæ¯å®ä¾å¯¹è±¡\n        this.age = age;\n    }\n    say(){//è¿æ¯ä¸ä¸ªç±»çæ¹æ³ï¼æ³¨æåä¸ä¸è¦å ä¸function\n        return \"æçåå­å«\" + this.name+\"ä»å¹´\"+this.age+\"å²äº\";\n    }\n}\nvar obj=new Person(\"laotie\",88);\nconsole.log(obj.say());//æçåå­å«laotieä»å¹´88å²äº\nconsole.log(typeof Person);//function\nconsole.log(Person===Person.prototype.constructor);//true\n\n//å®éä¸ç±»çæææ¹æ³é½å®ä¹å¨ç±»çprototypeå±æ§ä¸ã\n//è¿å¯ä»¥éè¿Object.assignæ¹æ³æ¥ä¸ºå¯¹è±¡å¨æå¢å æ¹æ³\nObject.assign(Person.prototype,{\n    getName:function(){\n        return this.name;\n    },\n    getAge:function(){\n        return this.age;\n    }\n})\nvar obj=new Person(\"laotie\",88);\nconsole.log(obj.getName());//laotie\nconsole.log(obj.getAge());//88\n\n//constructoræ¹æ³æ¯ç±»çæé å½æ°çé»è®¤æ¹æ³ï¼éè¿newå½ä»¤çæå¯¹è±¡å®ä¾æ¶ï¼èªå¨è°ç¨è¯¥æ¹æ³ã\nclass Box{\n    constructor(){\n        console.log(\"å¦å¦å¦ï¼ä»å¤©å¤©æ°å¥½æ´æ\");//å½å®ä¾åå¯¹è±¡æ¶è¯¥è¡ä»£ç ä¼æ§è¡ã\n    }\n}\nvar obj=new Box();\n\n//ç±»çææå®ä¾å±äº«ä¸ä¸ªååå¯¹è±¡ï¼å®ä»¬çååé½æ¯Person.prototypeï¼æä»¥protoå±æ§æ¯ç¸ç­ç\nclass Box{\n    constructor(num1,num2){\n        this.num1 = num1;\n        this.num2 = num2;\n    }\n    sum(){\n        return num1+num2;\n    }\n}\n//box1ä¸box2é½æ¯Boxçå®ä¾ãå®ä»¬ç__proto__é½æåBoxçprototype\nvar box1=new Box(12,88);\nvar box2=new Box(40,60);\nconsole.log(box1.__proto__===box2.__proto__);//true\n//ç±æ­¤ï¼ä¹å¯ä»¥éè¿protoæ¥ä¸ºç±»å¢å æ¹æ³ãä½¿ç¨å®ä¾çprotoå±æ§æ¹åååï¼ä¼æ¹åClassçåå§å®ä¹ï¼å½±åå°ææå®ä¾ï¼æä»¥ä¸æ¨èä½¿ç¨ï¼\n\n\n\n# ç»§æ¿\n\nclass b extends a{\n    constructor(x, y, z) {\n        super(x, y);//è¦å¨thisçåé¢\n        this.z = z;\n    }\n    toString2(){\n        return super.toString()+' '+this.z\n    }\n}\n//superè¡¨ç¤ºç¶ç±»çæé å½æ°ï¼å¹¶ä¸å­ç±»çæé å½æ°å¿é¡»æ§è¡ä¸æ¬¡super\n//`super()`ç¸å½äº`a.prototype.constructor.call(this)`\n\n\n * superå®æäºè°ç¨ç¶ç±»æé å½æ°ï¼extendså®ç°äºååé¾çç»§æ¿ï¼æ¬è´¨ä¸åES5æ¯ä¸æ ·ç\n\n\n# ç»§æ¿çæ¶åextendså¹²äºä»ä¹\n\nextendså¨å®ç°ç»§æ¿æ¹é¢ï¼æ¬è´¨ä¸ä¹æ¯ååé¾ç»§æ¿,è¯¥æ¹æ³å®ç°äºä¸¤æ­¥ååé¾ç»§æ¿ å¤§å¤æ°æµè§å¨ç ES5 å®ç°ä¹ä¸­ï¼æ¯ä¸ä¸ªå¯¹è±¡é½æ__proto__å±æ§ï¼æåå¯¹åºçæé å½æ°çprototypeå±æ§ã Class ä½ä¸ºæé å½æ°çè¯­æ³ç³ï¼åæ¶æprototypeå±æ§å__proto__å±æ§ï¼å æ­¤åæ¶å­å¨ä¸¤æ¡ç»§æ¿é¾ã\n\n * ï¼1ï¼å­ç±»ç__proto__å±æ§ï¼è¡¨ç¤ºæé å½æ°çç»§æ¿ï¼æ»æ¯æåç¶ç±»ãï¼æå­ç±»æé å½æ°(Child)çåå(__proto__)æåäºç¶ç±»æé å½æ°(Parent)ï¼ï¼\n * ï¼2ï¼å­ç±»prototypeå±æ§ç__proto__å±æ§ï¼è¡¨ç¤ºæ¹æ³çç»§æ¿ï¼æ»æ¯æåç¶ç±»çprototypeå±æ§ã\n * ES5ç»§æ¿\n * ES6ç»§æ¿\n\nES5åªæä¸¤ç§å£°æåéçæ¹å¼ï¼varåfunctionï¼ES6è¿æ·»å äºä¸¤ç§å¸¸ç¨çå£°æåéçæ¹å¼ï¼letåconstã\n\n\n# letå½ä»¤\n\nES6æ°å¢äºletå½ä»¤ï¼ç¨æ¥å£°æåéï¼å®çç¨æ³ç±»ä¼¼äºvarï¼ä½æ¯æå£°æçåéï¼åªå¨letå½ä»¤æå¨çä»£ç ååææã\n\n1ãforå¾ªç¯çè®¡æ°å¨ï¼å°±å¾åéä½¿ç¨letã\n\nvar a = [];\nfor (var i = 0; i < 10; i++) {\n\ta[i] = function() {\n\t\tconsole.log(i);\n\t}\n}\na[6](); // 10\n\n\nåéiæ¯varå£°æçï¼å¨å¨å±èå´åææï¼æä»¥æ¯æ¬¡å¾ªç¯æ°çiå¼é½ä¼è¦çæ§å¼ï¼å¯¼è´æåè¾åºçæ¯æåä¸è½®çiçå¼ã\n\nvar a = [];\nfor (let i = 0; i < 10; i++) {\n\ta[i] = function() {\n\t\tconsole.log(i);\n\t}\n}\na[5](); // 5\n\n\nä½¿ç¨letï¼å£°æçåéä»å¨åçº§ä½ç¨ååææï¼æåè¾åºçæ¯5ã\n\n2ãletä¸å­å¨åéæåï¼letä¸åvaré£æ ·ä¼åçåéæåï¼æä»¥ï¼åéä¸å®è¦å¨å£°æåä½¿ç¨ï¼å¦åæ¥éã\n\nconsole.log(i); // è¾åºï¼undefined\nconsole.log(j); // æ¥é\nvar i = 5;\nlet j = 10;\n\n\n3ãææ¶æ§æ­»åºï¼\n\nåªè¦åçº§ä½ç¨åå­å¨letå½ä»¤ï¼å®æå£°æçåéå°±ç»å®å°è¿ä¸ªåºåï¼ä¸ååå¤é¨çå½±åã\n\nvar i= 6;\nif (i > 5) {\n\ti = 3; // æ¥é\n\tlet i;\n}\n\n\nES6æç¡®è§å®ï¼è¥åä½ç¨åä¸­å­å¨letåconstå½ä»¤ï¼åå®ä»¬å£°æçåéï¼ä»ä¸å¼å§å°±å½¢æäºå°é­ä½ç¨åï¼å¡æ¯å¨å£°æä¹åå°±ä½¿ç¨è¿äºåéï¼å°±ä¼æ¥éã\n\nå¨ä»£ç ååï¼ä½¿ç¨letå½ä»¤å£°æåéä¹åï¼è¯¥åéé½æ¯ä¸å¯ç¨çï¼ä¸å¯èµå¼ï¼ä¸å¯è®¿é®ç­ï¼ï¼è¿ç§°ä¸ºâææ¶æ§æ­»åºâã\n\nææ¶æ§æ­»åºä½¿å¾typeofæä½ä¸ä¸å®å®å¨ï¼æä»¥å¨letå£°æä¹åï¼ä½¿ç¨typeofæä½ç¬¦ä¼æ¥éãèå¨letåºç°ä¹åï¼typeofæ¯ç¾åä¹ç¾å®å¨çï¼æ°¸è¿ä¸ä¼è¢«æ¥éï¼å³ä½¿åéæ²¡æè¢«å£°æï¼typeofä¹ä¼è¿åundefinedã\n\nif (true) {\n\talert(typeof x); // æ¥é\n\talert(typeof y); // undefined\n\tlet x;\n}\n\n\nææ¶æ§æ­»åºçæ¬è´¨ï¼åªè¦ä¸è¿å¥å½åä½ç¨åï¼æè¦ä½¿ç¨çåéå°±å·²ç»å­å¨äºï¼ä½æ¯ä¸å¯è·åï¼åªæç­å°å£°æåéçé£ä¸è¡ä»£ç åºç°ï¼æå¯ä»¥è·ååä½¿ç¨è¯¥åéã\n\nES6è§å®ææ¶æ§æ­»åºåletãconstè¯­å¥ä¸åºç°åéæåï¼ä¸»è¦æ¯ä¸ºäºåå°è¿è¡æ¶éè¯¯ï¼é²æ­¢åéå¨å£°æåå°±ä½¿ç¨è¯¥åéï¼ä»èå¯¼è´ææä¹å¤çéè¯¯ãè¿ç±»éè¯¯å¨ES5ä¸­å¾å¸¸è§ã\n\n4ãä¸åè®¸éå¤å£°æ\n\nletä¸åè®¸å¨ç¸åä½ç¨ååï¼éå¤å£°æåä¸ä¸ªåéã\n\nfunction func() { // æ¥é\n\tvar i= 1;\n\tlet i = 1;\n}\nfunction func() { // æ¥é\n\tlet i= 1;\n\tlet i = 1;\n}\n\n\nä¸è½å¨å½æ°åé¨éæ°å£°æåæ°ã\n\nfunction func(arg) { // æ¥é\n\tlet arg;\n}\nfunction func(arg) { // ä¸æ¥é\n\t{\n\t\tlet arg;\n\t}\n}\n\n\n\n# constå½ä»¤\n\nconstå£°æä¸ä¸ªåªè¯»çå¸¸éï¼ä¸æ¦å£°æï¼å¸¸éçå¼å°±ä¸è½æ¹åï¼è¿æå³çï¼constä¸æ¦å£°æå¸¸éï¼å°±å¿é¡»ç«å³åå§åï¼ä¸è½ç­å°ä¹ååèµå¼ãå æ­¤ï¼æ¹åå¸¸éååªå£°æä¸èµåå§å¼é½ä¼æ¥éã\n\nconstçä½ç¨åä¸letå½ä»¤ç¸åï¼åªå¨å£°ææå¨çåçº§ä½ç¨ååææã\n\nif (true) {\n\tconst i = 5;\n}\nconsole.log(i); // æ¥é\n\n\nconstå£°æçå¸¸éä¹ä¸æåï¼åæ¶å­å¨ææ¶æ§æ­»åºï¼åªè½å¨å£°æçä½ç½®åé¢ä½¿ç¨ã\n\nif (true) {\n\tconsole.log(i); // æ¥é\n\tconst i = 5;\n}\n\n\nconstå£°æçå¸¸éï¼ä¹åletä¸æ ·ä¸å¯éå¤å£°æã\n\nvar i = 5;\nlet j = 10;\nconst i =6; // æ¥é\nconst j = 11; // æ¥é\n\n\nå¯¹äºå¤åç±»åçå¸¸éï¼å¸¸éåä¸æåæ°æ®ï¼èæ¯æåæ°æ®æå¨çå°åãconstå½ä»¤åªæ¯ä¿è¯å¸¸éåæåçå°åä¸åï¼å¹¶ä¸ä¿è¯è¯¥å°åçæ°æ®ä¸åï¼ä¹å°±æ¯è¯´ï¼å°å¯¹è±¡å¸¸éæåå¦ä¸ä¸ªå°åä¼æ¥éï¼ä½å¯¹è±¡æ¬èº«æ¯å¯åçï¼å¯ä»¥ä¸ºå¶æ·»å ï¼ä¿®æ¹å±æ§ï¼å æ­¤å°ä¸ä¸ªå¯¹è±¡å£°æä¸ºå¸¸éå¿é¡»ååå°å¿ã\n\nconst obj = {};\nobj.name = âAliceâ;\nobj = {}; // æ¥é\n\n\nå°ä¸ä¸ªæ°ç»å£°æä¸ºå¸¸éï¼è¯¥æ°ç»æ¬èº«æ¯å¯åçï¼ä½æ¯è¥å°å¦ä¸ä¸ªæ°ç»èµå¼ç»è¯¥æ°ç»ï¼ä¼æ¥éã\n\nconst arr = [];\narr.push(1);\narr = [1,2,3,4]; // æ¥é\n\n\nè½¬è½½èªhttps://blog.csdn.net/zhouziyu2011/article/details/68067609\n\nä¸ç¨varï¼ä¸»ç¨constï¼éålet\nä¸»ç¨constçå¥½å¤æ¯ç¨äºå¤æ­åéæ¯å¦éè¦æ´æ¹\n\n\n----------------------------------------\n\n * ç®­å¤´å½æ°\n\n//ä¸éè¦ function å³é®å­æ¥åå»ºå½æ°\n//çç¥ return å³é®å­\n//ç»§æ¿å½åä¸ä¸æç this å³é®å­\n\n// ES5\n[1,2,3].map((function(x){  //mapæ¹æ³è¿åä¸ä¸ªç±åæ°ç»ä¸­çæ¯ä¸ªåç´ è°ç¨æå®æ¹æ³åçè¿åå¼ç»æçæ°æ°ç»ã\n    return x + 1;\n}).bind(this));\n\n//array.map(function() {}, this) çä½ç¨å®éä¸å array.map(function() {}.bind(this)) æ¯ä¸æ ·çãmapçç¬¬äºä¸ªåæ°å°±æ¯ç»ç¬¬ä¸ä¸ªåæ°bindä¸ä¸ªå¯¹è±¡ã\n    \n// ä½¿ç¨ç®­å¤´å½æ°\n[1,2,3].map(x => x + 1);\n\n\n * å½æ°é»è®¤åæ°å¼\n\n// ES6ä¹åï¼å½æªä¼ å¥åæ°æ¶ï¼text = 'default'ï¼\nfunction printText(text) {\n    text = text || 'default';\n    console.log(text);\n}\n\n// ES6ï¼\nfunction printText(text = 'default') {\n    console.log(text);\n}\n\n// æå¤ä¸ªåæ°æ¶ï¼å¸¦é»è®¤å¼çè¦æ¾å°æå\n\n\n * æ©å±è¿ç®ç¬¦(spread)åå©ä½è¿ç®ç¬¦(rest)ï¼å³...çå«ä¹\n\n//æ©å±è¿ç®ç¬¦(spread)   æ°ç»åä¸ºåæ°,åè½æ¯ææ°ç»æç±»æ°ç»å¯¹è±¡å±å¼æä¸ç³»åç¨éå·éå¼çå¼\n\n//1.æé æ°ç»\nvar arr1 = ['a','b','c'];\nvar arr2 = ['aa','bb','cc'];\nvar arrs = [...arr1, ...arr2];\nconsole.log(arrs); // ['a','b','c','aa','bb','cc']\n//2.è§£ææ°ç»\nvar son1,son2;\n[son1, ...son2] = arr1\nconsole.log(son1);  // 'a'\nconsole.log(son2);  //['b','c']\n//3.åæ°èµå¼\nconst arr = [2,3,1,5];\nconst maxNum = Math.max(...arr); // è¿å5ãmaxå½æ°ä¸æ¥åæ°ç»åªæ¥åæ°å\n\n\n//å©ä½è¿ç®ç¬¦(rest)     åæ°è½¬åä¸ºæ°ç»,æéå·éå¼çå¼åºåç»åæä¸ä¸ªæ°ç»\n//1.ææåæ°å¯ç±ä¸ä¸ªåéç»ä¸æ¥æ¶\nfunction foo(...args) {\n  console.log(args);\n}\nfoo( 1, 2, 3, 4, 5); // [1, 2, 3, 4, 5]\nfoo( 'a', 'b', 'c'); // [a,b,c]\n\n\n * å¯¹è±¡åæ°ç»è§£æ\n\n//1.å¯¹è±¡\nvar obj = {x: 1, y: 2, z: 3};\nconst {x, y, z} = obj; // x = 1, y = 2, z = 3\n//è¿å¯èµå¼a,b,c\nconst {x: a, y: b, z: c} = obj; // a = 1, b = 2, c = 3\n\n//2.æ°ç»\nconst arr = [1, 2, 3, 4, 5, 6]\nconst [a, b] = arr;\nconsole.log(a, b);  // 1, 2ï¼æé¡ºåºèªå¨è·å\nconst [a, b,,, c] = arr;\nconsole.log(a, b, c);  // 1, 2, 5  è·åæå®ä½ç½®\n\n//3.å½æ°å¯¹è±¡åæ°\nconst student = {\n  name: 'Job',\n  num: 001,\n  age: 18,\n  sex: 'boy'\n};\nconst check = function half({num,sex}) {\n    return (num , sex);\n};\nconsole.log(student); // ä¸ä¸ªobject\nconsole.log(check(student)); // (001, 'boy')\n\n\n * Mapæ°æ®ç»æ\n\nä¸ºä»ä¹éè¦Mapï¼å ä¸ºObjectæ¬è´¨ä¸æ¯é®å¼å¯¹çéåï¼Objectçé®å¨ä½¿ç¨Object.keysè¾åºæ¶é½è½¬åä¸ºäºå­ç¬¦ä¸²ï¼å¦æé®ä¸ºå¯¹è±¡åé½è½¬åä¸º[object, Object]ï¼ä½æ¯Mapçé®ä¸éã\n\nä¸Objectçåºå«\n\nï¼1ï¼Map ä¸­çé®å¼æ¯æåºçï¼èæ·»å å°å¯¹è±¡ä¸­çé®åä¸æ¯ãå æ­¤ï¼å½å¯¹å®è¿è¡éåæ¶ï¼Map å¯¹è±¡æ¯ææå¥çé¡ºåºè¿åé®å¼ã\n\nï¼2ï¼ä½ å¯ä»¥éè¿ size å±æ§ç´æ¥è·åä¸ä¸ª Map çé®å¼å¯¹ä¸ªæ°ï¼è Object çé®å¼å¯¹ä¸ªæ°åªè½æå¨è®¡ç®ã\n\n//Mapçç»æéå\n// 1. keys()--\x3eå°é®åé½ååºæ¥ï¼ç»æä¸ä¸ªå¯éåçæ°æ®éå\nlet m = new Map([\n   [123,'abc'],\n   ['a','hahaha'],\n   [1>2,'baidu.com']\n]);\nfor(let x of m.keys()){  //m.keys => MapIterator {123, \"a\", false}  è¿åå®¹å¨å¯¹è±¡\n   console.log(x);\n}\n--\x3e123 a false\n\n//2. values()  è¿åé®å¼çéåå¨\nlet m = new Map([\n   [123,'abc'],\n   ['a','hahaha'],\n   [1>2,'baidu.com']\n]);\nfor(let x of m.values()){  //m.values=>MapIterator {\"abc\", \"hahaha\", \"baidu.com\"}\n   console.log(x);\n}\n--\x3eabc hahaha baidu.com\n\n//3. entries()  è¿åæææåçéåå¨\nlet m = new Map([\n   [123,'abc'],\n   ['a','hahaha'],\n   [1>2,'baidu.com']\n]);\nm.entries()   //MapIterator {123 => \"abc\", \"a\" => \"hahaha\", false => \"baidu.com\"}\n[...m.entries()] // [Array(2), Array(2), Array(2)]\n\n//4. æ©å±è¿ç®ç¬¦,è½¬æ¢ä¸ºäºç»´æ°ç»æä¸ç»´æ°ç»\nlet m = new Map([\n   [123,'abc'],\n   ['a','hahaha'],\n   [1>2,'baidu.com']\n]);\nconsole.log([...m]) //(3) [Array(2), Array(2), Array(2)]\n[...m.keys()]       //[123, \"a\", false]\n\n\n * æ°ç»çincludeæ¹æ³\n\nå¨ES5ï¼Arrayå·²ç»æä¾äºindexOfç¨æ¥æ¥æ¾æä¸ªåç´ çä½ç½®ï¼å¦æä¸å­å¨å°±è¿å-1ï¼\n\nç¼ºç¹ï¼\n\n 1. æ¯å®ä¼è¿å-1ååç´ çä½ç½®æ¥è¡¨ç¤ºæ¯å¦åå«ï¼å¨å®ä½æ¹é¢æ¯æ²¡é®é¢ï¼å°±æ¯ä¸å¤è¯­ä¹åã\n\n 2. ä¸è½å¤æ­æ¯å¦æNaNçåç´ ã\n\nES6æä¾äºArray.includes()å½æ°å¤æ­æ¯å¦åå«æä¸åç´ ï¼é¤äºä¸è½å®ä½å¤ï¼è§£å³äºindexOfçä¸è¿°çä¸¤ä¸ªé®é¢ãå®ç´æ¥è¿åtrueæèfalseè¡¨ç¤ºæ¯å¦åå«åç´ ï¼å¯¹NaNä¸æ ·è½æææã\n\n[1, 2, 3].includes(2)     // true\n[1, 2, 3].includes(4)     // false\n[1, 2, NaN].includes(NaN) // true\n[1, 2, 3].includes(3, 3);  // false  è¯¥æ¹æ³çç¬¬äºä¸ªåæ°è¡¨ç¤ºæç´¢çèµ·å§ä½ç½®ï¼é»è®¤ä¸º0\n[1, 2, 3].includes(3, -1); // true\n\n\n\n# æ¨¡æ¿å­ç¬¦ä¸²\n\n// æ¨¡æ¿å­ç¬¦ä¸²åé¢å¯ä»¥æ·»å æ ç­¾\n\nconst name = 'tom'\nconst gender = true\n\nfunction myTagFunc (strings, name, gender) {\n    console.log(strings, name, gender)\n}\n\nconst result = myTagFuc`hey, ${name} is a ${gender}`\nconsole.log(result)\n\n\n\n# å¯¹è±¡å­é¢éçå¢å¼º\n\nconst bar = '345'\nconst obj = {\n    foo: 123\n    bar,                 // bar: bar\n    method1 () {         // çç¥äº :function\n    \tconsole.log(1)   \n\t}\n\t[Math.random()]: 123 // è®¡ç®å±æ§ï¼å ä¸æ¹æ¬å·ï¼å¯ä»¥ä¸ºä¸ä¸ªéæºçå¼\n}\n\n\n * å¯¹è±¡åå§å\n\n\n# object.assign\n\nconst source = {\n    a: 123,\n    b: 123\n}\n\nconst target = {\n    a: 456,\n    c: 456\n}\n\nObject.assign(target,source)\n\n\n\n# object.is\n\n+0 === -0 // true\nNaN === NaN // false\n\nobject.is(+0, -0) //false\nObject.is(NaN, NaN) // true\n\n\nObject.is() æ¹æ³å¤æ­ä¸¤ä¸ªå¼æ¯å¦ä¸ºåä¸ä¸ªå¼ãå¦ææ»¡è¶³ä»¥ä¸æ¡ä»¶åä¸¤ä¸ªå¼ç¸ç­:\n\n * é½æ¯ undefined\n * é½æ¯ null\n * é½æ¯ true æ false\n * é½æ¯ç¸åé¿åº¦çå­ç¬¦ä¸²ä¸ç¸åå­ç¬¦æç¸åé¡ºåºæå\n * é½æ¯ç¸åå¯¹è±¡ï¼æå³çæ¯ä¸ªå¯¹è±¡æåä¸ä¸ªå¼ç¨ï¼\n * é½æ¯æ°å­ä¸\n   * é½æ¯ +0\n   * é½æ¯ -0\n   * é½æ¯ NaN\n   * æé½æ¯éé¶èä¸é NaN ä¸ä¸ºåä¸ä¸ªå¼\n\nä¸== è¿ç®ä¸åã == è¿ç®ç¬¦å¨å¤æ­ç¸ç­åå¯¹ä¸¤è¾¹çåé(å¦æå®ä»¬ä¸æ¯åä¸ç±»å) è¿è¡å¼ºå¶è½¬æ¢ (è¿ç§è¡ä¸ºçç»æä¼å° \"\" == false å¤æ­ä¸º true), è Object.isä¸ä¼å¼ºå¶è½¬æ¢ä¸¤è¾¹çå¼ã\n\nä¸=== è¿ç®ä¹ä¸ç¸åã === è¿ç®ç¬¦ (ä¹åæ¬ == è¿ç®ç¬¦) å°æ°å­ -0 å +0 è§ä¸ºç¸ç­ ï¼èå°Number.NaN ä¸NaNè§ä¸ºä¸ç¸ç­.\n\n\n# Mapæ°æ®ç»æ\n\nWhen You Should Prefer Map Over Object In JavaScript\n\nObject ç¸æ¯äº Map çç¼ºç¹ï¼\n\n * ååæ±¡æï¼Object ä¼èªå¨ç»§æ¿ååä¸çæ¹æ³ï¼å¦ hasOwnProperty,å¦æå¨å¯¹è±¡æ¬èº«å®ä¹äºç¸åçæ¹æ³ï¼åæ æ³åºåæ¹æ³æ¯ååä¸çè¿æ¯å¯¹è±¡æ¬èº«çãå½ç¶ä¹å¯ä»¥ä½¿ç¨ Object.create(null)æ¥åå»ºä¸ä¼ç»§æ¿çå¯¹è±¡ã\n * å½åå²çªï¼å¯¹è±¡èªå·±çå±æ§å¯è½ä¼åååä¸çå±æ§å²çªï¼æ­¤æ¶æä»¬éè¦ç¨ Object.prototype.hasOwnProperty.call(obj, key) æ¥ç¡®å®ååæ¯å¦å¨å¯¹è±¡æ¬èº«ï¼å½ç¶ç°å¨ä¹å¯ä»¥ç¨ Object.hasOwnã\n * è·åå¤§å°ï¼æ²¡æç´æ¥è·å size ç apiï¼ä½æ¯å¯ä»¥ä½¿ç¨Object.keys, Object.values å Object.entriesï¼è·åå¯¹åºæ°ç»ã\n * ä¸å¯è¿­ä»£ï¼ä¸è½ä½¿ç¨for...ofè¿­ä»£ï¼ä½æ¯å¯ä»¥ä½¿ç¨Object.keys, Object.values å Object.entriesï¼è·åå¯¹åºæ°ç»åè¿è¡è¿­ä»£ã\n * æ¸ç©ºå¯¹è±¡ï¼åªè½ä½¿ç¨ delete æ¥éä¸ªå é¤å±æ§ï¼ç¸æ¯äº Map.prototype.delete è¦æ¢çå¾ã\n * æ£æ¥å±æ§ï¼ä¸è½ä½¿ç¨ç¹è¿ç®åæ¬å·è¿ç®ç¬¦æ¥å¤æ­å±æ§æ¯å¦å­å¨ï¼å ä¸ºå±æ§å¯ä»¥è¢«è®¾ç½®ä¸º undefinedï¼è¦ä½¿ç¨Object.prototype.hasOwnProperty æè Object.hasOwnã\n\nMap çä¼ç¹ï¼\n\n * é®å¯ä»¥ä¸ºä»»ææ°æ®ç±»å\n * ç¨æ·å®ä¹çå±æ§åç»ææ¬èº«å±æ§ææç¡®çåç¦»ï¼Map.prototype.get æ¥è·åç¨æ·å®ä¹çå±æ§\n * å¯ä»¥è¿­ä»£ï¼ä¹å¯ä»¥è¿è¡è§£æï¼const [[firstKey, firstValue]] = map\n * ä¾¿æ·ç apiï¼Map.prototype.has,Map.prototype.get,Map.prototype.size,Map.prototype.clear\n * æ§è½æ´å¥½\n\n\n# Setæ°æ®ç»æ\n\nconst s = new Set()\ns.add(1).add(2)\n\nconsole.log(s.size)\nconsole.log(s.has(100))\nconsole.log(s.delete(3))\ns.clear()\n\n\n\n# Symbol\n\nconst obj = {\n    [Symbol()]: 'symbol value',\n    foo: 'value'\n}\n\n// ç¨for in, Object.keys, JSON.stringifyé½è·åä¸å°\n\n\n\n# forEachãfindãmapãfilterãreduceãeveryãsome\n\n# 1ãforEach æ²¡æè¿åå¼ï¼åªæ¯è®©æ°ç»ä¸­çæ¯ä¸ªåç´ æ§è¡functionçæä½\n\nlet arr = [1,2,3,4,5];\narr.forEach((item,index)=>{\n    console.log(item * 2);       //2,4,6,8,10\n})\n\n\n# 2ãfind è¿åæ°ç»ä¸­ç¬¬ä¸ä¸ªæ»¡è¶³æ¡ä»¶çåç´ ï¼æ¥æ¾ï¼\n\nlet arr = [1,2,3,4,5];\narr.find((item,index)=>{\n    return item > 3;       //4\n})\n\n\n# 3ãmap è¿åä¸ä¸ªæ°æ°ç»ï¼æ°ç»ä¸­çæ¯ä¸ªåç´ ä¸ºè°ç¨functionçç»æ\n\nlet arr = [1,2,3,4,5];\narr.map((item,index)=>{\n    return item * 2;       //[2,4,6,8,10]\n})\n\n\n# 4ãfilter è¿åä¸ä¸ªç¬¦åfunctionæ¡ä»¶çåç´ æ°ç»ï¼è¿æ»¤ï¼\n\nlet arr = [1,2,3,4,5];\narr.filter((item,index)=>{\n    return item > 3;       //[4,5]\n})\n\n\n# 5ãreduce è®©æ°ç»ä¸­çåé¡¹ååé¡¹åæç§è¿ç®ï¼è¿åç´¯è®¡çæç»å¼\n\nlet arr = [1,2,3,4,5];\narr.reduce((prev,next)=>{\n    return prev + next;       //15\n})\n\n\n# 6ãevery è¿åä¸ä¸ªBooleanå¼ï¼å¤æ­æ°ç»ä¸­æ¯ä¸ä¸ªåç´ æ¯å¦ç¬¦åfunctionçæ¡ä»¶\n\nlet arr = [1,2,3,4,5];\narr.every((item,index)=>{\n    return item > 0;       //true(ææåç´ é½æ»¡è¶³æä¸ºtrue)\n})\n\n\n# 7ãsome è¿åä¸ä¸ªBooleanå¼ï¼å¤æ­æ°ç»ä¸­æ¯å¦æåç´ ç¬¦åfunctionçæ¡ä»¶\n\nlet arr = [1,2,3,4,5];\narr.some((item,index)=>{\n    return item > 4;       //true(åªè¦æä¸ä¸ªæ»¡è¶³å³å¯)\n})\n\n\n\n# Array.from\n\nå°ä¸ä¸ªç±»æ°ç»å¯¹è±¡æèå¯éåå¯¹è±¡è½¬æ¢æä¸ä¸ªçæ­£çæ°ç»ã\n\n * è¯¥ç±»æ°ç»å¯¹è±¡å¿é¡»å·ælengthå±æ§ï¼ç¨äºæå®æ°ç»çé¿åº¦ãå¦ææ²¡ælengthå±æ§ï¼é£ä¹è½¬æ¢åçæ°ç»æ¯ä¸ä¸ªç©ºæ°ç»ã\n * è¯¥ç±»æ°ç»å¯¹è±¡çå±æ§åå¿é¡»ä¸ºæ°å¼åæå­ç¬¦ä¸²åçæ°å­\n * è¯¥ç±»æ°ç»å¯¹è±¡çå±æ§åå¯ä»¥å å¼å·ï¼ä¹å¯ä»¥ä¸å å¼å·\n * Array.fromå¯ä»¥æ¥åç¬¬äºä¸ªåæ°ï¼ä½ç¨ç±»ä¼¼äºæ°ç»çmapæ¹æ³ï¼ç¨æ¥å¯¹æ¯ä¸ªåç´ è¿è¡å¤çï¼å°å¤çåçå¼æ¾å¥è¿åçæ°ç»ã\n\n\n# ä» String çææ°ç»\n\nArray.from('foo');\n// [ \"f\", \"o\", \"o\" ], å¯ä»¥ä»£æ¿ split\n\n\n\n# ä» Set çææ°ç»\n\nconst set = new Set(['foo', 'bar', 'baz', 'foo']);\nArray.from(set);\n// [ \"foo\", \"bar\", \"baz\" ]\n\n\n\n# ä» Map çææ°ç»\n\nconst map = new Map([[1, 2], [2, 4], [4, 8]]);\nArray.from(map);\n// [[1, 2], [2, 4], [4, 8]]\n\nconst mapper = new Map([['1', 'a'], ['2', 'b']]);\nArray.from(mapper.values());\n// ['a', 'b'];\n\nArray.from(mapper.keys());\n// ['1', '2'];\n\n\n\n# ä»ç±»æ°ç»å¯¹è±¡ï¼argumentsï¼çææ°ç»\n\nfunction f() {\n  return Array.from(arguments);\n}\n\nf(1, 2, 3);\n\n// [ 1, 2, 3 ]\n\n\n\n# å¨ Array.from ä¸­ä½¿ç¨ç®­å¤´å½æ°\n\n// Using an arrow function as the map function to\n// manipulate the elements\nArray.from([1, 2, 3], x => x + x);\n// [2, 4, 6]\n\n\n// Generate a sequence of numbers\n// Since the array is initialized with `undefined` on each position,\n// the value of `v` below will be `undefined`\nArray.from({length: 5}, (v, i) => i);\n// [0, 1, 2, 3, 4]\n\n\n\n# åå§åäºç»´æ°ç»\n\nArray.from(new Array(m),()=>(new Array(n).fill(0)))\n\n\n\n# Array.of\n\nArray.of() æ¹æ³åå»ºä¸ä¸ªå·æå¯åæ°éåæ°çæ°æ°ç»å®ä¾ï¼èä¸èèåæ°çæ°éæç±»åã\n\nArray.of(7);       // [7]\nArray.of(1, 2, 3); // [1, 2, 3]\n\nArray(7);          // [ , , , , , , ]\nArray(1, 2, 3);    // [1, 2, 3]\n",normalizedContent:"# esæ©å±\n\n * es6çclass\n * es6çç»§æ¿ï¼extendä¸super\n * es6çletä¸const\n * å¯¹è±¡å­é¢éçå¢å¼º\n * object.assign\n * mapæ°æ®ç»æ\n * setæ°æ®ç»æ\n * symbolå¯ä½ä¸ºé®\n * foreachãfindãmapãfilterãreduceãeveryãsome\n * array.from\n\n\n# class\n\nclass person{//å®ä¹äºä¸ä¸ªåå­ä¸ºpersonçç±»\n    constructor(name,age){//constructoræ¯ä¸ä¸ªæé æ¹æ³ï¼ç¨æ¥æ¥æ¶åæ°\n        this.name = name;//thisä»£è¡¨çæ¯å®ä¾å¯¹è±¡\n        this.age = age;\n    }\n    say(){//è¿æ¯ä¸ä¸ªç±»çæ¹æ³ï¼æ³¨æåä¸ä¸è¦å ä¸function\n        return \"æçåå­å«\" + this.name+\"ä»å¹´\"+this.age+\"å²äº\";\n    }\n}\nvar obj=new person(\"laotie\",88);\nconsole.log(obj.say());//æçåå­å«laotieä»å¹´88å²äº\nconsole.log(typeof person);//function\nconsole.log(person===person.prototype.constructor);//true\n\n//å®éä¸ç±»çæææ¹æ³é½å®ä¹å¨ç±»çprototypeå±æ§ä¸ã\n//è¿å¯ä»¥éè¿object.assignæ¹æ³æ¥ä¸ºå¯¹è±¡å¨æå¢å æ¹æ³\nobject.assign(person.prototype,{\n    getname:function(){\n        return this.name;\n    },\n    getage:function(){\n        return this.age;\n    }\n})\nvar obj=new person(\"laotie\",88);\nconsole.log(obj.getname());//laotie\nconsole.log(obj.getage());//88\n\n//constructoræ¹æ³æ¯ç±»çæé å½æ°çé»è®¤æ¹æ³ï¼éè¿newå½ä»¤çæå¯¹è±¡å®ä¾æ¶ï¼èªå¨è°ç¨è¯¥æ¹æ³ã\nclass box{\n    constructor(){\n        console.log(\"å¦å¦å¦ï¼ä»å¤©å¤©æ°å¥½æ´æ\");//å½å®ä¾åå¯¹è±¡æ¶è¯¥è¡ä»£ç ä¼æ§è¡ã\n    }\n}\nvar obj=new box();\n\n//ç±»çææå®ä¾å±äº«ä¸ä¸ªååå¯¹è±¡ï¼å®ä»¬çååé½æ¯person.prototypeï¼æä»¥protoå±æ§æ¯ç¸ç­ç\nclass box{\n    constructor(num1,num2){\n        this.num1 = num1;\n        this.num2 = num2;\n    }\n    sum(){\n        return num1+num2;\n    }\n}\n//box1ä¸box2é½æ¯boxçå®ä¾ãå®ä»¬ç__proto__é½æåboxçprototype\nvar box1=new box(12,88);\nvar box2=new box(40,60);\nconsole.log(box1.__proto__===box2.__proto__);//true\n//ç±æ­¤ï¼ä¹å¯ä»¥éè¿protoæ¥ä¸ºç±»å¢å æ¹æ³ãä½¿ç¨å®ä¾çprotoå±æ§æ¹åååï¼ä¼æ¹åclassçåå§å®ä¹ï¼å½±åå°ææå®ä¾ï¼æä»¥ä¸æ¨èä½¿ç¨ï¼\n\n\n\n# ç»§æ¿\n\nclass b extends a{\n    constructor(x, y, z) {\n        super(x, y);//è¦å¨thisçåé¢\n        this.z = z;\n    }\n    tostring2(){\n        return super.tostring()+' '+this.z\n    }\n}\n//superè¡¨ç¤ºç¶ç±»çæé å½æ°ï¼å¹¶ä¸å­ç±»çæé å½æ°å¿é¡»æ§è¡ä¸æ¬¡super\n//`super()`ç¸å½äº`a.prototype.constructor.call(this)`\n\n\n * superå®æäºè°ç¨ç¶ç±»æé å½æ°ï¼extendså®ç°äºååé¾çç»§æ¿ï¼æ¬è´¨ä¸åes5æ¯ä¸æ ·ç\n\n\n# ç»§æ¿çæ¶åextendså¹²äºä»ä¹\n\nextendså¨å®ç°ç»§æ¿æ¹é¢ï¼æ¬è´¨ä¸ä¹æ¯ååé¾ç»§æ¿,è¯¥æ¹æ³å®ç°äºä¸¤æ­¥ååé¾ç»§æ¿ å¤§å¤æ°æµè§å¨ç es5 å®ç°ä¹ä¸­ï¼æ¯ä¸ä¸ªå¯¹è±¡é½æ__proto__å±æ§ï¼æåå¯¹åºçæé å½æ°çprototypeå±æ§ã class ä½ä¸ºæé å½æ°çè¯­æ³ç³ï¼åæ¶æprototypeå±æ§å__proto__å±æ§ï¼å æ­¤åæ¶å­å¨ä¸¤æ¡ç»§æ¿é¾ã\n\n * ï¼1ï¼å­ç±»ç__proto__å±æ§ï¼è¡¨ç¤ºæé å½æ°çç»§æ¿ï¼æ»æ¯æåç¶ç±»ãï¼æå­ç±»æé å½æ°(child)çåå(__proto__)æåäºç¶ç±»æé å½æ°(parent)ï¼ï¼\n * ï¼2ï¼å­ç±»prototypeå±æ§ç__proto__å±æ§ï¼è¡¨ç¤ºæ¹æ³çç»§æ¿ï¼æ»æ¯æåç¶ç±»çprototypeå±æ§ã\n * es5ç»§æ¿\n * es6ç»§æ¿\n\nes5åªæä¸¤ç§å£°æåéçæ¹å¼ï¼varåfunctionï¼es6è¿æ·»å äºä¸¤ç§å¸¸ç¨çå£°æåéçæ¹å¼ï¼letåconstã\n\n\n# letå½ä»¤\n\nes6æ°å¢äºletå½ä»¤ï¼ç¨æ¥å£°æåéï¼å®çç¨æ³ç±»ä¼¼äºvarï¼ä½æ¯æå£°æçåéï¼åªå¨letå½ä»¤æå¨çä»£ç ååææã\n\n1ãforå¾ªç¯çè®¡æ°å¨ï¼å°±å¾åéä½¿ç¨letã\n\nvar a = [];\nfor (var i = 0; i < 10; i++) {\n\ta[i] = function() {\n\t\tconsole.log(i);\n\t}\n}\na[6](); // 10\n\n\nåéiæ¯varå£°æçï¼å¨å¨å±èå´åææï¼æä»¥æ¯æ¬¡å¾ªç¯æ°çiå¼é½ä¼è¦çæ§å¼ï¼å¯¼è´æåè¾åºçæ¯æåä¸è½®çiçå¼ã\n\nvar a = [];\nfor (let i = 0; i < 10; i++) {\n\ta[i] = function() {\n\t\tconsole.log(i);\n\t}\n}\na[5](); // 5\n\n\nä½¿ç¨letï¼å£°æçåéä»å¨åçº§ä½ç¨ååææï¼æåè¾åºçæ¯5ã\n\n2ãletä¸å­å¨åéæåï¼letä¸åvaré£æ ·ä¼åçåéæåï¼æä»¥ï¼åéä¸å®è¦å¨å£°æåä½¿ç¨ï¼å¦åæ¥éã\n\nconsole.log(i); // è¾åºï¼undefined\nconsole.log(j); // æ¥é\nvar i = 5;\nlet j = 10;\n\n\n3ãææ¶æ§æ­»åºï¼\n\nåªè¦åçº§ä½ç¨åå­å¨letå½ä»¤ï¼å®æå£°æçåéå°±ç»å®å°è¿ä¸ªåºåï¼ä¸ååå¤é¨çå½±åã\n\nvar i= 6;\nif (i > 5) {\n\ti = 3; // æ¥é\n\tlet i;\n}\n\n\nes6æç¡®è§å®ï¼è¥åä½ç¨åä¸­å­å¨letåconstå½ä»¤ï¼åå®ä»¬å£°æçåéï¼ä»ä¸å¼å§å°±å½¢æäºå°é­ä½ç¨åï¼å¡æ¯å¨å£°æä¹åå°±ä½¿ç¨è¿äºåéï¼å°±ä¼æ¥éã\n\nå¨ä»£ç ååï¼ä½¿ç¨letå½ä»¤å£°æåéä¹åï¼è¯¥åéé½æ¯ä¸å¯ç¨çï¼ä¸å¯èµå¼ï¼ä¸å¯è®¿é®ç­ï¼ï¼è¿ç§°ä¸ºâææ¶æ§æ­»åºâã\n\nææ¶æ§æ­»åºä½¿å¾typeofæä½ä¸ä¸å®å®å¨ï¼æä»¥å¨letå£°æä¹åï¼ä½¿ç¨typeofæä½ç¬¦ä¼æ¥éãèå¨letåºç°ä¹åï¼typeofæ¯ç¾åä¹ç¾å®å¨çï¼æ°¸è¿ä¸ä¼è¢«æ¥éï¼å³ä½¿åéæ²¡æè¢«å£°æï¼typeofä¹ä¼è¿åundefinedã\n\nif (true) {\n\talert(typeof x); // æ¥é\n\talert(typeof y); // undefined\n\tlet x;\n}\n\n\nææ¶æ§æ­»åºçæ¬è´¨ï¼åªè¦ä¸è¿å¥å½åä½ç¨åï¼æè¦ä½¿ç¨çåéå°±å·²ç»å­å¨äºï¼ä½æ¯ä¸å¯è·åï¼åªæç­å°å£°æåéçé£ä¸è¡ä»£ç åºç°ï¼æå¯ä»¥è·ååä½¿ç¨è¯¥åéã\n\nes6è§å®ææ¶æ§æ­»åºåletãconstè¯­å¥ä¸åºç°åéæåï¼ä¸»è¦æ¯ä¸ºäºåå°è¿è¡æ¶éè¯¯ï¼é²æ­¢åéå¨å£°æåå°±ä½¿ç¨è¯¥åéï¼ä»èå¯¼è´ææä¹å¤çéè¯¯ãè¿ç±»éè¯¯å¨es5ä¸­å¾å¸¸è§ã\n\n4ãä¸åè®¸éå¤å£°æ\n\nletä¸åè®¸å¨ç¸åä½ç¨ååï¼éå¤å£°æåä¸ä¸ªåéã\n\nfunction func() { // æ¥é\n\tvar i= 1;\n\tlet i = 1;\n}\nfunction func() { // æ¥é\n\tlet i= 1;\n\tlet i = 1;\n}\n\n\nä¸è½å¨å½æ°åé¨éæ°å£°æåæ°ã\n\nfunction func(arg) { // æ¥é\n\tlet arg;\n}\nfunction func(arg) { // ä¸æ¥é\n\t{\n\t\tlet arg;\n\t}\n}\n\n\n\n# constå½ä»¤\n\nconstå£°æä¸ä¸ªåªè¯»çå¸¸éï¼ä¸æ¦å£°æï¼å¸¸éçå¼å°±ä¸è½æ¹åï¼è¿æå³çï¼constä¸æ¦å£°æå¸¸éï¼å°±å¿é¡»ç«å³åå§åï¼ä¸è½ç­å°ä¹ååèµå¼ãå æ­¤ï¼æ¹åå¸¸éååªå£°æä¸èµåå§å¼é½ä¼æ¥éã\n\nconstçä½ç¨åä¸letå½ä»¤ç¸åï¼åªå¨å£°ææå¨çåçº§ä½ç¨ååææã\n\nif (true) {\n\tconst i = 5;\n}\nconsole.log(i); // æ¥é\n\n\nconstå£°æçå¸¸éä¹ä¸æåï¼åæ¶å­å¨ææ¶æ§æ­»åºï¼åªè½å¨å£°æçä½ç½®åé¢ä½¿ç¨ã\n\nif (true) {\n\tconsole.log(i); // æ¥é\n\tconst i = 5;\n}\n\n\nconstå£°æçå¸¸éï¼ä¹åletä¸æ ·ä¸å¯éå¤å£°æã\n\nvar i = 5;\nlet j = 10;\nconst i =6; // æ¥é\nconst j = 11; // æ¥é\n\n\nå¯¹äºå¤åç±»åçå¸¸éï¼å¸¸éåä¸æåæ°æ®ï¼èæ¯æåæ°æ®æå¨çå°åãconstå½ä»¤åªæ¯ä¿è¯å¸¸éåæåçå°åä¸åï¼å¹¶ä¸ä¿è¯è¯¥å°åçæ°æ®ä¸åï¼ä¹å°±æ¯è¯´ï¼å°å¯¹è±¡å¸¸éæåå¦ä¸ä¸ªå°åä¼æ¥éï¼ä½å¯¹è±¡æ¬èº«æ¯å¯åçï¼å¯ä»¥ä¸ºå¶æ·»å ï¼ä¿®æ¹å±æ§ï¼å æ­¤å°ä¸ä¸ªå¯¹è±¡å£°æä¸ºå¸¸éå¿é¡»ååå°å¿ã\n\nconst obj = {};\nobj.name = âaliceâ;\nobj = {}; // æ¥é\n\n\nå°ä¸ä¸ªæ°ç»å£°æä¸ºå¸¸éï¼è¯¥æ°ç»æ¬èº«æ¯å¯åçï¼ä½æ¯è¥å°å¦ä¸ä¸ªæ°ç»èµå¼ç»è¯¥æ°ç»ï¼ä¼æ¥éã\n\nconst arr = [];\narr.push(1);\narr = [1,2,3,4]; // æ¥é\n\n\nè½¬è½½èªhttps://blog.csdn.net/zhouziyu2011/article/details/68067609\n\nä¸ç¨varï¼ä¸»ç¨constï¼éålet\nä¸»ç¨constçå¥½å¤æ¯ç¨äºå¤æ­åéæ¯å¦éè¦æ´æ¹\n\n\n----------------------------------------\n\n * ç®­å¤´å½æ°\n\n//ä¸éè¦ function å³é®å­æ¥åå»ºå½æ°\n//çç¥ return å³é®å­\n//ç»§æ¿å½åä¸ä¸æç this å³é®å­\n\n// es5\n[1,2,3].map((function(x){  //mapæ¹æ³è¿åä¸ä¸ªç±åæ°ç»ä¸­çæ¯ä¸ªåç´ è°ç¨æå®æ¹æ³åçè¿åå¼ç»æçæ°æ°ç»ã\n    return x + 1;\n}).bind(this));\n\n//array.map(function() {}, this) çä½ç¨å®éä¸å array.map(function() {}.bind(this)) æ¯ä¸æ ·çãmapçç¬¬äºä¸ªåæ°å°±æ¯ç»ç¬¬ä¸ä¸ªåæ°bindä¸ä¸ªå¯¹è±¡ã\n    \n// ä½¿ç¨ç®­å¤´å½æ°\n[1,2,3].map(x => x + 1);\n\n\n * å½æ°é»è®¤åæ°å¼\n\n// es6ä¹åï¼å½æªä¼ å¥åæ°æ¶ï¼text = 'default'ï¼\nfunction printtext(text) {\n    text = text || 'default';\n    console.log(text);\n}\n\n// es6ï¼\nfunction printtext(text = 'default') {\n    console.log(text);\n}\n\n// æå¤ä¸ªåæ°æ¶ï¼å¸¦é»è®¤å¼çè¦æ¾å°æå\n\n\n * æ©å±è¿ç®ç¬¦(spread)åå©ä½è¿ç®ç¬¦(rest)ï¼å³...çå«ä¹\n\n//æ©å±è¿ç®ç¬¦(spread)   æ°ç»åä¸ºåæ°,åè½æ¯ææ°ç»æç±»æ°ç»å¯¹è±¡å±å¼æä¸ç³»åç¨éå·éå¼çå¼\n\n//1.æé æ°ç»\nvar arr1 = ['a','b','c'];\nvar arr2 = ['aa','bb','cc'];\nvar arrs = [...arr1, ...arr2];\nconsole.log(arrs); // ['a','b','c','aa','bb','cc']\n//2.è§£ææ°ç»\nvar son1,son2;\n[son1, ...son2] = arr1\nconsole.log(son1);  // 'a'\nconsole.log(son2);  //['b','c']\n//3.åæ°èµå¼\nconst arr = [2,3,1,5];\nconst maxnum = math.max(...arr); // è¿å5ãmaxå½æ°ä¸æ¥åæ°ç»åªæ¥åæ°å\n\n\n//å©ä½è¿ç®ç¬¦(rest)     åæ°è½¬åä¸ºæ°ç»,æéå·éå¼çå¼åºåç»åæä¸ä¸ªæ°ç»\n//1.ææåæ°å¯ç±ä¸ä¸ªåéç»ä¸æ¥æ¶\nfunction foo(...args) {\n  console.log(args);\n}\nfoo( 1, 2, 3, 4, 5); // [1, 2, 3, 4, 5]\nfoo( 'a', 'b', 'c'); // [a,b,c]\n\n\n * å¯¹è±¡åæ°ç»è§£æ\n\n//1.å¯¹è±¡\nvar obj = {x: 1, y: 2, z: 3};\nconst {x, y, z} = obj; // x = 1, y = 2, z = 3\n//è¿å¯èµå¼a,b,c\nconst {x: a, y: b, z: c} = obj; // a = 1, b = 2, c = 3\n\n//2.æ°ç»\nconst arr = [1, 2, 3, 4, 5, 6]\nconst [a, b] = arr;\nconsole.log(a, b);  // 1, 2ï¼æé¡ºåºèªå¨è·å\nconst [a, b,,, c] = arr;\nconsole.log(a, b, c);  // 1, 2, 5  è·åæå®ä½ç½®\n\n//3.å½æ°å¯¹è±¡åæ°\nconst student = {\n  name: 'job',\n  num: 001,\n  age: 18,\n  sex: 'boy'\n};\nconst check = function half({num,sex}) {\n    return (num , sex);\n};\nconsole.log(student); // ä¸ä¸ªobject\nconsole.log(check(student)); // (001, 'boy')\n\n\n * mapæ°æ®ç»æ\n\nä¸ºä»ä¹éè¦mapï¼å ä¸ºobjectæ¬è´¨ä¸æ¯é®å¼å¯¹çéåï¼objectçé®å¨ä½¿ç¨object.keysè¾åºæ¶é½è½¬åä¸ºäºå­ç¬¦ä¸²ï¼å¦æé®ä¸ºå¯¹è±¡åé½è½¬åä¸º[object, object]ï¼ä½æ¯mapçé®ä¸éã\n\nä¸objectçåºå«\n\nï¼1ï¼map ä¸­çé®å¼æ¯æåºçï¼èæ·»å å°å¯¹è±¡ä¸­çé®åä¸æ¯ãå æ­¤ï¼å½å¯¹å®è¿è¡éåæ¶ï¼map å¯¹è±¡æ¯ææå¥çé¡ºåºè¿åé®å¼ã\n\nï¼2ï¼ä½ å¯ä»¥éè¿ size å±æ§ç´æ¥è·åä¸ä¸ª map çé®å¼å¯¹ä¸ªæ°ï¼è object çé®å¼å¯¹ä¸ªæ°åªè½æå¨è®¡ç®ã\n\n//mapçç»æéå\n// 1. keys()--\x3eå°é®åé½ååºæ¥ï¼ç»æä¸ä¸ªå¯éåçæ°æ®éå\nlet m = new map([\n   [123,'abc'],\n   ['a','hahaha'],\n   [1>2,'baidu.com']\n]);\nfor(let x of m.keys()){  //m.keys => mapiterator {123, \"a\", false}  è¿åå®¹å¨å¯¹è±¡\n   console.log(x);\n}\n--\x3e123 a false\n\n//2. values()  è¿åé®å¼çéåå¨\nlet m = new map([\n   [123,'abc'],\n   ['a','hahaha'],\n   [1>2,'baidu.com']\n]);\nfor(let x of m.values()){  //m.values=>mapiterator {\"abc\", \"hahaha\", \"baidu.com\"}\n   console.log(x);\n}\n--\x3eabc hahaha baidu.com\n\n//3. entries()  è¿åæææåçéåå¨\nlet m = new map([\n   [123,'abc'],\n   ['a','hahaha'],\n   [1>2,'baidu.com']\n]);\nm.entries()   //mapiterator {123 => \"abc\", \"a\" => \"hahaha\", false => \"baidu.com\"}\n[...m.entries()] // [array(2), array(2), array(2)]\n\n//4. æ©å±è¿ç®ç¬¦,è½¬æ¢ä¸ºäºç»´æ°ç»æä¸ç»´æ°ç»\nlet m = new map([\n   [123,'abc'],\n   ['a','hahaha'],\n   [1>2,'baidu.com']\n]);\nconsole.log([...m]) //(3) [array(2), array(2), array(2)]\n[...m.keys()]       //[123, \"a\", false]\n\n\n * æ°ç»çincludeæ¹æ³\n\nå¨es5ï¼arrayå·²ç»æä¾äºindexofç¨æ¥æ¥æ¾æä¸ªåç´ çä½ç½®ï¼å¦æä¸å­å¨å°±è¿å-1ï¼\n\nç¼ºç¹ï¼\n\n 1. æ¯å®ä¼è¿å-1ååç´ çä½ç½®æ¥è¡¨ç¤ºæ¯å¦åå«ï¼å¨å®ä½æ¹é¢æ¯æ²¡é®é¢ï¼å°±æ¯ä¸å¤è¯­ä¹åã\n\n 2. ä¸è½å¤æ­æ¯å¦ænançåç´ ã\n\nes6æä¾äºarray.includes()å½æ°å¤æ­æ¯å¦åå«æä¸åç´ ï¼é¤äºä¸è½å®ä½å¤ï¼è§£å³äºindexofçä¸è¿°çä¸¤ä¸ªé®é¢ãå®ç´æ¥è¿åtrueæèfalseè¡¨ç¤ºæ¯å¦åå«åç´ ï¼å¯¹nanä¸æ ·è½æææã\n\n[1, 2, 3].includes(2)     // true\n[1, 2, 3].includes(4)     // false\n[1, 2, nan].includes(nan) // true\n[1, 2, 3].includes(3, 3);  // false  è¯¥æ¹æ³çç¬¬äºä¸ªåæ°è¡¨ç¤ºæç´¢çèµ·å§ä½ç½®ï¼é»è®¤ä¸º0\n[1, 2, 3].includes(3, -1); // true\n\n\n\n# æ¨¡æ¿å­ç¬¦ä¸²\n\n// æ¨¡æ¿å­ç¬¦ä¸²åé¢å¯ä»¥æ·»å æ ç­¾\n\nconst name = 'tom'\nconst gender = true\n\nfunction mytagfunc (strings, name, gender) {\n    console.log(strings, name, gender)\n}\n\nconst result = mytagfuc`hey, ${name} is a ${gender}`\nconsole.log(result)\n\n\n\n# å¯¹è±¡å­é¢éçå¢å¼º\n\nconst bar = '345'\nconst obj = {\n    foo: 123\n    bar,                 // bar: bar\n    method1 () {         // çç¥äº :function\n    \tconsole.log(1)   \n\t}\n\t[math.random()]: 123 // è®¡ç®å±æ§ï¼å ä¸æ¹æ¬å·ï¼å¯ä»¥ä¸ºä¸ä¸ªéæºçå¼\n}\n\n\n * å¯¹è±¡åå§å\n\n\n# object.assign\n\nconst source = {\n    a: 123,\n    b: 123\n}\n\nconst target = {\n    a: 456,\n    c: 456\n}\n\nobject.assign(target,source)\n\n\n\n# object.is\n\n+0 === -0 // true\nnan === nan // false\n\nobject.is(+0, -0) //false\nobject.is(nan, nan) // true\n\n\nobject.is() æ¹æ³å¤æ­ä¸¤ä¸ªå¼æ¯å¦ä¸ºåä¸ä¸ªå¼ãå¦ææ»¡è¶³ä»¥ä¸æ¡ä»¶åä¸¤ä¸ªå¼ç¸ç­:\n\n * é½æ¯ undefined\n * é½æ¯ null\n * é½æ¯ true æ false\n * é½æ¯ç¸åé¿åº¦çå­ç¬¦ä¸²ä¸ç¸åå­ç¬¦æç¸åé¡ºåºæå\n * é½æ¯ç¸åå¯¹è±¡ï¼æå³çæ¯ä¸ªå¯¹è±¡æåä¸ä¸ªå¼ç¨ï¼\n * é½æ¯æ°å­ä¸\n   * é½æ¯ +0\n   * é½æ¯ -0\n   * é½æ¯ nan\n   * æé½æ¯éé¶èä¸é nan ä¸ä¸ºåä¸ä¸ªå¼\n\nä¸== è¿ç®ä¸åã == è¿ç®ç¬¦å¨å¤æ­ç¸ç­åå¯¹ä¸¤è¾¹çåé(å¦æå®ä»¬ä¸æ¯åä¸ç±»å) è¿è¡å¼ºå¶è½¬æ¢ (è¿ç§è¡ä¸ºçç»æä¼å° \"\" == false å¤æ­ä¸º true), è object.isä¸ä¼å¼ºå¶è½¬æ¢ä¸¤è¾¹çå¼ã\n\nä¸=== è¿ç®ä¹ä¸ç¸åã === è¿ç®ç¬¦ (ä¹åæ¬ == è¿ç®ç¬¦) å°æ°å­ -0 å +0 è§ä¸ºç¸ç­ ï¼èå°number.nan ä¸nanè§ä¸ºä¸ç¸ç­.\n\n\n# mapæ°æ®ç»æ\n\nwhen you should prefer map over object in javascript\n\nobject ç¸æ¯äº map çç¼ºç¹ï¼\n\n * ååæ±¡æï¼object ä¼èªå¨ç»§æ¿ååä¸çæ¹æ³ï¼å¦ hasownproperty,å¦æå¨å¯¹è±¡æ¬èº«å®ä¹äºç¸åçæ¹æ³ï¼åæ æ³åºåæ¹æ³æ¯ååä¸çè¿æ¯å¯¹è±¡æ¬èº«çãå½ç¶ä¹å¯ä»¥ä½¿ç¨ object.create(null)æ¥åå»ºä¸ä¼ç»§æ¿çå¯¹è±¡ã\n * å½åå²çªï¼å¯¹è±¡èªå·±çå±æ§å¯è½ä¼åååä¸çå±æ§å²çªï¼æ­¤æ¶æä»¬éè¦ç¨ object.prototype.hasownproperty.call(obj, key) æ¥ç¡®å®ååæ¯å¦å¨å¯¹è±¡æ¬èº«ï¼å½ç¶ç°å¨ä¹å¯ä»¥ç¨ object.hasownã\n * è·åå¤§å°ï¼æ²¡æç´æ¥è·å size ç apiï¼ä½æ¯å¯ä»¥ä½¿ç¨object.keys, object.values å object.entriesï¼è·åå¯¹åºæ°ç»ã\n * ä¸å¯è¿­ä»£ï¼ä¸è½ä½¿ç¨for...ofè¿­ä»£ï¼ä½æ¯å¯ä»¥ä½¿ç¨object.keys, object.values å object.entriesï¼è·åå¯¹åºæ°ç»åè¿è¡è¿­ä»£ã\n * æ¸ç©ºå¯¹è±¡ï¼åªè½ä½¿ç¨ delete æ¥éä¸ªå é¤å±æ§ï¼ç¸æ¯äº map.prototype.delete è¦æ¢çå¾ã\n * æ£æ¥å±æ§ï¼ä¸è½ä½¿ç¨ç¹è¿ç®åæ¬å·è¿ç®ç¬¦æ¥å¤æ­å±æ§æ¯å¦å­å¨ï¼å ä¸ºå±æ§å¯ä»¥è¢«è®¾ç½®ä¸º undefinedï¼è¦ä½¿ç¨object.prototype.hasownproperty æè object.hasownã\n\nmap çä¼ç¹ï¼\n\n * é®å¯ä»¥ä¸ºä»»ææ°æ®ç±»å\n * ç¨æ·å®ä¹çå±æ§åç»ææ¬èº«å±æ§ææç¡®çåç¦»ï¼map.prototype.get æ¥è·åç¨æ·å®ä¹çå±æ§\n * å¯ä»¥è¿­ä»£ï¼ä¹å¯ä»¥è¿è¡è§£æï¼const [[firstkey, firstvalue]] = map\n * ä¾¿æ·ç apiï¼map.prototype.has,map.prototype.get,map.prototype.size,map.prototype.clear\n * æ§è½æ´å¥½\n\n\n# setæ°æ®ç»æ\n\nconst s = new set()\ns.add(1).add(2)\n\nconsole.log(s.size)\nconsole.log(s.has(100))\nconsole.log(s.delete(3))\ns.clear()\n\n\n\n# symbol\n\nconst obj = {\n    [symbol()]: 'symbol value',\n    foo: 'value'\n}\n\n// ç¨for in, object.keys, json.stringifyé½è·åä¸å°\n\n\n\n# foreachãfindãmapãfilterãreduceãeveryãsome\n\n# 1ãforeach æ²¡æè¿åå¼ï¼åªæ¯è®©æ°ç»ä¸­çæ¯ä¸ªåç´ æ§è¡functionçæä½\n\nlet arr = [1,2,3,4,5];\narr.foreach((item,index)=>{\n    console.log(item * 2);       //2,4,6,8,10\n})\n\n\n# 2ãfind è¿åæ°ç»ä¸­ç¬¬ä¸ä¸ªæ»¡è¶³æ¡ä»¶çåç´ ï¼æ¥æ¾ï¼\n\nlet arr = [1,2,3,4,5];\narr.find((item,index)=>{\n    return item > 3;       //4\n})\n\n\n# 3ãmap è¿åä¸ä¸ªæ°æ°ç»ï¼æ°ç»ä¸­çæ¯ä¸ªåç´ ä¸ºè°ç¨functionçç»æ\n\nlet arr = [1,2,3,4,5];\narr.map((item,index)=>{\n    return item * 2;       //[2,4,6,8,10]\n})\n\n\n# 4ãfilter è¿åä¸ä¸ªç¬¦åfunctionæ¡ä»¶çåç´ æ°ç»ï¼è¿æ»¤ï¼\n\nlet arr = [1,2,3,4,5];\narr.filter((item,index)=>{\n    return item > 3;       //[4,5]\n})\n\n\n# 5ãreduce è®©æ°ç»ä¸­çåé¡¹ååé¡¹åæç§è¿ç®ï¼è¿åç´¯è®¡çæç»å¼\n\nlet arr = [1,2,3,4,5];\narr.reduce((prev,next)=>{\n    return prev + next;       //15\n})\n\n\n# 6ãevery è¿åä¸ä¸ªbooleanå¼ï¼å¤æ­æ°ç»ä¸­æ¯ä¸ä¸ªåç´ æ¯å¦ç¬¦åfunctionçæ¡ä»¶\n\nlet arr = [1,2,3,4,5];\narr.every((item,index)=>{\n    return item > 0;       //true(ææåç´ é½æ»¡è¶³æä¸ºtrue)\n})\n\n\n# 7ãsome è¿åä¸ä¸ªbooleanå¼ï¼å¤æ­æ°ç»ä¸­æ¯å¦æåç´ ç¬¦åfunctionçæ¡ä»¶\n\nlet arr = [1,2,3,4,5];\narr.some((item,index)=>{\n    return item > 4;       //true(åªè¦æä¸ä¸ªæ»¡è¶³å³å¯)\n})\n\n\n\n# array.from\n\nå°ä¸ä¸ªç±»æ°ç»å¯¹è±¡æèå¯éåå¯¹è±¡è½¬æ¢æä¸ä¸ªçæ­£çæ°ç»ã\n\n * è¯¥ç±»æ°ç»å¯¹è±¡å¿é¡»å·ælengthå±æ§ï¼ç¨äºæå®æ°ç»çé¿åº¦ãå¦ææ²¡ælengthå±æ§ï¼é£ä¹è½¬æ¢åçæ°ç»æ¯ä¸ä¸ªç©ºæ°ç»ã\n * è¯¥ç±»æ°ç»å¯¹è±¡çå±æ§åå¿é¡»ä¸ºæ°å¼åæå­ç¬¦ä¸²åçæ°å­\n * è¯¥ç±»æ°ç»å¯¹è±¡çå±æ§åå¯ä»¥å å¼å·ï¼ä¹å¯ä»¥ä¸å å¼å·\n * array.fromå¯ä»¥æ¥åç¬¬äºä¸ªåæ°ï¼ä½ç¨ç±»ä¼¼äºæ°ç»çmapæ¹æ³ï¼ç¨æ¥å¯¹æ¯ä¸ªåç´ è¿è¡å¤çï¼å°å¤çåçå¼æ¾å¥è¿åçæ°ç»ã\n\n\n# ä» string çææ°ç»\n\narray.from('foo');\n// [ \"f\", \"o\", \"o\" ], å¯ä»¥ä»£æ¿ split\n\n\n\n# ä» set çææ°ç»\n\nconst set = new set(['foo', 'bar', 'baz', 'foo']);\narray.from(set);\n// [ \"foo\", \"bar\", \"baz\" ]\n\n\n\n# ä» map çææ°ç»\n\nconst map = new map([[1, 2], [2, 4], [4, 8]]);\narray.from(map);\n// [[1, 2], [2, 4], [4, 8]]\n\nconst mapper = new map([['1', 'a'], ['2', 'b']]);\narray.from(mapper.values());\n// ['a', 'b'];\n\narray.from(mapper.keys());\n// ['1', '2'];\n\n\n\n# ä»ç±»æ°ç»å¯¹è±¡ï¼argumentsï¼çææ°ç»\n\nfunction f() {\n  return array.from(arguments);\n}\n\nf(1, 2, 3);\n\n// [ 1, 2, 3 ]\n\n\n\n# å¨ array.from ä¸­ä½¿ç¨ç®­å¤´å½æ°\n\n// using an arrow function as the map function to\n// manipulate the elements\narray.from([1, 2, 3], x => x + x);\n// [2, 4, 6]\n\n\n// generate a sequence of numbers\n// since the array is initialized with `undefined` on each position,\n// the value of `v` below will be `undefined`\narray.from({length: 5}, (v, i) => i);\n// [0, 1, 2, 3, 4]\n\n\n\n# åå§åäºç»´æ°ç»\n\narray.from(new array(m),()=>(new array(n).fill(0)))\n\n\n\n# array.of\n\narray.of() æ¹æ³åå»ºä¸ä¸ªå·æå¯åæ°éåæ°çæ°æ°ç»å®ä¾ï¼èä¸èèåæ°çæ°éæç±»åã\n\narray.of(7);       // [7]\narray.of(1, 2, 3); // [1, 2, 3]\n\narray(7);          // [ , , , , , , ]\narray(1, 2, 3);    // [1, 2, 3]\n",charsets:{cjk:!0}},{title:"å³äºæ¥æå¯¹è±¡",frontmatter:{title:"å³äºæ¥æå¯¹è±¡",date:"2018-08-30T11:00:54.000Z",categories:"JavaScript"},regularPath:"/javascript/date.html",relativePath:"javascript/date.md",key:"v-276555bf",path:"/javascript/date.html",headers:[{level:2,title:"æ¡ä¾ä¸ï¼è¾åºåäº¬æ¶é´",slug:"æ¡ä¾ä¸-è¾åºåäº¬æ¶é´",normalizedTitle:"æ¡ä¾ä¸ï¼è¾åºåäº¬æ¶é´",charIndex:1327},{level:2,title:"æ¡ä¾äºï¼è·ç¦»è¿å¹´æ¶é´",slug:"æ¡ä¾äº-è·ç¦»è¿å¹´æ¶é´",normalizedTitle:"æ¡ä¾äºï¼è·ç¦»è¿å¹´æ¶é´",charIndex:2237},{level:2,title:"å³äºæ¶é´æ³å¤ç",slug:"å³äºæ¶é´æ³å¤ç",normalizedTitle:"å³äºæ¶é´æ³å¤ç",charIndex:21},{level:2,title:"ä¸ä¸ªå¼å®¹æ§é®é¢",slug:"ä¸ä¸ªå¼å®¹æ§é®é¢",normalizedTitle:"ä¸ä¸ªå¼å®¹æ§é®é¢",charIndex:4022},{level:2,title:"ä¸ä¸ªå½æ°",slug:"ä¸ä¸ªå½æ°",normalizedTitle:"ä¸ä¸ªå½æ°",charIndex:4253},{level:2,title:"moment  API",slug:"moment-api",normalizedTitle:"moment  api",charIndex:null},{level:3,title:"",slug:"",normalizedTitle:"",charIndex:0}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"æ¡ä¾ä¸ï¼è¾åºåäº¬æ¶é´ æ¡ä¾äºï¼è·ç¦»è¿å¹´æ¶é´ å³äºæ¶é´æ³å¤ç ä¸ä¸ªå¼å®¹æ§é®é¢ ä¸ä¸ªå½æ° moment  API ",content:"# å³äºæ¥æå¯¹è±¡\n\n * æ¥æå¯¹è±¡\n * å³äºæ¶é´æ³å¤ç\n * Date.parseï¼ï¼\n * moment API\n\n\t\tvar date = new Date();//è¿åæ¶é´ï¼\n        var YY = date.getFullYear(); //è¿åå¹´\n        var MM = date.getMonth() + 1  ;//è¿åæ\n        var Day = date.getDay();//è¿åææ ãæ³¨æ ï¼æ¯ä¸ªææç¬¬ä¸å¤©æ¯æææ¥ã\n        var DD = date.getDate();//è¿åå¤© \n        var hh = date.getHours(); //è¿åæ¶\n        var mm = date.getMinutes();//è¿åå\n        var ss = date.getSeconds();//è¿åç§\n        var ms = date.getMilliseconds();//è¿åç§\n        var Time = date.getTime();//è¿å 1970 å¹´ 1 æ 1 æ¥è³ä»çæ¯«ç§æ° \n        var Now = Date.now(); //è¿å 1970 å¹´ 1 æ 1 æ¥è³ä»çæ¯«ç§æ°  ãä¸å¼å®¹IEã\n        var a = date.toLocaleString() //è¿åå¹´ææ¥ï¼æ¶åç§ï¼\n        var b = date.toLocaleDateString(); //è¿åå¹´ææ¥\n        var c = date.toLocaleTimeString(); //è¿åæ¶åç§\n\n\n\n        var date = new Date(); //è¿åæå®çæ¶é´ ãæ³¨æï¼æä»½ä¼å 1ï¼æä»¥æä»¬è®¾ç½®çæ¶åè¦å1ã\n        var date1 = new Date( '2018/8/20' );\n        var date2 = new Date( 2018,7 );\n        var date3 = new Date( 2018 );\n        var date4 = new Date( '9' );\n        console.log( date ) //å½åæ¶é´\n        console.log( date1 )//Mon Aug 20 2018 00:00:00\n        console.log( date2 )//Wed Aug 01 2018 00:00:00\n        console.log( date3 )//Thu Jan 01 1970 08:00:02\n        console.log( date4 )//Sat Sep 01 2001 00:00:00\n        //getTimezoneOffset() ä¸çæ¶ï¼ä¸å«åºï¼ - æ¬å°æ¶é´ï¼ å½åçæ¶é´ ï¼\n        console.log( date.getTimezoneOffset() ) //480/8 60åé\n\n\n\n# æ¡ä¾ä¸ï¼è¾åºåäº¬æ¶é´\n\n<div id=\"box\">\n\t\tç°å¨æ¯åäº¬æ¶é´ï¼\n\t\t<p></p>\n</div>\n\n<script>\n\t\tvar box = document.getElementById('box'),\n\t\tp = document.getElementsByTagName('p')[0],\n\t\tarr = ['æææ¥','ææä¸','ææäº','ææä¸','ææå','ææäº','ææå­'];\n        function fn(){\n            var date = new Date();//è¿åæ¶é´ï¼\n            var YY = date.getFullYear(); //è¿åå¹´\n            var MM = date.getMonth() + 1  ;//è¿åæ\n            var Day = date.getDay();//è¿åææ ãæ³¨æ ï¼æ¯ä¸ªææç¬¬ä¸å¤©æ¯æææ¥ã\n            var DD = date.getDate();//è¿åå¤© \n            var hh = addZero(date.getHours()); //è¿åæ¶\n            var mm = addZero(date.getMinutes());//è¿åå\n            var ss = addZero(date.getSeconds());//è¿åç§\n\n            var str = YY+'å¹´'+MM+'æ'+DD+'æ¥'+arr[Day]+':'+hh+'æ¶'+mm+'å'+ss+'ç§';\n            p.innerHTML = str;\n        }\n\n        fn();//åæ§è¡ä¸æ¬¡ï¼é¿ååºç°å»¶è¿å è½½\n        setInterval(fn,1000);\n\n        function addZero(n){\n            return n < 10 ? '0' + n : n;\n        }\n<\/script>\n\n\n\n# æ¡ä¾äºï¼è·ç¦»è¿å¹´æ¶é´\n\n\t<div>è·ç¦»è¿å¹´è¿æï¼\n        <p></p> \n\t</div>\n    <script>\n        var newYear = new Date( '2019/2/5' ),\n        p = document.getElementsByTagName('p')[0];\n        function fn(){\n            var date = newYear - Date.now(),//è¿åæ¯«ç§ä¸ºè·ç¦»æå¹´è¿å¹´è¦å¤å°æ¯«ç§;\n                DD = Math.floor(date/1000/60/60/24), //è¿åå¤©\n                hh = Math.floor(date/1000/60/60)%24,\n                mm = Math.floor(date/1000/60)%60,\n                ss = Math.floor(date/1000)%60;\n            console.log( DD ,hh,mm, ss)\n            var str =  DD +'æ¥'+':'+hh+'æ¶'+mm+'å'+ss+'ç§';\n            p.innerHTML = str;\n        }\n        fn()\n        setInterval( fn ,1000 )\n    <\/script>\n\n\n\n# å³äºæ¶é´æ³å¤ç\n\nå¨ååç«¯æ¥å£å¼åæ¶ï¼æ¶é´å¯¹è±¡çå¤çå¾å¾å¤çæ13ä½çæ¶é´æ³å½¢å¼ã\n\nä¸è¬æ¶é´éæ©å¨æ¿å°çé½æ¯Thu Jul 04 2019 23:59:59 GMT+0800 (ä¸­å½æ åæ¶é´)å³æ¥æå¯¹è±¡çæ ¼å¼\n\n * æ¶é´å¯¹è±¡è½¬æ¢ä¸ºæ¶é´æ³\n\n// å®ä¹ä¸ä¸ªæ¶é´å¯¹è±¡ dtï¼ç¶åä¾æ¬¡æ¼ç¤ºåç§å° dt è½¬æ¢ä¸ºæ¶é´æ³çåæ³\nvar dt = new Date(\"2019-07-04 23:59:59.999\");\n// Thu Jul 04 2019 23:59:59 GMT+0800 (ä¸­å½æ åæ¶é´)\n\n// åæ³ä¸ï¼ç²¾ç¡®å°æ¯«ç§ï¼å¾å° 13 ä½æ¶é´æ³ 1562255999999\nconsole.log(dt.getTime());\n\n// åæ³äºï¼ç²¾ç¡®å°æ¯«ç§ï¼å¾å° 13 ä½æ¶é´æ³ 1562255999999\nconsole.log(dt.valueOf());\n\n// åæ³ä¸ï¼ç²¾ç¡®å°æ¯«ç§ï¼å¾å° 13 ä½æ¶é´æ³ 1562255999999\nconsole.log(Number(dt));\n\n// åæ³åï¼ç²¾ç¡®å°æ¯«ç§ï¼å¾å° 13 ä½æ¶é´æ³ 1562255999999\nconsole.log(+dt);\n\n// åæ³äºï¼ç²¾ç¡®å°ç§ï¼å¾å° 13 ä½æ¶é´æ³ 1562255999000ï¼åä¸ä½åºå®ä¸º 000\nconsole.log(Date.parse(dt));\n\n// ä½æ¯å¦æè¿æ ·åï¼è¿æ¯å¯ä»¥ç\nDate.parse(\"2019-07-04 23:59:59.999\")\n// 1562255999999\n\n\n * æ¶é´æ³è½¬æ¢ä¸ºæ¶é´å¯¹è±¡\n\n// æ³¨æï¼åæ°ä¸­çæ¶é´æ³å¿é¡»æ¯ 13 ä½çï¼å¤ä¸ä½æå°ä¸ä½é½ä¸è¡\nnew Date(1562169599000); // Wed Jul 03 2019 23:59:59 GMT+0800 (ä¸­å½æ åæ¶é´)\n\n// å°æ¶é´æ³è½¬æ¢ä¸ºæ´å ç´è§å½¢è±¡çæ¬å°æ¶é´\nnew Date(1562169599000).toLocaleString() // \"2019/7/3 ä¸å11:59:59\"\n\n// å¤æ­ä¸¤ä¸ªæ¶é´å·®æ¯å¦è¶è¿ä¸å¤©\n(Date.parse(new Date('2020-08-06 21:33:00')) - Date.parse(new Date('2020-08-05 21:33:00')))\n/1000/3600/24 = 1\n\n// åä¸ä½æ¯ç²¾ç¡®å°æ¯«ç§ï¼ä¸è¬ä¸ç¨èè\n+new Date(\"2019-07-04 23:59:59.999\")\n// 1562255999999\n\n+new Date(\"2019-07-04 23:59:59\")\n// 1562255999000\n\n\n\n# ä¸ä¸ªå¼å®¹æ§é®é¢\n\n> æ¶é´æ ¼å¼ä¸º2020-08-09å·æå¼å®¹æ§é®é¢ï¼æ­£ç¡®ç¨æ³æ¯ new Date('2020/08/-09 21:33:00')\n\nstr.replace(/-/g,\"/\")\n\n(Date.parse(new Date('2020-08-06 21:33:00')) - Date.parse(new Date(('2020-08-05 21:33:00').replace(/-/g,\"/\"))))/1000/3600/24 = 1\n\n\n\n# ä¸ä¸ªå½æ°\n\n * éæ©æ¥æï¼æ¯å¦è¯´éæ©æ¥æ10.23-10.24ï¼ç»ä»¶è¿åçæ¯23å·0ç¹å°24å·é¶ç¹ï¼æä»¥éè¦å ä¸å¤©æ¶é´\n * ä½æ¯å¦æç»ä»¶æ¯ç²¾ç¡®å°ç§çè¯ç´æ¥ç¨getTimeå°±è¡äº\n\ndisposeTime(start, end) {\n  let startDate, endDate\n  if (start.getTime) {\n    startDate = start.getTime()\n  } else {\n    startDate = moment(start).valueOf()\n  }\n  if (end.getTime) {\n    endDate = end.getTime()\n  } else {\n    endDate = moment(end).valueOf()\n  }\n  endDate += 24 * 60 * 60 * 1000 - 1;\n  return {\n    startDate,\n    endDate\n  }\n},\n\n\n * å¶ä¸­çmomentæ¯ä¸ä¸ªæ¶é´æ ¼å¼åçæä»¶\n * å¯ä»¥åèï¼Vueä½¿ç¨Momentæä»¶æ ¼å¼åæ¶é´\n\n> ç»å®ä¸ä¸ªæ¶é´æ³ï¼ä»å¤©çå±ç¤ºä»å¤©ï¼ä¸ä¸ªæåçåå¸æ¥æï¼å±ç¤ºXå¤©åï¼ä¸ä¸ªæåçå±ç¤ºå¹´ææ¥ï¼å¦ä½å®ç°ï¼\n\n// å¤çæ¶é´\ntransTime(time) {\n  const diff = (+new Date() - time) / 1000 / 3600 / 24\n  if (new Date(time).getDate() === new Date().getDate()) return 'ä»å¤©'\n  else if (diff < 30) return `${~~diff + 1}å¤©å`\n  else return new Date(time).toLocaleString().split(' ')[0]\n}\n\n\n\n# moment API\n\nMOMENT                                                    å«ä¹                        æ°æ®ç±»å\nmoment()                                                  å½åæ¶é´                      moment å¯¹è±¡\nmoment('2020-01-02')                                      2020-01-02 00:00:00       moment å¯¹è±¡\nmoment('00:00:00', 'HH:mm:ss')                            å½å¤©0ç¹                      moment å¯¹è±¡\nmoment(\"12-25-1995\", \"MM-DD-YYYY\")                        1995-12-25 00:00:00\nmoment().format(\"YYYY-MM-DD HH:mm:ss\")                    å½åæ¶é´æ ¼å¼åå¤ç                 string\nmoment().subtract(1, 'day'))                              å½åæ¶é´åå»ä¸å¤©                  moment å¯¹è±¡\nmoment().subtract(1, 'days'))\nmoment().subtract('days', 1)\nmoment().subtract('day', 1)\nmoment().add(1, 'week'))                                  å½åæ¶é´å ä¸ä¸å¨                  moment å¯¹è±¡\nmoment().startOf('day')                                   å½å¤©0ç¹                      moment å¯¹è±¡\nmoment().hours(0).minutes(0).seconds(0)\nmoment().endOf('year')                                    ä»å¹´æåä¸å¤© 23:59:59           moment å¯¹è±¡\nmoment('2021-07-24') < moment('2021-07-25')               æ¯è¾å¤§å°                      bool\nmoment().day()                                            è·åå½å¤©ææå                    number\nmoment().day(-7)ï¼moment().day(0)                          ä¸ä¸ªæææ¥ï¼è¿ä¸ªæææ¥ï¼0-6ä»£è¡¨å¨æ¥-å¨å­ï¼   moment å¯¹è±¡\nmoment().get('month')ï¼moment().get('date')                å½åæä»½-1ï¼å½åæ¥æ               number\nmoment().subtract(1, 'day').endOf('day').format()         é¾å¼æä½ï¼æ¨å¤©23:59:59           string\nmoment().valueOf()                                        å½åæ¶é´çæ¶é´æ³                  number\nmoment('2021-07-22').diff(moment('2021-07-23'), 'days')   ç¸å·®å¤©æ°                      number\n\n\n#",normalizedContent:"# å³äºæ¥æå¯¹è±¡\n\n * æ¥æå¯¹è±¡\n * å³äºæ¶é´æ³å¤ç\n * date.parseï¼ï¼\n * moment api\n\n\t\tvar date = new date();//è¿åæ¶é´ï¼\n        var yy = date.getfullyear(); //è¿åå¹´\n        var mm = date.getmonth() + 1  ;//è¿åæ\n        var day = date.getday();//è¿åææ ãæ³¨æ ï¼æ¯ä¸ªææç¬¬ä¸å¤©æ¯æææ¥ã\n        var dd = date.getdate();//è¿åå¤© \n        var hh = date.gethours(); //è¿åæ¶\n        var mm = date.getminutes();//è¿åå\n        var ss = date.getseconds();//è¿åç§\n        var ms = date.getmilliseconds();//è¿åç§\n        var time = date.gettime();//è¿å 1970 å¹´ 1 æ 1 æ¥è³ä»çæ¯«ç§æ° \n        var now = date.now(); //è¿å 1970 å¹´ 1 æ 1 æ¥è³ä»çæ¯«ç§æ°  ãä¸å¼å®¹ieã\n        var a = date.tolocalestring() //è¿åå¹´ææ¥ï¼æ¶åç§ï¼\n        var b = date.tolocaledatestring(); //è¿åå¹´ææ¥\n        var c = date.tolocaletimestring(); //è¿åæ¶åç§\n\n\n\n        var date = new date(); //è¿åæå®çæ¶é´ ãæ³¨æï¼æä»½ä¼å 1ï¼æä»¥æä»¬è®¾ç½®çæ¶åè¦å1ã\n        var date1 = new date( '2018/8/20' );\n        var date2 = new date( 2018,7 );\n        var date3 = new date( 2018 );\n        var date4 = new date( '9' );\n        console.log( date ) //å½åæ¶é´\n        console.log( date1 )//mon aug 20 2018 00:00:00\n        console.log( date2 )//wed aug 01 2018 00:00:00\n        console.log( date3 )//thu jan 01 1970 08:00:02\n        console.log( date4 )//sat sep 01 2001 00:00:00\n        //gettimezoneoffset() ä¸çæ¶ï¼ä¸å«åºï¼ - æ¬å°æ¶é´ï¼ å½åçæ¶é´ ï¼\n        console.log( date.gettimezoneoffset() ) //480/8 60åé\n\n\n\n# æ¡ä¾ä¸ï¼è¾åºåäº¬æ¶é´\n\n<div id=\"box\">\n\t\tç°å¨æ¯åäº¬æ¶é´ï¼\n\t\t<p></p>\n</div>\n\n<script>\n\t\tvar box = document.getelementbyid('box'),\n\t\tp = document.getelementsbytagname('p')[0],\n\t\tarr = ['æææ¥','ææä¸','ææäº','ææä¸','ææå','ææäº','ææå­'];\n        function fn(){\n            var date = new date();//è¿åæ¶é´ï¼\n            var yy = date.getfullyear(); //è¿åå¹´\n            var mm = date.getmonth() + 1  ;//è¿åæ\n            var day = date.getday();//è¿åææ ãæ³¨æ ï¼æ¯ä¸ªææç¬¬ä¸å¤©æ¯æææ¥ã\n            var dd = date.getdate();//è¿åå¤© \n            var hh = addzero(date.gethours()); //è¿åæ¶\n            var mm = addzero(date.getminutes());//è¿åå\n            var ss = addzero(date.getseconds());//è¿åç§\n\n            var str = yy+'å¹´'+mm+'æ'+dd+'æ¥'+arr[day]+':'+hh+'æ¶'+mm+'å'+ss+'ç§';\n            p.innerhtml = str;\n        }\n\n        fn();//åæ§è¡ä¸æ¬¡ï¼é¿ååºç°å»¶è¿å è½½\n        setinterval(fn,1000);\n\n        function addzero(n){\n            return n < 10 ? '0' + n : n;\n        }\n<\/script>\n\n\n\n# æ¡ä¾äºï¼è·ç¦»è¿å¹´æ¶é´\n\n\t<div>è·ç¦»è¿å¹´è¿æï¼\n        <p></p> \n\t</div>\n    <script>\n        var newyear = new date( '2019/2/5' ),\n        p = document.getelementsbytagname('p')[0];\n        function fn(){\n            var date = newyear - date.now(),//è¿åæ¯«ç§ä¸ºè·ç¦»æå¹´è¿å¹´è¦å¤å°æ¯«ç§;\n                dd = math.floor(date/1000/60/60/24), //è¿åå¤©\n                hh = math.floor(date/1000/60/60)%24,\n                mm = math.floor(date/1000/60)%60,\n                ss = math.floor(date/1000)%60;\n            console.log( dd ,hh,mm, ss)\n            var str =  dd +'æ¥'+':'+hh+'æ¶'+mm+'å'+ss+'ç§';\n            p.innerhtml = str;\n        }\n        fn()\n        setinterval( fn ,1000 )\n    <\/script>\n\n\n\n# å³äºæ¶é´æ³å¤ç\n\nå¨ååç«¯æ¥å£å¼åæ¶ï¼æ¶é´å¯¹è±¡çå¤çå¾å¾å¤çæ13ä½çæ¶é´æ³å½¢å¼ã\n\nä¸è¬æ¶é´éæ©å¨æ¿å°çé½æ¯thu jul 04 2019 23:59:59 gmt+0800 (ä¸­å½æ åæ¶é´)å³æ¥æå¯¹è±¡çæ ¼å¼\n\n * æ¶é´å¯¹è±¡è½¬æ¢ä¸ºæ¶é´æ³\n\n// å®ä¹ä¸ä¸ªæ¶é´å¯¹è±¡ dtï¼ç¶åä¾æ¬¡æ¼ç¤ºåç§å° dt è½¬æ¢ä¸ºæ¶é´æ³çåæ³\nvar dt = new date(\"2019-07-04 23:59:59.999\");\n// thu jul 04 2019 23:59:59 gmt+0800 (ä¸­å½æ åæ¶é´)\n\n// åæ³ä¸ï¼ç²¾ç¡®å°æ¯«ç§ï¼å¾å° 13 ä½æ¶é´æ³ 1562255999999\nconsole.log(dt.gettime());\n\n// åæ³äºï¼ç²¾ç¡®å°æ¯«ç§ï¼å¾å° 13 ä½æ¶é´æ³ 1562255999999\nconsole.log(dt.valueof());\n\n// åæ³ä¸ï¼ç²¾ç¡®å°æ¯«ç§ï¼å¾å° 13 ä½æ¶é´æ³ 1562255999999\nconsole.log(number(dt));\n\n// åæ³åï¼ç²¾ç¡®å°æ¯«ç§ï¼å¾å° 13 ä½æ¶é´æ³ 1562255999999\nconsole.log(+dt);\n\n// åæ³äºï¼ç²¾ç¡®å°ç§ï¼å¾å° 13 ä½æ¶é´æ³ 1562255999000ï¼åä¸ä½åºå®ä¸º 000\nconsole.log(date.parse(dt));\n\n// ä½æ¯å¦æè¿æ ·åï¼è¿æ¯å¯ä»¥ç\ndate.parse(\"2019-07-04 23:59:59.999\")\n// 1562255999999\n\n\n * æ¶é´æ³è½¬æ¢ä¸ºæ¶é´å¯¹è±¡\n\n// æ³¨æï¼åæ°ä¸­çæ¶é´æ³å¿é¡»æ¯ 13 ä½çï¼å¤ä¸ä½æå°ä¸ä½é½ä¸è¡\nnew date(1562169599000); // wed jul 03 2019 23:59:59 gmt+0800 (ä¸­å½æ åæ¶é´)\n\n// å°æ¶é´æ³è½¬æ¢ä¸ºæ´å ç´è§å½¢è±¡çæ¬å°æ¶é´\nnew date(1562169599000).tolocalestring() // \"2019/7/3 ä¸å11:59:59\"\n\n// å¤æ­ä¸¤ä¸ªæ¶é´å·®æ¯å¦è¶è¿ä¸å¤©\n(date.parse(new date('2020-08-06 21:33:00')) - date.parse(new date('2020-08-05 21:33:00')))\n/1000/3600/24 = 1\n\n// åä¸ä½æ¯ç²¾ç¡®å°æ¯«ç§ï¼ä¸è¬ä¸ç¨èè\n+new date(\"2019-07-04 23:59:59.999\")\n// 1562255999999\n\n+new date(\"2019-07-04 23:59:59\")\n// 1562255999000\n\n\n\n# ä¸ä¸ªå¼å®¹æ§é®é¢\n\n> æ¶é´æ ¼å¼ä¸º2020-08-09å·æå¼å®¹æ§é®é¢ï¼æ­£ç¡®ç¨æ³æ¯ new date('2020/08/-09 21:33:00')\n\nstr.replace(/-/g,\"/\")\n\n(date.parse(new date('2020-08-06 21:33:00')) - date.parse(new date(('2020-08-05 21:33:00').replace(/-/g,\"/\"))))/1000/3600/24 = 1\n\n\n\n# ä¸ä¸ªå½æ°\n\n * éæ©æ¥æï¼æ¯å¦è¯´éæ©æ¥æ10.23-10.24ï¼ç»ä»¶è¿åçæ¯23å·0ç¹å°24å·é¶ç¹ï¼æä»¥éè¦å ä¸å¤©æ¶é´\n * ä½æ¯å¦æç»ä»¶æ¯ç²¾ç¡®å°ç§çè¯ç´æ¥ç¨gettimeå°±è¡äº\n\ndisposetime(start, end) {\n  let startdate, enddate\n  if (start.gettime) {\n    startdate = start.gettime()\n  } else {\n    startdate = moment(start).valueof()\n  }\n  if (end.gettime) {\n    enddate = end.gettime()\n  } else {\n    enddate = moment(end).valueof()\n  }\n  enddate += 24 * 60 * 60 * 1000 - 1;\n  return {\n    startdate,\n    enddate\n  }\n},\n\n\n * å¶ä¸­çmomentæ¯ä¸ä¸ªæ¶é´æ ¼å¼åçæä»¶\n * å¯ä»¥åèï¼vueä½¿ç¨momentæä»¶æ ¼å¼åæ¶é´\n\n> ç»å®ä¸ä¸ªæ¶é´æ³ï¼ä»å¤©çå±ç¤ºä»å¤©ï¼ä¸ä¸ªæåçåå¸æ¥æï¼å±ç¤ºxå¤©åï¼ä¸ä¸ªæåçå±ç¤ºå¹´ææ¥ï¼å¦ä½å®ç°ï¼\n\n// å¤çæ¶é´\ntranstime(time) {\n  const diff = (+new date() - time) / 1000 / 3600 / 24\n  if (new date(time).getdate() === new date().getdate()) return 'ä»å¤©'\n  else if (diff < 30) return `${~~diff + 1}å¤©å`\n  else return new date(time).tolocalestring().split(' ')[0]\n}\n\n\n\n# moment api\n\nmoment                                                    å«ä¹                        æ°æ®ç±»å\nmoment()                                                  å½åæ¶é´                      moment å¯¹è±¡\nmoment('2020-01-02')                                      2020-01-02 00:00:00       moment å¯¹è±¡\nmoment('00:00:00', 'hh:mm:ss')                            å½å¤©0ç¹                      moment å¯¹è±¡\nmoment(\"12-25-1995\", \"mm-dd-yyyy\")                        1995-12-25 00:00:00\nmoment().format(\"yyyy-mm-dd hh:mm:ss\")                    å½åæ¶é´æ ¼å¼åå¤ç                 string\nmoment().subtract(1, 'day'))                              å½åæ¶é´åå»ä¸å¤©                  moment å¯¹è±¡\nmoment().subtract(1, 'days'))\nmoment().subtract('days', 1)\nmoment().subtract('day', 1)\nmoment().add(1, 'week'))                                  å½åæ¶é´å ä¸ä¸å¨                  moment å¯¹è±¡\nmoment().startof('day')                                   å½å¤©0ç¹                      moment å¯¹è±¡\nmoment().hours(0).minutes(0).seconds(0)\nmoment().endof('year')                                    ä»å¹´æåä¸å¤© 23:59:59           moment å¯¹è±¡\nmoment('2021-07-24') < moment('2021-07-25')               æ¯è¾å¤§å°                      bool\nmoment().day()                                            è·åå½å¤©ææå                    number\nmoment().day(-7)ï¼moment().day(0)                          ä¸ä¸ªæææ¥ï¼è¿ä¸ªæææ¥ï¼0-6ä»£è¡¨å¨æ¥-å¨å­ï¼   moment å¯¹è±¡\nmoment().get('month')ï¼moment().get('date')                å½åæä»½-1ï¼å½åæ¥æ               number\nmoment().subtract(1, 'day').endof('day').format()         é¾å¼æä½ï¼æ¨å¤©23:59:59           string\nmoment().valueof()                                        å½åæ¶é´çæ¶é´æ³                  number\nmoment('2021-07-22').diff(moment('2021-07-23'), 'days')   ç¸å·®å¤©æ°                      number\n\n\n#",charsets:{cjk:!0}},{title:"Promise",frontmatter:{},regularPath:"/javascript/asynchronous.html",relativePath:"javascript/asynchronous.md",key:"v-42ba8bff",path:"/javascript/asynchronous.html",headers:[{level:2,title:"promise",slug:"promise-2",normalizedTitle:"promise",charIndex:14},{level:3,title:"Promiseéææ¹æ³",slug:"promiseéææ¹æ³",normalizedTitle:"promiseéææ¹æ³",charIndex:1579},{level:3,title:"Promise.then è¿åå¼",slug:"promise-then-è¿åå¼",normalizedTitle:"promise.then è¿åå¼",charIndex:2988},{level:2,title:"promiseç¸å³æ¹æ³",slug:"promiseç¸å³æ¹æ³",normalizedTitle:"promiseç¸å³æ¹æ³",charIndex:25},{level:2,title:"Generator",slug:"generator",normalizedTitle:"generator",charIndex:40},{level:3,title:"for...of ä¸ Generator",slug:"for-of-ä¸-generator",normalizedTitle:"for...of ä¸ generator",charIndex:5159},{level:2,title:"asyncåawait",slug:"asyncåawait",normalizedTitle:"asyncåawait",charIndex:53},{level:3,title:"åºæ¬ä½¿ç¨",slug:"åºæ¬ä½¿ç¨",normalizedTitle:"åºæ¬ä½¿ç¨",charIndex:6454},{level:3,title:"awaitåçå¼ä¹å¯ä»¥æ¯æ®éå¼",slug:"awaitåçå¼ä¹å¯ä»¥æ¯æ®éå¼",normalizedTitle:"awaitåçå¼ä¹å¯ä»¥æ¯æ®éå¼",charIndex:6681},{level:3,title:"asyncè¿åä¸ä¸ªPromiseå¯¹è±¡",slug:"asyncè¿åä¸ä¸ªpromiseå¯¹è±¡",normalizedTitle:"asyncè¿åä¸ä¸ªpromiseå¯¹è±¡",charIndex:6791},{level:3,title:"åæ¶åå¤ä¸ªè¯·æ±",slug:"åæ¶åå¤ä¸ªè¯·æ±",normalizedTitle:"åæ¶åå¤ä¸ªè¯·æ±",charIndex:7169},{level:3,title:"é¡¶å± await",slug:"é¡¶å±-await",normalizedTitle:"é¡¶å± await",charIndex:7442},{level:3,title:"try...catchå¤çéè¯¯",slug:"try-catchå¤çéè¯¯",normalizedTitle:"try...catchå¤çéè¯¯",charIndex:8599},{level:2,title:"å®ä»»å¡ï¼å¾®ä»»å¡ï¼äºä»¶å¾ªç¯",slug:"å®ä»»å¡-å¾®ä»»å¡-äºä»¶å¾ªç¯",normalizedTitle:"å®ä»»å¡ï¼å¾®ä»»å¡ï¼äºä»¶å¾ªç¯",charIndex:68},{level:2,title:"é¢è¯é¢ç²¾é",slug:"é¢è¯é¢ç²¾é",normalizedTitle:"é¢è¯é¢ç²¾é",charIndex:84},{level:3,title:"æåä»£ç ",slug:"æåä»£ç ",normalizedTitle:"æåä»£ç ",charIndex:13279},{level:3,title:"çä»£ç è¯´ç­æ¡",slug:"çä»£ç è¯´ç­æ¡",normalizedTitle:"çä»£ç è¯´ç­æ¡",charIndex:13384},{level:3,title:"å½ async/await éå° forEach",slug:"å½-async-await-éå°-foreach",normalizedTitle:"å½ async/await éå° foreach",charIndex:17647},{level:2,title:"æµè§å¨äºä»¶å¾ªç¯ånodeäºä»¶å¾ªç¯çåºå«",slug:"æµè§å¨äºä»¶å¾ªç¯ånodeäºä»¶å¾ªç¯çåºå«",normalizedTitle:"æµè§å¨äºä»¶å¾ªç¯ånodeäºä»¶å¾ªç¯çåºå«",charIndex:19347}],lastUpdated:"2/9/2023, 7:49:33 PM",lastUpdatedTimestamp:1675943373e3,headersStr:"promise Promiseéææ¹æ³ Promise.then è¿åå¼ promiseç¸å³æ¹æ³ Generator for...of ä¸ Generator asyncåawait åºæ¬ä½¿ç¨ awaitåçå¼ä¹å¯ä»¥æ¯æ®éå¼ asyncè¿åä¸ä¸ªPromiseå¯¹è±¡ åæ¶åå¤ä¸ªè¯·æ± é¡¶å± await try...catchå¤çéè¯¯ å®ä»»å¡ï¼å¾®ä»»å¡ï¼äºä»¶å¾ªç¯ é¢è¯é¢ç²¾é æåä»£ç  çä»£ç è¯´ç­æ¡ å½ async/await éå° forEach æµè§å¨äºä»¶å¾ªç¯ånodeäºä»¶å¾ªç¯çåºå«",content:"# Promise\n\n * promise\n * promiseç¸å³æ¹æ³\n * Generator\n * asyncåawait\n * å®ä»»å¡ï¼å¾®ä»»å¡ï¼äºä»¶å¾ªç¯\n * é¢è¯é¢ç²¾é\n * æµè§å¨ä¸nodeçäºä»¶å¾ªç¯\n\n\n# promise\n\né¦åæ³ä¸ä¸ï¼æä¹è§å®å½æ°çæ§è¡é¡ºåºï¼éè¿åè°çæ¹å¼ï¼\n\nfunction A(callback){\n    console.log(\"I am A\");\n    callback();  //è°ç¨è¯¥å½æ°\n}\n\nfunction B(){\n   console.log(\"I am B\");\n}\n\nA(B);//åæ§è¡Aåæ§è¡Bï¼å½éè¦æ§è¡ABCDEFGæ¶ï¼å°±ä¼é æåè°å°ç±\n\n\nåè°å°ç±âä¹å«âåè°éå­å¡âï¼æä»¬å¹³æ¶åä»£ç çæ¶å jså¦æå¼æ­¥ åè°æ¯ä¸å¯é¿åçÂ  ä¾å¦ ajaxä¸æ­çè¿è¡å¼æ­¥è¯·æ±æ°æ® åè°æ¹æ³éè¿è¦å¯¹æ°æ®è¿è¡å¤çï¼ç»§ç»­åè°â¦å½¢æåè°å°ç±Â  è¿ä¼ä½¿å¾æä»¬çä»£ç å¯è¯»æ§åå·®ï¼åºç°é®é¢ ä¸å¥½è°è¯ ä¹ä¼å¯¼è´æ§è½ä¸é\n\nPromiseï¼åæ­¥ä»£ç è§£å³å¼æ­¥ç¼ç¨\n\n * æ¯ä¸ä¸ªæé å½æ°ï¼ç¨æ¥ä¼ éå¼æ­¥æä½æ¶æ¯ï¼é¾å¼è°ç¨ï¼é¿åå±å±åµå¥çåè°å½æ°ã\n * promiseæ¥æ¶ä¸¤ä¸ªå½æ°åæ°ï¼resolveårejectï¼åå«è¡¨ç¤ºå¼æ­¥æä½æ§è¡æååçåè°åå¤±è´¥çåè°\n * promiseå¨å£°æçæ¶åå°±å·²ç»æ§è¡äº\n * æä¸ç§ç¶æï¼pendingè¿è¡ä¸­ãresolveå·²å®æãrejectedå·²å¤±è´¥,\n * è¿äºç¶æåªè½ç±pending -> resolved, pending -> rejected,ä¸æ¦promiseå®ä¾åçæ¹åï¼å°±ä¸è½å¨åäºï¼ä»»ä½æ¶åé½è½å¾å°è¿ä¸ªç»æ\n * promiseå¯¹è±¡çthenæ¹æ³ä¼è¿åä¸ä¸ªå¨æ°çpromiseå¯¹è±¡\n * åé¢thenæ¹æ³ä¸­çåè°å½æ°çè¿åå¼ä¼ä½ä¸ºåé¢thenæ¹æ³åè°çåæ°\n * å¦æåè°ä¸­è¿åçæ¯Promiseï¼é£åé¢çthenæ¹æ³çåè°ä¼ç­å¾å®çç»æ\n * promise.reslove()å¯ä»¥å¿«éåå»ºä¸ä¸ªPromiseå¯¹è±¡\n\nconsole.log(1)\nsetTimeout(() => console.log(5))\nnew Promise(function(resolve,reject){\n    console.log(2) //ç«å»æ§è¡\n    resolve()      //Promise.thenæ¯å¾®ä»»å¡\n}).then(function(){\n    console.log(3)\n})\nconsole.log(4)  //è¾åº1,2,4,3,5\n\n//resolveå¯ä»¥æ¥æ¶åæ°\nnew Promise(function(resolve,reject){\n    resolve(\"2\")\n}).then(function(data){\n    console.log(data)\n})\n\n\n// æ¿ç¹å¤åä¸ºä¾ï¼ç¹å¤ååå¯è½ä¼æåæ´¾éä¹å¯è½ä¼å»¶è¿ï¼æ è®ºå¦ä½é½ä¼æä¸ªç»æ\nfuntion dianwaimai(){\n    return new Promise((reslove,reject) => {\n        let result = cooking()\n        if (result===\"åå¥½äº\") reslove(\"æ­£å¨æ´¾é\")\n        else reject(\"è¿æ²¡åå¥½\")\n    })\n}\nfunction cooking(){\n    return Math.random() > 0.5 ? 'èç§å¥½äº' : 'èç§ç³äº'\n}\n\n//æ§è¡\ndianwaimai().then(res => console.log(res)).catch(res => console.log(res))\n\n\n\n# Promiseéææ¹æ³\n\n * Promise.reslove(value)ï¼ç¸å½äºnew Promise(resolve => resolve(value)),å¯¹åæ°é½åäºåç§å¤æ­\n * Promise.reject\n\nè¿ä¸¤ç§æ¹æ³åä¼åå»ºPromiseå¯¹è±¡\n\nPromise.resolve('foo')\n\t.then( value => console.log(value) )\n// foo\n\nPromise.reject(new Error('rejected'))\n\t.catch(err => console.log(err))\n// Error: rejected\n//    at <anonymous>:1:16\n\n\nPromise.resolveæ¹æ³çåæ°åæåç§æåµã\n\n1ï¼åæ°æ¯ä¸ä¸ª Promise å®ä¾\n\nå¦æåæ°æ¯ Promise å®ä¾ï¼é£ä¹Promise.resolveå°ä¸åä»»ä½ä¿®æ¹ãåå°ä¸å¨å°è¿åè¿ä¸ªå®ä¾ã\n\n2ï¼åæ°æ¯ä¸ä¸ªthenableå¯¹è±¡\n\nthenableå¯¹è±¡æçæ¯å·æthenæ¹æ³çå¯¹è±¡ï¼æ¯å¦ä¸é¢è¿ä¸ªå¯¹è±¡ã\n\nlet thenable = {\n  then: function(resolve, reject) {\n    resolve(42);\n  }\n};\n\n\nPromise.resolveæ¹æ³ä¼å°è¿ä¸ªå¯¹è±¡è½¬ä¸º Promise å¯¹è±¡ï¼ç¶åå°±ç«å³æ§è¡thenableå¯¹è±¡çthenæ¹æ³ã\n\nlet thenable = {\n  then: function(resolve, reject) {\n    resolve(42);\n  }\n};\n\nlet p1 = Promise.resolve(thenable);\np1.then(function(value) {\n  console.log(value);  // 42\n});\n\n\nä¸é¢ä»£ç ä¸­ï¼thenableå¯¹è±¡çthenæ¹æ³æ§è¡åï¼å¯¹è±¡p1çç¶æå°±åä¸ºresolvedï¼ä»èç«å³æ§è¡æåé£ä¸ªthenæ¹æ³æå®çåè°å½æ°ï¼è¾åº 42ã\n\n3ï¼åæ°ä¸æ¯å·æthenæ¹æ³çå¯¹è±¡ï¼ææ ¹æ¬å°±ä¸æ¯å¯¹è±¡ã\n\nå¦æåæ°æ¯ä¸ä¸ªåå§å¼ï¼æèæ¯ä¸ä¸ªä¸å·æthenæ¹æ³çå¯¹è±¡ï¼åPromise.resolveæ¹æ³è¿åä¸ä¸ªæ°ç Promise å¯¹è±¡ï¼ç¶æä¸ºresolvedã\n\nconst p = Promise.resolve('Hello');\n\np.then(function (s){\n  console.log(s)\n});\n// Hello\n\n\nä¸é¢ä»£ç çæä¸ä¸ªæ°ç Promise å¯¹è±¡çå®ä¾pãç±äºå­ç¬¦ä¸²Helloä¸å±äºå¼æ­¥æä½ï¼å¤æ­æ¹æ³æ¯å­ç¬¦ä¸²å¯¹è±¡ä¸å·æ then æ¹æ³ï¼ï¼è¿å Promise å®ä¾çç¶æä»ä¸çæå°±æ¯resolvedï¼æä»¥åè°å½æ°ä¼ç«å³æ§è¡ãPromise.resolveæ¹æ³çåæ°ï¼ä¼åæ¶ä¼ ç»åè°å½æ°ã\n\n4ï¼ä¸å¸¦æä»»ä½åæ°\n\nPromise.resolveæ¹æ³åè®¸è°ç¨æ¶ä¸å¸¦åæ°ï¼ç´æ¥è¿åä¸ä¸ªresolvedç¶æç Promise å¯¹è±¡ã\n\næä»¥ï¼å¦æå¸æå¾å°ä¸ä¸ª Promise å¯¹è±¡ï¼æ¯è¾æ¹ä¾¿çæ¹æ³å°±æ¯ç´æ¥è°ç¨Promise.resolveæ¹æ³ã\n\nconst p = Promise.resolve();\n\np.then(function () {\n  // ...\n});\n\n\n\n# Promise.then è¿åå¼\n\nPromise.thenæ¹æ³çè¿åå¼é®é¢\n\nvar p1 = Promise.resolve(42)\np1.then((value) => {\n  //ç¬¬ä¸ç§æåµï¼è¿åä¸ä¸ªPromise\n  return new Promise(function(resolve,rejected){\n    resolve(value + 1)\n  })\n\n  //ç¬¬äºç§æåµï¼è¿åä¸ä¸ªå¼\n  return value + 2;\n\n  //ç¬¬ä¸ç§æåµï¼æ°å»ºä¸ä¸ªpromiseï¼ä½¿ç¨resloveè¿åå¼\n  const p2 = new Promise(function(resolve,rejected){\n    resolve(value + 3)\n  })\n\n  //ç¬¬åç§æåµï¼æ°å»ºä¸ä¸ªpromiseï¼ä½¿ç¨returnè¿åå¼\n  const p2 = new Promise(function(resolve,rejected){\n    return(value + 4)\n  })\n\n  //ç¬¬äºç§æåµï¼æ²¡æè¿åå¼\n  return undefined\n\n}).then((value) => {\n  console.log(value)\n})\n\n\n> ç¬¬ä¸ç§æåµï¼æ°å»ºpromiseçresolveä¼ åºçå¼å°ä½ä¸ºthenæ¹æ³è¿åçpromiseçresolveçå¼ä¼ éåºï¼consoleå°æå°åº43\n> \n> ç¬¬äºç§æåµï¼returnçå¼å°ä½ä¸ºthenæ¹æ³è¿åçpromiseçresolveçå¼ä¼ éåºï¼consoleå°æå°åº44\n> \n> ç¬¬ä¸ç§æåµï¼è½ç¶æ°å»ºäºpromiseï¼ä½å¯¹äºthenæ¹æ³æ¥è¯´ï¼æ²¡æåå®è¿åçpromiseä¼ éè¿åå¼ï¼consoleå°æå°åºundifined\n> \n> ç¬¬åç§æåµï¼åç¬¬ä¸ç§æåµï¼\n> \n> ç¬¬äºç§æåµï¼thenæ¹æ³æ²¡æè¿åå¼ï¼thenæ¹æ³çpromiseçresolveçå¼å°ä¼ éåºundifinedã\n\nåèæç« å¼ç¯ promise çç¹æ§ï¼\n\n * promiseå¯¹è±¡çthenæ¹æ³ä¼è¿åä¸ä¸ªå¨æ°çpromiseå¯¹è±¡\n * åé¢thenæ¹æ³ä¸­çåè°å½æ°çè¿åå¼ä¼ä½ä¸ºåé¢thenæ¹æ³åè°çåæ°\n\næä»¥ then æ¹æ³ä¸­å¦ææ²¡æè¿åå¼ï¼åæ²¡æç»§ç»­ååä¼ éåæ°ãå¦ææè¿åå¼ï¼ä¸è®ºè¿ä¸ªå¼æ¯ promise è¿æ¯æ®éçå¼ï¼é½ä¼è¢«å¤çæ promiseï¼å·ä½å¯ç promise å®ç°\n\n\n# promiseç¸å³æ¹æ³\n\n 1. Promise.all()ï¼ææpromiseåresolveæ¶ï¼è¿åpromiseç»æï¼åªè¦æä¸ä¸ªpromise rejectï¼é£ä¹è¿åçpromiseå°±reject\n 2. Promise.allSettled()ï¼è¿åçææçpromiseç»æï¼æ è®ºresolveè¿æ¯reject\n 3. Promise.any()ï¼ä»»æä¸ä¸ªpromise resolveï¼è¿åçpromiseåresolveãé¤éææçpromiseårejectï¼åè¿åçpromiseæreject\n 4. Promise.race()ï¼ä¸æ¦æä¸ª promise resolveærejectï¼è¿åç promise å°±ä¼resolveærejectãï¼æå¿«çé£ä¸ªpromiseæ è®ºresolveè¿æ¯rejecté½åè¿ä¸ªç»æï¼\n 5. Promise.reject()\n 6. Promise.resolve()\n 7. Promise.prototype.then()\n 8. Promise.prototype.catch()\n 9. Promise.prototype.finally()ï¼finallyä¸­çé»è¾ç¸å½äºå¨.thenå.catchä¸­åæ§è¡ä¸é\n\n\n# Generator\n\n * Generator çä¸­æåç§°æ¯çæå¨ï¼\n * éè¿function*æ¥å®ä¹çå½æ°ç§°ä¹ä¸ºâçæå¨å½æ°âï¼generator functionï¼ï¼å®çç¹ç¹æ¯å¯ä»¥ä¸­æ­å½æ°çæ§è¡ï¼æ¯æ¬¡æ§è¡yieldè¯­å¥ä¹åï¼å½æ°å³æåæ§è¡ï¼ç´å°è°ç¨è¿åççæå¨å¯¹è±¡çnext()å½æ°å®æä¼ç»§ç»­æ§è¡ã\n * ä¹å°±æ¯è¯´Generator å½æ°æ¯ä¸ä¸ªç¶ææºï¼å°è£äºå¤ä¸ªåé¨ç¶æãæ§è¡ Generator å½æ°è¿åä¸ä¸ªéåå¨å¯¹è±¡ï¼ä¸ä¸ªæååé¨ç¶æçæéå¯¹è±¡ï¼ï¼è°ç¨éåå¨å¯¹è±¡çnextæ¹æ³ï¼ä½¿å¾æéç§»åä¸ä¸ä¸ªç¶æã\n\nfunction* say(){\n    for(let i=0;i<10;i++){\n        yield i\n    }\n}\nlet obj = say()//è¿åä¸ä¸ªéåå¨å¯¹è±¡\nobj.next()  //Object {value: 0, done: false}\nobj.next()  //Object {value: 1, done: false}\nobj.next()  //Object {value: 2, done: false}\n...\nobj.next()  //Object {value: 9 done: false}\nobj.next()  //Object {value: undefined, done: true}\n\n\n\n# for...of ä¸ Generator\n\nconst todos = {\n    life: ['åé¥­', 'ç¡è§', 'æè±è±'],\n    learn: ['è¯­æ', 'æ°å­¦', 'å¤è¯­'],\n    work: ['åè¶'],\n\n    [Symbol.iterator]: function * () {\n        const all = [...this.life, ...this.learn, ...this.work]\n        for(const item of all) {\n            yield item\n        }\n    }\n}\n\nfor (let item of todos) {\n    console.log(item)\n}\n\n\n\n# asyncåawait\n\nES2017æä¾äºasyncå½æ°ï¼ä½¿å¾å¼æ­¥æä½åå¾æ´å æ¹ä¾¿ãasyncå½æ°å°±æ¯Generatorå½æ°çè¯­æ³ç³ã asyncå½æ°å°±æ¯å°Generatorå½æ°çæå·ï¼*ï¼æ¿æ¢æasyncï¼å°yieldæ¿æ¢æawaitï¼ä»æ­¤èå·²ã è¿ä¸æ­¥è¯´ï¼asyncå½æ°å®å¨å¯ä»¥çä½å¤ä¸ªå¼æ­¥æä½ï¼åè£æçä¸ä¸ªPromiseå¯¹è±¡ï¼èawaitå½ä»¤å°±æ¯åé¨thenå½ä»¤çè¯­æ³ç³ã\n\n * async å½æ°è¿åçå°±æ¯ä¸ä¸ª Promise å¯¹è±¡ï¼ææ¥æ¶çå¼å°±æ¯å½æ° return çå¼\n\n * await æä½ç¬¦ç¨äºç­å¾ä¸ä¸ª Promise å¯¹è±¡ãå®åªè½å¨å¼æ­¥å½æ° async function ä¸­ä½¿ç¨ã\n\n * await è¡¨è¾¾å¼ä¼æåå½å async function çæ§è¡ï¼ç­å¾ Promise å¤çå®æãè¥ Promise æ­£å¸¸å¤ç(fulfilled)ï¼å¶åè°ç resolve å½æ°åæ°ä½ä¸º await è¡¨è¾¾å¼çå¼ï¼ç»§ç»­æ§è¡ async functionã\n\n * è¥ Promise å¤çå¼å¸¸(rejected)ï¼await è¡¨è¾¾å¼ä¼æ Promise çå¼å¸¸åå æåºã\n\n * å¦å¤ï¼å¦æ await æä½ç¬¦åçè¡¨è¾¾å¼çå¼ä¸æ¯ä¸ä¸ª Promiseï¼åè¿åè¯¥å¼æ¬èº«ã\n\nç¸æ¯äºGeneratorçæ¹è¿\n\n * åç½®æ§è¡å¨ãGenerator å½æ°çæ§è¡å¿é¡»ä¾é æ§è¡å¨ï¼è async å½æ°èªå¸¦æ§è¡å¨ï¼æ éæå¨æ§è¡ next() æ¹æ³ã\n\n * æ´å¥½çè¯­ä¹ãasyncåawaitï¼æ¯èµ·æå·åyieldï¼è¯­ä¹æ´æ¸æ¥äºãasyncè¡¨ç¤ºå½æ°éæå¼æ­¥æä½ï¼awaitè¡¨ç¤ºç´§è·å¨åé¢çè¡¨è¾¾å¼éè¦ç­å¾ç»æã\n\n * æ´å¹¿çéç¨æ§ãcoæ¨¡åçº¦å®ï¼yieldå½ä»¤åé¢åªè½æ¯ Thunk å½æ°æ Promise å¯¹è±¡ï¼èasyncå½æ°çawaitå½ä»¤åé¢ï¼å¯ä»¥æ¯ Promise å¯¹è±¡ååå§ç±»åçå¼ï¼æ°å¼ãå­ç¬¦ä¸²åå¸å°å¼ï¼ä½è¿æ¶ä¼èªå¨è½¬æç«å³ resolved ç Promise å¯¹è±¡ï¼ã\n\n * è¿åå¼æ¯ Promiseãasync å½æ°è¿åå¼æ¯ Promise å¯¹è±¡ï¼æ¯ Generator å½æ°è¿åç Iterator å¯¹è±¡æ¹ä¾¿ï¼å¯ä»¥ç´æ¥ä½¿ç¨ then() æ¹æ³è¿è¡è°ç¨ã\n\n\n# åºæ¬ä½¿ç¨\n\nfunction getData () {\n    return new Promise(resolve => {\n        setTimeout(resolve, 1000, 'ç»æ') // å¼æ­¥æ¨¡ææ°æ®è¯·æ±\n    })\n}\n\nasync function asyncFn () {\n    let res = await getData()\n    console.log(res) // 1sä¹åè¾åº 'ç»æ'\n}\n\n\n\n# awaitåçå¼ä¹å¯ä»¥æ¯æ®éå¼\n\nasync function fn () {\n    return await 123\n}\nfn().then(res => console.log(res)) // 123\n\n\n\n# asyncè¿åä¸ä¸ªPromiseå¯¹è±¡\n\nå½æ²¡åçéè¯¯æ¶ return çå¼ä¼æä¸º then æ¹æ³åè°å½æ°çåæ°ã\n\nèå½æåºéè¯¯æ¶ï¼ä¼å¯¼è´Promiseå¯¹è±¡åä¸º reject ç¶æï¼æåºçéè¯¯ä¹ä¼æä¸º catch æ¹æ³åè°å½æ°çåæ°ã\n\nasync function f1(){\n    return 'hello world'\n}\nf1().then(res => {\n  console.log(res)} // hello world\n)\n\nasync function f2() {\n  throw new Error('error')\n}\nf2().then(res => {\n    console.log(res)\n}).catch(err => {\n    console.log(err) // Error: error\n})\n\n\n\n# åæ¶åå¤ä¸ªè¯·æ±\n\nasync function getABC() {\n  let A = await getA()\n  let B = await getB()\n  let C = await getC()\n  return A + B + C\n}\n\n// æ­£ç¡®å¤ç\nasync function getABC() {\n  let results = await Promise.all([getA, getB, getC])\n  return results.reduce((acc, cur) => acc + cur, 0)\n}\n\n\n\n# é¡¶å± await\n\né¡¶å± await åè®¸æä»¬å¨ async å½æ°å¤é¢ä½¿ç¨ await å³é®å­ãå®åè®¸æ¨¡ååå½å¤§åå¼æ­¥å½æ°ï¼éè¿é¡¶å± awaitï¼è¿äº ECMAScript æ¨¡åå¯ä»¥ç­å¾èµæºå è½½ãè¿æ ·å¶ä»å¯¼å¥è¿äºæ¨¡åçæ¨¡åå¨æ§è¡ä»£ç ä¹åè¦ç­å¾èµæºå è½½å®åå»æ§è¡ã\n\nç±äº await ä»å¨ async å½æ°ä¸­å¯ç¨ï¼å æ­¤æ¨¡åå¯ä»¥éè¿å°ä»£ç åè£å¨ async å½æ°ä¸­æ¥å¨ä»£ç ä¸­åå« awaitï¼\n\n// a.js\nimport fetch  from \"node-fetch\";\nlet users;\nexport const fetchUsers = async () => {\n  const resp = await fetch('https://jsonplaceholder.typicode.com/users');\n  users =  resp.json();\n}\nfetchUsers();\nexport { users };\n\n// usingAwait.js\nimport {users} from './a.js';\nconsole.log('users:', users); // undefined\nsetTimeout(() => {\n  console.log('users:', users);\n}, 100);\n\n\nä¸ä¸ªæ¹æ³æ¯å¯¼åºä¸ä¸ª promiseï¼è®©å¯¼å¥æ¨¡åç¥éæ°æ®å·²ç»åå¤å¥½äºï¼\n\n//a.js\nimport fetch  from \"node-fetch\";\nexport default (async () => {\n  const resp = await fetch('https://jsonplaceholder.typicode.com/users');\n  users = resp.json();\n})();\nexport { users };\n\n//usingAwait.js\nimport promise, {users} from './a.js';\npromise.then(() => {\n  setTimeout(() => console.log('users:', users), 100); \n});\n\n\nèé¡¶å±awaitå°±å¯ä»¥è§£å³è¿äºé®é¢ï¼\n\n// a.js\nconst resp = await fetch('https://jsonplaceholder.typicode.com/users');\nconst users = resp.json();\nexport { users};\n// usingAwait.js\nimport {users} from './a.mjs';\nconsole.log(users);\n\n\n\n# try...catchå¤çéè¯¯\n\nfunction getData() {\n    return new Promise((resolve, reject) => {\n        setTimeout(() => {\n            reject(new Error('error')) // æ¨¡æåºé\n        }, 1000)\n    })\n}\nasync function fn() {\n    let res = await getData() // ä¼æåºéè¯¯ï¼ä¸ä¸ä¼åä¸æ§è¡\n    console.log(res) // ä¸ä¼è¾åºä»»ä½\n}\n\n// try..catchå¤ç\nfunction getData() {\n    return new Promise((resolve, reject) => {\n        setTimeout(() => {\n            reject(new Error('error'))\n        }, 1000)\n    })\n}\nasync function fn() {\n    try {\n        let res = await getData()\n        console.log(res)\n    } catch (err) {\n        console.log(err) // Error: error\n    }\n    console.log('ç»§ç»­æ§è¡') // ä¼è¾åº\n}\n\nfn()\n\n\nç¬¬ä¸ç§æåµæ¯æåºéè¯¯ä¸ä¸ä¼ç»§ç»­æ§è¡ï¼ç¬¬äºç§æåµæ¯æå°éè¯¯ä¼ç»§ç»­æ§è¡\n\n\n# å®ä»»å¡ï¼å¾®ä»»å¡ï¼äºä»¶å¾ªç¯\n\nå®ä»»å¡(macrotask)ï¼ï¼\n\nscript(æ´ä½ä»£ç )ãsetTimeoutãsetIntervalãUI æ¸²æã I/OãpostMessageã MessageChannelãsetImmediate(Node.js ç¯å¢)\n\nå¾®ä»»å¡(microtask)ï¼\n\nPromiseã MutaionObserverãprocess.nextTick(Node.jsç¯å¢\n\näºä»¶å¾ªç¯(Event Loop): æä¸»çº¿ç¨éå¤ä»ä»»å¡éåä¸­åä»»å¡ãæ§è¡çè¿ç¨\n\n * ä¸å¼å§æ´ä¸ªèæ¬ä½ä¸ºä¸ä¸ªå®ä»»å¡æ§è¡\n * æ§è¡è¿ç¨ä¸­åæ­¥ä»£ç ç´æ¥æ§è¡ï¼å®ä»»å¡è¿å¥å®ä»»å¡éåï¼å¾®ä»»å¡è¿å¥å¾®ä»»å¡éå\n * å½åå®ä»»å¡æ§è¡å®åºéï¼æ£æ¥å¾®ä»»å¡åè¡¨ï¼æåä¾æ¬¡æ§è¡ï¼ç´å°å¨é¨æ§è¡å®\n * æ§è¡æµè§å¨UIçº¿ç¨çæ¸²æå·¥ä½\n * æ£æ¥æ¯å¦æWeb Workerä»»å¡ï¼æåæ§è¡\n * æ§è¡å®æ¬è½®çå®ä»»å¡ï¼åå°2ï¼ä¾æ­¤å¾ªç¯ï¼ç´å°å®ä»»å¡åå¾®ä»»å¡éåé½ä¸ºç©º\n\nå¾®ä»»å¡åæ¬ï¼MutationObserverãPromise.then()æreject()ãPromiseä¸ºåºç¡å¼åçå¶å®ææ¯ï¼æ¯å¦fetch APIãV8çåå¾åæ¶è¿ç¨ãNodeç¬æçprocess.nextTickã\n\nå®ä»»å¡åæ¬ï¼scriptãscript ãsetTimeoutãsetInterval ãsetImmediate ãI/O ãUI renderingã\n\næ³¨æâ ï¸ï¼å¨ææä»»å¡å¼å§çæ¶åï¼ç±äºå®ä»»å¡ä¸­åæ¬äºscriptï¼æä»¥æµè§å¨ä¼åæ§è¡ä¸ä¸ªå®ä»»å¡ï¼å¨è¿ä¸ªè¿ç¨ä¸­ä½ çå°çå»¶è¿ä»»å¡(ä¾å¦setTimeout)å°è¢«æ¾å°ä¸ä¸è½®å®ä»»å¡ä¸­æ¥æ§è¡ã\n\n * å¾ç¤º\n\n\n# é¢è¯é¢ç²¾é\n\nconsole.log('script start');\nsetTimeout(function() {\n  console.log('setTimeout');\n}, 0);\nPromise.resolve().then(function() {\n  console.log('promise1');\n}).then(function() {\n  console.log('promise2');\n});\nconsole.log('script end');\n\n//script start\n//script end\n//promise1\n//promise2\n//setTimeout\n\n\nasync function async1(){\n    console.log('async1 start')  //2\n    await async2()               \n    console.log('async1 end')    //6 æ¾å¥äºå¾®éå  \n}                                //    ç¸å½äºasync2.then(()=>{console.log('async1 end')})\nasync function async2(){\n    console.log('async2')       //3\n}\nconsole.log('script start')     //1\nsetTimeout(function(){\n    console.log('setTimeout')   //8\n},0)\nasync1()\nnew Promise(function(resolve){\n    console.log('promise1')     //4\n    resolve()\n}).then(function(){\n    console.log('promise2')    //7   æ¾å¥äºå¾®éå\n})\nconsole.log('script end')     //5\n\n//awaitæ¯ä¸ä¸ªè®©åºçº¿ç¨çæ å¿ãawaitåé¢çè¡¨è¾¾å¼ä¼åæ§è¡ä¸éï¼å°await åé¢çä»£ç å å¥å°microtaskä¸­ï¼ç¶åå°±ä¼è·³åºæ´ä¸ªasyncå½æ°æ¥æ§è¡åé¢çä»£ç \nscript start\nasync1 start\nasync2\npromise1\nscript end\nasync1 end\npromise2\nsetTimeout\n\n\n> 1.é¦åï¼äºä»¶å¾ªç¯ä»å®ä»»å¡(macrotask)éåå¼å§ï¼è¿ä¸ªæ¶åï¼å®ä»»å¡éåä¸­ï¼åªæä¸ä¸ªscript(æ´ä½ä»£ç )ä»»å¡ï¼å½éå°ä»»å¡æº(task source)æ¶ï¼åä¼åååä»»å¡å°å¯¹åºçä»»å¡éåä¸­å»ã\n\n> 2.ç¶åæä»¬çå°é¦åå®ä¹äºä¸¤ä¸ªasyncå½æ°ï¼æ¥çå¾ä¸çï¼ç¶åéå°äº console è¯­å¥ï¼ç´æ¥è¾åº script startãè¾åºä¹åï¼script ä»»å¡ç»§ç»­å¾ä¸æ§è¡ï¼éå° setTimeoutï¼å¶ä½ä¸ºä¸ä¸ªå®ä»»å¡æºï¼åä¼åå°å¶ä»»å¡ååå°å¯¹åºçéåä¸­\n\n> 3.script ä»»å¡ç»§ç»­å¾ä¸æ§è¡ï¼æ§è¡äºasync1()å½æ°ï¼åé¢è®²è¿asyncå½æ°ä¸­å¨awaitä¹åçä»£ç æ¯ç«å³æ§è¡çï¼æä»¥ä¼ç«å³è¾åºasync1 startã éå°äºawaitæ¶ï¼ä¼å°awaitåé¢çè¡¨è¾¾å¼æ§è¡ä¸éï¼æä»¥å°±ç´§æ¥çè¾åºasync2ï¼ç¶åå°awaitåé¢çä»£ç ä¹å°±æ¯console.log('async1 end')å å¥å°microtaskä¸­çPromiseéåä¸­ï¼æ¥çè·³åºasync1å½æ°æ¥æ§è¡åé¢çä»£ç \n\n> 4.scriptä»»å¡ç»§ç»­å¾ä¸æ§è¡ï¼éå°Promiseå®ä¾ãç±äºPromiseä¸­çå½æ°æ¯ç«å³æ§è¡çï¼èåç»­ç .then åä¼è¢«ååå° microtask ç Promise éåä¸­å»ãæä»¥ä¼åè¾åº promise1ï¼ç¶åæ§è¡ resolveï¼å° promise2 åéå°å¯¹åºéå\n\n> 5.scriptä»»å¡ç»§ç»­å¾ä¸æ§è¡ï¼æååªæä¸å¥è¾åºäº script endï¼è³æ­¤ï¼å¨å±ä»»å¡å°±æ§è¡å®æ¯äºã æ ¹æ®ä¸è¿°ï¼æ¯æ¬¡æ§è¡å®ä¸ä¸ªå®ä»»å¡ä¹åï¼ä¼å»æ£æ¥æ¯å¦å­å¨ Microtasksï¼å¦ææï¼åæ§è¡ Microtasks ç´è³æ¸ç©º Microtask Queueã å èå¨scriptä»»å¡æ§è¡å®æ¯ä¹åï¼å¼å§æ¥æ¾æ¸ç©ºå¾®ä»»å¡éåãæ­¤æ¶ï¼å¾®ä»»å¡ä¸­ï¼ Promise éåæçä¸¤ä¸ªä»»å¡async1 endåpromise2ï¼å æ­¤æååé¡ºåºè¾åº async1 endï¼promise2ãå½ææç Microtasks æ§è¡å®æ¯ä¹åï¼è¡¨ç¤ºç¬¬ä¸è½®çå¾ªç¯å°±ç»æäº\n\n> 6.ç¬¬äºè½®å¾ªç¯ä¾æ§ä»å®ä»»å¡éåå¼å§ãæ­¤æ¶å®ä»»å¡ä¸­åªæä¸ä¸ª setTimeoutï¼ååºç´æ¥è¾åºå³å¯ï¼è³æ­¤æ´ä¸ªæµç¨ç»æ\n\n// ä¸é¢åå½¢\n// æ¬æ¥æ¯æ async1 end å å¥å¾®ä»»å¡éåï¼ç»æ async åè¿åäºä¸ä¸ª promise ï¼å å¥å¾®ä»»å¡éåçå°±æ¯è¿ä¸ª promiseï¼æ§è¡å® asyncï¼æåææ§è¡ async1 end\n// è§£æï¼https://zhuanlan.zhihu.com/p/450906325\nasync function async1() {\n    console.log('async1 start')\n    await async2() \n    console.log('async1 end')\n}\nasync function async2() {\n    console.log('async2 start')\n    return new Promise((resolve, reject) => {\n        resolve()\n        console.log('async2 promise')\n    })\n}\nconsole.log('script start')\nsetTimeout(function() {\n    console.log('setTimeout')\n}, 0)\nasync1()\nnew Promise(function(resolve) {\n    console.log('promise1')\n    resolve()\n}).then(function() {\n    console.log('promise2')\n}).then(function() {\n    console.log('promise3')\n})\nconsole.log('script end')\n\n/**\nscript start\nasync1 start\nasync2 start\nasync2 promise\npromise1\nscript end\npromise2\npromise3\nasync1 end     æ³¨æè¿é async æ¾ç¤ºè¿åäº promise ï¼æåæ§è¡\nsetTimeout\n*/\n\n\né¢è¯å®é®ï¼\n\nsetTimeoutï¼()=>{\n    console.log(\"1\")\n}, 0ï¼;\nnew Promiseï¼resolve => {\n    resolve()\n}ï¼.then(() => {\n\tconsole.log(\"2\")\n})\nconsole.log(\"3\")\n//ä¸ºä»ä¹ä½ è¯´åè¿è¡å®ä»»å¡ï¼ä¸ç´æ¥è¿è¡setTimeoutå¢ï¼\n//å ä¸ºåé¢å¦ææconsole.log(\"3\")æ¶ï¼è¯å®ä¼åæ§è¡3ï¼setTimeoutæ¯æ¾å°å®ä»»å¡éåéçã\n\nPromise.resolve(1).then(2).then(Promise.resolve(3)).then(console.log) // 1\n// thenéé¢åªè¦ä¸æ¯å½æ°å°±ä¸ä¼ä¼ éï¼2æ¯å¼ï¼Promise.resolve(3)æ¯Promiseå¯¹è±¡\n// console.log æ¯å½æ°\n\n\n\n# æåä»£ç \n\n * Promise\n\n * promise.all\n\n * promise.race\n\n * promise.resolve\n\n * Promise å°è£ AJAX\n\n * æåä»£ç æ´ç\n\n\n# çä»£ç è¯´ç­æ¡\n\n// åä»£ç \nsetTimeout(function () {\n  var a = 'hello '\n  setTimeout(function () {\n    var b = 'lagou '\n    setTimeout(function () {\n      var c = 'I love you'\n      console.log(a + b + c)\n    }, 1000)\n  }, 1000)\n}, 1000)\n\n// æ¹è¿ï¼é«é¶å½æ° + promiseé¾å¼è°ç¨\nfunction f (str) {\n  return function (param) {\n    return new Promise((resolve,reject) => {\n      setTimeout(() => resolve(param += str), 1000)\n    })\n  }\n}\n\nvar p1 = f('hello ')\nvar p2 = f('lagou ')\nvar p3 = f('I love you')\n\np1('').then((res) => p2(res)).then((res) => p3(res)).then((res) => console.log(res))\np1('').then(p2).then(p3).then(console.log)\n\n\n\nçº¢ç¯3ç§äº®ä¸æ¬¡ï¼ç»¿ç¯1ç§äº®ä¸æ¬¡ï¼é»ç¯2ç§äº®ä¸æ¬¡ï¼å¦ä½è®©ä¸ä¸ªç¯ä¸æ­äº¤æ¿éå¤äº®ç¯ï¼ï¼ç¨Promiseå®ç°ï¼ä¸ä¸ªäº®ç¯å½æ°å·²ç»å­å¨ï¼\n\nfunction red() {\n    console.log('red')\n}\nfunction green() {\n    console.log('green')\n}\nfunction yellow() {\n    console.log('yellow')\n}\n\nfunction light(time, fn) {\n    return new Promise(function (resolve, reject) {\n        setTimeout(function () {\n            fn()\n            resolve()\n        }, time)\n    })\n}\n\nfunction step() {\n    Promise.resolve()\n    .then(() => light(3000, red))\n    .then(() => light(2000, green))\n    .then(() => light(1000, yellow))\n    .then(() => step())\n}\n\nstep()\n\n\n * åªæè¿åpromsieå¯¹è±¡åæä¼é¾å¼è°ç¨\n\nPromise.resolve().then(res => {\n   console.log('1')\n   new Promise((resolve, reject) => { \n        setTimeout(() => {\n            console.log('2')\n            resolve('newPromise')\n        }, 2000);\n    }).then(res =>{\n        console.log('3')\n        return \"newPromise1\"\n    })\n}).then(res=>{\n    console.log('4', res)\n})\n// 1 4 undefined  2 3\n\n\nPromise.resolve().then(res => {\n   console.log('1')\n   return new Promise((resolve, reject) => { \n        setTimeout(() => {\n            console.log('2')\n            resolve('newPromise')\n        }, 2000);\n    }).then(res =>{\n        console.log('3')\n        return \"newPromise1\"\n    })\n}).then(res=>{\n    console.log('4', res)\n})\n// 1 2  3 4 newPromise1\n\n\nconst promise = new Promise((resolve, reject) => {\n    console.log(1);\n    resolve();\n    console.log(2);\n    reject('error');\n})\npromise.then(() => {\n    console.log(3);\n}).catch(e => console.log(e))\nconsole.log(4);\n\n// 1 2 4 3\n// promiseæé å½æ°çä»£ç ä¼ç«å³æ§è¡ï¼thenæèrejectéé¢çä»£ç ä¼æ¾å¥å¼æ­¥å¾®ä»»å¡éåï¼å¨å®ä»»å¡ç»æåä¼ç«å³æ§è¡ãè§åäºï¼promiseçç¶æä¸æ¦åæ´ä¸ºæåæèå¤±è´¥ï¼åä¸ä¼åæ¬¡æ¹åï¼æä»¥æ§è¡ç»æä¸ºï¼1,2,4,3ãècatchéé¢çå½æ°ä¸ä¼åæ§è¡ã\n\n\nconst promise = new Promise((resolve, reject) => {\n        setTimeout(() => {\n             console.log('once')\n             resolve('success')\n        }, 1000)\n })\npromise.then((res) => {\n       console.log(res)\n})\npromise.then((res) => {\n     console.log(res)\n})\n// å°è¿ä¸ç§æå°:once,success,success\n\n\nconst p1 = () => (new Promise((resolve, reject) => {\n\t \tconsole.log(1);\n \t\tlet p2 = new Promise((resolve, reject) => {\n        console.log(2);\n        const timeOut1 = setTimeout(() => { // timeout1 å å¥å®ä»»å¡éå\n          console.log(3);\n          resolve(4);\n        }, 0)\n        resolve(5); // p2.thenå å¥å¾®ä»»å¡éå\n \t\t});\n\t\tresolve(6); // p1.thenå å¥å¾®ä»»å¡éå\n    p2.then((arg) => {\n  \t\t\tconsole.log(arg);\n \t\t});\n}));\n\nconst timeOut2 = setTimeout(() => { // timeout2 å å¥å®ä»»å¡éå\n \t\tconsole.log(8);\n \t\tconst p3 = new Promise(reject => {\n  \t\treject(9);\n \t\t}).then(res => {\n  \t\tconsole.log(res)\n \t\t})\n}, 0)\n\n\np1().then((arg) => {\n \t\tconsole.log(arg);\n});\n\nconsole.log(10);\n\n// 1,2,10,5,6,8,9,3\n\n\n> é¦åæ§è¡ script ä»£ç åï¼æä»¬æ¥åæä¸ä¸é½åäºä»ä¹ï¼\n> \n>  1. å®ä¹äº p1 å½æ°ï¼å®ä¹çæ¶åp1æ²¡ææ§è¡ï¼æä»¥è¿æ¶ååé¨å®ç°åä¸ç\n>  2. æ§è¡äº timeout2 å½æ°ï¼è¿åå¼ï¼æ¯ä¸ä¸ªæ°å¼ï¼èµå¼ç» timeout2ï¼timeout2å å¥äºå®ä»»å¡éå\n>  3. æ§è¡ p1ï¼å®ä¹å³æ§è¡çæè¾åº 1ï¼2ï¼p2.thenï¼p1.thenå å¥å¾®ä»»å¡éåï¼timeout1å å¥å®ä»»å¡éå\n>  4. è¾åº10ï¼æ§è¡å® script å®ä»»å¡åï¼æ¸ç©ºå¾®ä»»å¡éåï¼p2.then => 5ï¼p1.then => 6\n>  5. æ¾åºå®ä»»å¡ï¼é¦åæ§è¡ timeout2ï¼è¾åº 8 , reject åªæ¯å½¢åèµ·åå­å®éä¸è¿æ¯ resolveï¼p3.thenå å¥å¾®éå\n>  6. Timeout2 å®ä»»å¡æ§è¡ç»ææ¸ç©ºå¾®ä»»å¡éåï¼è¾åº9ï¼ç¶ååæ§è¡å®ä»»å¡ timeout1,è¾åº3ï¼æ­¤æ¶resolve(4)ä¸ä¼æ§è¡ï¼å ä¸ºp2ç¶æå·²ç»æä¸º fullfilled\n\nPromise.resolve(1)\n.then(2)\n.then(Promise.resolve(3))\n.then(console.log)\n\n// Promise.resolve(1)ä¼è¿åä¸ä¸ªpromiseå¯¹è±¡å¹¶ä¸ä¼å°1å½åthençåæ°ãè.then æè .catch çåæ°æææ¯å½æ°ï¼ä¼ å¥éå½æ°åä¼åçå¼ç©¿éãæä»¥æåä¼è¾åºï¼1ã\n\n\nPromise.resolve(1)\n.then((x)=> x + 1)\n.then((x)=> { throw new Error('My Error') })\n.catch(()=>1)\n.then((x)=>x + 1)\n.then((x)=>console.log(x))\n.catch(console.error)\n\n// å ä¸ºthen()åcatch()åè¿åäºä¸ä¸ªpromiseï¼å æ­¤ï¼åç»­è°ç¨å¯ä»¥ä¸²èèµ·æ¥ã\n// catch å¶å®æ¯ then(undefined, () => {}) çè¯­æ³ç³ï¼å¦ä¸ï¼\np.catch(err => {\n  console.log(\"catch \" + err); // catch error\n});\n\n// ç­åäº\np.then(undefined, err => {\n  console.log(\"catch \" + err); // catch error\n});\n\n\n\n# å½ async/await éå° forEach\n\nå¯ä»¥æä¸é¢ä»£ç å¤å¶å°æµè§å¨æ§å¶å°æ§è¡ï¼\n\n// éå dataListï¼åå«è°ç¨å¼æ­¥è¯·æ±\nfunction fetchData(d) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n        resolve(d)\n    }, 1000)\n  })\n}\n\nconst dataList = [1, 2, 3];\ndataList.forEach(async d => {\n  const res = await fetchData(d);\n  console.log(res);\n});\n\n// ç»æï¼1ç§ååæ¶è¾åº 1ï¼2ï¼3\n\n\n> æ­¤å¤æä»¬æå¾çæ¯æ¯éä¸ç§è¾åº 1ï¼2ï¼3ï¼ä½æ¯ forEach å´ä¸è½å®ç°ï¼è³äºä¸ºä»ä¹æä»¬å¯ä»¥çä¸ forEach å æ®éç for å¾ªç¯æä»ä¹åºå«ã\n\n// for å¾ªç¯\nfor (let i = 0; i < dataList.length; i++) {\n  const res = await fetchData(dataList[i]);\n  console.log(res)\n}\n\n// ä¸é¢ forEach çåæ³ç¸å½äº\nconst fn = async d => {\n  const res = await fetchData(d);\n  console.log(res);\n}\nfor (let i = 0; i < dataList.length; i++) {\n  fn(dataList[i], i);\n}\n\n\n> ç¬¬ä¸ä¸ª for å¾ªç¯ç fetchData è¦ await è¿ååæç»§ç»­æ§è¡ï¼æä»¥æ¯é¡ºåºæ§è¡ãèç¬¬äºä¸ªç fn ä¸ä¼é»å¡å¾ªç¯ï¼å ä¸ºè°ç¨çæ¯ä¼ å¥ forEach çåè°å½æ°ï¼å¹¶æ²¡æ await å° fetchData çæ§è¡ã\n> \n> æ»ç»ä¸è§£å³åæ³ï¼\n\nfunction fetchData(d) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n        resolve(d)\n    }, 1000)\n  })\n}\nconst dataList = [1, 2, 3];\n\n// 1. æ¹ç¨ for å¾ªç¯\nfor (let i = 0; i < dataList.length; i++) {\n  const res = await fetchData(dataList[i]);\n  console.log(res)\n}\n\n// 2. æ¹ç¨ for...of\nfor (let d of dataList) {\n  const res = await fetchData(d);\n  console.log(res)\n}\n\n// 3. Promise.all\nconst promiseList = [];\ndataList.forEach(d => {\n    promiseList.push(fetchData(d)); // æ­¤å¤å·²ç»å¼å§æ§è¡äº\n});\n\nPromise.all(promiseList).then(res => {\n  console.log(res) // [1, 2, 3]\n})\n\n// 4. for await...of : åæ¶è¾åº 1ï¼2ï¼3\nconst promiseList = [];\ndataList.forEach(d => {\n    promiseList.push(fetchData(d)); // æ­¤å¤å·²ç»å¼å§æ§è¡äº\n});\n\nfor await (p of promiseList) {\n  console.log(p)\n}\n\n\n> å¶å®ä¸ä»ä»æ¯ forEachï¼å ä¹æåè°çéåæ¹æ³ï¼forEachãmapãfilterãreduceãsomeãeveryãfindç­ï¼ä½¿ç¨awaité½æ¯ä¸çæçã\n\n\n# æµè§å¨äºä»¶å¾ªç¯ånodeäºä»¶å¾ªç¯çåºå«\n\nNodeçäºä»¶å¾ªç¯æ¯libuvå®ç°çï¼å¤§ä½çtaskï¼å®ä»»å¡ï¼æ§è¡é¡ºåºæ¯è¿æ ·çï¼å¾ç¤º\n\n * timerså®æ¶å¨ï¼æ¬é¶æ®µæ§è¡å·²ç»å®æç setTimeout() å setInterval() çåè°å½æ°ã\n * pending callbackså¾å®åè°ï¼æ§è¡å»¶è¿å°ä¸ä¸ä¸ªå¾ªç¯è¿­ä»£ç I/O åè°ã\n * idle, prepareï¼ä»ç³»ç»åé¨ä½¿ç¨ã\n * poll è½®è¯¢ï¼æ£ç´¢æ°ç I/O äºä»¶;æ§è¡ä¸ I/O ç¸å³çåè°ï¼å ä¹æææåµä¸ï¼é¤äºå³é­çåè°å½æ°ï¼å®ä»¬ç±è®¡æ¶å¨å setImmediate() æå®çä¹å¤ï¼ï¼å¶ä½æåµ node å°å¨æ­¤å¤é»å¡ã\n * check æ£æµï¼setImmediate() åè°å½æ°å¨è¿éæ§è¡ã\n * close callbacks å³é­çåè°å½æ°ï¼ä¸äºåå¤å³é­çåè°å½æ°ï¼å¦ï¼socket.on('close', ...)ã\n\n----------------------------------------\n\n * Node10ä»¥åï¼microtask å¨äºä»¶å¾ªç¯çåä¸ªé¶æ®µä¹é´æ§è¡ï¼Node11ä¹ååæµè§å¨è¡ä¸ºç»ä¸äºï¼é½æ¯æ¯æ§è¡ä¸ä¸ªå®ä»»å¡å°±æå¾®ä»»å¡éåæ¸ç©ºã\n * æµè§å¨ç«¯ï¼microtask å¨äºä»¶å¾ªç¯ç macrotask æ§è¡å®ä¹åæ§è¡\n\nfunction test () {\n   console.log('start')\n    setTimeout(() => {\n        console.log('children2')\n        Promise.resolve().then(() => {console.log('children2-1')})\n    }, 0)\n    setTimeout(() => {\n        console.log('children3')\n        Promise.resolve().then(() => {console.log('children3-1')})\n    }, 0)\n    Promise.resolve().then(() => {console.log('children1')})\n    console.log('end')\n}\n\ntest()\n\n// æµè§å¨ç«¯ å node11ä¹å\n// start\n// end\n// children1\n// children2\n// children2-1\n// children3\n// children3-1\n\n// node10ä¹å\n// start\n// end\n// children2\n// children3\n// children2-1\n// children3-1\n",normalizedContent:"# promise\n\n * promise\n * promiseç¸å³æ¹æ³\n * generator\n * asyncåawait\n * å®ä»»å¡ï¼å¾®ä»»å¡ï¼äºä»¶å¾ªç¯\n * é¢è¯é¢ç²¾é\n * æµè§å¨ä¸nodeçäºä»¶å¾ªç¯\n\n\n# promise\n\né¦åæ³ä¸ä¸ï¼æä¹è§å®å½æ°çæ§è¡é¡ºåºï¼éè¿åè°çæ¹å¼ï¼\n\nfunction a(callback){\n    console.log(\"i am a\");\n    callback();  //è°ç¨è¯¥å½æ°\n}\n\nfunction b(){\n   console.log(\"i am b\");\n}\n\na(b);//åæ§è¡aåæ§è¡bï¼å½éè¦æ§è¡abcdefgæ¶ï¼å°±ä¼é æåè°å°ç±\n\n\nåè°å°ç±âä¹å«âåè°éå­å¡âï¼æä»¬å¹³æ¶åä»£ç çæ¶å jså¦æå¼æ­¥ åè°æ¯ä¸å¯é¿åçÂ  ä¾å¦ ajaxä¸æ­çè¿è¡å¼æ­¥è¯·æ±æ°æ® åè°æ¹æ³éè¿è¦å¯¹æ°æ®è¿è¡å¤çï¼ç»§ç»­åè°â¦å½¢æåè°å°ç±Â  è¿ä¼ä½¿å¾æä»¬çä»£ç å¯è¯»æ§åå·®ï¼åºç°é®é¢ ä¸å¥½è°è¯ ä¹ä¼å¯¼è´æ§è½ä¸é\n\npromiseï¼åæ­¥ä»£ç è§£å³å¼æ­¥ç¼ç¨\n\n * æ¯ä¸ä¸ªæé å½æ°ï¼ç¨æ¥ä¼ éå¼æ­¥æä½æ¶æ¯ï¼é¾å¼è°ç¨ï¼é¿åå±å±åµå¥çåè°å½æ°ã\n * promiseæ¥æ¶ä¸¤ä¸ªå½æ°åæ°ï¼resolveårejectï¼åå«è¡¨ç¤ºå¼æ­¥æä½æ§è¡æååçåè°åå¤±è´¥çåè°\n * promiseå¨å£°æçæ¶åå°±å·²ç»æ§è¡äº\n * æä¸ç§ç¶æï¼pendingè¿è¡ä¸­ãresolveå·²å®æãrejectedå·²å¤±è´¥,\n * è¿äºç¶æåªè½ç±pending -> resolved, pending -> rejected,ä¸æ¦promiseå®ä¾åçæ¹åï¼å°±ä¸è½å¨åäºï¼ä»»ä½æ¶åé½è½å¾å°è¿ä¸ªç»æ\n * promiseå¯¹è±¡çthenæ¹æ³ä¼è¿åä¸ä¸ªå¨æ°çpromiseå¯¹è±¡\n * åé¢thenæ¹æ³ä¸­çåè°å½æ°çè¿åå¼ä¼ä½ä¸ºåé¢thenæ¹æ³åè°çåæ°\n * å¦æåè°ä¸­è¿åçæ¯promiseï¼é£åé¢çthenæ¹æ³çåè°ä¼ç­å¾å®çç»æ\n * promise.reslove()å¯ä»¥å¿«éåå»ºä¸ä¸ªpromiseå¯¹è±¡\n\nconsole.log(1)\nsettimeout(() => console.log(5))\nnew promise(function(resolve,reject){\n    console.log(2) //ç«å»æ§è¡\n    resolve()      //promise.thenæ¯å¾®ä»»å¡\n}).then(function(){\n    console.log(3)\n})\nconsole.log(4)  //è¾åº1,2,4,3,5\n\n//resolveå¯ä»¥æ¥æ¶åæ°\nnew promise(function(resolve,reject){\n    resolve(\"2\")\n}).then(function(data){\n    console.log(data)\n})\n\n\n// æ¿ç¹å¤åä¸ºä¾ï¼ç¹å¤ååå¯è½ä¼æåæ´¾éä¹å¯è½ä¼å»¶è¿ï¼æ è®ºå¦ä½é½ä¼æä¸ªç»æ\nfuntion dianwaimai(){\n    return new promise((reslove,reject) => {\n        let result = cooking()\n        if (result===\"åå¥½äº\") reslove(\"æ­£å¨æ´¾é\")\n        else reject(\"è¿æ²¡åå¥½\")\n    })\n}\nfunction cooking(){\n    return math.random() > 0.5 ? 'èç§å¥½äº' : 'èç§ç³äº'\n}\n\n//æ§è¡\ndianwaimai().then(res => console.log(res)).catch(res => console.log(res))\n\n\n\n# promiseéææ¹æ³\n\n * promise.reslove(value)ï¼ç¸å½äºnew promise(resolve => resolve(value)),å¯¹åæ°é½åäºåç§å¤æ­\n * promise.reject\n\nè¿ä¸¤ç§æ¹æ³åä¼åå»ºpromiseå¯¹è±¡\n\npromise.resolve('foo')\n\t.then( value => console.log(value) )\n// foo\n\npromise.reject(new error('rejected'))\n\t.catch(err => console.log(err))\n// error: rejected\n//    at <anonymous>:1:16\n\n\npromise.resolveæ¹æ³çåæ°åæåç§æåµã\n\n1ï¼åæ°æ¯ä¸ä¸ª promise å®ä¾\n\nå¦æåæ°æ¯ promise å®ä¾ï¼é£ä¹promise.resolveå°ä¸åä»»ä½ä¿®æ¹ãåå°ä¸å¨å°è¿åè¿ä¸ªå®ä¾ã\n\n2ï¼åæ°æ¯ä¸ä¸ªthenableå¯¹è±¡\n\nthenableå¯¹è±¡æçæ¯å·æthenæ¹æ³çå¯¹è±¡ï¼æ¯å¦ä¸é¢è¿ä¸ªå¯¹è±¡ã\n\nlet thenable = {\n  then: function(resolve, reject) {\n    resolve(42);\n  }\n};\n\n\npromise.resolveæ¹æ³ä¼å°è¿ä¸ªå¯¹è±¡è½¬ä¸º promise å¯¹è±¡ï¼ç¶åå°±ç«å³æ§è¡thenableå¯¹è±¡çthenæ¹æ³ã\n\nlet thenable = {\n  then: function(resolve, reject) {\n    resolve(42);\n  }\n};\n\nlet p1 = promise.resolve(thenable);\np1.then(function(value) {\n  console.log(value);  // 42\n});\n\n\nä¸é¢ä»£ç ä¸­ï¼thenableå¯¹è±¡çthenæ¹æ³æ§è¡åï¼å¯¹è±¡p1çç¶æå°±åä¸ºresolvedï¼ä»èç«å³æ§è¡æåé£ä¸ªthenæ¹æ³æå®çåè°å½æ°ï¼è¾åº 42ã\n\n3ï¼åæ°ä¸æ¯å·æthenæ¹æ³çå¯¹è±¡ï¼ææ ¹æ¬å°±ä¸æ¯å¯¹è±¡ã\n\nå¦æåæ°æ¯ä¸ä¸ªåå§å¼ï¼æèæ¯ä¸ä¸ªä¸å·æthenæ¹æ³çå¯¹è±¡ï¼åpromise.resolveæ¹æ³è¿åä¸ä¸ªæ°ç promise å¯¹è±¡ï¼ç¶æä¸ºresolvedã\n\nconst p = promise.resolve('hello');\n\np.then(function (s){\n  console.log(s)\n});\n// hello\n\n\nä¸é¢ä»£ç çæä¸ä¸ªæ°ç promise å¯¹è±¡çå®ä¾pãç±äºå­ç¬¦ä¸²helloä¸å±äºå¼æ­¥æä½ï¼å¤æ­æ¹æ³æ¯å­ç¬¦ä¸²å¯¹è±¡ä¸å·æ then æ¹æ³ï¼ï¼è¿å promise å®ä¾çç¶æä»ä¸çæå°±æ¯resolvedï¼æä»¥åè°å½æ°ä¼ç«å³æ§è¡ãpromise.resolveæ¹æ³çåæ°ï¼ä¼åæ¶ä¼ ç»åè°å½æ°ã\n\n4ï¼ä¸å¸¦æä»»ä½åæ°\n\npromise.resolveæ¹æ³åè®¸è°ç¨æ¶ä¸å¸¦åæ°ï¼ç´æ¥è¿åä¸ä¸ªresolvedç¶æç promise å¯¹è±¡ã\n\næä»¥ï¼å¦æå¸æå¾å°ä¸ä¸ª promise å¯¹è±¡ï¼æ¯è¾æ¹ä¾¿çæ¹æ³å°±æ¯ç´æ¥è°ç¨promise.resolveæ¹æ³ã\n\nconst p = promise.resolve();\n\np.then(function () {\n  // ...\n});\n\n\n\n# promise.then è¿åå¼\n\npromise.thenæ¹æ³çè¿åå¼é®é¢\n\nvar p1 = promise.resolve(42)\np1.then((value) => {\n  //ç¬¬ä¸ç§æåµï¼è¿åä¸ä¸ªpromise\n  return new promise(function(resolve,rejected){\n    resolve(value + 1)\n  })\n\n  //ç¬¬äºç§æåµï¼è¿åä¸ä¸ªå¼\n  return value + 2;\n\n  //ç¬¬ä¸ç§æåµï¼æ°å»ºä¸ä¸ªpromiseï¼ä½¿ç¨resloveè¿åå¼\n  const p2 = new promise(function(resolve,rejected){\n    resolve(value + 3)\n  })\n\n  //ç¬¬åç§æåµï¼æ°å»ºä¸ä¸ªpromiseï¼ä½¿ç¨returnè¿åå¼\n  const p2 = new promise(function(resolve,rejected){\n    return(value + 4)\n  })\n\n  //ç¬¬äºç§æåµï¼æ²¡æè¿åå¼\n  return undefined\n\n}).then((value) => {\n  console.log(value)\n})\n\n\n> ç¬¬ä¸ç§æåµï¼æ°å»ºpromiseçresolveä¼ åºçå¼å°ä½ä¸ºthenæ¹æ³è¿åçpromiseçresolveçå¼ä¼ éåºï¼consoleå°æå°åº43\n> \n> ç¬¬äºç§æåµï¼returnçå¼å°ä½ä¸ºthenæ¹æ³è¿åçpromiseçresolveçå¼ä¼ éåºï¼consoleå°æå°åº44\n> \n> ç¬¬ä¸ç§æåµï¼è½ç¶æ°å»ºäºpromiseï¼ä½å¯¹äºthenæ¹æ³æ¥è¯´ï¼æ²¡æåå®è¿åçpromiseä¼ éè¿åå¼ï¼consoleå°æå°åºundifined\n> \n> ç¬¬åç§æåµï¼åç¬¬ä¸ç§æåµï¼\n> \n> ç¬¬äºç§æåµï¼thenæ¹æ³æ²¡æè¿åå¼ï¼thenæ¹æ³çpromiseçresolveçå¼å°ä¼ éåºundifinedã\n\nåèæç« å¼ç¯ promise çç¹æ§ï¼\n\n * promiseå¯¹è±¡çthenæ¹æ³ä¼è¿åä¸ä¸ªå¨æ°çpromiseå¯¹è±¡\n * åé¢thenæ¹æ³ä¸­çåè°å½æ°çè¿åå¼ä¼ä½ä¸ºåé¢thenæ¹æ³åè°çåæ°\n\næä»¥ then æ¹æ³ä¸­å¦ææ²¡æè¿åå¼ï¼åæ²¡æç»§ç»­ååä¼ éåæ°ãå¦ææè¿åå¼ï¼ä¸è®ºè¿ä¸ªå¼æ¯ promise è¿æ¯æ®éçå¼ï¼é½ä¼è¢«å¤çæ promiseï¼å·ä½å¯ç promise å®ç°\n\n\n# promiseç¸å³æ¹æ³\n\n 1. promise.all()ï¼ææpromiseåresolveæ¶ï¼è¿åpromiseç»æï¼åªè¦æä¸ä¸ªpromise rejectï¼é£ä¹è¿åçpromiseå°±reject\n 2. promise.allsettled()ï¼è¿åçææçpromiseç»æï¼æ è®ºresolveè¿æ¯reject\n 3. promise.any()ï¼ä»»æä¸ä¸ªpromise resolveï¼è¿åçpromiseåresolveãé¤éææçpromiseårejectï¼åè¿åçpromiseæreject\n 4. promise.race()ï¼ä¸æ¦æä¸ª promise resolveærejectï¼è¿åç promise å°±ä¼resolveærejectãï¼æå¿«çé£ä¸ªpromiseæ è®ºresolveè¿æ¯rejecté½åè¿ä¸ªç»æï¼\n 5. promise.reject()\n 6. promise.resolve()\n 7. promise.prototype.then()\n 8. promise.prototype.catch()\n 9. promise.prototype.finally()ï¼finallyä¸­çé»è¾ç¸å½äºå¨.thenå.catchä¸­åæ§è¡ä¸é\n\n\n# generator\n\n * generator çä¸­æåç§°æ¯çæå¨ï¼\n * éè¿function*æ¥å®ä¹çå½æ°ç§°ä¹ä¸ºâçæå¨å½æ°âï¼generator functionï¼ï¼å®çç¹ç¹æ¯å¯ä»¥ä¸­æ­å½æ°çæ§è¡ï¼æ¯æ¬¡æ§è¡yieldè¯­å¥ä¹åï¼å½æ°å³æåæ§è¡ï¼ç´å°è°ç¨è¿åççæå¨å¯¹è±¡çnext()å½æ°å®æä¼ç»§ç»­æ§è¡ã\n * ä¹å°±æ¯è¯´generator å½æ°æ¯ä¸ä¸ªç¶ææºï¼å°è£äºå¤ä¸ªåé¨ç¶æãæ§è¡ generator å½æ°è¿åä¸ä¸ªéåå¨å¯¹è±¡ï¼ä¸ä¸ªæååé¨ç¶æçæéå¯¹è±¡ï¼ï¼è°ç¨éåå¨å¯¹è±¡çnextæ¹æ³ï¼ä½¿å¾æéç§»åä¸ä¸ä¸ªç¶æã\n\nfunction* say(){\n    for(let i=0;i<10;i++){\n        yield i\n    }\n}\nlet obj = say()//è¿åä¸ä¸ªéåå¨å¯¹è±¡\nobj.next()  //object {value: 0, done: false}\nobj.next()  //object {value: 1, done: false}\nobj.next()  //object {value: 2, done: false}\n...\nobj.next()  //object {value: 9 done: false}\nobj.next()  //object {value: undefined, done: true}\n\n\n\n# for...of ä¸ generator\n\nconst todos = {\n    life: ['åé¥­', 'ç¡è§', 'æè±è±'],\n    learn: ['è¯­æ', 'æ°å­¦', 'å¤è¯­'],\n    work: ['åè¶'],\n\n    [symbol.iterator]: function * () {\n        const all = [...this.life, ...this.learn, ...this.work]\n        for(const item of all) {\n            yield item\n        }\n    }\n}\n\nfor (let item of todos) {\n    console.log(item)\n}\n\n\n\n# asyncåawait\n\nes2017æä¾äºasyncå½æ°ï¼ä½¿å¾å¼æ­¥æä½åå¾æ´å æ¹ä¾¿ãasyncå½æ°å°±æ¯generatorå½æ°çè¯­æ³ç³ã asyncå½æ°å°±æ¯å°generatorå½æ°çæå·ï¼*ï¼æ¿æ¢æasyncï¼å°yieldæ¿æ¢æawaitï¼ä»æ­¤èå·²ã è¿ä¸æ­¥è¯´ï¼asyncå½æ°å®å¨å¯ä»¥çä½å¤ä¸ªå¼æ­¥æä½ï¼åè£æçä¸ä¸ªpromiseå¯¹è±¡ï¼èawaitå½ä»¤å°±æ¯åé¨thenå½ä»¤çè¯­æ³ç³ã\n\n * async å½æ°è¿åçå°±æ¯ä¸ä¸ª promise å¯¹è±¡ï¼ææ¥æ¶çå¼å°±æ¯å½æ° return çå¼\n\n * await æä½ç¬¦ç¨äºç­å¾ä¸ä¸ª promise å¯¹è±¡ãå®åªè½å¨å¼æ­¥å½æ° async function ä¸­ä½¿ç¨ã\n\n * await è¡¨è¾¾å¼ä¼æåå½å async function çæ§è¡ï¼ç­å¾ promise å¤çå®æãè¥ promise æ­£å¸¸å¤ç(fulfilled)ï¼å¶åè°ç resolve å½æ°åæ°ä½ä¸º await è¡¨è¾¾å¼çå¼ï¼ç»§ç»­æ§è¡ async functionã\n\n * è¥ promise å¤çå¼å¸¸(rejected)ï¼await è¡¨è¾¾å¼ä¼æ promise çå¼å¸¸åå æåºã\n\n * å¦å¤ï¼å¦æ await æä½ç¬¦åçè¡¨è¾¾å¼çå¼ä¸æ¯ä¸ä¸ª promiseï¼åè¿åè¯¥å¼æ¬èº«ã\n\nç¸æ¯äºgeneratorçæ¹è¿\n\n * åç½®æ§è¡å¨ãgenerator å½æ°çæ§è¡å¿é¡»ä¾é æ§è¡å¨ï¼è async å½æ°èªå¸¦æ§è¡å¨ï¼æ éæå¨æ§è¡ next() æ¹æ³ã\n\n * æ´å¥½çè¯­ä¹ãasyncåawaitï¼æ¯èµ·æå·åyieldï¼è¯­ä¹æ´æ¸æ¥äºãasyncè¡¨ç¤ºå½æ°éæå¼æ­¥æä½ï¼awaitè¡¨ç¤ºç´§è·å¨åé¢çè¡¨è¾¾å¼éè¦ç­å¾ç»æã\n\n * æ´å¹¿çéç¨æ§ãcoæ¨¡åçº¦å®ï¼yieldå½ä»¤åé¢åªè½æ¯ thunk å½æ°æ promise å¯¹è±¡ï¼èasyncå½æ°çawaitå½ä»¤åé¢ï¼å¯ä»¥æ¯ promise å¯¹è±¡ååå§ç±»åçå¼ï¼æ°å¼ãå­ç¬¦ä¸²åå¸å°å¼ï¼ä½è¿æ¶ä¼èªå¨è½¬æç«å³ resolved ç promise å¯¹è±¡ï¼ã\n\n * è¿åå¼æ¯ promiseãasync å½æ°è¿åå¼æ¯ promise å¯¹è±¡ï¼æ¯ generator å½æ°è¿åç iterator å¯¹è±¡æ¹ä¾¿ï¼å¯ä»¥ç´æ¥ä½¿ç¨ then() æ¹æ³è¿è¡è°ç¨ã\n\n\n# åºæ¬ä½¿ç¨\n\nfunction getdata () {\n    return new promise(resolve => {\n        settimeout(resolve, 1000, 'ç»æ') // å¼æ­¥æ¨¡ææ°æ®è¯·æ±\n    })\n}\n\nasync function asyncfn () {\n    let res = await getdata()\n    console.log(res) // 1sä¹åè¾åº 'ç»æ'\n}\n\n\n\n# awaitåçå¼ä¹å¯ä»¥æ¯æ®éå¼\n\nasync function fn () {\n    return await 123\n}\nfn().then(res => console.log(res)) // 123\n\n\n\n# asyncè¿åä¸ä¸ªpromiseå¯¹è±¡\n\nå½æ²¡åçéè¯¯æ¶ return çå¼ä¼æä¸º then æ¹æ³åè°å½æ°çåæ°ã\n\nèå½æåºéè¯¯æ¶ï¼ä¼å¯¼è´promiseå¯¹è±¡åä¸º reject ç¶æï¼æåºçéè¯¯ä¹ä¼æä¸º catch æ¹æ³åè°å½æ°çåæ°ã\n\nasync function f1(){\n    return 'hello world'\n}\nf1().then(res => {\n  console.log(res)} // hello world\n)\n\nasync function f2() {\n  throw new error('error')\n}\nf2().then(res => {\n    console.log(res)\n}).catch(err => {\n    console.log(err) // error: error\n})\n\n\n\n# åæ¶åå¤ä¸ªè¯·æ±\n\nasync function getabc() {\n  let a = await geta()\n  let b = await getb()\n  let c = await getc()\n  return a + b + c\n}\n\n// æ­£ç¡®å¤ç\nasync function getabc() {\n  let results = await promise.all([geta, getb, getc])\n  return results.reduce((acc, cur) => acc + cur, 0)\n}\n\n\n\n# é¡¶å± await\n\né¡¶å± await åè®¸æä»¬å¨ async å½æ°å¤é¢ä½¿ç¨ await å³é®å­ãå®åè®¸æ¨¡ååå½å¤§åå¼æ­¥å½æ°ï¼éè¿é¡¶å± awaitï¼è¿äº ecmascript æ¨¡åå¯ä»¥ç­å¾èµæºå è½½ãè¿æ ·å¶ä»å¯¼å¥è¿äºæ¨¡åçæ¨¡åå¨æ§è¡ä»£ç ä¹åè¦ç­å¾èµæºå è½½å®åå»æ§è¡ã\n\nç±äº await ä»å¨ async å½æ°ä¸­å¯ç¨ï¼å æ­¤æ¨¡åå¯ä»¥éè¿å°ä»£ç åè£å¨ async å½æ°ä¸­æ¥å¨ä»£ç ä¸­åå« awaitï¼\n\n// a.js\nimport fetch  from \"node-fetch\";\nlet users;\nexport const fetchusers = async () => {\n  const resp = await fetch('https://jsonplaceholder.typicode.com/users');\n  users =  resp.json();\n}\nfetchusers();\nexport { users };\n\n// usingawait.js\nimport {users} from './a.js';\nconsole.log('users:', users); // undefined\nsettimeout(() => {\n  console.log('users:', users);\n}, 100);\n\n\nä¸ä¸ªæ¹æ³æ¯å¯¼åºä¸ä¸ª promiseï¼è®©å¯¼å¥æ¨¡åç¥éæ°æ®å·²ç»åå¤å¥½äºï¼\n\n//a.js\nimport fetch  from \"node-fetch\";\nexport default (async () => {\n  const resp = await fetch('https://jsonplaceholder.typicode.com/users');\n  users = resp.json();\n})();\nexport { users };\n\n//usingawait.js\nimport promise, {users} from './a.js';\npromise.then(() => {\n  settimeout(() => console.log('users:', users), 100); \n});\n\n\nèé¡¶å±awaitå°±å¯ä»¥è§£å³è¿äºé®é¢ï¼\n\n// a.js\nconst resp = await fetch('https://jsonplaceholder.typicode.com/users');\nconst users = resp.json();\nexport { users};\n// usingawait.js\nimport {users} from './a.mjs';\nconsole.log(users);\n\n\n\n# try...catchå¤çéè¯¯\n\nfunction getdata() {\n    return new promise((resolve, reject) => {\n        settimeout(() => {\n            reject(new error('error')) // æ¨¡æåºé\n        }, 1000)\n    })\n}\nasync function fn() {\n    let res = await getdata() // ä¼æåºéè¯¯ï¼ä¸ä¸ä¼åä¸æ§è¡\n    console.log(res) // ä¸ä¼è¾åºä»»ä½\n}\n\n// try..catchå¤ç\nfunction getdata() {\n    return new promise((resolve, reject) => {\n        settimeout(() => {\n            reject(new error('error'))\n        }, 1000)\n    })\n}\nasync function fn() {\n    try {\n        let res = await getdata()\n        console.log(res)\n    } catch (err) {\n        console.log(err) // error: error\n    }\n    console.log('ç»§ç»­æ§è¡') // ä¼è¾åº\n}\n\nfn()\n\n\nç¬¬ä¸ç§æåµæ¯æåºéè¯¯ä¸ä¸ä¼ç»§ç»­æ§è¡ï¼ç¬¬äºç§æåµæ¯æå°éè¯¯ä¼ç»§ç»­æ§è¡\n\n\n# å®ä»»å¡ï¼å¾®ä»»å¡ï¼äºä»¶å¾ªç¯\n\nå®ä»»å¡(macrotask)ï¼ï¼\n\nscript(æ´ä½ä»£ç )ãsettimeoutãsetintervalãui æ¸²æã i/oãpostmessageã messagechannelãsetimmediate(node.js ç¯å¢)\n\nå¾®ä»»å¡(microtask)ï¼\n\npromiseã mutaionobserverãprocess.nexttick(node.jsç¯å¢\n\näºä»¶å¾ªç¯(event loop): æä¸»çº¿ç¨éå¤ä»ä»»å¡éåä¸­åä»»å¡ãæ§è¡çè¿ç¨\n\n * ä¸å¼å§æ´ä¸ªèæ¬ä½ä¸ºä¸ä¸ªå®ä»»å¡æ§è¡\n * æ§è¡è¿ç¨ä¸­åæ­¥ä»£ç ç´æ¥æ§è¡ï¼å®ä»»å¡è¿å¥å®ä»»å¡éåï¼å¾®ä»»å¡è¿å¥å¾®ä»»å¡éå\n * å½åå®ä»»å¡æ§è¡å®åºéï¼æ£æ¥å¾®ä»»å¡åè¡¨ï¼æåä¾æ¬¡æ§è¡ï¼ç´å°å¨é¨æ§è¡å®\n * æ§è¡æµè§å¨uiçº¿ç¨çæ¸²æå·¥ä½\n * æ£æ¥æ¯å¦æweb workerä»»å¡ï¼æåæ§è¡\n * æ§è¡å®æ¬è½®çå®ä»»å¡ï¼åå°2ï¼ä¾æ­¤å¾ªç¯ï¼ç´å°å®ä»»å¡åå¾®ä»»å¡éåé½ä¸ºç©º\n\nå¾®ä»»å¡åæ¬ï¼mutationobserverãpromise.then()æreject()ãpromiseä¸ºåºç¡å¼åçå¶å®ææ¯ï¼æ¯å¦fetch apiãv8çåå¾åæ¶è¿ç¨ãnodeç¬æçprocess.nexttickã\n\nå®ä»»å¡åæ¬ï¼scriptãscript ãsettimeoutãsetinterval ãsetimmediate ãi/o ãui renderingã\n\næ³¨æâ ï¸ï¼å¨ææä»»å¡å¼å§çæ¶åï¼ç±äºå®ä»»å¡ä¸­åæ¬äºscriptï¼æä»¥æµè§å¨ä¼åæ§è¡ä¸ä¸ªå®ä»»å¡ï¼å¨è¿ä¸ªè¿ç¨ä¸­ä½ çå°çå»¶è¿ä»»å¡(ä¾å¦settimeout)å°è¢«æ¾å°ä¸ä¸è½®å®ä»»å¡ä¸­æ¥æ§è¡ã\n\n * å¾ç¤º\n\n\n# é¢è¯é¢ç²¾é\n\nconsole.log('script start');\nsettimeout(function() {\n  console.log('settimeout');\n}, 0);\npromise.resolve().then(function() {\n  console.log('promise1');\n}).then(function() {\n  console.log('promise2');\n});\nconsole.log('script end');\n\n//script start\n//script end\n//promise1\n//promise2\n//settimeout\n\n\nasync function async1(){\n    console.log('async1 start')  //2\n    await async2()               \n    console.log('async1 end')    //6 æ¾å¥äºå¾®éå  \n}                                //    ç¸å½äºasync2.then(()=>{console.log('async1 end')})\nasync function async2(){\n    console.log('async2')       //3\n}\nconsole.log('script start')     //1\nsettimeout(function(){\n    console.log('settimeout')   //8\n},0)\nasync1()\nnew promise(function(resolve){\n    console.log('promise1')     //4\n    resolve()\n}).then(function(){\n    console.log('promise2')    //7   æ¾å¥äºå¾®éå\n})\nconsole.log('script end')     //5\n\n//awaitæ¯ä¸ä¸ªè®©åºçº¿ç¨çæ å¿ãawaitåé¢çè¡¨è¾¾å¼ä¼åæ§è¡ä¸éï¼å°await åé¢çä»£ç å å¥å°microtaskä¸­ï¼ç¶åå°±ä¼è·³åºæ´ä¸ªasyncå½æ°æ¥æ§è¡åé¢çä»£ç \nscript start\nasync1 start\nasync2\npromise1\nscript end\nasync1 end\npromise2\nsettimeout\n\n\n> 1.é¦åï¼äºä»¶å¾ªç¯ä»å®ä»»å¡(macrotask)éåå¼å§ï¼è¿ä¸ªæ¶åï¼å®ä»»å¡éåä¸­ï¼åªæä¸ä¸ªscript(æ´ä½ä»£ç )ä»»å¡ï¼å½éå°ä»»å¡æº(task source)æ¶ï¼åä¼åååä»»å¡å°å¯¹åºçä»»å¡éåä¸­å»ã\n\n> 2.ç¶åæä»¬çå°é¦åå®ä¹äºä¸¤ä¸ªasyncå½æ°ï¼æ¥çå¾ä¸çï¼ç¶åéå°äº console è¯­å¥ï¼ç´æ¥è¾åº script startãè¾åºä¹åï¼script ä»»å¡ç»§ç»­å¾ä¸æ§è¡ï¼éå° settimeoutï¼å¶ä½ä¸ºä¸ä¸ªå®ä»»å¡æºï¼åä¼åå°å¶ä»»å¡ååå°å¯¹åºçéåä¸­\n\n> 3.script ä»»å¡ç»§ç»­å¾ä¸æ§è¡ï¼æ§è¡äºasync1()å½æ°ï¼åé¢è®²è¿asyncå½æ°ä¸­å¨awaitä¹åçä»£ç æ¯ç«å³æ§è¡çï¼æä»¥ä¼ç«å³è¾åºasync1 startã éå°äºawaitæ¶ï¼ä¼å°awaitåé¢çè¡¨è¾¾å¼æ§è¡ä¸éï¼æä»¥å°±ç´§æ¥çè¾åºasync2ï¼ç¶åå°awaitåé¢çä»£ç ä¹å°±æ¯console.log('async1 end')å å¥å°microtaskä¸­çpromiseéåä¸­ï¼æ¥çè·³åºasync1å½æ°æ¥æ§è¡åé¢çä»£ç \n\n> 4.scriptä»»å¡ç»§ç»­å¾ä¸æ§è¡ï¼éå°promiseå®ä¾ãç±äºpromiseä¸­çå½æ°æ¯ç«å³æ§è¡çï¼èåç»­ç .then åä¼è¢«ååå° microtask ç promise éåä¸­å»ãæä»¥ä¼åè¾åº promise1ï¼ç¶åæ§è¡ resolveï¼å° promise2 åéå°å¯¹åºéå\n\n> 5.scriptä»»å¡ç»§ç»­å¾ä¸æ§è¡ï¼æååªæä¸å¥è¾åºäº script endï¼è³æ­¤ï¼å¨å±ä»»å¡å°±æ§è¡å®æ¯äºã æ ¹æ®ä¸è¿°ï¼æ¯æ¬¡æ§è¡å®ä¸ä¸ªå®ä»»å¡ä¹åï¼ä¼å»æ£æ¥æ¯å¦å­å¨ microtasksï¼å¦ææï¼åæ§è¡ microtasks ç´è³æ¸ç©º microtask queueã å èå¨scriptä»»å¡æ§è¡å®æ¯ä¹åï¼å¼å§æ¥æ¾æ¸ç©ºå¾®ä»»å¡éåãæ­¤æ¶ï¼å¾®ä»»å¡ä¸­ï¼ promise éåæçä¸¤ä¸ªä»»å¡async1 endåpromise2ï¼å æ­¤æååé¡ºåºè¾åº async1 endï¼promise2ãå½ææç microtasks æ§è¡å®æ¯ä¹åï¼è¡¨ç¤ºç¬¬ä¸è½®çå¾ªç¯å°±ç»æäº\n\n> 6.ç¬¬äºè½®å¾ªç¯ä¾æ§ä»å®ä»»å¡éåå¼å§ãæ­¤æ¶å®ä»»å¡ä¸­åªæä¸ä¸ª settimeoutï¼ååºç´æ¥è¾åºå³å¯ï¼è³æ­¤æ´ä¸ªæµç¨ç»æ\n\n// ä¸é¢åå½¢\n// æ¬æ¥æ¯æ async1 end å å¥å¾®ä»»å¡éåï¼ç»æ async åè¿åäºä¸ä¸ª promise ï¼å å¥å¾®ä»»å¡éåçå°±æ¯è¿ä¸ª promiseï¼æ§è¡å® asyncï¼æåææ§è¡ async1 end\n// è§£æï¼https://zhuanlan.zhihu.com/p/450906325\nasync function async1() {\n    console.log('async1 start')\n    await async2() \n    console.log('async1 end')\n}\nasync function async2() {\n    console.log('async2 start')\n    return new promise((resolve, reject) => {\n        resolve()\n        console.log('async2 promise')\n    })\n}\nconsole.log('script start')\nsettimeout(function() {\n    console.log('settimeout')\n}, 0)\nasync1()\nnew promise(function(resolve) {\n    console.log('promise1')\n    resolve()\n}).then(function() {\n    console.log('promise2')\n}).then(function() {\n    console.log('promise3')\n})\nconsole.log('script end')\n\n/**\nscript start\nasync1 start\nasync2 start\nasync2 promise\npromise1\nscript end\npromise2\npromise3\nasync1 end     æ³¨æè¿é async æ¾ç¤ºè¿åäº promise ï¼æåæ§è¡\nsettimeout\n*/\n\n\né¢è¯å®é®ï¼\n\nsettimeoutï¼()=>{\n    console.log(\"1\")\n}, 0ï¼;\nnew promiseï¼resolve => {\n    resolve()\n}ï¼.then(() => {\n\tconsole.log(\"2\")\n})\nconsole.log(\"3\")\n//ä¸ºä»ä¹ä½ è¯´åè¿è¡å®ä»»å¡ï¼ä¸ç´æ¥è¿è¡settimeoutå¢ï¼\n//å ä¸ºåé¢å¦ææconsole.log(\"3\")æ¶ï¼è¯å®ä¼åæ§è¡3ï¼settimeoutæ¯æ¾å°å®ä»»å¡éåéçã\n\npromise.resolve(1).then(2).then(promise.resolve(3)).then(console.log) // 1\n// thenéé¢åªè¦ä¸æ¯å½æ°å°±ä¸ä¼ä¼ éï¼2æ¯å¼ï¼promise.resolve(3)æ¯promiseå¯¹è±¡\n// console.log æ¯å½æ°\n\n\n\n# æåä»£ç \n\n * promise\n\n * promise.all\n\n * promise.race\n\n * promise.resolve\n\n * promise å°è£ ajax\n\n * æåä»£ç æ´ç\n\n\n# çä»£ç è¯´ç­æ¡\n\n// åä»£ç \nsettimeout(function () {\n  var a = 'hello '\n  settimeout(function () {\n    var b = 'lagou '\n    settimeout(function () {\n      var c = 'i love you'\n      console.log(a + b + c)\n    }, 1000)\n  }, 1000)\n}, 1000)\n\n// æ¹è¿ï¼é«é¶å½æ° + promiseé¾å¼è°ç¨\nfunction f (str) {\n  return function (param) {\n    return new promise((resolve,reject) => {\n      settimeout(() => resolve(param += str), 1000)\n    })\n  }\n}\n\nvar p1 = f('hello ')\nvar p2 = f('lagou ')\nvar p3 = f('i love you')\n\np1('').then((res) => p2(res)).then((res) => p3(res)).then((res) => console.log(res))\np1('').then(p2).then(p3).then(console.log)\n\n\n\nçº¢ç¯3ç§äº®ä¸æ¬¡ï¼ç»¿ç¯1ç§äº®ä¸æ¬¡ï¼é»ç¯2ç§äº®ä¸æ¬¡ï¼å¦ä½è®©ä¸ä¸ªç¯ä¸æ­äº¤æ¿éå¤äº®ç¯ï¼ï¼ç¨promiseå®ç°ï¼ä¸ä¸ªäº®ç¯å½æ°å·²ç»å­å¨ï¼\n\nfunction red() {\n    console.log('red')\n}\nfunction green() {\n    console.log('green')\n}\nfunction yellow() {\n    console.log('yellow')\n}\n\nfunction light(time, fn) {\n    return new promise(function (resolve, reject) {\n        settimeout(function () {\n            fn()\n            resolve()\n        }, time)\n    })\n}\n\nfunction step() {\n    promise.resolve()\n    .then(() => light(3000, red))\n    .then(() => light(2000, green))\n    .then(() => light(1000, yellow))\n    .then(() => step())\n}\n\nstep()\n\n\n * åªæè¿åpromsieå¯¹è±¡åæä¼é¾å¼è°ç¨\n\npromise.resolve().then(res => {\n   console.log('1')\n   new promise((resolve, reject) => { \n        settimeout(() => {\n            console.log('2')\n            resolve('newpromise')\n        }, 2000);\n    }).then(res =>{\n        console.log('3')\n        return \"newpromise1\"\n    })\n}).then(res=>{\n    console.log('4', res)\n})\n// 1 4 undefined  2 3\n\n\npromise.resolve().then(res => {\n   console.log('1')\n   return new promise((resolve, reject) => { \n        settimeout(() => {\n            console.log('2')\n            resolve('newpromise')\n        }, 2000);\n    }).then(res =>{\n        console.log('3')\n        return \"newpromise1\"\n    })\n}).then(res=>{\n    console.log('4', res)\n})\n// 1 2  3 4 newpromise1\n\n\nconst promise = new promise((resolve, reject) => {\n    console.log(1);\n    resolve();\n    console.log(2);\n    reject('error');\n})\npromise.then(() => {\n    console.log(3);\n}).catch(e => console.log(e))\nconsole.log(4);\n\n// 1 2 4 3\n// promiseæé å½æ°çä»£ç ä¼ç«å³æ§è¡ï¼thenæèrejectéé¢çä»£ç ä¼æ¾å¥å¼æ­¥å¾®ä»»å¡éåï¼å¨å®ä»»å¡ç»æåä¼ç«å³æ§è¡ãè§åäºï¼promiseçç¶æä¸æ¦åæ´ä¸ºæåæèå¤±è´¥ï¼åä¸ä¼åæ¬¡æ¹åï¼æä»¥æ§è¡ç»æä¸ºï¼1,2,4,3ãècatchéé¢çå½æ°ä¸ä¼åæ§è¡ã\n\n\nconst promise = new promise((resolve, reject) => {\n        settimeout(() => {\n             console.log('once')\n             resolve('success')\n        }, 1000)\n })\npromise.then((res) => {\n       console.log(res)\n})\npromise.then((res) => {\n     console.log(res)\n})\n// å°è¿ä¸ç§æå°:once,success,success\n\n\nconst p1 = () => (new promise((resolve, reject) => {\n\t \tconsole.log(1);\n \t\tlet p2 = new promise((resolve, reject) => {\n        console.log(2);\n        const timeout1 = settimeout(() => { // timeout1 å å¥å®ä»»å¡éå\n          console.log(3);\n          resolve(4);\n        }, 0)\n        resolve(5); // p2.thenå å¥å¾®ä»»å¡éå\n \t\t});\n\t\tresolve(6); // p1.thenå å¥å¾®ä»»å¡éå\n    p2.then((arg) => {\n  \t\t\tconsole.log(arg);\n \t\t});\n}));\n\nconst timeout2 = settimeout(() => { // timeout2 å å¥å®ä»»å¡éå\n \t\tconsole.log(8);\n \t\tconst p3 = new promise(reject => {\n  \t\treject(9);\n \t\t}).then(res => {\n  \t\tconsole.log(res)\n \t\t})\n}, 0)\n\n\np1().then((arg) => {\n \t\tconsole.log(arg);\n});\n\nconsole.log(10);\n\n// 1,2,10,5,6,8,9,3\n\n\n> é¦åæ§è¡ script ä»£ç åï¼æä»¬æ¥åæä¸ä¸é½åäºä»ä¹ï¼\n> \n>  1. å®ä¹äº p1 å½æ°ï¼å®ä¹çæ¶åp1æ²¡ææ§è¡ï¼æä»¥è¿æ¶ååé¨å®ç°åä¸ç\n>  2. æ§è¡äº timeout2 å½æ°ï¼è¿åå¼ï¼æ¯ä¸ä¸ªæ°å¼ï¼èµå¼ç» timeout2ï¼timeout2å å¥äºå®ä»»å¡éå\n>  3. æ§è¡ p1ï¼å®ä¹å³æ§è¡çæè¾åº 1ï¼2ï¼p2.thenï¼p1.thenå å¥å¾®ä»»å¡éåï¼timeout1å å¥å®ä»»å¡éå\n>  4. è¾åº10ï¼æ§è¡å® script å®ä»»å¡åï¼æ¸ç©ºå¾®ä»»å¡éåï¼p2.then => 5ï¼p1.then => 6\n>  5. æ¾åºå®ä»»å¡ï¼é¦åæ§è¡ timeout2ï¼è¾åº 8 , reject åªæ¯å½¢åèµ·åå­å®éä¸è¿æ¯ resolveï¼p3.thenå å¥å¾®éå\n>  6. timeout2 å®ä»»å¡æ§è¡ç»ææ¸ç©ºå¾®ä»»å¡éåï¼è¾åº9ï¼ç¶ååæ§è¡å®ä»»å¡ timeout1,è¾åº3ï¼æ­¤æ¶resolve(4)ä¸ä¼æ§è¡ï¼å ä¸ºp2ç¶æå·²ç»æä¸º fullfilled\n\npromise.resolve(1)\n.then(2)\n.then(promise.resolve(3))\n.then(console.log)\n\n// promise.resolve(1)ä¼è¿åä¸ä¸ªpromiseå¯¹è±¡å¹¶ä¸ä¼å°1å½åthençåæ°ãè.then æè .catch çåæ°æææ¯å½æ°ï¼ä¼ å¥éå½æ°åä¼åçå¼ç©¿éãæä»¥æåä¼è¾åºï¼1ã\n\n\npromise.resolve(1)\n.then((x)=> x + 1)\n.then((x)=> { throw new error('my error') })\n.catch(()=>1)\n.then((x)=>x + 1)\n.then((x)=>console.log(x))\n.catch(console.error)\n\n// å ä¸ºthen()åcatch()åè¿åäºä¸ä¸ªpromiseï¼å æ­¤ï¼åç»­è°ç¨å¯ä»¥ä¸²èèµ·æ¥ã\n// catch å¶å®æ¯ then(undefined, () => {}) çè¯­æ³ç³ï¼å¦ä¸ï¼\np.catch(err => {\n  console.log(\"catch \" + err); // catch error\n});\n\n// ç­åäº\np.then(undefined, err => {\n  console.log(\"catch \" + err); // catch error\n});\n\n\n\n# å½ async/await éå° foreach\n\nå¯ä»¥æä¸é¢ä»£ç å¤å¶å°æµè§å¨æ§å¶å°æ§è¡ï¼\n\n// éå datalistï¼åå«è°ç¨å¼æ­¥è¯·æ±\nfunction fetchdata(d) {\n  return new promise((resolve, reject) => {\n    settimeout(() => {\n        resolve(d)\n    }, 1000)\n  })\n}\n\nconst datalist = [1, 2, 3];\ndatalist.foreach(async d => {\n  const res = await fetchdata(d);\n  console.log(res);\n});\n\n// ç»æï¼1ç§ååæ¶è¾åº 1ï¼2ï¼3\n\n\n> æ­¤å¤æä»¬æå¾çæ¯æ¯éä¸ç§è¾åº 1ï¼2ï¼3ï¼ä½æ¯ foreach å´ä¸è½å®ç°ï¼è³äºä¸ºä»ä¹æä»¬å¯ä»¥çä¸ foreach å æ®éç for å¾ªç¯æä»ä¹åºå«ã\n\n// for å¾ªç¯\nfor (let i = 0; i < datalist.length; i++) {\n  const res = await fetchdata(datalist[i]);\n  console.log(res)\n}\n\n// ä¸é¢ foreach çåæ³ç¸å½äº\nconst fn = async d => {\n  const res = await fetchdata(d);\n  console.log(res);\n}\nfor (let i = 0; i < datalist.length; i++) {\n  fn(datalist[i], i);\n}\n\n\n> ç¬¬ä¸ä¸ª for å¾ªç¯ç fetchdata è¦ await è¿ååæç»§ç»­æ§è¡ï¼æä»¥æ¯é¡ºåºæ§è¡ãèç¬¬äºä¸ªç fn ä¸ä¼é»å¡å¾ªç¯ï¼å ä¸ºè°ç¨çæ¯ä¼ å¥ foreach çåè°å½æ°ï¼å¹¶æ²¡æ await å° fetchdata çæ§è¡ã\n> \n> æ»ç»ä¸è§£å³åæ³ï¼\n\nfunction fetchdata(d) {\n  return new promise((resolve, reject) => {\n    settimeout(() => {\n        resolve(d)\n    }, 1000)\n  })\n}\nconst datalist = [1, 2, 3];\n\n// 1. æ¹ç¨ for å¾ªç¯\nfor (let i = 0; i < datalist.length; i++) {\n  const res = await fetchdata(datalist[i]);\n  console.log(res)\n}\n\n// 2. æ¹ç¨ for...of\nfor (let d of datalist) {\n  const res = await fetchdata(d);\n  console.log(res)\n}\n\n// 3. promise.all\nconst promiselist = [];\ndatalist.foreach(d => {\n    promiselist.push(fetchdata(d)); // æ­¤å¤å·²ç»å¼å§æ§è¡äº\n});\n\npromise.all(promiselist).then(res => {\n  console.log(res) // [1, 2, 3]\n})\n\n// 4. for await...of : åæ¶è¾åº 1ï¼2ï¼3\nconst promiselist = [];\ndatalist.foreach(d => {\n    promiselist.push(fetchdata(d)); // æ­¤å¤å·²ç»å¼å§æ§è¡äº\n});\n\nfor await (p of promiselist) {\n  console.log(p)\n}\n\n\n> å¶å®ä¸ä»ä»æ¯ foreachï¼å ä¹æåè°çéåæ¹æ³ï¼foreachãmapãfilterãreduceãsomeãeveryãfindç­ï¼ä½¿ç¨awaité½æ¯ä¸çæçã\n\n\n# æµè§å¨äºä»¶å¾ªç¯ånodeäºä»¶å¾ªç¯çåºå«\n\nnodeçäºä»¶å¾ªç¯æ¯libuvå®ç°çï¼å¤§ä½çtaskï¼å®ä»»å¡ï¼æ§è¡é¡ºåºæ¯è¿æ ·çï¼å¾ç¤º\n\n * timerså®æ¶å¨ï¼æ¬é¶æ®µæ§è¡å·²ç»å®æç settimeout() å setinterval() çåè°å½æ°ã\n * pending callbackså¾å®åè°ï¼æ§è¡å»¶è¿å°ä¸ä¸ä¸ªå¾ªç¯è¿­ä»£ç i/o åè°ã\n * idle, prepareï¼ä»ç³»ç»åé¨ä½¿ç¨ã\n * poll è½®è¯¢ï¼æ£ç´¢æ°ç i/o äºä»¶;æ§è¡ä¸ i/o ç¸å³çåè°ï¼å ä¹æææåµä¸ï¼é¤äºå³é­çåè°å½æ°ï¼å®ä»¬ç±è®¡æ¶å¨å setimmediate() æå®çä¹å¤ï¼ï¼å¶ä½æåµ node å°å¨æ­¤å¤é»å¡ã\n * check æ£æµï¼setimmediate() åè°å½æ°å¨è¿éæ§è¡ã\n * close callbacks å³é­çåè°å½æ°ï¼ä¸äºåå¤å³é­çåè°å½æ°ï¼å¦ï¼socket.on('close', ...)ã\n\n----------------------------------------\n\n * node10ä»¥åï¼microtask å¨äºä»¶å¾ªç¯çåä¸ªé¶æ®µä¹é´æ§è¡ï¼node11ä¹ååæµè§å¨è¡ä¸ºç»ä¸äºï¼é½æ¯æ¯æ§è¡ä¸ä¸ªå®ä»»å¡å°±æå¾®ä»»å¡éåæ¸ç©ºã\n * æµè§å¨ç«¯ï¼microtask å¨äºä»¶å¾ªç¯ç macrotask æ§è¡å®ä¹åæ§è¡\n\nfunction test () {\n   console.log('start')\n    settimeout(() => {\n        console.log('children2')\n        promise.resolve().then(() => {console.log('children2-1')})\n    }, 0)\n    settimeout(() => {\n        console.log('children3')\n        promise.resolve().then(() => {console.log('children3-1')})\n    }, 0)\n    promise.resolve().then(() => {console.log('children1')})\n    console.log('end')\n}\n\ntest()\n\n// æµè§å¨ç«¯ å node11ä¹å\n// start\n// end\n// children1\n// children2\n// children2-1\n// children3\n// children3-1\n\n// node10ä¹å\n// start\n// end\n// children2\n// children3\n// children2-1\n// children3-1\n",charsets:{cjk:!0}},{title:"æµæ·è´ä¸æ·±æ·è´",frontmatter:{title:"æµæ·è´ä¸æ·±æ·è´",date:"2021-01-20T18:37:54.000Z",categories:"JavaScript"},regularPath:"/javascript/clone.html",relativePath:"javascript/clone.md",key:"v-6611c3b5",path:"/javascript/clone.html",headers:[{level:2,title:"å¯¹è±¡é´èµå¼",slug:"å¯¹è±¡é´èµå¼",normalizedTitle:"å¯¹è±¡é´èµå¼",charIndex:14},{level:2,title:"æµæ·è´",slug:"æµæ·è´",normalizedTitle:"æµæ·è´",charIndex:2},{level:2,title:"æ·±æ·è´",slug:"æ·±æ·è´",normalizedTitle:"æ·±æ·è´",charIndex:6},{level:3,title:"éå½æ¹æ³å®ç°æ·±æ·è´åçï¼",slug:"éå½æ¹æ³å®ç°æ·±æ·è´åç",normalizedTitle:"éå½æ¹æ³å®ç°æ·±æ·è´åçï¼",charIndex:2731}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"å¯¹è±¡é´èµå¼ æµæ·è´ æ·±æ·è´ éå½æ¹æ³å®ç°æ·±æ·è´åçï¼",content:"# æµæ·è´ä¸æ·±æ·è´\n\n * å¯¹è±¡é´èµå¼\n * æµæ·è´\n * æ·±æ·è´\n * Object.assign\n * JSON.stringify\n * éå½å®ç°æ·±æ·è´\n\n\n# å¯¹è±¡é´èµå¼\n\né¤äºä¸äºåºæ¬ç±»åï¼å¯¹è±¡ä¹é´çèµå¼ï¼åªæ¯å°å°åæååä¸ä¸ªï¼èä¸æ¯çæ­£æä¹ä¸çæ·è´\n\nvar a = [1,2,3];\nvar b = a;\nb.push(4); // bä¸­æ·»å äºä¸ä¸ª4\nalert(a); // aåæäº[1,2,3,4] \n\nvar obj = {a:10};\nvar obj2 = obj;\nobj2.a = 20; // obj2.aæ¹åäºï¼\nalert(obj.a); // 20ï¼objçaè·çæ¹å \n\n\n\n# æµæ·è´\n\næä»¥ä¸ºäºè§£å³å°åæååä¸ä¸ªçé®é¢ï¼æä»¬éè¦å°è£ä¸ä¸ªå½æ°ï¼æ¥å¯¹å¯¹è±¡è¿è¡æ·è´ï¼éè¿for in å¾ªç¯è·ååºæ¬ç±»åï¼èµå¼æ¯ä¸ä¸ªåºæ¬ç±»åï¼æè½çæ­£æä¹ä¸çå¤å¶ä¸ä¸ªå¯¹è±¡\n\nvar obj = {a:10};\nfunction copy(obj){\n    var newobj = {};\n    for ( var attr in obj) {\n        newobj[attr] = obj[attr];\n    }\n    return newobj;\n}\nvar obj2 = copy(obj);\nobj2.a = 20;\nalert(obj.a); //10  \n\n\nè¿æ ·å°±è§£å³äºå¯¹è±¡èµå¼çé®é¢ã\n\n> æµæ·è´æ¯ä¼å°å¯¹è±¡çæ¯ä¸ªå±æ§è¿è¡ä¾æ¬¡å¤å¶ï¼ä½æ¯å½å¯¹è±¡çå±æ§å¼æ¯å¼ç¨ç±»åæ¶ï¼å®è´¨å¤å¶çæ¯å¶å¼ç¨ï¼å½å¼ç¨æåçå¼æ¹åæ¶ä¹ä¼è·çååã\n\nvar obj = {a:{b:10}};\nfunction copy(obj){\n    var newobj = {};\n    for ( var attr in obj) {\n        newobj[attr] = obj[attr];\n    }\n    return newobj;\n}\nvar obj2 = copy(obj);\nobj2.a.b = 20;\nalert(obj.a.b); //20  \n\n\n\n# æ·±æ·è´\n\n> æ·±æ·è´å¤å¶åéå¼ï¼å¯¹äºéåºæ¬ç±»åçåéï¼åéå½è³åºæ¬ç±»ååéåï¼åå¤å¶ãæ·±æ·è´åçå¯¹è±¡ä¸åæ¥çå¯¹è±¡æ¯å®å¨éç¦»çï¼äºä¸å½±åï¼å¯¹ä¸ä¸ªå¯¹è±¡çä¿®æ¹å¹¶ä¸ä¼å½±åå¦ä¸ä¸ªå¯¹è±¡ã\n\nlet obj = {\n    name:'a',\n    hobbies:{\n        like:'coding',\n        hate:'reading'\n    }\n}     \nlet obj2 = Object.assign({},obj)\nlet obj3 = JSON.parse(JSON.stringify(obj))\n\nobj.hobbies.like = 'reading'\nobj.name='b'\n\nconsole.log(obj)\nconsole.log(obj2) //name:a,like:reading,è¯´ææ²¡æå®ç°æ·±æ·è´\nconsole.log(obj3) //å®ç°äºæ·±æ·è´ï¼ä½æ¯å­å¨é®é¢\n\n// //JSON.parse(JSON.stringify(obj))æä»¬ä¸è¬ç¨æ¥æ·±æ·è´ï¼å¶è¿ç¨è¯´ç½äº å°±æ¯å©ç¨JSON.stringify å°jså¯¹è±¡åºååï¼JSONå­ç¬¦ä¸²ï¼ï¼åä½¿ç¨JSON.parseæ¥ååºåå(è¿å)jså¯¹è±¡\n\n\n * Object.assign\n\n * JSON.stringifyè¯¦è§£\n\n> JSON.parse(JSON.stringify(obj)) çé®é¢ï¼\n> \n>  1. å¦æobjéé¢ææ¶é´å¯¹è±¡ï¼åJSON.stringifyååJSON.parseçç»æï¼æ¶é´å°åªæ¯å­ç¬¦ä¸²çå½¢å¼ãèä¸æ¯æ¶é´å¯¹è±¡ï¼\n>  2. å¦æobjéæRegExpãErrorå¯¹è±¡ï¼ååºååçç»æå°åªå¾å°ç©ºå¯¹è±¡ï¼\n>  3. å¦æobjéæå½æ°ï¼undefinedï¼symbolï¼ååºååçç»æä¼æå½æ°æ undefinedä¸¢å¤±ï¼\n>  4. å¦æobjéæNaNãInfinityå-Infinityï¼ååºååçç»æä¼åænull\n>  5. JSON.stringify()åªè½åºååå¯¹è±¡çå¯æä¸¾çèªæå±æ§ï¼ä¾å¦ å¦æobjä¸­çå¯¹è±¡æ¯ææé å½æ°çæçï¼ åä½¿ç¨JSON.parse(JSON.stringify(obj))æ·±æ·è´åï¼ä¼ä¸¢å¼å¯¹è±¡çconstructorï¼\n>  6. å¦æå¯¹è±¡ä¸­å­å¨å¾ªç¯å¼ç¨çæåµä¹æ æ³æ­£ç¡®å®ç°æ·±æ·è´ï¼å ä¸ºJSON.tostringify æ æ³å°ä¸ä¸ªæ éå¼ç¨çå¯¹è±¡åºååä¸º JSON å­ç¬¦ä¸²ã\n\nlet obj = {\n    'date': new Date(),\n    'regexp': new RegExp(/a/),\n    'error': new Error('err'),\n    'fun': function a() {},\n    'undefined': undefined,\n    'symbol': Symbol('1'),\n    'nan': NaN,\n    'str': new String('a'),\n    'object': {a:1}\n}\n\nlet _obj = JSON.parse(JSON.stringify(obj))\nobj.object.a = 2\n\nconsole.log(obj)\n/**\n\tdate: Wed Feb 03 2021 10:37:06 GMT+0800 (ä¸­å½æ åæ¶é´) {}\n\terror: Error: err at <anonymous>:4:14\n  fun: Æ a()\n  nan: NaN\n  object: {a: 2}\n  regexp: /a/\n  str: String {\"a\"}\n  symbol: Symbol(1)\n  undefined: undefined\n*/\nconsole.log(_obj)\n/**\n\tdate: \"2021-02-03T02:37:06.906Z\"\n\terror: {}\n  nan: null\n  object: {a: 1}\n  regexp: {}\n  str: \"a\"\n*/\n\n\n// å¾ªç¯å¼ç¨\nlet o = {}\nlet a = {\n    b:42,\n    c:o,\n    d:function(){}\n}\no.e = a //åå»ºå¾ªç¯å¼ç¨\nconsole.log(JSON.stringify(a)) //æ¥é\n\n\n\n# éå½æ¹æ³å®ç°æ·±æ·è´åçï¼\n\néåå¯¹è±¡ãæ°ç»ç´å°éè¾¹é½æ¯åºæ¬æ°æ®ç±»åï¼ç¶ååå»å¤å¶ï¼å°±æ¯æ·±åº¦æ·è´ã\n\n> æç§ç¹æ®æåµéæ³¨æå°±æ¯å¯¹è±¡å­å¨å¾ªç¯å¼ç¨çæåµï¼å³å¯¹è±¡çå±æ§ç´æ¥çå¼ç¨äºèªèº«çæåµï¼è§£å³å¾ªç¯å¼ç¨é®é¢ï¼æä»¬å¯ä»¥é¢å¤å¼è¾ä¸ä¸ªå­å¨ç©ºé´ï¼æ¥å­å¨å½åå¯¹è±¡åæ·è´å¯¹è±¡çå¯¹åºå³ç³»ï¼å½éè¦æ·è´å½åå¯¹è±¡æ¶ï¼åå»å­å¨ç©ºé´ä¸­æ¾ï¼ææ²¡ææ·è´è¿è¿ä¸ªå¯¹è±¡ï¼å¦ææçè¯ç´æ¥è¿åï¼å¦ææ²¡æçè¯ç»§ç»­æ·è´ï¼è¿æ ·å°±å·§å¦åè§£çå¾ªç¯å¼ç¨çé®é¢ã\n\nfunction deepClone(obj, hash = new WeakMap()) {\n    // å¤çå ç§ç¹æ®çå¯¹è±¡ï¼Date, RegExp, Error\n    if (obj instanceof Date) return new Date(obj)\n    if (obj instanceof RegExp) return new RegExp(obj)\n    if (obj instanceof Error) return new Error(obj)\n    // å¦ææ¯ function, undefined, symbol, NaN ç­ä¸æ¯å¯¹è±¡çè¯æ¯ä¸éè¦æ·±æ·è´\n    if (typeof obj !== \"object\" || obj === null) return obj\n    // æ¯å¯¹è±¡çè¯å°±è¦è¿è¡æ·±æ·è´, è¥æ·è´è¿ç´æ¥è¿å\n    if (hash.get(obj)) return hash.get(obj)\n    // å¦ååå»ºæ°çå¯¹è±¡\n    let cloneObj = new Object()\n    hash.set(obj, cloneObj)\n    for (let key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            // å®ç°ä¸ä¸ªéå½æ·è´\n            cloneObj[key] = deepClone(obj[key], hash)\n        }\n    }\n    return cloneObj\n}\n\nlet deepobj = deepClone(obj)\nconsole.log(deepobj)\n/**\n\tdate: Wed Feb 03 2021 11:02:25 GMT+0800 (ä¸­å½æ åæ¶é´) {}\n  error: Error at deepClone (<anonymous>:10:20) at deepClone (<anonymous>:16:29) at <anonymous>:35:15\n  fun: Æ a()\n  nan: NaN\n  object: {a: 1}\n  regexp: /a/\n  str: String {\"\", 0: \"a\"}\n  symbol: Symbol(1)\n  undefined: undefined\n  __proto__: Object\n*/\n\n\nlet obj = { name: 1, address: { x: 100 } };\nobj.o = obj; // å¯¹è±¡å­å¨å¾ªç¯å¼ç¨çæåµ\nlet d = deepClone(obj);\nobj.address.x = 200;\n\nconsole.log(d);\n// { name: 1, address: { x: 100 } }\n",normalizedContent:"# æµæ·è´ä¸æ·±æ·è´\n\n * å¯¹è±¡é´èµå¼\n * æµæ·è´\n * æ·±æ·è´\n * object.assign\n * json.stringify\n * éå½å®ç°æ·±æ·è´\n\n\n# å¯¹è±¡é´èµå¼\n\né¤äºä¸äºåºæ¬ç±»åï¼å¯¹è±¡ä¹é´çèµå¼ï¼åªæ¯å°å°åæååä¸ä¸ªï¼èä¸æ¯çæ­£æä¹ä¸çæ·è´\n\nvar a = [1,2,3];\nvar b = a;\nb.push(4); // bä¸­æ·»å äºä¸ä¸ª4\nalert(a); // aåæäº[1,2,3,4] \n\nvar obj = {a:10};\nvar obj2 = obj;\nobj2.a = 20; // obj2.aæ¹åäºï¼\nalert(obj.a); // 20ï¼objçaè·çæ¹å \n\n\n\n# æµæ·è´\n\næä»¥ä¸ºäºè§£å³å°åæååä¸ä¸ªçé®é¢ï¼æä»¬éè¦å°è£ä¸ä¸ªå½æ°ï¼æ¥å¯¹å¯¹è±¡è¿è¡æ·è´ï¼éè¿for in å¾ªç¯è·ååºæ¬ç±»åï¼èµå¼æ¯ä¸ä¸ªåºæ¬ç±»åï¼æè½çæ­£æä¹ä¸çå¤å¶ä¸ä¸ªå¯¹è±¡\n\nvar obj = {a:10};\nfunction copy(obj){\n    var newobj = {};\n    for ( var attr in obj) {\n        newobj[attr] = obj[attr];\n    }\n    return newobj;\n}\nvar obj2 = copy(obj);\nobj2.a = 20;\nalert(obj.a); //10  \n\n\nè¿æ ·å°±è§£å³äºå¯¹è±¡èµå¼çé®é¢ã\n\n> æµæ·è´æ¯ä¼å°å¯¹è±¡çæ¯ä¸ªå±æ§è¿è¡ä¾æ¬¡å¤å¶ï¼ä½æ¯å½å¯¹è±¡çå±æ§å¼æ¯å¼ç¨ç±»åæ¶ï¼å®è´¨å¤å¶çæ¯å¶å¼ç¨ï¼å½å¼ç¨æåçå¼æ¹åæ¶ä¹ä¼è·çååã\n\nvar obj = {a:{b:10}};\nfunction copy(obj){\n    var newobj = {};\n    for ( var attr in obj) {\n        newobj[attr] = obj[attr];\n    }\n    return newobj;\n}\nvar obj2 = copy(obj);\nobj2.a.b = 20;\nalert(obj.a.b); //20  \n\n\n\n# æ·±æ·è´\n\n> æ·±æ·è´å¤å¶åéå¼ï¼å¯¹äºéåºæ¬ç±»åçåéï¼åéå½è³åºæ¬ç±»ååéåï¼åå¤å¶ãæ·±æ·è´åçå¯¹è±¡ä¸åæ¥çå¯¹è±¡æ¯å®å¨éç¦»çï¼äºä¸å½±åï¼å¯¹ä¸ä¸ªå¯¹è±¡çä¿®æ¹å¹¶ä¸ä¼å½±åå¦ä¸ä¸ªå¯¹è±¡ã\n\nlet obj = {\n    name:'a',\n    hobbies:{\n        like:'coding',\n        hate:'reading'\n    }\n}     \nlet obj2 = object.assign({},obj)\nlet obj3 = json.parse(json.stringify(obj))\n\nobj.hobbies.like = 'reading'\nobj.name='b'\n\nconsole.log(obj)\nconsole.log(obj2) //name:a,like:reading,è¯´ææ²¡æå®ç°æ·±æ·è´\nconsole.log(obj3) //å®ç°äºæ·±æ·è´ï¼ä½æ¯å­å¨é®é¢\n\n// //json.parse(json.stringify(obj))æä»¬ä¸è¬ç¨æ¥æ·±æ·è´ï¼å¶è¿ç¨è¯´ç½äº å°±æ¯å©ç¨json.stringify å°jså¯¹è±¡åºååï¼jsonå­ç¬¦ä¸²ï¼ï¼åä½¿ç¨json.parseæ¥ååºåå(è¿å)jså¯¹è±¡\n\n\n * object.assign\n\n * json.stringifyè¯¦è§£\n\n> json.parse(json.stringify(obj)) çé®é¢ï¼\n> \n>  1. å¦æobjéé¢ææ¶é´å¯¹è±¡ï¼åjson.stringifyååjson.parseçç»æï¼æ¶é´å°åªæ¯å­ç¬¦ä¸²çå½¢å¼ãèä¸æ¯æ¶é´å¯¹è±¡ï¼\n>  2. å¦æobjéæregexpãerrorå¯¹è±¡ï¼ååºååçç»æå°åªå¾å°ç©ºå¯¹è±¡ï¼\n>  3. å¦æobjéæå½æ°ï¼undefinedï¼symbolï¼ååºååçç»æä¼æå½æ°æ undefinedä¸¢å¤±ï¼\n>  4. å¦æobjéænanãinfinityå-infinityï¼ååºååçç»æä¼åænull\n>  5. json.stringify()åªè½åºååå¯¹è±¡çå¯æä¸¾çèªæå±æ§ï¼ä¾å¦ å¦æobjä¸­çå¯¹è±¡æ¯ææé å½æ°çæçï¼ åä½¿ç¨json.parse(json.stringify(obj))æ·±æ·è´åï¼ä¼ä¸¢å¼å¯¹è±¡çconstructorï¼\n>  6. å¦æå¯¹è±¡ä¸­å­å¨å¾ªç¯å¼ç¨çæåµä¹æ æ³æ­£ç¡®å®ç°æ·±æ·è´ï¼å ä¸ºjson.tostringify æ æ³å°ä¸ä¸ªæ éå¼ç¨çå¯¹è±¡åºååä¸º json å­ç¬¦ä¸²ã\n\nlet obj = {\n    'date': new date(),\n    'regexp': new regexp(/a/),\n    'error': new error('err'),\n    'fun': function a() {},\n    'undefined': undefined,\n    'symbol': symbol('1'),\n    'nan': nan,\n    'str': new string('a'),\n    'object': {a:1}\n}\n\nlet _obj = json.parse(json.stringify(obj))\nobj.object.a = 2\n\nconsole.log(obj)\n/**\n\tdate: wed feb 03 2021 10:37:06 gmt+0800 (ä¸­å½æ åæ¶é´) {}\n\terror: error: err at <anonymous>:4:14\n  fun: Æ a()\n  nan: nan\n  object: {a: 2}\n  regexp: /a/\n  str: string {\"a\"}\n  symbol: symbol(1)\n  undefined: undefined\n*/\nconsole.log(_obj)\n/**\n\tdate: \"2021-02-03t02:37:06.906z\"\n\terror: {}\n  nan: null\n  object: {a: 1}\n  regexp: {}\n  str: \"a\"\n*/\n\n\n// å¾ªç¯å¼ç¨\nlet o = {}\nlet a = {\n    b:42,\n    c:o,\n    d:function(){}\n}\no.e = a //åå»ºå¾ªç¯å¼ç¨\nconsole.log(json.stringify(a)) //æ¥é\n\n\n\n# éå½æ¹æ³å®ç°æ·±æ·è´åçï¼\n\néåå¯¹è±¡ãæ°ç»ç´å°éè¾¹é½æ¯åºæ¬æ°æ®ç±»åï¼ç¶ååå»å¤å¶ï¼å°±æ¯æ·±åº¦æ·è´ã\n\n> æç§ç¹æ®æåµéæ³¨æå°±æ¯å¯¹è±¡å­å¨å¾ªç¯å¼ç¨çæåµï¼å³å¯¹è±¡çå±æ§ç´æ¥çå¼ç¨äºèªèº«çæåµï¼è§£å³å¾ªç¯å¼ç¨é®é¢ï¼æä»¬å¯ä»¥é¢å¤å¼è¾ä¸ä¸ªå­å¨ç©ºé´ï¼æ¥å­å¨å½åå¯¹è±¡åæ·è´å¯¹è±¡çå¯¹åºå³ç³»ï¼å½éè¦æ·è´å½åå¯¹è±¡æ¶ï¼åå»å­å¨ç©ºé´ä¸­æ¾ï¼ææ²¡ææ·è´è¿è¿ä¸ªå¯¹è±¡ï¼å¦ææçè¯ç´æ¥è¿åï¼å¦ææ²¡æçè¯ç»§ç»­æ·è´ï¼è¿æ ·å°±å·§å¦åè§£çå¾ªç¯å¼ç¨çé®é¢ã\n\nfunction deepclone(obj, hash = new weakmap()) {\n    // å¤çå ç§ç¹æ®çå¯¹è±¡ï¼date, regexp, error\n    if (obj instanceof date) return new date(obj)\n    if (obj instanceof regexp) return new regexp(obj)\n    if (obj instanceof error) return new error(obj)\n    // å¦ææ¯ function, undefined, symbol, nan ç­ä¸æ¯å¯¹è±¡çè¯æ¯ä¸éè¦æ·±æ·è´\n    if (typeof obj !== \"object\" || obj === null) return obj\n    // æ¯å¯¹è±¡çè¯å°±è¦è¿è¡æ·±æ·è´, è¥æ·è´è¿ç´æ¥è¿å\n    if (hash.get(obj)) return hash.get(obj)\n    // å¦ååå»ºæ°çå¯¹è±¡\n    let cloneobj = new object()\n    hash.set(obj, cloneobj)\n    for (let key in obj) {\n        if (obj.hasownproperty(key)) {\n            // å®ç°ä¸ä¸ªéå½æ·è´\n            cloneobj[key] = deepclone(obj[key], hash)\n        }\n    }\n    return cloneobj\n}\n\nlet deepobj = deepclone(obj)\nconsole.log(deepobj)\n/**\n\tdate: wed feb 03 2021 11:02:25 gmt+0800 (ä¸­å½æ åæ¶é´) {}\n  error: error at deepclone (<anonymous>:10:20) at deepclone (<anonymous>:16:29) at <anonymous>:35:15\n  fun: Æ a()\n  nan: nan\n  object: {a: 1}\n  regexp: /a/\n  str: string {\"\", 0: \"a\"}\n  symbol: symbol(1)\n  undefined: undefined\n  __proto__: object\n*/\n\n\nlet obj = { name: 1, address: { x: 100 } };\nobj.o = obj; // å¯¹è±¡å­å¨å¾ªç¯å¼ç¨çæåµ\nlet d = deepclone(obj);\nobj.address.x = 200;\n\nconsole.log(d);\n// { name: 1, address: { x: 100 } }\n",charsets:{cjk:!0}},{title:"console.log æ§å¶å° I/O å¼æ­¥",frontmatter:{},regularPath:"/javascript/log.html",relativePath:"javascript/log.md",key:"v-18136627",path:"/javascript/log.html",lastUpdated:"5/20/2022, 7:31:49 PM",lastUpdatedTimestamp:1653046309e3,headersStr:null,content:"# console.log æ§å¶å° I/O å¼æ­¥\n\nä¸ä¸ªä¾å­\n\nvar a = {\n  index: 1\n}\nconsole.log(a);\na.index++;\n\n\næä»¬å¯è½ä¼è®¤ä¸ºæå°çç»ææ¯ {a: 1}ï¼ä½æ¯å®éæåµå¦ä¸ï¼\n\nå¯ä»¥çå°æå°åºæ¥çç¡®å®æ¯{a: 1}ï¼ä½æ¯å°å¶å±å¼ä¹åæ¾ç¤ºçindexçå¼ä¸º2ï¼è¿æ¯ä¸ºä»ä¹å¢ï¼è¿æ¶æä»¬åç°ç»æä¸­æä¸ªå¹å·ï¼æä»¬æé¼ æ ç§»ä¸å»ççæ¯ä»ä¹ï¼ ææå°±æ¯è¿ä¸ªå¼è®¡ç®äºä¸æ¬¡ï¼ä½æ¯åé¢å¯è½æ¯ä¼ååçï¼é£ä¹ä¸ºä»ä¹ä¼åºç°è¿ç§æåµå¢ï¼å¶å®å¨ãä½ ä¸ç¥éçJavaScriptãè¿æ¬ä¹¦çä¸­å·ä¸­ç»åºäºç­æ¡ï¼\n\n> å¹¶æ²¡æä»ä¹è§èæä¸ç»éæ±æå® console.* æ¹æ³æå¦ä½å·¥ä½ââå®ä»¬å¹¶ä¸æ¯JavaScript æ­£å¼çä¸é¨åï¼èæ¯ç±å®¿ä¸»ç¯å¢ï¼è¯·åèæ¬ä¹¦çâç±»ååè¯­æ³âé¨åï¼æ·»å å°JavaScript ä¸­çãå æ­¤ï¼ä¸åçæµè§å¨åJavaScript ç¯å¢å¯ä»¥æç§èªå·±çææ¿æ¥å®ç°ï¼ææ¶åè¿ä¼å¼èµ·æ··æ·ã\n\n> å°¤å¶è¦æåºçæ¯ï¼å¨æäºæ¡ä»¶ä¸ï¼æäºæµè§å¨ç console.log(â¦) å¹¶ä¸ä¼æä¼ å¥çåå®¹ç«å³è¾åºãåºç°è¿ç§æåµçä¸»è¦åå æ¯ï¼å¨è®¸å¤ç¨åºï¼ä¸åªæ¯JavaScriptï¼ä¸­ï¼I/O æ¯éå¸¸ä½éçé»å¡é¨åãæä»¥ï¼ï¼ä»é¡µé¢/UI çè§åº¦æ¥è¯´ï¼æµè§å¨å¨åå°å¼æ­¥å¤çæ§å¶å°I/O è½å¤æé«æ§è½ï¼è¿æ¶ç¨æ·çè³å¯è½æ ¹æ¬æè¯ä¸å°å¶åçã\n\n> æä»¬éå¸¸è®¤ä¸ºæ°å¥½å¨æ§è¡å°console.log(..)Â è¯­å¥çæ¶åä¼çå°aå¯¹è±¡çå¿«ç§ï¼æå°åºç±»ä¼¼äº{ index: 1 }Â è¿æ ·çåå®¹ï¼ç¶åå¨ä¸ä¸æ¡è¯­å¥a.index++æ§è¡æ¶å°å¶ä¿®æ¹ï¼è¿å¥çæ§è¡ä¼ä¸¥æ ¼å¨a çè¾åºä¹åãå¤æ°æåµä¸ï¼åè¿°ä»£ç å¨å¼åèå·¥å·çæ§å¶å°ä¸­è¾åºçå¯¹è±¡è¡¨ç¤ºä¸æææ¯ä¸è´çãä½æ¯ï¼è¿æ®µä»£ç è¿è¡çæ¶åï¼æµè§å¨å¯è½ä¼è®¤ä¸ºéè¦ææ§å¶å°I/O å»¶è¿å°åå°ï¼å¨è¿ç§æåµä¸ï¼ç­å°æµè§å¨æ§å¶å°è¾åºå¯¹è±¡åå®¹æ¶ï¼a.index++å¯è½å·²ç»æ§è¡ï¼å æ­¤ä¼æ¾ç¤º{ index: 2 }ã\n\n> å°åºä»ä¹æ¶åæ§å¶å°I/O ä¼å»¶è¿ï¼çè³æ¯å¦è½å¤è¢«è§å¯å°ï¼è¿é½æ¯æ¸¸ç§»ä¸å®çãæä»¥å¦æå¨è°è¯çè¿ç¨ä¸­éå°å¯¹è±¡å¨console.log(..) è¯­å¥ä¹åè¢«ä¿®æ¹ï¼å¯ä½ å´çå°äºææä¹å¤çç»æï¼è¦æè¯å°è¿å¯è½æ¯è¿ç§I/O çå¼æ­¥åé æçã\n\n> æä»¥å¦æéå°è¿ç§æåµï¼æä¼çæ¹æ³æ¯æ­ç¹ï¼æ¬¡ä¼çæ¹æ³æ¯æå¯¹è±¡åºååï¼å¼ºå¶æ§è¡ä¸æ¬¡å¿«ç§ï¼æ¯å¦JSON.stringify\n\næä»¬ä¹å¯ä»¥çè§£ä¸ºå¨è¿ä¸ªä¾å­ä¸­console.logæå°çæ°æ®æ¯å¼ç¨ç±»åï¼é£ä¹æå°çåªæ¯ä¸ä¸ªå¿«ç§{index: 1}ï¼ç­æä»¬å±å¼å¯¹è±¡æ¶ä¼éæ°åå¼ï¼æ­¤æ¶å¼å·²ç»è¢«æ¹åï¼æä»¥ååºæ¥çå°±æ¯ææ°çå¼ä¹å°±æ¯{index: 2}äºã",normalizedContent:"# console.log æ§å¶å° i/o å¼æ­¥\n\nä¸ä¸ªä¾å­\n\nvar a = {\n  index: 1\n}\nconsole.log(a);\na.index++;\n\n\næä»¬å¯è½ä¼è®¤ä¸ºæå°çç»ææ¯ {a: 1}ï¼ä½æ¯å®éæåµå¦ä¸ï¼\n\nå¯ä»¥çå°æå°åºæ¥çç¡®å®æ¯{a: 1}ï¼ä½æ¯å°å¶å±å¼ä¹åæ¾ç¤ºçindexçå¼ä¸º2ï¼è¿æ¯ä¸ºä»ä¹å¢ï¼è¿æ¶æä»¬åç°ç»æä¸­æä¸ªå¹å·ï¼æä»¬æé¼ æ ç§»ä¸å»ççæ¯ä»ä¹ï¼ ææå°±æ¯è¿ä¸ªå¼è®¡ç®äºä¸æ¬¡ï¼ä½æ¯åé¢å¯è½æ¯ä¼ååçï¼é£ä¹ä¸ºä»ä¹ä¼åºç°è¿ç§æåµå¢ï¼å¶å®å¨ãä½ ä¸ç¥éçjavascriptãè¿æ¬ä¹¦çä¸­å·ä¸­ç»åºäºç­æ¡ï¼\n\n> å¹¶æ²¡æä»ä¹è§èæä¸ç»éæ±æå® console.* æ¹æ³æå¦ä½å·¥ä½ââå®ä»¬å¹¶ä¸æ¯javascript æ­£å¼çä¸é¨åï¼èæ¯ç±å®¿ä¸»ç¯å¢ï¼è¯·åèæ¬ä¹¦çâç±»ååè¯­æ³âé¨åï¼æ·»å å°javascript ä¸­çãå æ­¤ï¼ä¸åçæµè§å¨åjavascript ç¯å¢å¯ä»¥æç§èªå·±çææ¿æ¥å®ç°ï¼ææ¶åè¿ä¼å¼èµ·æ··æ·ã\n\n> å°¤å¶è¦æåºçæ¯ï¼å¨æäºæ¡ä»¶ä¸ï¼æäºæµè§å¨ç console.log(â¦) å¹¶ä¸ä¼æä¼ å¥çåå®¹ç«å³è¾åºãåºç°è¿ç§æåµçä¸»è¦åå æ¯ï¼å¨è®¸å¤ç¨åºï¼ä¸åªæ¯javascriptï¼ä¸­ï¼i/o æ¯éå¸¸ä½éçé»å¡é¨åãæä»¥ï¼ï¼ä»é¡µé¢/ui çè§åº¦æ¥è¯´ï¼æµè§å¨å¨åå°å¼æ­¥å¤çæ§å¶å°i/o è½å¤æé«æ§è½ï¼è¿æ¶ç¨æ·çè³å¯è½æ ¹æ¬æè¯ä¸å°å¶åçã\n\n> æä»¬éå¸¸è®¤ä¸ºæ°å¥½å¨æ§è¡å°console.log(..)Â è¯­å¥çæ¶åä¼çå°aå¯¹è±¡çå¿«ç§ï¼æå°åºç±»ä¼¼äº{ index: 1 }Â è¿æ ·çåå®¹ï¼ç¶åå¨ä¸ä¸æ¡è¯­å¥a.index++æ§è¡æ¶å°å¶ä¿®æ¹ï¼è¿å¥çæ§è¡ä¼ä¸¥æ ¼å¨a çè¾åºä¹åãå¤æ°æåµä¸ï¼åè¿°ä»£ç å¨å¼åèå·¥å·çæ§å¶å°ä¸­è¾åºçå¯¹è±¡è¡¨ç¤ºä¸æææ¯ä¸è´çãä½æ¯ï¼è¿æ®µä»£ç è¿è¡çæ¶åï¼æµè§å¨å¯è½ä¼è®¤ä¸ºéè¦ææ§å¶å°i/o å»¶è¿å°åå°ï¼å¨è¿ç§æåµä¸ï¼ç­å°æµè§å¨æ§å¶å°è¾åºå¯¹è±¡åå®¹æ¶ï¼a.index++å¯è½å·²ç»æ§è¡ï¼å æ­¤ä¼æ¾ç¤º{ index: 2 }ã\n\n> å°åºä»ä¹æ¶åæ§å¶å°i/o ä¼å»¶è¿ï¼çè³æ¯å¦è½å¤è¢«è§å¯å°ï¼è¿é½æ¯æ¸¸ç§»ä¸å®çãæä»¥å¦æå¨è°è¯çè¿ç¨ä¸­éå°å¯¹è±¡å¨console.log(..) è¯­å¥ä¹åè¢«ä¿®æ¹ï¼å¯ä½ å´çå°äºææä¹å¤çç»æï¼è¦æè¯å°è¿å¯è½æ¯è¿ç§i/o çå¼æ­¥åé æçã\n\n> æä»¥å¦æéå°è¿ç§æåµï¼æä¼çæ¹æ³æ¯æ­ç¹ï¼æ¬¡ä¼çæ¹æ³æ¯æå¯¹è±¡åºååï¼å¼ºå¶æ§è¡ä¸æ¬¡å¿«ç§ï¼æ¯å¦json.stringify\n\næä»¬ä¹å¯ä»¥çè§£ä¸ºå¨è¿ä¸ªä¾å­ä¸­console.logæå°çæ°æ®æ¯å¼ç¨ç±»åï¼é£ä¹æå°çåªæ¯ä¸ä¸ªå¿«ç§{index: 1}ï¼ç­æä»¬å±å¼å¯¹è±¡æ¶ä¼éæ°åå¼ï¼æ­¤æ¶å¼å·²ç»è¢«æ¹åï¼æä»¥ååºæ¥çå°±æ¯ææ°çå¼ä¹å°±æ¯{index: 2}äºã",charsets:{cjk:!0}},{title:"é­å",frontmatter:{title:"é­å",date:"2018-08-16T21:00:54.000Z",categories:"JavaScript"},regularPath:"/javascript/closure.html",relativePath:"javascript/closure.md",key:"v-6c3f9039",path:"/javascript/closure.html",headers:[{level:2,title:"é­åçå®ä¹",slug:"é­åçå®ä¹",normalizedTitle:"é­åçå®ä¹",charIndex:2},{level:2,title:"é­åæä¸ä¸ªç¹æ§ï¼",slug:"é­åæä¸ä¸ªç¹æ§",normalizedTitle:"é­åæä¸ä¸ªç¹æ§ï¼",charIndex:160},{level:2,title:"é­åä¼ç¼ºç¹",slug:"é­åä¼ç¼ºç¹",normalizedTitle:"é­åä¼ç¼ºç¹",charIndex:222},{level:2,title:"vueæºç ä¸­é­åçåºç¨",slug:"vueæºç ä¸­é­åçåºç¨",normalizedTitle:"vueæºç ä¸­é­åçåºç¨",charIndex:400},{level:2,title:"é­åä¸é«é¶å½æ°",slug:"é­åä¸é«é¶å½æ°",normalizedTitle:"é­åä¸é«é¶å½æ°",charIndex:1286},{level:2,title:"javascriptçåå¾åæ¶åç",slug:"javascriptçåå¾åæ¶åç",normalizedTitle:"javascriptçåå¾åæ¶åç",charIndex:1463},{level:2,title:"ä¸ãå¨å±åéçç´¯å ",slug:"ä¸ãå¨å±åéçç´¯å ",normalizedTitle:"ä¸ãå¨å±åéçç´¯å ",charIndex:1575},{level:2,title:"äºãå±é¨åé",slug:"äºãå±é¨åé",normalizedTitle:"äºãå±é¨åé",charIndex:1718},{level:2,title:"ä¸ãå±é¨åéçç´¯å ",slug:"ä¸ãå±é¨åéçç´¯å ",normalizedTitle:"ä¸ãå±é¨åéçç´¯å ",charIndex:1904},{level:2,title:"å½æ°å£°æä¸å½æ°è¡¨è¾¾å¼",slug:"å½æ°å£°æä¸å½æ°è¡¨è¾¾å¼",normalizedTitle:"å½æ°å£°æä¸å½æ°è¡¨è¾¾å¼",charIndex:2197},{level:2,title:"åãæ¨¡ååä»£ç ï¼åå°å¨å±åéçæ±¡æ",slug:"åãæ¨¡ååä»£ç -åå°å¨å±åéçæ±¡æ",normalizedTitle:"åãæ¨¡ååä»£ç ï¼åå°å¨å±åéçæ±¡æ",charIndex:2453},{level:2,title:"äºãç§ææåçå­å¨",slug:"äºãç§ææåçå­å¨",normalizedTitle:"äºãç§ææåçå­å¨",charIndex:2685},{level:2,title:"å­.ä½¿ç¨å¿åå½æ°å®ç°ç´¯å ",slug:"å­-ä½¿ç¨å¿åå½æ°å®ç°ç´¯å ",normalizedTitle:"å­.ä½¿ç¨å¿åå½æ°å®ç°ç´¯å ",charIndex:2977},{level:2,title:"ä¸ãå¨å¾ªç¯ä¸­ç´æ¥æ¾å°å¯¹åºåç´ çç´¢å¼",slug:"ä¸ãå¨å¾ªç¯ä¸­ç´æ¥æ¾å°å¯¹åºåç´ çç´¢å¼",normalizedTitle:"ä¸ãå¨å¾ªç¯ä¸­ç´æ¥æ¾å°å¯¹åºåç´ çç´¢å¼",charIndex:3339},{level:2,title:"å«ãä½¿ç¨é­åæ¹åä¸é¢ä»£ç ",slug:"å«ãä½¿ç¨é­åæ¹åä¸é¢ä»£ç ",normalizedTitle:"å«ãä½¿ç¨é­åæ¹åä¸é¢ä»£ç ",charIndex:3709},{level:2,title:"ä¹.åå­æ³é²é®é¢",slug:"ä¹-åå­æ³é²é®é¢",normalizedTitle:"ä¹.åå­æ³é²é®é¢",charIndex:4074}],lastUpdated:"6/12/2025, 7:16:20 PM",lastUpdatedTimestamp:174972698e4,headersStr:"é­åçå®ä¹ é­åæä¸ä¸ªç¹æ§ï¼ é­åä¼ç¼ºç¹ vueæºç ä¸­é­åçåºç¨ é­åä¸é«é¶å½æ° javascriptçåå¾åæ¶åç ä¸ãå¨å±åéçç´¯å  äºãå±é¨åé ä¸ãå±é¨åéçç´¯å  å½æ°å£°æä¸å½æ°è¡¨è¾¾å¼ åãæ¨¡ååä»£ç ï¼åå°å¨å±åéçæ±¡æ äºãç§ææåçå­å¨ å­.ä½¿ç¨å¿åå½æ°å®ç°ç´¯å  ä¸ãå¨å¾ªç¯ä¸­ç´æ¥æ¾å°å¯¹åºåç´ çç´¢å¼ å«ãä½¿ç¨é­åæ¹åä¸é¢ä»£ç  ä¹.åå­æ³é²é®é¢",content:"# é­åçå®ä¹\n\n * ççä¹¦ï¼å½æ°ä½åé¨çåéé½å¯ä»¥ä¿å­å¨å½æ°ä½ç¨ååï¼è¿ç§ç¹æ§ç§°ä¸ºé­åã\n * ä¸ªäººçè§£ï¼é­åæ¯æææè®¿é®å¦ä¸ä¸ªå½æ°ä½ç¨åä¸­çåéçå½æ°ï¼åå»ºé­åçæå¸¸è§çæ¹å¼å°±æ¯å¨ä¸ä¸ªå½æ°ååå»ºå¦ä¸ä¸ªå½æ°ï¼åé¨å½æ°å¯ä»¥è®¿é®å¤é¢å½æ°ä¸­çå±é¨åéï¼ä¸æ¦åé¨å½æ°è¿åæèè¢«å¼ç¨ï¼è¿ä¸ªå±é¨åéåä¼ä¸ç´ä¿çå¨åå­ä¸­\n\n\n# é­åæä¸ä¸ªç¹æ§ï¼\n\n1.å½æ°åµå¥å½æ°\n2.å½æ°åé¨å¯ä»¥å¼ç¨å¤é¨çåæ°ååé\n3.åæ°ååéä¸ä¼è¢«åå¾åæ¶æºå¶åæ¶\n\n\n\n# é­åä¼ç¼ºç¹\n\nç¼ºç¹\n\né­åçç¼ºç¹å°±æ¯å¸¸é©»åå­ï¼ä¼å¢å¤§åå­ä½¿ç¨éï¼ä½¿ç¨ä¸å½å¾å®¹æé æåå­æ³é²ã\n\nä¸è¬å½æ°æ§è¡å®æ¯åï¼å±é¨æ´»å¨å¯¹è±¡å°±è¢«éæ¯ï¼åå­ä¸­ä»ä»ä¿å­å¨å±ä½ç¨åãä½é­åçæåµä¸åï¼\n\nä¼ç¹åç¨å¤\n\n * æäºé­åä¹åï¼å¯ä»¥å¨å¤é¨ä½ç¨åè®¿é®åé¨ä½ç¨åçæå\n\n * å¸æä¸ä¸ªåéé¿æé©»æå¨åå­ä¸­\n\n * é¿åå¨å±åéçæ±¡æ\n\n * ç§ææåçå­å¨\n\n\n# vueæºç ä¸­é­åçåºç¨\n\n> å ä¸ºä½¿ç¨äº Virtual DOM çåå ï¼Vue.jså·æäºè·¨å¹³å°çè½åï¼Virtual DOM ç»å½åªæ¯ä¸äº JavaScript å¯¹è±¡ç½¢äºï¼é£ä¹æç»æ¯å¦ä½è°ç¨ä¸åå¹³å°ç API çå¢ï¼è¿å°±éè¦ä¾èµä¸å±ééå±äºï¼å°ä¸åå¹³å°ç API å°è£å¨åï¼ä»¥åæ ·çæ¥å£å¯¹å¤æä¾ã\n\nfunction createPatchFunction(nodeOps, modules) {\n  return function patch(vdom1, vdom2) {\n    // ...\n  }\n}\nconst patch = createPatchFunction(...)\n/**\nå ä¸º vue å¯ä»¥è¿è¡å¨å¤ä¸ªå¹³å°ä¸éè¿ nodeOps æ¥åºåï¼patch ä¸­æè®¸å¤æä½èç¹çå½æ°ï¼å¦æç´æ¥åå¨ patch éé¢çè¯ï¼éè¦å¨ patch éé¢åä¸ç³»å if å¹³å°å¤æ­ï¼å¤æ¬¡æ§è¡ patch ä¼å¤æ­å¤æ¬¡ï¼é£ä¹å¦è¿éè¿é­åæè¿ä¸ªå¹³å°å·®å¼åªæ§è¡ä¸æ¬¡å°±å¤æ­åºæ¥ï¼ä»åä¸éè¦å¤æ­å°±å¥½äºã\n*/                    \nconst nodeOps = {\n    setTextContent (text) {\n        if (platform === 'weex') {\n            node.parentNode.setAttr('value', text);\n        } else if (platform === 'web') {\n            node.textContent = text;\n        }\n    },\n    parentNode () {\n        //......\n    },\n    removeChild () {\n        //......\n    },\n    nextSibling () {\n        //......\n    },\n    insertBefore () {\n        //......\n    }\n}\n\n\n\n# é­åä¸é«é¶å½æ°\n\n// å½æ°ä½ä¸ºè¿åå¼\nfunction fn() {\n    let a = 1\n    return function() {\n        console.log(a++)\n    }\n}\n\nlet fn1 = fn()\nfn1()\n\n// å½æ°ä½ä¸ºåæ°\n\n\n\né­åä¼ä½¿åéå§ç»ä¿å­å¨åå­ä¸­ï¼å¦æä¸å½ä½¿ç¨ä¼å¢å¤§åå­æ¶èã\n\n\n# javascriptçåå¾åæ¶åç\n\nï¼1ï¼ãå¨javascriptä¸­ï¼å¦æä¸ä¸ªå¯¹è±¡ä¸åè¢«å¼ç¨ï¼é£ä¹è¿ä¸ªå¯¹è±¡å°±ä¼è¢«GCåæ¶ï¼ ï¼2ï¼ãå¦æä¸¤ä¸ªå¯¹è±¡äºç¸å¼ç¨ï¼èä¸åè¢«ç¬¬3èæå¼ç¨ï¼é£ä¹è¿ä¸¤ä¸ªäºç¸å¼ç¨çå¯¹è±¡ä¹ä¼è¢«åæ¶ã\n\n\n# ä¸ãå¨å±åéçç´¯å \n\n<script>\n  var a = 1;\n  function abc(){\n    a++;\n    alert(a);\n  }\n  abc();              //2\n  abc();            //3\n<\/script>\n\n\n\n# äºãå±é¨åé\n\n<script>\n\n  function abc(){\n    var a = 1;\n    a++;\n    alert(a);\n  }\n  abc();                       //2\n  abc();                    //2\n<\/script>\n\n\né£ä¹æä¹æè½åå°åéaæ¢æ¯å±é¨åéåå¯ä»¥ç´¯å å¢ï¼\n\n\n# ä¸ãå±é¨åéçç´¯å \n\n<script>\n  function outer(){\n    var x=10;\n    return function(){             //å½æ°åµå¥å½æ°\n      x++;\n      alert(x);\n    }\n  }\n  var y = outer();              //å¤é¨å½æ°èµç»åéy;\n  y();                 //yå½æ°è°ç¨ä¸æ¬¡ï¼ç»æä¸º11ï¼ç¸å½äºouter()()ï¼\n  y();                //yå½æ°è°ç¨ç¬¬äºæ¬¡ï¼ç»æä¸º12ï¼å®ç°äºç´¯å \n<\/script>\n\n\n\n# å½æ°å£°æä¸å½æ°è¡¨è¾¾å¼\n\nå¨jsä¸­æä»¬å¯ä»¥éè¿å³é®å­functionæ¥å£°æä¸ä¸ªå½æ°ï¼\n\n<script>\n  function abc(){\n    alert(123);\n  }\n  abc();\n<\/script>\n\n\næä»¬ä¹å¯ä»¥éè¿ä¸ä¸ª\"()\"æ¥å°è¿ä¸ªå£°æåæä¸ä¸ªè¡¨è¾¾å¼ï¼\n\n<script>\n  (function (){\n    alert(123);\n  })();                   //ç¶åéè¿()ç´æ¥è°ç¨åé¢çè¡¨è¾¾å¼å³å¯ï¼å æ­¤å½æ°å¯ä»¥ä¸å¿ååå­ï¼\n<\/script>\n\n\n\n# åãæ¨¡ååä»£ç ï¼åå°å¨å±åéçæ±¡æ\n\n<script>\n  var abc = (function(){      //abcä¸ºå¤é¨å¿åå½æ°çè¿åå¼\n    var a = 1;\n    return function(){\n      a++;\n      alert(a);\n    }\n  })();\n  abc();    //2 ï¼è°ç¨ä¸æ¬¡abcå½æ°ï¼å¶å®æ¯è°ç¨éé¢åé¨å½æ°çè¿åå¼    \n  abc();    //3\n<\/script>\n\n\n\n# äºãç§ææåçå­å¨\n\n<script>\n  var aaa = (function(){\n    var a = 1;\n    function bbb(){\n      a++;\n      alert(a);\n    }\n    function ccc(){\n      a++;\n      alert(a);\n    }\n    return {\n      b:bbb,             //jsonç»æ\n      c:ccc\n    }\n  })();\n  aaa.b();     //2\n  aaa.c()      //3\n<\/script>\n\n\n\n# å­.ä½¿ç¨å¿åå½æ°å®ç°ç´¯å \n\n//ä½¿ç¨å¿åå½æ°å®ç°å±é¨åéé©»çåå­ä¸­ï¼ä»èå®ç°ç´¯å \n\n<script type=\"text/javascript\">\n\n  function box(){\n    var age = 100;\n    return function(){          //å¿åå½æ°\n      age++;\n      return age;\n    };\n\n  } \n  var b = box();\n  alert(b());\n  alert(b());    //å³alert(box()())ï¼\n  alert(b());\n  alert(b);\n  b = nullï¼  //è§£é¤å¼ç¨ï¼ç­å¾åå¾åæ¶\n<\/script>\n\n\nè¿åº¦ä½¿ç¨é­åä¼å¯¼è´æ§è½çä¸éãå½æ°éæ¾å¿åå½æ°ï¼åäº§çäºé­å\n\n\n# ä¸ãå¨å¾ªç¯ä¸­ç´æ¥æ¾å°å¯¹åºåç´ çç´¢å¼\n\n<script>\n  window.onload = function(){\n    var aLi = document.getElementsByTagName('li');\n    for (var i=0;i<aLi.length;i++){\n      aLi[i].onclick = function(){        //å½ç¹å»æ¶forå¾ªç¯å·²ç»ç»æ\n        alert(i);\n      };\n    }\n  }\n<\/script>\n\n</head>\n<body>\n  <ul>\n    <li>123</li>\n    <li>456</li>\n    <li>789</li>\n    <li>010</li>\n  </ul>\n</body>\n</html>\n\n\n\n# å«ãä½¿ç¨é­åæ¹åä¸é¢ä»£ç \n\n<script>\n  window.onload = function(){\n    var aLi = document.getElementsByTagName('li');\n    for (var i=0;i<aLi.length;i++){\n      (function(i){\n        aLi[i].onclick = function(){\n          alert(i);\n        };\n      })(i);\n    }\n  };\n<\/script>\n\n</head>\n<body>\n  <ul>\n    <li>123</li>\n    <li>456</li>\n    <li>789</li>\n  </ul>\n</body>\n</html>\n\n\n\n# ä¹.åå­æ³é²é®é¢\n\nç±äºIEçjså¯¹è±¡åDOMå¯¹è±¡ä½¿ç¨ä¸åçåå¾æ¶éæ¹æ³ï¼å æ­¤é­åå¨IEä¸­ä¼å¯¼è´åå­æ³é²é®é¢ï¼ä¹å°±æ¯æ æ³éæ¯é©»çå¨åå­ä¸­çåç´ \n\nfunction closure(){\n    var oDiv = document.getElementById('oDiv');//oDivç¨å®ä¹åä¸ç´é©»çå¨åå­ä¸­\n    oDiv.onclick = function () {\n        alert('oDiv.innerHTML');//è¿éç¨oDivå¯¼è´åå­æ³é²\n    };\n}\nclosure();\n//æååºå°oDivè§£é¤å¼ç¨æ¥é¿ååå­æ³é²\nfunction closure(){\n    var oDiv = document.getElementById('oDiv');\n    var test = oDiv.innerHTML;\n    oDiv.onclick = function () {\n        alert(test);\n    };\n    oDiv = null;\n}\n",normalizedContent:"# é­åçå®ä¹\n\n * ççä¹¦ï¼å½æ°ä½åé¨çåéé½å¯ä»¥ä¿å­å¨å½æ°ä½ç¨ååï¼è¿ç§ç¹æ§ç§°ä¸ºé­åã\n * ä¸ªäººçè§£ï¼é­åæ¯æææè®¿é®å¦ä¸ä¸ªå½æ°ä½ç¨åä¸­çåéçå½æ°ï¼åå»ºé­åçæå¸¸è§çæ¹å¼å°±æ¯å¨ä¸ä¸ªå½æ°ååå»ºå¦ä¸ä¸ªå½æ°ï¼åé¨å½æ°å¯ä»¥è®¿é®å¤é¢å½æ°ä¸­çå±é¨åéï¼ä¸æ¦åé¨å½æ°è¿åæèè¢«å¼ç¨ï¼è¿ä¸ªå±é¨åéåä¼ä¸ç´ä¿çå¨åå­ä¸­\n\n\n# é­åæä¸ä¸ªç¹æ§ï¼\n\n1.å½æ°åµå¥å½æ°\n2.å½æ°åé¨å¯ä»¥å¼ç¨å¤é¨çåæ°ååé\n3.åæ°ååéä¸ä¼è¢«åå¾åæ¶æºå¶åæ¶\n\n\n\n# é­åä¼ç¼ºç¹\n\nç¼ºç¹\n\né­åçç¼ºç¹å°±æ¯å¸¸é©»åå­ï¼ä¼å¢å¤§åå­ä½¿ç¨éï¼ä½¿ç¨ä¸å½å¾å®¹æé æåå­æ³é²ã\n\nä¸è¬å½æ°æ§è¡å®æ¯åï¼å±é¨æ´»å¨å¯¹è±¡å°±è¢«éæ¯ï¼åå­ä¸­ä»ä»ä¿å­å¨å±ä½ç¨åãä½é­åçæåµä¸åï¼\n\nä¼ç¹åç¨å¤\n\n * æäºé­åä¹åï¼å¯ä»¥å¨å¤é¨ä½ç¨åè®¿é®åé¨ä½ç¨åçæå\n\n * å¸æä¸ä¸ªåéé¿æé©»æå¨åå­ä¸­\n\n * é¿åå¨å±åéçæ±¡æ\n\n * ç§ææåçå­å¨\n\n\n# vueæºç ä¸­é­åçåºç¨\n\n> å ä¸ºä½¿ç¨äº virtual dom çåå ï¼vue.jså·æäºè·¨å¹³å°çè½åï¼virtual dom ç»å½åªæ¯ä¸äº javascript å¯¹è±¡ç½¢äºï¼é£ä¹æç»æ¯å¦ä½è°ç¨ä¸åå¹³å°ç api çå¢ï¼è¿å°±éè¦ä¾èµä¸å±ééå±äºï¼å°ä¸åå¹³å°ç api å°è£å¨åï¼ä»¥åæ ·çæ¥å£å¯¹å¤æä¾ã\n\nfunction createpatchfunction(nodeops, modules) {\n  return function patch(vdom1, vdom2) {\n    // ...\n  }\n}\nconst patch = createpatchfunction(...)\n/**\nå ä¸º vue å¯ä»¥è¿è¡å¨å¤ä¸ªå¹³å°ä¸éè¿ nodeops æ¥åºåï¼patch ä¸­æè®¸å¤æä½èç¹çå½æ°ï¼å¦æç´æ¥åå¨ patch éé¢çè¯ï¼éè¦å¨ patch éé¢åä¸ç³»å if å¹³å°å¤æ­ï¼å¤æ¬¡æ§è¡ patch ä¼å¤æ­å¤æ¬¡ï¼é£ä¹å¦è¿éè¿é­åæè¿ä¸ªå¹³å°å·®å¼åªæ§è¡ä¸æ¬¡å°±å¤æ­åºæ¥ï¼ä»åä¸éè¦å¤æ­å°±å¥½äºã\n*/                    \nconst nodeops = {\n    settextcontent (text) {\n        if (platform === 'weex') {\n            node.parentnode.setattr('value', text);\n        } else if (platform === 'web') {\n            node.textcontent = text;\n        }\n    },\n    parentnode () {\n        //......\n    },\n    removechild () {\n        //......\n    },\n    nextsibling () {\n        //......\n    },\n    insertbefore () {\n        //......\n    }\n}\n\n\n\n# é­åä¸é«é¶å½æ°\n\n// å½æ°ä½ä¸ºè¿åå¼\nfunction fn() {\n    let a = 1\n    return function() {\n        console.log(a++)\n    }\n}\n\nlet fn1 = fn()\nfn1()\n\n// å½æ°ä½ä¸ºåæ°\n\n\n\né­åä¼ä½¿åéå§ç»ä¿å­å¨åå­ä¸­ï¼å¦æä¸å½ä½¿ç¨ä¼å¢å¤§åå­æ¶èã\n\n\n# javascriptçåå¾åæ¶åç\n\nï¼1ï¼ãå¨javascriptä¸­ï¼å¦æä¸ä¸ªå¯¹è±¡ä¸åè¢«å¼ç¨ï¼é£ä¹è¿ä¸ªå¯¹è±¡å°±ä¼è¢«gcåæ¶ï¼ ï¼2ï¼ãå¦æä¸¤ä¸ªå¯¹è±¡äºç¸å¼ç¨ï¼èä¸åè¢«ç¬¬3èæå¼ç¨ï¼é£ä¹è¿ä¸¤ä¸ªäºç¸å¼ç¨çå¯¹è±¡ä¹ä¼è¢«åæ¶ã\n\n\n# ä¸ãå¨å±åéçç´¯å \n\n<script>\n  var a = 1;\n  function abc(){\n    a++;\n    alert(a);\n  }\n  abc();              //2\n  abc();            //3\n<\/script>\n\n\n\n# äºãå±é¨åé\n\n<script>\n\n  function abc(){\n    var a = 1;\n    a++;\n    alert(a);\n  }\n  abc();                       //2\n  abc();                    //2\n<\/script>\n\n\né£ä¹æä¹æè½åå°åéaæ¢æ¯å±é¨åéåå¯ä»¥ç´¯å å¢ï¼\n\n\n# ä¸ãå±é¨åéçç´¯å \n\n<script>\n  function outer(){\n    var x=10;\n    return function(){             //å½æ°åµå¥å½æ°\n      x++;\n      alert(x);\n    }\n  }\n  var y = outer();              //å¤é¨å½æ°èµç»åéy;\n  y();                 //yå½æ°è°ç¨ä¸æ¬¡ï¼ç»æä¸º11ï¼ç¸å½äºouter()()ï¼\n  y();                //yå½æ°è°ç¨ç¬¬äºæ¬¡ï¼ç»æä¸º12ï¼å®ç°äºç´¯å \n<\/script>\n\n\n\n# å½æ°å£°æä¸å½æ°è¡¨è¾¾å¼\n\nå¨jsä¸­æä»¬å¯ä»¥éè¿å³é®å­functionæ¥å£°æä¸ä¸ªå½æ°ï¼\n\n<script>\n  function abc(){\n    alert(123);\n  }\n  abc();\n<\/script>\n\n\næä»¬ä¹å¯ä»¥éè¿ä¸ä¸ª\"()\"æ¥å°è¿ä¸ªå£°æåæä¸ä¸ªè¡¨è¾¾å¼ï¼\n\n<script>\n  (function (){\n    alert(123);\n  })();                   //ç¶åéè¿()ç´æ¥è°ç¨åé¢çè¡¨è¾¾å¼å³å¯ï¼å æ­¤å½æ°å¯ä»¥ä¸å¿ååå­ï¼\n<\/script>\n\n\n\n# åãæ¨¡ååä»£ç ï¼åå°å¨å±åéçæ±¡æ\n\n<script>\n  var abc = (function(){      //abcä¸ºå¤é¨å¿åå½æ°çè¿åå¼\n    var a = 1;\n    return function(){\n      a++;\n      alert(a);\n    }\n  })();\n  abc();    //2 ï¼è°ç¨ä¸æ¬¡abcå½æ°ï¼å¶å®æ¯è°ç¨éé¢åé¨å½æ°çè¿åå¼    \n  abc();    //3\n<\/script>\n\n\n\n# äºãç§ææåçå­å¨\n\n<script>\n  var aaa = (function(){\n    var a = 1;\n    function bbb(){\n      a++;\n      alert(a);\n    }\n    function ccc(){\n      a++;\n      alert(a);\n    }\n    return {\n      b:bbb,             //jsonç»æ\n      c:ccc\n    }\n  })();\n  aaa.b();     //2\n  aaa.c()      //3\n<\/script>\n\n\n\n# å­.ä½¿ç¨å¿åå½æ°å®ç°ç´¯å \n\n//ä½¿ç¨å¿åå½æ°å®ç°å±é¨åéé©»çåå­ä¸­ï¼ä»èå®ç°ç´¯å \n\n<script type=\"text/javascript\">\n\n  function box(){\n    var age = 100;\n    return function(){          //å¿åå½æ°\n      age++;\n      return age;\n    };\n\n  } \n  var b = box();\n  alert(b());\n  alert(b());    //å³alert(box()())ï¼\n  alert(b());\n  alert(b);\n  b = nullï¼  //è§£é¤å¼ç¨ï¼ç­å¾åå¾åæ¶\n<\/script>\n\n\nè¿åº¦ä½¿ç¨é­åä¼å¯¼è´æ§è½çä¸éãå½æ°éæ¾å¿åå½æ°ï¼åäº§çäºé­å\n\n\n# ä¸ãå¨å¾ªç¯ä¸­ç´æ¥æ¾å°å¯¹åºåç´ çç´¢å¼\n\n<script>\n  window.onload = function(){\n    var ali = document.getelementsbytagname('li');\n    for (var i=0;i<ali.length;i++){\n      ali[i].onclick = function(){        //å½ç¹å»æ¶forå¾ªç¯å·²ç»ç»æ\n        alert(i);\n      };\n    }\n  }\n<\/script>\n\n</head>\n<body>\n  <ul>\n    <li>123</li>\n    <li>456</li>\n    <li>789</li>\n    <li>010</li>\n  </ul>\n</body>\n</html>\n\n\n\n# å«ãä½¿ç¨é­åæ¹åä¸é¢ä»£ç \n\n<script>\n  window.onload = function(){\n    var ali = document.getelementsbytagname('li');\n    for (var i=0;i<ali.length;i++){\n      (function(i){\n        ali[i].onclick = function(){\n          alert(i);\n        };\n      })(i);\n    }\n  };\n<\/script>\n\n</head>\n<body>\n  <ul>\n    <li>123</li>\n    <li>456</li>\n    <li>789</li>\n  </ul>\n</body>\n</html>\n\n\n\n# ä¹.åå­æ³é²é®é¢\n\nç±äºieçjså¯¹è±¡ådomå¯¹è±¡ä½¿ç¨ä¸åçåå¾æ¶éæ¹æ³ï¼å æ­¤é­åå¨ieä¸­ä¼å¯¼è´åå­æ³é²é®é¢ï¼ä¹å°±æ¯æ æ³éæ¯é©»çå¨åå­ä¸­çåç´ \n\nfunction closure(){\n    var odiv = document.getelementbyid('odiv');//odivç¨å®ä¹åä¸ç´é©»çå¨åå­ä¸­\n    odiv.onclick = function () {\n        alert('odiv.innerhtml');//è¿éç¨odivå¯¼è´åå­æ³é²\n    };\n}\nclosure();\n//æååºå°odivè§£é¤å¼ç¨æ¥é¿ååå­æ³é²\nfunction closure(){\n    var odiv = document.getelementbyid('odiv');\n    var test = odiv.innerhtml;\n    odiv.onclick = function () {\n        alert(test);\n    };\n    odiv = null;\n}\n",charsets:{cjk:!0}},{title:"jsçæ°å¼èå´",frontmatter:{title:"jsçæ°å¼èå´",date:"2020-07-11T10:27:54.000Z",categories:"JavaScript"},regularPath:"/javascript/number.html",relativePath:"javascript/number.md",key:"v-4444465f",path:"/javascript/number.html",headers:[{level:2,title:"jsçæ°å¼èå´ä»¥åä¸ºä»ä¹",slug:"jsçæ°å¼èå´ä»¥åä¸ºä»ä¹",normalizedTitle:"jsçæ°å¼èå´ä»¥åä¸ºä»ä¹",charIndex:2},{level:3,title:"æ°å¼ç²¾åº¦",slug:"æ°å¼ç²¾åº¦",normalizedTitle:"æ°å¼ç²¾åº¦",charIndex:714}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"jsçæ°å¼èå´ä»¥åä¸ºä»ä¹ æ°å¼ç²¾åº¦",content:'# jsçæ°å¼èå´ä»¥åä¸ºä»ä¹\n\n> JavaScriptè½è¡¨ç¤ºå¹¶è¿è¡ç²¾ç¡®ç®æ¯è¿ç®çæ´æ°èå´ä¸ºï¼æ­£è´2ç53æ¬¡æ¹ï¼ä¹å³ä»æå°å¼-9007199254740992å°æå¤§å¼+9007199254740992ä¹é´çèå´ï¼å¯¹äºè¶è¿è¿ä¸ªèå´çæ´æ°ï¼JavaScriptä¾æ§å¯ä»¥è¿è¡è¿ç®ï¼ä½å´ä¸ä¿è¯è¿ç®ç»æçç²¾åº¦ã\n\n+"6145390195186705543"    // åºç°ç²¾åº¦é®é¢ï¼6145390195186705000\nBigInt("6145390195186705543" )+1n  //6145390195186705544n\n\n\nJavaScript åé¨ï¼æææ°å­é½æ¯ä»¥64ä½æµ®ç¹æ°å½¢å¼å¨å­ï¼å³ä½¿æ´æ°ä¹æ¯å¦æ­¤ãæä»¥ï¼1ä¸1.0æ¯ç¸åçï¼æ¯åä¸ä¸ªæ°ã\n\n1 === 1.0 // true\n\n\nç±äºæµ®ç¹æ°ä¸æ¯ç²¾ç¡®çå¼ï¼æä»¥æ¶åå°æ°çæ¯è¾åè¿ç®è¦ç¹å«å°å¿ã\n\n0.1 + 0.2 === 0.3\n// false\n\n//0.1 => 0.0001 1001 1001 1001â¦ï¼æ éå¾ªç¯ï¼\n//0.2 => 0.0011 0011 0011 0011â¦ï¼æ éå¾ªç¯ï¼\n\n//åç²¾åº¦æµ®ç¹æ°çå°æ°é¨åæå¤æ¯æ 52 ä½ï¼æä»¥ä¸¤èç¸å ä¹åå¾å°è¿ä¹ä¸ä¸² 0.0100110011001100110011001100110011001100110011001100å æµ®ç¹æ°å°æ°ä½çéå¶èæªæ­çäºè¿å¶æ°å­ï¼è¿æ¶åï¼æä»¬åæå®è½¬æ¢ä¸ºåè¿å¶ï¼å°±æäº0.30000000000000004ã\n\n0.3 / 0.1\n// 2.999999999999999\n\n(0.3 - 0.2) === (0.2 - 0.1)\n// false\n\n\n\n# æ°å¼ç²¾åº¦\n\næ ¹æ®å½éæ å IEEE 754ï¼JavaScript æµ®ç¹æ°ç64ä¸ªäºè¿å¶ä½ï¼ä»æå·¦è¾¹å¼å§ï¼æ¯è¿æ ·ç»æçã\n\n * ç¬¬1ä½ï¼ç¬¦å·ä½ï¼0è¡¨ç¤ºæ­£æ°ï¼1è¡¨ç¤ºè´æ° ï¼1ä½ï¼\n * ç¬¬2ä½å°ç¬¬12ä½ï¼ææ°é¨å ï¼11ä½ï¼\n * ç¬¬13ä½å°ç¬¬64ä½ï¼å°¾æ°é¨å ï¼52ä½ï¼\n\nç¬¦å·ä½å³å®äºä¸ä¸ªæ°çæ­£è´ï¼ææ°é¨åå³å®äºæ°å¼çå¤§å°ï¼å°æ°é¨åå³å®äºæ°å¼çç²¾åº¦ã\n\nIEEE 754 è§å®ï¼æææ°å­ç¬¬ä¸ä½é»è®¤æ»æ¯1ï¼ä¸ä¿å­å¨64ä½æµ®ç¹æ°ä¹ä¸­ãä¹å°±æ¯è¯´ï¼æææ°å­æ»æ¯1.xx...xxçå½¢å¼ï¼å¶ä¸­xx..xxçé¨åä¿å­å¨64ä½æµ®ç¹æ°ä¹ä¸­ï¼æé¿å¯è½ä¸º52ä½ãå æ­¤ï¼JavaScript æä¾çæææ°å­æé¿ä¸º53ä¸ªäºè¿å¶ä½ã\n\n(-1)^ç¬¦å·ä½ * 1.xx...xx * 2^ææ°ä½\n\nç²¾åº¦æå¤åªè½å°53ä¸ªäºè¿å¶ä½(æä¸ä½ä¸å¨æµ®ç¹æ°ä¸­)ï¼è¿æå³çï¼ç»å¯¹å¼å°äº2ç53æ¬¡æ¹çæ´æ°ï¼å³-(2^53-1)å°2^53-1ï¼é½å¯ä»¥ç²¾ç¡®è¡¨ç¤ºã\n\n2^0+2^1+...+2^52 = 2^53-1 \n',normalizedContent:'# jsçæ°å¼èå´ä»¥åä¸ºä»ä¹\n\n> javascriptè½è¡¨ç¤ºå¹¶è¿è¡ç²¾ç¡®ç®æ¯è¿ç®çæ´æ°èå´ä¸ºï¼æ­£è´2ç53æ¬¡æ¹ï¼ä¹å³ä»æå°å¼-9007199254740992å°æå¤§å¼+9007199254740992ä¹é´çèå´ï¼å¯¹äºè¶è¿è¿ä¸ªèå´çæ´æ°ï¼javascriptä¾æ§å¯ä»¥è¿è¡è¿ç®ï¼ä½å´ä¸ä¿è¯è¿ç®ç»æçç²¾åº¦ã\n\n+"6145390195186705543"    // åºç°ç²¾åº¦é®é¢ï¼6145390195186705000\nbigint("6145390195186705543" )+1n  //6145390195186705544n\n\n\njavascript åé¨ï¼æææ°å­é½æ¯ä»¥64ä½æµ®ç¹æ°å½¢å¼å¨å­ï¼å³ä½¿æ´æ°ä¹æ¯å¦æ­¤ãæä»¥ï¼1ä¸1.0æ¯ç¸åçï¼æ¯åä¸ä¸ªæ°ã\n\n1 === 1.0 // true\n\n\nç±äºæµ®ç¹æ°ä¸æ¯ç²¾ç¡®çå¼ï¼æä»¥æ¶åå°æ°çæ¯è¾åè¿ç®è¦ç¹å«å°å¿ã\n\n0.1 + 0.2 === 0.3\n// false\n\n//0.1 => 0.0001 1001 1001 1001â¦ï¼æ éå¾ªç¯ï¼\n//0.2 => 0.0011 0011 0011 0011â¦ï¼æ éå¾ªç¯ï¼\n\n//åç²¾åº¦æµ®ç¹æ°çå°æ°é¨åæå¤æ¯æ 52 ä½ï¼æä»¥ä¸¤èç¸å ä¹åå¾å°è¿ä¹ä¸ä¸² 0.0100110011001100110011001100110011001100110011001100å æµ®ç¹æ°å°æ°ä½çéå¶èæªæ­çäºè¿å¶æ°å­ï¼è¿æ¶åï¼æä»¬åæå®è½¬æ¢ä¸ºåè¿å¶ï¼å°±æäº0.30000000000000004ã\n\n0.3 / 0.1\n// 2.999999999999999\n\n(0.3 - 0.2) === (0.2 - 0.1)\n// false\n\n\n\n# æ°å¼ç²¾åº¦\n\næ ¹æ®å½éæ å ieee 754ï¼javascript æµ®ç¹æ°ç64ä¸ªäºè¿å¶ä½ï¼ä»æå·¦è¾¹å¼å§ï¼æ¯è¿æ ·ç»æçã\n\n * ç¬¬1ä½ï¼ç¬¦å·ä½ï¼0è¡¨ç¤ºæ­£æ°ï¼1è¡¨ç¤ºè´æ° ï¼1ä½ï¼\n * ç¬¬2ä½å°ç¬¬12ä½ï¼ææ°é¨å ï¼11ä½ï¼\n * ç¬¬13ä½å°ç¬¬64ä½ï¼å°¾æ°é¨å ï¼52ä½ï¼\n\nç¬¦å·ä½å³å®äºä¸ä¸ªæ°çæ­£è´ï¼ææ°é¨åå³å®äºæ°å¼çå¤§å°ï¼å°æ°é¨åå³å®äºæ°å¼çç²¾åº¦ã\n\nieee 754 è§å®ï¼æææ°å­ç¬¬ä¸ä½é»è®¤æ»æ¯1ï¼ä¸ä¿å­å¨64ä½æµ®ç¹æ°ä¹ä¸­ãä¹å°±æ¯è¯´ï¼æææ°å­æ»æ¯1.xx...xxçå½¢å¼ï¼å¶ä¸­xx..xxçé¨åä¿å­å¨64ä½æµ®ç¹æ°ä¹ä¸­ï¼æé¿å¯è½ä¸º52ä½ãå æ­¤ï¼javascript æä¾çæææ°å­æé¿ä¸º53ä¸ªäºè¿å¶ä½ã\n\n(-1)^ç¬¦å·ä½ * 1.xx...xx * 2^ææ°ä½\n\nç²¾åº¦æå¤åªè½å°53ä¸ªäºè¿å¶ä½(æä¸ä½ä¸å¨æµ®ç¹æ°ä¸­)ï¼è¿æå³çï¼ç»å¯¹å¼å°äº2ç53æ¬¡æ¹çæ´æ°ï¼å³-(2^53-1)å°2^53-1ï¼é½å¯ä»¥ç²¾ç¡®è¡¨ç¤ºã\n\n2^0+2^1+...+2^52 = 2^53-1 \n',charsets:{cjk:!0}},{title:"JSæ°æ®ç±»å",frontmatter:{title:"JSæ°æ®ç±»å",date:"2020-03-05T09:52:01.000Z",categories:"JavaScript"},regularPath:"/javascript/datatype.html",relativePath:"javascript/datatype.md",key:"v-90ff3d02",path:"/javascript/datatype.html",headers:[{level:2,title:"JSåºæ¬æ°æ®ç±»åä¸ç±»åè½¬æ¢",slug:"jsåºæ¬æ°æ®ç±»åä¸ç±»åè½¬æ¢",normalizedTitle:"jsåºæ¬æ°æ®ç±»åä¸ç±»åè½¬æ¢",charIndex:2},{level:3,title:"è½¬å­ç¬¦ä¸²",slug:"è½¬å­ç¬¦ä¸²",normalizedTitle:"è½¬å­ç¬¦ä¸²",charIndex:153},{level:3,title:"è½¬å¸å°å",slug:"è½¬å¸å°å",normalizedTitle:"è½¬å¸å°å",charIndex:489},{level:3,title:"ä¸éé¢",slug:"ä¸éé¢",normalizedTitle:"ä¸éé¢",charIndex:604},{level:3,title:"è½¬æ°å¼",slug:"è½¬æ°å¼",normalizedTitle:"è½¬æ°å¼",charIndex:759},{level:3,title:"è¿ç®ç¬¦å¸¦æ¥çå¼ºå¶ç±»åè½¬æ¢",slug:"è¿ç®ç¬¦å¸¦æ¥çå¼ºå¶ç±»åè½¬æ¢",normalizedTitle:"è¿ç®ç¬¦å¸¦æ¥çå¼ºå¶ç±»åè½¬æ¢",charIndex:1034},{level:2,title:"JSå¦ä½è¿è¡ç±»åå¤æ­",slug:"jså¦ä½è¿è¡ç±»åå¤æ­",normalizedTitle:"jså¦ä½è¿è¡ç±»åå¤æ­",charIndex:2026},{level:3,title:"ä¾ï¼å¤æ­æ°ç»",slug:"ä¾-å¤æ­æ°ç»",normalizedTitle:"ä¾ï¼å¤æ­æ°ç»",charIndex:4086},{level:2,title:"Symbol",slug:"symbol",normalizedTitle:"symbol",charIndex:100},{level:2,title:"Bigint",slug:"bigint",normalizedTitle:"bigint",charIndex:4519},{level:2,title:"ä»ä¹æåµä¸ a === a - 1",slug:"ä»ä¹æåµä¸-a-a-1",normalizedTitle:"ä»ä¹æåµä¸ a === a - 1",charIndex:4797},{level:2,title:"ä»ä¹æåµä¸ a==1&&a==2&&a==3ä¸ºtrueæç«",slug:"ä»ä¹æåµä¸-a-1-a-2-a-3ä¸ºtrueæç«",normalizedTitle:"ä»ä¹æåµä¸ a==1&amp;&amp;a==2&amp;&amp;a==3ä¸ºtrueæç«",charIndex:null}],lastUpdated:"2/6/2023, 6:11:44 PM",lastUpdatedTimestamp:1675678304e3,headersStr:"JSåºæ¬æ°æ®ç±»åä¸ç±»åè½¬æ¢ è½¬å­ç¬¦ä¸² è½¬å¸å°å ä¸éé¢ è½¬æ°å¼ è¿ç®ç¬¦å¸¦æ¥çå¼ºå¶ç±»åè½¬æ¢ JSå¦ä½è¿è¡ç±»åå¤æ­ ä¾ï¼å¤æ­æ°ç» Symbol Bigint ä»ä¹æåµä¸ a === a - 1 ä»ä¹æåµä¸ a==1&&a==2&&a==3ä¸ºtrueæç«",content:'# JSåºæ¬æ°æ®ç±»åä¸ç±»åè½¬æ¢\n\nES5åºæ¬æ5ç§ç®åæ°æ®ç±»åï¼Stringï¼Numberï¼Booleanï¼Nullï¼undefinedãä¸ç§å¤æçæ°æ®ç±»åObjectã\nES6æ°å¢ä¸ç§ç®åæ°æ®ç±»åï¼Symbol,è¿æBigInt\nJSæ¯å¨æç±»åè¯­è¨ï¼æä»¥ç±»åä¸åçæ¶åè¿è¡è¿ç®ä¼è¿è¡ç±»åè½¬æ¢ã\n\n\n\n# è½¬å­ç¬¦ä¸²\n\n * è½¬å­ç¬¦ä¸²å¯ä»¥çè§£ä¸º + ââï¼åºå±æ¯toStringæ¹æ³ï¼å¶ä¸­å¯¹è±¡è½¬ä¸º[object object]ï¼æ°ç»å»æ¬å·+ââ\n\n2+"3"          //Number(2).toString()+"3"\ntrue+"1"       //Boolean(true).toString()+"1"\n""+{}          //è¾åº[object object]\n""+{A:123}     //[object object]\n"123"=={toString(){return "123"}}    //trueï¼å ä¸ºéåäºtoStringæ¹æ³\n""+[]          //""\n""+[1,2,3]     //"1,2,3"\n\n\n\n# è½¬å¸å°å\n\nBoolean()ä¼ å¥åé\n\n0ï¼NaNï¼""ï¼nullï¼undefinedï¼falseç´æ¥è½¬æ¢æfalseï¼å¶ä½é½æ¯ç\n\n!!"123"       //true\n!!{}          //true\n\n\n\n# ä¸éé¢\n\nvar aLi = document.querySelectrAll("li")\nfor(let item,i = 0;item = aLi[i++];){  //æ¯æ¬¡èµå¼é½è¿åå½åå¼ï¼å½æåè¾åºundefinedæ¯è½¬å¸å°false\n        console.log(item)\n}\n\n\n\n# è½¬æ°å¼\n\nNumber()é¤äº0ï¼ââï¼falseä¼è½¬æ0ï¼trueè½¬æ1ï¼å¶ä½é½æ¯è°ç¨toSringè¥æ¯æ°å¼å½¢å¼å°±è½¬æ°å¼ï¼ä¸ç¶æ¯NaN\n\nNumber(NaN)        //NaN\nNumber("NaN")      //NaN\nNumber(0123)       //83\nNumber("0123")     //123\nNumber("Infinity") //Infinity\nNumber([123])      //123   [123].toString()\nNumber([123ï¼3])   //NaN   \n\n\n\n# è¿ç®ç¬¦å¸¦æ¥çå¼ºå¶ç±»åè½¬æ¢\n\næå­ç¬¦ä¸²æ¶å æ³ä¼æå¶ä½ç±»åè½¬æ¢ä¸ºå­ç¬¦ä¸²\n\n-ï¼*ï¼ãï¼%ä¼åè½¬æ°å¼ï¼+ é¤å¤\n\n"3"-"2"            //1\n3+2+"1"            //"51"\n"3"+2+1            //"321"\n"312"*1            //312\n123+null           //123+Number(null)\n[]+{}              //ä¸¤ä¸ªå¯¹è±¡ç¸å è°ç¨toStringï¼""+[object object] = [object object]\n{}+[]              //{}è§£æä¸ºä»£ç åï¼+[]ï¼ä¼åè½¬ä¸ºæ°å¼ï¼0\n// è³äºä¸ºä»ä¹è§£ææäºä»£ç åï¼åjså¼æçè§£æç¸å³ï¼å¨V8ï¼ChromeçJavaScriptå¼æä¸­ï¼å®æ£æ¥çç¬¬ä¸ä»¶äºä¸å¼å§æ¯å¦æ¯ {ï¼å¦ææ¯ï¼åè§£æä¸ºblockã\n[1,2]+[2,3]        //"1,22,3"\n[1] == "1"         // true\n\n\nå¨jsä¸­ï¼å æ³è¿ç®çè§åå¾ç®åï¼åªä¼è§¦åä¸¤ç§æåµ:\n\n>  1. number + number\n>  2. string + string\n> \n> é¤äºè¿ä¸¤ç§ï¼è¥ï¼\n> \n> å¦ææä¸ä¸ªæ°ä¸ºstringï¼åå°å¦ä¸ä¸ªæä½æ°éå¼çè½¬æ¢ä¸ºstringï¼ç¶åéè¿å­ç¬¦ä¸²æ¼æ¥å¾åºç»æã\n> \n> å¦æä¸ºå¸å°å¼è¿ç§ç®åçæ°æ®ç±»åï¼é£ä¹å°ä¼è½¬æ¢ä¸ºnumberç±»åæ¥è¿è¡è¿ç®å¾åºç»æã\n> \n> å¦ææä½æ°ä¸ºå¯¹è±¡æèæ¯æ°ç»è¿ç§å¤æçæ°æ®ç±»åï¼é£ä¹å°±å°ä¸¤ä¸ªæä½æ°é½è½¬æ¢ä¸ºå­ç¬¦ä¸²ï¼è¿è¡æ¼æ¥\n\ntrue + false   // 1\nnull + 10      // 10\nfalse + 20     // 20\nundefined + 30 // NaN\n1 + \'2\'        // "12"\nNaN + \'\'       // "NaN"\nundefined + \'\' // "undefined"\nnull + \'\'      // "null"\n\'\' - 3         // -3\n\n[20] - 10\n// è¿ç¨\n[20].toString()  // \'20\'\nNumber(\'20\')     // 20\n20 - 10          // 10\n\n\n\n# JSå¦ä½è¿è¡ç±»åå¤æ­\n\n * typeofå³é®å­ï¼å­å¨é®é¢\n\nconsole.log(typeof 2);               // number\nconsole.log(typeof true);            // boolean\nconsole.log(typeof \'str\');           // string\nconsole.log(typeof []);              // object     []æ°ç»çæ°æ®ç±»åå¨ typeof ä¸­è¢«è§£éä¸º object\nconsole.log(typeof function(){});    // function\nconsole.log(typeof {});              // object\nconsole.log(typeof undefined);       // undefined\nconsole.log(typeof null);            // object     null çæ°æ®ç±»åè¢« typeof è§£éä¸º object\n//è¿æ¯jsåå±è¿ç¨ä¸­è®¾è®¡èçéå¤§å¤±è¯¯ï¼æ©æåå¤æ´æ¹nullçç±»åä¸ºnullï¼ç±äºå½æ¶å·²ç»æå¤§éç½ç«ä½¿ç¨äºnullï¼å¦ææ´æ¹ï¼å°å¯¼è´å¾å¤ç½ç«çé»è¾åºç°æ¼æ´é®é¢ï¼å°±æ²¡ææ´æ¹è¿æ¥\nconsole.log(typeof new Boolean(true));   //object\nconsole.log(typeof new Number(1));       //object\nconsole.log(typeof new String("abc"));   //object\n//å¯¹äºä¸äºåå»ºçå¯¹è±¡ï¼å®ä»¬é½ä¼è¿å\'object\'\n\n\n * instanceofå³é®å­ï¼\n   \n   å¤æ­å¯¹è±¡æ¯å¦æ¯æä¸æ°æ®ç±»åï¼å¦Arrayï¼çå®ä¾ ï¼å­å¨é®é¢\n\nconsole.log(2 instanceof Number);                    // false\nconsole.log(true instanceof Boolean);                // false \nconsole.log(\'str\' instanceof String);                // false  \nconsole.log([] instanceof Array);                    // true\nconsole.log(function(){} instanceof Function);       // true\nconsole.log({} instanceof Object);                   // true  \n//é®é¢ï¼å­é¢å¼è¢«å®ä¾åæå¯ï¼å ä¸ºå­é¢å¼ä¸å­å¨__proto__\nconsole.log(new Number(2) instanceof Number);                    // true\nconsole.log(new Boolean(true) instanceof Boolean);                // true \nconsole.log(new String(\'str\') instanceof String);                // true  \n\n\n * Object.prototype.toString.call()\n\nObject.toString()//"function Object() { [native code] }"\nObject.prototype.toString()//"[object Object]"\n//Objectå¯¹è±¡åå®çååé¾ä¸åèªæä¸ä¸ªtoString()æ¹æ³ï¼ç¬¬ä¸ä¸ªè¿åçæ¯ä¸ä¸ªå½æ°ï¼ç¬¬äºä¸ªè¿åçæ¯å¼ç±»åã\n\nvar a = Object.prototype.toString;\n \nconsole.log(a.call(2));\nconsole.log(a.call(true));\nconsole.log(a.call(\'str\'));\nconsole.log(a.call([]));\nconsole.log(a.call(function(){}));\nconsole.log(a.call({}));\nconsole.log(a.call(undefined));\nconsole.log(a.call(null));\n\n// [object Number]\n// [object Boolean]\n// [object String]\n// [object Array]\n// [object Function]\n// [object Object]\n// [object Undefined]\n// [object Null]\n\n\n\n# ä¾ï¼å¤æ­æ°ç»\n\nconst arr = [1,2,3,4]\narr instanceof Array\nObject.prototype.toString.call(arr) === \'[object Array]\'\nArray.isArray(arr)\narr.__proto__.constructor === Array\narr.__proto__ === Array.prototype\n\n\n\n# Symbol\n\n * ä¸ºä»ä¹è¦ç¨Symbolï¼\n\nES5éé¢çå¯¹è±¡çå±æ§åæ¯å­ç¬¦ä¸²ï¼å½æä»¬ä½¿ç¨æ¶ï¼è¥æ³æ·»å ä¸äºæ°å±æ§ï¼å¯è½ä¼åºç°éåçæåµï¼äºæ¯æä»¬åå©Symbolæ¥çæä¸ä¸ªç¬ä¸æ äºçå¼ï¼è¿æ ·å°±å¯ä»¥é²æ­¢å±æ§åçå²çªäºã\n\n * Symbolæ¯ä»ä¹\n\nå®æ¯ES6æ°å¼å¥çä¸ç§åå§ç±»åæ°æ®ï¼ä½¿ç¨Symbolå¯ä»¥ç´æ¥çæä¸ä¸ªæ°çå¼ã\n\nlet a1 = Symbol("a")\nlet a2 = Symbol("a")\na1 === a2 // false\n\n\n\n# Bigint\n\nJS ä¸­çNumberç±»ååªè½å®å¨å°è¡¨ç¤º-9007199254740991 (-(2^53-1))Â å9007199254740991(2^53-1)ä¹é´çæ´æ°ï¼ä»»ä½è¶åºæ­¤èå´çæ´æ°å¼é½å¯è½å¤±å»ç²¾åº¦ã\n\n90099999999999992 == 90099999999999993 //true\n//ä½¿ç¨æ°çæ°æ®ç±»åBigInt  ç´æ¥å¨æ°å­åé¢å nå³å¯\n90099999999999992n == 90099999999999993n //false\ntypeof 90099999999999992n  //"bigint"\n\n\n\n# ä»ä¹æåµä¸ a === a - 1\n\n * æ­£è´Infinity\n * ä¸å¯è¢«ç²¾ç¡®è¡¨ç¤ºçå¼\n\n> å¨ JavaScript éï¼æ´æ°å¯ä»¥è¢«ç²¾ç¡®è¡¨ç¤ºçèå´æ¯ä»-2 ** 53 + 1å°2 ** 53 - 1ï¼å³-9007199254740991å°9007199254740991ãè¶è¿è¿ä¸ªæ°å¼çæ´æ°ï¼é½ä¸è½è¢«ç²¾ç¡®è¡¨ç¤ºã å¸¸é Number.MAX_SAFE_INTEGER å Number.MIN_SAFE_INTEGERåå«å¯¹åº9007199254740991å-9007199254740991ã\n\nlet a = Number.MIN_SAFE_INTEGER - 1;\nconsole.log(a === a - 1); // true\n\nlet a = Number.MAX_SAFE_INTEGER + 1;\nconsole.log(a === a - 1); // false\n\nlet a = Number.MAX_SAFE_INTEGER + 2;\nconsole.log(a === a - 1); // false\n\nlet a = Number.MAX_SAFE_INTEGER + 3;\nconsole.log(a === a - 1); // false\n\nlet a = Number.MAX_SAFE_INTEGER + 4;\nconsole.log(a === a - 1); // true\n\nlet a = Number.MAX_SAFE_INTEGER + 5;\nconsole.log(a === a - 1); // true\n\n\n * jsçæ°å¼èå´\n\n\n# ä»ä¹æåµä¸ a==1&&a==2&&a==3ä¸ºtrueæç«\n\nconst a = {\n  i: 1,\n  toString: function () {\n    return a.i++;\n  }\n}\nconsole.log(a == 1 && a == 2 && a == 3) // true\n\n// aæ¯ä¸ä¸ªå¯¹è±¡ï¼å¨å¤æ­æ¶ä¼è°ç¨toStringæ¹æ³ï¼èæä»¬ætoStringæ¹æ³éåäº\n// å¦ææ¹æ === åä¸æç«ï¼ç±»åä¸åç´æ¥è¿å falseï¼ä¸ä¼éå¼è½¬æ¢\n',normalizedContent:'# jsåºæ¬æ°æ®ç±»åä¸ç±»åè½¬æ¢\n\nes5åºæ¬æ5ç§ç®åæ°æ®ç±»åï¼stringï¼numberï¼booleanï¼nullï¼undefinedãä¸ç§å¤æçæ°æ®ç±»åobjectã\nes6æ°å¢ä¸ç§ç®åæ°æ®ç±»åï¼symbol,è¿æbigint\njsæ¯å¨æç±»åè¯­è¨ï¼æä»¥ç±»åä¸åçæ¶åè¿è¡è¿ç®ä¼è¿è¡ç±»åè½¬æ¢ã\n\n\n\n# è½¬å­ç¬¦ä¸²\n\n * è½¬å­ç¬¦ä¸²å¯ä»¥çè§£ä¸º + ââï¼åºå±æ¯tostringæ¹æ³ï¼å¶ä¸­å¯¹è±¡è½¬ä¸º[object object]ï¼æ°ç»å»æ¬å·+ââ\n\n2+"3"          //number(2).tostring()+"3"\ntrue+"1"       //boolean(true).tostring()+"1"\n""+{}          //è¾åº[object object]\n""+{a:123}     //[object object]\n"123"=={tostring(){return "123"}}    //trueï¼å ä¸ºéåäºtostringæ¹æ³\n""+[]          //""\n""+[1,2,3]     //"1,2,3"\n\n\n\n# è½¬å¸å°å\n\nboolean()ä¼ å¥åé\n\n0ï¼nanï¼""ï¼nullï¼undefinedï¼falseç´æ¥è½¬æ¢æfalseï¼å¶ä½é½æ¯ç\n\n!!"123"       //true\n!!{}          //true\n\n\n\n# ä¸éé¢\n\nvar ali = document.queryselectrall("li")\nfor(let item,i = 0;item = ali[i++];){  //æ¯æ¬¡èµå¼é½è¿åå½åå¼ï¼å½æåè¾åºundefinedæ¯è½¬å¸å°false\n        console.log(item)\n}\n\n\n\n# è½¬æ°å¼\n\nnumber()é¤äº0ï¼ââï¼falseä¼è½¬æ0ï¼trueè½¬æ1ï¼å¶ä½é½æ¯è°ç¨tosringè¥æ¯æ°å¼å½¢å¼å°±è½¬æ°å¼ï¼ä¸ç¶æ¯nan\n\nnumber(nan)        //nan\nnumber("nan")      //nan\nnumber(0123)       //83\nnumber("0123")     //123\nnumber("infinity") //infinity\nnumber([123])      //123   [123].tostring()\nnumber([123ï¼3])   //nan   \n\n\n\n# è¿ç®ç¬¦å¸¦æ¥çå¼ºå¶ç±»åè½¬æ¢\n\næå­ç¬¦ä¸²æ¶å æ³ä¼æå¶ä½ç±»åè½¬æ¢ä¸ºå­ç¬¦ä¸²\n\n-ï¼*ï¼ãï¼%ä¼åè½¬æ°å¼ï¼+ é¤å¤\n\n"3"-"2"            //1\n3+2+"1"            //"51"\n"3"+2+1            //"321"\n"312"*1            //312\n123+null           //123+number(null)\n[]+{}              //ä¸¤ä¸ªå¯¹è±¡ç¸å è°ç¨tostringï¼""+[object object] = [object object]\n{}+[]              //{}è§£æä¸ºä»£ç åï¼+[]ï¼ä¼åè½¬ä¸ºæ°å¼ï¼0\n// è³äºä¸ºä»ä¹è§£ææäºä»£ç åï¼åjså¼æçè§£æç¸å³ï¼å¨v8ï¼chromeçjavascriptå¼æä¸­ï¼å®æ£æ¥çç¬¬ä¸ä»¶äºä¸å¼å§æ¯å¦æ¯ {ï¼å¦ææ¯ï¼åè§£æä¸ºblockã\n[1,2]+[2,3]        //"1,22,3"\n[1] == "1"         // true\n\n\nå¨jsä¸­ï¼å æ³è¿ç®çè§åå¾ç®åï¼åªä¼è§¦åä¸¤ç§æåµ:\n\n>  1. number + number\n>  2. string + string\n> \n> é¤äºè¿ä¸¤ç§ï¼è¥ï¼\n> \n> å¦ææä¸ä¸ªæ°ä¸ºstringï¼åå°å¦ä¸ä¸ªæä½æ°éå¼çè½¬æ¢ä¸ºstringï¼ç¶åéè¿å­ç¬¦ä¸²æ¼æ¥å¾åºç»æã\n> \n> å¦æä¸ºå¸å°å¼è¿ç§ç®åçæ°æ®ç±»åï¼é£ä¹å°ä¼è½¬æ¢ä¸ºnumberç±»åæ¥è¿è¡è¿ç®å¾åºç»æã\n> \n> å¦ææä½æ°ä¸ºå¯¹è±¡æèæ¯æ°ç»è¿ç§å¤æçæ°æ®ç±»åï¼é£ä¹å°±å°ä¸¤ä¸ªæä½æ°é½è½¬æ¢ä¸ºå­ç¬¦ä¸²ï¼è¿è¡æ¼æ¥\n\ntrue + false   // 1\nnull + 10      // 10\nfalse + 20     // 20\nundefined + 30 // nan\n1 + \'2\'        // "12"\nnan + \'\'       // "nan"\nundefined + \'\' // "undefined"\nnull + \'\'      // "null"\n\'\' - 3         // -3\n\n[20] - 10\n// è¿ç¨\n[20].tostring()  // \'20\'\nnumber(\'20\')     // 20\n20 - 10          // 10\n\n\n\n# jså¦ä½è¿è¡ç±»åå¤æ­\n\n * typeofå³é®å­ï¼å­å¨é®é¢\n\nconsole.log(typeof 2);               // number\nconsole.log(typeof true);            // boolean\nconsole.log(typeof \'str\');           // string\nconsole.log(typeof []);              // object     []æ°ç»çæ°æ®ç±»åå¨ typeof ä¸­è¢«è§£éä¸º object\nconsole.log(typeof function(){});    // function\nconsole.log(typeof {});              // object\nconsole.log(typeof undefined);       // undefined\nconsole.log(typeof null);            // object     null çæ°æ®ç±»åè¢« typeof è§£éä¸º object\n//è¿æ¯jsåå±è¿ç¨ä¸­è®¾è®¡èçéå¤§å¤±è¯¯ï¼æ©æåå¤æ´æ¹nullçç±»åä¸ºnullï¼ç±äºå½æ¶å·²ç»æå¤§éç½ç«ä½¿ç¨äºnullï¼å¦ææ´æ¹ï¼å°å¯¼è´å¾å¤ç½ç«çé»è¾åºç°æ¼æ´é®é¢ï¼å°±æ²¡ææ´æ¹è¿æ¥\nconsole.log(typeof new boolean(true));   //object\nconsole.log(typeof new number(1));       //object\nconsole.log(typeof new string("abc"));   //object\n//å¯¹äºä¸äºåå»ºçå¯¹è±¡ï¼å®ä»¬é½ä¼è¿å\'object\'\n\n\n * instanceofå³é®å­ï¼\n   \n   å¤æ­å¯¹è±¡æ¯å¦æ¯æä¸æ°æ®ç±»åï¼å¦arrayï¼çå®ä¾ ï¼å­å¨é®é¢\n\nconsole.log(2 instanceof number);                    // false\nconsole.log(true instanceof boolean);                // false \nconsole.log(\'str\' instanceof string);                // false  \nconsole.log([] instanceof array);                    // true\nconsole.log(function(){} instanceof function);       // true\nconsole.log({} instanceof object);                   // true  \n//é®é¢ï¼å­é¢å¼è¢«å®ä¾åæå¯ï¼å ä¸ºå­é¢å¼ä¸å­å¨__proto__\nconsole.log(new number(2) instanceof number);                    // true\nconsole.log(new boolean(true) instanceof boolean);                // true \nconsole.log(new string(\'str\') instanceof string);                // true  \n\n\n * object.prototype.tostring.call()\n\nobject.tostring()//"function object() { [native code] }"\nobject.prototype.tostring()//"[object object]"\n//objectå¯¹è±¡åå®çååé¾ä¸åèªæä¸ä¸ªtostring()æ¹æ³ï¼ç¬¬ä¸ä¸ªè¿åçæ¯ä¸ä¸ªå½æ°ï¼ç¬¬äºä¸ªè¿åçæ¯å¼ç±»åã\n\nvar a = object.prototype.tostring;\n \nconsole.log(a.call(2));\nconsole.log(a.call(true));\nconsole.log(a.call(\'str\'));\nconsole.log(a.call([]));\nconsole.log(a.call(function(){}));\nconsole.log(a.call({}));\nconsole.log(a.call(undefined));\nconsole.log(a.call(null));\n\n// [object number]\n// [object boolean]\n// [object string]\n// [object array]\n// [object function]\n// [object object]\n// [object undefined]\n// [object null]\n\n\n\n# ä¾ï¼å¤æ­æ°ç»\n\nconst arr = [1,2,3,4]\narr instanceof array\nobject.prototype.tostring.call(arr) === \'[object array]\'\narray.isarray(arr)\narr.__proto__.constructor === array\narr.__proto__ === array.prototype\n\n\n\n# symbol\n\n * ä¸ºä»ä¹è¦ç¨symbolï¼\n\nes5éé¢çå¯¹è±¡çå±æ§åæ¯å­ç¬¦ä¸²ï¼å½æä»¬ä½¿ç¨æ¶ï¼è¥æ³æ·»å ä¸äºæ°å±æ§ï¼å¯è½ä¼åºç°éåçæåµï¼äºæ¯æä»¬åå©symbolæ¥çæä¸ä¸ªç¬ä¸æ äºçå¼ï¼è¿æ ·å°±å¯ä»¥é²æ­¢å±æ§åçå²çªäºã\n\n * symbolæ¯ä»ä¹\n\nå®æ¯es6æ°å¼å¥çä¸ç§åå§ç±»åæ°æ®ï¼ä½¿ç¨symbolå¯ä»¥ç´æ¥çæä¸ä¸ªæ°çå¼ã\n\nlet a1 = symbol("a")\nlet a2 = symbol("a")\na1 === a2 // false\n\n\n\n# bigint\n\njs ä¸­çnumberç±»ååªè½å®å¨å°è¡¨ç¤º-9007199254740991 (-(2^53-1))Â å9007199254740991(2^53-1)ä¹é´çæ´æ°ï¼ä»»ä½è¶åºæ­¤èå´çæ´æ°å¼é½å¯è½å¤±å»ç²¾åº¦ã\n\n90099999999999992 == 90099999999999993 //true\n//ä½¿ç¨æ°çæ°æ®ç±»åbigint  ç´æ¥å¨æ°å­åé¢å nå³å¯\n90099999999999992n == 90099999999999993n //false\ntypeof 90099999999999992n  //"bigint"\n\n\n\n# ä»ä¹æåµä¸ a === a - 1\n\n * æ­£è´infinity\n * ä¸å¯è¢«ç²¾ç¡®è¡¨ç¤ºçå¼\n\n> å¨ javascript éï¼æ´æ°å¯ä»¥è¢«ç²¾ç¡®è¡¨ç¤ºçèå´æ¯ä»-2 ** 53 + 1å°2 ** 53 - 1ï¼å³-9007199254740991å°9007199254740991ãè¶è¿è¿ä¸ªæ°å¼çæ´æ°ï¼é½ä¸è½è¢«ç²¾ç¡®è¡¨ç¤ºã å¸¸é number.max_safe_integer å number.min_safe_integeråå«å¯¹åº9007199254740991å-9007199254740991ã\n\nlet a = number.min_safe_integer - 1;\nconsole.log(a === a - 1); // true\n\nlet a = number.max_safe_integer + 1;\nconsole.log(a === a - 1); // false\n\nlet a = number.max_safe_integer + 2;\nconsole.log(a === a - 1); // false\n\nlet a = number.max_safe_integer + 3;\nconsole.log(a === a - 1); // false\n\nlet a = number.max_safe_integer + 4;\nconsole.log(a === a - 1); // true\n\nlet a = number.max_safe_integer + 5;\nconsole.log(a === a - 1); // true\n\n\n * jsçæ°å¼èå´\n\n\n# ä»ä¹æåµä¸ a==1&&a==2&&a==3ä¸ºtrueæç«\n\nconst a = {\n  i: 1,\n  tostring: function () {\n    return a.i++;\n  }\n}\nconsole.log(a == 1 && a == 2 && a == 3) // true\n\n// aæ¯ä¸ä¸ªå¯¹è±¡ï¼å¨å¤æ­æ¶ä¼è°ç¨tostringæ¹æ³ï¼èæä»¬ætostringæ¹æ³éåäº\n// å¦ææ¹æ === åä¸æç«ï¼ç±»åä¸åç´æ¥è¿å falseï¼ä¸ä¼éå¼è½¬æ¢\n',charsets:{cjk:!0}},{title:"åååååé¾",frontmatter:{},regularPath:"/javascript/prototype.html",relativePath:"javascript/prototype.md",key:"v-38e6942a",path:"/javascript/prototype.html",headers:[{level:2,title:"ååé¾ç»§æ¿",slug:"ååé¾ç»§æ¿",normalizedTitle:"ååé¾ç»§æ¿",charIndex:393},{level:2,title:"æé å½æ°ç»§æ¿",slug:"æé å½æ°ç»§æ¿",normalizedTitle:"æé å½æ°ç»§æ¿",charIndex:646},{level:2,title:"ç»åç»§æ¿",slug:"ç»åç»§æ¿",normalizedTitle:"ç»åç»§æ¿",charIndex:942},{level:2,title:"ååå¼ç»§æ¿",slug:"ååå¼ç»§æ¿",normalizedTitle:"ååå¼ç»§æ¿",charIndex:1302},{level:2,title:"å¯çå¼ç»§æ¿",slug:"å¯çå¼ç»§æ¿",normalizedTitle:"å¯çå¼ç»§æ¿",charIndex:1553},{level:2,title:"å¯çç»åå¼ç»§æ¿",slug:"å¯çç»åå¼ç»§æ¿",normalizedTitle:"å¯çç»åå¼ç»§æ¿",charIndex:1920}],lastUpdated:"2/27/2023, 5:18:11 PM",lastUpdatedTimestamp:1677489491e3,headersStr:"ååé¾ç»§æ¿ æé å½æ°ç»§æ¿ ç»åç»§æ¿ ååå¼ç»§æ¿ å¯çå¼ç»§æ¿ å¯çç»åå¼ç»§æ¿",content:'# åååååé¾\n\n * ååï¼https://blog.csdn.net/u012468376/article/details/53121081\n * ååé¾ï¼https://blog.csdn.net/u012468376/article/details/53127929\n * ObjectåFunctionå¾ç¤º\n\nFunction.prototype.a = () => console.log(1);\nObject.prototype.b = () => console.log(2);\nfunction A() {};\nvar a = new A(); // è®°ä½ new è¿åçæ¯å¯¹è±¡\na.a(); // not a function\na.b(); // 2\n\nlet fun = function x() {}\nfun.a() //1\nfun.b() //2\n\n\n\n# ååé¾ç»§æ¿\n\nfunction Father() {\n    this.name = "é©¬äº"\n}\n\nfunction Son() {\n\n}\n\nSon.prototype = new Father()\nlet son = new Son()\n\nconsole.log(son.name) // é©¬äº\nson.__proto__ // Father {name: "é©¬äº"}\nson instanceof Father // true\n\n// 1. æ æ³ä¼ å 2. ç¶ç±»å®ä¾å±æ§è¢«ææå­ç±»å®ä¾å±äº«\n\n\n\n# æé å½æ°ç»§æ¿\n\nfunction Father(name) {\n    this.name = name\n}\n\nfunction Son(name, age) {\n    this.age = age\n    Father.call(this, name)\n}\n\nlet son = new Son("é©¬äº", 18)\n\nconsole.log(son) // Son {age: 18, name: "é©¬äº"}\n\n// 1. å©ç¨callå®ç°äºä¼ å \n// 2. son instanceof Father ä¸º falseï¼ä¸æ¯çæ­£çç»§æ¿ï¼æä»¥ Father ååä¸­çå±æ§æ¿ä¸å°\n\n\n\n# ç»åç»§æ¿\n\nfunction Father(name) {\n    this.name = name\n    Father.prototype.eat = function() {\n        console.log("åä¸è¥¿")\n    }\n}\n\nfunction Son(name, age) {\n    this.age = age\n    Father.call(this, name)\n}\n\nSon.prototype = new Father()\n\nlet son = new Son("é©¬äº", 18)\n\nconsole.log(son) // Son {age: 18, name: "é©¬äº"}\nson.eat() // åä¸è¥¿\nson instanceof Father // true\n\n\n\n# ååå¼ç»§æ¿\n\nfunction inheritObj(o) {\n    function F() {}\n    F.prototype = o\n    return new F()\n}\n\nlet book = {\n    name: "js book"\n}\n\nlet ajaxBook = inheritObj(book)\n\najaxBook.name // "js book"\najaxBook.__proto__ // {name: "js book"}\n\n// å°±æ¯å¯¹ååé¾ç»§æ¿çå°è£\n\n\n\n# å¯çå¼ç»§æ¿\n\nfunction inheritObj(o) {\n    function F() {}\n    F.prototype = o\n    return new F()\n}\n\nlet book = {\n    name: "js book"\n}\n\nfunction creteBook(obj){\n    var o = inheritObj(obj)  //ä¸ä»æç¶ç±»ä¸­çå±æ§åæ¹æ³\n    o.getName = function() {  //è¿æ·»å äºæ°çå±æ§åæ¹æ³\n        console.log(this.name)\n    }\n    return o\n}\n\nlet ajaxBook = new creteBook(book)\n\najaxBook.getName() // js book\n\n\n\n# å¯çç»åå¼ç»§æ¿\n\nfunction inheritObject(o){\n    function F(){}\n    F.prototype = o\n    return new F()\n}\nfunction inheritPrototype(subClass, superClass){\n    var p = inheritObject(superClass.prototype)\n    p.constructor = subClass\n    subClass.prototype = p\n}\n//ç¶ç±»\nfunction SuperClass(name){\n    this.name = name\n}\n//å­ç±»\nfunction SubClass(name,time){\n    //æé å½æ°å¼ç»§æ¿\n    SuperClass.call(this,name)\n    this.time = time\n}\n//å¯çå¼ç»§æ¿ç¶ç±»åå\ninheritPrototype(subClass,superClass)\n',normalizedContent:'# åååååé¾\n\n * ååï¼https://blog.csdn.net/u012468376/article/details/53121081\n * ååé¾ï¼https://blog.csdn.net/u012468376/article/details/53127929\n * objectåfunctionå¾ç¤º\n\nfunction.prototype.a = () => console.log(1);\nobject.prototype.b = () => console.log(2);\nfunction a() {};\nvar a = new a(); // è®°ä½ new è¿åçæ¯å¯¹è±¡\na.a(); // not a function\na.b(); // 2\n\nlet fun = function x() {}\nfun.a() //1\nfun.b() //2\n\n\n\n# ååé¾ç»§æ¿\n\nfunction father() {\n    this.name = "é©¬äº"\n}\n\nfunction son() {\n\n}\n\nson.prototype = new father()\nlet son = new son()\n\nconsole.log(son.name) // é©¬äº\nson.__proto__ // father {name: "é©¬äº"}\nson instanceof father // true\n\n// 1. æ æ³ä¼ å 2. ç¶ç±»å®ä¾å±æ§è¢«ææå­ç±»å®ä¾å±äº«\n\n\n\n# æé å½æ°ç»§æ¿\n\nfunction father(name) {\n    this.name = name\n}\n\nfunction son(name, age) {\n    this.age = age\n    father.call(this, name)\n}\n\nlet son = new son("é©¬äº", 18)\n\nconsole.log(son) // son {age: 18, name: "é©¬äº"}\n\n// 1. å©ç¨callå®ç°äºä¼ å \n// 2. son instanceof father ä¸º falseï¼ä¸æ¯çæ­£çç»§æ¿ï¼æä»¥ father ååä¸­çå±æ§æ¿ä¸å°\n\n\n\n# ç»åç»§æ¿\n\nfunction father(name) {\n    this.name = name\n    father.prototype.eat = function() {\n        console.log("åä¸è¥¿")\n    }\n}\n\nfunction son(name, age) {\n    this.age = age\n    father.call(this, name)\n}\n\nson.prototype = new father()\n\nlet son = new son("é©¬äº", 18)\n\nconsole.log(son) // son {age: 18, name: "é©¬äº"}\nson.eat() // åä¸è¥¿\nson instanceof father // true\n\n\n\n# ååå¼ç»§æ¿\n\nfunction inheritobj(o) {\n    function f() {}\n    f.prototype = o\n    return new f()\n}\n\nlet book = {\n    name: "js book"\n}\n\nlet ajaxbook = inheritobj(book)\n\najaxbook.name // "js book"\najaxbook.__proto__ // {name: "js book"}\n\n// å°±æ¯å¯¹ååé¾ç»§æ¿çå°è£\n\n\n\n# å¯çå¼ç»§æ¿\n\nfunction inheritobj(o) {\n    function f() {}\n    f.prototype = o\n    return new f()\n}\n\nlet book = {\n    name: "js book"\n}\n\nfunction cretebook(obj){\n    var o = inheritobj(obj)  //ä¸ä»æç¶ç±»ä¸­çå±æ§åæ¹æ³\n    o.getname = function() {  //è¿æ·»å äºæ°çå±æ§åæ¹æ³\n        console.log(this.name)\n    }\n    return o\n}\n\nlet ajaxbook = new cretebook(book)\n\najaxbook.getname() // js book\n\n\n\n# å¯çç»åå¼ç»§æ¿\n\nfunction inheritobject(o){\n    function f(){}\n    f.prototype = o\n    return new f()\n}\nfunction inheritprototype(subclass, superclass){\n    var p = inheritobject(superclass.prototype)\n    p.constructor = subclass\n    subclass.prototype = p\n}\n//ç¶ç±»\nfunction superclass(name){\n    this.name = name\n}\n//å­ç±»\nfunction subclass(name,time){\n    //æé å½æ°å¼ç»§æ¿\n    superclass.call(this,name)\n    this.time = time\n}\n//å¯çå¼ç»§æ¿ç¶ç±»åå\ninheritprototype(subclass,superclass)\n',charsets:{cjk:!0}},{title:"è°è°JavaScriptçä½ç¨å",frontmatter:{title:"è°è°JavaScriptçä½ç¨å",date:"2018-11-01T10:00:54.000Z",categories:"JavaScript"},regularPath:"/javascript/scope.html",relativePath:"javascript/scope.md",key:"v-30a98ff2",path:"/javascript/scope.html",headers:[{level:3,title:"å¨å±ä½ç¨å",slug:"å¨å±ä½ç¨å",normalizedTitle:"å¨å±ä½ç¨å",charIndex:2},{level:3,title:"å½æ°ä½ç¨å",slug:"å½æ°ä½ç¨å",normalizedTitle:"å½æ°ä½ç¨å",charIndex:857},{level:3,title:"åçº§ä½ç¨å",slug:"åçº§ä½ç¨å",normalizedTitle:"åçº§ä½ç¨å",charIndex:1869},{level:3,title:"è¯æ³ä½ç¨å",slug:"è¯æ³ä½ç¨å",normalizedTitle:"è¯æ³ä½ç¨å",charIndex:2736},{level:3,title:"å¨æä½ç¨å",slug:"å¨æä½ç¨å",normalizedTitle:"å¨æä½ç¨å",charIndex:5868}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"å¨å±ä½ç¨å å½æ°ä½ç¨å åçº§ä½ç¨å è¯æ³ä½ç¨å å¨æä½ç¨å",content:"# å¨å±ä½ç¨å\n\nä½ç¨åï¼æ¯æåéççå½å¨æï¼ä¸ä¸ªåéå¨åªäºèå´åä¿æä¸å®å¼ï¼ã\n\n> å¨å±åéï¼\n> \n> çå½å¨æå°å­å¨äºæ´ä¸ªç¨åºä¹åã\n> \n> è½è¢«ç¨åºä¸­ä»»ä½å½æ°æèæ¹æ³è®¿é®ã\n> \n> å¨ JavaScript åé»è®¤æ¯å¯ä»¥è¢«ä¿®æ¹çã\n\nå¨å±åéï¼è½ç¶å¥½ç¨ï¼ä½æ¯æ¯éå¸¸å¯æçï¼è¿æ¯ææç¨åºåå¬è®¤çäºå®ã\n\n# æ¾å¼å£°æï¼\n\nå¸¦æå³é®å­ var çå£°æï¼\n\n<script type=\"text/javascript\">\n\n    var testValue = 123;\n\n    var testFunc = function () { console.log('just test') };\n\n    /**---------å¨å±åéä¼æè½½å° window å¯¹è±¡ä¸------------**/\n\n    console.log(window.testFunc)\t\t// Æ () { console.log('just test') }\n\n    console.log(window.testValue)\t\t// 123\n    \n<\/script>\nå¤å¶ä»£ç \n\n\nå¶å®ï¼æä»¬åçå½æ°å¦æä¸ç»è¿å°è£ï¼ä¹ä¼æ¯å¨å±åéï¼ä»ççå½å¨æä¹å°±æ¯å¨å±ä½ç¨åï¼\n\n# éå¼å£°æï¼\n\nä¸å¸¦æå£°æå³é®å­çåéï¼JS ä¼é»è®¤å¸®ä½ å£°æä¸ä¸ªå¨å±åéï¼ï¼ï¼\n\n<script type=\"text/javascript\">\n\n    function foo(value) {\n\n      result = value + 1;\t // æ²¡æç¨ var ä¿®é¥°\n\n      return result;\n    };\n\n    foo(123);\t\t\t\t// 124\n    \n    console.log(window.result);\t\t\t// 124 <=  æå¨äº windowå¨å±å¯¹è±¡ä¸ \n    \n<\/script>\nå¤å¶ä»£ç \n\n\nç°å¨ï¼åé result è¢«æè½½å° window å¯¹è±¡ä¸äºï¼ï¼ï¼\n\n\n# å½æ°ä½ç¨å\n\nå½æ°ä½ç¨ååï¼å¯¹å¤æ¯å°é­çï¼ä»å¤å±çä½ç¨åæ æ³ç´æ¥è®¿é®å½æ°åé¨çä½ç¨åï¼ï¼ï¼\n\nfunction bar() {\n  var testValue = 'inner';\n}\n\nconsole.log(testValue);\t\t// æ¥éï¼ReferenceError: testValue is not defined\n\n\n# éè¿ return è®¿é®å½æ°åé¨åéï¼\n\nfunction bar(value) {\n  var testValue = 'inner';\n  \n  return testValue + value;\n}\n\nconsole.log(bar('fun'));\t\t// \"innerfun\"\nå¤å¶ä»£ç \n\n\nå½æ°å°±åä¸ä¸ªå·¥åï¼æä»¬è¾å¥ä¸äºä¸è¥¿ï¼å®å¨åé¨å å·¥ï¼ç¶åç»æä»¬ä¸ä¸ªå å·¥äº§ç©ï¼\n\n# éè¿ é­å è®¿é®å½æ°åé¨åéï¼\n\nfunction bar(value) {\n  var testValue = 'inner';\n  \n  var rusult = testValue + value;\n  \n  function innser() {\n     return rusult;\n  };\n  \n  return innser();\n}\n\nconsole.log(bar('fun'));\t\t// \"innerfun\"\n\n\nå³äºé­åï¼æä¸ä¼å¨è¿ç¯æç« è¿å¤æè¿°ï¼å ä¸ºï¼æ³è¦æè¿°é­åï¼æ¬èº«éè¦è·æ¬æç« ä¸æ ·çé¿åº¦ï¼\n\n# ç«å³æ§è¡å½æ°ï¼\n\nè¿æ¯ä¸ªå¾å®ç¨çå½æ°ï¼å¾å¤åºé½ç¨å®åç¦»å¨å±ä½ç¨åï¼å½¢æä¸ä¸ªåç¬çå½æ°ä½ç¨åï¼\n\n<script type=\"text/javascript\">\n\n    (function() {\n\n      var testValue = 123;\n\n      var testFunc = function () { console.log('just test'); };\n\n    })();\n\n    console.log(window.testValue);\t\t// undefined\n    \n    console.log(window.testFunc);\t\t// undefined\n    \n<\/script>\n\n\nå®è½å¤èªå¨æ§è¡ (function() { //... })() éé¢åè£¹çåå®¹ï¼è½å¤å¾å¥½å°æ¶é¤å¨å±åéçå½±åï¼\n\n\n# åçº§ä½ç¨å\n\nå¨ ES6 ä¹åï¼æ¯æ²¡æåçº§ä½ç¨åçæ¦å¿µçãå¦æä½ æ C++ æè Java ç»éªï¼æ³å¿ä½ å¯¹åçº§ä½ç¨åå¹¶ä¸éçï¼\n\nfor(var i = 0; i < 5; i++) {\n  // ...\n}\n\nconsole.log(i)\t\t\t\t// 5\n\n\nå¾ææ¾ï¼ç¨ var å³é®å­å£°æçåéï¼å¨ for å¾ªç¯ä¹åä»ç¶è¢«ä¿å­è¿ä¸ªä½ç¨åéï¼\n\nè¿å¯ä»¥è¯´æï¼ for() { }ä»ç¶å¨ï¼å¨å±ä½ç¨åéï¼å¹¶æ²¡æäº§çåå½æ°ä½ç¨åä¸æ ·çå°é­ææï¼\n\nå¦ææ³è¦å®ç° åçº§ä½ç¨å é£ä¹æä»¬éè¦ç¨ let å³é®å­å£°æï¼ï¼ï¼\n\nfor(let i = 0; i < 5; i++) {\n  // ...\n}\n\nconsole.log(i)\t\t\t\t// æ¥éï¼ReferenceError: i is not defined\n\n\nå¨ for å¾ªç¯æ§è¡å®æ¯ä¹å i åéå°±è¢«éæ¾äºï¼å®å·²ç»æ¶å¤±äºï¼ï¼ï¼\n\nåæ ·è½å½¢æåçº§ä½ç¨åçè¿æ const å³é®å­ï¼\n\nif (true) {\n  const a = 'inner';\n}\n\nconsole.log(a);\t\t\t\t// æ¥éï¼ReferenceError: a is not defined\n\n\nlet å const å³é®å­ï¼åå»ºåçº§ä½ç¨åçæ¡ä»¶æ¯å¿é¡»æä¸ä¸ª { } åè£¹ï¼\n\n{\n  let a = 'inner';\n}\n  \nif (true) {\n   let b = 'inner'; \n}\n\nvar i = 0;\n\n// ......\n\n\nä¸è¦å°çåçº§ä½ç¨åï¼å®è½å¸®ä½ åå¾å¤äºæï¼ä¸¾ä¸ªæ å­ï¼\n\nä¸¾ä¸ä¸ªé¢è¯ä¸­å¸¸è§çä¾å­ï¼\n\nfor(var i = 0; i < 5; i++) {\n  setTimeout(function() {\n     console.log(i);\t\t\t// 5 5 5 5 5\n  }, 200);\n};\n\n\nè¿å ä¹æ¯ä½ç¨åçå¿èé¢ç®ï¼ä½ ä¼è§å¾è¿ç§ç»æå¾å¥æªï¼ä½æ¯äºå®å°±æ¯è¿ä¹åçäºï¼\n\nè¿éç i æ¯å¨å¨å±ä½ç¨åéé¢çï¼åªå­å¨ 1 ä¸ªå¼ï¼ç­å°åè°å½æ°æ§è¡æ¶ï¼ç¨è¯æ³ä½ç¨åæè·ç i å°±åªè½æ¯ 5ï¼\n\nå ä¸ºè¿ä¸ªå¾ªç¯è®¡ç®ç i å¼å¨åè°å½æ°ç»æä¹åå°±å·²ç»æ§è¡å° 5 äºï¼æä»¬åºè¯¥å¦ä½è®©å®æ¢å¤æ­£å¸¸å¢ï¼ï¼ï¼\n\nè§£æ³1ï¼è°ç¨å½æ°ï¼åå»ºå½æ°ä½ç¨åï¼\n\nfor(var i = 0; i < 5; i++) {\n  abc(i);\n};\n\nfunction abc(i) {\n  setTimeout(function() {\n     console.log(i);\t\t\t// 0 1 2 3 4 \n  }, 200); \n}\n\n\nè¿éç¸å½äºåå»ºäº5ä¸ªå½æ°ä½ç¨åæ¥ä¿å­ï¼æä»¬ç i å¼ï¼\n\nè§£æ³2ï¼éç¨ç«å³æ§è¡å½æ°ï¼åå»ºå½æ°ä½ç¨åï¼\n\nfor(var i = 0; i < 5; i++) {\n  (function(j) {\n    setTimeout(function() {\n      console.log(j);\n    }, 200);\n  })(i);\n};\n\n\nåçåä¸ï¼åªä¸è¿æ¢æäºèªå¨æ§è¡è¿ä¸ªå½æ°ç½¢äºï¼è¿éä¿å­äº 5 æ¬¡ i çå¼ï¼\n\n**è§£æ³3ï¼let åå»ºåçº§ä½ç¨åï¼å¯ä»¥å°åçº§ä½ç¨åçè§£ä¸º: ä½¿ç¨letåconstå£°æçåé, åªå¨å½åå¤§æ¬å·åçæ **\n\nfor(let i = 0; i < 5; i++) {\n    setTimeout(function() {\n      console.log(i);\n    }, 200);\n};\n\n\nè¿éçå¤§æ¬å·åä¸»è¦æçæ¯ä¸ä¸å ç§æåµ\n\n// æ¡ä»¶è¯­å¥\nif () {}\n\n// switchè¯­å¥\nswitch () {}\n\n// for / whileå¾ªç¯è¯­å¥\nfor () {}\nwhile () {}\n\n// try...catchè¯­å¥\ntry () catch (err) {}\n\n// åå¤§æ¬å·\n{}\n\n\nforå¾ªç¯é®é¢çè§£å³\n\n<ul>\n    <li>ç¬¬ä¸ä¸ª</li>\n    <li>ç¬¬äºä¸ª</li>\n    <li>ç¬¬ä¸ä¸ª</li>\n    <li>ç¬¬åä¸ª</li>\n</ul>\n\n<script>\n    let oli = document.getElementsByTagName(\"li\")\n    for(var i=0;i<4;i++){\n        oli[i].onclick = function(){\n            console.log(i)\n        }\n    }\n    // //ç¸å½äº\n    var i\n    i=0\n    oli[0].onclick = function(){\n            console.log(i)\n    }\n    i=1\n    oli[1].onclick = function(){\n            console.log(i)\n    }\n    i=2\n    oli[2].onclick = function(){\n            console.log(i)\n    }\n    i=3\n    oli[3].onclick = function(){\n            console.log(i)\n    }\n //æç§è¯æ³ä½ç¨åæ¥æ¾ï¼ä¼æ¯æ¬¡é½æ¾å°å¨å±çi\n\n\n    //æ¹æ³ä¸ï¼æ¹ä¸ºlet\n    for(let i=0;i<4;i++){\n        oli[i].onclick = function(){\n            console.log(i)\n        }\n    }\n    // ãæ·±å¥çè§£ES6ãä¸é¢è¯´å¾ªç¯ä¸­çletå£°æå¨å¾ªç¯åé¨æ¯æ åä¸­ä¸é¨å®ä¹ç\n    // èæ¯æ¯æ¬¡letå£°æé½ä¼åå»ºä¸ä¸ªæ°çåéiï¼å¹¶å°å¶åå§åä¸ºiçå½åå¼\n    for(let i=0;i<4;i++){\n        let i = //iï¼æå­çææ³\n        oli[i].onclick = function(){\n            console.log(i)\n        }\n    }\n    //è¿ä¸ªæ¶åå¨æ§è¡ç¹å»äºä»¶æ¶ï¼iä¼å¨forå¾ªç¯çç¬¬ä¸è¡æ¾å°içå¼\n\n    //æ¹æ³äºï¼é­å\n    for(var i=0;i<4;i++){\n        (function(i){\n            oli[i].onclick = function(){\n                console.log(i)\n            }\n        })(i)\n    }\n    \n    //æ¹æ³ä¸ï¼æå­æ°æ®,åletåçç±»ä¼¼\n    for(var i=0;i<4;i++){\n        oli[i].index = i\n        oli[i].onclick = function(){\n            console.log(this.index)\n        }\n    }\n\n    //æ¹æ³åï¼äºä»¶å§æ\n    var oul = document.getElementsByTagName(\"ul\")[0];\n    oul.onclick = function(e){\n        var e = e || window.event\n        var target = e.target || e.srcElement\n        if(target.nodeName.toLowerCase() == 'li'){\n            var li=this.querySelectorAll(\"li\");\n            var index = Array.prototype.indexOf.call(li,target);\n            console.log(index);\nãããã    }\n    }\n<\/script>\n\n\n\n# è¯æ³ä½ç¨å\n\nè¯æ³ä½ç¨åæ¯æä¸ä¸ªåéçå¯è§æ§ï¼åå¶ææ¬è¡¨è¿°çæ¨¡æå¼ï¼ãJavaScriptå½æ°å¼ç¼ç¨ãï¼;\n\nå¬èµ·æ¥ï¼ååå°æ¦æ¶©ï¼ä¸è¿å°ä»£ç æ¿æ¥åæå°±éå¸¸æµæ¾ææäºï¼\n\ntestValue = 'outer';\n\nfunction afun() {\n  var testValue = 'middle';\n  \n  console.log(testValue);\t\t// \"middle\"\n  \n  function innerFun() {\n    var testValue = 'inner';\n    \n    console.log(testValue);\t\t// \"inner\"\n  }\n  \n  return innerFun();\n}\n\nafun();\n\nconsole.log(testValue);\t\t\t// \"outer\"\n\n\nå½æä»¬è¦ä½¿ç¨å£°æçåéæ¶ï¼JSå¼ææ»ä¼ä»æè¿çä¸ä¸ªåï¼åå¤å±åæ¥æ¾ï¼\n\n\n\nåä¸¾ä¸ä¸ªä¸ä¸ªå®éçä¾å­ï¼\n\nvar testValue = 'outer';\n\nfunction foo() {\n  console.log(testValue);\t\t// \"outer\"\n}\n\nfunction bar() {\n  var testValue = 'inner';\n  \n  foo();\n}\n\nbar();\n// ä¸ªäººçè§£è¯æ³ä½ç¨äºæ¯åºäºä»£ç å®ä¹ç\n\n\næ¾ç¶ï¼å½ JS å¼ææ¥æ¾è¿ä¸ªåéæ¶ï¼åç°å¨å±ç testValue ç¦»å¾æ´è¿ä¸äºï¼è¿æ°å¥½å å¨æä½ç¨å ç¸åï¼\n\n\n\nå¦ä¸å¾æç¤ºï¼ä¸é¢å°è®²è¿°ä¸ è¯æ³ä½ç¨åç¸åçå¨æä½ç¨åï¼\n\n\n# å¨æä½ç¨å\n\nå¨ç¼ç¨ä¸­ï¼æå®¹æè¢«ä½ä¼°åæ»¥ç¨çæ¦å¿µå°±æ¯å¨æä½ç¨åï¼ãJavaScriptå½æ°å¼ç¼ç¨ãï¼ã\n\nå¨ JavaScript ä¸­çä»å­çåºç¨å¨æä½ç¨åçå°æ¹ï¼this å¼ç¨ï¼æä»¥è¿æ¯ä¸ä¸ªå¤§åï¼ï¼ï¼ï¼ï¼\n\n> å¨æä½ç¨åï¼ä½ç¨åæ¯åºäºè°ç¨æ çï¼èä¸æ¯ä»£ç ä¸­çä½ç¨ååµå¥ï¼\n> \n> ä½ç¨ååµå¥ï¼æè¯æ³ä½ç¨åä¸æ ·çç¹æ§ï¼æ¥æ¾åéæ¶ï¼æ»æ¯å¯»æ¾æè¿çä½ç¨åï¼\n\nåæ ·æ¯ï¼è¯æ³ä½ç¨åï¼ä¾å­2ï¼åä¸ä»½ä»£ç ï¼å¦æ æ¯å¨æä½ç¨åï¼\n\nvar testValue = 'outer';\n\nfunction foo() {\n  console.log(testValue);\t\t// \"inner\"\n}\n\nfunction bar() {\n  var testValue = 'inner';\n  \n  foo();\n}\n\nbar();\n\n\nå½ç¶ï¼JavaScript é¤äºthisä¹å¤ï¼å¶ä»ï¼é½æ¯æ ¹æ®è¯æ³ä½ç¨åæ¥æ¾ï¼ï¼ï¼\n\n\n\nä¸ºä»ä¹è¦çè§£å¨æä½ç¨åå¢ï¼å ä¸ºï¼è¿è½è®©ä½ æ´å¥½å°å­¦ä¹  this å¼ç¨ï¼ï¼ï¼\n\nè¦æ¸æ¥ï¼JavaScript å®éä¸æ²¡æå¨æä½ç¨åãå®æ¥æè¯æ³ä½ç¨åãå°±è¿ä¹ç®åãä½æ¯ this æºå¶æäºåå¨æä½ç¨åã\n\nå³é®çå·®å¼ï¼è¯æ³ä½ç¨åæ¯ç¼åæ¶çï¼èå¨æä½ç¨åï¼å thisï¼æ¯è¿è¡æ¶çãè¯æ³ä½ç¨åå³å¿çæ¯ å½æ°å¨ä½å¤è¢«å£°æï¼ä½æ¯å¨æä½ç¨åå³å¿çæ¯å½æ° ä»ä½å¤ è¢«è°ç¨ã\n\nä½èï¼leiting1998 é¾æ¥ï¼https://juejin.im/post/5abb99e9f265da2392366824 æ¥æºï¼æé",normalizedContent:"# å¨å±ä½ç¨å\n\nä½ç¨åï¼æ¯æåéççå½å¨æï¼ä¸ä¸ªåéå¨åªäºèå´åä¿æä¸å®å¼ï¼ã\n\n> å¨å±åéï¼\n> \n> çå½å¨æå°å­å¨äºæ´ä¸ªç¨åºä¹åã\n> \n> è½è¢«ç¨åºä¸­ä»»ä½å½æ°æèæ¹æ³è®¿é®ã\n> \n> å¨ javascript åé»è®¤æ¯å¯ä»¥è¢«ä¿®æ¹çã\n\nå¨å±åéï¼è½ç¶å¥½ç¨ï¼ä½æ¯æ¯éå¸¸å¯æçï¼è¿æ¯ææç¨åºåå¬è®¤çäºå®ã\n\n# æ¾å¼å£°æï¼\n\nå¸¦æå³é®å­ var çå£°æï¼\n\n<script type=\"text/javascript\">\n\n    var testvalue = 123;\n\n    var testfunc = function () { console.log('just test') };\n\n    /**---------å¨å±åéä¼æè½½å° window å¯¹è±¡ä¸------------**/\n\n    console.log(window.testfunc)\t\t// Æ () { console.log('just test') }\n\n    console.log(window.testvalue)\t\t// 123\n    \n<\/script>\nå¤å¶ä»£ç \n\n\nå¶å®ï¼æä»¬åçå½æ°å¦æä¸ç»è¿å°è£ï¼ä¹ä¼æ¯å¨å±åéï¼ä»ççå½å¨æä¹å°±æ¯å¨å±ä½ç¨åï¼\n\n# éå¼å£°æï¼\n\nä¸å¸¦æå£°æå³é®å­çåéï¼js ä¼é»è®¤å¸®ä½ å£°æä¸ä¸ªå¨å±åéï¼ï¼ï¼\n\n<script type=\"text/javascript\">\n\n    function foo(value) {\n\n      result = value + 1;\t // æ²¡æç¨ var ä¿®é¥°\n\n      return result;\n    };\n\n    foo(123);\t\t\t\t// 124\n    \n    console.log(window.result);\t\t\t// 124 <=  æå¨äº windowå¨å±å¯¹è±¡ä¸ \n    \n<\/script>\nå¤å¶ä»£ç \n\n\nç°å¨ï¼åé result è¢«æè½½å° window å¯¹è±¡ä¸äºï¼ï¼ï¼\n\n\n# å½æ°ä½ç¨å\n\nå½æ°ä½ç¨ååï¼å¯¹å¤æ¯å°é­çï¼ä»å¤å±çä½ç¨åæ æ³ç´æ¥è®¿é®å½æ°åé¨çä½ç¨åï¼ï¼ï¼\n\nfunction bar() {\n  var testvalue = 'inner';\n}\n\nconsole.log(testvalue);\t\t// æ¥éï¼referenceerror: testvalue is not defined\n\n\n# éè¿ return è®¿é®å½æ°åé¨åéï¼\n\nfunction bar(value) {\n  var testvalue = 'inner';\n  \n  return testvalue + value;\n}\n\nconsole.log(bar('fun'));\t\t// \"innerfun\"\nå¤å¶ä»£ç \n\n\nå½æ°å°±åä¸ä¸ªå·¥åï¼æä»¬è¾å¥ä¸äºä¸è¥¿ï¼å®å¨åé¨å å·¥ï¼ç¶åç»æä»¬ä¸ä¸ªå å·¥äº§ç©ï¼\n\n# éè¿ é­å è®¿é®å½æ°åé¨åéï¼\n\nfunction bar(value) {\n  var testvalue = 'inner';\n  \n  var rusult = testvalue + value;\n  \n  function innser() {\n     return rusult;\n  };\n  \n  return innser();\n}\n\nconsole.log(bar('fun'));\t\t// \"innerfun\"\n\n\nå³äºé­åï¼æä¸ä¼å¨è¿ç¯æç« è¿å¤æè¿°ï¼å ä¸ºï¼æ³è¦æè¿°é­åï¼æ¬èº«éè¦è·æ¬æç« ä¸æ ·çé¿åº¦ï¼\n\n# ç«å³æ§è¡å½æ°ï¼\n\nè¿æ¯ä¸ªå¾å®ç¨çå½æ°ï¼å¾å¤åºé½ç¨å®åç¦»å¨å±ä½ç¨åï¼å½¢æä¸ä¸ªåç¬çå½æ°ä½ç¨åï¼\n\n<script type=\"text/javascript\">\n\n    (function() {\n\n      var testvalue = 123;\n\n      var testfunc = function () { console.log('just test'); };\n\n    })();\n\n    console.log(window.testvalue);\t\t// undefined\n    \n    console.log(window.testfunc);\t\t// undefined\n    \n<\/script>\n\n\nå®è½å¤èªå¨æ§è¡ (function() { //... })() éé¢åè£¹çåå®¹ï¼è½å¤å¾å¥½å°æ¶é¤å¨å±åéçå½±åï¼\n\n\n# åçº§ä½ç¨å\n\nå¨ es6 ä¹åï¼æ¯æ²¡æåçº§ä½ç¨åçæ¦å¿µçãå¦æä½ æ c++ æè java ç»éªï¼æ³å¿ä½ å¯¹åçº§ä½ç¨åå¹¶ä¸éçï¼\n\nfor(var i = 0; i < 5; i++) {\n  // ...\n}\n\nconsole.log(i)\t\t\t\t// 5\n\n\nå¾ææ¾ï¼ç¨ var å³é®å­å£°æçåéï¼å¨ for å¾ªç¯ä¹åä»ç¶è¢«ä¿å­è¿ä¸ªä½ç¨åéï¼\n\nè¿å¯ä»¥è¯´æï¼ for() { }ä»ç¶å¨ï¼å¨å±ä½ç¨åéï¼å¹¶æ²¡æäº§çåå½æ°ä½ç¨åä¸æ ·çå°é­ææï¼\n\nå¦ææ³è¦å®ç° åçº§ä½ç¨å é£ä¹æä»¬éè¦ç¨ let å³é®å­å£°æï¼ï¼ï¼\n\nfor(let i = 0; i < 5; i++) {\n  // ...\n}\n\nconsole.log(i)\t\t\t\t// æ¥éï¼referenceerror: i is not defined\n\n\nå¨ for å¾ªç¯æ§è¡å®æ¯ä¹å i åéå°±è¢«éæ¾äºï¼å®å·²ç»æ¶å¤±äºï¼ï¼ï¼\n\nåæ ·è½å½¢æåçº§ä½ç¨åçè¿æ const å³é®å­ï¼\n\nif (true) {\n  const a = 'inner';\n}\n\nconsole.log(a);\t\t\t\t// æ¥éï¼referenceerror: a is not defined\n\n\nlet å const å³é®å­ï¼åå»ºåçº§ä½ç¨åçæ¡ä»¶æ¯å¿é¡»æä¸ä¸ª { } åè£¹ï¼\n\n{\n  let a = 'inner';\n}\n  \nif (true) {\n   let b = 'inner'; \n}\n\nvar i = 0;\n\n// ......\n\n\nä¸è¦å°çåçº§ä½ç¨åï¼å®è½å¸®ä½ åå¾å¤äºæï¼ä¸¾ä¸ªæ å­ï¼\n\nä¸¾ä¸ä¸ªé¢è¯ä¸­å¸¸è§çä¾å­ï¼\n\nfor(var i = 0; i < 5; i++) {\n  settimeout(function() {\n     console.log(i);\t\t\t// 5 5 5 5 5\n  }, 200);\n};\n\n\nè¿å ä¹æ¯ä½ç¨åçå¿èé¢ç®ï¼ä½ ä¼è§å¾è¿ç§ç»æå¾å¥æªï¼ä½æ¯äºå®å°±æ¯è¿ä¹åçäºï¼\n\nè¿éç i æ¯å¨å¨å±ä½ç¨åéé¢çï¼åªå­å¨ 1 ä¸ªå¼ï¼ç­å°åè°å½æ°æ§è¡æ¶ï¼ç¨è¯æ³ä½ç¨åæè·ç i å°±åªè½æ¯ 5ï¼\n\nå ä¸ºè¿ä¸ªå¾ªç¯è®¡ç®ç i å¼å¨åè°å½æ°ç»æä¹åå°±å·²ç»æ§è¡å° 5 äºï¼æä»¬åºè¯¥å¦ä½è®©å®æ¢å¤æ­£å¸¸å¢ï¼ï¼ï¼\n\nè§£æ³1ï¼è°ç¨å½æ°ï¼åå»ºå½æ°ä½ç¨åï¼\n\nfor(var i = 0; i < 5; i++) {\n  abc(i);\n};\n\nfunction abc(i) {\n  settimeout(function() {\n     console.log(i);\t\t\t// 0 1 2 3 4 \n  }, 200); \n}\n\n\nè¿éç¸å½äºåå»ºäº5ä¸ªå½æ°ä½ç¨åæ¥ä¿å­ï¼æä»¬ç i å¼ï¼\n\nè§£æ³2ï¼éç¨ç«å³æ§è¡å½æ°ï¼åå»ºå½æ°ä½ç¨åï¼\n\nfor(var i = 0; i < 5; i++) {\n  (function(j) {\n    settimeout(function() {\n      console.log(j);\n    }, 200);\n  })(i);\n};\n\n\nåçåä¸ï¼åªä¸è¿æ¢æäºèªå¨æ§è¡è¿ä¸ªå½æ°ç½¢äºï¼è¿éä¿å­äº 5 æ¬¡ i çå¼ï¼\n\n**è§£æ³3ï¼let åå»ºåçº§ä½ç¨åï¼å¯ä»¥å°åçº§ä½ç¨åçè§£ä¸º: ä½¿ç¨letåconstå£°æçåé, åªå¨å½åå¤§æ¬å·åçæ **\n\nfor(let i = 0; i < 5; i++) {\n    settimeout(function() {\n      console.log(i);\n    }, 200);\n};\n\n\nè¿éçå¤§æ¬å·åä¸»è¦æçæ¯ä¸ä¸å ç§æåµ\n\n// æ¡ä»¶è¯­å¥\nif () {}\n\n// switchè¯­å¥\nswitch () {}\n\n// for / whileå¾ªç¯è¯­å¥\nfor () {}\nwhile () {}\n\n// try...catchè¯­å¥\ntry () catch (err) {}\n\n// åå¤§æ¬å·\n{}\n\n\nforå¾ªç¯é®é¢çè§£å³\n\n<ul>\n    <li>ç¬¬ä¸ä¸ª</li>\n    <li>ç¬¬äºä¸ª</li>\n    <li>ç¬¬ä¸ä¸ª</li>\n    <li>ç¬¬åä¸ª</li>\n</ul>\n\n<script>\n    let oli = document.getelementsbytagname(\"li\")\n    for(var i=0;i<4;i++){\n        oli[i].onclick = function(){\n            console.log(i)\n        }\n    }\n    // //ç¸å½äº\n    var i\n    i=0\n    oli[0].onclick = function(){\n            console.log(i)\n    }\n    i=1\n    oli[1].onclick = function(){\n            console.log(i)\n    }\n    i=2\n    oli[2].onclick = function(){\n            console.log(i)\n    }\n    i=3\n    oli[3].onclick = function(){\n            console.log(i)\n    }\n //æç§è¯æ³ä½ç¨åæ¥æ¾ï¼ä¼æ¯æ¬¡é½æ¾å°å¨å±çi\n\n\n    //æ¹æ³ä¸ï¼æ¹ä¸ºlet\n    for(let i=0;i<4;i++){\n        oli[i].onclick = function(){\n            console.log(i)\n        }\n    }\n    // ãæ·±å¥çè§£es6ãä¸é¢è¯´å¾ªç¯ä¸­çletå£°æå¨å¾ªç¯åé¨æ¯æ åä¸­ä¸é¨å®ä¹ç\n    // èæ¯æ¯æ¬¡letå£°æé½ä¼åå»ºä¸ä¸ªæ°çåéiï¼å¹¶å°å¶åå§åä¸ºiçå½åå¼\n    for(let i=0;i<4;i++){\n        let i = //iï¼æå­çææ³\n        oli[i].onclick = function(){\n            console.log(i)\n        }\n    }\n    //è¿ä¸ªæ¶åå¨æ§è¡ç¹å»äºä»¶æ¶ï¼iä¼å¨forå¾ªç¯çç¬¬ä¸è¡æ¾å°içå¼\n\n    //æ¹æ³äºï¼é­å\n    for(var i=0;i<4;i++){\n        (function(i){\n            oli[i].onclick = function(){\n                console.log(i)\n            }\n        })(i)\n    }\n    \n    //æ¹æ³ä¸ï¼æå­æ°æ®,åletåçç±»ä¼¼\n    for(var i=0;i<4;i++){\n        oli[i].index = i\n        oli[i].onclick = function(){\n            console.log(this.index)\n        }\n    }\n\n    //æ¹æ³åï¼äºä»¶å§æ\n    var oul = document.getelementsbytagname(\"ul\")[0];\n    oul.onclick = function(e){\n        var e = e || window.event\n        var target = e.target || e.srcelement\n        if(target.nodename.tolowercase() == 'li'){\n            var li=this.queryselectorall(\"li\");\n            var index = array.prototype.indexof.call(li,target);\n            console.log(index);\nãããã    }\n    }\n<\/script>\n\n\n\n# è¯æ³ä½ç¨å\n\nè¯æ³ä½ç¨åæ¯æä¸ä¸ªåéçå¯è§æ§ï¼åå¶ææ¬è¡¨è¿°çæ¨¡æå¼ï¼ãjavascriptå½æ°å¼ç¼ç¨ãï¼;\n\nå¬èµ·æ¥ï¼ååå°æ¦æ¶©ï¼ä¸è¿å°ä»£ç æ¿æ¥åæå°±éå¸¸æµæ¾ææäºï¼\n\ntestvalue = 'outer';\n\nfunction afun() {\n  var testvalue = 'middle';\n  \n  console.log(testvalue);\t\t// \"middle\"\n  \n  function innerfun() {\n    var testvalue = 'inner';\n    \n    console.log(testvalue);\t\t// \"inner\"\n  }\n  \n  return innerfun();\n}\n\nafun();\n\nconsole.log(testvalue);\t\t\t// \"outer\"\n\n\nå½æä»¬è¦ä½¿ç¨å£°æçåéæ¶ï¼jså¼ææ»ä¼ä»æè¿çä¸ä¸ªåï¼åå¤å±åæ¥æ¾ï¼\n\n\n\nåä¸¾ä¸ä¸ªä¸ä¸ªå®éçä¾å­ï¼\n\nvar testvalue = 'outer';\n\nfunction foo() {\n  console.log(testvalue);\t\t// \"outer\"\n}\n\nfunction bar() {\n  var testvalue = 'inner';\n  \n  foo();\n}\n\nbar();\n// ä¸ªäººçè§£è¯æ³ä½ç¨äºæ¯åºäºä»£ç å®ä¹ç\n\n\næ¾ç¶ï¼å½ js å¼ææ¥æ¾è¿ä¸ªåéæ¶ï¼åç°å¨å±ç testvalue ç¦»å¾æ´è¿ä¸äºï¼è¿æ°å¥½å å¨æä½ç¨å ç¸åï¼\n\n\n\nå¦ä¸å¾æç¤ºï¼ä¸é¢å°è®²è¿°ä¸ è¯æ³ä½ç¨åç¸åçå¨æä½ç¨åï¼\n\n\n# å¨æä½ç¨å\n\nå¨ç¼ç¨ä¸­ï¼æå®¹æè¢«ä½ä¼°åæ»¥ç¨çæ¦å¿µå°±æ¯å¨æä½ç¨åï¼ãjavascriptå½æ°å¼ç¼ç¨ãï¼ã\n\nå¨ javascript ä¸­çä»å­çåºç¨å¨æä½ç¨åçå°æ¹ï¼this å¼ç¨ï¼æä»¥è¿æ¯ä¸ä¸ªå¤§åï¼ï¼ï¼ï¼ï¼\n\n> å¨æä½ç¨åï¼ä½ç¨åæ¯åºäºè°ç¨æ çï¼èä¸æ¯ä»£ç ä¸­çä½ç¨ååµå¥ï¼\n> \n> ä½ç¨ååµå¥ï¼æè¯æ³ä½ç¨åä¸æ ·çç¹æ§ï¼æ¥æ¾åéæ¶ï¼æ»æ¯å¯»æ¾æè¿çä½ç¨åï¼\n\nåæ ·æ¯ï¼è¯æ³ä½ç¨åï¼ä¾å­2ï¼åä¸ä»½ä»£ç ï¼å¦æ æ¯å¨æä½ç¨åï¼\n\nvar testvalue = 'outer';\n\nfunction foo() {\n  console.log(testvalue);\t\t// \"inner\"\n}\n\nfunction bar() {\n  var testvalue = 'inner';\n  \n  foo();\n}\n\nbar();\n\n\nå½ç¶ï¼javascript é¤äºthisä¹å¤ï¼å¶ä»ï¼é½æ¯æ ¹æ®è¯æ³ä½ç¨åæ¥æ¾ï¼ï¼ï¼\n\n\n\nä¸ºä»ä¹è¦çè§£å¨æä½ç¨åå¢ï¼å ä¸ºï¼è¿è½è®©ä½ æ´å¥½å°å­¦ä¹  this å¼ç¨ï¼ï¼ï¼\n\nè¦æ¸æ¥ï¼javascript å®éä¸æ²¡æå¨æä½ç¨åãå®æ¥æè¯æ³ä½ç¨åãå°±è¿ä¹ç®åãä½æ¯ this æºå¶æäºåå¨æä½ç¨åã\n\nå³é®çå·®å¼ï¼è¯æ³ä½ç¨åæ¯ç¼åæ¶çï¼èå¨æä½ç¨åï¼å thisï¼æ¯è¿è¡æ¶çãè¯æ³ä½ç¨åå³å¿çæ¯ å½æ°å¨ä½å¤è¢«å£°æï¼ä½æ¯å¨æä½ç¨åå³å¿çæ¯å½æ° ä»ä½å¤ è¢«è°ç¨ã\n\nä½èï¼leiting1998 é¾æ¥ï¼https://juejin.im/post/5abb99e9f265da2392366824 æ¥æºï¼æé",charsets:{cjk:!0}},{title:"JSON.stringify",frontmatter:{},regularPath:"/javascript/stringify.html",relativePath:"javascript/stringify.md",key:"v-f887684e",path:"/javascript/stringify.html",headers:[{level:3,title:"åè¯´ç»è®º",slug:"åè¯´ç»è®º",normalizedTitle:"åè¯´ç»è®º",charIndex:215},{level:3,title:"ä¸å®å¨çJSONå¼",slug:"ä¸å®å¨çjsonå¼",normalizedTitle:"ä¸å®å¨çjsonå¼",charIndex:424},{level:3,title:"ï¼1ï¼undefined,function,symbol",slug:"_1-undefined-function-symbol",normalizedTitle:"ï¼1ï¼undefined,function,symbol",charIndex:438},{level:3,title:"ï¼2ï¼å¾ªç¯å¼ç¨",slug:"_2-å¾ªç¯å¼ç¨",normalizedTitle:"ï¼2ï¼å¾ªç¯å¼ç¨",charIndex:807},{level:2,title:"JSON.stringifyçå ä¸ªåæ°",slug:"json-stringifyçå ä¸ªåæ°",normalizedTitle:"json.stringifyçå ä¸ªåæ°",charIndex:1233},{level:3,title:"ï¼1ï¼replacer",slug:"_1-replacer",normalizedTitle:"ï¼1ï¼replacer",charIndex:1257},{level:3,title:"ï¼2ï¼space",slug:"_2-space",normalizedTitle:"ï¼2ï¼space",charIndex:1963},{level:2,title:"èç³»åºååæ·±æ·è´",slug:"èç³»åºååæ·±æ·è´",normalizedTitle:"èç³»åºååæ·±æ·è´",charIndex:2289}],lastUpdated:"8/8/2022, 5:33:38 PM",lastUpdatedTimestamp:1659951218e3,headersStr:"åè¯´ç»è®º ä¸å®å¨çJSONå¼ ï¼1ï¼undefined,function,symbol ï¼2ï¼å¾ªç¯å¼ç¨ JSON.stringifyçå ä¸ªåæ° ï¼1ï¼replacer ï¼2ï¼space èç³»åºååæ·±æ·è´",content:'# JSON.stringify\n\næä»¬é½ç¥é toString æ¯ç¨äºå¤çéå­ç¬¦ä¸²å°å­ç¬¦ä¸²çå¼ºå¶ç±»åè½¬æ¢ï¼éå¼ç±»åè½¬æ¢ï¼\n\nlet a={}  \na.toString()   //[object Object]\nlet b=[1,2,3]\nb.toString()   //æ°ç»çtoStringè¢«éåäºï¼æä»¥è¾åº"1,2,3"\n\n\nJSON.stringify å° JSONå¯¹è±¡åºååæ¶ä¹ç¨å°äº toString()\n\n\n# åè¯´ç»è®º\n\n * å®å¨ç JSON å¼å¯ä»¥åºååï¼ä¸å®å¨ç JSON å¼ä¼ç¹æ®å¤ç\n\n * å®å¨ï¼å­ç¬¦ä¸²ï¼æ°å­ï¼å¸å°å¼å null çJSON.stringify ä¸ toString åºæ¬ç¸å\n\n * ä¸å®å¨ï¼undefined,function,symbolä¼ç¹æ®å¤çï¼å¦æä¼ éç» JSON.stringify çå¯¹è±¡ä¸­å®ä¹äº toJSONæ¹æ³ï¼é£ä¹è¯¥æ¹æ³ä¼å¨å­ç¬¦ä¸²ååè°ç¨ï¼å°å¯¹è±¡è½¬åä¸ºå®å¨JSON å¼\n\n\n# ä¸å®å¨çJSONå¼\n\n\n# ï¼1ï¼undefined,function,symbol\n\n 1. ç´æ¥æ¾å¨å¯¹è±¡ä¸­ï¼undefined\n\nJSON.stringify(undefined)    //undefined\nJSON.stringify(function(){}) //undefined\nJSON.stringify(Symbol(a))    //undefined\n\n\n 2. æ¾å¨æ°ç»ä¸­ï¼è¾åºnull\n\nJSON.stringify(\n\t[1,undefined,function(){},Symbol(a),4]\n)\n//[1,null,null,null,4]\n\nJSON.stringify(\n\t{a:1,b:undefined,c:function(){},d:Symbol(a),e:4}\n)\n//{"a": 1,"e": 4}\n\n\n\n# ï¼2ï¼å¾ªç¯å¼ç¨\n\nå¯ä»¥å®ä¹toJSONæ¹æ³æ¥è¿åå®å¨çJSONå¼\n\nlet o = {}\nlet a = {\n    b: 42,\n    c: o,\n    d: function(){}\n}\no.e = a // åå»ºå¾ªç¯å¼ç¨\nconsole.log(JSON.stringify(a)) // æ¥é\n\n// èªå®ä¹ä¸ä¸ toJSON\na.toJSON = function() {\n    return {b: this.b}\n}\nconsole.log(JSON.stringify(a)) // {"b": 42}\n\n\nä¹å°±æ¯è¯´ï¼toJSONåºè¯¥è¿åä¸ä¸ªè½å¤è¢«å­ç¬¦ä¸²åçå®å¨JSONå¼\n\nvar a = {\n val: [1,2,3],\n toJSON: function(){\n \treturn this.val.slice(1);\n }\n};\nconsole.log(JSON.stringify(a)) // "[2,3]"\n\n\n\n# JSON.stringifyçå ä¸ªåæ°\n\n\n# ï¼1ï¼replacer\n\n * æ¯ä¸ä¸ªæ°ç»ï¼é£ä¹ä»å¿é¡»æ¯ä¸ä¸ªå­ç¬¦ä¸²æ°ç»ï¼å¶ä¸­åå«çæ¯è¦åºååçï¼é¤æ­¤ä¹å¤çå±æ§è¢«å¿½ç¥\n * æ¯ä¸ä¸ªå½æ°ï¼å¯¹å¯¹è±¡æ¬èº«è°ç¨ä¸æ¬¡ï¼ç¶åå¯¹æ¯ä¸ªå±æ§åè°ç¨ä¸æ¬¡\n\nlet a = {\n    b: 42,\n    c: "42",\n    d: [1,2,3]\n}\nconsole.log(JSON.stringify(a, ["b","c"]))\n//{"b":42,"c":"42"}\n\nconsole.log(JSON.stringify(a, function(k,v) {\n    if(k !== "c") return v\n}))\n//{"b":42,"d":[1,2,3]}\n\nconst dude = {\n  name: "Pawel",\n  friends: new Set(["Dan", "Pedro", "Mr Gregory"])\n};\n\nconst dudeStringified = JSON.stringify(dude);\nconsole.log(dudeStringified);\n// {"name":"Pawel","friends":{}}\n\nconst dudeStringified = JSON.stringify(dude, (key, value) =>\n  value instanceof Set ? [...value] : value\n);\nconsole.log(dudeStringified);\n// {"name":"Pawel","friends":["Dan","Pedro","Mr Gregory"]}\n\n\n\n# ï¼2ï¼space\n\nç¨äºæå®ç¼©è¿æ ¼å¼\n\nlet a = {\n    b: 42,\n    c: "42",\n    d: [1,2,3]\n}\nconsole.log(JSON.stringify(a, null, 3))\n/*\n{\n   "b": 42,\n   "c": "42",\n   "d": [\n      1,\n      2,\n      3\n   ]\n}\n*/\n\nconsole.log(JSON.stringify(a, null, \'----\'))\n/*\n{\n----"b": 42,\n----"c": "42",\n----"d": [\n--------1,\n--------2,\n--------3\n----]\n}\n*/\n\n\n\n# èç³»åºååæ·±æ·è´\n\nJSON.parse(JSON.stringify(obj)) çé®é¢ï¼\n\n 1. å¯¹è±¡çå±æ§å¼æ¯å½æ°æ¶ï¼æ æ³æ·è´ã\n 2. ååé¾ä¸çå±æ§æ æ³æ·è´\n 3. ä¸è½æ­£ç¡®çå¤ç Date ç±»åçæ°æ®\n 4. ä¸è½å¤ç RegExp\n 5. ä¼å¿½ç¥ symbol\n 6. ä¼å¿½ç¥ undefined\n\nç±æ­¤å¯ç¥ï¼æ æ³å¤çå½æ°, undefied, symbol æ¯å ä¸ºä¸æ¯å®å¨ç JSON æ ¼å¼',normalizedContent:'# json.stringify\n\næä»¬é½ç¥é tostring æ¯ç¨äºå¤çéå­ç¬¦ä¸²å°å­ç¬¦ä¸²çå¼ºå¶ç±»åè½¬æ¢ï¼éå¼ç±»åè½¬æ¢ï¼\n\nlet a={}  \na.tostring()   //[object object]\nlet b=[1,2,3]\nb.tostring()   //æ°ç»çtostringè¢«éåäºï¼æä»¥è¾åº"1,2,3"\n\n\njson.stringify å° jsonå¯¹è±¡åºååæ¶ä¹ç¨å°äº tostring()\n\n\n# åè¯´ç»è®º\n\n * å®å¨ç json å¼å¯ä»¥åºååï¼ä¸å®å¨ç json å¼ä¼ç¹æ®å¤ç\n\n * å®å¨ï¼å­ç¬¦ä¸²ï¼æ°å­ï¼å¸å°å¼å null çjson.stringify ä¸ tostring åºæ¬ç¸å\n\n * ä¸å®å¨ï¼undefined,function,symbolä¼ç¹æ®å¤çï¼å¦æä¼ éç» json.stringify çå¯¹è±¡ä¸­å®ä¹äº tojsonæ¹æ³ï¼é£ä¹è¯¥æ¹æ³ä¼å¨å­ç¬¦ä¸²ååè°ç¨ï¼å°å¯¹è±¡è½¬åä¸ºå®å¨json å¼\n\n\n# ä¸å®å¨çjsonå¼\n\n\n# ï¼1ï¼undefined,function,symbol\n\n 1. ç´æ¥æ¾å¨å¯¹è±¡ä¸­ï¼undefined\n\njson.stringify(undefined)    //undefined\njson.stringify(function(){}) //undefined\njson.stringify(symbol(a))    //undefined\n\n\n 2. æ¾å¨æ°ç»ä¸­ï¼è¾åºnull\n\njson.stringify(\n\t[1,undefined,function(){},symbol(a),4]\n)\n//[1,null,null,null,4]\n\njson.stringify(\n\t{a:1,b:undefined,c:function(){},d:symbol(a),e:4}\n)\n//{"a": 1,"e": 4}\n\n\n\n# ï¼2ï¼å¾ªç¯å¼ç¨\n\nå¯ä»¥å®ä¹tojsonæ¹æ³æ¥è¿åå®å¨çjsonå¼\n\nlet o = {}\nlet a = {\n    b: 42,\n    c: o,\n    d: function(){}\n}\no.e = a // åå»ºå¾ªç¯å¼ç¨\nconsole.log(json.stringify(a)) // æ¥é\n\n// èªå®ä¹ä¸ä¸ tojson\na.tojson = function() {\n    return {b: this.b}\n}\nconsole.log(json.stringify(a)) // {"b": 42}\n\n\nä¹å°±æ¯è¯´ï¼tojsonåºè¯¥è¿åä¸ä¸ªè½å¤è¢«å­ç¬¦ä¸²åçå®å¨jsonå¼\n\nvar a = {\n val: [1,2,3],\n tojson: function(){\n \treturn this.val.slice(1);\n }\n};\nconsole.log(json.stringify(a)) // "[2,3]"\n\n\n\n# json.stringifyçå ä¸ªåæ°\n\n\n# ï¼1ï¼replacer\n\n * æ¯ä¸ä¸ªæ°ç»ï¼é£ä¹ä»å¿é¡»æ¯ä¸ä¸ªå­ç¬¦ä¸²æ°ç»ï¼å¶ä¸­åå«çæ¯è¦åºååçï¼é¤æ­¤ä¹å¤çå±æ§è¢«å¿½ç¥\n * æ¯ä¸ä¸ªå½æ°ï¼å¯¹å¯¹è±¡æ¬èº«è°ç¨ä¸æ¬¡ï¼ç¶åå¯¹æ¯ä¸ªå±æ§åè°ç¨ä¸æ¬¡\n\nlet a = {\n    b: 42,\n    c: "42",\n    d: [1,2,3]\n}\nconsole.log(json.stringify(a, ["b","c"]))\n//{"b":42,"c":"42"}\n\nconsole.log(json.stringify(a, function(k,v) {\n    if(k !== "c") return v\n}))\n//{"b":42,"d":[1,2,3]}\n\nconst dude = {\n  name: "pawel",\n  friends: new set(["dan", "pedro", "mr gregory"])\n};\n\nconst dudestringified = json.stringify(dude);\nconsole.log(dudestringified);\n// {"name":"pawel","friends":{}}\n\nconst dudestringified = json.stringify(dude, (key, value) =>\n  value instanceof set ? [...value] : value\n);\nconsole.log(dudestringified);\n// {"name":"pawel","friends":["dan","pedro","mr gregory"]}\n\n\n\n# ï¼2ï¼space\n\nç¨äºæå®ç¼©è¿æ ¼å¼\n\nlet a = {\n    b: 42,\n    c: "42",\n    d: [1,2,3]\n}\nconsole.log(json.stringify(a, null, 3))\n/*\n{\n   "b": 42,\n   "c": "42",\n   "d": [\n      1,\n      2,\n      3\n   ]\n}\n*/\n\nconsole.log(json.stringify(a, null, \'----\'))\n/*\n{\n----"b": 42,\n----"c": "42",\n----"d": [\n--------1,\n--------2,\n--------3\n----]\n}\n*/\n\n\n\n# èç³»åºååæ·±æ·è´\n\njson.parse(json.stringify(obj)) çé®é¢ï¼\n\n 1. å¯¹è±¡çå±æ§å¼æ¯å½æ°æ¶ï¼æ æ³æ·è´ã\n 2. ååé¾ä¸çå±æ§æ æ³æ·è´\n 3. ä¸è½æ­£ç¡®çå¤ç date ç±»åçæ°æ®\n 4. ä¸è½å¤ç regexp\n 5. ä¼å¿½ç¥ symbol\n 6. ä¼å¿½ç¥ undefined\n\nç±æ­¤å¯ç¥ï¼æ æ³å¤çå½æ°, undefied, symbol æ¯å ä¸ºä¸æ¯å®å¨ç json æ ¼å¼',charsets:{cjk:!0}},{title:"å½æ°å¼ç¼ç¨",frontmatter:{title:"å½æ°å¼ç¼ç¨",date:"2020-08-18T09:21:01.000Z",categories:"å½æ°å¼ç¼ç¨"},regularPath:"/javascript/function.html",relativePath:"javascript/function.md",key:"v-ce167802",path:"/javascript/function.html",headers:[{level:2,title:"JavaScriptæ¯å½æ°å¼è¯­è¨å",slug:"javascriptæ¯å½æ°å¼è¯­è¨å",normalizedTitle:"javascriptæ¯å½æ°å¼è¯­è¨å",charIndex:12},{level:2,title:"å½æ°å¼ç¼ç¨å®ä¹",slug:"å½æ°å¼ç¼ç¨å®ä¹",normalizedTitle:"å½æ°å¼ç¼ç¨å®ä¹",charIndex:276},{level:2,title:"ç¼ç¨èå¼",slug:"ç¼ç¨èå¼",normalizedTitle:"ç¼ç¨èå¼",charIndex:455},{level:2,title:"å½æ°å¼ç¼ç¨ä¼å¿",slug:"å½æ°å¼ç¼ç¨ä¼å¿",normalizedTitle:"å½æ°å¼ç¼ç¨ä¼å¿",charIndex:833},{level:2,title:"è¡çåºç¨åºæ¯",slug:"è¡çåºç¨åºæ¯",normalizedTitle:"è¡çåºç¨åºæ¯",charIndex:885},{level:3,title:"çº¯å½æ°",slug:"çº¯å½æ°",normalizedTitle:"çº¯å½æ°",charIndex:88},{level:3,title:"å¯ä½ç¨",slug:"å¯ä½ç¨",normalizedTitle:"å¯ä½ç¨",charIndex:694},{level:3,title:"éå½ä¸å°¾éå½",slug:"éå½ä¸å°¾éå½",normalizedTitle:"éå½ä¸å°¾éå½",charIndex:911},{level:3,title:"è®°å¿å½æ°",slug:"è®°å¿å½æ°",normalizedTitle:"è®°å¿å½æ°",charIndex:903},{level:3,title:"é«é¶å½æ°",slug:"é«é¶å½æ°",normalizedTitle:"é«é¶å½æ°",charIndex:182},{level:3,title:"æ¯éåä¸åå½æ°",slug:"æ¯éåä¸åå½æ°",normalizedTitle:"æ¯éåä¸åå½æ°",charIndex:3177},{level:3,title:"å½æ°ç»å",slug:"å½æ°ç»å",normalizedTitle:"å½æ°ç»å",charIndex:951},{level:3,title:"æ°æ§è®¡ç®",slug:"æ°æ§è®¡ç®",normalizedTitle:"æ°æ§è®¡ç®",charIndex:197},{level:2,title:"çè®ºèç´",slug:"çè®ºèç´",normalizedTitle:"çè®ºèç´",charIndex:4770},{level:3,title:"å½å­",slug:"å½å­",normalizedTitle:"å½å­",charIndex:4882},{level:3,title:"åå­",slug:"åå­",normalizedTitle:"åå­",charIndex:4895},{level:2,title:"æä¸ä¸æ",slug:"æä¸ä¸æ",normalizedTitle:"æä¸ä¸æ",charIndex:6782},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:7366}],lastUpdated:"2/6/2023, 6:11:44 PM",lastUpdatedTimestamp:1675678304e3,headersStr:"JavaScriptæ¯å½æ°å¼è¯­è¨å å½æ°å¼ç¼ç¨å®ä¹ ç¼ç¨èå¼ å½æ°å¼ç¼ç¨ä¼å¿ è¡çåºç¨åºæ¯ çº¯å½æ° å¯ä½ç¨ éå½ä¸å°¾éå½ è®°å¿å½æ° é«é¶å½æ° æ¯éåä¸åå½æ° å½æ°ç»å æ°æ§è®¡ç® çè®ºèç´ å½å­ åå­ æä¸ä¸æ åèèµæ",content:"# å½æ°å¼ç¼ç¨\n\n\n# JavaScriptæ¯å½æ°å¼è¯­è¨å\n\nJavaScript æ¢ä¸æ¯ C++ï¼Java é£æ ·ççº¯é¢åå¯¹è±¡è¯­è¨ï¼ä¹ä¸æ¯ Haskell å Lisp é£æ ·ççº¯å½æ°å¼è¯­è¨ã\n\n\n\n> Js å¯ä»¥éè¿æäºæ¹å¼æ¥å®ç°å°è£ï¼ç»§æ¿ï¼å¤æï¼å½æ°éè½½ï¼ä½å¶ä¸­é¢åå¯¹è±¡çè®¾è®¡æ¨¡å¼æ¯éè¿ååå¯¹è±¡æ¥å®ç°çï¼å¹¶ä¸æ¯çæ­£çé¢åå¯¹è±¡è¯­è¨ã\n> \n> Js åè®¸å¿åå½æ°ãé«é¶å½æ°ãé­åç­å½æ°å¼ç¹æ§ï¼ä¸æ°æ§è®¡ç®å¯ä»¥éè¿ lazy.js åºå®ç°ï¼ä¸å¯åæ°æ®å¯ä»¥ç®åå°éè¿ç¼ç¨ææ¯æ¥å®ç°ï¼ä½è¿äºé½æ¯éè¦ç¨åºå polyfillï¼å¹¶ä¸æ¯è¯­è¨æ¬èº«æå¸¦çç¹æ§ã\n\n\n# å½æ°å¼ç¼ç¨å®ä¹\n\nIn computer science, functional programming is a programming paradigm where programs are constructed by applying and composing functions.\n\nå¨è®¡ç®æºç§å­¦ä¸­ï¼å½æ°å¼ç¼ç¨æ¯ä¸ç§éè¿åºç¨åç»åå½æ°æ¥æå»ºç¨åºçç¼ç¨èå¼ã\n\n\n# ç¼ç¨èå¼\n\nç¼ç¨èå¼ æçæ¯ä¸ç§ç¼ç¨é£æ ¼ï¼å®æè¿°äºç¨åºåå¯¹ç¨åºæ§è¡ççæ³ãå¨ç¼ç¨çä¸çä¸­ï¼åä¸ä¸ªé®é¢ï¼å¯ä»¥ç«å¨å¤ä¸ªè§åº¦å»åæè§£å³ï¼è¿äºä¸åçè§£å³æ¹æ¡å°±å¯¹åºäºä¸åçç¼ç¨é£æ ¼ã\n\n\n\n * Imperative å½ä»¤å¼ï¼ä½¿ç¨æµç¨åçè¯­å¥åè¿ç¨ç´æ¥æ§å¶ç¨åºçè¿è¡åæ°æ®ç¶æã\n * Declarative å£°åå¼ï¼å®ä¹è®¡ç®çé»è¾èä¸æ¯å®ä¹å·ä½çæµç¨æ§å¶ã\n\n> å½ä»¤å¼ï¼å ä¹å®å¨éä¸­äºåè¯è®¡ç®æºâå¦ä½âå®æä»»å¡ï¼å®åæ¥çâifâè¯­å¥ãâforâå¾ªç¯ãä¸´æ¶åéãå¸¦æå¯ä½ç¨çå½æ°è°ç¨ä»¥åå½æ°ä¹é´çéå¼æ°æ®æµãå½ç¶ï¼ä½ å¯ä»¥éè¿å®çé»è¾æ¥æ¥çæ°æ®æ¯å¦ä½æµå¨åæ´æ¹å°æç»ç¶æçï¼ä½å®ä¸ç¹ä¹ä¸æ¸æ¥æç´æ¥ã\n> \n> å£°æå¼ï¼å®æ¶é¤äºåé¢æå°çå¤§å¤æ°å½ä»¤å¼ææ¯ãæ³¨ææ²¡ææ¾å¼çæ¡ä»¶ãå¾ªç¯ãå¯ä½ç¨ãç¸åï¼å®ä½¿ç¨æä»¬æè¯´çå½æ°å¼ç¼ç¨ï¼å¦è½¬æ¢åç»åã\n\n\n# å½æ°å¼ç¼ç¨ä¼å¿\n\n * ä»£ç ç²¾ç®\n * æ¨¡åå\n * å¤ç¨æ§\n * åå°è¦å\n * å¯è¯»æ§\n\n\n\n\n# è¡çåºç¨åºæ¯\n\n * çº¯å½æ°\n * è®°å¿å½æ°\n * éå½ä¸å°¾éå½\n * é«é¶å½æ°\n * é­å\n * å½æ°æ¯éå\n * åå½æ°\n * å½æ°ç»å\n * æ°æ§æ±å¼\n\n\n# çº¯å½æ°\n\nçº¯å½æ°ï¼Pure Functionsï¼æ¯è¿æ ·ä¸ç§å½æ°ï¼å³ç¸åçè¾å¥ï¼æ°¸è¿ä¼å¾å°ç¸åçè¾åºï¼èä¸æ²¡æä»»ä½å¯è§å¯çå¯ä½ç¨ãè¿æå³çå¯¹å¤é¨ç¶æçè§£è¦ã\n\n * å¯ç¼å­æ§ï¼Cacheableï¼\n * å¯æµè¯æ§ï¼Testableï¼\n * åçæ§ï¼Reasonableï¼\n * å¹¶è¡ä»£ç ï¼Parallel Codeï¼\n * å¯ç§»æ¤æ§ï¼èªææ¡£åï¼Portable / Self-Documentingï¼\n\n// slice æ¯çº¯å½æ°ï¼splice ä¸æ¯\nconst arr = [1,2,3,4,5,6]\narr.slice(0,2) //[1,2]\narr.slice(0,2) //[1,2]\n\narr.splice(0,2) //[1,2]\narr.splice(0,2) //[3,4]\n\n\n\n# å¯ä½ç¨\n\nåªè¦æ¯è·å½æ°å¤é¨ç¯å¢åççäº¤äºå°±é½æ¯å¯ä½ç¨---è¿ä¸ç¹å¯è½ä¼è®©ä½ æçæ å¯ä½ç¨ç¼ç¨çå¯è¡æ§ã\n\n * åéä¸ä¸ª http è¯·æ±\n * è·åç¨æ·è¾å¥\n * DOM æ¥è¯¢\n * å¾æ°æ®åºæå¥è®°å½\n * æå°/log\n * â¦\n\n> å½æ°å¼ç¼ç¨çå²å­¦å°±æ¯åå®å¯ä½ç¨æ¯é æä¸æ­£å½è¡ä¸ºçä¸»è¦åå ã\n\n\n# éå½ä¸å°¾éå½\n\n> å¦ä½å®ç°ä¸ä¸ªè®¡ç®ææ³¢é£å¥æ°åçå½æ°ï¼\n> \n> fibonacciï¼1ï¼1ï¼2ï¼3ï¼5ï¼8ï¼13 å½æ°è¡¨è¾¾ï¼f (n) = f (n - 1) + f (n - 2)\n\n// è¿­ä»£\nconst fibonacci = n => {\n  let current = 0;\n  let next = 1;\n  for (let i = 0; i < n; i++) {\n    [current, next] = [next, current + next];\n  }\n  return current;\n}\n\n// éå½\nconst fibonacci = n => {\n  return n < 3 ? 1 : fibonacci(n - 1) + fibonacci(n - 2);\n}\n\n\néå½çç¼ºç¹ï¼åæ ååºæ ä¼æ¶èæ§è½ã\n\n\n\n// å°¾éå½\nconst fibonacci = (n, sum1 = 1, sum2 = 1) => {\n  if (n < 3) return sum2;\n  return fibonacci(n - 1, sum2, sum1 + sum2);\n}\n\n\n\n\n\n# è®°å¿å½æ°\n\nfunction memoize (fn) {\n    let cache = {};\n    return function () {\n        let key = JSON.stringify(arguments);\n        cache[key] = cache[key] || fn(...arguments); // ä¸å¿éæ°æ§è¡\n        return cache[key];\n    }\n}\nlet fibonacciWithMemory = memoize(fibonacci);\n\nfibonacciWithMemory(10);\nfibonacciWithMemory(10);\n\n\n> å½æ°ç»è¿è®°å¿åè¿è¡çä¾å­,å¯ä»¥ææ¾çåç°ï¼ç¬¬äºæ¬¡è¿è¡æ¶æ¯å ä¹ä¸è±æ¶é´çï¼\n> \n> æ­£æ¯å ä¸ºçº¯å½æ°çå¯é æ§ï¼æè½ç¡®ä¿ç¼å­çæ°æ®ä¸å®æ¯æä»¬æ³è¦çæ°æ®ã\n\n\n# é«é¶å½æ°\n\nIn mathematics and computer science, a higher-order function is a function that does at least one of the following:\n\n * takes one or more functions as arguments (i.e. procedural parameters)\n * returns a function as its result.\n\nå¸¸è§çé«é¶å½æ°ï¼\n\n * map\n * filter\n * reduce\n * every\n\n// æ¨¡æ map\nconst map = (array, fn) => {\n    let res = []\n    for (let i = 0; i < arr.length; i++) {\n        res.push(fn(arr[i], i, arr))\n    }\n    return res\n}\n\n// æ¨¡æ every\nconst every = (array, fn) => {\n    let res = true\n    for (let value of array) {\n        res = fn(value)\n        if(!res) break\n    }\n    return res\n}\nevery(arr, v => v > 10)\n\n// æ¨¡æ some\nconst some = (array, fn) => {\n    let res = false\n    for (let value of array) {\n        res = fn(value)\n        if(res) break\n    }\n    return res\n}\n\n\n\n# æ¯éåä¸åå½æ°\n\n * æ¯éåï¼ææ¥åå¤ä¸ªåæ°çå½æ°åæ¢æä¸ç³»åæ¥ååä¸åæ°çå½æ°çææ¯ãå°ä¸ä¸ª n åå½æ°è½¬æ¢æ n ä¸ªä¸åå½æ°ã\n * åå½æ°ï¼ä¸ä¸ªå½æ°ï¼æ¥åä¸ä¸ªå¤åæ°çå½æ°ä¸ä¼ å¥é¨ååæ°åï¼è¿åä¸ä¸ªéè¦æ´å°åæ°çæ°å½æ°ãä¹å°±æ¯å°ä¸ä¸ª n åå½æ°è½¬æ¢æä¸ä¸ª n - x åå½æ°ãæ¬è´¨ä¸å¯ä»¥å°åå½æ°çææ¯æ¯éåçä¸ç§ç¹æ®æåµã\n\nä¼å¿ï¼\n\n * å¯¹å½æ°åæ°çç¼å­\n * è®©å½æ°åå¾æ´çµæ´»ï¼è®©å½æ°çç²åº¦æ´å°\n * æå¤åå½æ°è½¬æ¢æä¸åå½æ°ï¼å¯ä»¥ç»åä½¿ç¨å½æ°äº§çå¼ºå¤§çåè½\n\n// argumentså¯¹è±¡æ¯ææï¼éç®­å¤´ï¼å½æ°ä¸­é½å¯ç¨çå±é¨åé, æä»¥å¨è¿ééè¦å¨æ¬å·éå£°æä¸ä¸ (...arguments)\nconst curry = (fn, ...args) => \n\targs.length < fn.length\n     ? (...arguments) => curry(fn, ...args, ...arguments)\n\t   : fn(...args)\n\nfunction plus(a, b, c) {\n  return a + b + c\n}\n\nlet curryPlus = curry(plus)\ncurryPlus(1)(2)(3) // 6\ncurryPlus(1)(2,3) // 6\ncurryPlus(1,2)(3) // 6\ncurryPlus(1,2,3) // 6\n\nlet curryPlus = curry(plus, 1, 2, 3) \nconsole.log(curryPlus) // 6\n\n\næ¯éåå¨ Vue æºç ä¸­çåºç¨\n\n// src/platform/web/patch.js\nfunction createPatch (obj) {\n    // è¿æ ·å°±ä¸å¿æ¯æ¬¡é½patchåæ°éä¼  obj äº\n    return function patch (vdom1, vdom2) {\n        ..\n    }\n}\n\nconst patch = createPatch(...)\n\n\n\n# å½æ°ç»å\n\næ´è±ä»£ç ï¼tOUpper(first(reverse(arr))\n\nå¯ä»¥ç¨å½æ°ç»åæç»ç²åº¦çå½æ°ç»åæä¸ä¸ªæ°çå½æ°\n\nfunction compose(...args) {\n    return function(value) {\n        return args.reverse().reduce((acc, cur) => cur(acc), value)\n    }\n}\n\n// å®ç°ï¼æ°ç»ä¸­çå­ç¬¦ä¸² reverse -> åç¬¬ä¸ä¸ª -> è½¬æ¢ä¸ºå¤§å\nfunction reverse (arr) {\n  return arr.reverse()\n}\nfunction first (arr) {\n  return arr[0]\n}\nfunction toUpper(str) {\n  return str.toUpperCase()\n}\n\nconst f = compose(toUpper, first, reverse)\nconsole.log(f(['one', 'two', 'three'])) // THREE\n\n\n> Pointfree ç¼ç¨é£æ ¼ï¼å³ä¸ä½¿ç¨æè¦å¤ççå¼ï¼åªåæè¿ç®è¿ç¨ã\n\n\n# æ°æ§è®¡ç®\n\nlazy.js\n\næ°æ§è®¡ç®ï¼ä¹ç§°ä¸ºéä¸¥æ ¼è®¡ç®ï¼æéè°ç¨åå»¶è¿æ§è¡ï¼æ¯ä¸ç§è®¡ç®ç­ç¥ï¼å®ç­å¾ç´å°éè¦å¼æè½è®¡ç®å½æ°çç»æï¼è¿å¯¹å½æ°ç¼ç¨ç¹å«æç¨ã\n\nLazy([1,2,3,4,5,6,7,8,9,10])\n\t.map(i => i * 2)\n\t.filter(i => i <= 10)\n\t.take(3)\n\t.each(i => print(i))\n\n// 2, 4, 6\n\n\n\n# çè®ºèç´\n\n> å¯¹äºå½æ°å¼ç¼ç¨æ¥è¯´ï¼ä»¥ä¸è¿äºçè®ºä¸æ¯å¿è¦çï¼å¶å®ä½ ä¸æä¹å¯ä»¥å­¦ä¼å½æ°å¼ç¼ç¨ï¼ä½ä¸ºäºè§£å¨è¿éç®åä»ç»ä¸ã\n\n * Category theory èç´è®º\n * Morphisms æå°\n * Functors å½å­\n * Monads åå­\n * Semigroup åç¾¤\n * Monoid å¹ºåç¾¤\n\nèç´\n\n> ä»»ä½äºç©é½æ¯å¯¹è±¡ï¼å¤§éçå¯¹è±¡ç»åèµ·æ¥å°±å½¢æäºéåï¼å¯¹è±¡åå¯¹è±¡ä¹é´å­å¨ä¸ä¸ªæå¤ä¸ªèç³»ï¼ä»»ä½ä¸ä¸ªèç³»å°±å«åæå°ã\n\nå½å­\n\n> å½å­æ¯ä¸ä¸ªå®¹å¨ï¼å·æ map æ¹æ³ï¼å¯ä»¥æ å°å°å¦ä¸ä¸ªå®¹å¨ã\n> \n> èªå½å­ï¼èªå½å­å°±æ¯ä¸ä¸ªå°èç´æ å°å°èªèº«çå½å­ã\n\nåå­\n\n> èªå½å­èç´ä¸çä¸ä¸ªå¹ºåç¾¤\n\nå¹ºåç¾¤\n\n> å®ä¹ä¸ï¼å¯¹äºéç©ºéå Sï¼è¥å¨ S ä¸å®ä¹äºäºåè¿ç® âï¼ä½¿å¾å¯¹äºä»»æç a, b â *S,*æ a â b â Sï¼åç§° {S, â} ä¸ºç¾¤ã\n> \n> å®ä¹äºï¼è¥ {S, â} ä¸ºå¹¿ç¾¤ï¼ä¸è¿ç® â è¿æ»¡è¶³ç»åå¾ï¼å³ï¼ä»»æ a, b, c â Sï¼æ (a â b) â c = a â (b â c)ï¼åç§° {S, â} ä¸ºåç¾¤ã\n> \n> å®ä¹ä¸ï¼å¹ºåç¾¤æ¯ä¸ä¸ªå­å¨åä½åï¼å¹ºåï¼çåç¾¤ãåä½åï¼å¯¹äºåç¾¤ <S, â>ï¼å­å¨ e â Sï¼ä½¿å¾ä»»æ a â S æ a â e = e â a\n\n\n# å½å­\n\nclass Functor {\n  static of (value) {\n    return new Functor(value);\n  }\n  constructor (value) {\n    this._value = value;\n  }\n  map (fn) {\n    return Functor.of(fn(this._value));\n  }\n}\n\n// é¾å¼æä½ï¼ä¸ä¸ç´æ¥æä½å¼\nFunctor.of(5).map(add5).map(double)\n\n\n * å½å­æ¯ä¸ä¸ªå®¹å¨ï¼éé¢åå«äºå¼ã\n\n * å®¹å¨å·æmapæ¹æ³ãè¯¥æ¹æ³å°å®¹å¨éé¢çæ¯ä¸ä¸ªå¼ï¼æ å°å°å¦ä¸ä¸ªå®¹å¨ã\n\n * å½å­å·ææofæ¹æ³ï¼ç¨æ¥çææ°çå®¹å¨ã\n\n * è¿ç®é½æ¯éè¿å½å­å®æï¼ä¸ç´æ¥éå¯¹äºå¼ã\n\n# Maybe å½å­\n\n// å¦ä½å¤çåå§å¼ä¸ºç©ºçæåµ\nFunctor.of(null).map(s => s.toUpperCase());\n\nclass Maybe {\n  static of (value) {\n    return new Maybe(value);\n  }\n  constructor (value) {\n    this._value = value;\n  }\n  map (fn) {\n    return this._value ? Maybe.of(fn(this._value)) : Maybe.of(null);\n  }\n}\n\n\n# Ethier å½å­\n\n// å¦ä½å®ç°ä»¥ä¸åè½\nfunction addOne (x) {\n  return x + 1;\n}\n\nFunctor.of(5, 6).map(addOne); // Functor(5, 7)\nFunctor.of(1, null).map(addOne); // Functor(2, null)\n\n\nclass Ethier {\n  static of (left, right) {\n    return new Ethier(left, right);\n  }\n  constructor (left, right) {\n    this.left = left;\n    this.right = right;\n  }\n  map (fn) {\n    return this.right \n      ? Ethier.of(this.left, fn(this.right)) : Ethier.of(fn(this.left), this.right);\n  }\n}\n\n\n\n# åå­\n\n * å½æ°åµå¥æä»¬å¯ä»¥éè¿ compose æ¥è§£å³ã\n\n * å½å­åµå¥æä»¬å¯ä»¥éè¿ Monads æ¥è§£å³ã\n\nclass Monad {\n  static of (value) {\n    return new Monad(value);\n  }\n  constructor (value) {\n    this._value = value;\n  }\n  map (fn) {\n    return Monad.of(fn(this._value));\n  }\n  join () {\n    return this.value;\n  }\n}\n\nconst a = Monad.of(Monad.of('str'));\na.join().map(toUpperCase);\n\n\n\n# æä¸ä¸æ\n\n * æï¼ççä¹è°æãâè½è±æµæ°´æ¥å»ä¹âï¼è¿æ¯æ ¹æ¬æ§çè§å¾ï¼äººä»¬åªæç¥éå¦ä½å»éåºè¿ç§ååçèºæ¯ï¼æä¸ä¼è¢«ç¤¾ä¼ç»æ·æ±°ã\n * ä¸æï¼èå­ç§°ä¹ä¸ºï¼æç©æ··æï¼åå¤©å°çï¼å¯å®å¯¥å®ï¼ç¬ç«èä¸æ¹ï¼å¨è¡èä¸æ®ãåºå­ç§°ä¹ä¸ºâæææä¿¡ï¼æ ä¸ºæ å½¢ï¼å¯ä¼ èä¸å¯åï¼å¯å¾èä¸å¯è§ï¼èªæ¬èªæ ¹ï¼æªæå¤©å°ï¼èªå¤ä»¥åºå­â¦â¦åå¤©å°çèä¸ä¸ºä¹ï¼é¿äºä¸å¤èä¸ä¸ºèâã\n\n> åæï¼ä¸çä¸çä¸äºä¸ç©åæ¬å¤©å°å¨åï¼é½ä¸æ¯ä¸æä¸åçï¼æ¯ä¸åéé½å¨ææçæ¹åçç°å®çæåµï¼åªæ¯æäºååæ¾èï¼å¯ä»¥è¢«äººä»¬æè§å°ï¼èæäºååç¼æ¢ï¼å¹¶ä¸è¢«äººä»¬æå¯è§ã\n> \n> ä¸æï¼å¤©å°ä¹é´ä¸äºä¸ç©é½ä¼æ¹åï¼å¯æ¯å´æä¸ä¸ªæ°¸è¿ä¸åçä¸è¥¿å­å¨ï¼ä»æ¯ä¸äºä¸ç©çæ¬æºï¼æ¯æ°¸æçå­å¨ãå¾å¤äººé½ä¼ææ¨âä¸äºæ å¸¸âï¼è§å¾èªå·±å¥½åä»ä¹é½ææ¡ä¸ä½ãè¿ä¸ä¸çåï¼åçåªæ¯ç°è±¡èå·²ï¼åçèåä¸å®æä¸åçä¸è¥¿ãæä»¥è¯´ä¸æï¼å°±æ¯ä¸äºä¸ç©èåçè§å¾ï¼èåä¸åçå¸¸åï¼æä»¬æå®å«åâå¸¸âï¼å²å­¦ä¸å«åâæ¬ä½âã\n\né¢åå¯¹è±¡ç¼ç¨æä¸¤ä¸ªæ¦å¿µï¼å¯¹è±¡åç±»ãä»ä»¬æ¯ä»ä¹ï¼æ¯ååçä¸­é´æï¼ä¸ªä½ï¼å®ä½ï¼å¼ ä¸æ¯ä¸ä¸ªå¯¹è±¡ï¼æååæ¯ä¸ä¸ªå¯¹è±¡ï¼è¿æ¯æ ç©·æ å°½çã\n\næç»éçé£ä¸ªä¸æï¼ä¸åï¼å°±å¥½æ¯å½æ°å¼ç¼ç¨ï¼å½æ°å·æä¸åæ§ï¼ä¸è´æ§ãå°±æ¯å¦çº¯å½æ°ï¼ä¸ç¹å¯ä½ç¨é½æ²¡æãææçååï¼æåé½éè¿å½æ°ä¸²äºèµ·æ¥ãèååçåé¢ï¼å°±æ¯ä¸åï¼ä»¥ä¸ååºä¸åãæè§å¾è¿å°±æ¯å½æ°å¼ç¼ç¨çç²¾é«ï¼\n\n\n# åèèµæ\n\nJavaScriptä¸­çå½æ°å¼ç¼ç¨\n\nJavaScriptè½»éçº§å½æ°å¼ç¼ç¨",normalizedContent:"# å½æ°å¼ç¼ç¨\n\n\n# javascriptæ¯å½æ°å¼è¯­è¨å\n\njavascript æ¢ä¸æ¯ c++ï¼java é£æ ·ççº¯é¢åå¯¹è±¡è¯­è¨ï¼ä¹ä¸æ¯ haskell å lisp é£æ ·ççº¯å½æ°å¼è¯­è¨ã\n\n\n\n> js å¯ä»¥éè¿æäºæ¹å¼æ¥å®ç°å°è£ï¼ç»§æ¿ï¼å¤æï¼å½æ°éè½½ï¼ä½å¶ä¸­é¢åå¯¹è±¡çè®¾è®¡æ¨¡å¼æ¯éè¿ååå¯¹è±¡æ¥å®ç°çï¼å¹¶ä¸æ¯çæ­£çé¢åå¯¹è±¡è¯­è¨ã\n> \n> js åè®¸å¿åå½æ°ãé«é¶å½æ°ãé­åç­å½æ°å¼ç¹æ§ï¼ä¸æ°æ§è®¡ç®å¯ä»¥éè¿ lazy.js åºå®ç°ï¼ä¸å¯åæ°æ®å¯ä»¥ç®åå°éè¿ç¼ç¨ææ¯æ¥å®ç°ï¼ä½è¿äºé½æ¯éè¦ç¨åºå polyfillï¼å¹¶ä¸æ¯è¯­è¨æ¬èº«æå¸¦çç¹æ§ã\n\n\n# å½æ°å¼ç¼ç¨å®ä¹\n\nin computer science, functional programming is a programming paradigm where programs are constructed by applying and composing functions.\n\nå¨è®¡ç®æºç§å­¦ä¸­ï¼å½æ°å¼ç¼ç¨æ¯ä¸ç§éè¿åºç¨åç»åå½æ°æ¥æå»ºç¨åºçç¼ç¨èå¼ã\n\n\n# ç¼ç¨èå¼\n\nç¼ç¨èå¼ æçæ¯ä¸ç§ç¼ç¨é£æ ¼ï¼å®æè¿°äºç¨åºåå¯¹ç¨åºæ§è¡ççæ³ãå¨ç¼ç¨çä¸çä¸­ï¼åä¸ä¸ªé®é¢ï¼å¯ä»¥ç«å¨å¤ä¸ªè§åº¦å»åæè§£å³ï¼è¿äºä¸åçè§£å³æ¹æ¡å°±å¯¹åºäºä¸åçç¼ç¨é£æ ¼ã\n\n\n\n * imperative å½ä»¤å¼ï¼ä½¿ç¨æµç¨åçè¯­å¥åè¿ç¨ç´æ¥æ§å¶ç¨åºçè¿è¡åæ°æ®ç¶æã\n * declarative å£°åå¼ï¼å®ä¹è®¡ç®çé»è¾èä¸æ¯å®ä¹å·ä½çæµç¨æ§å¶ã\n\n> å½ä»¤å¼ï¼å ä¹å®å¨éä¸­äºåè¯è®¡ç®æºâå¦ä½âå®æä»»å¡ï¼å®åæ¥çâifâè¯­å¥ãâforâå¾ªç¯ãä¸´æ¶åéãå¸¦æå¯ä½ç¨çå½æ°è°ç¨ä»¥åå½æ°ä¹é´çéå¼æ°æ®æµãå½ç¶ï¼ä½ å¯ä»¥éè¿å®çé»è¾æ¥æ¥çæ°æ®æ¯å¦ä½æµå¨åæ´æ¹å°æç»ç¶æçï¼ä½å®ä¸ç¹ä¹ä¸æ¸æ¥æç´æ¥ã\n> \n> å£°æå¼ï¼å®æ¶é¤äºåé¢æå°çå¤§å¤æ°å½ä»¤å¼ææ¯ãæ³¨ææ²¡ææ¾å¼çæ¡ä»¶ãå¾ªç¯ãå¯ä½ç¨ãç¸åï¼å®ä½¿ç¨æä»¬æè¯´çå½æ°å¼ç¼ç¨ï¼å¦è½¬æ¢åç»åã\n\n\n# å½æ°å¼ç¼ç¨ä¼å¿\n\n * ä»£ç ç²¾ç®\n * æ¨¡åå\n * å¤ç¨æ§\n * åå°è¦å\n * å¯è¯»æ§\n\n\n\n\n# è¡çåºç¨åºæ¯\n\n * çº¯å½æ°\n * è®°å¿å½æ°\n * éå½ä¸å°¾éå½\n * é«é¶å½æ°\n * é­å\n * å½æ°æ¯éå\n * åå½æ°\n * å½æ°ç»å\n * æ°æ§æ±å¼\n\n\n# çº¯å½æ°\n\nçº¯å½æ°ï¼pure functionsï¼æ¯è¿æ ·ä¸ç§å½æ°ï¼å³ç¸åçè¾å¥ï¼æ°¸è¿ä¼å¾å°ç¸åçè¾åºï¼èä¸æ²¡æä»»ä½å¯è§å¯çå¯ä½ç¨ãè¿æå³çå¯¹å¤é¨ç¶æçè§£è¦ã\n\n * å¯ç¼å­æ§ï¼cacheableï¼\n * å¯æµè¯æ§ï¼testableï¼\n * åçæ§ï¼reasonableï¼\n * å¹¶è¡ä»£ç ï¼parallel codeï¼\n * å¯ç§»æ¤æ§ï¼èªææ¡£åï¼portable / self-documentingï¼\n\n// slice æ¯çº¯å½æ°ï¼splice ä¸æ¯\nconst arr = [1,2,3,4,5,6]\narr.slice(0,2) //[1,2]\narr.slice(0,2) //[1,2]\n\narr.splice(0,2) //[1,2]\narr.splice(0,2) //[3,4]\n\n\n\n# å¯ä½ç¨\n\nåªè¦æ¯è·å½æ°å¤é¨ç¯å¢åççäº¤äºå°±é½æ¯å¯ä½ç¨---è¿ä¸ç¹å¯è½ä¼è®©ä½ æçæ å¯ä½ç¨ç¼ç¨çå¯è¡æ§ã\n\n * åéä¸ä¸ª http è¯·æ±\n * è·åç¨æ·è¾å¥\n * dom æ¥è¯¢\n * å¾æ°æ®åºæå¥è®°å½\n * æå°/log\n * â¦\n\n> å½æ°å¼ç¼ç¨çå²å­¦å°±æ¯åå®å¯ä½ç¨æ¯é æä¸æ­£å½è¡ä¸ºçä¸»è¦åå ã\n\n\n# éå½ä¸å°¾éå½\n\n> å¦ä½å®ç°ä¸ä¸ªè®¡ç®ææ³¢é£å¥æ°åçå½æ°ï¼\n> \n> fibonacciï¼1ï¼1ï¼2ï¼3ï¼5ï¼8ï¼13 å½æ°è¡¨è¾¾ï¼f (n) = f (n - 1) + f (n - 2)\n\n// è¿­ä»£\nconst fibonacci = n => {\n  let current = 0;\n  let next = 1;\n  for (let i = 0; i < n; i++) {\n    [current, next] = [next, current + next];\n  }\n  return current;\n}\n\n// éå½\nconst fibonacci = n => {\n  return n < 3 ? 1 : fibonacci(n - 1) + fibonacci(n - 2);\n}\n\n\néå½çç¼ºç¹ï¼åæ ååºæ ä¼æ¶èæ§è½ã\n\n\n\n// å°¾éå½\nconst fibonacci = (n, sum1 = 1, sum2 = 1) => {\n  if (n < 3) return sum2;\n  return fibonacci(n - 1, sum2, sum1 + sum2);\n}\n\n\n\n\n\n# è®°å¿å½æ°\n\nfunction memoize (fn) {\n    let cache = {};\n    return function () {\n        let key = json.stringify(arguments);\n        cache[key] = cache[key] || fn(...arguments); // ä¸å¿éæ°æ§è¡\n        return cache[key];\n    }\n}\nlet fibonacciwithmemory = memoize(fibonacci);\n\nfibonacciwithmemory(10);\nfibonacciwithmemory(10);\n\n\n> å½æ°ç»è¿è®°å¿åè¿è¡çä¾å­,å¯ä»¥ææ¾çåç°ï¼ç¬¬äºæ¬¡è¿è¡æ¶æ¯å ä¹ä¸è±æ¶é´çï¼\n> \n> æ­£æ¯å ä¸ºçº¯å½æ°çå¯é æ§ï¼æè½ç¡®ä¿ç¼å­çæ°æ®ä¸å®æ¯æä»¬æ³è¦çæ°æ®ã\n\n\n# é«é¶å½æ°\n\nin mathematics and computer science, a higher-order function is a function that does at least one of the following:\n\n * takes one or more functions as arguments (i.e. procedural parameters)\n * returns a function as its result.\n\nå¸¸è§çé«é¶å½æ°ï¼\n\n * map\n * filter\n * reduce\n * every\n\n// æ¨¡æ map\nconst map = (array, fn) => {\n    let res = []\n    for (let i = 0; i < arr.length; i++) {\n        res.push(fn(arr[i], i, arr))\n    }\n    return res\n}\n\n// æ¨¡æ every\nconst every = (array, fn) => {\n    let res = true\n    for (let value of array) {\n        res = fn(value)\n        if(!res) break\n    }\n    return res\n}\nevery(arr, v => v > 10)\n\n// æ¨¡æ some\nconst some = (array, fn) => {\n    let res = false\n    for (let value of array) {\n        res = fn(value)\n        if(res) break\n    }\n    return res\n}\n\n\n\n# æ¯éåä¸åå½æ°\n\n * æ¯éåï¼ææ¥åå¤ä¸ªåæ°çå½æ°åæ¢æä¸ç³»åæ¥ååä¸åæ°çå½æ°çææ¯ãå°ä¸ä¸ª n åå½æ°è½¬æ¢æ n ä¸ªä¸åå½æ°ã\n * åå½æ°ï¼ä¸ä¸ªå½æ°ï¼æ¥åä¸ä¸ªå¤åæ°çå½æ°ä¸ä¼ å¥é¨ååæ°åï¼è¿åä¸ä¸ªéè¦æ´å°åæ°çæ°å½æ°ãä¹å°±æ¯å°ä¸ä¸ª n åå½æ°è½¬æ¢æä¸ä¸ª n - x åå½æ°ãæ¬è´¨ä¸å¯ä»¥å°åå½æ°çææ¯æ¯éåçä¸ç§ç¹æ®æåµã\n\nä¼å¿ï¼\n\n * å¯¹å½æ°åæ°çç¼å­\n * è®©å½æ°åå¾æ´çµæ´»ï¼è®©å½æ°çç²åº¦æ´å°\n * æå¤åå½æ°è½¬æ¢æä¸åå½æ°ï¼å¯ä»¥ç»åä½¿ç¨å½æ°äº§çå¼ºå¤§çåè½\n\n// argumentså¯¹è±¡æ¯ææï¼éç®­å¤´ï¼å½æ°ä¸­é½å¯ç¨çå±é¨åé, æä»¥å¨è¿ééè¦å¨æ¬å·éå£°æä¸ä¸ (...arguments)\nconst curry = (fn, ...args) => \n\targs.length < fn.length\n     ? (...arguments) => curry(fn, ...args, ...arguments)\n\t   : fn(...args)\n\nfunction plus(a, b, c) {\n  return a + b + c\n}\n\nlet curryplus = curry(plus)\ncurryplus(1)(2)(3) // 6\ncurryplus(1)(2,3) // 6\ncurryplus(1,2)(3) // 6\ncurryplus(1,2,3) // 6\n\nlet curryplus = curry(plus, 1, 2, 3) \nconsole.log(curryplus) // 6\n\n\næ¯éåå¨ vue æºç ä¸­çåºç¨\n\n// src/platform/web/patch.js\nfunction createpatch (obj) {\n    // è¿æ ·å°±ä¸å¿æ¯æ¬¡é½patchåæ°éä¼  obj äº\n    return function patch (vdom1, vdom2) {\n        ..\n    }\n}\n\nconst patch = createpatch(...)\n\n\n\n# å½æ°ç»å\n\næ´è±ä»£ç ï¼toupper(first(reverse(arr))\n\nå¯ä»¥ç¨å½æ°ç»åæç»ç²åº¦çå½æ°ç»åæä¸ä¸ªæ°çå½æ°\n\nfunction compose(...args) {\n    return function(value) {\n        return args.reverse().reduce((acc, cur) => cur(acc), value)\n    }\n}\n\n// å®ç°ï¼æ°ç»ä¸­çå­ç¬¦ä¸² reverse -> åç¬¬ä¸ä¸ª -> è½¬æ¢ä¸ºå¤§å\nfunction reverse (arr) {\n  return arr.reverse()\n}\nfunction first (arr) {\n  return arr[0]\n}\nfunction toupper(str) {\n  return str.touppercase()\n}\n\nconst f = compose(toupper, first, reverse)\nconsole.log(f(['one', 'two', 'three'])) // three\n\n\n> pointfree ç¼ç¨é£æ ¼ï¼å³ä¸ä½¿ç¨æè¦å¤ççå¼ï¼åªåæè¿ç®è¿ç¨ã\n\n\n# æ°æ§è®¡ç®\n\nlazy.js\n\næ°æ§è®¡ç®ï¼ä¹ç§°ä¸ºéä¸¥æ ¼è®¡ç®ï¼æéè°ç¨åå»¶è¿æ§è¡ï¼æ¯ä¸ç§è®¡ç®ç­ç¥ï¼å®ç­å¾ç´å°éè¦å¼æè½è®¡ç®å½æ°çç»æï¼è¿å¯¹å½æ°ç¼ç¨ç¹å«æç¨ã\n\nlazy([1,2,3,4,5,6,7,8,9,10])\n\t.map(i => i * 2)\n\t.filter(i => i <= 10)\n\t.take(3)\n\t.each(i => print(i))\n\n// 2, 4, 6\n\n\n\n# çè®ºèç´\n\n> å¯¹äºå½æ°å¼ç¼ç¨æ¥è¯´ï¼ä»¥ä¸è¿äºçè®ºä¸æ¯å¿è¦çï¼å¶å®ä½ ä¸æä¹å¯ä»¥å­¦ä¼å½æ°å¼ç¼ç¨ï¼ä½ä¸ºäºè§£å¨è¿éç®åä»ç»ä¸ã\n\n * category theory èç´è®º\n * morphisms æå°\n * functors å½å­\n * monads åå­\n * semigroup åç¾¤\n * monoid å¹ºåç¾¤\n\nèç´\n\n> ä»»ä½äºç©é½æ¯å¯¹è±¡ï¼å¤§éçå¯¹è±¡ç»åèµ·æ¥å°±å½¢æäºéåï¼å¯¹è±¡åå¯¹è±¡ä¹é´å­å¨ä¸ä¸ªæå¤ä¸ªèç³»ï¼ä»»ä½ä¸ä¸ªèç³»å°±å«åæå°ã\n\nå½å­\n\n> å½å­æ¯ä¸ä¸ªå®¹å¨ï¼å·æ map æ¹æ³ï¼å¯ä»¥æ å°å°å¦ä¸ä¸ªå®¹å¨ã\n> \n> èªå½å­ï¼èªå½å­å°±æ¯ä¸ä¸ªå°èç´æ å°å°èªèº«çå½å­ã\n\nåå­\n\n> èªå½å­èç´ä¸çä¸ä¸ªå¹ºåç¾¤\n\nå¹ºåç¾¤\n\n> å®ä¹ä¸ï¼å¯¹äºéç©ºéå sï¼è¥å¨ s ä¸å®ä¹äºäºåè¿ç® âï¼ä½¿å¾å¯¹äºä»»æç a, b â *s,*æ a â b â sï¼åç§° {s, â} ä¸ºç¾¤ã\n> \n> å®ä¹äºï¼è¥ {s, â} ä¸ºå¹¿ç¾¤ï¼ä¸è¿ç® â è¿æ»¡è¶³ç»åå¾ï¼å³ï¼ä»»æ a, b, c â sï¼æ (a â b) â c = a â (b â c)ï¼åç§° {s, â} ä¸ºåç¾¤ã\n> \n> å®ä¹ä¸ï¼å¹ºåç¾¤æ¯ä¸ä¸ªå­å¨åä½åï¼å¹ºåï¼çåç¾¤ãåä½åï¼å¯¹äºåç¾¤ <s, â>ï¼å­å¨ e â sï¼ä½¿å¾ä»»æ a â s æ a â e = e â a\n\n\n# å½å­\n\nclass functor {\n  static of (value) {\n    return new functor(value);\n  }\n  constructor (value) {\n    this._value = value;\n  }\n  map (fn) {\n    return functor.of(fn(this._value));\n  }\n}\n\n// é¾å¼æä½ï¼ä¸ä¸ç´æ¥æä½å¼\nfunctor.of(5).map(add5).map(double)\n\n\n * å½å­æ¯ä¸ä¸ªå®¹å¨ï¼éé¢åå«äºå¼ã\n\n * å®¹å¨å·æmapæ¹æ³ãè¯¥æ¹æ³å°å®¹å¨éé¢çæ¯ä¸ä¸ªå¼ï¼æ å°å°å¦ä¸ä¸ªå®¹å¨ã\n\n * å½å­å·ææofæ¹æ³ï¼ç¨æ¥çææ°çå®¹å¨ã\n\n * è¿ç®é½æ¯éè¿å½å­å®æï¼ä¸ç´æ¥éå¯¹äºå¼ã\n\n# maybe å½å­\n\n// å¦ä½å¤çåå§å¼ä¸ºç©ºçæåµ\nfunctor.of(null).map(s => s.touppercase());\n\nclass maybe {\n  static of (value) {\n    return new maybe(value);\n  }\n  constructor (value) {\n    this._value = value;\n  }\n  map (fn) {\n    return this._value ? maybe.of(fn(this._value)) : maybe.of(null);\n  }\n}\n\n\n# ethier å½å­\n\n// å¦ä½å®ç°ä»¥ä¸åè½\nfunction addone (x) {\n  return x + 1;\n}\n\nfunctor.of(5, 6).map(addone); // functor(5, 7)\nfunctor.of(1, null).map(addone); // functor(2, null)\n\n\nclass ethier {\n  static of (left, right) {\n    return new ethier(left, right);\n  }\n  constructor (left, right) {\n    this.left = left;\n    this.right = right;\n  }\n  map (fn) {\n    return this.right \n      ? ethier.of(this.left, fn(this.right)) : ethier.of(fn(this.left), this.right);\n  }\n}\n\n\n\n# åå­\n\n * å½æ°åµå¥æä»¬å¯ä»¥éè¿ compose æ¥è§£å³ã\n\n * å½å­åµå¥æä»¬å¯ä»¥éè¿ monads æ¥è§£å³ã\n\nclass monad {\n  static of (value) {\n    return new monad(value);\n  }\n  constructor (value) {\n    this._value = value;\n  }\n  map (fn) {\n    return monad.of(fn(this._value));\n  }\n  join () {\n    return this.value;\n  }\n}\n\nconst a = monad.of(monad.of('str'));\na.join().map(touppercase);\n\n\n\n# æä¸ä¸æ\n\n * æï¼ççä¹è°æãâè½è±æµæ°´æ¥å»ä¹âï¼è¿æ¯æ ¹æ¬æ§çè§å¾ï¼äººä»¬åªæç¥éå¦ä½å»éåºè¿ç§ååçèºæ¯ï¼æä¸ä¼è¢«ç¤¾ä¼ç»æ·æ±°ã\n * ä¸æï¼èå­ç§°ä¹ä¸ºï¼æç©æ··æï¼åå¤©å°çï¼å¯å®å¯¥å®ï¼ç¬ç«èä¸æ¹ï¼å¨è¡èä¸æ®ãåºå­ç§°ä¹ä¸ºâæææä¿¡ï¼æ ä¸ºæ å½¢ï¼å¯ä¼ èä¸å¯åï¼å¯å¾èä¸å¯è§ï¼èªæ¬èªæ ¹ï¼æªæå¤©å°ï¼èªå¤ä»¥åºå­â¦â¦åå¤©å°çèä¸ä¸ºä¹ï¼é¿äºä¸å¤èä¸ä¸ºèâã\n\n> åæï¼ä¸çä¸çä¸äºä¸ç©åæ¬å¤©å°å¨åï¼é½ä¸æ¯ä¸æä¸åçï¼æ¯ä¸åéé½å¨ææçæ¹åçç°å®çæåµï¼åªæ¯æäºååæ¾èï¼å¯ä»¥è¢«äººä»¬æè§å°ï¼èæäºååç¼æ¢ï¼å¹¶ä¸è¢«äººä»¬æå¯è§ã\n> \n> ä¸æï¼å¤©å°ä¹é´ä¸äºä¸ç©é½ä¼æ¹åï¼å¯æ¯å´æä¸ä¸ªæ°¸è¿ä¸åçä¸è¥¿å­å¨ï¼ä»æ¯ä¸äºä¸ç©çæ¬æºï¼æ¯æ°¸æçå­å¨ãå¾å¤äººé½ä¼ææ¨âä¸äºæ å¸¸âï¼è§å¾èªå·±å¥½åä»ä¹é½ææ¡ä¸ä½ãè¿ä¸ä¸çåï¼åçåªæ¯ç°è±¡èå·²ï¼åçèåä¸å®æä¸åçä¸è¥¿ãæä»¥è¯´ä¸æï¼å°±æ¯ä¸äºä¸ç©èåçè§å¾ï¼èåä¸åçå¸¸åï¼æä»¬æå®å«åâå¸¸âï¼å²å­¦ä¸å«åâæ¬ä½âã\n\né¢åå¯¹è±¡ç¼ç¨æä¸¤ä¸ªæ¦å¿µï¼å¯¹è±¡åç±»ãä»ä»¬æ¯ä»ä¹ï¼æ¯ååçä¸­é´æï¼ä¸ªä½ï¼å®ä½ï¼å¼ ä¸æ¯ä¸ä¸ªå¯¹è±¡ï¼æååæ¯ä¸ä¸ªå¯¹è±¡ï¼è¿æ¯æ ç©·æ å°½çã\n\næç»éçé£ä¸ªä¸æï¼ä¸åï¼å°±å¥½æ¯å½æ°å¼ç¼ç¨ï¼å½æ°å·æä¸åæ§ï¼ä¸è´æ§ãå°±æ¯å¦çº¯å½æ°ï¼ä¸ç¹å¯ä½ç¨é½æ²¡æãææçååï¼æåé½éè¿å½æ°ä¸²äºèµ·æ¥ãèååçåé¢ï¼å°±æ¯ä¸åï¼ä»¥ä¸ååºä¸åãæè§å¾è¿å°±æ¯å½æ°å¼ç¼ç¨çç²¾é«ï¼\n\n\n# åèèµæ\n\njavascriptä¸­çå½æ°å¼ç¼ç¨\n\njavascriptè½»éçº§å½æ°å¼ç¼ç¨",charsets:{cjk:!0}},{title:"å½æ°ä¸åéçè§£æé¡ºåº",frontmatter:{title:"å½æ°ä¸åéçè§£æé¡ºåº",date:"2018-08-08T15:00:54.000Z",categories:"JavaScript"},regularPath:"/javascript/parse-order.html",relativePath:"javascript/parse-order.md",key:"v-4e92cd47",path:"/javascript/parse-order.html",headers:[{level:2,title:"é¦åäºè§£ä¸ä¸è§å",slug:"é¦åäºè§£ä¸ä¸è§å",normalizedTitle:"é¦åäºè§£ä¸ä¸è§å",charIndex:2},{level:3,title:"ä¾å­ä¸",slug:"ä¾å­ä¸",normalizedTitle:"ä¾å­ä¸",charIndex:118},{level:3,title:"ä¾å­äº",slug:"ä¾å­äº",normalizedTitle:"ä¾å­äº",charIndex:472},{level:3,title:"ä¾å­ä¸",slug:"ä¾å­ä¸",normalizedTitle:"ä¾å­ä¸",charIndex:956},{level:3,title:"ä¾å­å",slug:"ä¾å­å",normalizedTitle:"ä¾å­å",charIndex:1456},{level:3,title:"ä¾å­äº",slug:"ä¾å­äº",normalizedTitle:"ä¾å­äº",charIndex:1922},{level:3,title:"ä¾å­å­",slug:"ä¾å­å­",normalizedTitle:"ä¾å­å­",charIndex:2321},{level:3,title:"ä¾å­ä¸",slug:"ä¾å­ä¸",normalizedTitle:"ä¾å­ä¸",charIndex:2723}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"é¦åäºè§£ä¸ä¸è§å ä¾å­ä¸ ä¾å­äº ä¾å­ä¸ ä¾å­å ä¾å­äº ä¾å­å­ ä¾å­ä¸",content:"# é¦åäºè§£ä¸ä¸è§å\n\n1)å½æ°å£°æä¼ç½®é¡¶\n\n2)åéå£°æä¹ä¼ç½®é¡¶\n\n3)å½æ°å£°ææ´ä¼å\n\n4)åéåèµå¼è¯­å¥ä¸èµ·ä¹¦åï¼å¨jså¼æè§£ææ¶ï¼ä¼å°å¶ææå£°æåèµå¼2é¨åï¼å£°æç½®é¡¶ï¼èµå¼ä¿çå¨åæ¥ä½ç½®\n\n5)å£°æè¿çåéä¸ä¼éå¤å£°æ\n\n\n# ä¾å­ä¸\n\nåæ¥çä¸ä¸ç»æ\n\nvar scope = gloabl;\nfunction f(){\n    console.log(scope);  \n    var scope = \"local\";  \n    console.log(scope);\t  \n}//è¾åºundefinedï¼local\n\n\næç§è§åæ¹åé¡ºåºä¹å\n\nvar scope = gloabl;\nfunction f(){\n    var scope;            //å£°ææå\n    console.log(scope);   //è¾åºundefinedï¼ä¸æ¯gloabl\n    scope = \"local\"       //åå§å\n    console.log(scope);\t  //è¾åºlocal\n}\n\n\n\n# ä¾å­äº\n\nåæ¥çä¸ä¸ç»æ\n\nconsole.log( a );         \nvar a = 1;\nvar a = [];\nfunction a(){\n    console.log( 'fn' );  \n}\nconsole.log( a );         //è¾åºå½æ°ä½ï¼[]\n\n\næç§è§åæ¹åé¡ºåºä¹å\n\nfunction a(){            //å½æ°å£°ææå\n    console.log( 'fn' ); //ä¸æ§è¡\n}\nvar a;                   //åéå£°ææåï¼ä½æ¯å¨å½æ°åé¢\nvar a;\nconsole.log( a );        //åæ¬jsåå­å°åä¸­æ¬æ¥å·²ç»å£°æäºä¸ä¸ªåä¸ºaçå½æ°å¯¹è±¡                            ï¼ç¸å½äºå·²ç»å°aè¿ä¸ªå°åæåäºå½æ°å¯¹è±¡ï¼ï¼åæ¬¡å£°æä¸æ¬¡                           aï¼ä½å¹¶æ²¡èµå¼ï¼æä»¥æå°åºæ¥çä¾æ§æ¯å½æ°aã\na = 1;\na = [];\nconsole.log( a );        //è¾åº[]\n\n\n\n# ä¾å­ä¸\n\nåæ¥çä¸ä¸ç»æ\n\nvar a = 1;\nfunction b(){\n    a = 10;              //è¿éaå¹¶æ²¡ææåä¸ºå¨å±åé\n    return;\n    function a(){\n        console.log(a);  \n    }\t\n}\nb();\nconsole.log(a);          //è¾åº1\n\n\nå¦æä½ ä¸æï¼æä»¬æ¥ççæ¹åä¹å\n\nfunction b(){\n    function a(){       //å½æ°å£°æç½®é¡¶\n        console.log(a); //ä¸æ§è¡\n    }\n    a = 10;             //10èµå¼ç»äºå½æ°åä¸ºaçè¿ä¸ªå½æ°å¯¹è±¡ï¼\n    return;\t\n}\nvar a;\na  = 1;\nb();\nconsole.log(a);        //è¾åº1\n\n\nå¦ææå½æ°aæ³¨éæ\n\nfunction b(){\n    a = 10;\n    return;\t\n}\nvar a;\na = 1;\nb();\nconsole.log(a);       //è¾åº10\n\n\n\n# ä¾å­å\n\nconsole.log( a );    \na();                 \nvar a = 1;\nconsole.log( a );    \nvar a = {};\nfunction a(){\n    var b = 5;\n    console.log( 'fn' );\n}\na();                 \nconsole.log( a );    //è¾åºå½æ°ä½ï¼\"fn\"ï¼1ï¼æ¥é\n\n\næ¹åé¡ºåº\n\nfunction a(){\n    var b = 5;\n    console.log( 'fn' );\n}\nvar a;\nvar a;\nconsole.log( a );    //è¾åºå½æ°ä½\na();                 //è¾åº\"fn\"\na = 1;               //è¾åº1\nconsole.log( a );\na = {};\na();                 //æ¥é\nconsole.log( a );    //åé¢æ¥éäºï¼ä¸æ§è¡äº\n\n\n\n# ä¾å­äº\n\nfn()();\nvar a = 0;\nfunction fn(){\n    console.log( a );\n    var a = 3;\n    function b(){\n        console.log( a );\n    }\n    return b;\n}                      //è¾åºundefined,3\n\n\næ¹åé¡ºåº\n\nfunction fn(){\n    function b(){\n        console.log( a );\n    }\n    var a;\n    console.log( a );  //è¾åºundefined\n    a = 3;\n    return b;          //è¿åå½æ°b\n}\nvar a;\nfn()();                //ç¸å½äºb()ï¼è¾åº3\na = 0;\n\n\n\n# ä¾å­å­\n\nfunction fn1(){\n    var num = 10;\n    function fn2(){\n        console.log( num );\n    }\n    return fn2;\n}\nconsole.log( fn1() );\nvar b = fn1();\nb();\n\n\næ¹åé¡ºåº\n\nfunction fn1(){\n    function fn2(){\n        console.log( num );\n    }\n    var num;\n    num = 10;\n    return fn2;\n}\nvar b;\nconsole.log( fn1() ); //åæ§è¡fn1(),è¿åfn2,è¾åºfn2çå½æ°ä½\nb = fn1();            //b=fn2\nb();                  //fn2(),è¾åº10\n\n\n\n# ä¾å­ä¸\n\na();\nfunction a(){\n    var fn = function(){\n        console.log( 123 );\n    }\n    return fn1;\n}\na();\nvar a = 0;\nvar a = 0;\nfunction fn1(){\n    console.log( a );\n    var a = 1;\n    return a;\n}\nconsole.log( fn1() );\nconsole.log( a );\nfn1()();//è¾åºundefined,undefined,undefined,1,0,undefined,æ¥é\n\n\næ¹åé¡ºåº\n\nfunction a(){\n    var fn = function(){\n        console.log( 123 );\n    }\n    return fn1();\n};\nfunction fn1(){\n    var a;\n    console.log( a );\n    a = 1;\n    return a;\n};\nvar a;\nvar a;\na();                 //fn1=>console.log(a)=>undefined\na();\t\t        //fn1=>console.log(a)=>undefined\na = 0;\na = 0;\nconsole.log( fn1() );//undefined,1\nconsole.log( a );    //0\nfn1()();             //fn1()=>console.log(a)=>undefined,a()=>æ¥é\n",normalizedContent:"# é¦åäºè§£ä¸ä¸è§å\n\n1)å½æ°å£°æä¼ç½®é¡¶\n\n2)åéå£°æä¹ä¼ç½®é¡¶\n\n3)å½æ°å£°ææ´ä¼å\n\n4)åéåèµå¼è¯­å¥ä¸èµ·ä¹¦åï¼å¨jså¼æè§£ææ¶ï¼ä¼å°å¶ææå£°æåèµå¼2é¨åï¼å£°æç½®é¡¶ï¼èµå¼ä¿çå¨åæ¥ä½ç½®\n\n5)å£°æè¿çåéä¸ä¼éå¤å£°æ\n\n\n# ä¾å­ä¸\n\nåæ¥çä¸ä¸ç»æ\n\nvar scope = gloabl;\nfunction f(){\n    console.log(scope);  \n    var scope = \"local\";  \n    console.log(scope);\t  \n}//è¾åºundefinedï¼local\n\n\næç§è§åæ¹åé¡ºåºä¹å\n\nvar scope = gloabl;\nfunction f(){\n    var scope;            //å£°ææå\n    console.log(scope);   //è¾åºundefinedï¼ä¸æ¯gloabl\n    scope = \"local\"       //åå§å\n    console.log(scope);\t  //è¾åºlocal\n}\n\n\n\n# ä¾å­äº\n\nåæ¥çä¸ä¸ç»æ\n\nconsole.log( a );         \nvar a = 1;\nvar a = [];\nfunction a(){\n    console.log( 'fn' );  \n}\nconsole.log( a );         //è¾åºå½æ°ä½ï¼[]\n\n\næç§è§åæ¹åé¡ºåºä¹å\n\nfunction a(){            //å½æ°å£°ææå\n    console.log( 'fn' ); //ä¸æ§è¡\n}\nvar a;                   //åéå£°ææåï¼ä½æ¯å¨å½æ°åé¢\nvar a;\nconsole.log( a );        //åæ¬jsåå­å°åä¸­æ¬æ¥å·²ç»å£°æäºä¸ä¸ªåä¸ºaçå½æ°å¯¹è±¡                            ï¼ç¸å½äºå·²ç»å°aè¿ä¸ªå°åæåäºå½æ°å¯¹è±¡ï¼ï¼åæ¬¡å£°æä¸æ¬¡                           aï¼ä½å¹¶æ²¡èµå¼ï¼æä»¥æå°åºæ¥çä¾æ§æ¯å½æ°aã\na = 1;\na = [];\nconsole.log( a );        //è¾åº[]\n\n\n\n# ä¾å­ä¸\n\nåæ¥çä¸ä¸ç»æ\n\nvar a = 1;\nfunction b(){\n    a = 10;              //è¿éaå¹¶æ²¡ææåä¸ºå¨å±åé\n    return;\n    function a(){\n        console.log(a);  \n    }\t\n}\nb();\nconsole.log(a);          //è¾åº1\n\n\nå¦æä½ ä¸æï¼æä»¬æ¥ççæ¹åä¹å\n\nfunction b(){\n    function a(){       //å½æ°å£°æç½®é¡¶\n        console.log(a); //ä¸æ§è¡\n    }\n    a = 10;             //10èµå¼ç»äºå½æ°åä¸ºaçè¿ä¸ªå½æ°å¯¹è±¡ï¼\n    return;\t\n}\nvar a;\na  = 1;\nb();\nconsole.log(a);        //è¾åº1\n\n\nå¦ææå½æ°aæ³¨éæ\n\nfunction b(){\n    a = 10;\n    return;\t\n}\nvar a;\na = 1;\nb();\nconsole.log(a);       //è¾åº10\n\n\n\n# ä¾å­å\n\nconsole.log( a );    \na();                 \nvar a = 1;\nconsole.log( a );    \nvar a = {};\nfunction a(){\n    var b = 5;\n    console.log( 'fn' );\n}\na();                 \nconsole.log( a );    //è¾åºå½æ°ä½ï¼\"fn\"ï¼1ï¼æ¥é\n\n\næ¹åé¡ºåº\n\nfunction a(){\n    var b = 5;\n    console.log( 'fn' );\n}\nvar a;\nvar a;\nconsole.log( a );    //è¾åºå½æ°ä½\na();                 //è¾åº\"fn\"\na = 1;               //è¾åº1\nconsole.log( a );\na = {};\na();                 //æ¥é\nconsole.log( a );    //åé¢æ¥éäºï¼ä¸æ§è¡äº\n\n\n\n# ä¾å­äº\n\nfn()();\nvar a = 0;\nfunction fn(){\n    console.log( a );\n    var a = 3;\n    function b(){\n        console.log( a );\n    }\n    return b;\n}                      //è¾åºundefined,3\n\n\næ¹åé¡ºåº\n\nfunction fn(){\n    function b(){\n        console.log( a );\n    }\n    var a;\n    console.log( a );  //è¾åºundefined\n    a = 3;\n    return b;          //è¿åå½æ°b\n}\nvar a;\nfn()();                //ç¸å½äºb()ï¼è¾åº3\na = 0;\n\n\n\n# ä¾å­å­\n\nfunction fn1(){\n    var num = 10;\n    function fn2(){\n        console.log( num );\n    }\n    return fn2;\n}\nconsole.log( fn1() );\nvar b = fn1();\nb();\n\n\næ¹åé¡ºåº\n\nfunction fn1(){\n    function fn2(){\n        console.log( num );\n    }\n    var num;\n    num = 10;\n    return fn2;\n}\nvar b;\nconsole.log( fn1() ); //åæ§è¡fn1(),è¿åfn2,è¾åºfn2çå½æ°ä½\nb = fn1();            //b=fn2\nb();                  //fn2(),è¾åº10\n\n\n\n# ä¾å­ä¸\n\na();\nfunction a(){\n    var fn = function(){\n        console.log( 123 );\n    }\n    return fn1;\n}\na();\nvar a = 0;\nvar a = 0;\nfunction fn1(){\n    console.log( a );\n    var a = 1;\n    return a;\n}\nconsole.log( fn1() );\nconsole.log( a );\nfn1()();//è¾åºundefined,undefined,undefined,1,0,undefined,æ¥é\n\n\næ¹åé¡ºåº\n\nfunction a(){\n    var fn = function(){\n        console.log( 123 );\n    }\n    return fn1();\n};\nfunction fn1(){\n    var a;\n    console.log( a );\n    a = 1;\n    return a;\n};\nvar a;\nvar a;\na();                 //fn1=>console.log(a)=>undefined\na();\t\t        //fn1=>console.log(a)=>undefined\na = 0;\na = 0;\nconsole.log( fn1() );//undefined,1\nconsole.log( a );    //0\nfn1()();             //fn1()=>console.log(a)=>undefined,a()=>æ¥é\n",charsets:{cjk:!0}},{title:"Javascriptä¸­thisçæå",frontmatter:{title:"Javascriptä¸­thisçæå",date:"2018-10-31T10:00:54.000Z",categories:"JavaScript"},regularPath:"/javascript/this.html",relativePath:"javascript/this.md",key:"v-4d2d4882",path:"/javascript/this.html",headers:[{level:2,title:"ç®­å¤´å½æ°ç this",slug:"ç®­å¤´å½æ°ç-this",normalizedTitle:"ç®­å¤´å½æ°ç this",charIndex:385},{level:2,title:"ç®­å¤´å½æ°ä¸æ®éå½æ°çåºå«",slug:"ç®­å¤´å½æ°ä¸æ®éå½æ°çåºå«",normalizedTitle:"ç®­å¤´å½æ°ä¸æ®éå½æ°çåºå«",charIndex:737},{level:2,title:"æ®éå½æ°åä½ä¸ºå¯¹è±¡æ¹æ³ç this",slug:"æ®éå½æ°åä½ä¸ºå¯¹è±¡æ¹æ³ç-this",normalizedTitle:"æ®éå½æ°åä½ä¸ºå¯¹è±¡æ¹æ³ç this",charIndex:1610},{level:2,title:"æé å½æ°ä¸­this",slug:"æé å½æ°ä¸­this",normalizedTitle:"æé å½æ°ä¸­this",charIndex:1974},{level:2,title:"applyæcallè°ç¨",slug:"applyæcallè°ç¨",normalizedTitle:"applyæcallè°ç¨",charIndex:2303}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"ç®­å¤´å½æ°ç this ç®­å¤´å½æ°ä¸æ®éå½æ°çåºå« æ®éå½æ°åä½ä¸ºå¯¹è±¡æ¹æ³ç this æé å½æ°ä¸­this applyæcallè°ç¨",content:"# Javascriptä¸­thisçæå\n\n * ä»¥å½æ°çå½¢å¼è°ç¨æ¶ï¼thisæåçæ¯window\n * ä»¥å¯¹è±¡çæ¹æ³çå½¢å¼è°ç¨æ¶ï¼thiså°±æ¯è°ç¨æ¹æ³çé£ä¸ªå¯¹è±¡\n * å½ä»¥æé å½æ°çå½¢å¼è°ç¨æ¶ï¼thiså°±æ¯æ°åå»ºçé£ä¸ªå¯¹è±¡\n * ä½¿ç¨call()åapply()è°ç¨æ¶ï¼thiså°±æ¯call()åapply()ç¬¬ä¸ä¸ªåæ°çå¯¹è±¡\n * ä½¿ç¨bind()()è°ç¨æ¶ï¼thiså°±æ¯bind()ç¬¬ä¸ä¸ªåæ°çå¯¹è±¡\n * ç®­å¤´å½æ°æ²¡æèªå·±ç thisï¼ç®­å¤´å½æ°åé¨ç this å¼å§ç»ç­äºç¦»å®æè¿çå¤é¨å½æ°ç this å¼ãæ¢å¥è¯è¯´ï¼ç®­å¤´å½æ°å¯æè¯æ³è§£æ thisï¼ç®­å¤´å½æ°æ²¡æå®ä¹èªå·±çæ§è¡ä¸ä¸æã\n * ç±äº ç®­å¤´å½æ°æ²¡æèªå·±çthisæéï¼éè¿ call() æ apply() æ¹æ³è°ç¨ä¸ä¸ªç®­å¤´å½æ°æ¶ï¼åªè½ä¼ éåæ°ï¼ä¸è½ç»å®thisï¼ï¼ä»ä»¬çç¬¬ä¸ä¸ªåæ°ä¼è¢«å¿½ç¥ã\n\n\n# ç®­å¤´å½æ°ç this\n\nconst obj = {\n    val: 1,\n    fn1: () => {\n        console.log(this.val)\n    },\n    fn2: function() {\n        console.log(this.val)\n    },\n    fn3: function() {\n        showThis = () => {\n            console.log(this.val)\n        }\n        showThis()\n    }\n}\nobj.fn1() // undefined\nobj.fn2() // 1\nobj.fn3() // 1 æ­¤å¤ç this ç»§æ¿äº fn3ç this\n\n\n\n# ç®­å¤´å½æ°ä¸æ®éå½æ°çåºå«\n\n * ä¸è½éè¿ new å³é®å­è°ç¨, æ²¡æåå\n\n * ä¸å¯ä»¥æ¹å this ç»å®ï¼ç±å¤å±éç®­å¤´å½æ°å³å®ï¼æä»¥ä½¿ç¨ call, apply, bind ä¹ä¸ä¼å½±å\n\n * ä¸æ¯æ argumentsï¼æä»¥æ ¹æ®ä½ç¨åé¾ï¼ä¼æ¿å°å¤å±å½æ°ç arguments\n\n * éå¼è¿åï¼ç®­å¤´å½æ°ç»ä½ çäºä¸ä¸ª returnï¼éåè¿ç§å½æ°ä½ååªæä¸è¡ä»£ç çæåµï¼å¤è¡è¿æ¯éè¦åç\n\nvar Foo1 = () => {};\nvar foo = new Foo1(); // TypeError: Foo is not a constructor\nconsole.log(Foo1.prototype); // undefined\n\nvar Foo2 = () => {\n    console.log(arguments)\n};\nFoo2() // Uncaught ReferenceError: arguments is not defined\n\n\nç±äºä¸æ¯æ argumentsï¼ES6 ä¹æä¾äºè¿ç§ä¸å®åæ°æåµä¸çåæ°å¦ææä½ï¼çä¸é¢çä¾å­\n\nconst add = (...args) => {\n\treturn args.reduce((cur, i) => cur + i, 0)\n}\nadd(5, 10, 15)\n\n\nçä¸éé¢æµè¯ä½ æ¯å¦ææ¡äº\n\n// æ®éå½æ°\nfunction foo() {\n  setTimeout(function(){\n    console.log('id:', this.id);\n  },100)\n}\nvar id = 1;\n\nfoo.call({ id: 2 }); // id: undefined\n\n// ç®­å¤´å½æ°\nfunction foo() {\n  setTimeout(() => {\n    console.log('id:', this.id);\n  }, 100);\n}\n\nvar id = 1;\n\nfoo.call({ id: 2 }); // id: 2\n\n\n\n# æ®éå½æ°åä½ä¸ºå¯¹è±¡æ¹æ³ç this\n\nwindow.val = 1;\nvar obj = {\n    val: 2,\n    dbl: function() {\n        this.val *= 2;\n        val *= 2;\n        console.log(val);\n        console.log(this.val);\n    }\n}\n//ä½ä¸ºå¯¹è±¡æ¹æ³\nobj.dbl(); // 2 4,thisæçæ¯objï¼æä»¥this.valå¼ä¸º4ï¼valç¸å½äºwindow.valå¼ä¸º2\n\n//æ®éå½æ°\nvar func = obj.dbl;\nfunc(); // 8 8ï¼func()æ²¡æä»»ä½åç¼ï¼thisæçæ¯window.func();æä»¥æ­¤æ¶thiså¼å¾æ¯windowï¼å¼åä¸º8\n\n\n\n# æé å½æ°ä¸­this\n\nJavaScript æ¯æé¢åå¯¹è±¡å¼ç¼ç¨ï¼ä¸ä¸»æµçé¢åå¯¹è±¡å¼ç¼ç¨è¯­è¨ä¸åï¼JavaScript å¹¶æ²¡æç±»ï¼classï¼çæ¦å¿µï¼èæ¯ä½¿ç¨åºäºååï¼prototypeï¼çç»§æ¿æ¹å¼ãç¸åºçï¼JavaScript ä¸­çæé å½æ°ä¹å¾ç¹æ®ï¼å¦æä¸ä½¿ç¨ new è°ç¨ï¼ååæ®éå½æ°ä¸æ ·ãä½ä¸ºåä¸é¡¹çº¦å®ä¿æçååï¼æé å½æ°ä»¥å¤§åå­æ¯å¼å¤´ï¼æéè°ç¨èä½¿ç¨æ­£ç¡®çæ¹å¼è°ç¨ãå¦æè°ç¨æ­£ç¡®ï¼this ç»å®å°æ°åå»ºçå¯¹è±¡ä¸ã\n\nfunction Point(x, y){ \n\tthis.x = x; \n\tthis.y = y; \n}\n\nvar p = new Point(1,2);\nconsole.log(p.x);//==>1,thisæåå¯¹è±¡p\n\n\n\n# applyæcallè°ç¨\n\nå¨ JavaScript ä¸­å½æ°ä¹æ¯å¯¹è±¡ï¼å¯¹è±¡åææ¹æ³ï¼apply å call å°±æ¯å½æ°å¯¹è±¡çæ¹æ³ãè¿ä¸¤ä¸ªæ¹æ³å¼å¸¸å¼ºå¤§ï¼ä»ä»¬åè®¸åæ¢å½æ°æ§è¡çä¸ä¸æç¯å¢ï¼contextï¼ï¼å³ this ç»å®çå¯¹è±¡ãå¾å¤ JavaScript ä¸­çæå·§ä»¥åç±»åºé½ç¨å°äºè¯¥æ¹æ³ã\n\nfunction Point(x, y){ \n   this.x = x; \n   this.y = y; \n   this.moveTo = function(x, y){ \n       this.x = x; \n       this.y = y; \n   } \n} \n \nvar p1 = new Point(0, 0); \nvar p2 = {x: 0, y: 0}; \np1.moveTo(1, 1); \np1.moveTo.apply(p2, [10, 10]);\n\n\nå¨ä¸é¢çä¾å­ä¸­ï¼æä»¬ä½¿ç¨æé å½æ°çæäºä¸ä¸ªå¯¹è±¡ p1ï¼è¯¥å¯¹è±¡åæ¶å·æ moveTo æ¹æ³ï¼ä½¿ç¨å¯¹è±¡å­é¢éåå»ºäºå¦ä¸ä¸ªå¯¹è±¡ p2ï¼æä»¬çå°ä½¿ç¨ apply å¯ä»¥å° p1 çæ¹æ³åºç¨å° p2 ä¸ï¼è¿æ¶å this ä¹è¢«ç»å®å°å¯¹è±¡ p2 ä¸ãå¦ä¸ä¸ªæ¹æ³ call ä¹å·å¤åæ ·åè½ï¼ä¸åçæ¯æåçåæ°ä¸æ¯ä½ä¸ºä¸ä¸ªæ°ç»ç»ä¸ä¼ å¥ï¼èæ¯åå¼ä¼ å¥çã",normalizedContent:"# javascriptä¸­thisçæå\n\n * ä»¥å½æ°çå½¢å¼è°ç¨æ¶ï¼thisæåçæ¯window\n * ä»¥å¯¹è±¡çæ¹æ³çå½¢å¼è°ç¨æ¶ï¼thiså°±æ¯è°ç¨æ¹æ³çé£ä¸ªå¯¹è±¡\n * å½ä»¥æé å½æ°çå½¢å¼è°ç¨æ¶ï¼thiså°±æ¯æ°åå»ºçé£ä¸ªå¯¹è±¡\n * ä½¿ç¨call()åapply()è°ç¨æ¶ï¼thiså°±æ¯call()åapply()ç¬¬ä¸ä¸ªåæ°çå¯¹è±¡\n * ä½¿ç¨bind()()è°ç¨æ¶ï¼thiså°±æ¯bind()ç¬¬ä¸ä¸ªåæ°çå¯¹è±¡\n * ç®­å¤´å½æ°æ²¡æèªå·±ç thisï¼ç®­å¤´å½æ°åé¨ç this å¼å§ç»ç­äºç¦»å®æè¿çå¤é¨å½æ°ç this å¼ãæ¢å¥è¯è¯´ï¼ç®­å¤´å½æ°å¯æè¯æ³è§£æ thisï¼ç®­å¤´å½æ°æ²¡æå®ä¹èªå·±çæ§è¡ä¸ä¸æã\n * ç±äº ç®­å¤´å½æ°æ²¡æèªå·±çthisæéï¼éè¿ call() æ apply() æ¹æ³è°ç¨ä¸ä¸ªç®­å¤´å½æ°æ¶ï¼åªè½ä¼ éåæ°ï¼ä¸è½ç»å®thisï¼ï¼ä»ä»¬çç¬¬ä¸ä¸ªåæ°ä¼è¢«å¿½ç¥ã\n\n\n# ç®­å¤´å½æ°ç this\n\nconst obj = {\n    val: 1,\n    fn1: () => {\n        console.log(this.val)\n    },\n    fn2: function() {\n        console.log(this.val)\n    },\n    fn3: function() {\n        showthis = () => {\n            console.log(this.val)\n        }\n        showthis()\n    }\n}\nobj.fn1() // undefined\nobj.fn2() // 1\nobj.fn3() // 1 æ­¤å¤ç this ç»§æ¿äº fn3ç this\n\n\n\n# ç®­å¤´å½æ°ä¸æ®éå½æ°çåºå«\n\n * ä¸è½éè¿ new å³é®å­è°ç¨, æ²¡æåå\n\n * ä¸å¯ä»¥æ¹å this ç»å®ï¼ç±å¤å±éç®­å¤´å½æ°å³å®ï¼æä»¥ä½¿ç¨ call, apply, bind ä¹ä¸ä¼å½±å\n\n * ä¸æ¯æ argumentsï¼æä»¥æ ¹æ®ä½ç¨åé¾ï¼ä¼æ¿å°å¤å±å½æ°ç arguments\n\n * éå¼è¿åï¼ç®­å¤´å½æ°ç»ä½ çäºä¸ä¸ª returnï¼éåè¿ç§å½æ°ä½ååªæä¸è¡ä»£ç çæåµï¼å¤è¡è¿æ¯éè¦åç\n\nvar foo1 = () => {};\nvar foo = new foo1(); // typeerror: foo is not a constructor\nconsole.log(foo1.prototype); // undefined\n\nvar foo2 = () => {\n    console.log(arguments)\n};\nfoo2() // uncaught referenceerror: arguments is not defined\n\n\nç±äºä¸æ¯æ argumentsï¼es6 ä¹æä¾äºè¿ç§ä¸å®åæ°æåµä¸çåæ°å¦ææä½ï¼çä¸é¢çä¾å­\n\nconst add = (...args) => {\n\treturn args.reduce((cur, i) => cur + i, 0)\n}\nadd(5, 10, 15)\n\n\nçä¸éé¢æµè¯ä½ æ¯å¦ææ¡äº\n\n// æ®éå½æ°\nfunction foo() {\n  settimeout(function(){\n    console.log('id:', this.id);\n  },100)\n}\nvar id = 1;\n\nfoo.call({ id: 2 }); // id: undefined\n\n// ç®­å¤´å½æ°\nfunction foo() {\n  settimeout(() => {\n    console.log('id:', this.id);\n  }, 100);\n}\n\nvar id = 1;\n\nfoo.call({ id: 2 }); // id: 2\n\n\n\n# æ®éå½æ°åä½ä¸ºå¯¹è±¡æ¹æ³ç this\n\nwindow.val = 1;\nvar obj = {\n    val: 2,\n    dbl: function() {\n        this.val *= 2;\n        val *= 2;\n        console.log(val);\n        console.log(this.val);\n    }\n}\n//ä½ä¸ºå¯¹è±¡æ¹æ³\nobj.dbl(); // 2 4,thisæçæ¯objï¼æä»¥this.valå¼ä¸º4ï¼valç¸å½äºwindow.valå¼ä¸º2\n\n//æ®éå½æ°\nvar func = obj.dbl;\nfunc(); // 8 8ï¼func()æ²¡æä»»ä½åç¼ï¼thisæçæ¯window.func();æä»¥æ­¤æ¶thiså¼å¾æ¯windowï¼å¼åä¸º8\n\n\n\n# æé å½æ°ä¸­this\n\njavascript æ¯æé¢åå¯¹è±¡å¼ç¼ç¨ï¼ä¸ä¸»æµçé¢åå¯¹è±¡å¼ç¼ç¨è¯­è¨ä¸åï¼javascript å¹¶æ²¡æç±»ï¼classï¼çæ¦å¿µï¼èæ¯ä½¿ç¨åºäºååï¼prototypeï¼çç»§æ¿æ¹å¼ãç¸åºçï¼javascript ä¸­çæé å½æ°ä¹å¾ç¹æ®ï¼å¦æä¸ä½¿ç¨ new è°ç¨ï¼ååæ®éå½æ°ä¸æ ·ãä½ä¸ºåä¸é¡¹çº¦å®ä¿æçååï¼æé å½æ°ä»¥å¤§åå­æ¯å¼å¤´ï¼æéè°ç¨èä½¿ç¨æ­£ç¡®çæ¹å¼è°ç¨ãå¦æè°ç¨æ­£ç¡®ï¼this ç»å®å°æ°åå»ºçå¯¹è±¡ä¸ã\n\nfunction point(x, y){ \n\tthis.x = x; \n\tthis.y = y; \n}\n\nvar p = new point(1,2);\nconsole.log(p.x);//==>1,thisæåå¯¹è±¡p\n\n\n\n# applyæcallè°ç¨\n\nå¨ javascript ä¸­å½æ°ä¹æ¯å¯¹è±¡ï¼å¯¹è±¡åææ¹æ³ï¼apply å call å°±æ¯å½æ°å¯¹è±¡çæ¹æ³ãè¿ä¸¤ä¸ªæ¹æ³å¼å¸¸å¼ºå¤§ï¼ä»ä»¬åè®¸åæ¢å½æ°æ§è¡çä¸ä¸æç¯å¢ï¼contextï¼ï¼å³ this ç»å®çå¯¹è±¡ãå¾å¤ javascript ä¸­çæå·§ä»¥åç±»åºé½ç¨å°äºè¯¥æ¹æ³ã\n\nfunction point(x, y){ \n   this.x = x; \n   this.y = y; \n   this.moveto = function(x, y){ \n       this.x = x; \n       this.y = y; \n   } \n} \n \nvar p1 = new point(0, 0); \nvar p2 = {x: 0, y: 0}; \np1.moveto(1, 1); \np1.moveto.apply(p2, [10, 10]);\n\n\nå¨ä¸é¢çä¾å­ä¸­ï¼æä»¬ä½¿ç¨æé å½æ°çæäºä¸ä¸ªå¯¹è±¡ p1ï¼è¯¥å¯¹è±¡åæ¶å·æ moveto æ¹æ³ï¼ä½¿ç¨å¯¹è±¡å­é¢éåå»ºäºå¦ä¸ä¸ªå¯¹è±¡ p2ï¼æä»¬çå°ä½¿ç¨ apply å¯ä»¥å° p1 çæ¹æ³åºç¨å° p2 ä¸ï¼è¿æ¶å this ä¹è¢«ç»å®å°å¯¹è±¡ p2 ä¸ãå¦ä¸ä¸ªæ¹æ³ call ä¹å·å¤åæ ·åè½ï¼ä¸åçæ¯æåçåæ°ä¸æ¯ä½ä¸ºä¸ä¸ªæ°ç»ç»ä¸ä¼ å¥ï¼èæ¯åå¼ä¼ å¥çã",charsets:{cjk:!0}},{title:"galacean 3d",frontmatter:{},regularPath:"/mobile/gc-3d.html",relativePath:"mobile/gc-3d.md",key:"v-3cac1b41",path:"/mobile/gc-3d.html",headers:[{level:2,title:"Galacean engine å¿«éå¥é¨",slug:"galacean-engine-å¿«éå¥é¨",normalizedTitle:"galacean engine å¿«éå¥é¨",charIndex:270},{level:2,title:"Galacean Effects å®ç° 3d",slug:"galacean-effects-å®ç°-3d",normalizedTitle:"galacean effects å®ç° 3d",charIndex:1022},{level:2,title:"3d å®ç°å¯¹æ¯",slug:"_3d-å®ç°å¯¹æ¯",normalizedTitle:"3d å®ç°å¯¹æ¯",charIndex:1512},{level:2,title:"åä½ç§¯å¯¹æ¯",slug:"åä½ç§¯å¯¹æ¯",normalizedTitle:"åä½ç§¯å¯¹æ¯",charIndex:1969}],lastUpdated:"9/24/2025, 9:31:37 AM",lastUpdatedTimestamp:1758677497e3,headersStr:"Galacean engine å¿«éå¥é¨ Galacean Effects å®ç° 3d 3d å®ç°å¯¹æ¯ åä½ç§¯å¯¹æ¯",content:"# galacean 3d\n\nGalacean å®ç° 3d æææä¸¤ç§æ¹å¼ï¼\n\n * Galacean Engineï¼ç´æ¥ç¨å®æ¹ç»ç Web 3D å¼æï¼å¯ä»¥çè§£ä¸º three.js å¼æï¼åºå±é½æ¯ webglã\n   * Galacean Engine ä¸ three.js æ§è½å¯¹æ¯ï¼å¯ä»¥çä¸å®æ¹ææ¡£ï¼https://galacean.antgroup.com/engine/docsï¼é¾æ¥æé®é¢ï¼çä¸å¾ï¼\n\n\n\n\n\n * Galacean Effectsï¼ç®åç 3d ææå¯ç´æ¥ç¨ galacean effects æ¥å®ç°\n\n\n# Galacean engine å¿«éå¥é¨\n\nå¿«éå¥æå¯ä»¥çå®æ¹ä¾å­ï¼https://galacean.antgroup.com/engine/docs/basics/quickStart/quick-start/ï¼é¾æ¥æé®é¢ï¼çä¸å¾ï¼\n\n\n\n\n\nç¼è¾å¨å°åï¼https://galacean.antgroup.com/editor/projects\n\næææ¡£ä¸æ­¥ä¸æ­¥å®è·µå³å¯ï¼è¿éä¸»è¦ä»ç»äºå¦ä½å¨ç¼è¾å¨ä¸­åå»º 3d é¡¹ç®ä»¥åå¨ç¼è¾å¨ä¸­å¼å¥ glb æ¨¡åãè®¾ç½®ç¯åãèæ¬ãçæºé¢è§ç­ã\n\n\n\nä¸é¢ä¸»è¦ä»ç»ä¸å¯¼åºåå¨æä»¬çé¡¹ç®ä¸­ï¼feed-activity ä¸ºä¾ï¼æä¹ä½¿ç¨ï¼\n\n 1. å¨è¿éæä»¬å¯¼åºç¤ºä¾ä¸­ç Vanilla JS é¡¹ç®\n\n\n\n 1. å¯¼åºåçç®å½å¦ä¸ï¼å¶ä¸­public ä¸­çæä»¶é½ä¼ å° cdn ä¸­ï¼ç¶åå¨ project.json ä¸­æææçèµæºè¿è¡è·¯å¾æ¿æ¢ï¼ç¶ååæ public/project.json ä¹ä¼ å° cdn ä¸­\n\nï¼script.ts ä»æ¬å°å¼å¥ï¼æµè¯åç°ä¸ä¸ä¼ cdnä¹å¯ä»¥ï¼\n\n\n\n\n\n 1. é¡¹ç®æ ¹ç®å½ä¸­è¿æä¸ä¸ª project.json ï¼æå¶ä¸­ç project.json url æ¿æ¢æç¬¬äºæ­¥ç cdn å°åï¼publicä¸­çé£ä¸ªï¼\n\n\n\n 1. æ¾å° src ä¸­ç index.tsï¼scripts å°±å¼å¥å¯¼åºç srciptsï¼projectInfo å¼å¥ç¬¬3æ­¥ç project.jsonï¼åæindex.ts ä¸­çåå§ä»£ç å¤å¶å°é¡¹ç®ä¸­å³å¯ã\n\n\n\n 1. å¨ feed-activity ä¸­å¦ä¸ï¼éè¦çåªæ scripts ï¼æ­¤å¤æ ts æ¹æäº jsï¼å project.jsonï¼å¶ä½åå®¹é½å¨ cdn ä¸\n\n\n\n 1. æç»å¨é¡¹ç®ä¸­è·é\n\n\n\n\n# Galacean Effects å®ç° 3d\n\nå·ä½æä½å¯ä»¥ç https://galacean.antgroup.com/effects/user/hpb4n5\n\n 1. æ°å»ºåæï¼åºæ¯éæ© 3d\n\n\n\n 1. èµæºä¸­æ·»å  glb æ¨¡åï¼å·¦ä¸è§å¯ä»¥å¹³ç§»æè½¬ç¼©æ¾ç­\n\n\n\n 1. å¯¼åºæµç¨å2dç±»ä¼¼ï¼èµæºä¹æ¯ .bin/.webp\n\n 2. å¨ Galacean Effects ä¸­ä½¿ç¨ 3D åç´ çæ¸²æï¼éè¦åç¬å¼å¥ 3D æä»¶åã3Dæ¨¡åå¯è½ä¼å¼å¥å¤æçæ¸²æï¼ä¸çº¿åéè¦è¯ä¼°æ§è½ã\n\n// NPM\nimport { Player } from'@galacean/effects';\n// ç¡®ä¿å¨ Player å¼å¥ä¹ååå¼å¥æä»¶, æä»¶çæ¬ä¿æå Player ä¸è´\nimport'@galacean/effects-plugin-model';\n\n\nä½¿ç¨ç¤ºä¾ï¼https://galacean.antgroup.com/effects/playground/vanilla-%E6%92%AD%E6%94%BE%203D%20%E6%A8%A1%E5%9E%8B\n\n\n# 3d å®ç°å¯¹æ¯\n\n * galacean effects 3d\n   * ä¼ç¹ï¼ç¨ Player å°±å¯ä»¥å®ç° 2d/3d ææï¼3d åªéå¨åæ player åºç¡ä¸å¼å¥æä»¶å³å¯ã\n   * ç¼ºç¹ï¼åªéç¨äºç®åç 3d ææï¼å¹¶ä¸éåè·é·ç­å°æ¸¸æçå®ç°ã\n * galacean engine\n   * ä¼ç¹ï¼å¯ä»¥ç´æ¥ææ¨¡åå¯¼å¥3dç¼è¾å¨ï¼è¿è¡ç¯åä½ç½®ç­åæ°è°è¯ï¼å¯çæºé¢è§ï¼ç ååè§è§æ²éææ¬è¾å°\n   * ç¼ºç¹\n     * å­¦ä¹ 3dç¼è¾å¨ææ¬ï¼å¶ä¸­å®ä½çèæ¬éè¦å¨ç¼è¾å¨ä¸­å®æã\n     * ç¼è¾å¨å¯¼åºé¡¹ç®åæ¯tsï¼ä¸èµæºè¿å¤é½éè¦ä¸ä¼ cdnï¼ä»å¯¼åºèµæºå°å¨é¡¹ç®ä¸­ä½¿ç¨è¿ä¸è¿ç¨æ¶èæ¶é´è¿é¿ï¼ä¸æ¦é¢ç¹æ¹å¨åæ¶é´ä¸å¯æ§ã\n     * éè¦å¯¼å¥æ°çåï¼ä½ç§¯ä¼å¢å \n * three.js\n   * å¯å®ç°å°æ¸¸æå¤æäº¤äºï¼æä¹åçé¡¹ç®ç»éªï¼ä¸æå®¹æ\n   * æ§è½è¾å¥½ï¼galacean engine å®ç½ç»çæ§è½æ¯ three å¥½çä¾å­é½æ¯å¤§é æ¨¡å/ç²å­ç³»ç» çæåµï¼æ­£å¸¸é¡¹ç®ä¸ä¼æè¿ä¹å¤ã\n\n\n\n\n\n\n# åä½ç§¯å¯¹æ¯\n\n\n\n\n\nåºæ¯                                  å                                             ä½ç§¯\næ®éå¨æ                                @galacean/effects                             141.67KB\næ®éå¨æ + spine 2d å¨æ                  @galacean/effects +@galacean-plugin-spine     141.67KB + 48.99KB = 190.66 KB\næ®éå¨æ +spine 2d å¨æ + 3d ä¸»å¨æ          @galacean/effects +@galacean-plugin-spine +   141.67KB + 48.99KB +35.96KB = 226.62KB\n                                    @galacean-plugin-model\næ®éå¨æ +spine 2d å¨æ + 3d ä¸»å¨æ +å¤æå°æ¸¸æ   @galacean/effects +@galacean-plugin-spine +   141.67KB + 48.99KB +35.96KB +261.44KB = 487.95KB\n                                    @galacean-plugin-model +@galacean/engine\næ®éå¨æ +å¤æå°æ¸¸æ                         @galacean/effects +@galacean/engine           141.67KB + 261.44KB = 403.11KB\n\nå¯ä»¥çå°ä½ç§¯æå¤§çä¸º @galacean/engine æ 261.44KBï¼è¥å¨é¨å¼å¥åæååºæ¥ç static/feed-acticity/js/galacean.js æ 500KB+\n\nç¸æ¯ä¹ä¸ three.js åªæ 147.35KBï¼ä»¥æä»¬æå¸¸è§çåºæ¯ï¼æ®é2då¨æ + å°æ¸¸æï¼æ®éä¸è¥¿éç¨ @galacean/effectsï¼å°æ¸¸æéç¨ three.js åï¼\n\nåºæ¯                          å                                                      ä½ç§¯\næ®éå¨æ +spine 2d å¨æ + å¤æå°æ¸¸æ   @galacean/effects +@galacean-plugin-spine + three.js   galacean.js + three.js = 190.66KB + 147.35KB\n\n * ç»¼ä¸æè¿°ï¼\n   * æ®éå¨æä½¿ç¨ @galacean/effects + @galacean-plugin-spine\n   * ç®åç3då¨æ @galacean/effects + @galacean-plugin-model\n   * å°æ¸¸æä½¿ç¨ three.js\n   * æ®éå¨æ + 3d å¨æ + å°æ¸¸æï¼@galacean/effects + @galacean-plugin-spine + @galacean-plugin-model + three.js ï¼ä¸å»ºè®®ï¼\n   * æ®éå¨æ + å°æ¸¸æï¼@galacean/effects + @galacean-plugin-spine + three.js ï¼å°æ¸¸æé¡¹ç®å¸¸è§ï¼",normalizedContent:"# galacean 3d\n\ngalacean å®ç° 3d æææä¸¤ç§æ¹å¼ï¼\n\n * galacean engineï¼ç´æ¥ç¨å®æ¹ç»ç web 3d å¼æï¼å¯ä»¥çè§£ä¸º three.js å¼æï¼åºå±é½æ¯ webglã\n   * galacean engine ä¸ three.js æ§è½å¯¹æ¯ï¼å¯ä»¥çä¸å®æ¹ææ¡£ï¼https://galacean.antgroup.com/engine/docsï¼é¾æ¥æé®é¢ï¼çä¸å¾ï¼\n\n\n\n\n\n * galacean effectsï¼ç®åç 3d ææå¯ç´æ¥ç¨ galacean effects æ¥å®ç°\n\n\n# galacean engine å¿«éå¥é¨\n\nå¿«éå¥æå¯ä»¥çå®æ¹ä¾å­ï¼https://galacean.antgroup.com/engine/docs/basics/quickstart/quick-start/ï¼é¾æ¥æé®é¢ï¼çä¸å¾ï¼\n\n\n\n\n\nç¼è¾å¨å°åï¼https://galacean.antgroup.com/editor/projects\n\næææ¡£ä¸æ­¥ä¸æ­¥å®è·µå³å¯ï¼è¿éä¸»è¦ä»ç»äºå¦ä½å¨ç¼è¾å¨ä¸­åå»º 3d é¡¹ç®ä»¥åå¨ç¼è¾å¨ä¸­å¼å¥ glb æ¨¡åãè®¾ç½®ç¯åãèæ¬ãçæºé¢è§ç­ã\n\n\n\nä¸é¢ä¸»è¦ä»ç»ä¸å¯¼åºåå¨æä»¬çé¡¹ç®ä¸­ï¼feed-activity ä¸ºä¾ï¼æä¹ä½¿ç¨ï¼\n\n 1. å¨è¿éæä»¬å¯¼åºç¤ºä¾ä¸­ç vanilla js é¡¹ç®\n\n\n\n 1. å¯¼åºåçç®å½å¦ä¸ï¼å¶ä¸­public ä¸­çæä»¶é½ä¼ å° cdn ä¸­ï¼ç¶åå¨ project.json ä¸­æææçèµæºè¿è¡è·¯å¾æ¿æ¢ï¼ç¶ååæ public/project.json ä¹ä¼ å° cdn ä¸­\n\nï¼script.ts ä»æ¬å°å¼å¥ï¼æµè¯åç°ä¸ä¸ä¼ cdnä¹å¯ä»¥ï¼\n\n\n\n\n\n 1. é¡¹ç®æ ¹ç®å½ä¸­è¿æä¸ä¸ª project.json ï¼æå¶ä¸­ç project.json url æ¿æ¢æç¬¬äºæ­¥ç cdn å°åï¼publicä¸­çé£ä¸ªï¼\n\n\n\n 1. æ¾å° src ä¸­ç index.tsï¼scripts å°±å¼å¥å¯¼åºç srciptsï¼projectinfo å¼å¥ç¬¬3æ­¥ç project.jsonï¼åæindex.ts ä¸­çåå§ä»£ç å¤å¶å°é¡¹ç®ä¸­å³å¯ã\n\n\n\n 1. å¨ feed-activity ä¸­å¦ä¸ï¼éè¦çåªæ scripts ï¼æ­¤å¤æ ts æ¹æäº jsï¼å project.jsonï¼å¶ä½åå®¹é½å¨ cdn ä¸\n\n\n\n 1. æç»å¨é¡¹ç®ä¸­è·é\n\n\n\n\n# galacean effects å®ç° 3d\n\nå·ä½æä½å¯ä»¥ç https://galacean.antgroup.com/effects/user/hpb4n5\n\n 1. æ°å»ºåæï¼åºæ¯éæ© 3d\n\n\n\n 1. èµæºä¸­æ·»å  glb æ¨¡åï¼å·¦ä¸è§å¯ä»¥å¹³ç§»æè½¬ç¼©æ¾ç­\n\n\n\n 1. å¯¼åºæµç¨å2dç±»ä¼¼ï¼èµæºä¹æ¯ .bin/.webp\n\n 2. å¨ galacean effects ä¸­ä½¿ç¨ 3d åç´ çæ¸²æï¼éè¦åç¬å¼å¥ 3d æä»¶åã3dæ¨¡åå¯è½ä¼å¼å¥å¤æçæ¸²æï¼ä¸çº¿åéè¦è¯ä¼°æ§è½ã\n\n// npm\nimport { player } from'@galacean/effects';\n// ç¡®ä¿å¨ player å¼å¥ä¹ååå¼å¥æä»¶, æä»¶çæ¬ä¿æå player ä¸è´\nimport'@galacean/effects-plugin-model';\n\n\nä½¿ç¨ç¤ºä¾ï¼https://galacean.antgroup.com/effects/playground/vanilla-%e6%92%ad%e6%94%be%203d%20%e6%a8%a1%e5%9e%8b\n\n\n# 3d å®ç°å¯¹æ¯\n\n * galacean effects 3d\n   * ä¼ç¹ï¼ç¨ player å°±å¯ä»¥å®ç° 2d/3d ææï¼3d åªéå¨åæ player åºç¡ä¸å¼å¥æä»¶å³å¯ã\n   * ç¼ºç¹ï¼åªéç¨äºç®åç 3d ææï¼å¹¶ä¸éåè·é·ç­å°æ¸¸æçå®ç°ã\n * galacean engine\n   * ä¼ç¹ï¼å¯ä»¥ç´æ¥ææ¨¡åå¯¼å¥3dç¼è¾å¨ï¼è¿è¡ç¯åä½ç½®ç­åæ°è°è¯ï¼å¯çæºé¢è§ï¼ç ååè§è§æ²éææ¬è¾å°\n   * ç¼ºç¹\n     * å­¦ä¹ 3dç¼è¾å¨ææ¬ï¼å¶ä¸­å®ä½çèæ¬éè¦å¨ç¼è¾å¨ä¸­å®æã\n     * ç¼è¾å¨å¯¼åºé¡¹ç®åæ¯tsï¼ä¸èµæºè¿å¤é½éè¦ä¸ä¼ cdnï¼ä»å¯¼åºèµæºå°å¨é¡¹ç®ä¸­ä½¿ç¨è¿ä¸è¿ç¨æ¶èæ¶é´è¿é¿ï¼ä¸æ¦é¢ç¹æ¹å¨åæ¶é´ä¸å¯æ§ã\n     * éè¦å¯¼å¥æ°çåï¼ä½ç§¯ä¼å¢å \n * three.js\n   * å¯å®ç°å°æ¸¸æå¤æäº¤äºï¼æä¹åçé¡¹ç®ç»éªï¼ä¸æå®¹æ\n   * æ§è½è¾å¥½ï¼galacean engine å®ç½ç»çæ§è½æ¯ three å¥½çä¾å­é½æ¯å¤§é æ¨¡å/ç²å­ç³»ç» çæåµï¼æ­£å¸¸é¡¹ç®ä¸ä¼æè¿ä¹å¤ã\n\n\n\n\n\n\n# åä½ç§¯å¯¹æ¯\n\n\n\n\n\nåºæ¯                                  å                                             ä½ç§¯\næ®éå¨æ                                @galacean/effects                             141.67kb\næ®éå¨æ + spine 2d å¨æ                  @galacean/effects +@galacean-plugin-spine     141.67kb + 48.99kb = 190.66 kb\næ®éå¨æ +spine 2d å¨æ + 3d ä¸»å¨æ          @galacean/effects +@galacean-plugin-spine +   141.67kb + 48.99kb +35.96kb = 226.62kb\n                                    @galacean-plugin-model\næ®éå¨æ +spine 2d å¨æ + 3d ä¸»å¨æ +å¤æå°æ¸¸æ   @galacean/effects +@galacean-plugin-spine +   141.67kb + 48.99kb +35.96kb +261.44kb = 487.95kb\n                                    @galacean-plugin-model +@galacean/engine\næ®éå¨æ +å¤æå°æ¸¸æ                         @galacean/effects +@galacean/engine           141.67kb + 261.44kb = 403.11kb\n\nå¯ä»¥çå°ä½ç§¯æå¤§çä¸º @galacean/engine æ 261.44kbï¼è¥å¨é¨å¼å¥åæååºæ¥ç static/feed-acticity/js/galacean.js æ 500kb+\n\nç¸æ¯ä¹ä¸ three.js åªæ 147.35kbï¼ä»¥æä»¬æå¸¸è§çåºæ¯ï¼æ®é2då¨æ + å°æ¸¸æï¼æ®éä¸è¥¿éç¨ @galacean/effectsï¼å°æ¸¸æéç¨ three.js åï¼\n\nåºæ¯                          å                                                      ä½ç§¯\næ®éå¨æ +spine 2d å¨æ + å¤æå°æ¸¸æ   @galacean/effects +@galacean-plugin-spine + three.js   galacean.js + three.js = 190.66kb + 147.35kb\n\n * ç»¼ä¸æè¿°ï¼\n   * æ®éå¨æä½¿ç¨ @galacean/effects + @galacean-plugin-spine\n   * ç®åç3då¨æ @galacean/effects + @galacean-plugin-model\n   * å°æ¸¸æä½¿ç¨ three.js\n   * æ®éå¨æ + 3d å¨æ + å°æ¸¸æï¼@galacean/effects + @galacean-plugin-spine + @galacean-plugin-model + three.js ï¼ä¸å»ºè®®ï¼\n   * æ®éå¨æ + å°æ¸¸æï¼@galacean/effects + @galacean-plugin-spine + three.js ï¼å°æ¸¸æé¡¹ç®å¸¸è§ï¼",charsets:{cjk:!0}},{title:"galacean",frontmatter:{},regularPath:"/mobile/galacean.html",relativePath:"mobile/galacean.md",key:"v-59f34d9f",path:"/mobile/galacean.html",headers:[{level:2,title:"galacean",slug:"galacean",normalizedTitle:"galacean",charIndex:2},{level:2,title:"Galacean Effects",slug:"galacean-effects",normalizedTitle:"galacean effects",charIndex:276},{level:2,title:"Galacean Effects ç¼è¾å¨",slug:"galacean-effects-ç¼è¾å¨",normalizedTitle:"galacean effects ç¼è¾å¨",charIndex:1244},{level:2,title:"spine å¨ç»",slug:"spine-å¨ç»",normalizedTitle:"spine å¨ç»",charIndex:1516},{level:2,title:"å¨ç»çåæ¢",slug:"å¨ç»çåæ¢",normalizedTitle:"å¨ç»çåæ¢",charIndex:3108},{level:2,title:"loadScene",slug:"loadscene",normalizedTitle:"loadscene",charIndex:2342},{level:2,title:"ä»£ç ä¿®æ¹å¨æä¸­çæå­åå¾ç",slug:"ä»£ç ä¿®æ¹å¨æä¸­çæå­åå¾ç",normalizedTitle:"ä»£ç ä¿®æ¹å¨æä¸­çæå­åå¾ç",charIndex:5298},{level:2,title:"ç²å­å¨ç»",slug:"ç²å­å¨ç»",normalizedTitle:"ç²å­å¨ç»",charIndex:5497},{level:2,title:"è¿è´¢ç¥çº¢åé¨å®ç°",slug:"è¿è´¢ç¥çº¢åé¨å®ç°",normalizedTitle:"è¿è´¢ç¥çº¢åé¨å®ç°",charIndex:5744},{level:2,title:"è¸©å",slug:"è¸©å",normalizedTitle:"è¸©å",charIndex:6745},{level:3,title:"æ¸²æåºç°é¯é½¿",slug:"æ¸²æåºç°é¯é½¿",normalizedTitle:"æ¸²æåºç°é¯é½¿",charIndex:6752},{level:3,title:"å¾ªç¯æ­æ¾åå¡é¡¿",slug:"å¾ªç¯æ­æ¾åå¡é¡¿",normalizedTitle:"å¾ªç¯æ­æ¾åå¡é¡¿",charIndex:6856},{level:3,title:"webgl context lost",slug:"webgl-context-lost",normalizedTitle:"webgl context lost",charIndex:7035},{level:2,title:"ä¼å",slug:"ä¼å",normalizedTitle:"ä¼å",charIndex:8642}],lastUpdated:"9/24/2025, 9:31:37 AM",lastUpdatedTimestamp:1758677497e3,headersStr:"galacean Galacean Effects Galacean Effects ç¼è¾å¨ spine å¨ç» å¨ç»çåæ¢ loadScene ä»£ç ä¿®æ¹å¨æä¸­çæå­åå¾ç ç²å­å¨ç» è¿è´¢ç¥çº¢åé¨å®ç° è¸©å æ¸²æåºç°é¯é½¿ å¾ªç¯æ­æ¾åå¡é¡¿ webgl context lost ä¼å",content:"# galacean\n\nGalacean æ¯èèéå¢çå¾å½¢äºå¨ææ¯åçï¼å¨ Galacean åçä¸ï¼åå«åºå±å¼æ Galacean Engineï¼å¨çº¿ç¼è¾å¼åç¯å¢ Galacean Editor ç­ï¼æ¨å¨ä¸ºäºå¨ä¸å¡å¼åèæä¾å®åçäºå¨å¼åè§£å³æ¹æ¡ã\n\nå®ç½ï¼https://galacean.antgroup.com\n\næéä¸æ ï¼https://juejin.cn/column/696130865589980368\n\n-Galacean Engineï¼è¡ä¸é¢åç Web 3D å¼æï¼å¯ä»¥çè§£ä¸º three.js å¼æï¼åºå±é½æ¯ webglã\n\n-Galacean Effectsï¼ä¸æ³¨äºç§»å¨ç«¯çå¨çº¿åå¨æç¼è¾å¨ï¼ä¸»è¦ç¨äºå¶ä½å¨æã\n\n * Galacean Effects Studioï¼ç¼è¾å¨ï¼ï¼ç¨äºè®¾è®¡å¸æ¥å¶ä½ï¼ç ååæ¶ä¹å¯ä»¥å¨ç¼è¾å¨ä¸­æ¥çå¨æäº§ç©ã\n * Galacean Effects Playerï¼æ­æ¾å¨ï¼ï¼ç¨äºå¨ä»£ç ä¸­å®ç°ï¼æ­æ¾å¨ç¨äºå¨è¿è¡æ¶è§£æåæ­æ¾ç¼è¾å¨ä¸­åå¸çå¨ç»äº§ç©ï¼ä¿éå¨ç»ä¸çº¿çææåæçï¼å¤§å¤§èçº¦è®¾è®¡å¸ä¸å¼åèä¹é´å¨æå®ç°ãææè°è¯çæ²éææ¬ã\n\n\n# Galacean Effects\n\nä¸»è¦ä»ç»ä¸ Galacean Effectsã\n\nææ¡£ï¼https://galacean.antgroup.com/effects/user/zn6zshqq6eb7gk2\n\nè¯­éå¼åææ¡£ï¼https://galacean-effects.yuque.com/kdpoyl/bsbqf\n\ndemoï¼https://galacean.antgroup.com/effects/playground/vanilla-%E5%9F%BA%E6%9C%AC%E6%92%AD%E6%94%BE\n\n-Galacean Effects Studioï¼è®¾è®¡å¸å¶ä½å¨æçç¼è¾å¨ã\n\n * VFXï¼Galacean Effects Studio çå·¥ç¨æä»¶æ ¼å¼ã\n\n * Galacean Effects äº§ç©ï¼Galacean Effects å¨ç»æè¿°æä»¶ï¼å¨ç¼è¾å¨éè¿å¯¼åºï¼zipæ ¼å¼ï¼æåå¸ï¼JSONæ ¼å¼ï¼å¯ä»¥è·å¾ã\n\n-Galacean Effects Playerï¼æ­æ¾ Galacean Effects å¨ç»çæ­æ¾å¨ï¼æ­æ¾çæä»¶ä¸º Galacean Effects äº§ç©ã\n\nä¸è¬çå·¥ä½æµç¨ä¸ºï¼\n\n 1. è®¾è®¡å¸ä½¿ç¨ç¼è¾å¨ Galacean Effects Studio è®¾è®¡å¨æï¼å¹¶å¯¼åº VFX å·¥ç¨æä»¶ç»å°ç åã\n 2. ç åä¹å¯ä»¥ç¨ç¼è¾å¨æå¼ VFX æä»¶è¿è¡æ¥çï¼ç¶åå¯¼åº json äº§ç©ãäº§ç©ä¸­ç json ä¼å¼å¥ bins å imagesï¼éè¦æ bins å images ä¸ä¼ å°bosï¼å¨ json ä¸­è¿è¡æ¿æ¢ã\n\n\n\n\n\n\n\n 1. ç åå¨ä»£ç ä¸­å¼å¥ json äº§ç©ï¼å¹¶ä½¿ç¨æ­æ¾å¨ Galacean Effects Player è¿è¡æ­æ¾ã\n\n\n# Galacean Effects ç¼è¾å¨\n\n\n\n 1. å°vfxå¯¼å¥ç¼è¾å¨å¯ä»¥é¢è§å¨æï¼å·¦ä¸æ¹å¯ä»¥çå°ä¸åç compositionï¼è®¾è®¡åå­¦å¯ä»¥å¨ä¸ä¸ª vfx ä¸­æ¾ç½®å¤ä¸ªå¨æãåææ¯ Galacean Effects å¨ç»ä¸­æåºç¡çæ¦å¿µä¹ä¸ã1 ä¸ªåæ = 1 æ®µå¨ç»ï¼ä¸ä¸ªé¡¹ç®å¾å¾åæ¬å¤ä¸ªåæãåæåè¡¨åå«å½åé¡¹ç®çææåæã\n 2. å·¦ä¸æ¹éä¸­åç´ åï¼å³ä¾§å¯ä»¥æ¥çåç´ çç»èãç¥éè¿äºåæä»¬å°±å¯ä»¥å¨ä»£ç ä¸­æ ¹æ® name è¿è¡æä½ã\n 3. æ¯å¦å¯¼åºçæ¶åè®°å¾éæ©é»è®¤å¨ç»ï¼ç¶åç»æè¡ä¸ºè®¾ç½®ä¸ºå¾ªç¯ï¼è¿æ ·å°±ä¸ç¨å¨ä»£ç ä¸­åç¬å»è®¾ç½®äºã\n\n\n# spine å¨ç»\n\nspine å®ç½ï¼https://zh.esotericsoftware.com\n\nSpineå¨ç»æ¯ä¸ç§å¨æ¸¸æå¼åä¸­å¹¿æ³åºç¨ç2Déª¨éª¼å¨ç»ç³»ç»ï¼å®ç±Esoteric Softwareå¬å¸å¼åãç¸æ¯ä¼ ç»çå¸§å¨ç»ï¼Spineéç¨éª¨éª¼åææ§½çæ¦å¿µï¼ä½¿å¼åèè½å¤ä»¥æ´çµæ´»ãé«æçæ¹å¼å¶ä½åæ§å¶è§è²ãç©ä½ç­åç´ çå¨ç»ã\n\ngalacean æ¯æå¯¼å¥ spine å¨ç»ï¼å·ä½æä¹å¶ä½åå¯¼å¥æ¯è®¾è®¡åå­¦éè¦å³æ³¨çï¼ç åéè¦æ³¨æå¯¼åºåå¨ä»£ç ä¸­å¼å¥ spine æä»¶\n\n\n\nimport {Component} from 'san';\nimport {Player} from '@galacean/effects';\nimport {SpineComponent} from '@galacean/effects-plugin-spine';\nimport {Stats} from '@galacean/effects-plugin-stats';\nimport tree from './tree.json';\nexport default class TreasureCard extends Component {\n    static template = /* html */`\n        <div id=\"container\"></div>\n    `;\n    attached() {\n        // 1. å®ä¾åä¸ä¸ªæ­æ¾å¨\n        const player = new Player({\n            container: document.getElementById('container'),\n            pixelRatio: window.devicePixelRatio || 2,\n        });\n        // 1. å è½½èæ¯\n        player.loadScene(background);\n        // 2. å è½½æ \n        player\n            .loadScene(tree)\n            .then(composition => { // å è½½ VFXJSON è·å¾åæå¯¹è±¡ composition\n                const VFXItem = composition.getItemByName('treeeee'); // éè¿ name è·å¾åç´ å¯¹è±¡ VFXItem\n                const spineComponent = VFXItem.getComponent(SpineComponent); // è·å VFXItem ä¸ç SpineComponent\n                const animationList = spineComponent.animationList; // è·å SpineComponent ä¸çå¨ç»åè¡¨ animationList\n                this.state = spineComponent.state;\n                console.log(this.state, animationList);\n            })\n            .catch(err => {\n                // éçº§é»è¾ï¼ä»¥ä¸ä»ä¾åè\n            });\n        // 3. å è½½æé®\n        player.loadScene(button);\n    };\n}\n\n\næ³¨æï¼animationState ä¸å®æ¯å¨å¨ç»æ­æ¾åæè½è·åå°\n\n\n# å¨ç»çåæ¢\n\næ­£å¸¸æåµä¸æ ä¼æ§è¡é»è®¤å¨ç»ï¼ç¹å»æèçé¿çæ¶åä¼åæ¢å¨ç»ï¼åæ¢æ­æ¾å®ä¹ååä¼æ¢å¤é»è®¤å¨ç»ã\n\ngalacean effects æä¾äº setAnimation è®¾ç½®å¨ç» åè½\n\n/**\n * è®¾ç½®åä¸ªå¨ç»\n * @param animation - å¨ç»å\n * @param speed - æ­æ¾éåº¦\n */\nsetAnimation(animation: string, speed?: number): void;\n/**\n * è®¾ç½®æ­æ¾ä¸ç»å¨ç»\n * @param animationList - å¨ç»ååè¡¨\n * @param speed - æ­æ¾éåº¦\n */\nsetAnimationList(animationList: string[], speed?: number): void;\n/**\n * è®¾ç½®æ­æ¾ä¸ç»å¨ç»ï¼å¾ªç¯æ­æ¾æåä¸ä¸ª\n * @param animationList - å¨ç»ååè¡¨\n * @param speed - æ­æ¾éåº¦\n * @since 1.6.0\n */\nsetAnimationListLoopEnd(animationList: string[], speed?: number): void;\n\n\nä½æ²¡æè¿éæ²¡æåæ¢å®ç»§ç»­æ­æ¾çåè½ï¼å¶å®è¿éå¯ä»¥ä½¿ç¨ galacean engine ä¸­æ´è¯¦ç»çå¨ç»åæ°ï¼ç¨äºéåæ­æ¾ã [https://galacean.antgroup.com/engine/docs/graphics/2D/spine/runtime/#%E5%8A%A8%E7%94%BB%E9%98%9F%E5%88%97](https://galacean.antgroup.com/engine/docs/graphics/2D/spine/runtime/#å¨ç»éå\n\nchangeAnimation(name) {\n    this.state.setAnimation(0, name, false); // åæ¢å¨ç»\n    this.state.addAnimation(0, 'moren', true); // å¨è½¨é 0 æ­æ¾å®ç»§ç»­æ­æ¾å¨ç» moren\n}\n\n\n\n# loadScene\n\nä½ç¨ï¼player å è½½ VFXJSONï¼ä¸è¬ä¸ä¸ª VFXJSON å¯¹åºä¸ä¸ª compositionï¼loadScene ä¸­å¯ä»¥ä¼ å¤ä¸ªï¼ä¹å¯ä»¥å¤æ¬¡ä¼ ã\n\n// 1. å è½½åä¸ªåæé¾æ¥å¹¶è®¾ç½®å¯éåæ°\nconst composition = await player.loadScene('xxx.json', { ... });\nconst composition = await player.loadScene({ url: 'xxx.json' }, { ... });\n// 2. å è½½åä¸ªåæç JSON å¯¹è±¡å¹¶è®¾ç½®å¯éåæ°\nconst composition = await player.loadScene(JSONValue, { ... });\n// 3. å è½½å¤ä¸ªåæé¾æ¥æ JSON å¯¹è±¡\nconst [_, _, _] = await player.loadScene(['x1.json', 'x2.json', JSONValue]);\n// 4. å è½½å¤ä¸ªåæé¾æ¥å¹¶åèªè®¾ç½®å¯éåæ°\nconst [_, _] = await player.loadScene([{\n    url: 'x1.json',\n    options: { autoplay: false, ... },\n}, {\n    url: 'x2.json',\n    options: { speed: 2, ... },\n}, { ... }]);\n// 5. å è½½å¤ä¸ªåæé¾æ¥å¹¶ç»ä¸è®¾ç½®å¯éåæ°ï¼å±ç¨ï¼\nconst [_, _, _] = await player.loadScene(['x1.json', 'x2.json', ...], { ... });\nconst [_, _] = await player.loadScene(\n    [{ url: 'x1.json' }, { url: 'x2.json' }, { ... }],\n    {\n        variables: {\n            name': 'value',\n        },\n        speed: 2,\n        ...\n    },\n);\n// 6. ç¯çæ··å\nawait player.loadScene([\n    {\n        url: 'x1.json',\n        options: {\n            variables: {\n                'name1': 'value1',\n            },\n            speed: 2,\n        },\n    },\n    'x2.json',\n    JSONValue,\n], {\n    variables: {\n        'name2': 'value2',\n    },\n    speed: 0.1,\n});\n\n\n\n# ä»£ç ä¿®æ¹å¨æä¸­çæå­åå¾ç\n\ngalacean æ¯æå°æå­åå¾çè®¾ç½®ä¸ºåéï¼å¨ä»£ç ä¸­å¨æå»ä¿®æ¹ã\n\nä»£ç ä¿®æ¹æå­ï¼https://galacean-effects.yuque.com/kdpoyl/bsbqfx/acbim2s0uhuty5k\n\nä»£ç ä¿®æ¹å¾çï¼https://galacean-effects.yuque.com/kdpoyl/bsbqfx/oyvu6mxzo4n860m\n\n\n# ç²å­å¨ç»\n\nç²å­å¨ç»æ¯ç±å¨ä¸å®èå´åéæºçæçå¤§éç²å­äº§çè¿å¨èç»æçå¨ç»ï¼ç²å­ç³»ç»å¸¸ç¨äºæ¸¸æå¼æï¼ç¨æ¥å®ç°ç«ãäºãçè±ãé¨ãéªè±ç­ææçå®ç°ãå¦çº¢åé¨ï¼https://galacean.antgroup.com/effects/playground/vue-%E4%BA%A4%E4%BA%92%E5%85%83%E7%B4%A0-%E7%82%B9%E5%87%BB\n\nå¨ç¼è¾å¨ä¸­å¯ä»¥éå¯¹ç²å­å¨ç»è®¾ç½®å¦ä¸å±æ§ï¼çº¢åç¹å»æ¶å¤±çæä½ä¹æ¯å¨è¿ééç½®äºç²å­äº¤äºï¼å¹¶ä¸æ¯å¨ä»£ç ä¸­å®ç°çã\n\n\n\n\n# è¿è´¢ç¥çº¢åé¨å®ç°\n\nä»ç´ æä¸­å¯ä»¥çå°å¤§é¨åçå¨æé½å·²ç»å®åï¼æä»¬åªéå¨ä»£ç ä¸­è¡¥åçº¢åç¹å»äº¤äºçé»è¾ã\n\n// ç» player æ·»å ç¹å»äºä»¶ï¼å¯ä»¥éè¿åæ°æ¿å°ç¹å»åç´ å¯¹è±¡\nplayer.on('click', evt => {\n     // è´¢ç¥ç¹å»åæ­æ¾çº¢åé¨\n    if (evt.name === 'caishen') {\n        this.playRain();\n    }\n    // å°çº¢åç¹å»\n    else if (evt.name.includes('hongbao')) {\n        // è®©ç¹å»çå°çº¢åæ¶å¤±\n        const clickItem = this.rainComposition.getItemByName(evt.name);\n        clickItem.setVisible(false);\n        // è¿å»æ° +1\n        this.data.set('clickNum', num + 1);\n        // æ­æ¾çç¸åæ\n        this.burstComposition.items.forEach(item => {\n            const burst = item.content.emission?.bursts[0];\n            if (burst) {\n                const next = burst.clone();\n                next.once = true;\n                // å¨ç¹å»ä½ç½®æ­æ¾çç¸ææ\n                item.content.addBurst(next, [evt.hitPositions[0].toArray()]);\n            }\n        });\n    }\n    // å¤§çº¢åç¹å»\n    else {\n        // åæ¢å¤§çº¢åç¹å»çå¨ç»\n        this.rainState.setAnimation(0, 'pick', false);\n        // æ¹åè¿å»æ°\n        this.data.set('clickNum', num + 1);\n    }\n});\n\n\n\n# è¸©å\n\n\n# æ¸²æåºç°é¯é½¿\n\nUnityä¹Spineå¨ç»æé¯é½¿åç½è²æè¾¹_spineå¯¼åºgifæé¯é½¿-CSDNåå®¢\n\né¯é½¿çåå ï¼https://juejin.cn/post/723665666975241016\n\n\n# å¾ªç¯æ­æ¾åå¡é¡¿\n\nè¡¨ç°è¡ä¸ºæ¯æ¯ 8s ä¸è½®å¾ªç¯åé½ä¼å¡é¡¿ä¸ä¸ï¼æ¹äºä¸ endBehavior ä» 5 => 2 ã https://github.com/galacean/effects-specification/blob/79cfe259f10f2900728294bcf53f0dfc28a5e60d/src/constants.ts\n\n\n\n\n\n\n# webgl context lost\n\nåä½å¼çsdkä¸­ä¼åå»ºwebglï¼æå¯è½å¯¼è´ webgl æ°éè¶åºéå¶\n\n// webglcontext è¶åºéå¶æ¶ï¼ä¼èå¼æå¼å§åå»ºçï¼è¿æ¶éè¦éæ°åå§å\nthis.player.on('webglcontextlost', () => {\n    // your code\n    this.initAnimation();\n});\n// å¦ä½æµè¯webglè¶åºéå¶\n<canvas id=\"webgl1\"></canvas>\n<canvas id=\"webgl2\"></canvas>\n<canvas id=\"webgl3\"></canvas>\n<canvas id=\"webgl4\"></canvas>\n<canvas id=\"webgl5\"></canvas>\n<canvas id=\"webgl6\"></canvas>\n<canvas id=\"webgl7\"></canvas>\n<canvas id=\"webgl8\"></canvas>\n<canvas id=\"webgl9\"></canvas>\n setTimeout(() => {\n    const canvas = document.getElementById('webgl1');\n    const gl1 = canvas.getContext('webgl');\n    console.log(gl1);\n    const canvas2 = document.getElementById('webgl2');\n    const gl2 = canvas2.getContext('webgl');\n    console.log(gl2);\n    const canvas3 = document.getElementById('webgl3');\n    const gl3 = canvas3.getContext('webgl');\n    console.log(gl3);\n    const canvas4 = document.getElementById('webgl4');\n    const gl4 = canvas4.getContext('webgl');\n    console.log(gl4);\n    const canvas5 = document.getElementById('webgl5');\n    const gl5 = canvas5.getContext('webgl');\n    console.log(gl5);\n    const canvas6 = document.getElementById('webgl6');\n    const gl6 = canvas6.getContext('webgl');\n    console.log(gl6);\n    const canvas7 = document.getElementById('webgl7');\n    const gl7 = canvas7.getContext('webgl');\n    console.log(gl7);\n    const canvas8 = document.getElementById('webgl8');\n    const gl8 = canvas8.getContext('webgl');\n    console.log(gl8);\n    const canvas9 = document.getElementById('webgl9');\n    const gl9 = canvas9.getContext('webgl');\n    console.log(gl9);\n}, 3000);\n\n\n\n# ä¼å\n\næµè¯åææºåºç°åç«æåµï¼éè¦è¿è¡ä¼å\n\n 1. éä½å¸§æ°ï¼æ­£å¸¸æåµæ¸²æå¸§æ°ä¸º60ï¼å¨ä¸å½±åè§è§çææä¸æä»¬å°å¶éä½æ30å¸§\n\nconst player = new Player({container: document.getElementById('decorate-bg-container')});\nplayer\n    .loadScene('https://feed-activity-new.cdn.bcebos.com/2024wish/huodong-modal1/data.json')\n    .then(() => {\n        this.player.ticker.setFPS(30);\n    })\n\n\n 1. ç²å­å¨ç»ï¼åå°åå°å¨/ç²å­çæ°éï¼ï¼å¦æ¬æ¬¡å°èæ¯çè±å¨æä¼ååååç«ææææ¾å¥½è½¬ãå½±åæ¯è¾å¤§ï¼\n 2. åæèµæºä¼åï¼å¦å¾çèµæºï¼å·ä½å¯ä»¥ç https://galacean.antgroup.com/effects/user/dtrbrf#u9da6e47\n 3. éçº§æ¹æ¡ï¼è¥æ­æ¾å¨ player å è½½èµæºå¤±è´¥çè¯ï¼å¨ catch ä¸­æè·ï¼åå»å è½½é»è®¤ç[éæååºå¾](https://feed-activity-new.cdn.bcebos.com/2024caishen%2Ftree%2Fdoudi.png\n\n// å è½½æ \nthis.player\n    .loadScene(treeFacai)\n    .then(composition => {\n        // ...\n    })\n    .catch(err => {\n        // éçº§é»è¾\n        this.showDowngradeImage();\n    });\n// éçº§å¤ç\nshowDowngradeImage() {\n    const containerStyle = this.ref('container').style;\n    containerStyle.backgroundImage = 'url(\"https://feed-activity-new.cdn.bcebos.com/2024caishen%2Ftree%2Fdoudi.png\")';\n    containerStyle.backgroundRepeat = 'no-repeat';\n    containerStyle.backgroundSize = 'cover';\n    containerStyle.backgroundPosition = 'center';\n}\n\n\n 1. å°½éåå°é¡¹ç®ä¸­playeræ°éï¼ä¸è¬æä¸ä¸ª player å³å¯ãä½æ¯å¦æä¸å¯é¿åçæä¸¤ä¸ª player çæ¶åï¼éè¦æåæç player æååå»æ­æ¾æ°ç player\n 2. èµæºé¢å è½½ï¼ä¸ä¸ªå¨ç»çæ­æ¾ç±èµæºè½½å¥åæ­æ¾å¨ç»ä¸¤é¨åç»æï¼è¿ä¸¤é¨åçèæ¶æ¯æ²¡åæ³é¿åçãä½æ¯å¦ææä»¬æ³ç»§ç»­ä¼åå¨ç»æ­æ¾çä½éªï¼è¿å°±éè¦æä»¬å°èµæºè½½å¥é¨ååæ­æ¾å¨ç»æåï¼æåå°èµæºåå¤å¥½ï¼å¨æ­æ¾çæ¶ååªéè¦æ­æ¾å¨ç»å°±å¯ä»¥äºï¼ä»£ç åèå¦ä¸ï¼\n\n/*** === èµæºåå¤é¶æ®µ === ***/\n// åå»ºä¸ä¸ªèµæºå è½½å¨\nconst assetManager = new AssetManager();\n// è¿è¡èµæºçå è½½\nconst scene = await assetManager.loadScene('xxx.json');\n// å¶ä»ä¸å¡é»è¾ä»£ç \n/*** === èµæºåå¤é¶æ®µ === ***/\n/*** === é¢ç¼è¯åå¤é¶æ®µ === ***/\n// å è½½å¨ç»èµæº\nawait player.loadScene(scene, { autoplay: false });\n/*** === é¢ç¼è¯åå¤é¶æ®µ === ***/\n// æå¨æ­æ¾\nplayer.play();\n",normalizedContent:"# galacean\n\ngalacean æ¯èèéå¢çå¾å½¢äºå¨ææ¯åçï¼å¨ galacean åçä¸ï¼åå«åºå±å¼æ galacean engineï¼å¨çº¿ç¼è¾å¼åç¯å¢ galacean editor ç­ï¼æ¨å¨ä¸ºäºå¨ä¸å¡å¼åèæä¾å®åçäºå¨å¼åè§£å³æ¹æ¡ã\n\nå®ç½ï¼https://galacean.antgroup.com\n\næéä¸æ ï¼https://juejin.cn/column/696130865589980368\n\n-galacean engineï¼è¡ä¸é¢åç web 3d å¼æï¼å¯ä»¥çè§£ä¸º three.js å¼æï¼åºå±é½æ¯ webglã\n\n-galacean effectsï¼ä¸æ³¨äºç§»å¨ç«¯çå¨çº¿åå¨æç¼è¾å¨ï¼ä¸»è¦ç¨äºå¶ä½å¨æã\n\n * galacean effects studioï¼ç¼è¾å¨ï¼ï¼ç¨äºè®¾è®¡å¸æ¥å¶ä½ï¼ç ååæ¶ä¹å¯ä»¥å¨ç¼è¾å¨ä¸­æ¥çå¨æäº§ç©ã\n * galacean effects playerï¼æ­æ¾å¨ï¼ï¼ç¨äºå¨ä»£ç ä¸­å®ç°ï¼æ­æ¾å¨ç¨äºå¨è¿è¡æ¶è§£æåæ­æ¾ç¼è¾å¨ä¸­åå¸çå¨ç»äº§ç©ï¼ä¿éå¨ç»ä¸çº¿çææåæçï¼å¤§å¤§èçº¦è®¾è®¡å¸ä¸å¼åèä¹é´å¨æå®ç°ãææè°è¯çæ²éææ¬ã\n\n\n# galacean effects\n\nä¸»è¦ä»ç»ä¸ galacean effectsã\n\nææ¡£ï¼https://galacean.antgroup.com/effects/user/zn6zshqq6eb7gk2\n\nè¯­éå¼åææ¡£ï¼https://galacean-effects.yuque.com/kdpoyl/bsbqf\n\ndemoï¼https://galacean.antgroup.com/effects/playground/vanilla-%e5%9f%ba%e6%9c%ac%e6%92%ad%e6%94%be\n\n-galacean effects studioï¼è®¾è®¡å¸å¶ä½å¨æçç¼è¾å¨ã\n\n * vfxï¼galacean effects studio çå·¥ç¨æä»¶æ ¼å¼ã\n\n * galacean effects äº§ç©ï¼galacean effects å¨ç»æè¿°æä»¶ï¼å¨ç¼è¾å¨éè¿å¯¼åºï¼zipæ ¼å¼ï¼æåå¸ï¼jsonæ ¼å¼ï¼å¯ä»¥è·å¾ã\n\n-galacean effects playerï¼æ­æ¾ galacean effects å¨ç»çæ­æ¾å¨ï¼æ­æ¾çæä»¶ä¸º galacean effects äº§ç©ã\n\nä¸è¬çå·¥ä½æµç¨ä¸ºï¼\n\n 1. è®¾è®¡å¸ä½¿ç¨ç¼è¾å¨ galacean effects studio è®¾è®¡å¨æï¼å¹¶å¯¼åº vfx å·¥ç¨æä»¶ç»å°ç åã\n 2. ç åä¹å¯ä»¥ç¨ç¼è¾å¨æå¼ vfx æä»¶è¿è¡æ¥çï¼ç¶åå¯¼åº json äº§ç©ãäº§ç©ä¸­ç json ä¼å¼å¥ bins å imagesï¼éè¦æ bins å images ä¸ä¼ å°bosï¼å¨ json ä¸­è¿è¡æ¿æ¢ã\n\n\n\n\n\n\n\n 1. ç åå¨ä»£ç ä¸­å¼å¥ json äº§ç©ï¼å¹¶ä½¿ç¨æ­æ¾å¨ galacean effects player è¿è¡æ­æ¾ã\n\n\n# galacean effects ç¼è¾å¨\n\n\n\n 1. å°vfxå¯¼å¥ç¼è¾å¨å¯ä»¥é¢è§å¨æï¼å·¦ä¸æ¹å¯ä»¥çå°ä¸åç compositionï¼è®¾è®¡åå­¦å¯ä»¥å¨ä¸ä¸ª vfx ä¸­æ¾ç½®å¤ä¸ªå¨æãåææ¯ galacean effects å¨ç»ä¸­æåºç¡çæ¦å¿µä¹ä¸ã1 ä¸ªåæ = 1 æ®µå¨ç»ï¼ä¸ä¸ªé¡¹ç®å¾å¾åæ¬å¤ä¸ªåæãåæåè¡¨åå«å½åé¡¹ç®çææåæã\n 2. å·¦ä¸æ¹éä¸­åç´ åï¼å³ä¾§å¯ä»¥æ¥çåç´ çç»èãç¥éè¿äºåæä»¬å°±å¯ä»¥å¨ä»£ç ä¸­æ ¹æ® name è¿è¡æä½ã\n 3. æ¯å¦å¯¼åºçæ¶åè®°å¾éæ©é»è®¤å¨ç»ï¼ç¶åç»æè¡ä¸ºè®¾ç½®ä¸ºå¾ªç¯ï¼è¿æ ·å°±ä¸ç¨å¨ä»£ç ä¸­åç¬å»è®¾ç½®äºã\n\n\n# spine å¨ç»\n\nspine å®ç½ï¼https://zh.esotericsoftware.com\n\nspineå¨ç»æ¯ä¸ç§å¨æ¸¸æå¼åä¸­å¹¿æ³åºç¨ç2déª¨éª¼å¨ç»ç³»ç»ï¼å®ç±esoteric softwareå¬å¸å¼åãç¸æ¯ä¼ ç»çå¸§å¨ç»ï¼spineéç¨éª¨éª¼åææ§½çæ¦å¿µï¼ä½¿å¼åèè½å¤ä»¥æ´çµæ´»ãé«æçæ¹å¼å¶ä½åæ§å¶è§è²ãç©ä½ç­åç´ çå¨ç»ã\n\ngalacean æ¯æå¯¼å¥ spine å¨ç»ï¼å·ä½æä¹å¶ä½åå¯¼å¥æ¯è®¾è®¡åå­¦éè¦å³æ³¨çï¼ç åéè¦æ³¨æå¯¼åºåå¨ä»£ç ä¸­å¼å¥ spine æä»¶\n\n\n\nimport {component} from 'san';\nimport {player} from '@galacean/effects';\nimport {spinecomponent} from '@galacean/effects-plugin-spine';\nimport {stats} from '@galacean/effects-plugin-stats';\nimport tree from './tree.json';\nexport default class treasurecard extends component {\n    static template = /* html */`\n        <div id=\"container\"></div>\n    `;\n    attached() {\n        // 1. å®ä¾åä¸ä¸ªæ­æ¾å¨\n        const player = new player({\n            container: document.getelementbyid('container'),\n            pixelratio: window.devicepixelratio || 2,\n        });\n        // 1. å è½½èæ¯\n        player.loadscene(background);\n        // 2. å è½½æ \n        player\n            .loadscene(tree)\n            .then(composition => { // å è½½ vfxjson è·å¾åæå¯¹è±¡ composition\n                const vfxitem = composition.getitembyname('treeeee'); // éè¿ name è·å¾åç´ å¯¹è±¡ vfxitem\n                const spinecomponent = vfxitem.getcomponent(spinecomponent); // è·å vfxitem ä¸ç spinecomponent\n                const animationlist = spinecomponent.animationlist; // è·å spinecomponent ä¸çå¨ç»åè¡¨ animationlist\n                this.state = spinecomponent.state;\n                console.log(this.state, animationlist);\n            })\n            .catch(err => {\n                // éçº§é»è¾ï¼ä»¥ä¸ä»ä¾åè\n            });\n        // 3. å è½½æé®\n        player.loadscene(button);\n    };\n}\n\n\næ³¨æï¼animationstate ä¸å®æ¯å¨å¨ç»æ­æ¾åæè½è·åå°\n\n\n# å¨ç»çåæ¢\n\næ­£å¸¸æåµä¸æ ä¼æ§è¡é»è®¤å¨ç»ï¼ç¹å»æèçé¿çæ¶åä¼åæ¢å¨ç»ï¼åæ¢æ­æ¾å®ä¹ååä¼æ¢å¤é»è®¤å¨ç»ã\n\ngalacean effects æä¾äº setanimation è®¾ç½®å¨ç» åè½\n\n/**\n * è®¾ç½®åä¸ªå¨ç»\n * @param animation - å¨ç»å\n * @param speed - æ­æ¾éåº¦\n */\nsetanimation(animation: string, speed?: number): void;\n/**\n * è®¾ç½®æ­æ¾ä¸ç»å¨ç»\n * @param animationlist - å¨ç»ååè¡¨\n * @param speed - æ­æ¾éåº¦\n */\nsetanimationlist(animationlist: string[], speed?: number): void;\n/**\n * è®¾ç½®æ­æ¾ä¸ç»å¨ç»ï¼å¾ªç¯æ­æ¾æåä¸ä¸ª\n * @param animationlist - å¨ç»ååè¡¨\n * @param speed - æ­æ¾éåº¦\n * @since 1.6.0\n */\nsetanimationlistloopend(animationlist: string[], speed?: number): void;\n\n\nä½æ²¡æè¿éæ²¡æåæ¢å®ç»§ç»­æ­æ¾çåè½ï¼å¶å®è¿éå¯ä»¥ä½¿ç¨ galacean engine ä¸­æ´è¯¦ç»çå¨ç»åæ°ï¼ç¨äºéåæ­æ¾ã [https://galacean.antgroup.com/engine/docs/graphics/2d/spine/runtime/#%e5%8a%a8%e7%94%bb%e9%98%9f%e5%88%97](https://galacean.antgroup.com/engine/docs/graphics/2d/spine/runtime/#å¨ç»éå\n\nchangeanimation(name) {\n    this.state.setanimation(0, name, false); // åæ¢å¨ç»\n    this.state.addanimation(0, 'moren', true); // å¨è½¨é 0 æ­æ¾å®ç»§ç»­æ­æ¾å¨ç» moren\n}\n\n\n\n# loadscene\n\nä½ç¨ï¼player å è½½ vfxjsonï¼ä¸è¬ä¸ä¸ª vfxjson å¯¹åºä¸ä¸ª compositionï¼loadscene ä¸­å¯ä»¥ä¼ å¤ä¸ªï¼ä¹å¯ä»¥å¤æ¬¡ä¼ ã\n\n// 1. å è½½åä¸ªåæé¾æ¥å¹¶è®¾ç½®å¯éåæ°\nconst composition = await player.loadscene('xxx.json', { ... });\nconst composition = await player.loadscene({ url: 'xxx.json' }, { ... });\n// 2. å è½½åä¸ªåæç json å¯¹è±¡å¹¶è®¾ç½®å¯éåæ°\nconst composition = await player.loadscene(jsonvalue, { ... });\n// 3. å è½½å¤ä¸ªåæé¾æ¥æ json å¯¹è±¡\nconst [_, _, _] = await player.loadscene(['x1.json', 'x2.json', jsonvalue]);\n// 4. å è½½å¤ä¸ªåæé¾æ¥å¹¶åèªè®¾ç½®å¯éåæ°\nconst [_, _] = await player.loadscene([{\n    url: 'x1.json',\n    options: { autoplay: false, ... },\n}, {\n    url: 'x2.json',\n    options: { speed: 2, ... },\n}, { ... }]);\n// 5. å è½½å¤ä¸ªåæé¾æ¥å¹¶ç»ä¸è®¾ç½®å¯éåæ°ï¼å±ç¨ï¼\nconst [_, _, _] = await player.loadscene(['x1.json', 'x2.json', ...], { ... });\nconst [_, _] = await player.loadscene(\n    [{ url: 'x1.json' }, { url: 'x2.json' }, { ... }],\n    {\n        variables: {\n            name': 'value',\n        },\n        speed: 2,\n        ...\n    },\n);\n// 6. ç¯çæ··å\nawait player.loadscene([\n    {\n        url: 'x1.json',\n        options: {\n            variables: {\n                'name1': 'value1',\n            },\n            speed: 2,\n        },\n    },\n    'x2.json',\n    jsonvalue,\n], {\n    variables: {\n        'name2': 'value2',\n    },\n    speed: 0.1,\n});\n\n\n\n# ä»£ç ä¿®æ¹å¨æä¸­çæå­åå¾ç\n\ngalacean æ¯æå°æå­åå¾çè®¾ç½®ä¸ºåéï¼å¨ä»£ç ä¸­å¨æå»ä¿®æ¹ã\n\nä»£ç ä¿®æ¹æå­ï¼https://galacean-effects.yuque.com/kdpoyl/bsbqfx/acbim2s0uhuty5k\n\nä»£ç ä¿®æ¹å¾çï¼https://galacean-effects.yuque.com/kdpoyl/bsbqfx/oyvu6mxzo4n860m\n\n\n# ç²å­å¨ç»\n\nç²å­å¨ç»æ¯ç±å¨ä¸å®èå´åéæºçæçå¤§éç²å­äº§çè¿å¨èç»æçå¨ç»ï¼ç²å­ç³»ç»å¸¸ç¨äºæ¸¸æå¼æï¼ç¨æ¥å®ç°ç«ãäºãçè±ãé¨ãéªè±ç­ææçå®ç°ãå¦çº¢åé¨ï¼https://galacean.antgroup.com/effects/playground/vue-%e4%ba%a4%e4%ba%92%e5%85%83%e7%b4%a0-%e7%82%b9%e5%87%bb\n\nå¨ç¼è¾å¨ä¸­å¯ä»¥éå¯¹ç²å­å¨ç»è®¾ç½®å¦ä¸å±æ§ï¼çº¢åç¹å»æ¶å¤±çæä½ä¹æ¯å¨è¿ééç½®äºç²å­äº¤äºï¼å¹¶ä¸æ¯å¨ä»£ç ä¸­å®ç°çã\n\n\n\n\n# è¿è´¢ç¥çº¢åé¨å®ç°\n\nä»ç´ æä¸­å¯ä»¥çå°å¤§é¨åçå¨æé½å·²ç»å®åï¼æä»¬åªéå¨ä»£ç ä¸­è¡¥åçº¢åç¹å»äº¤äºçé»è¾ã\n\n// ç» player æ·»å ç¹å»äºä»¶ï¼å¯ä»¥éè¿åæ°æ¿å°ç¹å»åç´ å¯¹è±¡\nplayer.on('click', evt => {\n     // è´¢ç¥ç¹å»åæ­æ¾çº¢åé¨\n    if (evt.name === 'caishen') {\n        this.playrain();\n    }\n    // å°çº¢åç¹å»\n    else if (evt.name.includes('hongbao')) {\n        // è®©ç¹å»çå°çº¢åæ¶å¤±\n        const clickitem = this.raincomposition.getitembyname(evt.name);\n        clickitem.setvisible(false);\n        // è¿å»æ° +1\n        this.data.set('clicknum', num + 1);\n        // æ­æ¾çç¸åæ\n        this.burstcomposition.items.foreach(item => {\n            const burst = item.content.emission?.bursts[0];\n            if (burst) {\n                const next = burst.clone();\n                next.once = true;\n                // å¨ç¹å»ä½ç½®æ­æ¾çç¸ææ\n                item.content.addburst(next, [evt.hitpositions[0].toarray()]);\n            }\n        });\n    }\n    // å¤§çº¢åç¹å»\n    else {\n        // åæ¢å¤§çº¢åç¹å»çå¨ç»\n        this.rainstate.setanimation(0, 'pick', false);\n        // æ¹åè¿å»æ°\n        this.data.set('clicknum', num + 1);\n    }\n});\n\n\n\n# è¸©å\n\n\n# æ¸²æåºç°é¯é½¿\n\nunityä¹spineå¨ç»æé¯é½¿åç½è²æè¾¹_spineå¯¼åºgifæé¯é½¿-csdnåå®¢\n\né¯é½¿çåå ï¼https://juejin.cn/post/723665666975241016\n\n\n# å¾ªç¯æ­æ¾åå¡é¡¿\n\nè¡¨ç°è¡ä¸ºæ¯æ¯ 8s ä¸è½®å¾ªç¯åé½ä¼å¡é¡¿ä¸ä¸ï¼æ¹äºä¸ endbehavior ä» 5 => 2 ã https://github.com/galacean/effects-specification/blob/79cfe259f10f2900728294bcf53f0dfc28a5e60d/src/constants.ts\n\n\n\n\n\n\n# webgl context lost\n\nåä½å¼çsdkä¸­ä¼åå»ºwebglï¼æå¯è½å¯¼è´ webgl æ°éè¶åºéå¶\n\n// webglcontext è¶åºéå¶æ¶ï¼ä¼èå¼æå¼å§åå»ºçï¼è¿æ¶éè¦éæ°åå§å\nthis.player.on('webglcontextlost', () => {\n    // your code\n    this.initanimation();\n});\n// å¦ä½æµè¯webglè¶åºéå¶\n<canvas id=\"webgl1\"></canvas>\n<canvas id=\"webgl2\"></canvas>\n<canvas id=\"webgl3\"></canvas>\n<canvas id=\"webgl4\"></canvas>\n<canvas id=\"webgl5\"></canvas>\n<canvas id=\"webgl6\"></canvas>\n<canvas id=\"webgl7\"></canvas>\n<canvas id=\"webgl8\"></canvas>\n<canvas id=\"webgl9\"></canvas>\n settimeout(() => {\n    const canvas = document.getelementbyid('webgl1');\n    const gl1 = canvas.getcontext('webgl');\n    console.log(gl1);\n    const canvas2 = document.getelementbyid('webgl2');\n    const gl2 = canvas2.getcontext('webgl');\n    console.log(gl2);\n    const canvas3 = document.getelementbyid('webgl3');\n    const gl3 = canvas3.getcontext('webgl');\n    console.log(gl3);\n    const canvas4 = document.getelementbyid('webgl4');\n    const gl4 = canvas4.getcontext('webgl');\n    console.log(gl4);\n    const canvas5 = document.getelementbyid('webgl5');\n    const gl5 = canvas5.getcontext('webgl');\n    console.log(gl5);\n    const canvas6 = document.getelementbyid('webgl6');\n    const gl6 = canvas6.getcontext('webgl');\n    console.log(gl6);\n    const canvas7 = document.getelementbyid('webgl7');\n    const gl7 = canvas7.getcontext('webgl');\n    console.log(gl7);\n    const canvas8 = document.getelementbyid('webgl8');\n    const gl8 = canvas8.getcontext('webgl');\n    console.log(gl8);\n    const canvas9 = document.getelementbyid('webgl9');\n    const gl9 = canvas9.getcontext('webgl');\n    console.log(gl9);\n}, 3000);\n\n\n\n# ä¼å\n\næµè¯åææºåºç°åç«æåµï¼éè¦è¿è¡ä¼å\n\n 1. éä½å¸§æ°ï¼æ­£å¸¸æåµæ¸²æå¸§æ°ä¸º60ï¼å¨ä¸å½±åè§è§çææä¸æä»¬å°å¶éä½æ30å¸§\n\nconst player = new player({container: document.getelementbyid('decorate-bg-container')});\nplayer\n    .loadscene('https://feed-activity-new.cdn.bcebos.com/2024wish/huodong-modal1/data.json')\n    .then(() => {\n        this.player.ticker.setfps(30);\n    })\n\n\n 1. ç²å­å¨ç»ï¼åå°åå°å¨/ç²å­çæ°éï¼ï¼å¦æ¬æ¬¡å°èæ¯çè±å¨æä¼ååååç«ææææ¾å¥½è½¬ãå½±åæ¯è¾å¤§ï¼\n 2. åæèµæºä¼åï¼å¦å¾çèµæºï¼å·ä½å¯ä»¥ç https://galacean.antgroup.com/effects/user/dtrbrf#u9da6e47\n 3. éçº§æ¹æ¡ï¼è¥æ­æ¾å¨ player å è½½èµæºå¤±è´¥çè¯ï¼å¨ catch ä¸­æè·ï¼åå»å è½½é»è®¤ç[éæååºå¾](https://feed-activity-new.cdn.bcebos.com/2024caishen%2ftree%2fdoudi.png\n\n// å è½½æ \nthis.player\n    .loadscene(treefacai)\n    .then(composition => {\n        // ...\n    })\n    .catch(err => {\n        // éçº§é»è¾\n        this.showdowngradeimage();\n    });\n// éçº§å¤ç\nshowdowngradeimage() {\n    const containerstyle = this.ref('container').style;\n    containerstyle.backgroundimage = 'url(\"https://feed-activity-new.cdn.bcebos.com/2024caishen%2ftree%2fdoudi.png\")';\n    containerstyle.backgroundrepeat = 'no-repeat';\n    containerstyle.backgroundsize = 'cover';\n    containerstyle.backgroundposition = 'center';\n}\n\n\n 1. å°½éåå°é¡¹ç®ä¸­playeræ°éï¼ä¸è¬æä¸ä¸ª player å³å¯ãä½æ¯å¦æä¸å¯é¿åçæä¸¤ä¸ª player çæ¶åï¼éè¦æåæç player æååå»æ­æ¾æ°ç player\n 2. èµæºé¢å è½½ï¼ä¸ä¸ªå¨ç»çæ­æ¾ç±èµæºè½½å¥åæ­æ¾å¨ç»ä¸¤é¨åç»æï¼è¿ä¸¤é¨åçèæ¶æ¯æ²¡åæ³é¿åçãä½æ¯å¦ææä»¬æ³ç»§ç»­ä¼åå¨ç»æ­æ¾çä½éªï¼è¿å°±éè¦æä»¬å°èµæºè½½å¥é¨ååæ­æ¾å¨ç»æåï¼æåå°èµæºåå¤å¥½ï¼å¨æ­æ¾çæ¶ååªéè¦æ­æ¾å¨ç»å°±å¯ä»¥äºï¼ä»£ç åèå¦ä¸ï¼\n\n/*** === èµæºåå¤é¶æ®µ === ***/\n// åå»ºä¸ä¸ªèµæºå è½½å¨\nconst assetmanager = new assetmanager();\n// è¿è¡èµæºçå è½½\nconst scene = await assetmanager.loadscene('xxx.json');\n// å¶ä»ä¸å¡é»è¾ä»£ç \n/*** === èµæºåå¤é¶æ®µ === ***/\n/*** === é¢ç¼è¯åå¤é¶æ®µ === ***/\n// å è½½å¨ç»èµæº\nawait player.loadscene(scene, { autoplay: false });\n/*** === é¢ç¼è¯åå¤é¶æ®µ === ***/\n// æå¨æ­æ¾\nplayer.play();\n",charsets:{cjk:!0}},{title:"è·¨å¹³å°ä¸è·¨ç«¯ææ¯ç®ä»",frontmatter:{},regularPath:"/mobile/cross.html",relativePath:"mobile/cross.md",key:"v-54d03685",path:"/mobile/cross.html",headers:[{level:2,title:"è·¨å¹³å°ææ¯",slug:"è·¨å¹³å°ææ¯",normalizedTitle:"è·¨å¹³å°ææ¯",charIndex:73},{level:3,title:"æµè§å¨",slug:"æµè§å¨",normalizedTitle:"æµè§å¨",charIndex:203},{level:3,title:"node",slug:"node",normalizedTitle:"node",charIndex:331},{level:2,title:"è·¨ç«¯ææ¯",slug:"è·¨ç«¯ææ¯",normalizedTitle:"è·¨ç«¯ææ¯",charIndex:6},{level:3,title:"webview",slug:"webview",normalizedTitle:"webview",charIndex:732},{level:3,title:"å°ç¨åº",slug:"å°ç¨åº",normalizedTitle:"å°ç¨åº",charIndex:1039},{level:3,title:"Flutter",slug:"flutter",normalizedTitle:"flutter",charIndex:1310},{level:3,title:"JS-Native",slug:"js-native",normalizedTitle:"js-native",charIndex:1344},{level:3,title:"DSL + Layout æ¹æ¡",slug:"dsl-layout-æ¹æ¡",normalizedTitle:"dsl + layout æ¹æ¡",charIndex:2887},{level:2,title:"å¨æåææ¯",slug:"å¨æåææ¯",normalizedTitle:"å¨æåææ¯",charIndex:3414}],lastUpdated:"1/6/2023, 2:27:26 PM",lastUpdatedTimestamp:1672986446e3,headersStr:"è·¨å¹³å°ææ¯ æµè§å¨ node è·¨ç«¯ææ¯ webview å°ç¨åº Flutter JS-Native DSL + Layout æ¹æ¡ å¨æåææ¯",content:"# è·¨å¹³å°ä¸è·¨ç«¯ææ¯ç®ä»\n\nè·¨å¹³å°ä¸è¬æçæ¯è·¨æä½ç³»ç»ï¼*nixãwindowsï¼ï¼èè·¨ç«¯æ¯æå®¢æ·ç«¯ï¼webãandroidãiosï¼ã\n\n\n# è·¨å¹³å°ææ¯\n\næä»¬ç¥éï¼cpu æä¸åçæ¶æåæä»¤éï¼ä¸å±ä¹æä¸åçæä½ç³»ç»ï¼ä¸ä¸ªç³»ç»çå¯æ§è¡æä»¶å¨å¦ä¸ä¸ªç³»ç»ä¸å°±æ¯ä¸å¯æ§è¡çï¼æ¯å¦ windows ç exe æä»¶å¨ mac ä¸å°±ä¸è½ç´æ¥æ§è¡ãä¸åçç³»ç»å°±æ¯ä¸åçè¿è¡å¹³å°ãå¯æ§è¡æä»¶æ¯ä¸è·¨å¹³å°çã\n\n\n# æµè§å¨\n\næä½ç³»ç»ä¸åï¼æµè§å¨ä¸è·çç½é¡µçä»£ç ç¡®å®åä¸ä»½ãæµè§å¨å°±æ¯ä¸ç§åå²æ ä¹çè·¨å¹³å°æ¹æ¡ã\n\nç½é¡µè·¨å¹³å°ä¸æå³çæµè§å¨ä¹æ¯è·¨å¹³å°çï¼æµè§å¨çå¯æ§è¡æä»¶è¿æ¯æ¯ä¸ªå¹³å°åç¬å¼ååç¼è¯çï¼ä½æ¯ä»ä»¬æ¯æçç½é¡µè§£æé»è¾ä¸æ ·ï¼è¿æ ·ä¸é¢è·çç½é¡µå°±æ¯è·¨å¹³å°çã\n\n\n# node\n\nèµ·åï¼node åªè½å¨ *nix å¹³å°ä¸è¿è¡ï¼Node å¨ v0.6.0 çæ¬æ¯æäº windows å¹³å°ï¼è¿ä¸»è¦å¾çäº Node æ¶æå±é¢çæ¹å¨ï¼å®å¨æä½ç³»ç»ä¸ Node ä¸å±æ¨¡åç³»ç»ä¹é´æå»ºäºä¸å±å¹³å°å±æ¶æï¼å³ libuvã\n\n\n\nä¾å¦ require å¨å¼å¥ .node æä»¶ï¼C++æ©å±æ¨¡åï¼çè¿ç¨ä¸­ï¼*nix å¹³å°ä¸å®éè°ç¨çæ¯ dlopen å dlsym ä¸¤ä¸ªæ¹æ³ï¼å¨ windows å¹³å°ä¸åæ¯éè¿ LoadlibraryExw å GetProcAddress è¿ä¸¤ä¸ªæ¹æ³å®ç°çï¼å®ä»¬åå«å è½½ .so å .dll æä»¶ï¼å®éæ¯ .node æä»¶ï¼\n\nvar hello = require('./hello.node');\n\n\n\n# è·¨ç«¯ææ¯\n\nç®åæ¥è¯´ï¼è·¨ç«¯ææ¯å°±æ¯åä¸ä»½ä»£ç åå«è½è¿è¡å¨ iosãandroidãwebï¼ä¸é¢ä»ç»ä¸ä¸ä¸çå¸¸è§çè·¨ç«¯ææ¯ï¼\n\n\n\n\n# webview\n\nåèï¼https://mp.weixin.qq.com/s/4k087DBswlufx97UpWqE1g\n\nWebView å°±æ¯æµè§å¨å¼æé¨åï¼ä½ å¯ä»¥åæå¥ iframe ä¸æ ·å° Webview æå¥å°ä½ çåçåºç¨ä¸­ï¼ WebView éå¸¸ä¼ä» http:// æè https:// å°åä¸è½½ç½ç»åå®¹ãè¿æå³çä½ å¯ä»¥ä»æå¡å¨ä¸­è·åé¨åï¼æå¨é¨ï¼Web åºç¨å¹¶ä¸ä¾èµ Webview å°è¿é¨ååå®¹å±ç¤ºå¨åçåºç¨ä¸­ï¼ä¸ Native App ä¸ WebView å·æäº¤äºè½åã\n\nå¦æä½ æä¸ä¸ªå¨æµè§å¨ä¸­è¿è¡çååºå¼ Web åºç¨ï¼é£ä¹å¨åç§è®¾å¤ä¸ä½¿ç¨ç¸åçåºç¨ä½ä¸ºæ··ååºç¨ä¼éå¸¸ç®åã\n\n\n\n\n# å°ç¨åº\n\nå¾®ä¿¡å°ç¨åºæ¯ä»äº Native å WebApp ä¹é´çäº§ç©ï¼å®ä¾ææµè§å¨ WebView å±ç¤ºåæ¶å¯ä»¥è°ç¨åçè½åï¼æ¯å¦è·åéè®¯å½ãæç§ç­ï¼åä¸ä»½ä»£ç å¯è¿è¡å¨AndroidãiOSåå¾®ä¿¡è°è¯å¼åå·¥å·åã\n\nä¸ React Native çè·¨ç«¯ä¸åçæ¯ï¼å°ç¨åºå¤§é¨åUIç»ä»¶å¹¶ä¸æ¯åçæ¸²æï¼è¿æ¯ç±»ä¼¼ WebApp ä½¿ç¨æµè§å¨æ¸²æï¼åªæå°éç»ä»¶ä½¿ç¨Nativeå®ç°ï¼æ¯å¦<canvas>ã<video>ã<map>ã<textarea>ã\n\n\n\nåå¹³å°èæ¬æ§è¡ç¯å¢ä»¥åç¨äºæ¸²æéåçç»ä»¶çç¯å¢æ¯åä¸ç¸åçï¼å·ä½åºå«å¦ä¸ï¼\n\n\n\n\n# Flutter\n\nç¸æ¯ React Native å Weex ç­ JS-Native ææ¯ï¼Flutterå®ç°è·¨å¹³å°éç¨äºæ´ä¸ºå½»åºçæ¹æ¡ãå®æ¢æ²¡æéç¨ WebView ä¹æ²¡æéç¨ JavaScriptï¼èæ¯èªå·±å®ç°äºä¸å¥ UI æ¡æ¶ï¼ç¶åç´æ¥ç³»ç»æ´åºå±æ¸²æç³»ç»ä¸ç»UIãæä»¥å®éç¨çå¼åè¯­è¨ä¸æ¯JSï¼èæ¯ Dartã\n\nFlutter ä½¿ç¨èªå·±çæ¸²æå¼ææ¥ç»å¶ UIï¼å¸å±æ°æ®ç­ç± Dart è¯­è¨ç´æ¥æ§å¶ï¼æä»¥å¨å¸å±è¿ç¨ä¸­ä¸éè¦å RN é£æ ·è¦å¨ JavaScript å Native ä¹é´éä¿¡ï¼è¿å¨ä¸äºæ»å¨åæå¨çåºæ¯ä¸å·æææ¾ä¼å¿ï¼å ä¸ºå¨æ»å¨åæå¨è¿ç¨å¾å¾é½ä¼å¼èµ·å¸å±åçååï¼æä»¥ JavaScript éè¦å Native ä¹é´ä¸åçåæ­¥å¸å±ä¿¡æ¯ã\n\n\n\n\n# JS-Native\n\néç¨ JSEngine é©±å¨ Native æ¸²ææ¨¡å¼ï¼å¨è¿åºç¡ä¸æ©å± native ç»ä»¶ï¼éç¨ DSL ï¼reactãsanãvueãhtmlï¼ç¼åï¼è°ç¨ Native æä¾çæ¸²æ apiï¼é©±å¨ Native æ¸²æã\n\næä»¬ç®åæä¸»æµçè·¨ç«¯æ¹æ¡å°±æ¯è¿ç§ï¼ç¹å«éååç«¯å·¥ç¨å¸è¿è¡å¼åï¼å ç§ä¸ç js-native æ¹æ¡å Flutter çå¯¹æ¯\n\næ¡æ¶                  TALOSï¼æªå¼æºï¼     REACT-NATIVE       WEEX           HIPPY             FLUTTER\næ¥æº                  ç¾åº¦             FaceBook           é¿é             è¾è®¯                Google\nDSL è¯­è¨              San            React              Vue            ReactãVueãDartç­   Dart\nå¼æï¼Android / iosï¼   V8 / JS core   Hermes / JS core   V8 / JS core   Hippy å¼æ          Flutter å¼æ\næ¸²æ                  åç Native      åç Native          åç Native      åç Nativeãèªç»      èªç»\n\nJavaScriptå¼ææ¯ä¸ä¸ªä¸é¨å¤ç JavaScript èæ¬çèææºï¼ä¸»è¦æä»¥ä¸ä¸¤å¤åºç¨ï¼\n\n 1. webç«¯ JavaScript å¼æï¼éå¸¦å¨æµè§å¨ä¹ä¸­\n\n 2. ç§»å¨ç«¯ JavaScript å¼æï¼è·¨ç«¯ææ¯ js-native æ¹æ¡ä¸­éè¦å¨ç«¯ä¸ä½¿ç¨ JavaScript å¼æè¿è¡ js ä»£ç æ¥è¿ä¸æ­¥è°ç¨ Native ãï¼å Flutter è¿ç§èªç»å¶çæ¹æ¡ä½¿ç¨çæ¯ Dart è¯­è¨éè¦èªå·±ç Flutter å¼æï¼\n\n----------------------------------------\n\nä¸»æµç JavaScript å¼æä¸»è¦æä»¥ä¸å ç§ï¼\n\n * V8 (Google)\n * JavaScriptCore (Apple)\n * QuickJS\n * Hermes(Facebook-React Native)\n\nå³äºå ç§å¼æçä»ç»ï¼å¼ºçæ¨èè¿ç¯æç« ï¼ç§»å¨ç«¯ JS å¼æåªå®¶å¼ºï¼ç¾å½ç¡è°·æ¾......\n\nJIT ææ¯ï¼V8å¼æçJITææ¯ç®è¿°\n\nè·¨ç«¯å¸å±å¼æ Yoga å®ç½ï¼https://yogalayout.com/\n\n> yoga æ¯ facebook æé çä¸ä¸ªè·¨IOSãAndroidãWindowå¹³å°å¨åçå¸å±å¼æï¼å¼å®¹Flexboxå¸å±æ¹å¼ï¼è®©çé¢æ´å ç®åã react native ä½¿ç¨Yoga å®ç°è·¨å¹³å°å¸å±ã\n\n\n# DSL + Layout æ¹æ¡\n\nå¯¹äºäº¤äºè¾å°çåºç¡ UI å¨æåå¸å±è½åï¼è¿æä¸ç§æ¹å¼å°±æ¯ DSL + Layoutï¼å°±æ¯å¨æä¸å UI çå¸å±ä¿¡æ¯ï¼Native ä½¿ç¨è§£æä¹åçæ°æ®å¯¹ View è¿è¡å¸å±ã\n\nå¯¹äºè¿ç§âéç½®æ§âçå¸å±ä¿¡æ¯ï¼æä»¬éå¸¸éç¨JSON / XML / YAMLç­ç­æ¥è¿è¡æè¿°ï¼å®¢æ·ç«¯æ ¹æ®çº¦å®è¿è¡è§£æåä½¿ç¨å³å¯ã\n\nå¤©ç«ç Tangramãç¾å¢ç MTFlexbox å Picasso ç­ç­é½æ¯å¨æ­¤åºç¡ä¸è¿è¡çå®ååå°è£ãåæ¶ç±äº Flexbox + Yoga çåºç°ï¼è¿ç§ææ¯æ¹æ¡çè³å·²ç»åå±å°äºå ä¹æ¯ä¸ªå°å¢éé½æä¸ä¸ªè½®å­çç¨åº¦ã\n\n> éä¿æ¥è®²ï¼è¿ç§æ¹æ¡å°±æ¯å©ç¨ json æ¥å Appãä¾å¦æéç½®å¥½äºä¸å¼  UI å¡çç json ä¿¡æ¯ï¼ä¸åå°å®¢æ·ç«¯ï¼Android å IOS åå«æç§å®å¥½çåè®®å¯¹æ­¤ json è¿è¡è§£æï¼ç¶åæ¸²æåºåççç»ä»¶ãè¿æ ·æ¢å¯ä»¥ä¿è¯ä¸ä»½æ°æ®åç«¯è¿è¡ï¼åå¯ä»¥ä¿è¯ UI å¡çå¨æåè½åï¼ä¸ä¾èµäºç«¯ä¸åçï¼åªä¾èµäºä¸åçæ°æ®ï¼å¯ä»¥éè¿æå¡ç«¯è¿è¡ä¸åï¼ã\n\nå¨æçé¢ï¼DSL & å¸å±å¼æ\n\nåºäºWebææ¯æ çå¨æåè·¨å¹³å°æ¼«è°\n\nå¨æå¡çï¼å¯åªä½åå®¹äºå·å¼å¢é¿ä¸ï¼æ°ä¸ä»£ç§»å¨ç«¯å¨æç åçæ¨¡å¼\n\n\n# å¨æåææ¯\n\nå¨æåææ¯æä¸ä¾èµ APP åçï¼å°±è½è¿è¡å¨æçå¢å æèä¿®æ¹æ¥æ´æ°é¡µé¢çææ¯ãå¯¹äºæ¶æ¯å¡çè¿ç§éè¦å¿«éè¿­ä»£ãå®æ¶è°æ´çä¸å¡ï¼å¨æåå·æéå¸¸éè¦çæä¹ãä¸»è¦ä¼å¿ä½ç°å¨ï¼\n\n * æé«äººæ\n * ç¼©ç­çæ¬è¿­ä»£è¯éå¨æ\n * è§£å³çæ¬é¿å°¾é®é¢\n * åå°åå¤§å°ç­\n\nä¸é¢ä»ç»ç JS-Native å DSL + Layout åå±äºå¨æåææ¯ï¼ä¸ä¾èµ APP åçã\n\néè¿ DSL + Layout çæ¹å¼ï¼æä»¬å°±å¯ä»¥å®ç°äº¤äºè¾å°çåºç¡ UI å¨æåå¸å±è½åãé£ä¹éçå¨æå UI çåè½è¾¹çä¸æ­æ©å¤§ï¼è¿ç§æ¹å¼çå±éæ§ä¹æ¸æ¸çæ¾é²åºæ¥ï¼å¯¹äºèªå®ä¹è§å¾çæ©å±ãäº¤äºè½åå¤ççéå¶ãå¤æ UI ç¶æçç®¡çå¤ææ§ç­ç­ã\n\næä»¥ JS-Native å¼å¥äº Javascript å¼æï¼éçè¯­è¨è¿è¡æ¶çå¼å¥å¯ä»¥å®ç°æ´ä¸ºå¤æçä»£ç é»è¾æ¥æ»¡è¶³äº¤äºå¤çãéä¿¡åç¶æç®¡çï¼åæ¶è¿ä¹éè¦æ©å±åå®å JS / Native çéä¿¡æºå¶ãå°è£å®åçç»ä»¶åè½åç­ç­ï¼è¿æ ·å°±å½¢æäºç±» react-native / Weex æ¡æ¶çéå½¢ã\n\n\n\n> DSL + Layout çæ¹å¼åªéè¦å°å®ä¹å¥½çæ°æ®æ ¼å¼ï¼å¦ JSONï¼ä¸åç»å®¢æ·ç«¯ï¼å®¢æ·ç«¯æç§å·²æçè§åè§£æå³å¯ï¼å¨æ­¤æé´æä»¬å¯ä»¥ä¿®æ¹ä¸åçæ°æ®ï¼æ¥å®æå®¢æ·ç«¯ä¸å¯¹åºæ ·å¼çä¿®æ¹ï¼å¹¶ä¸ä¾èµ APP åçã\n> \n> JS-Native çæ¹å¼åªéè¦å°æä»¬åå¥½çä»£ç ï¼å¦ react nativeï¼éè¿ cli æåå¥½ï¼ç¶åæ¯å¦éè¿æä¸ªå¹³å°è¿è¡èµæº bundle æä»¶çä¸ä¼ ï¼ç¶åå®¢æ·ç«¯å°èµæºä¸è½½ä¸æ¥ï¼åéè¿ Javascript å¼æè¿è¡ js ä»£ç ï¼è¿ä¸æ­¥é©±å¨ NA ç«¯æ¸²æã",normalizedContent:"# è·¨å¹³å°ä¸è·¨ç«¯ææ¯ç®ä»\n\nè·¨å¹³å°ä¸è¬æçæ¯è·¨æä½ç³»ç»ï¼*nixãwindowsï¼ï¼èè·¨ç«¯æ¯æå®¢æ·ç«¯ï¼webãandroidãiosï¼ã\n\n\n# è·¨å¹³å°ææ¯\n\næä»¬ç¥éï¼cpu æä¸åçæ¶æåæä»¤éï¼ä¸å±ä¹æä¸åçæä½ç³»ç»ï¼ä¸ä¸ªç³»ç»çå¯æ§è¡æä»¶å¨å¦ä¸ä¸ªç³»ç»ä¸å°±æ¯ä¸å¯æ§è¡çï¼æ¯å¦ windows ç exe æä»¶å¨ mac ä¸å°±ä¸è½ç´æ¥æ§è¡ãä¸åçç³»ç»å°±æ¯ä¸åçè¿è¡å¹³å°ãå¯æ§è¡æä»¶æ¯ä¸è·¨å¹³å°çã\n\n\n# æµè§å¨\n\næä½ç³»ç»ä¸åï¼æµè§å¨ä¸è·çç½é¡µçä»£ç ç¡®å®åä¸ä»½ãæµè§å¨å°±æ¯ä¸ç§åå²æ ä¹çè·¨å¹³å°æ¹æ¡ã\n\nç½é¡µè·¨å¹³å°ä¸æå³çæµè§å¨ä¹æ¯è·¨å¹³å°çï¼æµè§å¨çå¯æ§è¡æä»¶è¿æ¯æ¯ä¸ªå¹³å°åç¬å¼ååç¼è¯çï¼ä½æ¯ä»ä»¬æ¯æçç½é¡µè§£æé»è¾ä¸æ ·ï¼è¿æ ·ä¸é¢è·çç½é¡µå°±æ¯è·¨å¹³å°çã\n\n\n# node\n\nèµ·åï¼node åªè½å¨ *nix å¹³å°ä¸è¿è¡ï¼node å¨ v0.6.0 çæ¬æ¯æäº windows å¹³å°ï¼è¿ä¸»è¦å¾çäº node æ¶æå±é¢çæ¹å¨ï¼å®å¨æä½ç³»ç»ä¸ node ä¸å±æ¨¡åç³»ç»ä¹é´æå»ºäºä¸å±å¹³å°å±æ¶æï¼å³ libuvã\n\n\n\nä¾å¦ require å¨å¼å¥ .node æä»¶ï¼c++æ©å±æ¨¡åï¼çè¿ç¨ä¸­ï¼*nix å¹³å°ä¸å®éè°ç¨çæ¯ dlopen å dlsym ä¸¤ä¸ªæ¹æ³ï¼å¨ windows å¹³å°ä¸åæ¯éè¿ loadlibraryexw å getprocaddress è¿ä¸¤ä¸ªæ¹æ³å®ç°çï¼å®ä»¬åå«å è½½ .so å .dll æä»¶ï¼å®éæ¯ .node æä»¶ï¼\n\nvar hello = require('./hello.node');\n\n\n\n# è·¨ç«¯ææ¯\n\nç®åæ¥è¯´ï¼è·¨ç«¯ææ¯å°±æ¯åä¸ä»½ä»£ç åå«è½è¿è¡å¨ iosãandroidãwebï¼ä¸é¢ä»ç»ä¸ä¸ä¸çå¸¸è§çè·¨ç«¯ææ¯ï¼\n\n\n\n\n# webview\n\nåèï¼https://mp.weixin.qq.com/s/4k087dbswlufx97upwqe1g\n\nwebview å°±æ¯æµè§å¨å¼æé¨åï¼ä½ å¯ä»¥åæå¥ iframe ä¸æ ·å° webview æå¥å°ä½ çåçåºç¨ä¸­ï¼ webview éå¸¸ä¼ä» http:// æè https:// å°åä¸è½½ç½ç»åå®¹ãè¿æå³çä½ å¯ä»¥ä»æå¡å¨ä¸­è·åé¨åï¼æå¨é¨ï¼web åºç¨å¹¶ä¸ä¾èµ webview å°è¿é¨ååå®¹å±ç¤ºå¨åçåºç¨ä¸­ï¼ä¸ native app ä¸ webview å·æäº¤äºè½åã\n\nå¦æä½ æä¸ä¸ªå¨æµè§å¨ä¸­è¿è¡çååºå¼ web åºç¨ï¼é£ä¹å¨åç§è®¾å¤ä¸ä½¿ç¨ç¸åçåºç¨ä½ä¸ºæ··ååºç¨ä¼éå¸¸ç®åã\n\n\n\n\n# å°ç¨åº\n\nå¾®ä¿¡å°ç¨åºæ¯ä»äº native å webapp ä¹é´çäº§ç©ï¼å®ä¾ææµè§å¨ webview å±ç¤ºåæ¶å¯ä»¥è°ç¨åçè½åï¼æ¯å¦è·åéè®¯å½ãæç§ç­ï¼åä¸ä»½ä»£ç å¯è¿è¡å¨androidãiosåå¾®ä¿¡è°è¯å¼åå·¥å·åã\n\nä¸ react native çè·¨ç«¯ä¸åçæ¯ï¼å°ç¨åºå¤§é¨åuiç»ä»¶å¹¶ä¸æ¯åçæ¸²æï¼è¿æ¯ç±»ä¼¼ webapp ä½¿ç¨æµè§å¨æ¸²æï¼åªæå°éç»ä»¶ä½¿ç¨nativeå®ç°ï¼æ¯å¦<canvas>ã<video>ã<map>ã<textarea>ã\n\n\n\nåå¹³å°èæ¬æ§è¡ç¯å¢ä»¥åç¨äºæ¸²æéåçç»ä»¶çç¯å¢æ¯åä¸ç¸åçï¼å·ä½åºå«å¦ä¸ï¼\n\n\n\n\n# flutter\n\nç¸æ¯ react native å weex ç­ js-native ææ¯ï¼flutterå®ç°è·¨å¹³å°éç¨äºæ´ä¸ºå½»åºçæ¹æ¡ãå®æ¢æ²¡æéç¨ webview ä¹æ²¡æéç¨ javascriptï¼èæ¯èªå·±å®ç°äºä¸å¥ ui æ¡æ¶ï¼ç¶åç´æ¥ç³»ç»æ´åºå±æ¸²æç³»ç»ä¸ç»uiãæä»¥å®éç¨çå¼åè¯­è¨ä¸æ¯jsï¼èæ¯ dartã\n\nflutter ä½¿ç¨èªå·±çæ¸²æå¼ææ¥ç»å¶ uiï¼å¸å±æ°æ®ç­ç± dart è¯­è¨ç´æ¥æ§å¶ï¼æä»¥å¨å¸å±è¿ç¨ä¸­ä¸éè¦å rn é£æ ·è¦å¨ javascript å native ä¹é´éä¿¡ï¼è¿å¨ä¸äºæ»å¨åæå¨çåºæ¯ä¸å·æææ¾ä¼å¿ï¼å ä¸ºå¨æ»å¨åæå¨è¿ç¨å¾å¾é½ä¼å¼èµ·å¸å±åçååï¼æä»¥ javascript éè¦å native ä¹é´ä¸åçåæ­¥å¸å±ä¿¡æ¯ã\n\n\n\n\n# js-native\n\néç¨ jsengine é©±å¨ native æ¸²ææ¨¡å¼ï¼å¨è¿åºç¡ä¸æ©å± native ç»ä»¶ï¼éç¨ dsl ï¼reactãsanãvueãhtmlï¼ç¼åï¼è°ç¨ native æä¾çæ¸²æ apiï¼é©±å¨ native æ¸²æã\n\næä»¬ç®åæä¸»æµçè·¨ç«¯æ¹æ¡å°±æ¯è¿ç§ï¼ç¹å«éååç«¯å·¥ç¨å¸è¿è¡å¼åï¼å ç§ä¸ç js-native æ¹æ¡å flutter çå¯¹æ¯\n\næ¡æ¶                  talosï¼æªå¼æºï¼     react-native       weex           hippy             flutter\næ¥æº                  ç¾åº¦             facebook           é¿é             è¾è®¯                google\ndsl è¯­è¨              san            react              vue            reactãvueãdartç­   dart\nå¼æï¼android / iosï¼   v8 / js core   hermes / js core   v8 / js core   hippy å¼æ          flutter å¼æ\næ¸²æ                  åç native      åç native          åç native      åç nativeãèªç»      èªç»\n\njavascriptå¼ææ¯ä¸ä¸ªä¸é¨å¤ç javascript èæ¬çèææºï¼ä¸»è¦æä»¥ä¸ä¸¤å¤åºç¨ï¼\n\n 1. webç«¯ javascript å¼æï¼éå¸¦å¨æµè§å¨ä¹ä¸­\n\n 2. ç§»å¨ç«¯ javascript å¼æï¼è·¨ç«¯ææ¯ js-native æ¹æ¡ä¸­éè¦å¨ç«¯ä¸ä½¿ç¨ javascript å¼æè¿è¡ js ä»£ç æ¥è¿ä¸æ­¥è°ç¨ native ãï¼å flutter è¿ç§èªç»å¶çæ¹æ¡ä½¿ç¨çæ¯ dart è¯­è¨éè¦èªå·±ç flutter å¼æï¼\n\n----------------------------------------\n\nä¸»æµç javascript å¼æä¸»è¦æä»¥ä¸å ç§ï¼\n\n * v8 (google)\n * javascriptcore (apple)\n * quickjs\n * hermes(facebook-react native)\n\nå³äºå ç§å¼æçä»ç»ï¼å¼ºçæ¨èè¿ç¯æç« ï¼ç§»å¨ç«¯ js å¼æåªå®¶å¼ºï¼ç¾å½ç¡è°·æ¾......\n\njit ææ¯ï¼v8å¼æçjitææ¯ç®è¿°\n\nè·¨ç«¯å¸å±å¼æ yoga å®ç½ï¼https://yogalayout.com/\n\n> yoga æ¯ facebook æé çä¸ä¸ªè·¨iosãandroidãwindowå¹³å°å¨åçå¸å±å¼æï¼å¼å®¹flexboxå¸å±æ¹å¼ï¼è®©çé¢æ´å ç®åã react native ä½¿ç¨yoga å®ç°è·¨å¹³å°å¸å±ã\n\n\n# dsl + layout æ¹æ¡\n\nå¯¹äºäº¤äºè¾å°çåºç¡ ui å¨æåå¸å±è½åï¼è¿æä¸ç§æ¹å¼å°±æ¯ dsl + layoutï¼å°±æ¯å¨æä¸å ui çå¸å±ä¿¡æ¯ï¼native ä½¿ç¨è§£æä¹åçæ°æ®å¯¹ view è¿è¡å¸å±ã\n\nå¯¹äºè¿ç§âéç½®æ§âçå¸å±ä¿¡æ¯ï¼æä»¬éå¸¸éç¨json / xml / yamlç­ç­æ¥è¿è¡æè¿°ï¼å®¢æ·ç«¯æ ¹æ®çº¦å®è¿è¡è§£æåä½¿ç¨å³å¯ã\n\nå¤©ç«ç tangramãç¾å¢ç mtflexbox å picasso ç­ç­é½æ¯å¨æ­¤åºç¡ä¸è¿è¡çå®ååå°è£ãåæ¶ç±äº flexbox + yoga çåºç°ï¼è¿ç§ææ¯æ¹æ¡çè³å·²ç»åå±å°äºå ä¹æ¯ä¸ªå°å¢éé½æä¸ä¸ªè½®å­çç¨åº¦ã\n\n> éä¿æ¥è®²ï¼è¿ç§æ¹æ¡å°±æ¯å©ç¨ json æ¥å appãä¾å¦æéç½®å¥½äºä¸å¼  ui å¡çç json ä¿¡æ¯ï¼ä¸åå°å®¢æ·ç«¯ï¼android å ios åå«æç§å®å¥½çåè®®å¯¹æ­¤ json è¿è¡è§£æï¼ç¶åæ¸²æåºåççç»ä»¶ãè¿æ ·æ¢å¯ä»¥ä¿è¯ä¸ä»½æ°æ®åç«¯è¿è¡ï¼åå¯ä»¥ä¿è¯ ui å¡çå¨æåè½åï¼ä¸ä¾èµäºç«¯ä¸åçï¼åªä¾èµäºä¸åçæ°æ®ï¼å¯ä»¥éè¿æå¡ç«¯è¿è¡ä¸åï¼ã\n\nå¨æçé¢ï¼dsl & å¸å±å¼æ\n\nåºäºwebææ¯æ çå¨æåè·¨å¹³å°æ¼«è°\n\nå¨æå¡çï¼å¯åªä½åå®¹äºå·å¼å¢é¿ä¸ï¼æ°ä¸ä»£ç§»å¨ç«¯å¨æç åçæ¨¡å¼\n\n\n# å¨æåææ¯\n\nå¨æåææ¯æä¸ä¾èµ app åçï¼å°±è½è¿è¡å¨æçå¢å æèä¿®æ¹æ¥æ´æ°é¡µé¢çææ¯ãå¯¹äºæ¶æ¯å¡çè¿ç§éè¦å¿«éè¿­ä»£ãå®æ¶è°æ´çä¸å¡ï¼å¨æåå·æéå¸¸éè¦çæä¹ãä¸»è¦ä¼å¿ä½ç°å¨ï¼\n\n * æé«äººæ\n * ç¼©ç­çæ¬è¿­ä»£è¯éå¨æ\n * è§£å³çæ¬é¿å°¾é®é¢\n * åå°åå¤§å°ç­\n\nä¸é¢ä»ç»ç js-native å dsl + layout åå±äºå¨æåææ¯ï¼ä¸ä¾èµ app åçã\n\néè¿ dsl + layout çæ¹å¼ï¼æä»¬å°±å¯ä»¥å®ç°äº¤äºè¾å°çåºç¡ ui å¨æåå¸å±è½åãé£ä¹éçå¨æå ui çåè½è¾¹çä¸æ­æ©å¤§ï¼è¿ç§æ¹å¼çå±éæ§ä¹æ¸æ¸çæ¾é²åºæ¥ï¼å¯¹äºèªå®ä¹è§å¾çæ©å±ãäº¤äºè½åå¤ççéå¶ãå¤æ ui ç¶æçç®¡çå¤ææ§ç­ç­ã\n\næä»¥ js-native å¼å¥äº javascript å¼æï¼éçè¯­è¨è¿è¡æ¶çå¼å¥å¯ä»¥å®ç°æ´ä¸ºå¤æçä»£ç é»è¾æ¥æ»¡è¶³äº¤äºå¤çãéä¿¡åç¶æç®¡çï¼åæ¶è¿ä¹éè¦æ©å±åå®å js / native çéä¿¡æºå¶ãå°è£å®åçç»ä»¶åè½åç­ç­ï¼è¿æ ·å°±å½¢æäºç±» react-native / weex æ¡æ¶çéå½¢ã\n\n\n\n> dsl + layout çæ¹å¼åªéè¦å°å®ä¹å¥½çæ°æ®æ ¼å¼ï¼å¦ jsonï¼ä¸åç»å®¢æ·ç«¯ï¼å®¢æ·ç«¯æç§å·²æçè§åè§£æå³å¯ï¼å¨æ­¤æé´æä»¬å¯ä»¥ä¿®æ¹ä¸åçæ°æ®ï¼æ¥å®æå®¢æ·ç«¯ä¸å¯¹åºæ ·å¼çä¿®æ¹ï¼å¹¶ä¸ä¾èµ app åçã\n> \n> js-native çæ¹å¼åªéè¦å°æä»¬åå¥½çä»£ç ï¼å¦ react nativeï¼éè¿ cli æåå¥½ï¼ç¶åæ¯å¦éè¿æä¸ªå¹³å°è¿è¡èµæº bundle æä»¶çä¸ä¼ ï¼ç¶åå®¢æ·ç«¯å°èµæºä¸è½½ä¸æ¥ï¼åéè¿ javascript å¼æè¿è¡ js ä»£ç ï¼è¿ä¸æ­¥é©±å¨ na ç«¯æ¸²æã",charsets:{cjk:!0}},{title:"ç§»å¨ç«¯h5å¼å",frontmatter:{title:"ç§»å¨ç«¯h5å¼å",date:"2022-04-26T16:01:54.000Z",categories:"ç§»å¨ç«¯"},regularPath:"/mobile/h5.html",relativePath:"mobile/h5.md",key:"v-7b5aca02",path:"/mobile/h5.html",headers:[{level:2,title:"ééæ¹æ¡",slug:"ééæ¹æ¡",normalizedTitle:"ééæ¹æ¡",charIndex:121},{level:3,title:"vw + remæ¹æ¡",slug:"vw-remæ¹æ¡",normalizedTitle:"vw + remæ¹æ¡",charIndex:168},{level:2,title:"æ»å¨å è½½æ³¨æäºé¡¹",slug:"æ»å¨å è½½æ³¨æäºé¡¹",normalizedTitle:"æ»å¨å è½½æ³¨æäºé¡¹",charIndex:1593},{level:2,title:"æ³¨æäºé¡¹",slug:"æ³¨æäºé¡¹",normalizedTitle:"æ³¨æäºé¡¹",charIndex:136},{level:3,title:"ios ç¹å»èæ¯",slug:"ios-ç¹å»èæ¯",normalizedTitle:"ios ç¹å»èæ¯",charIndex:3629},{level:3,title:"htmlä¸å¯éä¸­",slug:"htmlä¸å¯éä¸­",normalizedTitle:"htmlä¸å¯éä¸­",charIndex:3759},{level:3,title:"é¡µé¢ä¸å¯æ¾å¤§ç¼©å°",slug:"é¡µé¢ä¸å¯æ¾å¤§ç¼©å°",normalizedTitle:"é¡µé¢ä¸å¯æ¾å¤§ç¼©å°",charIndex:4061},{level:3,title:"å¾çåç¼©",slug:"å¾çåç¼©",normalizedTitle:"å¾çåç¼©",charIndex:4201},{level:2,title:"è°è¯",slug:"è°è¯",normalizedTitle:"è°è¯",charIndex:4242},{level:2,title:"h5 ç»å½ç¶æåæ­¥",slug:"h5-ç»å½ç¶æåæ­¥",normalizedTitle:"h5 ç»å½ç¶æåæ­¥",charIndex:4695}],lastUpdated:"6/7/2022, 7:16:51 PM",lastUpdatedTimestamp:1654600611e3,headersStr:"ééæ¹æ¡ vw + remæ¹æ¡ æ»å¨å è½½æ³¨æäºé¡¹ æ³¨æäºé¡¹ ios ç¹å»èæ¯ htmlä¸å¯éä¸­ é¡µé¢ä¸å¯æ¾å¤§ç¼©å° å¾çåç¼© è°è¯ h5 ç»å½ç¶æåæ­¥",content:"# ç§»å¨ç«¯h5å¼å\n\nä¼æå¨ç¥ï¼ç§»å¨ç«¯appé¡¹ç®æèå°ç¨åºé¡¹ç®ä¸­çä¸äºé¡µé¢é½ä¼ç¨ h5 æ¥åï¼ä¸è¬æä»¬ä¼å°åå¥½ç h5 é¡µé¢åå¥½ééï¼ä¸ä¼ å°éæå°åï¼å¦ Bosï¼ï¼ç¶å h5 é¡µé¢ä¼ä»¥ webview çæ¹å¼åµå¥å°åçåºç¨ä¸­ãè¿éä¸»è¦æ»ç»ä¸ä¸ééæ¹æ¡ä»¥åä¸äºå¨h5å¼åä¸­çæ³¨æäºé¡¹ã\n\n\n# ééæ¹æ¡\n\næ´å¤æ¹æ¡å¯è§ç§»å¨ç«¯éé\n\n\n# vw + remæ¹æ¡\n\né¦åå¨ html æ ¹åç´ ä¸­è®¾ç½®ï¼\n\nhtml {\n  font-size: 5vw;\n}\n\n\nè¿æ · 1rem = 5 vwï¼20 rem = 100 vwã\n\nå¦ææµè§å¨ä¸æ¯æ vw åæ³ï¼æä»¬éè¦æå¨æå¥ä»¥ä¸ä»£ç ï¼\n\n(function (doc, win) {\n  var dummy = doc.createElement('_').style;\n  dummy.width = '1vw';\n  // è¥æ¯ævwåéåº\n  if (dummy.width) {\n    return;\n  }\n  // ä¸æ¯æ vw åæå¨è®¡ç®ä¸ä¸ï¼è®¾ç½® font-size ä¸ºå±å¹å®½åº¦ 1 / 20\n  var docEl = doc.documentElement,\n      resizeEvt = 'orientationchange' in win ? 'orientationchange' : 'resize',\n      recalc = function () {\n        var clientWidth = docEl.clientWidth;\n        if (!clientWidth) {\n          return;\n        }\n        docEl.style.fontSize = (clientWidth / 20) + 'px';\n      };\n  recalc();\n  win.addEventListener(resizeEvt, recalc, false);\n})(document, window);\n\n\n----------------------------------------\n\nå¼åæ¶æä»¬ä¸å»ºè®®ç´æ¥å remï¼çæ³æåµæ¯è®¾è®¡ç¨¿ç»åºå¤å°æå°±åå¤å°ï¼æä»¥æä»¬éè¦åè®¾ç½®ä¸ä¸ rem å px çè½¬æ¢å³ç³»ï¼\n\nåè¯´ç»è®ºï¼å¦æè®¾è®¡ç¨¿æ¯ n px çï¼é£ä¹è®¾ç½® 1px = (20 / n) rem\n\n> å¦æé¡¹ç®ä¸­å 100 px ï¼å¶å®å¸ææ è®ºå±å¹å®½åº¦æ¯å¤å°ï¼å®é½å è®¾è®¡ç¨¿å®½åº¦ç 100 / n çãæç§æ¢ç®å³ç³»ï¼\n> \n> 100px = 100 * (20 / n) rem = 100 * (20 / n) * 5 vw ï¼é£ä¹ï¼\n> \n> 1 vw å å±å¹å®½åº¦ç 1 /100 ä¹ä¸ï¼100 * (20 / n) * 5 vw åå å±å¹ç 100 * (20 / n) * 5 / 100 åä¹ä¸ï¼å³ 100 / n åä¹ä¸ï¼å°±æ¯æä»¬æå¸æçç»æã\n\nç»¼ä¸ï¼å¦æè®¾è®¡ç¨¿æ¯ 375px çï¼ä¸ä¸ªåç´ å®½åº¦ä¸º 100pxï¼æä»¬åªéç´æ¥å¨é¡¹ç®ä¸­å 100pxï¼é£ä¹è¿ä¸ªåç´ æ è®ºå¨ä»ä¹å®½åº¦çå±å¹ä¸ï¼å¶å®½åº¦é½ä¼å å±å¹å®½åº¦ç 100 / 375 ä»½ï¼è¿å°±æ»¡è¶³äºèªéåºã\n\n----------------------------------------\n\nè³äº px è½¬ rem æä»¬å¯ä»¥ä½¿ç¨ postcss-px2rem æä»¶æ¥å®ç°ï¼é¡¹ç®ä¸­æ°å»º postcss.config.jsï¼è¯¦è§æ­¤é¡¹ç®\n\n// remUnit å³ n / 20 çå¼\nmodule.exports = {\n    plugins: [\n        require('postcss-px2rem')({remUnit: 18.75}),\n    ]\n}\n\n\n\n# æ»å¨å è½½æ³¨æäºé¡¹\n\nä¸è¬æä»¬å¨é¡¹ç®ä¸­ä½¿ç¨æ»å¨å°åºå è½½ï¼è¿æ¶åè¦æ³¨æä¸¤ç¹ï¼\n\n 1. é¿åå¤æ¬¡è§¦åï¼åä¸ä¸ªæ¥å£è¿æ²¡è¯·æ±å®ï¼åå»è¯·æ±ä¸ä¸ä¸ªæ¥å£ï¼\n 2. çå¬äºä»¶çåæ¶\n\nasync getList() {\n  // å½ä¸ä¸ä¸ªæ¥å£æ²¡è¿åæ¶ï¼ä¸å»è¯·æ±ä¸ä¸ä¸ª\n  if (this.'loading') {\n    return;\n  }\n  this.loading = true;\n  let res = await getDetail();\n  if (res && res.data) {\n    this.list = res.data;\n    return list;\n  });\n  this.data.set('loading', false);\n}\n\n\nå³äºæ»å¨äºä»¶çå¬\n\nmounted() {\n  this.loadingFun = this.loading.bind(this);\n  window.addEventListener('scroll', this.loadingFun);\n}\n\nunmounted() {\n  window.removeEventListener('scroll', this.loadingFun);\n}\n\nloading() {\n  //ææ¡£åå®¹å®éé«åº¦ï¼åæ¬è¶åºè§çªçæº¢åºé¨åï¼\n  let scrollHeight = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight);\n  //æ»å¨æ¡æ»å¨è·ç¦»\n  let scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;\n  //çªå£å¯è§èå´é«åº¦\n  let clientHeight = window.innerHeight || Math.min(document.documentElement.clientHeight,document.body.clientHeight);\n\n  if (clientHeight + scrollTop >= scrollHeight - 500) {\n    this.getList();\n  }\n}\n\n\nä¸ºä»ä¹è¦ bind (this) ï¼\n\n> å ä¸º loading åé¨è¿æ thisï¼è¿ä¸ª this åºè¯¥æåç»ä»¶å®ä¾ï¼ä½æ¯ç´æ¥ window.addEventListener('scroll', this.loading); this.getList å°±ä¼æå window\n> \n> åå æ¯ addEventListener åæ°ä¸­åè°å½æ°çthisæåç®æ åç´ ã\n\n<button id=\"btn\">click</button>\n\nlet oBtn = document.getElementById('btn');\noBtn.addEventListener('click', function(){\n\tconsole.log(this) // è¿éç this æ¯buttonåç´ \n}, false)\n\n--------\n\noBtn.addEventListener('click', say, false)\nfunction say() {\n    console.log(this) // è¿éç this ä¹æ¯buttonåç´ \n}\n\n--------\n\nlet obj = {\n\tsay: function() {\n\t\tconsole.log(this)\n\t}\n}\noBtn.addEventListener('click', obj.say, false)\n// è¿éç this ä¹æ¯buttonåç´ \n\n\né£æä½¿ç¨ç®­å¤´å½æ°ä¸è¡åï¼è¿æ · this å°±ä¼æåå¤é¨ä½ç¨åäºï¼\n\nwindow.addEventListener('scroll', () => {\n  this.loading;\n});\nwindow.removeEventListener('scroll', () => {\n  this.loading;\n});\n\n\n> ä¸è¡ï¼å ä¸º () => {} !== () => {}ï¼ä¸æ¯ä¸ä¸ªå½æ°ï¼åä¸é¢è¿ä¸ªä¾å­\n\nä¸ºä»ä¹è¦å®ä¹ä¸ª loadingFuncï¼ä¸é¢è¿æ ·åä¸è¡åï¼\n\nwindow.addEventListener('scroll', this.loading.bind(this));\nwindow.removeEventListener('scroll', this.loading.bind(this));\n\n\n> ä¸è¡ï¼å ä¸º bind ä¹åè¿åçæ¯ä¸ä¸ªæ°å½æ°ï¼æ·»å çå¬åç§»é¤çå¬çä¸æ¯ä¸ä¸ªå½æ°ï¼ä¸ä¼çæ\n\n\n# æ³¨æäºé¡¹\n\n\n# ios ç¹å»èæ¯\n\nå¨ ios ä¸ï¼å½ä½ ç¹å»ä¸ä¸ªé¾æ¥æèéè¿ Javascript å®ä¹çå¯ç¹å»åç´ çæ¶åï¼å®å°±ä¼åºç°ä¸ä¸ªåéæçç°è²èæ¯ãéè¦è®¾ç½®ä¸:\n\n-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n\n\n\n# htmlä¸å¯éä¸­\n\nHtml å css åå«æ·»å \n\n<body onselectstart=\"return false\">\n  <div id=\"app\"></div>\n</body>\n\n\n-webkit-touch-callout: none; /*ç³»ç»é»è®¤èåè¢«ç¦ç¨*/\n-webkit-user-select: none; /*webkitæµè§å¨*/\n-khtml-user-select: none; /*æ©ææµè§å¨*/\n-moz-user-select: none;/*ç«ç*/\n-ms-user-select: none; /*IE10*/\nuser-select: none;\n\n\n\n# é¡µé¢ä¸å¯æ¾å¤§ç¼©å°\n\nhtml ä¸­æ·»å  meta æ ç­¾\n\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\">\n\n\n\n# å¾çåç¼©\n\nä¸è¬ç§»å¨ç«¯é¡¹ç®é½è¦è¿è¡å¾çåç¼©ï¼å¦ååè¡¨ä¸­å¾çä¼å±ç¤ºçå¾æ¢ã\n\n\n# è°è¯\n\nH5 ç§»å¨è°è¯å¨æ»ç¥\n\næåæ¥çæ°æ®ï¼Charles å·¥å·\n\n# Android\n\n 1. é¦åæå¼ææºå¼åèéé¡¹ï¼åè®¸ usb è°è¯ï¼ç¶åå°ææºéè¿è½¬æ¥å¤´è¿æ¥å°çµèä¸ï¼åºç°ä»¥ä¸å¼¹çªåæåã\n\n\n\n 2. chrome ä¸­æå¼ chrome://inspect/#devicesï¼android ä¸æå¼ h5 é¡µé¢æ¶ï¼Remote Target ä¸­ä¼æ¾ç¤ºè®¾å¤ã\n\n\n\n> ææºå¼åèéé¡¹ä¸åææºä¸ä¸è´ï¼ç¾åº¦ä¸ä¸å³å¯ã\n> \n> å¦ææ²¡æ¾ç¤º Remote Target è®°å¾ææ usb éè¯å æ¬¡ï¼ç´å°ææºä¸å¼¹åºãåè®¸ usb è°è¯ãå­æ ·ã\n\n# IOS\n\nsafariè°è¯\n\næå¼iPhoneææºè®¾ç½®è®¾ç½® -> Safari -> é«çº§ -> æå¼Webæ£æ¥å¨ï¼ç¶åéè¿æ°æ®çº¿å°iPhoneè¿æ¥å°Macï¼çµèåææºåæ¶æå¼Safariï¼çµèä¸Safariæå¼ å¼å-iPhoneï¼å°±è½å¼å§è°è¯å¦ã\n\n> éå¶æ¯åªè½å¨ ios safari ä¸è°è¯ï¼app åç webview æ²¡åæ³è°è¯\n\n\n# h5 ç»å½ç¶æåæ­¥\n\nApp å¦ä½æç»å½ç¶æä¼ ç»H5é¡µé¢å¢ï¼å¶å®éè¦æç»å½åæå¡å¨è¿åç token ãuserId ç­ç»å½ä¿¡æ¯ä¼ ç»H5ç½é¡µï¼userId ç­æ°æ®å¯ä»¥éè¿ url ä¼ éï¼token æç®åçåæ³æ¯ç± app ç«¯å­å¥å° webview ç cookie ä¸­ã\n\nå¦æç»å½æ ¡éªæ¯åç«¯ä» cookie ä¸­ååº token çè¯ï¼åç«¯ä¸ç¨ä½ä»»ä½å¤çã",normalizedContent:"# ç§»å¨ç«¯h5å¼å\n\nä¼æå¨ç¥ï¼ç§»å¨ç«¯appé¡¹ç®æèå°ç¨åºé¡¹ç®ä¸­çä¸äºé¡µé¢é½ä¼ç¨ h5 æ¥åï¼ä¸è¬æä»¬ä¼å°åå¥½ç h5 é¡µé¢åå¥½ééï¼ä¸ä¼ å°éæå°åï¼å¦ bosï¼ï¼ç¶å h5 é¡µé¢ä¼ä»¥ webview çæ¹å¼åµå¥å°åçåºç¨ä¸­ãè¿éä¸»è¦æ»ç»ä¸ä¸ééæ¹æ¡ä»¥åä¸äºå¨h5å¼åä¸­çæ³¨æäºé¡¹ã\n\n\n# ééæ¹æ¡\n\næ´å¤æ¹æ¡å¯è§ç§»å¨ç«¯éé\n\n\n# vw + remæ¹æ¡\n\né¦åå¨ html æ ¹åç´ ä¸­è®¾ç½®ï¼\n\nhtml {\n  font-size: 5vw;\n}\n\n\nè¿æ · 1rem = 5 vwï¼20 rem = 100 vwã\n\nå¦ææµè§å¨ä¸æ¯æ vw åæ³ï¼æä»¬éè¦æå¨æå¥ä»¥ä¸ä»£ç ï¼\n\n(function (doc, win) {\n  var dummy = doc.createelement('_').style;\n  dummy.width = '1vw';\n  // è¥æ¯ævwåéåº\n  if (dummy.width) {\n    return;\n  }\n  // ä¸æ¯æ vw åæå¨è®¡ç®ä¸ä¸ï¼è®¾ç½® font-size ä¸ºå±å¹å®½åº¦ 1 / 20\n  var docel = doc.documentelement,\n      resizeevt = 'orientationchange' in win ? 'orientationchange' : 'resize',\n      recalc = function () {\n        var clientwidth = docel.clientwidth;\n        if (!clientwidth) {\n          return;\n        }\n        docel.style.fontsize = (clientwidth / 20) + 'px';\n      };\n  recalc();\n  win.addeventlistener(resizeevt, recalc, false);\n})(document, window);\n\n\n----------------------------------------\n\nå¼åæ¶æä»¬ä¸å»ºè®®ç´æ¥å remï¼çæ³æåµæ¯è®¾è®¡ç¨¿ç»åºå¤å°æå°±åå¤å°ï¼æä»¥æä»¬éè¦åè®¾ç½®ä¸ä¸ rem å px çè½¬æ¢å³ç³»ï¼\n\nåè¯´ç»è®ºï¼å¦æè®¾è®¡ç¨¿æ¯ n px çï¼é£ä¹è®¾ç½® 1px = (20 / n) rem\n\n> å¦æé¡¹ç®ä¸­å 100 px ï¼å¶å®å¸ææ è®ºå±å¹å®½åº¦æ¯å¤å°ï¼å®é½å è®¾è®¡ç¨¿å®½åº¦ç 100 / n çãæç§æ¢ç®å³ç³»ï¼\n> \n> 100px = 100 * (20 / n) rem = 100 * (20 / n) * 5 vw ï¼é£ä¹ï¼\n> \n> 1 vw å å±å¹å®½åº¦ç 1 /100 ä¹ä¸ï¼100 * (20 / n) * 5 vw åå å±å¹ç 100 * (20 / n) * 5 / 100 åä¹ä¸ï¼å³ 100 / n åä¹ä¸ï¼å°±æ¯æä»¬æå¸æçç»æã\n\nç»¼ä¸ï¼å¦æè®¾è®¡ç¨¿æ¯ 375px çï¼ä¸ä¸ªåç´ å®½åº¦ä¸º 100pxï¼æä»¬åªéç´æ¥å¨é¡¹ç®ä¸­å 100pxï¼é£ä¹è¿ä¸ªåç´ æ è®ºå¨ä»ä¹å®½åº¦çå±å¹ä¸ï¼å¶å®½åº¦é½ä¼å å±å¹å®½åº¦ç 100 / 375 ä»½ï¼è¿å°±æ»¡è¶³äºèªéåºã\n\n----------------------------------------\n\nè³äº px è½¬ rem æä»¬å¯ä»¥ä½¿ç¨ postcss-px2rem æä»¶æ¥å®ç°ï¼é¡¹ç®ä¸­æ°å»º postcss.config.jsï¼è¯¦è§æ­¤é¡¹ç®\n\n// remunit å³ n / 20 çå¼\nmodule.exports = {\n    plugins: [\n        require('postcss-px2rem')({remunit: 18.75}),\n    ]\n}\n\n\n\n# æ»å¨å è½½æ³¨æäºé¡¹\n\nä¸è¬æä»¬å¨é¡¹ç®ä¸­ä½¿ç¨æ»å¨å°åºå è½½ï¼è¿æ¶åè¦æ³¨æä¸¤ç¹ï¼\n\n 1. é¿åå¤æ¬¡è§¦åï¼åä¸ä¸ªæ¥å£è¿æ²¡è¯·æ±å®ï¼åå»è¯·æ±ä¸ä¸ä¸ªæ¥å£ï¼\n 2. çå¬äºä»¶çåæ¶\n\nasync getlist() {\n  // å½ä¸ä¸ä¸ªæ¥å£æ²¡è¿åæ¶ï¼ä¸å»è¯·æ±ä¸ä¸ä¸ª\n  if (this.'loading') {\n    return;\n  }\n  this.loading = true;\n  let res = await getdetail();\n  if (res && res.data) {\n    this.list = res.data;\n    return list;\n  });\n  this.data.set('loading', false);\n}\n\n\nå³äºæ»å¨äºä»¶çå¬\n\nmounted() {\n  this.loadingfun = this.loading.bind(this);\n  window.addeventlistener('scroll', this.loadingfun);\n}\n\nunmounted() {\n  window.removeeventlistener('scroll', this.loadingfun);\n}\n\nloading() {\n  //ææ¡£åå®¹å®éé«åº¦ï¼åæ¬è¶åºè§çªçæº¢åºé¨åï¼\n  let scrollheight = math.max(document.documentelement.scrollheight, document.body.scrollheight);\n  //æ»å¨æ¡æ»å¨è·ç¦»\n  let scrolltop = window.pageyoffset || document.documentelement.scrolltop || document.body.scrolltop;\n  //çªå£å¯è§èå´é«åº¦\n  let clientheight = window.innerheight || math.min(document.documentelement.clientheight,document.body.clientheight);\n\n  if (clientheight + scrolltop >= scrollheight - 500) {\n    this.getlist();\n  }\n}\n\n\nä¸ºä»ä¹è¦ bind (this) ï¼\n\n> å ä¸º loading åé¨è¿æ thisï¼è¿ä¸ª this åºè¯¥æåç»ä»¶å®ä¾ï¼ä½æ¯ç´æ¥ window.addeventlistener('scroll', this.loading); this.getlist å°±ä¼æå window\n> \n> åå æ¯ addeventlistener åæ°ä¸­åè°å½æ°çthisæåç®æ åç´ ã\n\n<button id=\"btn\">click</button>\n\nlet obtn = document.getelementbyid('btn');\nobtn.addeventlistener('click', function(){\n\tconsole.log(this) // è¿éç this æ¯buttonåç´ \n}, false)\n\n--------\n\nobtn.addeventlistener('click', say, false)\nfunction say() {\n    console.log(this) // è¿éç this ä¹æ¯buttonåç´ \n}\n\n--------\n\nlet obj = {\n\tsay: function() {\n\t\tconsole.log(this)\n\t}\n}\nobtn.addeventlistener('click', obj.say, false)\n// è¿éç this ä¹æ¯buttonåç´ \n\n\né£æä½¿ç¨ç®­å¤´å½æ°ä¸è¡åï¼è¿æ · this å°±ä¼æåå¤é¨ä½ç¨åäºï¼\n\nwindow.addeventlistener('scroll', () => {\n  this.loading;\n});\nwindow.removeeventlistener('scroll', () => {\n  this.loading;\n});\n\n\n> ä¸è¡ï¼å ä¸º () => {} !== () => {}ï¼ä¸æ¯ä¸ä¸ªå½æ°ï¼åä¸é¢è¿ä¸ªä¾å­\n\nä¸ºä»ä¹è¦å®ä¹ä¸ª loadingfuncï¼ä¸é¢è¿æ ·åä¸è¡åï¼\n\nwindow.addeventlistener('scroll', this.loading.bind(this));\nwindow.removeeventlistener('scroll', this.loading.bind(this));\n\n\n> ä¸è¡ï¼å ä¸º bind ä¹åè¿åçæ¯ä¸ä¸ªæ°å½æ°ï¼æ·»å çå¬åç§»é¤çå¬çä¸æ¯ä¸ä¸ªå½æ°ï¼ä¸ä¼çæ\n\n\n# æ³¨æäºé¡¹\n\n\n# ios ç¹å»èæ¯\n\nå¨ ios ä¸ï¼å½ä½ ç¹å»ä¸ä¸ªé¾æ¥æèéè¿ javascript å®ä¹çå¯ç¹å»åç´ çæ¶åï¼å®å°±ä¼åºç°ä¸ä¸ªåéæçç°è²èæ¯ãéè¦è®¾ç½®ä¸:\n\n-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n\n\n\n# htmlä¸å¯éä¸­\n\nhtml å css åå«æ·»å \n\n<body onselectstart=\"return false\">\n  <div id=\"app\"></div>\n</body>\n\n\n-webkit-touch-callout: none; /*ç³»ç»é»è®¤èåè¢«ç¦ç¨*/\n-webkit-user-select: none; /*webkitæµè§å¨*/\n-khtml-user-select: none; /*æ©ææµè§å¨*/\n-moz-user-select: none;/*ç«ç*/\n-ms-user-select: none; /*ie10*/\nuser-select: none;\n\n\n\n# é¡µé¢ä¸å¯æ¾å¤§ç¼©å°\n\nhtml ä¸­æ·»å  meta æ ç­¾\n\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\">\n\n\n\n# å¾çåç¼©\n\nä¸è¬ç§»å¨ç«¯é¡¹ç®é½è¦è¿è¡å¾çåç¼©ï¼å¦ååè¡¨ä¸­å¾çä¼å±ç¤ºçå¾æ¢ã\n\n\n# è°è¯\n\nh5 ç§»å¨è°è¯å¨æ»ç¥\n\næåæ¥çæ°æ®ï¼charles å·¥å·\n\n# android\n\n 1. é¦åæå¼ææºå¼åèéé¡¹ï¼åè®¸ usb è°è¯ï¼ç¶åå°ææºéè¿è½¬æ¥å¤´è¿æ¥å°çµèä¸ï¼åºç°ä»¥ä¸å¼¹çªåæåã\n\n\n\n 2. chrome ä¸­æå¼ chrome://inspect/#devicesï¼android ä¸æå¼ h5 é¡µé¢æ¶ï¼remote target ä¸­ä¼æ¾ç¤ºè®¾å¤ã\n\n\n\n> ææºå¼åèéé¡¹ä¸åææºä¸ä¸è´ï¼ç¾åº¦ä¸ä¸å³å¯ã\n> \n> å¦ææ²¡æ¾ç¤º remote target è®°å¾ææ usb éè¯å æ¬¡ï¼ç´å°ææºä¸å¼¹åºãåè®¸ usb è°è¯ãå­æ ·ã\n\n# ios\n\nsafariè°è¯\n\næå¼iphoneææºè®¾ç½®è®¾ç½® -> safari -> é«çº§ -> æå¼webæ£æ¥å¨ï¼ç¶åéè¿æ°æ®çº¿å°iphoneè¿æ¥å°macï¼çµèåææºåæ¶æå¼safariï¼çµèä¸safariæå¼ å¼å-iphoneï¼å°±è½å¼å§è°è¯å¦ã\n\n> éå¶æ¯åªè½å¨ ios safari ä¸è°è¯ï¼app åç webview æ²¡åæ³è°è¯\n\n\n# h5 ç»å½ç¶æåæ­¥\n\napp å¦ä½æç»å½ç¶æä¼ ç»h5é¡µé¢å¢ï¼å¶å®éè¦æç»å½åæå¡å¨è¿åç token ãuserid ç­ç»å½ä¿¡æ¯ä¼ ç»h5ç½é¡µï¼userid ç­æ°æ®å¯ä»¥éè¿ url ä¼ éï¼token æç®åçåæ³æ¯ç± app ç«¯å­å¥å° webview ç cookie ä¸­ã\n\nå¦æç»å½æ ¡éªæ¯åç«¯ä» cookie ä¸­ååº token çè¯ï¼åç«¯ä¸ç¨ä½ä»»ä½å¤çã",charsets:{cjk:!0}},{title:"å°ç¨åºé¿åè¡¨ä¼å",frontmatter:{title:"å°ç¨åºé¿åè¡¨ä¼å",date:"2020-09-20T11:27:54.000Z",categories:"ç§»å¨ç«¯"},regularPath:"/mobile/long-list.html",relativePath:"mobile/long-list.md",key:"v-4a5cdbb2",path:"/mobile/long-list.html",headers:[{level:2,title:"å·ä½å®ç°",slug:"å·ä½å®ç°",normalizedTitle:"å·ä½å®ç°",charIndex:208},{level:2,title:"èªå®ä¹Vueæä»¤",slug:"èªå®ä¹vueæä»¤",normalizedTitle:"èªå®ä¹vueæä»¤",charIndex:1820}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"å·ä½å®ç° èªå®ä¹Vueæä»¤",content:'# å°ç¨åºé¿åè¡¨ä¼å\n\n * æ»å¨å è½½\n\n * èæåè¡¨\n\n * åèï¼https://zhuanlan.zhihu.com/p/146791824\n\næè·¯:\n\n 1. ä¸ç»´æ°ç» => äºç»´æ°ç»ï¼æ¯ä¸ªå­æ°ç»å­æ¾åæ¡æ°æ®ï¼ä¸å±ï¼\n 2. æ¯å è½½ä¸å±ï¼è®¡ç®ä¸ä¸é«åº¦ï¼ç¨ä¸ä¸ªé«åº¦æ°ç»å­å¨\n 3. å¯¹æ¯ä¸å±æ°æ®ä½ç½®è¿è¡çå¬ï¼åªæå¨å¯è§èå´åå±ç¤º\n 4. ä¸ºé²æ­¢è¿å¿«æ»å¨åºç°ç½å±ï¼å¯è§èå´æ©å±è³å±å¹ä¸ä¸å2000é«åº¦\n\n\n# å·ä½å®ç°\n\n * ä¸ç»´æ°ç» => äºç»´æ°ç»\n\n<div :id="\'wrp_\' + index1" v-for="(question, index) in questionList" :key="index">\n\t<div v-if="question.length > 0">\n\t\t<div v-for="item in question" :key="item.questionId">\n            <list-item></list-item>\n\t\t</div>\n     <div v-else :style="{ height: pageHeightArr[index1] + \'px\' }"></div>\n</div>\n\n\n * è°ç¨æ¥å£\n\n\t\tgetQuestionList() {\n            // æ¯æ¬¡è°ç¨æ¥å£è·å 10 æ¡æ°æ®ï¼ä¸ºä¸ç»\n            API.getList(params).then(res => {\n                this.questionList.push(res)\n                this.dataList.push(res)\n                // setHeight: è·åé«åº¦\n                this.$nextTick(() => {\n                    setTimeout(() => {\n                        this.setHeight()\n                    }, 50)\n                })\n        }\n\n\n * è·åé«åº¦ä¸çå¬\n\nsetHeight() {\n\tconst that = this\n\tconst wholePageIndex = this.pageNum - 1\n\tthis.query = wx.createSelectorQuery()\n    // è·å DOM åç´ \n\tthis.query.select(`#wrp_${wholePageIndex}`).boundingClientRect()\n    // è·åé«åº¦\n\tthis.query.exec(function(res) {\n\t\tthat.pageHeightArr[wholePageIndex] = res[0] && res[0].height\n\t\tconsole.log(\'é«åº¦æ°ç»ï¼\' + that.pageHeightArr)\n\t})\n    // çå¬\n\tthis.observePage(wholePageIndex)\n}\n\nobservePage(pageIndex) {\n    // çå¬å¯è§åºåä¸ä¸å 1500 èå´å\n\tconst observerObj = wx.createIntersectionObserver().relativeToViewport(\n\t\t{ top: 1500, bottom: 1500 }\n    )\n\tobserverObj.observe(`#wrp_${pageIndex}`, (res) => {\n\t\tif (res.intersectionRatio <= 0) {\n            // ä¸å¨èå´å è®¾ç½®é«åº¦\n\t\t\tthis.$set(this.questionList, pageIndex, this.pageHeightArr[pageIndex])\n\t\t} else {\n            // å¨èå´å è®¾ç½®æ°æ®\n\t\t\tthis.$set(this.questionList, pageIndex, this.dataList[pageIndex])\n\t\t}\n\t})\n}\n\n\n\n# èªå®ä¹Vueæä»¤\n\nVue.directive(\'el-select-scroll\', {\n        bind(el, binding) {\n            // è·åDOM\n            let SCROLL_DOM = el.querySelector(\'.el-select-dropdown .el-select-dropdown__wrap\')\n            let scrollPosition = 0\n            SCROLL_DOM.addEventListener(\'scroll\', function () { \n\n                // æ»å¨æ¹å: trueæ¯åä¸ï¼falseæ¯åä¸\n                let flagToDirection = this.scrollTop - scrollPosition > 0\n\n                // è®°å½å½åçæ»å¨ä½ç½®\n                scrollPosition = this.scrollTop\n\n                // è·ç¦»åºé¨å°äº 120 è§¦å\n                const LIMIT_BOTTOM = 120\n                let scrollBottom = this.scrollHeight - (this.scrollTop + this.clientHeight) < LIMIT_BOTTOM\n\n                // å°æ»å¨è¡ä¸ºåè¯ç»ä»¶\n                if (flagToDirection && scrollBottom) {\n                    binding.value(flagToDirection)\n                }\n            })       \n        }\n    })\n\n\n<el-select\n  filterable \n  :filter-method="dataFilter1"\n  v-el-select-scroll="handleScrollThrittle1"\n  placeholder="è¯·éæ©è®¿é®æ¥¼ç">\n      <el-option\n         v-for="item in buildGroup.list"\n         :key="item.pid"\n         :label="item.groupName"\n         :value="item.pid">\n      </el-option>\n</el-select>\n',normalizedContent:'# å°ç¨åºé¿åè¡¨ä¼å\n\n * æ»å¨å è½½\n\n * èæåè¡¨\n\n * åèï¼https://zhuanlan.zhihu.com/p/146791824\n\næè·¯:\n\n 1. ä¸ç»´æ°ç» => äºç»´æ°ç»ï¼æ¯ä¸ªå­æ°ç»å­æ¾åæ¡æ°æ®ï¼ä¸å±ï¼\n 2. æ¯å è½½ä¸å±ï¼è®¡ç®ä¸ä¸é«åº¦ï¼ç¨ä¸ä¸ªé«åº¦æ°ç»å­å¨\n 3. å¯¹æ¯ä¸å±æ°æ®ä½ç½®è¿è¡çå¬ï¼åªæå¨å¯è§èå´åå±ç¤º\n 4. ä¸ºé²æ­¢è¿å¿«æ»å¨åºç°ç½å±ï¼å¯è§èå´æ©å±è³å±å¹ä¸ä¸å2000é«åº¦\n\n\n# å·ä½å®ç°\n\n * ä¸ç»´æ°ç» => äºç»´æ°ç»\n\n<div :id="\'wrp_\' + index1" v-for="(question, index) in questionlist" :key="index">\n\t<div v-if="question.length > 0">\n\t\t<div v-for="item in question" :key="item.questionid">\n            <list-item></list-item>\n\t\t</div>\n     <div v-else :style="{ height: pageheightarr[index1] + \'px\' }"></div>\n</div>\n\n\n * è°ç¨æ¥å£\n\n\t\tgetquestionlist() {\n            // æ¯æ¬¡è°ç¨æ¥å£è·å 10 æ¡æ°æ®ï¼ä¸ºä¸ç»\n            api.getlist(params).then(res => {\n                this.questionlist.push(res)\n                this.datalist.push(res)\n                // setheight: è·åé«åº¦\n                this.$nexttick(() => {\n                    settimeout(() => {\n                        this.setheight()\n                    }, 50)\n                })\n        }\n\n\n * è·åé«åº¦ä¸çå¬\n\nsetheight() {\n\tconst that = this\n\tconst wholepageindex = this.pagenum - 1\n\tthis.query = wx.createselectorquery()\n    // è·å dom åç´ \n\tthis.query.select(`#wrp_${wholepageindex}`).boundingclientrect()\n    // è·åé«åº¦\n\tthis.query.exec(function(res) {\n\t\tthat.pageheightarr[wholepageindex] = res[0] && res[0].height\n\t\tconsole.log(\'é«åº¦æ°ç»ï¼\' + that.pageheightarr)\n\t})\n    // çå¬\n\tthis.observepage(wholepageindex)\n}\n\nobservepage(pageindex) {\n    // çå¬å¯è§åºåä¸ä¸å 1500 èå´å\n\tconst observerobj = wx.createintersectionobserver().relativetoviewport(\n\t\t{ top: 1500, bottom: 1500 }\n    )\n\tobserverobj.observe(`#wrp_${pageindex}`, (res) => {\n\t\tif (res.intersectionratio <= 0) {\n            // ä¸å¨èå´å è®¾ç½®é«åº¦\n\t\t\tthis.$set(this.questionlist, pageindex, this.pageheightarr[pageindex])\n\t\t} else {\n            // å¨èå´å è®¾ç½®æ°æ®\n\t\t\tthis.$set(this.questionlist, pageindex, this.datalist[pageindex])\n\t\t}\n\t})\n}\n\n\n\n# èªå®ä¹vueæä»¤\n\nvue.directive(\'el-select-scroll\', {\n        bind(el, binding) {\n            // è·ådom\n            let scroll_dom = el.queryselector(\'.el-select-dropdown .el-select-dropdown__wrap\')\n            let scrollposition = 0\n            scroll_dom.addeventlistener(\'scroll\', function () { \n\n                // æ»å¨æ¹å: trueæ¯åä¸ï¼falseæ¯åä¸\n                let flagtodirection = this.scrolltop - scrollposition > 0\n\n                // è®°å½å½åçæ»å¨ä½ç½®\n                scrollposition = this.scrolltop\n\n                // è·ç¦»åºé¨å°äº 120 è§¦å\n                const limit_bottom = 120\n                let scrollbottom = this.scrollheight - (this.scrolltop + this.clientheight) < limit_bottom\n\n                // å°æ»å¨è¡ä¸ºåè¯ç»ä»¶\n                if (flagtodirection && scrollbottom) {\n                    binding.value(flagtodirection)\n                }\n            })       \n        }\n    })\n\n\n<el-select\n  filterable \n  :filter-method="datafilter1"\n  v-el-select-scroll="handlescrollthrittle1"\n  placeholder="è¯·éæ©è®¿é®æ¥¼ç">\n      <el-option\n         v-for="item in buildgroup.list"\n         :key="item.pid"\n         :label="item.groupname"\n         :value="item.pid">\n      </el-option>\n</el-select>\n',charsets:{cjk:!0}},{title:"æ¨¡åå",frontmatter:{title:"æ¨¡åå",date:"2020-09-05T09:47:00.000Z",categories:"æ¨¡åå"},regularPath:"/module/module.html",relativePath:"module/module.md",key:"v-332a845f",path:"/module/module.html",headers:[{level:2,title:"æ¨¡ååçæ¼åè¿ç¨",slug:"æ¨¡ååçæ¼åè¿ç¨",normalizedTitle:"æ¨¡ååçæ¼åè¿ç¨",charIndex:41},{level:2,title:"ES Modules",slug:"es-modules",normalizedTitle:"es modules",charIndex:53},{level:3,title:"ES Modules åºæ¬ç¹æ§",slug:"es-modules-åºæ¬ç¹æ§",normalizedTitle:"es modules åºæ¬ç¹æ§",charIndex:1272},{level:3,title:"ES Modules çå¯¼å¥å¯¼åº",slug:"es-modules-çå¯¼å¥å¯¼åº",normalizedTitle:"es modules çå¯¼å¥å¯¼åº",charIndex:2118},{level:3,title:"å ç¹æ³¨æäºé¡¹",slug:"å ç¹æ³¨æäºé¡¹",normalizedTitle:"å ç¹æ³¨æäºé¡¹",charIndex:2565},{level:2,title:"Polyfill",slug:"polyfill",normalizedTitle:"polyfill",charIndex:67},{level:2,title:"ES Moduleä¸CommonJSäº¤äº",slug:"es-moduleä¸commonjsäº¤äº",normalizedTitle:"es moduleä¸commonjsäº¤äº",charIndex:79},{level:2,title:"importä¸­ç@",slug:"importä¸­ç",normalizedTitle:"importä¸­ç@",charIndex:103},{level:2,title:"å ä¸ªå®éçä¾å­",slug:"å ä¸ªå®éçä¾å­",normalizedTitle:"å ä¸ªå®éçä¾å­",charIndex:116},{level:2,title:".mjs ä¸ .cjs",slug:"mjs-ä¸-cjs",normalizedTitle:".mjs ä¸ .cjs",charIndex:5940},{level:2,title:"ES Modules ä¸ Common JS å·®å¼",slug:"es-modules-ä¸-common-js-å·®å¼",normalizedTitle:"es modules ä¸ common js å·®å¼",charIndex:6455}],lastUpdated:"3/1/2022, 3:30:47 PM",lastUpdatedTimestamp:1646119847e3,headersStr:"æ¨¡ååçæ¼åè¿ç¨ ES Modules ES Modules åºæ¬ç¹æ§ ES Modules çå¯¼å¥å¯¼åº å ç¹æ³¨æäºé¡¹ Polyfill ES Moduleä¸CommonJSäº¤äº importä¸­ç@ å ä¸ªå®éçä¾å­ .mjs ä¸ .cjs ES Modules ä¸ Common JS å·®å¼",content:"# æ¨¡åå\n\né®ä¸å³°ææ¡£ï¼Module çè¯­æ³ãModule çå è½½å®ç°\n\n * æ¨¡ååçæ¼åè¿ç¨\n * ES Modules\n * Polyfill\n * ES Moduleä¸CommonJSäº¤äº\n * importä¸­ç@\n * å ä¸ªå®éçä¾å­\n\n\n# æ¨¡ååçæ¼åè¿ç¨\n\n 1. åºäºæä»¶çååæ¨¡åçæ¹å¼\n\n> æææ¨¡åé½ç´æ¥å¨å¨å±å·¥ä½ï¼æ²¡æç§æç©ºé´ï¼æææåé½å¯ä»¥å¨æ¨¡åå¤é¨è¢«è®¿é®æèä¿®æ¹ï¼\n> \n> èä¸æ¨¡åä¸æ®µå¤äºè¿åï¼å®¹æäº§çå½åå²çªï¼\n> \n> å¦å¤æ æ³ç®¡çæ¨¡åä¸æ¨¡åä¹é´çä¾èµå³ç³»\n\n 2. å½åç©ºé´æ¹å¼\n\n> å·ä½åæ³å°±æ¯å¨ç¬¬ä¸é¶æ®µçåºç¡ä¸ï¼éè¿å°æ¯ä¸ªæ¨¡åãåè£¹ãä¸ºä¸ä¸ªå¨å±å¯¹è±¡çå½¢å¼å®ç°ï¼\n> \n> æç¹ç±»ä¼¼äºä¸ºæ¨¡ååçæåæ·»å äºãå½åç©ºé´ãçæè§ã\n> \n> éè¿ãå½åç©ºé´ãåå°äºå½åå²çªçå¯è½ï¼\n> \n> ä½æ¯åæ ·æ²¡æç§æç©ºé´ï¼æææ¨¡åæåä¹å¯ä»¥å¨æ¨¡åå¤é¨è¢«è®¿é®æèä¿®æ¹ï¼\n> \n> èä¸ä¹æ æ³ç®¡çæ¨¡åä¹é´çä¾èµå³ç³»ã\n\n 3. IIFEï¼ç«å³æ§è¡å½æ°ï¼å®ç°äºç§ææå\n\n> å·ä½åæ³å°±æ¯å°æ¯ä¸ªæ¨¡åæåé½æ¾å¨ä¸ä¸ªå½æ°æä¾çç§æä½ç¨åä¸­ï¼\n> \n> å¯¹äºéè¦æ´é²ç»å¤é¨çæåï¼éè¿æå¨å°å¨å±å¯¹è±¡ä¸çæ¹å¼å®ç°\n> \n> æäºç§ææåçæ¦å¿µï¼ç§ææååªè½å¨æ¨¡åæååéè¿é­åçå½¢å¼è®¿é®ã\n\n// module a ç¸å³ç¶ææ°æ®ååè½å½æ°ï¼IIFE\n\n;(function () {\n  var name = 'module-a'\n  \n  function method1 () {\n    console.log(name + '#method1')\n  }\n  \n  function method2 () {\n    console.log(name + '#method2')\n  }\n\n  window.moduleA = {\n    method1: method1,\n    method2: method2\n  }\n})()\n\n\n\n 4. CommonJSè§èï¼nodeç¯å¢ï¼\n\n * ä¸ä¸ªæä»¶å°±æ¯ä¸ä¸ªæ¨¡å\n * æ¯ä¸ªæ¨¡åé½æåç¬çä½ç¨å\n * éè¿module.exportså¯¼åºæå\n * éè¿requireå½æ°è½½å¥æ¨¡å\n\n> æµè§å¨ç«¯ä¸è½ä½¿ç¨ï¼å ä¸ºCommonJSæ¯ä»¥åæ­¥æ¨¡å¼å è½½æ¨¡åï¼æ¯ä¸æ¬¡é¡µé¢å è½½é½ä¼æå¤§éæ¨¡åè¯·æ±\n\n 5. AMDï¼Asynchronous Module Definition ï¼å¼æ­¥æ¨¡åå®ä¹ï¼\n\n> åæ¶ææ¨åºäºrequire.jsï¼å®ç°äºAMDè§è\n> \n> ç®åç»å¤§æ°ç¬¬ä¸æ¹åºé½æ¯æAMDè§è\n> \n> ä½æ¯AMDä½¿ç¨èµ·æ¥æ¯è¾å¤æï¼æ¨¡åJSæä»¶è¯·æ±é¢ç¹\n\n 6. Sea.js + CMD ï¼Common Module Definition\n\n> ç±»ä¼¼äºCommonJSçè¯­æ³\n\n\n# ES Modules\n\n * CommonJS in Node.jsï¼ç®åNode8ä»¥ä¸ä¹æ¯æES Modulesï¼\n * ES Modules in Browsersï¼ES6ï¼\n\n\n# ES Modules åºæ¬ç¹æ§\n\n * èªå¨éç¨ä¸¥æ ¼æ¨¡å¼ï¼å¿½ç¥ 'use strict'\n * æ¯ä¸ª ES Module é½æ¯è¿è¡å¨åç¬çç§æä½ç¨åä¸­\n * ESM æ¯éè¿ CORS çæ¹å¼è¯·æ±å¤é¨ JS æ¨¡åç\n * ESM ç script æ ç­¾ä¼å»¶è¿æ§è¡èæ¬\n\n  \x3c!-- éè¿ç» script æ·»å  type = module çå±æ§ï¼å°±å¯ä»¥ä»¥ ES Module çæ åæ§è¡å¶ä¸­ç JS ä»£ç äº --\x3e\n  <script type=\"module\">\n    console.log('this is es module')\n  <\/script>\n\n  \x3c!-- 1. ESM èªå¨éç¨ä¸¥æ ¼æ¨¡å¼ï¼å¿½ç¥ 'use strict' --\x3e\n  <script type=\"module\">\n    console.log(this) // undefined\n  <\/script>\n\n  \x3c!-- 2. æ¯ä¸ª ES Module é½æ¯è¿è¡å¨åç¬çç§æä½ç¨åä¸­ --\x3e\n  <script type=\"module\">\n    var foo = 100\n    console.log(foo)\n  <\/script>\n  <script type=\"module\">\n    console.log(foo)\n  <\/script>\n\n  \x3c!-- 3. ESM æ¯éè¿ CORS çæ¹å¼è¯·æ±å¤é¨ JS æ¨¡åçï¼éè¦æå¡å¨ç«¯çè·¨åæ¯æï¼æ®éscriptä¸å­å¨è·¨å --\x3e\n  <script type=\"module\" src=\"https://unpkg.com/jquery@3.4.1/dist/jquery.min.js\"><\/script> \n\n  \x3c!-- 4. ESM ç script æ ç­¾ä¼å»¶è¿æ§è¡èæ¬,æ­¤å¤ä¼åæ§è¡pæ ç­¾ --\x3e\n  <script defer src=\"demo.js\"><\/script>\n  <p>éè¦æ¾ç¤ºçåå®¹</p> \n\n\n\n# ES Modules çå¯¼å¥å¯¼åº\n\n// app.js\nimport { default as fooName, fooHello, Person } from './module.js'\n\nimport height23 from './module.js' // æ¥æ¶default\n\nconsole.log(fooName, fooHello, Person)\n\n// modeule.js\nvar name = 'foo module'\n\nvar height = 180\n\nfunction hello () {\n  console.log('hello')\n}\n\nclass Person {}\n\nexport { name as default, hello as fooHello, Person }\n\nexport default height\n\n// index.html\n<script type=\"module\" src=\"app.js\"><\/script>\n\n\n\n# å ç¹æ³¨æäºé¡¹\n\nimport { name } from './module.js' // ä¸è½çç¥.js\nimport { lowercase } from './utils/index.js' // ä¸è½çç¥index.jsï¼å¦åæ¾ä¸å°\nimport { name } from './module.js' // ä¸è½çç¥./ï¼å¦åè®¤ä¸ºå è½½ç¬¬ä¸æ¹æ¨¡å\nimport './module.js' // å è½½è¿ä¸ªæ¨¡åä½æ¯ä¸æå\nimport * as mod from './module.js' // æåæææ¾å¥modå¯¹è±¡ä¸­\n\n// ä¸é¢è¿ä¸¤ç§æ¹å¼ä¸æ­£ç¡®ï¼ä¸è½å¨ææ¡ä»¶å¯¼å¥\nvar modulePath = './module.js'\nimport { name } from modulePath\nconsole.log(name)\n\n if (true) {\n   import { name } from './module.js'\n }\n\n// é£æä¹å¨æå¯¼å¥å¢\n import('./module.js').then(function (module) {\n   console.log(module)\n })\n\n// æåé»è®¤æååæ­£å¸¸æå\nimport abc, { name, age } from './module.js'\nconsole.log(name, age, abc)\n\n// ç´æ¥å¯¼åºå¯¼å¥æå\n\n// button.js\nvar Button = 'Button Component'\nexport default Button\n\n// avatar.js\nexport var Avatar = 'Avatar Component'\n\n// index.js\nexport { default as Button } from './button.js'\nexport { Avatar } from './avatar.js'\n\n// ç¬¬ä¸æ¹æ¨¡åé½æ¯å¯¼åºé»è®¤æå\nimport _ from 'lodash'\nimport { camelCase } from 'lodash' // ä¸æ­£ç¡®\n\n\n\n# Polyfill\n\nieæµè§å¨ä¸å¼å®¹ES Modules\n\nPolyfill æ¯ä¸åä»£ç ï¼éå¸¸æ¯ Web ä¸ç JavaScriptï¼ï¼ç¨æ¥ä¸ºæ§æµè§å¨æä¾å®æ²¡æåçæ¯æçè¾æ°çåè½ã\n\n> ä¾å¦ï¼querySelectorAllæ¯å¾å¤ç°ä»£æµè§å¨é½æ¯æçåçWeb APIï¼ä½æ¯æäºå¤èçæµè§å¨å¹¶ä¸æ¯æï¼é£ä¹åè®¾æäººåäºåºï¼åªè¦ç¨äºè¿ä¸ªåºï¼ ä½ å°±å¯ä»¥å¨å¤èçæµè§å¨éé¢ä½¿ç¨document.querySelectorAllï¼ä½¿ç¨æ¹æ³è·ç°ä»£æµè§å¨åçAPIæ å¼ãé£ä¹è¿ä¸ªåºå°±å¯ä»¥ç§°ä¸ºPolyfillæèPolyfillerã\n> \n> jQueryæ¯ä¸æ¯ä¸ä¸ªPolyfill?ç­æ¡æ¯Noãå ä¸ºå®å¹¶ä¸æ¯å®ç°ä¸äºæ åçåçAPIï¼èæ¯å°è£äºèªå·±APIãä¸ä¸ªPolyfillæ¯æ¹å¹³æ°èæµè§å¨ æ ååçAPI ä¹é´çå·®è·çä¸ç§å°è£ï¼èä¸æ¯å®ç°èªå·±çAPIã\n> \n> ææ§çæµè§å¨æ³è±¡æä¸ºä¸é¢æäºè£ç¼çå¢.è¿äº[polyfills]ä¼å¸®å©æä»¬æè¿é¢å¢çè£ç¼æ¹å¹³,è¿æä»¬ä¸ä¸ªæ´å¥½çåæ»çå¢å£(æµè§å¨)\n\n\n# ES Moduleä¸CommonJSäº¤äº\n\nå¨nodeåçç¯å¢ä¸­\n\n * ES Modulesä¸­å¯ä»¥å¯¼å¥CommonJSæ¨¡å\n * CommonJSä¸­å¯ä»¥å¯¼å¥ES Modulesæ¨¡å\n * CommonJSå§ç»åªä¼å¯¼åºä¸ä¸ªé»è®¤æå\n * æ³¨æimportä¸æ¯è§£æå¯¹è±¡\n\nes-module.mjs æä»¶åè¦æ¹æ.mjs\n\n// ES Module ä¸­å¯ä»¥å¯¼å¥ CommonJS æ¨¡å\n\nimport mod from './commonjs.js'\nconsole.log(mod)\n\n// ä¸è½ç´æ¥æåæåï¼æ³¨æ import ä¸æ¯è§£æå¯¼åºå¯¹è±¡\n\nimport { foo } from './commonjs.js'\nconsole.log(foo)\n\nexport const foo = 'es module export value'\n\n\ncommonjs.js\n\n// CommonJS æ¨¡åå§ç»åªä¼å¯¼åºä¸ä¸ªé»è®¤æå\n\nmodule.exports = {\n  foo: 'commonjs exports value'\n}\n\nexports.foo = 'commonjs exports value'\n\n// ä¸è½å¨ CommonJS æ¨¡åä¸­éè¿ require è½½å¥ ES Module\n\nconst mod = require('./es-module.mjs')\nconsole.log(mod)\n\n\n> æ è®ºæ¯requireæèimportï¼ç®åä»ç¶éè¦éè¿babelæètraceurä¹ç±»çè½¬ä¹å·¥å·å°ä¹è½¬ä¹ä¸ºES5è¯­æ³ï¼æè½å¨æµè§å¨éè¿è¡ã\n\n\n# importä¸­ç@\n\n> è¿æ¯webpackçè·¯å¾å«åï¼ç¸å³ä»£ç å®ä¹å¨éç½®æä»¶webpack.base.configéï¼\n\n\tresolve: {\n    extensions: ['.js', '.vue', '.json'],\n    alias: {\n      'vue$': 'vue/dist/vue.esm.js',\n      '@': resolve('src'),\n      'lib': resolve('src/lib'),\n      'style': resolve('src/style'),\n      'com': resolve('src/components'),\n      'serv': resolve('src/service'),\n      'api': resolve('src/api'),\n      'store': resolve('src/store')\n    }\n  },\n\n\n\n# å ä¸ªå®éçä¾å­\n\næå¤©å¨çä»£ç æ¶åç°ç±»ä¼¼ä¸é¢çåæ³ï¼\n\n// a.ts\nexport default 123;\n\n\n// b.ts\nlet b = require('./a').default;\n\n\nå¯¹æ­¤ææå°å¾çæï¼å¨æçè®°å¿ä¸­ï¼æ¨¡ååæ éå°±æ¯ä¸¤ç§ï¼\n\n * ES Modules ï¼ä½¿ç¨ importãexport / export default è¯­æ³\n * CommonJSï¼ä½¿ç¨ requireãmodule.exports / exports è¯­æ³\n\né£ä¹ä»£ç ä¸­ç require('./a').default ä¸­ç .default æ¯ä»ä¹ææå¢ï¼å°å¶ç¼è¯æ js æä»¶åæ¥çï¼\n\n// a.js\n\"use strict\";\nexports.__esModule = true;\nexports[\"default\"] = 123;\n\n// b.js\nvar b = require('./a')[\"default\"];\n\n\n> åæ¥æ¯ç»è¿ ts ç¼è¯åï¼es6 ç export default é½ä¼è¢«è½¬æ¢æ exports.defaultï¼å³ CommonJS è§è\n> \n> è½¬æ¢çé»è¾éå¸¸ç®åï¼å³å°è¾åºèµå¼ç» exportsï¼å¹¶å¸¦ä¸ä¸ä¸ªæ å¿ __esModule è¡¨æè¿æ¯ä¸ªç± es6 è½¬æ¢æ¥ç commonjs è¾åºã\n\nå¦ææ²¡æå ä¸ .default ï¼åä¼å¾å°æ´ä¸ªå¯¹è±¡ï¼\n\n// a.ts\nexport default 123;\n\n// b.ts\nlet b = require('./a');\n\nconsole.log(b) // { __esModule: true, default: 123 }\n\n\n> æ»ç»ï¼esm è¯­æ³ç»è¿ ts æè babel è½¬æ¢åä¼åä¸º commonjs è¯­æ³ï¼æä»¥è¿ä¹è§£éäºä¸ºä»ä¹ä¸¤ä¸ªæä»¶æ¢å¯ä»¥ç¨ esm è¯­æ³ï¼ä¹å¯ä»¥ç¨ CommonJs è¯­æ³ï¼å ä¸ºæåé½ä¼è½¬æ¢ä¸º CommonJS è¯­æ³ã\n\nåèé¾æ¥ï¼https://juejin.cn/post/6844903520865386510#heading-3\n\n\n# .mjs ä¸ .cjs\n\nä» Node.js v13.2 çæ¬å¼å§ï¼Node.js å·²ç»é»è®¤æå¼äº ES6 æ¨¡åæ¯æã\n\nNode.js è¦æ± ES6 æ¨¡åéç¨.mjsåç¼æä»¶åãä¹å°±æ¯è¯´ï¼åªè¦èæ¬æä»¶éé¢ä½¿ç¨importæèexportå½ä»¤ï¼é£ä¹å°±å¿é¡»éç¨.mjsåç¼åãNode.js éå°.mjsæä»¶ï¼å°±è®¤ä¸ºå®æ¯ ES6 æ¨¡åï¼é»è®¤å¯ç¨ä¸¥æ ¼æ¨¡å¼ï¼ä¸å¿å¨æ¯ä¸ªæ¨¡åæä»¶é¡¶é¨æå®\"use strict\"ã\n\nå¦æä¸å¸æå°åç¼åæ¹æ.mjsï¼å¯ä»¥å¨é¡¹ç®çpackage.jsonæä»¶ä¸­ï¼æå®typeå­æ®µä¸ºmoduleã\n\n{\n   \"type\": \"module\"\n}\n\n\nä¸æ¦è®¾ç½®äºä»¥åï¼è¯¥é¡¹ç®ç JS èæ¬ï¼å°±è¢«è§£éæ ES6 æ¨¡åã\n\nå¦æè¿æ¶è¿è¦ä½¿ç¨ CommonJS æ¨¡åï¼é£ä¹éè¦å° CommonJS èæ¬çåç¼åé½æ¹æ.cjsãå¦ææ²¡ætypeå­æ®µï¼æètypeå­æ®µä¸ºcommonjsï¼å.jsèæ¬ä¼è¢«è§£éæ CommonJS æ¨¡åã\n\næ»ç»ä¸ºä¸å¥è¯ï¼.mjsæä»¶æ»æ¯ä»¥ ES6 æ¨¡åå è½½ï¼.cjsæä»¶æ»æ¯ä»¥ CommonJS æ¨¡åå è½½ï¼.jsæä»¶çå è½½åå³äºpackage.jsonéé¢typeå­æ®µçè®¾ç½®ã\n\n\n# ES Modules ä¸ Common JS å·®å¼\n\n * CommonJS æ¨¡åè¾åºçæ¯ä¸ä¸ªå¼çæ·è´ï¼ES6 æ¨¡åè¾åºçæ¯å¼çå¼ç¨ã\n * CommonJS æ¨¡åæ¯è¿è¡æ¶å è½½ï¼ES6 æ¨¡åæ¯ç¼è¯æ¶è¾åºæ¥å£ã\n * CommonJS æ¨¡åçrequire()æ¯åæ­¥å è½½æ¨¡åï¼ES6 æ¨¡åçimportå½ä»¤æ¯å¼æ­¥å è½½ï¼æä¸ä¸ªç¬ç«çæ¨¡åä¾èµçè§£æé¶æ®µã",normalizedContent:"# æ¨¡åå\n\né®ä¸å³°ææ¡£ï¼module çè¯­æ³ãmodule çå è½½å®ç°\n\n * æ¨¡ååçæ¼åè¿ç¨\n * es modules\n * polyfill\n * es moduleä¸commonjsäº¤äº\n * importä¸­ç@\n * å ä¸ªå®éçä¾å­\n\n\n# æ¨¡ååçæ¼åè¿ç¨\n\n 1. åºäºæä»¶çååæ¨¡åçæ¹å¼\n\n> æææ¨¡åé½ç´æ¥å¨å¨å±å·¥ä½ï¼æ²¡æç§æç©ºé´ï¼æææåé½å¯ä»¥å¨æ¨¡åå¤é¨è¢«è®¿é®æèä¿®æ¹ï¼\n> \n> èä¸æ¨¡åä¸æ®µå¤äºè¿åï¼å®¹æäº§çå½åå²çªï¼\n> \n> å¦å¤æ æ³ç®¡çæ¨¡åä¸æ¨¡åä¹é´çä¾èµå³ç³»\n\n 2. å½åç©ºé´æ¹å¼\n\n> å·ä½åæ³å°±æ¯å¨ç¬¬ä¸é¶æ®µçåºç¡ä¸ï¼éè¿å°æ¯ä¸ªæ¨¡åãåè£¹ãä¸ºä¸ä¸ªå¨å±å¯¹è±¡çå½¢å¼å®ç°ï¼\n> \n> æç¹ç±»ä¼¼äºä¸ºæ¨¡ååçæåæ·»å äºãå½åç©ºé´ãçæè§ã\n> \n> éè¿ãå½åç©ºé´ãåå°äºå½åå²çªçå¯è½ï¼\n> \n> ä½æ¯åæ ·æ²¡æç§æç©ºé´ï¼æææ¨¡åæåä¹å¯ä»¥å¨æ¨¡åå¤é¨è¢«è®¿é®æèä¿®æ¹ï¼\n> \n> èä¸ä¹æ æ³ç®¡çæ¨¡åä¹é´çä¾èµå³ç³»ã\n\n 3. iifeï¼ç«å³æ§è¡å½æ°ï¼å®ç°äºç§ææå\n\n> å·ä½åæ³å°±æ¯å°æ¯ä¸ªæ¨¡åæåé½æ¾å¨ä¸ä¸ªå½æ°æä¾çç§æä½ç¨åä¸­ï¼\n> \n> å¯¹äºéè¦æ´é²ç»å¤é¨çæåï¼éè¿æå¨å°å¨å±å¯¹è±¡ä¸çæ¹å¼å®ç°\n> \n> æäºç§ææåçæ¦å¿µï¼ç§ææååªè½å¨æ¨¡åæååéè¿é­åçå½¢å¼è®¿é®ã\n\n// module a ç¸å³ç¶ææ°æ®ååè½å½æ°ï¼iife\n\n;(function () {\n  var name = 'module-a'\n  \n  function method1 () {\n    console.log(name + '#method1')\n  }\n  \n  function method2 () {\n    console.log(name + '#method2')\n  }\n\n  window.modulea = {\n    method1: method1,\n    method2: method2\n  }\n})()\n\n\n\n 4. commonjsè§èï¼nodeç¯å¢ï¼\n\n * ä¸ä¸ªæä»¶å°±æ¯ä¸ä¸ªæ¨¡å\n * æ¯ä¸ªæ¨¡åé½æåç¬çä½ç¨å\n * éè¿module.exportså¯¼åºæå\n * éè¿requireå½æ°è½½å¥æ¨¡å\n\n> æµè§å¨ç«¯ä¸è½ä½¿ç¨ï¼å ä¸ºcommonjsæ¯ä»¥åæ­¥æ¨¡å¼å è½½æ¨¡åï¼æ¯ä¸æ¬¡é¡µé¢å è½½é½ä¼æå¤§éæ¨¡åè¯·æ±\n\n 5. amdï¼asynchronous module definition ï¼å¼æ­¥æ¨¡åå®ä¹ï¼\n\n> åæ¶ææ¨åºäºrequire.jsï¼å®ç°äºamdè§è\n> \n> ç®åç»å¤§æ°ç¬¬ä¸æ¹åºé½æ¯æamdè§è\n> \n> ä½æ¯amdä½¿ç¨èµ·æ¥æ¯è¾å¤æï¼æ¨¡åjsæä»¶è¯·æ±é¢ç¹\n\n 6. sea.js + cmd ï¼common module definition\n\n> ç±»ä¼¼äºcommonjsçè¯­æ³\n\n\n# es modules\n\n * commonjs in node.jsï¼ç®ånode8ä»¥ä¸ä¹æ¯æes modulesï¼\n * es modules in browsersï¼es6ï¼\n\n\n# es modules åºæ¬ç¹æ§\n\n * èªå¨éç¨ä¸¥æ ¼æ¨¡å¼ï¼å¿½ç¥ 'use strict'\n * æ¯ä¸ª es module é½æ¯è¿è¡å¨åç¬çç§æä½ç¨åä¸­\n * esm æ¯éè¿ cors çæ¹å¼è¯·æ±å¤é¨ js æ¨¡åç\n * esm ç script æ ç­¾ä¼å»¶è¿æ§è¡èæ¬\n\n  \x3c!-- éè¿ç» script æ·»å  type = module çå±æ§ï¼å°±å¯ä»¥ä»¥ es module çæ åæ§è¡å¶ä¸­ç js ä»£ç äº --\x3e\n  <script type=\"module\">\n    console.log('this is es module')\n  <\/script>\n\n  \x3c!-- 1. esm èªå¨éç¨ä¸¥æ ¼æ¨¡å¼ï¼å¿½ç¥ 'use strict' --\x3e\n  <script type=\"module\">\n    console.log(this) // undefined\n  <\/script>\n\n  \x3c!-- 2. æ¯ä¸ª es module é½æ¯è¿è¡å¨åç¬çç§æä½ç¨åä¸­ --\x3e\n  <script type=\"module\">\n    var foo = 100\n    console.log(foo)\n  <\/script>\n  <script type=\"module\">\n    console.log(foo)\n  <\/script>\n\n  \x3c!-- 3. esm æ¯éè¿ cors çæ¹å¼è¯·æ±å¤é¨ js æ¨¡åçï¼éè¦æå¡å¨ç«¯çè·¨åæ¯æï¼æ®éscriptä¸å­å¨è·¨å --\x3e\n  <script type=\"module\" src=\"https://unpkg.com/jquery@3.4.1/dist/jquery.min.js\"><\/script> \n\n  \x3c!-- 4. esm ç script æ ç­¾ä¼å»¶è¿æ§è¡èæ¬,æ­¤å¤ä¼åæ§è¡pæ ç­¾ --\x3e\n  <script defer src=\"demo.js\"><\/script>\n  <p>éè¦æ¾ç¤ºçåå®¹</p> \n\n\n\n# es modules çå¯¼å¥å¯¼åº\n\n// app.js\nimport { default as fooname, foohello, person } from './module.js'\n\nimport height23 from './module.js' // æ¥æ¶default\n\nconsole.log(fooname, foohello, person)\n\n// modeule.js\nvar name = 'foo module'\n\nvar height = 180\n\nfunction hello () {\n  console.log('hello')\n}\n\nclass person {}\n\nexport { name as default, hello as foohello, person }\n\nexport default height\n\n// index.html\n<script type=\"module\" src=\"app.js\"><\/script>\n\n\n\n# å ç¹æ³¨æäºé¡¹\n\nimport { name } from './module.js' // ä¸è½çç¥.js\nimport { lowercase } from './utils/index.js' // ä¸è½çç¥index.jsï¼å¦åæ¾ä¸å°\nimport { name } from './module.js' // ä¸è½çç¥./ï¼å¦åè®¤ä¸ºå è½½ç¬¬ä¸æ¹æ¨¡å\nimport './module.js' // å è½½è¿ä¸ªæ¨¡åä½æ¯ä¸æå\nimport * as mod from './module.js' // æåæææ¾å¥modå¯¹è±¡ä¸­\n\n// ä¸é¢è¿ä¸¤ç§æ¹å¼ä¸æ­£ç¡®ï¼ä¸è½å¨ææ¡ä»¶å¯¼å¥\nvar modulepath = './module.js'\nimport { name } from modulepath\nconsole.log(name)\n\n if (true) {\n   import { name } from './module.js'\n }\n\n// é£æä¹å¨æå¯¼å¥å¢\n import('./module.js').then(function (module) {\n   console.log(module)\n })\n\n// æåé»è®¤æååæ­£å¸¸æå\nimport abc, { name, age } from './module.js'\nconsole.log(name, age, abc)\n\n// ç´æ¥å¯¼åºå¯¼å¥æå\n\n// button.js\nvar button = 'button component'\nexport default button\n\n// avatar.js\nexport var avatar = 'avatar component'\n\n// index.js\nexport { default as button } from './button.js'\nexport { avatar } from './avatar.js'\n\n// ç¬¬ä¸æ¹æ¨¡åé½æ¯å¯¼åºé»è®¤æå\nimport _ from 'lodash'\nimport { camelcase } from 'lodash' // ä¸æ­£ç¡®\n\n\n\n# polyfill\n\nieæµè§å¨ä¸å¼å®¹es modules\n\npolyfill æ¯ä¸åä»£ç ï¼éå¸¸æ¯ web ä¸ç javascriptï¼ï¼ç¨æ¥ä¸ºæ§æµè§å¨æä¾å®æ²¡æåçæ¯æçè¾æ°çåè½ã\n\n> ä¾å¦ï¼queryselectorallæ¯å¾å¤ç°ä»£æµè§å¨é½æ¯æçåçweb apiï¼ä½æ¯æäºå¤èçæµè§å¨å¹¶ä¸æ¯æï¼é£ä¹åè®¾æäººåäºåºï¼åªè¦ç¨äºè¿ä¸ªåºï¼ ä½ å°±å¯ä»¥å¨å¤èçæµè§å¨éé¢ä½¿ç¨document.queryselectorallï¼ä½¿ç¨æ¹æ³è·ç°ä»£æµè§å¨åçapiæ å¼ãé£ä¹è¿ä¸ªåºå°±å¯ä»¥ç§°ä¸ºpolyfillæèpolyfillerã\n> \n> jqueryæ¯ä¸æ¯ä¸ä¸ªpolyfill?ç­æ¡æ¯noãå ä¸ºå®å¹¶ä¸æ¯å®ç°ä¸äºæ åçåçapiï¼èæ¯å°è£äºèªå·±apiãä¸ä¸ªpolyfillæ¯æ¹å¹³æ°èæµè§å¨ æ ååçapi ä¹é´çå·®è·çä¸ç§å°è£ï¼èä¸æ¯å®ç°èªå·±çapiã\n> \n> ææ§çæµè§å¨æ³è±¡æä¸ºä¸é¢æäºè£ç¼çå¢.è¿äº[polyfills]ä¼å¸®å©æä»¬æè¿é¢å¢çè£ç¼æ¹å¹³,è¿æä»¬ä¸ä¸ªæ´å¥½çåæ»çå¢å£(æµè§å¨)\n\n\n# es moduleä¸commonjsäº¤äº\n\nå¨nodeåçç¯å¢ä¸­\n\n * es modulesä¸­å¯ä»¥å¯¼å¥commonjsæ¨¡å\n * commonjsä¸­å¯ä»¥å¯¼å¥es modulesæ¨¡å\n * commonjså§ç»åªä¼å¯¼åºä¸ä¸ªé»è®¤æå\n * æ³¨æimportä¸æ¯è§£æå¯¹è±¡\n\nes-module.mjs æä»¶åè¦æ¹æ.mjs\n\n// es module ä¸­å¯ä»¥å¯¼å¥ commonjs æ¨¡å\n\nimport mod from './commonjs.js'\nconsole.log(mod)\n\n// ä¸è½ç´æ¥æåæåï¼æ³¨æ import ä¸æ¯è§£æå¯¼åºå¯¹è±¡\n\nimport { foo } from './commonjs.js'\nconsole.log(foo)\n\nexport const foo = 'es module export value'\n\n\ncommonjs.js\n\n// commonjs æ¨¡åå§ç»åªä¼å¯¼åºä¸ä¸ªé»è®¤æå\n\nmodule.exports = {\n  foo: 'commonjs exports value'\n}\n\nexports.foo = 'commonjs exports value'\n\n// ä¸è½å¨ commonjs æ¨¡åä¸­éè¿ require è½½å¥ es module\n\nconst mod = require('./es-module.mjs')\nconsole.log(mod)\n\n\n> æ è®ºæ¯requireæèimportï¼ç®åä»ç¶éè¦éè¿babelæètraceurä¹ç±»çè½¬ä¹å·¥å·å°ä¹è½¬ä¹ä¸ºes5è¯­æ³ï¼æè½å¨æµè§å¨éè¿è¡ã\n\n\n# importä¸­ç@\n\n> è¿æ¯webpackçè·¯å¾å«åï¼ç¸å³ä»£ç å®ä¹å¨éç½®æä»¶webpack.base.configéï¼\n\n\tresolve: {\n    extensions: ['.js', '.vue', '.json'],\n    alias: {\n      'vue$': 'vue/dist/vue.esm.js',\n      '@': resolve('src'),\n      'lib': resolve('src/lib'),\n      'style': resolve('src/style'),\n      'com': resolve('src/components'),\n      'serv': resolve('src/service'),\n      'api': resolve('src/api'),\n      'store': resolve('src/store')\n    }\n  },\n\n\n\n# å ä¸ªå®éçä¾å­\n\næå¤©å¨çä»£ç æ¶åç°ç±»ä¼¼ä¸é¢çåæ³ï¼\n\n// a.ts\nexport default 123;\n\n\n// b.ts\nlet b = require('./a').default;\n\n\nå¯¹æ­¤ææå°å¾çæï¼å¨æçè®°å¿ä¸­ï¼æ¨¡ååæ éå°±æ¯ä¸¤ç§ï¼\n\n * es modules ï¼ä½¿ç¨ importãexport / export default è¯­æ³\n * commonjsï¼ä½¿ç¨ requireãmodule.exports / exports è¯­æ³\n\né£ä¹ä»£ç ä¸­ç require('./a').default ä¸­ç .default æ¯ä»ä¹ææå¢ï¼å°å¶ç¼è¯æ js æä»¶åæ¥çï¼\n\n// a.js\n\"use strict\";\nexports.__esmodule = true;\nexports[\"default\"] = 123;\n\n// b.js\nvar b = require('./a')[\"default\"];\n\n\n> åæ¥æ¯ç»è¿ ts ç¼è¯åï¼es6 ç export default é½ä¼è¢«è½¬æ¢æ exports.defaultï¼å³ commonjs è§è\n> \n> è½¬æ¢çé»è¾éå¸¸ç®åï¼å³å°è¾åºèµå¼ç» exportsï¼å¹¶å¸¦ä¸ä¸ä¸ªæ å¿ __esmodule è¡¨æè¿æ¯ä¸ªç± es6 è½¬æ¢æ¥ç commonjs è¾åºã\n\nå¦ææ²¡æå ä¸ .default ï¼åä¼å¾å°æ´ä¸ªå¯¹è±¡ï¼\n\n// a.ts\nexport default 123;\n\n// b.ts\nlet b = require('./a');\n\nconsole.log(b) // { __esmodule: true, default: 123 }\n\n\n> æ»ç»ï¼esm è¯­æ³ç»è¿ ts æè babel è½¬æ¢åä¼åä¸º commonjs è¯­æ³ï¼æä»¥è¿ä¹è§£éäºä¸ºä»ä¹ä¸¤ä¸ªæä»¶æ¢å¯ä»¥ç¨ esm è¯­æ³ï¼ä¹å¯ä»¥ç¨ commonjs è¯­æ³ï¼å ä¸ºæåé½ä¼è½¬æ¢ä¸º commonjs è¯­æ³ã\n\nåèé¾æ¥ï¼https://juejin.cn/post/6844903520865386510#heading-3\n\n\n# .mjs ä¸ .cjs\n\nä» node.js v13.2 çæ¬å¼å§ï¼node.js å·²ç»é»è®¤æå¼äº es6 æ¨¡åæ¯æã\n\nnode.js è¦æ± es6 æ¨¡åéç¨.mjsåç¼æä»¶åãä¹å°±æ¯è¯´ï¼åªè¦èæ¬æä»¶éé¢ä½¿ç¨importæèexportå½ä»¤ï¼é£ä¹å°±å¿é¡»éç¨.mjsåç¼åãnode.js éå°.mjsæä»¶ï¼å°±è®¤ä¸ºå®æ¯ es6 æ¨¡åï¼é»è®¤å¯ç¨ä¸¥æ ¼æ¨¡å¼ï¼ä¸å¿å¨æ¯ä¸ªæ¨¡åæä»¶é¡¶é¨æå®\"use strict\"ã\n\nå¦æä¸å¸æå°åç¼åæ¹æ.mjsï¼å¯ä»¥å¨é¡¹ç®çpackage.jsonæä»¶ä¸­ï¼æå®typeå­æ®µä¸ºmoduleã\n\n{\n   \"type\": \"module\"\n}\n\n\nä¸æ¦è®¾ç½®äºä»¥åï¼è¯¥é¡¹ç®ç js èæ¬ï¼å°±è¢«è§£éæ es6 æ¨¡åã\n\nå¦æè¿æ¶è¿è¦ä½¿ç¨ commonjs æ¨¡åï¼é£ä¹éè¦å° commonjs èæ¬çåç¼åé½æ¹æ.cjsãå¦ææ²¡ætypeå­æ®µï¼æètypeå­æ®µä¸ºcommonjsï¼å.jsèæ¬ä¼è¢«è§£éæ commonjs æ¨¡åã\n\næ»ç»ä¸ºä¸å¥è¯ï¼.mjsæä»¶æ»æ¯ä»¥ es6 æ¨¡åå è½½ï¼.cjsæä»¶æ»æ¯ä»¥ commonjs æ¨¡åå è½½ï¼.jsæä»¶çå è½½åå³äºpackage.jsonéé¢typeå­æ®µçè®¾ç½®ã\n\n\n# es modules ä¸ common js å·®å¼\n\n * commonjs æ¨¡åè¾åºçæ¯ä¸ä¸ªå¼çæ·è´ï¼es6 æ¨¡åè¾åºçæ¯å¼çå¼ç¨ã\n * commonjs æ¨¡åæ¯è¿è¡æ¶å è½½ï¼es6 æ¨¡åæ¯ç¼è¯æ¶è¾åºæ¥å£ã\n * commonjs æ¨¡åçrequire()æ¯åæ­¥å è½½æ¨¡åï¼es6 æ¨¡åçimportå½ä»¤æ¯å¼æ­¥å è½½ï¼æä¸ä¸ªç¬ç«çæ¨¡åä¾èµçè§£æé¶æ®µã",charsets:{cjk:!0}},{title:"webpack æ¨¡åå",frontmatter:{},regularPath:"/module/webpack.html",relativePath:"module/webpack.md",key:"v-7df093d7",path:"/module/webpack.html",headers:[{level:2,title:"commonjs",slug:"commonjs",normalizedTitle:"commonjs",charIndex:87},{level:3,title:"webpack_require",slug:"webpack-require",normalizedTitle:"webpack_require",charIndex:316},{level:2,title:"ES Module",slug:"es-module",normalizedTitle:"es module",charIndex:2365},{level:3,title:"webpackrequire_.r",slug:"webpack-require-r",normalizedTitle:"webpackrequire_.r",charIndex:null},{level:3,title:"webpackrequire_.d",slug:"webpack-require-d",normalizedTitle:"webpackrequire_.d",charIndex:null},{level:3,title:"webpackrequire_.o",slug:"webpack-require-o",normalizedTitle:"webpackrequire_.o",charIndex:null},{level:2,title:"CommonJS å ES Module æ··ç¨",slug:"commonjs-å-es-module-æ··ç¨",normalizedTitle:"commonjs å es module æ··ç¨",charIndex:4861},{level:3,title:"webpackrequire_.n",slug:"webpack-require-n",normalizedTitle:"webpackrequire_.n",charIndex:null}],lastUpdated:"2/11/2022, 12:03:11 PM",lastUpdatedTimestamp:1644552191e3,headersStr:"commonjs webpack_require ES Module webpackrequire_.r webpackrequire_.d webpackrequire_.o CommonJS å ES Module æ··ç¨ webpackrequire_.n",content:'# webpack æ¨¡åå\n\nwebpackå¹¶ä¸å¼ºå¶ä½ ä½¿ç¨æç§æ¨¡ååæ¹æ¡ï¼ä½ å¯ä»¥éæéæ©ä½ åæ¬¢çæ¨¡ååæ¹æ¡ï¼webpack éè¿å¼å®¹æææ¨¡ååæ¹æ¡è®©ä½ æ çæ¥å¥é¡¹ç®ã\n\n\n# commonjs\n\n// index.js\nconst a = require(\'./a\')\nconsole.log(a)\n\n// a.js\nconst a = \'a\';\nmodule.exports = a;\n\n\nWebpack æååï¼\n\n(function(modules) {\n\t// The module cache\n\tvar installedModules = {};\n\t// The require function\n\tfunction __webpack_require__(moduleId) {\n\t\t// Check if module is in cache\n\t\tif(installedModules[moduleId]) {\n\t\t\treturn installedModules[moduleId].exports;\n\t\t}\n\t\t// Create a new module (and put it into the cache)\n\t\tvar module = installedModules[moduleId] = {\n\t\t\ti: moduleId,\n\t\t\tl: false,\n\t\t\texports: {}\n\t\t};\n\t\t// Execute the module function\n\t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\t\t// Flag the module as loaded\n\t\tmodule.l = true;\n\t\t// Return the exports of the module\n\t\treturn module.exports;\n\t}\n\n\t// Load entry module and return exports\n\treturn __webpack_require__(__webpack_require__.s = "./src/index.js");\n})\n/************************************************************************/\n({\n\n "./src/a.js":\n  (function(module, __webpack_exports__, __webpack_require__) {\n    const a = \'a\';\n    module.exports = a;\n  }),\n\n  "./src/index.js":\n  (function(module, __webpack_exports__, __webpack_require__) {\n    const a = __webpack_require__("./src/a.js")\n    console.log(a)\n  })\n});\n\n\nå¶ç»æç®åå¦ä¸ï¼æ´ä¸ªæåçæçä»£ç æ¯ä¸ä¸ªIIFE(ç«å³æ§è¡å½æ°)ï¼å ä¸ºæµè§å¨æ¬èº«ä¸æ¯ææ¨¡ååï¼é£ä¹webpackå°±ç¨å½æ°ä½ç¨åæ¥hackæ¨¡ååçææï¼\n\n(function(modules) {\n    // Runtime\n})([\n    // åä¸ªæ¨¡å\n])\n\n\n\n# webpack_require\n\n * __webpack_require__å½æ°å¯ä»¥ç±»æ¯CommonJSçrequireï¼é½æ¯å è½½æ¨¡åä»£ç ãå NodeJS çè®¾è®¡å¾ç±»ä¼¼ï¼é½æ¯åä»ç¼å­åç¨ï¼å¦åå è½½æ¨¡åå¹¶æ¾å¥ç¼å­ã\n * __webpack_require__æå¨çé­åè½è®¿é®å¤å±åémodulesåç¼å­installedModulesãè¿ä¸ªå¾å³é®ï¼å ä¸ºmodulesæ¯webpackæååç«å³æ§è¡å½æ°ä¼ å¥çåæ°ãmodulesæ¯ä¸ä¸ªobjectï¼keyæ¯stringç±»åï¼valueæ¯functionç±»åã\n\n// 1ãæ¨¡åç¼å­å¯¹è±¡\nvar installedModules = {};\n// 2ãwebpackå®ç°çrequire\nfunction __webpack_require__(moduleId) {\n    // 3ãå¤æ­æ¯å¦å·²ç¼å­æ¨¡å\n    if(installedModules[moduleId]) {\n        return installedModules[moduleId].exports;\n    }\n    // 4ãç¼å­æ¨¡å\n    var module = installedModules[moduleId] = {\n        i: moduleId,\n        l: false,\n        exports: {}\n    };\n    // 5ãè°ç¨æ¨¡åå½æ°\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    // 6ãæ è®°æ¨¡åä¸ºå·²å è½½\n    module.l = true;\n    // 7ãè¿åmodule.exports\n    return module.exports;\n}\n// 8ãrequireç¬¬ä¸ä¸ªæ¨¡å\nreturn __webpack_require__(__webpack_require__.s = "./src/index.js");\n\n\n\n# ES Module\n\n// index.js\nimport a, { test } from \'./a\'\nimport b from \'./b\'\nconsole.log(a);\ntest();\nconsole.log(b)\n\n// a.js\nconst a = \'a\';\nfunction test() { }\nexport default a;\nexport { test }\n\n// b.js\nconst b = \'b\';\nexport default b;\n\n\nWebpack æååï¼\n\n{\n    "./src/a.js": (function (module, __webpack_exports__, __webpack_require__) {\n\n        "use strict";\n        __webpack_require__.r(__webpack_exports__);\n        /* harmony export (binding) */\n        __webpack_require__.d(__webpack_exports__, "test", function () { return test; });\n\n        const a = \'a\';\n\n        function test() { }\n\n        /* harmony default export */\n        __webpack_exports__["default"] = (a);\n    }),\n    "./src/b.js": (function (module, __webpack_exports__, __webpack_require__) {\n\n        "use strict";\n        __webpack_require__.r(__webpack_exports__);\n        const b = \'b\';\n\n        /* harmony default export */\n        __webpack_exports__["default"] = (b);\n\n    }),\n    "./src/index.js": (function (module, __webpack_exports__, __webpack_require__) {\n\n        "use strict";\n        __webpack_require__.r(__webpack_exports__);\n        /* harmony import */\n        var _a__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./src/a.js");\n        /* harmony import */\n        var _b__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/b.js");\n\n        console.log(_a__WEBPACK_IMPORTED_MODULE_0__["default"])\n\n        Object(_a__WEBPACK_IMPORTED_MODULE_0__["test"])();\n\n        console.log(_b__WEBPACK_IMPORTED_MODULE_1__["default"])\n    })\n}\n\n\nesæ¨¡ååï¼exports å¯¹è±¡é¦åå°±ä¼è¢«__webpack_require__.ræ è®°ä¸ºes moduleï¼å¯¹äºé»è®¤å¯¼åºå°±æ¯ exports ç default å±æ§ï¼å¯¹äºå·åå¯¼åºä½¿ç¨ __webpack_require__.d åè£äºä¸ä¸ï¼ç®çæ¯è®©è¿äºå·åå¯¼åºå¨æ¨¡åä¹å¤åªè½è¯»ä¸è½è¢«ä¿®æ¹ï¼è¿æ¯es moduleçç¹ç¹ï¼ã\n\n\n# webpack_require__.r\n\nè¯¥å½æ°ç¨äºæ è¯ es æ¨¡åçå¯¼åº\n\n// define __esModule on exports\n__webpack_require__.r = function (exports) {\n    if (typeof Symbol !== \'undefined\' && Symbol.toStringTag) {\n        Object.defineProperty(exports, Symbol.toStringTag, { value: \'Module\' });\n    }\n    Object.defineProperty(exports, \'__esModule\', { value: true });\n};\n\n\n\n# webpack_require__.d\n\nç¨äºå¤çesæ¨¡åçå·åå¯¼åº\n\n// define getter function for harmony exports\n__webpack_require__.d = function (exports, name, getter) {\n    if (!__webpack_require__.o(exports, name)) {\n        Object.defineProperty(exports, name, { enumerable: true, get: getter });\n    }\n};\n\n\n\n# webpack_require__.o\n\nå°±æ¯ hasOwnPreperty\n\n__webpack_require__.o = \n    function (object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n\n\n# CommonJS å ES Module æ··ç¨\n\n\n# webpack_require__.n\n\n__webpack_require__.næ¯ç¨æ¥å¤ç commonjs ä¸ esm æ··ç¨çé®é¢ï¼å¦ï¼\n\n// m.js\nexports.foo = function () {\n    return 1;\n}\n\n// index.js\nimport m from \'./m\';\nm.foo();\n\n\næåä¹åï¼åªæªåIIFEçåæ°é¨åï¼ï¼\n\n[\n  /* 0 */\n  (function(module, __webpack_exports__, __webpack_require__) {\n\n      "use strict";\n      Object.defineProperty(__webpack_exports__, "__esModule", { value: true });\n      /* harmony import */ \n      var __WEBPACK_IMPORTED_MODULE_0__m__ = __webpack_require__(1);\n      /* harmony import */ \n      var __WEBPACK_IMPORTED_MODULE_0__m___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__m__);\n\n      __WEBPACK_IMPORTED_MODULE_0__m___default.a.foo();\n\n  }),\n  /* 1 */\n  (function(module, exports, __webpack_require__) {\n      "use strict";\n      exports.foo = function () {\n          return 1;\n      }\n  })\n]\n\n\nçä¸ä¸__webpack_require__.nçå®ä¹ï¼\n\n// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n    var getter = module && module.__esModule ?\n        function getDefault() { return module[\'default\']; } :\n        function getModuleExports() { return module; };\n    __webpack_require__.d(getter, \'a\', getter);\n    return getter;\n};\n\n\n__webpack_require__.nä¼å¤æ­moduleæ¯å¦ä¸ºesæ¨¡åï¼å½__esModuleä¸ºtrueçæ¶åï¼æ è¯moduleä¸ºesæ¨¡åï¼é£ä¹module.aé»è®¤è¿åmodule.defaultï¼å¦åè¿åmoduleã',normalizedContent:'# webpack æ¨¡åå\n\nwebpackå¹¶ä¸å¼ºå¶ä½ ä½¿ç¨æç§æ¨¡ååæ¹æ¡ï¼ä½ å¯ä»¥éæéæ©ä½ åæ¬¢çæ¨¡ååæ¹æ¡ï¼webpack éè¿å¼å®¹æææ¨¡ååæ¹æ¡è®©ä½ æ çæ¥å¥é¡¹ç®ã\n\n\n# commonjs\n\n// index.js\nconst a = require(\'./a\')\nconsole.log(a)\n\n// a.js\nconst a = \'a\';\nmodule.exports = a;\n\n\nwebpack æååï¼\n\n(function(modules) {\n\t// the module cache\n\tvar installedmodules = {};\n\t// the require function\n\tfunction __webpack_require__(moduleid) {\n\t\t// check if module is in cache\n\t\tif(installedmodules[moduleid]) {\n\t\t\treturn installedmodules[moduleid].exports;\n\t\t}\n\t\t// create a new module (and put it into the cache)\n\t\tvar module = installedmodules[moduleid] = {\n\t\t\ti: moduleid,\n\t\t\tl: false,\n\t\t\texports: {}\n\t\t};\n\t\t// execute the module function\n\t\tmodules[moduleid].call(module.exports, module, module.exports, __webpack_require__);\n\t\t// flag the module as loaded\n\t\tmodule.l = true;\n\t\t// return the exports of the module\n\t\treturn module.exports;\n\t}\n\n\t// load entry module and return exports\n\treturn __webpack_require__(__webpack_require__.s = "./src/index.js");\n})\n/************************************************************************/\n({\n\n "./src/a.js":\n  (function(module, __webpack_exports__, __webpack_require__) {\n    const a = \'a\';\n    module.exports = a;\n  }),\n\n  "./src/index.js":\n  (function(module, __webpack_exports__, __webpack_require__) {\n    const a = __webpack_require__("./src/a.js")\n    console.log(a)\n  })\n});\n\n\nå¶ç»æç®åå¦ä¸ï¼æ´ä¸ªæåçæçä»£ç æ¯ä¸ä¸ªiife(ç«å³æ§è¡å½æ°)ï¼å ä¸ºæµè§å¨æ¬èº«ä¸æ¯ææ¨¡ååï¼é£ä¹webpackå°±ç¨å½æ°ä½ç¨åæ¥hackæ¨¡ååçææï¼\n\n(function(modules) {\n    // runtime\n})([\n    // åä¸ªæ¨¡å\n])\n\n\n\n# webpack_require\n\n * __webpack_require__å½æ°å¯ä»¥ç±»æ¯commonjsçrequireï¼é½æ¯å è½½æ¨¡åä»£ç ãå nodejs çè®¾è®¡å¾ç±»ä¼¼ï¼é½æ¯åä»ç¼å­åç¨ï¼å¦åå è½½æ¨¡åå¹¶æ¾å¥ç¼å­ã\n * __webpack_require__æå¨çé­åè½è®¿é®å¤å±åémodulesåç¼å­installedmodulesãè¿ä¸ªå¾å³é®ï¼å ä¸ºmodulesæ¯webpackæååç«å³æ§è¡å½æ°ä¼ å¥çåæ°ãmodulesæ¯ä¸ä¸ªobjectï¼keyæ¯stringç±»åï¼valueæ¯functionç±»åã\n\n// 1ãæ¨¡åç¼å­å¯¹è±¡\nvar installedmodules = {};\n// 2ãwebpackå®ç°çrequire\nfunction __webpack_require__(moduleid) {\n    // 3ãå¤æ­æ¯å¦å·²ç¼å­æ¨¡å\n    if(installedmodules[moduleid]) {\n        return installedmodules[moduleid].exports;\n    }\n    // 4ãç¼å­æ¨¡å\n    var module = installedmodules[moduleid] = {\n        i: moduleid,\n        l: false,\n        exports: {}\n    };\n    // 5ãè°ç¨æ¨¡åå½æ°\n    modules[moduleid].call(module.exports, module, module.exports, __webpack_require__);\n    // 6ãæ è®°æ¨¡åä¸ºå·²å è½½\n    module.l = true;\n    // 7ãè¿åmodule.exports\n    return module.exports;\n}\n// 8ãrequireç¬¬ä¸ä¸ªæ¨¡å\nreturn __webpack_require__(__webpack_require__.s = "./src/index.js");\n\n\n\n# es module\n\n// index.js\nimport a, { test } from \'./a\'\nimport b from \'./b\'\nconsole.log(a);\ntest();\nconsole.log(b)\n\n// a.js\nconst a = \'a\';\nfunction test() { }\nexport default a;\nexport { test }\n\n// b.js\nconst b = \'b\';\nexport default b;\n\n\nwebpack æååï¼\n\n{\n    "./src/a.js": (function (module, __webpack_exports__, __webpack_require__) {\n\n        "use strict";\n        __webpack_require__.r(__webpack_exports__);\n        /* harmony export (binding) */\n        __webpack_require__.d(__webpack_exports__, "test", function () { return test; });\n\n        const a = \'a\';\n\n        function test() { }\n\n        /* harmony default export */\n        __webpack_exports__["default"] = (a);\n    }),\n    "./src/b.js": (function (module, __webpack_exports__, __webpack_require__) {\n\n        "use strict";\n        __webpack_require__.r(__webpack_exports__);\n        const b = \'b\';\n\n        /* harmony default export */\n        __webpack_exports__["default"] = (b);\n\n    }),\n    "./src/index.js": (function (module, __webpack_exports__, __webpack_require__) {\n\n        "use strict";\n        __webpack_require__.r(__webpack_exports__);\n        /* harmony import */\n        var _a__webpack_imported_module_0__ = __webpack_require__("./src/a.js");\n        /* harmony import */\n        var _b__webpack_imported_module_1__ = __webpack_require__("./src/b.js");\n\n        console.log(_a__webpack_imported_module_0__["default"])\n\n        object(_a__webpack_imported_module_0__["test"])();\n\n        console.log(_b__webpack_imported_module_1__["default"])\n    })\n}\n\n\nesæ¨¡ååï¼exports å¯¹è±¡é¦åå°±ä¼è¢«__webpack_require__.ræ è®°ä¸ºes moduleï¼å¯¹äºé»è®¤å¯¼åºå°±æ¯ exports ç default å±æ§ï¼å¯¹äºå·åå¯¼åºä½¿ç¨ __webpack_require__.d åè£äºä¸ä¸ï¼ç®çæ¯è®©è¿äºå·åå¯¼åºå¨æ¨¡åä¹å¤åªè½è¯»ä¸è½è¢«ä¿®æ¹ï¼è¿æ¯es moduleçç¹ç¹ï¼ã\n\n\n# webpack_require__.r\n\nè¯¥å½æ°ç¨äºæ è¯ es æ¨¡åçå¯¼åº\n\n// define __esmodule on exports\n__webpack_require__.r = function (exports) {\n    if (typeof symbol !== \'undefined\' && symbol.tostringtag) {\n        object.defineproperty(exports, symbol.tostringtag, { value: \'module\' });\n    }\n    object.defineproperty(exports, \'__esmodule\', { value: true });\n};\n\n\n\n# webpack_require__.d\n\nç¨äºå¤çesæ¨¡åçå·åå¯¼åº\n\n// define getter function for harmony exports\n__webpack_require__.d = function (exports, name, getter) {\n    if (!__webpack_require__.o(exports, name)) {\n        object.defineproperty(exports, name, { enumerable: true, get: getter });\n    }\n};\n\n\n\n# webpack_require__.o\n\nå°±æ¯ hasownpreperty\n\n__webpack_require__.o = \n    function (object, property) { return object.prototype.hasownproperty.call(object, property); };\n\n\n\n# commonjs å es module æ··ç¨\n\n\n# webpack_require__.n\n\n__webpack_require__.næ¯ç¨æ¥å¤ç commonjs ä¸ esm æ··ç¨çé®é¢ï¼å¦ï¼\n\n// m.js\nexports.foo = function () {\n    return 1;\n}\n\n// index.js\nimport m from \'./m\';\nm.foo();\n\n\næåä¹åï¼åªæªåiifeçåæ°é¨åï¼ï¼\n\n[\n  /* 0 */\n  (function(module, __webpack_exports__, __webpack_require__) {\n\n      "use strict";\n      object.defineproperty(__webpack_exports__, "__esmodule", { value: true });\n      /* harmony import */ \n      var __webpack_imported_module_0__m__ = __webpack_require__(1);\n      /* harmony import */ \n      var __webpack_imported_module_0__m___default = __webpack_require__.n(__webpack_imported_module_0__m__);\n\n      __webpack_imported_module_0__m___default.a.foo();\n\n  }),\n  /* 1 */\n  (function(module, exports, __webpack_require__) {\n      "use strict";\n      exports.foo = function () {\n          return 1;\n      }\n  })\n]\n\n\nçä¸ä¸__webpack_require__.nçå®ä¹ï¼\n\n// getdefaultexport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n    var getter = module && module.__esmodule ?\n        function getdefault() { return module[\'default\']; } :\n        function getmoduleexports() { return module; };\n    __webpack_require__.d(getter, \'a\', getter);\n    return getter;\n};\n\n\n__webpack_require__.nä¼å¤æ­moduleæ¯å¦ä¸ºesæ¨¡åï¼å½__esmoduleä¸ºtrueçæ¶åï¼æ è¯moduleä¸ºesæ¨¡åï¼é£ä¹module.aé»è®¤è¿åmodule.defaultï¼å¦åè¿åmoduleã',charsets:{cjk:!0}},{title:"å¾®åç«¯",frontmatter:{},regularPath:"/micro/micro.html",relativePath:"micro/micro.md",key:"v-e6f13c42",path:"/micro/micro.html",headers:[{level:2,title:"ä¸ãæ ¸å¿ä¼ç¹",slug:"ä¸ãæ ¸å¿ä¼ç¹",normalizedTitle:"ä¸ãæ ¸å¿ä¼ç¹",charIndex:121},{level:3,title:"1. ææ¯æ è§£è¦ï¼ç¬ç«å¼åä¸é¨ç½²",slug:"_1-ææ¯æ è§£è¦-ç¬ç«å¼åä¸é¨ç½²",normalizedTitle:"1. ææ¯æ è§£è¦ï¼ç¬ç«å¼åä¸é¨ç½²",charIndex:132},{level:3,title:"2. è§æ¨¡åå¢éçåä½æçæå",slug:"_2-è§æ¨¡åå¢éçåä½æçæå",normalizedTitle:"2. è§æ¨¡åå¢éçåä½æçæå",charIndex:357},{level:3,title:"3. æééç¦»ä¸å¼¹æ§æ¢å¤",slug:"_3-æééç¦»ä¸å¼¹æ§æ¢å¤",normalizedTitle:"3. æééç¦»ä¸å¼¹æ§æ¢å¤",charIndex:533},{level:3,title:"4. æéå è½½ä¸æ§è½ä¼å",slug:"_4-æéå è½½ä¸æ§è½ä¼å",normalizedTitle:"4. æéå è½½ä¸æ§è½ä¼å",charIndex:686},{level:3,title:"5. æ¯æå¤ç«¯å¤ç¨ä¸æ··åæ¸²æ",slug:"_5-æ¯æå¤ç«¯å¤ç¨ä¸æ··åæ¸²æ",normalizedTitle:"5. æ¯æå¤ç«¯å¤ç¨ä¸æ··åæ¸²æ",charIndex:857},{level:2,title:"äºãæ ¸å¿ç¼ºç¹",slug:"äºãæ ¸å¿ç¼ºç¹",normalizedTitle:"äºãæ ¸å¿ç¼ºç¹",charIndex:1054},{level:3,title:"1. éæå¤æåº¦é«ï¼è¿ç»´ææ¬å¢å ",slug:"_1-éæå¤æåº¦é«-è¿ç»´ææ¬å¢å ",normalizedTitle:"1. éæå¤æåº¦é«ï¼è¿ç»´ææ¬å¢å ",charIndex:1065},{level:3,title:"2. æ§è½å¼éä¸éå¤æ¸²æ",slug:"_2-æ§è½å¼éä¸éå¤æ¸²æ",normalizedTitle:"2. æ§è½å¼éä¸éå¤æ¸²æ",charIndex:1281},{level:3,title:"3. æµè¯ä¸è°è¯é¾åº¦ä¸å",slug:"_3-æµè¯ä¸è°è¯é¾åº¦ä¸å",normalizedTitle:"3. æµè¯ä¸è°è¯é¾åº¦ä¸å",charIndex:1478},{level:3,title:"4. çæ¬å¼å®¹æ§ä¸ä¾èµå²çª",slug:"_4-çæ¬å¼å®¹æ§ä¸ä¾èµå²çª",normalizedTitle:"4. çæ¬å¼å®¹æ§ä¸ä¾èµå²çª",charIndex:1619},{level:3,title:"5. SEOä¸é¦å±ä½éªææ",slug:"_5-seoä¸é¦å±ä½éªææ",normalizedTitle:"5. seoä¸é¦å±ä½éªææ",charIndex:1811},{level:2,title:"ä¸ãéç¨åºæ¯ä¸ä¸éç¨åºæ¯",slug:"ä¸ãéç¨åºæ¯ä¸ä¸éç¨åºæ¯",normalizedTitle:"ä¸ãéç¨åºæ¯ä¸ä¸éç¨åºæ¯",charIndex:1971},{level:3,title:"éåå¾®åç«¯çåºæ¯",slug:"éåå¾®åç«¯çåºæ¯",normalizedTitle:"éåå¾®åç«¯çåºæ¯",charIndex:1988},{level:3,title:"ä¸éåå¾®åç«¯çåºæ¯",slug:"ä¸éåå¾®åç«¯çåºæ¯",normalizedTitle:"ä¸éåå¾®åç«¯çåºæ¯",charIndex:2147},{level:2,title:"åãä¸»æµå®ç°æ¹æ¡å¯¹æ¯",slug:"åãä¸»æµå®ç°æ¹æ¡å¯¹æ¯",normalizedTitle:"åãä¸»æµå®ç°æ¹æ¡å¯¹æ¯",charIndex:2260},{level:2,title:"äºãæ»ç»ä¸å»ºè®®",slug:"äºãæ»ç»ä¸å»ºè®®",normalizedTitle:"äºãæ»ç»ä¸å»ºè®®",charIndex:2616}],lastUpdated:"8/4/2025, 3:49:09 PM",lastUpdatedTimestamp:1754293749e3,headersStr:"ä¸ãæ ¸å¿ä¼ç¹ 1. ææ¯æ è§£è¦ï¼ç¬ç«å¼åä¸é¨ç½² 2. è§æ¨¡åå¢éçåä½æçæå 3. æééç¦»ä¸å¼¹æ§æ¢å¤ 4. æéå è½½ä¸æ§è½ä¼å 5. æ¯æå¤ç«¯å¤ç¨ä¸æ··åæ¸²æ äºãæ ¸å¿ç¼ºç¹ 1. éæå¤æåº¦é«ï¼è¿ç»´ææ¬å¢å  2. æ§è½å¼éä¸éå¤æ¸²æ 3. æµè¯ä¸è°è¯é¾åº¦ä¸å 4. çæ¬å¼å®¹æ§ä¸ä¾èµå²çª 5. SEOä¸é¦å±ä½éªææ ä¸ãéç¨åºæ¯ä¸ä¸éç¨åºæ¯ éåå¾®åç«¯çåºæ¯ ä¸éåå¾®åç«¯çåºæ¯ åãä¸»æµå®ç°æ¹æ¡å¯¹æ¯ äºãæ»ç»ä¸å»ºè®®",content:"# å¾®åç«¯\n\nå¾®åç«¯ï¼Micro Frontendsï¼æ¯ä¸ç§å°åç«¯åºç¨æåä¸ºå¤ä¸ªç¬ç«å­åºç¨ï¼ææ¨¡åï¼çæ¶ææ¨¡å¼ï¼æ¯ä¸ªå­åºç¨å¯ä»¥ç¬ç«å¼åãé¨ç½²åè¿è¡ï¼æç»éè¿ä¸»åºç¨ï¼æå®¹å¨ï¼æ´åä¸ºä¸ä¸ªå®æ´ç³»ç»ãä»¥ä¸æ¯å¶æ ¸å¿ä¼ç¼ºç¹åéç¨åºæ¯çè¯¦ç»åæï¼\n\n\n# ä¸ãæ ¸å¿ä¼ç¹\n\n\n# 1. ææ¯æ è§£è¦ï¼ç¬ç«å¼åä¸é¨ç½²\n\n * åºæ¯ï¼å¢éAä½¿ç¨Reactï¼å¢éBä½¿ç¨Vueï¼å¢éCä½¿ç¨Angularã\n * ä¼å¿\n   * åå¢éå¯èªä¸»éæ©ææ¯æ ï¼æ éå¼ºå¶ç»ä¸ã\n   * å­åºç¨ç¬ç«å¼åãæµè¯ãé¨ç½²ï¼äºä¸å½±åï¼å¦ä¿®æ¹ä¸ä¸ªæé®ä¸å½±åå¶ä»æ¨¡åï¼ã\n   * é¨ç½²é¢çå·®å¼å¤§çåºæ¯ï¼å¦è¥éé¡µé¢éé¢ç¹æ´æ°ï¼åå°ç®¡çç¨³å®ï¼å¯å¹¶è¡è¿­ä»£ã\n * æ¡ä¾ï¼Airbnbå°ä¸åä¸å¡ï¼å¦ç§æ¿ãä½éªãæ¯ä»ï¼æåä¸ºç¬ç«å­åºç¨ï¼åå¢éèªä¸»ç®¡ççå½å¨æã\n\n\n# 2. è§æ¨¡åå¢éçåä½æçæå\n\n * åºæ¯ï¼å¤§åä¼ä¸ï¼å¦é¶è¡ãçµåå¹³å°ï¼ææ°åä¸ªåç«¯å¢éã\n * ä¼å¿\n   * é¿åâååºç¨è¿èâå¯¼è´çä»£ç å²çªãæå»ºç¼æ¢ãæµè¯å¤æç­é®é¢ã\n   * æç¡®å­åºç¨è¾¹çï¼åå°è·¨å¢éæ²éææ¬ï¼å¦âè®¢åæ¨¡åâç±è®¢åå¢éå¨æè´è´£ï¼ã\n   * æ¯ææ¸è¿å¼éæï¼å¦å°èæ§JQueryé¡µé¢éæ­¥è¿ç§»ä¸ºReactå­åºç¨ï¼ã\n\n\n# 3. æééç¦»ä¸å¼¹æ§æ¢å¤\n\n * åºæ¯ï¼æä¸ªå­åºç¨å´©æºï¼å¦æ¯ä»æ¨¡ååå­æ³æ¼ï¼ã\n * ä¼å¿\n   * éè¯¯ä¸ä¼æ©æ£å°å¶ä»å­åºç¨ï¼éè¿æ²ç®±éç¦»æç¬ç«è¿ç¨ï¼ã\n   * ä¸»åºç¨å¯çæ§å­åºç¨ç¶æï¼èªå¨éçº§æéè¯ï¼å¦æ¾ç¤ºâæ¯ä»æå¡ææ¶ä¸å¯ç¨âï¼ã\n * å¯¹æ¯ï¼åä½åºç¨ä¸­ä¸ä¸ªç»ä»¶å´©æºå¯è½å¯¼è´æ´ä¸ªé¡µé¢ç½å±ã\n\n\n# 4. æéå è½½ä¸æ§è½ä¼å\n\n * åºæ¯ï¼ç¨æ·ä»è®¿é®âåååè¡¨âé¡µé¢ï¼æ éå è½½âè®¢åç®¡çâä»£ç ã\n * ä¼å¿\n   * å­åºç¨å¯å¨æå è½½ï¼å¦éè¿è·¯ç±æç¨æ·æéè§¦åï¼ï¼åå°é¦å±ä½ç§¯ã\n   * ç»åä»£ç æåï¼Code Splittingï¼åé¢å è½½ï¼Prefetchï¼ï¼ä¼åæ§è½ã\n * æ°æ®ï¼æçµåéç¨å¾®åç«¯åï¼é¦å±å è½½æ¶é´åå°40%ã\n\n\n# 5. æ¯æå¤ç«¯å¤ç¨ä¸æ··åæ¸²æ\n\n * åºæ¯ï¼åä¸å­åºç¨éå¨Webãç§»å¨ç«¯H5ãå°ç¨åºä¸­å¤ç¨ã\n * ä¼å¿\n   * å­åºç¨å¯å°è£ä¸ºç¬ç«ç»ä»¶ï¼éè¿ééå±ééä¸åå¹³å°ï¼å¦Reactå­åºç¨éè¿Taroééå°ç¨åºï¼ã\n   * æ¯ææå¡ç«¯æ¸²æï¼SSRï¼ä¸å®¢æ·ç«¯æ¸²æï¼CSRï¼æ··åï¼å¦é¦å±SSRï¼äº¤äºCSRï¼ã\n\n----------------------------------------\n\n\n# äºãæ ¸å¿ç¼ºç¹\n\n\n# 1. éæå¤æåº¦é«ï¼è¿ç»´ææ¬å¢å \n\n * é®é¢\n   * éä¿¡æºå¶ï¼å­åºç¨é´ééè¿äºä»¶æ»çº¿ãç¶æç®¡çï¼å¦Reduxï¼æURLåæ°éä¿¡ï¼æå¼åæ··ä¹±ã\n   * æ ·å¼éç¦»ï¼å¨å±CSSå¯è½å²çªï¼éä½¿ç¨CSS ModulesãShadow DOMæå½åç©ºé´ï¼ã\n   * å¬å±ä¾èµï¼React/Vueç­åºå¯è½éå¤å è½½ï¼ééè¿externalsæCDNå±äº«ï¼ã\n * æ¡ä¾ï¼æå¢éå æªéç¦»æ ·å¼ï¼å¯¼è´å­åºç¨Açæé®æ ·å¼è¦çäºå­åºç¨Bã\n\n\n# 2. æ§è½å¼éä¸éå¤æ¸²æ\n\n * é®é¢\n   * æ²ç®±éç¦»ï¼è¥ä½¿ç¨iframeæProxyå®ç°æ²ç®±ï¼å¯è½å¢å åå­å ç¨åéä¿¡å»¶è¿ã\n   * éå¤æ¸²æï¼ä¸»åºç¨åå­åºç¨å¯è½åæ¶æä½DOMï¼å¦è·¯ç±åæ¢æ¶éåè°çå½å¨æï¼ã\n * ä¼åæ¹æ¡\n   * ä½¿ç¨ReactçPortalæVueçTeleportåå°DOMå±çº§ã\n   * éè¿React.lazyæå¨æimport()å®ç°æéå è½½ã\n\n\n# 3. æµè¯ä¸è°è¯é¾åº¦ä¸å\n\n * é®é¢\n   * ç«¯å°ç«¯æµè¯ï¼éæ¨¡æå­åºç¨å è½½é¡ºåºåç¶æï¼å¦Aå­åºç¨æªå è½½æ¶Bå­åºç¨ä¸å¯ç¨ï¼ã\n   * éè¯¯è¿½è¸ªï¼è·¨å­åºç¨çéè¯¯å¯è½è¢«éèï¼éç»ä¸æ¥å¿æ¶éåçæ§ï¼ã\n * å·¥å·ï¼ä½¿ç¨SentryãPlaywrightç­å·¥å·å®ç°è·¨åºç¨çæ§ã\n\n\n# 4. çæ¬å¼å®¹æ§ä¸ä¾èµå²çª\n\n * é®é¢\n   * å­åºç¨Aä¾èµReact 16ï¼å­åºç¨Bä¾èµReact 18ï¼å¯è½å¯¼è´è¿è¡æ¶éè¯¯ã\n   * å¬å±åºï¼å¦Lodashï¼çæ¬ä¸ä¸è´å¯è½å¼åè¡ä¸ºå·®å¼ã\n * è§£å³æ¹æ¡\n   * å¼ºå¶ç»ä¸å¬å±ä¾èµçæ¬ï¼éè¿peerDependenciesæMonorepoç®¡çï¼ã\n   * ä½¿ç¨externalså°å¬å±åºæç®¡å°CDNæå¨å±åéã\n\n\n# 5. SEOä¸é¦å±ä½éªææ\n\n * é®é¢ï¼\n   * å¨æå è½½å­åºç¨å¯è½å¯¼è´æç´¢å¼æç¬è«æ æ³æåå®æ´åå®¹ã\n   * é¦å±éç­å¾ææå­åºç¨å è½½å®æï¼è¥æªä¼åï¼ã\n * ä¼åæ¹æ¡ï¼\n   * æå¡ç«¯æ¸²æï¼SSRï¼ä¸»åºç¨æ¡æ¶ï¼å®¢æ·ç«¯å¨ææ¿æ´»å­åºç¨ã\n   * ä½¿ç¨é¢æ¸²æï¼Prerenderï¼çæéæHTMLå¿«ç§ã\n\n\n# ä¸ãéç¨åºæ¯ä¸ä¸éç¨åºæ¯\n\n\n# éåå¾®åç«¯çåºæ¯\n\n 1. å¤§åä¼ä¸åºç¨ï¼å¢éè§æ¨¡å¤§ãä¸å¡å¤æåº¦é«ï¼å¦é¶è¡ãçµåå¹³å°ï¼ã\n 2. éçç³»ç»éæï¼ééæ­¥è¿ç§»èæ§ä»£ç ï¼å¦ä»JQueryè¿ç§»å°Reactï¼ã\n 3. å¤ææ¯æ å±å­ï¼å¢éææ¯åå¥½å·®å¼å¤§ï¼å¦React vs Vueï¼ã\n 4. ç¬ç«é¨ç½²éæ±ï¼å­åºç¨éç¬ç«åå¸ï¼å¦è¥éæ´»å¨éå¿«éè¿­ä»£ï¼ã\n\n\n# ä¸éåå¾®åç«¯çåºæ¯\n\n 1. å°åå¢éæç®ååºç¨ï¼æ²éææ¬å¯è½è¶è¿æ¶ææ¶çã\n 2. å¼ºä¸è´æ§éæ±ï¼å¦éè¦åå­åæ´æ°ï¼æææ¨¡åå¿é¡»åæ¶åå¸ï¼ã\n 3. æ§è½ææååºç¨ï¼å¦å®æ¶äº¤æç³»ç»ï¼å¾®åç«¯çéä¿¡å»¶è¿å¯è½å½±åä½éªï¼ã\n\n\n# åãä¸»æµå®ç°æ¹æ¡å¯¹æ¯\n\næ¹æ¡               ä»£è¡¨å·¥å·        ä¼ç¹               ç¼ºç¹\nè·¯ç±åå             åé¡µåºç¨+è·¯ç±éç½®   ç®åæå®ç°ï¼æ éå¤ææ¡æ¶     éæåº¦ä½ï¼å­åºç¨å¼ºè¦åä¸»åºç¨\niframe           æµè§å¨åç       å¤©ç¶éç¦»ï¼ææ¯æ æ å³       æ§è½å·®ï¼éä¿¡å°é¾\nWeb Components   åçAPI       æ åå¼å®¹ï¼æ ·å¼éç¦»å¥½       çæå¼±ï¼éééç°ä»£æ¡æ¶\næ¨¡åèé¦             Webpack 5   ä»£ç å±äº«ï¼å¨æå è½½        éç½®å¤æï¼ä¾èµWebpack 5+\nSingle-SPA       ç¤¾åºæ¹æ¡        æ¡æ¶æ å³ï¼æ¯æå¤ç§å­åºç¨ç±»å   å­¦ä¹ æ²çº¿é¡å³­\n\n\n# äºãæ»ç»ä¸å»ºè®®\n\n * ä¼åéæ©ï¼è¥å¢éè§æ¨¡å¤§ãä¸å¡å¤æåº¦é«ï¼ä¸è½æ¥åä¸å®éæææ¬ï¼å¾®åç«¯è½æ¾èæååä½æçåå¯ç»´æ¤æ§ã\n * è°¨æéæ©ï¼å°åå¢éæç®ååºç¨å»ºè®®éç¨åä½æ¶æï¼é¿åè¿åº¦è®¾è®¡ã\n * å³é®å®è·µ\n   1. æç¡®å­åºç¨è¾¹çï¼å¦æä¸å¡åååï¼ã\n   2. ç»ä¸éä¿¡åè®®ï¼å¦åå¸-è®¢éæ¨¡å¼ï¼ã\n   3. ä½¿ç¨Monorepoç®¡çå¬å±ä¾èµåå·¥å·åºã\n   4. ç»åCI/CDå®ç°èªå¨åæµè¯åé¨ç½²ã\n\nå¾®åç«¯ä¸æ¯âé¶å¼¹âï¼ä½åçä½¿ç¨å¯è§£å³å¤§ååç«¯é¡¹ç®çåä½åæ©å±é¾é¢ã",normalizedContent:"# å¾®åç«¯\n\nå¾®åç«¯ï¼micro frontendsï¼æ¯ä¸ç§å°åç«¯åºç¨æåä¸ºå¤ä¸ªç¬ç«å­åºç¨ï¼ææ¨¡åï¼çæ¶ææ¨¡å¼ï¼æ¯ä¸ªå­åºç¨å¯ä»¥ç¬ç«å¼åãé¨ç½²åè¿è¡ï¼æç»éè¿ä¸»åºç¨ï¼æå®¹å¨ï¼æ´åä¸ºä¸ä¸ªå®æ´ç³»ç»ãä»¥ä¸æ¯å¶æ ¸å¿ä¼ç¼ºç¹åéç¨åºæ¯çè¯¦ç»åæï¼\n\n\n# ä¸ãæ ¸å¿ä¼ç¹\n\n\n# 1. ææ¯æ è§£è¦ï¼ç¬ç«å¼åä¸é¨ç½²\n\n * åºæ¯ï¼å¢éaä½¿ç¨reactï¼å¢ébä½¿ç¨vueï¼å¢écä½¿ç¨angularã\n * ä¼å¿\n   * åå¢éå¯èªä¸»éæ©ææ¯æ ï¼æ éå¼ºå¶ç»ä¸ã\n   * å­åºç¨ç¬ç«å¼åãæµè¯ãé¨ç½²ï¼äºä¸å½±åï¼å¦ä¿®æ¹ä¸ä¸ªæé®ä¸å½±åå¶ä»æ¨¡åï¼ã\n   * é¨ç½²é¢çå·®å¼å¤§çåºæ¯ï¼å¦è¥éé¡µé¢éé¢ç¹æ´æ°ï¼åå°ç®¡çç¨³å®ï¼å¯å¹¶è¡è¿­ä»£ã\n * æ¡ä¾ï¼airbnbå°ä¸åä¸å¡ï¼å¦ç§æ¿ãä½éªãæ¯ä»ï¼æåä¸ºç¬ç«å­åºç¨ï¼åå¢éèªä¸»ç®¡ççå½å¨æã\n\n\n# 2. è§æ¨¡åå¢éçåä½æçæå\n\n * åºæ¯ï¼å¤§åä¼ä¸ï¼å¦é¶è¡ãçµåå¹³å°ï¼ææ°åä¸ªåç«¯å¢éã\n * ä¼å¿\n   * é¿åâååºç¨è¿èâå¯¼è´çä»£ç å²çªãæå»ºç¼æ¢ãæµè¯å¤æç­é®é¢ã\n   * æç¡®å­åºç¨è¾¹çï¼åå°è·¨å¢éæ²éææ¬ï¼å¦âè®¢åæ¨¡åâç±è®¢åå¢éå¨æè´è´£ï¼ã\n   * æ¯ææ¸è¿å¼éæï¼å¦å°èæ§jqueryé¡µé¢éæ­¥è¿ç§»ä¸ºreactå­åºç¨ï¼ã\n\n\n# 3. æééç¦»ä¸å¼¹æ§æ¢å¤\n\n * åºæ¯ï¼æä¸ªå­åºç¨å´©æºï¼å¦æ¯ä»æ¨¡ååå­æ³æ¼ï¼ã\n * ä¼å¿\n   * éè¯¯ä¸ä¼æ©æ£å°å¶ä»å­åºç¨ï¼éè¿æ²ç®±éç¦»æç¬ç«è¿ç¨ï¼ã\n   * ä¸»åºç¨å¯çæ§å­åºç¨ç¶æï¼èªå¨éçº§æéè¯ï¼å¦æ¾ç¤ºâæ¯ä»æå¡ææ¶ä¸å¯ç¨âï¼ã\n * å¯¹æ¯ï¼åä½åºç¨ä¸­ä¸ä¸ªç»ä»¶å´©æºå¯è½å¯¼è´æ´ä¸ªé¡µé¢ç½å±ã\n\n\n# 4. æéå è½½ä¸æ§è½ä¼å\n\n * åºæ¯ï¼ç¨æ·ä»è®¿é®âåååè¡¨âé¡µé¢ï¼æ éå è½½âè®¢åç®¡çâä»£ç ã\n * ä¼å¿\n   * å­åºç¨å¯å¨æå è½½ï¼å¦éè¿è·¯ç±æç¨æ·æéè§¦åï¼ï¼åå°é¦å±ä½ç§¯ã\n   * ç»åä»£ç æåï¼code splittingï¼åé¢å è½½ï¼prefetchï¼ï¼ä¼åæ§è½ã\n * æ°æ®ï¼æçµåéç¨å¾®åç«¯åï¼é¦å±å è½½æ¶é´åå°40%ã\n\n\n# 5. æ¯æå¤ç«¯å¤ç¨ä¸æ··åæ¸²æ\n\n * åºæ¯ï¼åä¸å­åºç¨éå¨webãç§»å¨ç«¯h5ãå°ç¨åºä¸­å¤ç¨ã\n * ä¼å¿\n   * å­åºç¨å¯å°è£ä¸ºç¬ç«ç»ä»¶ï¼éè¿ééå±ééä¸åå¹³å°ï¼å¦reactå­åºç¨éè¿taroééå°ç¨åºï¼ã\n   * æ¯ææå¡ç«¯æ¸²æï¼ssrï¼ä¸å®¢æ·ç«¯æ¸²æï¼csrï¼æ··åï¼å¦é¦å±ssrï¼äº¤äºcsrï¼ã\n\n----------------------------------------\n\n\n# äºãæ ¸å¿ç¼ºç¹\n\n\n# 1. éæå¤æåº¦é«ï¼è¿ç»´ææ¬å¢å \n\n * é®é¢\n   * éä¿¡æºå¶ï¼å­åºç¨é´ééè¿äºä»¶æ»çº¿ãç¶æç®¡çï¼å¦reduxï¼æurlåæ°éä¿¡ï¼æå¼åæ··ä¹±ã\n   * æ ·å¼éç¦»ï¼å¨å±csså¯è½å²çªï¼éä½¿ç¨css modulesãshadow domæå½åç©ºé´ï¼ã\n   * å¬å±ä¾èµï¼react/vueç­åºå¯è½éå¤å è½½ï¼ééè¿externalsæcdnå±äº«ï¼ã\n * æ¡ä¾ï¼æå¢éå æªéç¦»æ ·å¼ï¼å¯¼è´å­åºç¨açæé®æ ·å¼è¦çäºå­åºç¨bã\n\n\n# 2. æ§è½å¼éä¸éå¤æ¸²æ\n\n * é®é¢\n   * æ²ç®±éç¦»ï¼è¥ä½¿ç¨iframeæproxyå®ç°æ²ç®±ï¼å¯è½å¢å åå­å ç¨åéä¿¡å»¶è¿ã\n   * éå¤æ¸²æï¼ä¸»åºç¨åå­åºç¨å¯è½åæ¶æä½domï¼å¦è·¯ç±åæ¢æ¶éåè°çå½å¨æï¼ã\n * ä¼åæ¹æ¡\n   * ä½¿ç¨reactçportalævueçteleportåå°domå±çº§ã\n   * éè¿react.lazyæå¨æimport()å®ç°æéå è½½ã\n\n\n# 3. æµè¯ä¸è°è¯é¾åº¦ä¸å\n\n * é®é¢\n   * ç«¯å°ç«¯æµè¯ï¼éæ¨¡æå­åºç¨å è½½é¡ºåºåç¶æï¼å¦aå­åºç¨æªå è½½æ¶bå­åºç¨ä¸å¯ç¨ï¼ã\n   * éè¯¯è¿½è¸ªï¼è·¨å­åºç¨çéè¯¯å¯è½è¢«éèï¼éç»ä¸æ¥å¿æ¶éåçæ§ï¼ã\n * å·¥å·ï¼ä½¿ç¨sentryãplaywrightç­å·¥å·å®ç°è·¨åºç¨çæ§ã\n\n\n# 4. çæ¬å¼å®¹æ§ä¸ä¾èµå²çª\n\n * é®é¢\n   * å­åºç¨aä¾èµreact 16ï¼å­åºç¨bä¾èµreact 18ï¼å¯è½å¯¼è´è¿è¡æ¶éè¯¯ã\n   * å¬å±åºï¼å¦lodashï¼çæ¬ä¸ä¸è´å¯è½å¼åè¡ä¸ºå·®å¼ã\n * è§£å³æ¹æ¡\n   * å¼ºå¶ç»ä¸å¬å±ä¾èµçæ¬ï¼éè¿peerdependenciesæmonorepoç®¡çï¼ã\n   * ä½¿ç¨externalså°å¬å±åºæç®¡å°cdnæå¨å±åéã\n\n\n# 5. seoä¸é¦å±ä½éªææ\n\n * é®é¢ï¼\n   * å¨æå è½½å­åºç¨å¯è½å¯¼è´æç´¢å¼æç¬è«æ æ³æåå®æ´åå®¹ã\n   * é¦å±éç­å¾ææå­åºç¨å è½½å®æï¼è¥æªä¼åï¼ã\n * ä¼åæ¹æ¡ï¼\n   * æå¡ç«¯æ¸²æï¼ssrï¼ä¸»åºç¨æ¡æ¶ï¼å®¢æ·ç«¯å¨ææ¿æ´»å­åºç¨ã\n   * ä½¿ç¨é¢æ¸²æï¼prerenderï¼çæéæhtmlå¿«ç§ã\n\n\n# ä¸ãéç¨åºæ¯ä¸ä¸éç¨åºæ¯\n\n\n# éåå¾®åç«¯çåºæ¯\n\n 1. å¤§åä¼ä¸åºç¨ï¼å¢éè§æ¨¡å¤§ãä¸å¡å¤æåº¦é«ï¼å¦é¶è¡ãçµåå¹³å°ï¼ã\n 2. éçç³»ç»éæï¼ééæ­¥è¿ç§»èæ§ä»£ç ï¼å¦ä»jqueryè¿ç§»å°reactï¼ã\n 3. å¤ææ¯æ å±å­ï¼å¢éææ¯åå¥½å·®å¼å¤§ï¼å¦react vs vueï¼ã\n 4. ç¬ç«é¨ç½²éæ±ï¼å­åºç¨éç¬ç«åå¸ï¼å¦è¥éæ´»å¨éå¿«éè¿­ä»£ï¼ã\n\n\n# ä¸éåå¾®åç«¯çåºæ¯\n\n 1. å°åå¢éæç®ååºç¨ï¼æ²éææ¬å¯è½è¶è¿æ¶ææ¶çã\n 2. å¼ºä¸è´æ§éæ±ï¼å¦éè¦åå­åæ´æ°ï¼æææ¨¡åå¿é¡»åæ¶åå¸ï¼ã\n 3. æ§è½ææååºç¨ï¼å¦å®æ¶äº¤æç³»ç»ï¼å¾®åç«¯çéä¿¡å»¶è¿å¯è½å½±åä½éªï¼ã\n\n\n# åãä¸»æµå®ç°æ¹æ¡å¯¹æ¯\n\næ¹æ¡               ä»£è¡¨å·¥å·        ä¼ç¹               ç¼ºç¹\nè·¯ç±åå             åé¡µåºç¨+è·¯ç±éç½®   ç®åæå®ç°ï¼æ éå¤ææ¡æ¶     éæåº¦ä½ï¼å­åºç¨å¼ºè¦åä¸»åºç¨\niframe           æµè§å¨åç       å¤©ç¶éç¦»ï¼ææ¯æ æ å³       æ§è½å·®ï¼éä¿¡å°é¾\nweb components   åçapi       æ åå¼å®¹ï¼æ ·å¼éç¦»å¥½       çæå¼±ï¼éééç°ä»£æ¡æ¶\næ¨¡åèé¦             webpack 5   ä»£ç å±äº«ï¼å¨æå è½½        éç½®å¤æï¼ä¾èµwebpack 5+\nsingle-spa       ç¤¾åºæ¹æ¡        æ¡æ¶æ å³ï¼æ¯æå¤ç§å­åºç¨ç±»å   å­¦ä¹ æ²çº¿é¡å³­\n\n\n# äºãæ»ç»ä¸å»ºè®®\n\n * ä¼åéæ©ï¼è¥å¢éè§æ¨¡å¤§ãä¸å¡å¤æåº¦é«ï¼ä¸è½æ¥åä¸å®éæææ¬ï¼å¾®åç«¯è½æ¾èæååä½æçåå¯ç»´æ¤æ§ã\n * è°¨æéæ©ï¼å°åå¢éæç®ååºç¨å»ºè®®éç¨åä½æ¶æï¼é¿åè¿åº¦è®¾è®¡ã\n * å³é®å®è·µ\n   1. æç¡®å­åºç¨è¾¹çï¼å¦æä¸å¡åååï¼ã\n   2. ç»ä¸éä¿¡åè®®ï¼å¦åå¸-è®¢éæ¨¡å¼ï¼ã\n   3. ä½¿ç¨monorepoç®¡çå¬å±ä¾èµåå·¥å·åºã\n   4. ç»åci/cdå®ç°èªå¨åæµè¯åé¨ç½²ã\n\nå¾®åç«¯ä¸æ¯âé¶å¼¹âï¼ä½åçä½¿ç¨å¯è§£å³å¤§ååç«¯é¡¹ç®çåä½åæ©å±é¾é¢ã",charsets:{cjk:!0}},{title:"express",frontmatter:{},regularPath:"/node/express.html",relativePath:"node/express.md",key:"v-2fabc2e5",path:"/node/express.html",headers:[{level:2,title:"ä¸­é´ä»¶",slug:"ä¸­é´ä»¶",normalizedTitle:"ä¸­é´ä»¶",charIndex:477},{level:3,title:"åºç¨ç¨åºçº§å«ä¸­é´ä»¶",slug:"åºç¨ç¨åºçº§å«ä¸­é´ä»¶",normalizedTitle:"åºç¨ç¨åºçº§å«ä¸­é´ä»¶",charIndex:869},{level:3,title:"è·¯ç±çº§å«ä¸­é´ä»¶",slug:"è·¯ç±çº§å«ä¸­é´ä»¶",normalizedTitle:"è·¯ç±çº§å«ä¸­é´ä»¶",charIndex:1265}],lastUpdated:"3/29/2022, 12:21:20 PM",lastUpdatedTimestamp:164852768e4,headersStr:"ä¸­é´ä»¶ åºç¨ç¨åºçº§å«ä¸­é´ä»¶ è·¯ç±çº§å«ä¸­é´ä»¶",content:"# express\n\nExpress æ¯ä¸ç§ä¿ææä½ç¨åº¦è§æ¨¡ççµæ´» Node.js Web åºç¨ç¨åºæ¡æ¶ï¼ä¸º Web åç§»å¨åºç¨ç¨åºæä¾ä¸ç»å¼ºå¤§çåè½ã\n\nconst express = require('express')\nconst app = express()\nconst port = 3000\n\napp.get('/', (req, res) => {\n  res.send('Hello World!')\n})\n\napp.listen(port, () => {\n  console.log(`Example app listening on port ${port}`)\n})\n\n\nåºç¨ç¨åºä¼å¯å¨æå¡å¨ï¼å¹¶å¨ç«¯å£ 3000 ä¸ä¾¦å¬è¿æ¥ãæ­¤åºç¨ç¨åºä»¥âHello World!âååºéå¯¹æ ¹ URL (/) æè·¯ç±çè¯·æ±ãå¯¹äºå¶ä»ææè·¯å¾ï¼å®å°ä»¥ 404 Not Found è¿è¡ååºã\n\nä½¿ç¨ä»¥ä¸å½ä»¤è¿è¡åºç¨ç¨åºï¼\n\n$ node app.js\n\n\nç¶åï¼å¨æµè§å¨ä¸­è¾å¥ http://localhost:3000/ ä»¥æ¥çè¾åºã\n\n\n# ä¸­é´ä»¶\n\nä¸­é´ä»¶å°±æ¯ä¸ä¸ªè¯·æ±å¤çæ¹æ³ï¼ç¨å¶æç¨æ·ä»è¯·æ±å°ååºçæ´ä¸ªè¿ç¨ååå°å¤ä¸ªä¸­é´ä»¶å»å¤çï¼è¿æ ·åçç®çæ¯æé«ä»£ç ççµæ´»æ§ï¼å¨æå¯æ©å±çãç®åççè§£å°±æ¯ï¼å°æ¶å°çè¯·æ±è¿è¡éå±è¿æ»¤ã\n\nvar express = require('express');\nvar app = express();\n\n// ä¸­é´ä»¶å½æ° myLogger\nvar myLogger = function (req, res, next) {\n  console.log('LOGGED');\n  next();\n};\n\napp.use(myLogger);\n\napp.get('/', function (req, res) {\n  res.send('Hello World!');\n});\n\napp.listen(3000);\n\n\nåºç¨ç¨åºæ¯æ¬¡æ¶å°è¯·æ±æ¶ï¼ä¼å¨ç»ç«¯ä¸æ¾ç¤ºæ¶æ¯âLOGGEDâã\n\n\n# åºç¨ç¨åºçº§å«ä¸­é´ä»¶\n\n 1. å¨å¹éï¼ä¸å³å¿ä»»ä½è¯·æ±è·¯å¾åè¯·æ±æ¹æ³ï¼å½ç¨æ·è¯·æ±çæ¶åå¦æååå°è¯¥ä¸­é´ä»¶åç´æ¥è¿è¡å¤çè¯·æ±æä½ï¼\n\napp.use(function(req, res, next) {\n  console.log('å¨å¹é');\n  next();\n})\n\n\nå½è¯·æ±ç»è¿è¿ä¸ªä¸­é´ä»¶çæ¶åï¼ä¸å³å¿è¯·æ±è·¯å¾åæ¹æ³ï¼ç´æ¥è¿å¥è¯¥ä¸­é´ä»¶è¿è¡å¤çãå¶ä¸­nextæ¯ä¸ä¸ªæ¹æ³ï¼ç¨äºè°ç¨ä¸ä¸ä¸ªç¬¦åæ¡ä»¶çä¸­é´ä»¶ãå¦æä¸ånextï¼åä¼å¨å½åä¸­é´ä»¶åçä¸æ¥ï¼ä¸ä¼åå»å¹éå¶ä»ä¸­é´ä»¶ã\n\n 2. è·¯å¾ä»¥/xx/å¼å¤´çå¹éï¼æ¨¡ç³å¹éï¼\n\napp.use('/a', function(req, res, next) {\n  console.log('/a');\n  next();\n})\n\n\nåªæä»¥/a/å¼å¤´çè·¯å¾æå¯ä»¥å¹éæåå¹¶å¤çï¼æ¯å¦ï¼/a/bæ¯å¯ä»¥å¹éæåçï¼ä½æ¯/ab/bä¸è½å¹éæå\n\n\n# è·¯ç±çº§å«ä¸­é´ä»¶\n\nå¿é¡»ä¸è¯·æ±è·¯å¾åè¯·æ±æ¹æ³ä¸è´æå¹éæåï¼ç²¾ç¡®å¹éï¼\n\napp.get('/a', function(req, res, next) {\n  console.log('/a');\n  next();\n})\n",normalizedContent:"# express\n\nexpress æ¯ä¸ç§ä¿ææä½ç¨åº¦è§æ¨¡ççµæ´» node.js web åºç¨ç¨åºæ¡æ¶ï¼ä¸º web åç§»å¨åºç¨ç¨åºæä¾ä¸ç»å¼ºå¤§çåè½ã\n\nconst express = require('express')\nconst app = express()\nconst port = 3000\n\napp.get('/', (req, res) => {\n  res.send('hello world!')\n})\n\napp.listen(port, () => {\n  console.log(`example app listening on port ${port}`)\n})\n\n\nåºç¨ç¨åºä¼å¯å¨æå¡å¨ï¼å¹¶å¨ç«¯å£ 3000 ä¸ä¾¦å¬è¿æ¥ãæ­¤åºç¨ç¨åºä»¥âhello world!âååºéå¯¹æ ¹ url (/) æè·¯ç±çè¯·æ±ãå¯¹äºå¶ä»ææè·¯å¾ï¼å®å°ä»¥ 404 not found è¿è¡ååºã\n\nä½¿ç¨ä»¥ä¸å½ä»¤è¿è¡åºç¨ç¨åºï¼\n\n$ node app.js\n\n\nç¶åï¼å¨æµè§å¨ä¸­è¾å¥ http://localhost:3000/ ä»¥æ¥çè¾åºã\n\n\n# ä¸­é´ä»¶\n\nä¸­é´ä»¶å°±æ¯ä¸ä¸ªè¯·æ±å¤çæ¹æ³ï¼ç¨å¶æç¨æ·ä»è¯·æ±å°ååºçæ´ä¸ªè¿ç¨ååå°å¤ä¸ªä¸­é´ä»¶å»å¤çï¼è¿æ ·åçç®çæ¯æé«ä»£ç ççµæ´»æ§ï¼å¨æå¯æ©å±çãç®åççè§£å°±æ¯ï¼å°æ¶å°çè¯·æ±è¿è¡éå±è¿æ»¤ã\n\nvar express = require('express');\nvar app = express();\n\n// ä¸­é´ä»¶å½æ° mylogger\nvar mylogger = function (req, res, next) {\n  console.log('logged');\n  next();\n};\n\napp.use(mylogger);\n\napp.get('/', function (req, res) {\n  res.send('hello world!');\n});\n\napp.listen(3000);\n\n\nåºç¨ç¨åºæ¯æ¬¡æ¶å°è¯·æ±æ¶ï¼ä¼å¨ç»ç«¯ä¸æ¾ç¤ºæ¶æ¯âloggedâã\n\n\n# åºç¨ç¨åºçº§å«ä¸­é´ä»¶\n\n 1. å¨å¹éï¼ä¸å³å¿ä»»ä½è¯·æ±è·¯å¾åè¯·æ±æ¹æ³ï¼å½ç¨æ·è¯·æ±çæ¶åå¦æååå°è¯¥ä¸­é´ä»¶åç´æ¥è¿è¡å¤çè¯·æ±æä½ï¼\n\napp.use(function(req, res, next) {\n  console.log('å¨å¹é');\n  next();\n})\n\n\nå½è¯·æ±ç»è¿è¿ä¸ªä¸­é´ä»¶çæ¶åï¼ä¸å³å¿è¯·æ±è·¯å¾åæ¹æ³ï¼ç´æ¥è¿å¥è¯¥ä¸­é´ä»¶è¿è¡å¤çãå¶ä¸­nextæ¯ä¸ä¸ªæ¹æ³ï¼ç¨äºè°ç¨ä¸ä¸ä¸ªç¬¦åæ¡ä»¶çä¸­é´ä»¶ãå¦æä¸ånextï¼åä¼å¨å½åä¸­é´ä»¶åçä¸æ¥ï¼ä¸ä¼åå»å¹éå¶ä»ä¸­é´ä»¶ã\n\n 2. è·¯å¾ä»¥/xx/å¼å¤´çå¹éï¼æ¨¡ç³å¹éï¼\n\napp.use('/a', function(req, res, next) {\n  console.log('/a');\n  next();\n})\n\n\nåªæä»¥/a/å¼å¤´çè·¯å¾æå¯ä»¥å¹éæåå¹¶å¤çï¼æ¯å¦ï¼/a/bæ¯å¯ä»¥å¹éæåçï¼ä½æ¯/ab/bä¸è½å¹éæå\n\n\n# è·¯ç±çº§å«ä¸­é´ä»¶\n\nå¿é¡»ä¸è¯·æ±è·¯å¾åè¯·æ±æ¹æ³ä¸è´æå¹éæåï¼ç²¾ç¡®å¹éï¼\n\napp.get('/a', function(req, res, next) {\n  console.log('/a');\n  next();\n})\n",charsets:{cjk:!0}},{title:"åè¯Node.js",frontmatter:{title:"åè¯Node.js",date:"2019-05-02T16:00:54.000Z",categories:"Node.js"},regularPath:"/node/node-1.html",relativePath:"node/node-1.md",key:"v-92095dc2",path:"/node/node-1.html",headers:[{level:2,title:"1.Node.jsçç¹ç¹ä¸ä¼å¿",slug:"_1-node-jsçç¹ç¹ä¸ä¼å¿",normalizedTitle:"1.node.jsçç¹ç¹ä¸ä¼å¿",charIndex:351},{level:2,title:"2.ç¬¬ä¸ä¸ªNode.jsçwebç¨åº",slug:"_2-ç¬¬ä¸ä¸ªnode-jsçwebç¨åº",normalizedTitle:"2.ç¬¬ä¸ä¸ªnode.jsçwebç¨åº",charIndex:628},{level:2,title:"3.REPLè¿è¡ç¯å¢ï¼Read-Eval-Print-Loopï¼",slug:"_3-replè¿è¡ç¯å¢-read-eval-print-loop",normalizedTitle:"3.replè¿è¡ç¯å¢ï¼read-eval-print-loopï¼",charIndex:893},{level:2,title:"4.globalå¯¹è±¡åæ¨¡åä½ç¨å",slug:"_4-globalå¯¹è±¡åæ¨¡åä½ç¨å",normalizedTitle:"4.globalå¯¹è±¡åæ¨¡åä½ç¨å",charIndex:1009},{level:3,title:"4.1 require(),exports,module.exports",slug:"_4-1-require-exports-module-exports",normalizedTitle:"4.1 require(),exports,module.exports",charIndex:1193},{level:3,title:"4.2 exportsåmodule.exportsçåºå«",slug:"_4-2-exportsåmodule-exportsçåºå«",normalizedTitle:"4.2 exportsåmodule.exportsçåºå«",charIndex:1681},{level:2,title:"5.å¨å±å¯ç¨åéï¼å½æ°åå¯¹è±¡",slug:"_5-å¨å±å¯ç¨åé-å½æ°åå¯¹è±¡",normalizedTitle:"5.å¨å±å¯ç¨åéï¼å½æ°åå¯¹è±¡",charIndex:2265},{level:3,title:"5.1 dirnameå filenameåé",slug:"_5-1-dirnameå-filenameåé",normalizedTitle:"5.1 dirnameå filenameåé",charIndex:null},{level:3,title:"5.2 å¨å±å½æ°",slug:"_5-2-å¨å±å½æ°",normalizedTitle:"5.2 å¨å±å½æ°",charIndex:2607},{level:3,title:"5.3 consoleå¯¹è±¡",slug:"_5-3-consoleå¯¹è±¡",normalizedTitle:"5.3 consoleå¯¹è±¡",charIndex:2810},{level:2,title:"6 éåè®¡ç®å¨æ¨¡å",slug:"_6-éåè®¡ç®å¨æ¨¡å",normalizedTitle:"6 éåè®¡ç®å¨æ¨¡å",charIndex:3064},{level:2,title:"7. require()çæ¨¡åå è½½è§å",slug:"_7-require-çæ¨¡åå è½½è§å",normalizedTitle:"7. require()çæ¨¡åå è½½è§å",charIndex:3373},{level:2,title:"8. æ¨¡åçç¼å­",slug:"_8-æ¨¡åçç¼å­",normalizedTitle:"8. æ¨¡åçç¼å­",charIndex:3700}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"1.Node.jsçç¹ç¹ä¸ä¼å¿ 2.ç¬¬ä¸ä¸ªNode.jsçwebç¨åº 3.REPLè¿è¡ç¯å¢ï¼Read-Eval-Print-Loopï¼ 4.globalå¯¹è±¡åæ¨¡åä½ç¨å 4.1 require(),exports,module.exports 4.2 exportsåmodule.exportsçåºå« 5.å¨å±å¯ç¨åéï¼å½æ°åå¯¹è±¡ 5.1 dirnameå filenameåé 5.2 å¨å±å½æ° 5.3 consoleå¯¹è±¡ 6 éåè®¡ç®å¨æ¨¡å 7. require()çæ¨¡åå è½½è§å 8. æ¨¡åçç¼å­",content:"JavaScriptå¨å®¢æ·ç«¯ä¸æå¡ç«¯å®ç°çåè½ä¸åï¼åºå«å·ä½å¦ä¸ï¼\n\nå¨å®¢æ·ç«¯ï¼JavaScriptéè¦ä¾èµæµè§å¨æä¾çJavaScriptå¼æè§£ææ§è¡ï¼æµè§å¨æä¾äºå¯¹DOMçè§£æï¼å®¢æ·ç«¯ä¸ä»è¦åºç¨è¯­æ³ï¼èä¸è¦ä¼æä½DOMåBOMã\n\nå¨æå¡å¨ç«¯ï¼JavaScriptä¸ä¾èµæµè§å¨ï¼èæ¯ç±ç¹å®çè¿è¡ç¯å¢æä¾çJavaScriptå¼æè§£ææ§è¡ï¼ä¾å¦Node.jsï¼åªéåºç¨è¯­æ³ï¼ä¸éè¦æä½DOMåBOMã\n\nJavaScriptåæ¬ECMAScript,DOM,BOMä¸ä¸ªé¨åï¼å·ä½å¦ä¸ï¼\n\n 1. ECMAScriptæ¯JavaScriptçæ ¸å¿è¯­æ³\n 2. DOMæ¯HTMLåXMLçåºç¨ç¨åºæ¥å£ï¼ç¨äºæ§å¶ææ¡£çåå®¹åç»æã\n 3. BOMï¼æµè§å¨å¯¹è±¡æ¨¡åï¼å¯ä»¥å¯¹æµè§å¨çªå£è¿è¡è®¿é®åæä½ã\n\n\n# 1.Node.jsçç¹ç¹ä¸ä¼å¿\n\n * å®æ¯ä¸ä¸ªJavaScriptè¿è¡ç¯å¢ï¼ååç«¯è¯­è¨ä¸è´ã\n * ä¾èµäºChrome v8å¼æè¿è¡ä»£ç è§£æï¼è¿ä¸ªå¼æè´è´£å¨éæµè§å¨è§£ææåµä¸è§£æä»£ç \n * äºä»¶é©±å¨ï¼Event-Drivenï¼\n * éé»å¡I/Oï¼æå¡å¨ç«¯ä¼è®¾è®¡é»å¡I/Oçæä½ï¼Node.jsä½¿ç¨äºä»¶åè°çæ¹å¼å®ç°éé»å¡I/O\n * è½»éï¼å¯ä¼¸ç¼©ï¼éäºå®æ¶æ°æ®äº¤äºåºç¨\n * åè¿ç¨ï¼åçº¿ç¨ï¼é»å¡I/Oä¸ä¸ªçº¿ç¨åªè½å¤çä¸ä¸ªä»»å¡ï¼éé»å¡I/Oä¸ä¸ªçº¿ç¨æ°¸è¿å¨å¤çä»»å¡ï¼Node.jséç¨ åçº¿ç¨ï¼å©ç¨äºä»¶é©±å¨çå¼æ­¥ç¼ç¨æ¨¡å¼ï¼å®ç°äºéé»å¡I/Oã\n\n\n# 2.ç¬¬ä¸ä¸ªNode.jsçwebç¨åº\n\nå½ä»¤è¡è¿è¡node demo.js,demo.jså¦ä¸ï¼æå¼æµè§å¨è¾å¥127.0.0.1:3000,è¾åºhello world\n\n//å è½½httpæ¨¡å\nvar http = require('http');\n//åå»ºhttpæå¡å¨\nhttp.createServer(function(req,res){\n\t//ååºç»æ\n\tres.end('hello world');\n\t//çå¬ç½å127.0.0.1 ç«¯å£å·3000\n}).listen(3000,'127.0.0.1');\n\n\n\n# 3.REPLè¿è¡ç¯å¢ï¼Read-Eval-Print-Loopï¼\n\næå¼ç»ç«¯ï¼è¾å¥nodeå³å¯è¿å¥REPLè¿è¡ç¯å¢ï¼å¯ä»¥è§£æJSä»£ç ï¼æ§è¡åéåå½æ°çç¸å³æä½ã\n\nå¶å®Chromeä¸­çConsoleæ§å¶å°å°±æ¯REPLç¯å¢ã\n\n\n# 4.globalå¯¹è±¡åæ¨¡åä½ç¨å\n\nå¨Node.jsä¸­ï¼é»è®¤å£°æçåéï¼å½æ°é½æ¯å±äºå½åæä»¶æ¨¡åï¼é½æ¯ç§æçï¼åªæå¨å½åæ¨¡åä½ç¨ååå¯ä»¥ä½¿ç¨ï¼å¦ææ³å¨å¨å±èå´åä¸ºæä¸ªåéèµå¼ï¼å¯ä»¥åºç¨ å¨å±å¯¹è±¡global.\n\nvar foo = 'bar';\nglobal.foo = foo;\nconsole.log('global:foo'+global.foo);\n\n\n\n# 4.1 require(),exports,module.exports\n\nå¨ä¸ä¸ªæä»¶æ¨¡åä¸­ç´æ¥ç»æä¸ªå¨å±åéèµå¼ï¼æ¾å¾å¾çªåï¼å¯è½ä¼æ±¡æå½åç©ºé´ï¼é æè¦åçé®é¢ï¼ä¸ºäºè§£å³ä¸è¿°é®é¢ï¼exportsæ¯æ¨¡åå¬å¼çæ¥å£ï¼require()ç¨äºä»å¤é¨è·åä¸ä¸ªæ¨¡åçæ¥å£ã\n\ninfo.js:\n\n//åå¤å¼æ¾åéname\nexports.name = 'itcast';\n//åå¤å¼æ¾åéage\nmodule.exports.age = '10';\n//åå¤å¼æ¾å½æ°\nmodule.exports.sayHello = function(){\n    console.log('hello');\n}\n\n\ndemo.js\n\n//å è½½æ¨¡å\nlet myModule = require('./info');\nconsole.log(myModule);\n//è¾åºæ¨¡åä¸­çåéå¼\nconsole.log('name:'+myModule.name);\nconsole.log('age:'+myModule.age);\n//è°ç¨æ¨¡åçæ¹æ³\nmyModule.sayHello();\n\n\n\n# 4.2 exportsåmodule.exportsçåºå«\n\nexportsæ¯ä¸ä¸ªæåmodule.exportsçå¼ç¨ï¼module.exportsåå§å¼ä¸ºä¸ä¸ªç©ºå¯¹è±¡{}ï¼æä»¥exportsåå§å¼ä¹æ¯{}ï¼è½ç¶exportsåmodule.exportsé½å¯ä»¥åæ¨¡åå¤å¼æ¾åéåå½æ°ï¼ä½æ¯ä½¿ç¨ä¸ï¼module.exportså¯ä»¥åç¬å®ä¹ï¼è¿åæ°æ®ç±»åï¼èexportsåªè½è¿åä¸ä¸ªobjectå¯¹è±¡ã\n\nä¾å¦ï¼\n\ntest.js\n\n//å®ä¹ä¸ä¸ªæ°ç»\nmodule.exports=['name','type','age'];\n\n\ndemo2-5.js\n\n//å è½½æ¨¡å\nlet myModule = require('./test');\nconsole.log(myModule);\n//è¾åºæ°ç»é¿åº¦\nconsole.log('length:'+myModule.length); \n\n//è¾åº ç»æ\n//[ 'name', 'type', 'age' ]\n//length:3\n\n\nä¿®æ¹test.jsä¸­çä»£ç \n\nexports=['name','type','age'];\n\n//æåè¾åº\n//{}\n//length:undefined\n\n\nå¯è§ä½¿ç¨exportsç´æ¥å®ä¹æ°æ®ï¼ä¼åæ­exportsä¸module.exportsçèç³»ï¼åºç°äºæ¾ä¸å°å¼çæåµã\n\n\n# 5.å¨å±å¯ç¨åéï¼å½æ°åå¯¹è±¡\n\nå³ä¸éè¦è¿è¡æ¨¡åå è½½ï¼å¯ä»¥ç´æ¥ä½¿ç¨çï¼ä¾å¦require()å½æ°ã\n\n\n# 5.1 _dirnameå _filenameåé\n\n * _dirnameè¡¨ç¤ºå½åæä»¶æå¨çç®å½\n * _filenameè¡¨ç¤ºå½åæ­£å¨æ§è¡çèæ¬çæä»¶åãï¼ç»å¯¹è·¯å¾ï¼\n\nconsole.log('æä»¶çç®å½æ¯ï¼'+__dirname);\nconsole.log('æä»¶çç»å¯¹è·¯å¾æ¯ï¼'+__filename);\n//è¾åº\n//æä»¶çç®å½æ¯ï¼C:\\Users\\Jin\\Desktop\\åç«¯å­¦ä¹ \\Node.js\\chapter 02\n//æä»¶çç»å¯¹è·¯å¾æ¯ï¼C:\\Users\\Jin\\Desktop\\åç«¯å­¦ä¹ \\Node.js\\chapter 02\\demo2-6.js\n\n\n\n# 5.2 å¨å±å½æ°\n\n * setTimeout(cb,ms)ï¼msåæ§è¡cb\n * clearTimeout()\n * setInterval(cb,ms)ï¼æ¯msåæ§è¡cb\n * clearInterval()\n * setImmediate(cb)ï¼å»¶è¿è°ç¨cbå½æ°ï¼cbå°å¨I/Oäºä»¶åè°ä¹åï¼setTimeoutåsetIntervalåè°ä¹åè°ç¨\n * clearImmediate()\n\n\n# 5.3 consoleå¯¹è±¡\n\nconsoleæ¯ä¸ä¸ªå¨å±å¯¹è±¡ï¼é¤äºconsole.log()å½æ°å¤è¿æä¾äºå¶ä»å½æ°\n\n * console.info\n * console.error\n * console.warn\n * console.dirï¼ç¨æ¥å¯¹ä¸ä¸ªå¯¹è±¡è¿è¡æ£æ¥ï¼ä»¥æäºéè¯»åæå°çæ ¼å¼æ¾ç¤º\n * console.timeåconsole.timeEnd\n * console.traceï¼å½åæ§è¡ä»£ç å¨å æ ä¸­çè°ç¨è·¯å¾\n * console.assertï¼å¤æ­æä¸ªè¡¨è¾¾å¼æåéæ¯å¦ä¸ºçï¼æ­è¨ï¼\n\n\n# 6 éåè®¡ç®å¨æ¨¡å\n\nä»¥add.jsä¸ºä¾ï¼å®ä¹å åä¹é¤æ¨¡å\n\nmodule.exports = function(x,y){\n\treturn parseInt(x)+parseInt(y);\n}\n\n\nindex.jsï¼åå«ä½¿ç¨requireå è½½4ä¸ªåè½æ¨¡åï¼å¹¶ä½¿ç¨exportsåå¤å¼æ¾è¿4ä¸ªæ¥å£\n\nmodule.exports = {\n    add:require('./add');\n    //sub\n    //mul\n    //divide\n}\n\n\ntestCal.js\n\nvar cal = require('./index');\nconsole.log(cal.add(1,2));//3\n\n\n\n# 7. require()çæ¨¡åå è½½è§å\n\nä¸»è¦åä¸ºä¸¤ç±»ï¼æä»¶æ¨¡ååæ ¸å¿æ¨¡å\n\n 1. æä»¶æ¨¡å\n\nrequire('è·¯å¾.æ©å±å');\nrequire('/example.js');//å½åç®å½\nrequire('./example.js');\nrequire('../example.js');//ä¸ä¸ç®å½\n\n\n 2. æ ¸å¿æ¨¡å\n\næ ¸å¿æ¨¡ååå«äºåºæ¬çAPIï¼ä¿å­å¨node.jsæºç çlibæä»¶ä¸ï¼ä¾å¦\n\n * å¨å±å¯¹è±¡\n * å¸¸ç¨å·¥å·\n * äºä»¶æºå¶\n * æä»¶ç³»ç»è®¿é®\n * HTTPæå¡å¨ä¸å®¢æ·ç«¯\n\nrequire('æ¨¡åæ è¯');\nconst os = require('os');\nconsole.log(os.cpus());\n\n\n\n# 8. æ¨¡åçç¼å­\n\nå¤æ¬¡ä½¿ç¨åä¸æ¨¡åï¼Node.jsåªä¼å è½½ä¸æ¬¡ï¼æ¨¡åè¢«ç¼å­å¨require.cacheä¸­\n\nfoo.js:\n\nconsole.log('fooæ¨¡åè¢«å è½½äº');\n\n\ntest.js:\n\nrequire('./foo');\nrequire('./foo');\nrequire('./foo');\nrequire('./foo');\n//åªè¾åºä¸æ¬¡ fooæ¨¡åè¢«å è½½äºï¼è¯´æåªå è½½äºä¸æ¬¡\n\n\nå¨foo.jså å¥\n\ndelete require.cache[module.filename];\n//å é¤ç¼å­åè¾åº4æ¬¡\n",normalizedContent:"javascriptå¨å®¢æ·ç«¯ä¸æå¡ç«¯å®ç°çåè½ä¸åï¼åºå«å·ä½å¦ä¸ï¼\n\nå¨å®¢æ·ç«¯ï¼javascriptéè¦ä¾èµæµè§å¨æä¾çjavascriptå¼æè§£ææ§è¡ï¼æµè§å¨æä¾äºå¯¹domçè§£æï¼å®¢æ·ç«¯ä¸ä»è¦åºç¨è¯­æ³ï¼èä¸è¦ä¼æä½domåbomã\n\nå¨æå¡å¨ç«¯ï¼javascriptä¸ä¾èµæµè§å¨ï¼èæ¯ç±ç¹å®çè¿è¡ç¯å¢æä¾çjavascriptå¼æè§£ææ§è¡ï¼ä¾å¦node.jsï¼åªéåºç¨è¯­æ³ï¼ä¸éè¦æä½domåbomã\n\njavascriptåæ¬ecmascript,dom,bomä¸ä¸ªé¨åï¼å·ä½å¦ä¸ï¼\n\n 1. ecmascriptæ¯javascriptçæ ¸å¿è¯­æ³\n 2. domæ¯htmlåxmlçåºç¨ç¨åºæ¥å£ï¼ç¨äºæ§å¶ææ¡£çåå®¹åç»æã\n 3. bomï¼æµè§å¨å¯¹è±¡æ¨¡åï¼å¯ä»¥å¯¹æµè§å¨çªå£è¿è¡è®¿é®åæä½ã\n\n\n# 1.node.jsçç¹ç¹ä¸ä¼å¿\n\n * å®æ¯ä¸ä¸ªjavascriptè¿è¡ç¯å¢ï¼ååç«¯è¯­è¨ä¸è´ã\n * ä¾èµäºchrome v8å¼æè¿è¡ä»£ç è§£æï¼è¿ä¸ªå¼æè´è´£å¨éæµè§å¨è§£ææåµä¸è§£æä»£ç \n * äºä»¶é©±å¨ï¼event-drivenï¼\n * éé»å¡i/oï¼æå¡å¨ç«¯ä¼è®¾è®¡é»å¡i/oçæä½ï¼node.jsä½¿ç¨äºä»¶åè°çæ¹å¼å®ç°éé»å¡i/o\n * è½»éï¼å¯ä¼¸ç¼©ï¼éäºå®æ¶æ°æ®äº¤äºåºç¨\n * åè¿ç¨ï¼åçº¿ç¨ï¼é»å¡i/oä¸ä¸ªçº¿ç¨åªè½å¤çä¸ä¸ªä»»å¡ï¼éé»å¡i/oä¸ä¸ªçº¿ç¨æ°¸è¿å¨å¤çä»»å¡ï¼node.jséç¨ åçº¿ç¨ï¼å©ç¨äºä»¶é©±å¨çå¼æ­¥ç¼ç¨æ¨¡å¼ï¼å®ç°äºéé»å¡i/oã\n\n\n# 2.ç¬¬ä¸ä¸ªnode.jsçwebç¨åº\n\nå½ä»¤è¡è¿è¡node demo.js,demo.jså¦ä¸ï¼æå¼æµè§å¨è¾å¥127.0.0.1:3000,è¾åºhello world\n\n//å è½½httpæ¨¡å\nvar http = require('http');\n//åå»ºhttpæå¡å¨\nhttp.createserver(function(req,res){\n\t//ååºç»æ\n\tres.end('hello world');\n\t//çå¬ç½å127.0.0.1 ç«¯å£å·3000\n}).listen(3000,'127.0.0.1');\n\n\n\n# 3.replè¿è¡ç¯å¢ï¼read-eval-print-loopï¼\n\næå¼ç»ç«¯ï¼è¾å¥nodeå³å¯è¿å¥replè¿è¡ç¯å¢ï¼å¯ä»¥è§£æjsä»£ç ï¼æ§è¡åéåå½æ°çç¸å³æä½ã\n\nå¶å®chromeä¸­çconsoleæ§å¶å°å°±æ¯replç¯å¢ã\n\n\n# 4.globalå¯¹è±¡åæ¨¡åä½ç¨å\n\nå¨node.jsä¸­ï¼é»è®¤å£°æçåéï¼å½æ°é½æ¯å±äºå½åæä»¶æ¨¡åï¼é½æ¯ç§æçï¼åªæå¨å½åæ¨¡åä½ç¨ååå¯ä»¥ä½¿ç¨ï¼å¦ææ³å¨å¨å±èå´åä¸ºæä¸ªåéèµå¼ï¼å¯ä»¥åºç¨ å¨å±å¯¹è±¡global.\n\nvar foo = 'bar';\nglobal.foo = foo;\nconsole.log('global:foo'+global.foo);\n\n\n\n# 4.1 require(),exports,module.exports\n\nå¨ä¸ä¸ªæä»¶æ¨¡åä¸­ç´æ¥ç»æä¸ªå¨å±åéèµå¼ï¼æ¾å¾å¾çªåï¼å¯è½ä¼æ±¡æå½åç©ºé´ï¼é æè¦åçé®é¢ï¼ä¸ºäºè§£å³ä¸è¿°é®é¢ï¼exportsæ¯æ¨¡åå¬å¼çæ¥å£ï¼require()ç¨äºä»å¤é¨è·åä¸ä¸ªæ¨¡åçæ¥å£ã\n\ninfo.js:\n\n//åå¤å¼æ¾åéname\nexports.name = 'itcast';\n//åå¤å¼æ¾åéage\nmodule.exports.age = '10';\n//åå¤å¼æ¾å½æ°\nmodule.exports.sayhello = function(){\n    console.log('hello');\n}\n\n\ndemo.js\n\n//å è½½æ¨¡å\nlet mymodule = require('./info');\nconsole.log(mymodule);\n//è¾åºæ¨¡åä¸­çåéå¼\nconsole.log('name:'+mymodule.name);\nconsole.log('age:'+mymodule.age);\n//è°ç¨æ¨¡åçæ¹æ³\nmymodule.sayhello();\n\n\n\n# 4.2 exportsåmodule.exportsçåºå«\n\nexportsæ¯ä¸ä¸ªæåmodule.exportsçå¼ç¨ï¼module.exportsåå§å¼ä¸ºä¸ä¸ªç©ºå¯¹è±¡{}ï¼æä»¥exportsåå§å¼ä¹æ¯{}ï¼è½ç¶exportsåmodule.exportsé½å¯ä»¥åæ¨¡åå¤å¼æ¾åéåå½æ°ï¼ä½æ¯ä½¿ç¨ä¸ï¼module.exportså¯ä»¥åç¬å®ä¹ï¼è¿åæ°æ®ç±»åï¼èexportsåªè½è¿åä¸ä¸ªobjectå¯¹è±¡ã\n\nä¾å¦ï¼\n\ntest.js\n\n//å®ä¹ä¸ä¸ªæ°ç»\nmodule.exports=['name','type','age'];\n\n\ndemo2-5.js\n\n//å è½½æ¨¡å\nlet mymodule = require('./test');\nconsole.log(mymodule);\n//è¾åºæ°ç»é¿åº¦\nconsole.log('length:'+mymodule.length); \n\n//è¾åº ç»æ\n//[ 'name', 'type', 'age' ]\n//length:3\n\n\nä¿®æ¹test.jsä¸­çä»£ç \n\nexports=['name','type','age'];\n\n//æåè¾åº\n//{}\n//length:undefined\n\n\nå¯è§ä½¿ç¨exportsç´æ¥å®ä¹æ°æ®ï¼ä¼åæ­exportsä¸module.exportsçèç³»ï¼åºç°äºæ¾ä¸å°å¼çæåµã\n\n\n# 5.å¨å±å¯ç¨åéï¼å½æ°åå¯¹è±¡\n\nå³ä¸éè¦è¿è¡æ¨¡åå è½½ï¼å¯ä»¥ç´æ¥ä½¿ç¨çï¼ä¾å¦require()å½æ°ã\n\n\n# 5.1 _dirnameå _filenameåé\n\n * _dirnameè¡¨ç¤ºå½åæä»¶æå¨çç®å½\n * _filenameè¡¨ç¤ºå½åæ­£å¨æ§è¡çèæ¬çæä»¶åãï¼ç»å¯¹è·¯å¾ï¼\n\nconsole.log('æä»¶çç®å½æ¯ï¼'+__dirname);\nconsole.log('æä»¶çç»å¯¹è·¯å¾æ¯ï¼'+__filename);\n//è¾åº\n//æä»¶çç®å½æ¯ï¼c:\\users\\jin\\desktop\\åç«¯å­¦ä¹ \\node.js\\chapter 02\n//æä»¶çç»å¯¹è·¯å¾æ¯ï¼c:\\users\\jin\\desktop\\åç«¯å­¦ä¹ \\node.js\\chapter 02\\demo2-6.js\n\n\n\n# 5.2 å¨å±å½æ°\n\n * settimeout(cb,ms)ï¼msåæ§è¡cb\n * cleartimeout()\n * setinterval(cb,ms)ï¼æ¯msåæ§è¡cb\n * clearinterval()\n * setimmediate(cb)ï¼å»¶è¿è°ç¨cbå½æ°ï¼cbå°å¨i/oäºä»¶åè°ä¹åï¼settimeoutåsetintervalåè°ä¹åè°ç¨\n * clearimmediate()\n\n\n# 5.3 consoleå¯¹è±¡\n\nconsoleæ¯ä¸ä¸ªå¨å±å¯¹è±¡ï¼é¤äºconsole.log()å½æ°å¤è¿æä¾äºå¶ä»å½æ°\n\n * console.info\n * console.error\n * console.warn\n * console.dirï¼ç¨æ¥å¯¹ä¸ä¸ªå¯¹è±¡è¿è¡æ£æ¥ï¼ä»¥æäºéè¯»åæå°çæ ¼å¼æ¾ç¤º\n * console.timeåconsole.timeend\n * console.traceï¼å½åæ§è¡ä»£ç å¨å æ ä¸­çè°ç¨è·¯å¾\n * console.assertï¼å¤æ­æä¸ªè¡¨è¾¾å¼æåéæ¯å¦ä¸ºçï¼æ­è¨ï¼\n\n\n# 6 éåè®¡ç®å¨æ¨¡å\n\nä»¥add.jsä¸ºä¾ï¼å®ä¹å åä¹é¤æ¨¡å\n\nmodule.exports = function(x,y){\n\treturn parseint(x)+parseint(y);\n}\n\n\nindex.jsï¼åå«ä½¿ç¨requireå è½½4ä¸ªåè½æ¨¡åï¼å¹¶ä½¿ç¨exportsåå¤å¼æ¾è¿4ä¸ªæ¥å£\n\nmodule.exports = {\n    add:require('./add');\n    //sub\n    //mul\n    //divide\n}\n\n\ntestcal.js\n\nvar cal = require('./index');\nconsole.log(cal.add(1,2));//3\n\n\n\n# 7. require()çæ¨¡åå è½½è§å\n\nä¸»è¦åä¸ºä¸¤ç±»ï¼æä»¶æ¨¡ååæ ¸å¿æ¨¡å\n\n 1. æä»¶æ¨¡å\n\nrequire('è·¯å¾.æ©å±å');\nrequire('/example.js');//å½åç®å½\nrequire('./example.js');\nrequire('../example.js');//ä¸ä¸ç®å½\n\n\n 2. æ ¸å¿æ¨¡å\n\næ ¸å¿æ¨¡ååå«äºåºæ¬çapiï¼ä¿å­å¨node.jsæºç çlibæä»¶ä¸ï¼ä¾å¦\n\n * å¨å±å¯¹è±¡\n * å¸¸ç¨å·¥å·\n * äºä»¶æºå¶\n * æä»¶ç³»ç»è®¿é®\n * httpæå¡å¨ä¸å®¢æ·ç«¯\n\nrequire('æ¨¡åæ è¯');\nconst os = require('os');\nconsole.log(os.cpus());\n\n\n\n# 8. æ¨¡åçç¼å­\n\nå¤æ¬¡ä½¿ç¨åä¸æ¨¡åï¼node.jsåªä¼å è½½ä¸æ¬¡ï¼æ¨¡åè¢«ç¼å­å¨require.cacheä¸­\n\nfoo.js:\n\nconsole.log('fooæ¨¡åè¢«å è½½äº');\n\n\ntest.js:\n\nrequire('./foo');\nrequire('./foo');\nrequire('./foo');\nrequire('./foo');\n//åªè¾åºä¸æ¬¡ fooæ¨¡åè¢«å è½½äºï¼è¯´æåªå è½½äºä¸æ¬¡\n\n\nå¨foo.jså å¥\n\ndelete require.cache[module.filename];\n//å é¤ç¼å­åè¾åº4æ¬¡\n",charsets:{cjk:!0}},{title:"Node.jså¼æ­¥èµæºååèµæºç®¡ç",frontmatter:{title:"Node.jså¼æ­¥èµæºååèµæºç®¡ç",date:"2019-05-03T16:00:54.000Z",categories:"Node.js"},regularPath:"/node/node-3.html",relativePath:"node/node-3.md",key:"v-58d22542",path:"/node/node-3.html",headers:[{level:2,title:"åæ­¥åå¼æ­¥",slug:"åæ­¥åå¼æ­¥",normalizedTitle:"åæ­¥åå¼æ­¥",charIndex:164},{level:2,title:"åè°å½æ°",slug:"åè°å½æ°",normalizedTitle:"åè°å½æ°",charIndex:612},{level:2,title:"äºä»¶é©±å¨",slug:"äºä»¶é©±å¨",normalizedTitle:"äºä»¶é©±å¨",charIndex:2227},{level:2,title:"åçæ¦å¿µ",slug:"åçæ¦å¿µ",normalizedTitle:"åçæ¦å¿µ",charIndex:2471},{level:2,title:"NPMçæ¦å¿µ",slug:"npmçæ¦å¿µ",normalizedTitle:"npmçæ¦å¿µ",charIndex:2689},{level:2,title:"åºæ¬åºç¨",slug:"åºæ¬åºç¨",normalizedTitle:"åºæ¬åºç¨",charIndex:2868},{level:2,title:"åæ¨¡åå è½½è§å",slug:"åæ¨¡åå è½½è§å",normalizedTitle:"åæ¨¡åå è½½è§å",charIndex:2984}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"åæ­¥åå¼æ­¥ åè°å½æ° äºä»¶é©±å¨ åçæ¦å¿µ NPMçæ¦å¿µ åºæ¬åºç¨ åæ¨¡åå è½½è§å",content:"# å¼æ­¥ç¼ç¨\n\nJavaScriptçæ§è¡ç¯å¢æ¯åçº¿ç¨çï¼åçº¿ç¨ä¸æ¬¡åªè½å®æä¸ä¸ªä»»å¡ï¼å¦ææå¤ä¸ªä»»å¡ï¼å°±éè¦ç­å¾åé¢ä¸ä¸ªä»»å¡å®æåï¼åæ§è¡åé¢çä¸ä¸ªä»»å¡ãå¸¸è§çæµè§å¨æ ååºå°±æ¯æä¸æ®µJSä»£ç é¿æ¶é´è¿è¡é æçã\n\nä¸ºè§£å³åçº¿ç¨é»å¡çé®é¢ï¼Node.jsä¸­å å¥äºå¼æ­¥ç¼ç¨æ¨¡åï¼ä¿è¯äºNode.jså¿«éååºï¼ååå©ç¨CPUã\n\n\n# åæ­¥åå¼æ­¥\n\n 1. åæ­¥ï¼ä»£ç æç§é¡ºåºä¾æ¬¡æ§è¡\n\nconsole.log('èµ·åº');\nconsole.log('èåè¯');\nfunction eatBreakfast(){\n    console.log('æ©é¤åå®äº');\n}\neatBreakfast();\nconsole.log('å»ä¸å­¦');\n\n\n 2. å¼æ­¥ï¼\n\nconsole.log('èµ·åº');\nconsole.log('èåè¯');\nfunction eatBreakfast(){\n    console.log('å¼å§åæ©é¤äº');\n    //setTimeoutæ¯ä¸ä¸ªå¼æ­¥å½æ°ï¼ä¸ä¼é»å¡åé¢ä»£ç çç»§ç»­æ§è¡\n    setTimeout(function(){\n        console.log('æ©é¤åå®äº');\n    },0);\n}\neatBreakfast();\nconsole.log('å»ä¸å­¦');\n//ç¸å½äºè¾¹å»å­¦æ ¡ï¼è¾¹åæ©é¤\n//è¾åºï¼èµ·åºï¼èåè¯ï¼å¼å§åæ©é¤äºï¼å»ä¸å­¦ï¼æ©é¤åå®äº\n\n\n\n# åè°å½æ°\n\nåè°å½æ°æ¯æå½æ°å¯ä»¥è¢«ä¼ éå°å¦ä¸ä¸ªå½æ°ä¸­ï¼ç¶åè¢«è°ç¨çå½¢å¼ï¼å¸åçåºç¨å°±æ¯å¼æ­¥å½æ°çå¼å¸¸å¤çã\n\n 1. åæ­¥ä»£ç ä¸­ä½¿ç¨try...catchå¤çå¼å¸¸\n\n//åæ­¥ä»£ç å¤çå¼å¸¸\nfunction parseJsonStrToObj(str){\n    //ç¨äºä»ä¸ä¸ªå­ç¬¦ä¸²ä¸­è§£æåºjsonå¯¹è±¡\n    return JSON.parse(str);\n}\n//å¯¹äºåæ­¥ä»£ç ï¼å¯ä»¥ä½¿ç¨try...catchæ¥æè·å¼å¸¸\ntry{\n    let obj = parseJsonStrToObj('foo');\n    console.log(obj);\n}catch (e) {\n    console.log('è½¬æ¢å¤±è´¥äº');\n}\n\n//è¾åºï¼è½¬æ¢å¤±è´¥äº\n\n\n 2. å¼æ­¥ä»£ç æ æ³ä½¿ç¨try...catchå¤çå¼å¸¸\n\n//å¼æ­¥ä»£ç æ æ³å¤çå¼å¸¸\nfunction parseJsonStrToObj(str){\n    setTimeout(function(){\n            return JSON.parse(str);\n    },0)\n}\ntry{\n    let obj = parseJsonStrToObj('foo');\n    console.log(obj);\n}catch (e) {\n    console.log('è½¬æ¢å¤±è´¥äº');\n}\n\n//æåä¼æ¥éï¼è¯´æå¼æ­¥ä»£ç æ æ³å¤çå¼å¸¸\n\n\n 3. ä½¿ç¨åè°å½æ°æ¥æ¶å¼æ­¥ä»£ç çæ§è¡ç»æ\n\n//try...catchåå¨å¼æ­¥ä»£ç ä¸­\nfunction parseJsonStrToObj(str){\n    setTimeout(function(){\n        try{\n            return JSON.parse(str);//æè¿åå¼ï¼ä½æ¯æ æ³æ¥æ¶\n        }catch (e) {\n            console.log('è½¬æ¢å¤±è´¥äº');\n        }\n    },0)\n}\nlet obj = parseJsonStrToObj('foo');\nconsole.log(obj);\n\n//è¾åºï¼undefined è½¬æ¢å¤±è´¥äº\n\n\næ ¹æ®æ­¤æåºåè°å½æ°çè®¾è®¡ï¼å³å½ä½¿ç¨å¼æ­¥ä»£ç å»åä¸ä»¶äºæ¶ï¼ä¸è½é¢æµè¿ä»¶äºä»ä¹æ¶ååå®ï¼å¶ä»çäºæè¿å¨ç»§ç»­ï¼è¿æ¶å¯ç»å¼æ­¥ä»£ç åå¤ä¸ä¸ªåè£¹ï¼å½å¼æ­¥ä»£ç æäºæ§è¡ç»ææ¶ï¼å¯ä»¥å°ç»ææ¾å¨è¿ä¸ªåè£¹éï¼éè¦å¨åªéä½¿ç¨è¿ä¸ªç»æå°±ä»åè£¹ååºã\n\nåè°å½æ°è®¾è®¡ç3ä¸ªçº¦å®ï¼\n\nï¼1ï¼ å½æ°åéå¸¸ä¸ºcallback,å¨å°è£å¼æ­¥æ§è¡ä»£ç æ¶ï¼ä¼åæcallbackä½ä¸ºå½æ°æåä¸ä¸ªåæ°åºç°\n\nfunction å½æ°å(arg1,arg2,callback){}\n\n\nï¼2ï¼æä»£ç ä¸­åºç°çéè¯¯ä½ä¸ºcallbackåè°å½æ°çç¬¬ä¸ä¸ªåæ°è¿è¡ä¼ é,è¿åç»æä½ä¸ºç¬¬äºä¸ªåæ°\n\ncallback(err,result);\n\n\næ¹åä¸é¢å½æ°\n\nfunction parseJsonStrToObj(str,callback){\n    setTimeout(function(){\n        try{\n            let obj = JSON.parse(str);\n            callback(null,obj);\n        }catch (e) {\n            callback(e,null);\n        }\n    },0)\n}\nparseJsonStrToObj('foo',function(err,result){\n    if(err){\n        return console.log('è½¬æ¢å¤±è´¥äº');\n    }\n    console.log('è½¬æ¢æåï¼'+result);\n})\n//è¾åºï¼è½¬æ¢å¤±è´¥äº\n\n\n\n# äºä»¶é©±å¨\n\nå½å¼æ­¥å½æ°æ§è¡æ¶ï¼ä¸ç¡®å®ä½æ¶æ§è¡å®æ¯ï¼åè°å½æ°ä¼è¢«åå¥å°ä¸ä¸ªäºä»¶å¾ªç¯éåï¼ç¶åå¾ä¸æ§è¡å¶ä»ä»£ç ï¼ç´å°å¼æ­¥å½æ°æ§è¡å®æåï¼æä¼å¼å§å¤çäºä»¶å¾ªç¯ï¼è°ç¨ç¸åºçåè°å½æ°ãäºä»¶å¾ªç¯éåä¸ºåè¿ååºéåï¼æé¡ºåºæ§è¡ã\n\n\n# Node.jsçååNPM\n\nNode.jsæ ¹æ®CommonJSè§èå®ç°äºåæºå¶ï¼CommomJS APIå®ä¹å¾å¤ç¨äºéæµè§å¨çåºè¯¥ä½¿ç¨çæ®éåºç¨ç¨åºï¼Node.jså°±æ¯ä¸ä¸ªéæµè§å¨çåºç¨ï¼CommonJSæ¯ä¸ç§è§èï¼Node.jsæ¯è¿ç§è§èçé¨åå®ç°ã\n\n\n# åçæ¦å¿µ\n\nååæ¨¡åæ²¡ææ¬è´¨çåºå«ï¼åæ¯å¨æ¨¡åçåºç¡ä¸æ´è¿ä¸æ­¥çç»ç»JavaSriptä»£ç çç®å½ã\n\nåç®å½ç»æï¼\n\nè§èçåç»æ         ä½ç¨\npackage.json   é¡¶å±ç®å½çåæè¿°æä»¶ï¼è¯´ææä»¶ï¼JSONå­ç¬¦ä¸²æè¿°)\nbin            å¯æ§è¡çäºè¿å¶æä»¶\nlib            å­æ¾JSæä»¶çç®å½\ndoc            ææ¡£\ntest           å­æ¾ååæµè¯ç¨ä¾çä»£ç \n\n\n# NPMçæ¦å¿µ\n\nå¨ç§°ä¸ºNode.js Package Manage,æä¸¤ç§å«ä¹ï¼ä¸ç§æ¯Node.jsçå¼æ¾æ¨¡åç»è®°åç®¡çç³»ç»ï¼æ¯ä¸ä¸ªNPMç½ç«:www.npmjs.com,éé¢ææçåé½æ¯éè¿Node.jså®ç°çã\n\nå¦ä¸ç§å«ä¹æ¯Node.jsçåç®¡çå·¥å·ï¼å½ä»¤è¡ä¸çè½¯ä»¶ï¼æ¯å¦ï¼npm install åå\n\nNPMæ¯éNode.jsä¸åå®è£çã\n\n\n# åºæ¬åºç¨\n\n> npm install åå\n\nå®è£åï¼Node.jsä¼èªå¨å¨é¡¹ç®å½åæ ¹ç®å½ä¸åå»ºä¸ä¸ªç®å½ï¼åä¸ºnode_modules,ç¶åæç¬¬ä¸æ¹åèªå¨æ¾å¨è¯¥ç®å½ä¸ãnode_moduleså°±æ¯ä¸é¨ç¨äºæ¾ç½®ç¬¬ä¸æ¹åçã\n\n\n# åæ¨¡åå è½½è§å\n\nï¼1ï¼å è½½æ¶ï¼é»è®¤ä¸ºæ ¸å¿æ¨¡åï¼è¥ä¸æ¯ï¼åä¼å»node_modulesç®å½ä¸å¯»æ¾ã\n\nï¼2ï¼å¦ææ¾å°äºï¼Node.jså°ä¼æ¾å°è¯¥ç®å½ä¸çpackage.jsonæä»¶è·åmainå±æ§å¼ï¼æ ¹æ®mainå±æ§æå®çè·¯å¾å¼è¿è¡å è½½ã",normalizedContent:"# å¼æ­¥ç¼ç¨\n\njavascriptçæ§è¡ç¯å¢æ¯åçº¿ç¨çï¼åçº¿ç¨ä¸æ¬¡åªè½å®æä¸ä¸ªä»»å¡ï¼å¦ææå¤ä¸ªä»»å¡ï¼å°±éè¦ç­å¾åé¢ä¸ä¸ªä»»å¡å®æåï¼åæ§è¡åé¢çä¸ä¸ªä»»å¡ãå¸¸è§çæµè§å¨æ ååºå°±æ¯æä¸æ®µjsä»£ç é¿æ¶é´è¿è¡é æçã\n\nä¸ºè§£å³åçº¿ç¨é»å¡çé®é¢ï¼node.jsä¸­å å¥äºå¼æ­¥ç¼ç¨æ¨¡åï¼ä¿è¯äºnode.jså¿«éååºï¼ååå©ç¨cpuã\n\n\n# åæ­¥åå¼æ­¥\n\n 1. åæ­¥ï¼ä»£ç æç§é¡ºåºä¾æ¬¡æ§è¡\n\nconsole.log('èµ·åº');\nconsole.log('èåè¯');\nfunction eatbreakfast(){\n    console.log('æ©é¤åå®äº');\n}\neatbreakfast();\nconsole.log('å»ä¸å­¦');\n\n\n 2. å¼æ­¥ï¼\n\nconsole.log('èµ·åº');\nconsole.log('èåè¯');\nfunction eatbreakfast(){\n    console.log('å¼å§åæ©é¤äº');\n    //settimeoutæ¯ä¸ä¸ªå¼æ­¥å½æ°ï¼ä¸ä¼é»å¡åé¢ä»£ç çç»§ç»­æ§è¡\n    settimeout(function(){\n        console.log('æ©é¤åå®äº');\n    },0);\n}\neatbreakfast();\nconsole.log('å»ä¸å­¦');\n//ç¸å½äºè¾¹å»å­¦æ ¡ï¼è¾¹åæ©é¤\n//è¾åºï¼èµ·åºï¼èåè¯ï¼å¼å§åæ©é¤äºï¼å»ä¸å­¦ï¼æ©é¤åå®äº\n\n\n\n# åè°å½æ°\n\nåè°å½æ°æ¯æå½æ°å¯ä»¥è¢«ä¼ éå°å¦ä¸ä¸ªå½æ°ä¸­ï¼ç¶åè¢«è°ç¨çå½¢å¼ï¼å¸åçåºç¨å°±æ¯å¼æ­¥å½æ°çå¼å¸¸å¤çã\n\n 1. åæ­¥ä»£ç ä¸­ä½¿ç¨try...catchå¤çå¼å¸¸\n\n//åæ­¥ä»£ç å¤çå¼å¸¸\nfunction parsejsonstrtoobj(str){\n    //ç¨äºä»ä¸ä¸ªå­ç¬¦ä¸²ä¸­è§£æåºjsonå¯¹è±¡\n    return json.parse(str);\n}\n//å¯¹äºåæ­¥ä»£ç ï¼å¯ä»¥ä½¿ç¨try...catchæ¥æè·å¼å¸¸\ntry{\n    let obj = parsejsonstrtoobj('foo');\n    console.log(obj);\n}catch (e) {\n    console.log('è½¬æ¢å¤±è´¥äº');\n}\n\n//è¾åºï¼è½¬æ¢å¤±è´¥äº\n\n\n 2. å¼æ­¥ä»£ç æ æ³ä½¿ç¨try...catchå¤çå¼å¸¸\n\n//å¼æ­¥ä»£ç æ æ³å¤çå¼å¸¸\nfunction parsejsonstrtoobj(str){\n    settimeout(function(){\n            return json.parse(str);\n    },0)\n}\ntry{\n    let obj = parsejsonstrtoobj('foo');\n    console.log(obj);\n}catch (e) {\n    console.log('è½¬æ¢å¤±è´¥äº');\n}\n\n//æåä¼æ¥éï¼è¯´æå¼æ­¥ä»£ç æ æ³å¤çå¼å¸¸\n\n\n 3. ä½¿ç¨åè°å½æ°æ¥æ¶å¼æ­¥ä»£ç çæ§è¡ç»æ\n\n//try...catchåå¨å¼æ­¥ä»£ç ä¸­\nfunction parsejsonstrtoobj(str){\n    settimeout(function(){\n        try{\n            return json.parse(str);//æè¿åå¼ï¼ä½æ¯æ æ³æ¥æ¶\n        }catch (e) {\n            console.log('è½¬æ¢å¤±è´¥äº');\n        }\n    },0)\n}\nlet obj = parsejsonstrtoobj('foo');\nconsole.log(obj);\n\n//è¾åºï¼undefined è½¬æ¢å¤±è´¥äº\n\n\næ ¹æ®æ­¤æåºåè°å½æ°çè®¾è®¡ï¼å³å½ä½¿ç¨å¼æ­¥ä»£ç å»åä¸ä»¶äºæ¶ï¼ä¸è½é¢æµè¿ä»¶äºä»ä¹æ¶ååå®ï¼å¶ä»çäºæè¿å¨ç»§ç»­ï¼è¿æ¶å¯ç»å¼æ­¥ä»£ç åå¤ä¸ä¸ªåè£¹ï¼å½å¼æ­¥ä»£ç æäºæ§è¡ç»ææ¶ï¼å¯ä»¥å°ç»ææ¾å¨è¿ä¸ªåè£¹éï¼éè¦å¨åªéä½¿ç¨è¿ä¸ªç»æå°±ä»åè£¹ååºã\n\nåè°å½æ°è®¾è®¡ç3ä¸ªçº¦å®ï¼\n\nï¼1ï¼ å½æ°åéå¸¸ä¸ºcallback,å¨å°è£å¼æ­¥æ§è¡ä»£ç æ¶ï¼ä¼åæcallbackä½ä¸ºå½æ°æåä¸ä¸ªåæ°åºç°\n\nfunction å½æ°å(arg1,arg2,callback){}\n\n\nï¼2ï¼æä»£ç ä¸­åºç°çéè¯¯ä½ä¸ºcallbackåè°å½æ°çç¬¬ä¸ä¸ªåæ°è¿è¡ä¼ é,è¿åç»æä½ä¸ºç¬¬äºä¸ªåæ°\n\ncallback(err,result);\n\n\næ¹åä¸é¢å½æ°\n\nfunction parsejsonstrtoobj(str,callback){\n    settimeout(function(){\n        try{\n            let obj = json.parse(str);\n            callback(null,obj);\n        }catch (e) {\n            callback(e,null);\n        }\n    },0)\n}\nparsejsonstrtoobj('foo',function(err,result){\n    if(err){\n        return console.log('è½¬æ¢å¤±è´¥äº');\n    }\n    console.log('è½¬æ¢æåï¼'+result);\n})\n//è¾åºï¼è½¬æ¢å¤±è´¥äº\n\n\n\n# äºä»¶é©±å¨\n\nå½å¼æ­¥å½æ°æ§è¡æ¶ï¼ä¸ç¡®å®ä½æ¶æ§è¡å®æ¯ï¼åè°å½æ°ä¼è¢«åå¥å°ä¸ä¸ªäºä»¶å¾ªç¯éåï¼ç¶åå¾ä¸æ§è¡å¶ä»ä»£ç ï¼ç´å°å¼æ­¥å½æ°æ§è¡å®æåï¼æä¼å¼å§å¤çäºä»¶å¾ªç¯ï¼è°ç¨ç¸åºçåè°å½æ°ãäºä»¶å¾ªç¯éåä¸ºåè¿ååºéåï¼æé¡ºåºæ§è¡ã\n\n\n# node.jsçåånpm\n\nnode.jsæ ¹æ®commonjsè§èå®ç°äºåæºå¶ï¼commomjs apiå®ä¹å¾å¤ç¨äºéæµè§å¨çåºè¯¥ä½¿ç¨çæ®éåºç¨ç¨åºï¼node.jså°±æ¯ä¸ä¸ªéæµè§å¨çåºç¨ï¼commonjsæ¯ä¸ç§è§èï¼node.jsæ¯è¿ç§è§èçé¨åå®ç°ã\n\n\n# åçæ¦å¿µ\n\nååæ¨¡åæ²¡ææ¬è´¨çåºå«ï¼åæ¯å¨æ¨¡åçåºç¡ä¸æ´è¿ä¸æ­¥çç»ç»javasriptä»£ç çç®å½ã\n\nåç®å½ç»æï¼\n\nè§èçåç»æ         ä½ç¨\npackage.json   é¡¶å±ç®å½çåæè¿°æä»¶ï¼è¯´ææä»¶ï¼jsonå­ç¬¦ä¸²æè¿°)\nbin            å¯æ§è¡çäºè¿å¶æä»¶\nlib            å­æ¾jsæä»¶çç®å½\ndoc            ææ¡£\ntest           å­æ¾ååæµè¯ç¨ä¾çä»£ç \n\n\n# npmçæ¦å¿µ\n\nå¨ç§°ä¸ºnode.js package manage,æä¸¤ç§å«ä¹ï¼ä¸ç§æ¯node.jsçå¼æ¾æ¨¡åç»è®°åç®¡çç³»ç»ï¼æ¯ä¸ä¸ªnpmç½ç«:www.npmjs.com,éé¢ææçåé½æ¯éè¿node.jså®ç°çã\n\nå¦ä¸ç§å«ä¹æ¯node.jsçåç®¡çå·¥å·ï¼å½ä»¤è¡ä¸çè½¯ä»¶ï¼æ¯å¦ï¼npm install åå\n\nnpmæ¯énode.jsä¸åå®è£çã\n\n\n# åºæ¬åºç¨\n\n> npm install åå\n\nå®è£åï¼node.jsä¼èªå¨å¨é¡¹ç®å½åæ ¹ç®å½ä¸åå»ºä¸ä¸ªç®å½ï¼åä¸ºnode_modules,ç¶åæç¬¬ä¸æ¹åèªå¨æ¾å¨è¯¥ç®å½ä¸ãnode_moduleså°±æ¯ä¸é¨ç¨äºæ¾ç½®ç¬¬ä¸æ¹åçã\n\n\n# åæ¨¡åå è½½è§å\n\nï¼1ï¼å è½½æ¶ï¼é»è®¤ä¸ºæ ¸å¿æ¨¡åï¼è¥ä¸æ¯ï¼åä¼å»node_modulesç®å½ä¸å¯»æ¾ã\n\nï¼2ï¼å¦ææ¾å°äºï¼node.jså°ä¼æ¾å°è¯¥ç®å½ä¸çpackage.jsonæä»¶è·åmainå±æ§å¼ï¼æ ¹æ®mainå±æ§æå®çè·¯å¾å¼è¿è¡å è½½ã",charsets:{cjk:!0}},{title:"ç§»å¨ç«¯éé",frontmatter:{title:"ç§»å¨ç«¯éé",date:"2020-11-16T16:01:54.000Z",categories:"ç§»å¨ç«¯"},regularPath:"/mobile/adaptation.html",relativePath:"mobile/adaptation.md",key:"v-6770af3f",path:"/mobile/adaptation.html",headers:[{level:2,title:"ç§»å¨ç«¯éé",slug:"ç§»å¨ç«¯éé",normalizedTitle:"ç§»å¨ç«¯éé",charIndex:2},{level:3,title:"é»è¾åç´ ä¸ç©çåç´ ",slug:"é»è¾åç´ ä¸ç©çåç´ ",normalizedTitle:"é»è¾åç´ ä¸ç©çåç´ ",charIndex:12},{level:3,title:"å¸¸è§é¿åº¦åä½",slug:"å¸¸è§é¿åº¦åä½",normalizedTitle:"å¸¸è§é¿åº¦åä½",charIndex:321},{level:3,title:"ç§»å¨ç«¯ 1px",slug:"ç§»å¨ç«¯-1px",normalizedTitle:"ç§»å¨ç«¯ 1px",charIndex:1838},{level:3,title:"ééæ¡ä¾",slug:"ééæ¡ä¾",normalizedTitle:"ééæ¡ä¾",charIndex:3234},{level:3,title:"å¸¸è§ç§»å¨ç«¯ééæ¹æ¡",slug:"å¸¸è§ç§»å¨ç«¯ééæ¹æ¡",normalizedTitle:"å¸¸è§ç§»å¨ç«¯ééæ¹æ¡",charIndex:4033}],lastUpdated:"11/2/2023, 2:16:23 PM",lastUpdatedTimestamp:1698905783e3,headersStr:"ç§»å¨ç«¯éé é»è¾åç´ ä¸ç©çåç´  å¸¸è§é¿åº¦åä½ ç§»å¨ç«¯ 1px ééæ¡ä¾ å¸¸è§ç§»å¨ç«¯ééæ¹æ¡",content:'# ç§»å¨ç«¯éé\n\n\n# é»è¾åç´ ä¸ç©çåç´ \n\n * pt: html cssä¸­çä½¿ç¨çåä½åç´ px: å®éä¸æçæ¯é»è¾åç´ pt\n\n * px: photoshopæµéä¸­çä½æ¯å®éä¸æçæ¯ç©çåç´ , ç©çåç´ å³è¡¨ç¤ºçæ¯ä¸ä¸ªç¹, å¤§å°åºå®\n\n * ä¸ä¸ªptå¯ä»¥åå«å¤ä¸ªç©çåç´ px\n\n * å¨iphone6ä¸­ä¸ä¸ªåä½çé»è¾åç´ åå«2ä¸ªç©çåç´ ï¼iphoneçåè¾¨çä¸º375*667å®éä¸æçæ¯é»è¾åç´ ä¸º375*667, æä»¥ä¸è¬ç§»å¨ç«¯çè®¾è®¡å¾çº¸ä¸è¬æ¯ç»çæ¯750*1334, æ¯å ä¸ºä¸ä¸ªé»è¾åç´ ptåå«ä¸¤ä¸ªç©çåç´ px\n\n * ä¸åè®¾å¤ä¸çåè¾¨çä¸å, å¨iphone6sä¸­ ä¸ä¸ªé»è¾åç´ ptåå«ä¸ä¸ªç©çåç´ px å³ 1pt = 3px\n\n\n# å¸¸è§é¿åº¦åä½\n\n# em\n\nemæ¯ç¸å¯¹é¿åº¦åä½ãå®çåä½é¿åº¦æ¯æ ¹æ®åç´ çææ¬åç´é¿åº¦æ¥å³å®çãå¯ä»¥ä½ç¨å¨widthãheightãline-heightãmarginãpaddingãborderç­æ ·å¼çè®¾ç½®ä¸ã å¦å½åå¯¹è¡åææ¬çå­ä½å°ºå¯¸æªè¢«äººä¸ºè®¾ç½®ï¼åç¸å¯¹äºæµè§å¨çé»è®¤å­ä½å°ºå¯¸ã é»è®¤1em=16pxãå¦æå¨bodyéæ©å¨ä¸­å£°æfont-size=62.5%,å1em=10pxã\n\n<style>\n\t.parent{ \n\t\t\tfont-size:5em; /*80px*/\n\t\t\theight:10em;/*800px*/\n\t}\n  .child{\n\t\t\tfont-size:2em;/*160px*/\n\t\t\theight:2em;/*320px*/\n\t}\n</style>\n\n<body>\n\t<div class="parent">\n    <div class="child"></div>\n\t</div>\n</body>\n\n\nå¨ä¸è®¾ç½®åç´ font-sizeçæåµä¸ï¼emæ»æ¯æ ¹æ®ç¶åç´ çfont-sizeæ¥ç¡®å®é¿åº¦ï¼å³ä½¿åç´ è®¾ç½®äºfont-sizeï¼å¤æ¬¡åµå¥ä½¿ç¨emä¹å¾å¾ä¼é æçå¿½ï¼ä¸ä»ä½¿ç¨åéè¦å¤§éè®¡ç®ï¼èä¸ä¸è½ä¿è¯æ²¡ææ¼ç½ä¹é±¼ãè¿å°æ¯ä¸ä¸ªç¹æèä½æççå·¥ä½ã äºæ¯æäºrem.\n\n# rem\n\nremä¸æ¯ä¾æ®ç¶åç´ ââèæ¯ä¾æ®æ ¹åç´ ï¼root elementï¼æ¥ç¡®å®å¶é¿åº¦ã\n\næä»¬ä¸è¬ç»æ ¹åç´ è®¾ç½®ä¸ä¸ªå®¹æè®¡ç®çfont-size\n\n<style>\n    html {\n        font-size: 62.5%;   /* 10px */\n    }\n    div {\n        font-size: 2.4rem;  /* 24px */\n        width: 64rem;   /* 640px */\n        border: 0.1rem solid #ccc;  /* 1px */\n    }\n</style>\n<body>\n    <div class="div1">\n        <div class="div2"></div>\n    </div>\n</body>\n\n\n# rpx\n\nè®¾å¤             RPXæ¢ç®PX (å±å¹å®½åº¦/750)   PXæ¢ç®RPX (750/å±å¹å®½åº¦)\niPhone5        1rpx = 0.42px        1px = 2.34rpx\niPhone6        1rpx = 0.5px         1px = 2rpx\niPhone6 Plus   1rpx = 0.552px       1px = 1.81rpx\n\n * rpxï¼responsive pixelï¼: å¯ä»¥æ ¹æ®å±å¹å®½åº¦è¿è¡èªéåºãè§å®å±å¹å®½ä¸º750rpxãå¦å¨ iPhone6 ä¸ï¼å±å¹å®½åº¦ä¸º375pxï¼å±æ750ä¸ªç©çåç´ ï¼å750rpx = 375px = 750ç©çåç´ ï¼1rpx = 0.5px = 1ç©çåç´ ã\n * å»ºè®®å°ç¨åºçè®¾è®¡ç¨¿ä»¥750 x 1334 çç©çåè¾¨çè¿è¡è®¾è®¡\n\n# vw,vh\n\n * vwåvhæ¯css3ä¸­çæ°åä½ï¼æ¯ä¸ç§è§çªåä½ï¼å¨å°ç¨åºä¸­ä¹åæ ·éç¨ã\n * å°ç¨åºä¸­ï¼çªå£å®½åº¦åºå®ä¸º100vwï¼å°çªå£å®½åº¦å¹³ååæ100ä»½ï¼1ä»½æ¯1vw\n * å°ç¨åºä¸­ï¼çªå£é«åº¦åºå®ä¸º100vh ï¼å°çªå£é«åº¦å¹³ååæ100ä»½ï¼1ä»½æ¯1vh\n * æä»¥ï¼æä»¬å¨å°ç¨åºä¸­ä¹å¯ä»¥ä½¿ç¨vwãvhä½ä¸ºå°ºå¯¸åä½ä½¿ç¨å¨å¸å±ä¸­è¿è¡å¸å±ï¼ä½æ¯ä¸è¬æåµä¸ï¼ç¾åæ¯+rpxå°±å·²ç»è¶³å¤ä½¿ç¨äº,æä»¥å®ä»¬çåºåºæºä¼å¾å°ã\n\n\n# ç§»å¨ç«¯ 1px\n\n# åå \n\n * DPR(devicePixelRatio) è®¾å¤åç´ æ¯ = ç©çåç´  / cssåç´  ï¼å®æ¯é»è®¤ç¼©æ¾ä¸º100%çå±å¹ä¸ï¼è®¾å¤åç´ åcssåç´ çæ¯å¼ã\n * ç®åæ¯è¾ä¸»æµçè®¾å¤çDPR=2æ3ï¼æä»¥ï¼ å½æä»¬çDPRä¸º2ï¼ä¹å°±æ¯2åå±æ¶ï¼å½ç©çåç´ ï¼è®¾å¤åç´ ï¼ä¸º1pxçæ¶åï¼æä»¬çcssåç´ åºè¯¥æ¯0.5pxãå½DPR=3ï¼ç©çåç´ ä¸º1pxæ¶ï¼cssåç´ åºè¯¥ä¸º1/3pxã\n\n# è§£å³æ¹æ¡\n\n# scale\n\nå¦æå¨ä¸ä¸ªåç´ ä¸ä½¿ç¨scaleæ¶ä¼å¯¼è´æ´ä¸ªåç´ åæ¶ç¼©æ¾ï¼æä»¥åºè¯¥å¨è¯¥åç´ çä¼ªåç´ ä¸è®¾ç½®scaleå±æ§ã\n\n// éè¿ä¼ªåç´ å®ç° 0.5px border\n.border::after {\n    content: "";\n    box-sizing: border-box; // ä¸ºäºä¸ååç´ ç­å¤§\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 200%; \n    height: 200%; \n    border: 1px solid gray;\n    transform: scale(0.5); \n    transform-origin: 0 0;\n}\n\n// éè¿ä¼ªåç´ å®ç° 0.5px ç»çº¿\n.line::after {\n    content: \'\';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 200%;\n    height: 1px;\n    background: #b3b4b8;\n    transform: scale(0.5);\n    transform-origin: 0 0;\n}\n\n\n> ä¸ºä»ä¹è¦åæ¾å¤§ 200% åç¼©å° 0.5ï¼\n> \n> ä¸ºäºåªç¼©æ¾ border 1px çç²ç»ï¼èä¿è¯ border çå¤§å°ä¸åãå¦æç´æ¥ scale(0.5) çè¯ border æ´ä½å¤§å°ä¹ä¼åæäºåä¹ä¸ï¼æä»¥åæ¾å¤§ 200%ï¼æ¾å¤§çæ¶å border çç²ç»æ¯ä¸ä¼è¢«æ¾å¤§çï¼åç¼©æ¾ï¼å°±è½ä¿æåå¤§å°ä¸åäºã\n\n# linear-gradient\n\néè¿çº¿æ§æ¸åï¼ä¹å¯ä»¥å®ç°ç§»å¨ç«¯1pxççº¿ãåçå¤§è´æ¯ä½¿ç¨æ¸åè²ï¼ä¸é¨åä¸ºç½è²ï¼ä¸é¨åä¸ºé»è²ãè¿æ ·å°±å¯ä»¥å°çº¿ä»è§è§ä¸çåªæ1pxã\n\nç±äºæ¯éè¿èæ¯é¢è²æ¸åå®ç°çï¼æä»¥è¿éè¦ä½¿ç¨ä¼ªåç´ å¹¶ä¸è®¾ç½®ä¼ªåç´ çé«åº¦ã å½ç¶ï¼ä¹å¯ä»¥ä¸ä½¿ç¨ä¼ªåç´ ï¼ä½æ¯å°±ä¼å¢å ä¸ä¸ªæ²¡æä»»ä½æä¹çç©ºæ ç­¾äºã\n\ndiv.linear::after {\n    display: block;\n    content: \'\';\n    height: 1px;\n    background: linear-gradient(0, #fff, #000);\n}\n\n\n# box-shadow\n\néè¿box-shaodowæ¥å®ç°1pxä¹å¯ä»¥ï¼å®ç°åçæ¯å°çºµåæ çshadowè®¾ç½®ä¸º0.5pxå³å¯ãbox-shadowå±æ§å¨ChromeåFirefoxä¸æ¯æå°æ°è®¾ç½®ï¼ä½æ¯å¨Safariä¸ä¸æ¯æãæä»¥ä½¿ç¨è¯¥æ¹æ³è®¾ç½®ç§»å¨ç«¯1pxæ¶åºè¯¥æéä½¿ç¨ã\n\ndiv.shadow {\n    box-shadow: 0 0.5px 0 0 #000;\n}\n\n\n\n# ééæ¡ä¾\n\nè®¾è®¡ç»åº750pxçè®¾è®¡ç¨¿ï¼ä¹æç§750pxæ¥å¼åh5é¡µé¢ï¼æä¹å¨å°ç¨åºç webview é¡µé¢ä¸­ééï¼\n\n * transform: scale\n * hack ä¸ºå æ»¡å¨å±çéæçå­ï¼å ä¸ºå°ç¨åºå­å¨é¡¶é¨æ ï¼æä»¥ä¸è½ç¨ screenHeight\n * toFixed æ¯ä¸ºäºåæ´ï¼é²æ­¢å°æ°åºç° bug\n\nfunction autoAdapt() {\n  var screenWidth = hack.offsetWidth\n  var screenHeight = hack.offsetHeight\n  var scale = (screenWidth / 750).toFixed(2)\n  if (scale < 1) {\n    main.style.width = `${(screenWidth / scale).toFixed(0)}px`\n    main.style.height = `${(screenHeight / scale).toFixed(0)}px`\n    main.style.overflow = \'auto\'\n    document.body.style.transform = `scale(${scale})`\n    document.body.style.transformOrigin = \'0% 0%\'\n    document.body.style.overflow = `hidden`\n  } else {\n    main.style.transform = `scale(${scale})`\n    main.style.transformOrigin = \'50% 0%\'\n  }\n}\nautoAdapt()\n\nwindow.onresize = function() {\n  autoAdapt()\n}\n\n\n\n# å¸¸è§ç§»å¨ç«¯ééæ¹æ¡\n\n * media queries\n * flex å¸å±\n * rem + viewport\n * vh vw\n * ç¾åæ¯\n\n# ä¸ãMeida Queries\n\nmeida queries çæ¹å¼å¯ä»¥è¯´æ¯ææ©æéç¨çå¸å±æ¹å¼ï¼å®ä¸»è¦æ¯éè¿æ¥è¯¢è®¾å¤çå®½åº¦æ¥æ§è¡ä¸åç css ä»£ç ï¼æç»è¾¾å°çé¢çéç½®ã\n\næ ¸å¿è¯­æ³:\n\n@media only screen and (max-width: 374px) {\n  /* iphone5 æèæ´å°çå°ºå¯¸ï¼ä»¥ iphone5 çå®½åº¦ï¼320pxï¼æ¯ä¾è®¾ç½®æ ·å¼*/\n}\n@media only screen and (min-width: 375px) and (max-width: 413px) {\n  /* iphone6/7/8 å iphone x */\n}\n@media only screen and (min-width: 414px) {\n  /* iphone6p æèæ´å¤§çå°ºå¯¸ï¼ä»¥ iphone6p çå®½åº¦ï¼414pxï¼æ¯ä¾è®¾ç½®æ ·å¼ */\n}\n\n\nä¼ç¹ï¼\n\n * media query å¯ä»¥åå°è®¾å¤åç´ æ¯çå¤æ­ï¼æ¹æ³ç®åï¼ææ¬ä½ï¼ç¹å«æ¯éå¯¹ç§»å¨ç«¯å PC ç«¯ç»´æ¤åä¸å¥ä»£ç çæ¶åãç®åå Bootstrap ç­æ¡æ¶ä½¿ç¨è¿ç§æ¹å¼å¸å±\n * å¾çä¾¿äºä¿®æ¹ï¼åªéä¿®æ¹ css æä»¶\n * è°æ´å±å¹å®½åº¦çæ¶åä¸ç¨å·æ°é¡µé¢å³å¯ååºå¼å±ç¤º\n\nç¼ºç¹ï¼\n\n * ä»£ç éæ¯è¾å¤§ï¼ç»´æ¤ä¸æ¹ä¾¿\n * ä¸ºäºå¼é¡¾å¤§å±å¹æé«æ¸è®¾å¤ï¼ä¼é æå¶ä»è®¾å¤èµæºæµªè´¹ï¼ç¹å«æ¯å è½½å¾çèµæº\n * ä¸ºäºå¼é¡¾ç§»å¨ç«¯å PC ç«¯åèªååºå¼çå±ç¤ºææï¼é¾åä¼æå¤±åèªç¹æçäº¤äºæ¹å¼\n\n# äºãFlex å¼¹æ§å¸å±\n\nä»¥å¤©ç«çå®ç°æ¹å¼è¿è¡è¯´æï¼\n\nå®ç viewport æ¯åºå®çï¼<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">\n\né«åº¦å®æ­»ï¼å®½åº¦èªéåºï¼åç´ é½éç¨ px ååä½ã\n\néçå±å¹å®½åº¦ååï¼é¡µé¢ä¹ä¼è·çååï¼ææå°±å PC é¡µé¢çæµä½å¸å±å·®ä¸å¤ï¼å¨åªä¸ªå®½åº¦éè¦è°æ´çæ¶åä½¿ç¨ååºå¼å¸å±è°è°å°±è¡ï¼æ¯å¦ç½ææ°é»ï¼ï¼è¿æ ·å°±å®ç°äºãééãã\n\n# ä¸ãrem+viewport ç¼©æ¾\n\nå®ç°åçï¼\n\næ ¹æ® rem å°é¡µé¢æ¾å¤§ dpr å, ç¶å viewport è®¾ç½®ä¸º 1/dpr.\n\n * å¦ iphone6 plus ç dpr ä¸º 3, åé¡µé¢æ´ä½æ¾å¤§ 3 å, 1px(css åä½)å¨ plus ä¸é»è®¤ä¸º 3px(ç©çåç´ )\n * ç¶å viewport è®¾ç½®ä¸º 1/3, è¿æ ·é¡µé¢æ´ä½ç¼©ååå§å¤§å°. ä»èå®ç°é«æ¸ã\n\nè¿æ ·æ´ä¸ªç½é¡µå¨è®¾å¤åæ¾ç¤ºæ¶çé¡µé¢å®½åº¦å°±ä¼ç­äºè®¾å¤é»è¾åç´ å¤§å°ï¼ä¹å°±æ¯ device-widthãè¿ä¸ª device-width çè®¡ç®å¬å¼ä¸ºï¼\n\nè®¾å¤çç©çåè¾¨ç/(devicePixelRatio * scale)ï¼å¨ scale ä¸º 1 çæåµä¸ï¼device-width = è®¾å¤çç©çåè¾¨ç/devicePixelRatioã\n\n# åãrem å®ç°\n\nremæ¯ç¸å¯¹é¿åº¦åä½ï¼remæ¹æ¡ä¸­çæ ·å¼è®¾è®¡ä¸ºç¸å¯¹äºæ ¹åç´ font-sizeè®¡ç®å¼çåæ°ãæ ¹æ®å±å¹å®½åº¦è®¾ç½®htmlæ ç­¾çfont-sizeï¼å¨å¸å±æ¶ä½¿ç¨ rem åä½å¸å±ï¼è¾¾å°èªéåºçç®çã\n\nviewport æ¯åºå®çï¼<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">ã\n\néè¿ä»¥ä¸ä»£ç æ¥æ§å¶ rem åºåå¼(è®¾è®¡ç¨¿ä»¥ 720px å®½åº¦éåå®éå°ºå¯¸)\n\n!(function (d) {\n  var c = d.document;\n  var a = c.documentElement;\n  var b = d.devicePixelRatio;\n  var f;\n  function e() {\n    var h = a.getBoundingClientRect().width,\n      g;\n    if (b === 1) {\n      h = 720;\n    }\n    if (h > 720) h = 720; //è®¾ç½®åºåå¼çæéå¼\n    g = h / 7.2;\n    a.style.fontSize = g + "px";\n  }\n  if (b > 2) {\n    b = 3;\n  } else {\n    if (b > 1) {\n      b = 2;\n    } else {\n      b = 1;\n    }\n  }\n  a.setAttribute("data-dpr", b);\n  d.addEventListener(\n    "resize",\n    function () {\n      clearTimeout(f);\n      f = setTimeout(e, 200);\n    },\n    false\n  );\n  e();\n})(window);\n\n\ncss éè¿ sass é¢ç¼è¯ï¼è®¾ç½®éåç px å¼è½¬å rem çåé$px: (1/100)+rem;\n\nä¼ç¹ï¼\n\n * å¼å®¹æ§å¥½ï¼é¡µé¢ä¸ä¼å ä¸ºä¼¸ç¼©åçåå½¢ï¼èªéåºæææ´ä½³ã\n\nç¼ºç¹ï¼\n\n * ä¸æ¯çº¯ css ç§»å¨ééæ¹æ¡ï¼éè¦å¨å¤´é¨ååµä¸æ®µ jsèæ¬çå¬åè¾¨ççååæ¥å¨ææ¹åæ ¹åç´ çå­ä½å¤§å°ï¼cssæ ·å¼å js ä»£ç æä¸å®è¦åæ§ï¼å¹¶ä¸å¿é¡»å°æ¹åfont-sizeçä»£ç æ¾å¨ css æ ·å¼ä¹åã\n * å°æ°åç´ é®é¢ï¼æµè§å¨æ¸²ææå°çåä½æ¯åç´ ï¼åç´ æ ¹æ®å±å¹å®½åº¦èªéåºï¼éè¿ rem è®¡ç®åå¯è½ä¼åºç°å°æ°åç´ ï¼æµè§å¨ä¼å¯¹è¿é¨åå°æ°åèäºå¥ï¼æç§æ´æ°æ¸²æï¼æå¯è½æ²¡é£ä¹åç¡®ã\n\n# äºãçº¯ vw æ¹æ¡\n\nè§å£æ¯æµè§å¨ä¸­ç¨äºåç°ç½é¡µçåºåã\n\n * vw : 1vw ç­äº è§å£å®½åº¦ ç 1%\n * vh : 1vh ç­äº è§å£é«åº¦ ç **1% **\n * vmin : éå vw å vh ä¸­ æå° çé£ä¸ª\n * vmax : éå vw å vh ä¸­ æå¤§ çé£ä¸ª\n\nè½ç¶ vw è½æ´ä¼éçééï¼ä½æ¯è¿æ¯æç¹å°é®é¢ï¼å°±æ¯å®½ï¼é«æ²¡æ³éå¶ã\n\n$base_vw = 375;\n@function vw ($px) {\n    return ($px/$base_vw) * 100vw\n};\n\n\nä¼ç¹ï¼\n\n * çº¯ css ç§»å¨ç«¯ééæ¹æ¡ï¼ä¸å­å¨èæ¬ä¾èµé®é¢ã\n * ç¸å¯¹äº rem ä»¥æ ¹åç´ å­ä½å¤§å°çåæ°å®ä¹åç´ å¤§å°ï¼é»è¾æ¸æ°ç®åã\n\nç¼ºç¹ï¼\n\n * å­å¨ä¸äºå¼å®¹æ§é®é¢ï¼æäºæµè§å¨ä¸æ¯æ\n\n# å­ãvw + rem æ¹æ¡\n\n// scss è¯­æ³\n// è®¾ç½®htmlæ ¹åç´ çå¤§å° 750px->75 640px->64\n// å°å±å¹åæ10ä»½ï¼æ¯ä»½ä½ä¸ºæ ¹åç´ çå¤§å°ã\n$vw_fontsize: 75\n@function rem($px) {\n    // ä¾å¦ï¼ä¸ä¸ªdivçå®½åº¦ä¸º100pxï¼é£ä¹å®å¯¹åºçremåä½å°±æ¯ï¼100/æ ¹åç´ çå¤§å°ï¼* 1rem\n    @return ($px / $vw_fontsize) * 1rem;\n}\n$base_design: 750\nhtml {\n    // remä¸vwç¸å³è\n    font-size: ($vw_fontsize / ($base_design / 2)) * 100vw;\n    // åæ¶ï¼éè¿Media Queries éå¶æ ¹åç´ æå¤§æå°å¼\n    @media screen and (max-width: 320px) {\n        font-size: 64px;\n    }\n    @media screen and (min-width: 540px) {\n        font-size: 108px;\n    }\n}\n\n// body ä¹å¢å æå¤§æå°å®½åº¦éå¶ï¼é¿åé»è®¤100%å®½åº¦ç block åç´ è·é body èè¿å¤§è¿å°\nbody {\n    max-width: 540px;\n    min-width: 320px;\n}\n\n\n\n# ä¸ãç¾åæ¯\n\nä½¿ç¨ç¾åæ¯%å®ä¹å®½åº¦ï¼é«åº¦ç¨pxåºå®ï¼æ ¹æ®å¯è§åºåå®æ¶å°ºå¯¸è¿è¡è°æ´ï¼å°½å¯è½éåºåç§åè¾¨çï¼éå¸¸ä½¿ç¨max-width/min-widthæ§å¶å°ºå¯¸èå´è¿å¤§æèè¿å°ã\n\nä¼ç¹ï¼\n\n * åçç®åï¼ä¸å­å¨å¼å®¹æ§é®é¢\n\nç¼ºç¹ï¼\n\n * å¦æå±å¹å°ºåº¦è·¨åº¦å¤ªå¤§ï¼ç¸å¯¹è®¾è®¡ç¨¿è¿å¤§æèè¿å°çå±å¹ä¸è½æ­£å¸¸æ¾ç¤ºï¼å¨å¤§å±ææºææ¨ªç«å±åæ¢åºæ¯ä¸å¯è½ä¼å¯¼è´é¡µé¢åç´ è¢«æä¼¸åå½¢ï¼å­ä½å¤§å°æ æ³éå±å¹å¤§å°åçååã\n * è®¾ç½®çæ¨¡åçä¸åå±æ§æ¶ï¼å¶ç¾åæ¯è®¾ç½®çåèåç´ ä¸å¯ä¸ï¼å®¹æä½¿å¸å±é®é¢åå¾å¤æã\n\n> ä½èï¼åç«¯åé é¾æ¥ï¼https://juejin.cn/post/6899291168891207688 æ¥æºï¼æé',normalizedContent:'# ç§»å¨ç«¯éé\n\n\n# é»è¾åç´ ä¸ç©çåç´ \n\n * pt: html cssä¸­çä½¿ç¨çåä½åç´ px: å®éä¸æçæ¯é»è¾åç´ pt\n\n * px: photoshopæµéä¸­çä½æ¯å®éä¸æçæ¯ç©çåç´ , ç©çåç´ å³è¡¨ç¤ºçæ¯ä¸ä¸ªç¹, å¤§å°åºå®\n\n * ä¸ä¸ªptå¯ä»¥åå«å¤ä¸ªç©çåç´ px\n\n * å¨iphone6ä¸­ä¸ä¸ªåä½çé»è¾åç´ åå«2ä¸ªç©çåç´ ï¼iphoneçåè¾¨çä¸º375*667å®éä¸æçæ¯é»è¾åç´ ä¸º375*667, æä»¥ä¸è¬ç§»å¨ç«¯çè®¾è®¡å¾çº¸ä¸è¬æ¯ç»çæ¯750*1334, æ¯å ä¸ºä¸ä¸ªé»è¾åç´ ptåå«ä¸¤ä¸ªç©çåç´ px\n\n * ä¸åè®¾å¤ä¸çåè¾¨çä¸å, å¨iphone6sä¸­ ä¸ä¸ªé»è¾åç´ ptåå«ä¸ä¸ªç©çåç´ px å³ 1pt = 3px\n\n\n# å¸¸è§é¿åº¦åä½\n\n# em\n\nemæ¯ç¸å¯¹é¿åº¦åä½ãå®çåä½é¿åº¦æ¯æ ¹æ®åç´ çææ¬åç´é¿åº¦æ¥å³å®çãå¯ä»¥ä½ç¨å¨widthãheightãline-heightãmarginãpaddingãborderç­æ ·å¼çè®¾ç½®ä¸ã å¦å½åå¯¹è¡åææ¬çå­ä½å°ºå¯¸æªè¢«äººä¸ºè®¾ç½®ï¼åç¸å¯¹äºæµè§å¨çé»è®¤å­ä½å°ºå¯¸ã é»è®¤1em=16pxãå¦æå¨bodyéæ©å¨ä¸­å£°æfont-size=62.5%,å1em=10pxã\n\n<style>\n\t.parent{ \n\t\t\tfont-size:5em; /*80px*/\n\t\t\theight:10em;/*800px*/\n\t}\n  .child{\n\t\t\tfont-size:2em;/*160px*/\n\t\t\theight:2em;/*320px*/\n\t}\n</style>\n\n<body>\n\t<div class="parent">\n    <div class="child"></div>\n\t</div>\n</body>\n\n\nå¨ä¸è®¾ç½®åç´ font-sizeçæåµä¸ï¼emæ»æ¯æ ¹æ®ç¶åç´ çfont-sizeæ¥ç¡®å®é¿åº¦ï¼å³ä½¿åç´ è®¾ç½®äºfont-sizeï¼å¤æ¬¡åµå¥ä½¿ç¨emä¹å¾å¾ä¼é æçå¿½ï¼ä¸ä»ä½¿ç¨åéè¦å¤§éè®¡ç®ï¼èä¸ä¸è½ä¿è¯æ²¡ææ¼ç½ä¹é±¼ãè¿å°æ¯ä¸ä¸ªç¹æèä½æççå·¥ä½ã äºæ¯æäºrem.\n\n# rem\n\nremä¸æ¯ä¾æ®ç¶åç´ ââèæ¯ä¾æ®æ ¹åç´ ï¼root elementï¼æ¥ç¡®å®å¶é¿åº¦ã\n\næä»¬ä¸è¬ç»æ ¹åç´ è®¾ç½®ä¸ä¸ªå®¹æè®¡ç®çfont-size\n\n<style>\n    html {\n        font-size: 62.5%;   /* 10px */\n    }\n    div {\n        font-size: 2.4rem;  /* 24px */\n        width: 64rem;   /* 640px */\n        border: 0.1rem solid #ccc;  /* 1px */\n    }\n</style>\n<body>\n    <div class="div1">\n        <div class="div2"></div>\n    </div>\n</body>\n\n\n# rpx\n\nè®¾å¤             rpxæ¢ç®px (å±å¹å®½åº¦/750)   pxæ¢ç®rpx (750/å±å¹å®½åº¦)\niphone5        1rpx = 0.42px        1px = 2.34rpx\niphone6        1rpx = 0.5px         1px = 2rpx\niphone6 plus   1rpx = 0.552px       1px = 1.81rpx\n\n * rpxï¼responsive pixelï¼: å¯ä»¥æ ¹æ®å±å¹å®½åº¦è¿è¡èªéåºãè§å®å±å¹å®½ä¸º750rpxãå¦å¨ iphone6 ä¸ï¼å±å¹å®½åº¦ä¸º375pxï¼å±æ750ä¸ªç©çåç´ ï¼å750rpx = 375px = 750ç©çåç´ ï¼1rpx = 0.5px = 1ç©çåç´ ã\n * å»ºè®®å°ç¨åºçè®¾è®¡ç¨¿ä»¥750 x 1334 çç©çåè¾¨çè¿è¡è®¾è®¡\n\n# vw,vh\n\n * vwåvhæ¯css3ä¸­çæ°åä½ï¼æ¯ä¸ç§è§çªåä½ï¼å¨å°ç¨åºä¸­ä¹åæ ·éç¨ã\n * å°ç¨åºä¸­ï¼çªå£å®½åº¦åºå®ä¸º100vwï¼å°çªå£å®½åº¦å¹³ååæ100ä»½ï¼1ä»½æ¯1vw\n * å°ç¨åºä¸­ï¼çªå£é«åº¦åºå®ä¸º100vh ï¼å°çªå£é«åº¦å¹³ååæ100ä»½ï¼1ä»½æ¯1vh\n * æä»¥ï¼æä»¬å¨å°ç¨åºä¸­ä¹å¯ä»¥ä½¿ç¨vwãvhä½ä¸ºå°ºå¯¸åä½ä½¿ç¨å¨å¸å±ä¸­è¿è¡å¸å±ï¼ä½æ¯ä¸è¬æåµä¸ï¼ç¾åæ¯+rpxå°±å·²ç»è¶³å¤ä½¿ç¨äº,æä»¥å®ä»¬çåºåºæºä¼å¾å°ã\n\n\n# ç§»å¨ç«¯ 1px\n\n# åå \n\n * dpr(devicepixelratio) è®¾å¤åç´ æ¯ = ç©çåç´  / cssåç´  ï¼å®æ¯é»è®¤ç¼©æ¾ä¸º100%çå±å¹ä¸ï¼è®¾å¤åç´ åcssåç´ çæ¯å¼ã\n * ç®åæ¯è¾ä¸»æµçè®¾å¤çdpr=2æ3ï¼æä»¥ï¼ å½æä»¬çdprä¸º2ï¼ä¹å°±æ¯2åå±æ¶ï¼å½ç©çåç´ ï¼è®¾å¤åç´ ï¼ä¸º1pxçæ¶åï¼æä»¬çcssåç´ åºè¯¥æ¯0.5pxãå½dpr=3ï¼ç©çåç´ ä¸º1pxæ¶ï¼cssåç´ åºè¯¥ä¸º1/3pxã\n\n# è§£å³æ¹æ¡\n\n# scale\n\nå¦æå¨ä¸ä¸ªåç´ ä¸ä½¿ç¨scaleæ¶ä¼å¯¼è´æ´ä¸ªåç´ åæ¶ç¼©æ¾ï¼æä»¥åºè¯¥å¨è¯¥åç´ çä¼ªåç´ ä¸è®¾ç½®scaleå±æ§ã\n\n// éè¿ä¼ªåç´ å®ç° 0.5px border\n.border::after {\n    content: "";\n    box-sizing: border-box; // ä¸ºäºä¸ååç´ ç­å¤§\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 200%; \n    height: 200%; \n    border: 1px solid gray;\n    transform: scale(0.5); \n    transform-origin: 0 0;\n}\n\n// éè¿ä¼ªåç´ å®ç° 0.5px ç»çº¿\n.line::after {\n    content: \'\';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 200%;\n    height: 1px;\n    background: #b3b4b8;\n    transform: scale(0.5);\n    transform-origin: 0 0;\n}\n\n\n> ä¸ºä»ä¹è¦åæ¾å¤§ 200% åç¼©å° 0.5ï¼\n> \n> ä¸ºäºåªç¼©æ¾ border 1px çç²ç»ï¼èä¿è¯ border çå¤§å°ä¸åãå¦æç´æ¥ scale(0.5) çè¯ border æ´ä½å¤§å°ä¹ä¼åæäºåä¹ä¸ï¼æä»¥åæ¾å¤§ 200%ï¼æ¾å¤§çæ¶å border çç²ç»æ¯ä¸ä¼è¢«æ¾å¤§çï¼åç¼©æ¾ï¼å°±è½ä¿æåå¤§å°ä¸åäºã\n\n# linear-gradient\n\néè¿çº¿æ§æ¸åï¼ä¹å¯ä»¥å®ç°ç§»å¨ç«¯1pxççº¿ãåçå¤§è´æ¯ä½¿ç¨æ¸åè²ï¼ä¸é¨åä¸ºç½è²ï¼ä¸é¨åä¸ºé»è²ãè¿æ ·å°±å¯ä»¥å°çº¿ä»è§è§ä¸çåªæ1pxã\n\nç±äºæ¯éè¿èæ¯é¢è²æ¸åå®ç°çï¼æä»¥è¿éè¦ä½¿ç¨ä¼ªåç´ å¹¶ä¸è®¾ç½®ä¼ªåç´ çé«åº¦ã å½ç¶ï¼ä¹å¯ä»¥ä¸ä½¿ç¨ä¼ªåç´ ï¼ä½æ¯å°±ä¼å¢å ä¸ä¸ªæ²¡æä»»ä½æä¹çç©ºæ ç­¾äºã\n\ndiv.linear::after {\n    display: block;\n    content: \'\';\n    height: 1px;\n    background: linear-gradient(0, #fff, #000);\n}\n\n\n# box-shadow\n\néè¿box-shaodowæ¥å®ç°1pxä¹å¯ä»¥ï¼å®ç°åçæ¯å°çºµåæ çshadowè®¾ç½®ä¸º0.5pxå³å¯ãbox-shadowå±æ§å¨chromeåfirefoxä¸æ¯æå°æ°è®¾ç½®ï¼ä½æ¯å¨safariä¸ä¸æ¯æãæä»¥ä½¿ç¨è¯¥æ¹æ³è®¾ç½®ç§»å¨ç«¯1pxæ¶åºè¯¥æéä½¿ç¨ã\n\ndiv.shadow {\n    box-shadow: 0 0.5px 0 0 #000;\n}\n\n\n\n# ééæ¡ä¾\n\nè®¾è®¡ç»åº750pxçè®¾è®¡ç¨¿ï¼ä¹æç§750pxæ¥å¼åh5é¡µé¢ï¼æä¹å¨å°ç¨åºç webview é¡µé¢ä¸­ééï¼\n\n * transform: scale\n * hack ä¸ºå æ»¡å¨å±çéæçå­ï¼å ä¸ºå°ç¨åºå­å¨é¡¶é¨æ ï¼æä»¥ä¸è½ç¨ screenheight\n * tofixed æ¯ä¸ºäºåæ´ï¼é²æ­¢å°æ°åºç° bug\n\nfunction autoadapt() {\n  var screenwidth = hack.offsetwidth\n  var screenheight = hack.offsetheight\n  var scale = (screenwidth / 750).tofixed(2)\n  if (scale < 1) {\n    main.style.width = `${(screenwidth / scale).tofixed(0)}px`\n    main.style.height = `${(screenheight / scale).tofixed(0)}px`\n    main.style.overflow = \'auto\'\n    document.body.style.transform = `scale(${scale})`\n    document.body.style.transformorigin = \'0% 0%\'\n    document.body.style.overflow = `hidden`\n  } else {\n    main.style.transform = `scale(${scale})`\n    main.style.transformorigin = \'50% 0%\'\n  }\n}\nautoadapt()\n\nwindow.onresize = function() {\n  autoadapt()\n}\n\n\n\n# å¸¸è§ç§»å¨ç«¯ééæ¹æ¡\n\n * media queries\n * flex å¸å±\n * rem + viewport\n * vh vw\n * ç¾åæ¯\n\n# ä¸ãmeida queries\n\nmeida queries çæ¹å¼å¯ä»¥è¯´æ¯ææ©æéç¨çå¸å±æ¹å¼ï¼å®ä¸»è¦æ¯éè¿æ¥è¯¢è®¾å¤çå®½åº¦æ¥æ§è¡ä¸åç css ä»£ç ï¼æç»è¾¾å°çé¢çéç½®ã\n\næ ¸å¿è¯­æ³:\n\n@media only screen and (max-width: 374px) {\n  /* iphone5 æèæ´å°çå°ºå¯¸ï¼ä»¥ iphone5 çå®½åº¦ï¼320pxï¼æ¯ä¾è®¾ç½®æ ·å¼*/\n}\n@media only screen and (min-width: 375px) and (max-width: 413px) {\n  /* iphone6/7/8 å iphone x */\n}\n@media only screen and (min-width: 414px) {\n  /* iphone6p æèæ´å¤§çå°ºå¯¸ï¼ä»¥ iphone6p çå®½åº¦ï¼414pxï¼æ¯ä¾è®¾ç½®æ ·å¼ */\n}\n\n\nä¼ç¹ï¼\n\n * media query å¯ä»¥åå°è®¾å¤åç´ æ¯çå¤æ­ï¼æ¹æ³ç®åï¼ææ¬ä½ï¼ç¹å«æ¯éå¯¹ç§»å¨ç«¯å pc ç«¯ç»´æ¤åä¸å¥ä»£ç çæ¶åãç®åå bootstrap ç­æ¡æ¶ä½¿ç¨è¿ç§æ¹å¼å¸å±\n * å¾çä¾¿äºä¿®æ¹ï¼åªéä¿®æ¹ css æä»¶\n * è°æ´å±å¹å®½åº¦çæ¶åä¸ç¨å·æ°é¡µé¢å³å¯ååºå¼å±ç¤º\n\nç¼ºç¹ï¼\n\n * ä»£ç éæ¯è¾å¤§ï¼ç»´æ¤ä¸æ¹ä¾¿\n * ä¸ºäºå¼é¡¾å¤§å±å¹æé«æ¸è®¾å¤ï¼ä¼é æå¶ä»è®¾å¤èµæºæµªè´¹ï¼ç¹å«æ¯å è½½å¾çèµæº\n * ä¸ºäºå¼é¡¾ç§»å¨ç«¯å pc ç«¯åèªååºå¼çå±ç¤ºææï¼é¾åä¼æå¤±åèªç¹æçäº¤äºæ¹å¼\n\n# äºãflex å¼¹æ§å¸å±\n\nä»¥å¤©ç«çå®ç°æ¹å¼è¿è¡è¯´æï¼\n\nå®ç viewport æ¯åºå®çï¼<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">\n\né«åº¦å®æ­»ï¼å®½åº¦èªéåºï¼åç´ é½éç¨ px ååä½ã\n\néçå±å¹å®½åº¦ååï¼é¡µé¢ä¹ä¼è·çååï¼ææå°±å pc é¡µé¢çæµä½å¸å±å·®ä¸å¤ï¼å¨åªä¸ªå®½åº¦éè¦è°æ´çæ¶åä½¿ç¨ååºå¼å¸å±è°è°å°±è¡ï¼æ¯å¦ç½ææ°é»ï¼ï¼è¿æ ·å°±å®ç°äºãééãã\n\n# ä¸ãrem+viewport ç¼©æ¾\n\nå®ç°åçï¼\n\næ ¹æ® rem å°é¡µé¢æ¾å¤§ dpr å, ç¶å viewport è®¾ç½®ä¸º 1/dpr.\n\n * å¦ iphone6 plus ç dpr ä¸º 3, åé¡µé¢æ´ä½æ¾å¤§ 3 å, 1px(css åä½)å¨ plus ä¸é»è®¤ä¸º 3px(ç©çåç´ )\n * ç¶å viewport è®¾ç½®ä¸º 1/3, è¿æ ·é¡µé¢æ´ä½ç¼©ååå§å¤§å°. ä»èå®ç°é«æ¸ã\n\nè¿æ ·æ´ä¸ªç½é¡µå¨è®¾å¤åæ¾ç¤ºæ¶çé¡µé¢å®½åº¦å°±ä¼ç­äºè®¾å¤é»è¾åç´ å¤§å°ï¼ä¹å°±æ¯ device-widthãè¿ä¸ª device-width çè®¡ç®å¬å¼ä¸ºï¼\n\nè®¾å¤çç©çåè¾¨ç/(devicepixelratio * scale)ï¼å¨ scale ä¸º 1 çæåµä¸ï¼device-width = è®¾å¤çç©çåè¾¨ç/devicepixelratioã\n\n# åãrem å®ç°\n\nremæ¯ç¸å¯¹é¿åº¦åä½ï¼remæ¹æ¡ä¸­çæ ·å¼è®¾è®¡ä¸ºç¸å¯¹äºæ ¹åç´ font-sizeè®¡ç®å¼çåæ°ãæ ¹æ®å±å¹å®½åº¦è®¾ç½®htmlæ ç­¾çfont-sizeï¼å¨å¸å±æ¶ä½¿ç¨ rem åä½å¸å±ï¼è¾¾å°èªéåºçç®çã\n\nviewport æ¯åºå®çï¼<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">ã\n\néè¿ä»¥ä¸ä»£ç æ¥æ§å¶ rem åºåå¼(è®¾è®¡ç¨¿ä»¥ 720px å®½åº¦éåå®éå°ºå¯¸)\n\n!(function (d) {\n  var c = d.document;\n  var a = c.documentelement;\n  var b = d.devicepixelratio;\n  var f;\n  function e() {\n    var h = a.getboundingclientrect().width,\n      g;\n    if (b === 1) {\n      h = 720;\n    }\n    if (h > 720) h = 720; //è®¾ç½®åºåå¼çæéå¼\n    g = h / 7.2;\n    a.style.fontsize = g + "px";\n  }\n  if (b > 2) {\n    b = 3;\n  } else {\n    if (b > 1) {\n      b = 2;\n    } else {\n      b = 1;\n    }\n  }\n  a.setattribute("data-dpr", b);\n  d.addeventlistener(\n    "resize",\n    function () {\n      cleartimeout(f);\n      f = settimeout(e, 200);\n    },\n    false\n  );\n  e();\n})(window);\n\n\ncss éè¿ sass é¢ç¼è¯ï¼è®¾ç½®éåç px å¼è½¬å rem çåé$px: (1/100)+rem;\n\nä¼ç¹ï¼\n\n * å¼å®¹æ§å¥½ï¼é¡µé¢ä¸ä¼å ä¸ºä¼¸ç¼©åçåå½¢ï¼èªéåºæææ´ä½³ã\n\nç¼ºç¹ï¼\n\n * ä¸æ¯çº¯ css ç§»å¨ééæ¹æ¡ï¼éè¦å¨å¤´é¨ååµä¸æ®µ jsèæ¬çå¬åè¾¨ççååæ¥å¨ææ¹åæ ¹åç´ çå­ä½å¤§å°ï¼cssæ ·å¼å js ä»£ç æä¸å®è¦åæ§ï¼å¹¶ä¸å¿é¡»å°æ¹åfont-sizeçä»£ç æ¾å¨ css æ ·å¼ä¹åã\n * å°æ°åç´ é®é¢ï¼æµè§å¨æ¸²ææå°çåä½æ¯åç´ ï¼åç´ æ ¹æ®å±å¹å®½åº¦èªéåºï¼éè¿ rem è®¡ç®åå¯è½ä¼åºç°å°æ°åç´ ï¼æµè§å¨ä¼å¯¹è¿é¨åå°æ°åèäºå¥ï¼æç§æ´æ°æ¸²æï¼æå¯è½æ²¡é£ä¹åç¡®ã\n\n# äºãçº¯ vw æ¹æ¡\n\nè§å£æ¯æµè§å¨ä¸­ç¨äºåç°ç½é¡µçåºåã\n\n * vw : 1vw ç­äº è§å£å®½åº¦ ç 1%\n * vh : 1vh ç­äº è§å£é«åº¦ ç **1% **\n * vmin : éå vw å vh ä¸­ æå° çé£ä¸ª\n * vmax : éå vw å vh ä¸­ æå¤§ çé£ä¸ª\n\nè½ç¶ vw è½æ´ä¼éçééï¼ä½æ¯è¿æ¯æç¹å°é®é¢ï¼å°±æ¯å®½ï¼é«æ²¡æ³éå¶ã\n\n$base_vw = 375;\n@function vw ($px) {\n    return ($px/$base_vw) * 100vw\n};\n\n\nä¼ç¹ï¼\n\n * çº¯ css ç§»å¨ç«¯ééæ¹æ¡ï¼ä¸å­å¨èæ¬ä¾èµé®é¢ã\n * ç¸å¯¹äº rem ä»¥æ ¹åç´ å­ä½å¤§å°çåæ°å®ä¹åç´ å¤§å°ï¼é»è¾æ¸æ°ç®åã\n\nç¼ºç¹ï¼\n\n * å­å¨ä¸äºå¼å®¹æ§é®é¢ï¼æäºæµè§å¨ä¸æ¯æ\n\n# å­ãvw + rem æ¹æ¡\n\n// scss è¯­æ³\n// è®¾ç½®htmlæ ¹åç´ çå¤§å° 750px->75 640px->64\n// å°å±å¹åæ10ä»½ï¼æ¯ä»½ä½ä¸ºæ ¹åç´ çå¤§å°ã\n$vw_fontsize: 75\n@function rem($px) {\n    // ä¾å¦ï¼ä¸ä¸ªdivçå®½åº¦ä¸º100pxï¼é£ä¹å®å¯¹åºçremåä½å°±æ¯ï¼100/æ ¹åç´ çå¤§å°ï¼* 1rem\n    @return ($px / $vw_fontsize) * 1rem;\n}\n$base_design: 750\nhtml {\n    // remä¸vwç¸å³è\n    font-size: ($vw_fontsize / ($base_design / 2)) * 100vw;\n    // åæ¶ï¼éè¿media queries éå¶æ ¹åç´ æå¤§æå°å¼\n    @media screen and (max-width: 320px) {\n        font-size: 64px;\n    }\n    @media screen and (min-width: 540px) {\n        font-size: 108px;\n    }\n}\n\n// body ä¹å¢å æå¤§æå°å®½åº¦éå¶ï¼é¿åé»è®¤100%å®½åº¦ç block åç´ è·é body èè¿å¤§è¿å°\nbody {\n    max-width: 540px;\n    min-width: 320px;\n}\n\n\n\n# ä¸ãç¾åæ¯\n\nä½¿ç¨ç¾åæ¯%å®ä¹å®½åº¦ï¼é«åº¦ç¨pxåºå®ï¼æ ¹æ®å¯è§åºåå®æ¶å°ºå¯¸è¿è¡è°æ´ï¼å°½å¯è½éåºåç§åè¾¨çï¼éå¸¸ä½¿ç¨max-width/min-widthæ§å¶å°ºå¯¸èå´è¿å¤§æèè¿å°ã\n\nä¼ç¹ï¼\n\n * åçç®åï¼ä¸å­å¨å¼å®¹æ§é®é¢\n\nç¼ºç¹ï¼\n\n * å¦æå±å¹å°ºåº¦è·¨åº¦å¤ªå¤§ï¼ç¸å¯¹è®¾è®¡ç¨¿è¿å¤§æèè¿å°çå±å¹ä¸è½æ­£å¸¸æ¾ç¤ºï¼å¨å¤§å±ææºææ¨ªç«å±åæ¢åºæ¯ä¸å¯è½ä¼å¯¼è´é¡µé¢åç´ è¢«æä¼¸åå½¢ï¼å­ä½å¤§å°æ æ³éå±å¹å¤§å°åçååã\n * è®¾ç½®çæ¨¡åçä¸åå±æ§æ¶ï¼å¶ç¾åæ¯è®¾ç½®çåèåç´ ä¸å¯ä¸ï¼å®¹æä½¿å¸å±é®é¢åå¾å¤æã\n\n> ä½èï¼åç«¯åé é¾æ¥ï¼https://juejin.cn/post/6899291168891207688 æ¥æºï¼æé',charsets:{cjk:!0}},{title:"æ¨¡ååç¼ç¨",frontmatter:{title:"æ¨¡ååç¼ç¨",date:"2019-05-01T16:00:54.000Z",categories:"Node.js"},regularPath:"/node/node-2.html",relativePath:"node/node-2.md",key:"v-756dc182",path:"/node/node-2.html",headers:[{level:2,title:"æ¨¡ååçæ¦å¿µ",slug:"æ¨¡ååçæ¦å¿µ",normalizedTitle:"æ¨¡ååçæ¦å¿µ",charIndex:272},{level:2,title:"æ¨¡ååå¼å",slug:"æ¨¡ååå¼å",normalizedTitle:"æ¨¡ååå¼å",charIndex:327},{level:2,title:"å¨å±å½æ°",slug:"å¨å±å½æ°",normalizedTitle:"å¨å±å½æ°",charIndex:736},{level:2,title:"å¯¹è±¡å½åç©ºé´",slug:"å¯¹è±¡å½åç©ºé´",normalizedTitle:"å¯¹è±¡å½åç©ºé´",charIndex:2150},{level:2,title:"å½æ°çä½ç¨åï¼é­åï¼",slug:"å½æ°çä½ç¨å-é­å",normalizedTitle:"å½æ°çä½ç¨åï¼é­åï¼",charIndex:3376},{level:2,title:"ç»´æ¤åæ©å±",slug:"ç»´æ¤åæ©å±",normalizedTitle:"ç»´æ¤åæ©å±",charIndex:4863}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"æ¨¡ååçæ¦å¿µ æ¨¡ååå¼å å¨å±å½æ° å¯¹è±¡å½åç©ºé´ å½æ°çä½ç¨åï¼é­åï¼ ç»´æ¤åæ©å±",content:"éç Web ææ¯çè¬ååå±åä¾èµçåºç¡è®¾æ½æ¥çå®åï¼åç«¯é¢åéæ¸ä»æµè§å¨æ©å±è³æå¡ç«¯ï¼Node.jsï¼ï¼æ¡é¢ç«¯ï¼PCãAndroidãiOSï¼ï¼ä¹è³äºç©èç½è®¾å¤ï¼IoTï¼ï¼å¶ä¸­ JavaScript æ¿è½½çè¿äºåºç¨ç¨åºçæ ¸å¿é¨åï¼éçå¶è§æ¨¡ååå¤æåº¦çæåå¢é¿ï¼å¶è½¯ä»¶å·¥ç¨ä½ç³»ä¹éä¹å»ºç«èµ·æ¥ï¼ååå¼åãååæµè¯ãéæ±åç¼ºé·ç®¡çç­ï¼ï¼æ¨¡ååç¼ç¨çéæ±æ¥çè¿«åã\n\nJavaScript å¯¹æ¨¡ååç¼ç¨çæ¯æå°æªå½¢æè§èï¼é¾ä»¥å ªæ­¤éä»»ï¼ä¸æ¶é´ï¼æ±æ¹ä¾ å£«æºèº«èåºï¼ä¸è·¯æ«èæ©æ£ï¼ä»åèç«ç§è¿æ¸¡å°é¢åæªæ¥çæ¨¡ååæ¹æ¡ï¼\n\n\n# åè¯æ¨¡ååææ³\n\n\n# æ¨¡ååçæ¦å¿µ\n\næ¨¡ååæ¯ä¸ç§çäº§æ¹å¼ï¼è¿ç§æ¹å¼ä½ç°äºä¸¤ä¸ªç¹ç¹\n\nï¼1ï¼çäº§æçé«\n\nï¼2ï¼ç»´æ¤ææ¬ä½\n\n\n# æ¨¡ååå¼å\n\néæ¨¡ååå¼åä¼éå°åªäºé®é¢\n\n 1. å½åå²çª\n\n//å¨å±åéä¸­åç§°éå¤\nvar foo = 'bar';\nvar foo = 'brz';\n//å¦å¤è¥å¼ç¨ç¬¬ä¸æ¹çåºï¼å¨å¨å±å¯¹è±¡ä¸­å£°æäºä¸ä¸ªå±æ§fooï¼èªå·±çä»£ç ä¸­æåæ ·çåç§°ï¼åå è½½çä¼æ¿æ¢ä¹åç\n\n\n 2. æä»¶ä¾èµ\n\n<srcipt src='./ccc.js'></srcipt>\n<srcipt src='./a.js'></srcipt>\n<srcipt src='./b.js'></srcipt>\n<srcipt src='./c.js'></srcipt>\n<srcipt src='./d.js'></srcipt>\n<srcipt src='./aaa.js'></srcipt>\n\x3c!---\x3e.aaa,jsä¾èµäº./a.js,è¥è°æ¢é¡ºåºåä¼åºéï¼æ¨¡ååå¼åå¹¶ä¸éè¦å°ææçæä»¶å¼å¥\x3c!---\x3e\n\n\n\n# æ¨¡ååç¼ç¨çæ¼å\n\n\n# å¨å±å½æ°\n\n\x3c!---\x3eè®¡ç®å¨çä¾å­\x3c!---\x3e\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n\t<meta charset=\"UTF-8\">\n\t<title>æ¨¡ååå¼åæ¼å-å¨å±å½æ°</title>\n</head>\n<body>\n\t<input type=\"text\" id='x'>\n\t<select name=\"\" id=\"opt\">\n\t\t<option value=\"0\">+</option>\n\t\t<option value=\"1\">-</option>\n\t\t<option value=\"2\">*</option>\n\t\t<option value=\"3\">/</option>\n\t</select>\n\t<input type=\"text\" id='y'>\n\t<button id='cal'>=</button>\n\t<input type=\"text\" id='result'>\n\n\t<script>\n\n\t\t//å®ä¹è®¡ç®å½æ°\n\t\tfunction add(x,y){\n\t\t\treturn parseInt(x)+parseInt(y);\n\t\t}\n\n\t\tfunction subtract(x,y){\n\t\t\treturn parseInt(x)-parseInt(y);\n\t\t}\n\n\t\tfunction multiply(x,y){\n\t\t\treturn parseInt(x)*parseInt(y);\n\t\t}\n\n\t\tfunction divide(x,y){\n\t\t\treturn parseInt(x)/parseInt(y);\n\t\t}\n\n\t\t//è·åDom\n\t\tvar oX = document.getElementById('x');\n\t\tvar oY = document.getElementById('y');\n\t\tvar oOpt = document.getElementById('opt');\n\t\tvar oCal = document.getElementById('cal');\n\t\tvar oResult = document.getElementById('result');\n\n\t\t//ä¸ºç­å·æé®æ·»å åå»äºä»¶\n\t\toCal.addEventListener('click', function(){\n\t\t\tvar x = oX.value;\n\t\t\tvar y = oY.value;\n\t\t\tvar opt = oOpt.value;\n\t\t\tvar result = 0;\n\t\t\tswitch(opt){\n\t\t\t\tcase '0':\n\t\t\t\t\tresult = add(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '1':\n\t\t\t\t\tresult = subtract(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '2':\n\t\t\t\t\tresult = multiply(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '3':\n\t\t\t\t\tresule = divide(x,y);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\toResult.value = result;\n\t\t})\n\t<\/script>\n</body>\n</html>\n\n\nå¨å±å½æ°è¿ç§ç¼ç¨æ¹å¼å¾å¸¸è§ï¼ä½æ¯ä¸å¯åï¼æ æ³ä¿è¯å¨å±åéä¸ä¸å¶ä»æ¨¡åçåéå²çªã\n\n\n# å¯¹è±¡å½åç©ºé´\n\n\t<script>\n        \n\t\t//å¯¹è±¡å½åç©ºé´\n        var calculator = {};\n        \n\t\t//å®ä¹è®¡ç®å½æ°\n\t\tcalculator.add(x,y){\n\t\t\treturn parseInt(x)+parseInt(y);\n\t\t}\n\n\t\tcalculator.subtract(x,y){\n\t\t\treturn parseInt(x)-parseInt(y);\n\t\t}\n\n\t\tcalculator.multiply(x,y){\n\t\t\treturn parseInt(x)*parseInt(y);\n\t\t}\n\n\t\tcalculator.divide(x,y){\n\t\t\treturn parseInt(x)/parseInt(y);\n\t\t}\n\n\t\t//è·åDom\n\t\tvar oX = document.getElementById('x');\n\t\tvar oY = document.getElementById('y');\n\t\tvar oOpt = document.getElementById('opt');\n\t\tvar oCal = document.getElementById('cal');\n\t\tvar oResult = document.getElementById('result');\n\n\t\t//ä¸ºç­å·æé®æ·»å åå»äºä»¶\n\t\toCal.addEventListener('click', function(){\n\t\t\tvar x = oX.value;\n\t\t\tvar y = oY.value;\n\t\t\tvar opt = oOpt.value;\n\t\t\tvar result = 0;\n\t\t\tswitch(opt){\n\t\t\t\tcase '0':\n\t\t\t\t\tresult = calculator.add(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '1':\n\t\t\t\t\tresult = calculator.subtract(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '2':\n\t\t\t\t\tresult = calculator.multiply(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '3':\n\t\t\t\t\tresule = calculator.divide(x,y);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\toResult.value = result;\n\t\t})\n\t<\/script>\n\n\nç¨äºè®¡ç®ç4ä¸ªå½æ°çå½åå²çªé®é¢è§£å³äºï¼ä½æ¯å¦æåå®ä¹ä¸ä¸ªåä¸ºcalculatorçå½åç©ºé´è¿æ¯ä¼æ¥éï¼è½ç¶åå°äºå½åå²çªçé®é¢ï¼ä½æ¯å½åå²çªè¿æ¯å­å¨ãå¦å¤è¿ä¼åºç°å­å½åç©ºé´çæåµã\n\ncalculator.subcal = {};\ncalculator.subcal.foo = 'bar';//å½åç©ºé´è¶æ¥è¶é¿ï¼ä»£ç å¯è¯»æ§å·®\n\n\n\n# å½æ°çä½ç¨åï¼é­åï¼\n\n\t<script>\n        \n\t\t//å©ç¨å¿åèªæ§è¡å½æ°å½¢æçå°é­çå½æ°ä½ç¨åç©ºé´ï¼è¾¾å°ç§æåçç®çã\n        \n        var calcultor = (function(){\n            function add(x,y){\n\t\t\treturn parseInt(x)+parseInt(y);\n            }\n\n            function subtract(x,y){\n                return parseInt(x)-parseInt(y);\n            }\n\n            function multiply(x,y){\n                return parseInt(x)*parseInt(y);\n            }\n\n            function divide(x,y){\n                return parseInt(x)/parseInt(y);\n            }\n            return{\n                add:add,\n                subtract:subtract,\n                multiply:multiply,\n                divide:divide\n            }\n        })();\n\n\n\t\t//è·åDom\n\t\tvar oX = document.getElementById('x');\n\t\tvar oY = document.getElementById('y');\n\t\tvar oOpt = document.getElementById('opt');\n\t\tvar oCal = document.getElementById('cal');\n\t\tvar oResult = document.getElementById('result');\n\n\t\t//ä¸ºç­å·æé®æ·»å åå»äºä»¶\n\t\toCal.addEventListener('click', function(){\n\t\t\tvar x = oX.value;\n\t\t\tvar y = oY.value;\n\t\t\tvar opt = oOpt.value;\n\t\t\tvar result = 0;\n\t\t\tswitch(opt){\n\t\t\t\tcase '0':\n\t\t\t\t\tresult = calculator.add(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '1':\n\t\t\t\t\tresult = calculator.subtract(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '2':\n\t\t\t\t\tresult = calculator.multiply(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '3':\n\t\t\t\t\tresule = calculator.divide(x,y);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\toResult.value = result;\n\t\t})\n\t<\/script>\n\n\nä¸è¿°æ¹æ³ä¸­ï¼ç¨äºè®¡ç®ç4ä¸ªæ¹æ³è¢«å°è£å°äºç«å³æ§è¡å¿åå½æ°ä¸­ï¼æ·»å è¿åå¼åï¼å¨å¨å±å¯ä»¥éè¿âå¿åå½æ°.å½æ°åï¼ï¼âè¿è¡è°ç¨ï¼è¿æ ·ææçå¬å¼äºå¬ææ¹æ³ï¼å¹¶ä¸å¯ä»¥éèä¸äºç§æå±æ§ååç´ ï¼å¤§é¨åç¬¬ä¸æ¹åºé½ä½¿ç¨è¿ç§å½¢å¼ï¼ä¾å¦jQueryã\n\n\n# ç»´æ¤åæ©å±\n\nè¥ç°å¨éè¦æ·»å åä½æ¹æ³ï¼ä¼ ç»æ¹å¼æ¯å¨å¿åå½æ°ä¸­æ·»å ä¸ä¸ªæ¹æ³\n\nvar calcultor = (function(){\n            function add(x,y){\n\t\t\treturn parseInt(x)+parseInt(y);\n            }\n\n            function subtract(x,y){\n                return parseInt(x)-parseInt(y);\n            }\n\n            function multiply(x,y){\n                return parseInt(x)*parseInt(y);\n            }\n\n            function divide(x,y){\n                return parseInt(x)/parseInt(y);\n            }\n    \t\t\n    \t\tfunction mod(x,y){\n                return parseInt(x)%parseInt(y);\n            }\n    \n            return{\n                add:add,\n                subtract:subtract,\n                multiply:multiply,\n                divide:divide,\n                mod:mod\n            }\n        })();\n\n\nè¯æ³ä¸ä¸ï¼å¦æè¿ä¸ªè®¡ç®æ¨¡åç±ç¬¬ä¸æ¹åºæä¾ï¼é¾éè¦ä¿®æ¹æºç ï¼\n\nå¶å®å¯ä»¥éè¿åæ°çå½¢å¼å°åæ¥çæ¨¡ååç¬¬ä¸æ¹åºä¼ éåºå»ã\n\n//ä¼ éåæ°cal\nvar calcultor = (function(cal){\n            function add(x,y){\n\t\t   \t    return parseInt(x)+parseInt(y);\n            }\n\n            function subtract(x,y){\n                return parseInt(x)-parseInt(y);\n            }\n\n            function multiply(x,y){\n                return parseInt(x)*parseInt(y);\n            }\n\n            function divide(x,y){\n                return parseInt(x)/parseInt(y);\n            }\n    \t\t\n    \t\tfunction mod(x,y){\n                return parseInt(x)%parseInt(y);\n            }\n    \n            \n                cal.add = add;\n                cal.subtract = subtract;\n                cal.multiply = multiply;\n                cal.divide = divide;\n                return cal;\n            \n        })(calculator||{});\n\n//ä¸é¢çcalculatorå·²ç»æä¸é¢çç»è¦çæäº\n//æ³¨æï¼å¨è¿è¡æ©å±çæ¶åï¼ä¼åæ¥æ¾è¦æ©å±çå¯¹è±¡æ¯å¦å·²ç»å­å¨\nvar calculator = (function(cal){\n    cal.mod = function(x,y){\n        return x%y;\n    }\n})(calculator||{});\n//å½æ©å±è¯¥æ¨¡åæ¶ï¼å¤æ­calculatoræ¯å¦å­å¨ï¼å­å¨å°±ä½¿ç¨å­å¨çï¼ä¸å­å¨å°±éæ°åå»º\n\n\t\t//è·åDom\n\t\tvar oX = document.getElementById('x');\n\t\tvar oY = document.getElementById('y');\n\t\tvar oOpt = document.getElementById('opt');\n\t\tvar oCal = document.getElementById('cal');\n\t\tvar oResult = document.getElementById('result');\n\n\t\t//ä¸ºç­å·æé®æ·»å åå»äºä»¶\n\t\toCal.addEventListener('click', function(){\n\t\t\tvar x = oX.value;\n\t\t\tvar y = oY.value;\n\t\t\tvar opt = oOpt.value;\n\t\t\tvar result = 0;\n\t\t\tswitch(opt){\n\t\t\t\tcase '0':\n\t\t\t\t\tresult = calculator.add(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '1':\n\t\t\t\t\tresult = calculator.subtract(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '2':\n\t\t\t\t\tresult = calculator.multiply(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '3':\n\t\t\t\t\tresult = calculator.divide(x,y);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\toResult.value = result;\n\t\t})\n\n\nææ¨¡ååææ³å¸¦å¥ç¼ç¨ä¸­ï¼å¯ä»¥è§£å³å½åå²çªåæä»¶ä¾èµç­é®é¢ï¼åé¢ä¼ä»ç»Node.jsæ¯ä¸ä¸ªé«åº¦æ¨¡ååçå¹³å°ã",normalizedContent:"éç web ææ¯çè¬ååå±åä¾èµçåºç¡è®¾æ½æ¥çå®åï¼åç«¯é¢åéæ¸ä»æµè§å¨æ©å±è³æå¡ç«¯ï¼node.jsï¼ï¼æ¡é¢ç«¯ï¼pcãandroidãiosï¼ï¼ä¹è³äºç©èç½è®¾å¤ï¼iotï¼ï¼å¶ä¸­ javascript æ¿è½½çè¿äºåºç¨ç¨åºçæ ¸å¿é¨åï¼éçå¶è§æ¨¡ååå¤æåº¦çæåå¢é¿ï¼å¶è½¯ä»¶å·¥ç¨ä½ç³»ä¹éä¹å»ºç«èµ·æ¥ï¼ååå¼åãååæµè¯ãéæ±åç¼ºé·ç®¡çç­ï¼ï¼æ¨¡ååç¼ç¨çéæ±æ¥çè¿«åã\n\njavascript å¯¹æ¨¡ååç¼ç¨çæ¯æå°æªå½¢æè§èï¼é¾ä»¥å ªæ­¤éä»»ï¼ä¸æ¶é´ï¼æ±æ¹ä¾ å£«æºèº«èåºï¼ä¸è·¯æ«èæ©æ£ï¼ä»åèç«ç§è¿æ¸¡å°é¢åæªæ¥çæ¨¡ååæ¹æ¡ï¼\n\n\n# åè¯æ¨¡ååææ³\n\n\n# æ¨¡ååçæ¦å¿µ\n\næ¨¡ååæ¯ä¸ç§çäº§æ¹å¼ï¼è¿ç§æ¹å¼ä½ç°äºä¸¤ä¸ªç¹ç¹\n\nï¼1ï¼çäº§æçé«\n\nï¼2ï¼ç»´æ¤ææ¬ä½\n\n\n# æ¨¡ååå¼å\n\néæ¨¡ååå¼åä¼éå°åªäºé®é¢\n\n 1. å½åå²çª\n\n//å¨å±åéä¸­åç§°éå¤\nvar foo = 'bar';\nvar foo = 'brz';\n//å¦å¤è¥å¼ç¨ç¬¬ä¸æ¹çåºï¼å¨å¨å±å¯¹è±¡ä¸­å£°æäºä¸ä¸ªå±æ§fooï¼èªå·±çä»£ç ä¸­æåæ ·çåç§°ï¼åå è½½çä¼æ¿æ¢ä¹åç\n\n\n 2. æä»¶ä¾èµ\n\n<srcipt src='./ccc.js'></srcipt>\n<srcipt src='./a.js'></srcipt>\n<srcipt src='./b.js'></srcipt>\n<srcipt src='./c.js'></srcipt>\n<srcipt src='./d.js'></srcipt>\n<srcipt src='./aaa.js'></srcipt>\n\x3c!---\x3e.aaa,jsä¾èµäº./a.js,è¥è°æ¢é¡ºåºåä¼åºéï¼æ¨¡ååå¼åå¹¶ä¸éè¦å°ææçæä»¶å¼å¥\x3c!---\x3e\n\n\n\n# æ¨¡ååç¼ç¨çæ¼å\n\n\n# å¨å±å½æ°\n\n\x3c!---\x3eè®¡ç®å¨çä¾å­\x3c!---\x3e\n<!doctype html>\n<html lang=\"en\">\n<head>\n\t<meta charset=\"utf-8\">\n\t<title>æ¨¡ååå¼åæ¼å-å¨å±å½æ°</title>\n</head>\n<body>\n\t<input type=\"text\" id='x'>\n\t<select name=\"\" id=\"opt\">\n\t\t<option value=\"0\">+</option>\n\t\t<option value=\"1\">-</option>\n\t\t<option value=\"2\">*</option>\n\t\t<option value=\"3\">/</option>\n\t</select>\n\t<input type=\"text\" id='y'>\n\t<button id='cal'>=</button>\n\t<input type=\"text\" id='result'>\n\n\t<script>\n\n\t\t//å®ä¹è®¡ç®å½æ°\n\t\tfunction add(x,y){\n\t\t\treturn parseint(x)+parseint(y);\n\t\t}\n\n\t\tfunction subtract(x,y){\n\t\t\treturn parseint(x)-parseint(y);\n\t\t}\n\n\t\tfunction multiply(x,y){\n\t\t\treturn parseint(x)*parseint(y);\n\t\t}\n\n\t\tfunction divide(x,y){\n\t\t\treturn parseint(x)/parseint(y);\n\t\t}\n\n\t\t//è·ådom\n\t\tvar ox = document.getelementbyid('x');\n\t\tvar oy = document.getelementbyid('y');\n\t\tvar oopt = document.getelementbyid('opt');\n\t\tvar ocal = document.getelementbyid('cal');\n\t\tvar oresult = document.getelementbyid('result');\n\n\t\t//ä¸ºç­å·æé®æ·»å åå»äºä»¶\n\t\tocal.addeventlistener('click', function(){\n\t\t\tvar x = ox.value;\n\t\t\tvar y = oy.value;\n\t\t\tvar opt = oopt.value;\n\t\t\tvar result = 0;\n\t\t\tswitch(opt){\n\t\t\t\tcase '0':\n\t\t\t\t\tresult = add(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '1':\n\t\t\t\t\tresult = subtract(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '2':\n\t\t\t\t\tresult = multiply(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '3':\n\t\t\t\t\tresule = divide(x,y);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\toresult.value = result;\n\t\t})\n\t<\/script>\n</body>\n</html>\n\n\nå¨å±å½æ°è¿ç§ç¼ç¨æ¹å¼å¾å¸¸è§ï¼ä½æ¯ä¸å¯åï¼æ æ³ä¿è¯å¨å±åéä¸ä¸å¶ä»æ¨¡åçåéå²çªã\n\n\n# å¯¹è±¡å½åç©ºé´\n\n\t<script>\n        \n\t\t//å¯¹è±¡å½åç©ºé´\n        var calculator = {};\n        \n\t\t//å®ä¹è®¡ç®å½æ°\n\t\tcalculator.add(x,y){\n\t\t\treturn parseint(x)+parseint(y);\n\t\t}\n\n\t\tcalculator.subtract(x,y){\n\t\t\treturn parseint(x)-parseint(y);\n\t\t}\n\n\t\tcalculator.multiply(x,y){\n\t\t\treturn parseint(x)*parseint(y);\n\t\t}\n\n\t\tcalculator.divide(x,y){\n\t\t\treturn parseint(x)/parseint(y);\n\t\t}\n\n\t\t//è·ådom\n\t\tvar ox = document.getelementbyid('x');\n\t\tvar oy = document.getelementbyid('y');\n\t\tvar oopt = document.getelementbyid('opt');\n\t\tvar ocal = document.getelementbyid('cal');\n\t\tvar oresult = document.getelementbyid('result');\n\n\t\t//ä¸ºç­å·æé®æ·»å åå»äºä»¶\n\t\tocal.addeventlistener('click', function(){\n\t\t\tvar x = ox.value;\n\t\t\tvar y = oy.value;\n\t\t\tvar opt = oopt.value;\n\t\t\tvar result = 0;\n\t\t\tswitch(opt){\n\t\t\t\tcase '0':\n\t\t\t\t\tresult = calculator.add(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '1':\n\t\t\t\t\tresult = calculator.subtract(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '2':\n\t\t\t\t\tresult = calculator.multiply(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '3':\n\t\t\t\t\tresule = calculator.divide(x,y);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\toresult.value = result;\n\t\t})\n\t<\/script>\n\n\nç¨äºè®¡ç®ç4ä¸ªå½æ°çå½åå²çªé®é¢è§£å³äºï¼ä½æ¯å¦æåå®ä¹ä¸ä¸ªåä¸ºcalculatorçå½åç©ºé´è¿æ¯ä¼æ¥éï¼è½ç¶åå°äºå½åå²çªçé®é¢ï¼ä½æ¯å½åå²çªè¿æ¯å­å¨ãå¦å¤è¿ä¼åºç°å­å½åç©ºé´çæåµã\n\ncalculator.subcal = {};\ncalculator.subcal.foo = 'bar';//å½åç©ºé´è¶æ¥è¶é¿ï¼ä»£ç å¯è¯»æ§å·®\n\n\n\n# å½æ°çä½ç¨åï¼é­åï¼\n\n\t<script>\n        \n\t\t//å©ç¨å¿åèªæ§è¡å½æ°å½¢æçå°é­çå½æ°ä½ç¨åç©ºé´ï¼è¾¾å°ç§æåçç®çã\n        \n        var calcultor = (function(){\n            function add(x,y){\n\t\t\treturn parseint(x)+parseint(y);\n            }\n\n            function subtract(x,y){\n                return parseint(x)-parseint(y);\n            }\n\n            function multiply(x,y){\n                return parseint(x)*parseint(y);\n            }\n\n            function divide(x,y){\n                return parseint(x)/parseint(y);\n            }\n            return{\n                add:add,\n                subtract:subtract,\n                multiply:multiply,\n                divide:divide\n            }\n        })();\n\n\n\t\t//è·ådom\n\t\tvar ox = document.getelementbyid('x');\n\t\tvar oy = document.getelementbyid('y');\n\t\tvar oopt = document.getelementbyid('opt');\n\t\tvar ocal = document.getelementbyid('cal');\n\t\tvar oresult = document.getelementbyid('result');\n\n\t\t//ä¸ºç­å·æé®æ·»å åå»äºä»¶\n\t\tocal.addeventlistener('click', function(){\n\t\t\tvar x = ox.value;\n\t\t\tvar y = oy.value;\n\t\t\tvar opt = oopt.value;\n\t\t\tvar result = 0;\n\t\t\tswitch(opt){\n\t\t\t\tcase '0':\n\t\t\t\t\tresult = calculator.add(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '1':\n\t\t\t\t\tresult = calculator.subtract(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '2':\n\t\t\t\t\tresult = calculator.multiply(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '3':\n\t\t\t\t\tresule = calculator.divide(x,y);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\toresult.value = result;\n\t\t})\n\t<\/script>\n\n\nä¸è¿°æ¹æ³ä¸­ï¼ç¨äºè®¡ç®ç4ä¸ªæ¹æ³è¢«å°è£å°äºç«å³æ§è¡å¿åå½æ°ä¸­ï¼æ·»å è¿åå¼åï¼å¨å¨å±å¯ä»¥éè¿âå¿åå½æ°.å½æ°åï¼ï¼âè¿è¡è°ç¨ï¼è¿æ ·ææçå¬å¼äºå¬ææ¹æ³ï¼å¹¶ä¸å¯ä»¥éèä¸äºç§æå±æ§ååç´ ï¼å¤§é¨åç¬¬ä¸æ¹åºé½ä½¿ç¨è¿ç§å½¢å¼ï¼ä¾å¦jqueryã\n\n\n# ç»´æ¤åæ©å±\n\nè¥ç°å¨éè¦æ·»å åä½æ¹æ³ï¼ä¼ ç»æ¹å¼æ¯å¨å¿åå½æ°ä¸­æ·»å ä¸ä¸ªæ¹æ³\n\nvar calcultor = (function(){\n            function add(x,y){\n\t\t\treturn parseint(x)+parseint(y);\n            }\n\n            function subtract(x,y){\n                return parseint(x)-parseint(y);\n            }\n\n            function multiply(x,y){\n                return parseint(x)*parseint(y);\n            }\n\n            function divide(x,y){\n                return parseint(x)/parseint(y);\n            }\n    \t\t\n    \t\tfunction mod(x,y){\n                return parseint(x)%parseint(y);\n            }\n    \n            return{\n                add:add,\n                subtract:subtract,\n                multiply:multiply,\n                divide:divide,\n                mod:mod\n            }\n        })();\n\n\nè¯æ³ä¸ä¸ï¼å¦æè¿ä¸ªè®¡ç®æ¨¡åç±ç¬¬ä¸æ¹åºæä¾ï¼é¾éè¦ä¿®æ¹æºç ï¼\n\nå¶å®å¯ä»¥éè¿åæ°çå½¢å¼å°åæ¥çæ¨¡ååç¬¬ä¸æ¹åºä¼ éåºå»ã\n\n//ä¼ éåæ°cal\nvar calcultor = (function(cal){\n            function add(x,y){\n\t\t   \t    return parseint(x)+parseint(y);\n            }\n\n            function subtract(x,y){\n                return parseint(x)-parseint(y);\n            }\n\n            function multiply(x,y){\n                return parseint(x)*parseint(y);\n            }\n\n            function divide(x,y){\n                return parseint(x)/parseint(y);\n            }\n    \t\t\n    \t\tfunction mod(x,y){\n                return parseint(x)%parseint(y);\n            }\n    \n            \n                cal.add = add;\n                cal.subtract = subtract;\n                cal.multiply = multiply;\n                cal.divide = divide;\n                return cal;\n            \n        })(calculator||{});\n\n//ä¸é¢çcalculatorå·²ç»æä¸é¢çç»è¦çæäº\n//æ³¨æï¼å¨è¿è¡æ©å±çæ¶åï¼ä¼åæ¥æ¾è¦æ©å±çå¯¹è±¡æ¯å¦å·²ç»å­å¨\nvar calculator = (function(cal){\n    cal.mod = function(x,y){\n        return x%y;\n    }\n})(calculator||{});\n//å½æ©å±è¯¥æ¨¡åæ¶ï¼å¤æ­calculatoræ¯å¦å­å¨ï¼å­å¨å°±ä½¿ç¨å­å¨çï¼ä¸å­å¨å°±éæ°åå»º\n\n\t\t//è·ådom\n\t\tvar ox = document.getelementbyid('x');\n\t\tvar oy = document.getelementbyid('y');\n\t\tvar oopt = document.getelementbyid('opt');\n\t\tvar ocal = document.getelementbyid('cal');\n\t\tvar oresult = document.getelementbyid('result');\n\n\t\t//ä¸ºç­å·æé®æ·»å åå»äºä»¶\n\t\tocal.addeventlistener('click', function(){\n\t\t\tvar x = ox.value;\n\t\t\tvar y = oy.value;\n\t\t\tvar opt = oopt.value;\n\t\t\tvar result = 0;\n\t\t\tswitch(opt){\n\t\t\t\tcase '0':\n\t\t\t\t\tresult = calculator.add(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '1':\n\t\t\t\t\tresult = calculator.subtract(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '2':\n\t\t\t\t\tresult = calculator.multiply(x,y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '3':\n\t\t\t\t\tresult = calculator.divide(x,y);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\toresult.value = result;\n\t\t})\n\n\nææ¨¡ååææ³å¸¦å¥ç¼ç¨ä¸­ï¼å¯ä»¥è§£å³å½åå²çªåæä»¶ä¾èµç­é®é¢ï¼åé¢ä¼ä»ç»node.jsæ¯ä¸ä¸ªé«åº¦æ¨¡ååçå¹³å°ã",charsets:{cjk:!0}},{title:"Node.jsç½ç»ç¼ç¨",frontmatter:{title:"Node.jsç½ç»ç¼ç¨",date:"2019-05-05T08:00:54.000Z",categories:"Node.js"},regularPath:"/node/node-4.html",relativePath:"node/node-4.md",key:"v-3c368902",path:"/node/node-4.html",headers:[{level:2,title:"IPå°ååç«¯å£å·",slug:"ipå°ååç«¯å£å·",normalizedTitle:"ipå°ååç«¯å£å·",charIndex:20},{level:2,title:"å¥æ¥å­Socketç®åæ¨¡å",slug:"å¥æ¥å­socketç®åæ¨¡å",normalizedTitle:"å¥æ¥å­socketç®åæ¨¡å",charIndex:117},{level:2,title:"Node.jsåå­çç±æ¥",slug:"node-jsåå­çç±æ¥",normalizedTitle:"node.jsåå­çç±æ¥",charIndex:473},{level:2,title:"Net.Serverå¯¹è±¡",slug:"net-serverå¯¹è±¡",normalizedTitle:"net.serverå¯¹è±¡",charIndex:689},{level:2,title:"Net.Socketå¯¹è±¡",slug:"net-socketå¯¹è±¡",normalizedTitle:"net.socketå¯¹è±¡",charIndex:1205},{level:2,title:"Processæ¨¡åè·åç»ç«¯è¾å¥",slug:"processæ¨¡åè·åç»ç«¯è¾å¥",normalizedTitle:"processæ¨¡åè·åç»ç«¯è¾å¥",charIndex:3242},{level:2,title:"å¤äººå¹¿æ­æ¶æ¯",slug:"å¤äººå¹¿æ­æ¶æ¯",normalizedTitle:"å¤äººå¹¿æ­æ¶æ¯",charIndex:3445}],lastUpdated:"9/29/2021, 7:43:24 PM",lastUpdatedTimestamp:1632915804e3,headersStr:"IPå°ååç«¯å£å· å¥æ¥å­Socketç®åæ¨¡å Node.jsåå­çç±æ¥ Net.Serverå¯¹è±¡ Net.Socketå¯¹è±¡ Processæ¨¡åè·åç»ç«¯è¾å¥ å¤äººå¹¿æ­æ¶æ¯",content:"# Node.jsç½ç»ç¼ç¨åºç¡\n\n\n# IPå°ååç«¯å£å·\n\néè¿IPå°åå¯ä»¥æ¾å°æå¡å¨è®¾å¤ï¼èç«¯å£å·å¯ä»¥çè§£ä¸ºå¨åéæ°æ®æ¶å®ä½å°ä¸åæå¡å¨åºç¨ç¨åºçæ è¯ã\n\nIPå°åå¯¹äºè®¡ç®æºæ¯å¯ä¸çï¼ä¸ä¸ªç«¯å£å·ä¹åªè½è¢«ä¸ä¸ªåºç¨ç¨åºæå ç¨ã\n\n\n# å¥æ¥å­Socketç®åæ¨¡å\n\nåäºè§£ä¸ä¸TCP/IPåè®®ï¼TCPï¼Transfer Control Protocolï¼ä¼ è¾æ§å¶åè®®æ¯ä¸ç§ç¨³å®å¯é çä¼ éæ¹å¼ï¼TCPè´è´£åç°ä¼ è¾çé®é¢ï¼ä¸æé®é¢å°±ååºä¿¡å·ï¼è¦æ±éæ°ä¼ è¾ï¼ç´å°æææ°æ®å®å¨æ­£ç¡®å°ä¼ è¾å°ç®çå°ä¸ºæ­¢ã\n\nSocketåæä¸ºå­ææåº§ãå¨ç¨åºæ¹é¢å¯çè§£ä¸ºæ¥å£å¯¹è±¡ï¼å¨ç½ç»ç¼ç¨ä¸­éå¸¸ç§°ä¸ºå¥æ¥å­ï¼å¸¸ç¨äºæè¿°IPå°ååç«¯å£ç­ãSocketæ¯æ¯æTCP/IPçç½ç»éä¿¡çåºæ¬æä½ååãç®åçè§£ï¼Socketå°±æ¯å¯¹TCP/IPåè®®çå°è£ï¼Socketæ¬èº«å¹¶ä¸æ¯åè®®ï¼èæ¯ä¸ä¸ªè°ç¨æ¥å£\n\nSocketéè¦ä½¿ç¨å¥æ¥å­å°åæ¥å±å¼å·¥ä½ï¼å¥æ¥å­å°åå°±æ¯IPå°ååç«¯å£å·çç»åï¼å¥æ¥å­æå¡ä¸å¶ä»æå¡ä¸åï¼ä¸éè¦å¤çç½ç»ä¸­çGETæPOSTè¯·æ±ï¼èæ¯éç¨ç¹å¯¹ç¹ä¼ è¾æ°æ®æ¹å¼ã\n\n\n# Node.jsåå­çç±æ¥\n\nNode.jsè¯ççç®çå°±æ¯ä¸ºäºæ´å é«æçå¤çç½ç»æ°æ®ï¼å ä¸ºä½¿ç¨å®è¿è¡ç½ç»ç¼ç¨æ¶ä¸éè¦ä½¿ç¨å¶ä»çæå¡å¨è½¯ä»¶è¿è¡æ¯æï¼Node.jsæ¬èº«å°±æ¯ä¸ä¸ªæå¡å¨ãå¨è¿è¡ç½ç»ç¼ç¨æ¶ï¼æ¯ä¸ä¸ªè¿ç¨ææç½ç»åºç¨ä¸­çä¸ä¸ªç»ç¹ï¼èNodeå°±æ¯ç»ç¹çææï¼æç»web.jsæ´åä¸ºNode.jsã\n\n\n# Node.jsä¸­å®ç°å¥æ¥å­æå¡\n\nå¥æ¥å­æå¡ç±Netæ¨¡åæä¾ï¼\n\nlet net = require('net');\n\n\n# Net.Serverå¯¹è±¡\n\nlet server = net.creatServer()\n\nå½Serverå¯¹è±¡è¢«åå»ºåï¼å¨è¯¥æå¡å¨ççå½å¨æä¸­å°±å­å¨äºä¸äºå¯è§¦åçäºä»¶ã\n\näºä»¶           æè¿°\nlistening    å½æå¡å¨è°ç¨server.listenç»å®åä¼è§¦å\nconnection   å½æ°è¿æ¥åå»ºåä¼è¢«è§¦å\nclose        æå¡å¨å³é­æ¶ä¼è¢«è§¦å\nerror        åçéè¯¯æ¶è§¦å\n\nlet net = require('net');\nlet server = net.createServer();\nserver.on('connection',function(){\n    console.log('æå®¢æ·ç«¯è¿æ¥ä¸æ¥äº');\n});\nserver.on('listening',function () {\n    console.log('æå¡å¨çå¬æåäºï¼æ­£å¨ç­å¾å®¢æ·ç«¯è¿æ¥');\n});\nserver.listen(3000,'127.0.0.1');\n\n\nç¶åå¯ç¨Telnetå®¢æ·ç«¯æå¡ï¼å½ä»¤è¡ä¸­è¾å¥ï¼\n\n> telnet 127.0.0.1 3000\n\nå°±ä¼è¿æ¥æåã\n\n\n# Net.Socketå¯¹è±¡\n\nNet.Socketå®ä¾å®ç°äºä¸Duplexï¼åå·¥ï¼æµæ¥å£ï¼æä¾äºWritableåReadableææåè½ï¼æä»¥è¯´å®æ¢æ¯å¯è¯»æµä¹æ¯å¯åæµã\n\nNet.Socketå¯¹è±¡åæ¶å¨å¥æ¥å­æå¡å¨åå®¢æ·ç«¯ä¸åå»ºï¼å¹¶ä¸ä¼åè®¸æ°æ®å¨ä»ä»¬ä¹é´è¿è¡è¯»åååå¥ï¼ä¸æ¦Socketå¯¹è±¡è¢«åå»ºï¼å°±æä¾äºä¸äºè§¦åçäºä»¶ã\n\näºä»¶        æè¿°\nlookup    è§£æåååï¼è¿æ¥åè§¦å\nconnect   æåå»ºç«socketè¿æ¥æ¶è§¦å\ndata      å½æ¶å°æ°æ®æ¶è§¦å\nend       å½socketå¦ä¸ç¹åéFINåæ¶\ntimeout   socketç©ºé²è¶æ¶\ndrain     åç¼å­ä¸ºç©ºçæ¶åè§¦åã\nerror     åçéè¯¯ã\nclose     socketå³é­\n\n 1. æå¡å¨åå®¢æ·ç«¯åéæ¶æ¯\n\nlet net = require('net');\nlet server = net.createServer();\nserver.on('connection',function(socket){\n    console.log('æå®¢æ·ç«¯è¿æ¥ä¸æ¥äº');\n    console.log('å®¢æ·ç«¯IPå°åï¼'+socket.remoteAddress+'è¿æ¥å°äºå½åæå¡å¨');\n    socket.write('hello');\n});\nserver.on('listening',function () {\n    console.log('æå¡å¨çå¬æåäºï¼æ­£å¨ç­å¾å®¢æ·ç«¯è¿æ¥');\n});\nserver.listen(3000,'127.0.0.1');\n\n//ç¶åå¯ç¨Telnetå®¢æ·ç«¯æå¡ï¼å½ä»¤è¡ä¸­è¾å¥ï¼\n//telnet 127.0.0.1 3000\n\n//æå¡ç«¯è¾åº\n//æå¡å¨çå¬æåäºï¼æ­£å¨ç­å¾å®¢æ·ç«¯è¿æ¥\n//æå®¢æ·ç«¯è¿æ¥ä¸æ¥äº\n//å®¢æ·ç«¯IPå°åï¼127.0.0.1è¿æ¥å°äºå½åæå¡å¨\n\n//å®¢æ·ç«¯è¾åº\n//hello\n\n\n 2. ç»è®¡å¨çº¿äººæ°\n\nlet net = require('net');\nlet server = net.createServer();\nlet count = 0;\nserver.on('connection',function(socket){\n    count++;\n    console.log('welcome,å½åå¨çº¿äººæ°ï¼'+count);\n    socket.write('remoteAddress'+socket.remoteAddress+'\\n');\n    socket.write('remotePort'+socket.remotePort);\n});\nserver.listen(3000,'127.0.0.1',function() {\n    console.log('server listening at port 3000');\n});\n\n//ç¶åå¯ç¨ä¸¤ä¸ªTelnetå®¢æ·ç«¯æå¡ï¼å½ä»¤è¡ä¸­è¾å¥ï¼\n//telnet 127.0.0.1 3000\n\n//æå¡ç«¯è¾åº\n/*\nserver listening at port 3000\nwelcome,å½åå¨çº¿äººæ°ï¼1\nwelcome,å½åå¨çº¿äººæ°ï¼2\n*/\n\n\n 3. å®¢æ·ç«¯ä¸æå¡ç«¯ååéä¿¡\n\nåå»ºå®¢æ·ç«¯net.creatConnection()æ§è¡å®æ¯ä¼è¿åä¸ä¸ªsocketå¯¹è±¡\n\n//æå¡ç«¯\nlet net = require('net');\nlet server = net.createServer();\nserver.on('connection',function(socket){\n    socket.on('data',function (data) {\n        console.log(data.toString());\n        socket.write('æåçå°è±å');\n    });\n});\nserver.listen(3000,'127.0.0.1',function() {\n    console.log('server listening at port 3000');\n});\n\n//å®¢æ·ç«¯\nlet net = require('net');\nlet client = net.createConnection({\n    port:3000\n});\nclient.on('connect',function () {\n    console.log('å®¢æ·ç«¯ä¸æå¡å¨è¿æ¥æåäº');\n    client.write('ä½ åäºå');\n});\nclient.on('data',function (data) {\n    console.log(data.toString());\n});\n\n\n\n# Node.jsè¿ç¨ç®¡ç\n\n\n# Processæ¨¡åè·åç»ç«¯è¾å¥\n\nå¦æéè¦å¨å®¢æ·ç«¯è¾å¥ä¿¡æ¯åéå°æå¡å¨ï¼è¿æ ·çåè½å°±éè¦ä¾èµProcessæ¨¡åæ¥å®æã\n\nProcessæ¨¡åæ¯ä¸ä¸ªæ é¡»ä½¿ç¨requireå°±å¯ä»¥è®¿é®çå¨å±å¯¹è±¡ã\n\nprocess.stdin.on('data',function(data){\n    console.log(data.toString().trim());//trimæ¯å»æè¾å¥åæçç©ºæ ¼\n});\n\n\n\n# å¤äººå¹¿æ­æ¶æ¯\n\næå¡ç«¯æ¥æ¶å®¢æ·ç«¯æ¶æ¯ï¼å°å®¢æ·ç«¯æ¶æ¯åéç»å¶ä»å®¢æ·ç«¯\n\n//æå¡ç«¯\nlet net = require('net');\nlet server = net.createServer();\n//è¯¥æ°ç»ç¨æ¥å°è£ææå®¢æ·ç«¯çscoket\nlet users = [];\nserver.on('connection',function (socket) {\n    users.push(socket);\n    socket.on('data',function (data) {\n        data = data.toString().trim();\n        users.forEach(function (client) {\n            if(client !== socket){\n                //ä¸åå®¢æ·ç«¯ç«¯å£å·ä¸å\n                client.write(client.remotePort+':'+data);\n            }\n        });\n    });\n    socket.on('error',function () {\n        console.log('æå®¢æ·ç«¯éåºäº');\n    });\n})\nserver.listen(3000,'127.0.0.1',function () {\n    console.log('server listening at port 3000');\n})\n\n//å®¢æ·ç«¯\nlet net = require('net');\n//åæå¡ç«¯åå»ºè¿æ¥\nlet client = net.createConnection({\n    port:3000,\n    host:'127.0.0.1'\n});\nclient.on('connect',function(){\n    //éè¿å½åè¿ç¨çæ åè¾å¥çdataäºä»¶è·åç»ç«¯çè¾å¥\n    process.stdin.on('data',function (data) {\n        data = data.toString().trim();\n        client.write(data);\n    });\n});\nclient.on('data',function (data) {\n    console.log(data.toString());\n});\n\n//æå¼å¤ä¸ªå®¢æ·ç«¯ï¼å³å¯äºç¸åéæ¶æ¯\n",normalizedContent:"# node.jsç½ç»ç¼ç¨åºç¡\n\n\n# ipå°ååç«¯å£å·\n\néè¿ipå°åå¯ä»¥æ¾å°æå¡å¨è®¾å¤ï¼èç«¯å£å·å¯ä»¥çè§£ä¸ºå¨åéæ°æ®æ¶å®ä½å°ä¸åæå¡å¨åºç¨ç¨åºçæ è¯ã\n\nipå°åå¯¹äºè®¡ç®æºæ¯å¯ä¸çï¼ä¸ä¸ªç«¯å£å·ä¹åªè½è¢«ä¸ä¸ªåºç¨ç¨åºæå ç¨ã\n\n\n# å¥æ¥å­socketç®åæ¨¡å\n\nåäºè§£ä¸ä¸tcp/ipåè®®ï¼tcpï¼transfer control protocolï¼ä¼ è¾æ§å¶åè®®æ¯ä¸ç§ç¨³å®å¯é çä¼ éæ¹å¼ï¼tcpè´è´£åç°ä¼ è¾çé®é¢ï¼ä¸æé®é¢å°±ååºä¿¡å·ï¼è¦æ±éæ°ä¼ è¾ï¼ç´å°æææ°æ®å®å¨æ­£ç¡®å°ä¼ è¾å°ç®çå°ä¸ºæ­¢ã\n\nsocketåæä¸ºå­ææåº§ãå¨ç¨åºæ¹é¢å¯çè§£ä¸ºæ¥å£å¯¹è±¡ï¼å¨ç½ç»ç¼ç¨ä¸­éå¸¸ç§°ä¸ºå¥æ¥å­ï¼å¸¸ç¨äºæè¿°ipå°ååç«¯å£ç­ãsocketæ¯æ¯ætcp/ipçç½ç»éä¿¡çåºæ¬æä½ååãç®åçè§£ï¼socketå°±æ¯å¯¹tcp/ipåè®®çå°è£ï¼socketæ¬èº«å¹¶ä¸æ¯åè®®ï¼èæ¯ä¸ä¸ªè°ç¨æ¥å£\n\nsocketéè¦ä½¿ç¨å¥æ¥å­å°åæ¥å±å¼å·¥ä½ï¼å¥æ¥å­å°åå°±æ¯ipå°ååç«¯å£å·çç»åï¼å¥æ¥å­æå¡ä¸å¶ä»æå¡ä¸åï¼ä¸éè¦å¤çç½ç»ä¸­çgetæpostè¯·æ±ï¼èæ¯éç¨ç¹å¯¹ç¹ä¼ è¾æ°æ®æ¹å¼ã\n\n\n# node.jsåå­çç±æ¥\n\nnode.jsè¯ççç®çå°±æ¯ä¸ºäºæ´å é«æçå¤çç½ç»æ°æ®ï¼å ä¸ºä½¿ç¨å®è¿è¡ç½ç»ç¼ç¨æ¶ä¸éè¦ä½¿ç¨å¶ä»çæå¡å¨è½¯ä»¶è¿è¡æ¯æï¼node.jsæ¬èº«å°±æ¯ä¸ä¸ªæå¡å¨ãå¨è¿è¡ç½ç»ç¼ç¨æ¶ï¼æ¯ä¸ä¸ªè¿ç¨ææç½ç»åºç¨ä¸­çä¸ä¸ªç»ç¹ï¼ènodeå°±æ¯ç»ç¹çææï¼æç»web.jsæ´åä¸ºnode.jsã\n\n\n# node.jsä¸­å®ç°å¥æ¥å­æå¡\n\nå¥æ¥å­æå¡ç±netæ¨¡åæä¾ï¼\n\nlet net = require('net');\n\n\n# net.serverå¯¹è±¡\n\nlet server = net.creatserver()\n\nå½serverå¯¹è±¡è¢«åå»ºåï¼å¨è¯¥æå¡å¨ççå½å¨æä¸­å°±å­å¨äºä¸äºå¯è§¦åçäºä»¶ã\n\näºä»¶           æè¿°\nlistening    å½æå¡å¨è°ç¨server.listenç»å®åä¼è§¦å\nconnection   å½æ°è¿æ¥åå»ºåä¼è¢«è§¦å\nclose        æå¡å¨å³é­æ¶ä¼è¢«è§¦å\nerror        åçéè¯¯æ¶è§¦å\n\nlet net = require('net');\nlet server = net.createserver();\nserver.on('connection',function(){\n    console.log('æå®¢æ·ç«¯è¿æ¥ä¸æ¥äº');\n});\nserver.on('listening',function () {\n    console.log('æå¡å¨çå¬æåäºï¼æ­£å¨ç­å¾å®¢æ·ç«¯è¿æ¥');\n});\nserver.listen(3000,'127.0.0.1');\n\n\nç¶åå¯ç¨telnetå®¢æ·ç«¯æå¡ï¼å½ä»¤è¡ä¸­è¾å¥ï¼\n\n> telnet 127.0.0.1 3000\n\nå°±ä¼è¿æ¥æåã\n\n\n# net.socketå¯¹è±¡\n\nnet.socketå®ä¾å®ç°äºä¸duplexï¼åå·¥ï¼æµæ¥å£ï¼æä¾äºwritableåreadableææåè½ï¼æä»¥è¯´å®æ¢æ¯å¯è¯»æµä¹æ¯å¯åæµã\n\nnet.socketå¯¹è±¡åæ¶å¨å¥æ¥å­æå¡å¨åå®¢æ·ç«¯ä¸åå»ºï¼å¹¶ä¸ä¼åè®¸æ°æ®å¨ä»ä»¬ä¹é´è¿è¡è¯»åååå¥ï¼ä¸æ¦socketå¯¹è±¡è¢«åå»ºï¼å°±æä¾äºä¸äºè§¦åçäºä»¶ã\n\näºä»¶        æè¿°\nlookup    è§£æåååï¼è¿æ¥åè§¦å\nconnect   æåå»ºç«socketè¿æ¥æ¶è§¦å\ndata      å½æ¶å°æ°æ®æ¶è§¦å\nend       å½socketå¦ä¸ç¹åéfinåæ¶\ntimeout   socketç©ºé²è¶æ¶\ndrain     åç¼å­ä¸ºç©ºçæ¶åè§¦åã\nerror     åçéè¯¯ã\nclose     socketå³é­\n\n 1. æå¡å¨åå®¢æ·ç«¯åéæ¶æ¯\n\nlet net = require('net');\nlet server = net.createserver();\nserver.on('connection',function(socket){\n    console.log('æå®¢æ·ç«¯è¿æ¥ä¸æ¥äº');\n    console.log('å®¢æ·ç«¯ipå°åï¼'+socket.remoteaddress+'è¿æ¥å°äºå½åæå¡å¨');\n    socket.write('hello');\n});\nserver.on('listening',function () {\n    console.log('æå¡å¨çå¬æåäºï¼æ­£å¨ç­å¾å®¢æ·ç«¯è¿æ¥');\n});\nserver.listen(3000,'127.0.0.1');\n\n//ç¶åå¯ç¨telnetå®¢æ·ç«¯æå¡ï¼å½ä»¤è¡ä¸­è¾å¥ï¼\n//telnet 127.0.0.1 3000\n\n//æå¡ç«¯è¾åº\n//æå¡å¨çå¬æåäºï¼æ­£å¨ç­å¾å®¢æ·ç«¯è¿æ¥\n//æå®¢æ·ç«¯è¿æ¥ä¸æ¥äº\n//å®¢æ·ç«¯ipå°åï¼127.0.0.1è¿æ¥å°äºå½åæå¡å¨\n\n//å®¢æ·ç«¯è¾åº\n//hello\n\n\n 2. ç»è®¡å¨çº¿äººæ°\n\nlet net = require('net');\nlet server = net.createserver();\nlet count = 0;\nserver.on('connection',function(socket){\n    count++;\n    console.log('welcome,å½åå¨çº¿äººæ°ï¼'+count);\n    socket.write('remoteaddress'+socket.remoteaddress+'\\n');\n    socket.write('remoteport'+socket.remoteport);\n});\nserver.listen(3000,'127.0.0.1',function() {\n    console.log('server listening at port 3000');\n});\n\n//ç¶åå¯ç¨ä¸¤ä¸ªtelnetå®¢æ·ç«¯æå¡ï¼å½ä»¤è¡ä¸­è¾å¥ï¼\n//telnet 127.0.0.1 3000\n\n//æå¡ç«¯è¾åº\n/*\nserver listening at port 3000\nwelcome,å½åå¨çº¿äººæ°ï¼1\nwelcome,å½åå¨çº¿äººæ°ï¼2\n*/\n\n\n 3. å®¢æ·ç«¯ä¸æå¡ç«¯ååéä¿¡\n\nåå»ºå®¢æ·ç«¯net.creatconnection()æ§è¡å®æ¯ä¼è¿åä¸ä¸ªsocketå¯¹è±¡\n\n//æå¡ç«¯\nlet net = require('net');\nlet server = net.createserver();\nserver.on('connection',function(socket){\n    socket.on('data',function (data) {\n        console.log(data.tostring());\n        socket.write('æåçå°è±å');\n    });\n});\nserver.listen(3000,'127.0.0.1',function() {\n    console.log('server listening at port 3000');\n});\n\n//å®¢æ·ç«¯\nlet net = require('net');\nlet client = net.createconnection({\n    port:3000\n});\nclient.on('connect',function () {\n    console.log('å®¢æ·ç«¯ä¸æå¡å¨è¿æ¥æåäº');\n    client.write('ä½ åäºå');\n});\nclient.on('data',function (data) {\n    console.log(data.tostring());\n});\n\n\n\n# node.jsè¿ç¨ç®¡ç\n\n\n# processæ¨¡åè·åç»ç«¯è¾å¥\n\nå¦æéè¦å¨å®¢æ·ç«¯è¾å¥ä¿¡æ¯åéå°æå¡å¨ï¼è¿æ ·çåè½å°±éè¦ä¾èµprocessæ¨¡åæ¥å®æã\n\nprocessæ¨¡åæ¯ä¸ä¸ªæ é¡»ä½¿ç¨requireå°±å¯ä»¥è®¿é®çå¨å±å¯¹è±¡ã\n\nprocess.stdin.on('data',function(data){\n    console.log(data.tostring().trim());//trimæ¯å»æè¾å¥åæçç©ºæ ¼\n});\n\n\n\n# å¤äººå¹¿æ­æ¶æ¯\n\næå¡ç«¯æ¥æ¶å®¢æ·ç«¯æ¶æ¯ï¼å°å®¢æ·ç«¯æ¶æ¯åéç»å¶ä»å®¢æ·ç«¯\n\n//æå¡ç«¯\nlet net = require('net');\nlet server = net.createserver();\n//è¯¥æ°ç»ç¨æ¥å°è£ææå®¢æ·ç«¯çscoket\nlet users = [];\nserver.on('connection',function (socket) {\n    users.push(socket);\n    socket.on('data',function (data) {\n        data = data.tostring().trim();\n        users.foreach(function (client) {\n            if(client !== socket){\n                //ä¸åå®¢æ·ç«¯ç«¯å£å·ä¸å\n                client.write(client.remoteport+':'+data);\n            }\n        });\n    });\n    socket.on('error',function () {\n        console.log('æå®¢æ·ç«¯éåºäº');\n    });\n})\nserver.listen(3000,'127.0.0.1',function () {\n    console.log('server listening at port 3000');\n})\n\n//å®¢æ·ç«¯\nlet net = require('net');\n//åæå¡ç«¯åå»ºè¿æ¥\nlet client = net.createconnection({\n    port:3000,\n    host:'127.0.0.1'\n});\nclient.on('connect',function(){\n    //éè¿å½åè¿ç¨çæ åè¾å¥çdataäºä»¶è·åç»ç«¯çè¾å¥\n    process.stdin.on('data',function (data) {\n        data = data.tostring().trim();\n        client.write(data);\n    });\n});\nclient.on('data',function (data) {\n    console.log(data.tostring());\n});\n\n//æå¼å¤ä¸ªå®¢æ·ç«¯ï¼å³å¯äºç¸åéæ¶æ¯\n",charsets:{cjk:!0}},{title:"Node.jsæä»¶æä½",frontmatter:{title:"Node.jsæä»¶æä½",date:"2019-05-04T16:00:54.000Z",categories:"Node.js"},regularPath:"/node/node-5.html",relativePath:"node/node-5.md",key:"v-1f9aecc2",path:"/node/node-5.html",headers:[{level:2,title:"åæ­¥æä»¶åå¥",slug:"åæ­¥æä»¶åå¥",normalizedTitle:"åæ­¥æä»¶åå¥",charIndex:142},{level:2,title:"å¼æ­¥æä»¶åå¥",slug:"å¼æ­¥æä»¶åå¥",normalizedTitle:"å¼æ­¥æä»¶åå¥",charIndex:319},{level:2,title:"æ§å¶æ­è¯æ»å¨",slug:"æ§å¶æ­è¯æ»å¨",normalizedTitle:"æ§å¶æ­è¯æ»å¨",charIndex:587}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"åæ­¥æä»¶åå¥ å¼æ­¥æä»¶åå¥ æ§å¶æ­è¯æ»å¨",content:"Node.jsçæä»¶æä½APIç±fsï¼File Systemï¼æ¨¡åæä¾ï¼è¯¥æ¨¡åæä¾çå½æ°åæå¼æ­¥ååæ­¥çæ¬ï¼ä¾å¦è¯»åæä»¶åå®¹çå½æ°æå¼æ­¥çfs.readFile()ååæ­¥çfs.readFileSync()ãå®éå¼åä¸­å»ºè®®å¤§å®¶ä½¿ç¨å¼æ­¥å½æ°ï¼æ§è½æ´é«ï¼éåº¦æ´å¿«ï¼èä¸æ²¡æé»å¡ã\n\n\n# åæ­¥æä»¶åå¥\n\n//åæ­¥APIå¿é¡»ä½¿ç¨try...catchæ¥æè·å¼å¸¸\nvar fs = require('fs');\ntry{\n    console.log('åå¥æä»¶...');\n    fs.writeFileSync('è·¯å¾','åå®¹');\n}catch(e){\n    console.log('ä¸å¥½ææï¼æä»¶åå¥å¤±è´¥äº');\n}\n\n\n\n# å¼æ­¥æä»¶åå¥\n\n//å¼æ­¥æä»¶åå¥å½æ°å¤äºä¸ä¸ªåè°å½æ°\nvar fs = require('fs');\nconsole.log(1);\n//è¯¥æ¹æ³ä¸­åè°å½æ°çç¬¬ä¸ä¸ªåæ°ä¸ºéè¯¯å¯¹è±¡\nfs.write('è·¯å¾','åå®¹',function(err){\n    if(err){\n        console.log('ä¸å¥½ææï¼æä»¶åå¥å¤±è´¥äº');\n    }\n    console.log(2);\n});\nconsole.log(3);\n//è¾åº132\n\n\nå¶ä»çä¸äºæä»¶æä½å¨æ­¤å°±ä¸ç»åäºï¼ä¸ç½éæ¶å¯æ¥ï¼ä¸é¢åä¸ä¸ªå®éä¾å­ã\n\n\n# æ§å¶æ­è¯æ»å¨\n\næ­è¯æ ¼å¼\n\n> [ti:èªç±(Live)] [ar:æ¢åçª] [al:èé¢æ­çç¬¬å«æ] [by:ææ1314] [00:00.00]æ¢åçª - èªç±(Live) [00:03.00]æ­è¯ç¼è¾ï¼ææ [00:06.00]QQ:765708831 [00:09.00]Lrcæ­è¯ç½ï¼www.90lrc.cn [00:12.00] [00:16.65]ä¹è®¸ä¼æ¨ä½  [00:18.66]æç¥éæçè¾æ°ä¸æ¯å¾å¥½\n\næ­è¯éæ¶é´éå¥è¾åº\n\nlet fs = require('fs');\nfs.readFile('./lrc.txt',function (err,data) {\n    if(err){\n        return console.log('è¯»åæ­è¯æä»¶å¤±è´¥äº');\n    }\n    data = data.toString();\n    let lines = data.split('\\n');\n    //æ­£åå¹éï¼è§£æåºæ¯«ç§\n    //éè¦éé¢çæ¶é´åéé¢çåå®¹\n    let reg = /\\[(\\d{2})\\:(\\d{2})\\.(\\d{2})\\]\\s*(.+)/;\n    for(let i = 0;i < lines.length;i++){\n        //èªæ§è¡å½æ°\n        ;(function(index){\n            let line = lines[index];\n            let matches = reg.exec(line);\n            if(matches){\n                let m = parseFloat(matches[1]);\n                let s = parseFloat(matches[2]);\n                let ms = parseFloat(matches[3]);\n                let content = matches[4];\n                let time = m*60*1000 + s*1000 +ms;\n                setTimeout(function () {\n                    console.log(content);\n                },time);\n            }\n        })(i);\n    }\n})\n",normalizedContent:"node.jsçæä»¶æä½apiç±fsï¼file systemï¼æ¨¡åæä¾ï¼è¯¥æ¨¡åæä¾çå½æ°åæå¼æ­¥ååæ­¥çæ¬ï¼ä¾å¦è¯»åæä»¶åå®¹çå½æ°æå¼æ­¥çfs.readfile()ååæ­¥çfs.readfilesync()ãå®éå¼åä¸­å»ºè®®å¤§å®¶ä½¿ç¨å¼æ­¥å½æ°ï¼æ§è½æ´é«ï¼éåº¦æ´å¿«ï¼èä¸æ²¡æé»å¡ã\n\n\n# åæ­¥æä»¶åå¥\n\n//åæ­¥apiå¿é¡»ä½¿ç¨try...catchæ¥æè·å¼å¸¸\nvar fs = require('fs');\ntry{\n    console.log('åå¥æä»¶...');\n    fs.writefilesync('è·¯å¾','åå®¹');\n}catch(e){\n    console.log('ä¸å¥½ææï¼æä»¶åå¥å¤±è´¥äº');\n}\n\n\n\n# å¼æ­¥æä»¶åå¥\n\n//å¼æ­¥æä»¶åå¥å½æ°å¤äºä¸ä¸ªåè°å½æ°\nvar fs = require('fs');\nconsole.log(1);\n//è¯¥æ¹æ³ä¸­åè°å½æ°çç¬¬ä¸ä¸ªåæ°ä¸ºéè¯¯å¯¹è±¡\nfs.write('è·¯å¾','åå®¹',function(err){\n    if(err){\n        console.log('ä¸å¥½ææï¼æä»¶åå¥å¤±è´¥äº');\n    }\n    console.log(2);\n});\nconsole.log(3);\n//è¾åº132\n\n\nå¶ä»çä¸äºæä»¶æä½å¨æ­¤å°±ä¸ç»åäºï¼ä¸ç½éæ¶å¯æ¥ï¼ä¸é¢åä¸ä¸ªå®éä¾å­ã\n\n\n# æ§å¶æ­è¯æ»å¨\n\næ­è¯æ ¼å¼\n\n> [ti:èªç±(live)] [ar:æ¢åçª] [al:èé¢æ­çç¬¬å«æ] [by:ææ1314] [00:00.00]æ¢åçª - èªç±(live) [00:03.00]æ­è¯ç¼è¾ï¼ææ [00:06.00]qq:765708831 [00:09.00]lrcæ­è¯ç½ï¼www.90lrc.cn [00:12.00] [00:16.65]ä¹è®¸ä¼æ¨ä½  [00:18.66]æç¥éæçè¾æ°ä¸æ¯å¾å¥½\n\næ­è¯éæ¶é´éå¥è¾åº\n\nlet fs = require('fs');\nfs.readfile('./lrc.txt',function (err,data) {\n    if(err){\n        return console.log('è¯»åæ­è¯æä»¶å¤±è´¥äº');\n    }\n    data = data.tostring();\n    let lines = data.split('\\n');\n    //æ­£åå¹éï¼è§£æåºæ¯«ç§\n    //éè¦éé¢çæ¶é´åéé¢çåå®¹\n    let reg = /\\[(\\d{2})\\:(\\d{2})\\.(\\d{2})\\]\\s*(.+)/;\n    for(let i = 0;i < lines.length;i++){\n        //èªæ§è¡å½æ°\n        ;(function(index){\n            let line = lines[index];\n            let matches = reg.exec(line);\n            if(matches){\n                let m = parsefloat(matches[1]);\n                let s = parsefloat(matches[2]);\n                let ms = parsefloat(matches[3]);\n                let content = matches[4];\n                let time = m*60*1000 + s*1000 +ms;\n                settimeout(function () {\n                    console.log(content);\n                },time);\n            }\n        })(i);\n    }\n})\n",charsets:{cjk:!0}},{title:"ç²¾è¯»ãæ·±å¥æµåºNodeJsã",frontmatter:{},regularPath:"/node/book.html",relativePath:"node/book.md",key:"v-2253c17f",path:"/node/book.html",headers:[{level:2,title:"ç¬¬ä¸ç«  Node ç®ä»",slug:"ç¬¬ä¸ç« -node-ç®ä»",normalizedTitle:"ç¬¬ä¸ç«  node ç®ä»",charIndex:21},{level:2,title:"ç¬¬äºç«  æ¨¡åæºå¶",slug:"ç¬¬äºç« -æ¨¡åæºå¶",normalizedTitle:"ç¬¬äºç«  æ¨¡åæºå¶",charIndex:513},{level:3,title:"åºæ¬æ¦å¿µ",slug:"åºæ¬æ¦å¿µ",normalizedTitle:"åºæ¬æ¦å¿µ",charIndex:526},{level:3,title:"æ¨¡åå®ç°",slug:"æ¨¡åå®ç°",normalizedTitle:"æ¨¡åå®ç°",charIndex:846},{level:3,title:"ç¼å­ç­ç¥",slug:"ç¼å­ç­ç¥",normalizedTitle:"ç¼å­ç­ç¥",charIndex:1104},{level:3,title:"æ¨¡åè·¯å¾",slug:"æ¨¡åè·¯å¾",normalizedTitle:"æ¨¡åè·¯å¾",charIndex:1207},{level:3,title:"æ¨¡åç¼è¯",slug:"æ¨¡åç¼è¯",normalizedTitle:"æ¨¡åç¼è¯",charIndex:1623},{level:3,title:"npm",slug:"npm",normalizedTitle:"npm",charIndex:2818},{level:2,title:"ç¬¬ä¸ç«  å¼æ­¥ I/O",slug:"ç¬¬ä¸ç« -å¼æ­¥-i-o",normalizedTitle:"ç¬¬ä¸ç«  å¼æ­¥ i/o",charIndex:2924},{level:3,title:"äºä»¶å¾ªç¯",slug:"äºä»¶å¾ªç¯",normalizedTitle:"äºä»¶å¾ªç¯",charIndex:3348},{level:3,title:"è§å¯è",slug:"è§å¯è",normalizedTitle:"è§å¯è",charIndex:3353},{level:3,title:"è¯·æ±å¯¹è±¡",slug:"è¯·æ±å¯¹è±¡",normalizedTitle:"è¯·æ±å¯¹è±¡",charIndex:3357},{level:3,title:"æ§è¡åè°",slug:"æ§è¡åè°",normalizedTitle:"æ§è¡åè°",charIndex:3362},{level:2,title:"é I/O çå¼æ­¥ API",slug:"é-i-o-çå¼æ­¥-api",normalizedTitle:"é i/o çå¼æ­¥ api",charIndex:4083},{level:3,title:"å®æ¶å¨",slug:"å®æ¶å¨",normalizedTitle:"å®æ¶å¨",charIndex:4220},{level:3,title:"process.nextTick",slug:"process-nexttick",normalizedTitle:"process.nexttick",charIndex:4199},{level:3,title:"setImmediate",slug:"setimmediate",normalizedTitle:"setimmediate",charIndex:4186},{level:2,title:"ç¬¬äºç«  åå­æ§å¶",slug:"ç¬¬äºç« -åå­æ§å¶",normalizedTitle:"ç¬¬äºç«  åå­æ§å¶",charIndex:4931},{level:3,title:"V8åå­éå¶",slug:"v8åå­éå¶",normalizedTitle:"v8åå­éå¶",charIndex:5075},{level:3,title:"V8çå¯¹è±¡åé",slug:"v8çå¯¹è±¡åé",normalizedTitle:"v8çå¯¹è±¡åé",charIndex:5196},{level:3,title:"V8çåå¾åæ¶æºå¶",slug:"v8çåå¾åæ¶æºå¶",normalizedTitle:"v8çåå¾åæ¶æºå¶",charIndex:5594}],lastUpdated:"3/9/2022, 11:41:37 AM",lastUpdatedTimestamp:1646797297e3,headersStr:"ç¬¬ä¸ç«  Node ç®ä» ç¬¬äºç«  æ¨¡åæºå¶ åºæ¬æ¦å¿µ æ¨¡åå®ç° ç¼å­ç­ç¥ æ¨¡åè·¯å¾ æ¨¡åç¼è¯ npm ç¬¬ä¸ç«  å¼æ­¥ I/O äºä»¶å¾ªç¯ è§å¯è è¯·æ±å¯¹è±¡ æ§è¡åè° é I/O çå¼æ­¥ API å®æ¶å¨ process.nextTick setImmediate ç¬¬äºç«  åå­æ§å¶ V8åå­éå¶ V8çå¯¹è±¡åé V8çåå¾åæ¶æºå¶",content:"# ç²¾è¯»ãæ·±å¥æµåºNodeJsã\n\n\n# ç¬¬ä¸ç«  Node ç®ä»\n\nå¼æ­¥IO\n\n> Node åºå±æå»ºäºè®¸å¤å¼æ­¥ IO ç APIï¼ä»æä»¶è¯»åå°ç½ç»è¯·æ±ï¼è¿æ ·çæä¹å¨äºï¼æä»¬å¯ä»¥ä»è¯­è¨å±é¢å¾èªç¶å°è¿è¡å¹¶è¡ IO æä½ï¼æ¯ä¸ªè°ç¨ä¹åæ é¡»ç­å¾ä¹åç IO è°ç¨ç»æï¼æå¤§æåæçã\n\näºä»¶é©±å¨\n\n> Node å°åç«¯æµè§å¨ä¸­å¹¿æ³ä¸æççäºä»¶å¼å¥åç«¯ï¼éåå¼æ­¥ IOï¼å°äºä»¶ç¹æ´é²ç»ä¸å¡é»è¾ãäºä»¶ç¼ç¨çæ¹å¼å·æè½»éçº§ï¼æ¾è¦åï¼åªå³æ³¨äºå¡ç¹ç­ä¼å¿ã\n\nåçº¿ç¨\n\n> ä¼ç¹ï¼åçº¿ç¨çæå¤§å¥½å¤æ¯ä¸ç¨åå¤çº¿ç¨ç¼ç¨é£æ ·å¤å¤å¨æç¶æçåæ­¥é®é¢ï¼è¿éæ²¡ææ­»éçå­å¨ï¼ä¹æ²¡æçº¿ç¨ä¸ä¸æäº¤æ¢æå¸¦æ¥æ§è½ä¸çå¼éã\n> \n> ç¼ºç¹ï¼åæµè§å¨ä¸­ js ä¸ UI å±ç¨ä¸ä¸ªçº¿ç¨ï¼js é¿ææ§è¡ä¼å¯¼è´ UI çæ¸²æåååºè¢«ä¸­æ­ãå¨ Node ä¸­ï¼é¿æ¶é´ç CPU å ç¨ä¹ä¼å¯¼è´åç»­çå¼æ­¥ IO åä¸åºè°ç¨ï¼å·²å®æçå¼æ­¥ IO åè°å½æ°å¾ä¸å°åæ¶æ§è¡ã\n\nè·¨å¹³å°\n\n> Node å¨ v0.6.0 çæ¬æ¯æäº windows å¹³å°ï¼è¿ä¸»è¦å¾çäº Node æ¶æå±é¢çæ¹å¨ï¼å®å¨æä½ç³»ç»ä¸ Node ä¸å±æ¨¡åç³»ç»ä¹é´æå»ºäºä¸å±å¹³å°å±æ¶æï¼å³ libuvã\n\n\n# ç¬¬äºç«  æ¨¡åæºå¶\n\n\n# åºæ¬æ¦å¿µ\n\næ¨¡åå¼ç¨\n\nvar math = require('math');\n\n\næ¨¡åå®ä¹ï¼å¨ Node ä¸­ä¸ä¸ªæä»¶å°±æ¯ä¸ä¸ªæ¨¡åï¼å°æ¹æ³æè½½å¨ exports å¯¹è±¡ä¸ä½ä¸ºå±æ§å³å¯å®ä¹å¯¼åºçæ¹å¼\n\n// math.js\nexports.add = function() {};\n\n// program.js\nvar math = require('math');\nexports.increment = function (val) {\n  return math.add(val, 1);\n}\n\n\næ¨¡åæ è¯\n\næ¨¡åæ è¯å¶å®å°±æ¯ä¼ éç» require æ¹æ³çåæ°ï¼å¿é¡»ç¬¦åå°é©¼å³°å½åï¼å¯ä»¥æ¯ç¸å¯¹è·¯å¾ï¼ç»å¯¹è·¯å¾ï¼å¯ä»¥æ²¡æåç¼ .js\n\n\n# æ¨¡åå®ç°\n\nå¨ Node ä¸­å¼å¥æ¨¡åï¼éè¦ç»åä»¥ä¸ä¸ä¸ªæ­¥éª¤ï¼\n\n * è·¯å¾åæ\n * æä»¶å®ä½\n * ç¼è¯æ§è¡\n\nå¨ Node ä¸­ï¼æ¨¡åååä¸ºä¸¤ç±»\n\n * æ ¸å¿æ¨¡åï¼Node æä¾çæ¨¡å\n * æä»¶æ¨¡åï¼ç¨æ·ç¼åçæ¨¡å\n\n> æ ¸å¿æ¨¡åé¨åå¨ Node æºä»£ç çç¼è¯è¿ç¨ä¸­ï¼ç¼è¯è¿äºäºè¿å¶æ§è¡æä»¶ï¼å¨ Node è¿ç¨å¯å¨æ¶ï¼é¨åæ ¸å¿æ¨¡åå°±è¢«ç´æ¥å è½½è¿åå­ä¸­ï¼çç¥æäºæä»¶å®ä½åç¼è¯æ§è¡çæ­¥éª¤ï¼ä¸å¨è·¯å¾åæä¸­ä¼åå¤æ­ï¼æå è½½æå¿«ã\n> \n> æä»¶æ¨¡ååéè¦å®æ´çè·¯å¾åæï¼æä»¶å®ä½ï¼ç¼è¯æ§è¡ï¼éåº¦æ¯æ ¸å¿æ¨¡åæ¢ã\n\n\n# ç¼å­ç­ç¥\n\nä¸åç«¯æµè§å¨ä¼ç¼å­éæèæ¬æä»¶æé«æ§è½ä¸æ ·ï¼Nodeå¯¹å¼å¥è¿çæ¨¡åé½ä¼è¿è¡ç¼å­ï¼ä»¥åå°äºæ¬¡å¼å¥æ¶çå¼éãä¸åçå°æ¹å¨äºï¼æµè§å¨ä»ä»ç¼å­æä»¶ï¼è Node ç¼å­çæ¯ç¼è¯åæ§è¡ä¹åçå¯¹è±¡ã\n\n\n# æ¨¡åè·¯å¾\n\næ¨¡åæ è¯ç¬¦å¨ Node ä¸­ä¸»è¦åä¸ºä»¥ä¸å ç±»ï¼æ ¸å¿æ¨¡åï¼è·¯å¾å½¢å¼çæä»¶æ¨¡åï¼èªå®ä¹æ¨¡åï¼å è½½éåº¦ä¸ºï¼\n\n> ç¼å­è¿çæ¨¡å > æ ¸å¿æ¨¡å > è·¯å¾å½¢å¼æä»¶æ¨¡å > èªå®ä¹æ¨¡å\n\nåå æ¯èªå®ä¹æ¨¡å Node å¨å®ä½æ¶ä½¿ç¨æ¨¡åè·¯å¾çæ¥æ¾ç­ç¥ï¼å·ä½è¡¨ç°ä¸ºä¸ä¸ªè·¯å¾ç»æçæ°ç»ã\n\n[\n  '/home/usr/research/node_modules',\n  '/home/usr/node_modules',\n  '/node_modules'\n]\n\n\nå®çæçè§åå¦ä¸ï¼\n\n * å½åæä»¶ç®å½ä¸ç node_modules ç®å½\n * ç¶ç®å½ä¸ç node_modules ç®å½\n * ç¶ç®å½çç¶ç®å½ä¸ç node_modules ç®å½\n * æ²¿è·¯å¾åä¸éçº§éå½ï¼ç´å°æ ¹ç®å½ä¸ç node_modules ç®å½\n\nå¹¶ä¸å¦ææ è¯ç¬¦ä¸åå«æä»¶æ©å±åï¼Node ä¼æç§ .jsï¼.jsonï¼.node çæ¬¡åºè¡¥è¶³ä¾æ¬¡å°è¯ã\n\n\n# æ¨¡åç¼è¯\n\nç¼è¯åæ§è¡æ¯å¼å¥æä»¶æ¨¡åçæåä¸ä¸ªé¶æ®µï¼å¯¹äºä¸åçæä»¶æ©å±åï¼è½½å¥æ¹æ³ä¹ææä¸åã\n\n * .js æä»¶ï¼éè¿ fs åæ­¥è¯»ååç¼è¯æ§è¡\n * .node æä»¶ï¼C/C++ç¼åçæ©å±æä»¶\n * .json æä»¶ï¼éè¿ fs åæ­¥è¯»ååï¼JSON.parse è§£æ\n * å¶ä½æ©å±åæä»¶ï¼åè¢«å½å .js æä»¶è½½å¥\n\nJavaScript æ¨¡å\n\nå¨ CommonJS è§èä¸­ï¼æ¯ä¸ªæ¨¡åæä»¶é½å­å¨ç requireãexportsãmodulesã__filenameã__dirnameï¼å®ä»¬æ¯ä»ä½èæ¥å¢ï¼äºå®ä¸ï¼Node å¯¹è·åç JavaScript æä»¶è¿è¡äºå¤´å°¾åè£ï¼ä¸ä¸ªæ­£å¸¸ç JavaScript æä»¶ä¼è¢«åè£æå¦ä¸ï¼\n\n(function(exports, require, module, __filename, __dirname) {\n\t// æ¨¡åä»£ç å®éå­å¨äºæ­¤å¤\n});\n\n\nå¨æ§è¡ä¹åï¼æ¨¡åç exports å±æ§è¢«è¿åç»äºè°ç¨æ¹ï¼exports å±æ§ä¸çä»»ä½æ¹æ³åå±æ§é½å¯ä»¥è¢«å¤é¨è°ç¨å°ï¼ä½æ¯æ¨¡åä¸­çå¶ä½åéæå±æ§åä¸å¯ç´æ¥è¢«è°ç¨ã\n\nmodule.exports.f = ... å¯ä»¥æ´ç®æ´å°åæ exports.f = ... ï¼ç¸å½äºæ¯ä¸ªæ¨¡åä¸­å­å¨ä¸å¥var exports = module.exports;ï¼exports å¯¹è±¡æ¯éè¿å½¢åçæ¹å¼ä¼ å¥çï¼å¦æç´æ¥èµå¼å½¢åä¼æ¹åå½¢åçå¼ç¨ï¼ç­äºåæ­äºexports ä¸ module.exports çèç³»ã\n\nexports.hello = true; // ä»æ¨¡åç require ä¸­å¯¼åº\nexports = { hello: false };  // æªå¯¼åºï¼ä»å¨æ¨¡åä¸­å¯ç¨\n\n\nexportsãmodule.exportsåexportãexport defaultå°åºæ¯ååäº\n\nC/C++ æ¨¡å\n\n.nodeçæ¨¡åæä»¶å¹¶ä¸éè¦ç¼è¯ï¼å ä¸ºä»æ¯ C/C++ æ¨¡åç¼è¯çæçï¼æä»¥åªæå è½½åæ§è¡çè¿ç¨ãNode è°ç¨dlopenæ¹æ³è¿è¡å è½½åæ§è¡ã\n\n> *nix ä¸éè¿ gcc/g++ ç­ç¼è¯å¨ç¼è¯ä¸ºå¨æé¾æ¥å±äº«å¯¹è±¡æä»¶ï¼.soï¼ï¼å¨ window ä¸åéè¦éè¿ Visual C++ çç¼è¯å¨ç¼è¯ä¸ºå¨æé¾æ¥åºåºæä»¶ï¼.dllï¼ï¼.node æ©å±åå¶å®åªæ¯ä¸ºäºçèµ·æ¥èªç¶ä¸äºï¼å¨ *nix ä¸å®æ¯ä¸ä¸ª .so æä»¶ï¼å¨ windows ä¸å®æ¯ä¸ä¸ª .dll æä»¶ãdlopen æ¹æ³åé¨å®ç°æ¶ä¹åºåäºå¹³å°ã\n\nå¶å®å¨åºç¨ä¸­ï¼å¯è½ä¼é¢ç¹çåºç°ä½è¿ç®çéæ±ï¼åæ¬è½¬ç ï¼ç¼ç ç­è¿ç¨ãå¦æç¨ JavaScript æ¥å®ç°ï¼CPU èµæºå°ä¼èè´¹å¾å¤ï¼JavaScript çä½è¿ç®æçè¾ä½ï¼ï¼æ­¤æ¶ C/C++ æ¨¡åçä¼å¿å°±ä½ç°åºæ¥äºï¼æä»¬ä¹å¯ä»¥èªå·±ç¼å C++ æ©å±æ¨¡åæ¥æåæ§è½ã\n\n\n# npm\n\nCommonJSåè§èæ¯çè®ºï¼NPM æ¯å¶ä¸­çä¸ç§å®è·µãå¯¹äº Node èè¨ï¼NPM å¸®å©å®æäºç¬¬ä¸æ¹æ¨¡åçåå¸ï¼å®è£åä¾èµç­ãåå© NPM ï¼Node ä¸ç¬¬ä¸æ¹æ¨¡åä¹é´å½¢æäºå¾å¥½ççæç³»ç»ã\n\n\n# ç¬¬ä¸ç«  å¼æ­¥ I/O\n\nåè®¾ä¸å¡åºæ¯ä¸­æä¸ç»äºä¸ç¸å³çä»»å¡éè¦å®æï¼ä¸è¬æä¸¤ç§æ¹æ³ï¼\n\n * åçº¿ç¨ä¸²è¡ä¾æ¬¡æ§è¡\n * å¤çº¿ç¨å¹¶è¡å®æ\n\nå¤çº¿ç¨æ¯é¦éçï¼ä½æ¯ä»£ä»·å¨äºåå»ºçº¿ç¨åæ§è¡æçº¿ç¨ä¸ä¸æåæ¢çå¼éè¾å¤§ï¼ä¸é¢ä¸´éãç¶æåæ­¥ç­é®é¢ãä½æ¯å¤çº¿ç¨å¨å¤æ ¸ CPU ä¸è½å¤æææå CPU çå©ç¨çã\n\nåçº¿ç¨é¡ºåºæ§è¡ç¼ºç¹å¨äºæ§è½ï¼ä»»æä¸ä¸ªç¥æ¢çä»»å¡é½ä¼å¯¼è´åç»­æ§è¡ä»£ç è¢«é»å¡ï¼å¨è®¡ç®æºèµæºä¸­ï¼éå¸¸I/Oä¸CPUè®¡ç®ä¹é´æ¯å¯ä»¥å¹¶è¡æ§è¡çï¼ä½æ¯åæ­¥çç¼ç¨æ¨¡åå¯¼è´çé®é¢æ¯ï¼I/Oçè¿è¡ä¼è®©åç»­ä»»å¡ç»§ç»­ç­å¾ï¼é æèµæºä¸è½è¢«æ´å¥½å°å©ç¨ã\n\nNode å¨ä¸¤èä¹é´ç»åºäºå®çæ¹æ¡ï¼å©ç¨åçº¿ç¨ï¼è¿ç¦»å¤çº¿ç¨æ­»éï¼ç¶æåæ­¥ç­é®é¢ï¼å©ç¨å¼æ­¥ I/Oï¼è®©åçº¿ç¨è¿ç¦»é»å¡ï¼ä»¥æ´å¥½å¾å©ç¨ CPUãå¼æ­¥ I/O å¯ä»¥ç®ä½ Node çç¹è²ï¼å ä¸ºå®æ¯é¦ä¸ªå¤§è§æ¨¡å°å¼æ­¥ I/O åºç¨å¨åºç¨å±ä¸çå¹³å°ï¼å®åæ±å¨åçº¿ç¨ä¸å°èµæºåéå¾æ´é«æã\n\nå®æ Node æ´ä¸ªå¼æ­¥ I/O ç¯èéè¦ï¼äºä»¶å¾ªç¯ãè§å¯èãè¯·æ±å¯¹è±¡ãæ§è¡åè°\n\n\n# äºä»¶å¾ªç¯\n\nå¨è¿ç¨å¯å¨æ¶ï¼Node ä¾¿ä¼åå»ºä¸ä¸ªç±»ä¼¼äº while(true) çå¾ªç¯ï¼æ¯æ§è¡ä¸æ¬¡å¾ªç¯çè¿ç¨æä¸º Tickï¼æ¯ä¸ª Tick çè¿ç¨å°±æ¯æ¥çæ¯å¦æäºä»¶å¾å¤çï¼å¦ææå°±ååºäºä»¶ååè°å½æ°å¹¶æ§è¡ã\n\n\n# è§å¯è\n\nå¨æ¯ä¸ª Tick çè¿ç¨ä¸­ï¼å¦ä½å¤æ­æ¯å¦æäºä»¶éè¦å¤çå¢ï¼è¿éå°±éè¦è§å¯èï¼å¤æ­æ¯å¦æäºä»¶è¦å¤ççè¿ç¨å°±æ¯åè¿äºè§å¯èè¯¢é®æ¯å¦æè¦å¤ççäºä»¶ã\n\n\n# è¯·æ±å¯¹è±¡\n\nå¦æä»¬è°ç¨fs.openæ¶ï¼JavaScript ä¼è°ç¨ Node çæ ¸å¿æ¨¡åï¼æ ¸å¿æ¨¡åè°ç¨ C++ åå»ºæ¨¡åï¼åå»ºæ¨¡åéè¿ libuv è¿è¡ç³»ç»è°ç¨ï¼libuv ä½ä¸ºå°è£å±ï¼æä¸¤ä¸ªå¹³å°çå®ç°ï¼å®è´¨ä¸æ¯è°ç¨äº uv_fs_open æ¹æ³ï¼å¨è°ç¨è¿ç¨ä¸­åå»ºäºESReqWrapè¯·æ±å¯¹è±¡ã\n\nè³æ­¤ï¼JavaScript è°ç¨ç«å³è¿åï¼JavaScript çº¿ç¨å¯ä»¥ç»§ç»­æ§è¡å½åä»»å¡çåç»­æä½ãå½åç I/O æä½å¨çº¿ç¨æ± ä¸­ç­å¾æ§è¡ï¼ä¸ç®¡ä»æ¯å¦é»å¡ I/O ï¼é½ä¸åå½±å JavaScript çº¿ç¨çåç»­æ§è¡ï¼å¦æ­¤è¾¾å°äºå¼æ­¥çç®çã\n\nè¯·æ±å¯¹è±¡æ¯å¼æ­¥ I/O è¿ç¨ä¸­çéè¦ä¸­é´äº§ç©ï¼ææçç¶æé½ä¿å­å¨è¿ä¸ªå¯¹è±¡ä¸­ï¼åæ¬éå¥çº¿ç¨æ± ç­å¾æ§è¡ä»¥åI/Oæä½å®æ¯åçåè°å¤çã\n\n\n# æ§è¡åè°\n\nç»è£å¥½è¯·æ±å¯¹è±¡ãéå¥ I/O çº¿ç¨æ± ç­å¾æ§è¡ï¼å®éä¸å®æäºå¼æ­¥ I/O çç¬¬ä¸æ­¥ï¼åè°éç¥æ¯ç¬¬äºæ­¥ã\n\nè¿ä¸ªè¿ç¨ä¸­æä»¬è¿è°ç¨äºäºä»¶å¾ªç¯ç I/O è§å¯èï¼å¨æ¯æ¬¡ Tick çæ§è¡ä¸­ï¼å®ä¼æ£æ¥çº¿ç¨æ± ä¸­æ¯å¦ææ§è¡å®çè¯·æ±ï¼å¦æå­å¨ï¼ä¼å°è¯·æ±å¯¹è±¡å å¥å° I/O è§å¯èçéåä¸­ï¼ç¶åå°å¶å½ä½äºä»¶å¤çã\n\nè³æ­¤ï¼æ´ä¸ªå¼æ­¥ I/O çæµç¨å®å¨ç»æã\n\n\n\n\n# é I/O çå¼æ­¥ API\n\nå°½ç®¡æä»¬å¨ä»ç» Node æ¶ï¼å¤æ°æåµä¸é½ä¼æå°å¼æ­¥ I/Oï¼ä½æ¯ Node ä¸­å¶å®è¿å­å¨ä¸äºä¸ I/O æ å³çå¼æ­¥ APIã\n\nsetTimeoutãsetIntervalãsetImmediateãprocess.nextTick\n\n\n# å®æ¶å¨\n\nsetTimeoutãsetInterval çå®ç°åçä¸å¼æ­¥ I/O æ¯è¾ç±»ä¼¼ï¼åªæ¯ä¸éè¦ I/O çº¿ç¨æ± çåä¸ï¼åå»ºçå®æ¶å¨ä¼è¢«æå¥å°å®æ¶å¨è§å¯èåé¨çä¸ä¸ªçº¢é»æ ä¸­ãæ¯æ¬¡ Tick æ§è¡æ¶ä»è¯¥çº¢é»æ ä¸­è¿­ä»£ååºå®æ¶å¨å¯¹è±¡ï¼æ£æ¥æ¯å¦è¶è¿å®æ¶æ¶é´ï¼å¦æè¶è¿ç«å³æ§è¡åè°å½æ°ã\n\né®é¢å¨äºå®å¹¶éç²¾ç¡®çï¼å°½ç®¡äºä»¶å¾ªç¯éå¸¸å¿«ï¼ä½æ¯å¦æææ¬¡å¾ªç¯å ç¨çæ¶é´è¿å¤ï¼é£ä¹ä¸æ¬¡å¾ªç¯æ¶ï¼å®ä¹è®¸å·²ç»è¶æ¶å¾ä¹äºãæ¯å¦ setTimeout è®¾å®ä¸ä¸ªä»»å¡å¨ 10 æ¯«ç§åæ§è¡ï¼ä½æ¯å¨ 9 æ¯«ç§åï¼æä¸ä¸ªä»»å¡å ç¨äº 5 æ¯«ç§ç CPU æ¶é´çï¼æ¶é´å°±å·²ç»è¿æ 4 æ¯«ç§ã\n\n\n# process.nextTick\n\nå®æ¶å¨éè¦å¨ç¨çº¢é»æ ï¼åå»ºå®æ¶å¨å¯¹è±¡åè¿­ä»£ç­æä½ï¼è¾ä¸ºæµªè´¹æ§è½ãå®éä¸ï¼process.nextTick æ´ä¸ºè½»éã\n\næ¯æ¬¡è°ç¨ process.nextTick ï¼åªä¼å°åè°å½æ°æ¾å¥éåï¼å¨ä¸ä¸è½® Tick æ¶ååºæ§è¡ã\n\n\n# setImmediate\n\nsetImmediate ä¸ process.nextTick ååç±»ä¼¼ï¼åªéè®°ä½ process.nextTick è§å¯èä¼åçº§é«äº setImmediate\n\nprocess.nextTick(function() {\n  console.log('nextTickå»¶è¿æ§è¡');\n})\n\nsetImmediate(function() {\n  console.log('setImmediateå»¶è¿æ§è¡');\n})\n\nconsole.log('æ­£å¸¸æ§è¡')\n\n// æ­£å¸¸æ§è¡\n// nextTickå»¶è¿æ§è¡\n// setImmediateå»¶è¿æ§è¡\n\n\n\n# ç¬¬äºç«  åå­æ§å¶\n\nChrome æµè§å¨ä¼å¼çæ§è½èåç¦»ä¸å¼ V8ï¼V8 çæ§è½ä¼å¿ä½¿å¾ç¨ JavaScript åé«æ§è½åå°æå¡ç¨åºæä¸ºå¯è½ï¼å¨è¿æ ·çå¥æºä¸ï¼Node çä½èéæ©äº JavaScriptï¼éæ©äº V8ï¼å¨äºä»¶é©±å¨ãéé»å¡ I/O æ¨¡åçè®¾è®¡ä¸å®ç°äº Nodeã\n\n\n# V8åå­éå¶\n\nå¨ä¸è¬çåç«¯å¼åè¯­è¨ä¸­ï¼åå­ä½¿ç¨åºæ¬æ²¡æä»ä¹éå¶ï¼ç¶èå¨ Node ä¸­ä¼æåå­éå¶ï¼64ä½ç³»ç»ä¸çº¦ä¸º 1.4GBï¼32ä½ç³»ç»ä¸çº¦ä¸º 0.7 GBï¼ï¼è¿ä¼å¯¼è´ Node æ æ³ç´æ¥æä½å¤§åå­å¯¹è±¡ï¼å¦è¯»å¥ 2GB çæä»¶ã\n\n\n# V8çå¯¹è±¡åé\n\nå¨ V8 ä¸­ï¼ææç JavaScript å¯¹è±¡é½æ¯éè¿å æ¥è¿è¡åéçï¼å½æä»¬å¨ä»£ç ä¸­å£°æåéå¹¶èµå¼æ¶ï¼æä½¿ç¨å¯¹è±¡çåå­å°±åéå¨å ä¸­ãè³äº V8 ä¸ºä½è¦éå¶å çå¤§å°ï¼ä¸»è¦æä¸¤ç¹åå ï¼\n\n * è¡¨å±åå ï¼V8 æåæ¯ä¸ºæµè§å¨èè®¾è®¡ï¼ä¸å¤ªå¯è½éå°ç¨å¤§éåå­çåºæ¯ã\n * æ·±å±åå ï¼V8 åå¾åæ¶çéå¶ï¼å ä¸ºåå¾åæ¶ä¼å¼èµ· JavaScript çº¿ç¨æåæ§è¡ï¼å¦æåå­è¿å¤§ï¼åå¾åæ¶éè¦çæ¶é´ä¼è¶å¤ï¼åºç¨çæ§è½åååºè½åé½ä¼ç´çº¿ä¸éã\n\nå½ç¶ä¹å¯ä»¥æå¼è¿ä¸ªéå¶ï¼ä¸è¿éè¦æ³¨æè¿åªæ¯å¨å¯å¨æ¶æå®ï¼æ æ³å¨ä½¿ç¨æ¶æ ¹æ®æåµèªå¨æ©åã\n\nnode --max-old-space-size=1700 test.js # åä½ä¸º MBï¼ç¨äºè®¾ç½®èçä»£åå­æå¤§å¼\nnode --max-new-space-size=1024 test.js # åä½ä¸º KBï¼ç¨äºè®¾ç½®æ°å£°ä»£åå­æå¤§å¼\n\n\n\n# V8çåå¾åæ¶æºå¶\n\nå¨ V8 ä¸­ä¸»è¦å°åå­åä¸ºæ°çä»£åèçä»£ï¼æ°çä»£ä¸­æ¯å­æ´»æ¶é´è¾ç­çå¯¹è±¡ï¼èçä»£ä¸­æ¯å­æ´»æ¶é´è¾é¿çæå¸¸é©»åå­çå¯¹è±¡ãå¨é»è®¤è®¾ç½®ä¸ï¼\n\n * èçä»£å¨ 64 ä½ç³»ç»ä¸ä¸º 1400 MBï¼å¨ 32 ä½ç³»ç»ä¸ä¸º 700 MB\n * æ°çä»£å¨ 64 ä½ç³»ç»ä¸ä¸º 32 MBï¼å¨ 32 ä½ç³»ç»ä¸ä¸º 16 MB\n\nè¿ä¹å°±è§£éäºä¸ºä½å¨ 64 ä½ç³»ç»ä¸åªè½ä½¿ç¨çº¦ 1.4 GBåå­åå¨ 32 ä½ç³»ç»ä¸åªè½ä½¿ç¨çº¦ 0.7 GBåå­\n\n# Scavenge ç®æ³\n\nå¨åä»£çåºç¡ä¸ï¼æ°çä»£çå¯¹è±¡ä¸»è¦éè¿ Scavenge ç®æ³è¿è¡åå¾åæ¶ï¼å¨ Scavenge çå·ä½å®ç°ä¸­ï¼ä¸»è¦éç¨äº Cheney ç®æ³ï¼\n\n> åå­ä¸åä¸ºäºï¼From ç©ºé´å To ç©ºé´\n> \n> åéå¯¹è±¡æ¶åå¨ From ç©ºé´åéï¼è¿è¡åå¾åæ¶æ¶ï¼ä¼æ£æ¥ From ç©ºé´ä¸­çå­æ´»å¯¹è±¡ï¼è¿äºå­æ´»å¯¹è±¡å°è¢«å¤å¶å° To ç©ºé´ï¼èéå­æ´»å¯¹è±¡å ç¨çç©ºé´å°è¢«éæ¾ï¼å®æå¤å¶åï¼From å To åçå¯¹æ¢ã\n\nè¿ç§ç®æ³çç¼ºç¹æ¯åªè½ä½¿ç¨å åå­ä¸­çä¸åï¼å¸åçç©ºé´æ¢åæ¶é´çç®æ³ï¼æ æ³å¤§è§æ¨¡åºç¨å°ææåå¾åæ¶ä¸­ãä½æ¯ç¹å«éååºç¨å¨æ°çä»£ä¸­ï¼å ä¸ºæ°çä»£ä¸­å¯¹è±¡çå½å¨æè¾ç­ï¼æ°æ°éåè¿ä¸ªç®æ³ã\n\n# æå\n\nå½ä¸ä¸ªå¯¹è±¡ç»è¿å¤æ¬¡å¤å¶ä¾ç¶å­æ´»æ¶ï¼å®å°ä¼è¢«è®¤ä¸ºæ¯çå½å¨æè¾é¿çå¯¹è±¡ï¼è¿ç§è¾é¿çå½å¨æçå¯¹è±¡éåä¼è¢«ç§»å¨å°èçä»£ä¸­ï¼éç¨æ°çç®æ³è¿è¡ç®¡çãå¯¹è±¡æåçæ¡ä»¶æ2ä¸ªï¼\n\n 1. å¯¹è±¡æ¯å¦ç»åè¿ Scavenge åæ¶\n 2. To ç©ºé´çåå­å ç¨æ¯è¶è¿éå¶\n\n> å½å¯¹è±¡ä» From ç©ºé´å¤å¶å° To ç©ºé´æ¶ï¼ä¼æ£æ¥å®çåå­å°åæ¯å¦å·²ç»ç»åè¿ä¸æ¬¡ Scavenge åæ¶ï¼å¦æç»åè¿äºï¼å°è¯¥å¯¹è±¡ä» From ç©ºé´å¤å¶å°èçä»£ç©ºé´ä¸­ã\n> \n> å½å¯¹è±¡ä» From ç©ºé´å¤å¶å° To ç©ºé´æ¶ï¼å¦æ To ç©ºé´å·²ç»ä½¿ç¨äºè¶è¿ 25%ï¼åè¿ä¸ªå¯¹è±¡ç´æ¥æåå°èçä»£ä¸­ãï¼25% åå æ¯å ä¸ºå½è¿æ¬¡åæ¶å®æåï¼è¿ä¸ª To ç©ºé´å°åå From ç©ºé´ï¼æ¥ä¸æ¥çåå­åéå°å¨è¿ä¸ªç©ºé´åè¿è¡ï¼å¦æå æ¯è¿é«ï¼ä¼å½±ååç»­çåå­åéï¼\n\n# Mark Sweep & Mark-Compact\n\næ è®°æ¸é¤\n\nMark Sweep åä¸ºæ è®°åæ¸é¤ä¸¤ä¸ªé¶æ®µï¼å¨æ è®°é¶æ®µéåå ä¸­çææå¯¹è±¡ï¼å¹¶æ è®°æ´»ççå¯¹è±¡ï¼å¨éåçæ¸é¤é¶æ®µï¼åªæ¸é¤æ²¡æè¢«æ è®°çå¯¹è±¡ã\n\nç¼ºç¹ï¼å¨è¿è¡ä¸æ¬¡æ è®°æ¸é¤æ¶ï¼åå­ç©ºé´ä¼åºç°ä¸è¿ç»­çç¶æãå¦æåç»­éè¦åéä¸ä¸ªå¤§çå¯¹è±¡ï¼ç¢çç©ºé´æ æ³å®æåéã\n\n\n\næ è®°æ´ç\n\nå¨æ è®°æ¸é¤çåºç¡ä¸ï¼å¦æå¯¹è±¡è¢«æ è®°æ­»äº¡ï¼å¨æ´ççè¿ç¨ä¸­ï¼å°æ´»ççå¯¹è±¡å¾ä¸ç«¯ç§»å¨ï¼ç§»å¨å®æåï¼ç´æ¥æ¸çæè¾¹çå¤çåå­ã\n\n\n\nåæ¶ç®æ³     MARK-SWEEP   MARK-COMPACT   SCAVENGE\néåº¦       ä¸­ç­           ææ¢             æå¿«\nç©ºé´å¼é     å°ï¼æç¢çï¼       å°ï¼æ ç¢çï¼         ååç©ºé´ï¼æ ç¢çï¼\næ¯å¦ç§»å¨å¯¹è±¡   å¦            æ¯              æ¯\n\nMark-Compact éåº¦æ¯ Mark-Sweep æ¢ï¼æä»¥å¨åèä¸ï¼V8 ä¸»è¦ä½¿ç¨ Mark-Sweepï¼å¨ç©ºé´ä¸è¶³æ¶å¯¹ä»æ°çä»£æåè¿æ¥çå¯¹è±¡è¿è¡åéæ¶æä½¿ç¨ Mark-Compactã\n\n# Incremental Marking\n\nä¸ºäºé¿ååºç° JavaScript åºç¨é»è¾ä¸åå¾åæ¶å¨çå°çä¸ä¸è´çæåµï¼åå¾åæ¶ç3ç§åºæ¬ç®æ³é½éè¦å°åºç¨é»è¾æåä¸æ¥ï¼è¿ç§è¡ä¸ºç§°ä½\"å¨åé¡¿\"ï¼ä¸ºäºéä½è¿ç§åé¡¿æ¶é´ï¼V8 åä»æ è®°é¶æ®µå¥æï¼å°åæ¬è¦ä¸å£æ°å®æçå¨ä½æ¹ä¸ºå¢éæ è®°ï¼ä¹å°±æ¯æåæè®¸å¤å°\"æ­¥è¿\"ï¼æ¯åå®ä¸\"æ­¥è¿\"ï¼å°±è®© JavaScript åºç¨é»è¾æ§è¡ä¸å°ä¼å¿ï¼åå¾åæ¶ä¸åºç¨é»è¾äº¤æ¿æ§è¡ã\n\n",normalizedContent:"# ç²¾è¯»ãæ·±å¥æµåºnodejsã\n\n\n# ç¬¬ä¸ç«  node ç®ä»\n\nå¼æ­¥io\n\n> node åºå±æå»ºäºè®¸å¤å¼æ­¥ io ç apiï¼ä»æä»¶è¯»åå°ç½ç»è¯·æ±ï¼è¿æ ·çæä¹å¨äºï¼æä»¬å¯ä»¥ä»è¯­è¨å±é¢å¾èªç¶å°è¿è¡å¹¶è¡ io æä½ï¼æ¯ä¸ªè°ç¨ä¹åæ é¡»ç­å¾ä¹åç io è°ç¨ç»æï¼æå¤§æåæçã\n\näºä»¶é©±å¨\n\n> node å°åç«¯æµè§å¨ä¸­å¹¿æ³ä¸æççäºä»¶å¼å¥åç«¯ï¼éåå¼æ­¥ ioï¼å°äºä»¶ç¹æ´é²ç»ä¸å¡é»è¾ãäºä»¶ç¼ç¨çæ¹å¼å·æè½»éçº§ï¼æ¾è¦åï¼åªå³æ³¨äºå¡ç¹ç­ä¼å¿ã\n\nåçº¿ç¨\n\n> ä¼ç¹ï¼åçº¿ç¨çæå¤§å¥½å¤æ¯ä¸ç¨åå¤çº¿ç¨ç¼ç¨é£æ ·å¤å¤å¨æç¶æçåæ­¥é®é¢ï¼è¿éæ²¡ææ­»éçå­å¨ï¼ä¹æ²¡æçº¿ç¨ä¸ä¸æäº¤æ¢æå¸¦æ¥æ§è½ä¸çå¼éã\n> \n> ç¼ºç¹ï¼åæµè§å¨ä¸­ js ä¸ ui å±ç¨ä¸ä¸ªçº¿ç¨ï¼js é¿ææ§è¡ä¼å¯¼è´ ui çæ¸²æåååºè¢«ä¸­æ­ãå¨ node ä¸­ï¼é¿æ¶é´ç cpu å ç¨ä¹ä¼å¯¼è´åç»­çå¼æ­¥ io åä¸åºè°ç¨ï¼å·²å®æçå¼æ­¥ io åè°å½æ°å¾ä¸å°åæ¶æ§è¡ã\n\nè·¨å¹³å°\n\n> node å¨ v0.6.0 çæ¬æ¯æäº windows å¹³å°ï¼è¿ä¸»è¦å¾çäº node æ¶æå±é¢çæ¹å¨ï¼å®å¨æä½ç³»ç»ä¸ node ä¸å±æ¨¡åç³»ç»ä¹é´æå»ºäºä¸å±å¹³å°å±æ¶æï¼å³ libuvã\n\n\n# ç¬¬äºç«  æ¨¡åæºå¶\n\n\n# åºæ¬æ¦å¿µ\n\næ¨¡åå¼ç¨\n\nvar math = require('math');\n\n\næ¨¡åå®ä¹ï¼å¨ node ä¸­ä¸ä¸ªæä»¶å°±æ¯ä¸ä¸ªæ¨¡åï¼å°æ¹æ³æè½½å¨ exports å¯¹è±¡ä¸ä½ä¸ºå±æ§å³å¯å®ä¹å¯¼åºçæ¹å¼\n\n// math.js\nexports.add = function() {};\n\n// program.js\nvar math = require('math');\nexports.increment = function (val) {\n  return math.add(val, 1);\n}\n\n\næ¨¡åæ è¯\n\næ¨¡åæ è¯å¶å®å°±æ¯ä¼ éç» require æ¹æ³çåæ°ï¼å¿é¡»ç¬¦åå°é©¼å³°å½åï¼å¯ä»¥æ¯ç¸å¯¹è·¯å¾ï¼ç»å¯¹è·¯å¾ï¼å¯ä»¥æ²¡æåç¼ .js\n\n\n# æ¨¡åå®ç°\n\nå¨ node ä¸­å¼å¥æ¨¡åï¼éè¦ç»åä»¥ä¸ä¸ä¸ªæ­¥éª¤ï¼\n\n * è·¯å¾åæ\n * æä»¶å®ä½\n * ç¼è¯æ§è¡\n\nå¨ node ä¸­ï¼æ¨¡åååä¸ºä¸¤ç±»\n\n * æ ¸å¿æ¨¡åï¼node æä¾çæ¨¡å\n * æä»¶æ¨¡åï¼ç¨æ·ç¼åçæ¨¡å\n\n> æ ¸å¿æ¨¡åé¨åå¨ node æºä»£ç çç¼è¯è¿ç¨ä¸­ï¼ç¼è¯è¿äºäºè¿å¶æ§è¡æä»¶ï¼å¨ node è¿ç¨å¯å¨æ¶ï¼é¨åæ ¸å¿æ¨¡åå°±è¢«ç´æ¥å è½½è¿åå­ä¸­ï¼çç¥æäºæä»¶å®ä½åç¼è¯æ§è¡çæ­¥éª¤ï¼ä¸å¨è·¯å¾åæä¸­ä¼åå¤æ­ï¼æå è½½æå¿«ã\n> \n> æä»¶æ¨¡ååéè¦å®æ´çè·¯å¾åæï¼æä»¶å®ä½ï¼ç¼è¯æ§è¡ï¼éåº¦æ¯æ ¸å¿æ¨¡åæ¢ã\n\n\n# ç¼å­ç­ç¥\n\nä¸åç«¯æµè§å¨ä¼ç¼å­éæèæ¬æä»¶æé«æ§è½ä¸æ ·ï¼nodeå¯¹å¼å¥è¿çæ¨¡åé½ä¼è¿è¡ç¼å­ï¼ä»¥åå°äºæ¬¡å¼å¥æ¶çå¼éãä¸åçå°æ¹å¨äºï¼æµè§å¨ä»ä»ç¼å­æä»¶ï¼è node ç¼å­çæ¯ç¼è¯åæ§è¡ä¹åçå¯¹è±¡ã\n\n\n# æ¨¡åè·¯å¾\n\næ¨¡åæ è¯ç¬¦å¨ node ä¸­ä¸»è¦åä¸ºä»¥ä¸å ç±»ï¼æ ¸å¿æ¨¡åï¼è·¯å¾å½¢å¼çæä»¶æ¨¡åï¼èªå®ä¹æ¨¡åï¼å è½½éåº¦ä¸ºï¼\n\n> ç¼å­è¿çæ¨¡å > æ ¸å¿æ¨¡å > è·¯å¾å½¢å¼æä»¶æ¨¡å > èªå®ä¹æ¨¡å\n\nåå æ¯èªå®ä¹æ¨¡å node å¨å®ä½æ¶ä½¿ç¨æ¨¡åè·¯å¾çæ¥æ¾ç­ç¥ï¼å·ä½è¡¨ç°ä¸ºä¸ä¸ªè·¯å¾ç»æçæ°ç»ã\n\n[\n  '/home/usr/research/node_modules',\n  '/home/usr/node_modules',\n  '/node_modules'\n]\n\n\nå®çæçè§åå¦ä¸ï¼\n\n * å½åæä»¶ç®å½ä¸ç node_modules ç®å½\n * ç¶ç®å½ä¸ç node_modules ç®å½\n * ç¶ç®å½çç¶ç®å½ä¸ç node_modules ç®å½\n * æ²¿è·¯å¾åä¸éçº§éå½ï¼ç´å°æ ¹ç®å½ä¸ç node_modules ç®å½\n\nå¹¶ä¸å¦ææ è¯ç¬¦ä¸åå«æä»¶æ©å±åï¼node ä¼æç§ .jsï¼.jsonï¼.node çæ¬¡åºè¡¥è¶³ä¾æ¬¡å°è¯ã\n\n\n# æ¨¡åç¼è¯\n\nç¼è¯åæ§è¡æ¯å¼å¥æä»¶æ¨¡åçæåä¸ä¸ªé¶æ®µï¼å¯¹äºä¸åçæä»¶æ©å±åï¼è½½å¥æ¹æ³ä¹ææä¸åã\n\n * .js æä»¶ï¼éè¿ fs åæ­¥è¯»ååç¼è¯æ§è¡\n * .node æä»¶ï¼c/c++ç¼åçæ©å±æä»¶\n * .json æä»¶ï¼éè¿ fs åæ­¥è¯»ååï¼json.parse è§£æ\n * å¶ä½æ©å±åæä»¶ï¼åè¢«å½å .js æä»¶è½½å¥\n\njavascript æ¨¡å\n\nå¨ commonjs è§èä¸­ï¼æ¯ä¸ªæ¨¡åæä»¶é½å­å¨ç requireãexportsãmodulesã__filenameã__dirnameï¼å®ä»¬æ¯ä»ä½èæ¥å¢ï¼äºå®ä¸ï¼node å¯¹è·åç javascript æä»¶è¿è¡äºå¤´å°¾åè£ï¼ä¸ä¸ªæ­£å¸¸ç javascript æä»¶ä¼è¢«åè£æå¦ä¸ï¼\n\n(function(exports, require, module, __filename, __dirname) {\n\t// æ¨¡åä»£ç å®éå­å¨äºæ­¤å¤\n});\n\n\nå¨æ§è¡ä¹åï¼æ¨¡åç exports å±æ§è¢«è¿åç»äºè°ç¨æ¹ï¼exports å±æ§ä¸çä»»ä½æ¹æ³åå±æ§é½å¯ä»¥è¢«å¤é¨è°ç¨å°ï¼ä½æ¯æ¨¡åä¸­çå¶ä½åéæå±æ§åä¸å¯ç´æ¥è¢«è°ç¨ã\n\nmodule.exports.f = ... å¯ä»¥æ´ç®æ´å°åæ exports.f = ... ï¼ç¸å½äºæ¯ä¸ªæ¨¡åä¸­å­å¨ä¸å¥var exports = module.exports;ï¼exports å¯¹è±¡æ¯éè¿å½¢åçæ¹å¼ä¼ å¥çï¼å¦æç´æ¥èµå¼å½¢åä¼æ¹åå½¢åçå¼ç¨ï¼ç­äºåæ­äºexports ä¸ module.exports çèç³»ã\n\nexports.hello = true; // ä»æ¨¡åç require ä¸­å¯¼åº\nexports = { hello: false };  // æªå¯¼åºï¼ä»å¨æ¨¡åä¸­å¯ç¨\n\n\nexportsãmodule.exportsåexportãexport defaultå°åºæ¯ååäº\n\nc/c++ æ¨¡å\n\n.nodeçæ¨¡åæä»¶å¹¶ä¸éè¦ç¼è¯ï¼å ä¸ºä»æ¯ c/c++ æ¨¡åç¼è¯çæçï¼æä»¥åªæå è½½åæ§è¡çè¿ç¨ãnode è°ç¨dlopenæ¹æ³è¿è¡å è½½åæ§è¡ã\n\n> *nix ä¸éè¿ gcc/g++ ç­ç¼è¯å¨ç¼è¯ä¸ºå¨æé¾æ¥å±äº«å¯¹è±¡æä»¶ï¼.soï¼ï¼å¨ window ä¸åéè¦éè¿ visual c++ çç¼è¯å¨ç¼è¯ä¸ºå¨æé¾æ¥åºåºæä»¶ï¼.dllï¼ï¼.node æ©å±åå¶å®åªæ¯ä¸ºäºçèµ·æ¥èªç¶ä¸äºï¼å¨ *nix ä¸å®æ¯ä¸ä¸ª .so æä»¶ï¼å¨ windows ä¸å®æ¯ä¸ä¸ª .dll æä»¶ãdlopen æ¹æ³åé¨å®ç°æ¶ä¹åºåäºå¹³å°ã\n\nå¶å®å¨åºç¨ä¸­ï¼å¯è½ä¼é¢ç¹çåºç°ä½è¿ç®çéæ±ï¼åæ¬è½¬ç ï¼ç¼ç ç­è¿ç¨ãå¦æç¨ javascript æ¥å®ç°ï¼cpu èµæºå°ä¼èè´¹å¾å¤ï¼javascript çä½è¿ç®æçè¾ä½ï¼ï¼æ­¤æ¶ c/c++ æ¨¡åçä¼å¿å°±ä½ç°åºæ¥äºï¼æä»¬ä¹å¯ä»¥èªå·±ç¼å c++ æ©å±æ¨¡åæ¥æåæ§è½ã\n\n\n# npm\n\ncommonjsåè§èæ¯çè®ºï¼npm æ¯å¶ä¸­çä¸ç§å®è·µãå¯¹äº node èè¨ï¼npm å¸®å©å®æäºç¬¬ä¸æ¹æ¨¡åçåå¸ï¼å®è£åä¾èµç­ãåå© npm ï¼node ä¸ç¬¬ä¸æ¹æ¨¡åä¹é´å½¢æäºå¾å¥½ççæç³»ç»ã\n\n\n# ç¬¬ä¸ç«  å¼æ­¥ i/o\n\nåè®¾ä¸å¡åºæ¯ä¸­æä¸ç»äºä¸ç¸å³çä»»å¡éè¦å®æï¼ä¸è¬æä¸¤ç§æ¹æ³ï¼\n\n * åçº¿ç¨ä¸²è¡ä¾æ¬¡æ§è¡\n * å¤çº¿ç¨å¹¶è¡å®æ\n\nå¤çº¿ç¨æ¯é¦éçï¼ä½æ¯ä»£ä»·å¨äºåå»ºçº¿ç¨åæ§è¡æçº¿ç¨ä¸ä¸æåæ¢çå¼éè¾å¤§ï¼ä¸é¢ä¸´éãç¶æåæ­¥ç­é®é¢ãä½æ¯å¤çº¿ç¨å¨å¤æ ¸ cpu ä¸è½å¤æææå cpu çå©ç¨çã\n\nåçº¿ç¨é¡ºåºæ§è¡ç¼ºç¹å¨äºæ§è½ï¼ä»»æä¸ä¸ªç¥æ¢çä»»å¡é½ä¼å¯¼è´åç»­æ§è¡ä»£ç è¢«é»å¡ï¼å¨è®¡ç®æºèµæºä¸­ï¼éå¸¸i/oä¸cpuè®¡ç®ä¹é´æ¯å¯ä»¥å¹¶è¡æ§è¡çï¼ä½æ¯åæ­¥çç¼ç¨æ¨¡åå¯¼è´çé®é¢æ¯ï¼i/oçè¿è¡ä¼è®©åç»­ä»»å¡ç»§ç»­ç­å¾ï¼é æèµæºä¸è½è¢«æ´å¥½å°å©ç¨ã\n\nnode å¨ä¸¤èä¹é´ç»åºäºå®çæ¹æ¡ï¼å©ç¨åçº¿ç¨ï¼è¿ç¦»å¤çº¿ç¨æ­»éï¼ç¶æåæ­¥ç­é®é¢ï¼å©ç¨å¼æ­¥ i/oï¼è®©åçº¿ç¨è¿ç¦»é»å¡ï¼ä»¥æ´å¥½å¾å©ç¨ cpuãå¼æ­¥ i/o å¯ä»¥ç®ä½ node çç¹è²ï¼å ä¸ºå®æ¯é¦ä¸ªå¤§è§æ¨¡å°å¼æ­¥ i/o åºç¨å¨åºç¨å±ä¸çå¹³å°ï¼å®åæ±å¨åçº¿ç¨ä¸å°èµæºåéå¾æ´é«æã\n\nå®æ node æ´ä¸ªå¼æ­¥ i/o ç¯èéè¦ï¼äºä»¶å¾ªç¯ãè§å¯èãè¯·æ±å¯¹è±¡ãæ§è¡åè°\n\n\n# äºä»¶å¾ªç¯\n\nå¨è¿ç¨å¯å¨æ¶ï¼node ä¾¿ä¼åå»ºä¸ä¸ªç±»ä¼¼äº while(true) çå¾ªç¯ï¼æ¯æ§è¡ä¸æ¬¡å¾ªç¯çè¿ç¨æä¸º tickï¼æ¯ä¸ª tick çè¿ç¨å°±æ¯æ¥çæ¯å¦æäºä»¶å¾å¤çï¼å¦ææå°±ååºäºä»¶ååè°å½æ°å¹¶æ§è¡ã\n\n\n# è§å¯è\n\nå¨æ¯ä¸ª tick çè¿ç¨ä¸­ï¼å¦ä½å¤æ­æ¯å¦æäºä»¶éè¦å¤çå¢ï¼è¿éå°±éè¦è§å¯èï¼å¤æ­æ¯å¦æäºä»¶è¦å¤ççè¿ç¨å°±æ¯åè¿äºè§å¯èè¯¢é®æ¯å¦æè¦å¤ççäºä»¶ã\n\n\n# è¯·æ±å¯¹è±¡\n\nå¦æä»¬è°ç¨fs.openæ¶ï¼javascript ä¼è°ç¨ node çæ ¸å¿æ¨¡åï¼æ ¸å¿æ¨¡åè°ç¨ c++ åå»ºæ¨¡åï¼åå»ºæ¨¡åéè¿ libuv è¿è¡ç³»ç»è°ç¨ï¼libuv ä½ä¸ºå°è£å±ï¼æä¸¤ä¸ªå¹³å°çå®ç°ï¼å®è´¨ä¸æ¯è°ç¨äº uv_fs_open æ¹æ³ï¼å¨è°ç¨è¿ç¨ä¸­åå»ºäºesreqwrapè¯·æ±å¯¹è±¡ã\n\nè³æ­¤ï¼javascript è°ç¨ç«å³è¿åï¼javascript çº¿ç¨å¯ä»¥ç»§ç»­æ§è¡å½åä»»å¡çåç»­æä½ãå½åç i/o æä½å¨çº¿ç¨æ± ä¸­ç­å¾æ§è¡ï¼ä¸ç®¡ä»æ¯å¦é»å¡ i/o ï¼é½ä¸åå½±å javascript çº¿ç¨çåç»­æ§è¡ï¼å¦æ­¤è¾¾å°äºå¼æ­¥çç®çã\n\nè¯·æ±å¯¹è±¡æ¯å¼æ­¥ i/o è¿ç¨ä¸­çéè¦ä¸­é´äº§ç©ï¼ææçç¶æé½ä¿å­å¨è¿ä¸ªå¯¹è±¡ä¸­ï¼åæ¬éå¥çº¿ç¨æ± ç­å¾æ§è¡ä»¥åi/oæä½å®æ¯åçåè°å¤çã\n\n\n# æ§è¡åè°\n\nç»è£å¥½è¯·æ±å¯¹è±¡ãéå¥ i/o çº¿ç¨æ± ç­å¾æ§è¡ï¼å®éä¸å®æäºå¼æ­¥ i/o çç¬¬ä¸æ­¥ï¼åè°éç¥æ¯ç¬¬äºæ­¥ã\n\nè¿ä¸ªè¿ç¨ä¸­æä»¬è¿è°ç¨äºäºä»¶å¾ªç¯ç i/o è§å¯èï¼å¨æ¯æ¬¡ tick çæ§è¡ä¸­ï¼å®ä¼æ£æ¥çº¿ç¨æ± ä¸­æ¯å¦ææ§è¡å®çè¯·æ±ï¼å¦æå­å¨ï¼ä¼å°è¯·æ±å¯¹è±¡å å¥å° i/o è§å¯èçéåä¸­ï¼ç¶åå°å¶å½ä½äºä»¶å¤çã\n\nè³æ­¤ï¼æ´ä¸ªå¼æ­¥ i/o çæµç¨å®å¨ç»æã\n\n\n\n\n# é i/o çå¼æ­¥ api\n\nå°½ç®¡æä»¬å¨ä»ç» node æ¶ï¼å¤æ°æåµä¸é½ä¼æå°å¼æ­¥ i/oï¼ä½æ¯ node ä¸­å¶å®è¿å­å¨ä¸äºä¸ i/o æ å³çå¼æ­¥ apiã\n\nsettimeoutãsetintervalãsetimmediateãprocess.nexttick\n\n\n# å®æ¶å¨\n\nsettimeoutãsetinterval çå®ç°åçä¸å¼æ­¥ i/o æ¯è¾ç±»ä¼¼ï¼åªæ¯ä¸éè¦ i/o çº¿ç¨æ± çåä¸ï¼åå»ºçå®æ¶å¨ä¼è¢«æå¥å°å®æ¶å¨è§å¯èåé¨çä¸ä¸ªçº¢é»æ ä¸­ãæ¯æ¬¡ tick æ§è¡æ¶ä»è¯¥çº¢é»æ ä¸­è¿­ä»£ååºå®æ¶å¨å¯¹è±¡ï¼æ£æ¥æ¯å¦è¶è¿å®æ¶æ¶é´ï¼å¦æè¶è¿ç«å³æ§è¡åè°å½æ°ã\n\né®é¢å¨äºå®å¹¶éç²¾ç¡®çï¼å°½ç®¡äºä»¶å¾ªç¯éå¸¸å¿«ï¼ä½æ¯å¦æææ¬¡å¾ªç¯å ç¨çæ¶é´è¿å¤ï¼é£ä¹ä¸æ¬¡å¾ªç¯æ¶ï¼å®ä¹è®¸å·²ç»è¶æ¶å¾ä¹äºãæ¯å¦ settimeout è®¾å®ä¸ä¸ªä»»å¡å¨ 10 æ¯«ç§åæ§è¡ï¼ä½æ¯å¨ 9 æ¯«ç§åï¼æä¸ä¸ªä»»å¡å ç¨äº 5 æ¯«ç§ç cpu æ¶é´çï¼æ¶é´å°±å·²ç»è¿æ 4 æ¯«ç§ã\n\n\n# process.nexttick\n\nå®æ¶å¨éè¦å¨ç¨çº¢é»æ ï¼åå»ºå®æ¶å¨å¯¹è±¡åè¿­ä»£ç­æä½ï¼è¾ä¸ºæµªè´¹æ§è½ãå®éä¸ï¼process.nexttick æ´ä¸ºè½»éã\n\næ¯æ¬¡è°ç¨ process.nexttick ï¼åªä¼å°åè°å½æ°æ¾å¥éåï¼å¨ä¸ä¸è½® tick æ¶ååºæ§è¡ã\n\n\n# setimmediate\n\nsetimmediate ä¸ process.nexttick ååç±»ä¼¼ï¼åªéè®°ä½ process.nexttick è§å¯èä¼åçº§é«äº setimmediate\n\nprocess.nexttick(function() {\n  console.log('nexttickå»¶è¿æ§è¡');\n})\n\nsetimmediate(function() {\n  console.log('setimmediateå»¶è¿æ§è¡');\n})\n\nconsole.log('æ­£å¸¸æ§è¡')\n\n// æ­£å¸¸æ§è¡\n// nexttickå»¶è¿æ§è¡\n// setimmediateå»¶è¿æ§è¡\n\n\n\n# ç¬¬äºç«  åå­æ§å¶\n\nchrome æµè§å¨ä¼å¼çæ§è½èåç¦»ä¸å¼ v8ï¼v8 çæ§è½ä¼å¿ä½¿å¾ç¨ javascript åé«æ§è½åå°æå¡ç¨åºæä¸ºå¯è½ï¼å¨è¿æ ·çå¥æºä¸ï¼node çä½èéæ©äº javascriptï¼éæ©äº v8ï¼å¨äºä»¶é©±å¨ãéé»å¡ i/o æ¨¡åçè®¾è®¡ä¸å®ç°äº nodeã\n\n\n# v8åå­éå¶\n\nå¨ä¸è¬çåç«¯å¼åè¯­è¨ä¸­ï¼åå­ä½¿ç¨åºæ¬æ²¡æä»ä¹éå¶ï¼ç¶èå¨ node ä¸­ä¼æåå­éå¶ï¼64ä½ç³»ç»ä¸çº¦ä¸º 1.4gbï¼32ä½ç³»ç»ä¸çº¦ä¸º 0.7 gbï¼ï¼è¿ä¼å¯¼è´ node æ æ³ç´æ¥æä½å¤§åå­å¯¹è±¡ï¼å¦è¯»å¥ 2gb çæä»¶ã\n\n\n# v8çå¯¹è±¡åé\n\nå¨ v8 ä¸­ï¼ææç javascript å¯¹è±¡é½æ¯éè¿å æ¥è¿è¡åéçï¼å½æä»¬å¨ä»£ç ä¸­å£°æåéå¹¶èµå¼æ¶ï¼æä½¿ç¨å¯¹è±¡çåå­å°±åéå¨å ä¸­ãè³äº v8 ä¸ºä½è¦éå¶å çå¤§å°ï¼ä¸»è¦æä¸¤ç¹åå ï¼\n\n * è¡¨å±åå ï¼v8 æåæ¯ä¸ºæµè§å¨èè®¾è®¡ï¼ä¸å¤ªå¯è½éå°ç¨å¤§éåå­çåºæ¯ã\n * æ·±å±åå ï¼v8 åå¾åæ¶çéå¶ï¼å ä¸ºåå¾åæ¶ä¼å¼èµ· javascript çº¿ç¨æåæ§è¡ï¼å¦æåå­è¿å¤§ï¼åå¾åæ¶éè¦çæ¶é´ä¼è¶å¤ï¼åºç¨çæ§è½åååºè½åé½ä¼ç´çº¿ä¸éã\n\nå½ç¶ä¹å¯ä»¥æå¼è¿ä¸ªéå¶ï¼ä¸è¿éè¦æ³¨æè¿åªæ¯å¨å¯å¨æ¶æå®ï¼æ æ³å¨ä½¿ç¨æ¶æ ¹æ®æåµèªå¨æ©åã\n\nnode --max-old-space-size=1700 test.js # åä½ä¸º mbï¼ç¨äºè®¾ç½®èçä»£åå­æå¤§å¼\nnode --max-new-space-size=1024 test.js # åä½ä¸º kbï¼ç¨äºè®¾ç½®æ°å£°ä»£åå­æå¤§å¼\n\n\n\n# v8çåå¾åæ¶æºå¶\n\nå¨ v8 ä¸­ä¸»è¦å°åå­åä¸ºæ°çä»£åèçä»£ï¼æ°çä»£ä¸­æ¯å­æ´»æ¶é´è¾ç­çå¯¹è±¡ï¼èçä»£ä¸­æ¯å­æ´»æ¶é´è¾é¿çæå¸¸é©»åå­çå¯¹è±¡ãå¨é»è®¤è®¾ç½®ä¸ï¼\n\n * èçä»£å¨ 64 ä½ç³»ç»ä¸ä¸º 1400 mbï¼å¨ 32 ä½ç³»ç»ä¸ä¸º 700 mb\n * æ°çä»£å¨ 64 ä½ç³»ç»ä¸ä¸º 32 mbï¼å¨ 32 ä½ç³»ç»ä¸ä¸º 16 mb\n\nè¿ä¹å°±è§£éäºä¸ºä½å¨ 64 ä½ç³»ç»ä¸åªè½ä½¿ç¨çº¦ 1.4 gbåå­åå¨ 32 ä½ç³»ç»ä¸åªè½ä½¿ç¨çº¦ 0.7 gbåå­\n\n# scavenge ç®æ³\n\nå¨åä»£çåºç¡ä¸ï¼æ°çä»£çå¯¹è±¡ä¸»è¦éè¿ scavenge ç®æ³è¿è¡åå¾åæ¶ï¼å¨ scavenge çå·ä½å®ç°ä¸­ï¼ä¸»è¦éç¨äº cheney ç®æ³ï¼\n\n> åå­ä¸åä¸ºäºï¼from ç©ºé´å to ç©ºé´\n> \n> åéå¯¹è±¡æ¶åå¨ from ç©ºé´åéï¼è¿è¡åå¾åæ¶æ¶ï¼ä¼æ£æ¥ from ç©ºé´ä¸­çå­æ´»å¯¹è±¡ï¼è¿äºå­æ´»å¯¹è±¡å°è¢«å¤å¶å° to ç©ºé´ï¼èéå­æ´»å¯¹è±¡å ç¨çç©ºé´å°è¢«éæ¾ï¼å®æå¤å¶åï¼from å to åçå¯¹æ¢ã\n\nè¿ç§ç®æ³çç¼ºç¹æ¯åªè½ä½¿ç¨å åå­ä¸­çä¸åï¼å¸åçç©ºé´æ¢åæ¶é´çç®æ³ï¼æ æ³å¤§è§æ¨¡åºç¨å°ææåå¾åæ¶ä¸­ãä½æ¯ç¹å«éååºç¨å¨æ°çä»£ä¸­ï¼å ä¸ºæ°çä»£ä¸­å¯¹è±¡çå½å¨æè¾ç­ï¼æ°æ°éåè¿ä¸ªç®æ³ã\n\n# æå\n\nå½ä¸ä¸ªå¯¹è±¡ç»è¿å¤æ¬¡å¤å¶ä¾ç¶å­æ´»æ¶ï¼å®å°ä¼è¢«è®¤ä¸ºæ¯çå½å¨æè¾é¿çå¯¹è±¡ï¼è¿ç§è¾é¿çå½å¨æçå¯¹è±¡éåä¼è¢«ç§»å¨å°èçä»£ä¸­ï¼éç¨æ°çç®æ³è¿è¡ç®¡çãå¯¹è±¡æåçæ¡ä»¶æ2ä¸ªï¼\n\n 1. å¯¹è±¡æ¯å¦ç»åè¿ scavenge åæ¶\n 2. to ç©ºé´çåå­å ç¨æ¯è¶è¿éå¶\n\n> å½å¯¹è±¡ä» from ç©ºé´å¤å¶å° to ç©ºé´æ¶ï¼ä¼æ£æ¥å®çåå­å°åæ¯å¦å·²ç»ç»åè¿ä¸æ¬¡ scavenge åæ¶ï¼å¦æç»åè¿äºï¼å°è¯¥å¯¹è±¡ä» from ç©ºé´å¤å¶å°èçä»£ç©ºé´ä¸­ã\n> \n> å½å¯¹è±¡ä» from ç©ºé´å¤å¶å° to ç©ºé´æ¶ï¼å¦æ to ç©ºé´å·²ç»ä½¿ç¨äºè¶è¿ 25%ï¼åè¿ä¸ªå¯¹è±¡ç´æ¥æåå°èçä»£ä¸­ãï¼25% åå æ¯å ä¸ºå½è¿æ¬¡åæ¶å®æåï¼è¿ä¸ª to ç©ºé´å°åå from ç©ºé´ï¼æ¥ä¸æ¥çåå­åéå°å¨è¿ä¸ªç©ºé´åè¿è¡ï¼å¦æå æ¯è¿é«ï¼ä¼å½±ååç»­çåå­åéï¼\n\n# mark sweep & mark-compact\n\næ è®°æ¸é¤\n\nmark sweep åä¸ºæ è®°åæ¸é¤ä¸¤ä¸ªé¶æ®µï¼å¨æ è®°é¶æ®µéåå ä¸­çææå¯¹è±¡ï¼å¹¶æ è®°æ´»ççå¯¹è±¡ï¼å¨éåçæ¸é¤é¶æ®µï¼åªæ¸é¤æ²¡æè¢«æ è®°çå¯¹è±¡ã\n\nç¼ºç¹ï¼å¨è¿è¡ä¸æ¬¡æ è®°æ¸é¤æ¶ï¼åå­ç©ºé´ä¼åºç°ä¸è¿ç»­çç¶æãå¦æåç»­éè¦åéä¸ä¸ªå¤§çå¯¹è±¡ï¼ç¢çç©ºé´æ æ³å®æåéã\n\n\n\næ è®°æ´ç\n\nå¨æ è®°æ¸é¤çåºç¡ä¸ï¼å¦æå¯¹è±¡è¢«æ è®°æ­»äº¡ï¼å¨æ´ççè¿ç¨ä¸­ï¼å°æ´»ççå¯¹è±¡å¾ä¸ç«¯ç§»å¨ï¼ç§»å¨å®æåï¼ç´æ¥æ¸çæè¾¹çå¤çåå­ã\n\n\n\nåæ¶ç®æ³     mark-sweep   mark-compact   scavenge\néåº¦       ä¸­ç­           ææ¢             æå¿«\nç©ºé´å¼é     å°ï¼æç¢çï¼       å°ï¼æ ç¢çï¼         ååç©ºé´ï¼æ ç¢çï¼\næ¯å¦ç§»å¨å¯¹è±¡   å¦            æ¯              æ¯\n\nmark-compact éåº¦æ¯ mark-sweep æ¢ï¼æä»¥å¨åèä¸ï¼v8 ä¸»è¦ä½¿ç¨ mark-sweepï¼å¨ç©ºé´ä¸è¶³æ¶å¯¹ä»æ°çä»£æåè¿æ¥çå¯¹è±¡è¿è¡åéæ¶æä½¿ç¨ mark-compactã\n\n# incremental marking\n\nä¸ºäºé¿ååºç° javascript åºç¨é»è¾ä¸åå¾åæ¶å¨çå°çä¸ä¸è´çæåµï¼åå¾åæ¶ç3ç§åºæ¬ç®æ³é½éè¦å°åºç¨é»è¾æåä¸æ¥ï¼è¿ç§è¡ä¸ºç§°ä½\"å¨åé¡¿\"ï¼ä¸ºäºéä½è¿ç§åé¡¿æ¶é´ï¼v8 åä»æ è®°é¶æ®µå¥æï¼å°åæ¬è¦ä¸å£æ°å®æçå¨ä½æ¹ä¸ºå¢éæ è®°ï¼ä¹å°±æ¯æåæè®¸å¤å°\"æ­¥è¿\"ï¼æ¯åå®ä¸\"æ­¥è¿\"ï¼å°±è®© javascript åºç¨é»è¾æ§è¡ä¸å°ä¼å¿ï¼åå¾åæ¶ä¸åºç¨é»è¾äº¤æ¿æ§è¡ã\n\n",charsets:{cjk:!0}},{title:"Node.jsä¸­å¤çæ°æ®I/O",frontmatter:{title:"Node.jsä¸­å¤çæ°æ®I/O",date:"2019-05-05T16:00:54.000Z",categories:"Node.js"},regularPath:"/node/node-6.html",relativePath:"node/node-6.md",key:"v-02ff5082",path:"/node/node-6.html",headers:[{level:2,title:"Bufferçæé å½æ°",slug:"bufferçæé å½æ°",normalizedTitle:"bufferçæé å½æ°",charIndex:153},{level:2,title:"åå¥ç¼å²åº",slug:"åå¥ç¼å²åº",normalizedTitle:"åå¥ç¼å²åº",charIndex:538},{level:2,title:"ä»ç¼å²åºè¯»åæ°æ®",slug:"ä»ç¼å²åºè¯»åæ°æ®",normalizedTitle:"ä»ç¼å²åºè¯»åæ°æ®",charIndex:829},{level:2,title:"æ¼æ¥ç¼å²åº",slug:"æ¼æ¥ç¼å²åº",normalizedTitle:"æ¼æ¥ç¼å²åº",charIndex:1091},{level:2,title:"æä»¶æµçæ¦å¿µ",slug:"æä»¶æµçæ¦å¿µ",normalizedTitle:"æä»¶æµçæ¦å¿µ",charIndex:1367},{level:2,title:"Node.jsçå¯è¯»æµåå¯åæµ",slug:"node-jsçå¯è¯»æµåå¯åæµ",normalizedTitle:"node.jsçå¯è¯»æµåå¯åæµ",charIndex:1820},{level:2,title:"ä½¿ç¨pipe()å¤çå¤§æä»¶",slug:"ä½¿ç¨pipe-å¤çå¤§æä»¶",normalizedTitle:"ä½¿ç¨pipe()å¤çå¤§æä»¶",charIndex:3055}],lastUpdated:"9/29/2021, 7:43:24 PM",lastUpdatedTimestamp:1632915804e3,headersStr:"Bufferçæé å½æ° åå¥ç¼å²åº ä»ç¼å²åºè¯»åæ°æ® æ¼æ¥ç¼å²åº æä»¶æµçæ¦å¿µ Node.jsçå¯è¯»æµåå¯åæµ ä½¿ç¨pipe()å¤çå¤§æä»¶",content:"Node.jsä¸­æä¾äºå¤çæä»¶åç½ç»I/Oçåè½ï¼å æ­¤éè¦å¤çå¤§éçäºè¿å¶æ°æ®ãå¨Node.jsä¸­ï¼Bufferç¼å²åºåStreamæä»¶æµå¯¹äºè¿å¶æ°æ®çå¤çæä¾äºå¾å¥½çæ¯æã\n\n\n# Bufferç¼å²åº\n\nBufferç±»æ¯éNode.jsåæ ¸ä¸èµ·åå¸çæ ¸å¿åºï¼ç¨äºæ¯æI/Oæä½ä¸­ç§»å¨çæ°æ®å¤çã\n\n\n# Bufferçæé å½æ°\n\nNode.jsä¸­çBufferç¼å²åºæ¨¡åï¼æ¯æå¼åèå¨ç¼å²åºç»æä¸­åå»ºï¼è¯»åï¼åå¥åæä½äºè¿å¶æ°æ®ï¼è¯¥æ¨¡åæ¯å¨å±æ§çï¼æä»¥å¨ä½¿ç¨æ¶ä¸éè¦requireï¼ï¼å½æ°æ¥å è½½ã\n\n 1. ä¼ å¥å­è\n\nvar buf = new Buffer(size);\n\n\n 2. ä¼ å¥æ°ç»\n\nvar buf = new Buffer([10,20,30,40,50]);\n\n\n 3. ä¼ å¥å­ç¬¦ä¸²åç¼ç \n\nvar buf = new Buffer(\"hello\",\"utf-8\");\n\n\nBufferåæ ·æ¯æä»¥ä¸ç¼ç ï¼\n\n * asciiï¼7ä½ASCIIå­ç¬¦\n * utf16leï¼ä¸¤ä¸ªå­èï¼16ä½å°ç«¯å­èåº\n * usc2ï¼ä¸¤ä¸ªå­èï¼ä»¥å°å°¾å­èåºç¼ç çUnicodeå­ç¬¦\n * base64ï¼ç¨äºä¼ è¾8å­èä»£ç çç¼ç æ¹å¼ä¹ä¸\n * hexï¼Hexå­ç¬¦ä¸²ç¼ç \n\n\n# åå¥ç¼å²åº\n\nbuf.write(string,offset,length,encoding) //å­ç¬¦ä¸²ï¼ç´¢å¼å¼ï¼å­èæ°ï¼ç¼ç \n\nvar buf = new Buffer(5);\nconsole.log(buf.length);\nbuf.write('a');\nconsole.log(buf);\n//åå¥bæ¶éè¦å¨ç¬¬äºä¸ªåæ°ä¼ å¥ç¼å²åºå¼å§åå¥çç´¢å¼å¼\nbuf.write('b',1,1,'ascii');\nconsole.log(buf);\n\n//è¾åº\n//5\n//<Buffer 61 00 00 00 00>\n//<Buffer 61 62 00 00 00>\n\n\n\n# ä»ç¼å²åºè¯»åæ°æ®\n\nbuf.toString(encoding,start,end)\n\nvar buf = new Buffer(26);\nfor(let i = 0; i < 26 ; i++){\n    buf[i] = i + 97;\n}\n//è¾åºå¨é¨\nconsole.log(buf.toString('ascii'));\n//è¾åºå5ä¸ª\nconsole.log(buf.toString('ascii',0,5));\n\n//è¾åº\n//abcdefghijklmnopqrstuvwxyz\n//abcde\n\n\n\n# æ¼æ¥ç¼å²åº\n\nvar buf = new Buffer('ä¸ä¸æ é¾äº');\nvar buf1 = new Buffer('åªææå¿äºº');\nvar buf2 = Buffer.concat([buf,buf1]);\nconsole.log(buf2.toString());\n//è¾åºï¼ä¸ä¸æ é¾äºåªææå¿äºº\n\n\n\n# Streamæä»¶æµ\n\nç±äºBufferç¼å²åºéå¶å¨1GBï¼è¶è¿1GBçæä»¶æ æ³ç´æ¥å®æè¯»åæä½ï¼å¨è¯»åå¤§æä»¶æ¶ï¼å¦æè¯»åèµæºä¸ç´æç»­ä¸åæ­¢ï¼Node.jså°æ æ³ç»§ç»­å¶ä»å·¥ä½ï¼ä¸ºæ­¤Node.jsä¸­æä¾äºStreamæä»¶æµæ¨¡åã\n\n\n# æä»¶æµçæ¦å¿µ\n\nä¾å¦å¤å¶æä»¶çè¿ç¨ï¼æä»¶æµçæ¦å¿µå°±æ¯æä»¶Aä¸­æ°æ®ä»¥æµå¨çæ¹å¼éè¿æ°æ®æµç®¡éï¼ç¶åè¿å¥å°æä»¶Bä¸­ï¼éç¨âè¯»ä¸é¨åï¼åä¸é¨åâçæ¹å¼ï¼å°±åçè§é¢ï¼ä¸ä¸ç¹æ­ä¸ç¹ã\n\nå¨Node.jsä¸­ï¼æä»¶æµçæä½ç±Streamæ¨¡åæä¾ï¼Streamæ¨¡åæ¯ä¸ä¸ªæ½è±¡æ¥å£ï¼Node.jsä¸­è¿æå¾å¤å¯¹è±¡å®ç°äºè¿ä¸ªæ¥å£ï¼æ4ç§æµç±»åï¼\n\n * Readable: å¯è¯»æµ\n * Writeableï¼å¯åæµ\n * Duplexï¼å¯è¯»å¯åæµ\n * Transformï¼åæ¢æµï¼æä½è¢«åå¥æ°æ®ï¼ç¶åè¯»åºç»æï¼\n\nNode.jsä¸­çI/Oæ¯å¼æ­¥çï¼å æ­¤å¯¹ç£çåç½ç»çè¯»/åéè¦éè¿åè°å½æ°æ¥è¯»åæ°æ®ï¼èåè°å½æ°éè¦éè¿äºä»¶æ¥è§¦åï¼ææçStreamå¯¹è±¡é½æ¯EventEmitter(æ¶é´è§¦åå¨)çå®ä¾ã\n\näºä»¶       è¯´æ\ndata     å½ææ°æ®å¯è¯»æ¶è§¦å\nend      æ²¡ææ´å¤çæ°æ®å¯è¯»æ¶è§¦å\nerror    å¨æ¥æ¶ååå¥è¿ç¨ä¸­åçéè¯¯æ¶è§¦å\nfinish   æææ°æ®é½å·²è¢«åå¥å°ä½å±ç³»ç»æ¶è§¦å\n\n\n# Node.jsçå¯è¯»æµåå¯åæµ\n\n 1. å¯è¯»æµ\n\nä½¿ç¨æä»¶æµè¿è¡æä»¶å¤å¶ï¼é¦åéè¦åå»ºä¸ä¸ªå¯è¯»æµï¼å¯è¯»æµå¯ä»¥è®©ç¨æ·å¨æºæä»¶ä¸­ååè¯»åæä»¶ä¸­çæ°æ®ï¼ç¶ååä»å¯è¯»æµä¸­è¯»åæ°æ®ã\n\nfs.createReadStream()\n\nç±äºæµæ¯åºäºEventEmitterçï¼ä»æµè¯»åæ°æ®æå¥½çæ¹æ³æ¯çå¬æ°æ®äºä»¶ï¼data eventï¼ï¼å¹¶éå ä¸ä¸ªåè°å½æ°ï¼è¿åæ°æ®ï¼è¿ä¸ªæä½æ¯å¾ªç¯è¿å¶çï¼ä¸ç´å°è¯»åå®æ¯ãå¨è¯»åéè¯¯æè¯»åå®æ¯æ¶è§¦åerroræendäºä»¶ã\n\nlet fs= require(\"fs\");\nlet total = \"\";\n//åå»ºå¯è¯»æµ\nlet readableStream = fs.createReadStream('input.txt');//æ­¤æ¶æµä¸ºéæ­¢ç¶æ\n//è®¾ç½®ç¼ç ä¸ºutf-8\nreadableStream.setEncoding('UTF8');\n//å¤çæµäºä»¶\nreadableStream.on('data',function (chunk) {//éå åè°å½æ°ï¼æµå¼å§æµå¨\n    total += chunk;\n});\nreadableStream.on('end',function () {\n    console.log(total);\n});\nreadableStream.on('error',function (err) {\n    console.log(err.stack);\n});\nconsole.log(\"ç¨åºæ§è¡å®æ¯\");\n\n//è¾åºï¼ç¨åºæ§è¡å®æ¯\n//input.txtä¸­çåå®¹\n\n\n 2. å¯åæµ\n\nfs.createWriteStream()\n\nlet fs= require(\"fs\");\nlet total = \"\";\n//åå»ºå¯è¯»æµ\nlet readableStream = fs.createReadStream('input.txt');\n//åå»ºå¯åæµ\nlet writableStream = fs.createWriteStream('output.txt');\n//è®¾ç½®ç¼ç ä¸ºutf-8\nreadableStream.setEncoding('UTF8');\nreadableStream.on('data',function (chunk) {\n    writableStream.write(chunk);\n});\nreadableStream.on('error',function (err) {\n    console.log(err.stack);\n});\nreadableStream.on('end',function () {\n    writableStream.end();//å°å©ä¸çæ°æ®å¨é¨åå¥\n});\nwritableStream.on('error',function (err) {\n    console.log(err.stack);\n});\n\n\n\n# ä½¿ç¨pipe()å¤çå¤§æä»¶\n\nå¨ä½¿ç¨å¤§æä»¶å¤å¶çæ¡ä¾ä¸­ï¼éè¿å¯è¯»æµçchunkåæ°æ¥ä¼ éæ°æ®ï¼å¦æææ°æ®æ¯ä½æ¯æ°´ï¼chunkç¸å½äºçï¼ä½¿ç¨çæ¥å®ææ°´çä¼ éãå¯è¯»æµä¸­è¿æä¸ä¸ªå½æ°å«åpipe()ï¼è¿ä¸ªå½æ°æ¯ä¸ä¸ªå¾é«æçæä»¶å¤çæ¹å¼ï¼ç®åå¤å¶æä»¶çæä½ï¼âæçæ¢æäºç®¡å­âã\n\nlet fs = require('fs');\nlet srcPath = '';\nlet distPath = '';\nlet readableStream = fs.createReadStream(srcPath);\nlet writableStream = fs.createWriteStream(distPath);\n//å¯ä»¥éè¿ä½¿ç¨å¯è¯»æµå½æ°pipe()æ¥å¥å°å¯åæµä¸­\nif(readableStream.pipe(writableStream)){\n    console.log('å¤å¶æå');\n}else{\n    console.log('å¤å¶å¤±è´¥');\n}\n\n\n\n# å°ç»\n\næ°æ®ä¸æä»¶çå¤çæ¯æå¡å¨ç«¯ç¼ç¨ä¸å®¢æ·ç«¯ç¼ç¨çæ¬è´¨åºå«æå¨ã",normalizedContent:"node.jsä¸­æä¾äºå¤çæä»¶åç½ç»i/oçåè½ï¼å æ­¤éè¦å¤çå¤§éçäºè¿å¶æ°æ®ãå¨node.jsä¸­ï¼bufferç¼å²åºåstreamæä»¶æµå¯¹äºè¿å¶æ°æ®çå¤çæä¾äºå¾å¥½çæ¯æã\n\n\n# bufferç¼å²åº\n\nbufferç±»æ¯énode.jsåæ ¸ä¸èµ·åå¸çæ ¸å¿åºï¼ç¨äºæ¯æi/oæä½ä¸­ç§»å¨çæ°æ®å¤çã\n\n\n# bufferçæé å½æ°\n\nnode.jsä¸­çbufferç¼å²åºæ¨¡åï¼æ¯æå¼åèå¨ç¼å²åºç»æä¸­åå»ºï¼è¯»åï¼åå¥åæä½äºè¿å¶æ°æ®ï¼è¯¥æ¨¡åæ¯å¨å±æ§çï¼æä»¥å¨ä½¿ç¨æ¶ä¸éè¦requireï¼ï¼å½æ°æ¥å è½½ã\n\n 1. ä¼ å¥å­è\n\nvar buf = new buffer(size);\n\n\n 2. ä¼ å¥æ°ç»\n\nvar buf = new buffer([10,20,30,40,50]);\n\n\n 3. ä¼ å¥å­ç¬¦ä¸²åç¼ç \n\nvar buf = new buffer(\"hello\",\"utf-8\");\n\n\nbufferåæ ·æ¯æä»¥ä¸ç¼ç ï¼\n\n * asciiï¼7ä½asciiå­ç¬¦\n * utf16leï¼ä¸¤ä¸ªå­èï¼16ä½å°ç«¯å­èåº\n * usc2ï¼ä¸¤ä¸ªå­èï¼ä»¥å°å°¾å­èåºç¼ç çunicodeå­ç¬¦\n * base64ï¼ç¨äºä¼ è¾8å­èä»£ç çç¼ç æ¹å¼ä¹ä¸\n * hexï¼hexå­ç¬¦ä¸²ç¼ç \n\n\n# åå¥ç¼å²åº\n\nbuf.write(string,offset,length,encoding) //å­ç¬¦ä¸²ï¼ç´¢å¼å¼ï¼å­èæ°ï¼ç¼ç \n\nvar buf = new buffer(5);\nconsole.log(buf.length);\nbuf.write('a');\nconsole.log(buf);\n//åå¥bæ¶éè¦å¨ç¬¬äºä¸ªåæ°ä¼ å¥ç¼å²åºå¼å§åå¥çç´¢å¼å¼\nbuf.write('b',1,1,'ascii');\nconsole.log(buf);\n\n//è¾åº\n//5\n//<buffer 61 00 00 00 00>\n//<buffer 61 62 00 00 00>\n\n\n\n# ä»ç¼å²åºè¯»åæ°æ®\n\nbuf.tostring(encoding,start,end)\n\nvar buf = new buffer(26);\nfor(let i = 0; i < 26 ; i++){\n    buf[i] = i + 97;\n}\n//è¾åºå¨é¨\nconsole.log(buf.tostring('ascii'));\n//è¾åºå5ä¸ª\nconsole.log(buf.tostring('ascii',0,5));\n\n//è¾åº\n//abcdefghijklmnopqrstuvwxyz\n//abcde\n\n\n\n# æ¼æ¥ç¼å²åº\n\nvar buf = new buffer('ä¸ä¸æ é¾äº');\nvar buf1 = new buffer('åªææå¿äºº');\nvar buf2 = buffer.concat([buf,buf1]);\nconsole.log(buf2.tostring());\n//è¾åºï¼ä¸ä¸æ é¾äºåªææå¿äºº\n\n\n\n# streamæä»¶æµ\n\nç±äºbufferç¼å²åºéå¶å¨1gbï¼è¶è¿1gbçæä»¶æ æ³ç´æ¥å®æè¯»åæä½ï¼å¨è¯»åå¤§æä»¶æ¶ï¼å¦æè¯»åèµæºä¸ç´æç»­ä¸åæ­¢ï¼node.jså°æ æ³ç»§ç»­å¶ä»å·¥ä½ï¼ä¸ºæ­¤node.jsä¸­æä¾äºstreamæä»¶æµæ¨¡åã\n\n\n# æä»¶æµçæ¦å¿µ\n\nä¾å¦å¤å¶æä»¶çè¿ç¨ï¼æä»¶æµçæ¦å¿µå°±æ¯æä»¶aä¸­æ°æ®ä»¥æµå¨çæ¹å¼éè¿æ°æ®æµç®¡éï¼ç¶åè¿å¥å°æä»¶bä¸­ï¼éç¨âè¯»ä¸é¨åï¼åä¸é¨åâçæ¹å¼ï¼å°±åçè§é¢ï¼ä¸ä¸ç¹æ­ä¸ç¹ã\n\nå¨node.jsä¸­ï¼æä»¶æµçæä½ç±streamæ¨¡åæä¾ï¼streamæ¨¡åæ¯ä¸ä¸ªæ½è±¡æ¥å£ï¼node.jsä¸­è¿æå¾å¤å¯¹è±¡å®ç°äºè¿ä¸ªæ¥å£ï¼æ4ç§æµç±»åï¼\n\n * readable: å¯è¯»æµ\n * writeableï¼å¯åæµ\n * duplexï¼å¯è¯»å¯åæµ\n * transformï¼åæ¢æµï¼æä½è¢«åå¥æ°æ®ï¼ç¶åè¯»åºç»æï¼\n\nnode.jsä¸­çi/oæ¯å¼æ­¥çï¼å æ­¤å¯¹ç£çåç½ç»çè¯»/åéè¦éè¿åè°å½æ°æ¥è¯»åæ°æ®ï¼èåè°å½æ°éè¦éè¿äºä»¶æ¥è§¦åï¼ææçstreamå¯¹è±¡é½æ¯eventemitter(æ¶é´è§¦åå¨)çå®ä¾ã\n\näºä»¶       è¯´æ\ndata     å½ææ°æ®å¯è¯»æ¶è§¦å\nend      æ²¡ææ´å¤çæ°æ®å¯è¯»æ¶è§¦å\nerror    å¨æ¥æ¶ååå¥è¿ç¨ä¸­åçéè¯¯æ¶è§¦å\nfinish   æææ°æ®é½å·²è¢«åå¥å°ä½å±ç³»ç»æ¶è§¦å\n\n\n# node.jsçå¯è¯»æµåå¯åæµ\n\n 1. å¯è¯»æµ\n\nä½¿ç¨æä»¶æµè¿è¡æä»¶å¤å¶ï¼é¦åéè¦åå»ºä¸ä¸ªå¯è¯»æµï¼å¯è¯»æµå¯ä»¥è®©ç¨æ·å¨æºæä»¶ä¸­ååè¯»åæä»¶ä¸­çæ°æ®ï¼ç¶ååä»å¯è¯»æµä¸­è¯»åæ°æ®ã\n\nfs.createreadstream()\n\nç±äºæµæ¯åºäºeventemitterçï¼ä»æµè¯»åæ°æ®æå¥½çæ¹æ³æ¯çå¬æ°æ®äºä»¶ï¼data eventï¼ï¼å¹¶éå ä¸ä¸ªåè°å½æ°ï¼è¿åæ°æ®ï¼è¿ä¸ªæä½æ¯å¾ªç¯è¿å¶çï¼ä¸ç´å°è¯»åå®æ¯ãå¨è¯»åéè¯¯æè¯»åå®æ¯æ¶è§¦åerroræendäºä»¶ã\n\nlet fs= require(\"fs\");\nlet total = \"\";\n//åå»ºå¯è¯»æµ\nlet readablestream = fs.createreadstream('input.txt');//æ­¤æ¶æµä¸ºéæ­¢ç¶æ\n//è®¾ç½®ç¼ç ä¸ºutf-8\nreadablestream.setencoding('utf8');\n//å¤çæµäºä»¶\nreadablestream.on('data',function (chunk) {//éå åè°å½æ°ï¼æµå¼å§æµå¨\n    total += chunk;\n});\nreadablestream.on('end',function () {\n    console.log(total);\n});\nreadablestream.on('error',function (err) {\n    console.log(err.stack);\n});\nconsole.log(\"ç¨åºæ§è¡å®æ¯\");\n\n//è¾åºï¼ç¨åºæ§è¡å®æ¯\n//input.txtä¸­çåå®¹\n\n\n 2. å¯åæµ\n\nfs.createwritestream()\n\nlet fs= require(\"fs\");\nlet total = \"\";\n//åå»ºå¯è¯»æµ\nlet readablestream = fs.createreadstream('input.txt');\n//åå»ºå¯åæµ\nlet writablestream = fs.createwritestream('output.txt');\n//è®¾ç½®ç¼ç ä¸ºutf-8\nreadablestream.setencoding('utf8');\nreadablestream.on('data',function (chunk) {\n    writablestream.write(chunk);\n});\nreadablestream.on('error',function (err) {\n    console.log(err.stack);\n});\nreadablestream.on('end',function () {\n    writablestream.end();//å°å©ä¸çæ°æ®å¨é¨åå¥\n});\nwritablestream.on('error',function (err) {\n    console.log(err.stack);\n});\n\n\n\n# ä½¿ç¨pipe()å¤çå¤§æä»¶\n\nå¨ä½¿ç¨å¤§æä»¶å¤å¶çæ¡ä¾ä¸­ï¼éè¿å¯è¯»æµçchunkåæ°æ¥ä¼ éæ°æ®ï¼å¦æææ°æ®æ¯ä½æ¯æ°´ï¼chunkç¸å½äºçï¼ä½¿ç¨çæ¥å®ææ°´çä¼ éãå¯è¯»æµä¸­è¿æä¸ä¸ªå½æ°å«åpipe()ï¼è¿ä¸ªå½æ°æ¯ä¸ä¸ªå¾é«æçæä»¶å¤çæ¹å¼ï¼ç®åå¤å¶æä»¶çæä½ï¼âæçæ¢æäºç®¡å­âã\n\nlet fs = require('fs');\nlet srcpath = '';\nlet distpath = '';\nlet readablestream = fs.createreadstream(srcpath);\nlet writablestream = fs.createwritestream(distpath);\n//å¯ä»¥éè¿ä½¿ç¨å¯è¯»æµå½æ°pipe()æ¥å¥å°å¯åæµä¸­\nif(readablestream.pipe(writablestream)){\n    console.log('å¤å¶æå');\n}else{\n    console.log('å¤å¶å¤±è´¥');\n}\n\n\n\n# å°ç»\n\næ°æ®ä¸æä»¶çå¤çæ¯æå¡å¨ç«¯ç¼ç¨ä¸å®¢æ·ç«¯ç¼ç¨çæ¬è´¨åºå«æå¨ã",charsets:{cjk:!0}},{title:"å¼åæºå¸¸ç¨",frontmatter:{},regularPath:"/re/development.html",relativePath:"re/development.md",key:"v-394e602d",path:"/re/development.html",headers:[{level:2,title:"ä¸äº linux å½ä»¤",slug:"ä¸äº-linux-å½ä»¤",normalizedTitle:"ä¸äº linux å½ä»¤",charIndex:12},{level:2,title:"æ©å¤§åå­",slug:"æ©å¤§åå­",normalizedTitle:"æ©å¤§åå­",charIndex:354},{level:2,title:"workæé",slug:"workæé",normalizedTitle:"workæé",charIndex:646},{level:2,title:"cenoséåæº",slug:"cenoséåæº",normalizedTitle:"cenoséåæº",charIndex:690},{level:2,title:"å®è£å¨å±å",slug:"å®è£å¨å±å",normalizedTitle:"å®è£å¨å±å",charIndex:754},{level:2,title:"åæ¢ node çæ¬",slug:"åæ¢-node-çæ¬",normalizedTitle:"åæ¢ node çæ¬",charIndex:860},{level:2,title:"å½ä»¤è¡ä»£ç",slug:"å½ä»¤è¡ä»£ç",normalizedTitle:"å½ä»¤è¡ä»£ç",charIndex:1148},{level:2,title:"è§£åå½ä»¤",slug:"è§£åå½ä»¤",normalizedTitle:"è§£åå½ä»¤",charIndex:1244},{level:2,title:"sed å½ä»¤",slug:"sed-å½ä»¤",normalizedTitle:"sed å½ä»¤",charIndex:1536}],lastUpdated:"4/26/2022, 7:04:16 PM",lastUpdatedTimestamp:1650971056e3,headersStr:"ä¸äº linux å½ä»¤ æ©å¤§åå­ workæé cenoséåæº å®è£å¨å±å åæ¢ node çæ¬ å½ä»¤è¡ä»£ç è§£åå½ä»¤ sed å½ä»¤",content:"# å¼åæºå¸¸ç¨\n\n\n# ä¸äº linux å½ä»¤\n\næ¥æ¾è¢«å ç¨çç«¯å£ï¼netstat -lnp|grep 80\n\næ¥çç«¯å£å¯¹åºçpidï¼lsof -i:8080\n\nkill è¿ç¨ï¼kill -9 xxxx\n\næ¥çè½¯é¾ï¼ls -al node_modules/@baidu\n\næ¬ç®å½ä¸åå­å ç¨ï¼du -sh *\n\næ´ä½ç£çå ç¨ï¼df -h\n\næ¥çæ´ä½ç£çä½¿ç¨ï¼df -h\n\nå¤å¶aæä»¶åå®¹å°bï¼cp -p a b\n\næ¥æ¾æä»¶å½ä»¤ findï¼find . -name \"*.c\"\n\nç§»å¨æä»¶ï¼mv /usr/local/a /usr/\n\nè½¯é¾ï¼sudo ln -s\n\nå®è£ gitï¼yum install git\n\nå®è£ nodeï¼å®ç½ä¸è½½ wget url --no-check-certificate\n\n\n# æ©å¤§åå­\n\nå¼åæºä¸è¿è¡é¡¹ç®æ¶å¯è½ä¼å¡é¡¿ï¼ç±äº8Gåå­å¨ä½¿ç¨è¿ç¨ä¸­å¯è½ä¼éå°åå­ä¸è¶³çæåµï¼æå¥½ä¸åéç½®ä¸ä¸swapäº¤æ¢åå­ã\n\nfree -mï¼æ¥çåå­\n\nmkdir -p /opt/swap/ \ntouch /opt/swap/swap_file \nchmod 600 /opt/swap/swap_file \ndd if=/dev/zero of=/opt/swap/swap_file bs=1024 count=8000000 \n/sbin/mkswap /opt/swap/swap_file \n/sbin/swapon /opt/swap/swap_file\n\n\n\n# workæé\n\nchown -R work:work /home/work/\n\n\n\n# cenoséåæº\n\nhttps://vault.centos.org/6.10/os/x86_64/Packages/\n\n\n# å®è£å¨å±å\n\nå®è£ä¹åè®°ä½æ§è¡å½ä»¤ä½¿å¶å¨å±çæï¼ä¾å¦å®è£npxï¼\n\nsudo ln -s /home/work/node-v12.13.0-linux-x64/bin/npx /usr/bin/npx\n\n\n\n# åæ¢ node çæ¬\n\nn é»è®¤å®è£è·¯å¾æ¯ /usr/localï¼è¥ä½ ç node ä¸æ¯å¨æ­¤è·¯å¾ä¸ï¼n åæ¢çæ¬å°±ä¸è½æbinãlibãincludeãshare å¤å¶è¯¥è·¯å¾ä¸­ï¼æä»¥æä»¬å¿é¡»éè¿N_PREFIXåéæ¥ä¿®æ¹ n çé»è®¤nodeå®è£è·¯å¾ã\n\nvim ~/.bash_profile\n\n# å°ä¸é¢ä¸¤è¡ä»£ç æå¥å°æä»¶æ«å°¾ï¼\nexport N_PREFIX=/usr/local # nodeå®éå®è£ä½ç½®\nexport PATH=$N_PREFIX/bin:$PATH\n\n# :wqä¿å­éåº\n# æ§è¡ source ~/.bash_profile ä½¿ä¿®æ¹çæ\n\n\n\n# å½ä»¤è¡ä»£ç\n\néç½®ä»£çï¼git config --global http.proxy url\n\nç¨å®éç½®ï¼git config --global --unset http.proxy\n\n\n# è§£åå½ä»¤\n\ntarå½ä»¤çå¸¸ç¨åæ°\n\n-c, --create åå»ºä¸ä¸ªæ°å½æ¡£ï¼åç¼©\n-x, --extract, --get ä»å½æ¡£ä¸­è§£åºæä»¶ï¼è§£å\n-f, --file=ARCHIVE ä½¿ç¨å½æ¡£æä»¶\n-z, --gzip, --gunzip, --ungzip éè¿ gzip è¿æ»¤å½æ¡£\n-C, --directory=DIR æ¹åè³ç®å½ DIR\n-v, --verbose è¯¦ç»å°ååºå¤ççæä»¶\n\n\ntar -zcvf test.tar.gz test -C /home/ # åç¼© test å° home ç®å½ä¸\ntar -zxvf test.tar.gz # è§£å\n\n\n\n# sed å½ä»¤\n\nsed -i å¯ä»¥ç´æ¥å¯¹ææ¬æä»¶è¿è¡æä½ sed -i 's/åå­ç¬¦ä¸²/æ°å­ç¬¦ä¸²'ï¼ä¾å¦ä»¥ä¸ææ¬ï¼\n\n# test.txt\nd\nddd\n\n\nsed -i 's/d/1' test.txt\n\n# ææ¬ä¿®æ¹ä¸º\n1\n1dd\n\nsed -i 's/d/1/g' test.txt\n\n# ææ¬ä¿®æ¹ä¸º\n1\n111\n",normalizedContent:"# å¼åæºå¸¸ç¨\n\n\n# ä¸äº linux å½ä»¤\n\næ¥æ¾è¢«å ç¨çç«¯å£ï¼netstat -lnp|grep 80\n\næ¥çç«¯å£å¯¹åºçpidï¼lsof -i:8080\n\nkill è¿ç¨ï¼kill -9 xxxx\n\næ¥çè½¯é¾ï¼ls -al node_modules/@baidu\n\næ¬ç®å½ä¸åå­å ç¨ï¼du -sh *\n\næ´ä½ç£çå ç¨ï¼df -h\n\næ¥çæ´ä½ç£çä½¿ç¨ï¼df -h\n\nå¤å¶aæä»¶åå®¹å°bï¼cp -p a b\n\næ¥æ¾æä»¶å½ä»¤ findï¼find . -name \"*.c\"\n\nç§»å¨æä»¶ï¼mv /usr/local/a /usr/\n\nè½¯é¾ï¼sudo ln -s\n\nå®è£ gitï¼yum install git\n\nå®è£ nodeï¼å®ç½ä¸è½½ wget url --no-check-certificate\n\n\n# æ©å¤§åå­\n\nå¼åæºä¸è¿è¡é¡¹ç®æ¶å¯è½ä¼å¡é¡¿ï¼ç±äº8gåå­å¨ä½¿ç¨è¿ç¨ä¸­å¯è½ä¼éå°åå­ä¸è¶³çæåµï¼æå¥½ä¸åéç½®ä¸ä¸swapäº¤æ¢åå­ã\n\nfree -mï¼æ¥çåå­\n\nmkdir -p /opt/swap/ \ntouch /opt/swap/swap_file \nchmod 600 /opt/swap/swap_file \ndd if=/dev/zero of=/opt/swap/swap_file bs=1024 count=8000000 \n/sbin/mkswap /opt/swap/swap_file \n/sbin/swapon /opt/swap/swap_file\n\n\n\n# workæé\n\nchown -r work:work /home/work/\n\n\n\n# cenoséåæº\n\nhttps://vault.centos.org/6.10/os/x86_64/packages/\n\n\n# å®è£å¨å±å\n\nå®è£ä¹åè®°ä½æ§è¡å½ä»¤ä½¿å¶å¨å±çæï¼ä¾å¦å®è£npxï¼\n\nsudo ln -s /home/work/node-v12.13.0-linux-x64/bin/npx /usr/bin/npx\n\n\n\n# åæ¢ node çæ¬\n\nn é»è®¤å®è£è·¯å¾æ¯ /usr/localï¼è¥ä½ ç node ä¸æ¯å¨æ­¤è·¯å¾ä¸ï¼n åæ¢çæ¬å°±ä¸è½æbinãlibãincludeãshare å¤å¶è¯¥è·¯å¾ä¸­ï¼æä»¥æä»¬å¿é¡»éè¿n_prefixåéæ¥ä¿®æ¹ n çé»è®¤nodeå®è£è·¯å¾ã\n\nvim ~/.bash_profile\n\n# å°ä¸é¢ä¸¤è¡ä»£ç æå¥å°æä»¶æ«å°¾ï¼\nexport n_prefix=/usr/local # nodeå®éå®è£ä½ç½®\nexport path=$n_prefix/bin:$path\n\n# :wqä¿å­éåº\n# æ§è¡ source ~/.bash_profile ä½¿ä¿®æ¹çæ\n\n\n\n# å½ä»¤è¡ä»£ç\n\néç½®ä»£çï¼git config --global http.proxy url\n\nç¨å®éç½®ï¼git config --global --unset http.proxy\n\n\n# è§£åå½ä»¤\n\ntarå½ä»¤çå¸¸ç¨åæ°\n\n-c, --create åå»ºä¸ä¸ªæ°å½æ¡£ï¼åç¼©\n-x, --extract, --get ä»å½æ¡£ä¸­è§£åºæä»¶ï¼è§£å\n-f, --file=archive ä½¿ç¨å½æ¡£æä»¶\n-z, --gzip, --gunzip, --ungzip éè¿ gzip è¿æ»¤å½æ¡£\n-c, --directory=dir æ¹åè³ç®å½ dir\n-v, --verbose è¯¦ç»å°ååºå¤ççæä»¶\n\n\ntar -zcvf test.tar.gz test -c /home/ # åç¼© test å° home ç®å½ä¸\ntar -zxvf test.tar.gz # è§£å\n\n\n\n# sed å½ä»¤\n\nsed -i å¯ä»¥ç´æ¥å¯¹ææ¬æä»¶è¿è¡æä½ sed -i 's/åå­ç¬¦ä¸²/æ°å­ç¬¦ä¸²'ï¼ä¾å¦ä»¥ä¸ææ¬ï¼\n\n# test.txt\nd\nddd\n\n\nsed -i 's/d/1' test.txt\n\n# ææ¬ä¿®æ¹ä¸º\n1\n1dd\n\nsed -i 's/d/1/g' test.txt\n\n# ææ¬ä¿®æ¹ä¸º\n1\n111\n",charsets:{cjk:!0}},{title:"AB å®éª",frontmatter:{},regularPath:"/product/abtest.html",relativePath:"product/abtest.md",key:"v-59238a45",path:"/product/abtest.html",headers:[{level:2,title:"åè¨",slug:"åè¨",normalizedTitle:"åè¨",charIndex:12},{level:2,title:"A/Bå®éªä¸­çåºç¡ç¥è¯",slug:"a-bå®éªä¸­çåºç¡ç¥è¯",normalizedTitle:"a/bå®éªä¸­çåºç¡ç¥è¯",charIndex:343},{level:3,title:"æ­£äº¤ä¸äºæ¥",slug:"æ­£äº¤ä¸äºæ¥",normalizedTitle:"æ­£äº¤ä¸äºæ¥",charIndex:397},{level:3,title:"æµéåå±åæµ",slug:"æµéåå±åæµ",normalizedTitle:"æµéåå±åæµ",charIndex:672},{level:2,title:"AB å®éªåç±»",slug:"ab-å®éªåç±»",normalizedTitle:"ab å®éªåç±»",charIndex:1144},{level:3,title:"åå·¥è§è§",slug:"åå·¥è§è§",normalizedTitle:"åå·¥è§è§",charIndex:1156},{level:3,title:"éçè§è§",slug:"éçè§è§",normalizedTitle:"éçè§è§",charIndex:1246},{level:3,title:"æ¶æè§è§",slug:"æ¶æè§è§",normalizedTitle:"æ¶æè§è§",charIndex:1381},{level:2,title:"AB å®éªçå½å¨æ",slug:"ab-å®éªçå½å¨æ",normalizedTitle:"ab å®éªçå½å¨æ",charIndex:1409},{level:3,title:"æ½æ ·æ¹å¼",slug:"æ½æ ·æ¹å¼",normalizedTitle:"æ½æ ·æ¹å¼",charIndex:1570},{level:2,title:"æ³¨æç¹",slug:"æ³¨æç¹",normalizedTitle:"æ³¨æç¹",charIndex:1752}],lastUpdated:"10/20/2022, 10:01:50 AM",lastUpdatedTimestamp:166623131e4,headersStr:"åè¨ A/Bå®éªä¸­çåºç¡ç¥è¯ æ­£äº¤ä¸äºæ¥ æµéåå±åæµ AB å®éªåç±» åå·¥è§è§ éçè§è§ æ¶æè§è§ AB å®éªçå½å¨æ æ½æ ·æ¹å¼ æ³¨æç¹",content:"# AB å®éª\n\n\n# åè¨\n\nå¨äº§åçå¼åè¿­ä»£ä¸­ï¼å¦æ pm æå ä¸ªéå¸¸å¥½ç ideaï¼ä½æ¯ç±äºæä»¬çº¿ä¸çèµæºæ¯æéçï¼æä»¥å¿é¡»å¨å ä¸ª idea ä¸­ååºåèï¼é£ä¹å¦ä½è¯ä¼°å ç§ idea çææï¼è¯ä¼°çæ¹å¼æä»ä¹å¢ï¼\n\n * åæµï¼ç¨æ·ç¾¤æåå·®\n\n * ç°åº¦ï¼ç¨æ·æ¯ä¾å°ãå¹²æ°å ç´ å¤ï¼å¯æ¯æ§å·®\n\n * A/B testï¼\n   \n   * æ®éç¨æ·ãçå®åé¦\n   * ä¸¥æ ¼å¯¹æ¯ãç»è®ºå¯é \n   * æ¶çéå\n\n> A/Bæµè¯ä¸ºä¸ç§éæºæµè¯ï¼å°ä¸¤ä¸ªä¸åçä¸è¥¿ï¼å³AåBï¼è¿è¡åè®¾æ¯è¾ãè¯¥æµè¯è¿ç¨ç»è®¡å­¦ä¸çåè®¾æ£å®ååæ¯ä½åè®¾æ£å®ã A/Bæµè¯å¯ä»¥ç¨æ¥æµè¯æä¸ä¸ªåéä¸¤ä¸ªä¸åçæ¬çå·®å¼ï¼ä¸è¬æ¯è®©AåBåªæè¯¥åéä¸åï¼åæµè¯å¶ä»äººå¯¹äºAåBçååºå·®å¼ï¼åå¤æ­AåBçæ¹å¼ä½èè¾ä½³ã\n\n\n# A/Bå®éªä¸­çåºç¡ç¥è¯\n\nå¨å¼å§è¿è¡A/Bå®éªä¹åéè¦äºè§£ä¸äºå³äºA/Bæµè¯çåºç¡ç¥è¯ï¼åå«æµéçåå±åæµãæ­£äº¤ä¸äºæ¥ãå®éªåç»ãAAå®éªç­ã\n\n\n# æ­£äº¤ä¸äºæ¥\n\n * äºæ¥ï¼æ¯éåçæ¦å¿µï¼äºä»¶AåBçäº¤éä¸ºç©ºï¼Aä¸Bå°±æ¯äºæ¥äºä»¶ã\n * æ­£äº¤ï¼æ¯çº¿æ§ä»£æ°çæ¦å¿µï¼è¥åç§¯ç©ºé´ä¸­ä¸¤åéçåç§¯ä¸º0ï¼åç§°å®ä»¬æ¯æ­£äº¤åéãæ­£äº¤ç©éµä¸­ææçååéãè¡åéé½æ¯æ­£äº¤åéã\n\n----------------------------------------\n\n * äºæ¥å®éªï¼å®éªå¨åä¸å±æåæµéï¼ä¸ä¸è®ºå¦ä½æåï¼ä¸åç»çæµéæ¯ä¸éå çã\n\n * æ­£äº¤å®éªï¼æ¯ä¸ªç¬ç«å®éªä¸ºä¸å±ï¼å±ä¸å±ä¹é´æµéæ¯æ­£äº¤çï¼ä¸ä»½æµéç©¿è¶æ¯å±å®éªæ¶ï¼é½ä¼åæ¬¡éæºææ£ï¼ä¸éæºææç¦»æ£ã\n\n\n# æµéåå±åæµ\n\nLayer: å±ï¼Expï¼å®éªï¼bï¼åæ¯\n\n\n\nåå±ï¼æç§ä¸åçæ¹å¼å°ç¨æ·åä¸ºä¸åçéåï¼å±ä¸å±ä¹é´æ¯æ­£äº¤ï¼ç¬ç«æ å³èï¼çå³ç³»ã\n\nåæµï¼å¨åä¸å±æåæµéï¼æ­¤æ¶æµéæ¯äºæ¥çã\n\nä¸ºä»ä¹è¦å¯¹å®éªåå±ï¼\n\n> å¦ææ¯æ¥ç¨æ·æ´»è·éä¸º100000ï¼å¦æåªæä¸¤ä¸ªå®éªAåå®éªBï¼å¦ææµéå¹³åï¼åæ¯å¤©è¿å¥ä¸¤ä¸ªå®éªçäººæ°ä¸º50000å·¦å³\n> \n> **å¦æå®éªæ°éåå¤å¢å å°1000ä¸ªï¼å¦æè¿æ¯å¯¹æµéè¿è¡å¹³åï¼åæ¯å¤©è¿å¥ä¸¤ä¸ªå®éªçäººæ°ä¸º100å·¦å³ï¼å®éªä½éå¤ªå°å¯¼è´å®éªç»æå¯ä¿¡åº¦å¤§å¹ä¸éï¼**æ­¤æ¶æä»¬åç°æµéææ¾ä¸å¤ç¨ãæ­¤æ¶æä»¬å¨æ³ææ²¡æä¸ç§æ¹æ³å¯ä»¥è§£å³è¿ä¸ªé®é¢ï¼é£ä¹å°±æ¯åå±ã\n> \n> åå±å®éªæä¸ªå¾éè¦çæ¦å¿µå°±æ¯æ¯ä¸å±ç¨å®çæµéè¿å¥ä¸ä¸å±æ¶ï¼ä¸å®ä¼ååçéæ°åéã\n\nä»¥ææºå·ä¸ºä¾ï¼ç¬¬ä¸å±æ¯æç§ææºå·çåæ°ç¬¬ä¸ä½åå±ï¼åä¸ºäº 0 - 9 åç»å®éªãç¬¬äºå±æ¯æç§åæ°ç¬¬äºä½åå±ï¼ä¹åä¸ºäº 0 - 9 åç»å®éªãé£ä¹é£ä¸ä¸ªç¨æ·çææºå·æ¯ 18201673876 ï¼å°å½ä¸­ç¬¬ä¸å±çå®éª 6ï¼ç¬¬äºå±çå®éª7......å·ä½å¦ä¸å¾ï¼\n\n\n\n\n# AB å®éªåç±»\n\n\n# åå·¥è§è§\n\n * **äº§åå®éªï¼**éªè¯ä¸åç­ç¥å¯¹äº§åææ çå½±åã\n * **ç åå®éªï¼**ä¸»è¦æ¯æ§è½è°ä¼ãèµæºä¼åãè½ååçº§ç­æ¹é¢éªè¯ï¼ä½æææ­¤ç±»å®éªåè¦å´ç»äº§åææ ã\n\n\n# éçè§è§\n\n * **ééçå®éªï¼**ä¸è¬ä¸ºåç«¯ç­ç¥å®éªï¼çææ¶é´ç­ï¼æ ·æ¬æ¶ææ¶é´ç­ï¼ä¾å¦ï¼æ£ç´¢å¬åãæåºç­ãï¼æ¨èç³»ç»æ®ééç¨å¬å+æåºçä¸¤é¶æ®µæ¨¡åï¼\n * **éçæ¬å®éªï¼**å¿é¡»ä¾èµå®¢æ·ç«¯çæ¬åå¸ï¼å·å¯çæãæ ·æ¬æ¶ææ¶é´é¿ï¼ä¾å¦ï¼ç«¯æ ·å¼ä¿®æ¹ãç«¯æ§è½è°ä¼ã\n\n\n# æ¶æè§è§\n\n * æå¡ç«¯å®éª\n * å®¢æ·ç«¯å®éª\n\n\n# AB å®éªçå½å¨æ\n\n 1. æ½æ ·é¶æ®µï¼æ½åå®éªç»ãå¯¹ç§ç»ï¼å¹¶ç¡®ä¿åç»åç¨æ·æ°æ®ç¸åäººç¾¤ï¼ç¨æ·æ¥å¿æç¹ä¿¡æ¯ï¼\n 2. å®éªé¶æ®µï¼å®éªç»ä¸çº¿æ°åè½ï¼å¯¹ç§ç»ä¿æç°ç¶ï¼å¨çº¿ä¸è¿è¡ä¸æ®µæ¶é´ã\n 3. åå½é¶æ®µï¼å¯¹æ¯å®éªç»ãå¯¹ç§ç»å¨å®éªæé´åçåé¡¹æ°æ®ææ ï¼å¤æ­æ°åè½æ¯å¦ç¬¦åé¢æã\n 4. åå¸é¶æ®µï¼å¨éåºåæ°åè½ææã\n\n\n# æ½æ ·æ¹å¼\n\n 1. éæºæ½æ ·ï¼æç§ä¸å®éæºç®æ³åååå®éªç»åå¯¹ç§ç»ï¼ç¶åå¨çº¿ä¸è¿è¡ä¸æ®µæ¶é´ï¼ç©ºè½¬ï¼ï¼è§å¯å®éªç»åå¯¹ç§ç»å¨è¿æ®µæ¶é´ååé¡¹ææ æ¯å¦ç¸åã\n 2. æ­£äº¤å¹³è¡¡æ½æ ·ï¼æ ¹æ®åæ®µæ¶é´çç¨æ·çä½¿ç¨åå²ï¼åå®åºå±æ§ç¸åï¼ä¸ç¬¦åå®éªæµéè¦æ±çç¨æ·ï¼éå¯¹è¿é¨åç¨æ·ï¼åååºå®éªç»åå¯¹ç§ç»ã\n\n> æ­£äº¤å¹³è¡¡æ½æ ·å°±æ¯å·²ç»æ­£ç¡®åååºæ¥å®éªç»åå¯¹ç§ç»ï¼ä¸éè¦è¿è¡ç©ºè½¬ã\n\n\n# æ³¨æç¹\n\n * äººç¾¤ä¸åè´¨ï¼ABå®éªéè¦ååæµéå°ä¸åæ¹æ¡ï¼å¦æä¸è½æ­£ç¡®ååï¼ä½¿å¾åå°ä¸åæ¹æ¡çç¨æ·ç¾¤ä½ç¹å¾åå¸ä¸è´ï¼é£ä¹å®éªå°æ²¡æä»»ä½æä¹ã\n * å®éªä¸åæ¶ï¼åå¦å®éª A çä½ç¨æ¶é´æ¯èæ¥ï¼èå®éª B éèæ¥ï¼é£ä¹å®éªææ¾å¯¹äº B æ¯ä¸å¬å¹³çã\n * æ²¡æè¿è¡ AA å®éªï¼ç©ºè½¬ï¼ï¼AAæçæ¯å®éªä¸­çåä¸ªæ¹æ¡é½æ¯ä¸è´çï¼è¿æ¯ä¸ºäºæµè¯åç¹ãåæµãå®éªç»è®¡çæ­£ç¡®æ§ï¼å¢å ABå®éªçå®éªç»è®ºå¯ä¿¡åº¦ã\n\n> ç©ºè½¬æ¯æåæ½æ ·ï¼ç»è®¡å³é®æ°æ®ï¼èä¸ä¿®æ¹é¡µé¢æ ·å¼çæµç¨ï¼ç¸å½äºAAå®éªã è½ç¶éæºæ½æ ·è½å¤ä¿è¯ä¸¤ä»½æµéçå³é®ææ ç¸å·®ä¸å¤§ï¼ä½æ¯ç«å­å¨æ½æ ·ä¸åæåµãç©ºè½¬å¯ä»¥ææ¾å°åç° æ½æ ·ä¸åï¼æå¼æè¿é¨åæµéï¼ä¿è¯å®éªæ°æ®çååä»ä»æ¯å®éªæ¬èº«(æ ·å¼æ¹å)å¼èµ·çã",normalizedContent:"# ab å®éª\n\n\n# åè¨\n\nå¨äº§åçå¼åè¿­ä»£ä¸­ï¼å¦æ pm æå ä¸ªéå¸¸å¥½ç ideaï¼ä½æ¯ç±äºæä»¬çº¿ä¸çèµæºæ¯æéçï¼æä»¥å¿é¡»å¨å ä¸ª idea ä¸­ååºåèï¼é£ä¹å¦ä½è¯ä¼°å ç§ idea çææï¼è¯ä¼°çæ¹å¼æä»ä¹å¢ï¼\n\n * åæµï¼ç¨æ·ç¾¤æåå·®\n\n * ç°åº¦ï¼ç¨æ·æ¯ä¾å°ãå¹²æ°å ç´ å¤ï¼å¯æ¯æ§å·®\n\n * a/b testï¼\n   \n   * æ®éç¨æ·ãçå®åé¦\n   * ä¸¥æ ¼å¯¹æ¯ãç»è®ºå¯é \n   * æ¶çéå\n\n> a/bæµè¯ä¸ºä¸ç§éæºæµè¯ï¼å°ä¸¤ä¸ªä¸åçä¸è¥¿ï¼å³aåbï¼è¿è¡åè®¾æ¯è¾ãè¯¥æµè¯è¿ç¨ç»è®¡å­¦ä¸çåè®¾æ£å®ååæ¯ä½åè®¾æ£å®ã a/bæµè¯å¯ä»¥ç¨æ¥æµè¯æä¸ä¸ªåéä¸¤ä¸ªä¸åçæ¬çå·®å¼ï¼ä¸è¬æ¯è®©aåbåªæè¯¥åéä¸åï¼åæµè¯å¶ä»äººå¯¹äºaåbçååºå·®å¼ï¼åå¤æ­aåbçæ¹å¼ä½èè¾ä½³ã\n\n\n# a/bå®éªä¸­çåºç¡ç¥è¯\n\nå¨å¼å§è¿è¡a/bå®éªä¹åéè¦äºè§£ä¸äºå³äºa/bæµè¯çåºç¡ç¥è¯ï¼åå«æµéçåå±åæµãæ­£äº¤ä¸äºæ¥ãå®éªåç»ãaaå®éªç­ã\n\n\n# æ­£äº¤ä¸äºæ¥\n\n * äºæ¥ï¼æ¯éåçæ¦å¿µï¼äºä»¶aåbçäº¤éä¸ºç©ºï¼aä¸bå°±æ¯äºæ¥äºä»¶ã\n * æ­£äº¤ï¼æ¯çº¿æ§ä»£æ°çæ¦å¿µï¼è¥åç§¯ç©ºé´ä¸­ä¸¤åéçåç§¯ä¸º0ï¼åç§°å®ä»¬æ¯æ­£äº¤åéãæ­£äº¤ç©éµä¸­ææçååéãè¡åéé½æ¯æ­£äº¤åéã\n\n----------------------------------------\n\n * äºæ¥å®éªï¼å®éªå¨åä¸å±æåæµéï¼ä¸ä¸è®ºå¦ä½æåï¼ä¸åç»çæµéæ¯ä¸éå çã\n\n * æ­£äº¤å®éªï¼æ¯ä¸ªç¬ç«å®éªä¸ºä¸å±ï¼å±ä¸å±ä¹é´æµéæ¯æ­£äº¤çï¼ä¸ä»½æµéç©¿è¶æ¯å±å®éªæ¶ï¼é½ä¼åæ¬¡éæºææ£ï¼ä¸éæºææç¦»æ£ã\n\n\n# æµéåå±åæµ\n\nlayer: å±ï¼expï¼å®éªï¼bï¼åæ¯\n\n\n\nåå±ï¼æç§ä¸åçæ¹å¼å°ç¨æ·åä¸ºä¸åçéåï¼å±ä¸å±ä¹é´æ¯æ­£äº¤ï¼ç¬ç«æ å³èï¼çå³ç³»ã\n\nåæµï¼å¨åä¸å±æåæµéï¼æ­¤æ¶æµéæ¯äºæ¥çã\n\nä¸ºä»ä¹è¦å¯¹å®éªåå±ï¼\n\n> å¦ææ¯æ¥ç¨æ·æ´»è·éä¸º100000ï¼å¦æåªæä¸¤ä¸ªå®éªaåå®éªbï¼å¦ææµéå¹³åï¼åæ¯å¤©è¿å¥ä¸¤ä¸ªå®éªçäººæ°ä¸º50000å·¦å³\n> \n> **å¦æå®éªæ°éåå¤å¢å å°1000ä¸ªï¼å¦æè¿æ¯å¯¹æµéè¿è¡å¹³åï¼åæ¯å¤©è¿å¥ä¸¤ä¸ªå®éªçäººæ°ä¸º100å·¦å³ï¼å®éªä½éå¤ªå°å¯¼è´å®éªç»æå¯ä¿¡åº¦å¤§å¹ä¸éï¼**æ­¤æ¶æä»¬åç°æµéææ¾ä¸å¤ç¨ãæ­¤æ¶æä»¬å¨æ³ææ²¡æä¸ç§æ¹æ³å¯ä»¥è§£å³è¿ä¸ªé®é¢ï¼é£ä¹å°±æ¯åå±ã\n> \n> åå±å®éªæä¸ªå¾éè¦çæ¦å¿µå°±æ¯æ¯ä¸å±ç¨å®çæµéè¿å¥ä¸ä¸å±æ¶ï¼ä¸å®ä¼ååçéæ°åéã\n\nä»¥ææºå·ä¸ºä¾ï¼ç¬¬ä¸å±æ¯æç§ææºå·çåæ°ç¬¬ä¸ä½åå±ï¼åä¸ºäº 0 - 9 åç»å®éªãç¬¬äºå±æ¯æç§åæ°ç¬¬äºä½åå±ï¼ä¹åä¸ºäº 0 - 9 åç»å®éªãé£ä¹é£ä¸ä¸ªç¨æ·çææºå·æ¯ 18201673876 ï¼å°å½ä¸­ç¬¬ä¸å±çå®éª 6ï¼ç¬¬äºå±çå®éª7......å·ä½å¦ä¸å¾ï¼\n\n\n\n\n# ab å®éªåç±»\n\n\n# åå·¥è§è§\n\n * **äº§åå®éªï¼**éªè¯ä¸åç­ç¥å¯¹äº§åææ çå½±åã\n * **ç åå®éªï¼**ä¸»è¦æ¯æ§è½è°ä¼ãèµæºä¼åãè½ååçº§ç­æ¹é¢éªè¯ï¼ä½æææ­¤ç±»å®éªåè¦å´ç»äº§åææ ã\n\n\n# éçè§è§\n\n * **ééçå®éªï¼**ä¸è¬ä¸ºåç«¯ç­ç¥å®éªï¼çææ¶é´ç­ï¼æ ·æ¬æ¶ææ¶é´ç­ï¼ä¾å¦ï¼æ£ç´¢å¬åãæåºç­ãï¼æ¨èç³»ç»æ®ééç¨å¬å+æåºçä¸¤é¶æ®µæ¨¡åï¼\n * **éçæ¬å®éªï¼**å¿é¡»ä¾èµå®¢æ·ç«¯çæ¬åå¸ï¼å·å¯çæãæ ·æ¬æ¶ææ¶é´é¿ï¼ä¾å¦ï¼ç«¯æ ·å¼ä¿®æ¹ãç«¯æ§è½è°ä¼ã\n\n\n# æ¶æè§è§\n\n * æå¡ç«¯å®éª\n * å®¢æ·ç«¯å®éª\n\n\n# ab å®éªçå½å¨æ\n\n 1. æ½æ ·é¶æ®µï¼æ½åå®éªç»ãå¯¹ç§ç»ï¼å¹¶ç¡®ä¿åç»åç¨æ·æ°æ®ç¸åäººç¾¤ï¼ç¨æ·æ¥å¿æç¹ä¿¡æ¯ï¼\n 2. å®éªé¶æ®µï¼å®éªç»ä¸çº¿æ°åè½ï¼å¯¹ç§ç»ä¿æç°ç¶ï¼å¨çº¿ä¸è¿è¡ä¸æ®µæ¶é´ã\n 3. åå½é¶æ®µï¼å¯¹æ¯å®éªç»ãå¯¹ç§ç»å¨å®éªæé´åçåé¡¹æ°æ®ææ ï¼å¤æ­æ°åè½æ¯å¦ç¬¦åé¢æã\n 4. åå¸é¶æ®µï¼å¨éåºåæ°åè½ææã\n\n\n# æ½æ ·æ¹å¼\n\n 1. éæºæ½æ ·ï¼æç§ä¸å®éæºç®æ³åååå®éªç»åå¯¹ç§ç»ï¼ç¶åå¨çº¿ä¸è¿è¡ä¸æ®µæ¶é´ï¼ç©ºè½¬ï¼ï¼è§å¯å®éªç»åå¯¹ç§ç»å¨è¿æ®µæ¶é´ååé¡¹ææ æ¯å¦ç¸åã\n 2. æ­£äº¤å¹³è¡¡æ½æ ·ï¼æ ¹æ®åæ®µæ¶é´çç¨æ·çä½¿ç¨åå²ï¼åå®åºå±æ§ç¸åï¼ä¸ç¬¦åå®éªæµéè¦æ±çç¨æ·ï¼éå¯¹è¿é¨åç¨æ·ï¼åååºå®éªç»åå¯¹ç§ç»ã\n\n> æ­£äº¤å¹³è¡¡æ½æ ·å°±æ¯å·²ç»æ­£ç¡®åååºæ¥å®éªç»åå¯¹ç§ç»ï¼ä¸éè¦è¿è¡ç©ºè½¬ã\n\n\n# æ³¨æç¹\n\n * äººç¾¤ä¸åè´¨ï¼abå®éªéè¦ååæµéå°ä¸åæ¹æ¡ï¼å¦æä¸è½æ­£ç¡®ååï¼ä½¿å¾åå°ä¸åæ¹æ¡çç¨æ·ç¾¤ä½ç¹å¾åå¸ä¸è´ï¼é£ä¹å®éªå°æ²¡æä»»ä½æä¹ã\n * å®éªä¸åæ¶ï¼åå¦å®éª a çä½ç¨æ¶é´æ¯èæ¥ï¼èå®éª b éèæ¥ï¼é£ä¹å®éªææ¾å¯¹äº b æ¯ä¸å¬å¹³çã\n * æ²¡æè¿è¡ aa å®éªï¼ç©ºè½¬ï¼ï¼aaæçæ¯å®éªä¸­çåä¸ªæ¹æ¡é½æ¯ä¸è´çï¼è¿æ¯ä¸ºäºæµè¯åç¹ãåæµãå®éªç»è®¡çæ­£ç¡®æ§ï¼å¢å abå®éªçå®éªç»è®ºå¯ä¿¡åº¦ã\n\n> ç©ºè½¬æ¯æåæ½æ ·ï¼ç»è®¡å³é®æ°æ®ï¼èä¸ä¿®æ¹é¡µé¢æ ·å¼çæµç¨ï¼ç¸å½äºaaå®éªã è½ç¶éæºæ½æ ·è½å¤ä¿è¯ä¸¤ä»½æµéçå³é®ææ ç¸å·®ä¸å¤§ï¼ä½æ¯ç«å­å¨æ½æ ·ä¸åæåµãç©ºè½¬å¯ä»¥ææ¾å°åç° æ½æ ·ä¸åï¼æå¼æè¿é¨åæµéï¼ä¿è¯å®éªæ°æ®çååä»ä»æ¯å®éªæ¬èº«(æ ·å¼æ¹å)å¼èµ·çã",charsets:{cjk:!0}},{title:"devops",frontmatter:{},regularPath:"/re/devops.html",relativePath:"re/devops.md",key:"v-fbf0dec2",path:"/re/devops.html",headers:[{level:2,title:"devops æ¯ä»ä¹",slug:"devops-æ¯ä»ä¹",normalizedTitle:"devops æ¯ä»ä¹",charIndex:42},{level:2,title:"å·¥å·ä½¿ç¨å±",slug:"å·¥å·ä½¿ç¨å±",normalizedTitle:"å·¥å·ä½¿ç¨å±",charIndex:1017},{level:2,title:"çå¸ / ææ· / devops",slug:"çå¸-ææ·-devops",normalizedTitle:"çå¸ / ææ· / devops",charIndex:1292},{level:3,title:"çå¸å¼å",slug:"çå¸å¼å",normalizedTitle:"çå¸å¼å",charIndex:1313},{level:3,title:"ææ·å¼å",slug:"ææ·å¼å",normalizedTitle:"ææ·å¼å",charIndex:1511},{level:3,title:"devops",slug:"devops-2",normalizedTitle:"devops",charIndex:2},{level:2,title:"æ»ç»",slug:"æ»ç»",normalizedTitle:"æ»ç»",charIndex:1810}],lastUpdated:"5/26/2022, 12:54:29 PM",lastUpdatedTimestamp:1653540869e3,headersStr:"devops æ¯ä»ä¹ å·¥å·ä½¿ç¨å± çå¸ / ææ· / devops çå¸å¼å ææ·å¼å devops æ»ç»",content:"# devops\n\nä»ä¹æ¯DevOpsï¼ - CODINGçåç­ - ç¥ä¹\n\n\n# devops æ¯ä»ä¹\n\nDevOpsï¼DevelopmentåOperationsçç»åè¯ï¼æ¯ä¸ç»è¿ç¨ãæ¹æ³ä¸ç³»ç»çç»ç§°ï¼ç¨äºä¿è¿å¼åï¼åºç¨ç¨åº/è½¯ä»¶å·¥ç¨ï¼ãææ¯è¿è¥åè´¨éä¿éï¼QAï¼é¨é¨ä¹é´çæ²éãåä½ä¸æ´åã\n\nå®æ¯ä¸ç§éè§âè½¯ä»¶å¼åäººåï¼Devï¼âåâITè¿ç»´ææ¯äººåï¼Opsï¼âä¹é´æ²éåä½çæåãè¿å¨ææ¯ä¾ãéè¿èªå¨åâè½¯ä»¶äº¤ä»âåâæ¶æåæ´âçæµç¨ï¼æ¥ä½¿å¾æå»ºãæµè¯ãåå¸è½¯ä»¶è½å¤æ´å å°å¿«æ·ãé¢ç¹åå¯é ã\n\n\n\nä¸¾ä¸ªä¾å­ï¼å¯¹äºè¿ç»´æ¥è¯´ï¼ç¨³å®ååä¸åï¼æ° Feature è¶å°è¶å¥½ãèå¯¹äºç åæ¥è¯´ï¼å´å¸æè½å¼åæ´å¤çåè½ãè¿ç§çç¾ä¼å¯¼è´å¤§éçèµæºåæ¶é´çæµªè´¹ãå°±åä¸¤å¹é©¬æä¸è¾è½¦ï¼å¦æé©¬å¤´åççæ¹åä¸ä¸è´ï¼è¯å®æ¯æ²¡æ³å¨éåè¿çã\n\n * å¨ä»·å¼æµä¸æ¸¸ç Ops è®¤ä¸ºä»·å¼é¾ä¸æ¸¸ç Dev è½¯ä»¶éåè½è´¨éä¸æ»¡è¶³è¦æ±ï¼å æ­¤é»æ­¢åæ´ã\n * å¨ä»·å¼æµä¸æ¸¸ç Dev æ æ³è·å¾ä»·å¼é¾ä¸æ¸¸ç Ops ççå®è¿è¡ç¯å¢ï¼å æ­¤æ æ³æåäº¤ä»è´¨éã\n\nDevOps ççå¿µå°±æ¯å¸æè½æç ´è¿ç§å±éï¼è®©ç åï¼Developmentï¼åè¿ç»´ï¼Operationsï¼ä¸ä½åï¼è®©å¢éä»ä¸å¡éæ±åºåï¼åçåä¸ä¸ªç®æ åè¿ã\n\nå­é¢ææä¸è¯´ DevOps æ¯æâå¼åè¿ç»´ä¸ä½åâï¼å³éè¿å·¥å·è¾å©å¼åå®æè¿ç»´çé¨åå·¥ä½ï¼åå°ææ¬ãä½æ·±å¥çè§£äº DevOps ä¹åï¼ä½ ä¼åç° DevOps å¶å®æ¯ä¸ç§è½¯ä»¶ç åç®¡ççææ³ï¼æ¹æ³è®ºï¼ä»è¿½æ±çæ¯ä¸ç§æ²¡æééççæ³çç ååä½çç¶æï¼å¯è½æ¶åå°çè§è²æå¼åãæµè¯ãäº§åãé¡¹ç®ç®¡çãè¿ç»´ç­ç­ãæä»¥æä»¬è®¤ä¸ºï¼ä¸ºäºå¸®å©ç åå¢éå¨ä¿æè´¨éçåæä¸æé«äº¤ä»æççæ¹æ³åæ¹æ³è®ºé½é¶å±äº DevOps çèç´ã\n\næ¯å¦ Google æåºç 5 ä¸ª DevOps ååï¼è¿å¥ååä¸­å¿é¡»ä¾èµäºå·¥å·è¾å©çé¨ååªæåä¸¤ç¹ï¼æ´å¤çåæ¯å¯¹äºå¼åç»ç»å½¢å¼çåçï¼\n\n 1. ç²¾ç®ç»ç»æ¶æï¼\n 2. æ¿ææ¿æä¸é¨åè¯éå¸¦æ¥çæå¤±ï¼\n 3. åé¶æ®µå°ä¸å°æ­¥ä¸å°æ­¥å°è¿è¡è½¬åï¼\n 4. æå¤§åå°å©ç¨å·¥å·åèªå¨åæµç¨ï¼\n 5. å¯¹ææçè¿ç¨åç»æè¿è¡è®°å½ååæã\n\næä»¥ DevOps ä¸æ¯ç®åçå¼åè½¯ä»¶åï¼èæ¯ä¼ä¸çå­¦ä¹ è½åä¸æ­æåçç»æï¼å°ä¼ä¸æ¹é æææ·åºå¯¹çå­¦ä¹ åç»ç»ï¼è¿ç¨æ°çå·¥å·ï¼ä¼åç»ç»æ¶æåæµç¨ï¼ä¸æ­å°è¿è¡èªæé©å½ååæ°çæ¹å¼ãå·¥å·æ¯è¾å©ï¼èéåºç¡ã\n\n\n# å·¥å·ä½¿ç¨å±\n\nDevops è½å°ï¼ç åäº¤ä»çæ¯ä¸ªè¿ç¨é½ç¦»ä¸å¼å·¥å·çæ¯æãä¼ ç»çæ¹å¼ï¼æ¯èªå·±æ­å»ºé¶æ£çå¼±æ´åå·¥å·ç³»ç»ï¼æ¯å¦æä»¬ç¨ gitlab æ¥ç®¡çä»£ç ï¼æä»¬ç¨ Jenkins æ¥åæç»­éæï¼ä½¿ç¨ selenium æ¥åèªå¨åæµè¯ï¼ä½¿ç¨ ansible æ¥èªå¨åé¨ç½²ï¼ä½¿ç¨ chef æè puppet æ¥ç®¡çåºç¡ç¯å¢ç­ç­ãè¿ç§æåµçé®é¢æ¯ï¼\n\n 1. ç³»ç»å®å¨éè¦èªå·±ç»´æ¤ï¼ææ¬é«ï¼ä¸ç¨³å®ï¼\n 2. å­ç³»ç»ä¹é´å­å¨éå½¢å¢ï¼ç¼ºå°æ°æ®å±äº«ãæéå±äº«ãç³»ç»äº¤äºç­åè½ï¼\n\n\n\nç®åå¤§åéèä»¥åäºèç½ä¼ä¸æ®ééç¨å¼ºæ´åçç»ä¸ DevOps å¹³å°ã\n\n\n# çå¸ / ææ· / devops\n\n\n# çå¸å¼å\n\nçå¸å¼å¼åæ¯æ©æè¢«å¹¿æ³éç¨çè½¯ä»¶å¼åæ¨¡åï¼è¦æ±ææç¡®çéæ±ï¼å¤§å®¶æç§éæ±ä¸æ­¥æ­¥åå¥½è§åï¼æ¯ä¸é¶æ®µå·¥ä½çå®ææ¯ä¸ä¸é¶æ®µå·¥ä½å¼å§çåæï¼æ¯ä¸é¶æ®µé½è¦è¿è¡ä¸¥æ ¼çè¯å®¡ï¼ä¿è¯åé¶æ®µçå·¥ä½åå¾è¶³å¤å¥½æ¶æåè®¸è¿å¥ä¸ä¸é¶æ®µï¼å®éç¨äºéæ±æç¡®çé¡¹ç®ãå¶æå¤§çé£é©æ¯ï¼å½äº§åç åå®æåï¼ å°äºäº§åæµè¯é¶æ®µå¦æåç°äºé®é¢ ï¼æèåç°å¶æ æ³æ»¡è¶³å¸åºéæ±ï¼ é£ä¹å°±éè¦éæ°å¼åï¼çè³éè¦éæ°è§åäº§åã\n\n\n# ææ·å¼å\n\nææ·å¼åæ¯ä¸ç§ä»¥ç¨æ·éæ±è¿åä¸ºæ ¸å¿ãè¿­ä»£ãå¾ªåºæ¸è¿çå¼åæ¹æ³ãé¦åæç¨æ·æå³æ³¨çè½¯ä»¶ååååºæ¥å¹¶äº¤ä»ç»ç¨æ·ï¼ç¨æ·å¨å®éåºæ¯ä¸­åç°é®é¢å¹¶ç»äºåé¦ï¼ç åäººåå¿«éä¿®æ¹å¼¥è¡¥éæ±ä¸­çä¸è¶³ãä¸è¿°è¿ç¨ä¸æ­è¿­ä»£ï¼ç´å°ç¨æ·æ»¡æãææ·éç¨äºéæ±ä¸æç¡®ãåæ°æ§æèéè¦æ¢å å¸åºçé¡¹ç®ï¼ç¹å«éåäºèç½é¡¹ç®ã\n\n\n# devops\n\nDevOpsæ¯ä¸ç§è½¯ä»¶å¼åå®è·µï¼å®å°äººåãæµç¨åææ¯ç»åå¨ä¸èµ·ï¼ä»¥äº¤ä»æç»­çä»·å¼ãè¯¥æ¹æ³åä¸ºè®¡ååè·è¸ªãå¼åãçæåæµè¯ãäº¤ä»ä»¥åçè§åæä½ãDevOps çç¬ç¹ä¹å¤å¨äºå¼åãIT è¿è¥ãè´¨éå·¥ç¨åå®å¨å¢éååå·¥ä½ï¼å¨åå¸æ°äº§åãçæ¬ææ´æ°ææ¶åçææä»»å¡ä¸­åé æçã\n\n\n# æ»ç»\n\nDevOps ä¸è½ç®åè®¤ä¸ºæ¯å·¥å·ãæ¹æ³ãæè½æç»ç»ç»æï¼DevOps ç»åææè¿ä¸ååç´ ï¼å»å¸®å©æä»¬è®©ä¸å¡æ´å¿«çå¼åäº¤ä»è¿è¥ä»¥æ´å¿«å°åºå¯¹ååã\n\nDevOps å¼ºè°åä½å±èµ¢ï¼å¼ºè°ä»é¡¹ç®æ´ä½ä¸å¨çèèæ´ä¸ªè½¯ä»¶çå½å¨æçææäºæï¼äº§åå¦ä½å¼åãæµè¯ãé¨ç½²ãåçº§ãçæ§ãè¿ç»´ãè¿è¥ç­ç­é½è¦åå¥é¡¹ç®ç®æ ãå¼åå¢éåè¿ç»´è¿è¥å¢éåè¦æ·±å¥åä½ï¼é¢ç¹å°é¢ç²åº¦çå®æäº§åå¼åãæµè¯ãäº¤ä»ãåé¦ã",normalizedContent:"# devops\n\nä»ä¹æ¯devopsï¼ - codingçåç­ - ç¥ä¹\n\n\n# devops æ¯ä»ä¹\n\ndevopsï¼developmentåoperationsçç»åè¯ï¼æ¯ä¸ç»è¿ç¨ãæ¹æ³ä¸ç³»ç»çç»ç§°ï¼ç¨äºä¿è¿å¼åï¼åºç¨ç¨åº/è½¯ä»¶å·¥ç¨ï¼ãææ¯è¿è¥åè´¨éä¿éï¼qaï¼é¨é¨ä¹é´çæ²éãåä½ä¸æ´åã\n\nå®æ¯ä¸ç§éè§âè½¯ä»¶å¼åäººåï¼devï¼âåâitè¿ç»´ææ¯äººåï¼opsï¼âä¹é´æ²éåä½çæåãè¿å¨ææ¯ä¾ãéè¿èªå¨åâè½¯ä»¶äº¤ä»âåâæ¶æåæ´âçæµç¨ï¼æ¥ä½¿å¾æå»ºãæµè¯ãåå¸è½¯ä»¶è½å¤æ´å å°å¿«æ·ãé¢ç¹åå¯é ã\n\n\n\nä¸¾ä¸ªä¾å­ï¼å¯¹äºè¿ç»´æ¥è¯´ï¼ç¨³å®ååä¸åï¼æ° feature è¶å°è¶å¥½ãèå¯¹äºç åæ¥è¯´ï¼å´å¸æè½å¼åæ´å¤çåè½ãè¿ç§çç¾ä¼å¯¼è´å¤§éçèµæºåæ¶é´çæµªè´¹ãå°±åä¸¤å¹é©¬æä¸è¾è½¦ï¼å¦æé©¬å¤´åççæ¹åä¸ä¸è´ï¼è¯å®æ¯æ²¡æ³å¨éåè¿çã\n\n * å¨ä»·å¼æµä¸æ¸¸ç ops è®¤ä¸ºä»·å¼é¾ä¸æ¸¸ç dev è½¯ä»¶éåè½è´¨éä¸æ»¡è¶³è¦æ±ï¼å æ­¤é»æ­¢åæ´ã\n * å¨ä»·å¼æµä¸æ¸¸ç dev æ æ³è·å¾ä»·å¼é¾ä¸æ¸¸ç ops ççå®è¿è¡ç¯å¢ï¼å æ­¤æ æ³æåäº¤ä»è´¨éã\n\ndevops ççå¿µå°±æ¯å¸æè½æç ´è¿ç§å±éï¼è®©ç åï¼developmentï¼åè¿ç»´ï¼operationsï¼ä¸ä½åï¼è®©å¢éä»ä¸å¡éæ±åºåï¼åçåä¸ä¸ªç®æ åè¿ã\n\nå­é¢ææä¸è¯´ devops æ¯æâå¼åè¿ç»´ä¸ä½åâï¼å³éè¿å·¥å·è¾å©å¼åå®æè¿ç»´çé¨åå·¥ä½ï¼åå°ææ¬ãä½æ·±å¥çè§£äº devops ä¹åï¼ä½ ä¼åç° devops å¶å®æ¯ä¸ç§è½¯ä»¶ç åç®¡ççææ³ï¼æ¹æ³è®ºï¼ä»è¿½æ±çæ¯ä¸ç§æ²¡æééççæ³çç ååä½çç¶æï¼å¯è½æ¶åå°çè§è²æå¼åãæµè¯ãäº§åãé¡¹ç®ç®¡çãè¿ç»´ç­ç­ãæä»¥æä»¬è®¤ä¸ºï¼ä¸ºäºå¸®å©ç åå¢éå¨ä¿æè´¨éçåæä¸æé«äº¤ä»æççæ¹æ³åæ¹æ³è®ºé½é¶å±äº devops çèç´ã\n\næ¯å¦ google æåºç 5 ä¸ª devops ååï¼è¿å¥ååä¸­å¿é¡»ä¾èµäºå·¥å·è¾å©çé¨ååªæåä¸¤ç¹ï¼æ´å¤çåæ¯å¯¹äºå¼åç»ç»å½¢å¼çåçï¼\n\n 1. ç²¾ç®ç»ç»æ¶æï¼\n 2. æ¿ææ¿æä¸é¨åè¯éå¸¦æ¥çæå¤±ï¼\n 3. åé¶æ®µå°ä¸å°æ­¥ä¸å°æ­¥å°è¿è¡è½¬åï¼\n 4. æå¤§åå°å©ç¨å·¥å·åèªå¨åæµç¨ï¼\n 5. å¯¹ææçè¿ç¨åç»æè¿è¡è®°å½ååæã\n\næä»¥ devops ä¸æ¯ç®åçå¼åè½¯ä»¶åï¼èæ¯ä¼ä¸çå­¦ä¹ è½åä¸æ­æåçç»æï¼å°ä¼ä¸æ¹é æææ·åºå¯¹çå­¦ä¹ åç»ç»ï¼è¿ç¨æ°çå·¥å·ï¼ä¼åç»ç»æ¶æåæµç¨ï¼ä¸æ­å°è¿è¡èªæé©å½ååæ°çæ¹å¼ãå·¥å·æ¯è¾å©ï¼èéåºç¡ã\n\n\n# å·¥å·ä½¿ç¨å±\n\ndevops è½å°ï¼ç åäº¤ä»çæ¯ä¸ªè¿ç¨é½ç¦»ä¸å¼å·¥å·çæ¯æãä¼ ç»çæ¹å¼ï¼æ¯èªå·±æ­å»ºé¶æ£çå¼±æ´åå·¥å·ç³»ç»ï¼æ¯å¦æä»¬ç¨ gitlab æ¥ç®¡çä»£ç ï¼æä»¬ç¨ jenkins æ¥åæç»­éæï¼ä½¿ç¨ selenium æ¥åèªå¨åæµè¯ï¼ä½¿ç¨ ansible æ¥èªå¨åé¨ç½²ï¼ä½¿ç¨ chef æè puppet æ¥ç®¡çåºç¡ç¯å¢ç­ç­ãè¿ç§æåµçé®é¢æ¯ï¼\n\n 1. ç³»ç»å®å¨éè¦èªå·±ç»´æ¤ï¼ææ¬é«ï¼ä¸ç¨³å®ï¼\n 2. å­ç³»ç»ä¹é´å­å¨éå½¢å¢ï¼ç¼ºå°æ°æ®å±äº«ãæéå±äº«ãç³»ç»äº¤äºç­åè½ï¼\n\n\n\nç®åå¤§åéèä»¥åäºèç½ä¼ä¸æ®ééç¨å¼ºæ´åçç»ä¸ devops å¹³å°ã\n\n\n# çå¸ / ææ· / devops\n\n\n# çå¸å¼å\n\nçå¸å¼å¼åæ¯æ©æè¢«å¹¿æ³éç¨çè½¯ä»¶å¼åæ¨¡åï¼è¦æ±ææç¡®çéæ±ï¼å¤§å®¶æç§éæ±ä¸æ­¥æ­¥åå¥½è§åï¼æ¯ä¸é¶æ®µå·¥ä½çå®ææ¯ä¸ä¸é¶æ®µå·¥ä½å¼å§çåæï¼æ¯ä¸é¶æ®µé½è¦è¿è¡ä¸¥æ ¼çè¯å®¡ï¼ä¿è¯åé¶æ®µçå·¥ä½åå¾è¶³å¤å¥½æ¶æåè®¸è¿å¥ä¸ä¸é¶æ®µï¼å®éç¨äºéæ±æç¡®çé¡¹ç®ãå¶æå¤§çé£é©æ¯ï¼å½äº§åç åå®æåï¼ å°äºäº§åæµè¯é¶æ®µå¦æåç°äºé®é¢ ï¼æèåç°å¶æ æ³æ»¡è¶³å¸åºéæ±ï¼ é£ä¹å°±éè¦éæ°å¼åï¼çè³éè¦éæ°è§åäº§åã\n\n\n# ææ·å¼å\n\nææ·å¼åæ¯ä¸ç§ä»¥ç¨æ·éæ±è¿åä¸ºæ ¸å¿ãè¿­ä»£ãå¾ªåºæ¸è¿çå¼åæ¹æ³ãé¦åæç¨æ·æå³æ³¨çè½¯ä»¶ååååºæ¥å¹¶äº¤ä»ç»ç¨æ·ï¼ç¨æ·å¨å®éåºæ¯ä¸­åç°é®é¢å¹¶ç»äºåé¦ï¼ç åäººåå¿«éä¿®æ¹å¼¥è¡¥éæ±ä¸­çä¸è¶³ãä¸è¿°è¿ç¨ä¸æ­è¿­ä»£ï¼ç´å°ç¨æ·æ»¡æãææ·éç¨äºéæ±ä¸æç¡®ãåæ°æ§æèéè¦æ¢å å¸åºçé¡¹ç®ï¼ç¹å«éåäºèç½é¡¹ç®ã\n\n\n# devops\n\ndevopsæ¯ä¸ç§è½¯ä»¶å¼åå®è·µï¼å®å°äººåãæµç¨åææ¯ç»åå¨ä¸èµ·ï¼ä»¥äº¤ä»æç»­çä»·å¼ãè¯¥æ¹æ³åä¸ºè®¡ååè·è¸ªãå¼åãçæåæµè¯ãäº¤ä»ä»¥åçè§åæä½ãdevops çç¬ç¹ä¹å¤å¨äºå¼åãit è¿è¥ãè´¨éå·¥ç¨åå®å¨å¢éååå·¥ä½ï¼å¨åå¸æ°äº§åãçæ¬ææ´æ°ææ¶åçææä»»å¡ä¸­åé æçã\n\n\n# æ»ç»\n\ndevops ä¸è½ç®åè®¤ä¸ºæ¯å·¥å·ãæ¹æ³ãæè½æç»ç»ç»æï¼devops ç»åææè¿ä¸ååç´ ï¼å»å¸®å©æä»¬è®©ä¸å¡æ´å¿«çå¼åäº¤ä»è¿è¥ä»¥æ´å¿«å°åºå¯¹ååã\n\ndevops å¼ºè°åä½å±èµ¢ï¼å¼ºè°ä»é¡¹ç®æ´ä½ä¸å¨çèèæ´ä¸ªè½¯ä»¶çå½å¨æçææäºæï¼äº§åå¦ä½å¼åãæµè¯ãé¨ç½²ãåçº§ãçæ§ãè¿ç»´ãè¿è¥ç­ç­é½è¦åå¥é¡¹ç®ç®æ ãå¼åå¢éåè¿ç»´è¿è¥å¢éåè¦æ·±å¥åä½ï¼é¢ç¹å°é¢ç²åº¦çå®æäº§åå¼åãæµè¯ãäº¤ä»ãåé¦ã",charsets:{cjk:!0}},{title:"mongodb",frontmatter:{},regularPath:"/re/mongodb.html",relativePath:"re/mongodb.md",key:"v-36417e3f",path:"/re/mongodb.html",headers:[{level:2,title:"å®è£æç¨",slug:"å®è£æç¨",normalizedTitle:"å®è£æç¨",charIndex:75},{level:2,title:"æ°æ®å¤ä»½ä¸æ¢å¤",slug:"æ°æ®å¤ä»½ä¸æ¢å¤",normalizedTitle:"æ°æ®å¤ä»½ä¸æ¢å¤",charIndex:1761},{level:2,title:"æ°æ®åºè¿æ¥",slug:"æ°æ®åºè¿æ¥",normalizedTitle:"æ°æ®åºè¿æ¥",charIndex:1950},{level:2,title:"mongodb compass",slug:"mongodb-compass",normalizedTitle:"mongodb compass",charIndex:2055}],lastUpdated:"1/7/2022, 12:58:52 PM",lastUpdatedTimestamp:1641531532e3,headersStr:"å®è£æç¨ æ°æ®å¤ä»½ä¸æ¢å¤ æ°æ®åºè¿æ¥ mongodb compass",content:'# mongodb\n\nMongoDBæ¯ä¸ä¸ªåºäºåå¸å¼æä»¶å­å¨çæ°æ®åºãç±C++è¯­è¨ç¼åãæ¨å¨ä¸ºWEBåºç¨æä¾å¯æ©å±çé«æ§è½æ°æ®å­å¨è§£å³æ¹æ¡ã\n\n\n# å®è£æç¨\n\nä»¥ä¸æ¯å¨ cenos7 å¼åæºä¸å®è£çè¿ç¨ï¼å·ä½åèå®ç½\n\nsudo vim /etc/yum.repos.d/mongodb-org-4.4.repo\n\n# æ·»å å¦ä¸éç½®\n[mongodb-org-4.4]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/4.4/x86_64/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-4.4.asc\n\n\nå®è£\n\nsudo yum install -y mongodb-org\n\n\néªè¯å®è£ç»æ\n\nrpm -qa |grep mongodb\nrpm -ql mongodb-org-server\n\n\néå®çæ¬ï¼é¿å yum æ´æ°\n\nsudo vi /etc/yum.conf\n\n# æ·»å å¦ä¸åå®¹\nexclude=mongodb-org,mongodb-org-server,mongodb-org-shell,mongodb-org-mongos,mongodb-org-tools\n\n\nå¯å¨\n\nsudo systemctl start mongod\n\n# é»è®¤ç«¯å£ 27017ï¼æ¥çæ¯å¦å¯å¨\nnetstat -natp | grep 27017\n\n# æ¥çæ°æ®åºçè¿ç¨æ¯å¦å­å¨\nps -aux | grep mongod    \n\n# éªè¯æå¡å¼å¯\nmongo\n\n# è®¾ç½®å¼æºèªå¨å¯å¨\nsystemctl enable mongod\n\n\nä¿®æ¹éç½®\n\nsudo vi /etc/mongod.conf\n\n################################################################\nnet:\n  port: 8811 # é»è®¤ä¸º27021ç«¯å£\n  bindIp: 0.0.0.0 # 127.0.0.1 åªåè®¸æ¬å°è¿æ¥\n  \n  \n# é»è®¤æåµä¸ mongodb çæ°æ®åæ¥å¿å­å¨ä½ç½®æ¯ /var/log/mongodb/mongod.log å /var/lib/mongo\n# é¦åå¨/home/work/mongodbç®å½ä¸æ§è¡ï¼mkdir -p var/log var/database\n# ç¶åä¿®æ¹ä»¥ä¸éç½®\n\nsystemLog:\n  destination: file\n  logAppend: true\n  path: /home/work/mongodb/var/log/mongodb/mongod.log # ä¿®æ¹è¿é\n\nstorage:\n  dbPath: /home/work/mongodb/var/lib/mongo # ä¿®æ¹è¿é\n  \n###############################################################\n\n# éå¯æå¡\nsudo service mongod restart\n\n\nç¨æ·éç½®\n\n# è¿å¥å½ä»¤è¡\nmongo\n\n# adminæ°æ®åº\nuse admin\ndb.createUser({user:"admin",pwd:"***",roles:[{role:"root",db:"admin"}]})\n\n\néæ°å¼å¯å¸¦è®¤è¯çæå¡\n\n# æ¥çä¹åæªè®¤è¯çæ¶åå¼å¯çæå¡pid\nps -ef | grep mongo\n\n# ææ­»pidå¯¹åºæå¡\nkill pid\n\ncd /usr/bin/\n\n# forkåæ°æ¯æå¡å¨åå°è¿è¡ï¼authæ¯è®¿é®éè¦éªè¯ï¼\n./mongod --bind_ip 0.0.0.0 --port 8811 --dbpath /home/work/mongodb/var/database --logpath /home/work/mongodb/var/log/mongo.log --fork --auth\n\n\n\n# æ°æ®å¤ä»½ä¸æ¢å¤\n\næ°æ®å¤ä»½å°æ¬å°\n\nmongodump -h <ip>:<port> -d <dbname> -o <path>\n\n\n * -hï¼host\n * -dï¼db\n * -oï¼output\n\næ¬å°æ°æ®æ¢å¤å°æ°æ®åº\n\nmongorestore -h <ip>:<port> -u <user> -p=<password> -d <dbname> <path>\n\n\n\n# æ°æ®åºè¿æ¥\n\n# è¿æ¥æ¬å°\nmongo mongodb://localhost:8811\n\n# è¿æ¥å¼åæº\nmongo mongodb://<user>:<password>@<ip>:<port>\n\n\n\n# mongodb compass\n\nmongodb compass æ¯ä¸æ¬¾å¯è§åå·¥å·ï¼ç´æ¥å¨å®ç½å®è£å³å¯ï¼ä»¥ä¸æ¯è¿æ¥æ¶æå¡«çå­æ®µã\n\n * Hostnameï¼å¼åæºçå¬ç½IP\n * portï¼ç«¯å£å·\n * Username/passwordï¼ç¨æ·éç½®æ¶æ·»å çç¨æ·ååå¯ç \n * Authentication Databaseï¼æ°æ®åºé»è®¤ä¸º admin\n\n',normalizedContent:'# mongodb\n\nmongodbæ¯ä¸ä¸ªåºäºåå¸å¼æä»¶å­å¨çæ°æ®åºãç±c++è¯­è¨ç¼åãæ¨å¨ä¸ºwebåºç¨æä¾å¯æ©å±çé«æ§è½æ°æ®å­å¨è§£å³æ¹æ¡ã\n\n\n# å®è£æç¨\n\nä»¥ä¸æ¯å¨ cenos7 å¼åæºä¸å®è£çè¿ç¨ï¼å·ä½åèå®ç½\n\nsudo vim /etc/yum.repos.d/mongodb-org-4.4.repo\n\n# æ·»å å¦ä¸éç½®\n[mongodb-org-4.4]\nname=mongodb repository\nbaseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/4.4/x86_64/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-4.4.asc\n\n\nå®è£\n\nsudo yum install -y mongodb-org\n\n\néªè¯å®è£ç»æ\n\nrpm -qa |grep mongodb\nrpm -ql mongodb-org-server\n\n\néå®çæ¬ï¼é¿å yum æ´æ°\n\nsudo vi /etc/yum.conf\n\n# æ·»å å¦ä¸åå®¹\nexclude=mongodb-org,mongodb-org-server,mongodb-org-shell,mongodb-org-mongos,mongodb-org-tools\n\n\nå¯å¨\n\nsudo systemctl start mongod\n\n# é»è®¤ç«¯å£ 27017ï¼æ¥çæ¯å¦å¯å¨\nnetstat -natp | grep 27017\n\n# æ¥çæ°æ®åºçè¿ç¨æ¯å¦å­å¨\nps -aux | grep mongod    \n\n# éªè¯æå¡å¼å¯\nmongo\n\n# è®¾ç½®å¼æºèªå¨å¯å¨\nsystemctl enable mongod\n\n\nä¿®æ¹éç½®\n\nsudo vi /etc/mongod.conf\n\n################################################################\nnet:\n  port: 8811 # é»è®¤ä¸º27021ç«¯å£\n  bindip: 0.0.0.0 # 127.0.0.1 åªåè®¸æ¬å°è¿æ¥\n  \n  \n# é»è®¤æåµä¸ mongodb çæ°æ®åæ¥å¿å­å¨ä½ç½®æ¯ /var/log/mongodb/mongod.log å /var/lib/mongo\n# é¦åå¨/home/work/mongodbç®å½ä¸æ§è¡ï¼mkdir -p var/log var/database\n# ç¶åä¿®æ¹ä»¥ä¸éç½®\n\nsystemlog:\n  destination: file\n  logappend: true\n  path: /home/work/mongodb/var/log/mongodb/mongod.log # ä¿®æ¹è¿é\n\nstorage:\n  dbpath: /home/work/mongodb/var/lib/mongo # ä¿®æ¹è¿é\n  \n###############################################################\n\n# éå¯æå¡\nsudo service mongod restart\n\n\nç¨æ·éç½®\n\n# è¿å¥å½ä»¤è¡\nmongo\n\n# adminæ°æ®åº\nuse admin\ndb.createuser({user:"admin",pwd:"***",roles:[{role:"root",db:"admin"}]})\n\n\néæ°å¼å¯å¸¦è®¤è¯çæå¡\n\n# æ¥çä¹åæªè®¤è¯çæ¶åå¼å¯çæå¡pid\nps -ef | grep mongo\n\n# ææ­»pidå¯¹åºæå¡\nkill pid\n\ncd /usr/bin/\n\n# forkåæ°æ¯æå¡å¨åå°è¿è¡ï¼authæ¯è®¿é®éè¦éªè¯ï¼\n./mongod --bind_ip 0.0.0.0 --port 8811 --dbpath /home/work/mongodb/var/database --logpath /home/work/mongodb/var/log/mongo.log --fork --auth\n\n\n\n# æ°æ®å¤ä»½ä¸æ¢å¤\n\næ°æ®å¤ä»½å°æ¬å°\n\nmongodump -h <ip>:<port> -d <dbname> -o <path>\n\n\n * -hï¼host\n * -dï¼db\n * -oï¼output\n\næ¬å°æ°æ®æ¢å¤å°æ°æ®åº\n\nmongorestore -h <ip>:<port> -u <user> -p=<password> -d <dbname> <path>\n\n\n\n# æ°æ®åºè¿æ¥\n\n# è¿æ¥æ¬å°\nmongo mongodb://localhost:8811\n\n# è¿æ¥å¼åæº\nmongo mongodb://<user>:<password>@<ip>:<port>\n\n\n\n# mongodb compass\n\nmongodb compass æ¯ä¸æ¬¾å¯è§åå·¥å·ï¼ç´æ¥å¨å®ç½å®è£å³å¯ï¼ä»¥ä¸æ¯è¿æ¥æ¶æå¡«çå­æ®µã\n\n * hostnameï¼å¼åæºçå¬ç½ip\n * portï¼ç«¯å£å·\n * username/passwordï¼ç¨æ·éç½®æ¶æ·»å çç¨æ·ååå¯ç \n * authentication databaseï¼æ°æ®åºé»è®¤ä¸º admin\n\n',charsets:{cjk:!0}},{title:"Docker",frontmatter:{},regularPath:"/re/docker.html",relativePath:"re/docker.md",key:"v-1ab45bbf",path:"/re/docker.html",headers:[{level:2,title:"ä¸ºä»ä¹éè¦ Docker",slug:"ä¸ºä»ä¹éè¦-docker",normalizedTitle:"ä¸ºä»ä¹éè¦ docker",charIndex:202},{level:2,title:"åºæ¬æ¦å¿µ",slug:"åºæ¬æ¦å¿µ",normalizedTitle:"åºæ¬æ¦å¿µ",charIndex:676},{level:3,title:"éå",slug:"éå",normalizedTitle:"éå",charIndex:467},{level:3,title:"å®¹å¨",slug:"å®¹å¨",normalizedTitle:"å®¹å¨",charIndex:40},{level:3,title:"ä»åº",slug:"ä»åº",normalizedTitle:"ä»åº",charIndex:1278},{level:2,title:"Docker æä½",slug:"docker-æä½",normalizedTitle:"docker æä½",charIndex:1451}],lastUpdated:"9/8/2022, 4:24:45 PM",lastUpdatedTimestamp:1662625485e3,headersStr:"ä¸ºä»ä¹éè¦ Docker åºæ¬æ¦å¿µ éå å®¹å¨ ä»åº Docker æä½",content:"# Docker\n\nDocker - ä»å¥é¨å°å®è·µ\n\nDocker æ¯ä¸ç§èæåå®¹å¨ææ¯ï¼é¦åæä»¬éè¦äºè§£ä¸ä¸èææºåå®¹å¨çåºå«ã\n\n\n\n\n\n * èææºææ¯æ¯èæåºä¸å¥ç¡¬ä»¶èµæºåï¼å¨å¶ä¸è¿è¡ä¸ä¸ªå®ææä½ç³»ç»ï¼å¨è¯¥ç³»ç»ä¸åè¿è¡æéåºç¨è¿ç¨ã\n * å®¹å¨å±äº«åä¸ä¸ª Host OSï¼å®¹å¨ååºç¨ç´æ¥ä½¿ç¨å®¿ä¸»æºåæ ¸ï¼è¿ä½¿å¾å®¹å¨å¨ä½ç§¯ä¸è¦æ¯èææºå°å¾å¤ï¼å¹¶ä¸é¨ç½²åå¯å¨éåº¦æ´å¿«ï¼å¼éæ´å°ï¼ä¹æ´å®¹æè¿ç§»ã\n\n\n# ä¸ºä»ä¹éè¦ Docker\n\n> ä½ä¸ºä¸ç§æ°å´çèæåæ¹å¼ï¼Docker è·ä¼ ç»çèæåæ¹å¼ç¸æ¯å·æä¼å¤çä¼å¿ã\n\n * æç»­é¨ç½²ä¸æµè¯çä¸è´æ§ï¼Docker è½å¤ä¿æå®¹å¨åé¨ææçéç½®åä¾èµå³ç³»å§ç»ä¸åãä½ å¯ä»¥ä»å¼å å°äº§ååå¸çæ´ä¸ªè¿ç¨ä¸­ä½¿ç¨ç¸åçå®¹å¨æ¥ç¡®ä¿æ²¡æä»»ä½å·®å¼æèäººå·¥å¹²é¢ã\n * å¤äºå¹³å°å¼å®¹ï¼å¯ç§»æ¤æ§å¥½ãå¯ä»¥å¨ä»»ä½æ¥æDocker runtimeçç¯å¢å¿«éé¨ç½²ï¼æ²¡æè¿ç§»çææ¬ã\n * ç¯å¢æ åååçæ¬æ§å¶ï¼è®¾æ³ææ¬¡åå¸å ä¸ºå®æäºä¸ä¸ªç»ä»¶çåçº§èå¯¼è´ä½ æ´ä¸ªç¯å¢é½æåäºãDocker å¯ä»¥å¨å åéåè½»æ¾å°åæ»å°è¿ä¸ªéåçåä¸ä¸ªçæ¬ã\n * éç¦»æ§ï¼Docker å¯ä»¥ç¡®ä¿ä½ çåºç¨ç¨åºä¸èµæºæ¯åéå¼çï¼ä¾å¦ä¾èµå¤ä¸ªä¸åçæ¬ç tomcat çæ¶åï¼ä¸ä¼å ä¸ºä¾èµå²çªå¯¼è´å´©æºãåæ¶ Docker è¿è½ç¡®ä¿æ¯ä¸ªå®¹å¨åªä½¿ç¨åéç»å®çé¢å®èµæºï¼ä¸ä¼å ä¸ºæä¸ªè¿ç¨å½±hang ä½å¶ä»å®¹å¨ã\n * å®å¨æ§ï¼ç±äºDockerå®¹å¨æ¯éç¦»çï¼å¹¶ä¸èµæºæ¯åéå¶çï¼æä»¥å³ä½¿ä½ å¶ä¸­ä¸ä¸ªåºç¨ç¨åºè¢«é»ï¼ä¹ä¸ä¼å½±åè¿è¡å¨å¶å®Dockerå®¹å¨ä¸çåºç¨ç¨åºã\n\n\n# åºæ¬æ¦å¿µ\n\n\n# éå\n\næä»¬é½ç¥éï¼æä½ç³»ç»åä¸º åæ ¸ å ç¨æ·ç©ºé´ãå¯¹äº Linux èè¨ï¼åæ ¸å¯å¨åï¼ä¼æè½½ root æä»¶ç³»ç»ä¸ºå¶æä¾ç¨æ·ç©ºé´æ¯æãè Docker éåï¼Imageï¼ï¼å°±ç¸å½äºæ¯ä¸ä¸ª root æä»¶ç³»ç»ãæ¯å¦å®æ¹éå ubuntu:18.04 å°±åå«äºå®æ´çä¸å¥ Ubuntu 18.04 æå°ç³»ç»ç root æä»¶ç³»ç»ã\n\nDocker éå æ¯ä¸ä¸ªç¹æ®çæä»¶ç³»ç»ï¼é¤äºæä¾å®¹å¨è¿è¡æ¶æéçç¨åºãåºãèµæºãéç½®ç­æä»¶å¤ï¼è¿åå«äºä¸äºä¸ºè¿è¡æ¶åå¤çä¸äºéç½®åæ°ï¼å¦å¿åå·ãç¯å¢åéãç¨æ·ç­ï¼ãéå ä¸åå« ä»»ä½å¨ææ°æ®ï¼å¶åå®¹å¨æå»ºä¹åä¹ä¸ä¼è¢«æ¹åã\n\n\n# å®¹å¨\n\néåï¼Imageï¼åå®¹å¨ï¼Containerï¼çå³ç³»ï¼å°±åæ¯é¢åå¯¹è±¡ç¨åºè®¾è®¡ä¸­ç ç±» å å®ä¾ ä¸æ ·ï¼éåæ¯éæçå®ä¹ï¼å®¹å¨æ¯éåè¿è¡æ¶çå®ä½ãå®¹å¨å¯ä»¥è¢«åå»ºãå¯å¨ãåæ­¢ãå é¤ãæåç­ã\n\nå®¹å¨çå®è´¨æ¯è¿ç¨ï¼ä½ä¸ç´æ¥å¨å®¿ä¸»æ§è¡çè¿ç¨ä¸åï¼å®¹å¨è¿ç¨è¿è¡äºå±äºèªå·±çç¬ç«ç å½åç©ºé´ãå æ­¤å®¹å¨å¯ä»¥æ¥æèªå·±ç root æä»¶ç³»ç»ãèªå·±çç½ç»éç½®ãèªå·±çè¿ç¨ç©ºé´ï¼çè³èªå·±çç¨æ· ID ç©ºé´ãå®¹å¨åçè¿ç¨æ¯è¿è¡å¨ä¸ä¸ªéç¦»çç¯å¢éï¼ä½¿ç¨èµ·æ¥ï¼å°±å¥½åæ¯å¨ä¸ä¸ªç¬ç«äºå®¿ä¸»çç³»ç»ä¸æä½ä¸æ ·ãè¿ç§ç¹æ§ä½¿å¾å®¹å¨å°è£çåºç¨æ¯ç´æ¥å¨å®¿ä¸»è¿è¡æ´å å®å¨ãä¹å ä¸ºè¿ç§éç¦»çç¹æ§ï¼å¾å¤äººåå­¦ Docker æ¶å¸¸å¸¸ä¼æ··æ·å®¹å¨åèææºã\n\n\n# ä»åº\n\néåæå»ºå®æåï¼å¯ä»¥å¾å®¹æçå¨å½åå®¿ä¸»æºä¸è¿è¡ï¼ä½æ¯ï¼å¦æéè¦å¨å¶å®æå¡å¨ä¸ä½¿ç¨è¿ä¸ªéåï¼æä»¬å°±éè¦ä¸ä¸ªéä¸­çå­å¨ãååéåçæå¡ï¼Docker Registry å°±æ¯è¿æ ·çæå¡ã\n\nä¸ä¸ª Docker Registry ä¸­å¯ä»¥åå«å¤ä¸ª ä»åºï¼Repositoryï¼ï¼æ¯ä¸ªä»åºå¯ä»¥åå«å¤ä¸ª æ ç­¾ï¼Tagï¼ï¼æ¯ä¸ªæ ç­¾å¯¹åºä¸ä¸ªéåã\n\n\n# Docker æä½\n\nå¾è¡¥å",normalizedContent:"# docker\n\ndocker - ä»å¥é¨å°å®è·µ\n\ndocker æ¯ä¸ç§èæåå®¹å¨ææ¯ï¼é¦åæä»¬éè¦äºè§£ä¸ä¸èææºåå®¹å¨çåºå«ã\n\n\n\n\n\n * èææºææ¯æ¯èæåºä¸å¥ç¡¬ä»¶èµæºåï¼å¨å¶ä¸è¿è¡ä¸ä¸ªå®ææä½ç³»ç»ï¼å¨è¯¥ç³»ç»ä¸åè¿è¡æéåºç¨è¿ç¨ã\n * å®¹å¨å±äº«åä¸ä¸ª host osï¼å®¹å¨ååºç¨ç´æ¥ä½¿ç¨å®¿ä¸»æºåæ ¸ï¼è¿ä½¿å¾å®¹å¨å¨ä½ç§¯ä¸è¦æ¯èææºå°å¾å¤ï¼å¹¶ä¸é¨ç½²åå¯å¨éåº¦æ´å¿«ï¼å¼éæ´å°ï¼ä¹æ´å®¹æè¿ç§»ã\n\n\n# ä¸ºä»ä¹éè¦ docker\n\n> ä½ä¸ºä¸ç§æ°å´çèæåæ¹å¼ï¼docker è·ä¼ ç»çèæåæ¹å¼ç¸æ¯å·æä¼å¤çä¼å¿ã\n\n * æç»­é¨ç½²ä¸æµè¯çä¸è´æ§ï¼docker è½å¤ä¿æå®¹å¨åé¨ææçéç½®åä¾èµå³ç³»å§ç»ä¸åãä½ å¯ä»¥ä»å¼å å°äº§ååå¸çæ´ä¸ªè¿ç¨ä¸­ä½¿ç¨ç¸åçå®¹å¨æ¥ç¡®ä¿æ²¡æä»»ä½å·®å¼æèäººå·¥å¹²é¢ã\n * å¤äºå¹³å°å¼å®¹ï¼å¯ç§»æ¤æ§å¥½ãå¯ä»¥å¨ä»»ä½æ¥ædocker runtimeçç¯å¢å¿«éé¨ç½²ï¼æ²¡æè¿ç§»çææ¬ã\n * ç¯å¢æ åååçæ¬æ§å¶ï¼è®¾æ³ææ¬¡åå¸å ä¸ºå®æäºä¸ä¸ªç»ä»¶çåçº§èå¯¼è´ä½ æ´ä¸ªç¯å¢é½æåäºãdocker å¯ä»¥å¨å åéåè½»æ¾å°åæ»å°è¿ä¸ªéåçåä¸ä¸ªçæ¬ã\n * éç¦»æ§ï¼docker å¯ä»¥ç¡®ä¿ä½ çåºç¨ç¨åºä¸èµæºæ¯åéå¼çï¼ä¾å¦ä¾èµå¤ä¸ªä¸åçæ¬ç tomcat çæ¶åï¼ä¸ä¼å ä¸ºä¾èµå²çªå¯¼è´å´©æºãåæ¶ docker è¿è½ç¡®ä¿æ¯ä¸ªå®¹å¨åªä½¿ç¨åéç»å®çé¢å®èµæºï¼ä¸ä¼å ä¸ºæä¸ªè¿ç¨å½±hang ä½å¶ä»å®¹å¨ã\n * å®å¨æ§ï¼ç±äºdockerå®¹å¨æ¯éç¦»çï¼å¹¶ä¸èµæºæ¯åéå¶çï¼æä»¥å³ä½¿ä½ å¶ä¸­ä¸ä¸ªåºç¨ç¨åºè¢«é»ï¼ä¹ä¸ä¼å½±åè¿è¡å¨å¶å®dockerå®¹å¨ä¸çåºç¨ç¨åºã\n\n\n# åºæ¬æ¦å¿µ\n\n\n# éå\n\næä»¬é½ç¥éï¼æä½ç³»ç»åä¸º åæ ¸ å ç¨æ·ç©ºé´ãå¯¹äº linux èè¨ï¼åæ ¸å¯å¨åï¼ä¼æè½½ root æä»¶ç³»ç»ä¸ºå¶æä¾ç¨æ·ç©ºé´æ¯æãè docker éåï¼imageï¼ï¼å°±ç¸å½äºæ¯ä¸ä¸ª root æä»¶ç³»ç»ãæ¯å¦å®æ¹éå ubuntu:18.04 å°±åå«äºå®æ´çä¸å¥ ubuntu 18.04 æå°ç³»ç»ç root æä»¶ç³»ç»ã\n\ndocker éå æ¯ä¸ä¸ªç¹æ®çæä»¶ç³»ç»ï¼é¤äºæä¾å®¹å¨è¿è¡æ¶æéçç¨åºãåºãèµæºãéç½®ç­æä»¶å¤ï¼è¿åå«äºä¸äºä¸ºè¿è¡æ¶åå¤çä¸äºéç½®åæ°ï¼å¦å¿åå·ãç¯å¢åéãç¨æ·ç­ï¼ãéå ä¸åå« ä»»ä½å¨ææ°æ®ï¼å¶åå®¹å¨æå»ºä¹åä¹ä¸ä¼è¢«æ¹åã\n\n\n# å®¹å¨\n\néåï¼imageï¼åå®¹å¨ï¼containerï¼çå³ç³»ï¼å°±åæ¯é¢åå¯¹è±¡ç¨åºè®¾è®¡ä¸­ç ç±» å å®ä¾ ä¸æ ·ï¼éåæ¯éæçå®ä¹ï¼å®¹å¨æ¯éåè¿è¡æ¶çå®ä½ãå®¹å¨å¯ä»¥è¢«åå»ºãå¯å¨ãåæ­¢ãå é¤ãæåç­ã\n\nå®¹å¨çå®è´¨æ¯è¿ç¨ï¼ä½ä¸ç´æ¥å¨å®¿ä¸»æ§è¡çè¿ç¨ä¸åï¼å®¹å¨è¿ç¨è¿è¡äºå±äºèªå·±çç¬ç«ç å½åç©ºé´ãå æ­¤å®¹å¨å¯ä»¥æ¥æèªå·±ç root æä»¶ç³»ç»ãèªå·±çç½ç»éç½®ãèªå·±çè¿ç¨ç©ºé´ï¼çè³èªå·±çç¨æ· id ç©ºé´ãå®¹å¨åçè¿ç¨æ¯è¿è¡å¨ä¸ä¸ªéç¦»çç¯å¢éï¼ä½¿ç¨èµ·æ¥ï¼å°±å¥½åæ¯å¨ä¸ä¸ªç¬ç«äºå®¿ä¸»çç³»ç»ä¸æä½ä¸æ ·ãè¿ç§ç¹æ§ä½¿å¾å®¹å¨å°è£çåºç¨æ¯ç´æ¥å¨å®¿ä¸»è¿è¡æ´å å®å¨ãä¹å ä¸ºè¿ç§éç¦»çç¹æ§ï¼å¾å¤äººåå­¦ docker æ¶å¸¸å¸¸ä¼æ··æ·å®¹å¨åèææºã\n\n\n# ä»åº\n\néåæå»ºå®æåï¼å¯ä»¥å¾å®¹æçå¨å½åå®¿ä¸»æºä¸è¿è¡ï¼ä½æ¯ï¼å¦æéè¦å¨å¶å®æå¡å¨ä¸ä½¿ç¨è¿ä¸ªéåï¼æä»¬å°±éè¦ä¸ä¸ªéä¸­çå­å¨ãååéåçæå¡ï¼docker registry å°±æ¯è¿æ ·çæå¡ã\n\nä¸ä¸ª docker registry ä¸­å¯ä»¥åå«å¤ä¸ª ä»åºï¼repositoryï¼ï¼æ¯ä¸ªä»åºå¯ä»¥åå«å¤ä¸ª æ ç­¾ï¼tagï¼ï¼æ¯ä¸ªæ ç­¾å¯¹åºä¸ä¸ªéåã\n\n\n# docker æä½\n\nå¾è¡¥å",charsets:{cjk:!0}},{title:"nginx",frontmatter:{},regularPath:"/re/nginx.html",relativePath:"re/nginx.md",key:"v-cae08c22",path:"/re/nginx.html",headers:[{level:2,title:"å®è£",slug:"å®è£",normalizedTitle:"å®è£",charIndex:143},{level:2,title:"éç½®æä»¶",slug:"éç½®æä»¶",normalizedTitle:"éç½®æä»¶",charIndex:330},{level:2,title:"å¤ä¸ªéç½®æä»¶",slug:"å¤ä¸ªéç½®æä»¶",normalizedTitle:"å¤ä¸ªéç½®æä»¶",charIndex:1641},{level:2,title:"æ¥ç nginx è¿ç¨",slug:"æ¥ç-nginx-è¿ç¨",normalizedTitle:"æ¥ç nginx è¿ç¨",charIndex:1855},{level:2,title:"Nginx ä¸»è¦åºç¨",slug:"nginx-ä¸»è¦åºç¨",normalizedTitle:"nginx ä¸»è¦åºç¨",charIndex:2111},{level:3,title:"å¨éåç¦»",slug:"å¨éåç¦»",normalizedTitle:"å¨éåç¦»",charIndex:2126},{level:3,title:"ååä»£ç",slug:"ååä»£ç",normalizedTitle:"ååä»£ç",charIndex:127},{level:3,title:"è´è½½åè¡¡",slug:"è´è½½åè¡¡",normalizedTitle:"è´è½½åè¡¡",charIndex:132}],lastUpdated:"11/7/2023, 7:15:29 PM",lastUpdatedTimestamp:1699355729e3,headersStr:"å®è£ éç½®æä»¶ å¤ä¸ªéç½®æä»¶ æ¥ç nginx è¿ç¨ Nginx ä¸»è¦åºç¨ å¨éåç¦» ååä»£ç è´è½½åè¡¡",content:'# nginx\n\næ¬æåèèªï¼https://juejin.cn/post/6844904129987526663\n\n> âNginx æ¯ä¸æ¬¾è½»éçº§ç HTTP æå¡å¨ï¼éç¨äºä»¶é©±å¨çå¼æ­¥éé»å¡å¤çæ¹å¼æ¡æ¶ï¼è¿è®©å¶å·ææå¥½ç IO æ§è½ï¼æ¶å¸¸ç¨äºæå¡ç«¯çååä»£çåè´è½½åè¡¡ãâ\n\n\n# å®è£\n\nå¨ mac ä¸æç§ä»¥ä¸æ¥å®è£ï¼\n\nbrew install nginx\nnginx -v # æ¥ççæ¬\n\n\n * å¯å¨ Nginxï¼sudo nginx\n\n * åæ­¢ Nginxï¼sudo nginx -s stop\n\n * ç­éå¯ Nginxï¼sudo nginx -s reload\n\n * å¼ºå¶åæ­¢ Nginxï¼sudo pkill -9 nginx\n\n\n# éç½®æä»¶\n\n 1. /usr/local/etc/nginx/nginx.conf ï¼nginxéç½®æä»¶è·¯å¾ï¼\n 2. /usr/local/var/www ï¼nginxæå¡å¨é»è®¤çæ ¹ç®å½ï¼\n 3. /usr/local/Cellar/nginx/1.17.9 ï¼nginxçå®è£è·¯å¾ï¼\n 4. /usr/local/var/log/nginx/error.log (nginxé»è®¤çæ¥å¿è·¯å¾)\n\nNginx é»è®¤éç½®æä»¶\n\nserver {  \n        # å½nginxæ¥å°è¯·æ±åï¼ä¼å¹éå¶éç½®ä¸­çserviceæ¨¡å\n        # å¹éæ¹æ³å°±æ¯å°è¯·æ±æºå¸¦çhoståportå»è·éç½®ä¸­çserver_nameålistenç¸å¹é\n        listen       8080;        \n        server_name  localhost; # å®ä¹å½åèæä¸»æºï¼ç«ç¹ï¼å¹éè¯·æ±çä¸»æºå\n\n        location / {\n            root   html; # Nginxé»è®¤å¼\n            # è®¾å®Nginxæå¡å¨è¿åçææ¡£å\n            index  index.html index.htm; # åæ¾æ ¹ç®å½ä¸çindex.htmlï¼å¦ææ²¡æåæ¾index.htm\n        }\n}\n\n\nå½è®¿é® localhost:8080 æ¶ï¼å¯¹åºçå³æ¯ /usr/local/var/www è·¯å¾ä¸ç index.html æä»¶ï¼å¦ä¸ï¼\n\n\n\nå¯ä»¥å¨ vscode ä¸­æå¼å¯¹åºç html æä»¶ï¼\n\n<!DOCTYPE html>\n<html>\n<head>\n<title>Welcome to nginx!</title>\n<style>\n    body {\n        width: 35em;\n        margin: 0 auto;\n        font-family: Tahoma, Verdana, Arial, sans-serif;\n    }\n</style>\n</head>\n<body>\n<h1>Welcome to nginx!</h1>\n<p>If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.</p>\n\n<p>For online documentation and support please refer to\n<a href="http://nginx.org/">nginx.org</a>.<br/>\nCommercial support is available at\n<a href="http://nginx.com/">nginx.com</a>.</p>\n\n<p><em>Thank you for using nginx.</em></p>\n</body>\n</html>\n\n\n\n\n# å¤ä¸ªéç½®æä»¶\n\næä»¬å¨ä½¿ç¨nginxæ¶ï¼ä¼éå°æå¤ä¸ªæå¡è¦è¿è¡ä»£çï¼å¦ææä»¬ç´æ¥å¨nginx.confæä»¶ä¸­æ·»å ï¼éç½®æä»¶ä¼æ¾å¾\n\næ¯è¾èè¿ä¸ä¸å¥½ç»´æ¤ãæ­¤æ¶æä»¬å¯ä»¥éè¿includeçæ¹å¼ï¼ä¸ºæ¯ä¸ªæå¡å»ºç«nginxçéç½®æä»¶ï¼è¿æ ·ä¹ä¾¿äºåæç»´æ¤ã\n\nhttp {\n    # ...\n    include /etc/nginx/conf/*.conf;\n}\n\n\nconf ç®å½ä¸å¯ä»¥æ a.conf å b.conf\n\n\n# æ¥ç nginx è¿ç¨\n\nps -ef | grep nginx\n\n * ps -ef è¡¨ç¤ºæ¾ç¤ºææè¿ç¨çæ¶æ¯ã\n * | æ¯ç®¡éå½ä»¤ãéå¸¸éè¦åå©ç®¡éå½ä»¤â|âå¤ä¸ªå½ä»¤çç»å\n * grep æ¯Linux ä¸çææ¬è¿æ»¤å·¥å·\n\nè¾åºä¸ºï¼\n\n\n\n> å¯å¨nginxä»¥åï¼æä¸¤ä¸ªnginxè¿ç¨ï¼ä¸ä¸ªmasterè¿ç¨ï¼ä¸ä¸ªworkerè¿ç¨ï¼workerè¿ç¨çç¶è¿ç¨ ID å³æ¯masterè¿ç¨ï¼å¯ä»¥å¨è¾åºçç¬¬2ååç¬¬3åéªè¯ã\n\næ ¹æ®è¿ç¨å·éå¯nginxï¼kill -HUP è¿ç¨å·ï¼master çè¿ç¨å·ï¼\n\n\n# Nginx ä¸»è¦åºç¨\n\n\n# å¨éåç¦»\n\nå¨éåç¦»å¶å®å°±æ¯ Nginx æå¡å¨å°æ¥æ¶å°çè¯·æ±åä¸ºå¨æè¯·æ±åéæè¯·æ±ã\n\nå¨éåç¦»çä¸ç§åæ³æ¯å°éæèµæºé¨ç½²å¨nginxä¸ï¼åå°é¡¹ç®é¨ç½²å°åºç¨æå¡å¨ä¸ï¼æ ¹æ®ä¸å®è§åéæèµæºçè¯·æ±å¨é¨è¯·æ± nginx æå¡å¨ï¼è¾¾å°å¨éåç¦»çç®æ ã\n\nserver {  \n        listen       8080;        \n        server_name  localhost;\n\n        location / {\n            root   html; # Nginxé»è®¤å¼\n            index  index.html index.htm;\n        }\n        \n        # éæåéç½®ï¼ææéæè¯·æ±é½è½¬åç» nginx å¤ç\n        location ~ .*\\.(html|htm|gif|jpg|jpeg|bmp|png|ico|js|css)$ {\n            root /usr/local/var/www; # éæè¯·æ±æä»£çå°çæ ¹ç®å½\n        }\n        \n        # å¨æè¯·æ±å¹éå° path ä¸º myblog çå°±è½¬åå° 8081 ç«¯å£å¤ç\n        location /myblog/ {  \n            proxy_pass http://localhost:8081; # åå½æå¡ä»£ç\n        }\n}\n\n\n * éï¼è®¿é® localhost:8080/index.html ä¼ç´æ¥ä»ä»£ççæ ¹ç®å½ä¸­å»åã\n * å¨ï¼è®¿é®localhost:8080/myblog/ è¯·æ±ä¼è½¬åå° http://localhost:8081 å¤çã\n\n# åºæ¯ä¸\n\næ­¤æ¶åå¦ææ¬å°å¯å¨äºä¸ä¸ªåå®¢æå¡ï¼å°åä¸ºï¼http://localhost:8081ï¼ç»è¿ä»¥ä¸éç½®é£ä¹å½æè¯·æ± localhost:8080/myblog/ å°±ä¼è½¬åå° http://localhost:8081 ä¸ï¼ä¹ä¼æå¼åå®¢é¡µé¢ã\n\nhttp://localhost:8088/myblog/ => http://localhost:8081\n\n\næ­£å¸¸æåµä¸éæéç½®ç¨äºè·åèµæºæä»¶ï¼å¨æéç½®ç¨äºè½¬åæ¥å£è¯·æ±ç»çæ­£çæå¡ã\n\n# åºæ¯äº\n\nå¦æé¡¹ç®åå«é¨ç½²å¨åä¸å°æºå¨ä¸æ¶ï¼ç±äºæ æ³ä½¿ç¨ç¸åçç«¯å£ï¼æåç«¯ä¸è¬ä¼å°ç«¯å£å·è®¾ç½®æä¸åçå¼ï¼ä¾å¦8080ã8081ï¼ï¼ä½æ¯å½åç«¯ååç«¯è¯·æ±èµæºæ¶è¿è¦å ä¸ç«¯å£å·ï¼æªåæ¾å¾éº»ç¦ï¼æå©ç¨å¯ä»¥ nginx å°åç«¯çæå®è·¯å¾ä»£çå°åç«¯ç8080ã8081ç«¯å£ä¸ã\n\nhttp: {\n  server {\n    server_name example.com\n\n    location /mail {\n    \tproxy_pass http:example.com:8080;\n    }\n\n    location /user {\n    \tproxy_pass http:example.com:8081;\n    }\n  }\n}\n\n\n * å° http://example.com/mail/ ä¸çè¯·æ±è½¬åå° http://example.com:8080/\n * http://example.com/mail/index.html -> http://example.com:8080/index.html\n * å° http://example.com/user/ ä¸çè¯·æ±è½¬åå° http://example.com:8081/\n * http://example.com/user/index.html -> http://example.com:8081/index.html\n\n\n# ååä»£ç\n\n> è¿ä¸ªåè½ä¹å°±æ¯ nginx çååä»£çåè½ï¼å³å®¢æ·ç«¯ä¸ç¥éçæ­£è¯·æ±çæå¡ç«¯ï¼æä»¬å¯ä»¥ç¨ååä»£çæ¥è§£å³è·¨åé®é¢ã\n\nä¾å¦ï¼\n\n * åç«¯serverçååä¸ºï¼fe.server.com\n * åç«¯æå¡çååä¸ºï¼dev.server.com\n\nç°å¨æå¨fe.server.com å¯¹ dev.server.comåèµ·è¯·æ±ä¸å®ä¼åºç°è·¨åã\n\nç°å¨æä»¬åªéè¦å¯å¨ä¸ä¸ªnginxæå¡å¨ï¼å° server_name è®¾ç½®ä¸º fe.server.com ,ç¶åè®¾ç½®ç¸åºç location ä»¥æ¦æªåç«¯éè¦è·¨åçè¯·æ±ï¼æåå°è¯·æ±ä»£çådev.server.comãå¦ä¸é¢çéç½®ï¼\n\nserver {\n        listen       80;\n        server_name  fe.server.com;\n        location / {\n                proxy_pass dev.server.com;\n        }\n}\n\n\nè¿æ ·å¯ä»¥å®ç¾ç»è¿æµè§å¨çåæºç­ç¥ï¼fe.server.comè®¿é®nginxçfe.server.comå±äºåæºè®¿é®ï¼ènginxå¯¹æå¡ç«¯è½¬åçè¯·æ±ä¸ä¼è§¦åæµè§å¨çåæºç­ç¥ã\n\n# åºæ¯ä¸\n\nè®¿é®æä¸å°æºå¨çååæ¶ï¼æå¸æè¿åæä¸ä¼ å° bos ä¸ç html å°åã\n\nserver {  \n  listen       8088;        \n  server_name  xxx.com;\n\n  location / {\n  \tproxy_pass   http://bos/index.html;\n  }\n\n}\n\n\næ­¤æ¶è®¿é®çè½ç¶æ¯ xxx.comï¼ä½æ¯å®éè¯·æ±çæ¯ http://bos/index.htmlï¼å¯¹å®¢æ·ç«¯éèäºçå®è¯·æ±å°åã\n\n\n# è´è½½åè¡¡\n\néçä¸å¡çä¸æ­å¢é¿åç¨æ·çä¸æ­å¢å¤ï¼ä¸å°æå¡å·²ç»æ»¡è¶³ä¸äºç³»ç»è¦æ±äºãè¿ä¸ªæ¶åå°±åºç°äºæå¡å¨éç¾¤ã\n\nå¨æå¡å¨éç¾¤ä¸­ï¼Nginx å¯ä»¥å°æ¥æ¶å°çå®¢æ·ç«¯è¯·æ±âååå°âï¼ä¸¥æ ¼è®²å¹¶ä¸ä¸å®ååï¼å¯ä»¥éè¿è®¾ç½®æéï¼åéå°è¿ä¸ªéç¾¤ä¸­ææçæå¡å¨ä¸ãè¿ä¸ªå°±å«åè´è½½åè¡¡ã\n\n# è´è½½åè¡¡ï¼è®¾ç½®domain\nupstream domain {\n    server localhost:8000;\n    server localhost:8001;\n}\nserver {  \n        listen       8080;        \n        server_name  localhost;\n\n        location / {\n            # root   html; # Nginxé»è®¤å¼\n            # index  index.html index.htm;\n            \n            proxy_pass http://domain; # è´è½½åè¡¡éç½®ï¼è¯·æ±ä¼è¢«å¹³ååéå°8000å8001ç«¯å£\n            proxy_set_header Host $host:$server_port;\n        }\n}\n\n\n8000å8001æ¯ææ¬å°èµ·çä¸¤ä¸ªé¡µé¢ï¼è´è½½åè¡¡æååå¯ä»¥çå°è®¿é® localhost:8080 ææ¶ä¼è®¿é®å°8000ç«¯å£çé¡µé¢ï¼ææ¶ä¼è®¿é®å°8001ç«¯å£çé¡µé¢ã',normalizedContent:'# nginx\n\næ¬æåèèªï¼https://juejin.cn/post/6844904129987526663\n\n> ânginx æ¯ä¸æ¬¾è½»éçº§ç http æå¡å¨ï¼éç¨äºä»¶é©±å¨çå¼æ­¥éé»å¡å¤çæ¹å¼æ¡æ¶ï¼è¿è®©å¶å·ææå¥½ç io æ§è½ï¼æ¶å¸¸ç¨äºæå¡ç«¯çååä»£çåè´è½½åè¡¡ãâ\n\n\n# å®è£\n\nå¨ mac ä¸æç§ä»¥ä¸æ¥å®è£ï¼\n\nbrew install nginx\nnginx -v # æ¥ççæ¬\n\n\n * å¯å¨ nginxï¼sudo nginx\n\n * åæ­¢ nginxï¼sudo nginx -s stop\n\n * ç­éå¯ nginxï¼sudo nginx -s reload\n\n * å¼ºå¶åæ­¢ nginxï¼sudo pkill -9 nginx\n\n\n# éç½®æä»¶\n\n 1. /usr/local/etc/nginx/nginx.conf ï¼nginxéç½®æä»¶è·¯å¾ï¼\n 2. /usr/local/var/www ï¼nginxæå¡å¨é»è®¤çæ ¹ç®å½ï¼\n 3. /usr/local/cellar/nginx/1.17.9 ï¼nginxçå®è£è·¯å¾ï¼\n 4. /usr/local/var/log/nginx/error.log (nginxé»è®¤çæ¥å¿è·¯å¾)\n\nnginx é»è®¤éç½®æä»¶\n\nserver {  \n        # å½nginxæ¥å°è¯·æ±åï¼ä¼å¹éå¶éç½®ä¸­çserviceæ¨¡å\n        # å¹éæ¹æ³å°±æ¯å°è¯·æ±æºå¸¦çhoståportå»è·éç½®ä¸­çserver_nameålistenç¸å¹é\n        listen       8080;        \n        server_name  localhost; # å®ä¹å½åèæä¸»æºï¼ç«ç¹ï¼å¹éè¯·æ±çä¸»æºå\n\n        location / {\n            root   html; # nginxé»è®¤å¼\n            # è®¾å®nginxæå¡å¨è¿åçææ¡£å\n            index  index.html index.htm; # åæ¾æ ¹ç®å½ä¸çindex.htmlï¼å¦ææ²¡æåæ¾index.htm\n        }\n}\n\n\nå½è®¿é® localhost:8080 æ¶ï¼å¯¹åºçå³æ¯ /usr/local/var/www è·¯å¾ä¸ç index.html æä»¶ï¼å¦ä¸ï¼\n\n\n\nå¯ä»¥å¨ vscode ä¸­æå¼å¯¹åºç html æä»¶ï¼\n\n<!doctype html>\n<html>\n<head>\n<title>welcome to nginx!</title>\n<style>\n    body {\n        width: 35em;\n        margin: 0 auto;\n        font-family: tahoma, verdana, arial, sans-serif;\n    }\n</style>\n</head>\n<body>\n<h1>welcome to nginx!</h1>\n<p>if you see this page, the nginx web server is successfully installed and\nworking. further configuration is required.</p>\n\n<p>for online documentation and support please refer to\n<a href="http://nginx.org/">nginx.org</a>.<br/>\ncommercial support is available at\n<a href="http://nginx.com/">nginx.com</a>.</p>\n\n<p><em>thank you for using nginx.</em></p>\n</body>\n</html>\n\n\n\n\n# å¤ä¸ªéç½®æä»¶\n\næä»¬å¨ä½¿ç¨nginxæ¶ï¼ä¼éå°æå¤ä¸ªæå¡è¦è¿è¡ä»£çï¼å¦ææä»¬ç´æ¥å¨nginx.confæä»¶ä¸­æ·»å ï¼éç½®æä»¶ä¼æ¾å¾\n\næ¯è¾èè¿ä¸ä¸å¥½ç»´æ¤ãæ­¤æ¶æä»¬å¯ä»¥éè¿includeçæ¹å¼ï¼ä¸ºæ¯ä¸ªæå¡å»ºç«nginxçéç½®æä»¶ï¼è¿æ ·ä¹ä¾¿äºåæç»´æ¤ã\n\nhttp {\n    # ...\n    include /etc/nginx/conf/*.conf;\n}\n\n\nconf ç®å½ä¸å¯ä»¥æ a.conf å b.conf\n\n\n# æ¥ç nginx è¿ç¨\n\nps -ef | grep nginx\n\n * ps -ef è¡¨ç¤ºæ¾ç¤ºææè¿ç¨çæ¶æ¯ã\n * | æ¯ç®¡éå½ä»¤ãéå¸¸éè¦åå©ç®¡éå½ä»¤â|âå¤ä¸ªå½ä»¤çç»å\n * grep æ¯linux ä¸çææ¬è¿æ»¤å·¥å·\n\nè¾åºä¸ºï¼\n\n\n\n> å¯å¨nginxä»¥åï¼æä¸¤ä¸ªnginxè¿ç¨ï¼ä¸ä¸ªmasterè¿ç¨ï¼ä¸ä¸ªworkerè¿ç¨ï¼workerè¿ç¨çç¶è¿ç¨ id å³æ¯masterè¿ç¨ï¼å¯ä»¥å¨è¾åºçç¬¬2ååç¬¬3åéªè¯ã\n\næ ¹æ®è¿ç¨å·éå¯nginxï¼kill -hup è¿ç¨å·ï¼master çè¿ç¨å·ï¼\n\n\n# nginx ä¸»è¦åºç¨\n\n\n# å¨éåç¦»\n\nå¨éåç¦»å¶å®å°±æ¯ nginx æå¡å¨å°æ¥æ¶å°çè¯·æ±åä¸ºå¨æè¯·æ±åéæè¯·æ±ã\n\nå¨éåç¦»çä¸ç§åæ³æ¯å°éæèµæºé¨ç½²å¨nginxä¸ï¼åå°é¡¹ç®é¨ç½²å°åºç¨æå¡å¨ä¸ï¼æ ¹æ®ä¸å®è§åéæèµæºçè¯·æ±å¨é¨è¯·æ± nginx æå¡å¨ï¼è¾¾å°å¨éåç¦»çç®æ ã\n\nserver {  \n        listen       8080;        \n        server_name  localhost;\n\n        location / {\n            root   html; # nginxé»è®¤å¼\n            index  index.html index.htm;\n        }\n        \n        # éæåéç½®ï¼ææéæè¯·æ±é½è½¬åç» nginx å¤ç\n        location ~ .*\\.(html|htm|gif|jpg|jpeg|bmp|png|ico|js|css)$ {\n            root /usr/local/var/www; # éæè¯·æ±æä»£çå°çæ ¹ç®å½\n        }\n        \n        # å¨æè¯·æ±å¹éå° path ä¸º myblog çå°±è½¬åå° 8081 ç«¯å£å¤ç\n        location /myblog/ {  \n            proxy_pass http://localhost:8081; # åå½æå¡ä»£ç\n        }\n}\n\n\n * éï¼è®¿é® localhost:8080/index.html ä¼ç´æ¥ä»ä»£ççæ ¹ç®å½ä¸­å»åã\n * å¨ï¼è®¿é®localhost:8080/myblog/ è¯·æ±ä¼è½¬åå° http://localhost:8081 å¤çã\n\n# åºæ¯ä¸\n\næ­¤æ¶åå¦ææ¬å°å¯å¨äºä¸ä¸ªåå®¢æå¡ï¼å°åä¸ºï¼http://localhost:8081ï¼ç»è¿ä»¥ä¸éç½®é£ä¹å½æè¯·æ± localhost:8080/myblog/ å°±ä¼è½¬åå° http://localhost:8081 ä¸ï¼ä¹ä¼æå¼åå®¢é¡µé¢ã\n\nhttp://localhost:8088/myblog/ => http://localhost:8081\n\n\næ­£å¸¸æåµä¸éæéç½®ç¨äºè·åèµæºæä»¶ï¼å¨æéç½®ç¨äºè½¬åæ¥å£è¯·æ±ç»çæ­£çæå¡ã\n\n# åºæ¯äº\n\nå¦æé¡¹ç®åå«é¨ç½²å¨åä¸å°æºå¨ä¸æ¶ï¼ç±äºæ æ³ä½¿ç¨ç¸åçç«¯å£ï¼æåç«¯ä¸è¬ä¼å°ç«¯å£å·è®¾ç½®æä¸åçå¼ï¼ä¾å¦8080ã8081ï¼ï¼ä½æ¯å½åç«¯ååç«¯è¯·æ±èµæºæ¶è¿è¦å ä¸ç«¯å£å·ï¼æªåæ¾å¾éº»ç¦ï¼æå©ç¨å¯ä»¥ nginx å°åç«¯çæå®è·¯å¾ä»£çå°åç«¯ç8080ã8081ç«¯å£ä¸ã\n\nhttp: {\n  server {\n    server_name example.com\n\n    location /mail {\n    \tproxy_pass http:example.com:8080;\n    }\n\n    location /user {\n    \tproxy_pass http:example.com:8081;\n    }\n  }\n}\n\n\n * å° http://example.com/mail/ ä¸çè¯·æ±è½¬åå° http://example.com:8080/\n * http://example.com/mail/index.html -> http://example.com:8080/index.html\n * å° http://example.com/user/ ä¸çè¯·æ±è½¬åå° http://example.com:8081/\n * http://example.com/user/index.html -> http://example.com:8081/index.html\n\n\n# ååä»£ç\n\n> è¿ä¸ªåè½ä¹å°±æ¯ nginx çååä»£çåè½ï¼å³å®¢æ·ç«¯ä¸ç¥éçæ­£è¯·æ±çæå¡ç«¯ï¼æä»¬å¯ä»¥ç¨ååä»£çæ¥è§£å³è·¨åé®é¢ã\n\nä¾å¦ï¼\n\n * åç«¯serverçååä¸ºï¼fe.server.com\n * åç«¯æå¡çååä¸ºï¼dev.server.com\n\nç°å¨æå¨fe.server.com å¯¹ dev.server.comåèµ·è¯·æ±ä¸å®ä¼åºç°è·¨åã\n\nç°å¨æä»¬åªéè¦å¯å¨ä¸ä¸ªnginxæå¡å¨ï¼å° server_name è®¾ç½®ä¸º fe.server.com ,ç¶åè®¾ç½®ç¸åºç location ä»¥æ¦æªåç«¯éè¦è·¨åçè¯·æ±ï¼æåå°è¯·æ±ä»£çådev.server.comãå¦ä¸é¢çéç½®ï¼\n\nserver {\n        listen       80;\n        server_name  fe.server.com;\n        location / {\n                proxy_pass dev.server.com;\n        }\n}\n\n\nè¿æ ·å¯ä»¥å®ç¾ç»è¿æµè§å¨çåæºç­ç¥ï¼fe.server.comè®¿é®nginxçfe.server.comå±äºåæºè®¿é®ï¼ènginxå¯¹æå¡ç«¯è½¬åçè¯·æ±ä¸ä¼è§¦åæµè§å¨çåæºç­ç¥ã\n\n# åºæ¯ä¸\n\nè®¿é®æä¸å°æºå¨çååæ¶ï¼æå¸æè¿åæä¸ä¼ å° bos ä¸ç html å°åã\n\nserver {  \n  listen       8088;        \n  server_name  xxx.com;\n\n  location / {\n  \tproxy_pass   http://bos/index.html;\n  }\n\n}\n\n\næ­¤æ¶è®¿é®çè½ç¶æ¯ xxx.comï¼ä½æ¯å®éè¯·æ±çæ¯ http://bos/index.htmlï¼å¯¹å®¢æ·ç«¯éèäºçå®è¯·æ±å°åã\n\n\n# è´è½½åè¡¡\n\néçä¸å¡çä¸æ­å¢é¿åç¨æ·çä¸æ­å¢å¤ï¼ä¸å°æå¡å·²ç»æ»¡è¶³ä¸äºç³»ç»è¦æ±äºãè¿ä¸ªæ¶åå°±åºç°äºæå¡å¨éç¾¤ã\n\nå¨æå¡å¨éç¾¤ä¸­ï¼nginx å¯ä»¥å°æ¥æ¶å°çå®¢æ·ç«¯è¯·æ±âååå°âï¼ä¸¥æ ¼è®²å¹¶ä¸ä¸å®ååï¼å¯ä»¥éè¿è®¾ç½®æéï¼åéå°è¿ä¸ªéç¾¤ä¸­ææçæå¡å¨ä¸ãè¿ä¸ªå°±å«åè´è½½åè¡¡ã\n\n# è´è½½åè¡¡ï¼è®¾ç½®domain\nupstream domain {\n    server localhost:8000;\n    server localhost:8001;\n}\nserver {  \n        listen       8080;        \n        server_name  localhost;\n\n        location / {\n            # root   html; # nginxé»è®¤å¼\n            # index  index.html index.htm;\n            \n            proxy_pass http://domain; # è´è½½åè¡¡éç½®ï¼è¯·æ±ä¼è¢«å¹³ååéå°8000å8001ç«¯å£\n            proxy_set_header host $host:$server_port;\n        }\n}\n\n\n8000å8001æ¯ææ¬å°èµ·çä¸¤ä¸ªé¡µé¢ï¼è´è½½åè¡¡æååå¯ä»¥çå°è®¿é® localhost:8080 ææ¶ä¼è®¿é®å°8000ç«¯å£çé¡µé¢ï¼ææ¶ä¼è®¿é®å°8001ç«¯å£çé¡µé¢ã',charsets:{cjk:!0}},{title:"sh èæ¬",frontmatter:{},regularPath:"/re/shell.html",relativePath:"re/shell.md",key:"v-12faf143",path:"/re/shell.html",headers:[{level:2,title:"Shell åé",slug:"shell-åé",normalizedTitle:"shell åé",charIndex:185},{level:3,title:"å±é¨åé",slug:"å±é¨åé",normalizedTitle:"å±é¨åé",charIndex:247},{level:3,title:"ç¯å¢åé(å¨å±åé)",slug:"ç¯å¢åé-å¨å±åé",normalizedTitle:"ç¯å¢åé(å¨å±åé)",charIndex:429},{level:3,title:"path ç¯å¢åé",slug:"path-ç¯å¢åé",normalizedTitle:"path ç¯å¢åé",charIndex:665},{level:3,title:"ä½ç½®åæ°åé",slug:"ä½ç½®åæ°åé",normalizedTitle:"ä½ç½®åæ°åé",charIndex:1165},{level:3,title:"é¢å®ä¹åé",slug:"é¢å®ä¹åé",normalizedTitle:"é¢å®ä¹åé",charIndex:1609},{level:2,title:"æ¬å·",slug:"æ¬å·",normalizedTitle:"æ¬å·",charIndex:1214},{level:3,title:"åä¸­æ¬å·",slug:"åä¸­æ¬å·",normalizedTitle:"åä¸­æ¬å·",charIndex:1771}],lastUpdated:"7/5/2022, 7:19:29 PM",lastUpdatedTimestamp:1657019969e3,headersStr:"Shell åé å±é¨åé ç¯å¢åé(å¨å±åé) path ç¯å¢åé ä½ç½®åæ°åé é¢å®ä¹åé æ¬å· åä¸­æ¬å·",content:"# sh èæ¬\n\nsh èæ¬å³ shell èæ¬ï¼å°±æ¯ç± Shell å½ä»¤ç»æçæ§è¡æä»¶ãæä»¬å¯ä»¥éè¿shellå½ä»¤æ¥æä½åæ§å¶æä½ç³»ç»ï¼æ¯å¦Linuxä¸­ç Shell å½ä»¤å°±åæ¬lsãcdãpwdç­ç­ãshell èæ¬å linux å½ä»¤çåºå«æ¯ shell æ¯ä¸ä¸ªç¨ C è¯­è¨ç¼åçç¨åºï¼æ¢æ¯ä¸ç§å½ä»¤è¯­è¨ï¼åæ¯ä¸ç§ç¨åºè®¾è®¡è¯­è¨ï¼ç¸å½äºæäºä¸å®çé»è¾åè¿ç¨ã\n\n\n# Shell åé\n\nShell åéåä¸ºç³»ç»åéåèªå®ä¹åéãç³»ç»åéæ$HOMEã$PWDã$USERç­ãèªå®ä¹åéååä¸ºå±é¨åéåç¯å¢åéï¼å¨å±åéï¼\n\n * æ¾ç¤ºææåéï¼set\n * å é¤åéï¼unset åéå\n * ä½¿ç¨åéï¼$åéåã${åéå}\n * æå°åéï¼echo ${åéå}\n\n\n# å±é¨åé\n\n * å®ä¹åéï¼åéå=åéå¼ï¼ç­å·ä¸¤ä¾§ä¸è½æç©ºæ ¼ï¼åéåä¸è¬ä¹ æ¯ç¨å¤§åã\n * å£°æéæåéï¼readonly åéå=åéå¼ï¼éæåéä¸è½ unsetã\n\n\n# ç¯å¢åé(å¨å±åé)\n\n> ä¸å±é¨åéçåºå«æ¯å­ shell ç»§æ¿å¯ä»¥å½åç¶ shell çç¯å¢åéï¼å¹¶è½ä¸ç´ä¼ æ¿ä¸å»\n\n 1. export åéå=åéå¼ï¼å° Shell åéè¾åºä¸ºç¯å¢åéã\n 2. source éç½®æä»¶è·¯å¾ï¼è®©ä¿®æ¹åçéç½®ä¿¡æ¯ç«å³çæã\n 3. echo $åéåï¼æ£æ¥ç¯å¢åéæ¯å¦çæ\n\nexport var=1 # æ³¨æç­å·ä¸¤è¾¹ä¸è½æç©ºæ ¼\necho ${var}\n\nbash # å¼å¯å­ shell\necho ${var} # 1\n\n\n\n# path ç¯å¢åé\n\né¦åä»ç»ä¸ä¸ which å½ä»¤ï¼å®ç¨äºæ¥æ¾æä¸ªå½ä»¤æå¨çç»å¯¹è·¯å¾ã\n\nwhich node #/usr/local/bin/node\nwhich npm #/usr/local/bin/npm\nwhich rm #/bin/rm\n\n\nä¸ºä»ä¹åé¢å¨ä½¿ç¨ rmãnodeãnpm ç­å½ä»¤æ¶ï¼æ è®ºå½åä½äºåªä¸ªç®å½ï¼é½å¯ä»¥ç´æ¥ä½¿ç¨ï¼èæ éææå½ä»¤çæ§è¡æä»¶æå¨çä½ç½®ï¼è¿æ¯ PATH ç¯å¢åéå¨èµ·ä½ç¨ã\n\necho $PATH\n# /usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin\n\n\nPATH ç¯å¢åéçåå®¹æ¯ç±ä¸å ç®å½ç»æçï¼åç®å½ä¹é´ç¨åå·â:âéå¼ãå½æ§è¡æä¸ªå½ä»¤æ¶ï¼Linux ä¼ä¾ç§ PATH ä¸­åå«çç®å½ä¾æ¬¡æå¯»è¯¥å½ä»¤çå¯æ§è¡æä»¶ã\n\nexport APATH = /user/a/bin\nexport PATH=$APATH:$PATH\n\n# å¨åæç path åºç¡ä¸æ·»å æ°çç®å½\n# æ³¨æï¼è¿ç§æ¹å¼åªæ¯ä¸´æ¶ææï¼ä¸æ¦éåºä¸æ¬¡åç»éçæ¶åï¼$PATH å°±æ¢å¤æäºé»è®¤å¼ã\n\n\n\n# ä½ç½®åæ°åé\n\n * $n ï¼$0 ä»£è¡¨å½ä»¤æ¬èº«ã$1-$9 ä»£è¡¨ç¬¬1å°9ä¸ªåæ°ï¼10ä»¥ä¸åæ°ç¨è±æ¬å·ï¼å¦ ${10}ã\n * $* ï¼ä¼ éç»èæ¬æèå½æ°çææåæ°ï¼ä¸æææåæ°çæä¸ä¸ªæ´ä½è¾åºã\n * $@ ï¼ä¼ éç»èæ¬æèå½æ°çææåæ°ï¼ä¸ææ¯ä¸ªåæ°åºåå¯¹å¾è¾åºã\n * $# ï¼ææåæ°ä¸ªæ°ã\n\n# test.sh è¾åºåä¸ªåæ° \necho $0 $1 $2 \necho $* test.sh\necho $@ \necho åæ°ä¸ªæ°=$#\n\n\nchmod +x test.sh # èµäºæä»¶çæ§è¡æé\n./test.sh 1 2 3 4\n\n# ./test.sh 1 2\n# 1 2 3 4 test.sh\n# 1 2 3 4\n# åæ°ä¸ªæ°=4\n\n\nå°å½ä»¤è¡åæ°ä¼ éå°èæ¬ï¼åä¼ éå°å½æ°åï¼\n\n# test.sh\nfunction main() {\n    echo $@ # æ¥æ¶å½æ°ä¼ å¥åæ°\n}\n\nmain $@ # æ¥æ¶å½ä»¤è¡ä¼ å¥åæ°\n\n\n./test.sh 123\n\n\n\n# é¢å®ä¹åé\n\n * $$ ï¼å½åè¿ç¨ç PID è¿ç¨å·ã\n * $! ï¼åå°è¿è¡çæåä¸ä¸ªè¿ç¨ç PID è¿ç¨å·ã\n * $? ï¼æåä¸æ¬¡æ§è¡çå½ä»¤çè¿åç¶æï¼0ä¸ºæ§è¡æ­£ç¡®ï¼é0æ§è¡å¤±è´¥ã\n\nnpm install # åå¦æ§è¡äºå®è£ä¾èµçå½ä»¤å¹¶æ¥é\necho $? # åä¼æå°é0ï¼ä»£è¡¨æ§è¡å¤±è´¥\n\n\n\n# æ¬å·\n\n\n# åä¸­æ¬å·\n\n * [[æ¯ bash ç¨åºè¯­è¨çå³é®å­ãå¹¶ä¸æ¯ä¸ä¸ªå½ä»¤ï¼[[ ]] ç»ææ¯[ ]ç»ææ´å éç¨ãå¨ [[ å ]] ä¹é´ææçå­ç¬¦é½ä¸ä¼åçæä»¶åæ©å±æèåè¯åå²ï¼ä½æ¯ä¼åçåæ°æ©å±åå½ä»¤æ¿æ¢ã\n * æ¯æå­ç¬¦ä¸²çæ¨¡å¼å¹éï¼ä½¿ç¨=~æä½ç¬¦æ¶çè³æ¯æshellçæ­£åè¡¨è¾¾å¼ãå­ç¬¦ä¸²æ¯è¾æ¶å¯ä»¥æå³è¾¹çä½ä¸ºä¸ä¸ªæ¨¡å¼ï¼èä¸ä»ä»æ¯ä¸ä¸ªå­ç¬¦ä¸²ï¼æ¯å¦[[ hello == hell? ]]ï¼ç»æä¸ºçã[[ ]] ä¸­å¹éå­ç¬¦ä¸²æééç¬¦ï¼ä¸éè¦å¼å·ã\n * ä½¿ç¨[[ ... ]]æ¡ä»¶å¤æ­ç»æï¼èä¸æ¯[ ... ]ï¼è½å¤é²æ­¢èæ¬ä¸­çè®¸å¤é»è¾éè¯¯ãæ¯å¦ï¼&&ã||ã<å> æä½ç¬¦è½å¤æ­£å¸¸å­å¨äº [[ ]] æ¡ä»¶å¤æ­ç»æä¸­ï¼ä½æ¯å¦æåºç°å¨ [ ] ç»æä¸­çè¯ä¼æ¥éãæ¯å¦å¯ä»¥ç´æ¥ä½¿ç¨if [[ $a != 1 && $a != 2 ]]ã\n * bashæåä¸­æ¬å·ä¸­çè¡¨è¾¾å¼çä½ä¸ä¸ªåç¬çåç´ ï¼å¹¶è¿åä¸ä¸ªéåºç¶æç ã\n\n# å¤æ­ä¸ä¸æ¡å½ä»¤è¿åç¶ææ¯å¦ä¸º 0ï¼æ­£ç¡®ï¼ï¼ä¸º 0 åè¾åº\n\n[[ $? = 0 ]] && echo $?\n",normalizedContent:"# sh èæ¬\n\nsh èæ¬å³ shell èæ¬ï¼å°±æ¯ç± shell å½ä»¤ç»æçæ§è¡æä»¶ãæä»¬å¯ä»¥éè¿shellå½ä»¤æ¥æä½åæ§å¶æä½ç³»ç»ï¼æ¯å¦linuxä¸­ç shell å½ä»¤å°±åæ¬lsãcdãpwdç­ç­ãshell èæ¬å linux å½ä»¤çåºå«æ¯ shell æ¯ä¸ä¸ªç¨ c è¯­è¨ç¼åçç¨åºï¼æ¢æ¯ä¸ç§å½ä»¤è¯­è¨ï¼åæ¯ä¸ç§ç¨åºè®¾è®¡è¯­è¨ï¼ç¸å½äºæäºä¸å®çé»è¾åè¿ç¨ã\n\n\n# shell åé\n\nshell åéåä¸ºç³»ç»åéåèªå®ä¹åéãç³»ç»åéæ$homeã$pwdã$userç­ãèªå®ä¹åéååä¸ºå±é¨åéåç¯å¢åéï¼å¨å±åéï¼\n\n * æ¾ç¤ºææåéï¼set\n * å é¤åéï¼unset åéå\n * ä½¿ç¨åéï¼$åéåã${åéå}\n * æå°åéï¼echo ${åéå}\n\n\n# å±é¨åé\n\n * å®ä¹åéï¼åéå=åéå¼ï¼ç­å·ä¸¤ä¾§ä¸è½æç©ºæ ¼ï¼åéåä¸è¬ä¹ æ¯ç¨å¤§åã\n * å£°æéæåéï¼readonly åéå=åéå¼ï¼éæåéä¸è½ unsetã\n\n\n# ç¯å¢åé(å¨å±åé)\n\n> ä¸å±é¨åéçåºå«æ¯å­ shell ç»§æ¿å¯ä»¥å½åç¶ shell çç¯å¢åéï¼å¹¶è½ä¸ç´ä¼ æ¿ä¸å»\n\n 1. export åéå=åéå¼ï¼å° shell åéè¾åºä¸ºç¯å¢åéã\n 2. source éç½®æä»¶è·¯å¾ï¼è®©ä¿®æ¹åçéç½®ä¿¡æ¯ç«å³çæã\n 3. echo $åéåï¼æ£æ¥ç¯å¢åéæ¯å¦çæ\n\nexport var=1 # æ³¨æç­å·ä¸¤è¾¹ä¸è½æç©ºæ ¼\necho ${var}\n\nbash # å¼å¯å­ shell\necho ${var} # 1\n\n\n\n# path ç¯å¢åé\n\né¦åä»ç»ä¸ä¸ which å½ä»¤ï¼å®ç¨äºæ¥æ¾æä¸ªå½ä»¤æå¨çç»å¯¹è·¯å¾ã\n\nwhich node #/usr/local/bin/node\nwhich npm #/usr/local/bin/npm\nwhich rm #/bin/rm\n\n\nä¸ºä»ä¹åé¢å¨ä½¿ç¨ rmãnodeãnpm ç­å½ä»¤æ¶ï¼æ è®ºå½åä½äºåªä¸ªç®å½ï¼é½å¯ä»¥ç´æ¥ä½¿ç¨ï¼èæ éææå½ä»¤çæ§è¡æä»¶æå¨çä½ç½®ï¼è¿æ¯ path ç¯å¢åéå¨èµ·ä½ç¨ã\n\necho $path\n# /usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/library/apple/usr/bin\n\n\npath ç¯å¢åéçåå®¹æ¯ç±ä¸å ç®å½ç»æçï¼åç®å½ä¹é´ç¨åå·â:âéå¼ãå½æ§è¡æä¸ªå½ä»¤æ¶ï¼linux ä¼ä¾ç§ path ä¸­åå«çç®å½ä¾æ¬¡æå¯»è¯¥å½ä»¤çå¯æ§è¡æä»¶ã\n\nexport apath = /user/a/bin\nexport path=$apath:$path\n\n# å¨åæç path åºç¡ä¸æ·»å æ°çç®å½\n# æ³¨æï¼è¿ç§æ¹å¼åªæ¯ä¸´æ¶ææï¼ä¸æ¦éåºä¸æ¬¡åç»éçæ¶åï¼$path å°±æ¢å¤æäºé»è®¤å¼ã\n\n\n\n# ä½ç½®åæ°åé\n\n * $n ï¼$0 ä»£è¡¨å½ä»¤æ¬èº«ã$1-$9 ä»£è¡¨ç¬¬1å°9ä¸ªåæ°ï¼10ä»¥ä¸åæ°ç¨è±æ¬å·ï¼å¦ ${10}ã\n * $* ï¼ä¼ éç»èæ¬æèå½æ°çææåæ°ï¼ä¸æææåæ°çæä¸ä¸ªæ´ä½è¾åºã\n * $@ ï¼ä¼ éç»èæ¬æèå½æ°çææåæ°ï¼ä¸ææ¯ä¸ªåæ°åºåå¯¹å¾è¾åºã\n * $# ï¼ææåæ°ä¸ªæ°ã\n\n# test.sh è¾åºåä¸ªåæ° \necho $0 $1 $2 \necho $* test.sh\necho $@ \necho åæ°ä¸ªæ°=$#\n\n\nchmod +x test.sh # èµäºæä»¶çæ§è¡æé\n./test.sh 1 2 3 4\n\n# ./test.sh 1 2\n# 1 2 3 4 test.sh\n# 1 2 3 4\n# åæ°ä¸ªæ°=4\n\n\nå°å½ä»¤è¡åæ°ä¼ éå°èæ¬ï¼åä¼ éå°å½æ°åï¼\n\n# test.sh\nfunction main() {\n    echo $@ # æ¥æ¶å½æ°ä¼ å¥åæ°\n}\n\nmain $@ # æ¥æ¶å½ä»¤è¡ä¼ å¥åæ°\n\n\n./test.sh 123\n\n\n\n# é¢å®ä¹åé\n\n * $$ ï¼å½åè¿ç¨ç pid è¿ç¨å·ã\n * $! ï¼åå°è¿è¡çæåä¸ä¸ªè¿ç¨ç pid è¿ç¨å·ã\n * $? ï¼æåä¸æ¬¡æ§è¡çå½ä»¤çè¿åç¶æï¼0ä¸ºæ§è¡æ­£ç¡®ï¼é0æ§è¡å¤±è´¥ã\n\nnpm install # åå¦æ§è¡äºå®è£ä¾èµçå½ä»¤å¹¶æ¥é\necho $? # åä¼æå°é0ï¼ä»£è¡¨æ§è¡å¤±è´¥\n\n\n\n# æ¬å·\n\n\n# åä¸­æ¬å·\n\n * [[æ¯ bash ç¨åºè¯­è¨çå³é®å­ãå¹¶ä¸æ¯ä¸ä¸ªå½ä»¤ï¼[[ ]] ç»ææ¯[ ]ç»ææ´å éç¨ãå¨ [[ å ]] ä¹é´ææçå­ç¬¦é½ä¸ä¼åçæä»¶åæ©å±æèåè¯åå²ï¼ä½æ¯ä¼åçåæ°æ©å±åå½ä»¤æ¿æ¢ã\n * æ¯æå­ç¬¦ä¸²çæ¨¡å¼å¹éï¼ä½¿ç¨=~æä½ç¬¦æ¶çè³æ¯æshellçæ­£åè¡¨è¾¾å¼ãå­ç¬¦ä¸²æ¯è¾æ¶å¯ä»¥æå³è¾¹çä½ä¸ºä¸ä¸ªæ¨¡å¼ï¼èä¸ä»ä»æ¯ä¸ä¸ªå­ç¬¦ä¸²ï¼æ¯å¦[[ hello == hell? ]]ï¼ç»æä¸ºçã[[ ]] ä¸­å¹éå­ç¬¦ä¸²æééç¬¦ï¼ä¸éè¦å¼å·ã\n * ä½¿ç¨[[ ... ]]æ¡ä»¶å¤æ­ç»æï¼èä¸æ¯[ ... ]ï¼è½å¤é²æ­¢èæ¬ä¸­çè®¸å¤é»è¾éè¯¯ãæ¯å¦ï¼&&ã||ã<å> æä½ç¬¦è½å¤æ­£å¸¸å­å¨äº [[ ]] æ¡ä»¶å¤æ­ç»æä¸­ï¼ä½æ¯å¦æåºç°å¨ [ ] ç»æä¸­çè¯ä¼æ¥éãæ¯å¦å¯ä»¥ç´æ¥ä½¿ç¨if [[ $a != 1 && $a != 2 ]]ã\n * bashæåä¸­æ¬å·ä¸­çè¡¨è¾¾å¼çä½ä¸ä¸ªåç¬çåç´ ï¼å¹¶è¿åä¸ä¸ªéåºç¶æç ã\n\n# å¤æ­ä¸ä¸æ¡å½ä»¤è¿åç¶ææ¯å¦ä¸º 0ï¼æ­£ç¡®ï¼ï¼ä¸º 0 åè¾åº\n\n[[ $? = 0 ]] && echo $?\n",charsets:{cjk:!0}},{title:"React Fiber",frontmatter:{},regularPath:"/react/fiber.html",relativePath:"react/fiber.md",key:"v-96cebf82",path:"/react/fiber.html",headers:[{level:2,title:"ReactElement",slug:"reactelement",normalizedTitle:"reactelement",charIndex:135},{level:2,title:"ä¸ºä»ä¹ä¼åºç° React fiber æ¶æ",slug:"ä¸ºä»ä¹ä¼åºç°-react-fiber-æ¶æ",normalizedTitle:"ä¸ºä»ä¹ä¼åºç° react fiber æ¶æ",charIndex:1342},{level:2,title:"æµè§å¨æ¸²æ",slug:"æµè§å¨æ¸²æ",normalizedTitle:"æµè§å¨æ¸²æ",charIndex:2165},{level:3,title:"æ¸²æå¸§",slug:"æ¸²æå¸§",normalizedTitle:"æ¸²æå¸§",charIndex:2205},{level:3,title:"RequestIdleCallback",slug:"requestidlecallback",normalizedTitle:"requestidlecallback",charIndex:2770},{level:2,title:"Fiber Reconciler å¦ä½å·¥ä½",slug:"fiber-reconciler-å¦ä½å·¥ä½",normalizedTitle:"fiber reconciler å¦ä½å·¥ä½",charIndex:3006},{level:2,title:"ä¸ºä»ä¹æ²¡æ vue-fiber?",slug:"ä¸ºä»ä¹æ²¡æ-vue-fiber",normalizedTitle:"ä¸ºä»ä¹æ²¡æ vue-fiber?",charIndex:3883}],lastUpdated:"5/22/2025, 11:29:40 AM",lastUpdatedTimestamp:174788458e4,headersStr:"ReactElement ä¸ºä»ä¹ä¼åºç° React fiber æ¶æ æµè§å¨æ¸²æ æ¸²æå¸§ RequestIdleCallback Fiber Reconciler å¦ä½å·¥ä½ ä¸ºä»ä¹æ²¡æ vue-fiber?",content:'# React Fiber\n\næ¬æè½¬è½½èªï¼\n\n * ä½ ä¸ç¥éç React Virtual DOM\n * é¢è¯å®ï¼React ä¸ºä»ä¹éè¦ Fiberï¼\n * æReact fiberï¼ä¸ºä»ä¹ä¸éè¦Vue fiberå¢ï¼\n * react fiber å°åºæå¤ç»\n\n\n# ReactElement\n\næ¬è´¨ä¸ Virtual DOM å¯¹åºçæ¯ä¸ä¸ª JavaScript å¯¹è±¡ï¼é£ä¹ React æ¯å¦ä½éè¿ä¸ä¸ª js å¯¹è±¡å° Virtual DOM åçå® DOM å¯¹åºèµ·æ¥çå¢ï¼è¿éé¢çå³é®å°±æ¯ ReactElementã\n\nReactElement å³ react åç´ ï¼æè¿°äºæä»¬å¨å±å¹ä¸æçå°çåå®¹ï¼å®æ¯ææ React åºç¨çæå°ååãæ¯å¦ä¸é¢ç jsx ä»£ç ï¼\n\nconst element = <h1 id="hello">Hello, world</h1>\n\n// ä¸é¢çä»£ç ç»è¿ç¼è¯åçæ React Api, createElement æä¸ä¸ªåæ°ï¼æ ç­¾ï¼å±æ§ï¼åå®¹\nReact.createElement("h1", {\n  id: "hello"\n}, "Hello, world");\n\n// æ§è¡ React.createElement å½æ°ï¼ä¼è¿åç±»ä¼¼äºä¸é¢çä¸ä¸ª js å¯¹è±¡ï¼è¿ä¸ªå¯¹è±¡å°±æ¯æä»¬æè¯´ç React åç´ ï¼\nconst element = {\n  type: \'h1\',\n  props: {\n    id: \'hello\',\n    children: \'hello world\'\n  }\n}\n\n\nReact åç´ ä¹å¯ä»¥æ¯ç¨æ·èªå®ä¹çç»ä»¶ï¼\n\nfunction Button(props) {\n  return <button style={{ color }}>{props.children}</button>;\n}\n\nconst buttonComp = <Button color="red">ç¹å»æ</Button>\n\n// ä»¥ä¸ JSX ä»£ç ç»è¿ Babel ç¼è¯åçä»£ç å¦ä¸ï¼æ³¨æèªå®ä¹ç»ä»¶ä¸ºå¤§å\nReact.createElement("Button", {\n  color: "red"\n}, "ç¹å»æ");\n\n\n> å æ­¤æä»¬å°±å¯ä»¥è¯´ React åç´ å¶å®å°±æ¯ä¸ä¸ªæ®éç js å¯¹è±¡(plain object)ï¼è¿ä¸ªå¯¹è±¡ç¨æ¥æè¿°ä¸ä¸ª DOM èç¹åå¶å±æ§æèç»ä»¶çå®ä¾ï¼å½æä»¬å¨ JSX ä¸­ä½¿ç¨ Button ç»ä»¶æ¶ï¼å°±ç¸å½äºè°ç¨äºReact.createElement()æ¹æ³å¯¹ç»ä»¶è¿è¡äºå®ä¾åãç±äºç»ä»¶å¯ä»¥å¨å¶è¾åºä¸­å¼ç¨å¶ä»ç»ä»¶ï¼å½æä»¬å¨æå»ºå¤æé»è¾çç»ä»¶æ¶ï¼ä¼å½¢æä¸ä¸ªæ å½¢ç»æçç»ä»¶æ ï¼React ä¾¿ä¼ä¸å±å±çéå½çå°å¶è½¬åä¸º React åç´ ï¼å½éè§ type ä¸ºå¤§åçç±»åæ¶ï¼react å°±ä¼ç¥éè¿æ¯ä¸ä¸ªèªå®ä¹çç»ä»¶åç´ ï¼ç¶åæ§è¡ç»ä»¶ç render æ¹æ³æèæ§è¡è¯¥ç»ä»¶å½æ°ï¼æ ¹æ®æ¯ç±»ç»ä»¶æèå½æ°ç»ä»¶çä¸åï¼ï¼æç»è¿å ãæè¿° DOM çåç´ è¿è¡æ¸²æã\n\nç»¼ä¸ï¼react æ¯éè¿ jsx æè¿°çé¢çï¼å®ä¼è¢« babel æ tsc ç­ç¼è¯å·¥å·ç¼è¯æ render functionï¼ç¶åæ§è¡äº§ç vdom\n\n\n# ä¸ºä»ä¹ä¼åºç° React fiber æ¶æ\n\nä¸ä¸ª React ç»ä»¶çæ¸²æä¸»è¦ç»åä¸¤ä¸ªé¶æ®µï¼\n\n * è°åº¦é¶æ®µï¼Reconcilerï¼ï¼ç¨æ°çæ°æ®çæä¸æ£µæ°çæ ï¼ç¶åéè¿ Diff ç®æ³ï¼éåæ§çæ ï¼å¿«éæ¾åºéè¦æ´æ°çåç´ ï¼æ¾å°æ´æ°éåä¸­å»ï¼å¾å°æ°çæ´æ°éåã\n * æ¸²æé¶æ®µï¼Rendererï¼ï¼éåæ´æ°éåï¼éè¿è°ç¨å®¿ä¸»ç¯å¢ç APIï¼å®éæ´æ°æ¸²æå¯¹åºçåç´ ãå®¿ä¸»ç¯å¢å¦ DOMï¼Native ç­ã\n\nReact 15 Stack Reconciler ï¼æ åè°å¨ï¼æ¯éè¿éå½æ´æ°å­ç»ä»¶ ãç±äºéå½æ§è¡ï¼æä»¥æ´æ°ä¸æ¦å¼å§ï¼ä¸­éå°±æ æ³ä¸­æ­ãå½å±çº§å¾æ·±æ¶ï¼éå½æ´æ°æ¶é´è¶è¿äº 16msï¼ç¨æ·äº¤äºå°±ä¼å¡é¡¿ãå¨setStateåï¼react ä¼ç«å³å¼å§reconcilerè¿ç¨ï¼ä»ç¶èç¹ï¼Virtual DOMï¼å¼å§éåï¼ä»¥æ¾åºä¸åãå°ææçVirtual DOMéåå®æåï¼reconcileræè½ç»åºå½åéè¦ä¿®æ¹çå®DOMçä¿¡æ¯ï¼å¹¶ä¼ éç»rendererï¼è¿è¡æ¸²æï¼ç¶åå±å¹ä¸æä¼æ¾ç¤ºæ­¤æ¬¡æ´æ°åå®¹ãå¯¹äºç¹å«åºå¤§çDOMæ æ¥è¯´ï¼reconciliationè¿ç¨ä¼å¾é¿(x00ms)ï¼å¨è¿æé´ï¼ä¸»çº¿ç¨æ¯è¢« js å ç¨çï¼å æ­¤ä»»ä½äº¤äºãå¸å±ãæ¸²æé½ä¼åæ­¢ï¼ç»ç¨æ·çæè§å°±æ¯é¡µé¢è¢«å¡ä½äºã\n\n\n\nReact 16 åä»¥åä½¿ç¨çæ¯ Fiber Reconcilerï¼çº¤ç»´åè°å¨ï¼ï¼å°éå½ä¸­æ æ³ä¸­æ­çæ´æ°éæä¸ºè¿­ä»£ä¸­çå¼æ­¥å¯ä¸­æ­æ´æ°è¿ç¨ï¼è¿æ ·å°±è½å¤æ´å¥½çæ§å¶ç»ä»¶çæ¸²æã\n\nç®åçè§£å°±æ¯æä¸ä¸ªèæ¶é¿çä»»å¡åè§£ä¸ºä¸ä¸ªä¸ªçå·¥ä½ååï¼æ¯ä¸ªå·¥ä½ååè¿è¡æ¶é´å¾ç­ï¼ä¸è¿æ»æ¶é´ä¾ç¶å¾é¿ï¼ãå¨æ§è¡å·¥ä½ååä¹åï¼ç±æµè§å¨å¤æ­æ¯å¦æç©ºä½æ¶é´æ§è¡ï¼ææ¶é´å°±æ§è¡å·¥ä½ååï¼æ§è¡å®æåï¼ç»§ç»­å¤æ­æ¯å¦è¿æç©ºé²æ¶é´ãæ²¡ææ¶é´å°±ç»æ­¢æ§è¡è®©æµè§å¨æ§è¡å¶ä»ä»»å¡ï¼å¦ GUI çº¿ç¨ç­ï¼ãç­å°ä¸ä¸å¸§æ§è¡æ¶å¤æ­æ¯å¦æç©ºä½æ¶é´ï¼ææ¶é´å°±ä»ç»æ­¢çå°æ¹ç»§ç»­æ§è¡å·¥ä½åå,ä¸ç´éå¤å°ä»»å¡ç»æã\n\n\n\n\n# æµè§å¨æ¸²æ\n\nä»ç» Fiber åï¼æä»¬åäºè§£ä¸æµè§å¨æ¸²æçä¸äºæ¦å¿µã\n\n\n# æ¸²æå¸§\n\næä»¬ç¥éï¼å¨æµè§å¨ä¸­ï¼é¡µé¢æ¯ä¸å¸§ä¸å¸§ç»å¶åºæ¥çï¼æ¸²æçå¸§çä¸è®¾å¤çå·æ°çä¿æä¸è´ãä¸è¬æåµä¸ï¼è®¾å¤çå±å¹å·æ°çä¸º 1s 60æ¬¡ï¼å½æ¯ç§åç»å¶çå¸§æ°ï¼FPSï¼è¶è¿60æ¶ï¼é¡µé¢æ¸²ææ¯æµççï¼èå½ FPS å°äº60æ¶ï¼ä¼åºç°ä¸å®ç¨åº¦çå¡é¡¿ç°è±¡ãä¸é¢æ¥çå®æ´çä¸å¸§ä¸­ï¼å·ä½åäºåªäºï¼\n\n\n\n 1. é¦åéè¦å¤çè¾å¥äºä»¶ï¼è½å¤è®©ç¨æ·å¾å°ææ©çåé¦\n 2. æ¥ä¸æ¥æ¯å¤çå®æ¶å¨ï¼éè¦æ£æ¥å®æ¶å¨æ¯å¦å°æ¶é´ï¼å¹¶æ§è¡å¯¹åºçåè°\n 3. æ¥ä¸æ¥å¤ç Begin Frameï¼å¼å§å¸§ï¼ï¼å³æ¯ä¸å¸§çäºä»¶ï¼åæ¬ window.resizeãscrollãmedia query change ç­\n 4. æ¥ä¸æ¥æ§è¡è¯·æ±å¨ç»å¸§ requestAnimationFrameï¼rAFï¼ï¼å³å¨æ¯æ¬¡ç»å¶ä¹åï¼ä¼æ§è¡ rAF åè°\n 5. ç´§æ¥çè¿è¡ Layout æä½ï¼åæ¬è®¡ç®å¸å±åæ´æ°å¸å±ï¼å³è¿ä¸ªåç´ çæ ·å¼æ¯ææ ·çï¼å®åºè¯¥å¨é¡µé¢å¦ä½å±ç¤º\n 6. æ¥çè¿è¡ Paint æä½ï¼å¾å°æ ä¸­æ¯ä¸ªèç¹çå°ºå¯¸ä¸ä½ç½®ç­ä¿¡æ¯ï¼æµè§å¨éå¯¹æ¯ä¸ªåç´ è¿è¡åå®¹å¡«å\n\nå°è¿æ¶ä»¥ä¸çå­ä¸ªé¶æ®µé½å·²ç»å®æäºï¼æ¥ä¸æ¥å¤äºç©ºé²é¶æ®µï¼Idle Peroidï¼ï¼å¯ä»¥å¨è¿æ¶æ§è¡requestIdleCallbackéæ³¨åçä»»å¡ï¼å®å°±æ¯ React Fiber ä»»å¡è°åº¦å®ç°çåºç¡ï¼\n\n\n# RequestIdleCallback\n\nRequestIdleCallback æ¯ react Fiber å®ç°çåºç¡ api ãè¯¥æ¹æ³å°å¨æµè§å¨çç©ºé²æ¶æ®µåè°ç¨çå½æ°æéï¼ä½¿å¼åèå¨ä¸»äºä»¶å¾ªç¯ä¸æ§è¡åå°åä½ä¼åçº§çå·¥ä½ï¼èä¸å½±åå»¶è¿å³é®äºä»¶ï¼å¦å¨ç»åè¾å¥ååºãæ­£å¸¸å¸§ä»»å¡å®æåæ²¡è¶è¿16msï¼è¯´ææå¤ä½çç©ºé²æ¶é´ï¼æ­¤æ¶å°±ä¼æ§è¡requestIdleCallbackéæ³¨åçä»»å¡ã\n\nå¯ä»¥åèä¸å¾æ¥çè§£requestIdleCallbackå¨æ¯å¸§ä¸­çè°ç¨ï¼\n\n\n\n\n# Fiber Reconciler å¦ä½å·¥ä½\n\nä¸ºäºå®ç°æ¸è¿æ¸²æçç®çï¼Fiber æ¶æä¸­å¼å¥äºæ°çæ°æ®ç»æï¼Fiber Nodeï¼Fiber Node Tree æ ¹æ® React Element Tree çæï¼å¹¶ç¨æ¥é©±å¨çå® DOM çæ¸²æã\n\nFiber èç¹çå¤§è´ç»æï¼\n\n{\n    tag: TypeOfWork, // æ è¯ fiber ç±»å\n    type: \'div\', // å fiber ç¸å³çç»ä»¶ç±»å\n    return: Fiber | null, // ç¶èç¹\n    child: Fiber | null, // å­èç¹\n    sibling: Fiber | null, // åçº§èç¹\n    alternate: Fiber | null, // diff çååè®°å½å¨è¿ä¸ªèç¹ä¸\n    ...\n}\n\n\nåç¼å­ Fiber Tree æ¯ React Fiber æ¶æä¸­çæ ¸å¿æºå¶ï¼ç¨äºå®ç°é«æç UI æ´æ°ä¸æ¸²æãå®çæ ¸å¿ææ³æ¯éè¿ä¸¤ä¸ªäº¤æ¿ç Fiber æ ï¼å½åæ åå¾æ´æ°æ ï¼å®ç°æ é»å¡æ¸²æï¼ç¡®ä¿ç¨æ·äº¤äºçæµçæ§ã\n\n 1. å½åæ ï¼Current Treeï¼ï¼ å¯¹åºå±å¹ä¸å½åæ¾ç¤ºç UI ç»æï¼æ¯ä¸ª Fiber èç¹ï¼ç»ä»¶ï¼ä¿å­äºå½åç¶æçå¼ç¨ã\n\n 2. å¾æ´æ°æ ï¼WorkInProgress Treeï¼ï¼ åå°æå»ºçæ°æ ï¼ç¨äºæè¿°ä¸ä¸æ¬¡æ¸²æç UI ç»æãå½æå»ºå®æä¸æ æ´é«ä¼åçº§ä»»å¡æ¶ï¼ä¼æ¿æ¢å½åæ ã\n\n 3. äº¤æ¿æºå¶ï¼ æ¯æ¬¡æ´æ°æ¶ï¼React å¤ç¨å½åæ ç Fiber èç¹çæå¾æ´æ°æ ï¼æç»éè¿åæ¢æ æéå®ææ´æ°ï¼é¿åç´æ¥æä½å½åæ å¯¼è´çæ¸²æé»å¡ã\n\nå³é®ä¼å¿\n\n 1. æ é»å¡æ¸²æï¼ æå»ºå¾æ´æ°æ çè¿ç¨å¯ä¸­æ­ï¼æ¶é´åçï¼ï¼æµè§å¨å¯ä¼åå¤çé«ä¼åçº§ä»»å¡ï¼å¦ç¨æ·è¾å¥ï¼ã\n\n 2. é«æå¤ç¨ï¼ éè¿å¤ç¨ Fiber èç¹åå°åå­åéï¼æåæ§è½ï¼å¦ key ç¸åçèç¹ä»æ´æ°å±æ§èééå»ºï¼ã\n\n 3. ä¸è´æ§ä¿è¯ï¼ æäº¤é¶æ®µä¸æ¬¡æ§æäº¤ææåæ´ï¼é¿åæ¸²æä¸­é´ç¶æå¯¼è´ç UI ä¸ä¸è´ã\n\n\n# ä¸ºä»ä¹æ²¡æ vue-fiber?\n\n * å¨reactä¸­ï¼ç»ä»¶çç¶ææ¯ä¸è½è¢«ä¿®æ¹çï¼setStateæ²¡æä¿®æ¹åæ¥é£ååå­ä¸­çåéï¼èæ¯å»æ°å¼è¾ä¸ååå­ï¼\n * vueåæ¯ç´æ¥ä¿®æ¹ä¿å­ç¶æçé£ååå§åå­ã\n\næä»¥ç»å¸¸è½çå°reactç¸å³çæç« éç»å¸¸ä¼åºç°ä¸ä¸ªè¯"immutable"ï¼ç¿»è¯è¿æ¥å°±æ¯ä¸å¯åçãæ°æ®ä¿®æ¹äºï¼æ¥ä¸æ¥è¦è§£å³è§å¾çæ´æ°ï¼\n\n> reactä¸­ï¼è°ç¨setStateæ¹æ³åï¼ä¼èªé¡¶åä¸éæ°æ¸²æç»ä»¶ï¼èªé¡¶åä¸çå«ä¹æ¯ï¼è¯¥ç»ä»¶ä»¥åå®çå­ç»ä»¶å¨é¨éè¦æ¸²æï¼\n> \n> è vue ä½¿ç¨ Object.definePropertyï¼vue@3è¿ç§»å°äºProxyï¼å¯¹æ°æ®çè®¾ç½®ï¼setterï¼åè·åï¼getterï¼åäºå«æï¼ä¹å°±æ¯è¯´ï¼vueè½åç¡®ç¥éè§å¾æ¨¡çä¸­åªä¸åç¨å°äºè¿ä¸ªæ°æ®ï¼å¹¶ä¸å¨è¿ä¸ªæ°æ®ä¿®æ¹æ¶ï¼åè¯è¿ä¸ªè§å¾ï¼ä½ éè¦éæ°æ¸²æäºã\n\næä»¥å½ä¸ä¸ªæ°æ®æ¹åï¼reactçç»ä»¶æ¸²ææ¯å¾æ¶èæ§è½çââç¶ç»ä»¶çç¶ææ´æ°äºï¼ææçå­ç»ä»¶å¾è·çä¸èµ·æ¸²æï¼å®ä¸è½åvueä¸æ ·ï¼ç²¾ç¡®å°å½åç»ä»¶çç²åº¦ã\n\n\n\nreact fiberæ¯å¨å¼¥è¡¥æ´æ°æ¶âæ èâå·æ°ï¼ä¸å¤ç²¾ç¡®å¸¦æ¥çç¼ºé·ãè¿æ¯ä¸æ¯è½è¯´æreactæ§è½æ´å·®å¢ï¼\n\nå¹¶ä¸æ¯ãå­°ä¼å­°å£æ¯ä¸ä¸ªå¾æäºè®®çè¯é¢ï¼å¨æ­¤ä¸åè¯ä»·ãå ä¸ºvueå®ç°ç²¾åæ´æ°ä¹æ¯æä»£ä»·çï¼ä¸æ¹é¢æ¯éè¦ç»æ¯ä¸ä¸ªç»ä»¶éç½®ä¸ä¸ªâçè§å¨âï¼ç®¡ççè§å¾çä¾èµæ¶éåæ°æ®æ´æ°æ¶çåå¸éç¥ï¼è¿å¯¹æ§è½åæ ·æ¯ææ¶èçï¼å¦ä¸æ¹é¢vueè½å®ç°ä¾èµæ¶éå¾çäºå®çæ¨¡çè¯­æ³ï¼å®ç°éæç¼è¯ï¼è¿æ¯ä½¿ç¨æ´çµæ´»ç JSX è¯­æ³ç react åä¸å°çã\n\nå¨react fiberåºç°ä¹åï¼reactä¹æä¾äºPureComponentãshouldComponentUpdateãuseMemoãuseCallbackç­æ¹æ³ç»æä»¬ï¼æ¥å£°æåªäºæ¯ä¸éè¦è¿å¸¦æ´æ°å­ç»ä»¶ã',normalizedContent:'# react fiber\n\næ¬æè½¬è½½èªï¼\n\n * ä½ ä¸ç¥éç react virtual dom\n * é¢è¯å®ï¼react ä¸ºä»ä¹éè¦ fiberï¼\n * æreact fiberï¼ä¸ºä»ä¹ä¸éè¦vue fiberå¢ï¼\n * react fiber å°åºæå¤ç»\n\n\n# reactelement\n\næ¬è´¨ä¸ virtual dom å¯¹åºçæ¯ä¸ä¸ª javascript å¯¹è±¡ï¼é£ä¹ react æ¯å¦ä½éè¿ä¸ä¸ª js å¯¹è±¡å° virtual dom åçå® dom å¯¹åºèµ·æ¥çå¢ï¼è¿éé¢çå³é®å°±æ¯ reactelementã\n\nreactelement å³ react åç´ ï¼æè¿°äºæä»¬å¨å±å¹ä¸æçå°çåå®¹ï¼å®æ¯ææ react åºç¨çæå°ååãæ¯å¦ä¸é¢ç jsx ä»£ç ï¼\n\nconst element = <h1 id="hello">hello, world</h1>\n\n// ä¸é¢çä»£ç ç»è¿ç¼è¯åçæ react api, createelement æä¸ä¸ªåæ°ï¼æ ç­¾ï¼å±æ§ï¼åå®¹\nreact.createelement("h1", {\n  id: "hello"\n}, "hello, world");\n\n// æ§è¡ react.createelement å½æ°ï¼ä¼è¿åç±»ä¼¼äºä¸é¢çä¸ä¸ª js å¯¹è±¡ï¼è¿ä¸ªå¯¹è±¡å°±æ¯æä»¬æè¯´ç react åç´ ï¼\nconst element = {\n  type: \'h1\',\n  props: {\n    id: \'hello\',\n    children: \'hello world\'\n  }\n}\n\n\nreact åç´ ä¹å¯ä»¥æ¯ç¨æ·èªå®ä¹çç»ä»¶ï¼\n\nfunction button(props) {\n  return <button style={{ color }}>{props.children}</button>;\n}\n\nconst buttoncomp = <button color="red">ç¹å»æ</button>\n\n// ä»¥ä¸ jsx ä»£ç ç»è¿ babel ç¼è¯åçä»£ç å¦ä¸ï¼æ³¨æèªå®ä¹ç»ä»¶ä¸ºå¤§å\nreact.createelement("button", {\n  color: "red"\n}, "ç¹å»æ");\n\n\n> å æ­¤æä»¬å°±å¯ä»¥è¯´ react åç´ å¶å®å°±æ¯ä¸ä¸ªæ®éç js å¯¹è±¡(plain object)ï¼è¿ä¸ªå¯¹è±¡ç¨æ¥æè¿°ä¸ä¸ª dom èç¹åå¶å±æ§æèç»ä»¶çå®ä¾ï¼å½æä»¬å¨ jsx ä¸­ä½¿ç¨ button ç»ä»¶æ¶ï¼å°±ç¸å½äºè°ç¨äºreact.createelement()æ¹æ³å¯¹ç»ä»¶è¿è¡äºå®ä¾åãç±äºç»ä»¶å¯ä»¥å¨å¶è¾åºä¸­å¼ç¨å¶ä»ç»ä»¶ï¼å½æä»¬å¨æå»ºå¤æé»è¾çç»ä»¶æ¶ï¼ä¼å½¢æä¸ä¸ªæ å½¢ç»æçç»ä»¶æ ï¼react ä¾¿ä¼ä¸å±å±çéå½çå°å¶è½¬åä¸º react åç´ ï¼å½éè§ type ä¸ºå¤§åçç±»åæ¶ï¼react å°±ä¼ç¥éè¿æ¯ä¸ä¸ªèªå®ä¹çç»ä»¶åç´ ï¼ç¶åæ§è¡ç»ä»¶ç render æ¹æ³æèæ§è¡è¯¥ç»ä»¶å½æ°ï¼æ ¹æ®æ¯ç±»ç»ä»¶æèå½æ°ç»ä»¶çä¸åï¼ï¼æç»è¿å ãæè¿° dom çåç´ è¿è¡æ¸²æã\n\nç»¼ä¸ï¼react æ¯éè¿ jsx æè¿°çé¢çï¼å®ä¼è¢« babel æ tsc ç­ç¼è¯å·¥å·ç¼è¯æ render functionï¼ç¶åæ§è¡äº§ç vdom\n\n\n# ä¸ºä»ä¹ä¼åºç° react fiber æ¶æ\n\nä¸ä¸ª react ç»ä»¶çæ¸²æä¸»è¦ç»åä¸¤ä¸ªé¶æ®µï¼\n\n * è°åº¦é¶æ®µï¼reconcilerï¼ï¼ç¨æ°çæ°æ®çæä¸æ£µæ°çæ ï¼ç¶åéè¿ diff ç®æ³ï¼éåæ§çæ ï¼å¿«éæ¾åºéè¦æ´æ°çåç´ ï¼æ¾å°æ´æ°éåä¸­å»ï¼å¾å°æ°çæ´æ°éåã\n * æ¸²æé¶æ®µï¼rendererï¼ï¼éåæ´æ°éåï¼éè¿è°ç¨å®¿ä¸»ç¯å¢ç apiï¼å®éæ´æ°æ¸²æå¯¹åºçåç´ ãå®¿ä¸»ç¯å¢å¦ domï¼native ç­ã\n\nreact 15 stack reconciler ï¼æ åè°å¨ï¼æ¯éè¿éå½æ´æ°å­ç»ä»¶ ãç±äºéå½æ§è¡ï¼æä»¥æ´æ°ä¸æ¦å¼å§ï¼ä¸­éå°±æ æ³ä¸­æ­ãå½å±çº§å¾æ·±æ¶ï¼éå½æ´æ°æ¶é´è¶è¿äº 16msï¼ç¨æ·äº¤äºå°±ä¼å¡é¡¿ãå¨setstateåï¼react ä¼ç«å³å¼å§reconcilerè¿ç¨ï¼ä»ç¶èç¹ï¼virtual domï¼å¼å§éåï¼ä»¥æ¾åºä¸åãå°ææçvirtual doméåå®æåï¼reconcileræè½ç»åºå½åéè¦ä¿®æ¹çå®domçä¿¡æ¯ï¼å¹¶ä¼ éç»rendererï¼è¿è¡æ¸²æï¼ç¶åå±å¹ä¸æä¼æ¾ç¤ºæ­¤æ¬¡æ´æ°åå®¹ãå¯¹äºç¹å«åºå¤§çdomæ æ¥è¯´ï¼reconciliationè¿ç¨ä¼å¾é¿(x00ms)ï¼å¨è¿æé´ï¼ä¸»çº¿ç¨æ¯è¢« js å ç¨çï¼å æ­¤ä»»ä½äº¤äºãå¸å±ãæ¸²æé½ä¼åæ­¢ï¼ç»ç¨æ·çæè§å°±æ¯é¡µé¢è¢«å¡ä½äºã\n\n\n\nreact 16 åä»¥åä½¿ç¨çæ¯ fiber reconcilerï¼çº¤ç»´åè°å¨ï¼ï¼å°éå½ä¸­æ æ³ä¸­æ­çæ´æ°éæä¸ºè¿­ä»£ä¸­çå¼æ­¥å¯ä¸­æ­æ´æ°è¿ç¨ï¼è¿æ ·å°±è½å¤æ´å¥½çæ§å¶ç»ä»¶çæ¸²æã\n\nç®åçè§£å°±æ¯æä¸ä¸ªèæ¶é¿çä»»å¡åè§£ä¸ºä¸ä¸ªä¸ªçå·¥ä½ååï¼æ¯ä¸ªå·¥ä½ååè¿è¡æ¶é´å¾ç­ï¼ä¸è¿æ»æ¶é´ä¾ç¶å¾é¿ï¼ãå¨æ§è¡å·¥ä½ååä¹åï¼ç±æµè§å¨å¤æ­æ¯å¦æç©ºä½æ¶é´æ§è¡ï¼ææ¶é´å°±æ§è¡å·¥ä½ååï¼æ§è¡å®æåï¼ç»§ç»­å¤æ­æ¯å¦è¿æç©ºé²æ¶é´ãæ²¡ææ¶é´å°±ç»æ­¢æ§è¡è®©æµè§å¨æ§è¡å¶ä»ä»»å¡ï¼å¦ gui çº¿ç¨ç­ï¼ãç­å°ä¸ä¸å¸§æ§è¡æ¶å¤æ­æ¯å¦æç©ºä½æ¶é´ï¼ææ¶é´å°±ä»ç»æ­¢çå°æ¹ç»§ç»­æ§è¡å·¥ä½åå,ä¸ç´éå¤å°ä»»å¡ç»æã\n\n\n\n\n# æµè§å¨æ¸²æ\n\nä»ç» fiber åï¼æä»¬åäºè§£ä¸æµè§å¨æ¸²æçä¸äºæ¦å¿µã\n\n\n# æ¸²æå¸§\n\næä»¬ç¥éï¼å¨æµè§å¨ä¸­ï¼é¡µé¢æ¯ä¸å¸§ä¸å¸§ç»å¶åºæ¥çï¼æ¸²æçå¸§çä¸è®¾å¤çå·æ°çä¿æä¸è´ãä¸è¬æåµä¸ï¼è®¾å¤çå±å¹å·æ°çä¸º 1s 60æ¬¡ï¼å½æ¯ç§åç»å¶çå¸§æ°ï¼fpsï¼è¶è¿60æ¶ï¼é¡µé¢æ¸²ææ¯æµççï¼èå½ fps å°äº60æ¶ï¼ä¼åºç°ä¸å®ç¨åº¦çå¡é¡¿ç°è±¡ãä¸é¢æ¥çå®æ´çä¸å¸§ä¸­ï¼å·ä½åäºåªäºï¼\n\n\n\n 1. é¦åéè¦å¤çè¾å¥äºä»¶ï¼è½å¤è®©ç¨æ·å¾å°ææ©çåé¦\n 2. æ¥ä¸æ¥æ¯å¤çå®æ¶å¨ï¼éè¦æ£æ¥å®æ¶å¨æ¯å¦å°æ¶é´ï¼å¹¶æ§è¡å¯¹åºçåè°\n 3. æ¥ä¸æ¥å¤ç begin frameï¼å¼å§å¸§ï¼ï¼å³æ¯ä¸å¸§çäºä»¶ï¼åæ¬ window.resizeãscrollãmedia query change ç­\n 4. æ¥ä¸æ¥æ§è¡è¯·æ±å¨ç»å¸§ requestanimationframeï¼rafï¼ï¼å³å¨æ¯æ¬¡ç»å¶ä¹åï¼ä¼æ§è¡ raf åè°\n 5. ç´§æ¥çè¿è¡ layout æä½ï¼åæ¬è®¡ç®å¸å±åæ´æ°å¸å±ï¼å³è¿ä¸ªåç´ çæ ·å¼æ¯ææ ·çï¼å®åºè¯¥å¨é¡µé¢å¦ä½å±ç¤º\n 6. æ¥çè¿è¡ paint æä½ï¼å¾å°æ ä¸­æ¯ä¸ªèç¹çå°ºå¯¸ä¸ä½ç½®ç­ä¿¡æ¯ï¼æµè§å¨éå¯¹æ¯ä¸ªåç´ è¿è¡åå®¹å¡«å\n\nå°è¿æ¶ä»¥ä¸çå­ä¸ªé¶æ®µé½å·²ç»å®æäºï¼æ¥ä¸æ¥å¤äºç©ºé²é¶æ®µï¼idle peroidï¼ï¼å¯ä»¥å¨è¿æ¶æ§è¡requestidlecallbackéæ³¨åçä»»å¡ï¼å®å°±æ¯ react fiber ä»»å¡è°åº¦å®ç°çåºç¡ï¼\n\n\n# requestidlecallback\n\nrequestidlecallback æ¯ react fiber å®ç°çåºç¡ api ãè¯¥æ¹æ³å°å¨æµè§å¨çç©ºé²æ¶æ®µåè°ç¨çå½æ°æéï¼ä½¿å¼åèå¨ä¸»äºä»¶å¾ªç¯ä¸æ§è¡åå°åä½ä¼åçº§çå·¥ä½ï¼èä¸å½±åå»¶è¿å³é®äºä»¶ï¼å¦å¨ç»åè¾å¥ååºãæ­£å¸¸å¸§ä»»å¡å®æåæ²¡è¶è¿16msï¼è¯´ææå¤ä½çç©ºé²æ¶é´ï¼æ­¤æ¶å°±ä¼æ§è¡requestidlecallbackéæ³¨åçä»»å¡ã\n\nå¯ä»¥åèä¸å¾æ¥çè§£requestidlecallbackå¨æ¯å¸§ä¸­çè°ç¨ï¼\n\n\n\n\n# fiber reconciler å¦ä½å·¥ä½\n\nä¸ºäºå®ç°æ¸è¿æ¸²æçç®çï¼fiber æ¶æä¸­å¼å¥äºæ°çæ°æ®ç»æï¼fiber nodeï¼fiber node tree æ ¹æ® react element tree çæï¼å¹¶ç¨æ¥é©±å¨çå® dom çæ¸²æã\n\nfiber èç¹çå¤§è´ç»æï¼\n\n{\n    tag: typeofwork, // æ è¯ fiber ç±»å\n    type: \'div\', // å fiber ç¸å³çç»ä»¶ç±»å\n    return: fiber | null, // ç¶èç¹\n    child: fiber | null, // å­èç¹\n    sibling: fiber | null, // åçº§èç¹\n    alternate: fiber | null, // diff çååè®°å½å¨è¿ä¸ªèç¹ä¸\n    ...\n}\n\n\nåç¼å­ fiber tree æ¯ react fiber æ¶æä¸­çæ ¸å¿æºå¶ï¼ç¨äºå®ç°é«æç ui æ´æ°ä¸æ¸²æãå®çæ ¸å¿ææ³æ¯éè¿ä¸¤ä¸ªäº¤æ¿ç fiber æ ï¼å½åæ åå¾æ´æ°æ ï¼å®ç°æ é»å¡æ¸²æï¼ç¡®ä¿ç¨æ·äº¤äºçæµçæ§ã\n\n 1. å½åæ ï¼current treeï¼ï¼ å¯¹åºå±å¹ä¸å½åæ¾ç¤ºç ui ç»æï¼æ¯ä¸ª fiber èç¹ï¼ç»ä»¶ï¼ä¿å­äºå½åç¶æçå¼ç¨ã\n\n 2. å¾æ´æ°æ ï¼workinprogress treeï¼ï¼ åå°æå»ºçæ°æ ï¼ç¨äºæè¿°ä¸ä¸æ¬¡æ¸²æç ui ç»æãå½æå»ºå®æä¸æ æ´é«ä¼åçº§ä»»å¡æ¶ï¼ä¼æ¿æ¢å½åæ ã\n\n 3. äº¤æ¿æºå¶ï¼ æ¯æ¬¡æ´æ°æ¶ï¼react å¤ç¨å½åæ ç fiber èç¹çæå¾æ´æ°æ ï¼æç»éè¿åæ¢æ æéå®ææ´æ°ï¼é¿åç´æ¥æä½å½åæ å¯¼è´çæ¸²æé»å¡ã\n\nå³é®ä¼å¿\n\n 1. æ é»å¡æ¸²æï¼ æå»ºå¾æ´æ°æ çè¿ç¨å¯ä¸­æ­ï¼æ¶é´åçï¼ï¼æµè§å¨å¯ä¼åå¤çé«ä¼åçº§ä»»å¡ï¼å¦ç¨æ·è¾å¥ï¼ã\n\n 2. é«æå¤ç¨ï¼ éè¿å¤ç¨ fiber èç¹åå°åå­åéï¼æåæ§è½ï¼å¦ key ç¸åçèç¹ä»æ´æ°å±æ§èééå»ºï¼ã\n\n 3. ä¸è´æ§ä¿è¯ï¼ æäº¤é¶æ®µä¸æ¬¡æ§æäº¤ææåæ´ï¼é¿åæ¸²æä¸­é´ç¶æå¯¼è´ç ui ä¸ä¸è´ã\n\n\n# ä¸ºä»ä¹æ²¡æ vue-fiber?\n\n * å¨reactä¸­ï¼ç»ä»¶çç¶ææ¯ä¸è½è¢«ä¿®æ¹çï¼setstateæ²¡æä¿®æ¹åæ¥é£ååå­ä¸­çåéï¼èæ¯å»æ°å¼è¾ä¸ååå­ï¼\n * vueåæ¯ç´æ¥ä¿®æ¹ä¿å­ç¶æçé£ååå§åå­ã\n\næä»¥ç»å¸¸è½çå°reactç¸å³çæç« éç»å¸¸ä¼åºç°ä¸ä¸ªè¯"immutable"ï¼ç¿»è¯è¿æ¥å°±æ¯ä¸å¯åçãæ°æ®ä¿®æ¹äºï¼æ¥ä¸æ¥è¦è§£å³è§å¾çæ´æ°ï¼\n\n> reactä¸­ï¼è°ç¨setstateæ¹æ³åï¼ä¼èªé¡¶åä¸éæ°æ¸²æç»ä»¶ï¼èªé¡¶åä¸çå«ä¹æ¯ï¼è¯¥ç»ä»¶ä»¥åå®çå­ç»ä»¶å¨é¨éè¦æ¸²æï¼\n> \n> è vue ä½¿ç¨ object.definepropertyï¼vue@3è¿ç§»å°äºproxyï¼å¯¹æ°æ®çè®¾ç½®ï¼setterï¼åè·åï¼getterï¼åäºå«æï¼ä¹å°±æ¯è¯´ï¼vueè½åç¡®ç¥éè§å¾æ¨¡çä¸­åªä¸åç¨å°äºè¿ä¸ªæ°æ®ï¼å¹¶ä¸å¨è¿ä¸ªæ°æ®ä¿®æ¹æ¶ï¼åè¯è¿ä¸ªè§å¾ï¼ä½ éè¦éæ°æ¸²æäºã\n\næä»¥å½ä¸ä¸ªæ°æ®æ¹åï¼reactçç»ä»¶æ¸²ææ¯å¾æ¶èæ§è½çââç¶ç»ä»¶çç¶ææ´æ°äºï¼ææçå­ç»ä»¶å¾è·çä¸èµ·æ¸²æï¼å®ä¸è½åvueä¸æ ·ï¼ç²¾ç¡®å°å½åç»ä»¶çç²åº¦ã\n\n\n\nreact fiberæ¯å¨å¼¥è¡¥æ´æ°æ¶âæ èâå·æ°ï¼ä¸å¤ç²¾ç¡®å¸¦æ¥çç¼ºé·ãè¿æ¯ä¸æ¯è½è¯´æreactæ§è½æ´å·®å¢ï¼\n\nå¹¶ä¸æ¯ãå­°ä¼å­°å£æ¯ä¸ä¸ªå¾æäºè®®çè¯é¢ï¼å¨æ­¤ä¸åè¯ä»·ãå ä¸ºvueå®ç°ç²¾åæ´æ°ä¹æ¯æä»£ä»·çï¼ä¸æ¹é¢æ¯éè¦ç»æ¯ä¸ä¸ªç»ä»¶éç½®ä¸ä¸ªâçè§å¨âï¼ç®¡ççè§å¾çä¾èµæ¶éåæ°æ®æ´æ°æ¶çåå¸éç¥ï¼è¿å¯¹æ§è½åæ ·æ¯ææ¶èçï¼å¦ä¸æ¹é¢vueè½å®ç°ä¾èµæ¶éå¾çäºå®çæ¨¡çè¯­æ³ï¼å®ç°éæç¼è¯ï¼è¿æ¯ä½¿ç¨æ´çµæ´»ç jsx è¯­æ³ç react åä¸å°çã\n\nå¨react fiberåºç°ä¹åï¼reactä¹æä¾äºpurecomponentãshouldcomponentupdateãusememoãusecallbackç­æ¹æ³ç»æä»¬ï¼æ¥å£°æåªäºæ¯ä¸éè¦è¿å¸¦æ´æ°å­ç»ä»¶ã',charsets:{cjk:!0}},{title:"Reactåºç¡",frontmatter:{title:"Reactåºç¡",date:"2021-06-17T11:27:54.000Z",categories:"React"},regularPath:"/react/react-1.html",relativePath:"react/react-1.md",key:"v-1a9ac042",path:"/react/react-1.html",headers:[{level:3,title:"1. React ä»ç»",slug:"_1-react-ä»ç»",normalizedTitle:"1. react ä»ç»",charIndex:2},{level:3,title:"2. JSX è¯­æ³",slug:"_2-jsx-è¯­æ³",normalizedTitle:"2. jsx è¯­æ³",charIndex:110},{level:3,title:"3. ç»ä»¶",slug:"_3-ç»ä»¶",normalizedTitle:"3. ç»ä»¶",charIndex:6091},{level:3,title:"4. è¡¨å",slug:"_4-è¡¨å",normalizedTitle:"4. è¡¨å",charIndex:10483},{level:3,title:"5. è·¯ç±",slug:"_5-è·¯ç±",normalizedTitle:"5. è·¯ç±",charIndex:11306}],lastUpdated:"6/26/2023, 7:15:43 PM",lastUpdatedTimestamp:1687778143e3,headersStr:"1. React ä»ç» 2. JSX è¯­æ³ 3. ç»ä»¶ 4. è¡¨å 5. è·¯ç±",content:'# 1. React ä»ç»\n\nReact æ¯ä¸ä¸ªç¨äºæå»ºç¨æ·çé¢ç JavaScript åºï¼å®åªè´è´£åºç¨çè§å¾å±ï¼å¸®å©å¼åäººåæå»ºå¿«éä¸äº¤äºå¼ç web åºç¨ç¨åºã\n\nReact ä½¿ç¨ç»ä»¶çæ¹å¼æå»ºç¨æ·çé¢ã\n\n\n# 2. JSX è¯­æ³\n\nå®æ¯ä¸ç§ JavaScript è¯­æ³çæ©å±ï¼React ä½¿ç¨å®æ¥æè¿°ç¨æ·çé¢é¿æä»ä¹æ ·å­ãå¨ React ä»£ç æ§è¡ä¹åï¼Babel ä¼å¯¹å° JSX ç¼è¯ä¸º React APIãReact.createElementä¼è¿åVirtual DOMï¼ç¶ååè½¬æ¢ä¸ºçå®DOM\n\n\x3c!-- JSX --\x3e\n<div className="container">\n  <h3>Hello React</h3>\n  <p>React is great </p>\n</div>\n\n\n// Babel ä¼å¯¹å° JSX ç¼è¯ä¸º React API\nReact.createElement(\n  "div",\n  {\n    className: "container"\n  },\n  React.createElement("h3", null, "Hello React"), // ä¸ä¸ªåæ°ï¼æ ç­¾ï¼å±æ§ï¼åå®¹\n  React.createElement("p", null, "React is great")\n);\n\n\n// è¿åå¯¹åºç Virtual DOMï¼ä¸ä¸ªå±æ§type, props, children\n{\n  type: "div",\n  props: { className: "container" },\n  children: [\n    {\n      type: "h3",\n      props: null,\n      children: [\n        {\n          type: "text",\n          props: {\n            textContent: "Hello React"\n          }\n        }\n      ]\n    },\n    {\n      type: "p",\n      props: null,\n      children: [\n        {\n          type: "text",\n          props: {\n            textContent: "React is great"\n          }\n        }\n      ]\n    }\n  ]\n}\n\n\nä»ä¸¤ç§è¯­æ³å¯¹æ¯æ¥çï¼JSX è¯­æ³çåºç°æ¯ä¸ºäºè®© React å¼åäººåç¼åç¨æ·çé¢ä»£ç æ´å è½»æ¾ã\n\nBabel REPL\n\n# 2.1 å¨ JSX ä¸­ä½¿ç¨è¡¨è¾¾å¼\n\nconst user = {\n  firstName: \'Harper\',\n  lastName: \'Perez\'\n}\nfunction formatName(user) {\n  return user.firstName + \' \' + user.lastName;\n}\nconst element = <h1>Hello, {formatName(user)}!</h1>;\n\n\nJSX æ¬èº«å¶å®ä¹æ¯ä¸ç§è¡¨è¾¾å¼ï¼å°å®èµå¼ç»åéï¼å½ä½åæ°ä¼ å¥ï¼ä½ä¸ºè¿åå¼é½å¯ä»¥ã\n\nfunction getGreeting(user) {\n  if (user) {\n    return <h1>Hello, {formatName(user)}!</h1>;\n  }\n  return <h1>Hello, Stranger.</h1>;\n}\n\n\n# 2.2 å±æ§\n\nå¦æå±æ§å¼ä¸ºå­ç¬¦ä¸²ç±»åï¼éè¦å å¼å·ï¼å±æ§åç§°æ¨èéç¨é©¼å³°å¼å½åæ³ã\n\nconst element = <div greeting="hello"></div>;\n\n\nå¦æå±æ§å¼ä¸ºJavaScriptè¡¨è¾¾å¼ï¼å±æ§å¼å¤é¢å å¤§æ¬å·ã\n\nconst element = <img src={user.avatarUrl} />;\n// æ³¨æå¤§æ¬å·å¤é¢ä¸è½å å¼å·ï¼JSX ä¼å°å¼å·å½ä¸­çåå®¹è¯å«ä¸ºå­ç¬¦ä¸²èä¸æ¯è¡¨è¾¾å¼\n\n\n# 2.3 JSX åæ è®°å¿é¡»é­å\n\nå¦æ JSX æ¯åæ è®°ï¼å¿é¡»é­åï¼å¦åæ¥éã\n\nconst element = <img src={user.avatarUrl} />\nconst element = <input type="text"/>\n\n\n# 2.4 className\n\nä¸º JSX æ è®°æ·»å ç±»åéè¦ä½¿ç¨ classNameï¼èä¸æ¯classã\n\nconst element = <img src={user.avatarUrl} className="rounded"/>;\n\n\n# 2.5 JSX èªå¨å±å¼æ°ç»\n\nconst ary = [<p>åå</p>, <p>åµåµ</p>, <p>å¿å¿</p>];\nconst element = (\n\t<div>{ary}</div>\n);\n// è§£æå\n/*\n\t<div>\n\t\t<p>åå</p>\n\t\t<p>åµåµ</p>\n\t\t<p>å¿å¿</p>\n\t</div>\n*/\n\n\n# 2.6 ä¸åè¿ç®\n\n{ boolean ? <div>Hello React</div> : null }\n{ boolean && <div>Hello React</div> }\n\n\n# 2.7 å¾ªç¯\n\nconst persons = [{\n  id: 1,\n  name: \'å¼ ä¸\',\n  age: 20\n}, {\n  id: 2,\n  name: \'æå\',\n  age: 15\n}, {\n  id: 3,\n  name: \'çäº\',\n  age: 22\n}]\n\n\n<ul>\n  { persons.map(person => <li key={person.id}> {person.name} {person.age} </li>) }\n</ul>\n\n\n# 2.8 äºä»¶\n\n{/* ç¬¬ä¸ä¸ªåæ°å³æ¯äºä»¶å¯¹è±¡ ä¸éä¼ é */}\n<button onClick={this.eventHandler}>æé®</button>\n{/* éè¦ä¼ éäºä»¶å¯¹è±¡ */}\n<button onClick={e=>this.eventHandler(\'arg\',e)}>æé®</button>\n{/* æåä¸ä¸ªåæ°å³æ¯äºä»¶å¯¹è±¡ ä¸éä¼ é */}\n<button onClick={this.eventHandler.bind(this, \'arg\')}>æé®</button>\n\n\nconstructor () {\n  this.eventHandler = this.eventHandler.bind(this)\n}\neventHandler () {}\n<button onClick={this.eventHandler}>æé®</button>\n\n\nReactäºä»¶å¤çå½æ°å¿é¡»ä½¿ç¨bind(this)çåå \n\n// ä¸é¢é¾æ¥ä¸­çä¾å­è¯¦è§£\nexport default class Demo extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            count:4\n        };\n    }\n    render(){\n        return (\n            <div>\n                <button onClick={this.handleAdd}>ç¹å»ä¸ä¸</button>\n                <button onClick={this.handleClick.bind(this)}>ç¹å»ä¸ä¸</button>\n                <p>{this.state.count}</p>\n            </div>\n        )\n    }\n    // è¦ä¹ä½¿ç¨ç®­å¤´å½æ° æ­¤æ¶ this æåæ¯å½åå®ä¾å¯¹è±¡\n    handleAdd = () => {\n        console.log(this)\n        this.setState({\n            count:5\n        })\n    }\n    // è¦ä¹ä½¿ç¨æ®éå½æ°ï¼ä½æ¯éè¦ bind(this)\n    handleClick() {\n        console.log(this)\n        this.setState({\n            count:6\n        })\n    }\n}\n\n\n# 2.9 æ ·å¼\n\n# 2.9.1 è¡åæ ·å¼\n\nclass App extends Component {\n  render() {\n    const style = {width: 200, height: 200, backgroundColor: \'red\'};\n    return <div style={style}></div>\n  }\n}\n\n\n# 2.9.2 å¤é¾æ ·å¼\n\n// Button.js\nimport styles from \'./Button.module.css\';\nclass Button extends Component {\n  render() {\n    return <button className={styles.error}>Error Button</button>;\n  }\n}\n\n\n# 2.9.3 å¨å±æ ·å¼\n\nimport \'./styles.css\'\n\n\n# 2.10 ref å±æ§\n\n# 2.10.1 createRef\n\nclass Input extends Component {\n  constructor() {\n    super()\n    this.inputRef = React.createRef()\n  }\n  render() {\n    return (\n      <div>\n        <input type="text" ref={this.inputRef} />\n        <button onClick={() => console.log(this.inputRef.current)}> button </button>\n      </div>\n    )\n  }\n}\n\n\n# 2.10.2 å½æ°åæ°\n\n// åæ°inputæåå½åèç¹\nclass Input extends Component {\n  render() {\n    return (\n      <div>\n        <input type="text" ref={input => (this.input = input)} />\n        <button onClick={() => console.log(this.input)}>button</button>\n      </div>\n    )\n  }\n}\n\n\n# 2.10.3 ref å­ç¬¦ä¸²\n\nä¸æ¨èä½¿ç¨ï¼å¨ä¸¥æ ¼æ¨¡å¼ä¸æ¥éã\n\nclass Input extends Component {\n  render() {\n    return (\n      <div>\n        <input type="text" ref="username" />\n        <button onClick={() => console.log(this.refs.username)}>button</button>\n      </div>\n    )\n  }\n}\n\n\n# 2.10.4 è·åç»ä»¶å®ä¾\n\nç¹å»æé®è®© input ææ¬æ¡è·åç¦ç¹ã\n\ninput ææ¬æ¡ä»¥åè®©ææ¬æ¡è·åç¦ç¹çæ¹æ³å®ä¹å¨ Input ç»ä»¶ä¸­ï¼å¨ App ç»ä»¶ä¸­å¼å¥ Input ç»ä»¶ï¼æé®å®ä¹å¨ App ç»ä»¶ä¸­ã\n\n// Input.js\nclass Input extends Component {\n  constructor() {\n    super()\n    this.inputRef = React.createRef()\n    this.focusInput = this.focusInput.bind(this)\n  }\n  focusInput() {\n    this.inputRef.current.focus()\n  }\n  render() {\n    return (\n      <div>\n        <input type="text" ref={this.inputRef} />\n      </div>\n    )\n  }\n}\n\n\n// App.js\nclass App extends Component {\n  constructor() {\n    super()\n    this.InputComponentRef = React.createRef()\n  }\n  render() {\n    return (\n      <div className="App">\n        <Input ref={this.InputComponentRef} />\n        <button onClick={() => this.InputComponentRef.current.focusInput()}>button</button>\n      </div>\n    )\n}\n\n\n# 2.11 æ¬å·\n\nreturn åé¢å¸¦çä¸ä¸ªåæ¬å·ï¼åªæ¯ä¸ºäºæ¢è¡æ¾ç¤ºï¼ä¹å¯ä»¥æ¯ä¸­æ¬å·[]ãä¸ä½¿ç¨æ¬å·ä¸è½æ¢è¡ã\n\n// ok\nconst Person = () => {\n\treturn <div>\n    \thello world;\n    </div>\n}\n\n// ok\nconst Person = () => {\n\treturn (\n  \t<div>\n    \thello world;\n    </div>\n  );\n}\n\n// ok\nconst Person = () => {\n\treturn [\n    <div>\n    \thello world;\n    </div>\n  ];\n}\n\n// error\nconst Person = () => {\n\treturn\n    <div>\n    \thello world;\n    </div>\n}\n\n\n\n# 3. ç»ä»¶\n\n# 3.1 ä»ä¹æ¯ç»ä»¶\n\nReact æ¯åºäºç»ä»¶çæ¹å¼è¿è¡ç¨æ·çé¢å¼åç. ç»ä»¶å¯ä»¥çè§£ä¸ºå¯¹é¡µé¢ä¸­æä¸ååºåçå°è£ã\n\n# 3.2 åå»ºç»ä»¶\n\n# 3.2.1 åå»ºç±»ç»ä»¶\n\nimport React, { Component } from \'react\';\nclass App extends Component {\n    render () {\n        return <div>Hello, ææ¯ç±»ç»ä»¶</div>\n    }\n}\n// renderå½æ°ä¼è½¬æ¢æ React.createElementï¼æä»¥éè¦å¼å¥ React\n\n\n# 3.2.2 åå»ºå½æ°ç»ä»¶\n\nconst Person = () => {\n     return <div>Hello, ææ¯å½æ°åç»ä»¶</div>;\n}\n\n\næ³¨æäºé¡¹\n\n 1. ç»ä»¶åç§°é¦å­æ¯å¿é¡»å¤§åï¼ç¨ä»¥åºåç»ä»¶åæ®éæ ç­¾ã\n 2. jsxè¯­æ³å¤å±å¿é¡»æä¸ä¸ªæ ¹åç´ \n\n# 3.3 ç»ä»¶ props\n\n# 3.3.1 props ä¼ éæ°æ®\n\nå¨è°ç¨ç»ä»¶æ¶å¯ä»¥åç»ä»¶åé¨ä¼ éæ°æ®ï¼å¨ç»ä»¶ä¸­å¯ä»¥éè¿ props å¯¹è±¡è·åå¤é¨ä¼ éè¿æ¥çæ°æ®ã\n\n<Person name="ä¹æ²»" age="20"/>\n<Person name="çä¸½" age="10"/>\n\n\n// ç±»ç»ä»¶\nclass Person extends Component {\n  render() {\n    return (\n      <div>\n        <h3>å§åï¼{this.props.name}</h3>\n        <h4>å¹´é¾ï¼{this.props.age}</h4>\n      </div>\n    );\n  }\n}\n\n\n// å½æ°ç»ä»¶\nconst Person = props => {\n  return (\n    <div>\n      <h3>å§åï¼{props.name}</h3>\n      <h4>å¹´é¾ï¼{props.age}</h4>\n    </div>\n  );\n}\n\n\næ³¨æï¼\n\n 1. props å¯¹è±¡ä¸­å­å¨çæ°æ®æ¯åªè¯»çï¼ä¸è½å¨ç»ä»¶åé¨è¢«ä¿®æ¹ã\n 2. å½ props æ°æ®æºä¸­çæ°æ®è¢«ä¿®æ¹åï¼ç»ä»¶ä¸­çæ¥æ¶å°ç props æ°æ®ä¼è¢«åæ­¥æ´æ°ã( æ°æ®é©±å¨DOM )\n 3. ç±»ç»ä»¶renderå½æ°çthisæåç»ä»¶å®ä¾å¯¹è±¡ï¼functionå½æ°ç»ä»¶ä¸­çthisæ¯undefined\n\n# 3.3.2 è®¾ç½® props é»è®¤å¼\n\nclass App extends Component {\n    static defaultProps = {}\n}\n\n\nfunction ThemedButton(props) {\n}\nThemedButton.defaultProps = {\n  theme: "secondary",\n  label: "Button Text"\n};\n\n\n# 3.3.3 ç»ä»¶ children\n\néè¿ props.children å±æ§å¯ä»¥è·åå°å¨è°ç¨ç»ä»¶æ¶å¡«åå°ç»ä»¶æ ç­¾åé¨çåå®¹ã\n\n<Person>ç»ä»¶åé¨çåå®¹</Person>\n\n\nconst Person = (props) => {\n    return (\n    \t<div>{props.children}</div>\n    );\n}\n\n\n# 3.3.4 ååæ°æ®æµ\n\n 1. å¨Reactä¸­, å³äºæ°æ®æµå¨æä¸æ¡åå, å°±æ¯ååæ°æ®æµå¨, èªé¡¶åä¸, ä»ç¶ç»ä»¶å°å­ç»ä»¶.\n\n 2. ååæ°æ®æµç¹æ§è¦æ±æä»¬å±äº«æ°æ®è¦æ¾ç½®å¨ä¸å±ç»ä»¶ä¸­.\n\n 3. å­ç»ä»¶éè¿è°ç¨ç¶ç»ä»¶ä¼ éè¿æ¥çæ¹æ³æ´æ¹æ°æ®.\n\n 4. å½æ°æ®åçæ´æ¹æ¶, Reactä¼éæ°æ¸²æç»ä»¶æ .\n\n 5. ååæ°æ®æµä½¿ç»ä»¶ä¹é´çæ°æ®æµå¨åå¾å¯é¢æµ. ä½¿å¾å®ä½ç¨åºéè¯¯åå¾ç®å.\n\n# 3.4 ç±»ç»ä»¶ç¶æ state\n\n# 3.4.1 å®ä¹ç»ä»¶ç¶æ\n\nç±»ç»ä»¶é¤äºè½å¤ä»å¤é¨ (props) æ¥æ¶ç¶ææ°æ®ä»¥å¤è¿å¯ä»¥æ¥æèªå·±çç¶æ (state)ï¼æ­¤ç¶æå¨ç»ä»¶åé¨å¯ä»¥è¢«æ´æ°ï¼ç¶ææ´æ° DOM æ´æ°ã\n\nç»ä»¶åé¨çç¶ææ°æ®è¢«å­å¨å¨ç»ä»¶ç±»ä¸­ç state å±æ§ä¸­ï¼state å±æ§å¼ä¸ºå¯¹è±¡ç±»åï¼å±æ§åç§°åºå®ä¸å¯æ´æ¹ã\n\nclass App extends Component {\n  constructor () {\n    super()\n    this.state = {\n      person: { name: \'å¼ ä¸\', age: 20 },\n    }\n  }\n  render () {\n    return (\n      <div>\n        {this.state.person.name}\n        {this.state.person.age}\n      </div>\n    );\n  }\n}\n\n\n# 3.4.2 æ´æ¹ç»ä»¶ç¶æ\n\nstate ç¶æå¯¹è±¡ä¸­çæ°æ®ä¸å¯ç´æ¥æ´æ¹ï¼å¦æç´æ¥æ´æ¹ DOM ä¸ä¼è¢«æ´æ°ï¼è¦æ´æ¹ state ç¶ææ°æ®éè¦ä½¿ç¨ setStateæ¹æ³ã\n\nclass App extends Component {\n  constructor () {\n    this.state = {\n      person: { name: \'å¼ ä¸\', age: 20 },\n    }\n    this.changePerson = this.changePerson.bind(this)\n  }\n\tchangePerson () {\n    this.setState({\n      person: {\n        name: \'æå\',\n        age: 15\n      }\n    })\n  }\n  render() {\n    return (\n      <div>\n        {this.state.person.name}\n        {this.state.person.age}\n        <button onClick={this.changePerson}>æé®</button>\n      </div>\n    );\n  }\n}\n\n\n# 3.4.3 ååæ°æ®ç»å®\n\nååæ°æ®ç»å®æ¯æï¼ç»ä»¶ç±»ä¸­æ´æ°äºç¶æï¼DOM ç¶æåæ­¥æ´æ°ï¼DOM æ´æ¹äºç¶æï¼ç»ä»¶ç±»ä¸­åæ­¥æ´æ°ãç»ä»¶ <=> è§å¾ã\n\nè¦å®ç°ååæ°æ®ç»å®éè¦ç¨å°è¡¨ååç´ å state ç¶æå¯¹è±¡ã\n\nclass App extends Component {\n  constructor () {\n    this.state = {\n      name: "å¼ ä¸"\n    }\n    this.nameChanged = this.nameChanged.bind(this)\n  }\n  nameChanged (event) {\n    this.setState({name: event.target.value});\n  }\n  render() {\n    return (\n      <div>\n        <div>{this.state.name}</div>\n        <Person name={this.state.name} changed={this.nameChanged}/>\n      </div>\n    )\n  }\n}\n\n\nconst Person = props => {\n\treturn <input type="text" value={props.name} onChange={props.changed}/>;\n}\n\n\n# 3.5 ç±»ç»ä»¶çå½å¨æå½æ°\n\n\n\nå¨ç»ä»¶å®ææ´æ°ä¹åéè¦åæç§é»è¾æèè®¡ç®ï¼å°±éè¦ç¨å°å¿«ç§\n\ncomponentDidUpdate(prevProps, prevState, snapshot) {}\n\n\ngetSnapshotBeforeUpdate æ¹æ³ä¼å¨ç»ä»¶å®ææ´æ°ä¹åæ§è¡ï¼ç¨äºæ§è¡æç§é»è¾æè®¡ç®ï¼è¿åå¼å¯ä»¥å¨ componentDidUpdate æ¹æ³ä¸­çç¬¬ä¸ä¸ªåæ°ä¸­è·åï¼å°±æ¯è¯´å¨ç»ä»¶æ´æ°ä¹åå¯ä»¥æ¿å°è¿ä¸ªå¼åå»åå¶ä»äºæã\n\ngetSnapshotBeforeUpdate(prevProps, prevState) {\n  return \'snapshot\'\n}\n\n\n# 3.6 Context\n\néè¿ Context å¯ä»¥è·¨å±çº§ä¼ éæ°æ®\n\n// userContext.js\nimport React from "react"\n\nconst { Provider, Consumer } = React.createContext(defaultValue)\n\nexport { Provider, Consumer }\n\n\n// App.js\nimport { Provider } from "./userContext"\nclass App extends Component {\n  render() {\n    return (\n      <Provider value="Hello React Context(è¿æ¯å±äº«çæ°æ®)">\n        /*éé¢å¯ä»¥æ¸²æå¯¹åºçåå®¹*/\n      </Provider>\n    )\n  }\n}\n\n\n// C.js\nimport { Consumer } from "./userContext"\n\nexport class C extends Component {\n  render() {\n    return (\n      <div>\n        <Consumer>\n          {value => /*æ ¹æ®ä¸ä¸æ  è¿è¡æ¸²æç¸åºåå®¹*/}\n        </Consumer>\n      </div>\n    )\n  }\n}\n\n\ncontext çå¦ä¸ç§ç¨æ³\n\n// userContext.js\nexport default userContext\n\n\n// C.js\nimport userContext from "./userContext"\n\nexport class C extends Component {\n  static contextType = userContext\n  render() {\n    return (\n      <div>\n        {this.context}\n      </div>\n    )\n  }\n}\n\n\n\n# 4. è¡¨å\n\n# 4.1 åæ§è¡¨å\n\nè¡¨åæ§ä»¶ä¸­çå¼ç±ç»ä»¶ç state å¯¹è±¡æ¥ç®¡çï¼stateå¯¹è±¡ä¸­å­å¨çå¼åè¡¨åæ§ä»¶ä¸­çå¼æ¶åæ­¥ç¶æç\n\nclass App extends Component {\n  constructor () {\n    this.state = { username: "" }\n    this.nameChanged = this.nameChanged.bind(this)\n  }\n  \n  nameChanged (e) {\n    this.setState({username: e.target.value})\n  }\n  render() {\n    return (\n      <form>\n        <p>{this.state.username}</p>\n        <input type="text" value={this.state.username} onChange={this.nameChanged}/>\n      </form>\n    )\n  }\n}\n\n\n# 4.2 éåæ§è¡¨å\n\nè¡¨ååç´ çå¼ç± DOM åç´ æ¬èº«ç®¡çã\n\nclass App extends Component {\n  constructor () {\n    this.onSubmit = this.onSubmit.bind(this)\n  }\n  onSubmit(e) {\n    console.log(this.username.value)\n    e.preventDefault();\n  }\n  render(\n    <form onSubmit={this.onSubmit}>\n      <input type="text" ref={username => this.username = username}/>\n    </form>\n  )\n}\n\n\n\n# 5. è·¯ç±\n\nurlå°åä¸ç»ä»¶ä¹é´çå¯¹åºå³ç³»ï¼è®¿é®ä¸åçurlå°åæ¾ç¤ºä¸åçç»ä»¶ã\n\nä¸è½½ï¼npm install react-router-dom\n\n# 5.1.1 è·¯ç±åºæ¬ä½¿ç¨\n\n * Routeræ¾ç½®å¨æå¤å±\n\n * Linkåå»ºé¾æ¥\n\n * Routeè®¾ç½®åå¹éè·¯ç±è§å <Route path="/index" component={Index}/>ï¼è®¿é®indexè·¯å¾æ¶ï¼æ¾ç¤ºIndexç»ä»¶ã\n\n// App.js\nimport React from \'react\';\nimport { BrowserRouter as Router, Route, Link } from \'react-router-dom\';\nfunction Index() {\n\treturn <div>é¦é¡µ</div>;\n}\nfunction News() {\n\treturn <div>æ°é»</div>;\n}\nfunction App() {\n  return (\n    <Router>\n      <div>\n        <Link to="/index">é¦é¡µ</Link>  \n        <Link to="/news">æ°é»</Link>\n      </div>\n      <div>\n        <Route path="/index" component={Index}/>\n        <Route path="/news" component={News}/>\n      </div>\n    </Router>\n  );\n}\n\n\n# 5.1.2 è·¯ç±åµå¥\n\nfunction News(props) {\n  return (\n    <div>\n      <div>\n        <Link to={`${props.match.url}/company`}>å¬å¸æ°é»</Link>\n        <Link to={`${props.match.url}/industry`}>è¡ä¸æ°é»</Link>\n      </div>\n      <div>\n        <Route path={`${props.match.path}/company`} component={CompanyNews} />\n        <Route path={`${props.match.path}/industry`} component={IndustryNews}/>  \n      </div>\t\n    </div>\n  );\n}\n\nfunction CompanyNews() {\n\treturn <div>å¬å¸æ°é»</div>\n}\nfunction IndustryNews() {\n\treturn <div>è¡ä¸æ°é»</div>\n}\n\n\n# 5.1.3 è·¯ç±ä¼ å\n\nimport url from \'url\';\nclass News extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      list: [\n        {id: 1, title: \'æ°é»1\'},\n        {id: 2, title: \'æ°é»2\'},\n      ]\n    }\n  }\n    \n  render() {\n    return (\n      <div>\n        <div>æ°é»åè¡¨ç»ä»¶</div>\n        <ul>\n          this.state.list.map((item, index) => {\n            return (\n              <li key={index}>\n                <Link to={`/detail?id=${item.id}`}>{item.title}</Link>\n              </li>\n            );\n          })\n        </ul>\n      </div>\n    );\n  }\n}\n\nclass Detail extends Component {\n  constructor(props) {\n    super(props);\n  }\n\tconst { query } = url.parse(this.props.location.search, true); // åæ°ä¸ºtrueï¼ç»æè½¬æ¢ä¸ºå¯¹è±¡\n\tconsole.log(query); // {id: 1}\n  render() {\n    return <div>æ°é»è¯¦æ</div>\n  }\n}\n\n\n# 5.1.4 è·¯ç±éå®å\n\nimport { Redirect } from \'react-router-dom\';\n\nclass Login extends Component {\n  render() {\n    if (this.state.isLogin) {\n      return <Redirect to="/"/>\n    }\n  }\n}\n',normalizedContent:'# 1. react ä»ç»\n\nreact æ¯ä¸ä¸ªç¨äºæå»ºç¨æ·çé¢ç javascript åºï¼å®åªè´è´£åºç¨çè§å¾å±ï¼å¸®å©å¼åäººåæå»ºå¿«éä¸äº¤äºå¼ç web åºç¨ç¨åºã\n\nreact ä½¿ç¨ç»ä»¶çæ¹å¼æå»ºç¨æ·çé¢ã\n\n\n# 2. jsx è¯­æ³\n\nå®æ¯ä¸ç§ javascript è¯­æ³çæ©å±ï¼react ä½¿ç¨å®æ¥æè¿°ç¨æ·çé¢é¿æä»ä¹æ ·å­ãå¨ react ä»£ç æ§è¡ä¹åï¼babel ä¼å¯¹å° jsx ç¼è¯ä¸º react apiãreact.createelementä¼è¿åvirtual domï¼ç¶ååè½¬æ¢ä¸ºçå®dom\n\n\x3c!-- jsx --\x3e\n<div classname="container">\n  <h3>hello react</h3>\n  <p>react is great </p>\n</div>\n\n\n// babel ä¼å¯¹å° jsx ç¼è¯ä¸º react api\nreact.createelement(\n  "div",\n  {\n    classname: "container"\n  },\n  react.createelement("h3", null, "hello react"), // ä¸ä¸ªåæ°ï¼æ ç­¾ï¼å±æ§ï¼åå®¹\n  react.createelement("p", null, "react is great")\n);\n\n\n// è¿åå¯¹åºç virtual domï¼ä¸ä¸ªå±æ§type, props, children\n{\n  type: "div",\n  props: { classname: "container" },\n  children: [\n    {\n      type: "h3",\n      props: null,\n      children: [\n        {\n          type: "text",\n          props: {\n            textcontent: "hello react"\n          }\n        }\n      ]\n    },\n    {\n      type: "p",\n      props: null,\n      children: [\n        {\n          type: "text",\n          props: {\n            textcontent: "react is great"\n          }\n        }\n      ]\n    }\n  ]\n}\n\n\nä»ä¸¤ç§è¯­æ³å¯¹æ¯æ¥çï¼jsx è¯­æ³çåºç°æ¯ä¸ºäºè®© react å¼åäººåç¼åç¨æ·çé¢ä»£ç æ´å è½»æ¾ã\n\nbabel repl\n\n# 2.1 å¨ jsx ä¸­ä½¿ç¨è¡¨è¾¾å¼\n\nconst user = {\n  firstname: \'harper\',\n  lastname: \'perez\'\n}\nfunction formatname(user) {\n  return user.firstname + \' \' + user.lastname;\n}\nconst element = <h1>hello, {formatname(user)}!</h1>;\n\n\njsx æ¬èº«å¶å®ä¹æ¯ä¸ç§è¡¨è¾¾å¼ï¼å°å®èµå¼ç»åéï¼å½ä½åæ°ä¼ å¥ï¼ä½ä¸ºè¿åå¼é½å¯ä»¥ã\n\nfunction getgreeting(user) {\n  if (user) {\n    return <h1>hello, {formatname(user)}!</h1>;\n  }\n  return <h1>hello, stranger.</h1>;\n}\n\n\n# 2.2 å±æ§\n\nå¦æå±æ§å¼ä¸ºå­ç¬¦ä¸²ç±»åï¼éè¦å å¼å·ï¼å±æ§åç§°æ¨èéç¨é©¼å³°å¼å½åæ³ã\n\nconst element = <div greeting="hello"></div>;\n\n\nå¦æå±æ§å¼ä¸ºjavascriptè¡¨è¾¾å¼ï¼å±æ§å¼å¤é¢å å¤§æ¬å·ã\n\nconst element = <img src={user.avatarurl} />;\n// æ³¨æå¤§æ¬å·å¤é¢ä¸è½å å¼å·ï¼jsx ä¼å°å¼å·å½ä¸­çåå®¹è¯å«ä¸ºå­ç¬¦ä¸²èä¸æ¯è¡¨è¾¾å¼\n\n\n# 2.3 jsx åæ è®°å¿é¡»é­å\n\nå¦æ jsx æ¯åæ è®°ï¼å¿é¡»é­åï¼å¦åæ¥éã\n\nconst element = <img src={user.avatarurl} />\nconst element = <input type="text"/>\n\n\n# 2.4 classname\n\nä¸º jsx æ è®°æ·»å ç±»åéè¦ä½¿ç¨ classnameï¼èä¸æ¯classã\n\nconst element = <img src={user.avatarurl} classname="rounded"/>;\n\n\n# 2.5 jsx èªå¨å±å¼æ°ç»\n\nconst ary = [<p>åå</p>, <p>åµåµ</p>, <p>å¿å¿</p>];\nconst element = (\n\t<div>{ary}</div>\n);\n// è§£æå\n/*\n\t<div>\n\t\t<p>åå</p>\n\t\t<p>åµåµ</p>\n\t\t<p>å¿å¿</p>\n\t</div>\n*/\n\n\n# 2.6 ä¸åè¿ç®\n\n{ boolean ? <div>hello react</div> : null }\n{ boolean && <div>hello react</div> }\n\n\n# 2.7 å¾ªç¯\n\nconst persons = [{\n  id: 1,\n  name: \'å¼ ä¸\',\n  age: 20\n}, {\n  id: 2,\n  name: \'æå\',\n  age: 15\n}, {\n  id: 3,\n  name: \'çäº\',\n  age: 22\n}]\n\n\n<ul>\n  { persons.map(person => <li key={person.id}> {person.name} {person.age} </li>) }\n</ul>\n\n\n# 2.8 äºä»¶\n\n{/* ç¬¬ä¸ä¸ªåæ°å³æ¯äºä»¶å¯¹è±¡ ä¸éä¼ é */}\n<button onclick={this.eventhandler}>æé®</button>\n{/* éè¦ä¼ éäºä»¶å¯¹è±¡ */}\n<button onclick={e=>this.eventhandler(\'arg\',e)}>æé®</button>\n{/* æåä¸ä¸ªåæ°å³æ¯äºä»¶å¯¹è±¡ ä¸éä¼ é */}\n<button onclick={this.eventhandler.bind(this, \'arg\')}>æé®</button>\n\n\nconstructor () {\n  this.eventhandler = this.eventhandler.bind(this)\n}\neventhandler () {}\n<button onclick={this.eventhandler}>æé®</button>\n\n\nreactäºä»¶å¤çå½æ°å¿é¡»ä½¿ç¨bind(this)çåå \n\n// ä¸é¢é¾æ¥ä¸­çä¾å­è¯¦è§£\nexport default class demo extends react.component{\n    constructor(props){\n        super(props);\n        this.state = {\n            count:4\n        };\n    }\n    render(){\n        return (\n            <div>\n                <button onclick={this.handleadd}>ç¹å»ä¸ä¸</button>\n                <button onclick={this.handleclick.bind(this)}>ç¹å»ä¸ä¸</button>\n                <p>{this.state.count}</p>\n            </div>\n        )\n    }\n    // è¦ä¹ä½¿ç¨ç®­å¤´å½æ° æ­¤æ¶ this æåæ¯å½åå®ä¾å¯¹è±¡\n    handleadd = () => {\n        console.log(this)\n        this.setstate({\n            count:5\n        })\n    }\n    // è¦ä¹ä½¿ç¨æ®éå½æ°ï¼ä½æ¯éè¦ bind(this)\n    handleclick() {\n        console.log(this)\n        this.setstate({\n            count:6\n        })\n    }\n}\n\n\n# 2.9 æ ·å¼\n\n# 2.9.1 è¡åæ ·å¼\n\nclass app extends component {\n  render() {\n    const style = {width: 200, height: 200, backgroundcolor: \'red\'};\n    return <div style={style}></div>\n  }\n}\n\n\n# 2.9.2 å¤é¾æ ·å¼\n\n// button.js\nimport styles from \'./button.module.css\';\nclass button extends component {\n  render() {\n    return <button classname={styles.error}>error button</button>;\n  }\n}\n\n\n# 2.9.3 å¨å±æ ·å¼\n\nimport \'./styles.css\'\n\n\n# 2.10 ref å±æ§\n\n# 2.10.1 createref\n\nclass input extends component {\n  constructor() {\n    super()\n    this.inputref = react.createref()\n  }\n  render() {\n    return (\n      <div>\n        <input type="text" ref={this.inputref} />\n        <button onclick={() => console.log(this.inputref.current)}> button </button>\n      </div>\n    )\n  }\n}\n\n\n# 2.10.2 å½æ°åæ°\n\n// åæ°inputæåå½åèç¹\nclass input extends component {\n  render() {\n    return (\n      <div>\n        <input type="text" ref={input => (this.input = input)} />\n        <button onclick={() => console.log(this.input)}>button</button>\n      </div>\n    )\n  }\n}\n\n\n# 2.10.3 ref å­ç¬¦ä¸²\n\nä¸æ¨èä½¿ç¨ï¼å¨ä¸¥æ ¼æ¨¡å¼ä¸æ¥éã\n\nclass input extends component {\n  render() {\n    return (\n      <div>\n        <input type="text" ref="username" />\n        <button onclick={() => console.log(this.refs.username)}>button</button>\n      </div>\n    )\n  }\n}\n\n\n# 2.10.4 è·åç»ä»¶å®ä¾\n\nç¹å»æé®è®© input ææ¬æ¡è·åç¦ç¹ã\n\ninput ææ¬æ¡ä»¥åè®©ææ¬æ¡è·åç¦ç¹çæ¹æ³å®ä¹å¨ input ç»ä»¶ä¸­ï¼å¨ app ç»ä»¶ä¸­å¼å¥ input ç»ä»¶ï¼æé®å®ä¹å¨ app ç»ä»¶ä¸­ã\n\n// input.js\nclass input extends component {\n  constructor() {\n    super()\n    this.inputref = react.createref()\n    this.focusinput = this.focusinput.bind(this)\n  }\n  focusinput() {\n    this.inputref.current.focus()\n  }\n  render() {\n    return (\n      <div>\n        <input type="text" ref={this.inputref} />\n      </div>\n    )\n  }\n}\n\n\n// app.js\nclass app extends component {\n  constructor() {\n    super()\n    this.inputcomponentref = react.createref()\n  }\n  render() {\n    return (\n      <div classname="app">\n        <input ref={this.inputcomponentref} />\n        <button onclick={() => this.inputcomponentref.current.focusinput()}>button</button>\n      </div>\n    )\n}\n\n\n# 2.11 æ¬å·\n\nreturn åé¢å¸¦çä¸ä¸ªåæ¬å·ï¼åªæ¯ä¸ºäºæ¢è¡æ¾ç¤ºï¼ä¹å¯ä»¥æ¯ä¸­æ¬å·[]ãä¸ä½¿ç¨æ¬å·ä¸è½æ¢è¡ã\n\n// ok\nconst person = () => {\n\treturn <div>\n    \thello world;\n    </div>\n}\n\n// ok\nconst person = () => {\n\treturn (\n  \t<div>\n    \thello world;\n    </div>\n  );\n}\n\n// ok\nconst person = () => {\n\treturn [\n    <div>\n    \thello world;\n    </div>\n  ];\n}\n\n// error\nconst person = () => {\n\treturn\n    <div>\n    \thello world;\n    </div>\n}\n\n\n\n# 3. ç»ä»¶\n\n# 3.1 ä»ä¹æ¯ç»ä»¶\n\nreact æ¯åºäºç»ä»¶çæ¹å¼è¿è¡ç¨æ·çé¢å¼åç. ç»ä»¶å¯ä»¥çè§£ä¸ºå¯¹é¡µé¢ä¸­æä¸ååºåçå°è£ã\n\n# 3.2 åå»ºç»ä»¶\n\n# 3.2.1 åå»ºç±»ç»ä»¶\n\nimport react, { component } from \'react\';\nclass app extends component {\n    render () {\n        return <div>hello, ææ¯ç±»ç»ä»¶</div>\n    }\n}\n// renderå½æ°ä¼è½¬æ¢æ react.createelementï¼æä»¥éè¦å¼å¥ react\n\n\n# 3.2.2 åå»ºå½æ°ç»ä»¶\n\nconst person = () => {\n     return <div>hello, ææ¯å½æ°åç»ä»¶</div>;\n}\n\n\næ³¨æäºé¡¹\n\n 1. ç»ä»¶åç§°é¦å­æ¯å¿é¡»å¤§åï¼ç¨ä»¥åºåç»ä»¶åæ®éæ ç­¾ã\n 2. jsxè¯­æ³å¤å±å¿é¡»æä¸ä¸ªæ ¹åç´ \n\n# 3.3 ç»ä»¶ props\n\n# 3.3.1 props ä¼ éæ°æ®\n\nå¨è°ç¨ç»ä»¶æ¶å¯ä»¥åç»ä»¶åé¨ä¼ éæ°æ®ï¼å¨ç»ä»¶ä¸­å¯ä»¥éè¿ props å¯¹è±¡è·åå¤é¨ä¼ éè¿æ¥çæ°æ®ã\n\n<person name="ä¹æ²»" age="20"/>\n<person name="çä¸½" age="10"/>\n\n\n// ç±»ç»ä»¶\nclass person extends component {\n  render() {\n    return (\n      <div>\n        <h3>å§åï¼{this.props.name}</h3>\n        <h4>å¹´é¾ï¼{this.props.age}</h4>\n      </div>\n    );\n  }\n}\n\n\n// å½æ°ç»ä»¶\nconst person = props => {\n  return (\n    <div>\n      <h3>å§åï¼{props.name}</h3>\n      <h4>å¹´é¾ï¼{props.age}</h4>\n    </div>\n  );\n}\n\n\næ³¨æï¼\n\n 1. props å¯¹è±¡ä¸­å­å¨çæ°æ®æ¯åªè¯»çï¼ä¸è½å¨ç»ä»¶åé¨è¢«ä¿®æ¹ã\n 2. å½ props æ°æ®æºä¸­çæ°æ®è¢«ä¿®æ¹åï¼ç»ä»¶ä¸­çæ¥æ¶å°ç props æ°æ®ä¼è¢«åæ­¥æ´æ°ã( æ°æ®é©±å¨dom )\n 3. ç±»ç»ä»¶renderå½æ°çthisæåç»ä»¶å®ä¾å¯¹è±¡ï¼functionå½æ°ç»ä»¶ä¸­çthisæ¯undefined\n\n# 3.3.2 è®¾ç½® props é»è®¤å¼\n\nclass app extends component {\n    static defaultprops = {}\n}\n\n\nfunction themedbutton(props) {\n}\nthemedbutton.defaultprops = {\n  theme: "secondary",\n  label: "button text"\n};\n\n\n# 3.3.3 ç»ä»¶ children\n\néè¿ props.children å±æ§å¯ä»¥è·åå°å¨è°ç¨ç»ä»¶æ¶å¡«åå°ç»ä»¶æ ç­¾åé¨çåå®¹ã\n\n<person>ç»ä»¶åé¨çåå®¹</person>\n\n\nconst person = (props) => {\n    return (\n    \t<div>{props.children}</div>\n    );\n}\n\n\n# 3.3.4 ååæ°æ®æµ\n\n 1. å¨reactä¸­, å³äºæ°æ®æµå¨æä¸æ¡åå, å°±æ¯ååæ°æ®æµå¨, èªé¡¶åä¸, ä»ç¶ç»ä»¶å°å­ç»ä»¶.\n\n 2. ååæ°æ®æµç¹æ§è¦æ±æä»¬å±äº«æ°æ®è¦æ¾ç½®å¨ä¸å±ç»ä»¶ä¸­.\n\n 3. å­ç»ä»¶éè¿è°ç¨ç¶ç»ä»¶ä¼ éè¿æ¥çæ¹æ³æ´æ¹æ°æ®.\n\n 4. å½æ°æ®åçæ´æ¹æ¶, reactä¼éæ°æ¸²æç»ä»¶æ .\n\n 5. ååæ°æ®æµä½¿ç»ä»¶ä¹é´çæ°æ®æµå¨åå¾å¯é¢æµ. ä½¿å¾å®ä½ç¨åºéè¯¯åå¾ç®å.\n\n# 3.4 ç±»ç»ä»¶ç¶æ state\n\n# 3.4.1 å®ä¹ç»ä»¶ç¶æ\n\nç±»ç»ä»¶é¤äºè½å¤ä»å¤é¨ (props) æ¥æ¶ç¶ææ°æ®ä»¥å¤è¿å¯ä»¥æ¥æèªå·±çç¶æ (state)ï¼æ­¤ç¶æå¨ç»ä»¶åé¨å¯ä»¥è¢«æ´æ°ï¼ç¶ææ´æ° dom æ´æ°ã\n\nç»ä»¶åé¨çç¶ææ°æ®è¢«å­å¨å¨ç»ä»¶ç±»ä¸­ç state å±æ§ä¸­ï¼state å±æ§å¼ä¸ºå¯¹è±¡ç±»åï¼å±æ§åç§°åºå®ä¸å¯æ´æ¹ã\n\nclass app extends component {\n  constructor () {\n    super()\n    this.state = {\n      person: { name: \'å¼ ä¸\', age: 20 },\n    }\n  }\n  render () {\n    return (\n      <div>\n        {this.state.person.name}\n        {this.state.person.age}\n      </div>\n    );\n  }\n}\n\n\n# 3.4.2 æ´æ¹ç»ä»¶ç¶æ\n\nstate ç¶æå¯¹è±¡ä¸­çæ°æ®ä¸å¯ç´æ¥æ´æ¹ï¼å¦æç´æ¥æ´æ¹ dom ä¸ä¼è¢«æ´æ°ï¼è¦æ´æ¹ state ç¶ææ°æ®éè¦ä½¿ç¨ setstateæ¹æ³ã\n\nclass app extends component {\n  constructor () {\n    this.state = {\n      person: { name: \'å¼ ä¸\', age: 20 },\n    }\n    this.changeperson = this.changeperson.bind(this)\n  }\n\tchangeperson () {\n    this.setstate({\n      person: {\n        name: \'æå\',\n        age: 15\n      }\n    })\n  }\n  render() {\n    return (\n      <div>\n        {this.state.person.name}\n        {this.state.person.age}\n        <button onclick={this.changeperson}>æé®</button>\n      </div>\n    );\n  }\n}\n\n\n# 3.4.3 ååæ°æ®ç»å®\n\nååæ°æ®ç»å®æ¯æï¼ç»ä»¶ç±»ä¸­æ´æ°äºç¶æï¼dom ç¶æåæ­¥æ´æ°ï¼dom æ´æ¹äºç¶æï¼ç»ä»¶ç±»ä¸­åæ­¥æ´æ°ãç»ä»¶ <=> è§å¾ã\n\nè¦å®ç°ååæ°æ®ç»å®éè¦ç¨å°è¡¨ååç´ å state ç¶æå¯¹è±¡ã\n\nclass app extends component {\n  constructor () {\n    this.state = {\n      name: "å¼ ä¸"\n    }\n    this.namechanged = this.namechanged.bind(this)\n  }\n  namechanged (event) {\n    this.setstate({name: event.target.value});\n  }\n  render() {\n    return (\n      <div>\n        <div>{this.state.name}</div>\n        <person name={this.state.name} changed={this.namechanged}/>\n      </div>\n    )\n  }\n}\n\n\nconst person = props => {\n\treturn <input type="text" value={props.name} onchange={props.changed}/>;\n}\n\n\n# 3.5 ç±»ç»ä»¶çå½å¨æå½æ°\n\n\n\nå¨ç»ä»¶å®ææ´æ°ä¹åéè¦åæç§é»è¾æèè®¡ç®ï¼å°±éè¦ç¨å°å¿«ç§\n\ncomponentdidupdate(prevprops, prevstate, snapshot) {}\n\n\ngetsnapshotbeforeupdate æ¹æ³ä¼å¨ç»ä»¶å®ææ´æ°ä¹åæ§è¡ï¼ç¨äºæ§è¡æç§é»è¾æè®¡ç®ï¼è¿åå¼å¯ä»¥å¨ componentdidupdate æ¹æ³ä¸­çç¬¬ä¸ä¸ªåæ°ä¸­è·åï¼å°±æ¯è¯´å¨ç»ä»¶æ´æ°ä¹åå¯ä»¥æ¿å°è¿ä¸ªå¼åå»åå¶ä»äºæã\n\ngetsnapshotbeforeupdate(prevprops, prevstate) {\n  return \'snapshot\'\n}\n\n\n# 3.6 context\n\néè¿ context å¯ä»¥è·¨å±çº§ä¼ éæ°æ®\n\n// usercontext.js\nimport react from "react"\n\nconst { provider, consumer } = react.createcontext(defaultvalue)\n\nexport { provider, consumer }\n\n\n// app.js\nimport { provider } from "./usercontext"\nclass app extends component {\n  render() {\n    return (\n      <provider value="hello react context(è¿æ¯å±äº«çæ°æ®)">\n        /*éé¢å¯ä»¥æ¸²æå¯¹åºçåå®¹*/\n      </provider>\n    )\n  }\n}\n\n\n// c.js\nimport { consumer } from "./usercontext"\n\nexport class c extends component {\n  render() {\n    return (\n      <div>\n        <consumer>\n          {value => /*æ ¹æ®ä¸ä¸æ  è¿è¡æ¸²æç¸åºåå®¹*/}\n        </consumer>\n      </div>\n    )\n  }\n}\n\n\ncontext çå¦ä¸ç§ç¨æ³\n\n// usercontext.js\nexport default usercontext\n\n\n// c.js\nimport usercontext from "./usercontext"\n\nexport class c extends component {\n  static contexttype = usercontext\n  render() {\n    return (\n      <div>\n        {this.context}\n      </div>\n    )\n  }\n}\n\n\n\n# 4. è¡¨å\n\n# 4.1 åæ§è¡¨å\n\nè¡¨åæ§ä»¶ä¸­çå¼ç±ç»ä»¶ç state å¯¹è±¡æ¥ç®¡çï¼stateå¯¹è±¡ä¸­å­å¨çå¼åè¡¨åæ§ä»¶ä¸­çå¼æ¶åæ­¥ç¶æç\n\nclass app extends component {\n  constructor () {\n    this.state = { username: "" }\n    this.namechanged = this.namechanged.bind(this)\n  }\n  \n  namechanged (e) {\n    this.setstate({username: e.target.value})\n  }\n  render() {\n    return (\n      <form>\n        <p>{this.state.username}</p>\n        <input type="text" value={this.state.username} onchange={this.namechanged}/>\n      </form>\n    )\n  }\n}\n\n\n# 4.2 éåæ§è¡¨å\n\nè¡¨ååç´ çå¼ç± dom åç´ æ¬èº«ç®¡çã\n\nclass app extends component {\n  constructor () {\n    this.onsubmit = this.onsubmit.bind(this)\n  }\n  onsubmit(e) {\n    console.log(this.username.value)\n    e.preventdefault();\n  }\n  render(\n    <form onsubmit={this.onsubmit}>\n      <input type="text" ref={username => this.username = username}/>\n    </form>\n  )\n}\n\n\n\n# 5. è·¯ç±\n\nurlå°åä¸ç»ä»¶ä¹é´çå¯¹åºå³ç³»ï¼è®¿é®ä¸åçurlå°åæ¾ç¤ºä¸åçç»ä»¶ã\n\nä¸è½½ï¼npm install react-router-dom\n\n# 5.1.1 è·¯ç±åºæ¬ä½¿ç¨\n\n * routeræ¾ç½®å¨æå¤å±\n\n * linkåå»ºé¾æ¥\n\n * routeè®¾ç½®åå¹éè·¯ç±è§å <route path="/index" component={index}/>ï¼è®¿é®indexè·¯å¾æ¶ï¼æ¾ç¤ºindexç»ä»¶ã\n\n// app.js\nimport react from \'react\';\nimport { browserrouter as router, route, link } from \'react-router-dom\';\nfunction index() {\n\treturn <div>é¦é¡µ</div>;\n}\nfunction news() {\n\treturn <div>æ°é»</div>;\n}\nfunction app() {\n  return (\n    <router>\n      <div>\n        <link to="/index">é¦é¡µ</link>  \n        <link to="/news">æ°é»</link>\n      </div>\n      <div>\n        <route path="/index" component={index}/>\n        <route path="/news" component={news}/>\n      </div>\n    </router>\n  );\n}\n\n\n# 5.1.2 è·¯ç±åµå¥\n\nfunction news(props) {\n  return (\n    <div>\n      <div>\n        <link to={`${props.match.url}/company`}>å¬å¸æ°é»</link>\n        <link to={`${props.match.url}/industry`}>è¡ä¸æ°é»</link>\n      </div>\n      <div>\n        <route path={`${props.match.path}/company`} component={companynews} />\n        <route path={`${props.match.path}/industry`} component={industrynews}/>  \n      </div>\t\n    </div>\n  );\n}\n\nfunction companynews() {\n\treturn <div>å¬å¸æ°é»</div>\n}\nfunction industrynews() {\n\treturn <div>è¡ä¸æ°é»</div>\n}\n\n\n# 5.1.3 è·¯ç±ä¼ å\n\nimport url from \'url\';\nclass news extends component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      list: [\n        {id: 1, title: \'æ°é»1\'},\n        {id: 2, title: \'æ°é»2\'},\n      ]\n    }\n  }\n    \n  render() {\n    return (\n      <div>\n        <div>æ°é»åè¡¨ç»ä»¶</div>\n        <ul>\n          this.state.list.map((item, index) => {\n            return (\n              <li key={index}>\n                <link to={`/detail?id=${item.id}`}>{item.title}</link>\n              </li>\n            );\n          })\n        </ul>\n      </div>\n    );\n  }\n}\n\nclass detail extends component {\n  constructor(props) {\n    super(props);\n  }\n\tconst { query } = url.parse(this.props.location.search, true); // åæ°ä¸ºtrueï¼ç»æè½¬æ¢ä¸ºå¯¹è±¡\n\tconsole.log(query); // {id: 1}\n  render() {\n    return <div>æ°é»è¯¦æ</div>\n  }\n}\n\n\n# 5.1.4 è·¯ç±éå®å\n\nimport { redirect } from \'react-router-dom\';\n\nclass login extends component {\n  render() {\n    if (this.state.islogin) {\n      return <redirect to="/"/>\n    }\n  }\n}\n',charsets:{cjk:!0}},{title:"React Diff ç®æ³",frontmatter:{},regularPath:"/react/diff.html",relativePath:"react/diff.md",key:"v-207c297e",path:"/react/diff.html",headers:[{level:2,title:"Diff ç®æ³çç¹ç¹",slug:"diff-ç®æ³çç¹ç¹",normalizedTitle:"diff ç®æ³çç¹ç¹",charIndex:303},{level:2,title:"key",slug:"key",normalizedTitle:"key",charIndex:418},{level:2,title:"Diff æµç¨ ä¸¤è½®éå",slug:"diff-æµç¨-ä¸¤è½®éå",normalizedTitle:"diff æµç¨ ä¸¤è½®éå",charIndex:909},{level:3,title:"ç¬¬ä¸è½®éå",slug:"ç¬¬ä¸è½®éå",normalizedTitle:"ç¬¬ä¸è½®éå",charIndex:926},{level:3,title:"ç¬¬äºè½®éå",slug:"ç¬¬äºè½®éå",normalizedTitle:"ç¬¬äºè½®éå",charIndex:946},{level:3,title:"ä¸¾ä¾",slug:"ä¸¾ä¾",normalizedTitle:"ä¸¾ä¾",charIndex:1162}],lastUpdated:"6/20/2025, 5:49:03 PM",lastUpdatedTimestamp:1750412943e3,headersStr:"Diff ç®æ³çç¹ç¹ key Diff æµç¨ ä¸¤è½®éå ç¬¬ä¸è½®éå ç¬¬äºè½®éå ä¸¾ä¾",content:'# React Diff ç®æ³\n\nä¸ä¸ª React ç»ä»¶çæ¸²æä¸»è¦ç»åä¸¤ä¸ªé¶æ®µï¼diff ç®æ³åçå¨è°åº¦é¶æ®µã\n\n * è°åº¦é¶æ®µï¼Reconcilerï¼ï¼ç¨æ°çæ°æ®çæä¸æ£µæ°çæ ï¼ç¶åéè¿ Diff ç®æ³ï¼éåæ§çæ ï¼å¿«éæ¾åºéè¦æ´æ°çåç´ ï¼æ¾å°æ´æ°éåä¸­å»ï¼å¾å°æ°çæ´æ°éåã\n * æ¸²æé¶æ®µï¼Rendererï¼ï¼éåæ´æ°éåï¼éè¿è°ç¨å®¿ä¸»ç¯å¢ç APIï¼å®éæ´æ°æ¸²æå¯¹åºçåç´ ãå®¿ä¸»ç¯å¢å¦ DOMï¼Native ç­ã\n\n> ç¬¬ä¸æ¬¡æ¸²æä¸éè¦ diffï¼ç´æ¥ vdom è½¬ fiberãåæ¬¡æ¸²æçæ¶åï¼ä¼äº§çæ°ç vdomï¼è¿æ¶åè¦åä¹åç fiber åä¸å¯¹æ¯ï¼å³å®æä¹äº§çæ°ç fiberã\n\n\n# Diff ç®æ³çç¹ç¹\n\nDiff ç®æ³å·æä»¥ä¸ç¹ç¹ï¼\n\n 1. åå±ï¼åçº§æ¯è¾ï¼React å°æ´ä¸ª DOM æ åä¸ºå¤ä¸ªå±çº§ï¼ç¶åéå±æ¯è¾ï¼åªæ¯è¾åä¸å±çº§çèç¹ï¼ä»èåå°æ¯è¾çå¤æåº¦ãåçº§æ¯è¾æ¶æç§ä»å·¦å°å³çé¡ºåºè¿è¡æ¯è¾ã\n 2. key å±æ§ï¼React ä½¿ç¨ key å±æ§æ¥æ è¯èç¹çå¯ä¸æ§ï¼ä»èå¨æ¯è¾æ¶è½å¤å¿«éå®ä½å°éè¦æ´æ°çèç¹ã\n\n\n# key\n\nkey æ¯ React ä¸­ç¨äºæ è¯èç¹çå¯ä¸æ§çä¸ç§æºå¶ãå¨ Diff ç®æ³ä¸­ï¼React ä½¿ç¨ keyå±æ§æ¥å¿«éå®ä½å°éè¦æ´æ°çèç¹ï¼ä»èæé« Diff ç®æ³çæ§è½ã\n\næä»¬ç»å¸¸å¼ºè°å¨åè¡¨æ¸²æä¸­è¦ä½¿ç¨ key æ¥æé«æ§è½ï¼é£ä¹ key å°åºæ¯æä¹å¸®å©æä»¬è¯å«çå¢ï¼çä¸ä¸ªç®åçä¾å­ï¼\n\n<div>\n\t<p key="a">a</p>\n\t<span key="b">b</span>\n</div>\n\n<div>\n\t<span key="b">b</span>\n\t<p key="a">a</p>\n</div>\n\n\nå¨ä¸é¢çä¾å­ä¸­ï¼React å¨æ¯è¾ä¸¤ä¸ª JSX å¯¹è±¡æ¶ï¼ä¼æç§ä»å·¦å°å³çé¡ºåºè¿è¡æ¯è¾ãé£ä¹ä¸¤ä¸ª JSX å¨æ¯è¾ç¬¬ä¸ä¸ªå­èç¹æ¶ï¼åç° p å span çåç´ ç±»åä¸åï¼å æ­¤ä¼éæ¯æ§æ å¹¶åå»ºæ°æ ã\n\nä½æ¯ç±äºä»ä»¬æ keyï¼React ä¼è®¤ä¸ºä»ä»¬åªæ¯ä½ç½®åçäºååï¼èä¸æ¯åç´ ç±»ååçäºååï¼å æ­¤ä¼å¤ç¨æ§æ ä¸­çèç¹ï¼åªæ¯æ¹åä»ä»¬çä½ç½®ã\n\n\n# Diff æµç¨ ä¸¤è½®éå\n\n * ç¬¬ä¸è½®éåï¼å¤çå¯å¤ç¨çèç¹ã\n\n * ç¬¬äºè½®éåï¼éåç¬¬ä¸è½®å©ä¸ç fiberã\n\n\n# ç¬¬ä¸è½®éå\n\nå¯¹æ¯æ°æ§èç¹ï¼å¦æå¯ä»¥å¤ç¨å°±å¤çä¸ä¸ä¸ªèç¹ï¼å¦åå°±ç»æéåãç»æéåæ¶å¦æè¿ææ§çèç¹æ²¡å¤çå®ï¼é£å°±è¿è¡ç¬¬äºæ¬¡éåã\n\n\n# ç¬¬äºè½®éå\n\næç¬¬ä¸è½®å©ä¸ç è fiber èç¹æ¾å° map éï¼ç¶åéåæ°ç vdom èç¹ï¼ä» map ä¸­è½æ¾å°çè¯ï¼å°±æ¯å¯å¤ç¨ï¼ç§»å¨è¿æ¥æä¸æ´æ°çæ è®°ãéåå®ä¹åï¼å©ä¸çè fiber èç¹å æï¼å©ä¸çæ° vdom æ°å¢ã\n\n\n# ä¸¾ä¾\n\n\x3c!-- æ´æ°å --\x3e\n<ul>\n\t<li key="a">a</li>\n\t<li key="b">b</li>\n\t<li key="c">c</li>\n\t<li key="d">d</li>\n</ul>\n\x3c!-- æ´æ°å --\x3e\n<ul>\n\t<li key="a">a</li>\n\t<li key="c">c</li>\n\t<li key="b">b</li>\n\t<li key="e">e</li>\n</ul>\n\n\n> å¯¹æ¯æ°ç vdom å èç fiberï¼åç° A æ¯å¯ä»¥å¤ç¨çãç»§ç»­ååéååç° C ä¸å¯å¤ç¨ï¼æä»¥ç»æç¬¬ä¸è½®éåï¼è¿å¥ç¬¬äºè½®éåãæå©ä¸ç è fiber èç¹ b, c, d æ¾å° map éï¼ç¶åéåæ°ç vdom èç¹ï¼ä» map ä¸­è½æ¾å° b å cï¼åä»£è¡¨å¯å¤ç¨ï¼ç§»å¨è¿æ¥æä¸æ´æ°çæ è®°ãå©ä¸ç d å é¤ï¼e ä¸ºæ°å¢ã',normalizedContent:'# react diff ç®æ³\n\nä¸ä¸ª react ç»ä»¶çæ¸²æä¸»è¦ç»åä¸¤ä¸ªé¶æ®µï¼diff ç®æ³åçå¨è°åº¦é¶æ®µã\n\n * è°åº¦é¶æ®µï¼reconcilerï¼ï¼ç¨æ°çæ°æ®çæä¸æ£µæ°çæ ï¼ç¶åéè¿ diff ç®æ³ï¼éåæ§çæ ï¼å¿«éæ¾åºéè¦æ´æ°çåç´ ï¼æ¾å°æ´æ°éåä¸­å»ï¼å¾å°æ°çæ´æ°éåã\n * æ¸²æé¶æ®µï¼rendererï¼ï¼éåæ´æ°éåï¼éè¿è°ç¨å®¿ä¸»ç¯å¢ç apiï¼å®éæ´æ°æ¸²æå¯¹åºçåç´ ãå®¿ä¸»ç¯å¢å¦ domï¼native ç­ã\n\n> ç¬¬ä¸æ¬¡æ¸²æä¸éè¦ diffï¼ç´æ¥ vdom è½¬ fiberãåæ¬¡æ¸²æçæ¶åï¼ä¼äº§çæ°ç vdomï¼è¿æ¶åè¦åä¹åç fiber åä¸å¯¹æ¯ï¼å³å®æä¹äº§çæ°ç fiberã\n\n\n# diff ç®æ³çç¹ç¹\n\ndiff ç®æ³å·æä»¥ä¸ç¹ç¹ï¼\n\n 1. åå±ï¼åçº§æ¯è¾ï¼react å°æ´ä¸ª dom æ åä¸ºå¤ä¸ªå±çº§ï¼ç¶åéå±æ¯è¾ï¼åªæ¯è¾åä¸å±çº§çèç¹ï¼ä»èåå°æ¯è¾çå¤æåº¦ãåçº§æ¯è¾æ¶æç§ä»å·¦å°å³çé¡ºåºè¿è¡æ¯è¾ã\n 2. key å±æ§ï¼react ä½¿ç¨ key å±æ§æ¥æ è¯èç¹çå¯ä¸æ§ï¼ä»èå¨æ¯è¾æ¶è½å¤å¿«éå®ä½å°éè¦æ´æ°çèç¹ã\n\n\n# key\n\nkey æ¯ react ä¸­ç¨äºæ è¯èç¹çå¯ä¸æ§çä¸ç§æºå¶ãå¨ diff ç®æ³ä¸­ï¼react ä½¿ç¨ keyå±æ§æ¥å¿«éå®ä½å°éè¦æ´æ°çèç¹ï¼ä»èæé« diff ç®æ³çæ§è½ã\n\næä»¬ç»å¸¸å¼ºè°å¨åè¡¨æ¸²æä¸­è¦ä½¿ç¨ key æ¥æé«æ§è½ï¼é£ä¹ key å°åºæ¯æä¹å¸®å©æä»¬è¯å«çå¢ï¼çä¸ä¸ªç®åçä¾å­ï¼\n\n<div>\n\t<p key="a">a</p>\n\t<span key="b">b</span>\n</div>\n\n<div>\n\t<span key="b">b</span>\n\t<p key="a">a</p>\n</div>\n\n\nå¨ä¸é¢çä¾å­ä¸­ï¼react å¨æ¯è¾ä¸¤ä¸ª jsx å¯¹è±¡æ¶ï¼ä¼æç§ä»å·¦å°å³çé¡ºåºè¿è¡æ¯è¾ãé£ä¹ä¸¤ä¸ª jsx å¨æ¯è¾ç¬¬ä¸ä¸ªå­èç¹æ¶ï¼åç° p å span çåç´ ç±»åä¸åï¼å æ­¤ä¼éæ¯æ§æ å¹¶åå»ºæ°æ ã\n\nä½æ¯ç±äºä»ä»¬æ keyï¼react ä¼è®¤ä¸ºä»ä»¬åªæ¯ä½ç½®åçäºååï¼èä¸æ¯åç´ ç±»ååçäºååï¼å æ­¤ä¼å¤ç¨æ§æ ä¸­çèç¹ï¼åªæ¯æ¹åä»ä»¬çä½ç½®ã\n\n\n# diff æµç¨ ä¸¤è½®éå\n\n * ç¬¬ä¸è½®éåï¼å¤çå¯å¤ç¨çèç¹ã\n\n * ç¬¬äºè½®éåï¼éåç¬¬ä¸è½®å©ä¸ç fiberã\n\n\n# ç¬¬ä¸è½®éå\n\nå¯¹æ¯æ°æ§èç¹ï¼å¦æå¯ä»¥å¤ç¨å°±å¤çä¸ä¸ä¸ªèç¹ï¼å¦åå°±ç»æéåãç»æéåæ¶å¦æè¿ææ§çèç¹æ²¡å¤çå®ï¼é£å°±è¿è¡ç¬¬äºæ¬¡éåã\n\n\n# ç¬¬äºè½®éå\n\næç¬¬ä¸è½®å©ä¸ç è fiber èç¹æ¾å° map éï¼ç¶åéåæ°ç vdom èç¹ï¼ä» map ä¸­è½æ¾å°çè¯ï¼å°±æ¯å¯å¤ç¨ï¼ç§»å¨è¿æ¥æä¸æ´æ°çæ è®°ãéåå®ä¹åï¼å©ä¸çè fiber èç¹å æï¼å©ä¸çæ° vdom æ°å¢ã\n\n\n# ä¸¾ä¾\n\n\x3c!-- æ´æ°å --\x3e\n<ul>\n\t<li key="a">a</li>\n\t<li key="b">b</li>\n\t<li key="c">c</li>\n\t<li key="d">d</li>\n</ul>\n\x3c!-- æ´æ°å --\x3e\n<ul>\n\t<li key="a">a</li>\n\t<li key="c">c</li>\n\t<li key="b">b</li>\n\t<li key="e">e</li>\n</ul>\n\n\n> å¯¹æ¯æ°ç vdom å èç fiberï¼åç° a æ¯å¯ä»¥å¤ç¨çãç»§ç»­ååéååç° c ä¸å¯å¤ç¨ï¼æä»¥ç»æç¬¬ä¸è½®éåï¼è¿å¥ç¬¬äºè½®éåãæå©ä¸ç è fiber èç¹ b, c, d æ¾å° map éï¼ç¶åéåæ°ç vdom èç¹ï¼ä» map ä¸­è½æ¾å° b å cï¼åä»£è¡¨å¯å¤ç¨ï¼ç§»å¨è¿æ¥æä¸æ´æ°çæ è®°ãå©ä¸ç d å é¤ï¼e ä¸ºæ°å¢ã',charsets:{cjk:!0}},{title:"æ©å±éè¯»",frontmatter:{title:"æ©å±éè¯»",date:"2021-09-09T11:27:54.000Z"},regularPath:"/read/read.html",relativePath:"read/read.md",key:"v-488d7642",path:"/read/read.html",lastUpdated:"9/9/2021, 10:41:03 AM",lastUpdatedTimestamp:1631155263e3,headersStr:null,content:"# æ©å±éè¯»\n\n * é¢åé©±å¨æ¨¡åï¼DDDï¼",normalizedContent:"# æ©å±éè¯»\n\n * é¢åé©±å¨æ¨¡åï¼dddï¼",charsets:{cjk:!0}},{title:"Redux",frontmatter:{title:"Redux",date:"2021-10-11T11:27:54.000Z",categories:"React"},regularPath:"/react/redux.html",relativePath:"react/redux.md",key:"v-ec255d82",path:"/react/redux.html",headers:[{level:2,title:"Action",slug:"action",normalizedTitle:"action",charIndex:32},{level:2,title:"Reducer",slug:"reducer",normalizedTitle:"reducer",charIndex:59},{level:2,title:"Store",slug:"store",normalizedTitle:"store",charIndex:86},{level:3,title:"storeæ¹æ³",slug:"storeæ¹æ³",normalizedTitle:"storeæ¹æ³",charIndex:1712},{level:2,title:"è®¡æ°å¨æ¡ä¾",slug:"è®¡æ°å¨æ¡ä¾",normalizedTitle:"è®¡æ°å¨æ¡ä¾",charIndex:1813},{level:2,title:"ReduxãVuex åºå«",slug:"reduxãvuex-åºå«",normalizedTitle:"reduxãvuex åºå«",charIndex:2449}],lastUpdated:"2/23/2023, 2:16:54 PM",lastUpdatedTimestamp:1677133014e3,headersStr:"Action Reducer Store storeæ¹æ³ è®¡æ°å¨æ¡ä¾ ReduxãVuex åºå«",content:"# Rudux\n\n\n\n * Viewï¼è§å¾ï¼htmlé¡µé¢\n * Actionsï¼å¯¹è±¡ï¼æè¿°å¯¹ç¶æè¿è¡ææ ·çæä½\n * Reducersï¼å½æ°ï¼æä½ç¶æå¹¶è¿åæ°çç¶æ\n * Storeï¼å¯¹è±¡ï¼å­å¨ç¶æçå®¹å¨\n\n> æ´ä½æµç¨ï¼è§å¾ä¸å¯ç´æ¥æ´æ¹ Store æ°æ®ï¼è§¦å Actions ï¼æè¿°è¦å¯¹Storeè¿è¡ææ ·çæä½ï¼ï¼Actions è¢« Ruducer æ¥æ¶å°ï¼æ ¹æ® Actions ç type å±æ§è¿è¡å¤æ­ï¼å¯¹ç¶æè¿è¡æä½ï¼è¿èæ´æ° Storeï¼åæ­¥ç»è§å¾ã\n\n\n# Action\n\naction æ¯ä¸ä¸ªå·æ type å­æ®µçæ®é JavaScript å¯¹è±¡ãä½ å¯ä»¥å° action è§ä¸ºæè¿°åºç¨ç¨åºä¸­åçäºä»ä¹çäºä»¶.\n\ntype å­æ®µæ¯ä¸ä¸ªå­ç¬¦ä¸²ï¼ç»è¿ä¸ª action ä¸ä¸ªæè¿°æ§çåå­ï¼æ¯å¦\"todos/todoAdded\"ãæä»¬éå¸¸æé£ä¸ªç±»åçå­ç¬¦ä¸²åæâå/äºä»¶åç§°âï¼å¶ä¸­ç¬¬ä¸é¨åæ¯è¿ä¸ª action æå±çç¹å¾æç±»å«ï¼ç¬¬äºé¨åæ¯åççå·ä½äºæã\n\nconst addTodoAction = {\n  type: 'todos/todoAdded',\n  payload: 'Buy milk'\n}\n\n\naction creator æ¯ä¸ä¸ªåå»ºå¹¶è¿åä¸ä¸ª action å¯¹è±¡çå½æ°ãå®çä½ç¨æ¯è®©ä½ ä¸å¿æ¯æ¬¡é½æå¨ç¼å action å¯¹è±¡ï¼\n\nconst addTodo = text => {\n  return {\n    type: 'todos/todoAdded',\n    payload: text\n  }\n}\n\n\n\n# Reducer\n\nreducer æ¯ä¸ä¸ªå½æ°ï¼æ¥æ¶å½åç state åä¸ä¸ª action å¯¹è±¡ï¼å¿è¦æ¶å³å®å¦ä½æ´æ°ç¶æï¼å¹¶è¿åæ°ç¶æãå½æ°ç­¾åæ¯ï¼(state, action) => newStateã ä½ å¯ä»¥å° reducer è§ä¸ºä¸ä¸ªäºä»¶çå¬å¨ï¼å®æ ¹æ®æ¥æ¶å°ç actionï¼äºä»¶ï¼ç±»åå¤çäºä»¶ã\n\n> \"Reducer\" å½æ°çåå­æ¥æºæ¯å ä¸ºå®å Array.reduce() å½æ°ä½¿ç¨çåè°å½æ°å¾ç±»ä¼¼ã\n> \n> Array.reduce() æ¹æ³å¤çæ°ç»çæ¹å¼æ¯ï¼ä¸æ¬¡å¤çæ°ç»ä¸­çæ¯ä¸é¡¹ï¼å¹¶è¿åä¸ä¸ªæç»ç»æãæ¨å¯ä»¥å°å¶è§ä¸ºâå°æ°ç»åå°å°ä¸ä¸ªå¼âã\n> \n> Redux reducer å½æ°ä¸è¿ä¸ªâreduce åè°å½æ°âå½æ°çæ³æ³å®å¨ç¸åï¼ å®æ¥åä¸ä¸ä¸ªç»æï¼stateï¼åå½åé¡¹ï¼action å¯¹è±¡ï¼ï¼æ ¹æ®è¿äºåæ°è®¡ç®åºä¸ä¸ªæ° stateï¼å¹¶è¿åè¯¥æ° stateã\n\n * ä»ä½¿ç¨ state å action åæ°è®¡ç®æ°çç¶æå¼\n * ç¦æ­¢ç´æ¥ä¿®æ¹ stateãå¿é¡»éè¿å¤å¶ç°æç state å¹¶å¯¹å¤å¶çå¼è¿è¡æ´æ¹çæ¹å¼æ¥å ä¸å¯åæ´æ°ï¼immutable updatesï¼ã\n * ç¦æ­¢ä»»ä½å¼æ­¥é»è¾ãä¾èµéæºå¼æå¯¼è´å¶ä»âå¯ä½ç¨âçä»£ç \n\nconst initialState = { value: 0 }\n\nfunction counterReducer(state = initialState, action) {\n  // Check to see if the reducer cares about this action\n  if (action.type === 'counter/increment') {\n    // If so, make a copy of `state`\n    return {\n      ...state,\n      // and update the copy with the new value\n      value: state.value + 1\n    }\n  }\n  // otherwise return the existing state unchanged\n  return state\n}\n\n\n\n# Store\n\nStore å°±æ¯ç¨æ¥ç»´æåºç¨ææç state æ  çä¸ä¸ªå¯¹è±¡ã æ¹å store å state çæä¸éå¾æ¯å¯¹å® dispatch ä¸ä¸ª actionã\n\n\n# storeæ¹æ³\n\n * getState()\n * dispatch(action)\n * subscribe(listener)\n * replaceReducer(nextReducer)\n\n\n# è®¡æ°å¨æ¡ä¾\n\nconst initialState = { count: 0 };\n\n// å®ä¹ reducer\nfunction reducer(state = initialState, action) {\n\tswitch (action.type) {\n    case 'increment':\n      return { ...state, count: state.count + 1};\n    case 'decrement':\n      return { ...state, count: state.count - 1};\n    default:\n      return state;\n  }  \n}\n\n// åå»º store\nconst store = Redux.createStore(reducer);\n\n// å®ä¹ action\nconst increment = { type: 'increment' };\nconst decrement = { type: 'decrement' };\n\n// è§¦å action\nstore.dispatch(increment); // {count : 1}\nstore.dispatch(decrement); // {count : 0}\n\n// è®¢é\nstore.subscribe(() => {\n  console.log(store.getState());\n})\n\n\n\n# ReduxãVuex åºå«\n\n         REDUX                                            VUEX\næ ¸å¿æ¦å¿µ     actionãreducerãstoreãstate                       actionãmutationãstoreãstateãgetters\nç¶ææ´æ°è®¡ç®   reducer                                          mutation\næ¯å¦å¯åæ§    ä¸å¯åï¼reducer åé¨ç¦æ­¢ç´æ¥ä¿®æ¹ stateãå¿é¡»éè¿å¤å¶ç°æç state       å¯åï¼mutation å¯ä»¥ç´æ¥ä¿®æ¹ state\n         å¹¶å¯¹å¤å¶çå¼è¿è¡æ´æ¹çæ¹å¼æ¥åï¼reducer ä¸ºçº¯å½æ°ï¼\nåæ­¥ä¸å¼æ­¥    action ä¸­å¯åæ­¥å¯å¼æ­¥ï¼ä¾èµ redux-thunk æä»¶ï¼                commit è§¦åmutationåæ­¥æä½ï¼dispatch è§¦å action å¼æ­¥æä½\nä¸ç»ä»¶ç»å    ç»ä»¶ä¸è½ç´æ¥ä½¿ç¨ï¼ä½¿ç¨ Provider å connect æç»ä»¶å Redux å³èèµ·æ¥   VUE éè¿VUEX å¨å±æä»¶çä½¿ç¨ï¼ç»åå° storeä¼ å¥æ ¹å®ä¾çè¿ç¨ï¼å°±å¯ä»¥ä½¿å¾ store\n                                                          å¯¹è±¡å¨è¿è¡æ¶å­å¨äºä»»ä½vueç»ä»¶ä¸­\n\nä¸ææ»ç»reduxãreact-reduxãredux-thunkãredux-sage",normalizedContent:"# rudux\n\n\n\n * viewï¼è§å¾ï¼htmlé¡µé¢\n * actionsï¼å¯¹è±¡ï¼æè¿°å¯¹ç¶æè¿è¡ææ ·çæä½\n * reducersï¼å½æ°ï¼æä½ç¶æå¹¶è¿åæ°çç¶æ\n * storeï¼å¯¹è±¡ï¼å­å¨ç¶æçå®¹å¨\n\n> æ´ä½æµç¨ï¼è§å¾ä¸å¯ç´æ¥æ´æ¹ store æ°æ®ï¼è§¦å actions ï¼æè¿°è¦å¯¹storeè¿è¡ææ ·çæä½ï¼ï¼actions è¢« ruducer æ¥æ¶å°ï¼æ ¹æ® actions ç type å±æ§è¿è¡å¤æ­ï¼å¯¹ç¶æè¿è¡æä½ï¼è¿èæ´æ° storeï¼åæ­¥ç»è§å¾ã\n\n\n# action\n\naction æ¯ä¸ä¸ªå·æ type å­æ®µçæ®é javascript å¯¹è±¡ãä½ å¯ä»¥å° action è§ä¸ºæè¿°åºç¨ç¨åºä¸­åçäºä»ä¹çäºä»¶.\n\ntype å­æ®µæ¯ä¸ä¸ªå­ç¬¦ä¸²ï¼ç»è¿ä¸ª action ä¸ä¸ªæè¿°æ§çåå­ï¼æ¯å¦\"todos/todoadded\"ãæä»¬éå¸¸æé£ä¸ªç±»åçå­ç¬¦ä¸²åæâå/äºä»¶åç§°âï¼å¶ä¸­ç¬¬ä¸é¨åæ¯è¿ä¸ª action æå±çç¹å¾æç±»å«ï¼ç¬¬äºé¨åæ¯åççå·ä½äºæã\n\nconst addtodoaction = {\n  type: 'todos/todoadded',\n  payload: 'buy milk'\n}\n\n\naction creator æ¯ä¸ä¸ªåå»ºå¹¶è¿åä¸ä¸ª action å¯¹è±¡çå½æ°ãå®çä½ç¨æ¯è®©ä½ ä¸å¿æ¯æ¬¡é½æå¨ç¼å action å¯¹è±¡ï¼\n\nconst addtodo = text => {\n  return {\n    type: 'todos/todoadded',\n    payload: text\n  }\n}\n\n\n\n# reducer\n\nreducer æ¯ä¸ä¸ªå½æ°ï¼æ¥æ¶å½åç state åä¸ä¸ª action å¯¹è±¡ï¼å¿è¦æ¶å³å®å¦ä½æ´æ°ç¶æï¼å¹¶è¿åæ°ç¶æãå½æ°ç­¾åæ¯ï¼(state, action) => newstateã ä½ å¯ä»¥å° reducer è§ä¸ºä¸ä¸ªäºä»¶çå¬å¨ï¼å®æ ¹æ®æ¥æ¶å°ç actionï¼äºä»¶ï¼ç±»åå¤çäºä»¶ã\n\n> \"reducer\" å½æ°çåå­æ¥æºæ¯å ä¸ºå®å array.reduce() å½æ°ä½¿ç¨çåè°å½æ°å¾ç±»ä¼¼ã\n> \n> array.reduce() æ¹æ³å¤çæ°ç»çæ¹å¼æ¯ï¼ä¸æ¬¡å¤çæ°ç»ä¸­çæ¯ä¸é¡¹ï¼å¹¶è¿åä¸ä¸ªæç»ç»æãæ¨å¯ä»¥å°å¶è§ä¸ºâå°æ°ç»åå°å°ä¸ä¸ªå¼âã\n> \n> redux reducer å½æ°ä¸è¿ä¸ªâreduce åè°å½æ°âå½æ°çæ³æ³å®å¨ç¸åï¼ å®æ¥åä¸ä¸ä¸ªç»æï¼stateï¼åå½åé¡¹ï¼action å¯¹è±¡ï¼ï¼æ ¹æ®è¿äºåæ°è®¡ç®åºä¸ä¸ªæ° stateï¼å¹¶è¿åè¯¥æ° stateã\n\n * ä»ä½¿ç¨ state å action åæ°è®¡ç®æ°çç¶æå¼\n * ç¦æ­¢ç´æ¥ä¿®æ¹ stateãå¿é¡»éè¿å¤å¶ç°æç state å¹¶å¯¹å¤å¶çå¼è¿è¡æ´æ¹çæ¹å¼æ¥å ä¸å¯åæ´æ°ï¼immutable updatesï¼ã\n * ç¦æ­¢ä»»ä½å¼æ­¥é»è¾ãä¾èµéæºå¼æå¯¼è´å¶ä»âå¯ä½ç¨âçä»£ç \n\nconst initialstate = { value: 0 }\n\nfunction counterreducer(state = initialstate, action) {\n  // check to see if the reducer cares about this action\n  if (action.type === 'counter/increment') {\n    // if so, make a copy of `state`\n    return {\n      ...state,\n      // and update the copy with the new value\n      value: state.value + 1\n    }\n  }\n  // otherwise return the existing state unchanged\n  return state\n}\n\n\n\n# store\n\nstore å°±æ¯ç¨æ¥ç»´æåºç¨ææç state æ  çä¸ä¸ªå¯¹è±¡ã æ¹å store å state çæä¸éå¾æ¯å¯¹å® dispatch ä¸ä¸ª actionã\n\n\n# storeæ¹æ³\n\n * getstate()\n * dispatch(action)\n * subscribe(listener)\n * replacereducer(nextreducer)\n\n\n# è®¡æ°å¨æ¡ä¾\n\nconst initialstate = { count: 0 };\n\n// å®ä¹ reducer\nfunction reducer(state = initialstate, action) {\n\tswitch (action.type) {\n    case 'increment':\n      return { ...state, count: state.count + 1};\n    case 'decrement':\n      return { ...state, count: state.count - 1};\n    default:\n      return state;\n  }  \n}\n\n// åå»º store\nconst store = redux.createstore(reducer);\n\n// å®ä¹ action\nconst increment = { type: 'increment' };\nconst decrement = { type: 'decrement' };\n\n// è§¦å action\nstore.dispatch(increment); // {count : 1}\nstore.dispatch(decrement); // {count : 0}\n\n// è®¢é\nstore.subscribe(() => {\n  console.log(store.getstate());\n})\n\n\n\n# reduxãvuex åºå«\n\n         redux                                            vuex\næ ¸å¿æ¦å¿µ     actionãreducerãstoreãstate                       actionãmutationãstoreãstateãgetters\nç¶ææ´æ°è®¡ç®   reducer                                          mutation\næ¯å¦å¯åæ§    ä¸å¯åï¼reducer åé¨ç¦æ­¢ç´æ¥ä¿®æ¹ stateãå¿é¡»éè¿å¤å¶ç°æç state       å¯åï¼mutation å¯ä»¥ç´æ¥ä¿®æ¹ state\n         å¹¶å¯¹å¤å¶çå¼è¿è¡æ´æ¹çæ¹å¼æ¥åï¼reducer ä¸ºçº¯å½æ°ï¼\nåæ­¥ä¸å¼æ­¥    action ä¸­å¯åæ­¥å¯å¼æ­¥ï¼ä¾èµ redux-thunk æä»¶ï¼                commit è§¦åmutationåæ­¥æä½ï¼dispatch è§¦å action å¼æ­¥æä½\nä¸ç»ä»¶ç»å    ç»ä»¶ä¸è½ç´æ¥ä½¿ç¨ï¼ä½¿ç¨ provider å connect æç»ä»¶å redux å³èèµ·æ¥   vue éè¿vuex å¨å±æä»¶çä½¿ç¨ï¼ç»åå° storeä¼ å¥æ ¹å®ä¾çè¿ç¨ï¼å°±å¯ä»¥ä½¿å¾ store\n                                                          å¯¹è±¡å¨è¿è¡æ¶å­å¨äºä»»ä½vueç»ä»¶ä¸­\n\nä¸ææ»ç»reduxãreact-reduxãredux-thunkãredux-sage",charsets:{cjk:!0}},{title:"React çæ¬",frontmatter:{},regularPath:"/react/time.html",relativePath:"react/time.md",key:"v-8f73d49e",path:"/react/time.html",headers:[{level:2,title:"1. React 16ï¼2017ï¼ï¼Fiber æ¶æé©å½",slug:"_1-react-16-2017-fiber-æ¶æé©å½",normalizedTitle:"1. react 16ï¼2017ï¼ï¼fiber æ¶æé©å½",charIndex:174},{level:2,title:"2. React 17ï¼2020ï¼ï¼å¹³ç¨³è¿æ¸¡çæ¬",slug:"_2-react-17-2020-å¹³ç¨³è¿æ¸¡çæ¬",normalizedTitle:"2. react 17ï¼2020ï¼ï¼å¹³ç¨³è¿æ¸¡çæ¬",charIndex:508},{level:3,title:"JSX è½¬æ¢å¨",slug:"jsx-è½¬æ¢å¨",normalizedTitle:"jsx è½¬æ¢å¨",charIndex:624},{level:3,title:"å¯ä½ç¨æ¸ç",slug:"å¯ä½ç¨æ¸ç",normalizedTitle:"å¯ä½ç¨æ¸ç",charIndex:66},{level:2,title:"React 18ï¼2022ï¼ï¼å¹¶åæ¨¡å¼æ¶ä»£",slug:"react-18-2022-å¹¶åæ¨¡å¼æ¶ä»£",normalizedTitle:"react 18ï¼2022ï¼ï¼å¹¶åæ¨¡å¼æ¶ä»£",charIndex:1282},{level:2,title:"å¹¶åæ¸²æ",slug:"å¹¶åæ¸²æ",normalizedTitle:"å¹¶åæ¸²æ",charIndex:91},{level:3,title:"Suspense æ¯æ SSR",slug:"suspense-æ¯æ-ssr",normalizedTitle:"suspense æ¯æ ssr",charIndex:2622},{level:2,title:"React 19ï¼2024 Betaï¼ï¼å¼åä½éªé£è·",slug:"react-19-2024-beta-å¼åä½éªé£è·",normalizedTitle:"react 19ï¼2024 betaï¼ï¼å¼åä½éªé£è·",charIndex:3011},{level:2,title:"Next.js 14 vs Next.js 15 æ ¸å¿å·®å¼",slug:"next-js-14-vs-next-js-15-æ ¸å¿å·®å¼",normalizedTitle:"next.js 14 vs next.js 15 æ ¸å¿å·®å¼",charIndex:3424},{level:2,title:"Next.js",slug:"next-js",normalizedTitle:"next.js",charIndex:3424},{level:3,title:"Next.js æ ¸å¿è§£å³çé®é¢",slug:"next-js-æ ¸å¿è§£å³çé®é¢",normalizedTitle:"next.js æ ¸å¿è§£å³çé®é¢",charIndex:4375},{level:3,title:"2. è§£å³è·¯ç±éç½®ç¹çï¼æä»¶å³è·¯ç± (File-system based Routing)",slug:"_2-è§£å³è·¯ç±éç½®ç¹ç-æä»¶å³è·¯ç±-file-system-based-routing",normalizedTitle:"2. è§£å³è·¯ç±éç½®ç¹çï¼æä»¶å³è·¯ç± (file-system based routing)",charIndex:5572},{level:3,title:"3. è§£å³æå»ºä¼åå¤æï¼å¼ç®±å³ç¨çä¼åå·¥å·é¾",slug:"_3-è§£å³æå»ºä¼åå¤æ-å¼ç®±å³ç¨çä¼åå·¥å·é¾",normalizedTitle:"3. è§£å³æå»ºä¼åå¤æï¼å¼ç®±å³ç¨çä¼åå·¥å·é¾",charIndex:6224},{level:3,title:"4. è§£å³ååç«¯åç¦»çå²è£æï¼API Routes (å¨æ è½å)",slug:"_4-è§£å³ååç«¯åç¦»çå²è£æ-api-routes-å¨æ è½å",normalizedTitle:"4. è§£å³ååç«¯åç¦»çå²è£æï¼api routes (å¨æ è½å)",charIndex:6920},{level:3,title:"æ ¸å¿ä»·å¼åæç¼",slug:"æ ¸å¿ä»·å¼åæç¼",normalizedTitle:"æ ¸å¿ä»·å¼åæç¼",charIndex:7641}],lastUpdated:"6/17/2025, 7:54:56 PM",lastUpdatedTimestamp:1750161296e3,headersStr:"1. React 16ï¼2017ï¼ï¼Fiber æ¶æé©å½ 2. React 17ï¼2020ï¼ï¼å¹³ç¨³è¿æ¸¡çæ¬ JSX è½¬æ¢å¨ å¯ä½ç¨æ¸ç React 18ï¼2022ï¼ï¼å¹¶åæ¨¡å¼æ¶ä»£ å¹¶åæ¸²æ Suspense æ¯æ SSR React 19ï¼2024 Betaï¼ï¼å¼åä½éªé£è· Next.js 14 vs Next.js 15 æ ¸å¿å·®å¼ Next.js Next.js æ ¸å¿è§£å³çé®é¢ 2. è§£å³è·¯ç±éç½®ç¹çï¼æä»¶å³è·¯ç± (File-system based Routing) 3. è§£å³æå»ºä¼åå¤æï¼å¼ç®±å³ç¨çä¼åå·¥å·é¾ 4. è§£å³ååç«¯åç¦»çå²è£æï¼API Routes (å¨æ è½å) æ ¸å¿ä»·å¼åæç¼",content:"# React çæ¬\n\n * React 16 - Fiber æ¶æ\n * React 17 - è¿æ¸¡çæ¬ï¼äºä»¶å§æãjsxè½¬æ¢å¨ãå¯ä½ç¨æ¸ç\n * React 18 - å¹¶åæ¨¡å¼ï¼å¹¶åæ¸²æãtransition apiãæµå¼æå¡ç«¯æ¸²æ\n * React 19 - å¼åä½éªé©å½ï¼Actions apiãuseãèªå¨è®°å¿åãé¢å è½½ api\n\n\n# 1. React 16ï¼2017ï¼ï¼Fiber æ¶æé©å½\n\nçªç ´ç¹         è§£å³çé®é¢             ææ¯å®ç°\nå¼æ­¥æ¸²æ        å¤§ååºç¨æ¸²æå¡é¡¿ï¼ä¸»çº¿ç¨é»å¡ï¼   Fiber èç¹æåä»»å¡ä¸ºå¯ä¸­æ­åå\nå¢éæ¸²æ        é¿æ¶é´ä»»å¡å¯¼è´æå¸§         æµè§å¨ç©ºé²æ¶æ®µåçæ¸²æç»ä»¶\néè¯¯è¾¹ç        ç»ä»¶å´©æºå¯¼è´æ´ä¸ªåºç¨å´©æº      componentDidCatch() æè·å­ç»ä»¶éè¯¯\nPortal æ¯æ   æ¸²æå° DOM æ å¤èç¹      ReactDOM.createPortal()\næ°çå½å¨æ       åºå¼ä¸å®å¨çå½å¨æ         æ°å¢ getDerivedStateFromProps()\n\n\n# 2. React 17ï¼2020ï¼ï¼å¹³ç¨³è¿æ¸¡çæ¬\n\næ ¸å¿æ¹è¿        å½±å\näºä»¶å§æéæ      äºä»¶ç»å®å°æ ¹å®¹å¨èé documentï¼è§£å³å¤çæ¬å±å­å²çª\næ¸è¿åçº§æ¯æ      åè®¸åºç¨åæ··åä½¿ç¨ v17 åæ§çæ¬ç»ä»¶\nJSX è½¬æ¢å¨ç¬ç«   ç¼è¯å¨èªå¨å¼å¥ jsx-runtimeï¼åå° import React åä½\nå¯ä½ç¨æ¸çæ¶æº     useEffect æ¸çå½æ°å¼æ­¥æ§è¡ï¼é¿åé»å¡å±å¹æ´æ°\n\n> â ï¸ æ æ°ç¹æ§ï¼ä¸æ³¨ä¸º React 18 éºè·¯ï¼è¢«å¼åèç§°ä¸ºâéå½¢æ¡¥æ¢çæ¬â\n\n\n# JSX è½¬æ¢å¨\n\nå¨v16ä¸­ï¼æä»¬åä¸ä¸ªReactç»ä»¶ï¼æ»è¦å¼å¥\n\nimport React from 'react'\n\n\nè¿æ¯å ä¸ºå¨æµè§å¨ä¸­æ æ³ç´æ¥ä½¿ç¨ jsxï¼æä»¥è¦åå©å·¥å·å¦@babel/preset-reactå° jsx è¯­æ³è½¬æ¢ä¸º React.createElement ç js ä»£ç ï¼æä»¥éè¦æ¾å¼å¼å¥ Reactï¼æè½æ­£å¸¸è°ç¨ createElementã\n\néè¿React.createElement() åå»ºåç´ æ¯æ¯è¾é¢ç¹çæä½ï¼æ¬èº«ä¹å­å¨ä¸äºé®é¢ï¼æ æ³åå°æ§è½ä¼åï¼å·ä½å¯è§å®æ¹ä¼åç å¨æº\n\nv17ä¹åï¼React ä¸ Babel å®æ¹è¿è¡åä½ï¼ç´æ¥éè¿å° react/jsx-runtime å¯¹ jsx è¯­æ³è¿è¡äºæ°çè½¬æ¢èä¸ä¾èµ React.createElementï¼å æ­¤v17ä½¿ç¨ jsx è¯­æ³å¯ä»¥ä¸å¼å¥ Reactï¼åºç¨ç¨åºä¾ç¶è½æ­£å¸¸è¿è¡ã\n\n\n# å¯ä½ç¨æ¸ç\n\n * v17åï¼ç»ä»¶è¢«å¸è½½æ¶ï¼useEffectçæ¸çå½æ°é½æ¯åæ­¥è¿è¡çï¼å¯¹äºå¤§ååºç¨ç¨åºæ¥è¯´ï¼åæ­¥ä¼åç¼å±å¹çè¿æ¸¡ï¼å¦åæ¢æ ç­¾ï¼\n * v17åï¼useEffect å¯ä½ç¨æ¸çå½æ°æ¯å¼æ­¥æ§è¡çï¼å¦æè¦å¸è½½ç»ä»¶ï¼åæ¸çä¼å¨å±å¹æ´æ°åè¿è¡\n\n\n# React 18ï¼2022ï¼ï¼å¹¶åæ¨¡å¼æ¶ä»£\n\nç¹æ§                 åè½                      ä»£ç ç¤ºä¾\nå¹¶åæ¸²æï¼Concurrentï¼   å¯ä¸­æ­æ¸²æä¼åååºç¨æ·äº¤äº           <React.StrictMode> ä¸­å¯ç¨\nèªå¨æ¹å¤ç              åå¹¶å¤ç¶ææ´æ°åå°æ¸²ææ¬¡æ°           å¼æ­¥æä½ä¸­èªå¨çæ\nTransition API     åºåç´§æ¥/éç´§æ¥æ´æ°              const [isPending, startTransition] = useTransition()\nSuspense SSR       æµå¼æå¡ç«¯æ¸²æ + éæ©æ§ hydrate   <Suspense fallback={<Spinner/>}>\næ° Root API         åä»£ ReactDOM.render()    ReactDOM.createRoot().render(<App />)\n\n\n# å¹¶åæ¸²æ\n\nReact ä¸­ æ¯æ¬¡ setState é½ä¼è¿è¡ render æ¸²ææµç¨ãæä¸ªåºæ¯ï¼æ¯å¦ç¨æ·å¨ input è¾å¥åå®¹çæ¶åï¼ä¼éè¿ setState è®¾ç½®å°ç¶æéï¼ä¼è§¦åéæ°æ¸²æãè¿æ¶åå¦æè¿æä¸ä¸ªåè¡¨ä¹ä¼æ ¹æ® input è¾å¥çå¼æ¥å¤çæ¾ç¤ºçæ°æ®ï¼ä¹ä¼ setState ä¿®æ¹èªå·±çç¶æãè¿ä¸¤ä¸ª setState ä¼ä¸èµ·åçï¼é£ä¹åæ­¥æ¨¡å¼ä¸ä¹å°±ä¼æç§é¡ºåºä¾æ¬¡æ§è¡ã\n\nä½å¦æè¿ä¸ªæ¸²ææµç¨ä¸­å¤çç fiber èç¹æ¯è¾å¤ï¼æ¸²æä¸æ¬¡å°±æ¯è¾æ¢ï¼è¿æ¶åç¨æ·è¾å¥çåå®¹å¯è½å°±ä¸è½åæ¶çæ¸²æåºæ¥ï¼ç¨æ·å°±ä¼æè§å¡ï¼ä½éªä¸å¥½ãæä¹è§£å³è¿ä¸ªé®é¢å¢ï¼\n\nè½ä¸è½æå®è¿ä¿© setState çéè¦ç¨åº¦ä¸ä¸æ ·ï¼ç¨æ·è¾å¥ç setState çæ´æ°éè¦ç¨åº¦æ´é«ï¼å¦ææè¿ç§æ´æ°å°±æå«çåæåï¼æ§è¡è¿æ¬¡æ´æ°ï¼æ§è¡å®ä¹ååç»§ç»­å¤çã\n\nfunction Search() {\n  const [keywords, setKeywords] = useState('');\n  const [results, setResults] = useState([]);\n  const [isPending, startTransition] = useTransition();\n\n  const handleChange = (e) => {\n    // ç´§æ¥ï¼ç«å³æ´æ°è¾å¥æ¡\n    setKeywords(e.target.value);\n    \n    // éç´§æ¥ï¼å»¶è¿å¤çæç´¢ï¼å¯ä¸­æ­ï¼\n    startTransition(() => {\n      fetchResults(e.target.value).then(setResults);\n    });\n  };\n\n  return (\n    <>\n      <input value={keywords} onChange={handleChange} />\n      {isPending ? <Spinner /> : <Results data={results} />}\n    </>\n  );\n}\n\n\n\n# Suspense æ¯æ SSR\n\nSSR ä¸æ¬¡é¡µé¢æ¸²æçæµç¨ï¼\n\n 1. æå¡å¨è·åé¡µé¢æéæ°æ®\n 2. å°ç»ä»¶æ¸²ææ HTML å½¢å¼ä½ä¸ºååºè¿å\n 3. å®¢æ·ç«¯å è½½èµæº\n 4. ï¼hydrateï¼æ§è¡ JSï¼å¹¶çæé¡µé¢æç»åå®¹\n\nä¸è¿°æµç¨æ¯ä¸²è¡æ§è¡çï¼v18åç SSR æä¸ä¸ªé®é¢å°±æ¯å®ä¸åè®¸ç»ä»¶\"ç­å¾æ°æ®\"ï¼å¿é¡»æ¶éå¥½ææçæ°æ®ï¼æè½å¼å§åå®¢æ·ç«¯åéHTMLãå¦æå¶ä¸­æä¸æ­¥æ¯è¾æ¢ï¼é½ä¼å½±åæ´ä½çæ¸²æéåº¦ã\n\nv18 ä¸­ä½¿ç¨å¹¶åæ¸²æç¹æ§æ©å±äºSuspenseçåè½ï¼ä½¿å¶æ¯ææµå¼ SSRï¼å° React ç»ä»¶åè§£ææ´å°çåï¼åè®¸æå¡ç«¯ä¸ç¹ä¸ç¹è¿åé¡µé¢ï¼å°½æ©åé HTMLåéæ©æ§ç hydrateï¼ ä»èå¯ä»¥ä½¿SSRæ´å¿«çå è½½é¡µé¢\n\n<Suspense fallback={<Spinner />}>  \n  <Comments /> \n</Suspense>\n\n\n\n# React 19ï¼2024 Betaï¼ï¼å¼åä½éªé£è·\n\nç¹æ§                     è§£å³çé®é¢                   REACT 18 å¯¹æ¯\nActions API            è¡¨åç¶æç®¡çæ ·æ¿ä»£ç               æå¨å¤ç loading/error ç¶æ\nuse() Hook             ç´æ¥æ¶è´¹ Promise/Suspense   é useEffect + ç¶æç®¡ç\nèªå¨è®°å¿åç¼è¯å¨               æå¨ useMemo ä¼åè´æ         å¼åèéæ¾å¼è®°å¿å\nåç Document Metadata   å¨æä¿®æ¹ <title> éç¬¬ä¸æ¹åº      ä¾èµ react-helmet\nèµæºé¢å è½½ API              å³é®èµæºå è½½ä¼åç¢çå             æå¨ link rel=preload\n\n\n# Next.js 14 vs Next.js 15 æ ¸å¿å·®å¼\n\nè½åæ¨¡å          NEXT.JS 14                          **NEXT.JS 15 **\nReact åºç¡      React 18.3                          React 19 (é¦ä¸ªå®æ¹éæçæ¬)\næ¸²æå¼æ          Pages Router + App Router å±å­        App Router ä¸ºé»è®¤æ¨¡å¼\næ°æ®è·å          getServerSideProps/getStaticProps   Actions + use() ä¸»å¯¼\nåæ°æ®å¤ç         generateMetadata å½æ°                 åç <title> ç»ä»¶æ¯æ\nèµæºä¼å          next/image/next/font                æ´å React 19 é¢å è½½ API\nä¸­é´ä»¶           middleware.ts åºäº Edge Runtime       æ¯æ Node.js è¿è¡æ¶\næåå·¥å·          Webpack (é»è®¤) / Turbopack (å¯é)       Turbopack ä¸ºé»è®¤æå»ºå¼æ\nå¢ééæçæ        revalidate å­æ®µæ§å¶                     å¨æ ISRï¼æè¯·æ±æµéè§¦åéå»º\nMonorepo æ¯æ   éæå¨éç½® Turbo æ Nx                    åç½® Turborepo éæ\né¨ç½²éé          Vercel/Netlify/Node æå¡å¨             æ°å¢ Serverless å½æ°å·å¯å¨ä¼å\n\n\n# Next.js\n\nNext.js æ¯ä¸ä¸ªåºäº React çå¨æ åç«¯æ¡æ¶ï¼æ ¸å¿ç®æ æ¯ç®åé«æ§è½ Web åºç¨çå¼åï¼å°¤å¶è§£å³ React ç SEO å¼±ãé¦å±å è½½æ¢ç­é®é¢ï¼ãå®éè¿å¼ç®±å³ç¨çåè½ï¼å¦æå¡ç«¯æ¸²æãè·¯ç±ãæåä¼åç­ï¼å¤§å¹æåå¼åæçã\n\n----------------------------------------\n\n\n# Next.js æ ¸å¿è§£å³çé®é¢\n\nä¼ ç» React (CSR - Client-Side Rendering) çé®é¢ï¼\n\n * è¿ç¨ï¼ æµè§å¨ä¸è½½ä¸ä¸ªè¿ä¹ç©ºç HTML â ä¸è½½åºå¤§ç JS Bundle â JS æ§è¡ â React æ¸²æé¡µé¢åå®¹ã\n * è´å½ä¼¤ï¼\n   * SEO ä¸åå¥½ï¼ æç´¢å¼æç¬è«çå°çæ¯ç©º HTML æå è½½å¨ç»ï¼æ æ³æåææåå®¹ã\n   * é¦å±å è½½æ¢ (FCP/LCP)ï¼ ç¨æ·éè¦ç­å¾ JS ä¸è½½æ§è¡å®æè½çå°ä¸»è¦åå®¹ï¼ä½éªå·®ã\n   * ä½ç«¯è®¾å¤ä½éªå·®ï¼ JS è§£æåæ§è¡å¨æ§è½å¼±çè®¾å¤ä¸èæ¶æ´é¿ã\n\nNext.js çè§£å³æ¹æ¡ï¼ æå¡ç«¯æ¸²æ (SSR) ä¸ éæç«ç¹çæ (SSG)\n\n * SSR (Server-Side Rendering) - å¨æåå®¹å®æ¶æ¸²æï¼\n   * è¿ç¨ï¼ ç¨æ·è¯·æ± â Next.js æå¡å¨å®æ¶æ§è¡ React ç»ä»¶ï¼è·åæ°æ® â çæåå«å®æ´åå®¹ç HTML åéç»æµè§å¨ â æµè§å¨ç«å³å±ç¤ºåå®¹ â React åâæ³¨æ°´â(Hydrate) æ¥ç®¡äº¤äºã\n   * ä¼å¿ï¼\n     * å®ç¾ SEOï¼ ç¬è«æ¿å°çæ¯åå«å®æ´æ°æ®ç HTMLã\n     * ç¬é´é¦å±ï¼ ç¨æ·ç¬¬ä¸æ¶é´çå°å®æ´åå®¹ï¼æ éç­å¾ JS æ§è¡ã\n     * éåï¼ ç¨æ·ä»ªè¡¨çãå®æ¶æ°æ®é¡µé¢ãä¸ªæ§ååå®¹é¡µï¼éè¦ç¥éç¨æ·æ¯è°ï¼ã\n * SSG (Static Site Generation) - æå»ºæ¶é¢æ¸²æï¼\n   * è¿ç¨ï¼ å¨ npm run build æ¶ï¼Next.js æåæ§è¡ React ç»ä»¶ï¼è·åæ°æ® â çæçº¯éæ HTML/CSS/JS æä»¶ â é¨ç½²å° CDNã\n   * ä¼å¿ï¼\n     * æè´æ§è½ï¼ CDN ç´æ¥è¿åé¢æ¸²æå¥½ç HTMLï¼éåº¦æå¿«ã\n     * è¶é«æ©å±æ§ï¼ CDN è½»æ¾åºå¯¹é«å¹¶åï¼ææ¬ä½ã\n     * å®å¨æ§é«ï¼ éææä»¶æ æå¡å¨è¿è¡æ¶é£é©ã\n     * éåï¼ åå®¢ãææ¡£ãè¥éé¡µãçµåäº§ååè¡¨/è¯¦æé¡µï¼æ°æ®ååä¸é¢ç¹ï¼ã\n * ISR (Incremental Static Regeneration) - SSG çæºè½åçº§ï¼\n   * è¿ç¨ï¼ å¨ SSG åºç¡ä¸ï¼å¯ä»¥ä¸ºæ¯ä¸ªé¡µé¢è®¾ç½®ä¸ä¸ª revalidate æ¶é´ï¼ç§ï¼ãé¦æ¬¡è®¿é®è§¦åæå»ºï¼ä¹åå¨è®¾å®çæ¶é´é´éåï¼è®¿é®ä»è¿åç¼å­çéæé¡µé¢ï¼è¶è¿æ¶é´åçé¦æ¬¡è®¿é®ï¼Next.js å¨åå°å¼æ­¥éæ°çæè¯¥é¡µé¢ï¼ä¸æ¬¡è®¿é®å¾å°æ°é¡µé¢ï¼åæ¶æ§é¡µé¢ä»å¯è¢«è®¿é®ï¼æ ä¸­æ­ï¼ã\n   * ä¼å¿ï¼ å¼å· SSG çéåº¦ä¸æ¥è¿ SSR çæ°æ®æ°é²åº¦ï¼æ éå¨ç«éå»ºã\n   * éåï¼ æ°é»èµè®¯ãååä»·æ ¼ï¼åè®¸ç­æå»¶è¿ï¼ãç¨æ·çæåå®¹ï¼UGCï¼åè¡¨é¡µã\n\næ»ç»ï¼Next.js è®©ä½ æééæ©æ¸²ææ¹å¼ï¼ä»æ ¹æ¬ä¸è§£å³ SEO åé¦å±æ§è½ç¶é¢ã\n\n\n# 2. è§£å³è·¯ç±éç½®ç¹çï¼æä»¶å³è·¯ç± (File-system based Routing)\n\nä¼ ç» React çé®é¢ï¼\n\n * éè¦æå¨å®è£ react-router-dom åºã\n * éè¦ç¼åå¤æçè·¯ç±éç½®æä»¶ (<Routes>, <Route>, <Link>)ï¼å®ä¹è·¯å¾ä¸ç»ä»¶çæ å°å³ç³»ã\n * åµå¥è·¯ç±ãå¨æè·¯ç±ãè·¯ç±å®å«ç­éç½®è¾ç¹çã\n\nNext.js çè§£å³æ¹æ¡ï¼\n\n * çº¦å®ä¼äºéç½®ï¼ å¨ pages ç®å½ä¸çæä»¶ç»æèªå¨æ å°ä¸º URL è·¯ç±ã\n   * pages/index.js â /\n   * pages/about.js â /about\n   * pages/blog/index.js â /blog\n   * pages/blog/[slug].js â /blog/:slug (e.g., /blog/nextjs-is-awesome)\n   * pages/user/[id]/profile.js â /user/:id/profile (åµå¥å¨æè·¯ç±)\n * æ éæå¨éç½®ï¼ åå»ºæä»¶å³åå»ºè·¯ç±ï¼æå¤§ç®åå¼åæµç¨ã\n * åç½® <Link>ï¼ æä¾é«æ§è½çå®¢æ·ç«¯å¯¼èªï¼æ æ´é¡µå·æ°ï¼ã\n * èªå¨ä»£ç åå²ï¼ æ¯ä¸ªé¡µé¢èªå¨çæç¬ç«ç JS Bundleï¼æéå è½½ã\n\næ»ç»ï¼æä»¶å³è·¯ç±æ¯ Next.js æç´è§ãæé«æçç¹æ§ä¹ä¸ï¼æ¾èæåå¼åéåº¦åä»£ç å¯ç»´æ¤æ§ã\n\n----------------------------------------\n\n\n# 3. è§£å³æå»ºä¼åå¤æï¼å¼ç®±å³ç¨çä¼åå·¥å·é¾\n\nä¼ ç» React (CRA) çé®é¢ï¼\n\n * è½ç¶å°è£äº Webpack éç½®ï¼ä½æ·±åº¦å®å¶ï¼å¦ä¿®æ¹ LoaderãPluginãååç­ç¥ï¼éè¦ ejectï¼ä¸å¯éï¼æä½¿ç¨ react-app-rewired ç­ç¬¬ä¸æ¹å·¥å·ï¼é¨æ§é«ã\n * æ§è½ä¼åï¼å¦ä»£ç åå²ãæå è½½ãå¾çä¼åï¼éè¦å¼åèæå¨éç½®æéæé¢å¤åºã\n\nNext.js çè§£å³æ¹æ¡ï¼\n\n * é¶éç½®ä¼åï¼\n   * èªå¨ä»£ç åå²ï¼ åºäºé¡µé¢åå¨æ import()ã\n   * SWC ç¼è¯å¨ï¼ æ¿ä»£ Babel + Terserï¼ç¼è¯éåº¦å¿« 17 åä»¥ä¸ï¼æ¯æ Rust æä»¶ã\n   * Image ç»ä»¶ (next/image): èªå¨ä¼åå¾çï¼æ ¼å¼è½¬æ¢ - WebP/AVIFãå°ºå¯¸è°æ´ãæå è½½ï¼ï¼å¤§å¹æå LCP ææ åèçå¸¦å®½ã\n   * Font ç»ä»¶ (next/font): èªå¨æç®¡åä¼åå­ä½æä»¶ï¼æ¶é¤å¸å±åç§» (CLS)ï¼æé«éç§æ§ï¼æ  Google Fonts è¯·æ±ï¼ã\n   * Script ç»ä»¶ (next/script): ä¼åç¬¬ä¸æ¹èæ¬å è½½ç­ç¥ï¼å¦ afterInteractive, lazyOnLoadï¼ã\n * å¯æ©å±éç½® (next.config.js): æä¾ç®å API è¦çé»è®¤ Webpack éç½®ãéç½®ç¯å¢åéãååä»£çç­ï¼æ é ejectã\n\næ»ç»ï¼Next.js åç½®äºçäº§ç¯å¢æéçå ä¹æææ§è½ä¼åææ®µï¼å¼åèå¯ä»¥ä¸æ³¨äºä¸å¡é»è¾ã\n\n----------------------------------------\n\n\n# 4. è§£å³ååç«¯åç¦»çå²è£æï¼API Routes (å¨æ è½å)\n\nä¼ ç» React çé®é¢ï¼\n\n * åç«¯é¡¹ç®éè¦åç¬é¨ç½²ã\n * éè¦å¦å¤æ­å»ºåç»´æ¤ä¸ä¸ªåç«¯æå¡ï¼Node.js/Express, Python/Django, Go ç­ï¼æ¥æä¾ APIã\n * å¼åç¯å¢éç½® CORSãä»£çç­è§£å³è·¨åé®é¢ã\n * å¢å äºé¡¹ç®å¤æåº¦ååä½ææ¬ã\n\nNext.js çè§£å³æ¹æ¡ï¼ API Routes\n\n * æ¦å¿µï¼ å¨ pages/api ç®å½ä¸åå»º .js/.ts æä»¶ï¼è¯¥æä»¶é»è®¤å¯¼åºä¸ä¸ªå½æ°ï¼è¯·æ±å¤çç¨åºï¼ï¼å®å°±æ¯ä¸ä¸ª API ç«¯ç¹ã\n   * pages/api/hello.js â å¯¹åº /api/hello æ¥å£ã\n * ä¼å¿ï¼\n   * ååç«¯åé¡¹ç®ï¼ API ååç«¯é¡µé¢å¨åä¸ä¸ª Next.js é¡¹ç®ä¸­ç¼åãæå»ºåé¨ç½²ã\n   * æ  CORS é®é¢ï¼ åæºè¯·æ±ï¼åç«¯è°ç¨ /api/xxx å°±åè°ç¨æ¬å°å½æ°ä¸æ ·ç®åã\n   * ä½¿ç¨çæç Node.js ç¯å¢ï¼ å¯ä»¥ç´æ¥è®¿é®æä»¶ç³»ç»ãæ°æ®åºï¼ORMï¼ãç¯å¢åéç­ã\n   * ç®åé¨ç½²ï¼ Vercel/Netlify/Node æå¡å¨ç­ä¸é®é¨ç½²æ´ä¸ªåºç¨ï¼åç«¯ + APIï¼ã\n * éååºæ¯ï¼ å¤çè¡¨åæäº¤ãWebhook æ¥æ¶å¨ãè½»éçº§æ°æ®åº CRUDãèº«ä»½éªè¯ç«¯ç¹ãä»£çç¬¬ä¸æ¹ APIï¼éèå¯é¥ï¼ç­ãä¸éåï¼ è®¡ç®å¯éåä»»å¡ãéè¦é¿è¿æ¥ï¼WebSocketï¼çåºæ¯ã\n\næ»ç»ï¼API Routes è®© Next.js å·å¤äºå¨æ è½åï¼æå¤§ç®åäºéè¦ç®ååç«¯é»è¾çåºç¨å¼åã\n\n----------------------------------------\n\n\n# æ ¸å¿ä»·å¼åæç¼\n\né®é¢é¢å      ä¼ ç» REACT çç¹    NEXT.JS æ ¸å¿è§£å³æ¹æ¡                      å¸¦æ¥çæ ¸å¿ä»·å¼\næ¸²æ & æ§è½   SEO å·®ãé¦å±æ¢      SSR / SSG / ISR                     æè´æ§è½ãSEO åå¥½\nå¼åä½éª      è·¯ç±éç½®ç¹ç         æä»¶å³è·¯ç± (pages/)                      å¼åé«æãç»ææ¸æ°\næå»º & ä¼å   éç½®å¤æãä¼åéæå¨     å¼ç®±å³ç¨ä¼å (SWC, Image, Font, Script)   é«æ§è½ãæä½³å®è·µåç½®\nåºç¨æ¶æ      ååç«¯åç¦»ãé¨ç½²è¿ç»´å¤æ   API Routes (pages/api/)             å¨æ ä¸ä½åãç®åé¨ç½²è¿ç»´\n\n**ä¸å¥è¯çè§£ Next.jsï¼å®æ¯å¯¹ React çâçäº§ç¯å¢å¼ºåâï¼éè¿çº¦å®ä¼äºéç½®ãå¼ç®±å³ç¨çæå¡ç«¯æ¸²æ/éæçæãä¸ä½åè·¯ç±å API æ¹æ¡ï¼è®©å¼åèè½é«ææå»ºé«æ§è½ãSEO åå¥½ãä½éªåè¶çç°ä»£å Web åºç¨ã",normalizedContent:"# react çæ¬\n\n * react 16 - fiber æ¶æ\n * react 17 - è¿æ¸¡çæ¬ï¼äºä»¶å§æãjsxè½¬æ¢å¨ãå¯ä½ç¨æ¸ç\n * react 18 - å¹¶åæ¨¡å¼ï¼å¹¶åæ¸²æãtransition apiãæµå¼æå¡ç«¯æ¸²æ\n * react 19 - å¼åä½éªé©å½ï¼actions apiãuseãèªå¨è®°å¿åãé¢å è½½ api\n\n\n# 1. react 16ï¼2017ï¼ï¼fiber æ¶æé©å½\n\nçªç ´ç¹         è§£å³çé®é¢             ææ¯å®ç°\nå¼æ­¥æ¸²æ        å¤§ååºç¨æ¸²æå¡é¡¿ï¼ä¸»çº¿ç¨é»å¡ï¼   fiber èç¹æåä»»å¡ä¸ºå¯ä¸­æ­åå\nå¢éæ¸²æ        é¿æ¶é´ä»»å¡å¯¼è´æå¸§         æµè§å¨ç©ºé²æ¶æ®µåçæ¸²æç»ä»¶\néè¯¯è¾¹ç        ç»ä»¶å´©æºå¯¼è´æ´ä¸ªåºç¨å´©æº      componentdidcatch() æè·å­ç»ä»¶éè¯¯\nportal æ¯æ   æ¸²æå° dom æ å¤èç¹      reactdom.createportal()\næ°çå½å¨æ       åºå¼ä¸å®å¨çå½å¨æ         æ°å¢ getderivedstatefromprops()\n\n\n# 2. react 17ï¼2020ï¼ï¼å¹³ç¨³è¿æ¸¡çæ¬\n\næ ¸å¿æ¹è¿        å½±å\näºä»¶å§æéæ      äºä»¶ç»å®å°æ ¹å®¹å¨èé documentï¼è§£å³å¤çæ¬å±å­å²çª\næ¸è¿åçº§æ¯æ      åè®¸åºç¨åæ··åä½¿ç¨ v17 åæ§çæ¬ç»ä»¶\njsx è½¬æ¢å¨ç¬ç«   ç¼è¯å¨èªå¨å¼å¥ jsx-runtimeï¼åå° import react åä½\nå¯ä½ç¨æ¸çæ¶æº     useeffect æ¸çå½æ°å¼æ­¥æ§è¡ï¼é¿åé»å¡å±å¹æ´æ°\n\n> â ï¸ æ æ°ç¹æ§ï¼ä¸æ³¨ä¸º react 18 éºè·¯ï¼è¢«å¼åèç§°ä¸ºâéå½¢æ¡¥æ¢çæ¬â\n\n\n# jsx è½¬æ¢å¨\n\nå¨v16ä¸­ï¼æä»¬åä¸ä¸ªreactç»ä»¶ï¼æ»è¦å¼å¥\n\nimport react from 'react'\n\n\nè¿æ¯å ä¸ºå¨æµè§å¨ä¸­æ æ³ç´æ¥ä½¿ç¨ jsxï¼æä»¥è¦åå©å·¥å·å¦@babel/preset-reactå° jsx è¯­æ³è½¬æ¢ä¸º react.createelement ç js ä»£ç ï¼æä»¥éè¦æ¾å¼å¼å¥ reactï¼æè½æ­£å¸¸è°ç¨ createelementã\n\néè¿react.createelement() åå»ºåç´ æ¯æ¯è¾é¢ç¹çæä½ï¼æ¬èº«ä¹å­å¨ä¸äºé®é¢ï¼æ æ³åå°æ§è½ä¼åï¼å·ä½å¯è§å®æ¹ä¼åç å¨æº\n\nv17ä¹åï¼react ä¸ babel å®æ¹è¿è¡åä½ï¼ç´æ¥éè¿å° react/jsx-runtime å¯¹ jsx è¯­æ³è¿è¡äºæ°çè½¬æ¢èä¸ä¾èµ react.createelementï¼å æ­¤v17ä½¿ç¨ jsx è¯­æ³å¯ä»¥ä¸å¼å¥ reactï¼åºç¨ç¨åºä¾ç¶è½æ­£å¸¸è¿è¡ã\n\n\n# å¯ä½ç¨æ¸ç\n\n * v17åï¼ç»ä»¶è¢«å¸è½½æ¶ï¼useeffectçæ¸çå½æ°é½æ¯åæ­¥è¿è¡çï¼å¯¹äºå¤§ååºç¨ç¨åºæ¥è¯´ï¼åæ­¥ä¼åç¼å±å¹çè¿æ¸¡ï¼å¦åæ¢æ ç­¾ï¼\n * v17åï¼useeffect å¯ä½ç¨æ¸çå½æ°æ¯å¼æ­¥æ§è¡çï¼å¦æè¦å¸è½½ç»ä»¶ï¼åæ¸çä¼å¨å±å¹æ´æ°åè¿è¡\n\n\n# react 18ï¼2022ï¼ï¼å¹¶åæ¨¡å¼æ¶ä»£\n\nç¹æ§                 åè½                      ä»£ç ç¤ºä¾\nå¹¶åæ¸²æï¼concurrentï¼   å¯ä¸­æ­æ¸²æä¼åååºç¨æ·äº¤äº           <react.strictmode> ä¸­å¯ç¨\nèªå¨æ¹å¤ç              åå¹¶å¤ç¶ææ´æ°åå°æ¸²ææ¬¡æ°           å¼æ­¥æä½ä¸­èªå¨çæ\ntransition api     åºåç´§æ¥/éç´§æ¥æ´æ°              const [ispending, starttransition] = usetransition()\nsuspense ssr       æµå¼æå¡ç«¯æ¸²æ + éæ©æ§ hydrate   <suspense fallback={<spinner/>}>\næ° root api         åä»£ reactdom.render()    reactdom.createroot().render(<app />)\n\n\n# å¹¶åæ¸²æ\n\nreact ä¸­ æ¯æ¬¡ setstate é½ä¼è¿è¡ render æ¸²ææµç¨ãæä¸ªåºæ¯ï¼æ¯å¦ç¨æ·å¨ input è¾å¥åå®¹çæ¶åï¼ä¼éè¿ setstate è®¾ç½®å°ç¶æéï¼ä¼è§¦åéæ°æ¸²æãè¿æ¶åå¦æè¿æä¸ä¸ªåè¡¨ä¹ä¼æ ¹æ® input è¾å¥çå¼æ¥å¤çæ¾ç¤ºçæ°æ®ï¼ä¹ä¼ setstate ä¿®æ¹èªå·±çç¶æãè¿ä¸¤ä¸ª setstate ä¼ä¸èµ·åçï¼é£ä¹åæ­¥æ¨¡å¼ä¸ä¹å°±ä¼æç§é¡ºåºä¾æ¬¡æ§è¡ã\n\nä½å¦æè¿ä¸ªæ¸²ææµç¨ä¸­å¤çç fiber èç¹æ¯è¾å¤ï¼æ¸²æä¸æ¬¡å°±æ¯è¾æ¢ï¼è¿æ¶åç¨æ·è¾å¥çåå®¹å¯è½å°±ä¸è½åæ¶çæ¸²æåºæ¥ï¼ç¨æ·å°±ä¼æè§å¡ï¼ä½éªä¸å¥½ãæä¹è§£å³è¿ä¸ªé®é¢å¢ï¼\n\nè½ä¸è½æå®è¿ä¿© setstate çéè¦ç¨åº¦ä¸ä¸æ ·ï¼ç¨æ·è¾å¥ç setstate çæ´æ°éè¦ç¨åº¦æ´é«ï¼å¦ææè¿ç§æ´æ°å°±æå«çåæåï¼æ§è¡è¿æ¬¡æ´æ°ï¼æ§è¡å®ä¹ååç»§ç»­å¤çã\n\nfunction search() {\n  const [keywords, setkeywords] = usestate('');\n  const [results, setresults] = usestate([]);\n  const [ispending, starttransition] = usetransition();\n\n  const handlechange = (e) => {\n    // ç´§æ¥ï¼ç«å³æ´æ°è¾å¥æ¡\n    setkeywords(e.target.value);\n    \n    // éç´§æ¥ï¼å»¶è¿å¤çæç´¢ï¼å¯ä¸­æ­ï¼\n    starttransition(() => {\n      fetchresults(e.target.value).then(setresults);\n    });\n  };\n\n  return (\n    <>\n      <input value={keywords} onchange={handlechange} />\n      {ispending ? <spinner /> : <results data={results} />}\n    </>\n  );\n}\n\n\n\n# suspense æ¯æ ssr\n\nssr ä¸æ¬¡é¡µé¢æ¸²æçæµç¨ï¼\n\n 1. æå¡å¨è·åé¡µé¢æéæ°æ®\n 2. å°ç»ä»¶æ¸²ææ html å½¢å¼ä½ä¸ºååºè¿å\n 3. å®¢æ·ç«¯å è½½èµæº\n 4. ï¼hydrateï¼æ§è¡ jsï¼å¹¶çæé¡µé¢æç»åå®¹\n\nä¸è¿°æµç¨æ¯ä¸²è¡æ§è¡çï¼v18åç ssr æä¸ä¸ªé®é¢å°±æ¯å®ä¸åè®¸ç»ä»¶\"ç­å¾æ°æ®\"ï¼å¿é¡»æ¶éå¥½ææçæ°æ®ï¼æè½å¼å§åå®¢æ·ç«¯åéhtmlãå¦æå¶ä¸­æä¸æ­¥æ¯è¾æ¢ï¼é½ä¼å½±åæ´ä½çæ¸²æéåº¦ã\n\nv18 ä¸­ä½¿ç¨å¹¶åæ¸²æç¹æ§æ©å±äºsuspenseçåè½ï¼ä½¿å¶æ¯ææµå¼ ssrï¼å° react ç»ä»¶åè§£ææ´å°çåï¼åè®¸æå¡ç«¯ä¸ç¹ä¸ç¹è¿åé¡µé¢ï¼å°½æ©åé htmlåéæ©æ§ç hydrateï¼ ä»èå¯ä»¥ä½¿ssræ´å¿«çå è½½é¡µé¢\n\n<suspense fallback={<spinner />}>  \n  <comments /> \n</suspense>\n\n\n\n# react 19ï¼2024 betaï¼ï¼å¼åä½éªé£è·\n\nç¹æ§                     è§£å³çé®é¢                   react 18 å¯¹æ¯\nactions api            è¡¨åç¶æç®¡çæ ·æ¿ä»£ç               æå¨å¤ç loading/error ç¶æ\nuse() hook             ç´æ¥æ¶è´¹ promise/suspense   é useeffect + ç¶æç®¡ç\nèªå¨è®°å¿åç¼è¯å¨               æå¨ usememo ä¼åè´æ         å¼åèéæ¾å¼è®°å¿å\nåç document metadata   å¨æä¿®æ¹ <title> éç¬¬ä¸æ¹åº      ä¾èµ react-helmet\nèµæºé¢å è½½ api              å³é®èµæºå è½½ä¼åç¢çå             æå¨ link rel=preload\n\n\n# next.js 14 vs next.js 15 æ ¸å¿å·®å¼\n\nè½åæ¨¡å          next.js 14                          **next.js 15 **\nreact åºç¡      react 18.3                          react 19 (é¦ä¸ªå®æ¹éæçæ¬)\næ¸²æå¼æ          pages router + app router å±å­        app router ä¸ºé»è®¤æ¨¡å¼\næ°æ®è·å          getserversideprops/getstaticprops   actions + use() ä¸»å¯¼\nåæ°æ®å¤ç         generatemetadata å½æ°                 åç <title> ç»ä»¶æ¯æ\nèµæºä¼å          next/image/next/font                æ´å react 19 é¢å è½½ api\nä¸­é´ä»¶           middleware.ts åºäº edge runtime       æ¯æ node.js è¿è¡æ¶\næåå·¥å·          webpack (é»è®¤) / turbopack (å¯é)       turbopack ä¸ºé»è®¤æå»ºå¼æ\nå¢ééæçæ        revalidate å­æ®µæ§å¶                     å¨æ isrï¼æè¯·æ±æµéè§¦åéå»º\nmonorepo æ¯æ   éæå¨éç½® turbo æ nx                    åç½® turborepo éæ\né¨ç½²éé          vercel/netlify/node æå¡å¨             æ°å¢ serverless å½æ°å·å¯å¨ä¼å\n\n\n# next.js\n\nnext.js æ¯ä¸ä¸ªåºäº react çå¨æ åç«¯æ¡æ¶ï¼æ ¸å¿ç®æ æ¯ç®åé«æ§è½ web åºç¨çå¼åï¼å°¤å¶è§£å³ react ç seo å¼±ãé¦å±å è½½æ¢ç­é®é¢ï¼ãå®éè¿å¼ç®±å³ç¨çåè½ï¼å¦æå¡ç«¯æ¸²æãè·¯ç±ãæåä¼åç­ï¼å¤§å¹æåå¼åæçã\n\n----------------------------------------\n\n\n# next.js æ ¸å¿è§£å³çé®é¢\n\nä¼ ç» react (csr - client-side rendering) çé®é¢ï¼\n\n * è¿ç¨ï¼ æµè§å¨ä¸è½½ä¸ä¸ªè¿ä¹ç©ºç html â ä¸è½½åºå¤§ç js bundle â js æ§è¡ â react æ¸²æé¡µé¢åå®¹ã\n * è´å½ä¼¤ï¼\n   * seo ä¸åå¥½ï¼ æç´¢å¼æç¬è«çå°çæ¯ç©º html æå è½½å¨ç»ï¼æ æ³æåææåå®¹ã\n   * é¦å±å è½½æ¢ (fcp/lcp)ï¼ ç¨æ·éè¦ç­å¾ js ä¸è½½æ§è¡å®æè½çå°ä¸»è¦åå®¹ï¼ä½éªå·®ã\n   * ä½ç«¯è®¾å¤ä½éªå·®ï¼ js è§£æåæ§è¡å¨æ§è½å¼±çè®¾å¤ä¸èæ¶æ´é¿ã\n\nnext.js çè§£å³æ¹æ¡ï¼ æå¡ç«¯æ¸²æ (ssr) ä¸ éæç«ç¹çæ (ssg)\n\n * ssr (server-side rendering) - å¨æåå®¹å®æ¶æ¸²æï¼\n   * è¿ç¨ï¼ ç¨æ·è¯·æ± â next.js æå¡å¨å®æ¶æ§è¡ react ç»ä»¶ï¼è·åæ°æ® â çæåå«å®æ´åå®¹ç html åéç»æµè§å¨ â æµè§å¨ç«å³å±ç¤ºåå®¹ â react åâæ³¨æ°´â(hydrate) æ¥ç®¡äº¤äºã\n   * ä¼å¿ï¼\n     * å®ç¾ seoï¼ ç¬è«æ¿å°çæ¯åå«å®æ´æ°æ®ç htmlã\n     * ç¬é´é¦å±ï¼ ç¨æ·ç¬¬ä¸æ¶é´çå°å®æ´åå®¹ï¼æ éç­å¾ js æ§è¡ã\n     * éåï¼ ç¨æ·ä»ªè¡¨çãå®æ¶æ°æ®é¡µé¢ãä¸ªæ§ååå®¹é¡µï¼éè¦ç¥éç¨æ·æ¯è°ï¼ã\n * ssg (static site generation) - æå»ºæ¶é¢æ¸²æï¼\n   * è¿ç¨ï¼ å¨ npm run build æ¶ï¼next.js æåæ§è¡ react ç»ä»¶ï¼è·åæ°æ® â çæçº¯éæ html/css/js æä»¶ â é¨ç½²å° cdnã\n   * ä¼å¿ï¼\n     * æè´æ§è½ï¼ cdn ç´æ¥è¿åé¢æ¸²æå¥½ç htmlï¼éåº¦æå¿«ã\n     * è¶é«æ©å±æ§ï¼ cdn è½»æ¾åºå¯¹é«å¹¶åï¼ææ¬ä½ã\n     * å®å¨æ§é«ï¼ éææä»¶æ æå¡å¨è¿è¡æ¶é£é©ã\n     * éåï¼ åå®¢ãææ¡£ãè¥éé¡µãçµåäº§ååè¡¨/è¯¦æé¡µï¼æ°æ®ååä¸é¢ç¹ï¼ã\n * isr (incremental static regeneration) - ssg çæºè½åçº§ï¼\n   * è¿ç¨ï¼ å¨ ssg åºç¡ä¸ï¼å¯ä»¥ä¸ºæ¯ä¸ªé¡µé¢è®¾ç½®ä¸ä¸ª revalidate æ¶é´ï¼ç§ï¼ãé¦æ¬¡è®¿é®è§¦åæå»ºï¼ä¹åå¨è®¾å®çæ¶é´é´éåï¼è®¿é®ä»è¿åç¼å­çéæé¡µé¢ï¼è¶è¿æ¶é´åçé¦æ¬¡è®¿é®ï¼next.js å¨åå°å¼æ­¥éæ°çæè¯¥é¡µé¢ï¼ä¸æ¬¡è®¿é®å¾å°æ°é¡µé¢ï¼åæ¶æ§é¡µé¢ä»å¯è¢«è®¿é®ï¼æ ä¸­æ­ï¼ã\n   * ä¼å¿ï¼ å¼å· ssg çéåº¦ä¸æ¥è¿ ssr çæ°æ®æ°é²åº¦ï¼æ éå¨ç«éå»ºã\n   * éåï¼ æ°é»èµè®¯ãååä»·æ ¼ï¼åè®¸ç­æå»¶è¿ï¼ãç¨æ·çæåå®¹ï¼ugcï¼åè¡¨é¡µã\n\næ»ç»ï¼next.js è®©ä½ æééæ©æ¸²ææ¹å¼ï¼ä»æ ¹æ¬ä¸è§£å³ seo åé¦å±æ§è½ç¶é¢ã\n\n\n# 2. è§£å³è·¯ç±éç½®ç¹çï¼æä»¶å³è·¯ç± (file-system based routing)\n\nä¼ ç» react çé®é¢ï¼\n\n * éè¦æå¨å®è£ react-router-dom åºã\n * éè¦ç¼åå¤æçè·¯ç±éç½®æä»¶ (<routes>, <route>, <link>)ï¼å®ä¹è·¯å¾ä¸ç»ä»¶çæ å°å³ç³»ã\n * åµå¥è·¯ç±ãå¨æè·¯ç±ãè·¯ç±å®å«ç­éç½®è¾ç¹çã\n\nnext.js çè§£å³æ¹æ¡ï¼\n\n * çº¦å®ä¼äºéç½®ï¼ å¨ pages ç®å½ä¸çæä»¶ç»æèªå¨æ å°ä¸º url è·¯ç±ã\n   * pages/index.js â /\n   * pages/about.js â /about\n   * pages/blog/index.js â /blog\n   * pages/blog/[slug].js â /blog/:slug (e.g., /blog/nextjs-is-awesome)\n   * pages/user/[id]/profile.js â /user/:id/profile (åµå¥å¨æè·¯ç±)\n * æ éæå¨éç½®ï¼ åå»ºæä»¶å³åå»ºè·¯ç±ï¼æå¤§ç®åå¼åæµç¨ã\n * åç½® <link>ï¼ æä¾é«æ§è½çå®¢æ·ç«¯å¯¼èªï¼æ æ´é¡µå·æ°ï¼ã\n * èªå¨ä»£ç åå²ï¼ æ¯ä¸ªé¡µé¢èªå¨çæç¬ç«ç js bundleï¼æéå è½½ã\n\næ»ç»ï¼æä»¶å³è·¯ç±æ¯ next.js æç´è§ãæé«æçç¹æ§ä¹ä¸ï¼æ¾èæåå¼åéåº¦åä»£ç å¯ç»´æ¤æ§ã\n\n----------------------------------------\n\n\n# 3. è§£å³æå»ºä¼åå¤æï¼å¼ç®±å³ç¨çä¼åå·¥å·é¾\n\nä¼ ç» react (cra) çé®é¢ï¼\n\n * è½ç¶å°è£äº webpack éç½®ï¼ä½æ·±åº¦å®å¶ï¼å¦ä¿®æ¹ loaderãpluginãååç­ç¥ï¼éè¦ ejectï¼ä¸å¯éï¼æä½¿ç¨ react-app-rewired ç­ç¬¬ä¸æ¹å·¥å·ï¼é¨æ§é«ã\n * æ§è½ä¼åï¼å¦ä»£ç åå²ãæå è½½ãå¾çä¼åï¼éè¦å¼åèæå¨éç½®æéæé¢å¤åºã\n\nnext.js çè§£å³æ¹æ¡ï¼\n\n * é¶éç½®ä¼åï¼\n   * èªå¨ä»£ç åå²ï¼ åºäºé¡µé¢åå¨æ import()ã\n   * swc ç¼è¯å¨ï¼ æ¿ä»£ babel + terserï¼ç¼è¯éåº¦å¿« 17 åä»¥ä¸ï¼æ¯æ rust æä»¶ã\n   * image ç»ä»¶ (next/image): èªå¨ä¼åå¾çï¼æ ¼å¼è½¬æ¢ - webp/avifãå°ºå¯¸è°æ´ãæå è½½ï¼ï¼å¤§å¹æå lcp ææ åèçå¸¦å®½ã\n   * font ç»ä»¶ (next/font): èªå¨æç®¡åä¼åå­ä½æä»¶ï¼æ¶é¤å¸å±åç§» (cls)ï¼æé«éç§æ§ï¼æ  google fonts è¯·æ±ï¼ã\n   * script ç»ä»¶ (next/script): ä¼åç¬¬ä¸æ¹èæ¬å è½½ç­ç¥ï¼å¦ afterinteractive, lazyonloadï¼ã\n * å¯æ©å±éç½® (next.config.js): æä¾ç®å api è¦çé»è®¤ webpack éç½®ãéç½®ç¯å¢åéãååä»£çç­ï¼æ é ejectã\n\næ»ç»ï¼next.js åç½®äºçäº§ç¯å¢æéçå ä¹æææ§è½ä¼åææ®µï¼å¼åèå¯ä»¥ä¸æ³¨äºä¸å¡é»è¾ã\n\n----------------------------------------\n\n\n# 4. è§£å³ååç«¯åç¦»çå²è£æï¼api routes (å¨æ è½å)\n\nä¼ ç» react çé®é¢ï¼\n\n * åç«¯é¡¹ç®éè¦åç¬é¨ç½²ã\n * éè¦å¦å¤æ­å»ºåç»´æ¤ä¸ä¸ªåç«¯æå¡ï¼node.js/express, python/django, go ç­ï¼æ¥æä¾ apiã\n * å¼åç¯å¢éç½® corsãä»£çç­è§£å³è·¨åé®é¢ã\n * å¢å äºé¡¹ç®å¤æåº¦ååä½ææ¬ã\n\nnext.js çè§£å³æ¹æ¡ï¼ api routes\n\n * æ¦å¿µï¼ å¨ pages/api ç®å½ä¸åå»º .js/.ts æä»¶ï¼è¯¥æä»¶é»è®¤å¯¼åºä¸ä¸ªå½æ°ï¼è¯·æ±å¤çç¨åºï¼ï¼å®å°±æ¯ä¸ä¸ª api ç«¯ç¹ã\n   * pages/api/hello.js â å¯¹åº /api/hello æ¥å£ã\n * ä¼å¿ï¼\n   * ååç«¯åé¡¹ç®ï¼ api ååç«¯é¡µé¢å¨åä¸ä¸ª next.js é¡¹ç®ä¸­ç¼åãæå»ºåé¨ç½²ã\n   * æ  cors é®é¢ï¼ åæºè¯·æ±ï¼åç«¯è°ç¨ /api/xxx å°±åè°ç¨æ¬å°å½æ°ä¸æ ·ç®åã\n   * ä½¿ç¨çæç node.js ç¯å¢ï¼ å¯ä»¥ç´æ¥è®¿é®æä»¶ç³»ç»ãæ°æ®åºï¼ormï¼ãç¯å¢åéç­ã\n   * ç®åé¨ç½²ï¼ vercel/netlify/node æå¡å¨ç­ä¸é®é¨ç½²æ´ä¸ªåºç¨ï¼åç«¯ + apiï¼ã\n * éååºæ¯ï¼ å¤çè¡¨åæäº¤ãwebhook æ¥æ¶å¨ãè½»éçº§æ°æ®åº crudãèº«ä»½éªè¯ç«¯ç¹ãä»£çç¬¬ä¸æ¹ apiï¼éèå¯é¥ï¼ç­ãä¸éåï¼ è®¡ç®å¯éåä»»å¡ãéè¦é¿è¿æ¥ï¼websocketï¼çåºæ¯ã\n\næ»ç»ï¼api routes è®© next.js å·å¤äºå¨æ è½åï¼æå¤§ç®åäºéè¦ç®ååç«¯é»è¾çåºç¨å¼åã\n\n----------------------------------------\n\n\n# æ ¸å¿ä»·å¼åæç¼\n\né®é¢é¢å      ä¼ ç» react çç¹    next.js æ ¸å¿è§£å³æ¹æ¡                      å¸¦æ¥çæ ¸å¿ä»·å¼\næ¸²æ & æ§è½   seo å·®ãé¦å±æ¢      ssr / ssg / isr                     æè´æ§è½ãseo åå¥½\nå¼åä½éª      è·¯ç±éç½®ç¹ç         æä»¶å³è·¯ç± (pages/)                      å¼åé«æãç»ææ¸æ°\næå»º & ä¼å   éç½®å¤æãä¼åéæå¨     å¼ç®±å³ç¨ä¼å (swc, image, font, script)   é«æ§è½ãæä½³å®è·µåç½®\nåºç¨æ¶æ      ååç«¯åç¦»ãé¨ç½²è¿ç»´å¤æ   api routes (pages/api/)             å¨æ ä¸ä½åãç®åé¨ç½²è¿ç»´\n\n**ä¸å¥è¯çè§£ next.jsï¼å®æ¯å¯¹ react çâçäº§ç¯å¢å¼ºåâï¼éè¿çº¦å®ä¼äºéç½®ãå¼ç®±å³ç¨çæå¡ç«¯æ¸²æ/éæçæãä¸ä½åè·¯ç±å api æ¹æ¡ï¼è®©å¼åèè½é«ææå»ºé«æ§è½ãseo åå¥½ãä½éªåè¶çç°ä»£å web åºç¨ã",charsets:{cjk:!0}},{title:"æ­£åè¡¨è¾¾å¼",frontmatter:{},regularPath:"/regular/regular.html",relativePath:"regular/regular.md",key:"v-fdfdbb42",path:"/regular/regular.html",headers:[{level:2,title:"æè·ç»ãéæè·ç»ãå½åæè·ç»",slug:"æè·ç»ãéæè·ç»ãå½åæè·ç»",normalizedTitle:"æè·ç»ãéæè·ç»ãå½åæè·ç»",charIndex:56}],lastUpdated:"2/6/2023, 6:11:44 PM",lastUpdatedTimestamp:1675678304e3,headersStr:"æè·ç»ãéæè·ç»ãå½åæè·ç»",content:"# æ­£åè¡¨è¾¾å¼\n\nhttps://juejin.cn/post/6844903487155732494\n\n\n# æè·ç»ãéæè·ç»ãå½åæè·ç»\n\nhttps://segmentfault.com/a/1190000021043947\n\n// æè·ç»\n'1,2,3,4'.split(/(,)/)\n// ['1', ',', '2', ',', '3', ',', '4']\n\n// éæè·ç»\n'1,2,3,4'.split(/(?:,)/) \n // ['1', '2', '3', '4']\n\n// å½ååç»æè·ï¼ES2018åè®¸å½åæè·ç»ä½¿ç¨ç¬¦å·?<name>, å¯ä»¥æå®å°æ¬å·ä¸­å¹éåå®¹çåç§°æ¾å¨groupsé\nconst reg = /(\\d{4})-(\\d{2})-(\\d{2})/u;\nconst matched = reg.exec('2018-12-31');\nmatched[0];  // 2018-12-12\nmatched[1];  // 2018\nmatched[2];  // 12\nmatched[3];  // 31\n\nconst reg = /(?<year>\\d{4})-(?<month>\\d{2})-(?<day>\\d{2})/u;\nconst matched = reg.exec('2018-12-31');\nmatched.groups.year;   // 2018\nmatched.groups.month;  // 12\nmatched.groups.day;    // 31\n",normalizedContent:"# æ­£åè¡¨è¾¾å¼\n\nhttps://juejin.cn/post/6844903487155732494\n\n\n# æè·ç»ãéæè·ç»ãå½åæè·ç»\n\nhttps://segmentfault.com/a/1190000021043947\n\n// æè·ç»\n'1,2,3,4'.split(/(,)/)\n// ['1', ',', '2', ',', '3', ',', '4']\n\n// éæè·ç»\n'1,2,3,4'.split(/(?:,)/) \n // ['1', '2', '3', '4']\n\n// å½ååç»æè·ï¼es2018åè®¸å½åæè·ç»ä½¿ç¨ç¬¦å·?<name>, å¯ä»¥æå®å°æ¬å·ä¸­å¹éåå®¹çåç§°æ¾å¨groupsé\nconst reg = /(\\d{4})-(\\d{2})-(\\d{2})/u;\nconst matched = reg.exec('2018-12-31');\nmatched[0];  // 2018-12-12\nmatched[1];  // 2018\nmatched[2];  // 12\nmatched[3];  // 31\n\nconst reg = /(?<year>\\d{4})-(?<month>\\d{2})-(?<day>\\d{2})/u;\nconst matched = reg.exec('2018-12-31');\nmatched.groups.year;   // 2018\nmatched.groups.month;  // 12\nmatched.groups.day;    // 31\n",charsets:{cjk:!0}},{title:"React Hooks",frontmatter:{title:"React Hooks",date:"2021-06-21T11:27:54.000Z",categories:"React"},regularPath:"/react/react-hooks.html",relativePath:"react/react-hooks.md",key:"v-fa561802",path:"/react/react-hooks.html",headers:[{level:2,title:"å½æ°ç»ä»¶ä¸ç±»ç»ä»¶çåºå«",slug:"å½æ°ç»ä»¶ä¸ç±»ç»ä»¶çåºå«",normalizedTitle:"å½æ°ç»ä»¶ä¸ç±»ç»ä»¶çåºå«",charIndex:128},{level:3,title:"å½æ°å¼ç»ä»¶",slug:"å½æ°å¼ç»ä»¶",normalizedTitle:"å½æ°å¼ç»ä»¶",charIndex:144},{level:3,title:"ç±»ç»ä»¶",slug:"ç±»ç»ä»¶",normalizedTitle:"ç±»ç»ä»¶",charIndex:133},{level:2,title:"ä»ä¹æ¯ React Hooks",slug:"ä»ä¹æ¯-react-hooks",normalizedTitle:"ä»ä¹æ¯ react hooks",charIndex:380},{level:3,title:"useState",slug:"usestate",normalizedTitle:"usestate",charIndex:621},{level:3,title:"useEffect",slug:"useeffect",normalizedTitle:"useeffect",charIndex:633},{level:3,title:"useReducer",slug:"usereducer",normalizedTitle:"usereducer",charIndex:647},{level:3,title:"useContext",slug:"usecontext",normalizedTitle:"usecontext",charIndex:661},{level:3,title:"useMemo",slug:"usememo",normalizedTitle:"usememo",charIndex:675},{level:3,title:"memo æ¹æ³",slug:"memo-æ¹æ³",normalizedTitle:"memo æ¹æ³",charIndex:6747},{level:3,title:"useCallback",slug:"usecallback",normalizedTitle:"usecallback",charIndex:686},{level:3,title:"useRef",slug:"useref",normalizedTitle:"useref",charIndex:701}],lastUpdated:"5/22/2025, 11:29:40 AM",lastUpdatedTimestamp:174788458e4,headersStr:"å½æ°ç»ä»¶ä¸ç±»ç»ä»¶çåºå« å½æ°å¼ç»ä»¶ ç±»ç»ä»¶ ä»ä¹æ¯ React Hooks useState useEffect useReducer useContext useMemo memo æ¹æ³ useCallback useRef",content:"# React Hooks\n\nReact æ¡æ¶å¨ v16.8 çæ¬å¼å¥äºå¨æ°ç APIï¼å«å React Hooksï¼é¢ è¦äºä»¥åçç¨æ³ãReact Hooks çæææ¯ï¼ç»ä»¶å°½éåæçº¯å½æ°ï¼å¦æéè¦å¤é¨åè½åå¯ä½ç¨ï¼å°±ç¨é©å­æå¤é¨ä»£ç \"é©\"è¿æ¥ã\n\n\n# å½æ°ç»ä»¶ä¸ç±»ç»ä»¶çåºå«\n\n\n# å½æ°å¼ç»ä»¶\n\n * å½æ°å¼ç¼ç¨ææ³\n\n * ä¸éè¦å£°æ classï¼ä¸éè¦ä½¿ç¨ thisï¼æ²¡æçå½å¨ææ¹æ³ï¼æ²¡æå®ä¾åãä»£ç ç®æ´ï¼å·ææ´ä½³çæ§è½ã\n\n * å¯ä»¥åææ å¯ä½ç¨ççº¯å½æ°ã\n\n * æ²¡æ shouldComponentUpdateï¼ä¸è½é¿åéå¤æ¸²æã\n\n\n# ç±»ç»ä»¶\n\n * é¢åå¯¹è±¡ç¼ç¨ææ³\n * åå«çå½å¨æï¼stateï¼thisï¼åè½æ´å å®åï¼ä½æ¯ä¸è½ä¿è¯ this æåæ­£ç¡®æ§\n * ä»£ç è¾ä¸ºç¹çå¤æï¼ä¾å¦çå½å¨æå½æ°ä¸­å­å¨å¤ä¸ªä¸ç¸å¹²çä¸å¡é»è¾\n\n\n# ä»ä¹æ¯ React Hooks\n\nReact Hooks è§£æ\n\n> React Hookså°±æ¯å å¼ºççå½æ°å¼ç»ä»¶ï¼è®©å½æ°åç»ä»¶å¯ä»¥å­å¨ç¶æï¼å¯ä»¥æ¥æå¤çå¯ä½ç¨çè½åãè®©å¼åèä¸ä½¿ç¨ç±»ç»ä»¶çæåµä¸å®ç°ç¸åçåè½\n> \n> å¯ä½ç¨ï¼ä¸æ¯ç¨æ¥è½¬æ¢è§å¾çä»£ç ï¼ä¾å¦ ajax è¯·æ±ï¼è·å domï¼æä»¬ä¸è¬å¨çå½å¨æä¸­å¤çè¿äºä»£ç ã\n\nHooks æä¸ºé©å­ï¼React Hooks å°±æ¯ä¸å é©å­å½æ°ï¼React éè¿è¿äºé©å­å½æ°å¯¹å½æ°åç»ä»¶è¿è¡å¢å¼ºï¼ä¸åçé©å­å½æ°æä¾ä¸åçåè½ã\n\n * useState\n * useEffects\n * useReducer\n * useContext\n * useMemo\n * useCallback\n * useRef\n\n\n# useState\n\n> ä¸ºä»ä¹éè¦ useStateï¼å ä¸ºä¸è¬å½æ°åé¨çåéå¨ä½¿ç¨å®å°±ä¼è¢«éæ¾æï¼useState åé¨ä½¿ç¨é­åæ¥å®ç°ä¿å­ç¶ææ°æ®ï¼ç¨äºä¸ºå½æ°ç»ä»¶å¼å¥ç¶æ\n\n * æ¥æ¶å¯ä¸çåæ°å³ç¶æåå§å¼ï¼å¯ä»¥ä¸ºä»»ææ°æ®ç±»å\n * è¿åå¼ä¸ºæ°ç»ï¼å­å¨ç¶æå¼åæ´æ¹ç¶æçæ¹æ³ï¼æ¹æ³åçº¦å®ä¸º set å¼å¤´\n * æ¹æ³å¯ä»¥è¢«è°ç¨å¤æ¬¡ç¨ä»¥ä¿å­ä¸åçç¶æå¼\n * åæ°å¯ä»¥æ¯ä¸ä¸ªå½æ°ï¼å½æ°è¿åå¼å°±æ¯åå§ç¶æãå½æ°åªä¼è¢«è°ç¨ä¸æ¬¡ï¼ç¨äºåå§å¼ä¸ºå¨æå¼çæåµ\n\nimport React, { useState } from 'react';\n\nfunction Example(props) {\n  const [foo, setFoo] = useState(() => {\n    // è·ååå§å¼ foo è¿ä¸æ®µä»£ç åªéå¨ç»ä»¶åå§åæ¶æ§è¡ä¸æ¬¡ï¼å¯ä»¥åå¨å½æ°é\n    return props.foo || 'xx'\n  });\n  const [count, setCount] = useState(0);\n  const [person, setPerson] = useState({name: 'å¼ ä¸', age: 20});\n\n  return (\n    <div>\n      <p>You clicked {count} times</p>\n      <button onClick={() => setCount(count + 1)}>+1</button>\n\t\t\t// æ³¨æè§£æè¿ç§åæ³ {name: 'å¼ ä¸', age: 20, name:''æå} name ä¼åæåä¸é¡¹\n\t\t\t<button onClick={() => setPerson({...person, name:'æå'})}>setPerson</button>\n    </div>\n  );\n}\n\n\n> å¨ç¹å»æé®å count + 1ï¼ç»ä»¶ç¶ææ¹åï¼ä¸ºäºå¨é¡µé¢ä¸å±ç¤ºç»ä»¶ä¼éæ°æ¸²æï¼æ­¤æ¶ç¶ææ°æ®ä¼è¢«ä¿çï¼useState çä½ç¨å°±ä½ç°äºåºæ¥ã\n\n * è®¾ç½®ç¶æå¼æ¹æ³çåæ°å¯ä»¥æ¯ä¸ä¸ªå¼ä¹å¯ä»¥æ¯ä¸ä¸ªå½æ°\n * è®¾ç½®ç¶æå¼æ¹æ³çæ¹æ³æ¬èº«æ¯å¼æ­¥ç\n\nimport React, { useState } from 'react';\n\nfunction Example(props) {\n  const [count, setCount] = useState(0);\n\t\n  function handleCount() {\n    setCount(count => count + 1);\n    document.title = count; // setCountå¼æ­¥,æä»¥ä¼åæ§è¡è¿å¥,è§£å³åæ³æ¯æ¾å¨setCountæ¹æ³é\n  }\n  \n  return (\n    <div>\n      <p>You clicked {count} times</p>\n      <button onClick={handleCount}>+1</button>\n    </div>\n  );\n}\n\n\n\n# useEffect\n\n> ç±»ç»ä»¶å¨çå½å¨æä¸­å¤çå¯ä½ç¨ï¼å½æ°åç»ä»¶ä½¿ç¨ useEffect æ¥å¤ç\n> \n> å¯ä»¥æ useEffect çå componentDidMountï¼componentDidUpdateï¼componentWillUnmount çç»å\n> \n> è§£å³çé®é¢ï¼ç¸å¹²ä¸å¡é»è¾å½ç½®å°åä¸å¯ä½ç¨å½æ°ä¸­ï¼ç®åéå¤ä»£ç ï¼ä½¿ç»ä»¶åé¨ä»£ç æ´å æ¸æ°\n\n# æ§è¡æ¶æº\n\nuseEffect å¿ç¶ä¼å¨ render çæ¶åæ§è¡ä¸æ¬¡ï¼å¶ä»çè¿è¡æ¶æºåå³äºä»¥ä¸æåµï¼\n\n * ææ²¡æç¬¬äºä¸ªåæ°ãuseEffect hook æ¥åä¸¤ä¸ªåæ°ï¼ç¬¬ä¸ä¸ªæ¯è¦æ§è¡çä»£ç ï¼ç¬¬äºä¸ªæ¯ä¸ä¸ªæ°ç»ï¼æå®ä¸ç»ä¾èµçåéï¼å¶ä¸­çåéåçååæ¶ï¼æ­¤ effect ä¼éæ°æ§è¡ä¸æ¬¡ã\n * ææ²¡æè¿åå¼ã useEffect çæ§è¡ä»£ç ä¸­å¯ä»¥è¿åä¸ä¸ªå½æ°ï¼å¨æ¯ä¸æ¬¡æ°ç render è¿è¡åæèç»ä»¶ unmount ä¹æ¶ï¼é½ä¼æ§è¡æ­¤å½æ°ï¼è¿è¡æ¸çå·¥ä½ã\n\nä¾å¦ï¼\n\n * useEffect(() => {})ï¼å¨ componentDidMountï¼componentDidUpdate æ§è¡\n * useEffect(() => {}, [])ï¼ç©ºæ°ç»ï¼åªå¨ componentDidMount æ§è¡\n * useEffect(() => {}, [count])ï¼å¨ componentDidMountï¼componentDidUpdateï¼countååï¼ æ§è¡\n * useEffect(() => () => {})ï¼è¿åå½æ°å¨ componentWillUnmount æ§è¡\n\nåæ¥çç±»ç»ä»¶åæ³\n\nclass Example extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      count: 0\n    };\n  }\n\n  componentDidMount() {\n    document.title = `You clicked ${this.state.count} times`;\n  }\n\n  componentDidUpdate() {\n    document.title = `You clicked ${this.state.count} times`;\n  }\n  \n  componentWillUnmount() {\n    // å¸è½½åè¿è¡ clear()\n  }\n\n  render() {\n    return (\n      <div>\n        <p>You clicked {this.state.count} times</p>\n        <button onClick={() => this.setState({ count: this.state.count + 1 })}>\n          Click me\n        </button>\n      </div>\n    );\n  }\n}\n\n\ncomponentDidMountåcomponentDidUpdateä¸­çä»£ç æ¯ä¸æ ·çãå¯ä»¥ä½¿ç¨ useEffect æ¥æ¹åã\n\nimport React, { useState, useEffect } from 'react';\n\nfunction Example() {\n  const [count, setCount] = useState(0);\n\n  useEffect(() => {\n    document.title = `You clicked ${count} times`;\n    return function clear() {\n      // clear\n    }\n  });\n\n  return (\n    <div>\n      <p>You clicked {count} times</p>\n      <button onClick={() => setCount(count + 1)}>\n        Click me\n      </button>\n    </div>\n  );\n}\n\n\næçæåµä¸æä»¬å¸æåªæå¨ state æ props æ¹åçæåµä¸ææ§è¡ãå¦ææ¯Class Componentï¼æä»¬ä¼è¿ä¹åï¼\n\ncomponentDidUpdate(prevProps, prevState) {\n  if (prevState.count !== this.state.count) {\n    document.title = `You clicked ${this.state.count} times`;\n  }\n}\n\n\nä½¿ç¨ Hook çæ¶åï¼æä»¬åªéè¦ä¼ å¥ç¬¬äºä¸ªåæ°ï¼\n\nuseEffect(() => {\n  document.title = `You clicked ${count} times`;\n}, [count]); // åªæå¨ count æ¹åçæ¶åææ§è¡ Effect\n\n// ç¬¬äºä¸ªåæ°æ¯ä¸ä¸ªæ°ç»ï¼å¯ä»¥ä¼ å¤ä¸ªå¼ï¼ä¸è¬ä¼å° Effect ç¨å°çææ props å state é½ä¼ è¿å»ã\n\n\n# useEffect ç»åå¼æ­¥å½æ°\n\nuseEffect ä¸­çåæ°å½æ°ä¸è½æ¯å¼æ­¥å½æ°ï¼å ä¸º useEffect è¦è¿åæ¸çèµæºçå½æ°ï¼å¦ææ¯å¼æ­¥å½æ°å°±åæäºè¿åPromise\n\n// err\nuseEffect(async () => {\n  const result = axios.get();\n})\n\n// ok\nuseEffect(() => {\n  (async () => {\n    const result = axios.get();\n  })()\n})\n\n\n\n# useReducer\n\n> useReducer æ¯å¦ä¸ç§è®©å½æ°ç»ä»¶ä¿å­ç¶æçæ¹å¼ï¼ç±»ä¼¼äº redux\n\nimport React, { useReducer } from 'react';\n\nfunction reducer (state, action) {\n  swtich (action.type) {\n    case 'increment':\n    \treturn state + 1;\n    case 'decrement':\n    \treturn state - 1;\n    default:\n    \treturn state;\n  }\n}\n\nfunction App () {\n  const [count, dispatch] = useReducer(reducer, 0);\n  return (\n    <div>\n      <span>{count}</span>\n      <button onClick={() => dispatch({type: 'increment'})}>+1</button>\n      <button onClick={() => dispatch({type: 'decrement'})}>-1</button>\n    </div>\n  )\n}\n\n\n\n# useContext\n\n> ä¸è¬ç»ä»¶ä¼ å¼å¯ä»¥ä½¿ç¨ propsï¼ä½æ¯æ¶åå¾å¤å±çº§æ¶å¯ä»¥ä½¿ç¨ context æ¥è§£å³\n\n * React.createContext\n\ncont MyContext  = React.createContext(defaultValue);\n\n\nåå»ºä¸ä¸ª Context å¯¹è±¡ãå½ React æ¸²æä¸ä¸ªè®¢éäºè¿ä¸ª Context å¯¹è±¡çç»ä»¶ï¼è¿ä¸ªç»ä»¶ä¼ä»ç»ä»¶æ ä¸­ç¦»èªèº«æè¿çé£ä¸ªå¹éç Provider ä¸­è¯»åå°å½åç context å¼ã\n\n * Context.Provider\n\n<MyContext.Provider value={/* æä¸ªå¼ */}>\n\n\næ¯ä¸ª Context å¯¹è±¡é½ä¼è¿åä¸ä¸ª Provider React ç»ä»¶ï¼å®åè®¸æ¶è´¹ç»ä»¶è®¢é context çååã\n\nProvider æ¥æ¶ä¸ä¸ª value å±æ§ï¼ä¼ éç»æ¶è´¹ç»ä»¶ãä¸ä¸ª Provider å¯ä»¥åå¤ä¸ªæ¶è´¹ç»ä»¶æå¯¹åºå³ç³»ãå¤ä¸ª Provider ä¹å¯ä»¥åµå¥ä½¿ç¨ï¼éå±çä¼è¦çå¤å±çæ°æ®ã\n\nå½ Provider ç value å¼åçååæ¶ï¼å®åé¨çæææ¶è´¹ç»ä»¶é½ä¼éæ°æ¸²æã\n\n * Context.Consumer\n\n<MyContext.Consumer>\n  {value => /* åºäº context å¼è¿è¡æ¸²æ*/}\n</MyContext.Consumer>\n\n\nä¸ä¸ªç®åçä¾å­\n\nimport React, { createContext } from 'react';\n\nconst countContext = createContext();\n\nfunction App() {\n  return (\n  \t<countContext.Provider value={100}>\n      <Foo />\n    </countContext.Provider>\n  )\n}\n\nfunction Foo() {\n\treturn (\n  \t<countContext.Consumer>\n      { value => <div>{value}</div> }\n    </countContext.Consumer>\n  )\n}\n\n\n> ä½¿ç¨ useContext å¨è·¨ç»ä»¶å±çº§è·åæ°æ®æ¶ç®åè·åæ°æ®çä»£ç \n\nimport React, { createContext, useContext } from 'react';\n\nconst countContext = createContext();\n\nfunction App() {\n  return (\n  \t<countContext.Provider value={100}>\n      <Foo />\n    </countContext.Provider>\n  )\n}\n\nfunction Foo() {\n  const value = useContext(countContext);\n  return <div>{value}</div>\n}\n\n\n\n# useMemo\n\n> ç±»ä¼¼äº vue ä¸­çè®¡ç®å±æ§ï¼å¯ä»¥çæµæä¸ªå¼çååï¼æ ¹æ®ååè®¡ç®æ°å¼ã\n> \n> useMemo ä¼ç¼å­è®¡ç®ç»æï¼å¦æçæµå¼æ²¡æåçååï¼å³ä½¿ç»ä»¶éæ°æ¸²æï¼ä¹ä¸ä¼éæ°è®¡ç®ãæ­¤è¡ä¸ºå¯ä»¥æå©äºé¿åå¨æ¯ä¸ªæ¸²æä¸è¿è¡æè´µçè®¡ç®ã\n\nimport React, { useState, useMemo } from 'react';\n\nfunction App() {\n  const [count, setCount] = useState(0);\n  const result = useMemo(() => {\n    return count * 2;\n  }, [count]);\n  return (\n  \t<div>\n      <span>{count} {result}</span>\n      <button onClick={() => setCount(count + 1)}>+1</button>\n    </div>\n  )\n}\n\n\n\n# memo æ¹æ³\n\n> æ§è½ä¼åï¼å¦ææ¬ç»ä»¶ä¸­çæ°æ®æ²¡æåçååï¼é»æ­¢ç»ä»¶æ´æ°ãç±»ä¼¼äºç±»ç»ä»¶ä¸­ç PureComponent å shouldComponentUpdate\n\nimport React, { useState, memo } from 'react';\n\nfunction App() {\n  const [count, setCount] = useState(0);\n  return (\n  \t<div>\n    \t<span>{count}</span>\n\t\t\t<button onClick={() => setCount(count + 1)}>+1</button>\n\t\t\t<Foo />\n    </div>\n  )\n}\n\nconst Foo = memo(function Foo() {\n  console.log(\"Fooç»ä»¶éæ°æ¸²æäº\");\n  return <div>ææ¯Fooç»ä»¶</div>\n})\n\nexport default App;\n\n// å½ç¹å»æé®æ¶ï¼æ­£å¸¸æ¥è¯´ App ç»ä»¶ä¼è¢«éæ°æ¸²æï¼ç¸åºå° Foo ç»ä»¶ä¹è¢«éæ°æ¸²æï¼ä½æ¯ä½¿ç¨ memo åï¼Foo ç»ä»¶ä¸­çæ°æ®æ²¡æåçååï¼æä»¥ä¸ä¼éæ°æ¸²æã\n\n\n\n# useCallback\n\n> useCallback æ¯ React ä¸­çä¸ä¸ª Hookï¼å®çæ ¸å¿ä½ç¨æ¯ç¼å­å½æ°å¼ç¨ï¼é¿åç»ä»¶éæ°æ¸²ææ¶éæ°åå»ºå½æ°ã\n\n 1. useCallback æ¥åä¸¤ä¸ªåæ°ï¼\n\nä¸ä¸ªéè¦ç¼å­çå½æ°ï¼ ä¸ä¸ªä¾èµæ°ç»ï¼dependenciesï¼ã åªæå½ä¾èµé¡¹åçååæ¶ï¼æä¼è¿åæ°çå½æ°ï¼å¦åï¼è¿åä¸ä¸æ¬¡ç¼å­çå½æ°ã\n\nconst memoizedCallback = useCallback(\n  () => {\n    // å½æ°é»è¾ï¼ä¾èµæäºåéï¼ä¾å¦ state æ propsï¼\n  },\n  [dependency1, dependency2] // ä¾èµé¡¹æ°ç»\n);\n\n\n 2. è§£å³çé®é¢: é¿åå­ç»ä»¶ä¸å¿è¦çæ¸²æ\n\nå½ç¶ç»ä»¶ä¼ éä¸ä¸ªå½æ°ä½ä¸º props ç»å­ç»ä»¶ï¼å°¤å¶æ¯ç¨ React.memo ä¼åçå­ç»ä»¶ï¼æ¶ï¼å¦æç¶ç»ä»¶æ¯æ¬¡æ¸²æé½çææ°å½æ°ï¼å­ç»ä»¶ä¼è®¤ä¸º props ååï¼ä»èè§¦åéæ°æ¸²æã useCallback å¯ä»¥ç¼å­å½æ°ï¼ç¡®ä¿å­ç»ä»¶åªå¨ä¾èµé¡¹ååæ¶æä¼éæ°æ¸²æã jsx\n\n// ç¶ç»ä»¶\nconst Parent = () => {\n  const [count, setCount] = useState(0);\n  // ä½¿ç¨ useCallback ç¼å­å½æ°\n  const handleClick = useCallback(() => {\n    console.log(\"Count:\", count);\n  }, [count]); // ä¾èµ count\n  return <Child onClick={handleClick} />;\n};\n// å­ç»ä»¶ï¼ç¨ React.memo ä¼åï¼\nconst Child = React.memo(({ onClick }) => {\n  // åªæå¨ onClick å½æ°ååæ¶æä¼éæ°æ¸²æ\n  return <button onClick={onClick}>Click</button>;\n});\n\n\n 3. æ§è½ä¼åçä»£ä»·\n\nuseCallback æ¬èº«éè¦åå­ç¼å­å½æ°ï¼æ»¥ç¨å¯è½å¯¼è´æ§è½åèä¸éã\n\nåªå¨å¿è¦åºæ¯ä½¿ç¨ï¼\n\n * å½æ°ä½ä¸º props ä¼ éç» React.memo ä¼åçå­ç»ä»¶ï¼\n * å½æ°ä½ä¸ºå¶ä» Hook çä¾èµé¡¹ï¼å¦ useEffectï¼ï¼\n * éè¦ç¨³å®çå½æ°å¼ç¨ï¼ä¾å¦äºä»¶çå¬å¨çç»å®ä¸è§£ç»ï¼ã\n\n 4. ä¸ useMemo çåºå«\n\n * useCallback ç¼å­çæ¯å½æ°æ¬èº«ã\n * useMemo ç¼å­çæ¯å½æ°æ§è¡åçè¿åå¼ã\n\n// ä»£ç åè½ï¼App ç»ä»¶ä¸­ setCountï¼Foo ç»ä»¶ä¸­ resetCount\n\n// è¡¨ç°ææï¼æ¯æ¬¡ resetCount æ¶é½ä¼è¾åº \"Fooç»ä»¶éæ°æ¸²æäº\"\n\n// åå ï¼App ç»ä»¶ setCount æ¶ï¼ç»ä»¶è¢«éæ°æ¸²æï¼resetCount å½æ°ä¹éæ°çæï¼æä»¥å½ä¸ä¸ªæ°çå½æ°ä»¥ props ä¼ å¥ Foo ç»ä»¶æ¶ï¼ç¸å½äº Foo ç»ä»¶ä¸­çæ°æ®æ¹åï¼éæ°æ¸²æ\n\nimport React, { useState, memo } from 'react';\n\nfunction App() {\n  const [count, setCount] = useState(0);\n  const resetCount = () => {\n    setCount(0);\n  }\n  return (\n  \t<div>\n    \t<span>{count}</span>\n\t\t\t<button onClick={() => setCount(count + 1)}>+1</button>\n\t\t\t<Foo resetCount={resetCount}/>\n    </div>\n  )\n}\n\nconst Foo = memo(function Foo(props) {\n  console.log(\"Fooç»ä»¶éæ°æ¸²æäº\");\n  return (\n    <div>\n    \tææ¯Fooç»ä»¶\n    \t<button onClick={props.resetCount}>resetCount</button>\n    </div>\n  )\n})\n\nexport default App;\n\n\nä½¿ç¨ useCallback æ¹å resetCount\n\nconst resetCount = useCallback(() => setCount(0), [setCount]);\n// setCount ä¸ä¼æ¹åï¼resetCount ä¹ä¸ä¼æ¹å\n\n\n> æ»ç»ä¸ä¸ï¼ä½¿ç¨åºæ¯æ¯ï¼æä¸ä¸ªç¶ç»ä»¶ï¼å¶ä¸­åå«å­ç»ä»¶ï¼å­ç»ä»¶æ¥æ¶ä¸ä¸ªå½æ°ä½ä¸ºpropsï¼éå¸¸èè¨ï¼å¦æç¶ç»ä»¶æ´æ°äºï¼å­ç»ä»¶ä¹ä¼æ§è¡æ´æ°ï¼ä½æ¯å¤§å¤æ°åºæ¯ä¸ï¼æ´æ°æ¯æ²¡æå¿è¦çï¼æä»¬å¯ä»¥åå© useCallback æ¥è¿åå½æ°ï¼ç¶åæè¿ä¸ªå½æ°ä½ä¸ºpropsä¼ éç»å­ç»ä»¶ï¼è¿æ ·ï¼å­ç»ä»¶å°±è½é¿åä¸å¿è¦çæ´æ°ã\n\n\n# useRef\n\n> è·å Dom åç´ å¯¹è±¡\n\nimport React, { useRef } from 'react';\n\nfunction App() {\n  const box = useRef();\n  return (\n  \t<div ref={box}>\n      <button onClick={() => console.log(box)}>è·åDIV</button>\n    </div>\n  )\n}\n\n\n> useRefè¿æå¦ä¸ä¸ªåè½å°±æ¯ä¿å­æ°æ®ï¼è·¨ç»ä»¶å¨æï¼ï¼å³ä½¿ç»ä»¶éæ°æ¸²æï¼ä¿å­çæ°æ®ä»ç¶è¿å¨ãä¿å­çæ°æ®è¢«æ´æ¹ä¸ä¼è§¦åç»ä»¶éæ°æ¸²æã",normalizedContent:"# react hooks\n\nreact æ¡æ¶å¨ v16.8 çæ¬å¼å¥äºå¨æ°ç apiï¼å«å react hooksï¼é¢ è¦äºä»¥åçç¨æ³ãreact hooks çæææ¯ï¼ç»ä»¶å°½éåæçº¯å½æ°ï¼å¦æéè¦å¤é¨åè½åå¯ä½ç¨ï¼å°±ç¨é©å­æå¤é¨ä»£ç \"é©\"è¿æ¥ã\n\n\n# å½æ°ç»ä»¶ä¸ç±»ç»ä»¶çåºå«\n\n\n# å½æ°å¼ç»ä»¶\n\n * å½æ°å¼ç¼ç¨ææ³\n\n * ä¸éè¦å£°æ classï¼ä¸éè¦ä½¿ç¨ thisï¼æ²¡æçå½å¨ææ¹æ³ï¼æ²¡æå®ä¾åãä»£ç ç®æ´ï¼å·ææ´ä½³çæ§è½ã\n\n * å¯ä»¥åææ å¯ä½ç¨ççº¯å½æ°ã\n\n * æ²¡æ shouldcomponentupdateï¼ä¸è½é¿åéå¤æ¸²æã\n\n\n# ç±»ç»ä»¶\n\n * é¢åå¯¹è±¡ç¼ç¨ææ³\n * åå«çå½å¨æï¼stateï¼thisï¼åè½æ´å å®åï¼ä½æ¯ä¸è½ä¿è¯ this æåæ­£ç¡®æ§\n * ä»£ç è¾ä¸ºç¹çå¤æï¼ä¾å¦çå½å¨æå½æ°ä¸­å­å¨å¤ä¸ªä¸ç¸å¹²çä¸å¡é»è¾\n\n\n# ä»ä¹æ¯ react hooks\n\nreact hooks è§£æ\n\n> react hookså°±æ¯å å¼ºççå½æ°å¼ç»ä»¶ï¼è®©å½æ°åç»ä»¶å¯ä»¥å­å¨ç¶æï¼å¯ä»¥æ¥æå¤çå¯ä½ç¨çè½åãè®©å¼åèä¸ä½¿ç¨ç±»ç»ä»¶çæåµä¸å®ç°ç¸åçåè½\n> \n> å¯ä½ç¨ï¼ä¸æ¯ç¨æ¥è½¬æ¢è§å¾çä»£ç ï¼ä¾å¦ ajax è¯·æ±ï¼è·å domï¼æä»¬ä¸è¬å¨çå½å¨æä¸­å¤çè¿äºä»£ç ã\n\nhooks æä¸ºé©å­ï¼react hooks å°±æ¯ä¸å é©å­å½æ°ï¼react éè¿è¿äºé©å­å½æ°å¯¹å½æ°åç»ä»¶è¿è¡å¢å¼ºï¼ä¸åçé©å­å½æ°æä¾ä¸åçåè½ã\n\n * usestate\n * useeffects\n * usereducer\n * usecontext\n * usememo\n * usecallback\n * useref\n\n\n# usestate\n\n> ä¸ºä»ä¹éè¦ usestateï¼å ä¸ºä¸è¬å½æ°åé¨çåéå¨ä½¿ç¨å®å°±ä¼è¢«éæ¾æï¼usestate åé¨ä½¿ç¨é­åæ¥å®ç°ä¿å­ç¶ææ°æ®ï¼ç¨äºä¸ºå½æ°ç»ä»¶å¼å¥ç¶æ\n\n * æ¥æ¶å¯ä¸çåæ°å³ç¶æåå§å¼ï¼å¯ä»¥ä¸ºä»»ææ°æ®ç±»å\n * è¿åå¼ä¸ºæ°ç»ï¼å­å¨ç¶æå¼åæ´æ¹ç¶æçæ¹æ³ï¼æ¹æ³åçº¦å®ä¸º set å¼å¤´\n * æ¹æ³å¯ä»¥è¢«è°ç¨å¤æ¬¡ç¨ä»¥ä¿å­ä¸åçç¶æå¼\n * åæ°å¯ä»¥æ¯ä¸ä¸ªå½æ°ï¼å½æ°è¿åå¼å°±æ¯åå§ç¶æãå½æ°åªä¼è¢«è°ç¨ä¸æ¬¡ï¼ç¨äºåå§å¼ä¸ºå¨æå¼çæåµ\n\nimport react, { usestate } from 'react';\n\nfunction example(props) {\n  const [foo, setfoo] = usestate(() => {\n    // è·ååå§å¼ foo è¿ä¸æ®µä»£ç åªéå¨ç»ä»¶åå§åæ¶æ§è¡ä¸æ¬¡ï¼å¯ä»¥åå¨å½æ°é\n    return props.foo || 'xx'\n  });\n  const [count, setcount] = usestate(0);\n  const [person, setperson] = usestate({name: 'å¼ ä¸', age: 20});\n\n  return (\n    <div>\n      <p>you clicked {count} times</p>\n      <button onclick={() => setcount(count + 1)}>+1</button>\n\t\t\t// æ³¨æè§£æè¿ç§åæ³ {name: 'å¼ ä¸', age: 20, name:''æå} name ä¼åæåä¸é¡¹\n\t\t\t<button onclick={() => setperson({...person, name:'æå'})}>setperson</button>\n    </div>\n  );\n}\n\n\n> å¨ç¹å»æé®å count + 1ï¼ç»ä»¶ç¶ææ¹åï¼ä¸ºäºå¨é¡µé¢ä¸å±ç¤ºç»ä»¶ä¼éæ°æ¸²æï¼æ­¤æ¶ç¶ææ°æ®ä¼è¢«ä¿çï¼usestate çä½ç¨å°±ä½ç°äºåºæ¥ã\n\n * è®¾ç½®ç¶æå¼æ¹æ³çåæ°å¯ä»¥æ¯ä¸ä¸ªå¼ä¹å¯ä»¥æ¯ä¸ä¸ªå½æ°\n * è®¾ç½®ç¶æå¼æ¹æ³çæ¹æ³æ¬èº«æ¯å¼æ­¥ç\n\nimport react, { usestate } from 'react';\n\nfunction example(props) {\n  const [count, setcount] = usestate(0);\n\t\n  function handlecount() {\n    setcount(count => count + 1);\n    document.title = count; // setcountå¼æ­¥,æä»¥ä¼åæ§è¡è¿å¥,è§£å³åæ³æ¯æ¾å¨setcountæ¹æ³é\n  }\n  \n  return (\n    <div>\n      <p>you clicked {count} times</p>\n      <button onclick={handlecount}>+1</button>\n    </div>\n  );\n}\n\n\n\n# useeffect\n\n> ç±»ç»ä»¶å¨çå½å¨æä¸­å¤çå¯ä½ç¨ï¼å½æ°åç»ä»¶ä½¿ç¨ useeffect æ¥å¤ç\n> \n> å¯ä»¥æ useeffect çå componentdidmountï¼componentdidupdateï¼componentwillunmount çç»å\n> \n> è§£å³çé®é¢ï¼ç¸å¹²ä¸å¡é»è¾å½ç½®å°åä¸å¯ä½ç¨å½æ°ä¸­ï¼ç®åéå¤ä»£ç ï¼ä½¿ç»ä»¶åé¨ä»£ç æ´å æ¸æ°\n\n# æ§è¡æ¶æº\n\nuseeffect å¿ç¶ä¼å¨ render çæ¶åæ§è¡ä¸æ¬¡ï¼å¶ä»çè¿è¡æ¶æºåå³äºä»¥ä¸æåµï¼\n\n * ææ²¡æç¬¬äºä¸ªåæ°ãuseeffect hook æ¥åä¸¤ä¸ªåæ°ï¼ç¬¬ä¸ä¸ªæ¯è¦æ§è¡çä»£ç ï¼ç¬¬äºä¸ªæ¯ä¸ä¸ªæ°ç»ï¼æå®ä¸ç»ä¾èµçåéï¼å¶ä¸­çåéåçååæ¶ï¼æ­¤ effect ä¼éæ°æ§è¡ä¸æ¬¡ã\n * ææ²¡æè¿åå¼ã useeffect çæ§è¡ä»£ç ä¸­å¯ä»¥è¿åä¸ä¸ªå½æ°ï¼å¨æ¯ä¸æ¬¡æ°ç render è¿è¡åæèç»ä»¶ unmount ä¹æ¶ï¼é½ä¼æ§è¡æ­¤å½æ°ï¼è¿è¡æ¸çå·¥ä½ã\n\nä¾å¦ï¼\n\n * useeffect(() => {})ï¼å¨ componentdidmountï¼componentdidupdate æ§è¡\n * useeffect(() => {}, [])ï¼ç©ºæ°ç»ï¼åªå¨ componentdidmount æ§è¡\n * useeffect(() => {}, [count])ï¼å¨ componentdidmountï¼componentdidupdateï¼countååï¼ æ§è¡\n * useeffect(() => () => {})ï¼è¿åå½æ°å¨ componentwillunmount æ§è¡\n\nåæ¥çç±»ç»ä»¶åæ³\n\nclass example extends react.component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      count: 0\n    };\n  }\n\n  componentdidmount() {\n    document.title = `you clicked ${this.state.count} times`;\n  }\n\n  componentdidupdate() {\n    document.title = `you clicked ${this.state.count} times`;\n  }\n  \n  componentwillunmount() {\n    // å¸è½½åè¿è¡ clear()\n  }\n\n  render() {\n    return (\n      <div>\n        <p>you clicked {this.state.count} times</p>\n        <button onclick={() => this.setstate({ count: this.state.count + 1 })}>\n          click me\n        </button>\n      </div>\n    );\n  }\n}\n\n\ncomponentdidmountåcomponentdidupdateä¸­çä»£ç æ¯ä¸æ ·çãå¯ä»¥ä½¿ç¨ useeffect æ¥æ¹åã\n\nimport react, { usestate, useeffect } from 'react';\n\nfunction example() {\n  const [count, setcount] = usestate(0);\n\n  useeffect(() => {\n    document.title = `you clicked ${count} times`;\n    return function clear() {\n      // clear\n    }\n  });\n\n  return (\n    <div>\n      <p>you clicked {count} times</p>\n      <button onclick={() => setcount(count + 1)}>\n        click me\n      </button>\n    </div>\n  );\n}\n\n\næçæåµä¸æä»¬å¸æåªæå¨ state æ props æ¹åçæåµä¸ææ§è¡ãå¦ææ¯class componentï¼æä»¬ä¼è¿ä¹åï¼\n\ncomponentdidupdate(prevprops, prevstate) {\n  if (prevstate.count !== this.state.count) {\n    document.title = `you clicked ${this.state.count} times`;\n  }\n}\n\n\nä½¿ç¨ hook çæ¶åï¼æä»¬åªéè¦ä¼ å¥ç¬¬äºä¸ªåæ°ï¼\n\nuseeffect(() => {\n  document.title = `you clicked ${count} times`;\n}, [count]); // åªæå¨ count æ¹åçæ¶åææ§è¡ effect\n\n// ç¬¬äºä¸ªåæ°æ¯ä¸ä¸ªæ°ç»ï¼å¯ä»¥ä¼ å¤ä¸ªå¼ï¼ä¸è¬ä¼å° effect ç¨å°çææ props å state é½ä¼ è¿å»ã\n\n\n# useeffect ç»åå¼æ­¥å½æ°\n\nuseeffect ä¸­çåæ°å½æ°ä¸è½æ¯å¼æ­¥å½æ°ï¼å ä¸º useeffect è¦è¿åæ¸çèµæºçå½æ°ï¼å¦ææ¯å¼æ­¥å½æ°å°±åæäºè¿åpromise\n\n// err\nuseeffect(async () => {\n  const result = axios.get();\n})\n\n// ok\nuseeffect(() => {\n  (async () => {\n    const result = axios.get();\n  })()\n})\n\n\n\n# usereducer\n\n> usereducer æ¯å¦ä¸ç§è®©å½æ°ç»ä»¶ä¿å­ç¶æçæ¹å¼ï¼ç±»ä¼¼äº redux\n\nimport react, { usereducer } from 'react';\n\nfunction reducer (state, action) {\n  swtich (action.type) {\n    case 'increment':\n    \treturn state + 1;\n    case 'decrement':\n    \treturn state - 1;\n    default:\n    \treturn state;\n  }\n}\n\nfunction app () {\n  const [count, dispatch] = usereducer(reducer, 0);\n  return (\n    <div>\n      <span>{count}</span>\n      <button onclick={() => dispatch({type: 'increment'})}>+1</button>\n      <button onclick={() => dispatch({type: 'decrement'})}>-1</button>\n    </div>\n  )\n}\n\n\n\n# usecontext\n\n> ä¸è¬ç»ä»¶ä¼ å¼å¯ä»¥ä½¿ç¨ propsï¼ä½æ¯æ¶åå¾å¤å±çº§æ¶å¯ä»¥ä½¿ç¨ context æ¥è§£å³\n\n * react.createcontext\n\ncont mycontext  = react.createcontext(defaultvalue);\n\n\nåå»ºä¸ä¸ª context å¯¹è±¡ãå½ react æ¸²æä¸ä¸ªè®¢éäºè¿ä¸ª context å¯¹è±¡çç»ä»¶ï¼è¿ä¸ªç»ä»¶ä¼ä»ç»ä»¶æ ä¸­ç¦»èªèº«æè¿çé£ä¸ªå¹éç provider ä¸­è¯»åå°å½åç context å¼ã\n\n * context.provider\n\n<mycontext.provider value={/* æä¸ªå¼ */}>\n\n\næ¯ä¸ª context å¯¹è±¡é½ä¼è¿åä¸ä¸ª provider react ç»ä»¶ï¼å®åè®¸æ¶è´¹ç»ä»¶è®¢é context çååã\n\nprovider æ¥æ¶ä¸ä¸ª value å±æ§ï¼ä¼ éç»æ¶è´¹ç»ä»¶ãä¸ä¸ª provider å¯ä»¥åå¤ä¸ªæ¶è´¹ç»ä»¶æå¯¹åºå³ç³»ãå¤ä¸ª provider ä¹å¯ä»¥åµå¥ä½¿ç¨ï¼éå±çä¼è¦çå¤å±çæ°æ®ã\n\nå½ provider ç value å¼åçååæ¶ï¼å®åé¨çæææ¶è´¹ç»ä»¶é½ä¼éæ°æ¸²æã\n\n * context.consumer\n\n<mycontext.consumer>\n  {value => /* åºäº context å¼è¿è¡æ¸²æ*/}\n</mycontext.consumer>\n\n\nä¸ä¸ªç®åçä¾å­\n\nimport react, { createcontext } from 'react';\n\nconst countcontext = createcontext();\n\nfunction app() {\n  return (\n  \t<countcontext.provider value={100}>\n      <foo />\n    </countcontext.provider>\n  )\n}\n\nfunction foo() {\n\treturn (\n  \t<countcontext.consumer>\n      { value => <div>{value}</div> }\n    </countcontext.consumer>\n  )\n}\n\n\n> ä½¿ç¨ usecontext å¨è·¨ç»ä»¶å±çº§è·åæ°æ®æ¶ç®åè·åæ°æ®çä»£ç \n\nimport react, { createcontext, usecontext } from 'react';\n\nconst countcontext = createcontext();\n\nfunction app() {\n  return (\n  \t<countcontext.provider value={100}>\n      <foo />\n    </countcontext.provider>\n  )\n}\n\nfunction foo() {\n  const value = usecontext(countcontext);\n  return <div>{value}</div>\n}\n\n\n\n# usememo\n\n> ç±»ä¼¼äº vue ä¸­çè®¡ç®å±æ§ï¼å¯ä»¥çæµæä¸ªå¼çååï¼æ ¹æ®ååè®¡ç®æ°å¼ã\n> \n> usememo ä¼ç¼å­è®¡ç®ç»æï¼å¦æçæµå¼æ²¡æåçååï¼å³ä½¿ç»ä»¶éæ°æ¸²æï¼ä¹ä¸ä¼éæ°è®¡ç®ãæ­¤è¡ä¸ºå¯ä»¥æå©äºé¿åå¨æ¯ä¸ªæ¸²æä¸è¿è¡æè´µçè®¡ç®ã\n\nimport react, { usestate, usememo } from 'react';\n\nfunction app() {\n  const [count, setcount] = usestate(0);\n  const result = usememo(() => {\n    return count * 2;\n  }, [count]);\n  return (\n  \t<div>\n      <span>{count} {result}</span>\n      <button onclick={() => setcount(count + 1)}>+1</button>\n    </div>\n  )\n}\n\n\n\n# memo æ¹æ³\n\n> æ§è½ä¼åï¼å¦ææ¬ç»ä»¶ä¸­çæ°æ®æ²¡æåçååï¼é»æ­¢ç»ä»¶æ´æ°ãç±»ä¼¼äºç±»ç»ä»¶ä¸­ç purecomponent å shouldcomponentupdate\n\nimport react, { usestate, memo } from 'react';\n\nfunction app() {\n  const [count, setcount] = usestate(0);\n  return (\n  \t<div>\n    \t<span>{count}</span>\n\t\t\t<button onclick={() => setcount(count + 1)}>+1</button>\n\t\t\t<foo />\n    </div>\n  )\n}\n\nconst foo = memo(function foo() {\n  console.log(\"fooç»ä»¶éæ°æ¸²æäº\");\n  return <div>ææ¯fooç»ä»¶</div>\n})\n\nexport default app;\n\n// å½ç¹å»æé®æ¶ï¼æ­£å¸¸æ¥è¯´ app ç»ä»¶ä¼è¢«éæ°æ¸²æï¼ç¸åºå° foo ç»ä»¶ä¹è¢«éæ°æ¸²æï¼ä½æ¯ä½¿ç¨ memo åï¼foo ç»ä»¶ä¸­çæ°æ®æ²¡æåçååï¼æä»¥ä¸ä¼éæ°æ¸²æã\n\n\n\n# usecallback\n\n> usecallback æ¯ react ä¸­çä¸ä¸ª hookï¼å®çæ ¸å¿ä½ç¨æ¯ç¼å­å½æ°å¼ç¨ï¼é¿åç»ä»¶éæ°æ¸²ææ¶éæ°åå»ºå½æ°ã\n\n 1. usecallback æ¥åä¸¤ä¸ªåæ°ï¼\n\nä¸ä¸ªéè¦ç¼å­çå½æ°ï¼ ä¸ä¸ªä¾èµæ°ç»ï¼dependenciesï¼ã åªæå½ä¾èµé¡¹åçååæ¶ï¼æä¼è¿åæ°çå½æ°ï¼å¦åï¼è¿åä¸ä¸æ¬¡ç¼å­çå½æ°ã\n\nconst memoizedcallback = usecallback(\n  () => {\n    // å½æ°é»è¾ï¼ä¾èµæäºåéï¼ä¾å¦ state æ propsï¼\n  },\n  [dependency1, dependency2] // ä¾èµé¡¹æ°ç»\n);\n\n\n 2. è§£å³çé®é¢: é¿åå­ç»ä»¶ä¸å¿è¦çæ¸²æ\n\nå½ç¶ç»ä»¶ä¼ éä¸ä¸ªå½æ°ä½ä¸º props ç»å­ç»ä»¶ï¼å°¤å¶æ¯ç¨ react.memo ä¼åçå­ç»ä»¶ï¼æ¶ï¼å¦æç¶ç»ä»¶æ¯æ¬¡æ¸²æé½çææ°å½æ°ï¼å­ç»ä»¶ä¼è®¤ä¸º props ååï¼ä»èè§¦åéæ°æ¸²æã usecallback å¯ä»¥ç¼å­å½æ°ï¼ç¡®ä¿å­ç»ä»¶åªå¨ä¾èµé¡¹ååæ¶æä¼éæ°æ¸²æã jsx\n\n// ç¶ç»ä»¶\nconst parent = () => {\n  const [count, setcount] = usestate(0);\n  // ä½¿ç¨ usecallback ç¼å­å½æ°\n  const handleclick = usecallback(() => {\n    console.log(\"count:\", count);\n  }, [count]); // ä¾èµ count\n  return <child onclick={handleclick} />;\n};\n// å­ç»ä»¶ï¼ç¨ react.memo ä¼åï¼\nconst child = react.memo(({ onclick }) => {\n  // åªæå¨ onclick å½æ°ååæ¶æä¼éæ°æ¸²æ\n  return <button onclick={onclick}>click</button>;\n});\n\n\n 3. æ§è½ä¼åçä»£ä»·\n\nusecallback æ¬èº«éè¦åå­ç¼å­å½æ°ï¼æ»¥ç¨å¯è½å¯¼è´æ§è½åèä¸éã\n\nåªå¨å¿è¦åºæ¯ä½¿ç¨ï¼\n\n * å½æ°ä½ä¸º props ä¼ éç» react.memo ä¼åçå­ç»ä»¶ï¼\n * å½æ°ä½ä¸ºå¶ä» hook çä¾èµé¡¹ï¼å¦ useeffectï¼ï¼\n * éè¦ç¨³å®çå½æ°å¼ç¨ï¼ä¾å¦äºä»¶çå¬å¨çç»å®ä¸è§£ç»ï¼ã\n\n 4. ä¸ usememo çåºå«\n\n * usecallback ç¼å­çæ¯å½æ°æ¬èº«ã\n * usememo ç¼å­çæ¯å½æ°æ§è¡åçè¿åå¼ã\n\n// ä»£ç åè½ï¼app ç»ä»¶ä¸­ setcountï¼foo ç»ä»¶ä¸­ resetcount\n\n// è¡¨ç°ææï¼æ¯æ¬¡ resetcount æ¶é½ä¼è¾åº \"fooç»ä»¶éæ°æ¸²æäº\"\n\n// åå ï¼app ç»ä»¶ setcount æ¶ï¼ç»ä»¶è¢«éæ°æ¸²æï¼resetcount å½æ°ä¹éæ°çæï¼æä»¥å½ä¸ä¸ªæ°çå½æ°ä»¥ props ä¼ å¥ foo ç»ä»¶æ¶ï¼ç¸å½äº foo ç»ä»¶ä¸­çæ°æ®æ¹åï¼éæ°æ¸²æ\n\nimport react, { usestate, memo } from 'react';\n\nfunction app() {\n  const [count, setcount] = usestate(0);\n  const resetcount = () => {\n    setcount(0);\n  }\n  return (\n  \t<div>\n    \t<span>{count}</span>\n\t\t\t<button onclick={() => setcount(count + 1)}>+1</button>\n\t\t\t<foo resetcount={resetcount}/>\n    </div>\n  )\n}\n\nconst foo = memo(function foo(props) {\n  console.log(\"fooç»ä»¶éæ°æ¸²æäº\");\n  return (\n    <div>\n    \tææ¯fooç»ä»¶\n    \t<button onclick={props.resetcount}>resetcount</button>\n    </div>\n  )\n})\n\nexport default app;\n\n\nä½¿ç¨ usecallback æ¹å resetcount\n\nconst resetcount = usecallback(() => setcount(0), [setcount]);\n// setcount ä¸ä¼æ¹åï¼resetcount ä¹ä¸ä¼æ¹å\n\n\n> æ»ç»ä¸ä¸ï¼ä½¿ç¨åºæ¯æ¯ï¼æä¸ä¸ªç¶ç»ä»¶ï¼å¶ä¸­åå«å­ç»ä»¶ï¼å­ç»ä»¶æ¥æ¶ä¸ä¸ªå½æ°ä½ä¸ºpropsï¼éå¸¸èè¨ï¼å¦æç¶ç»ä»¶æ´æ°äºï¼å­ç»ä»¶ä¹ä¼æ§è¡æ´æ°ï¼ä½æ¯å¤§å¤æ°åºæ¯ä¸ï¼æ´æ°æ¯æ²¡æå¿è¦çï¼æä»¬å¯ä»¥åå© usecallback æ¥è¿åå½æ°ï¼ç¶åæè¿ä¸ªå½æ°ä½ä¸ºpropsä¼ éç»å­ç»ä»¶ï¼è¿æ ·ï¼å­ç»ä»¶å°±è½é¿åä¸å¿è¦çæ´æ°ã\n\n\n# useref\n\n> è·å dom åç´ å¯¹è±¡\n\nimport react, { useref } from 'react';\n\nfunction app() {\n  const box = useref();\n  return (\n  \t<div ref={box}>\n      <button onclick={() => console.log(box)}>è·ådiv</button>\n    </div>\n  )\n}\n\n\n> userefè¿æå¦ä¸ä¸ªåè½å°±æ¯ä¿å­æ°æ®ï¼è·¨ç»ä»¶å¨æï¼ï¼å³ä½¿ç»ä»¶éæ°æ¸²æï¼ä¿å­çæ°æ®ä»ç¶è¿å¨ãä¿å­çæ°æ®è¢«æ´æ¹ä¸ä¼è§¦åç»ä»¶éæ°æ¸²æã",charsets:{cjk:!0}},{title:"san-composition",frontmatter:{title:"san-composition",date:"2021-10-09T11:27:54.000Z",categories:"San"},regularPath:"/san/composition.html",relativePath:"san/composition.md",key:"v-140d9f9f",path:"/san/composition.html",headers:[{level:2,title:"å¸¸ç¨ api",slug:"å¸¸ç¨-api",normalizedTitle:"å¸¸ç¨ api",charIndex:95},{level:2,title:"çå½å¨æ",slug:"çå½å¨æ",normalizedTitle:"çå½å¨æ",charIndex:228},{level:2,title:"DataProxy",slug:"dataproxy",normalizedTitle:"dataproxy",charIndex:656},{level:2,title:"å®æ´çä¾å­",slug:"å®æ´çä¾å­",normalizedTitle:"å®æ´çä¾å­",charIndex:798}],lastUpdated:"10/9/2021, 7:50:19 PM",lastUpdatedTimestamp:1633780219e3,headersStr:"å¸¸ç¨ api çå½å¨æ DataProxy å®æ´çä¾å­",content:"# san-composition\n\nVue3.0 æåºäºç»åå¼ api çæ¦å¿µï¼san-composition æ¯ san æ¡æ¶å®ç°ç»åå¼ api çæ¹å¼ï¼ä¸é¢ååºä¸äºåºç¡ç¨æ³ã\n\n\n# å¸¸ç¨ api\n\n * templateï¼å®ä¹ç»ä»¶æ¨¡æ¿çæ¹æ³\n * dataï¼åå§åæ°æ®\n * componentsï¼å­ç»ä»¶\n * methodï¼å®ä¹ç»ä»¶ä¸­çæ¹æ³\n * watchï¼çå¬æ°æ®åå\n * computedï¼è®¡ç®å±æ§\n * filtersï¼è¿æ»¤å¨\n\n\n# çå½å¨æ\n\n * onConstructï¼å¨ construct ï¼ç»ä»¶åå§åå¼å§ï¼è¿ç¨å°è¾¾æ¶è§¦åçé©å­å½æ°\n * onCompiledï¼å¨ compiled ï¼ç»ä»¶è§å¾æ¨¡æ¿ç¼è¯å®æï¼è¿ç¨å°è¾¾æ¶è§¦åçé©å­å½æ°\n * onInitedï¼å¨ inited ï¼ç»ä»¶å®ä¾åå§åå®æï¼è¿ç¨å°è¾¾æ¶è§¦åçé©å­å½æ°\n * onCreatedï¼å¨ created ï¼ç»ä»¶åç´ åå»ºå®æï¼è¿ç¨å°è¾¾æ¶è§¦åçé©å­å½æ°\n * onAttachedï¼å¨ attached ï¼ç»ä»¶å·²è¢«éå å°é¡µé¢ï¼è¿ç¨å°è¾¾æ¶è§¦åçé©å­å½æ°\n * onDetachedï¼å¨ detached ï¼ç»ä»¶ä»é¡µé¢ä¸­ç§»é¤ï¼è¿ç¨å°è¾¾æ¶è§¦åçé©å­å½æ°\n * onDisposedï¼å¨ disposed ï¼ç»ä»¶å¸è½½å®æï¼è¿ç¨å°è¾¾æ¶è§¦åçé©å­å½æ°\n * onUpdatedï¼å¨ updated ï¼ç»ä»¶è§å¾å·æ°åï¼è¿ç¨å°è¾¾æ¶è§¦åçé©å­å½æ°\n * onErrorï¼å¨ error ï¼å¤çç»ä»¶å¼å¸¸ï¼è¿ç¨å°è¾¾æ¶è§¦åçé©å­å½æ°\n\n\n# DataProxy\n\nDataProxyæ¯dataåå§åè¿åçå®ä¾ï¼æ¯æå¦ä¸æ¹æ³ï¼\n\n * get\n * set\n * merge\n * apply\n * push / pop / unshift / shift\n * remove / removeAt\n * splice\n\n\n# å®æ´çä¾å­\n\nsan-composition è¿é¶ç¯",normalizedContent:"# san-composition\n\nvue3.0 æåºäºç»åå¼ api çæ¦å¿µï¼san-composition æ¯ san æ¡æ¶å®ç°ç»åå¼ api çæ¹å¼ï¼ä¸é¢ååºä¸äºåºç¡ç¨æ³ã\n\n\n# å¸¸ç¨ api\n\n * templateï¼å®ä¹ç»ä»¶æ¨¡æ¿çæ¹æ³\n * dataï¼åå§åæ°æ®\n * componentsï¼å­ç»ä»¶\n * methodï¼å®ä¹ç»ä»¶ä¸­çæ¹æ³\n * watchï¼çå¬æ°æ®åå\n * computedï¼è®¡ç®å±æ§\n * filtersï¼è¿æ»¤å¨\n\n\n# çå½å¨æ\n\n * onconstructï¼å¨ construct ï¼ç»ä»¶åå§åå¼å§ï¼è¿ç¨å°è¾¾æ¶è§¦åçé©å­å½æ°\n * oncompiledï¼å¨ compiled ï¼ç»ä»¶è§å¾æ¨¡æ¿ç¼è¯å®æï¼è¿ç¨å°è¾¾æ¶è§¦åçé©å­å½æ°\n * oninitedï¼å¨ inited ï¼ç»ä»¶å®ä¾åå§åå®æï¼è¿ç¨å°è¾¾æ¶è§¦åçé©å­å½æ°\n * oncreatedï¼å¨ created ï¼ç»ä»¶åç´ åå»ºå®æï¼è¿ç¨å°è¾¾æ¶è§¦åçé©å­å½æ°\n * onattachedï¼å¨ attached ï¼ç»ä»¶å·²è¢«éå å°é¡µé¢ï¼è¿ç¨å°è¾¾æ¶è§¦åçé©å­å½æ°\n * ondetachedï¼å¨ detached ï¼ç»ä»¶ä»é¡µé¢ä¸­ç§»é¤ï¼è¿ç¨å°è¾¾æ¶è§¦åçé©å­å½æ°\n * ondisposedï¼å¨ disposed ï¼ç»ä»¶å¸è½½å®æï¼è¿ç¨å°è¾¾æ¶è§¦åçé©å­å½æ°\n * onupdatedï¼å¨ updated ï¼ç»ä»¶è§å¾å·æ°åï¼è¿ç¨å°è¾¾æ¶è§¦åçé©å­å½æ°\n * onerrorï¼å¨ error ï¼å¤çç»ä»¶å¼å¸¸ï¼è¿ç¨å°è¾¾æ¶è§¦åçé©å­å½æ°\n\n\n# dataproxy\n\ndataproxyæ¯dataåå§åè¿åçå®ä¾ï¼æ¯æå¦ä¸æ¹æ³ï¼\n\n * get\n * set\n * merge\n * apply\n * push / pop / unshift / shift\n * remove / removeat\n * splice\n\n\n# å®æ´çä¾å­\n\nsan-composition è¿é¶ç¯",charsets:{cjk:!0}},{title:"historyæ¨¡å¼åhashæ¨¡å¼",frontmatter:{},regularPath:"/route/route.html",relativePath:"route/route.md",key:"v-b9f651c2",path:"/route/route.html",headers:[{level:2,title:"hashæ¨¡å¼",slug:"hashæ¨¡å¼",normalizedTitle:"hashæ¨¡å¼",charIndex:12},{level:2,title:"historyæ¨¡å¼",slug:"historyæ¨¡å¼",normalizedTitle:"historyæ¨¡å¼",charIndex:2},{level:3,title:"length",slug:"length",normalizedTitle:"length",charIndex:2049},{level:3,title:"history.pushState()",slug:"history-pushstate",normalizedTitle:"history.pushstate()",charIndex:2432},{level:3,title:"history.replaceState()",slug:"history-replacestate",normalizedTitle:"history.replacestate()",charIndex:3203},{level:3,title:"popState äºä»¶",slug:"popstate-äºä»¶",normalizedTitle:"popstate äºä»¶",charIndex:3637},{level:2,title:"æ ¹æ®æéå¨ææ·»å è·¯ç±åè¡¨",slug:"æ ¹æ®æéå¨ææ·»å è·¯ç±åè¡¨",normalizedTitle:"æ ¹æ®æéå¨ææ·»å è·¯ç±åè¡¨",charIndex:5760},{level:2,title:"éç½®è·¯ç±metaå±æ§",slug:"éç½®è·¯ç±metaå±æ§",normalizedTitle:"éç½®è·¯ç±metaå±æ§",charIndex:6451},{level:2,title:"routerè·³è½¬ä¸¤æ¬¡çé®é¢",slug:"routerè·³è½¬ä¸¤æ¬¡çé®é¢",normalizedTitle:"routerè·³è½¬ä¸¤æ¬¡çé®é¢",charIndex:7519}],lastUpdated:"2/24/2023, 5:42:01 PM",lastUpdatedTimestamp:1677231721e3,headersStr:"hashæ¨¡å¼ historyæ¨¡å¼ length history.pushState() history.replaceState() popState äºä»¶ æ ¹æ®æéå¨ææ·»å è·¯ç±åè¡¨ éç½®è·¯ç±metaå±æ§ routerè·³è½¬ä¸¤æ¬¡çé®é¢",content:"# historyæ¨¡å¼åhashæ¨¡å¼\n\nåç«¯éç ajax çæµè¡ï¼æ°æ®è¯·æ±å¯ä»¥å¨ä¸å·æ°æµè§å¨çæåµä¸è¿è¡ãå¼æ­¥äº¤äºä½éªä¸­æçè¡çå°±æ¯ SPA ââ åé¡µåºç¨ãåé¡µåºç¨ä¸ä»ä»æ¯å¨é¡µé¢äº¤äºæ¶æ å·æ°çï¼è¿é¡µé¢è·³è½¬é½æ¯æ å·æ°çï¼ä¸ºäºå®ç°åé¡µåºç¨ï¼æä»¥å°±æäºåç«¯è·¯ç±ã\n\n\n# hashæ¨¡å¼\n\n#çæ¶µä¹\n\n * #ä»£è¡¨ç½é¡µä¸­çä¸ä¸ªä½ç½®,å³é¢çå­ç¬¦å°±æ¯ä»£è¡¨çä½ç½®\n * http://localhostï¼8081/cbuild/index.html#firstå°±ä»£è¡¨ç½é¡µindex.htmlçfirstä½ç½®ãæµè§å¨è¯»åè¿ä¸ªURLåï¼ä¼èªå¨å°firstä½ç½®æ»å¨è³å¯è§åºåã\n\n#åçå­ç¬¦\n\n * å¨ç¬¬ä¸ä¸ª#åé¢åºç°çä»»ä½å­ç¬¦ï¼é½ä¼è¢«æµè§å¨è§£è¯»ä¸ºä½ç½®æ è¯ç¬¦ãè¿æå³çï¼è¿äºå­ç¬¦é½ä¸ä¼è¢«åéå°æå¡å¨ç«¯ã\n\n * æ¯å¦ï¼ä¸é¢URLçåææ¯æå®ä¸ä¸ªé¢è²å¼ï¼http://www.example.com/?color=#fffä½æ¯ï¼æµè§å¨å®éååºçè¯·æ±æ¯\"#fff\"è¢«çç¥äºãåªæå°#è½¬ç ä¸º%23ï¼æµè§å¨æä¼å°å¶ä½ä¸ºå®ä¹å­ç¬¦å¤çãä¹å°±æ¯è¯´ï¼ä¸é¢çç½ååºè¯¥è¢«åæï¼http://example.com/?color=%23fff\n\næ¹å#ä¸è§¦åç½é¡µéè½½\n\n * ååæ¹å#åçé¨åï¼æµè§å¨åªä¼æ»å¨å°ç¸åºä½ç½®ï¼ä¸ä¼éæ°å è½½ç½é¡µã\n * æ¯å¦ï¼ä»http://www.example.com/index.html#location1æ¹æhttp://www.example.com/index.html#location2æµè§å¨ä¸ä¼éæ°åæå¡å¨è¯·æ±index.htmlã\n\næ¹å#ä¼æ¹åæµè§å¨çè®¿é®åå²\n\n * æ¯ä¸æ¬¡æ¹å#åçé¨åï¼é½ä¼å¨æµè§å¨çè®¿é®åå²ä¸­å¢å ä¸ä¸ªè®°å½ï¼ä½¿ç¨\"åé\"æé®ï¼å°±å¯ä»¥åå°ä¸ä¸ä¸ªä½ç½®ã\n\nwindow.location.hashè¯»å#å¼\n\n * window.location.hashè¿ä¸ªå±æ§å¯è¯»å¯åãè¯»åæ¶ï¼å¯ä»¥ç¨æ¥å¤æ­ç½é¡µç¶ææ¯å¦æ¹åï¼åå¥æ¶ï¼åä¼å¨ä¸éè½½ç½é¡µçåæä¸ï¼åé ä¸æ¡è®¿é®åå²è®°å½ã\n\nonhashchangeäºä»¶\n\n * è¿æ¯ä¸ä¸ªHTML 5æ°å¢çäºä»¶ï¼å½#å¼åçååæ¶ï¼å°±ä¼è§¦åè¿ä¸ªäºä»¶ã\n * window.addEventListener(\"hashchange\",func, false);\n\næè·¯\n\n> å½URLççæ®µæ è¯ç¬¦æ´æ¹æ¶ï¼å°è§¦åhashchangeäºä»¶ (è·å¨ï¼ç¬¦å·åé¢çURLé¨åï¼åæ¬ï¼ç¬¦å·),ç¶åæ ¹æ®hashå¼åäºè·¯ç±è·³è½¬å¤ççæä½.å·ä½åæ°å¯ä»¥è®¿é®locationæ¥ç\n\n\x3c!-- hashchange è§¦åé¡µé¢æ¹å --\x3e\n\t<ul>\n      <li>\n        <a href=\"#/a\">a</a>\n      </li>\n      <li>\n        <a href=\"#/b\">b</a>\n      </li>\n      <li>\n        <a href=\"#/c\">c</a>\n      </li>\n    </ul>\n    <div id=\"view\"></div>\n\n    <script>\n      var view = null;\n      // é¡µé¢å è½½å®ä¸ä¼è§¦å hashchangeï¼è¿éä¸»å¨è§¦åä¸æ¬¡ hashchange äºä»¶\n      // è¯¥äºä»¶å¿«äºonLoad,æä»¥éè¦å¨è¿éæä½\n      window.addEventListener('DOMContentLoaded', function () {\n        view = document.querySelector('#view');\n        viewChange();\n      });\n      // çå¬è·¯ç±åå\n      window.addEventListener('hashchange', viewChange);\n\n      // æ¸²æè§å¾\n      function viewChange() {\n        switch (location.hash) {\n          case '#/b':\n            view.innerHTML = 'b';\n            break;\n          case '#/c':\n            view.innerHTML = 'c';\n            break;\n          default:\n            view.innerHTML = 'a';\n            break;\n        }\n      }\n<\/script>\n\n\n\n# historyæ¨¡å¼\n\nwindow.history(å¯ç´æ¥åæhistory)æåHistoryå¯¹è±¡ï¼å®è¡¨ç¤ºå½åçªå£çæµè§åå²ã\n\nHistoryå¯¹è±¡ä¿å­äºå½åçªå£è®¿é®è¿çææé¡µé¢ç½å\n\n\n# length\n\n * history.lengthå±æ§ä¿å­çåå²è®°å½çurlæ°éï¼åå§æ¶è¯¥å¼ä¸º1ï¼å¦æå½åçªå£ååè®¿é®äºä¸ä¸ªç½åï¼é£ä¹historyå¯¹è±¡å°±åæ¬3é¡¹ï¼history.length=3\n\nè·³è½¬æ¹æ³\n\n * go() æ¥åä¸ä¸ªæ´æ°ä¸ºåæ°ï¼ç§»å¨å°è¯¥æ´æ°æå®çé¡µé¢ï¼æ¯å¦history.go(1)ç¸å½äºhistory.forward(),history.go(-1)ç¸å½äºhistory.back(),history.go(0)ç¸å½äºå·æ°å½åé¡µé¢\n * back() ç§»å¨å°ä¸ä¸ä¸ªè®¿é®é¡µé¢ï¼ç­åäºæµè§å¨çåéé®,å¸¸è§çè¿åä¸ä¸é¡µå°±å¯ä»¥ç¨back()ï¼æ¯ä»æµè§å¨ç¼å­ä¸­å è½½ï¼èä¸æ¯éæ°è¦æ±æå¡å¨åéæ°çç½é¡µ\n * forward() ç§»å¨å°ä¸ä¸ä¸ªè®¿é®é¡µé¢ï¼ç­åäºæµè§å¨çåè¿é®\n\nå¦æç§»å¨çä½ç½®è¶åºäºè®¿é®åå²çè¾¹çï¼ä»¥ä¸ä¸ä¸ªæ¹æ³å¹¶ä¸æ¥éï¼èæ¯é»é»çå¤±è´¥\n\n\n# history.pushState()\n\nhistory.pushstate() æ¹æ³æ¥åä¸ä¸ªåæ°ï¼ä»¥æ­¤ä¸ºï¼\n\n * state: ä¸ä¸ªä¸æå®ç½åç¸å³çç¶æå¯¹è±¡ï¼popStateäºä»¶è§¦åæ¶ï¼è¯¥å¯¹è±¡ä¼ä¼ å¥åè°å½æ°ï¼å¦æä¸éè¦è¿ä¸ªå¯¹è±¡ï¼æ­¤å¤å¯å¡«null\n * title: æ°é¡µé¢çæ é¢ï¼ä½æ¯æææµè§å¨ç®åé½å¿½ç¥è¿ä¸ªå¼ï¼å æ­¤è¿éå¯ä»¥å¡«null\n * url: æ°çç½åï¼å¿é¡»ä¸å½åé¡µé¢å¤å¨åä¸ä¸ªåï¼æµè§å¨çå°åæ å°æ¾ç¤ºè¿ä¸ªç½å\n\n// åå®å½åç½åæ¯example.com/1.htmlï¼æä»¬ä½¿ç¨pushStateæ¹æ³å¨æµè§è®°å½(historyå¯¹è±¡)ä¸­æ·»å ä¸ä¸ªè®°å½\n\nvar stateObj = {foo:'bar'};\nhistory.pushState(stateObj,'page 2','2.html')\n\n\n> æ·»å ä¸è¾¹è¿ä¸ªæ°çºªå½åï¼æµè§å¨å°åæ ç«å»æ¾ç¤ºexample.com/2.htmlï¼ä½ä¸ä¼è·³è½¬å°2.htmlï¼çè³ä¹ä¸ä¼æ£æ¥2.htmlæ¯å¦å­å¨ï¼å®åªæ¯æä¸ºæµè§åå²ä¸­çæ°çºªå½ãè¿æ¶ï¼ä½ å¨å°åæ è¾å¥ä¸ä¸ªæ°çå°åï¼ç¶åç¹å»äºåéæé®ï¼é¡µé¢çurlå°æ¾ç¤º2.htmlï¼ä½ åç¹å»ä»¥æ­¤åéæé®ï¼urlå°æ¾ç¤º1.html\n\næ»ä¹ï¼pushStateæ¹æ³ä¸ä¼è§¦åé¡µé¢å·æ°ï¼åªæ¯å¯¼è´äºhistoryå¯¹è±¡åçååï¼å°åæ ä¼æååº\n\nå¦æpushStateçurlåæ°ï¼è®¾ç½®äºä¸ä¸ªæ°çéç¹å¼ï¼å³hashï¼ï¼å¹¶ä¸ä¼è§¦åhashChangeäºä»¶ï¼å¦æè®¾ç½®äºä¸ä¸ªè·¨åç½åï¼åä¼æ¥éã\n\n//æ¥é\nhistory.pushState(null,null,'https://twitter.com/hello')\n\n\nä¸è¾¹ä»£ç ä¸­ï¼pushState()æ³è¦æå¥ä¸ä¸ªè·¨åçç½åï¼å¯¼è´æ¥éï¼è¿æ ·è®¾è®¡çç®çæ¯é²æ­¢æ¶æä»£ç è®©ç¨æ·ä»¥ä¸ºä»ä»¬æ¯å¨å¦ä¸ä¸ªç½ç«ä¸.\n\n\n# history.replaceState()\n\nhistory.replaceState() æ¹æ³çåæ°å pushState() æ¹æ³ä¸æ¸ä¸æ ·ï¼åºå«æ¯å®ä¿®æ¹æµè§å¨åå²å½ä¸­çè®°å½\n\nåå®å½åé¡µé¢æ¯example.com/example.html\n\nhistory.pushState({page:1},'title 1','?page=1')\nhistory.pushState({page:2},'title 2','?page=2')\nhistory.replaceState({page:3},'title 3','?page=3')\n\nhistory.back() //urlæ¾ç¤ºä¸ºexample.com/example.html?page=1\nhistory.back() //urlæ¾ç¤ºä¸ºexample.com/example.html\nhistory.go(2) //urlæ¾ç¤ºä¸ºexample.com/example.html?page=3\n\n\n\n# popState äºä»¶\n\n * history.pushStateåhistory.replaceStateæ¹æ³æ¯ä¸ä¼è§¦åpopstateäºä»¶ç\n * ä½æ¯æµè§å¨çæäºè¡ä¸ºä¼å¯¼è´popstateï¼æ¯å¦goãbackãforward\n * popstateäºä»¶å¯¹è±¡ä¸­çstateå±æ§ï¼å¯ä»¥çè§£æ¯æä»¬å¨éè¿history.pushStateæhistory.replaceStateæ¹æ³æ¶ï¼ä¼ å¥çæå®çæ°æ®ï¼å¯ä»¥ä¸ºpopStateäºä»¶æå®åè°å½æ°\n\nwindow.onpopstate = function (event) {\n  console.log('location: ' + document.location);\n  console.log('state: ' +JSON.stringify(event.state));\n};\n\n// æè\nwindow.addEventListener('popstate', function(event) {\n  console.log('location: ' + document.location);\n  console.log('state: ' + JSON.stringify(event.state));\n});\n\n\næä»¥ï¼æä»¬å¯ä»¥ç½ååºææå¯è½è§¦å history æ¹åçæåµï¼å¹¶ä¸å°è¿äºæ¹å¼ä¸ä¸è¿è¡æ¦æªï¼åç¸å°çå¬ history çæ¹åã\n\nå¯¹äºåé¡µåºç¨ç history æ¨¡å¼èè¨ï¼url çæ¹ååªè½ç±ä¸é¢åç§æ¹å¼å¼èµ·ï¼\n\n 1. ç¹å»æµè§å¨çåè¿æåéæé®\n 2. ç¹å» a æ ç­¾\n 3. å¨ JS ä»£ç ä¸­è§¦å history.pushState å½æ°\n 4. å¨ JS ä»£ç ä¸­è§¦å history.replaceState å½æ°\n\n\x3c!-- popstate åç¹å»äºä»¶ è§¦åé¡µé¢æ¹å --\x3e\n\t<ul>\n      <li>\n        <a href=\"/a\">a</a>\n      </li>\n      <li>\n        <a href=\"/b\">b</a>\n      </li>\n      <li>\n        <a href=\"/c\">c</a>\n      </li>\n    </ul>\n    <div id=\"view\"></div>\n\n    <script>\n      var view = null;\n      \n      window.addEventListener('DOMContentLoaded', function () {\n        view = document.querySelector('#view');\n        document\n          .querySelectorAll('a[href]')\n          .forEach(e => e.addEventListener('click', function (_e) {\n            _e.preventDefault();\n            history.pushState(null, '', e.getAttribute('href'));\n            viewChange();\n          }));\n\n        viewChange();\n      });\n      // çå¬è·¯ç±åå\n      window.addEventListener('popstate', viewChange);\n\n      // æ¸²æè§å¾\n      function viewChange() {\n        switch (location.pathname) {\n          case '/b':\n            view.innerHTML = 'b';\n            break;\n          case '/c':\n            view.innerHTML = 'c';\n            break;\n          default:\n            view.innerHTML = 'a';\n            break;\n        }\n      }\n<\/script>\n\n\nä¼ç¹ï¼\n\n * è¯¥æ¨¡å¼çè·¯ç±ä¸å¸¦#ï¼çèµ·æ¥æ´ç¾è§\n * pushStateè®¾ç½®çURLå¯ä»¥æ¯ä»»æçä¸å½åURLåæºçURLï¼èhashåªè½æ¹å#åé¢çåå®¹\n\nç¼ºç¹ï¼\n\n * å½æä»¬ä½¿ç¨ history æ¨¡å¼è·¯ç±æ¶ï¼æ¯å¦æè¿ä¹ä¸ä¸ª urlï¼www.test.com/homeï¼å¦ææä»¬å·æ°é¡µé¢çè¯ï¼æµè§å¨ä¼åéæ°çè¯·æ± www.test.com/home, å¦æåç«¯æå¡å¨æ²¡æ /home å¯¹åºçæ¥å£ï¼é£ä¹å°±ä¼è¿å404ã\n * å·æ° 404 çè§£å³åæ³ï¼å¨æå¡ç«¯å¢å ä¸ä¸ªè¦çæææåµçåéèµæºï¼å¦æ URL å¹éä¸å°ä»»ä½éæèµæºï¼æ¥å£ååºè¯¥è¿åé¦é¡µ index.htmlã\n\n\n# æ ¹æ®æéå¨ææ·»å è·¯ç±åè¡¨\n\n * ä¸å¡åºæ¯ï¼ä¸åç¨æ·è°ç¨æéæ¥å£è·å¾çæéæ¯ä¸åçï¼æ ¹æ®ç¨æ·æéå¨æå±ç¤ºè·¯ç±åè¡¨\n\n\t\t api.getAuditInfo({\n             account: username,\n         }).then(res => {\n             console.log('æéä»£ç :', res)\n             // é«çº§æéï¼å¯ä»¥æ¥çæä¸åè·¯ç±\n             if (res.includes('auth0')) {\n                 window.authInfo = true\n                 // æ·»å è·¯ç±\n                 this.$router.addRoutes(videoRoutes)\n                 this.$router.options.routes.push(...videoRoutes)\n             // æ®éæé\n             } else if (res.includes('auth1') && !res.includes('auth0')) {\n                 window.authInfo = false\n             // æ²¡ææéæ¶è¿å\n             } else {\n                 window.location.href = `\n             }\n         })\n\n\n\n# éç½®è·¯ç±metaå±æ§\n\n * ä¸å¡åºæ¯ï¼åä¸ä¸ªç»ä»¶å¨ä¸åè·¯ç±ä¸çå±ç¤ºç¶ææ¯ä¸åçï¼è¿æ¶å¯ä»¥éç½®è·¯ç±metaå±æ§æ¥å®ç°\n\nconst routes = [\n    {\n        path: '/audit/video',\n        name: 'è§é¢ç®¡ç',\n        component: Layout,\n        children: [\n            {\n                path: 'videoList',\n                name: 'è§é¢åè¡¨',\n                meta: {\n                    noCache: true,\n                    cityChange: true,\n                },\n                component: auditvideoList\n            },\n            {\n                path: 'auditList',\n                name: 'å®¡æ ¸åè¡¨',\n                // éç½® meta å±æ§\n                meta: {\n                    noCache: true,\n                    cityDefault: true \n                },\n                component: auditList\n            }\n        ]\n    },\n    {\n        path: '*',\n        redirect: '/audit/agent',\n        hidden: true\n    }\n]\n\n\n * æ¯å¦è¯´ header ä¸­çä¸ä¸ªç»ä»¶ï¼ä¸åè·¯ç±é¡µé¢åå±ç¤ºï¼åªæ¯ç¶æä¸å\n\n<template>\n    <div v-if=\"!cityDefault\"></div>\n\t  <div v-else ></div>\n</template>\t\n\t\n<script>\ncomputed: {\n        cityDefault() {\n            return this.$route.meta.cityDefault;\n        }\n    },\n<\/script>\n\n\n\n# routerè·³è½¬ä¸¤æ¬¡çé®é¢\n\n> æµè§å¨ä¼èªå¨å¯¹ä¸­æè¿è¡è½¬ç ï¼ä¼å¯¼è´routerççå¬æ¹æ³çå¬å°æµè§å¨å°åæ ååãä¹å°±æ¯è¯´å½æä»¬è·³è½¬é¾æ¥å­å¨ä¸­æå­ç¬¦æ¶ï¼æµè§å¨å°åä¼ååä¸¤æ¬¡ï¼ç¶åå¯¼è´é¡µé¢ç»ä»¶ä¹ä¼å è½½ä¸¤æ¬¡ï¼",normalizedContent:"# historyæ¨¡å¼åhashæ¨¡å¼\n\nåç«¯éç ajax çæµè¡ï¼æ°æ®è¯·æ±å¯ä»¥å¨ä¸å·æ°æµè§å¨çæåµä¸è¿è¡ãå¼æ­¥äº¤äºä½éªä¸­æçè¡çå°±æ¯ spa ââ åé¡µåºç¨ãåé¡µåºç¨ä¸ä»ä»æ¯å¨é¡µé¢äº¤äºæ¶æ å·æ°çï¼è¿é¡µé¢è·³è½¬é½æ¯æ å·æ°çï¼ä¸ºäºå®ç°åé¡µåºç¨ï¼æä»¥å°±æäºåç«¯è·¯ç±ã\n\n\n# hashæ¨¡å¼\n\n#çæ¶µä¹\n\n * #ä»£è¡¨ç½é¡µä¸­çä¸ä¸ªä½ç½®,å³é¢çå­ç¬¦å°±æ¯ä»£è¡¨çä½ç½®\n * http://localhostï¼8081/cbuild/index.html#firstå°±ä»£è¡¨ç½é¡µindex.htmlçfirstä½ç½®ãæµè§å¨è¯»åè¿ä¸ªurlåï¼ä¼èªå¨å°firstä½ç½®æ»å¨è³å¯è§åºåã\n\n#åçå­ç¬¦\n\n * å¨ç¬¬ä¸ä¸ª#åé¢åºç°çä»»ä½å­ç¬¦ï¼é½ä¼è¢«æµè§å¨è§£è¯»ä¸ºä½ç½®æ è¯ç¬¦ãè¿æå³çï¼è¿äºå­ç¬¦é½ä¸ä¼è¢«åéå°æå¡å¨ç«¯ã\n\n * æ¯å¦ï¼ä¸é¢urlçåææ¯æå®ä¸ä¸ªé¢è²å¼ï¼http://www.example.com/?color=#fffä½æ¯ï¼æµè§å¨å®éååºçè¯·æ±æ¯\"#fff\"è¢«çç¥äºãåªæå°#è½¬ç ä¸º%23ï¼æµè§å¨æä¼å°å¶ä½ä¸ºå®ä¹å­ç¬¦å¤çãä¹å°±æ¯è¯´ï¼ä¸é¢çç½ååºè¯¥è¢«åæï¼http://example.com/?color=%23fff\n\næ¹å#ä¸è§¦åç½é¡µéè½½\n\n * ååæ¹å#åçé¨åï¼æµè§å¨åªä¼æ»å¨å°ç¸åºä½ç½®ï¼ä¸ä¼éæ°å è½½ç½é¡µã\n * æ¯å¦ï¼ä»http://www.example.com/index.html#location1æ¹æhttp://www.example.com/index.html#location2æµè§å¨ä¸ä¼éæ°åæå¡å¨è¯·æ±index.htmlã\n\næ¹å#ä¼æ¹åæµè§å¨çè®¿é®åå²\n\n * æ¯ä¸æ¬¡æ¹å#åçé¨åï¼é½ä¼å¨æµè§å¨çè®¿é®åå²ä¸­å¢å ä¸ä¸ªè®°å½ï¼ä½¿ç¨\"åé\"æé®ï¼å°±å¯ä»¥åå°ä¸ä¸ä¸ªä½ç½®ã\n\nwindow.location.hashè¯»å#å¼\n\n * window.location.hashè¿ä¸ªå±æ§å¯è¯»å¯åãè¯»åæ¶ï¼å¯ä»¥ç¨æ¥å¤æ­ç½é¡µç¶ææ¯å¦æ¹åï¼åå¥æ¶ï¼åä¼å¨ä¸éè½½ç½é¡µçåæä¸ï¼åé ä¸æ¡è®¿é®åå²è®°å½ã\n\nonhashchangeäºä»¶\n\n * è¿æ¯ä¸ä¸ªhtml 5æ°å¢çäºä»¶ï¼å½#å¼åçååæ¶ï¼å°±ä¼è§¦åè¿ä¸ªäºä»¶ã\n * window.addeventlistener(\"hashchange\",func, false);\n\næè·¯\n\n> å½urlççæ®µæ è¯ç¬¦æ´æ¹æ¶ï¼å°è§¦åhashchangeäºä»¶ (è·å¨ï¼ç¬¦å·åé¢çurlé¨åï¼åæ¬ï¼ç¬¦å·),ç¶åæ ¹æ®hashå¼åäºè·¯ç±è·³è½¬å¤ççæä½.å·ä½åæ°å¯ä»¥è®¿é®locationæ¥ç\n\n\x3c!-- hashchange è§¦åé¡µé¢æ¹å --\x3e\n\t<ul>\n      <li>\n        <a href=\"#/a\">a</a>\n      </li>\n      <li>\n        <a href=\"#/b\">b</a>\n      </li>\n      <li>\n        <a href=\"#/c\">c</a>\n      </li>\n    </ul>\n    <div id=\"view\"></div>\n\n    <script>\n      var view = null;\n      // é¡µé¢å è½½å®ä¸ä¼è§¦å hashchangeï¼è¿éä¸»å¨è§¦åä¸æ¬¡ hashchange äºä»¶\n      // è¯¥äºä»¶å¿«äºonload,æä»¥éè¦å¨è¿éæä½\n      window.addeventlistener('domcontentloaded', function () {\n        view = document.queryselector('#view');\n        viewchange();\n      });\n      // çå¬è·¯ç±åå\n      window.addeventlistener('hashchange', viewchange);\n\n      // æ¸²æè§å¾\n      function viewchange() {\n        switch (location.hash) {\n          case '#/b':\n            view.innerhtml = 'b';\n            break;\n          case '#/c':\n            view.innerhtml = 'c';\n            break;\n          default:\n            view.innerhtml = 'a';\n            break;\n        }\n      }\n<\/script>\n\n\n\n# historyæ¨¡å¼\n\nwindow.history(å¯ç´æ¥åæhistory)æåhistoryå¯¹è±¡ï¼å®è¡¨ç¤ºå½åçªå£çæµè§åå²ã\n\nhistoryå¯¹è±¡ä¿å­äºå½åçªå£è®¿é®è¿çææé¡µé¢ç½å\n\n\n# length\n\n * history.lengthå±æ§ä¿å­çåå²è®°å½çurlæ°éï¼åå§æ¶è¯¥å¼ä¸º1ï¼å¦æå½åçªå£ååè®¿é®äºä¸ä¸ªç½åï¼é£ä¹historyå¯¹è±¡å°±åæ¬3é¡¹ï¼history.length=3\n\nè·³è½¬æ¹æ³\n\n * go() æ¥åä¸ä¸ªæ´æ°ä¸ºåæ°ï¼ç§»å¨å°è¯¥æ´æ°æå®çé¡µé¢ï¼æ¯å¦history.go(1)ç¸å½äºhistory.forward(),history.go(-1)ç¸å½äºhistory.back(),history.go(0)ç¸å½äºå·æ°å½åé¡µé¢\n * back() ç§»å¨å°ä¸ä¸ä¸ªè®¿é®é¡µé¢ï¼ç­åäºæµè§å¨çåéé®,å¸¸è§çè¿åä¸ä¸é¡µå°±å¯ä»¥ç¨back()ï¼æ¯ä»æµè§å¨ç¼å­ä¸­å è½½ï¼èä¸æ¯éæ°è¦æ±æå¡å¨åéæ°çç½é¡µ\n * forward() ç§»å¨å°ä¸ä¸ä¸ªè®¿é®é¡µé¢ï¼ç­åäºæµè§å¨çåè¿é®\n\nå¦æç§»å¨çä½ç½®è¶åºäºè®¿é®åå²çè¾¹çï¼ä»¥ä¸ä¸ä¸ªæ¹æ³å¹¶ä¸æ¥éï¼èæ¯é»é»çå¤±è´¥\n\n\n# history.pushstate()\n\nhistory.pushstate() æ¹æ³æ¥åä¸ä¸ªåæ°ï¼ä»¥æ­¤ä¸ºï¼\n\n * state: ä¸ä¸ªä¸æå®ç½åç¸å³çç¶æå¯¹è±¡ï¼popstateäºä»¶è§¦åæ¶ï¼è¯¥å¯¹è±¡ä¼ä¼ å¥åè°å½æ°ï¼å¦æä¸éè¦è¿ä¸ªå¯¹è±¡ï¼æ­¤å¤å¯å¡«null\n * title: æ°é¡µé¢çæ é¢ï¼ä½æ¯æææµè§å¨ç®åé½å¿½ç¥è¿ä¸ªå¼ï¼å æ­¤è¿éå¯ä»¥å¡«null\n * url: æ°çç½åï¼å¿é¡»ä¸å½åé¡µé¢å¤å¨åä¸ä¸ªåï¼æµè§å¨çå°åæ å°æ¾ç¤ºè¿ä¸ªç½å\n\n// åå®å½åç½åæ¯example.com/1.htmlï¼æä»¬ä½¿ç¨pushstateæ¹æ³å¨æµè§è®°å½(historyå¯¹è±¡)ä¸­æ·»å ä¸ä¸ªè®°å½\n\nvar stateobj = {foo:'bar'};\nhistory.pushstate(stateobj,'page 2','2.html')\n\n\n> æ·»å ä¸è¾¹è¿ä¸ªæ°çºªå½åï¼æµè§å¨å°åæ ç«å»æ¾ç¤ºexample.com/2.htmlï¼ä½ä¸ä¼è·³è½¬å°2.htmlï¼çè³ä¹ä¸ä¼æ£æ¥2.htmlæ¯å¦å­å¨ï¼å®åªæ¯æä¸ºæµè§åå²ä¸­çæ°çºªå½ãè¿æ¶ï¼ä½ å¨å°åæ è¾å¥ä¸ä¸ªæ°çå°åï¼ç¶åç¹å»äºåéæé®ï¼é¡µé¢çurlå°æ¾ç¤º2.htmlï¼ä½ åç¹å»ä»¥æ­¤åéæé®ï¼urlå°æ¾ç¤º1.html\n\næ»ä¹ï¼pushstateæ¹æ³ä¸ä¼è§¦åé¡µé¢å·æ°ï¼åªæ¯å¯¼è´äºhistoryå¯¹è±¡åçååï¼å°åæ ä¼æååº\n\nå¦æpushstateçurlåæ°ï¼è®¾ç½®äºä¸ä¸ªæ°çéç¹å¼ï¼å³hashï¼ï¼å¹¶ä¸ä¼è§¦åhashchangeäºä»¶ï¼å¦æè®¾ç½®äºä¸ä¸ªè·¨åç½åï¼åä¼æ¥éã\n\n//æ¥é\nhistory.pushstate(null,null,'https://twitter.com/hello')\n\n\nä¸è¾¹ä»£ç ä¸­ï¼pushstate()æ³è¦æå¥ä¸ä¸ªè·¨åçç½åï¼å¯¼è´æ¥éï¼è¿æ ·è®¾è®¡çç®çæ¯é²æ­¢æ¶æä»£ç è®©ç¨æ·ä»¥ä¸ºä»ä»¬æ¯å¨å¦ä¸ä¸ªç½ç«ä¸.\n\n\n# history.replacestate()\n\nhistory.replacestate() æ¹æ³çåæ°å pushstate() æ¹æ³ä¸æ¸ä¸æ ·ï¼åºå«æ¯å®ä¿®æ¹æµè§å¨åå²å½ä¸­çè®°å½\n\nåå®å½åé¡µé¢æ¯example.com/example.html\n\nhistory.pushstate({page:1},'title 1','?page=1')\nhistory.pushstate({page:2},'title 2','?page=2')\nhistory.replacestate({page:3},'title 3','?page=3')\n\nhistory.back() //urlæ¾ç¤ºä¸ºexample.com/example.html?page=1\nhistory.back() //urlæ¾ç¤ºä¸ºexample.com/example.html\nhistory.go(2) //urlæ¾ç¤ºä¸ºexample.com/example.html?page=3\n\n\n\n# popstate äºä»¶\n\n * history.pushstateåhistory.replacestateæ¹æ³æ¯ä¸ä¼è§¦åpopstateäºä»¶ç\n * ä½æ¯æµè§å¨çæäºè¡ä¸ºä¼å¯¼è´popstateï¼æ¯å¦goãbackãforward\n * popstateäºä»¶å¯¹è±¡ä¸­çstateå±æ§ï¼å¯ä»¥çè§£æ¯æä»¬å¨éè¿history.pushstateæhistory.replacestateæ¹æ³æ¶ï¼ä¼ å¥çæå®çæ°æ®ï¼å¯ä»¥ä¸ºpopstateäºä»¶æå®åè°å½æ°\n\nwindow.onpopstate = function (event) {\n  console.log('location: ' + document.location);\n  console.log('state: ' +json.stringify(event.state));\n};\n\n// æè\nwindow.addeventlistener('popstate', function(event) {\n  console.log('location: ' + document.location);\n  console.log('state: ' + json.stringify(event.state));\n});\n\n\næä»¥ï¼æä»¬å¯ä»¥ç½ååºææå¯è½è§¦å history æ¹åçæåµï¼å¹¶ä¸å°è¿äºæ¹å¼ä¸ä¸è¿è¡æ¦æªï¼åç¸å°çå¬ history çæ¹åã\n\nå¯¹äºåé¡µåºç¨ç history æ¨¡å¼èè¨ï¼url çæ¹ååªè½ç±ä¸é¢åç§æ¹å¼å¼èµ·ï¼\n\n 1. ç¹å»æµè§å¨çåè¿æåéæé®\n 2. ç¹å» a æ ç­¾\n 3. å¨ js ä»£ç ä¸­è§¦å history.pushstate å½æ°\n 4. å¨ js ä»£ç ä¸­è§¦å history.replacestate å½æ°\n\n\x3c!-- popstate åç¹å»äºä»¶ è§¦åé¡µé¢æ¹å --\x3e\n\t<ul>\n      <li>\n        <a href=\"/a\">a</a>\n      </li>\n      <li>\n        <a href=\"/b\">b</a>\n      </li>\n      <li>\n        <a href=\"/c\">c</a>\n      </li>\n    </ul>\n    <div id=\"view\"></div>\n\n    <script>\n      var view = null;\n      \n      window.addeventlistener('domcontentloaded', function () {\n        view = document.queryselector('#view');\n        document\n          .queryselectorall('a[href]')\n          .foreach(e => e.addeventlistener('click', function (_e) {\n            _e.preventdefault();\n            history.pushstate(null, '', e.getattribute('href'));\n            viewchange();\n          }));\n\n        viewchange();\n      });\n      // çå¬è·¯ç±åå\n      window.addeventlistener('popstate', viewchange);\n\n      // æ¸²æè§å¾\n      function viewchange() {\n        switch (location.pathname) {\n          case '/b':\n            view.innerhtml = 'b';\n            break;\n          case '/c':\n            view.innerhtml = 'c';\n            break;\n          default:\n            view.innerhtml = 'a';\n            break;\n        }\n      }\n<\/script>\n\n\nä¼ç¹ï¼\n\n * è¯¥æ¨¡å¼çè·¯ç±ä¸å¸¦#ï¼çèµ·æ¥æ´ç¾è§\n * pushstateè®¾ç½®çurlå¯ä»¥æ¯ä»»æçä¸å½åurlåæºçurlï¼èhashåªè½æ¹å#åé¢çåå®¹\n\nç¼ºç¹ï¼\n\n * å½æä»¬ä½¿ç¨ history æ¨¡å¼è·¯ç±æ¶ï¼æ¯å¦æè¿ä¹ä¸ä¸ª urlï¼www.test.com/homeï¼å¦ææä»¬å·æ°é¡µé¢çè¯ï¼æµè§å¨ä¼åéæ°çè¯·æ± www.test.com/home, å¦æåç«¯æå¡å¨æ²¡æ /home å¯¹åºçæ¥å£ï¼é£ä¹å°±ä¼è¿å404ã\n * å·æ° 404 çè§£å³åæ³ï¼å¨æå¡ç«¯å¢å ä¸ä¸ªè¦çæææåµçåéèµæºï¼å¦æ url å¹éä¸å°ä»»ä½éæèµæºï¼æ¥å£ååºè¯¥è¿åé¦é¡µ index.htmlã\n\n\n# æ ¹æ®æéå¨ææ·»å è·¯ç±åè¡¨\n\n * ä¸å¡åºæ¯ï¼ä¸åç¨æ·è°ç¨æéæ¥å£è·å¾çæéæ¯ä¸åçï¼æ ¹æ®ç¨æ·æéå¨æå±ç¤ºè·¯ç±åè¡¨\n\n\t\t api.getauditinfo({\n             account: username,\n         }).then(res => {\n             console.log('æéä»£ç :', res)\n             // é«çº§æéï¼å¯ä»¥æ¥çæä¸åè·¯ç±\n             if (res.includes('auth0')) {\n                 window.authinfo = true\n                 // æ·»å è·¯ç±\n                 this.$router.addroutes(videoroutes)\n                 this.$router.options.routes.push(...videoroutes)\n             // æ®éæé\n             } else if (res.includes('auth1') && !res.includes('auth0')) {\n                 window.authinfo = false\n             // æ²¡ææéæ¶è¿å\n             } else {\n                 window.location.href = `\n             }\n         })\n\n\n\n# éç½®è·¯ç±metaå±æ§\n\n * ä¸å¡åºæ¯ï¼åä¸ä¸ªç»ä»¶å¨ä¸åè·¯ç±ä¸çå±ç¤ºç¶ææ¯ä¸åçï¼è¿æ¶å¯ä»¥éç½®è·¯ç±metaå±æ§æ¥å®ç°\n\nconst routes = [\n    {\n        path: '/audit/video',\n        name: 'è§é¢ç®¡ç',\n        component: layout,\n        children: [\n            {\n                path: 'videolist',\n                name: 'è§é¢åè¡¨',\n                meta: {\n                    nocache: true,\n                    citychange: true,\n                },\n                component: auditvideolist\n            },\n            {\n                path: 'auditlist',\n                name: 'å®¡æ ¸åè¡¨',\n                // éç½® meta å±æ§\n                meta: {\n                    nocache: true,\n                    citydefault: true \n                },\n                component: auditlist\n            }\n        ]\n    },\n    {\n        path: '*',\n        redirect: '/audit/agent',\n        hidden: true\n    }\n]\n\n\n * æ¯å¦è¯´ header ä¸­çä¸ä¸ªç»ä»¶ï¼ä¸åè·¯ç±é¡µé¢åå±ç¤ºï¼åªæ¯ç¶æä¸å\n\n<template>\n    <div v-if=\"!citydefault\"></div>\n\t  <div v-else ></div>\n</template>\t\n\t\n<script>\ncomputed: {\n        citydefault() {\n            return this.$route.meta.citydefault;\n        }\n    },\n<\/script>\n\n\n\n# routerè·³è½¬ä¸¤æ¬¡çé®é¢\n\n> æµè§å¨ä¼èªå¨å¯¹ä¸­æè¿è¡è½¬ç ï¼ä¼å¯¼è´routerççå¬æ¹æ³çå¬å°æµè§å¨å°åæ ååãä¹å°±æ¯è¯´å½æä»¬è·³è½¬é¾æ¥å­å¨ä¸­æå­ç¬¦æ¶ï¼æµè§å¨å°åä¼ååä¸¤æ¬¡ï¼ç¶åå¯¼è´é¡µé¢ç»ä»¶ä¹ä¼å è½½ä¸¤æ¬¡ï¼",charsets:{cjk:!0}},{title:"æå¡ç«¯æ¸²æ",frontmatter:{title:"æå¡ç«¯æ¸²æ",date:"2020-11-08T11:27:54.000Z",categories:"SSR"},regularPath:"/ssr/ssr.html",relativePath:"ssr/ssr.md",key:"v-c4186e42",path:"/ssr/ssr.html",headers:[{level:2,title:"æ¸²ææ¨¡å¼",slug:"æ¸²ææ¨¡å¼",normalizedTitle:"æ¸²ææ¨¡å¼",charIndex:104},{level:3,title:"ä¼ ç»æå¡ç«¯æ¸²æ",slug:"ä¼ ç»æå¡ç«¯æ¸²æ",normalizedTitle:"ä¼ ç»æå¡ç«¯æ¸²æ",charIndex:113},{level:3,title:"SPAåé¡µåºç¨",slug:"spaåé¡µåºç¨",normalizedTitle:"spaåé¡µåºç¨",charIndex:515},{level:3,title:"åæåºç¨",slug:"åæåºç¨",normalizedTitle:"åæåºç¨",charIndex:696},{level:2,title:"ä¸ºä»ä¹è¦ SSR",slug:"ä¸ºä»ä¹è¦-ssr",normalizedTitle:"ä¸ºä»ä¹è¦ ssr",charIndex:1224},{level:3,title:"1. SEO",slug:"_1-seo",normalizedTitle:"1. seo",charIndex:1237},{level:3,title:"2. æ§è½",slug:"_2-æ§è½",normalizedTitle:"2. æ§è½",charIndex:1398},{level:2,title:"SSR çä»£ä»·",slug:"ssr-çä»£ä»·",normalizedTitle:"ssr çä»£ä»·",charIndex:1821},{level:2,title:"ä¸éå SSR çåºæ¯",slug:"ä¸éå-ssr-çåºæ¯",normalizedTitle:"ä¸éå ssr çåºæ¯",charIndex:2046},{level:2,title:"vue-ssr",slug:"vue-ssr",normalizedTitle:"vue-ssr",charIndex:2139},{level:2,title:"san-ssr",slug:"san-ssr",normalizedTitle:"san-ssr",charIndex:2629},{level:2,title:"å³äº hydration (å®¢æ·ç«¯æ¿æ´»)çè§£é",slug:"å³äº-hydration-å®¢æ·ç«¯æ¿æ´»-çè§£é",normalizedTitle:"å³äº hydration (å®¢æ·ç«¯æ¿æ´»)çè§£é",charIndex:2937}],lastUpdated:"2/23/2022, 7:39:28 PM",lastUpdatedTimestamp:1645616368e3,headersStr:"æ¸²ææ¨¡å¼ ä¼ ç»æå¡ç«¯æ¸²æ SPAåé¡µåºç¨ åæåºç¨ ä¸ºä»ä¹è¦ SSR 1. SEO 2. æ§è½ SSR çä»£ä»· ä¸éå SSR çåºæ¯ vue-ssr san-ssr å³äº hydration (å®¢æ·ç«¯æ¿æ´»)çè§£é",content:"# æå¡ç«¯æ¸²æ\n\nSSRï¼Server Side Renderï¼æ¯æå¨æå¡ç«¯ææ°æ®å¡«åå°æ¨¡æ¿å½¢æå®æ´çé¡µé¢ï¼åå°äºå®¢æ·ç«¯çå·¥ä½ä¼åäºé¦å±ï¼FMPï¼first meaningful paintï¼æ§è½ã\n\n\n# æ¸²ææ¨¡å¼\n\n\n# ä¼ ç»æå¡ç«¯æ¸²æ\n\n * ææ©æï¼Web é¡µé¢æ¸²æé½æ¯å¨æå¡ç«¯å®æçï¼å³æå¡ç«¯è¿è¡è¿ç¨ä¸­å°æéçæ°æ®ç»åé¡µé¢æ¨¡æ¿æ¸²æä¸º\n   \n   HTMLï¼ååºç»å®¢æ·ç«¯æµè§å¨ãæä»¥æµè§å¨åç°åºæ¥çæ¯ç´æ¥åå«åå®¹çé¡µé¢ã\n\n * è¿ç§æ¹å¼çä»£è¡¨æ§ææ¯æï¼ASPãPHPãJSPï¼åå°åæ¥çä¸äºç¸å¯¹é«çº§ä¸ç¹çæå¡ç«¯æ¡æ¶éåä¸äºæ¨¡æ¿\n   \n   å¼æ\n\n * å¨ä»å¤©çæ¥ï¼è¿ç§æ¸²ææ¨¡å¼æ¯ä¸åçæèè¯´ä¸åè¿çãå ä¸ºå¨å½ä¸è¿ç§ç½é¡µè¶æ¥è¶å¤æçæåµä¸ï¼è¿ç§\n   \n   æ¨¡å¼å­å¨å¾å¤ææ¾çä¸è¶³ï¼\n   \n   * åºç¨çååç«¯é¨åå®å¨è¦åå¨ä¸èµ·ï¼å¨ååç«¯ååå¼åæ¹é¢ä¼æéå¸¸å¤§çé»åï¼\n   \n   * åç«¯æ²¡æè¶³å¤çåæ¥ç©ºé´ï¼æ æ³ååå©ç¨ç°å¨åç«¯çæä¸çä¸äºæ´ä¼ç§çæ¹æ¡ï¼\n   \n   * ç±äºåå®¹é½æ¯å¨æå¡ç«¯å¨æçæçï¼æä»¥æå¡ç«¯çååè¾å¤§ï¼\n   \n   * ç¸æ¯ç®åæµè¡ç SPA åºç¨æ¥è¯´ï¼ç¨æ·ä½éªä¸è¬ï¼\n\n\n# SPAåé¡µåºç¨\n\n * éçajaxçåå±ï¼AJAX æ¯ä¸æå¡å¨äº¤æ¢æ°æ®å¹¶æ´æ°é¨åç½é¡µçèºæ¯ï¼å¨ä¸éæ°å è½½æ´ä¸ªé¡µé¢çæåµä¸ï¼ä»¥ååç«¯æ¡æ¶çåå±ï¼Vueï¼Reactï¼Angular é½æ¯åºäºå®¢æ·ç«¯æ¸²æçåç«¯æ¡æ¶ï¼è¿ç±»æ¡æ¶ææå»ºçé½æ¯åé¡µåºç¨ï¼SPAï¼\n * ä¼ç¹ï¼ç¨æ·ä½éªå¥½ãå¼åæçé«ãæ¸²ææ§è½å¥½ãå¯ç»´æ¤æ§å¥½\n * ç¼ºç¹ï¼é¦å±æ¸²ææ¶é´é¿ãä¸å©äº SEO\n\n\n# åæåºç¨\n\n * åææå¡ç«¯æ¸²æé¦å±ç´åºï¼è§£å³ SPA åºç¨é¦å±æ¸²ææ¢ä»¥åä¸å©äº SEO é®é¢\n * ç¶åéè¿å®¢æ·ç«¯æ¸²ææ¥ç®¡é¡µé¢åå®¹äº¤äºå¾å°æ´å¥½çç¨æ·ä½éª\n * å®éæ¯ãæå¡ç«¯æ¸²æã + ãå®¢æ·ç«¯æ¸²æãçç»å\n * ä¼ç¹ï¼é¦å±æ¸²æéåº¦å¿«ãæå©äº SEO\n * ç¼ºç¹ï¼\n   * å¼åææ¬é«ã\n   * æ¶åæå»ºè®¾ç½®åé¨ç½²çæ´å¤è¦æ±ãä¸å¯ä»¥é¨ç½²å¨ä»»ä½éææä»¶æå¡å¨ä¸çå®å¨éæåé¡µé¢åºç¨ç¨åº (SPA) ä¸åï¼æå¡å¨æ¸²æåºç¨ç¨åºï¼ä¸è¬éè¦å¤äº Node.js server è¿è¡ç¯å¢ã\n   * æ´å¤çæå¡å¨ç«¯è´è½½ãå¨ Node.js ä¸­æ¸²æå®æ´çåºç¨ç¨åºï¼æ¾ç¶ä¼æ¯ä»ä»æä¾éææä»¶çserver æ´å å¤§éå ç¨ CPU èµæº (CPU-intensive - CPU å¯é)ï¼å æ­¤å¦æä½ é¢æå¨é«æµéç¯å¢(high traffic) ä¸ä½¿ç¨ï¼è¯·åå¤ç¸åºçæå¡å¨è´è½½ï¼å¹¶ææºå°éç¨ç¼å­ç­ç¥\n\nåé¢æä»¬ä»ç»çæå¡ç«¯æ¸²æä¸è¬æ¯æåæåºç¨ï¼åç«¯ç»ä»¶åæ¡æ¶çæå¡ç«¯æ¸²æï¼æ¯å¦ React SSRãVue SSRãSan SSRã\n\n\n\n * ä¸é¢ä¸º CSRï¼å è½½ HTMLãå è½½ JSãæ¸²æ/FMP\n * ä¸é¢ä¸º SSRï¼å è½½HTMLãæ¸²æ/FMPãå è½½ JS\n\n\n# ä¸ºä»ä¹è¦ SSR\n\n\n# 1. SEO\n\nå¤æ°æç´¢å¼æé½å¯ä»¥è¯»å SPA åå®¹ï¼ä½å¼æ­¥åå®¹ä»ç¶ä¸å®¹æç´¢å¼ã\n\n * æåå¼æ­¥åå®¹ 10-20s Timeout[1]\n * ç¬è«ä¸ä¸å®è®¤è¯åç«¯è·¯ç±[2]ï¼å°¤å¶æ¯ Hash\n * JavaScript éè¯¯ç­ Edge Case\n * ç¨æ·ä½éªä¼å½±åæåï¼å°¤å¶æ¯é¡µé¢æ§è½ï¼TTIãFMPãâ¦â¦\n\n\n# 2. æ§è½\n\né¦åç CSR çæ§è½\n\n\n\nåç SSR çæ§è½\n\n\n\n * æ²çº¿å¾ä¸­é»è²åç®­å¤´æåä¸ºèæ¬æ§è¡ï¼ç´«è²ä¸ºæ¸²æï¼å¦ææå¤ä¸ªç´«è²åæ¯åçäºéç»ã\n * åè¯è§£é\n   * FP (First Paint)é¦æ¬¡ç»å¶\n   * FCP (First Contentful Paint) é¦æ¬¡åå®¹ç»å¶\n   * LCP (Largest Contentful Paint) æå¤§åå®¹æ¸²æ\n   * DCL (DomContentloaded)\n   * FMP(First Meaningful Paint) é¦æ¬¡ææç»å¶\n   * L (onLoad)\n   * TTI (Time to Interactive) å¯äº¤äºæ¶é´\n * SSR ç DCL æ¶é´ä¼åé¿ï¼å ä¸ºæå¡ç«¯åçäºæåå¤äºï¼è¿åçä¸æ¯ç©ºç Htmlã\n * SSR ç DCL å FMP æ¯åæ¶å°è¾¾çï¼å³è·åå° html åå°±å¯ä»¥å±ç¤ºå°é¡µé¢ä¸ï¼ç¨æ·å¯ä»¥ççè§ã\n\n\n# SSR çä»£ä»·\n\n * TTFB æ´æï¼æå¡å¨ç«¯æ¶é´æ´é¿\n   * DCLãFP ææ åºå½è°æ´ä¸º FMPãTTIã\n   * èèç¦»çº¿é¢æ¸²ææ¿ä»£æå¡ç«¯æ¸²æ\n * TTI ä¸ä¸å®æ´æ©\n   * ç¨æ·é¦æ¬¡çå°çåªæ¯éæé¡µé¢ï¼ä½æ­¤æ¶è¿ä¸è½äº¤äºã\n   * ä¸ä¸æ­¥éè¦æ§è¡èæ¬ï¼è¿ä¸ªè¿ç¨ vue ä¸­ç§°ä¸º Hydrationï¼å®¢æ·ç«¯æ¿æ´»ï¼ï¼ä¸ä¸å®æ¯éæ°æ¸²ææ´å¿«ã\n * ç»´æ¤ææ¬æ´é«\n   * ç»ä»¶éè¦åæ¶èè Node.js åæµè§å¨ä¸¤ç§å®¿ä¸»ç¯å¢ã\n\n\n# ä¸éå SSR çåºæ¯\n\n 1. åå°ç³»ç»ï¼CMSãMISãDashboard\n 2. åè½åé¡µé¢ï¼ä¸ªäººä¸­å¿ãæçæ¶è\n 3. éæåå®¹ï¼ç¨æ·æ å³çé¡µé¢ãéæçé¡µé¢ãèèé¢æ¸²æ\n\n\n# vue-ssr\n\nå®æ¹ææ¡£ï¼https://vuejs.org/guide/scaling-up/ssr.html#rendering-an-app\n\n * Vue SSR æå\n\n * Vue SSR å®ç½\n\n// this runs in Node.js on the server.\nimport { createSSRApp } from 'vue'\n// Vue's server-rendering API is exposed under `vue/server-renderer`.\nimport { renderToString } from 'vue/server-renderer'\n\nconst app = createSSRApp({\n  data: () => ({ count: 1 }),\n  template: `<button @click=\"count++\">{{ count }}</button>`\n})\n\nrenderToString(app).then((html) => {\n  console.log(html)\n})\n\n\n\n# san-ssr\n\nå®ç½ï¼https://github.com/baidu/san-ssr\n\nconst { defineComponent } = require('san');\nconst { compileToRenderer } = require('san-ssr');\n\nconst MyApp = defineComponent({\n  template: '<div>Hello {{ name }} !</div>'\n});\n\nconst render = compileToRenderer(MyApp);\nconst html = render({ name: 'San' });  \n\n\n\n# å³äº hydration (å®¢æ·ç«¯æ¿æ´»)çè§£é\n\næèï¼å¦ä½éè¿ ssr çæ¹å¼å°ä»¥ä¸ç»ä»¶å±ç¤ºå°é¡µé¢ä¸ï¼\n\n\x3c!-- App.san --\x3e\n<template>\n    <div id=\"app\" on-click=\"onClick\">\n      <p>Hello {{name}}!</p>\n      <p class=\"count\">Click count: {{ count }}</p>\n    </div>\n</template>\n<script>\nimport {Component} from 'san'\nclass x extends Component {}\n    export default {\n        initData() {\n            return {\n                name: 'San',\n                count: 0\n            };\n        },\n        onClick() {\n            const count = this.data.get('count')\n            this.data.set('count', count + 1)\n        }\n    };\n<\/script>\n<style lang=\"less\">\n    @highlight: #f00;\n\n    div {\n        .count {\n            color: @highlight;\n        }\n    }\n</style>\n\n\né¦åå¨æå¡ç«¯ï¼san-ssr å¯¹è¯¥ç»ä»¶å¤çåå¾å°å¦ä¸ï¼å³ä¸ºæå¡ç«¯éè¿ html ç´æ¥è¿åç»æµè§å¨å±ç¤ºç\n\n<div id=\"app\">\x3c!--s-data:{\"count\":1,\"name\":\"San\"}--\x3e\n  <p>Hello San!</p>\n  <p class=\"count\">Click count: 1</p>\n</div>\n\n\nä½æ¯å¶ä¸­çç¹å»äºä»¶ä¸ä¼çæï¼æä»¥ä¸é¢éè¦å®¢æ·ç«¯æ¿æ´»ï¼ä»¥ä¸ä»£ç å¨æåä¹åä¼å¼å¥å°æµè§å¨ä¸­æ§è¡ãæ³¨æè¿éæ¯ç´æ¥ new App ï¼èä¸æ¯ attach è¿è¡æ·»å ã\n\n// client.js\nimport App from './App.san'\n\nconst app = new App({\n    el: document.querySelector('#app')\n});\n\n\nå¦æå®¢æ·ç«¯ new App è½å¤åæå¡ç«¯è¿åç html å¹éå¾ä¸ï¼åä¼æ¿æ´»æåï¼å®¢æ·ç«¯ä»£ç çæï¼ç¹å»äºä»¶å³å¯æ§è¡ãè¿ä¸ªè¿ç¨ä¸­è¿æ¶åå° webpack çéç½®ï¼express æå¡çå¯å¨ï¼è¯¦è§demo",normalizedContent:"# æå¡ç«¯æ¸²æ\n\nssrï¼server side renderï¼æ¯æå¨æå¡ç«¯ææ°æ®å¡«åå°æ¨¡æ¿å½¢æå®æ´çé¡µé¢ï¼åå°äºå®¢æ·ç«¯çå·¥ä½ä¼åäºé¦å±ï¼fmpï¼first meaningful paintï¼æ§è½ã\n\n\n# æ¸²ææ¨¡å¼\n\n\n# ä¼ ç»æå¡ç«¯æ¸²æ\n\n * ææ©æï¼web é¡µé¢æ¸²æé½æ¯å¨æå¡ç«¯å®æçï¼å³æå¡ç«¯è¿è¡è¿ç¨ä¸­å°æéçæ°æ®ç»åé¡µé¢æ¨¡æ¿æ¸²æä¸º\n   \n   htmlï¼ååºç»å®¢æ·ç«¯æµè§å¨ãæä»¥æµè§å¨åç°åºæ¥çæ¯ç´æ¥åå«åå®¹çé¡µé¢ã\n\n * è¿ç§æ¹å¼çä»£è¡¨æ§ææ¯æï¼aspãphpãjspï¼åå°åæ¥çä¸äºç¸å¯¹é«çº§ä¸ç¹çæå¡ç«¯æ¡æ¶éåä¸äºæ¨¡æ¿\n   \n   å¼æ\n\n * å¨ä»å¤©çæ¥ï¼è¿ç§æ¸²ææ¨¡å¼æ¯ä¸åçæèè¯´ä¸åè¿çãå ä¸ºå¨å½ä¸è¿ç§ç½é¡µè¶æ¥è¶å¤æçæåµä¸ï¼è¿ç§\n   \n   æ¨¡å¼å­å¨å¾å¤ææ¾çä¸è¶³ï¼\n   \n   * åºç¨çååç«¯é¨åå®å¨è¦åå¨ä¸èµ·ï¼å¨ååç«¯ååå¼åæ¹é¢ä¼æéå¸¸å¤§çé»åï¼\n   \n   * åç«¯æ²¡æè¶³å¤çåæ¥ç©ºé´ï¼æ æ³ååå©ç¨ç°å¨åç«¯çæä¸çä¸äºæ´ä¼ç§çæ¹æ¡ï¼\n   \n   * ç±äºåå®¹é½æ¯å¨æå¡ç«¯å¨æçæçï¼æä»¥æå¡ç«¯çååè¾å¤§ï¼\n   \n   * ç¸æ¯ç®åæµè¡ç spa åºç¨æ¥è¯´ï¼ç¨æ·ä½éªä¸è¬ï¼\n\n\n# spaåé¡µåºç¨\n\n * éçajaxçåå±ï¼ajax æ¯ä¸æå¡å¨äº¤æ¢æ°æ®å¹¶æ´æ°é¨åç½é¡µçèºæ¯ï¼å¨ä¸éæ°å è½½æ´ä¸ªé¡µé¢çæåµä¸ï¼ä»¥ååç«¯æ¡æ¶çåå±ï¼vueï¼reactï¼angular é½æ¯åºäºå®¢æ·ç«¯æ¸²æçåç«¯æ¡æ¶ï¼è¿ç±»æ¡æ¶ææå»ºçé½æ¯åé¡µåºç¨ï¼spaï¼\n * ä¼ç¹ï¼ç¨æ·ä½éªå¥½ãå¼åæçé«ãæ¸²ææ§è½å¥½ãå¯ç»´æ¤æ§å¥½\n * ç¼ºç¹ï¼é¦å±æ¸²ææ¶é´é¿ãä¸å©äº seo\n\n\n# åæåºç¨\n\n * åææå¡ç«¯æ¸²æé¦å±ç´åºï¼è§£å³ spa åºç¨é¦å±æ¸²ææ¢ä»¥åä¸å©äº seo é®é¢\n * ç¶åéè¿å®¢æ·ç«¯æ¸²ææ¥ç®¡é¡µé¢åå®¹äº¤äºå¾å°æ´å¥½çç¨æ·ä½éª\n * å®éæ¯ãæå¡ç«¯æ¸²æã + ãå®¢æ·ç«¯æ¸²æãçç»å\n * ä¼ç¹ï¼é¦å±æ¸²æéåº¦å¿«ãæå©äº seo\n * ç¼ºç¹ï¼\n   * å¼åææ¬é«ã\n   * æ¶åæå»ºè®¾ç½®åé¨ç½²çæ´å¤è¦æ±ãä¸å¯ä»¥é¨ç½²å¨ä»»ä½éææä»¶æå¡å¨ä¸çå®å¨éæåé¡µé¢åºç¨ç¨åº (spa) ä¸åï¼æå¡å¨æ¸²æåºç¨ç¨åºï¼ä¸è¬éè¦å¤äº node.js server è¿è¡ç¯å¢ã\n   * æ´å¤çæå¡å¨ç«¯è´è½½ãå¨ node.js ä¸­æ¸²æå®æ´çåºç¨ç¨åºï¼æ¾ç¶ä¼æ¯ä»ä»æä¾éææä»¶çserver æ´å å¤§éå ç¨ cpu èµæº (cpu-intensive - cpu å¯é)ï¼å æ­¤å¦æä½ é¢æå¨é«æµéç¯å¢(high traffic) ä¸ä½¿ç¨ï¼è¯·åå¤ç¸åºçæå¡å¨è´è½½ï¼å¹¶ææºå°éç¨ç¼å­ç­ç¥\n\nåé¢æä»¬ä»ç»çæå¡ç«¯æ¸²æä¸è¬æ¯æåæåºç¨ï¼åç«¯ç»ä»¶åæ¡æ¶çæå¡ç«¯æ¸²æï¼æ¯å¦ react ssrãvue ssrãsan ssrã\n\n\n\n * ä¸é¢ä¸º csrï¼å è½½ htmlãå è½½ jsãæ¸²æ/fmp\n * ä¸é¢ä¸º ssrï¼å è½½htmlãæ¸²æ/fmpãå è½½ js\n\n\n# ä¸ºä»ä¹è¦ ssr\n\n\n# 1. seo\n\nå¤æ°æç´¢å¼æé½å¯ä»¥è¯»å spa åå®¹ï¼ä½å¼æ­¥åå®¹ä»ç¶ä¸å®¹æç´¢å¼ã\n\n * æåå¼æ­¥åå®¹ 10-20s timeout[1]\n * ç¬è«ä¸ä¸å®è®¤è¯åç«¯è·¯ç±[2]ï¼å°¤å¶æ¯ hash\n * javascript éè¯¯ç­ edge case\n * ç¨æ·ä½éªä¼å½±åæåï¼å°¤å¶æ¯é¡µé¢æ§è½ï¼ttiãfmpãâ¦â¦\n\n\n# 2. æ§è½\n\né¦åç csr çæ§è½\n\n\n\nåç ssr çæ§è½\n\n\n\n * æ²çº¿å¾ä¸­é»è²åç®­å¤´æåä¸ºèæ¬æ§è¡ï¼ç´«è²ä¸ºæ¸²æï¼å¦ææå¤ä¸ªç´«è²åæ¯åçäºéç»ã\n * åè¯è§£é\n   * fp (first paint)é¦æ¬¡ç»å¶\n   * fcp (first contentful paint) é¦æ¬¡åå®¹ç»å¶\n   * lcp (largest contentful paint) æå¤§åå®¹æ¸²æ\n   * dcl (domcontentloaded)\n   * fmp(first meaningful paint) é¦æ¬¡ææç»å¶\n   * l (onload)\n   * tti (time to interactive) å¯äº¤äºæ¶é´\n * ssr ç dcl æ¶é´ä¼åé¿ï¼å ä¸ºæå¡ç«¯åçäºæåå¤äºï¼è¿åçä¸æ¯ç©ºç htmlã\n * ssr ç dcl å fmp æ¯åæ¶å°è¾¾çï¼å³è·åå° html åå°±å¯ä»¥å±ç¤ºå°é¡µé¢ä¸ï¼ç¨æ·å¯ä»¥ççè§ã\n\n\n# ssr çä»£ä»·\n\n * ttfb æ´æï¼æå¡å¨ç«¯æ¶é´æ´é¿\n   * dclãfp ææ åºå½è°æ´ä¸º fmpãttiã\n   * èèç¦»çº¿é¢æ¸²ææ¿ä»£æå¡ç«¯æ¸²æ\n * tti ä¸ä¸å®æ´æ©\n   * ç¨æ·é¦æ¬¡çå°çåªæ¯éæé¡µé¢ï¼ä½æ­¤æ¶è¿ä¸è½äº¤äºã\n   * ä¸ä¸æ­¥éè¦æ§è¡èæ¬ï¼è¿ä¸ªè¿ç¨ vue ä¸­ç§°ä¸º hydrationï¼å®¢æ·ç«¯æ¿æ´»ï¼ï¼ä¸ä¸å®æ¯éæ°æ¸²ææ´å¿«ã\n * ç»´æ¤ææ¬æ´é«\n   * ç»ä»¶éè¦åæ¶èè node.js åæµè§å¨ä¸¤ç§å®¿ä¸»ç¯å¢ã\n\n\n# ä¸éå ssr çåºæ¯\n\n 1. åå°ç³»ç»ï¼cmsãmisãdashboard\n 2. åè½åé¡µé¢ï¼ä¸ªäººä¸­å¿ãæçæ¶è\n 3. éæåå®¹ï¼ç¨æ·æ å³çé¡µé¢ãéæçé¡µé¢ãèèé¢æ¸²æ\n\n\n# vue-ssr\n\nå®æ¹ææ¡£ï¼https://vuejs.org/guide/scaling-up/ssr.html#rendering-an-app\n\n * vue ssr æå\n\n * vue ssr å®ç½\n\n// this runs in node.js on the server.\nimport { createssrapp } from 'vue'\n// vue's server-rendering api is exposed under `vue/server-renderer`.\nimport { rendertostring } from 'vue/server-renderer'\n\nconst app = createssrapp({\n  data: () => ({ count: 1 }),\n  template: `<button @click=\"count++\">{{ count }}</button>`\n})\n\nrendertostring(app).then((html) => {\n  console.log(html)\n})\n\n\n\n# san-ssr\n\nå®ç½ï¼https://github.com/baidu/san-ssr\n\nconst { definecomponent } = require('san');\nconst { compiletorenderer } = require('san-ssr');\n\nconst myapp = definecomponent({\n  template: '<div>hello {{ name }} !</div>'\n});\n\nconst render = compiletorenderer(myapp);\nconst html = render({ name: 'san' });  \n\n\n\n# å³äº hydration (å®¢æ·ç«¯æ¿æ´»)çè§£é\n\næèï¼å¦ä½éè¿ ssr çæ¹å¼å°ä»¥ä¸ç»ä»¶å±ç¤ºå°é¡µé¢ä¸ï¼\n\n\x3c!-- app.san --\x3e\n<template>\n    <div id=\"app\" on-click=\"onclick\">\n      <p>hello {{name}}!</p>\n      <p class=\"count\">click count: {{ count }}</p>\n    </div>\n</template>\n<script>\nimport {component} from 'san'\nclass x extends component {}\n    export default {\n        initdata() {\n            return {\n                name: 'san',\n                count: 0\n            };\n        },\n        onclick() {\n            const count = this.data.get('count')\n            this.data.set('count', count + 1)\n        }\n    };\n<\/script>\n<style lang=\"less\">\n    @highlight: #f00;\n\n    div {\n        .count {\n            color: @highlight;\n        }\n    }\n</style>\n\n\né¦åå¨æå¡ç«¯ï¼san-ssr å¯¹è¯¥ç»ä»¶å¤çåå¾å°å¦ä¸ï¼å³ä¸ºæå¡ç«¯éè¿ html ç´æ¥è¿åç»æµè§å¨å±ç¤ºç\n\n<div id=\"app\">\x3c!--s-data:{\"count\":1,\"name\":\"san\"}--\x3e\n  <p>hello san!</p>\n  <p class=\"count\">click count: 1</p>\n</div>\n\n\nä½æ¯å¶ä¸­çç¹å»äºä»¶ä¸ä¼çæï¼æä»¥ä¸é¢éè¦å®¢æ·ç«¯æ¿æ´»ï¼ä»¥ä¸ä»£ç å¨æåä¹åä¼å¼å¥å°æµè§å¨ä¸­æ§è¡ãæ³¨æè¿éæ¯ç´æ¥ new app ï¼èä¸æ¯ attach è¿è¡æ·»å ã\n\n// client.js\nimport app from './app.san'\n\nconst app = new app({\n    el: document.queryselector('#app')\n});\n\n\nå¦æå®¢æ·ç«¯ new app è½å¤åæå¡ç«¯è¿åç html å¹éå¾ä¸ï¼åä¼æ¿æ´»æåï¼å®¢æ·ç«¯ä»£ç çæï¼ç¹å»äºä»¶å³å¯æ§è¡ãè¿ä¸ªè¿ç¨ä¸­è¿æ¶åå° webpack çéç½®ï¼express æå¡çå¯å¨ï¼è¯¦è§demo",charsets:{cjk:!0}},{title:"åç«¯å®å¨ç®ä»",frontmatter:{title:"åç«¯å®å¨ç®ä»",date:"2021-01-01T09:21:01.000Z",categories:"åç«¯å®å¨"},regularPath:"/safe/safe.html",relativePath:"safe/safe.md",key:"v-28afe8df",path:"/safe/safe.html",headers:[{level:2,title:"XSS",slug:"xss",normalizedTitle:"xss",charIndex:13},{level:3,title:"XSSå±å®³",slug:"xsså±å®³",normalizedTitle:"xsså±å®³",charIndex:443},{level:3,title:"XSS æ»å»æ³¨å¥ç¹",slug:"xss-æ»å»æ³¨å¥ç¹",normalizedTitle:"xss æ»å»æ³¨å¥ç¹",charIndex:2109},{level:3,title:"XSS é²å¾¡",slug:"xss-é²å¾¡",normalizedTitle:"xss é²å¾¡",charIndex:2335},{level:2,title:"CSRF",slug:"csrf",normalizedTitle:"csrf",charIndex:20},{level:2,title:"ç¹å»å«æ",slug:"ç¹å»å«æ",normalizedTitle:"ç¹å»å«æ",charIndex:28},{level:2,title:"HTTPä¼ è¾å®å¨",slug:"httpä¼ è¾å®å¨",normalizedTitle:"httpä¼ è¾å®å¨",charIndex:36},{level:2,title:"ä¸­é´äººæ»å»",slug:"ä¸­é´äººæ»å»",normalizedTitle:"ä¸­é´äººæ»å»",charIndex:48},{level:2,title:"ç¬¬ä¸æ¹ä¾èµå®å¨",slug:"ç¬¬ä¸æ¹ä¾èµå®å¨",normalizedTitle:"ç¬¬ä¸æ¹ä¾èµå®å¨",charIndex:57},{level:2,title:"æ§å¶å°æ³¨å¥ä»£ç ",slug:"æ§å¶å°æ³¨å¥ä»£ç ",normalizedTitle:"æ§å¶å°æ³¨å¥ä»£ç ",charIndex:68},{level:2,title:"éé±¼",slug:"éé±¼",normalizedTitle:"éé±¼",charIndex:79},{level:2,title:"æ©å±",slug:"æ©å±",normalizedTitle:"æ©å±",charIndex:85}],lastUpdated:"2/21/2023, 11:13:47 AM",lastUpdatedTimestamp:1676949227e3,headersStr:"XSS XSSå±å®³ XSS æ»å»æ³¨å¥ç¹ XSS é²å¾¡ CSRF ç¹å»å«æ HTTPä¼ è¾å®å¨ ä¸­é´äººæ»å» ç¬¬ä¸æ¹ä¾èµå®å¨ æ§å¶å°æ³¨å¥ä»£ç  éé±¼ æ©å±",content:'# åç«¯å®å¨ç®ä»\n\n * XSS\n * CSRF\n * ç¹å»å«æ\n * HTTPä¼ è¾å®å¨\n * ä¸­é´äººæ»å»\n * ç¬¬ä¸æ¹ä¾èµå®å¨\n * æ§å¶å°æ³¨å¥ä»£ç \n * éé±¼\n * æ©å±\n\n\n# XSS\n\n> XSSæçæ¯æ¶ææ»å»èå¾Webé¡µé¢éæå¥æ¶æhtmlä»£ç ï¼å½ç¨æ·æµè§è¯¥é¡µä¹æ¶ï¼åµå¥å¶ä¸­Webéé¢çhtmlä»£ç ä¼è¢«æ§è¡ï¼ä»èè¾¾å°æ¶ææ»å»ç¨æ·çç¹æ®ç®çãç®åä¸¾ä¸ä¸ªä¾å­ï¼domåï¼\n\n<div v-html="content"></div>\n\n<script>\n  new Vue({\n    el: \'#app\',\n    data: {\n      // src ä¸å­å¨ä»èè§¦å onerror\n      content: `<img src="xxx" onerror="alert(document.cookie)">`\n      content: `<script>alert(document.cookie)<\/script>`\n\t\t}\n})\n<\/script>\n\n\n\n# XSSå±å®³\n\n * çªå cookie\n * æé®è®°å½åéé±¼\n * æªæææä½\n * è·åé¡µé¢æ°æ®\n * å«æåç«¯é»è¾\n * å·åç¨æ·èµæ\n * ...\n\n> XSSçæ»å»ä¸è¬åä¸ºä»¥ä¸å ç±»ï¼åå°åXSSï¼å­å¨åXSSï¼DOM XSSã\n> \n> åå°ååå­å¨åå¨çº¯åç«¯æ¸²æä¸­å·²ç»å¾å°è§äºï¼å°¤å¶å¨ç¬¬ä¸æ¹æ¡æ¶ä¸\n\n# åå°åXSS\n\n> ç¨æ·å¨ä¸ä¸ªä¸é²è XSS çç½ç«ä¸­æç´¢åå®¹ï¼å³é®å­ä¸º XXXï¼å¦æç½ç«ååå« XXXçåå®¹ï¼é£ä¹è¯¥åå®¹å°±ä¼è¢«å±ç¤ºåºæ¥ï¼å¦æç½ç«ä¸­ä¸åå«ç¸å³ï¼é£ä¹å¯è½ä¼æç¤º XXX ç¸å³åå®¹ä¸å­å¨ãä¹å°±æ¯ï¼ç¨æ·çæç´¢åå®¹æç»é½ä¼ä»¥æç§æ¹å¼åå°å°æç´¢ç»æä¸­ãå¦ææç´¢åå®¹ä¸ºï¼<script>alert(1)<\/script>ï¼é£ä¹é¡µé¢å°±ä¼æ§è¡è¿æ®µ JavaScript ä»£ç ï¼ä¹å³è¯¥ç½ç«å­å¨ XSS æ¼æ´ã\n\n// node æå¡ç«¯ app.js\nconst express = require(\'express\')\n\nconst app = express()\n\napp.get(\'/\', (req, res) => {\n    // 1. è¯»åæ¸²æé¡µé¢çåå®¹\n    // 2, å°æ¸²æç»æåéç»å®¢æ·ç«¯\n    res.render(\'index.html\', {\n        search: req.query.search // éè¿å°åæ ä¼ é\n    })\n})\n\napp.listen(3000, () => console.log(\'http://loalhost:3000/\'))\n\n\n\x3c!-- index.html --\x3e\n\n<form action="/" method="GET">\n    \x3c!-- è¾å¥æ¡åè¾å¥ <script>alert(document.cookie)<\/script> --\x3e\n\t<input name="search" type="text">\n    <button>æç´¢</button>\n</form>\n\n{{ if search }}\n</div> å±ç¤ºæç´¢åå®¹ </div>\t\n{{ /if }}\n\n\n# å­å¨åXSS\n\n * æ»å»èå°æ¶æä»£ç æäº¤å°ç®æ ç½ç«çæ°æ®åºä¸­\n * ç¨æ·æå¼ç®æ ç½ç«æ¶ï¼æå¡ç«¯å°æ¶æä»£ç ä»æ°æ®åºä¸­ååºï¼æ¼æ¥å¨htmlä¸­è¿åç»æµè§å¨\n * ç¨æ·æµè§å¨æ¥æ¶ååºè§£ææ¶ï¼ååºæ¶æä»£ç æ§è¡\n * è¿ç§æ»å»å¸¸è§äºå¸¦æç¨æ·ä¿å­æ°æ®çç½ç«åè½ï¼å¦è®ºååå¸ãååè¯è®ºãç¨æ·ç§ä¿¡ç­ã\n\n> æ¯å¦ä¸ä¸ªå¯ææ¬ç¼è¾å¨ï¼äº§ççç»æï¼htmlæ ¼å¼çå­ç¬¦ä¸²ï¼webåå°å­å¨å°æ°æ®åºä¸­\n> \n> å½å¶ä»ç¨æ·æ¥çæç« è¯¦ææ¶ï¼å°±ä¼æ¸²ææç« åå®¹ï¼å°æ¶æä»£ç æ§è¡\n\n# DOMåXSS\n\n> DOM å XSS æ»å»ï¼å®éä¸å°±æ¯ç½ç«åç«¯ JavaScript ä»£ç æ¬èº«ä¸å¤ä¸¥è°¨ï¼æä¸å¯ä¿¡çæ°æ®å½ä½ä»£ç æ§è¡äºã\n> \n> å¨ä½¿ç¨ .innerHTMLã.outerHTMLãdocument.write() æ¶è¦ç¹å«å°å¿ï¼ä¸è¦æä¸å¯ä¿¡çæ°æ®ä½ä¸º HTML æå°é¡µé¢ä¸ï¼èåºå°½éä½¿ç¨ .textContentã.setAttribute() ç­ã\n> \n> å¦æç¨ Vue/React ææ¯æ ï¼å¹¶ä¸ä¸ä½¿ç¨ v-html/dangerouslySetInnerHTML åè½ï¼å°±å¨åç«¯ render é¶æ®µé¿å innerHTMLãouterHTML ç XSS éæ£ã\n> \n> DOM ä¸­çåèäºä»¶çå¬å¨ï¼å¦ locationãonclickãonerrorãonloadãonmouseover ç­ï¼<a> æ ç­¾ç href å±æ§ï¼JavaScript ç eval()ãsetTimeout()ãsetInterval() ç­ï¼é½è½æå­ç¬¦ä¸²ä½ä¸ºä»£ç è¿è¡ãå¦æä¸å¯ä¿¡çæ°æ®æ¼æ¥å°å­ç¬¦ä¸²ä¸­ä¼ éç»è¿äº APIï¼å¾å®¹æäº§çå®å¨éæ£ï¼è¯·å¡å¿é¿åã\n> \n> DOM åååä¸¤ç§çåºå«ï¼DOM å XSSä¸­ï¼ååºåæ§è¡æ¶æä»£ç ç±æµè§å¨ç«¯å®æï¼å¶ä»ä¸¤ç§é½å±äºæå¡ç«¯å®å¨æ¼æ´\n\n\n# XSS æ»å»æ³¨å¥ç¹\n\n * HTMLä¸­ååµææ¬ï¼æ¶æä»£ç ä»¥ script æ ç­¾æ³¨å¥\n * æ ç­¾ç href, src ç­å±æ§ä¸­ï¼åå« javascript ç­å¯æ§è¡ä»£ç \n * å¨ onload, onerror, onclick ç­äºä»¶ä¸­\n * style å±æ§åæ ç­¾ä¸­ï¼åå« background-image: url("javascript")\n * style å±æ§åæ ç­¾ä¸­ï¼åå« expression(...) ç CSS è¡¨è¾¾å¼ä»£ç \n\n\n# XSS é²å¾¡\n\nXSS æ»å»æä¸¤å¤§è¦ç´ ï¼\n\n * æ»å»èæäº¤æ¶æä»£ç \n * æµè§å¨æ§è¡æ¶æä»£ç \n\nå¸¸è§è§£å³åæ³ï¼\n\n * æå¡ç«¯å¯ä»¥éè¿è®¾ç½® HttpOnly æ¥é²æ­¢XSSä»£ç è·åå°ç¨æ·çcookie\n\n * çº¯åç«¯æ¸²æï¼å°ä»£ç åæ°æ®åéå¼\n   \n   * æµè§å¨åå è½½ä¸ä¸ªéæHTMLï¼æ­¤HTMLä¸åå«ä»»ä½è·ä¸å¡ç¸å³æ°æ®\n   * ç¶åæµè§å¨æ§è¡ HTML ä¸­ç Javascript\n   * Javascript éè¿ Ajaxå è½½ä¸å¡æ°æ®ï¼è°ç¨ DOM API æ´æ°å°é¡µé¢ä¸\n   * é¿åå¨åç«¯ä»£ç ä¸­åºç°htmlæ¼æ¥çæåµ\n   * æä»¬ä¼æç¡®çåè¯æµè§å¨ï¼ä¸é¢è¦è®¾ç½®çåå®¹æ¯ææ¬ï¼.innerTextï¼ï¼è¿æ¯å±æ§ï¼.setAttributeï¼ï¼è¿æ¯æ ·å¼ï¼.styleï¼ç­ç­ãæµè§å¨ä¸ä¼è¢«è½»æçè¢«æ¬ºéªï¼æ§è¡é¢æå¤çä»£ç äºã\n\n * å¯¹ HTML åååè½¬ä¹\n   \n   * & < > " \' /\'\n   * è½¬ä¹åº js-xss\n\n * CSPï¼åå®¹å®å¨ç­ç¥(HTTPååºå¤´ãmetaæ ç­¾)\n   \n   * ä¸ä¸ªCSPå¼å®¹çæµè§å¨å°ä¼ä»æ§è¡ä»ç½åååè·åå°çèæ¬æä»¶ï¼å¿½ç¥ææçå¶ä»èæ¬\n   * https://www.ruanyifeng.com/blog/2016/09/csp.html\n\n * X-Xss-Protection(HTTPååºå¤´)\n   \n   * HTTP X-XSS-Protection ååºå¤´æ¯ Internet Explorerï¼Chrome å Safari çä¸ä¸ªç¹æ§ï¼å½æ£æµå°è·¨ç«èæ¬æ»å» (XSS)æ¶ï¼æµè§å¨å°åæ­¢å è½½é¡µé¢ã\n\n\n# CSRF\n\n * XSS å©ç¨çæ¯ç½ç«å¯¹ç¨æ·ï¼è¾å¥ï¼çä¿¡ä»»ï¼èCSRF å©ç¨çæ¯ç½ç«å¯¹ç¨æ·ç½é¡µæµè§å¨çä¿¡ä»»ã\n\n * CSRFå¾ç¤º\n\n * CSRFéå¸¸ä»ç¬¬ä¸æ¹ç½ç«åèµ·ï¼è¢«æ»å»çç½ç«æ æ³é²æ­¢æ»å»åçï¼åªè½éè¿å¢å¼ºèªå·±ç½ç«éå¯¹CSRFçé²æ¤è½åæ¥æåå®å¨æ§\n\n * CSRFçä¸¤ä¸ªç¹ç¹ï¼\n   \n   * CSRFï¼éå¸¸ï¼åçå¨ç¬¬ä¸æ¹ååã\n   \n   * CSRFæ»å»èä¸è½è·åå°Cookieç­ä¿¡æ¯ï¼åªæ¯ä½¿ç¨ã\n\nå¦ä½é²å¾¡\n\n * åæºæ£æµ\n   \n   * Refererï¼ä½æ»å»èå¯ä»¥éè Referer\n   * Originï¼ä½å¨ ie11 æè 302 æ¶ origin ä¸å­å¨\n   \n   <img src="http://bank.example/withdraw?amount=10000&for=hacker" referrerpolicy="no-referrer"> \n   \n   \n   > æ ¹æ® HTTP åè®®ï¼å¨ HTTP å¤´ä¸­æä¸ä¸ªå­æ®µå« Refererï¼å®è®°å½äºè¯¥ HTTP è¯·æ±çæ¥æºå°åã\n   > \n   > å¦æé»å®¢è¦å¯¹é¶è¡ç½ç«å®æ½ CSRF æ»å»ï¼ä»åªè½å¨ä»èªå·±çç½ç«æé è¯·æ±ï¼å½ç¨æ·éè¿é»å®¢çç½ç«åéè¯·æ±å°é¶è¡æ¶ï¼è¯¥è¯·æ±ç Referer æ¯æåé»å®¢èªå·±çç½ç«ãå æ­¤ï¼è¦é²å¾¡ CSRF æ»å»ï¼é¶è¡ç½ç«åªéè¦å¯¹äºæ¯ä¸ä¸ªè½¬è´¦è¯·æ±éªè¯å¶ Referer å¼ ã\n   > \n   > ç¶èï¼è¿ç§æ¹æ³å¹¶éä¸æ ä¸å¤±ãReferer çå¼æ¯ç±æµè§å¨æä¾ç ï¼ç®åå·²ç»æä¸äºæ¹æ³å¯ä»¥ç¯¡æ¹ Referer å¼ ã\n   > \n   > å³ä¾¿æ¯ä½¿ç¨ææ°çæµè§å¨ï¼é»å®¢æ æ³ç¯¡æ¹ Referer å¼ï¼è¿ç§æ¹æ³ä»ç¶æé®é¢ãå ä¸º Referer å¼ä¼è®°å½ä¸ç¨æ·çè®¿é®æ¥æºï¼æäºç¨æ·è®¤ä¸ºè¿æ ·ä¼ä¾µç¯å°ä»ä»¬èªå·±çéç§æï¼å æ­¤ï¼ç¨æ·èªå·±å¯ä»¥è®¾ç½®æµè§å¨ä½¿å¶å¨åéè¯·æ±æ¶ä¸åæä¾ Refererãå½ä»ä»¬æ­£å¸¸è®¿é®é¶è¡ç½ç«æ¶ï¼ç½ç«ä¼å ä¸ºè¯·æ±æ²¡æ Referer å¼èè®¤ä¸ºæ¯ CSRF æ»å»ï¼æç»åæ³ç¨æ·çè®¿é®ã\n\n * Samesite Cookie\n   \n   * strictï¼å®å¨ç¦æ­¢ç¬¬ä¸æ¹ Cookie\n   \n   * laxï¼å¤§å¤æ°æåµä¹æ¯ä¸åéç¬¬ä¸æ¹ Cookie\n   \n   * Noneï¼Chrome è®¡åå°Laxåä¸ºé»è®¤è®¾ç½®ãè¿æ¶ï¼ç½ç«å¯ä»¥éæ©æ¾å¼å³é­SameSiteå±æ§ï¼å°å¶è®¾ä¸ºNoneãä¸è¿ï¼åææ¯å¿é¡»åæ¶è®¾ç½®Secureå±æ§ï¼Cookie åªè½éè¿ HTTPS åè®®åéï¼ï¼å¦åæ æã\n   \n   * gooleæµè§å¨çè®¾ç½®ï¼chrome 91çæ¬åå·²ç§»é¤ï¼é»è®¤å¼ä¸º laxï¼\n     \n     # SameSite by default cookies\n     \n     > Treat cookies that don\'t specify a SameSite attribute as if they were SameSite=Lax. Sites must specify SameSite=None in order to enable third-party usage. â Mac, Windows, Linux, Chrome OS, Android\n     > \n     > å°æªæå®SameSiteå±æ§çcookieè§ä¸ºSameSite=Lax(é»è®¤),ç½ç«å¿é¡»æå®SameSite=Noneæè½å¯ç¨ç¬¬ä¸æ¹cookieã æè¿ä¸ªè®¾ç½®å³äºå°±åè®¸ææçç¬¬ä¸æ¹cookie\n     \n     # Cookies without SameSite must be secure\n     \n     > If enabled, cookies without SameSite restrictions must also be Secure. If a cookie without SameSite restrictions is set without the Secure attribute, it will be rejected. This flag only has an effect if "SameSite by default cookies" is also enabled. â Mac, Windows, Linux, Chrome OS, Android\n     > \n     > å¦æå¯ç¨ï¼æ²¡æSameSiteéå¶çcookieä¹å¿é¡»æ¯å®å¨çãå¦ææ²¡æè®¾ç½®SameSiteéå¶çcookieæ²¡æSecureå±æ§ï¼å®å°è¢«æç»ãæ­¤æ å¿ä»å¨å¯ç¨\'sameSite by default cookies\'æ¶ææã\n     \n     å¦æä½ æ³å  SameSite=none å±æ§ï¼é£ä¹è¯¥ Cookie å°±å¿é¡»åæ¶å ä¸ Secure å±æ§ï¼è¡¨ç¤ºåªæå¨ HTTPS åè®®ä¸è¯¥ Cookie æä¼è¢«åéã\n   \n   * iframe samesiteé®é¢\n\n * CSRF Token\n   \n   > CSRF æ»å»ä¹æä»¥è½å¤æåï¼æ¯å ä¸ºé»å®¢å¯ä»¥å®å¨ä¼ªé ç¨æ·çè¯·æ±ï¼è¯¥è¯·æ±ä¸­ææçç¨æ·éªè¯ä¿¡æ¯é½æ¯å­å¨äº cookie ä¸­ï¼å æ­¤é»å®¢å¯ä»¥å¨ä¸ç¥éè¿äºéªè¯ä¿¡æ¯çæåµä¸ç´æ¥å©ç¨ç¨æ·èªå·±ç cookie æ¥éè¿å®å¨éªè¯ãè¦æµå¾¡ CSRFï¼å³é®å¨äºå¨è¯·æ±ä¸­æ¾å¥é»å®¢æä¸è½ä¼ªé çä¿¡æ¯ï¼å¹¶ä¸è¯¥ä¿¡æ¯ä¸å­å¨äº cookie ä¹ä¸­ãå¯ä»¥å¨ HTTP è¯·æ±ä¸­ä»¥åæ°çå½¢å¼å å¥ä¸ä¸ªéæºäº§çç tokenï¼å¹¶å¨æå¡å¨ç«¯å»ºç«ä¸ä¸ªæ¦æªå¨æ¥éªè¯è¿ä¸ª tokenï¼å¦æè¯·æ±ä¸­æ²¡æ token æè token åå®¹ä¸æ­£ç¡®ï¼åè®¤ä¸ºå¯è½æ¯ CSRF æ»å»èæç»è¯¥è¯·æ±ã\n   > \n   > è¿ç§æ¹æ³è¦æ¯æ£æ¥ Referer è¦å®å¨ä¸äºï¼token å¯ä»¥å¨ç¨æ·ç»éåäº§çå¹¶æ¾äº session ä¹ä¸­ï¼ç¶åå¨æ¯æ¬¡è¯·æ±æ¶æ token ä» session ä¸­æ¿åºï¼ä¸è¯·æ±ä¸­ç token è¿è¡æ¯å¯¹ï¼ä½è¿ç§æ¹æ³çé¾ç¹å¨äºå¦ä½æ token ä»¥åæ°çå½¢å¼å å¥è¯·æ±ã å¨ä¸ä¸ªç½ç«ä¸­ï¼å¯ä»¥æ¥åè¯·æ±çå°æ¹éå¸¸å¤ï¼è¦å¯¹äºæ¯ä¸ä¸ªè¯·æ±é½å ä¸ token æ¯å¾éº»ç¦ç\n\n * éªè¯ç \n   \n   > CSRFæ»å»æ¯ä¼ªé æç¨æ·çèº«ä»½ï¼èªå¨åèµ·æ¶æçè¯·æ±ãé£ä¹æä»¬å¯ä»¥å¼ºè¿«æ»å»èä¸æä»¬çç½ç«è¿è¡äº¤äºãå¨ä¸äºæä½ä¹åå å¥éªè¯ç æ ¡éªï¼å¯ä»¥æµå¾¡ä¸é¨åçCSRFæ»å»ãä½æ¯å å¥éªè¯ç ä¼å½±åç¨æ·çä½éªï¼æä»¥éªè¯ç ä¸è½ä½ä¸ºä¸»è¦çé²å¾¡ææ®µã\n\n\n# ç¹å»å«æ\n\n * ç¹å»å«æå¾ç¤º\n\n> ç¹å»å«ææ¯ä¸ç§è§è§æ¬ºéªçæ»å»ææ®µã\n> \n> é»å®¢åå»ºä¸ä¸ªç½é¡µå©ç¨ iframe åå«ç®æ ç½ç«ï¼\n> \n> æé ç½é¡µï¼è¯±åç¨æ·ç¹å»ç¹ç¹æé®ã\n\n * é²å¾¡ææ®µ\n   \n   * JavaScript ç¦æ­¢ååµ\n     \n     * window.top å±æ§è¿åå½åçªå£çæé¡¶å±æµè§å¨çªå£å¯¹è±¡ï¼å¨ iframe ä¸­ç window æçæ¯ iframe çªå£å¯¹è±¡\n     \n     * if (top.location !== window.location) {\n         top.location = window.location\n       }\n       \n   \n   * X-FRAME-OPTIONS ååºå¤´ç¦æ­¢ååµ\n     \n     * DENYï¼è¡¨ç¤ºé¡µé¢ä¸åè®¸å¨ frame ä¸­å±ç¤ºï¼å³ä¾¿æ¯å¨ç¸åååçé¡µé¢ä¸­åµå¥ä¹ä¸åè®¸ã\n     * SAMEORIGINï¼è¡¨ç¤ºè¯¥é¡µé¢å¯ä»¥å¨ç¸åååé¡µé¢ç frame ä¸­å±ç¤ºã\n     * ALLOW-FROM urlï¼è¡¨ç¤ºè¯¥é¡µé¢å¯ä»¥å¨æå®æ¥æºç frame ä¸­å±ç¤ºã\n\n\n# HTTPä¼ è¾å®å¨\n\n * http ææä¼ è¾ä¸å®å¨\n * ç½ç»åè®®ç¸å³\n\n\n# ä¸­é´äººæ»å»\n\n1)å®¢æ·ç«¯åéè¯·æ±å°æå¡ç«¯ï¼è¯·æ±è¢«ä¸­é´äººæªè·ã\n\n2)æå¡å¨åå®¢æ·ç«¯åéå¬é¥ã\n\n3)ä¸­é´äººæªè·å¬é¥ï¼ä¿çå¨èªå·±æä¸ãç¶åèªå·±çæä¸ä¸ªãä¼ªé çãå¬é¥ï¼åç»å®¢æ·ç«¯ã\n\n4)å®¢æ·ç«¯æ¶å°ä¼ªé çå¬é¥åï¼çæå¯æåç»æå¡å¨ã\n\n5)ä¸­é´äººè·å¾å¯æï¼ç¨èªå·±çç§é¥è§£å¯ãåæ¶ç¨çæ­£çå¬é¥åç»æå¡å¨ã\n\n6)æå¡å¨è·å¾å å¯ä¿¡æ¯ï¼ç¨èªå·±çç§é¥è§£å¯ã\n\n\n\n# ç¬¬ä¸æ¹ä¾èµå®å¨\n\nç°å¦ä»è¿è¡åºç¨å¼åï¼æ è®ºæ¯åç«¯æå¡å¨åºç¨è¿æ¯åç«¯åºç¨å¼åï¼ç»å¤§å¤æ°æ¶åæä»¬é½æ¯å¨åå©å¼åæ¡æ¶ååç§ç±»åºè¿è¡å¿«éå¼åãç¶èï¼ä¸äºç¬¬ä¸æ¹çä¾èµæèæä»¶å­å¨å¾å¤å®å¨æ§é®é¢ï¼ä¹ä¼å­å¨è¿æ ·é£æ ·çæ¼æ´ï¼æä»¥ä½¿ç¨èµ·æ¥å¾è°¨æã\n\n * å°½éåå°ç¬¬ä¸æ¹ä¾èµï¼éç¨ç¸å¯¹æççä¾èµå\n * å®æä½¿ç¨ npm audit æ£æµä¾èµåçé£é©\n\nä¸ºäºæé« npm ä¾èµçå®å¨ï¼npm 6.1 åæ·»å äº npm audit å·¥å·ï¼è¿ä¸ªå·¥å·å¯ä»¥æç´¢å½åé¡¹ç®ä¸­ä½¿ç¨çä¾èµæ¯å¦å­å¨å®å¨é®é¢ï¼å¹¶æä¾äº npm audit fix å·¥å·ä¿®å¤ã\n\nå®çå·¥ä½åçæ¯ç»´æ¤äºä¸ä¸ªå·²ç¥ä¸è¯ä¾èµçååï¼å¦æä»£ç ä¸­ä½¿ç¨äºç´æ¥ä» GitHub èä¸æ¯ npm ä»åºä¸­è·åä¾èµï¼æä¸ç¥åçä¾èµãnpm audit ä¹æ¯æ æ³åç°å¨èãæ»çæ¥è¯´å¨å å¥ç¬¬ä¸æ¹ä¾èµæ¶ï¼éè¦è°¨æèèï¼ä¸æ»¥ç¨ä¾èµå¨åç«¯å¼åä¹æ¯éå¸¸éè¦çã\n\n\n# æ§å¶å°æ³¨å¥ä»£ç \n\nè¯¦è§å¤©ç«å®ç½æ§å¶å°\n\n\n# éé±¼\n\nç¹å»ä¸å¯ä¿¡é¾æ¥è¾å¥ç¨æ·åå¯ç \n\n\n# æ©å±\n\n * Vue çå®å¨æªæ½',normalizedContent:'# åç«¯å®å¨ç®ä»\n\n * xss\n * csrf\n * ç¹å»å«æ\n * httpä¼ è¾å®å¨\n * ä¸­é´äººæ»å»\n * ç¬¬ä¸æ¹ä¾èµå®å¨\n * æ§å¶å°æ³¨å¥ä»£ç \n * éé±¼\n * æ©å±\n\n\n# xss\n\n> xssæçæ¯æ¶ææ»å»èå¾webé¡µé¢éæå¥æ¶æhtmlä»£ç ï¼å½ç¨æ·æµè§è¯¥é¡µä¹æ¶ï¼åµå¥å¶ä¸­webéé¢çhtmlä»£ç ä¼è¢«æ§è¡ï¼ä»èè¾¾å°æ¶ææ»å»ç¨æ·çç¹æ®ç®çãç®åä¸¾ä¸ä¸ªä¾å­ï¼domåï¼\n\n<div v-html="content"></div>\n\n<script>\n  new vue({\n    el: \'#app\',\n    data: {\n      // src ä¸å­å¨ä»èè§¦å onerror\n      content: `<img src="xxx" onerror="alert(document.cookie)">`\n      content: `<script>alert(document.cookie)<\/script>`\n\t\t}\n})\n<\/script>\n\n\n\n# xsså±å®³\n\n * çªå cookie\n * æé®è®°å½åéé±¼\n * æªæææä½\n * è·åé¡µé¢æ°æ®\n * å«æåç«¯é»è¾\n * å·åç¨æ·èµæ\n * ...\n\n> xssçæ»å»ä¸è¬åä¸ºä»¥ä¸å ç±»ï¼åå°åxssï¼å­å¨åxssï¼dom xssã\n> \n> åå°ååå­å¨åå¨çº¯åç«¯æ¸²æä¸­å·²ç»å¾å°è§äºï¼å°¤å¶å¨ç¬¬ä¸æ¹æ¡æ¶ä¸\n\n# åå°åxss\n\n> ç¨æ·å¨ä¸ä¸ªä¸é²è xss çç½ç«ä¸­æç´¢åå®¹ï¼å³é®å­ä¸º xxxï¼å¦æç½ç«ååå« xxxçåå®¹ï¼é£ä¹è¯¥åå®¹å°±ä¼è¢«å±ç¤ºåºæ¥ï¼å¦æç½ç«ä¸­ä¸åå«ç¸å³ï¼é£ä¹å¯è½ä¼æç¤º xxx ç¸å³åå®¹ä¸å­å¨ãä¹å°±æ¯ï¼ç¨æ·çæç´¢åå®¹æç»é½ä¼ä»¥æç§æ¹å¼åå°å°æç´¢ç»æä¸­ãå¦ææç´¢åå®¹ä¸ºï¼<script>alert(1)<\/script>ï¼é£ä¹é¡µé¢å°±ä¼æ§è¡è¿æ®µ javascript ä»£ç ï¼ä¹å³è¯¥ç½ç«å­å¨ xss æ¼æ´ã\n\n// node æå¡ç«¯ app.js\nconst express = require(\'express\')\n\nconst app = express()\n\napp.get(\'/\', (req, res) => {\n    // 1. è¯»åæ¸²æé¡µé¢çåå®¹\n    // 2, å°æ¸²æç»æåéç»å®¢æ·ç«¯\n    res.render(\'index.html\', {\n        search: req.query.search // éè¿å°åæ ä¼ é\n    })\n})\n\napp.listen(3000, () => console.log(\'http://loalhost:3000/\'))\n\n\n\x3c!-- index.html --\x3e\n\n<form action="/" method="get">\n    \x3c!-- è¾å¥æ¡åè¾å¥ <script>alert(document.cookie)<\/script> --\x3e\n\t<input name="search" type="text">\n    <button>æç´¢</button>\n</form>\n\n{{ if search }}\n</div> å±ç¤ºæç´¢åå®¹ </div>\t\n{{ /if }}\n\n\n# å­å¨åxss\n\n * æ»å»èå°æ¶æä»£ç æäº¤å°ç®æ ç½ç«çæ°æ®åºä¸­\n * ç¨æ·æå¼ç®æ ç½ç«æ¶ï¼æå¡ç«¯å°æ¶æä»£ç ä»æ°æ®åºä¸­ååºï¼æ¼æ¥å¨htmlä¸­è¿åç»æµè§å¨\n * ç¨æ·æµè§å¨æ¥æ¶ååºè§£ææ¶ï¼ååºæ¶æä»£ç æ§è¡\n * è¿ç§æ»å»å¸¸è§äºå¸¦æç¨æ·ä¿å­æ°æ®çç½ç«åè½ï¼å¦è®ºååå¸ãååè¯è®ºãç¨æ·ç§ä¿¡ç­ã\n\n> æ¯å¦ä¸ä¸ªå¯ææ¬ç¼è¾å¨ï¼äº§ççç»æï¼htmlæ ¼å¼çå­ç¬¦ä¸²ï¼webåå°å­å¨å°æ°æ®åºä¸­\n> \n> å½å¶ä»ç¨æ·æ¥çæç« è¯¦ææ¶ï¼å°±ä¼æ¸²ææç« åå®¹ï¼å°æ¶æä»£ç æ§è¡\n\n# domåxss\n\n> dom å xss æ»å»ï¼å®éä¸å°±æ¯ç½ç«åç«¯ javascript ä»£ç æ¬èº«ä¸å¤ä¸¥è°¨ï¼æä¸å¯ä¿¡çæ°æ®å½ä½ä»£ç æ§è¡äºã\n> \n> å¨ä½¿ç¨ .innerhtmlã.outerhtmlãdocument.write() æ¶è¦ç¹å«å°å¿ï¼ä¸è¦æä¸å¯ä¿¡çæ°æ®ä½ä¸º html æå°é¡µé¢ä¸ï¼èåºå°½éä½¿ç¨ .textcontentã.setattribute() ç­ã\n> \n> å¦æç¨ vue/react ææ¯æ ï¼å¹¶ä¸ä¸ä½¿ç¨ v-html/dangerouslysetinnerhtml åè½ï¼å°±å¨åç«¯ render é¶æ®µé¿å innerhtmlãouterhtml ç xss éæ£ã\n> \n> dom ä¸­çåèäºä»¶çå¬å¨ï¼å¦ locationãonclickãonerrorãonloadãonmouseover ç­ï¼<a> æ ç­¾ç href å±æ§ï¼javascript ç eval()ãsettimeout()ãsetinterval() ç­ï¼é½è½æå­ç¬¦ä¸²ä½ä¸ºä»£ç è¿è¡ãå¦æä¸å¯ä¿¡çæ°æ®æ¼æ¥å°å­ç¬¦ä¸²ä¸­ä¼ éç»è¿äº apiï¼å¾å®¹æäº§çå®å¨éæ£ï¼è¯·å¡å¿é¿åã\n> \n> dom åååä¸¤ç§çåºå«ï¼dom å xssä¸­ï¼ååºåæ§è¡æ¶æä»£ç ç±æµè§å¨ç«¯å®æï¼å¶ä»ä¸¤ç§é½å±äºæå¡ç«¯å®å¨æ¼æ´\n\n\n# xss æ»å»æ³¨å¥ç¹\n\n * htmlä¸­ååµææ¬ï¼æ¶æä»£ç ä»¥ script æ ç­¾æ³¨å¥\n * æ ç­¾ç href, src ç­å±æ§ä¸­ï¼åå« javascript ç­å¯æ§è¡ä»£ç \n * å¨ onload, onerror, onclick ç­äºä»¶ä¸­\n * style å±æ§åæ ç­¾ä¸­ï¼åå« background-image: url("javascript")\n * style å±æ§åæ ç­¾ä¸­ï¼åå« expression(...) ç css è¡¨è¾¾å¼ä»£ç \n\n\n# xss é²å¾¡\n\nxss æ»å»æä¸¤å¤§è¦ç´ ï¼\n\n * æ»å»èæäº¤æ¶æä»£ç \n * æµè§å¨æ§è¡æ¶æä»£ç \n\nå¸¸è§è§£å³åæ³ï¼\n\n * æå¡ç«¯å¯ä»¥éè¿è®¾ç½® httponly æ¥é²æ­¢xssä»£ç è·åå°ç¨æ·çcookie\n\n * çº¯åç«¯æ¸²æï¼å°ä»£ç åæ°æ®åéå¼\n   \n   * æµè§å¨åå è½½ä¸ä¸ªéæhtmlï¼æ­¤htmlä¸åå«ä»»ä½è·ä¸å¡ç¸å³æ°æ®\n   * ç¶åæµè§å¨æ§è¡ html ä¸­ç javascript\n   * javascript éè¿ ajaxå è½½ä¸å¡æ°æ®ï¼è°ç¨ dom api æ´æ°å°é¡µé¢ä¸\n   * é¿åå¨åç«¯ä»£ç ä¸­åºç°htmlæ¼æ¥çæåµ\n   * æä»¬ä¼æç¡®çåè¯æµè§å¨ï¼ä¸é¢è¦è®¾ç½®çåå®¹æ¯ææ¬ï¼.innertextï¼ï¼è¿æ¯å±æ§ï¼.setattributeï¼ï¼è¿æ¯æ ·å¼ï¼.styleï¼ç­ç­ãæµè§å¨ä¸ä¼è¢«è½»æçè¢«æ¬ºéªï¼æ§è¡é¢æå¤çä»£ç äºã\n\n * å¯¹ html åååè½¬ä¹\n   \n   * & < > " \' /\'\n   * è½¬ä¹åº js-xss\n\n * cspï¼åå®¹å®å¨ç­ç¥(httpååºå¤´ãmetaæ ç­¾)\n   \n   * ä¸ä¸ªcspå¼å®¹çæµè§å¨å°ä¼ä»æ§è¡ä»ç½åååè·åå°çèæ¬æä»¶ï¼å¿½ç¥ææçå¶ä»èæ¬\n   * https://www.ruanyifeng.com/blog/2016/09/csp.html\n\n * x-xss-protection(httpååºå¤´)\n   \n   * http x-xss-protection ååºå¤´æ¯ internet explorerï¼chrome å safari çä¸ä¸ªç¹æ§ï¼å½æ£æµå°è·¨ç«èæ¬æ»å» (xss)æ¶ï¼æµè§å¨å°åæ­¢å è½½é¡µé¢ã\n\n\n# csrf\n\n * xss å©ç¨çæ¯ç½ç«å¯¹ç¨æ·ï¼è¾å¥ï¼çä¿¡ä»»ï¼ècsrf å©ç¨çæ¯ç½ç«å¯¹ç¨æ·ç½é¡µæµè§å¨çä¿¡ä»»ã\n\n * csrfå¾ç¤º\n\n * csrféå¸¸ä»ç¬¬ä¸æ¹ç½ç«åèµ·ï¼è¢«æ»å»çç½ç«æ æ³é²æ­¢æ»å»åçï¼åªè½éè¿å¢å¼ºèªå·±ç½ç«éå¯¹csrfçé²æ¤è½åæ¥æåå®å¨æ§\n\n * csrfçä¸¤ä¸ªç¹ç¹ï¼\n   \n   * csrfï¼éå¸¸ï¼åçå¨ç¬¬ä¸æ¹ååã\n   \n   * csrfæ»å»èä¸è½è·åå°cookieç­ä¿¡æ¯ï¼åªæ¯ä½¿ç¨ã\n\nå¦ä½é²å¾¡\n\n * åæºæ£æµ\n   \n   * refererï¼ä½æ»å»èå¯ä»¥éè referer\n   * originï¼ä½å¨ ie11 æè 302 æ¶ origin ä¸å­å¨\n   \n   <img src="http://bank.example/withdraw?amount=10000&for=hacker" referrerpolicy="no-referrer"> \n   \n   \n   > æ ¹æ® http åè®®ï¼å¨ http å¤´ä¸­æä¸ä¸ªå­æ®µå« refererï¼å®è®°å½äºè¯¥ http è¯·æ±çæ¥æºå°åã\n   > \n   > å¦æé»å®¢è¦å¯¹é¶è¡ç½ç«å®æ½ csrf æ»å»ï¼ä»åªè½å¨ä»èªå·±çç½ç«æé è¯·æ±ï¼å½ç¨æ·éè¿é»å®¢çç½ç«åéè¯·æ±å°é¶è¡æ¶ï¼è¯¥è¯·æ±ç referer æ¯æåé»å®¢èªå·±çç½ç«ãå æ­¤ï¼è¦é²å¾¡ csrf æ»å»ï¼é¶è¡ç½ç«åªéè¦å¯¹äºæ¯ä¸ä¸ªè½¬è´¦è¯·æ±éªè¯å¶ referer å¼ ã\n   > \n   > ç¶èï¼è¿ç§æ¹æ³å¹¶éä¸æ ä¸å¤±ãreferer çå¼æ¯ç±æµè§å¨æä¾ç ï¼ç®åå·²ç»æä¸äºæ¹æ³å¯ä»¥ç¯¡æ¹ referer å¼ ã\n   > \n   > å³ä¾¿æ¯ä½¿ç¨ææ°çæµè§å¨ï¼é»å®¢æ æ³ç¯¡æ¹ referer å¼ï¼è¿ç§æ¹æ³ä»ç¶æé®é¢ãå ä¸º referer å¼ä¼è®°å½ä¸ç¨æ·çè®¿é®æ¥æºï¼æäºç¨æ·è®¤ä¸ºè¿æ ·ä¼ä¾µç¯å°ä»ä»¬èªå·±çéç§æï¼å æ­¤ï¼ç¨æ·èªå·±å¯ä»¥è®¾ç½®æµè§å¨ä½¿å¶å¨åéè¯·æ±æ¶ä¸åæä¾ refererãå½ä»ä»¬æ­£å¸¸è®¿é®é¶è¡ç½ç«æ¶ï¼ç½ç«ä¼å ä¸ºè¯·æ±æ²¡æ referer å¼èè®¤ä¸ºæ¯ csrf æ»å»ï¼æç»åæ³ç¨æ·çè®¿é®ã\n\n * samesite cookie\n   \n   * strictï¼å®å¨ç¦æ­¢ç¬¬ä¸æ¹ cookie\n   \n   * laxï¼å¤§å¤æ°æåµä¹æ¯ä¸åéç¬¬ä¸æ¹ cookie\n   \n   * noneï¼chrome è®¡åå°laxåä¸ºé»è®¤è®¾ç½®ãè¿æ¶ï¼ç½ç«å¯ä»¥éæ©æ¾å¼å³é­samesiteå±æ§ï¼å°å¶è®¾ä¸ºnoneãä¸è¿ï¼åææ¯å¿é¡»åæ¶è®¾ç½®secureå±æ§ï¼cookie åªè½éè¿ https åè®®åéï¼ï¼å¦åæ æã\n   \n   * gooleæµè§å¨çè®¾ç½®ï¼chrome 91çæ¬åå·²ç§»é¤ï¼é»è®¤å¼ä¸º laxï¼\n     \n     # samesite by default cookies\n     \n     > treat cookies that don\'t specify a samesite attribute as if they were samesite=lax. sites must specify samesite=none in order to enable third-party usage. â mac, windows, linux, chrome os, android\n     > \n     > å°æªæå®samesiteå±æ§çcookieè§ä¸ºsamesite=lax(é»è®¤),ç½ç«å¿é¡»æå®samesite=noneæè½å¯ç¨ç¬¬ä¸æ¹cookieã æè¿ä¸ªè®¾ç½®å³äºå°±åè®¸ææçç¬¬ä¸æ¹cookie\n     \n     # cookies without samesite must be secure\n     \n     > if enabled, cookies without samesite restrictions must also be secure. if a cookie without samesite restrictions is set without the secure attribute, it will be rejected. this flag only has an effect if "samesite by default cookies" is also enabled. â mac, windows, linux, chrome os, android\n     > \n     > å¦æå¯ç¨ï¼æ²¡æsamesiteéå¶çcookieä¹å¿é¡»æ¯å®å¨çãå¦ææ²¡æè®¾ç½®samesiteéå¶çcookieæ²¡æsecureå±æ§ï¼å®å°è¢«æç»ãæ­¤æ å¿ä»å¨å¯ç¨\'samesite by default cookies\'æ¶ææã\n     \n     å¦æä½ æ³å  samesite=none å±æ§ï¼é£ä¹è¯¥ cookie å°±å¿é¡»åæ¶å ä¸ secure å±æ§ï¼è¡¨ç¤ºåªæå¨ https åè®®ä¸è¯¥ cookie æä¼è¢«åéã\n   \n   * iframe samesiteé®é¢\n\n * csrf token\n   \n   > csrf æ»å»ä¹æä»¥è½å¤æåï¼æ¯å ä¸ºé»å®¢å¯ä»¥å®å¨ä¼ªé ç¨æ·çè¯·æ±ï¼è¯¥è¯·æ±ä¸­ææçç¨æ·éªè¯ä¿¡æ¯é½æ¯å­å¨äº cookie ä¸­ï¼å æ­¤é»å®¢å¯ä»¥å¨ä¸ç¥éè¿äºéªè¯ä¿¡æ¯çæåµä¸ç´æ¥å©ç¨ç¨æ·èªå·±ç cookie æ¥éè¿å®å¨éªè¯ãè¦æµå¾¡ csrfï¼å³é®å¨äºå¨è¯·æ±ä¸­æ¾å¥é»å®¢æä¸è½ä¼ªé çä¿¡æ¯ï¼å¹¶ä¸è¯¥ä¿¡æ¯ä¸å­å¨äº cookie ä¹ä¸­ãå¯ä»¥å¨ http è¯·æ±ä¸­ä»¥åæ°çå½¢å¼å å¥ä¸ä¸ªéæºäº§çç tokenï¼å¹¶å¨æå¡å¨ç«¯å»ºç«ä¸ä¸ªæ¦æªå¨æ¥éªè¯è¿ä¸ª tokenï¼å¦æè¯·æ±ä¸­æ²¡æ token æè token åå®¹ä¸æ­£ç¡®ï¼åè®¤ä¸ºå¯è½æ¯ csrf æ»å»èæç»è¯¥è¯·æ±ã\n   > \n   > è¿ç§æ¹æ³è¦æ¯æ£æ¥ referer è¦å®å¨ä¸äºï¼token å¯ä»¥å¨ç¨æ·ç»éåäº§çå¹¶æ¾äº session ä¹ä¸­ï¼ç¶åå¨æ¯æ¬¡è¯·æ±æ¶æ token ä» session ä¸­æ¿åºï¼ä¸è¯·æ±ä¸­ç token è¿è¡æ¯å¯¹ï¼ä½è¿ç§æ¹æ³çé¾ç¹å¨äºå¦ä½æ token ä»¥åæ°çå½¢å¼å å¥è¯·æ±ã å¨ä¸ä¸ªç½ç«ä¸­ï¼å¯ä»¥æ¥åè¯·æ±çå°æ¹éå¸¸å¤ï¼è¦å¯¹äºæ¯ä¸ä¸ªè¯·æ±é½å ä¸ token æ¯å¾éº»ç¦ç\n\n * éªè¯ç \n   \n   > csrfæ»å»æ¯ä¼ªé æç¨æ·çèº«ä»½ï¼èªå¨åèµ·æ¶æçè¯·æ±ãé£ä¹æä»¬å¯ä»¥å¼ºè¿«æ»å»èä¸æä»¬çç½ç«è¿è¡äº¤äºãå¨ä¸äºæä½ä¹åå å¥éªè¯ç æ ¡éªï¼å¯ä»¥æµå¾¡ä¸é¨åçcsrfæ»å»ãä½æ¯å å¥éªè¯ç ä¼å½±åç¨æ·çä½éªï¼æä»¥éªè¯ç ä¸è½ä½ä¸ºä¸»è¦çé²å¾¡ææ®µã\n\n\n# ç¹å»å«æ\n\n * ç¹å»å«æå¾ç¤º\n\n> ç¹å»å«ææ¯ä¸ç§è§è§æ¬ºéªçæ»å»ææ®µã\n> \n> é»å®¢åå»ºä¸ä¸ªç½é¡µå©ç¨ iframe åå«ç®æ ç½ç«ï¼\n> \n> æé ç½é¡µï¼è¯±åç¨æ·ç¹å»ç¹ç¹æé®ã\n\n * é²å¾¡ææ®µ\n   \n   * javascript ç¦æ­¢ååµ\n     \n     * window.top å±æ§è¿åå½åçªå£çæé¡¶å±æµè§å¨çªå£å¯¹è±¡ï¼å¨ iframe ä¸­ç window æçæ¯ iframe çªå£å¯¹è±¡\n     \n     * if (top.location !== window.location) {\n         top.location = window.location\n       }\n       \n   \n   * x-frame-options ååºå¤´ç¦æ­¢ååµ\n     \n     * denyï¼è¡¨ç¤ºé¡µé¢ä¸åè®¸å¨ frame ä¸­å±ç¤ºï¼å³ä¾¿æ¯å¨ç¸åååçé¡µé¢ä¸­åµå¥ä¹ä¸åè®¸ã\n     * sameoriginï¼è¡¨ç¤ºè¯¥é¡µé¢å¯ä»¥å¨ç¸åååé¡µé¢ç frame ä¸­å±ç¤ºã\n     * allow-from urlï¼è¡¨ç¤ºè¯¥é¡µé¢å¯ä»¥å¨æå®æ¥æºç frame ä¸­å±ç¤ºã\n\n\n# httpä¼ è¾å®å¨\n\n * http ææä¼ è¾ä¸å®å¨\n * ç½ç»åè®®ç¸å³\n\n\n# ä¸­é´äººæ»å»\n\n1)å®¢æ·ç«¯åéè¯·æ±å°æå¡ç«¯ï¼è¯·æ±è¢«ä¸­é´äººæªè·ã\n\n2)æå¡å¨åå®¢æ·ç«¯åéå¬é¥ã\n\n3)ä¸­é´äººæªè·å¬é¥ï¼ä¿çå¨èªå·±æä¸ãç¶åèªå·±çæä¸ä¸ªãä¼ªé çãå¬é¥ï¼åç»å®¢æ·ç«¯ã\n\n4)å®¢æ·ç«¯æ¶å°ä¼ªé çå¬é¥åï¼çæå¯æåç»æå¡å¨ã\n\n5)ä¸­é´äººè·å¾å¯æï¼ç¨èªå·±çç§é¥è§£å¯ãåæ¶ç¨çæ­£çå¬é¥åç»æå¡å¨ã\n\n6)æå¡å¨è·å¾å å¯ä¿¡æ¯ï¼ç¨èªå·±çç§é¥è§£å¯ã\n\n\n\n# ç¬¬ä¸æ¹ä¾èµå®å¨\n\nç°å¦ä»è¿è¡åºç¨å¼åï¼æ è®ºæ¯åç«¯æå¡å¨åºç¨è¿æ¯åç«¯åºç¨å¼åï¼ç»å¤§å¤æ°æ¶åæä»¬é½æ¯å¨åå©å¼åæ¡æ¶ååç§ç±»åºè¿è¡å¿«éå¼åãç¶èï¼ä¸äºç¬¬ä¸æ¹çä¾èµæèæä»¶å­å¨å¾å¤å®å¨æ§é®é¢ï¼ä¹ä¼å­å¨è¿æ ·é£æ ·çæ¼æ´ï¼æä»¥ä½¿ç¨èµ·æ¥å¾è°¨æã\n\n * å°½éåå°ç¬¬ä¸æ¹ä¾èµï¼éç¨ç¸å¯¹æççä¾èµå\n * å®æä½¿ç¨ npm audit æ£æµä¾èµåçé£é©\n\nä¸ºäºæé« npm ä¾èµçå®å¨ï¼npm 6.1 åæ·»å äº npm audit å·¥å·ï¼è¿ä¸ªå·¥å·å¯ä»¥æç´¢å½åé¡¹ç®ä¸­ä½¿ç¨çä¾èµæ¯å¦å­å¨å®å¨é®é¢ï¼å¹¶æä¾äº npm audit fix å·¥å·ä¿®å¤ã\n\nå®çå·¥ä½åçæ¯ç»´æ¤äºä¸ä¸ªå·²ç¥ä¸è¯ä¾èµçååï¼å¦æä»£ç ä¸­ä½¿ç¨äºç´æ¥ä» github èä¸æ¯ npm ä»åºä¸­è·åä¾èµï¼æä¸ç¥åçä¾èµãnpm audit ä¹æ¯æ æ³åç°å¨èãæ»çæ¥è¯´å¨å å¥ç¬¬ä¸æ¹ä¾èµæ¶ï¼éè¦è°¨æèèï¼ä¸æ»¥ç¨ä¾èµå¨åç«¯å¼åä¹æ¯éå¸¸éè¦çã\n\n\n# æ§å¶å°æ³¨å¥ä»£ç \n\nè¯¦è§å¤©ç«å®ç½æ§å¶å°\n\n\n# éé±¼\n\nç¹å»ä¸å¯ä¿¡é¾æ¥è¾å¥ç¨æ·åå¯ç \n\n\n# æ©å±\n\n * vue çå®å¨æªæ½',charsets:{cjk:!0}},{title:"eslint-plugin-san",frontmatter:{title:"eslint-plugin-san",date:"2021-09-11T11:27:54.000Z",categories:"San"},regularPath:"/san/eslint-plugin-san.html",relativePath:"san/eslint-plugin-san.md",key:"v-4e5f06df",path:"/san/eslint-plugin-san.html",headers:[{level:2,title:"eslint ä½¿ç¨åéç½®",slug:"eslint-ä½¿ç¨åéç½®",normalizedTitle:"eslint ä½¿ç¨åéç½®",charIndex:87},{level:3,title:"pluginsãextendsæä»ä¹åºå«ï¼",slug:"pluginsãextendsæä»ä¹åºå«",normalizedTitle:"pluginsãextendsæä»ä¹åºå«ï¼",charIndex:1440},{level:2,title:"eslint-plugin-san ä½¿ç¨åéç½®",slug:"eslint-plugin-san-ä½¿ç¨åéç½®",normalizedTitle:"eslint-plugin-san ä½¿ç¨åéç½®",charIndex:103},{level:3,title:"å¦ä½éç½®",slug:"å¦ä½éç½®",normalizedTitle:"å¦ä½éç½®",charIndex:2025},{level:3,title:"å¦ä½æ£æµ",slug:"å¦ä½æ£æµ",normalizedTitle:"å¦ä½æ£æµ",charIndex:2447},{level:3,title:"å©ç¨ husky å lint-staged æå»ºå·¥ä½æµ",slug:"å©ç¨-husky-å-lint-staged-æå»ºå·¥ä½æµ",normalizedTitle:"å©ç¨ husky å lint-staged æå»ºå·¥ä½æµ",charIndex:2522},{level:3,title:"æ°ç husky éç½®",slug:"æ°ç-husky-éç½®",normalizedTitle:"æ°ç husky éç½®",charIndex:2766},{level:2,title:"æºç è§£æ",slug:"æºç è§£æ",normalizedTitle:"æºç è§£æ",charIndex:130},{level:3,title:"ç®å½ç»æ",slug:"ç®å½ç»æ",normalizedTitle:"ç®å½ç»æ",charIndex:3820},{level:3,title:"å¦ä½åå»ºè§èªå·±çè§å",slug:"å¦ä½åå»ºè§èªå·±çè§å",normalizedTitle:"å¦ä½åå»ºè§èªå·±çè§å",charIndex:6311},{level:2,title:"san-eslint-parser",slug:"san-eslint-parser",normalizedTitle:"san-eslint-parser",charIndex:5195},{level:2,title:"å¦ä½è°è¯",slug:"å¦ä½è°è¯",normalizedTitle:"å¦ä½è°è¯",charIndex:172},{level:2,title:"å¸¸è§ç AST èç¹ç±»å",slug:"å¸¸è§ç-ast-èç¹ç±»å",normalizedTitle:"å¸¸è§ç ast èç¹ç±»å",charIndex:180}],lastUpdated:"7/7/2022, 6:20:47 PM",lastUpdatedTimestamp:1657189247e3,headersStr:"eslint ä½¿ç¨åéç½® pluginsãextendsæä»ä¹åºå«ï¼ eslint-plugin-san ä½¿ç¨åéç½® å¦ä½éç½® å¦ä½æ£æµ å©ç¨ husky å lint-staged æå»ºå·¥ä½æµ æ°ç husky éç½® æºç è§£æ ç®å½ç»æ å¦ä½åå»ºè§èªå·±çè§å san-eslint-parser å¦ä½è°è¯ å¸¸è§ç AST èç¹ç±»å",content:'# eslint-plugin-san\n\neslint-plugin-san æ¯ä¸é¨ä¸º san å¶å®çåºäº eslint çè§åæ ¡éªæä»¶ãæä¼ä»ä»¥ä¸å ä¸ªæ¹é¢æ¥ä»ç»ï¼\n\n * eslint ä½¿ç¨åéç½®\n * eslint-plugin-san ä½¿ç¨åéç½®\n * æºç è§£æ\n * å¦ä½åå»ºèªå·±çè§å\n * San-eslint-parser\n * å¦ä½è°è¯\n * å¸¸è§ç AST èç¹ç±»å\n\n\n# eslint ä½¿ç¨åéç½®\n\nå®è£ï¼yarn add eslint\n\néç½®ï¼eslint --initï¼æ­¤æ¶ä¼æä¸äºå½ä»¤è¡äº¤äºé®é¢ï¼æéåç­å³å¯ï¼ä¸è¬éç¨ Standard è§èï¼å®è£ä¸äºä¾èµä¹åï¼ä½¿ç¨eslint foo.jsæ£æ¥ç®æ æä»¶å³å¯ã\n\n// .eslintrc.js\nmodule.exports = {\n  env: {\n    browser: true,\n    es6: true\n  },\n  extends: [\n    \'standard\'\n  ],\n  parser: "babel-eslint",\n  parserOptions: {\n    ecmaVersion: 6,\n    sourceType: "module",\n    ecmaFeature:{\n\t\t\t"jsx":true,\n\t\t\t"globalReturn":true,\n\t\t\t"impliedStrict":true,\n\t\t}\n  },\n  plugins: [\n    \'eslint-plugin-react\',\n    \'@typescript-eslint\'\n  ],\n  // \n  rules: {\n    \'no-alert\': "error"\n  },\n  globals: {\n    "jQuery": "readonly"\n  }\n}\n\n\n * envï¼æ è®°è¿è¡ç¯å¢ï¼å¯é browser/node/commonjs ç­ï¼å¯ä»¥åæ¶ä½¿ç¨\n   * browser: trueï¼å¯ç¨ browser ç¹æ§ï¼ä»£ç ä¸­å¯ä»¥ä½¿ç¨ document, window å¨å±å¯¹è±¡\n   * es6: trueï¼å¯ç¨ ES6 ç¹æ§\n * extendsï¼æ©å±ï¼éæéç½®æ¹æ¡\n * parserï¼æå®è¯­æ³åæå¨ï¼ä¾å¦babel-parserï¼ä¹å¯ä»¥éç¨å¶ä»çå¦ï¼eslint-san-parser\n * parserOptionsï¼é»è®¤ç parserï¼åªè½¬æ¢jsä¸é»è®¤æ¯æES5çè¯­æ³ï¼å¯ä»¥éè¿ parserOptions ä¼ ééé¡¹ã\n   * ecmaVersion: 6ï¼ecmaVersion å¯ä»¥å¼å¯æ´é« ES çæ¬çæ ¡éª\n   * sourceType: "module"ï¼å¯ä»¥è®¾ç½®ä¸º "script"ï¼å¦æä½¿ç¨ ESModule å¯ä»¥è®¾ç½®ä¸º "module"\n   * ecmaFeatureï¼æ³ä½¿ç¨é¢å¤çè¯­è¨ç¹æ§\n     * "jsx":trueï¼ å¯ç¨jsx\n * pluginsï¼æä»¶ï¼ä¾å¦æ³å¢å æ ¡éª react, ts çè§åï¼å¯éç½®å¦ä¸\n   * eslint-plugin-react\n   * @typescript-eslint\n * rulesï¼å¯ä»¥èªå®ä¹éç½®æ ¡éªè§å\n   * \'no-alert\': "error" ï¼ æ off/warn/error éé¡¹\n * globalsï¼å£°æå¯ä»¥ä½¿ç¨çå¨å±æå\n\n> å®ç½eslint éç½®\n\n\n# pluginsãextendsæä»ä¹åºå«ï¼\n\n     EXTENDS                                                   PLUGIN\nå½å   eslint-config-æ @scope/eslint-config æ                    eslint-plugin-<plugin-name>\n     @scope/eslint-config-myconfig                             æ@scope/eslint-plugin-<plugin-name>\nç¨é   æ©å±ï¼éæä¸ä¸ªä¸ªéç½®æ¹æ¡çæä½³å®è·µï¼å³å«äººéç½®å¥½ç.exlintrc.jsï¼éé¢ä¸åªæ rulesï¼æ¯å¦å¯è½æ   æä»¶ï¼ä¸è¬æ¯ä¸å èªå®ä¹çè§åçéåï¼å è½½æä»¶å³æ¯å¼å¥äºé¢å¤çèªå®ä¹è§åãä¹å¯è½ä¼åå«å¶ä»éç½®é¡¹ã\n     envï¼global éç½®\n\n 1. plugin æä»¶ä¸»è¦æ¶åèªå®ä¹è§åçå·ä½å®ç°ï¼åæ¶è¿è½å¤æä¾éç½®\n 2. extend éç½®ä¸»è¦æ¶åè§åçå·ä½éç½®\n\n\n# eslint-plugin-san ä½¿ç¨åéç½®\n\neslint-plugin-san æ¬è´¨ä¸æ¯ eslint çä¸ä¸ªæä»¶ï¼ç±»ä¼¼äº eslint-plugin-vueï¼èªå®ä¹äº san çæ£éªè§åã\n\n\n# å¦ä½éç½®\n\nyarn add -D eslint eslint-plugin-san\n\n\nç¨extendsæ¹å¼å¯ä»¥éç½®æ³è¦çè§åéï¼ä¾å¦plugin:san/recommendedï¼recommendedåé¨å·²ç»å¨ruleséç½®å¥½äºç¸åºçè§åãå¦æéç½®å°pluginsä¸­ï¼è¿éå¨rulesä¸­èªå·±æ·»å è§åã\n\n// .eslintrc.js\nmodule.exports = {\n  extends: [\n    // add more generic rulesets here, such as:\n    // \'eslint:recommended\',\n    \'plugin:san/recommended\'\n  ],\n  rules: {\n    // override/add rules settings here, such as:\n    // \'san/no-unused-vars\': \'error\'\n  }\n}\n\n\n\n# å¦ä½æ£æµ\n\neslint --ext .js,.san ./src\n\n\n--extå½ä»¤å¯ä»¥æç¡®æ ¡éªæä»¶æ©å±ï¼.jså.sanæä»¶é½å¯ä»¥æ ¡éªã\n\n\n# å©ç¨ husky å lint-staged æå»ºå·¥ä½æµ\n\n * huskyï¼git hooks å·¥å·ï¼å¯ä»¥éç½®å¨ commit ä¹åæ§è¡æ£æ¥ã\n * lint-stagedï¼åªå¯¹æå­åºçæä»¶è¿è¡æä½ã\n\n"lint-staged": {\n  "**/*.{js,jsx,san}": "eslint --ext .js,.san ./src"\n},\n"husky": {\n  "hooks": {\n    "pre-commit": "lint-staged"\n  }\n},\n\n\n\n# æ°ç husky éç½®\n\næ°çç husky åæ¶äºå¨ package.json ä¸­éç½®çæ¹å¼ï¼å¯ä»¥ä½¿ç¨ husky install æ¥åå»º .husky ç®å½ï¼æä»¬ä¸å¦¨åä¸ªèæ¬ï¼\n\n# install-husky.sh\n#!/bin/sh\n\nnpx husky install\n\n# å é¤å·²æç git hooks\nrm .husky/commit-msg\nrm .husky/pre-commit\n\n# æ·»å  pre-commit hook\nnpx husky add .husky/pre-commit "npx --no-install lint-staged"\n\n# commit-msg hook æ·»å  commitlint è°ç¨\nnpx husky add .husky/commit-msg \'npx --no-install commitlint --edit "$1"\'\n\n\nå¨é¡¹ç®ä¸­æ§è¡è¿ä¸ªèæ¬çæ.huskyç®å½ï¼éé¢åå«åå« pre-commit å commit-msgãå¨æ¯æ¬¡ commit æ¶ï¼\n\n * è¿è¡ lint-staged ï¼å¯ä»¥éç½®æ¥åæ¶æ ¡éª eslint å stylelint\n\n"scripts": {\n  "lint-staged": "lint-staged"\n},\n"lint-staged": {\n  "**/*.{js,jsx,san}": "eslint",\n  "**/*.{css,less}": "stylelint"\n},\n\n\n * è¿è¡ commitlintï¼éè¦å¨é¡¹ç®ä¸­åå»º commitlint.config.js è¿è¡éç½®\n\nè¿æ ·å°±å®æäºä½¿ç¨ husky æ¥éæ eslint & stylelint & commitlintã\n\n\n# æºç è§£æ\n\n> æºç å°åï¼https://github.com/ecomfe/eslint-plugin-san\n\né¦åè§£éä¸ä¸plugin:san/recommendedçå«ä¹ï¼eslint-plugin-sançè§èåä¸ºåç§ï¼\n\n * åºç¡ï¼baseï¼\n * å¿è¦ï¼essentialï¼\n * å¼ºçæ¨èï¼strongly-recommendedï¼\n * æ¨èï¼recommendedï¼\n\nç±åå°åï¼åé¢çè§åèå´ä¼æ¶µçåé¢çï¼ä¾å¦recommendedåå«strongly-recommendedçè§åï¼èstrongly-recommendedååå«essentialçè§åã\n\n\n# ç®å½ç»æ\n\nâââ README.md\nâââ lib\nâ   âââ configs \nâ   â   âââ base.js\nâ   â   âââ essential.js\nâ   â   âââ no-layout-rules.js\nâ   â   âââ recommended.js\nâ   â   âââ strongly-recommended.js\nâ   âââ index.js\nâ   âââ processor.js\nâ   âââ rules\nâ   â   âââ attribute-hyphenation.js\nâ   â   âââ attributes-order.js\nâ   â   âââ boolean-value.js\nâ   â   âââ ...\nâ   â   âââ valid-template-root.js \nâ   âââ utils\nâ       âââ index.js\nâââ package.json\n\n\nindex.jsä¸­åå«çæä»¶é»è®¤å¯¼åºçå¯¹è±¡ï¼\n\nmodule.exports = {\n    rules: extend(rules), // æ ¡éªè§å\n    configs: { // éç½®ä¸åçè§èï¼éè¿ eslint-plugin-san/recommended æ¥ä½¿ç¨\n        base: require(\'./configs/base\'),\n        essential: require(\'./configs/essential\'),\n        recommended: require(\'./configs/recommended\'),\n        strongly-recommended: require(\'./configs/strongly-recommended\')\n    },\n    processors: {\n        \'.san\': require(\'./processor\'),\n        \'.ts\': require(\'./processor\'),\n        \'.js\': require(\'./processor\')\n    }\n};\n\n\n# rules\n\nå¨ ESLint ä¸­ï¼æä»¶å¯ä»¥æ´é²é¢å¤çè§åä»¥ä¾ä½¿ç¨ãä¸ºæ­¤ï¼æä»¶å¿é¡»è¾åºä¸ä¸ª ruleså¯¹è±¡ï¼åå«è§å ID åå¯¹åºè§åçä¸ä¸ªé®å¼å¯¹ãä¾å¦ï¼\n\nrules: {\n  "no-dupe-keys": {\n    create: function (context) {\n      // rule implementation ...\n    }\n  }\n}\n\n\n# config\n\nconfigç®å½ä¸ä¸»è¦æä»¥ä¸å é¡¹ï¼\n\n * base.js\n * essential.js\n * strongly-recommended.js\n * recommended.js\n\n// base.jsï¼åå«åºç¡éç½®é¡¹\nmodule.exports = {\n    // å¨è¿éå·²ç»éç½®äº parserï¼æä»¥é¡¹ç®ä¸­ç ..eslintrc.js ä¸ç¨å»éç½®ï¼ä½ç¨æ¯è§£æä»£ç çæ AST\n    parser: require.resolve(\'san-eslint-parser\'),\n    parserOptions: {\n        ecmaVersion: 2020,\n        sourceType: \'module\'\n    },\n    env: {\n        browser: true,\n        es6: true\n    },\n    plugins: [\'san\'], // æä»¶ eslint-plugin-sanï¼sanæ¯ç®å\n    rules: {\n        \'san/comment-directive\': \'error\'\n    }\n};\n\n// essential.js: å°±æ¯å¨ base.js çåºç¡ä¸æ·»å ä¸äºè§å\nmodule.exports = {\n    extends: require.resolve(\'./base\'),\n    rules: {\n        \'san/valid-components-name\': \'error\',\n        \'san/custom-event-name-casing\': \'error\',\n        // ...\n    }\n};\n\n// strongly-recommended.js: å°±æ¯å¨ essential.js åºç¡ä¸æ·»å ä¸äºè§å\nmodule.exports = {\n    extends: require.resolve(\'./essential\'),\n    rules: {\n        \'san/boolean-value\': \'warn\',\n        \'san/attribute-hyphenation\': \'warn\',\n        // ...\n    }\n};\n\n\n# processor\n\nå¤çå¨ï¼å¨ parser ä¹ååæåè¾åºç»æä¹åå¯ä»¥å©ç¨ processor ä½ä¸äºé¢å¤å¤çã\n\nåå»ºä¸ä¸ªå¤çå¨ï¼ä»ä½ çæ¨¡åä¸­è¾åºçå¯¹è±¡å¿é¡»ç¬¦åä»¥ä¸æ¥å£ï¼\n\nprocessors: {\n  ".san": {\n    preprocess: function(text, filename) {\n      return [string]; \n    },\n\t\t\n    postprocess: function(messages, filename) {\n\t\t\t// ...\n\t\t\treturn messages[0];\n\t\t},\n\n    supportsAutofix: true \n  }\n}\n\n\nä¸å¾å¯ä»¥çå°æ´ä½æµç¨ä»¥å preprocessåpostcess çè§¦åæ¶æºã\n\n\n\n\n# å¦ä½åå»ºè§èªå·±çè§å\n\nè§åçåºæ¬æ ¼å¼ï¼\n\n"use strict";\n\nmodule.exports = {\n    meta: {\n        type: "suggestion",\n        docs: {\n            description: "disallow unnecessary semicolons",\n            category: "Possible Errors",\n            recommended: true,\n            url: "https://eslint.org/docs/rules/no-extra-semi"\n        },\n        fixable: "code",\n        schema: []\n    },\n    create: function(context) {\n        return {\n            // è¯­æ³èç¹ï¼import \n            ImportDeclaration(node) {\n              context.report({\n                node: node,\n                messageId: "readonlyMember",\n                data: {name: \'xxx\'}\n              });\n            },\n            \n            // éæ©å¨ï¼åæ° > 3ä¸ªçå½æ°èç¹\n          \t"FunctionDeclaration[params.length>3]": function(functionDeclarationNode) {\n              // ...your logic here\n            }\n          \n            // äºä»¶\n          \t"onCodePathStart": function(codePath, node) {\n                // do something with codePath\n            },\n        };\n    }\n};\n\n\n * metaï¼åå«è§åçåæ°æ®ï¼\n   * type (string) æç¤ºè§åçç±»åï¼å¼ä¸º "problem"ã"suggestion" æ "layout"\n   * docs (object) å¯¹ ESLint æ ¸å¿è§åæ¥è¯´æ¯å¿éç\n     * description (å­ç¬¦ä¸²) æä¾è§åçç®ç­æè¿°\n     * category (string) æå®è§åå¤äºçåç±»\n     * recommended (boolean) éç½®æä»¶ä¸­ç "extends": "eslint:recommended"å±æ§æ¯å¦å¯ç¨è¯¥è§å\n     * url (string) æå®å¯ä»¥è®¿é®å®æ´ææ¡£ç urlã\n   * schemeï¼ç¨æ¥æè¿°ä¸ä¸ªè§åçéé¡¹ï¼ESLint ä¼ç¨å®æ¥éªè¯éç½®ä¸­çéé¡¹æ¯å¦ææãå¨ä¼ å¥å°è§åä¸­ä¹åï¼é¿å context.options åºç°æ ææéæ³è¾å¥ã\n * create (function) è¿åä¸ä¸ªå¯¹è±¡ï¼å¶ä¸­åå«äº ESLint å¨éå JavaScript ä»£ç çæ½è±¡è¯­æ³æ  AST (ESTree å®ä¹ç AST) æ¶ï¼ç¨æ¥è®¿é®èç¹çæ¹æ³ã\n   * å¦æä¸ä¸ª key æ¯ä¸ªèç¹ç±»åæ selectorï¼å¨ åä¸ éåæ æ¶ï¼ESLint è°ç¨ visitor å½æ°\n   * å¦æä¸ä¸ª key æ¯ä¸ªèç¹ç±»åæ selectorï¼å¹¶å¸¦æ :exitï¼å¨éåéåºè¯¥èç¹æ¶ï¼DFSï¼ï¼ESLint è°ç¨ visitor å½æ°\n   * å¦æä¸ä¸ª key æ¯ä¸ªäºä»¶åå­ï¼ESLint ä¸ºä»£ç è·¯å¾åæè°ç¨ handler å½æ°\n\nTIP\n\nå»ºè®®ä»ç»çä¸è¿ä¸¤ç¯ææ¡£ï¼è§£éäºä»ä¹æ¯éæ©å¨åè·¯å¾åæ selector ä»£ç è·¯å¾åæ\n\nASTæ¼ç¤º AST explorer\n\n\n# san-eslint-parser\n\nsan-eslint-parser ä¼å°æä»¬.san çæä»¶åå®¹å©ç¨åæä¸ä¸ª blockï¼å¶ä¸­å©ç¨ parserOptions.parser æå®çè§£æå¨æ¥å¤ç script é¨åçåå®¹ï¼scriptä¸­å¦ææ¯ JavaScript ä»£ç å parserOPtions.parser ä¸º @babel/eslint-parserï¼å¦ææ¯ Typescript ä»£ç åä¸º @typescript-eslint/parserãstyle é¨åä¸ä¼å¤çï¼template é¨åå½ä½ HTML æ¥è§£æã\n\n\n\nä¸å¾æç¤ºä¸ºèªå®ä¹ parser çæç ASTï¼æ ¹èç¹ç type ä¸º Programï¼æ ¹èç¹ç body å±æ§å­å¨äº script ä»£ç ç astï¼æ ¹èç¹ä¸ç templateBody ä¸º template é¨åç astãç±äº ESlint åªä¼éåæ ¹èç¹ä»¥å body ä¸çèç¹ï¼å æ­¤å¦ææä»¬æ³ä¸º templateBody æ³¨å visitorï¼é£ä¹å¯ä»¥éè¿ services æ¥å®ç°ã\n\n----------------------------------------\n\nservicesï¼èªå®ä¹ parser ä¸º rule æä¾çæå¡ï¼æ¯æ¡è§åå¯ä»¥éè¿ context.parserServices è®¿é®å°\n\nsan-eslint-parser ä¼å¨ services å±æ§ä¸å®ä¹ defineTemplateBodyVisitor æ¹æ³ï¼\n\nlet emitter = null; // åå¸è®¢éå¨\nfunction defineTemplateBodyVisitor(templateBodyVisitor) {\n    let scriptVisitor = {};\n    if (!emitter) {\n        emitter = new EventEmitter();\n        scriptVisitor["Program"] = node => {\n            traverseNodes(rootAST.templateBody)\n        };\n    }\n    for (const selector of Object.keys(templateBodyVisitor)) {\n        emitter.on(selector, templateBodyVisitor[selector]);\n    }\n    return scriptVisitor;\n}\n\n\nè¯¥æ¹æ³ä¸»è¦å®æäºä¸¤é¨åçå·¥ä½ï¼\n\n 1. æ¶éæ¯æ¡ rule ä¸­éå¯¹ templateBody ç visitorï¼è¯¥æ¹æ³æ¥æ¶çåæ°ä¸º templateBodyVisitorï¼è¯¥å¯¹è±¡å­å¨äºææéå¯¹ templateBody ç visitorï¼è¿äº visitor ä¼æ³¨åå°èªå®ä¹ parser åé¨çåå¸è®¢éå¨ä¸ã\n 2. è¿åä¸ä¸ªéå¯¹ script å¯¹åºç AST ç visitorï¼è¯¥ visitor ç type ä¸º Programï¼æ ¹æ®ä¸æä¸­ ESlint å·¥ä½åçä¸èï¼æä»¬å¯ä»¥ç¥éï¼ESlint å¨éå AST çè¿ç¨ä¸­ï¼å½éå°ç±»åä¸º Program çæ ¹èç¹æ¶ï¼ä¼æ§è¡è¯¥ visitorï¼å¹¶ä¸è¯¥ visitor ä¼è°ç¨èªå®ä¹ parser åé¨æ¹æ³å¯¹ templateBody å­å¨ç AST è¿è¡éåã\n\nå æ­¤ï¼æä»¬å¯ä»¥å©ç¨ä¸è¿°æ¹æ³å¨æ¯æ¡ rule ä¸­ç¼åç¸å³ç visitor æ¥å¤ç templateBody ä¸­ä¸å type ç±»åè¯­æ³èç¹ï¼å¦ä¸ä»£ç æç¤ºï¼\n\nmodule.exports = {\n    meta: {...},\n    create(context) {\n        return context.parserServices.defineTemplateBodyVisitor(context, {\n            \'VElement\'(node) {\n                // do something\n            },\n            \'VText\'(node) {\n                // do something\n            }\n        });\n    }\n};\n\n\n\n# å¦ä½è°è¯\n\n 1. ä¸è½½eslint-plugin-sanæºç \n\ngit clone https://github.com/ecomfe/eslint-plugin-san.git\n\n\n 2. æ¬å°æ°å»ºä¸ªé¡¹ç®ï¼éç½®.eslintrc.js åpackage.jsonèæ¬ï¼ç¶åè¿è¡æ­£å¸¸å®è£ä¾èµeslint å eslint-plugin-sanã\n\n// eslintrc.js\nmodule.exports = {\n  extends: [\n    \'plugin:san/recommended\'\n  ],\n  rules: {}\n}\n\n// package.json\n{\n    "scripts": {\n      "test": "echo \\"Error: no test specified\\" && exit 1",\n        "dev": "eslint ./test.san"\n    },\n    "dependencies": {\n      "eslint": "^7.32.0",\n      "eslint-plugin-san": "^1.0.2"\n    }\n}\n\n\n 3. npm link\n\n> è°è¯æºç å¯ä»¥ä» node_modules ä¸­å»ç´æ¥ä¿®æ¹ eslint-plugin-sanï¼ä½æ¯è¿æ ·åä¸æ¯å¨æºä»£ç ä¸æ¹çï¼æ²¡ææ¹å¨æç¤ºï¼å¦ææ³æäº¤æ°çæ¹å¨ä¼å¾éº»ç¦ã\n> \n> æä»¥æ¬å°å¼å npm æ¨¡åæ¶ä¸è¬è¦ npm link å½ä»¤ï¼ä»çä¸»è¦ä½ç¨æ¯ï¼å°æ¬å°ä¸è½½å¥½çåé¾æ¥å°é¡¹ç®ä¸­çnode_modulesä¸­å»ï¼è¿æ ·ç´æ¥å¨æºç åä¸­ä¿®æ¹å³å¯ã\n\n# è¿å¥ eslint-plugin-san ä¸­\nnpm link\n# è¿å¥é¡¹ç®ä¸­\nnpm link eslint-plugin-san\n\n\n 4. Nodejs è¿ç¨è°è¯\n\n# è¿è¡ node --inspect-brk å½ä»¤\nnode --inspect-brk index.js\n# æå¼ chrome è¾å¥ chrome://inspect æå¼è°è¯é¢æ¿\n\n\nä¿®æ¹package.jsonä¸­çèæ¬\n\n> å¶å®ä¸é¢ç eslint ./test.san ä¸­ç eslintå°±æ¯ ./node_modules/.bin/eslintçç®åï¼è¿éç±äºåé¢å äºnode --inspect-brkï¼æä»¥è¿éä¸è½ç®åäºï¼è¦æè·¯å¾åå¨ã\n\n{\n  "scripts": {\n    "test": "echo \\"Error: no test specified\\" && exit 1",\n    "dev": "node --inspect-brk ./node_modules/.bin/eslint ./test.san"\n  }\n}\n\n\n 5. vscodeéç½®\n\n * ä¸è½½ eslint æä»¶\n * éç½® settings.json\n\n\n# å¸¸è§ç AST èç¹ç±»å\n\nç±»åååç§°                      ä¸­æåç§°        æè¿°\nProgram                    ç¨åºä¸»ä½        æ´æ®µä»£ç çä¸»ä½\nVariableDeclaration        åéå£°æ        å£°æä¸ä¸ªåéï¼ä¾å¦ var let const\nFunctionDeclaration        å½æ°å£°æ        å£°æä¸ä¸ªå½æ°ï¼ä¾å¦ function\nExpressionStatement        è¡¨è¾¾å¼è¯­å¥       éå¸¸æ¯è°ç¨ä¸ä¸ªå½æ°ï¼ä¾å¦ console.log()\nImportDeclaration          Import å£°æ   import\nExportDefaultDeclaration   Export å£°æ   export default\nBlockStatement             åè¯­å¥         åè£¹å¨ {} ååçä»£ç ï¼ä¾å¦ if (condition){var a = 1;}\nIdentifier                 æ è¯ç¬¦         æ è¯ï¼ä¾å¦å£°æåéæ¶ var identi = 5 ä¸­ç identi\nCallExpression             è°ç¨è¡¨è¾¾å¼       éå¸¸æè°ç¨ä¸ä¸ªå½æ°ï¼ä¾å¦ console.log()\nBinaryExpression           äºè¿å¶è¡¨è¾¾å¼      éå¸¸æè¿ç®ï¼ä¾å¦ 1+2\nMemberExpression           æåè¡¨è¾¾å¼       éå¸¸æè°ç¨å¯¹è±¡çæåï¼ä¾å¦ console å¯¹è±¡ç log æå\nNewExpression              New è¡¨è¾¾å¼     éå¸¸æä½¿ç¨ New å³é®è¯\nAssignmentExpression       èµå¼è¡¨è¾¾å¼       éå¸¸æå°å½æ°çè¿åå¼èµå¼ç»åé\nUpdateExpression           æ´æ°è¡¨è¾¾å¼       éå¸¸ææ´æ°æåå¼ï¼ä¾å¦ i++\nObjectExpression           å¯¹è±¡è¡¨è¾¾å¼       {a: 1}\nLiteral                    å­é¢é         å­é¢é\nBooleanLiteral             å¸å°åå­é¢é      å¸å°å¼ï¼ä¾å¦ true false\nNumericLiteral             æ°å­åå­é¢é      æ°å­ï¼ä¾å¦ 100\nStringLiteral              å­ç¬¦åå­é¢é      å­ç¬¦ä¸²ï¼ä¾å¦ vansenb\nSwitchCase                 Case è¯­å¥     éå¸¸æ Switch è¯­å¥ä¸­ç Case\n\nåèï¼ç¾åº¦å·¥ç¨å¸ææææä½ å®ç°ä»£ç è§èæ£æµå·¥å·',normalizedContent:'# eslint-plugin-san\n\neslint-plugin-san æ¯ä¸é¨ä¸º san å¶å®çåºäº eslint çè§åæ ¡éªæä»¶ãæä¼ä»ä»¥ä¸å ä¸ªæ¹é¢æ¥ä»ç»ï¼\n\n * eslint ä½¿ç¨åéç½®\n * eslint-plugin-san ä½¿ç¨åéç½®\n * æºç è§£æ\n * å¦ä½åå»ºèªå·±çè§å\n * san-eslint-parser\n * å¦ä½è°è¯\n * å¸¸è§ç ast èç¹ç±»å\n\n\n# eslint ä½¿ç¨åéç½®\n\nå®è£ï¼yarn add eslint\n\néç½®ï¼eslint --initï¼æ­¤æ¶ä¼æä¸äºå½ä»¤è¡äº¤äºé®é¢ï¼æéåç­å³å¯ï¼ä¸è¬éç¨ standard è§èï¼å®è£ä¸äºä¾èµä¹åï¼ä½¿ç¨eslint foo.jsæ£æ¥ç®æ æä»¶å³å¯ã\n\n// .eslintrc.js\nmodule.exports = {\n  env: {\n    browser: true,\n    es6: true\n  },\n  extends: [\n    \'standard\'\n  ],\n  parser: "babel-eslint",\n  parseroptions: {\n    ecmaversion: 6,\n    sourcetype: "module",\n    ecmafeature:{\n\t\t\t"jsx":true,\n\t\t\t"globalreturn":true,\n\t\t\t"impliedstrict":true,\n\t\t}\n  },\n  plugins: [\n    \'eslint-plugin-react\',\n    \'@typescript-eslint\'\n  ],\n  // \n  rules: {\n    \'no-alert\': "error"\n  },\n  globals: {\n    "jquery": "readonly"\n  }\n}\n\n\n * envï¼æ è®°è¿è¡ç¯å¢ï¼å¯é browser/node/commonjs ç­ï¼å¯ä»¥åæ¶ä½¿ç¨\n   * browser: trueï¼å¯ç¨ browser ç¹æ§ï¼ä»£ç ä¸­å¯ä»¥ä½¿ç¨ document, window å¨å±å¯¹è±¡\n   * es6: trueï¼å¯ç¨ es6 ç¹æ§\n * extendsï¼æ©å±ï¼éæéç½®æ¹æ¡\n * parserï¼æå®è¯­æ³åæå¨ï¼ä¾å¦babel-parserï¼ä¹å¯ä»¥éç¨å¶ä»çå¦ï¼eslint-san-parser\n * parseroptionsï¼é»è®¤ç parserï¼åªè½¬æ¢jsä¸é»è®¤æ¯æes5çè¯­æ³ï¼å¯ä»¥éè¿ parseroptions ä¼ ééé¡¹ã\n   * ecmaversion: 6ï¼ecmaversion å¯ä»¥å¼å¯æ´é« es çæ¬çæ ¡éª\n   * sourcetype: "module"ï¼å¯ä»¥è®¾ç½®ä¸º "script"ï¼å¦æä½¿ç¨ esmodule å¯ä»¥è®¾ç½®ä¸º "module"\n   * ecmafeatureï¼æ³ä½¿ç¨é¢å¤çè¯­è¨ç¹æ§\n     * "jsx":trueï¼ å¯ç¨jsx\n * pluginsï¼æä»¶ï¼ä¾å¦æ³å¢å æ ¡éª react, ts çè§åï¼å¯éç½®å¦ä¸\n   * eslint-plugin-react\n   * @typescript-eslint\n * rulesï¼å¯ä»¥èªå®ä¹éç½®æ ¡éªè§å\n   * \'no-alert\': "error" ï¼ æ off/warn/error éé¡¹\n * globalsï¼å£°æå¯ä»¥ä½¿ç¨çå¨å±æå\n\n> å®ç½eslint éç½®\n\n\n# pluginsãextendsæä»ä¹åºå«ï¼\n\n     extends                                                   plugin\nå½å   eslint-config-æ @scope/eslint-config æ                    eslint-plugin-<plugin-name>\n     @scope/eslint-config-myconfig                             æ@scope/eslint-plugin-<plugin-name>\nç¨é   æ©å±ï¼éæä¸ä¸ªä¸ªéç½®æ¹æ¡çæä½³å®è·µï¼å³å«äººéç½®å¥½ç.exlintrc.jsï¼éé¢ä¸åªæ rulesï¼æ¯å¦å¯è½æ   æä»¶ï¼ä¸è¬æ¯ä¸å èªå®ä¹çè§åçéåï¼å è½½æä»¶å³æ¯å¼å¥äºé¢å¤çèªå®ä¹è§åãä¹å¯è½ä¼åå«å¶ä»éç½®é¡¹ã\n     envï¼global éç½®\n\n 1. plugin æä»¶ä¸»è¦æ¶åèªå®ä¹è§åçå·ä½å®ç°ï¼åæ¶è¿è½å¤æä¾éç½®\n 2. extend éç½®ä¸»è¦æ¶åè§åçå·ä½éç½®\n\n\n# eslint-plugin-san ä½¿ç¨åéç½®\n\neslint-plugin-san æ¬è´¨ä¸æ¯ eslint çä¸ä¸ªæä»¶ï¼ç±»ä¼¼äº eslint-plugin-vueï¼èªå®ä¹äº san çæ£éªè§åã\n\n\n# å¦ä½éç½®\n\nyarn add -d eslint eslint-plugin-san\n\n\nç¨extendsæ¹å¼å¯ä»¥éç½®æ³è¦çè§åéï¼ä¾å¦plugin:san/recommendedï¼recommendedåé¨å·²ç»å¨ruleséç½®å¥½äºç¸åºçè§åãå¦æéç½®å°pluginsä¸­ï¼è¿éå¨rulesä¸­èªå·±æ·»å è§åã\n\n// .eslintrc.js\nmodule.exports = {\n  extends: [\n    // add more generic rulesets here, such as:\n    // \'eslint:recommended\',\n    \'plugin:san/recommended\'\n  ],\n  rules: {\n    // override/add rules settings here, such as:\n    // \'san/no-unused-vars\': \'error\'\n  }\n}\n\n\n\n# å¦ä½æ£æµ\n\neslint --ext .js,.san ./src\n\n\n--extå½ä»¤å¯ä»¥æç¡®æ ¡éªæä»¶æ©å±ï¼.jså.sanæä»¶é½å¯ä»¥æ ¡éªã\n\n\n# å©ç¨ husky å lint-staged æå»ºå·¥ä½æµ\n\n * huskyï¼git hooks å·¥å·ï¼å¯ä»¥éç½®å¨ commit ä¹åæ§è¡æ£æ¥ã\n * lint-stagedï¼åªå¯¹æå­åºçæä»¶è¿è¡æä½ã\n\n"lint-staged": {\n  "**/*.{js,jsx,san}": "eslint --ext .js,.san ./src"\n},\n"husky": {\n  "hooks": {\n    "pre-commit": "lint-staged"\n  }\n},\n\n\n\n# æ°ç husky éç½®\n\næ°çç husky åæ¶äºå¨ package.json ä¸­éç½®çæ¹å¼ï¼å¯ä»¥ä½¿ç¨ husky install æ¥åå»º .husky ç®å½ï¼æä»¬ä¸å¦¨åä¸ªèæ¬ï¼\n\n# install-husky.sh\n#!/bin/sh\n\nnpx husky install\n\n# å é¤å·²æç git hooks\nrm .husky/commit-msg\nrm .husky/pre-commit\n\n# æ·»å  pre-commit hook\nnpx husky add .husky/pre-commit "npx --no-install lint-staged"\n\n# commit-msg hook æ·»å  commitlint è°ç¨\nnpx husky add .husky/commit-msg \'npx --no-install commitlint --edit "$1"\'\n\n\nå¨é¡¹ç®ä¸­æ§è¡è¿ä¸ªèæ¬çæ.huskyç®å½ï¼éé¢åå«åå« pre-commit å commit-msgãå¨æ¯æ¬¡ commit æ¶ï¼\n\n * è¿è¡ lint-staged ï¼å¯ä»¥éç½®æ¥åæ¶æ ¡éª eslint å stylelint\n\n"scripts": {\n  "lint-staged": "lint-staged"\n},\n"lint-staged": {\n  "**/*.{js,jsx,san}": "eslint",\n  "**/*.{css,less}": "stylelint"\n},\n\n\n * è¿è¡ commitlintï¼éè¦å¨é¡¹ç®ä¸­åå»º commitlint.config.js è¿è¡éç½®\n\nè¿æ ·å°±å®æäºä½¿ç¨ husky æ¥éæ eslint & stylelint & commitlintã\n\n\n# æºç è§£æ\n\n> æºç å°åï¼https://github.com/ecomfe/eslint-plugin-san\n\né¦åè§£éä¸ä¸plugin:san/recommendedçå«ä¹ï¼eslint-plugin-sançè§èåä¸ºåç§ï¼\n\n * åºç¡ï¼baseï¼\n * å¿è¦ï¼essentialï¼\n * å¼ºçæ¨èï¼strongly-recommendedï¼\n * æ¨èï¼recommendedï¼\n\nç±åå°åï¼åé¢çè§åèå´ä¼æ¶µçåé¢çï¼ä¾å¦recommendedåå«strongly-recommendedçè§åï¼èstrongly-recommendedååå«essentialçè§åã\n\n\n# ç®å½ç»æ\n\nâââ readme.md\nâââ lib\nâ   âââ configs \nâ   â   âââ base.js\nâ   â   âââ essential.js\nâ   â   âââ no-layout-rules.js\nâ   â   âââ recommended.js\nâ   â   âââ strongly-recommended.js\nâ   âââ index.js\nâ   âââ processor.js\nâ   âââ rules\nâ   â   âââ attribute-hyphenation.js\nâ   â   âââ attributes-order.js\nâ   â   âââ boolean-value.js\nâ   â   âââ ...\nâ   â   âââ valid-template-root.js \nâ   âââ utils\nâ       âââ index.js\nâââ package.json\n\n\nindex.jsä¸­åå«çæä»¶é»è®¤å¯¼åºçå¯¹è±¡ï¼\n\nmodule.exports = {\n    rules: extend(rules), // æ ¡éªè§å\n    configs: { // éç½®ä¸åçè§èï¼éè¿ eslint-plugin-san/recommended æ¥ä½¿ç¨\n        base: require(\'./configs/base\'),\n        essential: require(\'./configs/essential\'),\n        recommended: require(\'./configs/recommended\'),\n        strongly-recommended: require(\'./configs/strongly-recommended\')\n    },\n    processors: {\n        \'.san\': require(\'./processor\'),\n        \'.ts\': require(\'./processor\'),\n        \'.js\': require(\'./processor\')\n    }\n};\n\n\n# rules\n\nå¨ eslint ä¸­ï¼æä»¶å¯ä»¥æ´é²é¢å¤çè§åä»¥ä¾ä½¿ç¨ãä¸ºæ­¤ï¼æä»¶å¿é¡»è¾åºä¸ä¸ª ruleså¯¹è±¡ï¼åå«è§å id åå¯¹åºè§åçä¸ä¸ªé®å¼å¯¹ãä¾å¦ï¼\n\nrules: {\n  "no-dupe-keys": {\n    create: function (context) {\n      // rule implementation ...\n    }\n  }\n}\n\n\n# config\n\nconfigç®å½ä¸ä¸»è¦æä»¥ä¸å é¡¹ï¼\n\n * base.js\n * essential.js\n * strongly-recommended.js\n * recommended.js\n\n// base.jsï¼åå«åºç¡éç½®é¡¹\nmodule.exports = {\n    // å¨è¿éå·²ç»éç½®äº parserï¼æä»¥é¡¹ç®ä¸­ç ..eslintrc.js ä¸ç¨å»éç½®ï¼ä½ç¨æ¯è§£æä»£ç çæ ast\n    parser: require.resolve(\'san-eslint-parser\'),\n    parseroptions: {\n        ecmaversion: 2020,\n        sourcetype: \'module\'\n    },\n    env: {\n        browser: true,\n        es6: true\n    },\n    plugins: [\'san\'], // æä»¶ eslint-plugin-sanï¼sanæ¯ç®å\n    rules: {\n        \'san/comment-directive\': \'error\'\n    }\n};\n\n// essential.js: å°±æ¯å¨ base.js çåºç¡ä¸æ·»å ä¸äºè§å\nmodule.exports = {\n    extends: require.resolve(\'./base\'),\n    rules: {\n        \'san/valid-components-name\': \'error\',\n        \'san/custom-event-name-casing\': \'error\',\n        // ...\n    }\n};\n\n// strongly-recommended.js: å°±æ¯å¨ essential.js åºç¡ä¸æ·»å ä¸äºè§å\nmodule.exports = {\n    extends: require.resolve(\'./essential\'),\n    rules: {\n        \'san/boolean-value\': \'warn\',\n        \'san/attribute-hyphenation\': \'warn\',\n        // ...\n    }\n};\n\n\n# processor\n\nå¤çå¨ï¼å¨ parser ä¹ååæåè¾åºç»æä¹åå¯ä»¥å©ç¨ processor ä½ä¸äºé¢å¤å¤çã\n\nåå»ºä¸ä¸ªå¤çå¨ï¼ä»ä½ çæ¨¡åä¸­è¾åºçå¯¹è±¡å¿é¡»ç¬¦åä»¥ä¸æ¥å£ï¼\n\nprocessors: {\n  ".san": {\n    preprocess: function(text, filename) {\n      return [string]; \n    },\n\t\t\n    postprocess: function(messages, filename) {\n\t\t\t// ...\n\t\t\treturn messages[0];\n\t\t},\n\n    supportsautofix: true \n  }\n}\n\n\nä¸å¾å¯ä»¥çå°æ´ä½æµç¨ä»¥å preprocessåpostcess çè§¦åæ¶æºã\n\n\n\n\n# å¦ä½åå»ºè§èªå·±çè§å\n\nè§åçåºæ¬æ ¼å¼ï¼\n\n"use strict";\n\nmodule.exports = {\n    meta: {\n        type: "suggestion",\n        docs: {\n            description: "disallow unnecessary semicolons",\n            category: "possible errors",\n            recommended: true,\n            url: "https://eslint.org/docs/rules/no-extra-semi"\n        },\n        fixable: "code",\n        schema: []\n    },\n    create: function(context) {\n        return {\n            // è¯­æ³èç¹ï¼import \n            importdeclaration(node) {\n              context.report({\n                node: node,\n                messageid: "readonlymember",\n                data: {name: \'xxx\'}\n              });\n            },\n            \n            // éæ©å¨ï¼åæ° > 3ä¸ªçå½æ°èç¹\n          \t"functiondeclaration[params.length>3]": function(functiondeclarationnode) {\n              // ...your logic here\n            }\n          \n            // äºä»¶\n          \t"oncodepathstart": function(codepath, node) {\n                // do something with codepath\n            },\n        };\n    }\n};\n\n\n * metaï¼åå«è§åçåæ°æ®ï¼\n   * type (string) æç¤ºè§åçç±»åï¼å¼ä¸º "problem"ã"suggestion" æ "layout"\n   * docs (object) å¯¹ eslint æ ¸å¿è§åæ¥è¯´æ¯å¿éç\n     * description (å­ç¬¦ä¸²) æä¾è§åçç®ç­æè¿°\n     * category (string) æå®è§åå¤äºçåç±»\n     * recommended (boolean) éç½®æä»¶ä¸­ç "extends": "eslint:recommended"å±æ§æ¯å¦å¯ç¨è¯¥è§å\n     * url (string) æå®å¯ä»¥è®¿é®å®æ´ææ¡£ç urlã\n   * schemeï¼ç¨æ¥æè¿°ä¸ä¸ªè§åçéé¡¹ï¼eslint ä¼ç¨å®æ¥éªè¯éç½®ä¸­çéé¡¹æ¯å¦ææãå¨ä¼ å¥å°è§åä¸­ä¹åï¼é¿å context.options åºç°æ ææéæ³è¾å¥ã\n * create (function) è¿åä¸ä¸ªå¯¹è±¡ï¼å¶ä¸­åå«äº eslint å¨éå javascript ä»£ç çæ½è±¡è¯­æ³æ  ast (estree å®ä¹ç ast) æ¶ï¼ç¨æ¥è®¿é®èç¹çæ¹æ³ã\n   * å¦æä¸ä¸ª key æ¯ä¸ªèç¹ç±»åæ selectorï¼å¨ åä¸ éåæ æ¶ï¼eslint è°ç¨ visitor å½æ°\n   * å¦æä¸ä¸ª key æ¯ä¸ªèç¹ç±»åæ selectorï¼å¹¶å¸¦æ :exitï¼å¨éåéåºè¯¥èç¹æ¶ï¼dfsï¼ï¼eslint è°ç¨ visitor å½æ°\n   * å¦æä¸ä¸ª key æ¯ä¸ªäºä»¶åå­ï¼eslint ä¸ºä»£ç è·¯å¾åæè°ç¨ handler å½æ°\n\ntip\n\nå»ºè®®ä»ç»çä¸è¿ä¸¤ç¯ææ¡£ï¼è§£éäºä»ä¹æ¯éæ©å¨åè·¯å¾åæ selector ä»£ç è·¯å¾åæ\n\nastæ¼ç¤º ast explorer\n\n\n# san-eslint-parser\n\nsan-eslint-parser ä¼å°æä»¬.san çæä»¶åå®¹å©ç¨åæä¸ä¸ª blockï¼å¶ä¸­å©ç¨ parseroptions.parser æå®çè§£æå¨æ¥å¤ç script é¨åçåå®¹ï¼scriptä¸­å¦ææ¯ javascript ä»£ç å parseroptions.parser ä¸º @babel/eslint-parserï¼å¦ææ¯ typescript ä»£ç åä¸º @typescript-eslint/parserãstyle é¨åä¸ä¼å¤çï¼template é¨åå½ä½ html æ¥è§£æã\n\n\n\nä¸å¾æç¤ºä¸ºèªå®ä¹ parser çæç astï¼æ ¹èç¹ç type ä¸º programï¼æ ¹èç¹ç body å±æ§å­å¨äº script ä»£ç ç astï¼æ ¹èç¹ä¸ç templatebody ä¸º template é¨åç astãç±äº eslint åªä¼éåæ ¹èç¹ä»¥å body ä¸çèç¹ï¼å æ­¤å¦ææä»¬æ³ä¸º templatebody æ³¨å visitorï¼é£ä¹å¯ä»¥éè¿ services æ¥å®ç°ã\n\n----------------------------------------\n\nservicesï¼èªå®ä¹ parser ä¸º rule æä¾çæå¡ï¼æ¯æ¡è§åå¯ä»¥éè¿ context.parserservices è®¿é®å°\n\nsan-eslint-parser ä¼å¨ services å±æ§ä¸å®ä¹ definetemplatebodyvisitor æ¹æ³ï¼\n\nlet emitter = null; // åå¸è®¢éå¨\nfunction definetemplatebodyvisitor(templatebodyvisitor) {\n    let scriptvisitor = {};\n    if (!emitter) {\n        emitter = new eventemitter();\n        scriptvisitor["program"] = node => {\n            traversenodes(rootast.templatebody)\n        };\n    }\n    for (const selector of object.keys(templatebodyvisitor)) {\n        emitter.on(selector, templatebodyvisitor[selector]);\n    }\n    return scriptvisitor;\n}\n\n\nè¯¥æ¹æ³ä¸»è¦å®æäºä¸¤é¨åçå·¥ä½ï¼\n\n 1. æ¶éæ¯æ¡ rule ä¸­éå¯¹ templatebody ç visitorï¼è¯¥æ¹æ³æ¥æ¶çåæ°ä¸º templatebodyvisitorï¼è¯¥å¯¹è±¡å­å¨äºææéå¯¹ templatebody ç visitorï¼è¿äº visitor ä¼æ³¨åå°èªå®ä¹ parser åé¨çåå¸è®¢éå¨ä¸ã\n 2. è¿åä¸ä¸ªéå¯¹ script å¯¹åºç ast ç visitorï¼è¯¥ visitor ç type ä¸º programï¼æ ¹æ®ä¸æä¸­ eslint å·¥ä½åçä¸èï¼æä»¬å¯ä»¥ç¥éï¼eslint å¨éå ast çè¿ç¨ä¸­ï¼å½éå°ç±»åä¸º program çæ ¹èç¹æ¶ï¼ä¼æ§è¡è¯¥ visitorï¼å¹¶ä¸è¯¥ visitor ä¼è°ç¨èªå®ä¹ parser åé¨æ¹æ³å¯¹ templatebody å­å¨ç ast è¿è¡éåã\n\nå æ­¤ï¼æä»¬å¯ä»¥å©ç¨ä¸è¿°æ¹æ³å¨æ¯æ¡ rule ä¸­ç¼åç¸å³ç visitor æ¥å¤ç templatebody ä¸­ä¸å type ç±»åè¯­æ³èç¹ï¼å¦ä¸ä»£ç æç¤ºï¼\n\nmodule.exports = {\n    meta: {...},\n    create(context) {\n        return context.parserservices.definetemplatebodyvisitor(context, {\n            \'velement\'(node) {\n                // do something\n            },\n            \'vtext\'(node) {\n                // do something\n            }\n        });\n    }\n};\n\n\n\n# å¦ä½è°è¯\n\n 1. ä¸è½½eslint-plugin-sanæºç \n\ngit clone https://github.com/ecomfe/eslint-plugin-san.git\n\n\n 2. æ¬å°æ°å»ºä¸ªé¡¹ç®ï¼éç½®.eslintrc.js åpackage.jsonèæ¬ï¼ç¶åè¿è¡æ­£å¸¸å®è£ä¾èµeslint å eslint-plugin-sanã\n\n// eslintrc.js\nmodule.exports = {\n  extends: [\n    \'plugin:san/recommended\'\n  ],\n  rules: {}\n}\n\n// package.json\n{\n    "scripts": {\n      "test": "echo \\"error: no test specified\\" && exit 1",\n        "dev": "eslint ./test.san"\n    },\n    "dependencies": {\n      "eslint": "^7.32.0",\n      "eslint-plugin-san": "^1.0.2"\n    }\n}\n\n\n 3. npm link\n\n> è°è¯æºç å¯ä»¥ä» node_modules ä¸­å»ç´æ¥ä¿®æ¹ eslint-plugin-sanï¼ä½æ¯è¿æ ·åä¸æ¯å¨æºä»£ç ä¸æ¹çï¼æ²¡ææ¹å¨æç¤ºï¼å¦ææ³æäº¤æ°çæ¹å¨ä¼å¾éº»ç¦ã\n> \n> æä»¥æ¬å°å¼å npm æ¨¡åæ¶ä¸è¬è¦ npm link å½ä»¤ï¼ä»çä¸»è¦ä½ç¨æ¯ï¼å°æ¬å°ä¸è½½å¥½çåé¾æ¥å°é¡¹ç®ä¸­çnode_modulesä¸­å»ï¼è¿æ ·ç´æ¥å¨æºç åä¸­ä¿®æ¹å³å¯ã\n\n# è¿å¥ eslint-plugin-san ä¸­\nnpm link\n# è¿å¥é¡¹ç®ä¸­\nnpm link eslint-plugin-san\n\n\n 4. nodejs è¿ç¨è°è¯\n\n# è¿è¡ node --inspect-brk å½ä»¤\nnode --inspect-brk index.js\n# æå¼ chrome è¾å¥ chrome://inspect æå¼è°è¯é¢æ¿\n\n\nä¿®æ¹package.jsonä¸­çèæ¬\n\n> å¶å®ä¸é¢ç eslint ./test.san ä¸­ç eslintå°±æ¯ ./node_modules/.bin/eslintçç®åï¼è¿éç±äºåé¢å äºnode --inspect-brkï¼æä»¥è¿éä¸è½ç®åäºï¼è¦æè·¯å¾åå¨ã\n\n{\n  "scripts": {\n    "test": "echo \\"error: no test specified\\" && exit 1",\n    "dev": "node --inspect-brk ./node_modules/.bin/eslint ./test.san"\n  }\n}\n\n\n 5. vscodeéç½®\n\n * ä¸è½½ eslint æä»¶\n * éç½® settings.json\n\n\n# å¸¸è§ç ast èç¹ç±»å\n\nç±»åååç§°                      ä¸­æåç§°        æè¿°\nprogram                    ç¨åºä¸»ä½        æ´æ®µä»£ç çä¸»ä½\nvariabledeclaration        åéå£°æ        å£°æä¸ä¸ªåéï¼ä¾å¦ var let const\nfunctiondeclaration        å½æ°å£°æ        å£°æä¸ä¸ªå½æ°ï¼ä¾å¦ function\nexpressionstatement        è¡¨è¾¾å¼è¯­å¥       éå¸¸æ¯è°ç¨ä¸ä¸ªå½æ°ï¼ä¾å¦ console.log()\nimportdeclaration          import å£°æ   import\nexportdefaultdeclaration   export å£°æ   export default\nblockstatement             åè¯­å¥         åè£¹å¨ {} ååçä»£ç ï¼ä¾å¦ if (condition){var a = 1;}\nidentifier                 æ è¯ç¬¦         æ è¯ï¼ä¾å¦å£°æåéæ¶ var identi = 5 ä¸­ç identi\ncallexpression             è°ç¨è¡¨è¾¾å¼       éå¸¸æè°ç¨ä¸ä¸ªå½æ°ï¼ä¾å¦ console.log()\nbinaryexpression           äºè¿å¶è¡¨è¾¾å¼      éå¸¸æè¿ç®ï¼ä¾å¦ 1+2\nmemberexpression           æåè¡¨è¾¾å¼       éå¸¸æè°ç¨å¯¹è±¡çæåï¼ä¾å¦ console å¯¹è±¡ç log æå\nnewexpression              new è¡¨è¾¾å¼     éå¸¸æä½¿ç¨ new å³é®è¯\nassignmentexpression       èµå¼è¡¨è¾¾å¼       éå¸¸æå°å½æ°çè¿åå¼èµå¼ç»åé\nupdateexpression           æ´æ°è¡¨è¾¾å¼       éå¸¸ææ´æ°æåå¼ï¼ä¾å¦ i++\nobjectexpression           å¯¹è±¡è¡¨è¾¾å¼       {a: 1}\nliteral                    å­é¢é         å­é¢é\nbooleanliteral             å¸å°åå­é¢é      å¸å°å¼ï¼ä¾å¦ true false\nnumericliteral             æ°å­åå­é¢é      æ°å­ï¼ä¾å¦ 100\nstringliteral              å­ç¬¦åå­é¢é      å­ç¬¦ä¸²ï¼ä¾å¦ vansenb\nswitchcase                 case è¯­å¥     éå¸¸æ switch è¯­å¥ä¸­ç case\n\nåèï¼ç¾åº¦å·¥ç¨å¸ææææä½ å®ç°ä»£ç è§èæ£æµå·¥å·',charsets:{cjk:!0}},{title:"san-loader åç",frontmatter:{},regularPath:"/san/san-loader.html",relativePath:"san/san-loader.md",key:"v-f77072e6",path:"/san/san-loader.html",headers:[{level:2,title:"ç¬¬ä¸é¶æ®µ",slug:"ç¬¬ä¸é¶æ®µ",normalizedTitle:"ç¬¬ä¸é¶æ®µ",charIndex:502},{level:2,title:"ç¬¬äºé¶æ®µ",slug:"ç¬¬äºé¶æ®µ",normalizedTitle:"ç¬¬äºé¶æ®µ",charIndex:4959},{level:2,title:"ç¬¬ä¸é¶æ®µ",slug:"ç¬¬ä¸é¶æ®µ",normalizedTitle:"ç¬¬ä¸é¶æ®µ",charIndex:6809},{level:2,title:"ç¬¬åé¶æ®µ",slug:"ç¬¬åé¶æ®µ",normalizedTitle:"ç¬¬åé¶æ®µ",charIndex:8276}],lastUpdated:"2/16/2022, 6:55:14 PM",lastUpdatedTimestamp:1645008914e3,headersStr:"ç¬¬ä¸é¶æ®µ ç¬¬äºé¶æ®µ ç¬¬ä¸é¶æ®µ ç¬¬åé¶æ®µ",content:"# san-loader åç\n\nSan-Loader æ¯åºäº webpack çå·¥å·ï¼åè®¸å¼åèä¹¦å San åæä»¶çæ¹å¼æ¥è¿è¡ç»ä»¶å¼åãå¦æåºæ¬çä¸ä¸ª San åæä»¶ app.sanï¼\n\n<template>\n  <div>Hello {{name}}!</div>\n</template>\n\n<script>\nexport default {\n  initData() {\n    return {\n      name: 'San',\n    };\n  },\n};\n<\/script>\n\n<style>\ndiv {\n  font-size: 40px;\n}\n</style>\n\n\nSan-loader çæ ¸å¿ä½ç¨æ¯å°åæä»¶ä¸­ç templateãscriptãstyle æååºæ¥å¹¶äº¤ç»å¶ä» loader è¿è¡å¤çã\n\næ¯å¦ï¼\n\n * templateäº¤ç»html-loaderå¤ç\n * scriptäº¤ç»babel-loaderå¤ç\n * styleäº¤ç»css-loaderåstyle-loaderå¤ç\n\né£ä¹ San-loader æ¯å¦ä½å®æè¿ä¸è¿ç¨çå¢ï¼ä¸é¢åä¸ºåä¸ªé¶æ®µæ¥ä»ç»ï¼\n\n\n# ç¬¬ä¸é¶æ®µ\n\n**SanLoaderPlugin å¨ webpack æ­£å¼æå»ºä¹åä¿®æ¹åæçéç½® rulesã **\n\né¦åå¤ä¹ ä¸ä¸ compiler é©å­ å webpack Plugin çå·¥ä½åçï¼ï¼\n\n 1. è¯»åéç½®çè¿ç¨ä¸­ä¼åæ§è¡ new SanLoaderPlugin(options) åå§åä¸ä¸ª SanLoaderPlugin è·å¾å¶å®ä¾ã\n\n 2. åå§å compiler å¯¹è±¡åè°ç¨ SanLoaderPlugin.apply(compiler) ç»æä»¶å®ä¾ä¼ å¥ compiler å¯¹è±¡ã\n\n 3. æä»¶å®ä¾å¨è·åå° compiler å¯¹è±¡åï¼å°±å¯ä»¥éè¿ compiler å¯¹è±¡å»æä½ Webpackã\n\nclass SanLoaderPlugin {\n  static NS?: string;\n  apply(compiler) {\n\n    // éè¿ compiler è·ååå§éç½®çè§åå¹¶å¤ç\n    const rawRules = compiler.options.module.rules;\n    const { rules } = new RuleSet(rawRules);\n\n    // çæ clonedRules\n    const sanRule = rules[sanRuleIndex];\n    const clonedRules = rules.filter((r) => r !== sanRule).map(cloneRule);\n\n    // éè¿ compiler å¯¹è±¡æ´æ¹ rules\n    compiler.options.module.rules = [...clonedRules, ...rules];\n  }\n}\n\n\nSanLoaderPlugin ä¸»è¦åäºä»¥ä¸å ä»¶äºï¼\n\n 1. éè¿ compiler è·ååå§éç½®çè§åå¹¶è¿è¡å¤ç\n\n 2. éè¿ rules æ¥çæ cloneRules\n\n 3. éè¿ compiler å¯¹è±¡ä¿®æ¹äºåæçè§åï¼å¨ rules åé¢å ä¸äº cloneRulesï¼æ³¨æè¿éçé¡ºåºåé¢ä¼è®²å°ï¼\n\nåå¦è¿æ¯é¡¹ç®ä¸­å·²ç»éç½®å¥½çè§åï¼\n\n[\n  {\n    test: /\\.san$/,\n    use: ['san-loader-next']\n  },\n  {\n    test: /\\.js$/i,\n    loader: 'babel-loader'\n  },\n  {\n    test: /\\.css$/,\n    use: ['style-loader', 'css-loader']\n  },\n  {\n    test: /\\.html$/i,\n    use: ['html-loader']\n  }\n]\n\n\né£ä¹è¿å°±æ¯å¤çåçè§åï¼\n\n[\n  {use: ['babel-loader'], resource: Æ, resourceQuery: Æ}\n  {use: ['style-loader', 'css-loader'], resource: Æ,  resourceQuery: Æ}\n  {use: ['html-loader'], resource: Æ,  resourceQuery: Æ}\n\n  {use: ['san-loader-next'], resource: Æ}\n  {use: ['babel-loader'], resource: Æ}\n  {use: ['style-loader', 'css-loader'], resource: Æ}\n  {use: ['html-loader'], resource: Æ}\n]\n\n\nå¶ä¸­ååæ¡æ¯åæ¥çè§åï¼åªæ¯å¨new RuleSeté¶æ®µæ test å­æ®µè§èæäº resource å­æ®µï¼\n\n{\n    use: ['babel-loader'],\n    test: /\\.js$/\n}\n\n// ç­ä»·äº\n{\n    use: ['babel-loader'],\n    resource: {\n      test: /\\.js$/\n    }\n}\n\n\nåä¸æ¡æ¯æ°å¢çcloneRulesï¼é£ä¹ä¸ºä»ä¹è¦æ·»å è¿äºè§åå¢ï¼å¶å®æ¯å ä¸ºæä»¬çç®çæ¯è®© san åæä»¶ä¸­çè¯­è¨åä¹è½è¢«å¯¹åºè§åæè¯å«ç¶åäº¤ç»å¯¹åºç loader å¤çï¼æ¯å¦ script ä»£ç åéè¦è¢« babel-loader æ¥å¤çãæä»¥éè¦æé¤äº .san ä¹å¤å¶ä»çè§åå¤å¶ä¸éæ·»å ä¸äºå±æ§æ¹æ³ï¼è®©å®ä»¬è½å¤è¯å« san æä»¶ä¸­çä»£ç åã\n\nè¿ééè¦æ³¨æå¦ä¸ä¸ªç¨æ¥å¹éèµæºæ¥è¯¢ï¼ä»é®å·å¼å§ï¼çå­æ®µï¼ resourceQuery\n\nrules: [\n  {\n    test: /\\.css$/,\n    resourceQuery: /inline/,\n    use: 'url-loader',\n  },\n],\n  \n// å¯ä»¥å¹é\nimport Foo from './foo.css?inline'\n\n\nresource å resourceQuery å·ä½å®ä¹å¨ cloneRule æ¹æ³ä¸­ï¼\n\nfunction cloneRule(rule) {\n  const { resource, resourceQuery } = rule;\n  let currentResource;\n  const res = Object.assign({}, rule, {\n    resource: {\n      test: (resource) => {\n        currentResource = resource;\n        return true;\n      },\n    },\n    resourceQuery: (query) => {\n      // é¦åï¼ç»è¿san-loaderæåä¹åçstyleãtemplateãscriptä¼åæï¼\n      // xxx.san?san=&lang=js&type=script\n      // lang=js/css/less/html...ï¼æ¥èªelementçlang attribute\n      const parsed = qs.parse(query.slice(1));\n      // è·³è¿ä¸æ¯san=çï¼å³ä¸æ¯san-loaderæåçæä»¶\n      if (parsed.san == null) {\n        return false;\n      }\n      // è·³è¿san-loaderæååï¼æ²¡ælangçï¼lang=js/css/less/html...\n      if (resource && parsed.lang == null) {\n        return false;\n      }\n      // å¾å°ä¸ä¸ªåçuriï¼ç¨äºå¤æ­ä¹åçruleæ¯å¦å¹é\n      // /src/App.san.js\n      // /src/App.san.html\n      // /src/App.san.css\n      const fakeResourcePath = `${currentResource}.${parsed.lang}`;\n\n      // å¤å¶ä¹åçloader ruleï¼è§åå¹éä¸ä¸çï¼ä¾å¦babelçtest/\\.js$/ï¼å¦æå¹éä¸ä¸ï¼åè·³è¿\n      // jsæä»¶ï¼åxxx.jsï¼resource(xxx.js) => true => falseï¼åç»§ç»­\n      if (resource && !resource(fakeResourcePath)) {\n        return false;\n      }\n      // åä¸ï¼å¹éçæ¯babelåäºresourceQueryçæåµ\n      if (resourceQuery && !resourceQuery(query)) {\n        return false;\n      }\n      if (parsed.type === 'style' && parsed.module !== undefined) {\n        const conf = findMatchedLoader(\n          'css-loader',\n          rule,\n          currentResource,\n          resourceQuery\n        );\n        // style ä¼ç»è¿å¾å¤è§åï¼æ£æ¥ css-loader çé£ä¸ä¸ª\n        if (conf && (!conf.options || !conf.options.modules)) {\n          throw new Error(\n            `css-loader#module not set, required by ${currentResource}${query}`\n          );\n        }\n      }\n      // ç»è¿è¿æ»¤ï¼åè¿ä¸ªbabelçruleï¼å¿é¡»æ¯query: san=&lang=js æä¼è¿\n      // åæ¶è·babelçruleå¿é¡»resource/resourceQueryæ¯å¹éä¸ç\n      // è¿æ ·å¯ä»¥é¿åç»san-loaderå¤çåçæä»¶åç¬éç½®åç»­loader\n      // å®ç°å±äº«é¡¹ç®çloader rule\n      return true;\n    },\n  });\n\n  if (rule.rules) {\n    res.rules = rule.rules.map(cloneRule);\n  }\n\n  if (rule.oneOf) {\n    res.oneOf = rule.oneOf.map(cloneRule);\n  }\n\n  return res;\n}\n\n\næ¯å¦åæ¬ç.jsè§åå¯ä»¥è¯å« .js ç»å°¾çæä»¶ï¼clone åçè§åå ä¸äº resourcequery å°±ä¼è¯å« *.san?san&type=script&lang=js è¿æ ·çè¯­å¥\n\n// åæ\n{ test: /\\.js$/i, loader: 'babel-loader'}\n\n// clone å\n{use: ['babel-loader'], resource: Æ, resourceQuery: Æ}\n\n\nå°è¿éï¼webpack æ­£å¼æå»ºä¹åçåå¤å·¥ä½å°±åå¥½äºï¼æä»¬éè¿æä»¶ä¿®æ¹äºè§åçéç½®ã\n\n\n# ç¬¬äºé¶æ®µ\n\nsan-loader ç¬¬ä¸æ¬¡å¤ç San åæä»¶ã\n\nwebpack ä»å¥å£æä»¶åºåï¼å½éå° app.san æä»¶æ¶ï¼ä¼å¹éå°è§åä¸­çï¼\n\n{\n  test: /\\.san$/,\n  use: ['san-loader-next']\n}\n\n\nå°è¿éæä»¬ç¬¬ä¸æ¬¡è°ç¨ san-loader æ¥å¤ç san åæä»¶ï¼å·ä½çå¤çæµç¨ä¸ºï¼\n\næºç å°åï¼https://github.com/wanwu/san-loader/blob/next/src/loader.ts#L62\n\nconst shortFilePath = path\n  .relative(sourceRoot, filename)\n  .replace(/^(\\.\\.[\\/\\\\])+/, '')\n  .replace(/\\\\/g, '/');\nconst scopeId = hash(shortFilePath);\n\n// è§£æ SFC\nconst descriptor = parseSFC({\n  source,\n  filename,\n  sourceRoot,\n  needMap: true,\n});\n\nsetDescriptor(filename, descriptor);\n\n// çæå¥å£æä»¶\nconst templateImport = generateTemplateImport(descriptor, scopeId, options);\nconst stylesImport = generateStyleImport(descriptor, scopeId, options);\nconst scriptImport = generateScriptImport(descriptor, scopeId, options);\n\n// normalize.js çç»å¯¹è·¯å¾\nconst normalizePath = stringifyRequest(\n  this,\n  require.resolve('./normalize.js')\n);\n\nconst importStr = `import normalize from ${normalizePath};`\nconst exportStr = 'export default normalize(script, template, $style);'\n\nconst output = [\n  importStr,\n  scriptImport,\n  templateImport,\n  stylesImport,\n  exportStr,\n  '/* san-hmr component */',\n];\n\nthis.callback(null, output.join('\\n'));\n\n\nè¿éä¸»è¦åäºä¸ä»¶äºï¼\n\n 1. è°ç¨ san-sfc-compiler åºç parseSFC æ¹æ³æ¥è§£ææä»¶åå®¹\n\n 2. çæ import è¯­å¥\n\n 3. ä½¿ç¨ this.callback è¿åç»æç» webpack\n\nå¤çåçç»æå¦ä¸ï¼\n\nimport normalize from \"../../../dist/normalize.js\";\nimport script from \"/src/App.san?san&type=script&id=472cf1bd&lang=js\";\nexport * from \"/src/App.san?san&type=script&id=472cf1bd&lang=js\";\nimport template from \"src/App.san?san&type=template&id=472cf1bd&lang=html\";\n\nvar $style = [];\nimport \"/src/App.san?san&type=style&index=0&id=472cf1bd&lang=css\";$style = [];\n\nexport default normalize(script, template, $style);\n/* san-hmr component */\n\n\nå°è¿é san-loader çç¬¬ä¸æ¬¡å¤çå°±ç»æäºï¼ä¸é¢æä»¬æ¥ä»ç»ä¸ºä»ä¹è¦çæè¿ä¹å¤ import è¯­å¥ä»¥åè·¯å¾ä¸­ç?san&type=script&id=472cf1bd&lang=js çä½ç¨æ¯ä»ä¹ï¼\n\n\n# ç¬¬ä¸é¶æ®µ\n\nimport è¯­å¥å¹éè§å\n\nå½ç¬¬äºé¶æ®µçç»æè¿åç» webpack æ¶ï¼webpack ä¼éåå½åæ¨¡åçä¾èµï¼å³æ¯ä¸æ¡ import è¯­å¥ï¼å¯¹äºæ¯ä¸æ¡import è¯­å¥åéå rules è¿è¡è§åå¹éã\n\næ¯å¦å½éå° import script from \"/src/App.san?san&type=script&id=472cf1bd&lang=js\"; è¿æ¡è¯­å¥æ¶ï¼å¨webpack ä¸­çå¤çå¦ä¸ï¼\n\n/**\n  data: è¯­å¥ä¿¡æ¯\n    resource: \"/src/App.san\"\n    resourceQuery: \"?san&type=template&id=472cf1bd&lang=html\"\n\n  ruleï¼éåå°çè§å\n\n  resultï¼å­å¨ loader\n*/\n\n_run(data, rule, result) {\n  // test conditions\n  if (rule.resource && !data.resource) return false;\n  if (rule.resourceQuery && !data.resourceQuery) return false;\n  if (rule.resource && !rule.resource(data.resource)) return false;\n  if (\n    data.resourceQuery &&\n    rule.resourceQuery &&\n    !rule.resourceQuery(data.resourceQuery)\n  ) {\n    return false;\n  }\n\n  // å° loader æ·»å å° result ä¸­\n  if (rule.use) {\n    const process = use => {\n      if (typeof use === \"function\") {\n        process(use(data));\n      } else if (Array.isArray(use)) {\n        use.forEach(process);\n      } else {\n        result.push({\n          type: \"use\",\n          value: use,\n          enforce: rule.enforce\n        });\n      }\n    };\n    process(rule.use);\n  }\n\n  if (rule.rules) {\n    for (let i = 0; i < rule.rules.length; i++) {\n      this._run(data, rule.rules[i], result);\n    }\n  }\n\n  return true;\n}\n\n\næç§è§åçååé¡ºåºï¼\n\n * ?san&type=script&id=472cf1bd&lang=js ä¼è¢« cloneRules è¯å«ï¼å¯¹åºç loader æ¯ babel-loader\n * /src/App.san ä¼è¢« /\\.san$/è§åè¯å«ï¼å¯¹åºç loader æ¯ san-loader-next\n\nresult éä¸ª push è¿å»åçç»æä¸º ['babel-loader', 'san-loader-next']\n\n\n# ç¬¬åé¶æ®µ\n\næåä»£ç åäº¤ç»å¯¹åº loader å¤ç\n\næç§ loader ä»åååçé¡ºåºï¼é¦åä¼ç»è¿ san-loader å¤çï¼ç¶ååäº¤ç» babel-loaderï¼è¿éä¹å°±æ¯ç¬¬äºæ¬¡è¿å¥san-loaderï¼å³æ ¹æ® query.type æ¥æåå¯¹åºçä»£ç åï¼\n\nconst userOptions = getOptions(this);\nconst options: Options = { ...defaultOptions, ...userOptions };\n\nconst filename = this.resourcePath;\nconst sourceRoot = this.context || process.cwd();\nconst rawQuery = this.resourceQuery.slice(1);\nconst query = qs.parse(rawQuery);\n\nif (query && 'san' in query) {\n  const descriptor = getDescriptor(filename);\n  let result = { code: '', map: {} };\n\n  if (query.type === 'template') {\n    const hasScoped = descriptor!.styles.some((s) => s.scoped);\n    result = transformTemplate(\n      descriptor?.template!,\n      rawQuery,\n      filename,\n      options,\n      query,\n      hasScoped\n    );\n  } else if (query.type === 'style') {\n      result = transformStyle(\n        descriptor?.styles!,\n        rawQuery,\n        filename,\n        options,\n        query\n      );\n  } else {\n     result = {\n       code: descriptor?.script!.content!,\n       map: descriptor?.script?.map,\n     };\n  }\n  if (this.sourceMap) {\n     this.callback(null, result.code, result.map);\n  } else {\n     this.callback(null, result.code);\n  }\n}\n\n\næååçç»æï¼\n\n// rawQuery ä¸º san&type=script&id=472cf1bd&lang=js\n{code: \"\\n\\n\\n\\n\\nexport default {\\n  initData() {\\n    return {\\n      name: 'San',\\n    };\\n  },\\n};\\n\", map: {â¦}}\n\n// rawQuery ä¸º san&type=template&id=472cf1bd&lang=html\n{code: '\\n  <div>Hello {{name}}!</div>\\n', map: {â¦}}\n\n// rawQuery ä¸º san&type=style&index=0&id=472cf1bd&lang=css\n{code: '\\ndiv {\\n  font-size: 40px;\\n}\\n', map: null}\n\n\næåå°æååçä»£ç åäº¤ç»å¶ä» loader è¿è¡å¤çï¼å°è¿é san-loader æ´ä½çå·¥ä½æµç¨å°±ç»æäºã",normalizedContent:"# san-loader åç\n\nsan-loader æ¯åºäº webpack çå·¥å·ï¼åè®¸å¼åèä¹¦å san åæä»¶çæ¹å¼æ¥è¿è¡ç»ä»¶å¼åãå¦æåºæ¬çä¸ä¸ª san åæä»¶ app.sanï¼\n\n<template>\n  <div>hello {{name}}!</div>\n</template>\n\n<script>\nexport default {\n  initdata() {\n    return {\n      name: 'san',\n    };\n  },\n};\n<\/script>\n\n<style>\ndiv {\n  font-size: 40px;\n}\n</style>\n\n\nsan-loader çæ ¸å¿ä½ç¨æ¯å°åæä»¶ä¸­ç templateãscriptãstyle æååºæ¥å¹¶äº¤ç»å¶ä» loader è¿è¡å¤çã\n\næ¯å¦ï¼\n\n * templateäº¤ç»html-loaderå¤ç\n * scriptäº¤ç»babel-loaderå¤ç\n * styleäº¤ç»css-loaderåstyle-loaderå¤ç\n\né£ä¹ san-loader æ¯å¦ä½å®æè¿ä¸è¿ç¨çå¢ï¼ä¸é¢åä¸ºåä¸ªé¶æ®µæ¥ä»ç»ï¼\n\n\n# ç¬¬ä¸é¶æ®µ\n\n**sanloaderplugin å¨ webpack æ­£å¼æå»ºä¹åä¿®æ¹åæçéç½® rulesã **\n\né¦åå¤ä¹ ä¸ä¸ compiler é©å­ å webpack plugin çå·¥ä½åçï¼ï¼\n\n 1. è¯»åéç½®çè¿ç¨ä¸­ä¼åæ§è¡ new sanloaderplugin(options) åå§åä¸ä¸ª sanloaderplugin è·å¾å¶å®ä¾ã\n\n 2. åå§å compiler å¯¹è±¡åè°ç¨ sanloaderplugin.apply(compiler) ç»æä»¶å®ä¾ä¼ å¥ compiler å¯¹è±¡ã\n\n 3. æä»¶å®ä¾å¨è·åå° compiler å¯¹è±¡åï¼å°±å¯ä»¥éè¿ compiler å¯¹è±¡å»æä½ webpackã\n\nclass sanloaderplugin {\n  static ns?: string;\n  apply(compiler) {\n\n    // éè¿ compiler è·ååå§éç½®çè§åå¹¶å¤ç\n    const rawrules = compiler.options.module.rules;\n    const { rules } = new ruleset(rawrules);\n\n    // çæ clonedrules\n    const sanrule = rules[sanruleindex];\n    const clonedrules = rules.filter((r) => r !== sanrule).map(clonerule);\n\n    // éè¿ compiler å¯¹è±¡æ´æ¹ rules\n    compiler.options.module.rules = [...clonedrules, ...rules];\n  }\n}\n\n\nsanloaderplugin ä¸»è¦åäºä»¥ä¸å ä»¶äºï¼\n\n 1. éè¿ compiler è·ååå§éç½®çè§åå¹¶è¿è¡å¤ç\n\n 2. éè¿ rules æ¥çæ clonerules\n\n 3. éè¿ compiler å¯¹è±¡ä¿®æ¹äºåæçè§åï¼å¨ rules åé¢å ä¸äº clonerulesï¼æ³¨æè¿éçé¡ºåºåé¢ä¼è®²å°ï¼\n\nåå¦è¿æ¯é¡¹ç®ä¸­å·²ç»éç½®å¥½çè§åï¼\n\n[\n  {\n    test: /\\.san$/,\n    use: ['san-loader-next']\n  },\n  {\n    test: /\\.js$/i,\n    loader: 'babel-loader'\n  },\n  {\n    test: /\\.css$/,\n    use: ['style-loader', 'css-loader']\n  },\n  {\n    test: /\\.html$/i,\n    use: ['html-loader']\n  }\n]\n\n\né£ä¹è¿å°±æ¯å¤çåçè§åï¼\n\n[\n  {use: ['babel-loader'], resource: Æ, resourcequery: Æ}\n  {use: ['style-loader', 'css-loader'], resource: Æ,  resourcequery: Æ}\n  {use: ['html-loader'], resource: Æ,  resourcequery: Æ}\n\n  {use: ['san-loader-next'], resource: Æ}\n  {use: ['babel-loader'], resource: Æ}\n  {use: ['style-loader', 'css-loader'], resource: Æ}\n  {use: ['html-loader'], resource: Æ}\n]\n\n\nå¶ä¸­ååæ¡æ¯åæ¥çè§åï¼åªæ¯å¨new ruleseté¶æ®µæ test å­æ®µè§èæäº resource å­æ®µï¼\n\n{\n    use: ['babel-loader'],\n    test: /\\.js$/\n}\n\n// ç­ä»·äº\n{\n    use: ['babel-loader'],\n    resource: {\n      test: /\\.js$/\n    }\n}\n\n\nåä¸æ¡æ¯æ°å¢çclonerulesï¼é£ä¹ä¸ºä»ä¹è¦æ·»å è¿äºè§åå¢ï¼å¶å®æ¯å ä¸ºæä»¬çç®çæ¯è®© san åæä»¶ä¸­çè¯­è¨åä¹è½è¢«å¯¹åºè§åæè¯å«ç¶åäº¤ç»å¯¹åºç loader å¤çï¼æ¯å¦ script ä»£ç åéè¦è¢« babel-loader æ¥å¤çãæä»¥éè¦æé¤äº .san ä¹å¤å¶ä»çè§åå¤å¶ä¸éæ·»å ä¸äºå±æ§æ¹æ³ï¼è®©å®ä»¬è½å¤è¯å« san æä»¶ä¸­çä»£ç åã\n\nè¿ééè¦æ³¨æå¦ä¸ä¸ªç¨æ¥å¹éèµæºæ¥è¯¢ï¼ä»é®å·å¼å§ï¼çå­æ®µï¼ resourcequery\n\nrules: [\n  {\n    test: /\\.css$/,\n    resourcequery: /inline/,\n    use: 'url-loader',\n  },\n],\n  \n// å¯ä»¥å¹é\nimport foo from './foo.css?inline'\n\n\nresource å resourcequery å·ä½å®ä¹å¨ clonerule æ¹æ³ä¸­ï¼\n\nfunction clonerule(rule) {\n  const { resource, resourcequery } = rule;\n  let currentresource;\n  const res = object.assign({}, rule, {\n    resource: {\n      test: (resource) => {\n        currentresource = resource;\n        return true;\n      },\n    },\n    resourcequery: (query) => {\n      // é¦åï¼ç»è¿san-loaderæåä¹åçstyleãtemplateãscriptä¼åæï¼\n      // xxx.san?san=&lang=js&type=script\n      // lang=js/css/less/html...ï¼æ¥èªelementçlang attribute\n      const parsed = qs.parse(query.slice(1));\n      // è·³è¿ä¸æ¯san=çï¼å³ä¸æ¯san-loaderæåçæä»¶\n      if (parsed.san == null) {\n        return false;\n      }\n      // è·³è¿san-loaderæååï¼æ²¡ælangçï¼lang=js/css/less/html...\n      if (resource && parsed.lang == null) {\n        return false;\n      }\n      // å¾å°ä¸ä¸ªåçuriï¼ç¨äºå¤æ­ä¹åçruleæ¯å¦å¹é\n      // /src/app.san.js\n      // /src/app.san.html\n      // /src/app.san.css\n      const fakeresourcepath = `${currentresource}.${parsed.lang}`;\n\n      // å¤å¶ä¹åçloader ruleï¼è§åå¹éä¸ä¸çï¼ä¾å¦babelçtest/\\.js$/ï¼å¦æå¹éä¸ä¸ï¼åè·³è¿\n      // jsæä»¶ï¼åxxx.jsï¼resource(xxx.js) => true => falseï¼åç»§ç»­\n      if (resource && !resource(fakeresourcepath)) {\n        return false;\n      }\n      // åä¸ï¼å¹éçæ¯babelåäºresourcequeryçæåµ\n      if (resourcequery && !resourcequery(query)) {\n        return false;\n      }\n      if (parsed.type === 'style' && parsed.module !== undefined) {\n        const conf = findmatchedloader(\n          'css-loader',\n          rule,\n          currentresource,\n          resourcequery\n        );\n        // style ä¼ç»è¿å¾å¤è§åï¼æ£æ¥ css-loader çé£ä¸ä¸ª\n        if (conf && (!conf.options || !conf.options.modules)) {\n          throw new error(\n            `css-loader#module not set, required by ${currentresource}${query}`\n          );\n        }\n      }\n      // ç»è¿è¿æ»¤ï¼åè¿ä¸ªbabelçruleï¼å¿é¡»æ¯query: san=&lang=js æä¼è¿\n      // åæ¶è·babelçruleå¿é¡»resource/resourcequeryæ¯å¹éä¸ç\n      // è¿æ ·å¯ä»¥é¿åç»san-loaderå¤çåçæä»¶åç¬éç½®åç»­loader\n      // å®ç°å±äº«é¡¹ç®çloader rule\n      return true;\n    },\n  });\n\n  if (rule.rules) {\n    res.rules = rule.rules.map(clonerule);\n  }\n\n  if (rule.oneof) {\n    res.oneof = rule.oneof.map(clonerule);\n  }\n\n  return res;\n}\n\n\næ¯å¦åæ¬ç.jsè§åå¯ä»¥è¯å« .js ç»å°¾çæä»¶ï¼clone åçè§åå ä¸äº resourcequery å°±ä¼è¯å« *.san?san&type=script&lang=js è¿æ ·çè¯­å¥\n\n// åæ\n{ test: /\\.js$/i, loader: 'babel-loader'}\n\n// clone å\n{use: ['babel-loader'], resource: Æ, resourcequery: Æ}\n\n\nå°è¿éï¼webpack æ­£å¼æå»ºä¹åçåå¤å·¥ä½å°±åå¥½äºï¼æä»¬éè¿æä»¶ä¿®æ¹äºè§åçéç½®ã\n\n\n# ç¬¬äºé¶æ®µ\n\nsan-loader ç¬¬ä¸æ¬¡å¤ç san åæä»¶ã\n\nwebpack ä»å¥å£æä»¶åºåï¼å½éå° app.san æä»¶æ¶ï¼ä¼å¹éå°è§åä¸­çï¼\n\n{\n  test: /\\.san$/,\n  use: ['san-loader-next']\n}\n\n\nå°è¿éæä»¬ç¬¬ä¸æ¬¡è°ç¨ san-loader æ¥å¤ç san åæä»¶ï¼å·ä½çå¤çæµç¨ä¸ºï¼\n\næºç å°åï¼https://github.com/wanwu/san-loader/blob/next/src/loader.ts#l62\n\nconst shortfilepath = path\n  .relative(sourceroot, filename)\n  .replace(/^(\\.\\.[\\/\\\\])+/, '')\n  .replace(/\\\\/g, '/');\nconst scopeid = hash(shortfilepath);\n\n// è§£æ sfc\nconst descriptor = parsesfc({\n  source,\n  filename,\n  sourceroot,\n  needmap: true,\n});\n\nsetdescriptor(filename, descriptor);\n\n// çæå¥å£æä»¶\nconst templateimport = generatetemplateimport(descriptor, scopeid, options);\nconst stylesimport = generatestyleimport(descriptor, scopeid, options);\nconst scriptimport = generatescriptimport(descriptor, scopeid, options);\n\n// normalize.js çç»å¯¹è·¯å¾\nconst normalizepath = stringifyrequest(\n  this,\n  require.resolve('./normalize.js')\n);\n\nconst importstr = `import normalize from ${normalizepath};`\nconst exportstr = 'export default normalize(script, template, $style);'\n\nconst output = [\n  importstr,\n  scriptimport,\n  templateimport,\n  stylesimport,\n  exportstr,\n  '/* san-hmr component */',\n];\n\nthis.callback(null, output.join('\\n'));\n\n\nè¿éä¸»è¦åäºä¸ä»¶äºï¼\n\n 1. è°ç¨ san-sfc-compiler åºç parsesfc æ¹æ³æ¥è§£ææä»¶åå®¹\n\n 2. çæ import è¯­å¥\n\n 3. ä½¿ç¨ this.callback è¿åç»æç» webpack\n\nå¤çåçç»æå¦ä¸ï¼\n\nimport normalize from \"../../../dist/normalize.js\";\nimport script from \"/src/app.san?san&type=script&id=472cf1bd&lang=js\";\nexport * from \"/src/app.san?san&type=script&id=472cf1bd&lang=js\";\nimport template from \"src/app.san?san&type=template&id=472cf1bd&lang=html\";\n\nvar $style = [];\nimport \"/src/app.san?san&type=style&index=0&id=472cf1bd&lang=css\";$style = [];\n\nexport default normalize(script, template, $style);\n/* san-hmr component */\n\n\nå°è¿é san-loader çç¬¬ä¸æ¬¡å¤çå°±ç»æäºï¼ä¸é¢æä»¬æ¥ä»ç»ä¸ºä»ä¹è¦çæè¿ä¹å¤ import è¯­å¥ä»¥åè·¯å¾ä¸­ç?san&type=script&id=472cf1bd&lang=js çä½ç¨æ¯ä»ä¹ï¼\n\n\n# ç¬¬ä¸é¶æ®µ\n\nimport è¯­å¥å¹éè§å\n\nå½ç¬¬äºé¶æ®µçç»æè¿åç» webpack æ¶ï¼webpack ä¼éåå½åæ¨¡åçä¾èµï¼å³æ¯ä¸æ¡ import è¯­å¥ï¼å¯¹äºæ¯ä¸æ¡import è¯­å¥åéå rules è¿è¡è§åå¹éã\n\næ¯å¦å½éå° import script from \"/src/app.san?san&type=script&id=472cf1bd&lang=js\"; è¿æ¡è¯­å¥æ¶ï¼å¨webpack ä¸­çå¤çå¦ä¸ï¼\n\n/**\n  data: è¯­å¥ä¿¡æ¯\n    resource: \"/src/app.san\"\n    resourcequery: \"?san&type=template&id=472cf1bd&lang=html\"\n\n  ruleï¼éåå°çè§å\n\n  resultï¼å­å¨ loader\n*/\n\n_run(data, rule, result) {\n  // test conditions\n  if (rule.resource && !data.resource) return false;\n  if (rule.resourcequery && !data.resourcequery) return false;\n  if (rule.resource && !rule.resource(data.resource)) return false;\n  if (\n    data.resourcequery &&\n    rule.resourcequery &&\n    !rule.resourcequery(data.resourcequery)\n  ) {\n    return false;\n  }\n\n  // å° loader æ·»å å° result ä¸­\n  if (rule.use) {\n    const process = use => {\n      if (typeof use === \"function\") {\n        process(use(data));\n      } else if (array.isarray(use)) {\n        use.foreach(process);\n      } else {\n        result.push({\n          type: \"use\",\n          value: use,\n          enforce: rule.enforce\n        });\n      }\n    };\n    process(rule.use);\n  }\n\n  if (rule.rules) {\n    for (let i = 0; i < rule.rules.length; i++) {\n      this._run(data, rule.rules[i], result);\n    }\n  }\n\n  return true;\n}\n\n\næç§è§åçååé¡ºåºï¼\n\n * ?san&type=script&id=472cf1bd&lang=js ä¼è¢« clonerules è¯å«ï¼å¯¹åºç loader æ¯ babel-loader\n * /src/app.san ä¼è¢« /\\.san$/è§åè¯å«ï¼å¯¹åºç loader æ¯ san-loader-next\n\nresult éä¸ª push è¿å»åçç»æä¸º ['babel-loader', 'san-loader-next']\n\n\n# ç¬¬åé¶æ®µ\n\næåä»£ç åäº¤ç»å¯¹åº loader å¤ç\n\næç§ loader ä»åååçé¡ºåºï¼é¦åä¼ç»è¿ san-loader å¤çï¼ç¶ååäº¤ç» babel-loaderï¼è¿éä¹å°±æ¯ç¬¬äºæ¬¡è¿å¥san-loaderï¼å³æ ¹æ® query.type æ¥æåå¯¹åºçä»£ç åï¼\n\nconst useroptions = getoptions(this);\nconst options: options = { ...defaultoptions, ...useroptions };\n\nconst filename = this.resourcepath;\nconst sourceroot = this.context || process.cwd();\nconst rawquery = this.resourcequery.slice(1);\nconst query = qs.parse(rawquery);\n\nif (query && 'san' in query) {\n  const descriptor = getdescriptor(filename);\n  let result = { code: '', map: {} };\n\n  if (query.type === 'template') {\n    const hasscoped = descriptor!.styles.some((s) => s.scoped);\n    result = transformtemplate(\n      descriptor?.template!,\n      rawquery,\n      filename,\n      options,\n      query,\n      hasscoped\n    );\n  } else if (query.type === 'style') {\n      result = transformstyle(\n        descriptor?.styles!,\n        rawquery,\n        filename,\n        options,\n        query\n      );\n  } else {\n     result = {\n       code: descriptor?.script!.content!,\n       map: descriptor?.script?.map,\n     };\n  }\n  if (this.sourcemap) {\n     this.callback(null, result.code, result.map);\n  } else {\n     this.callback(null, result.code);\n  }\n}\n\n\næååçç»æï¼\n\n// rawquery ä¸º san&type=script&id=472cf1bd&lang=js\n{code: \"\\n\\n\\n\\n\\nexport default {\\n  initdata() {\\n    return {\\n      name: 'san',\\n    };\\n  },\\n};\\n\", map: {â¦}}\n\n// rawquery ä¸º san&type=template&id=472cf1bd&lang=html\n{code: '\\n  <div>hello {{name}}!</div>\\n', map: {â¦}}\n\n// rawquery ä¸º san&type=style&index=0&id=472cf1bd&lang=css\n{code: '\\ndiv {\\n  font-size: 40px;\\n}\\n', map: null}\n\n\næåå°æååçä»£ç åäº¤ç»å¶ä» loader è¿è¡å¤çï¼å°è¿é san-loader æ´ä½çå·¥ä½æµç¨å°±ç»æäºã",charsets:{cjk:!0}},{title:"sanæ¡æ¶",frontmatter:{title:"sanæ¡æ¶",date:"2021-07-13T11:27:54.000Z",categories:"San"},regularPath:"/san/san.html",relativePath:"san/san.md",key:"v-4dfcdb42",path:"/san/san.html",headers:[{level:2,title:"san-store",slug:"san-store",normalizedTitle:"san-store",charIndex:12},{level:3,title:"store",slug:"store",normalizedTitle:"store",charIndex:16},{level:3,title:"getState",slug:"getstate",normalizedTitle:"getstate",charIndex:976},{level:3,title:"Action",slug:"action",normalizedTitle:"action",charIndex:1055},{level:3,title:"dispath",slug:"dispath",normalizedTitle:"dispath",charIndex:478},{level:3,title:"connect",slug:"connect",normalizedTitle:"connect",charIndex:2050},{level:2,title:"san-update",slug:"san-update",normalizedTitle:"san-update",charIndex:25},{level:2,title:"React Native",slug:"react-native",normalizedTitle:"react native",charIndex:3064},{level:3,title:"å ç§è·¨å¹³å°æ¡æ¶çæ¯è¾",slug:"å ç§è·¨å¹³å°æ¡æ¶çæ¯è¾",normalizedTitle:"å ç§è·¨å¹³å°æ¡æ¶çæ¯è¾",charIndex:3146},{level:3,title:"ç§»å¨ App çå¼åæ¨¡å¼",slug:"ç§»å¨-app-çå¼åæ¨¡å¼",normalizedTitle:"ç§»å¨ app çå¼åæ¨¡å¼",charIndex:3350},{level:3,title:"RN çä¼å¿",slug:"rn-çä¼å¿",normalizedTitle:"rn çä¼å¿",charIndex:3803},{level:3,title:"RNçä¸è¶³",slug:"rnçä¸è¶³",normalizedTitle:"rnçä¸è¶³",charIndex:3978},{level:3,title:"è¿è¡åç",slug:"è¿è¡åç",normalizedTitle:"è¿è¡åç",charIndex:4118},{level:3,title:"san-native",slug:"san-native",normalizedTitle:"san-native",charIndex:39},{level:3,title:"ä¸ºä»ä¹ä¸ç¨ rn ç­å¶ä»æ¹æ¡",slug:"ä¸ºä»ä¹ä¸ç¨-rn-ç­å¶ä»æ¹æ¡",normalizedTitle:"ä¸ºä»ä¹ä¸ç¨ rn ç­å¶ä»æ¹æ¡",charIndex:4722},{level:2,title:"sançå½å¨æ",slug:"sançå½å¨æ",normalizedTitle:"sançå½å¨æ",charIndex:53}],lastUpdated:"11/26/2021, 9:58:23 AM",lastUpdatedTimestamp:1637891903e3,headersStr:"san-store store getState Action dispath connect san-update React Native å ç§è·¨å¹³å°æ¡æ¶çæ¯è¾ ç§»å¨ App çå¼åæ¨¡å¼ RN çä¼å¿ RNçä¸è¶³ è¿è¡åç san-native ä¸ºä»ä¹ä¸ç¨ rn ç­å¶ä»æ¹æ¡ sançå½å¨æ",content:"# sanæ¡æ¶\n\n * san-store\n * san-update\n * san-native\n * sançå½å¨æ\n\n\n# san-store\n\nsan-storeæ¯sanæ¡æ¶ç¨äºç¶æç®¡ççå·¥å·ï¼åvuexç±»ä¼¼ï¼ä½æ¯è¿æ¯æåºå«çï¼é¦åå¤ä¹ ä¸ä¸vue\n\n> vueä¸­æ´æ¹stateçæ¹å¼æä¸åªæä¸ä¸ªï¼ mutationï¼ç¨commit æ¥è§¦åï¼éå¶æ¯åªè½åæ­¥ä¿®æ¹ã\n> \n> æ³è¦å¼æ­¥éè¦dispatch ä¸ä¸ª actionï¼actionä¸­åè§¦åcommitä¿®æ¹stateï¼actionä¸­å¯ä»¥åå¼æ­¥æä½ã\n\nconst store = new Vuex.Store({\n  state: {\n    count: 0\n  },\n  mutations: {\n    increment (state) {\n      state.count++\n    }\n  },\n  actions: {\n    increment (context) {\n      context.commit('increment')\n    }\n  }\n})\n// éè¿ dispathch è§¦å\nstore.dispatch('increment')\n\n\n\n\nSan-storeä¸­åä¸ä¼æmutationåactionä¹åï¼åªå­å¨actionï¼éè¿dispatchæ¥è§¦åã\n\n\n\n\n# store\n\nstoreçæ¦å¿µåvuexä¸­ä¸æ ·ï¼é£ä¹ä¸ä¸ªåå§åçstoreæ¯ä»ä¹æ ·çå¢ï¼ï¼san-updateåºå®ç°äºä¸ä¸ªæ´æ°å¯¹è±¡çå½æ°ï¼åæ¶éæ´æ°è¿ç¨è¾åºæ°æ§å¯¹è±¡çå·®å¼ç»æï¼\n\nimport {Store} from 'san-store';\nimport {builder} from 'san-update';\n\nlet myStore = new Store({\n    initData: {\n        user: {\n            name: 'your name'\n        }\n    },\n\n    actions: {\n        changeUserName(name) {\n            return builder().set('user.name', name);\n        }\n    }\n});\n\n\n\n# getState\n\nsan-storeä¸­ç¨getStateæ¥è·åstateç¶æçå¼\n\nmyStore.getState('user.name');\n\n\n\n# Action\n\nActionæ¯ä¸ä¸ªå½æ°ï¼å¯ä»¥ç´æ¥å®ä¹å¨storeä¸­ï¼ä¹å¯ä»¥éè¿ addAction æ¹æ³å¯ä»¥ä¸º Store æ·»å  Actionã\n\nä¸¤ä¸ªåæ°ï¼\n\n * payloadè½½è·\n * contextå¯¹è±¡ï¼getState, dispatch\n\nè¿åå¼ï¼\n\n * è¿åä¸ä¸ª Promise æ¶ï¼å½å Action ä¸ºå¼æ­¥\n * è¿åä¸ä¸ª builder æä»ä¹é½ä¸è¿åæ¶ï¼å½å Action ä¸ºåæ­¥\n\nä½¿ç¨builderæå»ºæ´æ°å½æ°\n\nfunction actionFun(payload, {getState, dispatch}) {\n\t// payload è½½è·æ°æ®\n  // getState è·åstateç¶æ\n  // dispatch è§¦åå¶ä»action\n}\n\n// åæ­¥ Action\nstore.addAction('setUserName', function (name) {\n    return builder().set('user.name', name);\n});\n\n// å¼æ­¥ Action\nstore.addAction('login', function (payload, {getState, dispatch}) {\n    if (getState('user.name') === payload.name) {\n        return;\n    }\n\n    dispatch('logining', true);\n    return userService.validate(payload).then(() => {\n        dispatch('setUserName', payload.name);\n        dispatch('logining', false);\n    })\n});\n\n\n\n# dispath\n\nåæ°\n\n * {string} name actionåç§°\n * {*} payload ç»äºçæ°æ®\n\nè¿åå¼\n\n * action ä¸ºåæ­¥æ¶ï¼è¿å undefined\n * action ä¸ºå¼æ­¥æ¶ï¼è¿å Promise\n\nstore.dispatch('login', {\n    name: 'errorrik',\n    password: 'xxxxx'\n});\n\n\n\n# connect\n\nconnect ç¨äºå° store å®ä¾ä¸ san ç»ä»¶è¿æ¥ï¼ä»èï¼\n\n * å½ store æ°æ®åæ´æ¶ï¼è¿æ¥çç»ä»¶æ°æ®ä¹è¿è¡ç¸åºçåæ´\n * ç»ä»¶åé¨åè°ç¨æ¹æ³ä¸æ · dispatch actionï¼ç»ä»¶å®ç°æ¶æ éå³å¿å¯¹å·ä½ store çä¾èµ\n\nä¸¤ä¸ªåæ°ï¼\n\n * mapStates\n * mapActions\n\nconnect.san è¿åä¸ä¸ªæ§è¡ connect æä½çå½æ°ï¼è¿ä¸ªå½æ°å¯ä»¥æ¥åä¸ä¸ªç»ä»¶ç±»ä½ä¸ºåæ°\n\nexport default class UserComponent extends Component {\n  // æå¼è¡¨è¾¾å¼ç´æ¥è®¿é® mapStates\n  static template = `\n\t\t<template>\n\t\t\t<div>{{ name }}</div>\n\t\t</template>\n\t`,\n  \n  changeName() {\n    // éè¿ this.actions è®¿é® mapActions\n  \tthis.actions.change()\n  }\n}\n\nconnect.san(\n    {name: 'user.name'},\n    {change: 'changeUserName'}\n)(UserComponent);\n\n\n\n# san-update\n\nImmutable Data\n\nJavaScript ä¸­çå¯¹è±¡ä¸è¬æ¯å¯åçï¼Mutableï¼ï¼å ä¸ºä½¿ç¨äºå¼ç¨èµå¼ã\n\nImmutable Dataæ¯æä¸æ¦è¢«åé åï¼å°±ä¸å¯ä»¥è¢«æ¹åçæ°æ®ã\n\nå¨javascriptä¸­æä»¬å¯ä»¥éè¿deep cloneæ¥æ¨¡æImmutable Dataï¼å°±æ¯æ¯æ¬¡å¯¹æ°æ®è¿è¡æä½ï¼æ°å¯¹æ°æ®è¿è¡deep cloneåºä¸ä¸ªæ°æ°æ®ãä½æ¯æ·±æ·è´æ¯ç¨éå½çæ¹å¼å®ç°çï¼ååæ¶èæ§è½ï¼æä»¥è¯çäºImmutable Data\n\nå¯ä»¥çè§£ä¸ºä¼ååçæ·±æ·è´ã\n\nä½æ¯ç¤¾åºçåºæ®éå­å¨ä¸äºé®é¢ï¼å¦ï¼\n\n 1. æä»¤ä¸å¤ãé¤æåºæ¬çsetãpushãunshiftãmergeç­åè½å¤ï¼å¶å®åè½é¾ä»¥æ¹ä¾¿å°è¡¥å\n 2. ä½¿ç¨ä¸ä¾¿ãå½éè¦å¯¹ä¸ä¸ªå¯¹è±¡çå¤ä¸ªå±æ§è¿è¡æ´æ°æ¶ï¼ç»è£ä¸ä¸ªå¤æçæ´æ°æä»¤å¹¶ä¸å®¹æ\n\nsan-updateå¸æå¨ç¤¾åºç»éªçåºç¡ä¹ä¸ï¼éè¿æä¾æ´å¼ºå¤§çåè½åæ¹ä¾¿çä½¿ç¨æ¹å¼ï¼å¦é¾å¼è°ç¨ï¼æ¥ç®ååºäºä¸å¯åå¯¹è±¡çç³»ç»å¼å\n\nå·ä½ä½¿ç¨å¯çï¼san-updateå®æ¹ææ¡£\n\n\n# React Native\n\n * RNæ¯ React çä¸ä¸ªåçæ©å±\n * å®åè®¸æä»¬éè¿ React è¯­æ³ï¼æ¥å¼å ios å Android åçåºç¨\n\n\n# å ç§è·¨å¹³å°æ¡æ¶çæ¯è¾\n\næ¡æ¶     RNï¼NA VIEWï¼   WEEXï¼NA VIEWï¼   FLUTTERï¼èªç»å¶ï¼\næå±å¬å¸   FB            ali             google\nç¼ç¨è¯­è¨   jsï¼Reactï¼     jsï¼Vueï¼         Dart\nå¼æ     JSCore        V8              Flutter engine\n\n\n# ç§»å¨ App çå¼åæ¨¡å¼\n\nåçå¼åï¼android / iOS\n\næ··åå¼åï¼RN / weex / Flutter\n\nH5å¼åï¼html / css / js\n\nå¼åæ¨¡å¼   åçå¼å               æ··åå¼å                 WEBå¼å\nè¿è¡ç¯å¢   Androidï¼iOS        Androidï¼iOS          æµè§å¨ï¼webview\nç¼ç¨è¯­è¨   Javaï¼Objective-C   JSï¼Dart(Flutterä½¿ç¨)   Html,css,js\nå¯ç§»æ¤æ§   å·®                  ä¸è¬                   å¥½\nå¼åéåº¦   æ¢                  ä¸è¬                   å¿«\næ§è½     å¿«                  è¾æ¢                   æ¢\nå­¦ä¹ ææ¬   é«                  ä¸è¬                   ä½\n\n\n# RN çä¼å¿\n\n * å¼åä½éªå¥½\n   * ç¨ç»ä¸çä»£ç è§èå¼åç§»å¨ç«¯ç¨åºï¼ä¸ç¨å³æ³¨ç§»å¨ç«¯çå·®å¼\n * å¼åææ¬ä½\n   * å¼åä¸æ¬¡ï¼å¯ä»¥çæ Android å iOS ä¸¤ä¸ªç³»ç»ä¸ç app\n   * Learn onceï¼write anywhere\n * å­¦ä¹ ææ¬ä½\n   * åªè¦ææ¡ JS å Reactï¼å°±å¯ä»¥è¿è¡ç§»å¨ç«¯å¼åäº\n\n\n# RNçä¸è¶³\n\n * ä¸æç\n   * é¡¹ç®çæ¬æ´æ°ç»´æ¤è¾é¢ç¹ï¼å­¦ä¹ ææ¬é«\n   * è¯éææ¬é«ï¼æäºé®é¢è¾å°è§£å³æ¹æ¡ï¼æè½è¯¯å¼åè¿åº¦\n * æ§è½å·®\n   * æ´ä½æ§è½æä¸å¦åç\n * å¼å®¹æ§å·®\n   * æ¶ååºå±çåè½ï¼éè¦éå¯¹ Android å ios åç«¯åç¬å¼å\n\n\n# è¿è¡åç\n\nè¿éææèªReact Native åçä¸å®è·µ\n\nReact Native éè¦ä¸ä¸ª JS çè¿è¡ç¯å¢ï¼å ä¸º React Native ä¼æåºç¨ç JS ä»£ç ç¼è¯æä¸ä¸ª JS æä»¶ï¼x x.bundleï¼ï¼React Native æ¡æ¶çç®æ å°±æ¯è§£éè¿è¡è¿ä¸ª JS èæ¬æä»¶ï¼å¦ææ¯ Native æå±ç APIï¼åç´æ¥éè¿ bridge è°ç¨ Native æ¹æ³ï¼æåºç¡çæ¯å¦ç»å¶ UI çé¢ï¼æ å° Virtual DOM å°çå®ç UI ç»ä»¶ä¸­ã\n\n\n\nç»¿è²çæ¯æä»¬åºç¨å¼åçé¨åï¼æä»¬åçä»£ç åºæ¬ä¸é½æ¯å¨è¿ä¸å±ã\n\nèè²ä»£è¡¨å¬ç¨çè·¨å¹³å°çä»£ç åå·¥å·å¼æï¼ä¸è¬æä»¬ä¸ä¼å¨èè²é¨åçä»£ç ã\n\né»è²ä»£è¡¨å¹³å°ç¸å³ç bridge ä»£ç ï¼åå®å¶åçæ¶åä¼æ·»å ä¿®æ¹ä»£ç ã\n\nçº¢è²ä»£è¡¨ç³»ç»å¹³å°çåè½ï¼å¦å¤çº¢è²ä¸é¢æä¸ä¸ªèçº¿ï¼è¡¨ç¤ºææå¹³å°ç¸å³çä¸è¥¿é½éè¿ bridge éç¦»å¼æ¥äºï¼çº¢è²é¨åæ¯ç¬ç«äº React Native çã\n\n\n# san-native\n\nSanNativeæ¯ä¸å¥å¨æNAè§å¾æ¡æ¶ï¼å©ç¨JSå¼æé©±å¨NAç«¯æ¸²æï¼ä½¿å¾webåç«¯å·¥ç¨å¸å¯ä»¥ååæ¹ä¾¿çç¼ååçç§»å¨åºç¨ï¼ä¸å¥ä»£ç äºç«¯è¿è¡ã\n\n> æµè§å¨æ¸²æï¼React / vue / angular / san => DOM api => æ¸²æ\n> \n> San-nativeï¼san => Render Api => NAæ¸²æ\n\n\n# ä¸ºä»ä¹ä¸ç¨ rn ç­å¶ä»æ¹æ¡\n\nç§»å¨ç«¯éç¨å¼æºæ¹æ¡ï¼Vue/Reactï¼ä¹æ¯å¯ä»¥èèçï¼å¤é¨åºçå¥½å¤å¨äºåå±çéå¸¸å¿«ï¼ç»å¸¸ä¼æäºæ°ç featureãä½è¿ä¹å°ä¼æ¯ä¸ªå¾å¤§çé£é©ï¼å¼æºåºçå¿«éè¿­ä»£æå³çéæ¶ææ°çæä½³å®è·µåä»£æ§çæ¨¡å¼èé¢ç¹çç ´åæ§æ´æ¹ï¼è®©æ©æéç¨èæ¿æéæææ¬ã\n\n\n# sançå½å¨æ\n\nçå½å¨æ       è§¦åæ¶æº\ncompiled   ç»ä»¶è§å¾æ¨¡æ¿ç¼è¯å®æï¼templateç¼è¯çæANODE\ninited     ç»ä»¶å®ä¾åå§åå®æï¼å¯ä»¥è®¿é®å° data\ncreated    ç»ä»¶åç´ åå»ºå®æï¼å¯ä»¥è®¿é®å°è·¯ç±ä¿¡æ¯\nattached   ç»ä»¶å·²è¢«éå å°é¡µé¢ä¸­ï¼æ­¤æ¶å¯ä»¥è®¿é®å° DOM\ndetached   ç»ä»¶ä»é¡µé¢ä¸­ç§»é¤\ndisposed   ç»ä»¶å¸è½½å®æ\n\nå¶ä¸­sanç»ä»¶ä¸­è·¯ç±ç¸å³çroute()å½æ°ä¼å¨initedåï¼createdåæ§è¡ã",normalizedContent:"# sanæ¡æ¶\n\n * san-store\n * san-update\n * san-native\n * sançå½å¨æ\n\n\n# san-store\n\nsan-storeæ¯sanæ¡æ¶ç¨äºç¶æç®¡ççå·¥å·ï¼åvuexç±»ä¼¼ï¼ä½æ¯è¿æ¯æåºå«çï¼é¦åå¤ä¹ ä¸ä¸vue\n\n> vueä¸­æ´æ¹stateçæ¹å¼æä¸åªæä¸ä¸ªï¼ mutationï¼ç¨commit æ¥è§¦åï¼éå¶æ¯åªè½åæ­¥ä¿®æ¹ã\n> \n> æ³è¦å¼æ­¥éè¦dispatch ä¸ä¸ª actionï¼actionä¸­åè§¦åcommitä¿®æ¹stateï¼actionä¸­å¯ä»¥åå¼æ­¥æä½ã\n\nconst store = new vuex.store({\n  state: {\n    count: 0\n  },\n  mutations: {\n    increment (state) {\n      state.count++\n    }\n  },\n  actions: {\n    increment (context) {\n      context.commit('increment')\n    }\n  }\n})\n// éè¿ dispathch è§¦å\nstore.dispatch('increment')\n\n\n\n\nsan-storeä¸­åä¸ä¼æmutationåactionä¹åï¼åªå­å¨actionï¼éè¿dispatchæ¥è§¦åã\n\n\n\n\n# store\n\nstoreçæ¦å¿µåvuexä¸­ä¸æ ·ï¼é£ä¹ä¸ä¸ªåå§åçstoreæ¯ä»ä¹æ ·çå¢ï¼ï¼san-updateåºå®ç°äºä¸ä¸ªæ´æ°å¯¹è±¡çå½æ°ï¼åæ¶éæ´æ°è¿ç¨è¾åºæ°æ§å¯¹è±¡çå·®å¼ç»æï¼\n\nimport {store} from 'san-store';\nimport {builder} from 'san-update';\n\nlet mystore = new store({\n    initdata: {\n        user: {\n            name: 'your name'\n        }\n    },\n\n    actions: {\n        changeusername(name) {\n            return builder().set('user.name', name);\n        }\n    }\n});\n\n\n\n# getstate\n\nsan-storeä¸­ç¨getstateæ¥è·åstateç¶æçå¼\n\nmystore.getstate('user.name');\n\n\n\n# action\n\nactionæ¯ä¸ä¸ªå½æ°ï¼å¯ä»¥ç´æ¥å®ä¹å¨storeä¸­ï¼ä¹å¯ä»¥éè¿ addaction æ¹æ³å¯ä»¥ä¸º store æ·»å  actionã\n\nä¸¤ä¸ªåæ°ï¼\n\n * payloadè½½è·\n * contextå¯¹è±¡ï¼getstate, dispatch\n\nè¿åå¼ï¼\n\n * è¿åä¸ä¸ª promise æ¶ï¼å½å action ä¸ºå¼æ­¥\n * è¿åä¸ä¸ª builder æä»ä¹é½ä¸è¿åæ¶ï¼å½å action ä¸ºåæ­¥\n\nä½¿ç¨builderæå»ºæ´æ°å½æ°\n\nfunction actionfun(payload, {getstate, dispatch}) {\n\t// payload è½½è·æ°æ®\n  // getstate è·åstateç¶æ\n  // dispatch è§¦åå¶ä»action\n}\n\n// åæ­¥ action\nstore.addaction('setusername', function (name) {\n    return builder().set('user.name', name);\n});\n\n// å¼æ­¥ action\nstore.addaction('login', function (payload, {getstate, dispatch}) {\n    if (getstate('user.name') === payload.name) {\n        return;\n    }\n\n    dispatch('logining', true);\n    return userservice.validate(payload).then(() => {\n        dispatch('setusername', payload.name);\n        dispatch('logining', false);\n    })\n});\n\n\n\n# dispath\n\nåæ°\n\n * {string} name actionåç§°\n * {*} payload ç»äºçæ°æ®\n\nè¿åå¼\n\n * action ä¸ºåæ­¥æ¶ï¼è¿å undefined\n * action ä¸ºå¼æ­¥æ¶ï¼è¿å promise\n\nstore.dispatch('login', {\n    name: 'errorrik',\n    password: 'xxxxx'\n});\n\n\n\n# connect\n\nconnect ç¨äºå° store å®ä¾ä¸ san ç»ä»¶è¿æ¥ï¼ä»èï¼\n\n * å½ store æ°æ®åæ´æ¶ï¼è¿æ¥çç»ä»¶æ°æ®ä¹è¿è¡ç¸åºçåæ´\n * ç»ä»¶åé¨åè°ç¨æ¹æ³ä¸æ · dispatch actionï¼ç»ä»¶å®ç°æ¶æ éå³å¿å¯¹å·ä½ store çä¾èµ\n\nä¸¤ä¸ªåæ°ï¼\n\n * mapstates\n * mapactions\n\nconnect.san è¿åä¸ä¸ªæ§è¡ connect æä½çå½æ°ï¼è¿ä¸ªå½æ°å¯ä»¥æ¥åä¸ä¸ªç»ä»¶ç±»ä½ä¸ºåæ°\n\nexport default class usercomponent extends component {\n  // æå¼è¡¨è¾¾å¼ç´æ¥è®¿é® mapstates\n  static template = `\n\t\t<template>\n\t\t\t<div>{{ name }}</div>\n\t\t</template>\n\t`,\n  \n  changename() {\n    // éè¿ this.actions è®¿é® mapactions\n  \tthis.actions.change()\n  }\n}\n\nconnect.san(\n    {name: 'user.name'},\n    {change: 'changeusername'}\n)(usercomponent);\n\n\n\n# san-update\n\nimmutable data\n\njavascript ä¸­çå¯¹è±¡ä¸è¬æ¯å¯åçï¼mutableï¼ï¼å ä¸ºä½¿ç¨äºå¼ç¨èµå¼ã\n\nimmutable dataæ¯æä¸æ¦è¢«åé åï¼å°±ä¸å¯ä»¥è¢«æ¹åçæ°æ®ã\n\nå¨javascriptä¸­æä»¬å¯ä»¥éè¿deep cloneæ¥æ¨¡æimmutable dataï¼å°±æ¯æ¯æ¬¡å¯¹æ°æ®è¿è¡æä½ï¼æ°å¯¹æ°æ®è¿è¡deep cloneåºä¸ä¸ªæ°æ°æ®ãä½æ¯æ·±æ·è´æ¯ç¨éå½çæ¹å¼å®ç°çï¼ååæ¶èæ§è½ï¼æä»¥è¯çäºimmutable data\n\nå¯ä»¥çè§£ä¸ºä¼ååçæ·±æ·è´ã\n\nä½æ¯ç¤¾åºçåºæ®éå­å¨ä¸äºé®é¢ï¼å¦ï¼\n\n 1. æä»¤ä¸å¤ãé¤æåºæ¬çsetãpushãunshiftãmergeç­åè½å¤ï¼å¶å®åè½é¾ä»¥æ¹ä¾¿å°è¡¥å\n 2. ä½¿ç¨ä¸ä¾¿ãå½éè¦å¯¹ä¸ä¸ªå¯¹è±¡çå¤ä¸ªå±æ§è¿è¡æ´æ°æ¶ï¼ç»è£ä¸ä¸ªå¤æçæ´æ°æä»¤å¹¶ä¸å®¹æ\n\nsan-updateå¸æå¨ç¤¾åºç»éªçåºç¡ä¹ä¸ï¼éè¿æä¾æ´å¼ºå¤§çåè½åæ¹ä¾¿çä½¿ç¨æ¹å¼ï¼å¦é¾å¼è°ç¨ï¼æ¥ç®ååºäºä¸å¯åå¯¹è±¡çç³»ç»å¼å\n\nå·ä½ä½¿ç¨å¯çï¼san-updateå®æ¹ææ¡£\n\n\n# react native\n\n * rnæ¯ react çä¸ä¸ªåçæ©å±\n * å®åè®¸æä»¬éè¿ react è¯­æ³ï¼æ¥å¼å ios å android åçåºç¨\n\n\n# å ç§è·¨å¹³å°æ¡æ¶çæ¯è¾\n\næ¡æ¶     rnï¼na viewï¼   weexï¼na viewï¼   flutterï¼èªç»å¶ï¼\næå±å¬å¸   fb            ali             google\nç¼ç¨è¯­è¨   jsï¼reactï¼     jsï¼vueï¼         dart\nå¼æ     jscore        v8              flutter engine\n\n\n# ç§»å¨ app çå¼åæ¨¡å¼\n\nåçå¼åï¼android / ios\n\næ··åå¼åï¼rn / weex / flutter\n\nh5å¼åï¼html / css / js\n\nå¼åæ¨¡å¼   åçå¼å               æ··åå¼å                 webå¼å\nè¿è¡ç¯å¢   androidï¼ios        androidï¼ios          æµè§å¨ï¼webview\nç¼ç¨è¯­è¨   javaï¼objective-c   jsï¼dart(flutterä½¿ç¨)   html,css,js\nå¯ç§»æ¤æ§   å·®                  ä¸è¬                   å¥½\nå¼åéåº¦   æ¢                  ä¸è¬                   å¿«\næ§è½     å¿«                  è¾æ¢                   æ¢\nå­¦ä¹ ææ¬   é«                  ä¸è¬                   ä½\n\n\n# rn çä¼å¿\n\n * å¼åä½éªå¥½\n   * ç¨ç»ä¸çä»£ç è§èå¼åç§»å¨ç«¯ç¨åºï¼ä¸ç¨å³æ³¨ç§»å¨ç«¯çå·®å¼\n * å¼åææ¬ä½\n   * å¼åä¸æ¬¡ï¼å¯ä»¥çæ android å ios ä¸¤ä¸ªç³»ç»ä¸ç app\n   * learn onceï¼write anywhere\n * å­¦ä¹ ææ¬ä½\n   * åªè¦ææ¡ js å reactï¼å°±å¯ä»¥è¿è¡ç§»å¨ç«¯å¼åäº\n\n\n# rnçä¸è¶³\n\n * ä¸æç\n   * é¡¹ç®çæ¬æ´æ°ç»´æ¤è¾é¢ç¹ï¼å­¦ä¹ ææ¬é«\n   * è¯éææ¬é«ï¼æäºé®é¢è¾å°è§£å³æ¹æ¡ï¼æè½è¯¯å¼åè¿åº¦\n * æ§è½å·®\n   * æ´ä½æ§è½æä¸å¦åç\n * å¼å®¹æ§å·®\n   * æ¶ååºå±çåè½ï¼éè¦éå¯¹ android å ios åç«¯åç¬å¼å\n\n\n# è¿è¡åç\n\nè¿éææèªreact native åçä¸å®è·µ\n\nreact native éè¦ä¸ä¸ª js çè¿è¡ç¯å¢ï¼å ä¸º react native ä¼æåºç¨ç js ä»£ç ç¼è¯æä¸ä¸ª js æä»¶ï¼x x.bundleï¼ï¼react native æ¡æ¶çç®æ å°±æ¯è§£éè¿è¡è¿ä¸ª js èæ¬æä»¶ï¼å¦ææ¯ native æå±ç apiï¼åç´æ¥éè¿ bridge è°ç¨ native æ¹æ³ï¼æåºç¡çæ¯å¦ç»å¶ ui çé¢ï¼æ å° virtual dom å°çå®ç ui ç»ä»¶ä¸­ã\n\n\n\nç»¿è²çæ¯æä»¬åºç¨å¼åçé¨åï¼æä»¬åçä»£ç åºæ¬ä¸é½æ¯å¨è¿ä¸å±ã\n\nèè²ä»£è¡¨å¬ç¨çè·¨å¹³å°çä»£ç åå·¥å·å¼æï¼ä¸è¬æä»¬ä¸ä¼å¨èè²é¨åçä»£ç ã\n\né»è²ä»£è¡¨å¹³å°ç¸å³ç bridge ä»£ç ï¼åå®å¶åçæ¶åä¼æ·»å ä¿®æ¹ä»£ç ã\n\nçº¢è²ä»£è¡¨ç³»ç»å¹³å°çåè½ï¼å¦å¤çº¢è²ä¸é¢æä¸ä¸ªèçº¿ï¼è¡¨ç¤ºææå¹³å°ç¸å³çä¸è¥¿é½éè¿ bridge éç¦»å¼æ¥äºï¼çº¢è²é¨åæ¯ç¬ç«äº react native çã\n\n\n# san-native\n\nsannativeæ¯ä¸å¥å¨ænaè§å¾æ¡æ¶ï¼å©ç¨jså¼æé©±å¨naç«¯æ¸²æï¼ä½¿å¾webåç«¯å·¥ç¨å¸å¯ä»¥ååæ¹ä¾¿çç¼ååçç§»å¨åºç¨ï¼ä¸å¥ä»£ç äºç«¯è¿è¡ã\n\n> æµè§å¨æ¸²æï¼react / vue / angular / san => dom api => æ¸²æ\n> \n> san-nativeï¼san => render api => naæ¸²æ\n\n\n# ä¸ºä»ä¹ä¸ç¨ rn ç­å¶ä»æ¹æ¡\n\nç§»å¨ç«¯éç¨å¼æºæ¹æ¡ï¼vue/reactï¼ä¹æ¯å¯ä»¥èèçï¼å¤é¨åºçå¥½å¤å¨äºåå±çéå¸¸å¿«ï¼ç»å¸¸ä¼æäºæ°ç featureãä½è¿ä¹å°ä¼æ¯ä¸ªå¾å¤§çé£é©ï¼å¼æºåºçå¿«éè¿­ä»£æå³çéæ¶ææ°çæä½³å®è·µåä»£æ§çæ¨¡å¼èé¢ç¹çç ´åæ§æ´æ¹ï¼è®©æ©æéç¨èæ¿æéæææ¬ã\n\n\n# sançå½å¨æ\n\nçå½å¨æ       è§¦åæ¶æº\ncompiled   ç»ä»¶è§å¾æ¨¡æ¿ç¼è¯å®æï¼templateç¼è¯çæanode\ninited     ç»ä»¶å®ä¾åå§åå®æï¼å¯ä»¥è®¿é®å° data\ncreated    ç»ä»¶åç´ åå»ºå®æï¼å¯ä»¥è®¿é®å°è·¯ç±ä¿¡æ¯\nattached   ç»ä»¶å·²è¢«éå å°é¡µé¢ä¸­ï¼æ­¤æ¶å¯ä»¥è®¿é®å° dom\ndetached   ç»ä»¶ä»é¡µé¢ä¸­ç§»é¤\ndisposed   ç»ä»¶å¸è½½å®æ\n\nå¶ä¸­sanç»ä»¶ä¸­è·¯ç±ç¸å³çroute()å½æ°ä¼å¨initedåï¼createdåæ§è¡ã",charsets:{cjk:!0}},{title:"ä¹ä¹çæ¸¸æ",frontmatter:{},regularPath:"/three/three2.html",relativePath:"three/three2.md",key:"v-57f44261",path:"/three/three2.html",headers:[{level:3,title:"å±å¹çä½ç½®",slug:"å±å¹çä½ç½®",normalizedTitle:"å±å¹çä½ç½®",charIndex:12},{level:2,title:"é¡µé¢ç»æ",slug:"é¡µé¢ç»æ",normalizedTitle:"é¡µé¢ç»æ",charIndex:114},{level:2,title:"HDR",slug:"hdr",normalizedTitle:"hdr",charIndex:232},{level:2,title:"å¦ä½è®¾ç½®èæ¯å¾",slug:"å¦ä½è®¾ç½®èæ¯å¾",normalizedTitle:"å¦ä½è®¾ç½®èæ¯å¾",charIndex:924},{level:2,title:"çº¹çè´´å¾",slug:"çº¹çè´´å¾",normalizedTitle:"çº¹çè´´å¾",charIndex:1079},{level:2,title:"åä½ä¸åæ ",slug:"åä½ä¸åæ ",normalizedTitle:"åä½ä¸åæ ",charIndex:1596},{level:2,title:"éè§å³ç³»",slug:"éè§å³ç³»",normalizedTitle:"éè§å³ç³»",charIndex:2159},{level:2,title:"æé¯é½¿",slug:"æé¯é½¿",normalizedTitle:"æé¯é½¿",charIndex:2477},{level:2,title:"è¿å¨è½¨è¿¹",slug:"è¿å¨è½¨è¿¹",normalizedTitle:"è¿å¨è½¨è¿¹",charIndex:2864},{level:2,title:"ç¨æ·äº¤äº",slug:"ç¨æ·äº¤äº",normalizedTitle:"ç¨æ·äº¤äº",charIndex:4207},{level:2,title:"raycast ç®æ³",slug:"raycast-ç®æ³",normalizedTitle:"raycast ç®æ³",charIndex:4318},{level:2,title:"ç¸æºè§è§ç§»å¨",slug:"ç¸æºè§è§ç§»å¨",normalizedTitle:"ç¸æºè§è§ç§»å¨",charIndex:5223},{level:2,title:"ç¢°ææ£æµ",slug:"ç¢°ææ£æµ",normalizedTitle:"ç¢°ææ£æµ",charIndex:5664},{level:2,title:"AIç­ç¥",slug:"aiç­ç¥",normalizedTitle:"aiç­ç¥",charIndex:6278},{level:2,title:"å¸§ç",slug:"å¸§ç",normalizedTitle:"å¸§ç",charIndex:6344},{level:2,title:"ç«é·ææ",slug:"ç«é·ææ",normalizedTitle:"ç«é·ææ",charIndex:6533},{level:2,title:"ä»£ç ç»æ",slug:"ä»£ç ç»æ",normalizedTitle:"ä»£ç ç»æ",charIndex:6766},{level:2,title:"æ§è½ä¼å",slug:"æ§è½ä¼å",normalizedTitle:"æ§è½ä¼å",charIndex:7019},{level:2,title:"å¼å®¹æ§",slug:"å¼å®¹æ§",normalizedTitle:"å¼å®¹æ§",charIndex:7342}],lastUpdated:"9/2/2025, 11:24:35 AM",lastUpdatedTimestamp:1756783475e3,headersStr:"å±å¹çä½ç½® é¡µé¢ç»æ HDR å¦ä½è®¾ç½®èæ¯å¾ çº¹çè´´å¾ åä½ä¸åæ  éè§å³ç³» æé¯é½¿ è¿å¨è½¨è¿¹ ç¨æ·äº¤äº raycast ç®æ³ ç¸æºè§è§ç§»å¨ ç¢°ææ£æµ AIç­ç¥ å¸§ç ç«é·ææ ä»£ç ç»æ æ§è½ä¼å å¼å®¹æ§",content:"# ä¹ä¹çæ¸¸æ\n\n\n# å±å¹çä½ç½®\n\nè¿è£åªé¢åè¿è£åªé¢å®ä¹äºç¸æºçæ¸²æèå´ãä½äºè¿è£åªé¢ä¹åçç©ä½åä½äºè¿è£åªé¢ä¹åçç©ä½é½ä¸ä¼è¢«æ¸²æãä¸ºäºæé«æ¸²ææ§è½ï¼éå¸¸åºè¯¥å°½éå°è¿è£åªé¢åè¿è£åªé¢ä¹é´çè·ç¦»è®¾ç½®å¾è¾å°ã\n\n\n\n\n\n\n# é¡µé¢ç»æ\n\ngltf/glb æ¨¡åï¼\n\n\n\n\n\nç´æ¥ä½¿ç¨æ¨¡åè½ç¶æ¹ä¾¿æä»¬å¼åï¼ä½æ¯è¿è¦èèå°æ§è½åèµæºçå½±åï¼ä¾å¦æ¬æ¬¡ä¸ä¸ªçæç glbæ¨¡åå¤§å°å°±ææ¥è¿800KBãå¼åæ¶éè¦èèææ²¡æå¶ä»æ¹å¼ã\n\n> å¦ä½ç»ä¸ç»´ä¸çè®¾ç½®èæ¯ï¼\n\n\n# HDR\n\nHigh-Dynamic Range ï¼HDRï¼imageçç¼©åï¼ç®åè¯´ï¼HDRIæ¯ä¸ç§äº®åº¦èå´éå¸¸å¹¿çå¾åï¼å®æ¯å¶å®æ ¼å¼çå¾åæçæ´å¤§äº®åº¦çæ°æ®è´®å­ï¼èä¸å®è®°å½äº®åº¦çæ¹å¼ä¸ä¼ ç»çå¾çä¸åï¼ä¸æ¯ç¨éçº¿æ§çæ¹å¼å°äº®åº¦ä¿¡æ¯åç¼©å°8bitæ16bitçé¢è²ç©ºé´åï¼èæ¯ç¨ç´æ¥å¯¹åºçæ¹å¼è®°å½äº®åº¦ä¿¡æ¯ï¼å®å¯ä»¥è¯´è®°å½äºå¾çç¯å¢ä¸­çç§æä¿¡æ¯ï¼å æ­¤æä»¬å¯ä»¥ä½¿ç¨è¿ç§å¾åæ¥âç§äº®âåºæ¯ãæå¾å¤HDRIæä»¶æ¯ä»¥å¨æ¯å¾çå½¢å¼æä¾çï¼æä»¬ä¹å¯ä»¥ç¨å®åç¯å¢èæ¯æ¥äº§çåå°ä¸æå°ã\n\nç¨æç®åæç´ç½ææçè¯æ¥æ»ç»è¯´ï¼HDRIå°±æ¯ä¼ååçå¾çãå®çæ¯ä¸ä¸ªåç´ ï¼å°±ç¸å½äºæ¯ä¸ä¸ªå°LEDç¯æ³¡ãæäº®çé¨åå°±æ¯å¤ªé³æå¨çé¨åãå ä¸ºå®æ¯LEDç¯ï¼æä»¥å®å¯ä»¥æååè²ç§å°åºæ¥ï¼å½±åå°å¨å´ã\n\nimport {RGBELoader} from 'three/examples/jsm/loaders/RGBELoader';\nconst rgbeLoader = new RGBELoader();\n\ufeff\nrgbeLoader.load('xxx.hdr', envMap => {\n    // hdrä½ä¸ºç¯å¢è´´å¾çæï¼è®¾ç½®.mappingä¸ºEquirectangularReflectionMapping\n    envMap.mapping = THREE.EquirectangularReflectionMapping;\n    scene.environment = envMap; // è®¾ç½®æ¯ä¸ªç©ä½\n    scene.background = envMap; // è®¾ç½®æ´ä½çå¤©ç©ºèæ¯\n})\n\n\n\n# å¦ä½è®¾ç½®èæ¯å¾\n\n\n\n\n\n// å¯ä»¥ç» render è®¾ç½®éæï¼è¿æ ·åé¢çèæ¯å¾å°±ä¼å±ç¤ºåºæ¥\nconst renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});\nrenderer.setClearAlpha(0.0);\n\n\n\n# çº¹çè´´å¾\n\nå¯¹äºåºæ¯ä¸­çæäºå°æ¹çå±ç¤ºå¯ä»¥ç¨çº¹çè´´å¾\n\n\n\n\n\nconst geometry = new THREE.PlaneGeometry(1.1, 0.3); // å¹³é¢\nconst textureLoader = new THREE.TextureLoader();\ntextureLoader.load(TableFootPng, texture => {\n    const material = new THREE.MeshBasicMaterial({\n        map: texture,\n        transparent: true, // é²æ­¢å¾çèæ¯éæé¨åä¸ºé»è²\n    });\n    const mesh = new THREE.Mesh(geometry, material);//çº¹çè´´å¾ç½æ ¼æ¨¡åå¯¹è±¡\n    mesh.position.set(0, -0.3, 1);\n    mesh.rotation.x = -Math.PI / 6;\n    scene.add(mesh);//ç½æ ¼æ¨¡åæ·»å å°åºæ¯ä¸­\n});\n\n\nokï¼ç®åä½ç½®æä»¬èµæºé½åå¤å¥½äºï¼é£ä¹å¦ä½è¿è¡ç»è£å¢ï¼\n\n\n# åä½ä¸åæ \n\nå¨ three.js ä¸­ä¸è¬ä¼é»è®¤ä¸ä¸ªåä½å¯¹åºä¸ç±³ï¼ç¶åæååè§è§åå­¦å¯¹é½ï¼æ¯å¦æä»¬ä¹ä¹çä¸­è®¾ç½®çåä¸ªç©ä½çé¿å®½å¦ï¼\n\nconst TABLEWIDTH = 1.1; // æ¡å­å®½åº¦\nconst TABLEDEPTH = 2; // æ¡å­æ·±åº¦\nconst PADDLEWIDTH = 0.153; // çææ¨¡åå®½åº¦\nconst PADDLEHIGHT = 0.22; // çææ¨¡åé«åº¦\n\n\nç¶åæä»¬éè¦çº¦å®å¥½åæ åç¹ï¼æ¯å¦æä»¬æ¬æ¬¡çº¦å®æ¡é¢ä¸­å¿ä¸ºå·¦è¾¹åç¹\n\n\n\næä»¬çº¦å®å¥½ä¸è¿°æ¡ä»¶åï¼è§è§æä¾ç»æä»¬çä¸è¬æ¨¡åä¸­ä¼èªå¸¦ä½ç½®ä¿¡æ¯ï¼æä»¬åªéè¦å°å¶ç´æ¥æ·»å å°åºæ¯ä¸­å³å¯\n\n// GLTF å è½½å¨\nimport {GLTFLoader} from 'three/examples/jsm/loaders/GLTFLoader';\nconst loader = new GLTFLoader();\nconst TABLEGLB = 'https://feed-activity.cdn.bcebos.com/lego/duanju/nowuhuan-table.glb'; // æ¡é¢\nloader.load(TABLEGLB, gltf => {\n    scene.add(gltf.scene);\n});\n\n\n\n# éè§å³ç³»\n\næå½±ç¸å³ç¥è¯ï¼\n\n * è¶å¹¿è§ï¼20mmä»¥ä¸ï¼å¸¸ç¨äºé£åæå½±\n * å¹¿è§ï¼20mm-40mmï¼ææä¼¸ç©ºé´çææï¼æ¯å¦æ¿äº§ä¸­ä»æææ¿é´è§é¢ã\n * æ åç¦æ®µï¼40mm-60mmï¼ææ¥è¿äººç¼ï¼ç¨äºææäººå\n * é¿ç¦ï¼60mmä»¥ä¸ï¼æåç¼©ç©ºé´çææï¼ææè¿è·ç¦»ä¸»ä½ï¼å¦çææå½±åè¿å¨æå½±\n\n\n\nå¨ three.js ä¸­å·¦å¾è®¾ç½®çç¸æºç¦è·ä¸º 10mmï¼å³å¾è®¾ç½®çä¸º 35mmã\n\nç±äºè¦ä¿è¯ä¹ä¹çæ¡çå¤§å°ä¸åï¼10mmç¦è·çç¸æºç¦»ç©ä½è¾è¿ï¼35mmç¦è·çç¸æºç¦»ç©ä½è¾è¿ã\n\nç¦»ç©ä½çè·ç¦»ä¼æ¹åéè§å³ç³»ï¼æä»¥ä¸¤ç§ç¦è·çå°çä¹ä¹çæ¡å¹¶ä¸ä¸æ ·ã\n\ncamera.setFocalLength(10); // è®¾ç½®ç¸æºç¦è·\n\n\n\n\n\n# æé¯é½¿\n\néè¿Three.jså¼ååºç¨ç¨åºçæ¶åï¼åºæ¯æ¸²æææé»è®¤ä¼æé¯é½¿\n\n 1. æé«æ¸²æå¨çæé¯é½¿è´¨éï¼å¨åå»ºæ¸²æå¨æ¶ï¼å¯ä»¥è®¾ç½®æé¯é½¿å±æ§æ¥åå°é¯é½¿ã\n 2. ä½¿ç¨æ´é«åè¾¨çççº¹çæ¥åå°é¯é½¿ã\n 3. ä½¿ç¨å¤ééæ ·æé¯é½¿ï¼MASSï¼åå»ºæ´å¹³æ»çè¾¹ç¼ã\n 4. ä½¿ç¨å¹³æ»çè²ï¼Smooth Shadingï¼æ¥åå°é¯é½¿ã\n 5. ä½¿ç¨åæå¤çï¼Post-Processingï¼æ¥åå°é¯é½¿ã\n\nææè¶å¥½çç®æ³ï¼æ¸²æè´æä¹è¶éï¼æ­¤å¤æä»¬ç´æ¥ä½¿ç¨ç¬¬ä¸ç§å³å¯ã\n\nconst renderer = new THREE.WebGLRenderer({\n    antialias: true, // æé¯é½¿\n});\n// è®¾ç½®è®¾å¤åç´ æ¯ï¼é²æ­¢æ¨¡ç³è¾åº canvas\nrenderer.setPixelRatio(window.devicePixelRatio);\n\n\n\n\n\n\n\n# è¿å¨è½¨è¿¹\n\nä¸ç»´ç©ºé´ï¼æ¨ªåxè½´ï¼çºµåyè½´ï¼åç´äºå±å¹zè½´\n\n\n\n\n\nå°çè¿å¨è½¨è¿¹ï¼xè½´ï¼zè½´å¯ä»¥ååï¼yè½´ä¸ºæç©çº¿ï¼yézååï¼\n\n\n\næ±ç»è¿ï¼20ï¼0ï¼åï¼-10ï¼0ï¼ä¸å¼å£åä¸çæç©çº¿æ¹ç¨ï¼å½¢å¦ y = - (z - a)^2/ b + c æè y = az^2 + bz + cï¼å½ç¶æä»¬ä¸å¸ææ¯ä¸æ¬¡ä¹ä¹ççæç©çº¿è½¨è¿¹é½ç¸åï¼æä»¥æä»¬éè¦ç»åºä¸äºèå´ï¼éæºäº§çè½¨è¿¹çæç©çº¿ã\n\nconst calculateRanges = (\n    {\n        currentPos, // å½åä½ç½®åæ \n        zRange = [-0.8, -0.2], // è½ç¹çzè½´èå´\n        bRange = [-2, 2], // æé«ç¹çzè½´èå´\n        yRange = [0.12, 0.2], // zä¸º0æ¶çyè½´èå´\n    }\n) => {\n    const {y: yc, z: zc} = currentPos;\n    const [zMin, zMax] = zRange;\n    const [bMin, bMax] = bRange;\n    const [yMin, yMax] = yRange;\n    const results = [];\n    for (let z = zMin; z < zMax; z += 0.01) {\n        for (let b = bMin; b <= bMax; b += 0.01) {\n            if (Math.abs(zc - z) < 1e-6 || Math.abs(z + b) < 1e-6) {\n                continue;\n            } // é¿ååæ¯ä¸º0\n            const aNumerator = yc;\n            const aDenominator = (zc - z) * (zc + z + 2 * b);\n            const a = aNumerator / aDenominator;\n            if (isNaN(a) || !isFinite(a)) {\n                continue;\n            } // æ£æ¥açæææ§\n            const c = -a * (z + b) ** 2;\n            const inequalityLeft = a * b ** 2 + c;\n            if (inequalityLeft >= yMin && inequalityLeft <= yMax) {\n                results.push({a, b, c, z});\n            }\n        }\n    }\n    const random = Math.floor(Math.random() * results.length);\n    return results[random];\n};\n\n\n\n# ç¨æ·äº¤äº\n\nç¨æ·å¦ä½æä½çæï¼ææè§¦æ¸å¨å±å¹ä¸å¶å®æ¯ä¸ªäºç»´å¹³é¢ï¼å¦ä½å¨äºç»´å¹³é¢ä¸æä½ä½¿å¾ä¸ç»´åºæ¯ä¸­ççæç§»å¨ï¼ãæ­¤å¤demoæ¼ç¤ºä¸ã\n\n * çæxåæ ï¼æ ¹æ®mouseXåå\n * çæyåæ ï¼åºå®å³å¯\n * çæzåæ ï¼raycast ç®æ³æ±åºçå®çä¸ç»´åæ \n\n\n# raycast ç®æ³\n\nåçº¿æå°ç¨äºè¿è¡é¼ æ æ¾åï¼å¨ä¸ç»´ç©ºé´ä¸­è®¡ç®åºé¼ æ ç§»è¿äºä»ä¹ç©ä½ï¼\n\nhttps://threejs.org/docs/#api/zh/core/Raycaster\n\n\n\n\n\nconst raycaster = new THREE.Raycaster();\nconst pointer = new THREE.Vector2();\n\ufeff\nfunction onPointerMove( event ) {\n\t// å°é¼ æ ä½ç½®å½ä¸åä¸ºè®¾å¤åæ ãx å y æ¹åçåå¼èå´æ¯ (-1 to +1)\n\tpointer.x = ( event.clientX / window.innerWidth ) * 2 - 1;\n\tpointer.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\n}\n\ufeff\nfunction render() {\n\t// éè¿æåæºåé¼ æ ä½ç½®æ´æ°å°çº¿\n    // coords ââ å¨æ ååè®¾å¤åæ ä¸­é¼ æ çäºç»´åæ  ââ Xåéä¸Yåéåºå½å¨-1å°1ä¹é´ã\n    // camera ââ å°çº¿ææ¥æºçæåæºã\n\traycaster.setFromCamera( pointer, camera );\n\t// è®¡ç®ç©ä½åå°çº¿çç¦ç¹\n\tconst intersects = raycaster.intersectObjects( scene.children );\n\tfor ( let i = 0; i < intersects.length; i ++ ) {\n\t\tintersects[ i ].object.material.color.set( 0xff0000 );\n\t}\n\trenderer.render( scene, camera );\n}\n\ufeff\nwindow.addEventListener( 'pointermove', onPointerMove );\nwindow.requestAnimationFrame(render);\n\n\n\n# ç¸æºè§è§ç§»å¨\n\nä½¿ç¨æ·ä½éªæ¥åå»æä¹ä¹çææ¯çæè§ï¼å¢æ·»è§è§å²å»åã\n\næ­¤å¤åæ¼ç¤ºä¸ demoï¼ä¸»è¦ä¼åç¹ä¸ºï¼\n\n 1. aiå»ä¸­åç¸æºè·éä¹ä¹çè¿è¡ä¸å®ç¨åº¦çç§»å¨\n 2. è®¾å®éå¼é²æ­¢è§è§æçè¿è¿\n 3. å»ä¸­åè§è§åæ­£\n\n> ä¸ºäºå®ç°ç¸æºç§»å¨åï¼ç¨æ·çæä¹è·éç§»å¨ï¼éè¦å°ç¸æºåç¨æ·çææ·»å å°ä¸ä¸ª group ä¸­\n\ninitCameraGroup() {\n    this.group = new THREE.Group();\n    // å°ç¸æºæ·»å å°ç»ä¸­\n    this.group.add(camera);\n    // ç¨æ·çææ·»å å°ç»ä¸­\n    this.group.add(user);\n    // å°ç»æ·»å å°sceneä¸­\n    scene.add(this.group);\n}\n\n\nTHREE.Groupæ¯ä¸ä¸ªç»åå¯¹è±¡ï¼æé¶æ£çå¯¹è±¡ç»åå°ä¸åä¾¿äºæä½ï¼å¯ä»¥ä½¿ç¨THREE.Groupæ¥æä½ä¸ç»å¯¹è±¡ï¼åæ¬æè½¬ï¼ç¼©æ¾ï¼ç§»å¨ç­ï¼éé¢çå­å¯¹è±¡é½ä¼åå°å½±åã\n\n\n# ç¢°ææ£æµ\n\nå®æå¯¹æè¿ç¨çåºç¡ä¸ï¼ä½¿ç¨æ·ä½éªååæççæè§ï¼äº«åå¯¹æççå®æã\n\nè®¡ç®çæä¸å°çä¸ç»´åæ çå³ç³»æ¥å¤æ­æ¯å¦ç¢°æã\n\n 1. æ¹å\n 2. éåº¦\n\n\n\n\n\n // 2 * 1 / 60 = 0.1ï¼è®°å½å»ä¸­çæå 30ms çä½ç½®\nconst nowPos = this.posArr[this.posArr.length - 1];\nconst prevPos = this.posArr[this.posArr.length - 3];\nif (nowPos && prevPos) {\n    // åç§»é\n    const offsetZ = prevPos.z - nowPos.z;\n    const offsetX = prevPos.x - nowPos.x;\n    // å¤æ­æ¹å\n    if (offsetX > 0) {\n        xDir = -1;\n    }\n    else if (offsetX < 0) {\n        xDir = 1;\n    }\n    // æ ¹æ®offsetç®éåº¦æ¯ä¾\n    this.xVelRatio = Math.min(2, 1 + Math.abs(offsetX) / 0.01);\n    this.zVelRatio = Math.min(2, 1 + Math.abs(offsetZ) / 0.1);\n}\n\n\n\n# AIç­ç¥\n\n 1. å¦ä½è®©ç¨æ·å¿èµ¢\n 2. å¦ä½è®©AIå¿èµ¢\n\næèï¼AI è½å¦æ¥ä½çæ¯é ä»ä¹æ§å¶çï¼ç­ï¼xè½´æ¹åçç§»å¨éåº¦\n\n\n# å¸§ç\n\nå½åå¤çæ¹å¼ï¼æ¯ä¸å¸§çä¼ç§»å¨ä¸å®çè·ç¦»ï¼å¨å¸§çä¸åçè®¾å¤ï¼ç§»å¨ç¸åçè·ç¦»æè±çæ¶é´ä¸ä¸æ ·ï¼è¿æ ·å°±å¯¼è´äºä¸åè®¾å¤ä¸ç§»å¨éåº¦ä¸ä¸è´çé®é¢ãä¸è¿æ¶é´æ¯ç»ä¸çï¼ææè®¾å¤ä¸ 1s å°±æ¯ 1sï¼å æ­¤ç±äºä¹åå¨æè®¡ç®æç©çº¿çæ¶åè½è·åå° z çå¼ï¼å æ­¤æä»¬å¯ä»¥éè¿è®¾ç½®å®æè¿ä¸ªæç©çº¿çæ¶é´ï¼æ¥æ§å¶ççéåº¦ï¼è¿æ ·å°±ä¸ä¾èµå¸§çäºãå¹¶ä¸ y å z çå³ç³»è¿æ¯æ»¡è¶³ç¹å®æç©çº¿æ¹ç¨ã\n\n\n# ç«é·ææ\n\n 1. æå°¾ï¼ç²å­ç³»ç»å®ç°ï¼ä½¿ç¨ ShaderMaterial å°çå½¢çº¹çå¾ççæé¡¶ç¹çè²å¨æ°æ®ï¼åä½¿ç¨çåçè²å¨ä¸ºé¡¶ç¹æç»çå½¢ç¶çæºçè²ãä¸ºäºå½¢ææå°¾ï¼éè¦å¤å¶é¡¶ç¹ä½ç½®ï¼å½çéå¿«çæ¶åç»å¶çæå°¾ä¼ä¸è¿ç»­ï¼å æ­¤å¢å æå¼è®©æå°¾è¿ç»­ï¼ä¹å¯ä»¥ä½¿ç¨ tween.js å¤çï¼ä½æ¯ä¼å¢å åä½ç§¯ã\n 2. ç¢°æå¨æï¼äºç»´å»æå¨æï¼å¾ççåæ¢\n 3. è½ç¹æç¤ºï¼è½å¨çå°ä¸çææï¼ä½¿ç¨ååçº¹çï¼å¨ç»éè¿ç¼©æ¾å®ç°\n 4. buffçååï¼buff çåååçº¹ç\n\n\n# ä»£ç ç»æ\n\nâââ const.js # å¸¸é\nâââ index.js # ä¸»ä½é¡µé¢\nâââ render #æ¸¸æç¸å³\nâ   âââ ai.js # aiçæ\nâ   âââ ball.js # ä¹ä¹ç\nâ   âââ collision.js # ç¢°æç¹æ\nâ   âââ const.js # å¸¸é\nâ   âââ index.js # æ¸²æå¥å£\nâ   âââ user.js # ææ¹çæ\nâ   âââ utils.js # utilæ¹æ³\nâââ styles.less # æ ·å¼\n\n\n\n# æ§è½ä¼å\n\n 1. three.jsèªå¸¦æ§è½çæµå·¥å·\n 2. çº¹çè´´å¾æ¿æ¢æ¨¡åï¼æ¡è¿ä½¿ç¨è´´å¾ï¼èæ¯ä½¿ç¨å¾ç\n 3. pagå¯¹æ¸¸æçå½±åï¼å¤ä¸ª pag å¯è½ä¼è¶è¿ canvas context çéå¶ï¼å¯¼è´åä¸ª pag ä¹é´æ¢å  GPU èµæºï¼æ¸¸ææ¨¡åæ æ³å è½½ã\n 4. é³é¢å è½½ä¼åï¼new Audio æ¯ä¸ä¸ªåæ­¥çæä½ï¼å æ­¤éè¦å¨ç©ºé²çæ¶ååå§åå¥½ï¼å¨ä½¿ç¨çæ¶åç´æ¥ play å³å¯ï¼audio play ä¹æ¯ä¸ä¸ªåæ­¥æä½ï¼ä¼é»å¡ js æ§è¡\n 5. æ¸¸æä¸­åºè¯¥æåä¸»æ¡æ¶å¤ä½çæä½ï¼ä¸»æ¡æ¶æä¸ä¸ªææ°çè½®è¯¢è¯·æ±ï¼å¨æ¸¸æä¸­æ²¡æåæ­¢ï¼ä¸å®ç¨åº¦ä¸ä¹å ç¨ç³»ç»èµæºã\n 6. æ¸¸æä¸­ä¿è¯æ¯ä¸å¸§çå¤çå½æ°å°½å¯è½å°çåæ­¥é»è¾ï¼ä¸äºèæ¶æä½ä½¿ç¨å¼æ­¥ã\n\n\n# å¼å®¹æ§\n\nthreejs å¼å®¹æ§é®é¢\n\n 1. 0.160.0 ä»¥ä¸ä¸æ¯æ webglï¼åªæ¯æ webgl2ï¼ä¼å¯¼è´é¨åææºç½å±\n 2. 0.158.0 ä»¥ä¸é¨åçè²å¨è¯­æ³ä¸æ¯æï¼å¯¼è´å¯¹åºæææ æ³æ¸²æ",normalizedContent:"# ä¹ä¹çæ¸¸æ\n\n\n# å±å¹çä½ç½®\n\nè¿è£åªé¢åè¿è£åªé¢å®ä¹äºç¸æºçæ¸²æèå´ãä½äºè¿è£åªé¢ä¹åçç©ä½åä½äºè¿è£åªé¢ä¹åçç©ä½é½ä¸ä¼è¢«æ¸²æãä¸ºäºæé«æ¸²ææ§è½ï¼éå¸¸åºè¯¥å°½éå°è¿è£åªé¢åè¿è£åªé¢ä¹é´çè·ç¦»è®¾ç½®å¾è¾å°ã\n\n\n\n\n\n\n# é¡µé¢ç»æ\n\ngltf/glb æ¨¡åï¼\n\n\n\n\n\nç´æ¥ä½¿ç¨æ¨¡åè½ç¶æ¹ä¾¿æä»¬å¼åï¼ä½æ¯è¿è¦èèå°æ§è½åèµæºçå½±åï¼ä¾å¦æ¬æ¬¡ä¸ä¸ªçæç glbæ¨¡åå¤§å°å°±ææ¥è¿800kbãå¼åæ¶éè¦èèææ²¡æå¶ä»æ¹å¼ã\n\n> å¦ä½ç»ä¸ç»´ä¸çè®¾ç½®èæ¯ï¼\n\n\n# hdr\n\nhigh-dynamic range ï¼hdrï¼imageçç¼©åï¼ç®åè¯´ï¼hdriæ¯ä¸ç§äº®åº¦èå´éå¸¸å¹¿çå¾åï¼å®æ¯å¶å®æ ¼å¼çå¾åæçæ´å¤§äº®åº¦çæ°æ®è´®å­ï¼èä¸å®è®°å½äº®åº¦çæ¹å¼ä¸ä¼ ç»çå¾çä¸åï¼ä¸æ¯ç¨éçº¿æ§çæ¹å¼å°äº®åº¦ä¿¡æ¯åç¼©å°8bitæ16bitçé¢è²ç©ºé´åï¼èæ¯ç¨ç´æ¥å¯¹åºçæ¹å¼è®°å½äº®åº¦ä¿¡æ¯ï¼å®å¯ä»¥è¯´è®°å½äºå¾çç¯å¢ä¸­çç§æä¿¡æ¯ï¼å æ­¤æä»¬å¯ä»¥ä½¿ç¨è¿ç§å¾åæ¥âç§äº®âåºæ¯ãæå¾å¤hdriæä»¶æ¯ä»¥å¨æ¯å¾çå½¢å¼æä¾çï¼æä»¬ä¹å¯ä»¥ç¨å®åç¯å¢èæ¯æ¥äº§çåå°ä¸æå°ã\n\nç¨æç®åæç´ç½ææçè¯æ¥æ»ç»è¯´ï¼hdriå°±æ¯ä¼ååçå¾çãå®çæ¯ä¸ä¸ªåç´ ï¼å°±ç¸å½äºæ¯ä¸ä¸ªå°ledç¯æ³¡ãæäº®çé¨åå°±æ¯å¤ªé³æå¨çé¨åãå ä¸ºå®æ¯ledç¯ï¼æä»¥å®å¯ä»¥æååè²ç§å°åºæ¥ï¼å½±åå°å¨å´ã\n\nimport {rgbeloader} from 'three/examples/jsm/loaders/rgbeloader';\nconst rgbeloader = new rgbeloader();\n\ufeff\nrgbeloader.load('xxx.hdr', envmap => {\n    // hdrä½ä¸ºç¯å¢è´´å¾çæï¼è®¾ç½®.mappingä¸ºequirectangularreflectionmapping\n    envmap.mapping = three.equirectangularreflectionmapping;\n    scene.environment = envmap; // è®¾ç½®æ¯ä¸ªç©ä½\n    scene.background = envmap; // è®¾ç½®æ´ä½çå¤©ç©ºèæ¯\n})\n\n\n\n# å¦ä½è®¾ç½®èæ¯å¾\n\n\n\n\n\n// å¯ä»¥ç» render è®¾ç½®éæï¼è¿æ ·åé¢çèæ¯å¾å°±ä¼å±ç¤ºåºæ¥\nconst renderer = new three.webglrenderer({antialias: true, alpha: true});\nrenderer.setclearalpha(0.0);\n\n\n\n# çº¹çè´´å¾\n\nå¯¹äºåºæ¯ä¸­çæäºå°æ¹çå±ç¤ºå¯ä»¥ç¨çº¹çè´´å¾\n\n\n\n\n\nconst geometry = new three.planegeometry(1.1, 0.3); // å¹³é¢\nconst textureloader = new three.textureloader();\ntextureloader.load(tablefootpng, texture => {\n    const material = new three.meshbasicmaterial({\n        map: texture,\n        transparent: true, // é²æ­¢å¾çèæ¯éæé¨åä¸ºé»è²\n    });\n    const mesh = new three.mesh(geometry, material);//çº¹çè´´å¾ç½æ ¼æ¨¡åå¯¹è±¡\n    mesh.position.set(0, -0.3, 1);\n    mesh.rotation.x = -math.pi / 6;\n    scene.add(mesh);//ç½æ ¼æ¨¡åæ·»å å°åºæ¯ä¸­\n});\n\n\nokï¼ç®åä½ç½®æä»¬èµæºé½åå¤å¥½äºï¼é£ä¹å¦ä½è¿è¡ç»è£å¢ï¼\n\n\n# åä½ä¸åæ \n\nå¨ three.js ä¸­ä¸è¬ä¼é»è®¤ä¸ä¸ªåä½å¯¹åºä¸ç±³ï¼ç¶åæååè§è§åå­¦å¯¹é½ï¼æ¯å¦æä»¬ä¹ä¹çä¸­è®¾ç½®çåä¸ªç©ä½çé¿å®½å¦ï¼\n\nconst tablewidth = 1.1; // æ¡å­å®½åº¦\nconst tabledepth = 2; // æ¡å­æ·±åº¦\nconst paddlewidth = 0.153; // çææ¨¡åå®½åº¦\nconst paddlehight = 0.22; // çææ¨¡åé«åº¦\n\n\nç¶åæä»¬éè¦çº¦å®å¥½åæ åç¹ï¼æ¯å¦æä»¬æ¬æ¬¡çº¦å®æ¡é¢ä¸­å¿ä¸ºå·¦è¾¹åç¹\n\n\n\næä»¬çº¦å®å¥½ä¸è¿°æ¡ä»¶åï¼è§è§æä¾ç»æä»¬çä¸è¬æ¨¡åä¸­ä¼èªå¸¦ä½ç½®ä¿¡æ¯ï¼æä»¬åªéè¦å°å¶ç´æ¥æ·»å å°åºæ¯ä¸­å³å¯\n\n// gltf å è½½å¨\nimport {gltfloader} from 'three/examples/jsm/loaders/gltfloader';\nconst loader = new gltfloader();\nconst tableglb = 'https://feed-activity.cdn.bcebos.com/lego/duanju/nowuhuan-table.glb'; // æ¡é¢\nloader.load(tableglb, gltf => {\n    scene.add(gltf.scene);\n});\n\n\n\n# éè§å³ç³»\n\næå½±ç¸å³ç¥è¯ï¼\n\n * è¶å¹¿è§ï¼20mmä»¥ä¸ï¼å¸¸ç¨äºé£åæå½±\n * å¹¿è§ï¼20mm-40mmï¼ææä¼¸ç©ºé´çææï¼æ¯å¦æ¿äº§ä¸­ä»æææ¿é´è§é¢ã\n * æ åç¦æ®µï¼40mm-60mmï¼ææ¥è¿äººç¼ï¼ç¨äºææäººå\n * é¿ç¦ï¼60mmä»¥ä¸ï¼æåç¼©ç©ºé´çææï¼ææè¿è·ç¦»ä¸»ä½ï¼å¦çææå½±åè¿å¨æå½±\n\n\n\nå¨ three.js ä¸­å·¦å¾è®¾ç½®çç¸æºç¦è·ä¸º 10mmï¼å³å¾è®¾ç½®çä¸º 35mmã\n\nç±äºè¦ä¿è¯ä¹ä¹çæ¡çå¤§å°ä¸åï¼10mmç¦è·çç¸æºç¦»ç©ä½è¾è¿ï¼35mmç¦è·çç¸æºç¦»ç©ä½è¾è¿ã\n\nç¦»ç©ä½çè·ç¦»ä¼æ¹åéè§å³ç³»ï¼æä»¥ä¸¤ç§ç¦è·çå°çä¹ä¹çæ¡å¹¶ä¸ä¸æ ·ã\n\ncamera.setfocallength(10); // è®¾ç½®ç¸æºç¦è·\n\n\n\n\n\n# æé¯é½¿\n\néè¿three.jså¼ååºç¨ç¨åºçæ¶åï¼åºæ¯æ¸²æææé»è®¤ä¼æé¯é½¿\n\n 1. æé«æ¸²æå¨çæé¯é½¿è´¨éï¼å¨åå»ºæ¸²æå¨æ¶ï¼å¯ä»¥è®¾ç½®æé¯é½¿å±æ§æ¥åå°é¯é½¿ã\n 2. ä½¿ç¨æ´é«åè¾¨çççº¹çæ¥åå°é¯é½¿ã\n 3. ä½¿ç¨å¤ééæ ·æé¯é½¿ï¼massï¼åå»ºæ´å¹³æ»çè¾¹ç¼ã\n 4. ä½¿ç¨å¹³æ»çè²ï¼smooth shadingï¼æ¥åå°é¯é½¿ã\n 5. ä½¿ç¨åæå¤çï¼post-processingï¼æ¥åå°é¯é½¿ã\n\nææè¶å¥½çç®æ³ï¼æ¸²æè´æä¹è¶éï¼æ­¤å¤æä»¬ç´æ¥ä½¿ç¨ç¬¬ä¸ç§å³å¯ã\n\nconst renderer = new three.webglrenderer({\n    antialias: true, // æé¯é½¿\n});\n// è®¾ç½®è®¾å¤åç´ æ¯ï¼é²æ­¢æ¨¡ç³è¾åº canvas\nrenderer.setpixelratio(window.devicepixelratio);\n\n\n\n\n\n\n\n# è¿å¨è½¨è¿¹\n\nä¸ç»´ç©ºé´ï¼æ¨ªåxè½´ï¼çºµåyè½´ï¼åç´äºå±å¹zè½´\n\n\n\n\n\nå°çè¿å¨è½¨è¿¹ï¼xè½´ï¼zè½´å¯ä»¥ååï¼yè½´ä¸ºæç©çº¿ï¼yézååï¼\n\n\n\næ±ç»è¿ï¼20ï¼0ï¼åï¼-10ï¼0ï¼ä¸å¼å£åä¸çæç©çº¿æ¹ç¨ï¼å½¢å¦ y = - (z - a)^2/ b + c æè y = az^2 + bz + cï¼å½ç¶æä»¬ä¸å¸ææ¯ä¸æ¬¡ä¹ä¹ççæç©çº¿è½¨è¿¹é½ç¸åï¼æä»¥æä»¬éè¦ç»åºä¸äºèå´ï¼éæºäº§çè½¨è¿¹çæç©çº¿ã\n\nconst calculateranges = (\n    {\n        currentpos, // å½åä½ç½®åæ \n        zrange = [-0.8, -0.2], // è½ç¹çzè½´èå´\n        brange = [-2, 2], // æé«ç¹çzè½´èå´\n        yrange = [0.12, 0.2], // zä¸º0æ¶çyè½´èå´\n    }\n) => {\n    const {y: yc, z: zc} = currentpos;\n    const [zmin, zmax] = zrange;\n    const [bmin, bmax] = brange;\n    const [ymin, ymax] = yrange;\n    const results = [];\n    for (let z = zmin; z < zmax; z += 0.01) {\n        for (let b = bmin; b <= bmax; b += 0.01) {\n            if (math.abs(zc - z) < 1e-6 || math.abs(z + b) < 1e-6) {\n                continue;\n            } // é¿ååæ¯ä¸º0\n            const anumerator = yc;\n            const adenominator = (zc - z) * (zc + z + 2 * b);\n            const a = anumerator / adenominator;\n            if (isnan(a) || !isfinite(a)) {\n                continue;\n            } // æ£æ¥açæææ§\n            const c = -a * (z + b) ** 2;\n            const inequalityleft = a * b ** 2 + c;\n            if (inequalityleft >= ymin && inequalityleft <= ymax) {\n                results.push({a, b, c, z});\n            }\n        }\n    }\n    const random = math.floor(math.random() * results.length);\n    return results[random];\n};\n\n\n\n# ç¨æ·äº¤äº\n\nç¨æ·å¦ä½æä½çæï¼ææè§¦æ¸å¨å±å¹ä¸å¶å®æ¯ä¸ªäºç»´å¹³é¢ï¼å¦ä½å¨äºç»´å¹³é¢ä¸æä½ä½¿å¾ä¸ç»´åºæ¯ä¸­ççæç§»å¨ï¼ãæ­¤å¤demoæ¼ç¤ºä¸ã\n\n * çæxåæ ï¼æ ¹æ®mousexåå\n * çæyåæ ï¼åºå®å³å¯\n * çæzåæ ï¼raycast ç®æ³æ±åºçå®çä¸ç»´åæ \n\n\n# raycast ç®æ³\n\nåçº¿æå°ç¨äºè¿è¡é¼ æ æ¾åï¼å¨ä¸ç»´ç©ºé´ä¸­è®¡ç®åºé¼ æ ç§»è¿äºä»ä¹ç©ä½ï¼\n\nhttps://threejs.org/docs/#api/zh/core/raycaster\n\n\n\n\n\nconst raycaster = new three.raycaster();\nconst pointer = new three.vector2();\n\ufeff\nfunction onpointermove( event ) {\n\t// å°é¼ æ ä½ç½®å½ä¸åä¸ºè®¾å¤åæ ãx å y æ¹åçåå¼èå´æ¯ (-1 to +1)\n\tpointer.x = ( event.clientx / window.innerwidth ) * 2 - 1;\n\tpointer.y = - ( event.clienty / window.innerheight ) * 2 + 1;\n}\n\ufeff\nfunction render() {\n\t// éè¿æåæºåé¼ æ ä½ç½®æ´æ°å°çº¿\n    // coords ââ å¨æ ååè®¾å¤åæ ä¸­é¼ æ çäºç»´åæ  ââ xåéä¸yåéåºå½å¨-1å°1ä¹é´ã\n    // camera ââ å°çº¿ææ¥æºçæåæºã\n\traycaster.setfromcamera( pointer, camera );\n\t// è®¡ç®ç©ä½åå°çº¿çç¦ç¹\n\tconst intersects = raycaster.intersectobjects( scene.children );\n\tfor ( let i = 0; i < intersects.length; i ++ ) {\n\t\tintersects[ i ].object.material.color.set( 0xff0000 );\n\t}\n\trenderer.render( scene, camera );\n}\n\ufeff\nwindow.addeventlistener( 'pointermove', onpointermove );\nwindow.requestanimationframe(render);\n\n\n\n# ç¸æºè§è§ç§»å¨\n\nä½¿ç¨æ·ä½éªæ¥åå»æä¹ä¹çææ¯çæè§ï¼å¢æ·»è§è§å²å»åã\n\næ­¤å¤åæ¼ç¤ºä¸ demoï¼ä¸»è¦ä¼åç¹ä¸ºï¼\n\n 1. aiå»ä¸­åç¸æºè·éä¹ä¹çè¿è¡ä¸å®ç¨åº¦çç§»å¨\n 2. è®¾å®éå¼é²æ­¢è§è§æçè¿è¿\n 3. å»ä¸­åè§è§åæ­£\n\n> ä¸ºäºå®ç°ç¸æºç§»å¨åï¼ç¨æ·çæä¹è·éç§»å¨ï¼éè¦å°ç¸æºåç¨æ·çææ·»å å°ä¸ä¸ª group ä¸­\n\ninitcameragroup() {\n    this.group = new three.group();\n    // å°ç¸æºæ·»å å°ç»ä¸­\n    this.group.add(camera);\n    // ç¨æ·çææ·»å å°ç»ä¸­\n    this.group.add(user);\n    // å°ç»æ·»å å°sceneä¸­\n    scene.add(this.group);\n}\n\n\nthree.groupæ¯ä¸ä¸ªç»åå¯¹è±¡ï¼æé¶æ£çå¯¹è±¡ç»åå°ä¸åä¾¿äºæä½ï¼å¯ä»¥ä½¿ç¨three.groupæ¥æä½ä¸ç»å¯¹è±¡ï¼åæ¬æè½¬ï¼ç¼©æ¾ï¼ç§»å¨ç­ï¼éé¢çå­å¯¹è±¡é½ä¼åå°å½±åã\n\n\n# ç¢°ææ£æµ\n\nå®æå¯¹æè¿ç¨çåºç¡ä¸ï¼ä½¿ç¨æ·ä½éªååæççæè§ï¼äº«åå¯¹æççå®æã\n\nè®¡ç®çæä¸å°çä¸ç»´åæ çå³ç³»æ¥å¤æ­æ¯å¦ç¢°æã\n\n 1. æ¹å\n 2. éåº¦\n\n\n\n\n\n // 2 * 1 / 60 = 0.1ï¼è®°å½å»ä¸­çæå 30ms çä½ç½®\nconst nowpos = this.posarr[this.posarr.length - 1];\nconst prevpos = this.posarr[this.posarr.length - 3];\nif (nowpos && prevpos) {\n    // åç§»é\n    const offsetz = prevpos.z - nowpos.z;\n    const offsetx = prevpos.x - nowpos.x;\n    // å¤æ­æ¹å\n    if (offsetx > 0) {\n        xdir = -1;\n    }\n    else if (offsetx < 0) {\n        xdir = 1;\n    }\n    // æ ¹æ®offsetç®éåº¦æ¯ä¾\n    this.xvelratio = math.min(2, 1 + math.abs(offsetx) / 0.01);\n    this.zvelratio = math.min(2, 1 + math.abs(offsetz) / 0.1);\n}\n\n\n\n# aiç­ç¥\n\n 1. å¦ä½è®©ç¨æ·å¿èµ¢\n 2. å¦ä½è®©aiå¿èµ¢\n\næèï¼ai è½å¦æ¥ä½çæ¯é ä»ä¹æ§å¶çï¼ç­ï¼xè½´æ¹åçç§»å¨éåº¦\n\n\n# å¸§ç\n\nå½åå¤çæ¹å¼ï¼æ¯ä¸å¸§çä¼ç§»å¨ä¸å®çè·ç¦»ï¼å¨å¸§çä¸åçè®¾å¤ï¼ç§»å¨ç¸åçè·ç¦»æè±çæ¶é´ä¸ä¸æ ·ï¼è¿æ ·å°±å¯¼è´äºä¸åè®¾å¤ä¸ç§»å¨éåº¦ä¸ä¸è´çé®é¢ãä¸è¿æ¶é´æ¯ç»ä¸çï¼ææè®¾å¤ä¸ 1s å°±æ¯ 1sï¼å æ­¤ç±äºä¹åå¨æè®¡ç®æç©çº¿çæ¶åè½è·åå° z çå¼ï¼å æ­¤æä»¬å¯ä»¥éè¿è®¾ç½®å®æè¿ä¸ªæç©çº¿çæ¶é´ï¼æ¥æ§å¶ççéåº¦ï¼è¿æ ·å°±ä¸ä¾èµå¸§çäºãå¹¶ä¸ y å z çå³ç³»è¿æ¯æ»¡è¶³ç¹å®æç©çº¿æ¹ç¨ã\n\n\n# ç«é·ææ\n\n 1. æå°¾ï¼ç²å­ç³»ç»å®ç°ï¼ä½¿ç¨ shadermaterial å°çå½¢çº¹çå¾ççæé¡¶ç¹çè²å¨æ°æ®ï¼åä½¿ç¨çåçè²å¨ä¸ºé¡¶ç¹æç»çå½¢ç¶çæºçè²ãä¸ºäºå½¢ææå°¾ï¼éè¦å¤å¶é¡¶ç¹ä½ç½®ï¼å½çéå¿«çæ¶åç»å¶çæå°¾ä¼ä¸è¿ç»­ï¼å æ­¤å¢å æå¼è®©æå°¾è¿ç»­ï¼ä¹å¯ä»¥ä½¿ç¨ tween.js å¤çï¼ä½æ¯ä¼å¢å åä½ç§¯ã\n 2. ç¢°æå¨æï¼äºç»´å»æå¨æï¼å¾ççåæ¢\n 3. è½ç¹æç¤ºï¼è½å¨çå°ä¸çææï¼ä½¿ç¨ååçº¹çï¼å¨ç»éè¿ç¼©æ¾å®ç°\n 4. buffçååï¼buff çåååçº¹ç\n\n\n# ä»£ç ç»æ\n\nâââ const.js # å¸¸é\nâââ index.js # ä¸»ä½é¡µé¢\nâââ render #æ¸¸æç¸å³\nâ   âââ ai.js # aiçæ\nâ   âââ ball.js # ä¹ä¹ç\nâ   âââ collision.js # ç¢°æç¹æ\nâ   âââ const.js # å¸¸é\nâ   âââ index.js # æ¸²æå¥å£\nâ   âââ user.js # ææ¹çæ\nâ   âââ utils.js # utilæ¹æ³\nâââ styles.less # æ ·å¼\n\n\n\n# æ§è½ä¼å\n\n 1. three.jsèªå¸¦æ§è½çæµå·¥å·\n 2. çº¹çè´´å¾æ¿æ¢æ¨¡åï¼æ¡è¿ä½¿ç¨è´´å¾ï¼èæ¯ä½¿ç¨å¾ç\n 3. pagå¯¹æ¸¸æçå½±åï¼å¤ä¸ª pag å¯è½ä¼è¶è¿ canvas context çéå¶ï¼å¯¼è´åä¸ª pag ä¹é´æ¢å  gpu èµæºï¼æ¸¸ææ¨¡åæ æ³å è½½ã\n 4. é³é¢å è½½ä¼åï¼new audio æ¯ä¸ä¸ªåæ­¥çæä½ï¼å æ­¤éè¦å¨ç©ºé²çæ¶ååå§åå¥½ï¼å¨ä½¿ç¨çæ¶åç´æ¥ play å³å¯ï¼audio play ä¹æ¯ä¸ä¸ªåæ­¥æä½ï¼ä¼é»å¡ js æ§è¡\n 5. æ¸¸æä¸­åºè¯¥æåä¸»æ¡æ¶å¤ä½çæä½ï¼ä¸»æ¡æ¶æä¸ä¸ªææ°çè½®è¯¢è¯·æ±ï¼å¨æ¸¸æä¸­æ²¡æåæ­¢ï¼ä¸å®ç¨åº¦ä¸ä¹å ç¨ç³»ç»èµæºã\n 6. æ¸¸æä¸­ä¿è¯æ¯ä¸å¸§çå¤çå½æ°å°½å¯è½å°çåæ­¥é»è¾ï¼ä¸äºèæ¶æä½ä½¿ç¨å¼æ­¥ã\n\n\n# å¼å®¹æ§\n\nthreejs å¼å®¹æ§é®é¢\n\n 1. 0.160.0 ä»¥ä¸ä¸æ¯æ webglï¼åªæ¯æ webgl2ï¼ä¼å¯¼è´é¨åææºç½å±\n 2. 0.158.0 ä»¥ä¸é¨åçè²å¨è¯­æ³ä¸æ¯æï¼å¯¼è´å¯¹åºæææ æ³æ¸²æ",charsets:{cjk:!0}},{title:"2021å¹´ 9-12æ",frontmatter:{},regularPath:"/time/2021.html",relativePath:"time/2021.md",key:"v-d382ca42",path:"/time/2021.html",lastUpdated:"7/8/2022, 6:03:34 PM",lastUpdatedTimestamp:1657274614e3,headersStr:null,content:"# 2021å¹´ 9-12æ\n\n * Reactåºç¡\n\n * Redux\n\n * React Hooks\n\n * TypeScriptåºç¡\n\n * TypeScriptè¿é¶\n\n * HMRåç",normalizedContent:"# 2021å¹´ 9-12æ\n\n * reactåºç¡\n\n * redux\n\n * react hooks\n\n * typescriptåºç¡\n\n * typescriptè¿é¶\n\n * hmråç",charsets:{cjk:!0}},{title:"2022å¹´ 1-6æ",frontmatter:{},regularPath:"/time/2022a.html",relativePath:"time/2022a.md",key:"v-0913acae",path:"/time/2022a.html",lastUpdated:"7/8/2022, 6:03:34 PM",lastUpdatedTimestamp:1657274614e3,headersStr:null,content:"# 2022å¹´ 1-6æ\n\n * ABtest\n\n * Nginx\n\n * devopsä»ç»\n\n * å¸¸è§è·¨åæ¹æ¡\n\n * yamlç®ä»\n\n * console.log æ§å¶å° I/O å¼æ­¥\n\n * ç§»å¨ç«¯h5å¼å\n\n * TypeScriptä¸­çè£é¥°å¨\n\n * process.envå¨å±åé\n\n * è·¨å¹³å°ä¸è·¨ç«¯ææ¯ç®ä»\n\n * ãæ·±å¥çè§£TypeScriptã\n\n * æå¡ç«¯æ¸²æ\n\n * san-loader åç\n\n * express\n\n * ç²¾è¯»ãæ·±å¥æµåºNodeJsã",normalizedContent:"# 2022å¹´ 1-6æ\n\n * abtest\n\n * nginx\n\n * devopsä»ç»\n\n * å¸¸è§è·¨åæ¹æ¡\n\n * yamlç®ä»\n\n * console.log æ§å¶å° i/o å¼æ­¥\n\n * ç§»å¨ç«¯h5å¼å\n\n * typescriptä¸­çè£é¥°å¨\n\n * process.envå¨å±åé\n\n * è·¨å¹³å°ä¸è·¨ç«¯ææ¯ç®ä»\n\n * ãæ·±å¥çè§£typescriptã\n\n * æå¡ç«¯æ¸²æ\n\n * san-loader åç\n\n * express\n\n * ç²¾è¯»ãæ·±å¥æµåºnodejsã",charsets:{cjk:!0}},{title:"react three fiber",frontmatter:{},regularPath:"/three/three3.html",relativePath:"three/three3.md",key:"v-3fa254c2",path:"/three/three3.html",headers:[{level:2,title:"react three fiber",slug:"react-three-fiber",normalizedTitle:"react three fiber",charIndex:2},{level:3,title:"Mesh ç½æ ¼",slug:"mesh-ç½æ ¼",normalizedTitle:"mesh ç½æ ¼",charIndex:280},{level:3,title:"Material æè´¨",slug:"material-æè´¨",normalizedTitle:"material æè´¨",charIndex:690},{level:3,title:"Texture çº¹ç",slug:"texture-çº¹ç",normalizedTitle:"texture çº¹ç",charIndex:1027},{level:3,title:"useFrame",slug:"useframe",normalizedTitle:"useframe",charIndex:1433},{level:3,title:"useLoader",slug:"useloader",normalizedTitle:"useloader",charIndex:1167},{level:3,title:"useGLTF",slug:"usegltf",normalizedTitle:"usegltf",charIndex:2371},{level:3,title:"GLTFæ ¼å¼",slug:"gltfæ ¼å¼",normalizedTitle:"gltfæ ¼å¼",charIndex:2520},{level:3,title:"GLTF å¨ç»",slug:"gltf-å¨ç»",normalizedTitle:"gltf å¨ç»",charIndex:2866},{level:3,title:"THREE.Scene.traverse()",slug:"three-scene-traverse",normalizedTitle:"three.scene.traverse()",charIndex:4590},{level:3,title:"åæºä»ç»",slug:"åæºä»ç»",normalizedTitle:"åæºä»ç»",charIndex:4750},{level:3,title:"é´å½±ç¸æº",slug:"é´å½±ç¸æº",normalizedTitle:"é´å½±ç¸æº",charIndex:5030},{level:3,title:"åæ°åæ³",slug:"åæ°åæ³",normalizedTitle:"åæ°åæ³",charIndex:5490},{level:3,title:"attach",slug:"attach",normalizedTitle:"attach",charIndex:6001},{level:3,title:"äºä»¶",slug:"äºä»¶",normalizedTitle:"äºä»¶",charIndex:6268},{level:3,title:"Shadows",slug:"shadows",normalizedTitle:"shadows",charIndex:7184},{level:2,title:"react three rapier ç©çå¼æ",slug:"react-three-rapier-ç©çå¼æ",normalizedTitle:"react three rapier ç©çå¼æ",charIndex:7903},{level:3,title:"Physics ç»ä»¶",slug:"physics-ç»ä»¶",normalizedTitle:"physics ç»ä»¶",charIndex:7977},{level:3,title:"RigidBody åä½",slug:"rigidbody-åä½",normalizedTitle:"rigidbody åä½",charIndex:8339},{level:3,title:"Automatic Colliders èªå¨ç¢°æä½",slug:"automatic-colliders-èªå¨ç¢°æä½",normalizedTitle:"automatic colliders èªå¨ç¢°æä½",charIndex:8686},{level:3,title:"Collision Events ç¢°æäºä»¶",slug:"collision-events-ç¢°æäºä»¶",normalizedTitle:"collision events ç¢°æäºä»¶",charIndex:10019},{level:3,title:"Configuring collision and solver groups éç½®ç¢°æç»",slug:"configuring-collision-and-solver-groups-éç½®ç¢°æç»",normalizedTitle:"configuring collision and solver groups éç½®ç¢°æç»",charIndex:11014},{level:3,title:"Contact force events ç¢°æåäºä»¶",slug:"contact-force-events-ç¢°æåäºä»¶",normalizedTitle:"contact force events ç¢°æåäºä»¶",charIndex:11101},{level:3,title:"Sensor ä¼ æå¨",slug:"sensor-ä¼ æå¨",normalizedTitle:"sensor ä¼ æå¨",charIndex:11567},{level:3,title:"useRapier",slug:"userapier",normalizedTitle:"userapier",charIndex:11903},{level:3,title:"Ray-casting åçº¿æå°",slug:"ray-casting-åçº¿æå°",normalizedTitle:"ray-casting åçº¿æå°",charIndex:12079},{level:2,title:"å°çå¼¹è·³æ¡ä¾",slug:"å°çå¼¹è·³æ¡ä¾",normalizedTitle:"å°çå¼¹è·³æ¡ä¾",charIndex:13022},{level:2,title:"React ç¸å³",slug:"react-ç¸å³",normalizedTitle:"react ç¸å³",charIndex:13883},{level:3,title:"createRoot",slug:"createroot",normalizedTitle:"createroot",charIndex:13896},{level:3,title:"Suspense",slug:"suspense",normalizedTitle:"suspense",charIndex:8173},{level:3,title:"Zustand",slug:"zustand",normalizedTitle:"zustand",charIndex:14041},{level:3,title:"å° JSX ä½ä¸ºå­ç»ä»¶ä¼ é",slug:"å°-jsx-ä½ä¸ºå­ç»ä»¶ä¼ é",normalizedTitle:"å° jsx ä½ä¸ºå­ç»ä»¶ä¼ é",charIndex:15818}],lastUpdated:"9/2/2025, 11:24:35 AM",lastUpdatedTimestamp:1756783475e3,headersStr:"react three fiber Mesh ç½æ ¼ Material æè´¨ Texture çº¹ç useFrame useLoader useGLTF GLTFæ ¼å¼ GLTF å¨ç» THREE.Scene.traverse() åæºä»ç» é´å½±ç¸æº åæ°åæ³ attach äºä»¶ Shadows react three rapier ç©çå¼æ Physics ç»ä»¶ RigidBody åä½ Automatic Colliders èªå¨ç¢°æä½ Collision Events ç¢°æäºä»¶ Configuring collision and solver groups éç½®ç¢°æç» Contact force events ç¢°æåäºä»¶ Sensor ä¼ æå¨ useRapier Ray-casting åçº¿æå° å°çå¼¹è·³æ¡ä¾ React ç¸å³ createRoot Suspense Zustand å° JSX ä½ä¸ºå­ç»ä»¶ä¼ é",content:"# react three fiber\n\nReact-three-fiber æ¯ä¸ä¸ªåºäº React ç3D æ¸²æåºï¼å®å°three.js çå¼ºå¤§æ¸²æè½åä¸React çå£°æå¼ç¼ç¨æ¨¡åç¸ç»åã\n\nhttps://docs.pmnd.rs/react-three-fiber/getting-started/introduction\n\n# åå»ºé¡¹ç®\nnpm create vite 3d-app\n\n# å®è£ä¾èµ\ncd 3d-app\nyarn\nyarn add three @react-three/fiber\n\n# Start\nnpm run dev\n\n\n\n# Mesh ç½æ ¼\n\nå¨Three.jsä¸­ï¼ç½æ ¼ï¼Meshï¼æ¯ç±å ä½ä½ï¼Geometryï¼åæè´¨ï¼Materialï¼ç»æçå¯¹è±¡ãè¦ç¼©æ¾ç½æ ¼å¯¹è±¡ï¼æ¨å¯ä»¥ä½¿ç¨ç½æ ¼å¯¹è±¡çscaleå±æ§ã\n\nå æ­¤å¨å®ä¹ä¸ä¸ªç©ä½æ¶ï¼æä»¬éè¦ä¾æ¬¡æå®ä¸ä¸ªç©ä½çãå½¢ç¶ãåãæè´¨ãï¼éè¿ä¸ç§ç¹æ®çç±»ãMeshãï¼æå°å¶ç§°ä¸ºãç½æ ¼ææãï¼å¨ Three.js ä¸­ï¼Mesh æ¯è¡¨ç¤ºä¸ç»´ç©ä½çåºç¡ç±»ï¼å®å°æ¥æ¶ä¸¤ä¸ªåæ°ï¼\n\n * geometryï¼å®ä¹ç©ä½çå½¢ç¶ï¼\n * materialï¼å®ä¹ç©ä½çæè´¨ï¼\n\nç°å¨ï¼è®©æä»¬åå»ºä¸ä¸ªç®åçç«æ¹ä½ï¼\n\nconst geometry = newTHREE.BoxGeometry()\nconst material = newTHREE.MeshBasicMaterial()\nconst mesh = newTHREE.Mesh(geometry, material)\nscene.add(mesh)\n\n\n\n\n\n# Material æè´¨\n\nhttps://threejs.org/docs/index.html?q=mater#api/zh/materials/Material\n\næè´¨æ¯**å ä½ä½è¡¨é¢çææï¼**ç¨æ¥å®ä¹ç©ä½å¤è§çå±æ§ãå®åå«å¦ä½æ¸²æç©ä½çä¿¡æ¯ï¼å¦é¢è²ï¼åç§ï¼åå°ç­ç­ãæè´¨å¯ä»¥è¢«èµäºä¸åçå±æ§ï¼ä»¥ä¾¿å®ç°åç§ä¸åçå¤è§ææã\n\n * MeshBasicMaterial åºç¡ç½æ ¼æè´¨ï¼ä¸ä¸ªä»¥ç®åçè²ï¼å¹³é¢æçº¿æ¡ï¼æ¹å¼æ¥ç»å¶å ä½ä½çæè´¨ï¼è¿ç§æè´¨ä¸ååç§çå½±åã\n * MeshStandardMaterial æ åç½æ ¼æè´¨ï¼ä¸ç§åºäºç©ççæ åæè´¨ã\n\næ´å¤æè´¨å¯ä»¥çè¿ç¯æç« ï¼https://juejin.cn/post/7224112064461144123\n\n\n# Texture çº¹ç\n\nTexture ç¨äºåå»ºä¸ä¸ªçº¹çè´´å¾ï¼å°å¶åºç¨å°ä¸ä¸ªè¡¨é¢ï¼æèä½ä¸ºåå°/æå°è´´å¾ãå°±ç±»ä¼¼å°ä¸ä¸ªåæ å¾çç²è´´å°ä¸ä¸ªååä¸ã\n\n// éè¿TextureLoader å è½½è´´å¾ï¼å¹¶çæçº¹çå¯¹è±¡ï¼äº¤ç»æè´¨çmapå±æ§ã\n  const ballTexture = useLoader(\n    THREE.TextureLoader,\n    \"./textures/beach_ball_texture.png\"\n  );\n  \n  <mesh castShadow receiveShadow>\n    <sphereGeometry args={[0.3, 128, 128]} />\n    <meshStandardMaterial map={ballTexture} flatShading />\n  </mesh>\n\n\nè¿å¼ è´´å¾ä¼æç§ç­è·åæ±æå½±çåçæ å°å°çä½ä¸\n\n\n\n\n\n\n# useFrame\n\næ­¤hookåè®¸å¨é¡µé¢æ¯ä¸å¸§æ¸²æçæ¶åè¿è¡ä»£ç ï¼æ¯å¦æ´æ°æ¸²æææãæ§ä»¶ç­ï¼ä¸Three.jsä¸­è°ç¨requestAnimationFrameå®è¡éç»å¨ç»æææ¯ä¸æ ·çãä½ å°æ¥æ¶å°ç¶*æå¼stateåæ¶éå¢édeltaãåè°å½æ°å°å¨æ¸²æå¸§ä¹åè¢«è°ç¨ï¼å½ç»ä»¶å¸è½½æ¶ï¼å®ä¼èªå¨ä»æ¸²æå¾ªç¯ä¸­æ³¨éã\n\n * deltaï¼è¥è®¾å¤çå±å¹å·æ°é¢çé® 60Hzï¼å³æ¯ç§éå±å¹å·æ°60æ¬¡ï¼æ¯æ¬¡å·æ°ä¸º 1/60 = 0.016sï¼è¿éç delta å¼å³ä¸º 0.016\n\nuseFrame((state, delta, xrFrame)=>{// æ­¤å½æ°å¨å±äº«æ¸²æå¾ªç¯åä»¥æ¬æºå·æ°çè¿è¡});\n\n\n\n# useLoader\n\nhttps://docs.pmnd.rs/react-three-fiber/tutorials/loading-models\n\nå¦æä½ æ³å¨ Three.js Fiber åºç¨ç¨åºä¸­å è½½æ¨¡åï¼å¯ä»¥ä½¿ç¨ Three.js çuseLoaderé©å­æ¥å®ç°ãè¿ä¸ªé©å­åè®¸ä½ å¨ React ç»ä»¶ä¸­å¼æ­¥å è½½ Three.js ä¸­çèµæºï¼åæ¬æ¨¡åãçº¹çåå¶ä»æä»¶ãç¶åï¼ä½ å¯ä»¥å¨ç»ä»¶ä¸­ä½¿ç¨ useLoader é©å­æ¥å¼æ­¥å è½½ glTF æ¨¡åãå¨å è½½å®æåï¼é©å­å°è¿åä¸ä¸ªåå«å è½½çæ¨¡åç THREE.Group å®ä¾ãä½ å¯ä»¥å°è¿ä¸ªå®ä¾æ·»å å°åºæ¯ä¸­ï¼æèå¨ç»ä»¶ç JSX ä¸­ä½¿ç¨å®ï¼\n\nimport { useLoader } from '@react-three/fiber';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\n\nfunction Model() {\n  const gltf = useLoader(GLTFLoader, '/path/to/model.gltf');\n  return <primitive object={gltf.scene} />;\n}\n\n// <primitive object={...} /> can mount any existing, foreign threejs object into the scene.\n\n\n\n# useGLTF\n\n// å è½½æ¨¡åå¯ä»¥ä½¿ç¨ useGLTF\nimport { useGLTF } from '@react-three/drei'\nconst gltf = useGLTF('/test.glb')\n\nuseGLTF.preload('/test.glb') // é¢å è½½\n\n\n\n# GLTFæ ¼å¼\n\nGLTF ææ¡£\n\nä»£ç ä¸­æå°å¼å¥ç GLTF æ¯å¦ä¸æ ¼å¼ï¼\n\n\n\n * scenesï¼ä¸ä¸ªGLTF å¯è½åå«å¤ä¸ªåºæ¯\n * sceneï¼sceneå±æ§æç¤ºè¿äºåºæ¯ä¸­çåªä¸ä¸ªåºè¯¥æ¯å è½½èµäº§æ¶æ¾ç¤ºçé»è®¤åºæ¯ï¼å®éè¿å¼ç¨nodeæ¥å®ä¹åºæ¯å¾ã\n * nodesï¼æ¯ä¸ªåºæ¯é½å¯¹åºä¸ä¸ª nodes æ°ç»\n * nodeï¼åºæ¯å¾ä¸­çä¸ä¸ªç»ç¹ãå®å¯ä»¥åå«ä¸ä¸ªåæ¢(æ¯å¦æè½¬æå¹³ç§»)ï¼å¼ç¨æ´å¤çå­ç»ç¹ãå®å¯ä»¥å¼ç¨ mesh å cameraã\n * animationï¼animation å¯ä»¥ç¨æ¥æè¿°èç¹çtranslationãrotationæscaleå±æ§å¦ä½éæ¶é´ååã\n * materialsï¼åå«å®ä¹æè´¨åå¶å±æ§çåç´ ï¼è¿éæ¯ MeshBasicMaterial\n\n\n\n\n# GLTF å¨ç»\n\nThree.jsçæåºç¡çå¨ç»ç³»ç»ï¼ç±ä»¥ä¸å é¨åç»æï¼\n\n * KeyFrameTrack\n * AnimationClip\n * AnimitionMixer\n * AnimationAction\n\n# AnimationClip\n\nå¨å»ºæ¨¡è½¯ä»¶å¶ä½å¥½å¨ç»ä¹åï¼å¯ä»¥å¯¼åºæ¨¡åæä»¶ï¼éè¿Loaderå°æ¨¡åæä»¶å è½½ä¹åï¼å»ºæ¨¡è½¯ä»¶å¶ä½çå¨ç»å°±ä¼è¢«ä¿å­å¨animationsä¸­ãè¿ä¸ªanimationså°±æ¯ä¸ä¸ªAnimationClipçæ°ç»ã\n\nä¾å¦ï¼å¸¸è§çå¯¹äººè¿è¡å»ºæ¨¡æ¶ï¼éå¸¸ä¼åå«ä¸äºå¨ä½å¨ç»ï¼èµ°è·¯ãè·æ­¥ãæ¥æç­ãå¯¼åºæ¨¡ååï¼è¢«Loaderè½½å¥ä¹åï¼æ¯ä¸ä¸ªå¨ä½é½ä¼åæä¸ä¸ªAnimationClipå¯¹è±¡ã\n\nä¸é¢è¿ä¸ªä¾å­éåªæä¸ä¸ª AnimationClip å¯¹è±¡ï¼è¯´æåªæä¸ä¸ªå¨ç»ãå¦ææå¤ä¸ªå¨ç»æ¶ï¼å¯è½éè¦ç¨æ·åæäºæä½æ¥æ­æ¾ä¸åçå¨ç»ã\n\n\n\n# KeyFrameTrack\n\nå¯¹äºæ¯ä¸ªAnimationClipï¼å¯ä»¥çè§£ä¸ºæ¯ä¸ªå¨ä½ï¼ï¼é½åå«äºå¾å¤å¯¹è±¡å±æ§çååãä¾å¦ï¼è·æ­¥è¿ä¸ªå¨ä½åå«ï¼å·¦è³èãå³è³èãå·¦è¿ãå³è¿ç­å¯¹è±¡çå±æ§ååãå¯¹äºæ¯ä¸ä¸ªå±æ§ï¼å¯ä»¥éè¿å³é®å¸§ï¼KeyFrameTrackï¼æ¥æè¿°å®çååãå¦è¿ä¸ª AnimationClip ä¸­åå«äºè®¸å¤ KeyFrameTrackï¼\n\n\n\n# AnimationMixer\n\nhttps://threejs.org/docs/#api/zh/animation/AnimationMixer\n\n * æè¿°ï¼å¨ç»æ··åå¨æ¯ç¨äºåºæ¯ä¸­ç¹å®å¯¹è±¡çå¨ç»çæ­æ¾å¨ãå½åºæ¯ä¸­çå¤ä¸ªå¯¹è±¡ç¬ç«å¨ç»æ¶ï¼æ¯ä¸ªå¯¹è±¡é½å¯ä»¥ä½¿ç¨åä¸ä¸ªå¨ç»æ··åå¨ãå¯ä»¥çè§£æä¸ä¸ªæ»æ§å¶å°ï¼å®çä½ç¨ï¼å°±æ¯ç¨æ¥æ§å¶âæ¶å»â ãå¯ä»¥å½¢è±¡ççè§£ä¸ºæ¯ä¸ä¸ªå¨ç»æ­æ¾çè¿åº¦æ¡ã\n * åæ°ï¼rootObject æ··åå¨æ­æ¾çå¨ç»æå±çå¯¹è±¡ãå°±æ¯åå«å¨ç»æ¨¡åçåºæ¯å¯¹è±¡ã\n * å¸¸ç¨å±æ§ï¼\n   * .time å¨å±çæ··åå¨æ¶é´ã\n   * .clipAction(AnimationClip) è¿åæä¼ å¥çåªè¾åæ°çAnimationActionå¯¹è±¡ã\n   * .getRoot() è¿åæ··åå¨çæ ¹å¯¹è±¡ã\n   * .update() æ¨è¿æ··åå¨æ¶é´å¹¶æ´æ°å¨ç»ãå¨æ¸²æå½æ°ä¸­è°ç¨æ´æ°å¨ç»ã\n\n# AnimationAction\n\nhttps://threejs.org/docs/#api/zh/animation/AnimationAction\n\nAnimationActions ç¨æ¥è°åº¦å­å¨å¨AnimationClipsä¸­çå¨ç»ãéè¿AnimationMixer.clipAction()è¿è¡åå»ºãè¿ä¸ªå¨ä½å¯ä»¥çè§£ä¸ºæAnimationClipæ¾è¿æ§å¶å°è¿è¡æ­æ¾ãAnimationActionæä¾äºä¸ç³»åçAPIæ¥æ§å¶å¯¹åºçAnimationClipçæ­æ¾ã\n\n// å¼å¥ gltf\nconst meta = useGLTF('./models/dazhaohu.glb');\n// è·å åºæ¯åå¨ç»\nconst { scene, animations } = meta;\n// åå»ºå¨ç»æ··åå¨\nconst mixer = new THREE.AnimationMixer(scene);\n// éåå¨ç»\nanimations.forEach((clip) => {\n    // animationMixer.clipAction æ¥çæ animationAction ï¼ç¶åè¿è¡ play\n    mixer.clipAction(clip).play();\n});\n\nconst clock = new THREE.Clock();\nfunction animate() {\n    requestAnimationFrame(animate);\n    const delta = clock.getDelta();\n    if (mixer !== undefined) {\n        // æ¨è¿æ··åå¨æ¶é´å¹¶æ´æ°å¨ç»\n        mixer.update(delta);\n    }\n}\n\n\n\n# THREE.Scene.traverse()\n\næä»¬å¯ä»¥å°ä¸ä¸ªæ¹æ³ä½ä¸ºåæ°ä¼ éç» traverse() æ¹æ³ï¼è¿ä¸ªä¼ éæ¥çæ¹æ³å°ä¼å¨æ¯ä¸ä¸ªå­å¯¹è±¡ä¸æ§è¡ãç±äºTHREE.Sceneå¯¹è±¡å­å¨çæ¯å¯¹è±¡æ ï¼æä»¥å¦æå­å¯¹è±¡æ¬èº«è¿æå­å¯¹è±¡ï¼traverse()æ¹æ³ä¼å¨ææçå­å¯¹è±¡ä¸æ§è¡ï¼ç´å°éåå®åºæ¯æ ä¸­çææå¯¹è±¡ä¸ºæ­¢ã\n\n\n# åæºä»ç»\n\nhttps://hicc.pro/p/three.js/threejs-lighting#threepointlight%E7%82%B9%E5%85%89%E6%BA%90\n\n * Ambient Lightï¼ç¯å¢åå¯ä»¥ç§äº®ä¸ç»´åºæ¯ä¸­çææç©ä½ï¼æ²¡æé´å½±ï¼åªæä¸¤ä¸ªå±æ§ï¼coloråintensity\n * DirectionalLightï¼æ¹åæ¯ä»ä¸ä¸ªå¹³è¡åçä½ç½® position å° target çä½ç½®\n   * targetï¼ç¯åä»å®çä½ç½®ï¼positionï¼æåç®æ ä½ç½®ãé»è®¤çç®æ ä½ç½® target ä¸º(0, 0, 0)ã\n\n\n# é´å½±ç¸æº\n\nä¸ºäºå¨three.jsä¸­ä½¿ç¨é´å½±ï¼æ¨éè¦åå»ºä¸ä¸ªé´å½±ç¸æºã\n\né´å½±ç¸æºï¼Shadow Cameraï¼æ¯ä¸ä¸ªç¨äºçæé´å½±å¾åçèæç¸æºãå®ä¸ä¼å¨å±å¹ä¸æ¸²æå¾åï¼èæ¯å¨åå°è®¡ç®é´å½±è´´å¾ãé´å½±ç¸æºç±»ä¼¼äºåºæ¯ä¸­çä¸»ç¸æºï¼ä½æ¯éè¦ä¸äºä¸åçè®¾ç½®ååæ°ã\n\n\n\nconst light = useRef();\n<directionalLight\n    ref={light}\n    castShadow\n    position={[4, 4, 1]}\n    intensity={1.5}\n    shadow-mapSize={[512, 512]}\n    shadow-camera-near={1}\n    shadow-camera-far={10}\n    shadow-camera-top={10}\n    shadow-camera-right={10}\n    shadow-camera-bottom={-10}\n    shadow-camera-left={-10}\n />\n\n\n\n# åæ°åæ³\n\nnew THREE.SphereGeometry(1, 32)\n// å¨ React Three Fiber ä¸­ï¼æé å½æ°åæ°å§ç»éè¿ args ä½ä¸ºæ°ç»ä¼ é\n\n// çä½å ä½ä½ï¼åæ°ä¸ºï¼åå¾ï¼æ°´å¹³åæ®µæ°ï¼åç´åæ®µæ°ï¼è¯¦è§ https://threejs.org/docs/#api/zh/geometries/SphereGeometry\n<sphereGeometry args={[1, 32, 32]} />\n\n// ç±»ä¼¼å° <meshStandardMaterial color={new THREE.Color('hotpink')} /> å¯ä»¥ç´æ¥åæ\n<meshStandardMaterial color=\"hotpink\" />\n\n// ç¼©æ¾ mesh ç scale åæ°å¯ä»¥åæ <mesh scale={[1, 1, 1]} />\n<mesh scale={1} />\n\n// åµå¥å±æ§ mesh.rotation.x ç¨ç ´æå·\n<mesh rotation-x={1} material-uniforms-resolution-value={[512, 512]} />\n\n\n\n# attach\n\nhttps://docs.pmnd.rs/react-three-fiber/api/objects#attach\n\n<mesh>\n  <meshNormalMaterial attach=\"material\" />\n  <boxGeometry attach=\"geometry\" />\n</mesh>\n\n// equal to\n\nmesh.material = new THREE.MeshNormalMaterial()\nmesh.geometry = new THREE.BoxGeometry()\n\n\n\n# äºä»¶\n\nåæµè§å¨äºä»¶ç±»ä¼¼ï¼https://developer.mozilla.org/zh-CN/docs/Web/API/Pointer_events#%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%85%A8%E5%B1%80%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86\n\n<mesh\n  onClick={(e) => console.log('click')}\n  onContextMenu={(e) => console.log('context menu')}\n  onDoubleClick={(e) => console.log('double click')}\n  onWheel={(e) => console.log('wheel spins æ»è½®')}\n  onPointerUp={(e) => console.log('up')}\n  onPointerDown={(e) => console.log('down')}\n  onPointerOver={(e) => console.log('over')}\n  onPointerOut={(e) => console.log('out')}\n  onPointerEnter={(e) => console.log('enter')}\n  onPointerLeave={(e) => console.log('leave')}\n  onPointerMove={(e) => console.log('move')}\n  onPointerMissed={() => console.log('missed')} // fires on clicks that haven't hit any meshes.\n  onUpdate={(self) => console.log('props have been updated')} // that is called every time the object gets fresh props,\n/>\n\n\n\n# Shadows\n\n// shadows å±æ§ä»£è¡¨å¨å±åè®¸æ·»å é´å½±\n<Canvas shadows />\n\n// castShadow ä»£è¡¨åè®¸æå°é´å½±\n<mesh castShadow />\n\n// receiveShadow ä»£è¡¨åè®¸æ¥æ¶é´å½±\n<mesh receiveShadow />\n\n\nä¸ä¸ªä¾å­\n\n<Canvas shadows camera={{ position: [0, 3, 3] }}>\n  // ç©ä½æå°é´å½±\n  <mesh rotation-y={Math.PI / 4} castShadow>\n    <boxGeometry />\n    <meshStandardMaterial color=\"white\" />\n  </mesh>\n    \n  // å¹³é¢æ¥æ¶é´å½±\n  <mesh rotation-x={-Math.PI / 2} position-y={-0.5} receiveShadow>\n    <planeGeometry args={[5, 5]} />\n    <meshStandardMaterial color=\"white\" />\n  </mesh>\n  \n  // é¤æ­¤ä¹å¤ï¼è¿ææ·»å ç¯å castShadowï¼ä¸ç¶ä¸ä¼å±ç¤ºé´å½±\n  <directionalLight position={[5, 5, 5]} intensity={0.5} castShadow />\n  <directionalLight position={[-5, 5, 5]} intensity={0.5} color=\"red\" castShadow />\n</Canvas>\n\n\n\n\n\n# react three rapier ç©çå¼æ\n\nhttps://github.com/pmndrs/react-three-rapier\n\n\n# Physics ç»ä»¶\n\nhttps://github.com/pmndrs/react-three-rapier?tab=readme-ov-file#the-physics-component\n\n * gravity éåï¼é»è®¤ä¸º [0, -9.81, 0]ï¼ç¨æ¥æ¨¡æçå®ç©çä¸ç\n\nconst Scene = () => {\n  return (\n    <Canvas>\n      <Suspense>\n        <Physics gravity={[0, 1, 0]} interpolation={false} colliders={false}>\n          ...\n        </Physics>\n      </Suspense>\n    </Canvas>\n  );\n};\n\n\n\n# RigidBody åä½\n\n * restitution={0.2}ï¼å¼¹æ§ç³»æ° ï¼è¡¡éä¸¤ä¸ªç©ä½å¨ç¢°æåçåå¼¹ç¨åº¦\n * friction={1}ï¼æ©æ¦åï¼æ©æ¦åæ¯å¯¹æç¢°æä½æ¥è§¦çä¸¤ä¸ªåä½ä¹é´ç¸å¯¹ååè¿å¨çå\n * linearDamping={0.5}ï¼çº¿æ§é»å°¼ï¼ç¨äºåå°åä½ççº¿æ§éçï¼å¼è¶å¤§ç©ä½ç§»å¨è¶æ¢\n * angulularDamping={0.5}ï¼è§é»å°¼ï¼ç¨äºåå°åä½çæè½¬éçï¼å¼è¶å¤§åä½æè½¬è¶æ¢\n\nåä½ç»ä»¶å¸¸ç¨äºå¨ physics ä¸­æ·»å ä¸ä¸ª mesh ï¼åºäº mesh çå½¢ç¶ä¼é»è®¤çæä¸ä¸ª Collidersã\n\nconst RigidBodyMesh = () => (\n  <RigidBody>\n    <mesh />\n  </RigidBody>\n);\n\n\n\n# Automatic Colliders èªå¨ç¢°æä½\n\né»è®¤æåµä¸ï¼RigidBody ä¼ä¸ºå¶åå«çææç½æ ¼ä½çæèªå¨ç¢°æä½ãæ¨å¯ä»¥éè¿å¨ ä¸è®¾ç½® colliders å±æ§æ¥æ§å¶ç¢°æä½ï¼æèéè¿å¨ ä¸è®¾ç½® colliders æ¥å¨å±æ´æ¹å®ãè®¾ç½® Colliders={false} ä¼ç¦æ­¢èªå¨çæã\n\nconst Scene = () => (\n  <Physics colliders=\"hull\">\n    <RigidBody>\n      <Box />\n    </RigidBody>\n    <RigidBody position={[0, 10, 0]}>\n      <Sphere />\n    </RigidBody>\n  </Physics>\n);\n\n// å³é­ physics è®¾ç½®å¨å±ç¢°æä½ï¼å¨æ¯ä¸ª RigidBody ä¸è®¾ç½®\nconst Scene = () => (\n  <Physics colliders={false}>\n    {/* Use an automatic CuboidCollider for all meshes inside this RigidBody */}\n    <RigidBody colliders=\"cuboid\">\n      <Box />\n    </RigidBody>\n\n    {/* Use an automatic BallCollider for all meshes inside this RigidBody */}\n    <RigidBody position={[0, 10, 0]} colliders=\"ball\">\n      <Sphere />\n    </RigidBody>\n  </Physics>\n);\n\n\nç¢°æä½åæ¬å ç§ç±»åï¼cuboidï¼é¿æ¹ä½ï¼ãballï¼çä½ï¼ãtrimeshãhull\n\nä¸ä¸ªç´è§çä¾å­ï¼https://codesandbox.io/p/sandbox/react-three-rapier-auto-colliders-b4coz1?file=%2Fsrc%2FApp.tsx%3A35%2C29-35%2C36\n\n\n\nå½ç¶æä»¬ä¹å¯ä»¥å¨ RigidBody ä¸­æå¨åå»º colliders\n\nconst Scene = () => (<>\n  {/* åå»ºèªå®ä¹çç¢°æä½ */}\n  <RigidBody position={[0, 10, 0]}>\n    <BallCollider args={[0.5]} /> // çä½ï¼åæ°ä¸ºåå¾\n    \n    <CuboidCollider args={[0.5, 0.5, 0.5]} /> // é¿æ¹ä½ï¼åæ°ä¸ºé¿å®½é«\n    \n    <MeshCollider type=\"trimesh\">\n      <mesh ... />\n    </MeshCollider>\n\n    <MeshCollider type=\"hull\">\n      <mesh ... />\n    </MeshCollider>\n  </RigidBody>\n<>)\n\n\n\n# Collision Events ç¢°æäºä»¶\n\n * onCollisionEnterï¼å¼å§ç¢°æ\n   * targetï¼è§¦åç¢°æçç©ä½\n   * otherï¼è¢«ç¢°æçç©ä½\n   * manifoldï¼ç¢°æäº§ççæ¥è§¦æµå½¢ï¼contact manifoldï¼\n * onCollisionExitï¼ç¢°æç»æ\n\nconst RigidBottle = () => {\n  const [isAsleep, setIsAsleep] = useState(false);\n\n  return (\n    <RigidBody\n      colliders=\"hull\"\n      onSleep={() => setIsAsleep(true)}\n      onWake={() => setIsAsleep(false)}\n      name=\"Bally McBallFace\"\n      onCollisionEnter={({ manifold, target, other }) => {\n        console.log(\n          \"Collision at world position \",\n          manifold.solverContactPoint(0)\n        );\n\n        if (other.rigidBodyObject) {\n          console.log(\n            // this rigid body's Object3D\n            target.rigidBodyObject.name,\n            \" collided with \",\n            // the other rigid body's Object3D\n            other.rigidBodyObject.name\n          );\n        }\n      }}\n    >\n      <Sphere>\n        <meshPhysicalMaterial color={isAsleep ? \"white\" : \"blue\"} />\n      </Sphere>\n    </RigidBody>\n  );\n};\n\n\n\n# Configuring collision and solver groups éç½®ç¢°æç»\n\næææé²æ­¢ç¢°æä½ç´æ¥ç¸äºç¢°æçæ¹æ³å°±æ¯ç»åºç¢°æä½æå±çç¢°æç»ãè¯¦è§ææ¡£\n\n\n# Contact force events ç¢°æåäºä»¶\n\nå¨ç¢°æä½åçç¢°ææ¶ä¼è§¦åç¢°æåäºä»¶\n\n<RigidBody\n  colliders=\"ball\"\n  onContactForce={(payload) => {\n    console.log(`The total force generated was: ${payload.totalForce}`);\n  }}\n>\n  <Sphere>\n    <meshPhysicalMaterial color={\"grey\"} />\n  </Sphere>\n</RigidBody>\n\n\n * payloadï¼\n   * targetï¼è§¦åç¢°æçç©ä½\n   * otherï¼è¢«ç¢°æçç©ä½\n   * totalForceï¼ä¸¤ä¸ªç¢°æä½ä¹é´ææåçæ»å\n   * totalForceMagnitudeï¼ä¸¤ä¸ªç¢°æä½ä¹é´ææåå¤§å°æ»å\n   * maxForceDirectionï¼æ¥è§¦ç¹å¤æå¤§åçæ¹å\n   * maxForceMagnitudeï¼æ¥è§¦ç¹å¤æå¤§åçå¤§å°\n\n\n\n\n# Sensor ä¼ æå¨\n\nhttps://github.com/pmndrs/react-three-rapier?tab=readme-ov-file#sensors\n\nç¢°æä½å¯ä»¥è®¾ç½®ä¼ æå¨ï¼å®å¯ä»¥ç¨äºçæµä¸ä¸ªç¢°æä½è¿å¥æèç¦»å¼å¦ä¸ä¸ªç¢°æä½ï¼å¨æ­¤è¿ç¨ä¸­ä¸ä¼ç»åç¢°æã\n\n * onIntersectionEnter\n * onIntersectionExit\n\n<RigidBody>\n  <GoalPosts />\n\n  <CuboidCollider\n    args={[5, 5, 1]}\n    sensor\n    onIntersectionEnter={() => console.log(\"Goal!\")}\n  />\n</RigidBody>\n\n\n\n# useRapier\n\nhttps://github.com/pmndrs/react-three-rapier?tab=readme-ov-file#advanced-hooks-usage\n\nå¦ææ³è¦å¯¹ç©çä¸çæ´å ç²¾ç»çæ§å¶ï¼å¯è½éè¦ç¨å° useRapier\n\nconst { rapier, world } = useRapier();\n\n\n\n# Ray-casting åçº¿æå°\n\nhttps://rapier.rs/docs/user_guides/javascript/scene_queries/#ray-casting\n\nåçº¿æå°å¯æ¥æ¾ä¸åçº¿ç¸äº¤çä¸ä¸ªæå¤ä¸ªç¢°æä½ãåçº¿æå°æ¯ä¸ç§æå¶å¸¸è§çæä½ï¼æ¶µçäºå¤ç§ç¨ä¾ï¼åå°å­å¼¹ãè§è²æ§å¶å¨ãæ¸²æã\n\nå°çº¿ï¼https://threejs.org/docs/#api/zh/math/Ray\n\n * origin - å°çº¿çåç¹ï¼é»è®¤å¼æ¯ä¸ä¸ªä½äº(0, 0, 0)çVector3ã\n * direction - å°çº¿çæ¹åãè¯¥åéå¿é¡»ç»è¿æ ååä½¿åéé¿åº¦ä¸º1ï¼ä½¿ç¨Vector3.normalizeï¼ï¼è¿æ ·æè½ä½¿æ¹æ³æ­£å¸¸è¿è¡ã é»è®¤å¼æ¯ä¸ä¸ªä½äº(0, 0, -1)çVector3ã\n\n// åçº¿ç± origin [1, 2, 3] å direction [0, 1, 0] å®ä¹ï¼\nlet ray = new RAPIER.Ray({ x: 1.0, y: 2.0, z: 3.0 }, { x: 0.0, y: 1.0, z: 0.0 });\nlet maxToi = 4.0;\nlet solid = true;\n\n// maxToi: max time of impact\n// solid: considers everything as solid (å¦æåçº¿èµ·ç¹å¨ä¸ä¸ªåºä½åï¼é£ä¹åçº¿åæ æ³ç»§ç»­ä¼ æ­ï¼toi ä¸º 0ï¼ è¥è®¾ç½®ä¸ºfalseé£ä¹ä¼ç»§ç»­ä¼ æ­ç´å°è§¦ç¢°å°åºä½è¾¹ç)\nlet hit = world.castRay(ray, maxToi, solid);\n\n// å¦æåçº¿åçç¢°æ\nif (hit != null) {\n    // åçº¿ä¼ æ­çè·ç¦» = ray.dir * toi\n    // æå»ç¹ = ray.origin + ray.dir * toi\n    let hitPoint = ray.pointAt(hit.toi); // hit.toi å³ä¸ºåçç¢°ææç»åçæ¶é´\n    console.log(\"Collider\", hit.colliderHandle, \"hit at point\", hitPoint);\n}\n\n\n\n\n# å°çå¼¹è·³æ¡ä¾\n\n\n\néè¦å®ç°ç¹å»ãè·³ãå°çå¼¹èµ·ï¼å·²ç¥ï¼\n\n 1. åºé¨åå¼¹å¹³é¢æå¤ä½ç½®ä¸º y = -0.1ï¼é«åº¦ä¸º 0.1ï¼æä»¥è¥å°çéæ­¢å¨å¹³é¢ä¸å°çåºé¨åæ­£å¥½å¤äº y = 0\n 2. å°çå¨ç©ºä¸­ä¸è½å¼¹è·³ï¼åªè½å¤å¨å¹³é¢ä¸æ¶è¿è¡è·³è·\n\næè·¯ï¼å©ç¨åçº¿æå°è®¡ç®å°çä¸åºé¨å¹³é¢çè·ç¦»ï¼å¨åºé¨å¹³é¢æèç¦»åºé¨å¹³å°å¾è¿æ¶åè¿è¡å¼¹è·³ã\n\nconst jump = () => {\n    // è®¾ orgin ä¸ºå°çççå¿åæ ï¼ä¸ºå°çº¿ ray çèµ·ç¹\n    const origin = body.current.translation();\n    // origin åæ åä¸ç§»å¨ 0.31ï¼å°çåå¾ä¸º 0.3ï¼è¥åå§ä½ç½®å°çå°±å¨å¹³é¢ä¸ï¼é£ä¹ orgin åå¨åºé¨åå¼¹é¢çåé¨ï¼æ­¤æ¶è¥è¿è¡åçº¿æå°åä¼ç´æ¥ç¢°æï¼toi ä¸º 0\n    origin.y -= 0.31;\n    // direction è®¾ä¸º y è½´è´æ¹åçåä½åéï¼å³å°çº¿ ray çæ¹å\n    const direction = { x: 0, y: -1, z: 0 };\n    // å°çº¿ rag ä» orgin åºåï¼æ¹åä¸ºæ­£ä¸æ¹\n    const ray = new rapier.Ray(origin, direction);\n    // å°çº¿ä¸ç©ä½ç¢°æï¼åè¿åç¢°æç»æ\n    const hit = world.castRay(ray, 10, true); \n\n    // è¿è¡å¼¹è·³æä½\n    // toi = 0 ä»£è¡¨å°çæ­£å¤äºå¹³é¢ä¸\n    // 0 < toi < 0.15 ä»£è¡¨å°çå³å°è½å°å¹³é¢ä¸ä¹å¯ä»¥è¿è¡å¼¹è·³\n    // toi > 0.15 ä»£è¡¨å°çä»å¨ç©ºä¸­æ¯è¾é«çå°æ¹ï¼ä¸è½å¼¹è·³\n    if (hit.toi < 0.15) {\n      // æ½å ä¸ä¸ªåä¸çå²é\n      body.current.applyImpulse({ x: 0, y: 0.75, z: 0 });\n    }\n };\n\n\n\n# React ç¸å³\n\n\n# createRoot\n\nhttps://zh-hans.react.dev/reference/react-dom/client/createRoot\n\n\n# Suspense\n\nhttps://zh-hans.react.dev/reference/react/Suspense\n\n\n# Zustand\n\nZustand ç¶æåºï¼è½»ä¾¿ãç®æ´ãå¼ºå¤§ç React ç¶æç®¡çå·¥å·\n\nhttps://awesomedevin.github.io/zustand-vue/\n\nimport { create } from 'zustand'\n\n// Store åå§å\nconst useBearStore = create((set) => ({\n  bears: 0,\n  increasePopulation: () => set((state) => ({ bears: state.bears + 1 })),\n  removeAllBears: () => set({ bears: 0 }),\n}))\n\n// Store ç»å®ç»ä»¶\nfunction BearCounter() {\n  const bears = useBearStore((state) => state.bears)\n  return <h1>{bears} around here ...</h1>\n}\n\n// æ´æ°ç®æ ç¶æ\nfunction Controls() {\n  const increasePopulation = useBearStore((state) => state.increasePopulation)\n  return <button onClick={increasePopulation}>one up</button>\n}\n\n\nçå¬ store ç¶æï¼https://awesomedevin.github.io/zustand-vue/docs/advanced/read-set-state-outside-of-component\n\nconst useDogStore = create(() => ({ paw: true, snout: true, fur: true }))\n\n// è·åéååºæ§ææ°ç¶æ\nconst paw = useDogStore.getState().paw\n// çå¬æææ´æ¹ï¼å¯¹æ¯ä¸ªæ´æ¹åæ­¥è§¦å\nconst unsub1 = useDogStore.subscribe(console.log)\n// æ´æ°ç¶æï¼å°è§¦åçå¬å¨\nuseDogStore.setState({ paw: false })\n// åæ¶çå¬\nunsub1()\n\n// å½ç¶ï¼ä½ å¯ä»¥åå¾å¸¸ä¸æ ·ä½¿ç¨é©å­\nconst Component = () => {\n  const paw = useDogStore((state) => state.paw)\n  ...\n\n\nsubscribeWithSelector\n\nimport { subscribeWithSelector } from 'zustand/middleware'\nconst useDogStore = create(\n  subscribeWithSelector(() => ({ paw: true, snout: true, fur: true }))\n)\n\n// ä»é `paw` ä¿®æ¹æ¶ï¼è§¦åçå¬\nconst unsub2 = useDogStore.subscribe((state) => state.paw, console.log)\n// subscribe è¿å¯ä»¥çå¬å°æ§å¼\nconst unsub3 = useDogStore.subscribe(\n  (state) => state.paw,\n  (paw, previousPaw) => console.log(paw, previousPaw)\n)\n// subscribe ä¹æ¯æèªå®ä¹ç¸ç­å½æ°\nconst unsub4 = useDogStore.subscribe(\n  (state) => [state.paw, state.fur],\n  console.log,\n  { equalityFn: shallow }\n)\n// ç«å³è®¢éå¹¶è§¦å\nconst unsub5 = useDogStore.subscribe((state) => state.paw, console.log, {\n  fireImmediately: true,\n})\n\n\n\n# å° JSX ä½ä¸ºå­ç»ä»¶ä¼ é\n\nhttps://zh-hans.react.dev/learn/passing-props-to-a-component#passing-jsx-as-children\n\n\n\nimport Avatar from './Avatar.js';\n\nfunction Card({ children }) {\n  return (\n    <div className=\"card\">\n      {children}\n    </div>\n  );\n}\n\nexport default function Profile() {\n  return (\n    <Card>\n      <Avatar\n        size={100}\n        person={{ \n          name: 'Katsuko Saruhashi',\n          imageId: 'YfeOqp2'\n        }}\n      />\n    </Card>\n  );\n}\n",normalizedContent:"# react three fiber\n\nreact-three-fiber æ¯ä¸ä¸ªåºäº react ç3d æ¸²æåºï¼å®å°three.js çå¼ºå¤§æ¸²æè½åä¸react çå£°æå¼ç¼ç¨æ¨¡åç¸ç»åã\n\nhttps://docs.pmnd.rs/react-three-fiber/getting-started/introduction\n\n# åå»ºé¡¹ç®\nnpm create vite 3d-app\n\n# å®è£ä¾èµ\ncd 3d-app\nyarn\nyarn add three @react-three/fiber\n\n# start\nnpm run dev\n\n\n\n# mesh ç½æ ¼\n\nå¨three.jsä¸­ï¼ç½æ ¼ï¼meshï¼æ¯ç±å ä½ä½ï¼geometryï¼åæè´¨ï¼materialï¼ç»æçå¯¹è±¡ãè¦ç¼©æ¾ç½æ ¼å¯¹è±¡ï¼æ¨å¯ä»¥ä½¿ç¨ç½æ ¼å¯¹è±¡çscaleå±æ§ã\n\nå æ­¤å¨å®ä¹ä¸ä¸ªç©ä½æ¶ï¼æä»¬éè¦ä¾æ¬¡æå®ä¸ä¸ªç©ä½çãå½¢ç¶ãåãæè´¨ãï¼éè¿ä¸ç§ç¹æ®çç±»ãmeshãï¼æå°å¶ç§°ä¸ºãç½æ ¼ææãï¼å¨ three.js ä¸­ï¼mesh æ¯è¡¨ç¤ºä¸ç»´ç©ä½çåºç¡ç±»ï¼å®å°æ¥æ¶ä¸¤ä¸ªåæ°ï¼\n\n * geometryï¼å®ä¹ç©ä½çå½¢ç¶ï¼\n * materialï¼å®ä¹ç©ä½çæè´¨ï¼\n\nç°å¨ï¼è®©æä»¬åå»ºä¸ä¸ªç®åçç«æ¹ä½ï¼\n\nconst geometry = newthree.boxgeometry()\nconst material = newthree.meshbasicmaterial()\nconst mesh = newthree.mesh(geometry, material)\nscene.add(mesh)\n\n\n\n\n\n# material æè´¨\n\nhttps://threejs.org/docs/index.html?q=mater#api/zh/materials/material\n\næè´¨æ¯**å ä½ä½è¡¨é¢çææï¼**ç¨æ¥å®ä¹ç©ä½å¤è§çå±æ§ãå®åå«å¦ä½æ¸²æç©ä½çä¿¡æ¯ï¼å¦é¢è²ï¼åç§ï¼åå°ç­ç­ãæè´¨å¯ä»¥è¢«èµäºä¸åçå±æ§ï¼ä»¥ä¾¿å®ç°åç§ä¸åçå¤è§ææã\n\n * meshbasicmaterial åºç¡ç½æ ¼æè´¨ï¼ä¸ä¸ªä»¥ç®åçè²ï¼å¹³é¢æçº¿æ¡ï¼æ¹å¼æ¥ç»å¶å ä½ä½çæè´¨ï¼è¿ç§æè´¨ä¸ååç§çå½±åã\n * meshstandardmaterial æ åç½æ ¼æè´¨ï¼ä¸ç§åºäºç©ççæ åæè´¨ã\n\næ´å¤æè´¨å¯ä»¥çè¿ç¯æç« ï¼https://juejin.cn/post/7224112064461144123\n\n\n# texture çº¹ç\n\ntexture ç¨äºåå»ºä¸ä¸ªçº¹çè´´å¾ï¼å°å¶åºç¨å°ä¸ä¸ªè¡¨é¢ï¼æèä½ä¸ºåå°/æå°è´´å¾ãå°±ç±»ä¼¼å°ä¸ä¸ªåæ å¾çç²è´´å°ä¸ä¸ªååä¸ã\n\n// éè¿textureloader å è½½è´´å¾ï¼å¹¶çæçº¹çå¯¹è±¡ï¼äº¤ç»æè´¨çmapå±æ§ã\n  const balltexture = useloader(\n    three.textureloader,\n    \"./textures/beach_ball_texture.png\"\n  );\n  \n  <mesh castshadow receiveshadow>\n    <spheregeometry args={[0.3, 128, 128]} />\n    <meshstandardmaterial map={balltexture} flatshading />\n  </mesh>\n\n\nè¿å¼ è´´å¾ä¼æç§ç­è·åæ±æå½±çåçæ å°å°çä½ä¸\n\n\n\n\n\n\n# useframe\n\næ­¤hookåè®¸å¨é¡µé¢æ¯ä¸å¸§æ¸²æçæ¶åè¿è¡ä»£ç ï¼æ¯å¦æ´æ°æ¸²æææãæ§ä»¶ç­ï¼ä¸three.jsä¸­è°ç¨requestanimationframeå®è¡éç»å¨ç»æææ¯ä¸æ ·çãä½ å°æ¥æ¶å°ç¶*æå¼stateåæ¶éå¢édeltaãåè°å½æ°å°å¨æ¸²æå¸§ä¹åè¢«è°ç¨ï¼å½ç»ä»¶å¸è½½æ¶ï¼å®ä¼èªå¨ä»æ¸²æå¾ªç¯ä¸­æ³¨éã\n\n * deltaï¼è¥è®¾å¤çå±å¹å·æ°é¢çé® 60hzï¼å³æ¯ç§éå±å¹å·æ°60æ¬¡ï¼æ¯æ¬¡å·æ°ä¸º 1/60 = 0.016sï¼è¿éç delta å¼å³ä¸º 0.016\n\nuseframe((state, delta, xrframe)=>{// æ­¤å½æ°å¨å±äº«æ¸²æå¾ªç¯åä»¥æ¬æºå·æ°çè¿è¡});\n\n\n\n# useloader\n\nhttps://docs.pmnd.rs/react-three-fiber/tutorials/loading-models\n\nå¦æä½ æ³å¨ three.js fiber åºç¨ç¨åºä¸­å è½½æ¨¡åï¼å¯ä»¥ä½¿ç¨ three.js çuseloaderé©å­æ¥å®ç°ãè¿ä¸ªé©å­åè®¸ä½ å¨ react ç»ä»¶ä¸­å¼æ­¥å è½½ three.js ä¸­çèµæºï¼åæ¬æ¨¡åãçº¹çåå¶ä»æä»¶ãç¶åï¼ä½ å¯ä»¥å¨ç»ä»¶ä¸­ä½¿ç¨ useloader é©å­æ¥å¼æ­¥å è½½ gltf æ¨¡åãå¨å è½½å®æåï¼é©å­å°è¿åä¸ä¸ªåå«å è½½çæ¨¡åç three.group å®ä¾ãä½ å¯ä»¥å°è¿ä¸ªå®ä¾æ·»å å°åºæ¯ä¸­ï¼æèå¨ç»ä»¶ç jsx ä¸­ä½¿ç¨å®ï¼\n\nimport { useloader } from '@react-three/fiber';\nimport { gltfloader } from 'three/examples/jsm/loaders/gltfloader';\n\nfunction model() {\n  const gltf = useloader(gltfloader, '/path/to/model.gltf');\n  return <primitive object={gltf.scene} />;\n}\n\n// <primitive object={...} /> can mount any existing, foreign threejs object into the scene.\n\n\n\n# usegltf\n\n// å è½½æ¨¡åå¯ä»¥ä½¿ç¨ usegltf\nimport { usegltf } from '@react-three/drei'\nconst gltf = usegltf('/test.glb')\n\nusegltf.preload('/test.glb') // é¢å è½½\n\n\n\n# gltfæ ¼å¼\n\ngltf ææ¡£\n\nä»£ç ä¸­æå°å¼å¥ç gltf æ¯å¦ä¸æ ¼å¼ï¼\n\n\n\n * scenesï¼ä¸ä¸ªgltf å¯è½åå«å¤ä¸ªåºæ¯\n * sceneï¼sceneå±æ§æç¤ºè¿äºåºæ¯ä¸­çåªä¸ä¸ªåºè¯¥æ¯å è½½èµäº§æ¶æ¾ç¤ºçé»è®¤åºæ¯ï¼å®éè¿å¼ç¨nodeæ¥å®ä¹åºæ¯å¾ã\n * nodesï¼æ¯ä¸ªåºæ¯é½å¯¹åºä¸ä¸ª nodes æ°ç»\n * nodeï¼åºæ¯å¾ä¸­çä¸ä¸ªç»ç¹ãå®å¯ä»¥åå«ä¸ä¸ªåæ¢(æ¯å¦æè½¬æå¹³ç§»)ï¼å¼ç¨æ´å¤çå­ç»ç¹ãå®å¯ä»¥å¼ç¨ mesh å cameraã\n * animationï¼animation å¯ä»¥ç¨æ¥æè¿°èç¹çtranslationãrotationæscaleå±æ§å¦ä½éæ¶é´ååã\n * materialsï¼åå«å®ä¹æè´¨åå¶å±æ§çåç´ ï¼è¿éæ¯ meshbasicmaterial\n\n\n\n\n# gltf å¨ç»\n\nthree.jsçæåºç¡çå¨ç»ç³»ç»ï¼ç±ä»¥ä¸å é¨åç»æï¼\n\n * keyframetrack\n * animationclip\n * animitionmixer\n * animationaction\n\n# animationclip\n\nå¨å»ºæ¨¡è½¯ä»¶å¶ä½å¥½å¨ç»ä¹åï¼å¯ä»¥å¯¼åºæ¨¡åæä»¶ï¼éè¿loaderå°æ¨¡åæä»¶å è½½ä¹åï¼å»ºæ¨¡è½¯ä»¶å¶ä½çå¨ç»å°±ä¼è¢«ä¿å­å¨animationsä¸­ãè¿ä¸ªanimationså°±æ¯ä¸ä¸ªanimationclipçæ°ç»ã\n\nä¾å¦ï¼å¸¸è§çå¯¹äººè¿è¡å»ºæ¨¡æ¶ï¼éå¸¸ä¼åå«ä¸äºå¨ä½å¨ç»ï¼èµ°è·¯ãè·æ­¥ãæ¥æç­ãå¯¼åºæ¨¡ååï¼è¢«loaderè½½å¥ä¹åï¼æ¯ä¸ä¸ªå¨ä½é½ä¼åæä¸ä¸ªanimationclipå¯¹è±¡ã\n\nä¸é¢è¿ä¸ªä¾å­éåªæä¸ä¸ª animationclip å¯¹è±¡ï¼è¯´æåªæä¸ä¸ªå¨ç»ãå¦ææå¤ä¸ªå¨ç»æ¶ï¼å¯è½éè¦ç¨æ·åæäºæä½æ¥æ­æ¾ä¸åçå¨ç»ã\n\n\n\n# keyframetrack\n\nå¯¹äºæ¯ä¸ªanimationclipï¼å¯ä»¥çè§£ä¸ºæ¯ä¸ªå¨ä½ï¼ï¼é½åå«äºå¾å¤å¯¹è±¡å±æ§çååãä¾å¦ï¼è·æ­¥è¿ä¸ªå¨ä½åå«ï¼å·¦è³èãå³è³èãå·¦è¿ãå³è¿ç­å¯¹è±¡çå±æ§ååãå¯¹äºæ¯ä¸ä¸ªå±æ§ï¼å¯ä»¥éè¿å³é®å¸§ï¼keyframetrackï¼æ¥æè¿°å®çååãå¦è¿ä¸ª animationclip ä¸­åå«äºè®¸å¤ keyframetrackï¼\n\n\n\n# animationmixer\n\nhttps://threejs.org/docs/#api/zh/animation/animationmixer\n\n * æè¿°ï¼å¨ç»æ··åå¨æ¯ç¨äºåºæ¯ä¸­ç¹å®å¯¹è±¡çå¨ç»çæ­æ¾å¨ãå½åºæ¯ä¸­çå¤ä¸ªå¯¹è±¡ç¬ç«å¨ç»æ¶ï¼æ¯ä¸ªå¯¹è±¡é½å¯ä»¥ä½¿ç¨åä¸ä¸ªå¨ç»æ··åå¨ãå¯ä»¥çè§£æä¸ä¸ªæ»æ§å¶å°ï¼å®çä½ç¨ï¼å°±æ¯ç¨æ¥æ§å¶âæ¶å»â ãå¯ä»¥å½¢è±¡ççè§£ä¸ºæ¯ä¸ä¸ªå¨ç»æ­æ¾çè¿åº¦æ¡ã\n * åæ°ï¼rootobject æ··åå¨æ­æ¾çå¨ç»æå±çå¯¹è±¡ãå°±æ¯åå«å¨ç»æ¨¡åçåºæ¯å¯¹è±¡ã\n * å¸¸ç¨å±æ§ï¼\n   * .time å¨å±çæ··åå¨æ¶é´ã\n   * .clipaction(animationclip) è¿åæä¼ å¥çåªè¾åæ°çanimationactionå¯¹è±¡ã\n   * .getroot() è¿åæ··åå¨çæ ¹å¯¹è±¡ã\n   * .update() æ¨è¿æ··åå¨æ¶é´å¹¶æ´æ°å¨ç»ãå¨æ¸²æå½æ°ä¸­è°ç¨æ´æ°å¨ç»ã\n\n# animationaction\n\nhttps://threejs.org/docs/#api/zh/animation/animationaction\n\nanimationactions ç¨æ¥è°åº¦å­å¨å¨animationclipsä¸­çå¨ç»ãéè¿animationmixer.clipaction()è¿è¡åå»ºãè¿ä¸ªå¨ä½å¯ä»¥çè§£ä¸ºæanimationclipæ¾è¿æ§å¶å°è¿è¡æ­æ¾ãanimationactionæä¾äºä¸ç³»åçapiæ¥æ§å¶å¯¹åºçanimationclipçæ­æ¾ã\n\n// å¼å¥ gltf\nconst meta = usegltf('./models/dazhaohu.glb');\n// è·å åºæ¯åå¨ç»\nconst { scene, animations } = meta;\n// åå»ºå¨ç»æ··åå¨\nconst mixer = new three.animationmixer(scene);\n// éåå¨ç»\nanimations.foreach((clip) => {\n    // animationmixer.clipaction æ¥çæ animationaction ï¼ç¶åè¿è¡ play\n    mixer.clipaction(clip).play();\n});\n\nconst clock = new three.clock();\nfunction animate() {\n    requestanimationframe(animate);\n    const delta = clock.getdelta();\n    if (mixer !== undefined) {\n        // æ¨è¿æ··åå¨æ¶é´å¹¶æ´æ°å¨ç»\n        mixer.update(delta);\n    }\n}\n\n\n\n# three.scene.traverse()\n\næä»¬å¯ä»¥å°ä¸ä¸ªæ¹æ³ä½ä¸ºåæ°ä¼ éç» traverse() æ¹æ³ï¼è¿ä¸ªä¼ éæ¥çæ¹æ³å°ä¼å¨æ¯ä¸ä¸ªå­å¯¹è±¡ä¸æ§è¡ãç±äºthree.sceneå¯¹è±¡å­å¨çæ¯å¯¹è±¡æ ï¼æä»¥å¦æå­å¯¹è±¡æ¬èº«è¿æå­å¯¹è±¡ï¼traverse()æ¹æ³ä¼å¨ææçå­å¯¹è±¡ä¸æ§è¡ï¼ç´å°éåå®åºæ¯æ ä¸­çææå¯¹è±¡ä¸ºæ­¢ã\n\n\n# åæºä»ç»\n\nhttps://hicc.pro/p/three.js/threejs-lighting#threepointlight%e7%82%b9%e5%85%89%e6%ba%90\n\n * ambient lightï¼ç¯å¢åå¯ä»¥ç§äº®ä¸ç»´åºæ¯ä¸­çææç©ä½ï¼æ²¡æé´å½±ï¼åªæä¸¤ä¸ªå±æ§ï¼coloråintensity\n * directionallightï¼æ¹åæ¯ä»ä¸ä¸ªå¹³è¡åçä½ç½® position å° target çä½ç½®\n   * targetï¼ç¯åä»å®çä½ç½®ï¼positionï¼æåç®æ ä½ç½®ãé»è®¤çç®æ ä½ç½® target ä¸º(0, 0, 0)ã\n\n\n# é´å½±ç¸æº\n\nä¸ºäºå¨three.jsä¸­ä½¿ç¨é´å½±ï¼æ¨éè¦åå»ºä¸ä¸ªé´å½±ç¸æºã\n\né´å½±ç¸æºï¼shadow cameraï¼æ¯ä¸ä¸ªç¨äºçæé´å½±å¾åçèæç¸æºãå®ä¸ä¼å¨å±å¹ä¸æ¸²æå¾åï¼èæ¯å¨åå°è®¡ç®é´å½±è´´å¾ãé´å½±ç¸æºç±»ä¼¼äºåºæ¯ä¸­çä¸»ç¸æºï¼ä½æ¯éè¦ä¸äºä¸åçè®¾ç½®ååæ°ã\n\n\n\nconst light = useref();\n<directionallight\n    ref={light}\n    castshadow\n    position={[4, 4, 1]}\n    intensity={1.5}\n    shadow-mapsize={[512, 512]}\n    shadow-camera-near={1}\n    shadow-camera-far={10}\n    shadow-camera-top={10}\n    shadow-camera-right={10}\n    shadow-camera-bottom={-10}\n    shadow-camera-left={-10}\n />\n\n\n\n# åæ°åæ³\n\nnew three.spheregeometry(1, 32)\n// å¨ react three fiber ä¸­ï¼æé å½æ°åæ°å§ç»éè¿ args ä½ä¸ºæ°ç»ä¼ é\n\n// çä½å ä½ä½ï¼åæ°ä¸ºï¼åå¾ï¼æ°´å¹³åæ®µæ°ï¼åç´åæ®µæ°ï¼è¯¦è§ https://threejs.org/docs/#api/zh/geometries/spheregeometry\n<spheregeometry args={[1, 32, 32]} />\n\n// ç±»ä¼¼å° <meshstandardmaterial color={new three.color('hotpink')} /> å¯ä»¥ç´æ¥åæ\n<meshstandardmaterial color=\"hotpink\" />\n\n// ç¼©æ¾ mesh ç scale åæ°å¯ä»¥åæ <mesh scale={[1, 1, 1]} />\n<mesh scale={1} />\n\n// åµå¥å±æ§ mesh.rotation.x ç¨ç ´æå·\n<mesh rotation-x={1} material-uniforms-resolution-value={[512, 512]} />\n\n\n\n# attach\n\nhttps://docs.pmnd.rs/react-three-fiber/api/objects#attach\n\n<mesh>\n  <meshnormalmaterial attach=\"material\" />\n  <boxgeometry attach=\"geometry\" />\n</mesh>\n\n// equal to\n\nmesh.material = new three.meshnormalmaterial()\nmesh.geometry = new three.boxgeometry()\n\n\n\n# äºä»¶\n\nåæµè§å¨äºä»¶ç±»ä¼¼ï¼https://developer.mozilla.org/zh-cn/docs/web/api/pointer_events#%e4%ba%8b%e4%bb%b6%e7%b1%bb%e5%9e%8b%e4%b8%8e%e5%85%a8%e5%b1%80%e4%ba%8b%e4%bb%b6%e5%a4%84%e7%90%86\n\n<mesh\n  onclick={(e) => console.log('click')}\n  oncontextmenu={(e) => console.log('context menu')}\n  ondoubleclick={(e) => console.log('double click')}\n  onwheel={(e) => console.log('wheel spins æ»è½®')}\n  onpointerup={(e) => console.log('up')}\n  onpointerdown={(e) => console.log('down')}\n  onpointerover={(e) => console.log('over')}\n  onpointerout={(e) => console.log('out')}\n  onpointerenter={(e) => console.log('enter')}\n  onpointerleave={(e) => console.log('leave')}\n  onpointermove={(e) => console.log('move')}\n  onpointermissed={() => console.log('missed')} // fires on clicks that haven't hit any meshes.\n  onupdate={(self) => console.log('props have been updated')} // that is called every time the object gets fresh props,\n/>\n\n\n\n# shadows\n\n// shadows å±æ§ä»£è¡¨å¨å±åè®¸æ·»å é´å½±\n<canvas shadows />\n\n// castshadow ä»£è¡¨åè®¸æå°é´å½±\n<mesh castshadow />\n\n// receiveshadow ä»£è¡¨åè®¸æ¥æ¶é´å½±\n<mesh receiveshadow />\n\n\nä¸ä¸ªä¾å­\n\n<canvas shadows camera={{ position: [0, 3, 3] }}>\n  // ç©ä½æå°é´å½±\n  <mesh rotation-y={math.pi / 4} castshadow>\n    <boxgeometry />\n    <meshstandardmaterial color=\"white\" />\n  </mesh>\n    \n  // å¹³é¢æ¥æ¶é´å½±\n  <mesh rotation-x={-math.pi / 2} position-y={-0.5} receiveshadow>\n    <planegeometry args={[5, 5]} />\n    <meshstandardmaterial color=\"white\" />\n  </mesh>\n  \n  // é¤æ­¤ä¹å¤ï¼è¿ææ·»å ç¯å castshadowï¼ä¸ç¶ä¸ä¼å±ç¤ºé´å½±\n  <directionallight position={[5, 5, 5]} intensity={0.5} castshadow />\n  <directionallight position={[-5, 5, 5]} intensity={0.5} color=\"red\" castshadow />\n</canvas>\n\n\n\n\n\n# react three rapier ç©çå¼æ\n\nhttps://github.com/pmndrs/react-three-rapier\n\n\n# physics ç»ä»¶\n\nhttps://github.com/pmndrs/react-three-rapier?tab=readme-ov-file#the-physics-component\n\n * gravity éåï¼é»è®¤ä¸º [0, -9.81, 0]ï¼ç¨æ¥æ¨¡æçå®ç©çä¸ç\n\nconst scene = () => {\n  return (\n    <canvas>\n      <suspense>\n        <physics gravity={[0, 1, 0]} interpolation={false} colliders={false}>\n          ...\n        </physics>\n      </suspense>\n    </canvas>\n  );\n};\n\n\n\n# rigidbody åä½\n\n * restitution={0.2}ï¼å¼¹æ§ç³»æ° ï¼è¡¡éä¸¤ä¸ªç©ä½å¨ç¢°æåçåå¼¹ç¨åº¦\n * friction={1}ï¼æ©æ¦åï¼æ©æ¦åæ¯å¯¹æç¢°æä½æ¥è§¦çä¸¤ä¸ªåä½ä¹é´ç¸å¯¹ååè¿å¨çå\n * lineardamping={0.5}ï¼çº¿æ§é»å°¼ï¼ç¨äºåå°åä½ççº¿æ§éçï¼å¼è¶å¤§ç©ä½ç§»å¨è¶æ¢\n * angululardamping={0.5}ï¼è§é»å°¼ï¼ç¨äºåå°åä½çæè½¬éçï¼å¼è¶å¤§åä½æè½¬è¶æ¢\n\nåä½ç»ä»¶å¸¸ç¨äºå¨ physics ä¸­æ·»å ä¸ä¸ª mesh ï¼åºäº mesh çå½¢ç¶ä¼é»è®¤çæä¸ä¸ª collidersã\n\nconst rigidbodymesh = () => (\n  <rigidbody>\n    <mesh />\n  </rigidbody>\n);\n\n\n\n# automatic colliders èªå¨ç¢°æä½\n\né»è®¤æåµä¸ï¼rigidbody ä¼ä¸ºå¶åå«çææç½æ ¼ä½çæèªå¨ç¢°æä½ãæ¨å¯ä»¥éè¿å¨ ä¸è®¾ç½® colliders å±æ§æ¥æ§å¶ç¢°æä½ï¼æèéè¿å¨ ä¸è®¾ç½® colliders æ¥å¨å±æ´æ¹å®ãè®¾ç½® colliders={false} ä¼ç¦æ­¢èªå¨çæã\n\nconst scene = () => (\n  <physics colliders=\"hull\">\n    <rigidbody>\n      <box />\n    </rigidbody>\n    <rigidbody position={[0, 10, 0]}>\n      <sphere />\n    </rigidbody>\n  </physics>\n);\n\n// å³é­ physics è®¾ç½®å¨å±ç¢°æä½ï¼å¨æ¯ä¸ª rigidbody ä¸è®¾ç½®\nconst scene = () => (\n  <physics colliders={false}>\n    {/* use an automatic cuboidcollider for all meshes inside this rigidbody */}\n    <rigidbody colliders=\"cuboid\">\n      <box />\n    </rigidbody>\n\n    {/* use an automatic ballcollider for all meshes inside this rigidbody */}\n    <rigidbody position={[0, 10, 0]} colliders=\"ball\">\n      <sphere />\n    </rigidbody>\n  </physics>\n);\n\n\nç¢°æä½åæ¬å ç§ç±»åï¼cuboidï¼é¿æ¹ä½ï¼ãballï¼çä½ï¼ãtrimeshãhull\n\nä¸ä¸ªç´è§çä¾å­ï¼https://codesandbox.io/p/sandbox/react-three-rapier-auto-colliders-b4coz1?file=%2fsrc%2fapp.tsx%3a35%2c29-35%2c36\n\n\n\nå½ç¶æä»¬ä¹å¯ä»¥å¨ rigidbody ä¸­æå¨åå»º colliders\n\nconst scene = () => (<>\n  {/* åå»ºèªå®ä¹çç¢°æä½ */}\n  <rigidbody position={[0, 10, 0]}>\n    <ballcollider args={[0.5]} /> // çä½ï¼åæ°ä¸ºåå¾\n    \n    <cuboidcollider args={[0.5, 0.5, 0.5]} /> // é¿æ¹ä½ï¼åæ°ä¸ºé¿å®½é«\n    \n    <meshcollider type=\"trimesh\">\n      <mesh ... />\n    </meshcollider>\n\n    <meshcollider type=\"hull\">\n      <mesh ... />\n    </meshcollider>\n  </rigidbody>\n<>)\n\n\n\n# collision events ç¢°æäºä»¶\n\n * oncollisionenterï¼å¼å§ç¢°æ\n   * targetï¼è§¦åç¢°æçç©ä½\n   * otherï¼è¢«ç¢°æçç©ä½\n   * manifoldï¼ç¢°æäº§ççæ¥è§¦æµå½¢ï¼contact manifoldï¼\n * oncollisionexitï¼ç¢°æç»æ\n\nconst rigidbottle = () => {\n  const [isasleep, setisasleep] = usestate(false);\n\n  return (\n    <rigidbody\n      colliders=\"hull\"\n      onsleep={() => setisasleep(true)}\n      onwake={() => setisasleep(false)}\n      name=\"bally mcballface\"\n      oncollisionenter={({ manifold, target, other }) => {\n        console.log(\n          \"collision at world position \",\n          manifold.solvercontactpoint(0)\n        );\n\n        if (other.rigidbodyobject) {\n          console.log(\n            // this rigid body's object3d\n            target.rigidbodyobject.name,\n            \" collided with \",\n            // the other rigid body's object3d\n            other.rigidbodyobject.name\n          );\n        }\n      }}\n    >\n      <sphere>\n        <meshphysicalmaterial color={isasleep ? \"white\" : \"blue\"} />\n      </sphere>\n    </rigidbody>\n  );\n};\n\n\n\n# configuring collision and solver groups éç½®ç¢°æç»\n\næææé²æ­¢ç¢°æä½ç´æ¥ç¸äºç¢°æçæ¹æ³å°±æ¯ç»åºç¢°æä½æå±çç¢°æç»ãè¯¦è§ææ¡£\n\n\n# contact force events ç¢°æåäºä»¶\n\nå¨ç¢°æä½åçç¢°ææ¶ä¼è§¦åç¢°æåäºä»¶\n\n<rigidbody\n  colliders=\"ball\"\n  oncontactforce={(payload) => {\n    console.log(`the total force generated was: ${payload.totalforce}`);\n  }}\n>\n  <sphere>\n    <meshphysicalmaterial color={\"grey\"} />\n  </sphere>\n</rigidbody>\n\n\n * payloadï¼\n   * targetï¼è§¦åç¢°æçç©ä½\n   * otherï¼è¢«ç¢°æçç©ä½\n   * totalforceï¼ä¸¤ä¸ªç¢°æä½ä¹é´ææåçæ»å\n   * totalforcemagnitudeï¼ä¸¤ä¸ªç¢°æä½ä¹é´ææåå¤§å°æ»å\n   * maxforcedirectionï¼æ¥è§¦ç¹å¤æå¤§åçæ¹å\n   * maxforcemagnitudeï¼æ¥è§¦ç¹å¤æå¤§åçå¤§å°\n\n\n\n\n# sensor ä¼ æå¨\n\nhttps://github.com/pmndrs/react-three-rapier?tab=readme-ov-file#sensors\n\nç¢°æä½å¯ä»¥è®¾ç½®ä¼ æå¨ï¼å®å¯ä»¥ç¨äºçæµä¸ä¸ªç¢°æä½è¿å¥æèç¦»å¼å¦ä¸ä¸ªç¢°æä½ï¼å¨æ­¤è¿ç¨ä¸­ä¸ä¼ç»åç¢°æã\n\n * onintersectionenter\n * onintersectionexit\n\n<rigidbody>\n  <goalposts />\n\n  <cuboidcollider\n    args={[5, 5, 1]}\n    sensor\n    onintersectionenter={() => console.log(\"goal!\")}\n  />\n</rigidbody>\n\n\n\n# userapier\n\nhttps://github.com/pmndrs/react-three-rapier?tab=readme-ov-file#advanced-hooks-usage\n\nå¦ææ³è¦å¯¹ç©çä¸çæ´å ç²¾ç»çæ§å¶ï¼å¯è½éè¦ç¨å° userapier\n\nconst { rapier, world } = userapier();\n\n\n\n# ray-casting åçº¿æå°\n\nhttps://rapier.rs/docs/user_guides/javascript/scene_queries/#ray-casting\n\nåçº¿æå°å¯æ¥æ¾ä¸åçº¿ç¸äº¤çä¸ä¸ªæå¤ä¸ªç¢°æä½ãåçº¿æå°æ¯ä¸ç§æå¶å¸¸è§çæä½ï¼æ¶µçäºå¤ç§ç¨ä¾ï¼åå°å­å¼¹ãè§è²æ§å¶å¨ãæ¸²æã\n\nå°çº¿ï¼https://threejs.org/docs/#api/zh/math/ray\n\n * origin - å°çº¿çåç¹ï¼é»è®¤å¼æ¯ä¸ä¸ªä½äº(0, 0, 0)çvector3ã\n * direction - å°çº¿çæ¹åãè¯¥åéå¿é¡»ç»è¿æ ååä½¿åéé¿åº¦ä¸º1ï¼ä½¿ç¨vector3.normalizeï¼ï¼è¿æ ·æè½ä½¿æ¹æ³æ­£å¸¸è¿è¡ã é»è®¤å¼æ¯ä¸ä¸ªä½äº(0, 0, -1)çvector3ã\n\n// åçº¿ç± origin [1, 2, 3] å direction [0, 1, 0] å®ä¹ï¼\nlet ray = new rapier.ray({ x: 1.0, y: 2.0, z: 3.0 }, { x: 0.0, y: 1.0, z: 0.0 });\nlet maxtoi = 4.0;\nlet solid = true;\n\n// maxtoi: max time of impact\n// solid: considers everything as solid (å¦æåçº¿èµ·ç¹å¨ä¸ä¸ªåºä½åï¼é£ä¹åçº¿åæ æ³ç»§ç»­ä¼ æ­ï¼toi ä¸º 0ï¼ è¥è®¾ç½®ä¸ºfalseé£ä¹ä¼ç»§ç»­ä¼ æ­ç´å°è§¦ç¢°å°åºä½è¾¹ç)\nlet hit = world.castray(ray, maxtoi, solid);\n\n// å¦æåçº¿åçç¢°æ\nif (hit != null) {\n    // åçº¿ä¼ æ­çè·ç¦» = ray.dir * toi\n    // æå»ç¹ = ray.origin + ray.dir * toi\n    let hitpoint = ray.pointat(hit.toi); // hit.toi å³ä¸ºåçç¢°ææç»åçæ¶é´\n    console.log(\"collider\", hit.colliderhandle, \"hit at point\", hitpoint);\n}\n\n\n\n\n# å°çå¼¹è·³æ¡ä¾\n\n\n\néè¦å®ç°ç¹å»ãè·³ãå°çå¼¹èµ·ï¼å·²ç¥ï¼\n\n 1. åºé¨åå¼¹å¹³é¢æå¤ä½ç½®ä¸º y = -0.1ï¼é«åº¦ä¸º 0.1ï¼æä»¥è¥å°çéæ­¢å¨å¹³é¢ä¸å°çåºé¨åæ­£å¥½å¤äº y = 0\n 2. å°çå¨ç©ºä¸­ä¸è½å¼¹è·³ï¼åªè½å¤å¨å¹³é¢ä¸æ¶è¿è¡è·³è·\n\næè·¯ï¼å©ç¨åçº¿æå°è®¡ç®å°çä¸åºé¨å¹³é¢çè·ç¦»ï¼å¨åºé¨å¹³é¢æèç¦»åºé¨å¹³å°å¾è¿æ¶åè¿è¡å¼¹è·³ã\n\nconst jump = () => {\n    // è®¾ orgin ä¸ºå°çççå¿åæ ï¼ä¸ºå°çº¿ ray çèµ·ç¹\n    const origin = body.current.translation();\n    // origin åæ åä¸ç§»å¨ 0.31ï¼å°çåå¾ä¸º 0.3ï¼è¥åå§ä½ç½®å°çå°±å¨å¹³é¢ä¸ï¼é£ä¹ orgin åå¨åºé¨åå¼¹é¢çåé¨ï¼æ­¤æ¶è¥è¿è¡åçº¿æå°åä¼ç´æ¥ç¢°æï¼toi ä¸º 0\n    origin.y -= 0.31;\n    // direction è®¾ä¸º y è½´è´æ¹åçåä½åéï¼å³å°çº¿ ray çæ¹å\n    const direction = { x: 0, y: -1, z: 0 };\n    // å°çº¿ rag ä» orgin åºåï¼æ¹åä¸ºæ­£ä¸æ¹\n    const ray = new rapier.ray(origin, direction);\n    // å°çº¿ä¸ç©ä½ç¢°æï¼åè¿åç¢°æç»æ\n    const hit = world.castray(ray, 10, true); \n\n    // è¿è¡å¼¹è·³æä½\n    // toi = 0 ä»£è¡¨å°çæ­£å¤äºå¹³é¢ä¸\n    // 0 < toi < 0.15 ä»£è¡¨å°çå³å°è½å°å¹³é¢ä¸ä¹å¯ä»¥è¿è¡å¼¹è·³\n    // toi > 0.15 ä»£è¡¨å°çä»å¨ç©ºä¸­æ¯è¾é«çå°æ¹ï¼ä¸è½å¼¹è·³\n    if (hit.toi < 0.15) {\n      // æ½å ä¸ä¸ªåä¸çå²é\n      body.current.applyimpulse({ x: 0, y: 0.75, z: 0 });\n    }\n };\n\n\n\n# react ç¸å³\n\n\n# createroot\n\nhttps://zh-hans.react.dev/reference/react-dom/client/createroot\n\n\n# suspense\n\nhttps://zh-hans.react.dev/reference/react/suspense\n\n\n# zustand\n\nzustand ç¶æåºï¼è½»ä¾¿ãç®æ´ãå¼ºå¤§ç react ç¶æç®¡çå·¥å·\n\nhttps://awesomedevin.github.io/zustand-vue/\n\nimport { create } from 'zustand'\n\n// store åå§å\nconst usebearstore = create((set) => ({\n  bears: 0,\n  increasepopulation: () => set((state) => ({ bears: state.bears + 1 })),\n  removeallbears: () => set({ bears: 0 }),\n}))\n\n// store ç»å®ç»ä»¶\nfunction bearcounter() {\n  const bears = usebearstore((state) => state.bears)\n  return <h1>{bears} around here ...</h1>\n}\n\n// æ´æ°ç®æ ç¶æ\nfunction controls() {\n  const increasepopulation = usebearstore((state) => state.increasepopulation)\n  return <button onclick={increasepopulation}>one up</button>\n}\n\n\nçå¬ store ç¶æï¼https://awesomedevin.github.io/zustand-vue/docs/advanced/read-set-state-outside-of-component\n\nconst usedogstore = create(() => ({ paw: true, snout: true, fur: true }))\n\n// è·åéååºæ§ææ°ç¶æ\nconst paw = usedogstore.getstate().paw\n// çå¬æææ´æ¹ï¼å¯¹æ¯ä¸ªæ´æ¹åæ­¥è§¦å\nconst unsub1 = usedogstore.subscribe(console.log)\n// æ´æ°ç¶æï¼å°è§¦åçå¬å¨\nusedogstore.setstate({ paw: false })\n// åæ¶çå¬\nunsub1()\n\n// å½ç¶ï¼ä½ å¯ä»¥åå¾å¸¸ä¸æ ·ä½¿ç¨é©å­\nconst component = () => {\n  const paw = usedogstore((state) => state.paw)\n  ...\n\n\nsubscribewithselector\n\nimport { subscribewithselector } from 'zustand/middleware'\nconst usedogstore = create(\n  subscribewithselector(() => ({ paw: true, snout: true, fur: true }))\n)\n\n// ä»é `paw` ä¿®æ¹æ¶ï¼è§¦åçå¬\nconst unsub2 = usedogstore.subscribe((state) => state.paw, console.log)\n// subscribe è¿å¯ä»¥çå¬å°æ§å¼\nconst unsub3 = usedogstore.subscribe(\n  (state) => state.paw,\n  (paw, previouspaw) => console.log(paw, previouspaw)\n)\n// subscribe ä¹æ¯æèªå®ä¹ç¸ç­å½æ°\nconst unsub4 = usedogstore.subscribe(\n  (state) => [state.paw, state.fur],\n  console.log,\n  { equalityfn: shallow }\n)\n// ç«å³è®¢éå¹¶è§¦å\nconst unsub5 = usedogstore.subscribe((state) => state.paw, console.log, {\n  fireimmediately: true,\n})\n\n\n\n# å° jsx ä½ä¸ºå­ç»ä»¶ä¼ é\n\nhttps://zh-hans.react.dev/learn/passing-props-to-a-component#passing-jsx-as-children\n\n\n\nimport avatar from './avatar.js';\n\nfunction card({ children }) {\n  return (\n    <div classname=\"card\">\n      {children}\n    </div>\n  );\n}\n\nexport default function profile() {\n  return (\n    <card>\n      <avatar\n        size={100}\n        person={{ \n          name: 'katsuko saruhashi',\n          imageid: 'yfeoqp2'\n        }}\n      />\n    </card>\n  );\n}\n",charsets:{cjk:!0}},{title:"Three.js",frontmatter:{},regularPath:"/three/three1.html",relativePath:"three/three1.md",key:"v-608ca1ba",path:"/three/three1.html",headers:[{level:2,title:"è®¡ç®æºå¾å½¢å­¦",slug:"è®¡ç®æºå¾å½¢å­¦",normalizedTitle:"è®¡ç®æºå¾å½¢å­¦",charIndex:43},{level:3,title:"1. çµå½±ç¹æ",slug:"_1-çµå½±ç¹æ",normalizedTitle:"1. çµå½±ç¹æ",charIndex:212},{level:3,title:"2. æ¸¸æå¼å",slug:"_2-æ¸¸æå¼å",normalizedTitle:"2. æ¸¸æå¼å",charIndex:338},{level:3,title:"3. èæç°å®",slug:"_3-èæç°å®",normalizedTitle:"3. èæç°å®",charIndex:445},{level:3,title:"4. å·¥ç¨è®¾è®¡",slug:"_4-å·¥ç¨è®¾è®¡",normalizedTitle:"4. å·¥ç¨è®¾è®¡",charIndex:569},{level:2,title:"è®¡ç®æºå¾å½¢å­¦ãOpenGLãwebGLãthree.js å³ç³»",slug:"è®¡ç®æºå¾å½¢å­¦ãopenglãwebglãthree-js-å³ç³»",normalizedTitle:"è®¡ç®æºå¾å½¢å­¦ãopenglãwebglãthree.js å³ç³»",charIndex:667},{level:2,title:"Canvas",slug:"canvas",normalizedTitle:"canvas",charIndex:1337},{level:2,title:"three.js",slug:"three-js-2",normalizedTitle:"three.js",charIndex:15},{level:3,title:"åºç¡åç´ ",slug:"åºç¡åç´ ",normalizedTitle:"åºç¡åç´ ",charIndex:1764},{level:2,title:"åºæ¯",slug:"åºæ¯",normalizedTitle:"åºæ¯",charIndex:294},{level:2,title:"ç¸æº",slug:"ç¸æº",normalizedTitle:"ç¸æº",charIndex:1748},{level:2,title:"ç©ä½",slug:"ç©ä½",normalizedTitle:"ç©ä½",charIndex:1620},{level:2,title:"åæº",slug:"åæº",normalizedTitle:"åæº",charIndex:1855},{level:3,title:"æ¸²æå¨",slug:"æ¸²æå¨",normalizedTitle:"æ¸²æå¨",charIndex:1945},{level:2,title:"ä¸ç»´åæ ç³»",slug:"ä¸ç»´åæ ç³»",normalizedTitle:"ä¸ç»´åæ ç³»",charIndex:4206},{level:2,title:"three.js ä¸­çæ°å­¦",slug:"three-js-ä¸­çæ°å­¦",normalizedTitle:"three.js ä¸­çæ°å­¦",charIndex:4559},{level:3,title:"åé",slug:"åé",normalizedTitle:"åé",charIndex:4577},{level:2,title:"ç¹ä¹",slug:"ç¹ä¹",normalizedTitle:"ç¹ä¹",charIndex:4772},{level:2,title:"åä¹",slug:"åä¹",normalizedTitle:"åä¹",charIndex:4858},{level:2,title:"æ¬§æè§",slug:"æ¬§æè§",normalizedTitle:"æ¬§æè§",charIndex:5015},{level:2,title:"ååæ°",slug:"ååæ°",normalizedTitle:"ååæ°",charIndex:5400},{level:2,title:"å è½½ .GLTF/.GLB æä»¶",slug:"å è½½-gltf-glb-æä»¶",normalizedTitle:"å è½½ .gltf/.glb æä»¶",charIndex:6152}],lastUpdated:"9/2/2025, 11:26:21 AM",lastUpdatedTimestamp:1756783581e3,headersStr:"è®¡ç®æºå¾å½¢å­¦ 1. çµå½±ç¹æ 2. æ¸¸æå¼å 3. èæç°å® 4. å·¥ç¨è®¾è®¡ è®¡ç®æºå¾å½¢å­¦ãOpenGLãwebGLãthree.js å³ç³» Canvas three.js åºç¡åç´  åºæ¯ ç¸æº ç©ä½ åæº æ¸²æå¨ ä¸ç»´åæ ç³» three.js ä¸­çæ°å­¦ åé ç¹ä¹ åä¹ æ¬§æè§ ååæ° å è½½ .GLTF/.GLB æä»¶",content:"# Three.js\n\nä»ç» three.js ä¹ååéè¦ä»ç»ä¸ä¸ä¸é¨è®¡ç®æºåºç¡å­¦ç§ï¼è®¡ç®æºå¾å½¢å­¦\n\n\n# è®¡ç®æºå¾å½¢å­¦\n\nè®¡ç®æºå¾å½¢å­¦æ¯ä¸é¨ç ç©¶éè¿è®¡ç®æºå°æ°æ®è½¬æ¢æå¾å½¢ï¼å¹¶å¨ä¸é¨æ¾ç¤ºè®¾å¤ä¸æ¾ç¤ºçåçæ¹æ³åææ¯çå­¦ç§ãå®æ¯å»ºç«å¨ä¼ ç»çå¾å­¦çè®ºãåºç¨æ°å­¦åè®¡ç®æºç§å­¦åºç¡ä¸çä¸é¨è¾¹ç¼å­¦ç§ã\n\næ»èè¨ä¹è®¡ç®æºå¾å½¢å­¦æ¯ç ç©¶ææ ·å©ç¨è®¡ç®æºæ¥æ¾ç¤ºãçæåå¤çå¾å½¢çåçãæ¹æ³åææ¯çä¸é¨å­¦ç§ï¼è¿éçå¾å½¢æ¯æä¸ç»´å¾å½¢çå¤çã\n\n\n# 1. çµå½±ç¹æ\n\nè®¡ç®æºå¾å½¢å­¦å¨çµå½±ç¹æä¸­æçå¹¿æ³çåºç¨ãéè¿è®¡ç®æºçæçå¾å½¢ï¼çµå½±å¶ä½äººåå¯ä»¥åé åºåç§æ³è±¡åä¸°å¯çç¹æï¼ä¾å¦é¼çççç¸ãæªç©ä¸å¤æäººãè¶å¡è±ä¿çåºæ¯ç­ãè¿äºç¹æå¤§å¤§æåäºçµå½±çè§è§ææï¼å¹¶ä¸ºæäºæèå¢æ·»äºå¨æåå¸å¼åã\n\n\n\n\n# 2. æ¸¸æå¼å\n\nè®¡ç®æºå¾å½¢å­¦å¨æ¸¸æå¼åä¸­ä¹æ®æ¼çéè¦è§è²ãæ¸¸æå¼åäººåä½¿ç¨è®¡ç®æºå¾å½¢å­¦çææ¯æ¥è®¾è®¡æ¸¸æä¸­çåºæ¯ãè§è²åå¨ç»ææãéè¿é¼ççæ¸²æåäº¤äºæ§è½ï¼è®¡ç®æºå¾å½¢å­¦ä¸ºç©å®¶æä¾äºèº«ä¸´å¶å¢çæ¸¸æä½éªã\n\n\n\n\n# 3. èæç°å®\n\nèæç°å®æ¯è®¡ç®æºå¾å½¢å­¦çä¸ä¸ªéè¦åºç¨é¢åãåå©äºè®¡ç®æºå¾å½¢å­¦çææ¯ï¼èæç°å®å¯ä»¥æ¨¡æåºç°å®ä¸çæèæä¸ççåºæ¯ï¼å¹¶éè¿å¤´æ´å¼è®¾å¤ç­äº¤äºå·¥å·è®©ç¨æ·èº«ä¸´å¶å¢å°ä½éªãèæç°å®ææ¯å·²ç»å¨æ¸¸æãæè²ãå»çç­é¢åå¾å°äºå¹¿æ³åºç¨ã\n\n\n\n\n# 4. å·¥ç¨è®¾è®¡\n\nè®¡ç®æºå¾å½¢å­¦å¨å·¥ç¨è®¾è®¡ä¸­ä¹èµ·å°äºéè¦çä½ç¨ãéè¿ä½¿ç¨ä¸ç»´å»ºæ¨¡åæ¸²æææ¯ï¼å·¥ç¨å¸å¯ä»¥è®¾è®¡åæ¨¡æåºåç§äº§ååå»ºç­çå¤è§ååè½ï¼ä»èå®ç°å¯¹è®¾è®¡æ¹æ¡çå¯è§åè¯ä¼°åæ¹åã\n\n\n\n\n\n\n# è®¡ç®æºå¾å½¢å­¦ãOpenGLãwebGLãthree.js å³ç³»\n\nè®¡ç®æºå¾å½¢å­¦ï¼è®¡ç®æºå¾å½¢å­¦æ¯ä¸é¨å­¦ç§ï¼èç´éå¸¸å¤§ï¼è¢«å¹¿æ³åºç¨äºç¹æãææãå¨ç»ãè®¾è®¡ãæ¨¡æä¸ä»¿çå½ä¸­ã\n\nOpenGLï¼æ¯ä¸ç§Cè¯­è¨æ åçåºï¼å°åç§è®¡ç®æºå¾å½¢å­¦çææå°è£å¥åºï¼å¶å®å¼åäººåå¯ä»¥éå¸¸æ¹ä¾¿çè°ç¨ï¼ä¸éè¦è¿è¡ç¹å¤çåºå±æå»ºå·¥ä½ï¼ä¾¿å¯ä»¥å®ç°ç¸å³åºç¨çå¼åãå®æä¾äºä¸ç»å½æ°åæ¥å£ï¼æ¯ä¸ç§åºå±çAPIã\n\nWebGLï¼WebGLæ¯åºäºJavaScriptçWebå¾å½¢åºï¼å®å°OpenGL ES 2.0çåè½æ´é²ç»äºWebæµè§å¨ãWebGLåè®¸å¨Webé¡µé¢ä¸ä½¿ç¨GPUå éç2Då3Då¾å½¢æ¸²æãå®æ¯ä¸ç§ç¨äºå¨Webæµè§å¨ä¸­åå»ºäº¤äºå¼å¾å½¢åºç¨ç¨åºçææ¯ï¼æ éæä»¶ãéè¿WebGLï¼å¼åèå¯ä»¥å¨ç½é¡µä¸åå»ºé«æ§è½çå¾å½¢åæ¸¸æã\n\nThree.jsï¼Three.jsæ¯ä¸ä¸ªç¨äºå¨Webä¸åå»º3Då¾å½¢åºç¨ç¨åºçJavaScriptåºãå®å»ºç«å¨WebGLä¹ä¸ï¼ç®åäº3Då¾å½¢ç¼ç¨çå¤ææ§ãThree.jsæä¾äºé«çº§çæ½è±¡åå·¥å·ï¼ä½¿å¼åèè½å¤æ´å®¹æå°åå»ºåç§3Dåºæ¯ãå¯¹è±¡åç¹æï¼èæ éæ·±å¥äºè§£WebGLçåºå±ç»èãå®å¹¿æ³ç¨äºWebä¸ç3Dæ¸¸æãå¯è§åãèæç°å®ç­åºç¨çå¼åã\n\n\n\nç®èè¨ä¹ï¼OpenGLæ¯åºå±çå¾å½¢æ¸²æAPIï¼WebGLæ¯å°OpenGLå¼å¥å°Webæµè§å¨ä¸­çææ¯ï¼èThree.jsæ¯ä¸ä¸ªå»ºç«å¨WebGLä¹ä¸çé«çº§JavaScriptåºï¼ç¨äºç®åWebä¸ç3Då¾å½¢ç¼ç¨ãä½¿ç¨Three.jså¯ä»¥æ´å®¹æå°åå»ºå·æå¸å¼ååäºå¨æ§çWebä¸ç3Då¾å½¢åºç¨ç¨åºã\n\n\n# Canvas\n\nçå°è¿éå¯è½ä¼æçé®ï¼é£å¹³æ¶æä»¬ç¨è¿ç canvas æ¯ä»ä¹å¢ï¼\n\nCanvas æ¯ä¸ä¸ªHTML5æ åç2Dç»å¾APIï¼å®ä½¿ç¨JavaScript APIæ¥ç»å¶å¾å½¢ãCanvasæä¾äºä¸ç»ç®åçç»å¾å½æ°ï¼å¯ä»¥ç¨äºç»å¶å¾å½¢ãææ¬åå¾åãCanvaséå¸¸ç¨äºåå»ºç®åç2Då¾å½¢ï¼æ¯å¦å¾è¡¨ãæ¸¸æåç¨æ·çé¢ãå æ­¤ï¼WebGLä¸»è¦ç¨äºåå»ºå¤æç3Dåºæ¯ï¼èCanvasåç¨äºåå»ºç®åç2Då¾å½¢ãå½éè¦å¤çå¤æç3Dåºæ¯æ¶ï¼ä½¿ç¨WebGLä¼æ´å éåãå½åªéè¦åå»ºç®åç2Då¾å½¢æ¶ï¼ä½¿ç¨Canvasä¼æ´å ä¾¿æ·ã\n\n\n# three.js\n\n\n\nè®¡ç®æºæ¯å¦ä½æ¾ç¤º3dç©ä½ç? æ¾ç¤ºå¨æ¯äºç»´ç, ä¸ç»´çç©ä½è¦åæäºç»´ç, ä¸å®æ¯ç»è¿äºæç§åæ¢.\n\nè¿ä¸ªè¿ç¨è·ç§ç¸æ¯å¾ç¸ä¼¼ç, ç§ç¸ä¹æ¯å°çå®ä¸ç(ä¸ç»´ç)åæä¸å¼ ç§ç(äºç»´ç), æ³è±¡ä¸ä¸æ¯å¦ä½ç§ç¸ç:\n\n 1. æ¾ä¸ä¸ªå¥½å°ç¹, è¢«ç§ç¸çäººæå¥½å§¿å¿\n 2. æ¾ä¸ªå¥½çè§åº¦æ¾ç½®ç¸æº\n 3. æä¸å¿«é¨\n\n\n# åºç¡åç´ \n\n**åºæ¯ï¼sceneï¼**ç¸å½äºä¸ä¸ªèå°ï¼æä»¬éè¦å°å±ç¤ºçä¸è¥¿æ¾å¨è¿ä¸ªèå°ä¸ã\n\n**ç§ç¸æºï¼cameraï¼**ç¸å½äºäººçç¼çï¼æä»¬æ³è¦çå°ç©ä½ï¼å°±éè¦ç¼çå»çã\n\n**åæºï¼lightï¼**ç©ä½éè¦åç§æè½çè§ï¼ä¸ç¶å°±æ¯æ¼é»ä¸çï¼ä½æ¯å¨æäºæåµä¸å±ç¤ºç©ä½ä¸éè¦åæºï¼ã\n\n**ç©ä½ï¼objectï¼**æä»¬æ³è¦è¡¨ç°çåå®¹ï¼ä¼æå½¢ç¶åæè´¨å±æ§ã\n\n**æ¸²æå¨ï¼renderï¼**æä»¬å¯ä»¥ææ¸²æå¨æ³æ³æä¸ºä¸ä¸ªç»å¸ï¼æä»¬éè¦å¨è¿ä¸ªç»å¸ä¸å»ç»åºæä»¬éè¦å±ç¤ºçä¸è¥¿ã\n\n\n\n\n# åºæ¯\n\nåºæ¯æ¯ä¸ä¸ªä¸ç»´ç©ºé´ï¼æ¯å­æ¾ææç©åçå®¹å¨ï¼å¯ä»¥æåºæ¯æ³è±¡æä¸ä¸ªç©ºæ¿é´ï¼æ¿é´éé¢å¯ä»¥æ¾ç½®è¦åç°çç©ä½ãç¸æºãåæºç­ã\n\n\n\nåºæ¯åè®¸å¨ä»ä¹å°æ¹ãææ¾ä»ä¹ä¸è¥¿æ¥äº¤ç» three.js æ¥è¿è¡æ¸²æï¼åºæ¯ä¹å°±æ¯æ¾ç½®ç©ä½ãç¯ååç¸æºçå°æ¹ã\n\nåå»ºåºæ¯ï¼è¦æä»¶ä¸ä¸ªåºæ¯å¾ç®åï¼åªéè¦newä¸ä¸ªåºæ¯å¯¹è±¡åºæ¥å³å¯ï¼\n\nconst scene = new THREE.Scene()\n\n\n\n# ç¸æº\n\nå¨åºæ¯ä¸­éè¦æ·»å ä¸ä¸ªç¸æºï¼ç¸æºç¨æ¥ç¡®å®è§å¯ä½ç½®ãæ¹åãè§åº¦ï¼ç¸æºçå°çåå®¹ï¼å°±æ¯æä»¬æç»å¨å±å¹ä¸çå°çåå®¹ãå¨ç¨åºè¿è¡è¿ç¨ä¸­ï¼å¯ä»¥è°æ´ç¸æºçä½ç½®ãæ¹åãè§åº¦ã\n\næ³è±¡ä¸ä¸ï¼å¨æ¿é´éæ¾äºä¸ä¸ªæåæºï¼ä½ ä¸å¨æ¿é´éé¢ï¼ä½å¯ä»¥è¿ç¨æ§å¶ç¸æºç§»å¨ï¼æåæºä¼ ç»è¿ç¨çµèä¸å±ç¤ºåºæ¥çç»é¢ï¼å°±æ¯ three.js å¨å±å¹ä¸åç°çç»é¢ã\n\nç¸æºåä¸ºä¸¤ç§ éè§æå½±ç¸æºï¼perspectiveCameraï¼åæ­£äº¤æå½±ç¸æºï¼OrthographicCamera ï¼\n\néè§æå½±ç¸æºï¼perspectiveCameraï¼ç¹ç¹éè§ç¸æºçæææ¯æ¨¡æäººç¼çå°çææï¼è·äººç¼çå°çä¸çæ¯ä¸æ ·çï¼è¿å¤§è¿å°ã\n\næ­£äº¤æå½±ç¸æºï¼OrthographicCamera ï¼ç¹ç¹æ­£äº¤æå½±åè¿è¿é½æ¯ä¸æ ·çå¤§å°ï¼ä¸ç»´ç©ºé´ä¸­å¹³è¡ççº¿ï¼æå½±å°äºç»´ç©ºé´ä¹ä¸å®æ¯å¹³è¡çã\n\n\n\nåå»ºéè§æå½±ç¸æºï¼\n\nconst camera = new THREE.PerspectiveCamera(fov, aspect, near, far);\n// è®¾ç½®ç¸æºä½ç½®ï¼\ncamera.position.set(5, 10, 10);\n\n\nåæ°       ä»ç»\nfov      è§éï¼è¡¨ç¤ºæåæºè½çå°çè§éãæ¨èé»è®¤å¼50\naspect   æå®æ¸²æç»ææ°´å¹³æ¹ååç«ç´æ¹åé¿åº¦çæ¯å¼ï¼æ¨èé»è®¤å¼ä¸ºçªå£çå®½é«æ¯ï¼å³window.innerWidth/window.innerHeightï¼å¦ææ¯ä¾è®¾ç½®çä¸å¯¹ï¼ä¼åç°æ¸²æåºæ¥çç»é¢ææä¼¸æèåç¼©çæè§ã\nnear     è¿ç«¯æ¸²æè·ç¦»ï¼æå®ä»è·ç¦»æåæºå¤è¿çä½ç½®å¼å§æ¸²æï¼æ¨èé»è®¤å¼0.1\nfar      è¿ç«¯è·ç¦»ï¼æå®æåæºä»å®æå¨çä½ç½®æè¿è½çå°å¤è¿ï¼å¤ªå°åºæ¯ä¸­çè¿å¤ä¸ä¼è¢«æ¸²æï¼å¤ªå¤§ä¼æµªè´¹èµæºå½±åæ§è½ï¼æ¨èé»è®¤å¼1000ã\n\n\n# ç©ä½\n\nå¨ Three.js ä¸­ä¸ºæä»¬é¢è®¾äºä¸äºäºç»´åä¸ç»´å ä½ä½æ¨¡åï¼\n\nPlaneGeometryï¼å¹³é¢å ä½ä½ï¼\n\nCircleGeometryï¼åå½¢å ä½ä½ï¼\n\nRingGeometryï¼åç¯å ä½ä½ï¼\n\nBoxGeometryï¼ç«æ¹å ä½ä½ï¼\n\nSphereGeometryï¼çå ä½ä½ï¼\n\nCylinderGeometryï¼åæ±å ä½ä½ï¼\n\nTorusGeometryï¼åç¯å ä½ä½ï¼\n\n// åå»ºä¸ä¸ªé¿ãå®½ãé«åä¸º1ä¸ªåä½çç«æ¹ä½\nconst geometry = new THREE.BoxGeometry(1, 1, 1); \n\n\n\n# åæº\n\nå¨ Three.js ä¸­å¯ä»¥åå»ºåºå¾å¤ä¸åç±»åçåæºï¼\n\n**ç¯å¢åï¼AmbientLightï¼ï¼**ç¯å¢åæ¯ä¸ç§åºæ¬åæºï¼å®ä¼ååçç§äº®åºæ¯ä¸­çææç©ä½ï¼ç¯å¢åæ²¡æç¹å®çæ¥æºæ¹åï¼ä¸ä¸ä¼äº§çé´å½±ã\n\n**èåç¯ï¼SpotLightï¼ï¼**èåç¯ï¼ç±»ä¼¼æçµç­ãèå°èåç¯ï¼æ¯ä»ä¸ä¸ªæ¹åä¸çä¸ä¸ªç¹ååºï¼æ²¿çä¸ä¸ªåé¥ä½ï¼å®ç¦»åè¶è¿ï¼å®çå°ºå¯¸å°±è¶å¤§ãè¿ç§åæºä¼äº§çé´å½±ã\n\n**å¹³è¡åï¼DirectionalLightï¼ï¼**å¹³è¡åæ¯æ²¿çç¹å®æ¹ååå°çåãè¿ç§åçè¡¨ç°åæ¯æ éè¿,ä»å®ååºçåçº¿é½æ¯å¹³è¡çãå¸¸å¸¸ç¨å¹³è¡åæ¥æ¨¡æå¤ªé³å çææ; å¤ªé³è¶³å¤è¿ï¼å æ­¤æä»¬å¯ä»¥è®¤ä¸ºå¤ªé³çä½ç½®æ¯æ éè¿ï¼æä»¥æä»¬è®¤ä¸ºä»å¤ªé³ååºçåçº¿ä¹é½æ¯å¹³è¡çãè¿ç§åæºä¼äº§çé´å½±ã\n\n// åå»ºåæº\nconst spotLight = new THREE.SpotLight(0xffffff);\n// è®¾ç½®åæºä½ç½®\nspotLight.position.set(0, 20, 20);\n// è®¾ç½®åæºç§å°çå¼ºåº¦\nspotLight.intensity = 5;\n// å°åæºæ·»å å°åºæ¯ä¸­\nscene.add(spotLight);\n\n\n\n# æ¸²æå¨\n\næ¸²æå¨çä½ç¨å°±æ¯å°ç¸æºææåºçç»é¢å¨æµè§å¨ä¸­åç°åºæ¥ãæ¸²æå¨å³å®äºæ¸²æçç»æåºè¯¥ç»å¨é¡µé¢çä»ä¹åç´ ä¸é¢ï¼å¹¶ä¸ä»¥ææ ·çæ¹å¼æ¥ç»å¶ã\n\nThree.jsä¸­æå¾å¤ç§ç±»çæ¸²æå¨ï¼ä¾å¦webGLRendererãcanvasRendererãSVGRendererï¼éå¸¸ä½¿ç¨çæ¯WebGLRendereræ¸²æå¨ã\n\n// åå»ºWebGLRendereræ¸²æå¨\nconst renderer = new THREE.WebGLRenderer();\n // éè¿è°ç¨ setSize() æ¹æ³è®¾ç½®æ¸²æçé¿å®½ï¼è®¾ç½®æ¸²æå¨ä¸ºå¨å±ï¼\nrenderer.setSize(window.innerWidth, window.innerHeight);\n // å°æ¸²æç»æå±ç¤ºå°é¡µé¢ä¸\ndocument.body.appendChild(renderer.domElement);\n// åå»ºå®æ¸²æå¨åï¼éè¦è°ç¨renderæ¹æ³å°ä¹ååå»ºå¥½çåºæ¯åç¸æºç¸ç»åä»èæ¸²æåºæ¥\nrenderer.render(scene, camera);\n\n\n\n# ä¸ç»´åæ ç³»\n\nä¸ºäºæ¹ä¾¿è§å¯3Då¾åï¼æ·»å ä¸ç»´åæ ç³»å¯¹è±¡\n\n// ä¸ºäºæ¹ä¾¿è§å¯3Då¾åï¼æ·»å ä¸ç»´åæ ç³»å¯¹è±¡\nconst axes = new THREE.AxisHelper(4); // åæ ç³»è½´é¿è®¾ç½®ä¸º 4\n// æä¸ç»´åæ ç³» æ·»å å°åºæ¯ä¸­\nscene.add(axes);\n\n\n\n\nç»¼ä¸ä½¿ç¨ Three.jsï¼å¨å±å¹ä¸å±ç¤º 3D å¾å½¢çå¤§æ¦æ­¥éª¤ï¼\n\n 1. åå»ºä¸ä¸ªä¸ç»´ç©ºé´åºæ¯ï¼ Scene ï¼ï¼\n 2. åå»ºä¸ä¸ªç¸æºï¼ Camera ï¼ï¼ç¡®å®ä¸ä¸ªè§å¯ç¹ï¼å¹¶è®¾ç½®ç¸æºçè§å¯æ¹ååè§åº¦ï¼\n 3. åå»ºæ¸²æå¨ï¼è®¾ç½®æ¸²æå¨çé¿å®½ï¼å°æ¸²æç»æå±ç¤ºå°é¡µé¢ä¸ï¼\n 4. åå»ºç©ä½ï¼å ä½ä½ãæè´¨ãç½æ ¼ï¼ãåæºï¼åæ¶è®¾ç½®åæºä½ç½®ï¼ï¼å¹¶æ·»å å°åºæ¯ä¸­å»ï¼\n 5. æåéè¿æ¸²æå¨ï¼æåºæ¯ãç¸æºæ¸²æå°é¡µé¢ä¸ã\n\n\n\n\n# three.js ä¸­çæ°å­¦\n\n\n# åé\n\nå¨æ°å­¦ä¸­ï¼åéï¼ä¹ç§°ä¸ºç¢éï¼ï¼æå·æå¤§å°ï¼magnitudeï¼åæ¹åçéãå®å¯ä»¥å½¢è±¡åå°è¡¨ç¤ºä¸ºå¸¦ç®­å¤´ççº¿æ®µã\n\n\n\n// å·²ç¥ä¸¤ä¸ªç¹çåæ \nconst A = Vector3(1, 2, 0)\nconst B = Vector3(-2, 1, 2)\n// æ± AB åé\nconst AB = B.clone().sub(A) // Vector3(-3, -1, 2)\n\n\n\n# ç¹ä¹\n\nå·²ç¥ä¸¤ä¸ªåéï¼å¦ä½æ±åéçå¤¹è§ï¼\n\n\n\nconst CosineValue = A.dot(B) / (A.length() * B.length())\n\n\n\n# åä¹\n\n\n\nå ä½æä¹ï¼å¦æä»¥åéaåbä¸ºè¾¹ææä¸ä¸ªå¹³è¡åè¾¹å½¢ï¼é£ä¹è¿ä¸¤ä¸ªåéå¤ç§¯çæ¨¡é¿ä¸è¿ä¸ªå¹³è¡åè¾¹å½¢çé¢ç§¯ç¸ç­ã\n\n// å£°æä¸ä¸ªåéå¯¹è±¡ï¼ç¨æ¥ä¿å­.crossVectors()æ¹æ³ç»æ\n  const C = new THREE.Vector3();\n  C.crossVectors(A, B);\n\n\n\n# æ¬§æè§\n\n3Dæ¸¸ææè3Dçµå½±ä¸­ï¼æ¯å¦é»å®¢å¸å½ä¸­é·ç«çæè½¬æ¯æä¹å®ç°çï¼æè½¬çç®æ³æå¾å¤ï¼è¿éä¸»è¦ä»ç»å¶ä¸­ä¸ç§ï¼æ¬§æè§ã\n\n\n\næ¬§æè§æ¯é£æ§ç³»ç»ä¸­ç¨äºæè¿°é£è¡å¨å§¿æçæ¹å¼ï¼ä½¿ç¨ä¸ä¸ªè§åº¦æ¥è¡¨ç¤ºï¼åå«æ¯yawåèªè§ãpitchä¿¯ä»°è§ãroll æ»è½¬è§ã\n\n * yawï¼åèªè§ï¼æ¯æé£è¡å¨åç¦»åæ¥èªçº¿çè§åº¦ã\n * pitchï¼ä¿¯ä»°è§ï¼æ¯æé£è¡å¨æºå¤´æ¬èµ·çè§åº¦ã\n * rollï¼æ»è½¬è§ï¼æ¯æé£è¡å¨ç»çèªèº«å¤´å°¾è½´çº¿ç¿»æ»çè§åº¦ã\n\n\n\nconst a = new THREE.Euler( 0, 1, 1.57, 'XYZ'); // åå»ºä¸ä¸ªæ¬§æå¯¹è±¡ï¼'XYZ'è¡¨ç¤ºæè½¬é¡ºåºçå­ç¬¦ä¸²ï¼é»è®¤ä¸ºå¤§å\nconst b = new THREE.Vector3( 1, 0, 1 ); // åå»ºä¸ä¸ªåé\nb.applyEuler(a); // å°æ¬§æåæ¢åºç¨å°è¿ä¸åéä¸\n\n\n\n# ååæ°\n\nå½¢å¦a+biï¼aãbåä¸ºå®æ°ï¼çæ°ä¸ºå¤æ°ï¼å¶ä¸­ï¼aè¢«ç§°ä¸ºå®é¨ï¼bè¢«ç§°ä¸ºèé¨ï¼iä¸ºèæ°åä½ï¼i^2 = -1ã\n\n\n\n\n\nååæ°çåç°èæ¯ç±ç±å°å°æ°å­¦å®¶å¨å»Â·å¢äºÂ·åå¯é¡¿å¨1843å¹´åç«åºçãä»è±äºä¸çä¸­å¤§é¨åæ¶é´å¯»æ¾ãä¸ç»´å¤æ°ãï¼æ®è¯´æ¯å¤©æ©ä¸ä»å¿å­é½ä¼é®ä»ï¼æ¾æ²¡æ¾å°ä¸ç»´å¤æ°ï¼ä½ä»æ»æ¯è¯´è¿æ²¡æãä½æ¯å¨ 1843å¹´10æ16æ¥ï¼èµ°è¿é½ææçå¸é²å§æ¡¥çæ¶åï¼ä»çµåä¸éªï¼ä»éè¦ç»å¤æ°å ä¸çä¸æ¯ä¸ä¸ªç»´åº¦ï¼èæ¯é¢å¤ä¸¤ä¸ªåæ³çç»´åº¦ï¼å³ä¸å±ä¸ä¸ªèç»´åº¦æ¥æè¿°ç©ºé´ï¼èå®æ°å¨ç¬¬åä¸ªç»´åº¦ï¼åç´äºå¨é¨ä¸ä¸ªèæ°è½´ï¼ä»å°±å¨æ¡¥ä¸å»ä¸äºæè¿°è¿ä¸ä¸ªèæ°åä½çç­å¼ã\n\nå¨åç°ååæ°åï¼ä»åªåå°æ¨å¹¿ååæ°ï¼å¹¶ä½ä¸ºæå­¦çæè¿°ä¸ç»´ç©ºé´æ¶çç¬¬ä¸è¯­è¨ãä½å½æ¶çåæ´¾æ°å­¦å®¶ä¹æ²¡é²çï¼æ¹å¤æ¦æ¶©é¾æçååæ°æ¯éªæ¶çï¼çè³ååæ°ä¹æ³ä¸æ»¡è¶³äº¤æ¢å¾ãç¥éä¸ä¸ªä¸çºªä¹åï¼ååæ°å¨è®¡ç®æºå·¥ä¸çèµ·æ­»åçï¼ç¨åºåæå®åºç¨å°å¾åï¼æºå¨äººï¼ä»¥åæ¶åå°3ç»´ç©ºé´æè½¬çé¢åãäºåä¸çºªååæ°è¿è¢«åºç¨äºå¦ä¸ä¸ªéè¦çé¢åï¼éå­åå­¦ã\n\n\n\n\n\nthree.js å¯¹ååæ°çæ°å­¦ç»èåç®æ³è¿è¡äºå°è£ã\n\n// åå»ºä¸ä¸ªååæ°å¯¹è±¡\nconst quaternion = new THREE.Quaternion();\n// ç»å®æè½¬è½´åæè½¬è§åº¦çææè½¬ååæ°ï¼ç©ä½ç»zè½´æè½¬90åº¦\nquaternion.setFromAxisAngle(new THREE.Vector3(0, 0, 1).normalize(), Math.PI / 2);\n// åå»ºåé\nconst vector = new THREE.Vector3( 1, 0, 0 );\n// å°ååæ°åæ¢åºç¨å¨æ­¤åéä¸\nvector.applyQuaternion( quaternion );\n\n\n\n# å è½½ .GLTF/.GLB æä»¶\n\n * glTF å³æ¯ GL Transmission Format çç¼©åã\n * glTF æ¯ä¸ç§3Dåå®¹çæ ¼å¼æ åï¼ç±Khronos Groupç®¡çï¼ï¼Khronos Groupè¿ç®¡ççOpenGLç³»åãOpenCLç­éè¦çè¡ä¸æ åï¼ã\n * glTF çè®¾è®¡æ¯é¢åå®æ¶æ¸²æåºç¨çï¼å°½éæä¾å¯ä»¥ç´æ¥ä¼ è¾ç»å¾å½¢APIçæ°æ®å½¢å¼ï¼ä¸åéè¦äºæ¬¡è½¬æ¢ã\n * glTF å¯¹OpenGL ESãWebGLéå¸¸åå¥½ã\n * glTF çç®æ æ¯ï¼3Dé¢åçJPEGã\n * ä½ä¸ºä¸ä¸ªæ åï¼èª2015å¹´10æåå¸ï¼glTF 1.0ï¼ä»¥æ¥ï¼å·²ç»å¾å°äºä¸çå¹¿æ³çè®¤å¯ï¼ä½ å¯ä»¥ç¸ä¿¡å®çæ°´å¹³ã\n * glTFç®åææ°çæ¬ä¸º2.0å·²äº2017å¹´6ææ­£å¼åå¸ã\n\nGLTFæ ¼å¼æ¯ä¸ç»´æ¨¡åæ ¼å¼ï¼jsonï¼ï¼ä½ å¯ä»¥æGLTFæ ¼å¼çä¸ç»´æ¨¡åçè§£ä¸º.jpgã.pngæ ¼å¼çå¾çä¸æ ·ãWeb å¼åå¾çä¼æ¯å¸¸ç¨æ ¼å¼ï¼èå¯¹äº Web3D å¼åï¼GLTFå¿ç¶æä¸ºä¸ä¸ªéè¦çæ åæ ¼å¼ã\n\n.glTFæ¯ææ¬æ ¼å¼æä»¶ï¼è .glb æ¯ .glTF çäºè¿å¶æ ¼å¼ã\n\nSketchfab ä¸å¯ä»¥ä¸è½½ GLTF æ¨¡å\n\nimport * as THREE from 'three';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\n// åå»ºåºæ¯\nconst scene = new THREE.Scene();\n// åå»ºç¸æº\nconst camera = new THREE.PerspectiveCamera(\n    50, \n    window.innerWidth / window.innerHeight, \n    0.1, \n    1000 \n);\ncamera.position.set(0, 0, 5);\n// åå»ºæ¸²æå¨\nconst renderer = new THREE.WebGLRenderer();\nrenderer.setSize(window.innerWidth, window.innerHeight);\ndocument.body.appendChild(renderer.domElement);\n// æ·»å åæº\nconst spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(0, 20, 20);\nspotLight.intensity = 5;\nscene.add(spotLight);\n// å è½½æ¨¡å\nconst loader = new GLTFLoader().setPath('models/shiba/');\nloader.load('scene.gltf', function (gltf) {\n    scene.add(gltf.scene);\n    render();\n})\n// åå»ºæ§ä»¶å¯¹è±¡, å¯ä»¥ä½¿å¾ç¸æºå´ç»ç®æ è¿è¡è½¨éè¿å¨ã\nconst controls = new OrbitControls(camera, renderer.domElement);\ncontrols.addEventListener('change', render);\ncontrols.minDistance = 2; // è½å¤å°ç¸æºååç§»å¨å¤å°\ncontrols.maxDistance = 10; // è½å¤å°ç¸æºåå¤ç§»å¨å¤å°\ncontrols.target.set(0, 0, 0); // æ§å¶å¨çç¦ç¹ï¼è½¨éå´ç»å®è¿è¡\ncontrols.update(); // æ´æ°æ§å¶å¨\n\nfunction render() {\n    renderer.render(scene, camera);\n};\n",normalizedContent:"# three.js\n\nä»ç» three.js ä¹ååéè¦ä»ç»ä¸ä¸ä¸é¨è®¡ç®æºåºç¡å­¦ç§ï¼è®¡ç®æºå¾å½¢å­¦\n\n\n# è®¡ç®æºå¾å½¢å­¦\n\nè®¡ç®æºå¾å½¢å­¦æ¯ä¸é¨ç ç©¶éè¿è®¡ç®æºå°æ°æ®è½¬æ¢æå¾å½¢ï¼å¹¶å¨ä¸é¨æ¾ç¤ºè®¾å¤ä¸æ¾ç¤ºçåçæ¹æ³åææ¯çå­¦ç§ãå®æ¯å»ºç«å¨ä¼ ç»çå¾å­¦çè®ºãåºç¨æ°å­¦åè®¡ç®æºç§å­¦åºç¡ä¸çä¸é¨è¾¹ç¼å­¦ç§ã\n\næ»èè¨ä¹è®¡ç®æºå¾å½¢å­¦æ¯ç ç©¶ææ ·å©ç¨è®¡ç®æºæ¥æ¾ç¤ºãçæåå¤çå¾å½¢çåçãæ¹æ³åææ¯çä¸é¨å­¦ç§ï¼è¿éçå¾å½¢æ¯æä¸ç»´å¾å½¢çå¤çã\n\n\n# 1. çµå½±ç¹æ\n\nè®¡ç®æºå¾å½¢å­¦å¨çµå½±ç¹æä¸­æçå¹¿æ³çåºç¨ãéè¿è®¡ç®æºçæçå¾å½¢ï¼çµå½±å¶ä½äººåå¯ä»¥åé åºåç§æ³è±¡åä¸°å¯çç¹æï¼ä¾å¦é¼çççç¸ãæªç©ä¸å¤æäººãè¶å¡è±ä¿çåºæ¯ç­ãè¿äºç¹æå¤§å¤§æåäºçµå½±çè§è§ææï¼å¹¶ä¸ºæäºæèå¢æ·»äºå¨æåå¸å¼åã\n\n\n\n\n# 2. æ¸¸æå¼å\n\nè®¡ç®æºå¾å½¢å­¦å¨æ¸¸æå¼åä¸­ä¹æ®æ¼çéè¦è§è²ãæ¸¸æå¼åäººåä½¿ç¨è®¡ç®æºå¾å½¢å­¦çææ¯æ¥è®¾è®¡æ¸¸æä¸­çåºæ¯ãè§è²åå¨ç»ææãéè¿é¼ççæ¸²æåäº¤äºæ§è½ï¼è®¡ç®æºå¾å½¢å­¦ä¸ºç©å®¶æä¾äºèº«ä¸´å¶å¢çæ¸¸æä½éªã\n\n\n\n\n# 3. èæç°å®\n\nèæç°å®æ¯è®¡ç®æºå¾å½¢å­¦çä¸ä¸ªéè¦åºç¨é¢åãåå©äºè®¡ç®æºå¾å½¢å­¦çææ¯ï¼èæç°å®å¯ä»¥æ¨¡æåºç°å®ä¸çæèæä¸ççåºæ¯ï¼å¹¶éè¿å¤´æ´å¼è®¾å¤ç­äº¤äºå·¥å·è®©ç¨æ·èº«ä¸´å¶å¢å°ä½éªãèæç°å®ææ¯å·²ç»å¨æ¸¸æãæè²ãå»çç­é¢åå¾å°äºå¹¿æ³åºç¨ã\n\n\n\n\n# 4. å·¥ç¨è®¾è®¡\n\nè®¡ç®æºå¾å½¢å­¦å¨å·¥ç¨è®¾è®¡ä¸­ä¹èµ·å°äºéè¦çä½ç¨ãéè¿ä½¿ç¨ä¸ç»´å»ºæ¨¡åæ¸²æææ¯ï¼å·¥ç¨å¸å¯ä»¥è®¾è®¡åæ¨¡æåºåç§äº§ååå»ºç­çå¤è§ååè½ï¼ä»èå®ç°å¯¹è®¾è®¡æ¹æ¡çå¯è§åè¯ä¼°åæ¹åã\n\n\n\n\n\n\n# è®¡ç®æºå¾å½¢å­¦ãopenglãwebglãthree.js å³ç³»\n\nè®¡ç®æºå¾å½¢å­¦ï¼è®¡ç®æºå¾å½¢å­¦æ¯ä¸é¨å­¦ç§ï¼èç´éå¸¸å¤§ï¼è¢«å¹¿æ³åºç¨äºç¹æãææãå¨ç»ãè®¾è®¡ãæ¨¡æä¸ä»¿çå½ä¸­ã\n\nopenglï¼æ¯ä¸ç§cè¯­è¨æ åçåºï¼å°åç§è®¡ç®æºå¾å½¢å­¦çææå°è£å¥åºï¼å¶å®å¼åäººåå¯ä»¥éå¸¸æ¹ä¾¿çè°ç¨ï¼ä¸éè¦è¿è¡ç¹å¤çåºå±æå»ºå·¥ä½ï¼ä¾¿å¯ä»¥å®ç°ç¸å³åºç¨çå¼åãå®æä¾äºä¸ç»å½æ°åæ¥å£ï¼æ¯ä¸ç§åºå±çapiã\n\nwebglï¼webglæ¯åºäºjavascriptçwebå¾å½¢åºï¼å®å°opengl es 2.0çåè½æ´é²ç»äºwebæµè§å¨ãwebglåè®¸å¨webé¡µé¢ä¸ä½¿ç¨gpuå éç2då3då¾å½¢æ¸²æãå®æ¯ä¸ç§ç¨äºå¨webæµè§å¨ä¸­åå»ºäº¤äºå¼å¾å½¢åºç¨ç¨åºçææ¯ï¼æ éæä»¶ãéè¿webglï¼å¼åèå¯ä»¥å¨ç½é¡µä¸åå»ºé«æ§è½çå¾å½¢åæ¸¸æã\n\nthree.jsï¼three.jsæ¯ä¸ä¸ªç¨äºå¨webä¸åå»º3då¾å½¢åºç¨ç¨åºçjavascriptåºãå®å»ºç«å¨webglä¹ä¸ï¼ç®åäº3då¾å½¢ç¼ç¨çå¤ææ§ãthree.jsæä¾äºé«çº§çæ½è±¡åå·¥å·ï¼ä½¿å¼åèè½å¤æ´å®¹æå°åå»ºåç§3dåºæ¯ãå¯¹è±¡åç¹æï¼èæ éæ·±å¥äºè§£webglçåºå±ç»èãå®å¹¿æ³ç¨äºwebä¸ç3dæ¸¸æãå¯è§åãèæç°å®ç­åºç¨çå¼åã\n\n\n\nç®èè¨ä¹ï¼openglæ¯åºå±çå¾å½¢æ¸²æapiï¼webglæ¯å°openglå¼å¥å°webæµè§å¨ä¸­çææ¯ï¼èthree.jsæ¯ä¸ä¸ªå»ºç«å¨webglä¹ä¸çé«çº§javascriptåºï¼ç¨äºç®åwebä¸ç3då¾å½¢ç¼ç¨ãä½¿ç¨three.jså¯ä»¥æ´å®¹æå°åå»ºå·æå¸å¼ååäºå¨æ§çwebä¸ç3då¾å½¢åºç¨ç¨åºã\n\n\n# canvas\n\nçå°è¿éå¯è½ä¼æçé®ï¼é£å¹³æ¶æä»¬ç¨è¿ç canvas æ¯ä»ä¹å¢ï¼\n\ncanvas æ¯ä¸ä¸ªhtml5æ åç2dç»å¾apiï¼å®ä½¿ç¨javascript apiæ¥ç»å¶å¾å½¢ãcanvasæä¾äºä¸ç»ç®åçç»å¾å½æ°ï¼å¯ä»¥ç¨äºç»å¶å¾å½¢ãææ¬åå¾åãcanvaséå¸¸ç¨äºåå»ºç®åç2då¾å½¢ï¼æ¯å¦å¾è¡¨ãæ¸¸æåç¨æ·çé¢ãå æ­¤ï¼webglä¸»è¦ç¨äºåå»ºå¤æç3dåºæ¯ï¼ècanvasåç¨äºåå»ºç®åç2då¾å½¢ãå½éè¦å¤çå¤æç3dåºæ¯æ¶ï¼ä½¿ç¨webglä¼æ´å éåãå½åªéè¦åå»ºç®åç2då¾å½¢æ¶ï¼ä½¿ç¨canvasä¼æ´å ä¾¿æ·ã\n\n\n# three.js\n\n\n\nè®¡ç®æºæ¯å¦ä½æ¾ç¤º3dç©ä½ç? æ¾ç¤ºå¨æ¯äºç»´ç, ä¸ç»´çç©ä½è¦åæäºç»´ç, ä¸å®æ¯ç»è¿äºæç§åæ¢.\n\nè¿ä¸ªè¿ç¨è·ç§ç¸æ¯å¾ç¸ä¼¼ç, ç§ç¸ä¹æ¯å°çå®ä¸ç(ä¸ç»´ç)åæä¸å¼ ç§ç(äºç»´ç), æ³è±¡ä¸ä¸æ¯å¦ä½ç§ç¸ç:\n\n 1. æ¾ä¸ä¸ªå¥½å°ç¹, è¢«ç§ç¸çäººæå¥½å§¿å¿\n 2. æ¾ä¸ªå¥½çè§åº¦æ¾ç½®ç¸æº\n 3. æä¸å¿«é¨\n\n\n# åºç¡åç´ \n\n**åºæ¯ï¼sceneï¼**ç¸å½äºä¸ä¸ªèå°ï¼æä»¬éè¦å°å±ç¤ºçä¸è¥¿æ¾å¨è¿ä¸ªèå°ä¸ã\n\n**ç§ç¸æºï¼cameraï¼**ç¸å½äºäººçç¼çï¼æä»¬æ³è¦çå°ç©ä½ï¼å°±éè¦ç¼çå»çã\n\n**åæºï¼lightï¼**ç©ä½éè¦åç§æè½çè§ï¼ä¸ç¶å°±æ¯æ¼é»ä¸çï¼ä½æ¯å¨æäºæåµä¸å±ç¤ºç©ä½ä¸éè¦åæºï¼ã\n\n**ç©ä½ï¼objectï¼**æä»¬æ³è¦è¡¨ç°çåå®¹ï¼ä¼æå½¢ç¶åæè´¨å±æ§ã\n\n**æ¸²æå¨ï¼renderï¼**æä»¬å¯ä»¥ææ¸²æå¨æ³æ³æä¸ºä¸ä¸ªç»å¸ï¼æä»¬éè¦å¨è¿ä¸ªç»å¸ä¸å»ç»åºæä»¬éè¦å±ç¤ºçä¸è¥¿ã\n\n\n\n\n# åºæ¯\n\nåºæ¯æ¯ä¸ä¸ªä¸ç»´ç©ºé´ï¼æ¯å­æ¾ææç©åçå®¹å¨ï¼å¯ä»¥æåºæ¯æ³è±¡æä¸ä¸ªç©ºæ¿é´ï¼æ¿é´éé¢å¯ä»¥æ¾ç½®è¦åç°çç©ä½ãç¸æºãåæºç­ã\n\n\n\nåºæ¯åè®¸å¨ä»ä¹å°æ¹ãææ¾ä»ä¹ä¸è¥¿æ¥äº¤ç» three.js æ¥è¿è¡æ¸²æï¼åºæ¯ä¹å°±æ¯æ¾ç½®ç©ä½ãç¯ååç¸æºçå°æ¹ã\n\nåå»ºåºæ¯ï¼è¦æä»¶ä¸ä¸ªåºæ¯å¾ç®åï¼åªéè¦newä¸ä¸ªåºæ¯å¯¹è±¡åºæ¥å³å¯ï¼\n\nconst scene = new three.scene()\n\n\n\n# ç¸æº\n\nå¨åºæ¯ä¸­éè¦æ·»å ä¸ä¸ªç¸æºï¼ç¸æºç¨æ¥ç¡®å®è§å¯ä½ç½®ãæ¹åãè§åº¦ï¼ç¸æºçå°çåå®¹ï¼å°±æ¯æä»¬æç»å¨å±å¹ä¸çå°çåå®¹ãå¨ç¨åºè¿è¡è¿ç¨ä¸­ï¼å¯ä»¥è°æ´ç¸æºçä½ç½®ãæ¹åãè§åº¦ã\n\næ³è±¡ä¸ä¸ï¼å¨æ¿é´éæ¾äºä¸ä¸ªæåæºï¼ä½ ä¸å¨æ¿é´éé¢ï¼ä½å¯ä»¥è¿ç¨æ§å¶ç¸æºç§»å¨ï¼æåæºä¼ ç»è¿ç¨çµèä¸å±ç¤ºåºæ¥çç»é¢ï¼å°±æ¯ three.js å¨å±å¹ä¸åç°çç»é¢ã\n\nç¸æºåä¸ºä¸¤ç§ éè§æå½±ç¸æºï¼perspectivecameraï¼åæ­£äº¤æå½±ç¸æºï¼orthographiccamera ï¼\n\néè§æå½±ç¸æºï¼perspectivecameraï¼ç¹ç¹éè§ç¸æºçæææ¯æ¨¡æäººç¼çå°çææï¼è·äººç¼çå°çä¸çæ¯ä¸æ ·çï¼è¿å¤§è¿å°ã\n\næ­£äº¤æå½±ç¸æºï¼orthographiccamera ï¼ç¹ç¹æ­£äº¤æå½±åè¿è¿é½æ¯ä¸æ ·çå¤§å°ï¼ä¸ç»´ç©ºé´ä¸­å¹³è¡ççº¿ï¼æå½±å°äºç»´ç©ºé´ä¹ä¸å®æ¯å¹³è¡çã\n\n\n\nåå»ºéè§æå½±ç¸æºï¼\n\nconst camera = new three.perspectivecamera(fov, aspect, near, far);\n// è®¾ç½®ç¸æºä½ç½®ï¼\ncamera.position.set(5, 10, 10);\n\n\nåæ°       ä»ç»\nfov      è§éï¼è¡¨ç¤ºæåæºè½çå°çè§éãæ¨èé»è®¤å¼50\naspect   æå®æ¸²æç»ææ°´å¹³æ¹ååç«ç´æ¹åé¿åº¦çæ¯å¼ï¼æ¨èé»è®¤å¼ä¸ºçªå£çå®½é«æ¯ï¼å³window.innerwidth/window.innerheightï¼å¦ææ¯ä¾è®¾ç½®çä¸å¯¹ï¼ä¼åç°æ¸²æåºæ¥çç»é¢ææä¼¸æèåç¼©çæè§ã\nnear     è¿ç«¯æ¸²æè·ç¦»ï¼æå®ä»è·ç¦»æåæºå¤è¿çä½ç½®å¼å§æ¸²æï¼æ¨èé»è®¤å¼0.1\nfar      è¿ç«¯è·ç¦»ï¼æå®æåæºä»å®æå¨çä½ç½®æè¿è½çå°å¤è¿ï¼å¤ªå°åºæ¯ä¸­çè¿å¤ä¸ä¼è¢«æ¸²æï¼å¤ªå¤§ä¼æµªè´¹èµæºå½±åæ§è½ï¼æ¨èé»è®¤å¼1000ã\n\n\n# ç©ä½\n\nå¨ three.js ä¸­ä¸ºæä»¬é¢è®¾äºä¸äºäºç»´åä¸ç»´å ä½ä½æ¨¡åï¼\n\nplanegeometryï¼å¹³é¢å ä½ä½ï¼\n\ncirclegeometryï¼åå½¢å ä½ä½ï¼\n\nringgeometryï¼åç¯å ä½ä½ï¼\n\nboxgeometryï¼ç«æ¹å ä½ä½ï¼\n\nspheregeometryï¼çå ä½ä½ï¼\n\ncylindergeometryï¼åæ±å ä½ä½ï¼\n\ntorusgeometryï¼åç¯å ä½ä½ï¼\n\n// åå»ºä¸ä¸ªé¿ãå®½ãé«åä¸º1ä¸ªåä½çç«æ¹ä½\nconst geometry = new three.boxgeometry(1, 1, 1); \n\n\n\n# åæº\n\nå¨ three.js ä¸­å¯ä»¥åå»ºåºå¾å¤ä¸åç±»åçåæºï¼\n\n**ç¯å¢åï¼ambientlightï¼ï¼**ç¯å¢åæ¯ä¸ç§åºæ¬åæºï¼å®ä¼ååçç§äº®åºæ¯ä¸­çææç©ä½ï¼ç¯å¢åæ²¡æç¹å®çæ¥æºæ¹åï¼ä¸ä¸ä¼äº§çé´å½±ã\n\n**èåç¯ï¼spotlightï¼ï¼**èåç¯ï¼ç±»ä¼¼æçµç­ãèå°èåç¯ï¼æ¯ä»ä¸ä¸ªæ¹åä¸çä¸ä¸ªç¹ååºï¼æ²¿çä¸ä¸ªåé¥ä½ï¼å®ç¦»åè¶è¿ï¼å®çå°ºå¯¸å°±è¶å¤§ãè¿ç§åæºä¼äº§çé´å½±ã\n\n**å¹³è¡åï¼directionallightï¼ï¼**å¹³è¡åæ¯æ²¿çç¹å®æ¹ååå°çåãè¿ç§åçè¡¨ç°åæ¯æ éè¿,ä»å®ååºçåçº¿é½æ¯å¹³è¡çãå¸¸å¸¸ç¨å¹³è¡åæ¥æ¨¡æå¤ªé³å çææ; å¤ªé³è¶³å¤è¿ï¼å æ­¤æä»¬å¯ä»¥è®¤ä¸ºå¤ªé³çä½ç½®æ¯æ éè¿ï¼æä»¥æä»¬è®¤ä¸ºä»å¤ªé³ååºçåçº¿ä¹é½æ¯å¹³è¡çãè¿ç§åæºä¼äº§çé´å½±ã\n\n// åå»ºåæº\nconst spotlight = new three.spotlight(0xffffff);\n// è®¾ç½®åæºä½ç½®\nspotlight.position.set(0, 20, 20);\n// è®¾ç½®åæºç§å°çå¼ºåº¦\nspotlight.intensity = 5;\n// å°åæºæ·»å å°åºæ¯ä¸­\nscene.add(spotlight);\n\n\n\n# æ¸²æå¨\n\næ¸²æå¨çä½ç¨å°±æ¯å°ç¸æºææåºçç»é¢å¨æµè§å¨ä¸­åç°åºæ¥ãæ¸²æå¨å³å®äºæ¸²æçç»æåºè¯¥ç»å¨é¡µé¢çä»ä¹åç´ ä¸é¢ï¼å¹¶ä¸ä»¥ææ ·çæ¹å¼æ¥ç»å¶ã\n\nthree.jsä¸­æå¾å¤ç§ç±»çæ¸²æå¨ï¼ä¾å¦webglrendererãcanvasrendererãsvgrendererï¼éå¸¸ä½¿ç¨çæ¯webglrendereræ¸²æå¨ã\n\n// åå»ºwebglrendereræ¸²æå¨\nconst renderer = new three.webglrenderer();\n // éè¿è°ç¨ setsize() æ¹æ³è®¾ç½®æ¸²æçé¿å®½ï¼è®¾ç½®æ¸²æå¨ä¸ºå¨å±ï¼\nrenderer.setsize(window.innerwidth, window.innerheight);\n // å°æ¸²æç»æå±ç¤ºå°é¡µé¢ä¸\ndocument.body.appendchild(renderer.domelement);\n// åå»ºå®æ¸²æå¨åï¼éè¦è°ç¨renderæ¹æ³å°ä¹ååå»ºå¥½çåºæ¯åç¸æºç¸ç»åä»èæ¸²æåºæ¥\nrenderer.render(scene, camera);\n\n\n\n# ä¸ç»´åæ ç³»\n\nä¸ºäºæ¹ä¾¿è§å¯3då¾åï¼æ·»å ä¸ç»´åæ ç³»å¯¹è±¡\n\n// ä¸ºäºæ¹ä¾¿è§å¯3då¾åï¼æ·»å ä¸ç»´åæ ç³»å¯¹è±¡\nconst axes = new three.axishelper(4); // åæ ç³»è½´é¿è®¾ç½®ä¸º 4\n// æä¸ç»´åæ ç³» æ·»å å°åºæ¯ä¸­\nscene.add(axes);\n\n\n\n\nç»¼ä¸ä½¿ç¨ three.jsï¼å¨å±å¹ä¸å±ç¤º 3d å¾å½¢çå¤§æ¦æ­¥éª¤ï¼\n\n 1. åå»ºä¸ä¸ªä¸ç»´ç©ºé´åºæ¯ï¼ scene ï¼ï¼\n 2. åå»ºä¸ä¸ªç¸æºï¼ camera ï¼ï¼ç¡®å®ä¸ä¸ªè§å¯ç¹ï¼å¹¶è®¾ç½®ç¸æºçè§å¯æ¹ååè§åº¦ï¼\n 3. åå»ºæ¸²æå¨ï¼è®¾ç½®æ¸²æå¨çé¿å®½ï¼å°æ¸²æç»æå±ç¤ºå°é¡µé¢ä¸ï¼\n 4. åå»ºç©ä½ï¼å ä½ä½ãæè´¨ãç½æ ¼ï¼ãåæºï¼åæ¶è®¾ç½®åæºä½ç½®ï¼ï¼å¹¶æ·»å å°åºæ¯ä¸­å»ï¼\n 5. æåéè¿æ¸²æå¨ï¼æåºæ¯ãç¸æºæ¸²æå°é¡µé¢ä¸ã\n\n\n\n\n# three.js ä¸­çæ°å­¦\n\n\n# åé\n\nå¨æ°å­¦ä¸­ï¼åéï¼ä¹ç§°ä¸ºç¢éï¼ï¼æå·æå¤§å°ï¼magnitudeï¼åæ¹åçéãå®å¯ä»¥å½¢è±¡åå°è¡¨ç¤ºä¸ºå¸¦ç®­å¤´ççº¿æ®µã\n\n\n\n// å·²ç¥ä¸¤ä¸ªç¹çåæ \nconst a = vector3(1, 2, 0)\nconst b = vector3(-2, 1, 2)\n// æ± ab åé\nconst ab = b.clone().sub(a) // vector3(-3, -1, 2)\n\n\n\n# ç¹ä¹\n\nå·²ç¥ä¸¤ä¸ªåéï¼å¦ä½æ±åéçå¤¹è§ï¼\n\n\n\nconst cosinevalue = a.dot(b) / (a.length() * b.length())\n\n\n\n# åä¹\n\n\n\nå ä½æä¹ï¼å¦æä»¥åéaåbä¸ºè¾¹ææä¸ä¸ªå¹³è¡åè¾¹å½¢ï¼é£ä¹è¿ä¸¤ä¸ªåéå¤ç§¯çæ¨¡é¿ä¸è¿ä¸ªå¹³è¡åè¾¹å½¢çé¢ç§¯ç¸ç­ã\n\n// å£°æä¸ä¸ªåéå¯¹è±¡ï¼ç¨æ¥ä¿å­.crossvectors()æ¹æ³ç»æ\n  const c = new three.vector3();\n  c.crossvectors(a, b);\n\n\n\n# æ¬§æè§\n\n3dæ¸¸ææè3dçµå½±ä¸­ï¼æ¯å¦é»å®¢å¸å½ä¸­é·ç«çæè½¬æ¯æä¹å®ç°çï¼æè½¬çç®æ³æå¾å¤ï¼è¿éä¸»è¦ä»ç»å¶ä¸­ä¸ç§ï¼æ¬§æè§ã\n\n\n\næ¬§æè§æ¯é£æ§ç³»ç»ä¸­ç¨äºæè¿°é£è¡å¨å§¿æçæ¹å¼ï¼ä½¿ç¨ä¸ä¸ªè§åº¦æ¥è¡¨ç¤ºï¼åå«æ¯yawåèªè§ãpitchä¿¯ä»°è§ãroll æ»è½¬è§ã\n\n * yawï¼åèªè§ï¼æ¯æé£è¡å¨åç¦»åæ¥èªçº¿çè§åº¦ã\n * pitchï¼ä¿¯ä»°è§ï¼æ¯æé£è¡å¨æºå¤´æ¬èµ·çè§åº¦ã\n * rollï¼æ»è½¬è§ï¼æ¯æé£è¡å¨ç»çèªèº«å¤´å°¾è½´çº¿ç¿»æ»çè§åº¦ã\n\n\n\nconst a = new three.euler( 0, 1, 1.57, 'xyz'); // åå»ºä¸ä¸ªæ¬§æå¯¹è±¡ï¼'xyz'è¡¨ç¤ºæè½¬é¡ºåºçå­ç¬¦ä¸²ï¼é»è®¤ä¸ºå¤§å\nconst b = new three.vector3( 1, 0, 1 ); // åå»ºä¸ä¸ªåé\nb.applyeuler(a); // å°æ¬§æåæ¢åºç¨å°è¿ä¸åéä¸\n\n\n\n# ååæ°\n\nå½¢å¦a+biï¼aãbåä¸ºå®æ°ï¼çæ°ä¸ºå¤æ°ï¼å¶ä¸­ï¼aè¢«ç§°ä¸ºå®é¨ï¼bè¢«ç§°ä¸ºèé¨ï¼iä¸ºèæ°åä½ï¼i^2 = -1ã\n\n\n\n\n\nååæ°çåç°èæ¯ç±ç±å°å°æ°å­¦å®¶å¨å»Â·å¢äºÂ·åå¯é¡¿å¨1843å¹´åç«åºçãä»è±äºä¸çä¸­å¤§é¨åæ¶é´å¯»æ¾ãä¸ç»´å¤æ°ãï¼æ®è¯´æ¯å¤©æ©ä¸ä»å¿å­é½ä¼é®ä»ï¼æ¾æ²¡æ¾å°ä¸ç»´å¤æ°ï¼ä½ä»æ»æ¯è¯´è¿æ²¡æãä½æ¯å¨ 1843å¹´10æ16æ¥ï¼èµ°è¿é½ææçå¸é²å§æ¡¥çæ¶åï¼ä»çµåä¸éªï¼ä»éè¦ç»å¤æ°å ä¸çä¸æ¯ä¸ä¸ªç»´åº¦ï¼èæ¯é¢å¤ä¸¤ä¸ªåæ³çç»´åº¦ï¼å³ä¸å±ä¸ä¸ªèç»´åº¦æ¥æè¿°ç©ºé´ï¼èå®æ°å¨ç¬¬åä¸ªç»´åº¦ï¼åç´äºå¨é¨ä¸ä¸ªèæ°è½´ï¼ä»å°±å¨æ¡¥ä¸å»ä¸äºæè¿°è¿ä¸ä¸ªèæ°åä½çç­å¼ã\n\nå¨åç°ååæ°åï¼ä»åªåå°æ¨å¹¿ååæ°ï¼å¹¶ä½ä¸ºæå­¦çæè¿°ä¸ç»´ç©ºé´æ¶çç¬¬ä¸è¯­è¨ãä½å½æ¶çåæ´¾æ°å­¦å®¶ä¹æ²¡é²çï¼æ¹å¤æ¦æ¶©é¾æçååæ°æ¯éªæ¶çï¼çè³ååæ°ä¹æ³ä¸æ»¡è¶³äº¤æ¢å¾ãç¥éä¸ä¸ªä¸çºªä¹åï¼ååæ°å¨è®¡ç®æºå·¥ä¸çèµ·æ­»åçï¼ç¨åºåæå®åºç¨å°å¾åï¼æºå¨äººï¼ä»¥åæ¶åå°3ç»´ç©ºé´æè½¬çé¢åãäºåä¸çºªååæ°è¿è¢«åºç¨äºå¦ä¸ä¸ªéè¦çé¢åï¼éå­åå­¦ã\n\n\n\n\n\nthree.js å¯¹ååæ°çæ°å­¦ç»èåç®æ³è¿è¡äºå°è£ã\n\n// åå»ºä¸ä¸ªååæ°å¯¹è±¡\nconst quaternion = new three.quaternion();\n// ç»å®æè½¬è½´åæè½¬è§åº¦çææè½¬ååæ°ï¼ç©ä½ç»zè½´æè½¬90åº¦\nquaternion.setfromaxisangle(new three.vector3(0, 0, 1).normalize(), math.pi / 2);\n// åå»ºåé\nconst vector = new three.vector3( 1, 0, 0 );\n// å°ååæ°åæ¢åºç¨å¨æ­¤åéä¸\nvector.applyquaternion( quaternion );\n\n\n\n# å è½½ .gltf/.glb æä»¶\n\n * gltf å³æ¯ gl transmission format çç¼©åã\n * gltf æ¯ä¸ç§3dåå®¹çæ ¼å¼æ åï¼ç±khronos groupç®¡çï¼ï¼khronos groupè¿ç®¡ççopenglç³»åãopenclç­éè¦çè¡ä¸æ åï¼ã\n * gltf çè®¾è®¡æ¯é¢åå®æ¶æ¸²æåºç¨çï¼å°½éæä¾å¯ä»¥ç´æ¥ä¼ è¾ç»å¾å½¢apiçæ°æ®å½¢å¼ï¼ä¸åéè¦äºæ¬¡è½¬æ¢ã\n * gltf å¯¹opengl esãwebgléå¸¸åå¥½ã\n * gltf çç®æ æ¯ï¼3dé¢åçjpegã\n * ä½ä¸ºä¸ä¸ªæ åï¼èª2015å¹´10æåå¸ï¼gltf 1.0ï¼ä»¥æ¥ï¼å·²ç»å¾å°äºä¸çå¹¿æ³çè®¤å¯ï¼ä½ å¯ä»¥ç¸ä¿¡å®çæ°´å¹³ã\n * gltfç®åææ°çæ¬ä¸º2.0å·²äº2017å¹´6ææ­£å¼åå¸ã\n\ngltfæ ¼å¼æ¯ä¸ç»´æ¨¡åæ ¼å¼ï¼jsonï¼ï¼ä½ å¯ä»¥ægltfæ ¼å¼çä¸ç»´æ¨¡åçè§£ä¸º.jpgã.pngæ ¼å¼çå¾çä¸æ ·ãweb å¼åå¾çä¼æ¯å¸¸ç¨æ ¼å¼ï¼èå¯¹äº web3d å¼åï¼gltfå¿ç¶æä¸ºä¸ä¸ªéè¦çæ åæ ¼å¼ã\n\n.gltfæ¯ææ¬æ ¼å¼æä»¶ï¼è .glb æ¯ .gltf çäºè¿å¶æ ¼å¼ã\n\nsketchfab ä¸å¯ä»¥ä¸è½½ gltf æ¨¡å\n\nimport * as three from 'three';\nimport { gltfloader } from 'three/examples/jsm/loaders/gltfloader.js';\nimport { orbitcontrols } from 'three/examples/jsm/controls/orbitcontrols.js';\n// åå»ºåºæ¯\nconst scene = new three.scene();\n// åå»ºç¸æº\nconst camera = new three.perspectivecamera(\n    50, \n    window.innerwidth / window.innerheight, \n    0.1, \n    1000 \n);\ncamera.position.set(0, 0, 5);\n// åå»ºæ¸²æå¨\nconst renderer = new three.webglrenderer();\nrenderer.setsize(window.innerwidth, window.innerheight);\ndocument.body.appendchild(renderer.domelement);\n// æ·»å åæº\nconst spotlight = new three.spotlight(0xffffff);\nspotlight.position.set(0, 20, 20);\nspotlight.intensity = 5;\nscene.add(spotlight);\n// å è½½æ¨¡å\nconst loader = new gltfloader().setpath('models/shiba/');\nloader.load('scene.gltf', function (gltf) {\n    scene.add(gltf.scene);\n    render();\n})\n// åå»ºæ§ä»¶å¯¹è±¡, å¯ä»¥ä½¿å¾ç¸æºå´ç»ç®æ è¿è¡è½¨éè¿å¨ã\nconst controls = new orbitcontrols(camera, renderer.domelement);\ncontrols.addeventlistener('change', render);\ncontrols.mindistance = 2; // è½å¤å°ç¸æºååç§»å¨å¤å°\ncontrols.maxdistance = 10; // è½å¤å°ç¸æºåå¤ç§»å¨å¤å°\ncontrols.target.set(0, 0, 0); // æ§å¶å¨çç¦ç¹ï¼è½¨éå´ç»å®è¿è¡\ncontrols.update(); // æ´æ°æ§å¶å¨\n\nfunction render() {\n    renderer.render(scene, camera);\n};\n",charsets:{cjk:!0}},{title:"2022å¹´ 7-12æ",frontmatter:{},regularPath:"/time/2022b.html",relativePath:"time/2022b.md",key:"v-36664eb2",path:"/time/2022b.html",lastUpdated:"12/8/2022, 7:39:09 PM",lastUpdatedTimestamp:1670499549e3,headersStr:null,content:"# 2022å¹´ 7-12æ\n\n * ES2016 - ES2022\n\n * é¢æ£è¯·æ±ä¸éå®å\n\n * å½ async/await éå° forEach\n\n * React Fiber\n\n * Docker\n\n * JSON.stringifyçä¸ä¸ªåæ°\n\n * ååæµè¯\n\n * Httpç¶æç æ´ç(æ°å¢103)\n\n * npmãcnpmãnvmãnrmãyarnãtyarnãnpxãpnpm\n\n * å©ç¨ husky å lint-staged æå»ºå·¥ä½æµ\n\n * Httpåè®®ä»ç»\n\n * Shellå½ä»¤",normalizedContent:"# 2022å¹´ 7-12æ\n\n * es2016 - es2022\n\n * é¢æ£è¯·æ±ä¸éå®å\n\n * å½ async/await éå° foreach\n\n * react fiber\n\n * docker\n\n * json.stringifyçä¸ä¸ªåæ°\n\n * ååæµè¯\n\n * httpç¶æç æ´ç(æ°å¢103)\n\n * npmãcnpmãnvmãnrmãyarnãtyarnãnpxãpnpm\n\n * å©ç¨ husky å lint-staged æå»ºå·¥ä½æµ\n\n * httpåè®®ä»ç»\n\n * shellå½ä»¤",charsets:{cjk:!0}},{title:"2023å¹´ 1-6æ",frontmatter:{},regularPath:"/time/2023a.html",relativePath:"time/2023a.md",key:"v-3cf55a6b",path:"/time/2023a.html",lastUpdated:"5/18/2023, 3:43:33 PM",lastUpdatedTimestamp:1684395813e3,headersStr:null,content:"# 2023å¹´ 1-6æ\n\n * æ­£åæè·ç»ä¸éæè·ç»\n\n * chrome å vscode è°è¯å·¥å·\n\n * Charles æå\n\n * git reset å git revert åºå«\n\n * Chromeæ§è½åæ&æ§è½çè§å¨\n\n * åºåé¾å­¦ä¹ ",normalizedContent:"# 2023å¹´ 1-6æ\n\n * æ­£åæè·ç»ä¸éæè·ç»\n\n * chrome å vscode è°è¯å·¥å·\n\n * charles æå\n\n * git reset å git revert åºå«\n\n * chromeæ§è½åæ&æ§è½çè§å¨\n\n * åºåé¾å­¦ä¹ ",charsets:{cjk:!0}},{title:"è´´å¾",frontmatter:{},regularPath:"/three/three4.html",relativePath:"three/three4.md",key:"v-686968dd",path:"/three/three4.html",headers:[{level:2,title:"èªåå",slug:"èªåå",normalizedTitle:"èªåå",charIndex:765},{level:2,title:"æè´¨ç color å emissive",slug:"æè´¨ç-color-å-emissive",normalizedTitle:"æè´¨ç color å emissive",charIndex:908},{level:2,title:"çå¬å¨ç» finish å loop",slug:"çå¬å¨ç»-finish-å-loop",normalizedTitle:"çå¬å¨ç» finish å loop",charIndex:1251},{level:2,title:"ç»çæè´¨",slug:"ç»çæè´¨",normalizedTitle:"ç»çæè´¨",charIndex:1538},{level:3,title:"EXT_meshopt_compression ç®ä»",slug:"ext-meshopt-compression-ç®ä»",normalizedTitle:"ext_meshopt_compression ç®ä»",charIndex:2123},{level:2,title:"åç¼©æ¨¡åæ­¥éª¤ï¼ä»¥ glTF-Transform ä¸ºä¾ï¼",slug:"åç¼©æ¨¡åæ­¥éª¤-ä»¥-gltf-transform-ä¸ºä¾",normalizedTitle:"åç¼©æ¨¡åæ­¥éª¤ï¼ä»¥ gltf-transform ä¸ºä¾ï¼",charIndex:2393},{level:3,title:"å®è£å·¥å·",slug:"å®è£å·¥å·",normalizedTitle:"å®è£å·¥å·",charIndex:2425},{level:3,title:"åç¼©æ¨¡å",slug:"åç¼©æ¨¡å",normalizedTitle:"åç¼©æ¨¡å",charIndex:2393},{level:3,title:"3. å¨ Three.js ä¸­å è½½åç¼©æ¨¡å",slug:"_3-å¨-three-js-ä¸­å è½½åç¼©æ¨¡å",normalizedTitle:"3. å¨ three.js ä¸­å è½½åç¼©æ¨¡å",charIndex:2737},{level:2,title:"æ¶ç",slug:"æ¶ç",normalizedTitle:"æ¶ç",charIndex:3046},{level:3,title:"1. åç¼©çæ ¸å¿ä»·å¼ï¼åå°ä¼ è¾åå­å¨ææ¬",slug:"_1-åç¼©çæ ¸å¿ä»·å¼-åå°ä¼ è¾åå­å¨ææ¬",normalizedTitle:"1. åç¼©çæ ¸å¿ä»·å¼ï¼åå°ä¼ è¾åå­å¨ææ¬",charIndex:3190},{level:3,title:"2. è§£åå¼éå¯æ§ï¼æ»ä½æ¶çä¸ºæ­£",slug:"_2-è§£åå¼éå¯æ§-æ»ä½æ¶çä¸ºæ­£",normalizedTitle:"2. è§£åå¼éå¯æ§ï¼æ»ä½æ¶çä¸ºæ­£",charIndex:3438},{level:3,title:"3. åç¼©çéå ä¼å",slug:"_3-åç¼©çéå ä¼å",normalizedTitle:"3. åç¼©çéå ä¼å",charIndex:3634},{level:3,title:"4. éç¨åºæ¯æè¡¡",slug:"_4-éç¨åºæ¯æè¡¡",normalizedTitle:"4. éç¨åºæ¯æè¡¡",charIndex:3801},{level:2,title:"ç»è®º",slug:"ç»è®º",normalizedTitle:"ç»è®º",charIndex:4008},{level:2,title:"ä»ä¹æ¯ shader",slug:"ä»ä¹æ¯-shader",normalizedTitle:"ä»ä¹æ¯ shader",charIndex:4152},{level:2,title:"ä¸ºä»ä¹ shader è¿è¡ç¹å«å¿«",slug:"ä¸ºä»ä¹-shader-è¿è¡ç¹å«å¿«",normalizedTitle:"ä¸ºä»ä¹ shader è¿è¡ç¹å«å¿«",charIndex:4405},{level:2,title:"GLSLæ¯ä»ä¹ï¼",slug:"glslæ¯ä»ä¹",normalizedTitle:"glslæ¯ä»ä¹ï¼",charIndex:5142},{level:2,title:"ä¸ºä»ä¹ Shaders ä¸å¥½å­¦ï¼",slug:"ä¸ºä»ä¹-shaders-ä¸å¥½å­¦",normalizedTitle:"ä¸ºä»ä¹ shaders ä¸å¥½å­¦ï¼",charIndex:5224},{level:2,title:"é¡¶ç¹çè²å¨åçæ®µçè²å¨",slug:"é¡¶ç¹çè²å¨åçæ®µçè²å¨",normalizedTitle:"é¡¶ç¹çè²å¨åçæ®µçè²å¨",charIndex:5644},{level:2,title:"å¨ three.js ä¸­å®ç°ä¸ä¸ªæ°´å¢¨é£ç shader",slug:"å¨-three-js-ä¸­å®ç°ä¸ä¸ªæ°´å¢¨é£ç-shader",normalizedTitle:"å¨ three.js ä¸­å®ç°ä¸ä¸ªæ°´å¢¨é£ç shader",charIndex:5824}],lastUpdated:"9/2/2025, 11:24:35 AM",lastUpdatedTimestamp:1756783475e3,headersStr:"èªåå æè´¨ç color å emissive çå¬å¨ç» finish å loop ç»çæè´¨ EXT_meshopt_compression ç®ä» åç¼©æ¨¡åæ­¥éª¤ï¼ä»¥ glTF-Transform ä¸ºä¾ï¼ å®è£å·¥å· åç¼©æ¨¡å 3. å¨ Three.js ä¸­å è½½åç¼©æ¨¡å æ¶ç 1. åç¼©çæ ¸å¿ä»·å¼ï¼åå°ä¼ è¾åå­å¨ææ¬ 2. è§£åå¼éå¯æ§ï¼æ»ä½æ¶çä¸ºæ­£ 3. åç¼©çéå ä¼å 4. éç¨åºæ¯æè¡¡ ç»è®º ä»ä¹æ¯ shader ä¸ºä»ä¹ shader è¿è¡ç¹å«å¿« GLSLæ¯ä»ä¹ï¼ ä¸ºä»ä¹ Shaders ä¸å¥½å­¦ï¼ é¡¶ç¹çè²å¨åçæ®µçè²å¨ å¨ three.js ä¸­å®ç°ä¸ä¸ªæ°´å¢¨é£ç shader",content:"# è´´å¾\n\nãthreeJsç¬è®°ã3. Three.jsè´´å¾Texture_three js obj è´´çº¸-CSDNåå®¢\n\nhttps://juejin.cn/post/7311219067118026762\n\nç»è·¯é¢æ·»å çº¹çè´´å¾ï¼é¢è²è´´å¾ï¼\n\n\n\n\n\n// 2.1 åå»ºæè´¨ï¼å¹¶å è½½è·¯é¢é¢è²è´´å¾\nconst texture = new THREE.TextureLoader().load(TRACK_WATER_TEXTURE);\ntexture.wrapS = THREE.RepeatWrapping;\ntexture.wrapT = THREE.RepeatWrapping;\ntexture.repeat.set(20, 20); // è®¾ç½®éå¤æ¬¡æ°ï¼æ°å¼è¶å¤§éå¤æ¬¡æ°è¶å¤\nconst material = new THREE.MeshStandardMaterial({\n    // color: 0x4193ea,\n    map: texture,\n    // emissive: 0x0426cd,\n    // metalness: 0.5,\n    // roughness: 0.3,\n    // transparent: true,\n    // opacity: 0.9,\n    // fog: this.scene.fog !== undefined,\n});\nmaterial._my_is_water = true; // _my_ æ è®°ä¸ºæ°´é¢æè´¨\nthis.trackWaterModel.traverse(object => {\n    if (object.isMesh) {\n        object.material = material;\n    }\n});\n\n\n\n# èªåå\n\nä¸å¼å§æ¯ä¸ªå®¤ååºæ¯é½éè¦æ·»å è®¸å¤åæºï¼å¯¼è´æ¸²æå¡é¡¿ãåé¢æ¿æ¢æäºèªååçæ¨¡åï¼glbéé¢èªå¸¦ååä¿¡æ¯ï¼ç¶åæä»£ç ä¸­åç§å é¤ã\n\nthree.js å¦ä½æ·»å èªååï¼Three.jsèªååè´´å¾ .emissiveMap_threejs æè´¨éè¿è´´å¾å®ç°åå-CSDNåå®¢\n\n\n# æè´¨ç color å emissive\n\nhttp://www.webgl3d.cn/pages/57f348/\n\nconst material = new THREE.MeshStandardMaterial({\n    color: 0xfbefb1,\n    alphaMap: this.animationTextures[this.currentFrame],\n    emissive: 0xfbefb1,\n    metalness: 0.3,\n    roughness: 0.3,\n    transparent: true,\n    blending: THREE.AdditiveBlending,\n    depthTest: false,\n});\n\n\n\n# çå¬å¨ç» finish å loop\n\nå°äººé»è®¤æ¯è·æ­¥å¨ä½ï¼å¨å°äººå¨ä½åè¡æ¥çæ¶åå¯è½éè¦ç­å½åè·æ­¥å¨ä½å¾ªç¯å®æååè§¦åå«çå¨ä½ï¼æä»¥éè¦çå¬å¨ä½å¾ªç¯ç»æã\n\nthis.mixer.addEventListener('finished', e => {\n    console.log(e.action._clip.name);\n    // å¨ä½ç»æ\n});\n\nthis.mixer.addEventListener('loop', e => {\n    console.log(e.action._clip.name);\n    // å¨ä½æ¯æ¬¡å¾ªç¯å\n});\n\n\n\n# ç»çæè´¨\n\nåºæ¯ä¸­æè®¸å¤å½å®éåå¨ç»çä¸­ï¼éè¦ç»å¯¹åºç mesh å¢å ç»çæè´¨ã\n\n\n\nboliScene.traverse(object => {\n    // åè§è§ç»ä¸å¥½éè¦æ·»å  mesh ç nameï¼æ¾å°å¯¹åºç mesh æ·»å ç»çæè´¨\n    if (object.name === 'ç»ç') {\n        const material = new THREE.MeshPhongMaterial({\n            // color: 0xffffff,\n            // emissive: 0xffffff,\n            // reflectivity: 0.5,\n            // refractionRatio: 0.5,\n            transparent: true,\n            opacity: 0.2,\n        });\n        // ä¸ºéæçç½æ ¼ç¦ç¨æ·±åº¦åå¥ï¼è¿æ ·å¯ä»¥é¿åç»çåé¨çç©ä½å¨æä¸ªè§åº¦ä¸è§äº\n        material.depthWrite = false; \n        object.material = material;\n    }\n});\n\n\n\n# ext_meshopt_compression æ¨¡ååç¼©\n\n\n# EXT_meshopt_compression ç®ä»\n\n * ç®æ ï¼é«æåç¼© glTF/GLB æ¨¡åçé¡¶ç¹ãç´¢å¼ç­å ä½æ°æ®ï¼éå¸¸å¯åå°**30%~50%**ä½ç§¯ã\n * ç¹ç¹ï¼\n   * åºäºæ æåç¼©ç®æ³ï¼æ°æ®è§£ååä¸åå§æ°æ®å®å¨ä¸è´ã\n   * è§£åéåº¦æå¿«ï¼éåå®æ¶åºç¨ï¼å¦ Web ææ¸¸æï¼ã\n * æ¯æå·¥å·ï¼\n   * glTF-Transformï¼æ¨èï¼\n   * Blenderï¼éæä»¶æ¯æï¼\n   * Three.jsï¼è¿è¡æ¶è§£ç ï¼\n\n----------------------------------------\n\n\n# åç¼©æ¨¡åæ­¥éª¤ï¼ä»¥ glTF-Transform ä¸ºä¾ï¼\n\n\n# å®è£å·¥å·\n\néè¿ Node.js å®è£å½ä»¤è¡å·¥å·ï¼\n\nnpm install --global @gltf-transform/cli\n\n\n\n# åç¼©æ¨¡å\n\nä½¿ç¨meshoptåç¼©å½ä»¤å¤ç glTF/GLB æä»¶ï¼\n\ngltf-transform meshopt input.glb output.glb\n\n\nå¯éåæ°ï¼\n\n * --levelï¼åç¼©çº§å«ï¼0=æå¿«ï¼1=å¹³è¡¡ï¼2=æé«åç¼©çï¼é»è®¤ä¸º1ï¼ã\n * --keep-pointsï¼ä¿çé¡¶ç¹æ°æ®ä¸åç¼©ï¼é»è®¤åç¼©ææå±æ§ï¼ã ç¤ºä¾ï¼æé«åç¼©çï¼ï¼\n\ngltf-transform meshopt input.glb output.glb --level 2\n\n\n\n# 3. å¨ Three.js ä¸­å è½½åç¼©æ¨¡å\n\nç¡®ä¿ Three.js çæ¬ â¥r137ï¼å¹¶å¨åå§åæ¶æ³¨åæ©å±ï¼ä½¿ç¨GLTFLoaderå è½½åç¼©åçæ¨¡åï¼\n\nimport {MeshoptDecoder} from 'three/examples/jsm/libs/meshopt_decoder.module.js';\nimport {GLTFLoader} from 'three/examples/jsm/loaders/GLTFLoader.js';\nconst loader = new GLTFLoader();\nloader.setMeshoptDecoder(MeshoptDecoder);\n\n\n\n# æ¶ç\n\nåç¼©é¶æ®µï¼ä¼ååä¸¤ä¸ªæ¨¡ååå«ä» 6.4M -> 4.1M å 7.2M -> 4.2 Mï¼æ´ä½åå°äº 39%\n\nè§£åé¶æ®µï¼å è½½æ¨¡åé¶æ®µäºä»¶åååºæ¬æ æ°å¢ï¼ï¼è§£åéåº¦éå¸¸å¨ 1ms åå®æï¼\n\næ´ä½æ¨¡åç loadingæ¶é´ä» 2s -> 1.5sï¼æ´ä½åå°äº 25%\n\n\n\n\n# 1. åç¼©çæ ¸å¿ä»·å¼ï¼åå°ä¼ è¾åå­å¨ææ¬\n\n * åç¼©é¶æ®µï¼æ¨¡åå¨å¯¼åºæä¼ è¾åè¢«åç¼©ï¼æä»¶ä½ç§¯æ¾èåå°ï¼éå¸¸å¯åå° 50%-80%ï¼ã\n * è§£åé¶æ®µï¼è¿è¡æ¶éè¿ GPU æ CPU å¿«éè§£åï¼æ¢å¤ä¸ºåå§ç½æ ¼æ°æ®ä¾æ¸²æä½¿ç¨ã\n * å®éææï¼\n   * å è½½æ¶é´ç¼©ç­ï¼ç¨æ·ä¸è½½/å è½½æ¨¡åçæ¶é´åå°ï¼å°¤å¶å¯¹ Web åºæ¯å³é®ï¼ã\n   * å¸¦å®½ææ¬éä½ï¼ä¼ è¾å°ä½ç§¯æä»¶èçæµéï¼å¯¹ç§»å¨ç«¯æå¼±ç½ç¯å¢åå¥½ï¼ã\n\n----------------------------------------\n\n\n# 2. è§£åå¼éå¯æ§ï¼æ»ä½æ¶çä¸ºæ­£\n\n * è§£åæçï¼meshoptç®æ³éå¯¹è¿è¡æ¶ä¼åï¼è§£åéåº¦æå¿«ï¼éå¸¸å¨ 1ms åå®æï¼ã\n * CPU vs. ä¼ è¾æ¶é´ï¼è§£åæ¶èç CPU æ¶é´è¿å°äºæªåç¼©æ¶ç­å¾ç½ç»ä¼ è¾çæ¶é´ã\n * åå­å ç¨ï¼è§£ååçæ°æ®å¯è½éè¿ä¼åå¸å±ï¼å¦éåãé¡¶ç¹éæï¼åå°åå­å ç¨ã\n\n----------------------------------------\n\n\n# 3. åç¼©çéå ä¼å\n\n * é¡¶ç¹/ç´¢å¼ä¼åï¼meshoptä¸ä»åç¼©ï¼è¿ä¼ä¼åé¡¶ç¹é¡ºåºãç´¢å¼ç¼å²åºï¼å¯è½æåæ¸²ææ§è½ã\n * å¼å®¹æ§ï¼è§£åè¿ç¨éå¸¸ç±å¼æåç½®å·¥å·ï¼å¦ Three.js çMeshoptDecoderï¼èªå¨å¤çï¼æ éæå¨å¹²é¢ã\n\n----------------------------------------\n\n\n# 4. éç¨åºæ¯æè¡¡\n\n * æ¨èä½¿ç¨ï¼\n   * å¤§ååºæ¯ï¼å¦ 3D å°å¾ãæ¸¸æå³å¡ï¼ã\n   * ç½ç»ä¼ è¾åºæ¯ï¼å¦ Web åºç¨ãå¤äººå¨çº¿æ¸¸æï¼ã\n   * èµæºåéå¹³å°ï¼å¦ç§»å¨ç«¯ãVR/AR è®¾å¤ï¼ã\n * è°¨æä½¿ç¨ï¼\n   * æ¨¡åæ¬èº«å·²æç®ï¼åç¼©æ¶çæéï¼ã\n   * è¿è¡æ¶è§£åå¯è½æä¸ºç¶é¢ï¼éæµè¯è§£åæ¶é´ï¼ã\n\n----------------------------------------\n\n\n# ç»è®º\n\nåç¼©åçæ¨¡åå¨è¿è¡æ¶è§£åæ¯åççæè¡¡ï¼ç¨å¯æ§ç CPU å¼éæ¢åæ´å¿«çå è½½éåº¦åæ´ä½çä¼ è¾ææ¬ãå¯¹äºå¤§å¤æ° 3D åºç¨ï¼å°¤å¶æ¯ Web åç§»å¨ç«¯ï¼ï¼è¿æ¯æ§è½ä¼åçå³é®æ­¥éª¤ã\n\n\n# shader\n\nhttps://thebookofshaders.com/?lan=ch\n\n\n# ä»ä¹æ¯ shader\n\nå¦æä½ æ¾ç»æç¨è®¡ç®æºç»å¾çç»éªï¼ä½ å°±ç¥éå¨è¿ä¸ªè¿ç¨ä¸­ä½ éè¦ç»ä¸ä¸ªåï¼ç¶åä¸ä¸ªé¿æ¹å½¢ï¼ä¸æ¡çº¿ï¼ä¸äºä¸è§å½¢â¦â¦ç´å°ç»åºä½ æ³è¦çå¾åãè¿ä¸ªè¿ç¨å¾åç¨æåä¸å°ä¿¡æä¸æ¬ä¹¦ ââ é½æ¯ä¸ç³»åçæä»¤ï¼éè¦ä½ ä¸ä»¶ä¸ä»¶å®æã\n\nShaders ä¹æ¯ä¸ç³»åçæä»¤ï¼ä½æ¯è¿äºæä»¤ä¼å¯¹å±å¹ä¸çæ¯ä¸ªåç´ åæ¶ä¸è¾¾ãä¹å°±æ¯è¯´ï¼ä½ çä»£ç å¿é¡»æ ¹æ®åç´ å¨å±å¹ä¸çä¸åä½ç½®æ§è¡ä¸åçæä½ãå°±åæ´»å­å°å·ï¼ä½ çç¨åºå°±åä¸ä¸ª functionï¼å½æ°ï¼ï¼è¾å¥ä½ç½®ä¿¡æ¯ï¼è¾åºé¢è²ä¿¡æ¯ï¼å½å®ç¼è¯å®ä¹åä¼ä»¥ç¸å½å¿«çéåº¦è¿è¡ã\n\n\n# ä¸ºä»ä¹ shader è¿è¡ç¹å«å¿«\n\nä¸ºäºåç­è¿ä¸ªé®é¢ï¼ä¸å¾ä¸ç»å¤§å®¶ä»ç»****å¹¶è¡å¤ç****ï¼parallel processingï¼çç¥å¥ä¹å¤ã\n\næ³è±¡ä½ ç CPU æ¯ä¸ä¸ªå¤§çå·¥ä¸ç®¡éï¼ç¶åæ¯ä¸ä¸ªä»»å¡é½æ¯éè¿è¿ä¸ªç®¡éçæäºä¸è¥¿ï¼è¿äºä»»å¡éè¦ä¸²è¡ï¼æ¯ä¸ªç®¡ééå¸¸è¢«ç§°ä¸º****çº¿ç¨****ã\n\nè§é¢æ¸¸æåå¶ä»å¾å½¢åºç¨æ¯èµ·å«çç¨åºæ¥è¯´ï¼éè¦é«å¾å¤çå¤çè½åãå ä¸ºå®ä»¬çå¾å½¢åå®¹éè¦æä½æ æ°åç´ ãæ³æ³çï¼å±å¹ä¸çæ¯ä¸ä¸ªåç´ é½éè¦è®¡ç®ï¼èå¨ 3D æ¸¸æä¸­å ä½åéè§ä¹é½éè¦è®¡ç®ã\n\nè®©æä»¬åå°å¼å§é£ä¸ªå³äºç®¡éåä»»å¡çæ¯å»ãå±å¹ä¸çæ¯ä¸ªåç´ é½ä»£è¡¨ä¸ä¸ªæç®åçä»»å¡ãåç¬æ¥çå®æä»»ä½ä¸ä¸ªåç´ çä»»å¡å¯¹ CPU æ¥è¯´é½å¾å®¹æï¼é£ä¹é®é¢æ¥äºï¼å±å¹ä¸çæ¯ä¸ä¸ªåç´ é½éè¦è§£å³è¿æ ·çå°ä»»å¡ï¼ä¹å°±æ¯è¯´ï¼åªææ¯å¯¹äºä¸ä¸ªèå¼çå±å¹ï¼åè¾¨ç 800x600ï¼æ¥è¯´ï¼é½éè¦æ¯å¸§å¤ç480000ä¸ªåç´ ï¼æ¯ç§å°±éè¦å¤ç14400000ä¸ªåç´ ã\n\nè¿ä¸ªæ¶åï¼å¹¶è¡å¤çå°±æ¯æå¥½çè§£å³æ¹æ¡ãæ¯èµ·ç¨ä¸äºä¸ªå¼ºå¤§çå¾®å¤çå¨ï¼æèè¯´âç®¡éâï¼æ¥å¤çè¿äºä¿¡æ¯ï¼ç¨ä¸å¤§å å°çå¾®å¤çå¨æ¥å¹¶è¡è®¡ç®ï¼å°±è¦å¥½å¾å¤ãè¿å°±æ¯å¾å½¢å¤çå¨ï¼GPU : Graphic Processor Unit)çæ¥ç±ã\n\nè®¾æ³ä¸å å°åå¾®å¤çå¨ææä¸ä¸ªå¹³é¢çç»é¢ï¼14400000ä¸ªåç´ å¯ä»¥å¨ä¸ç§åé»å¡å ä¹ä»»ä½ç®¡éãä½æ¯ä¸é¢800x600çç®¡éå¢ï¼æ¯ç§æ¥æ¶30æ³¢480000ä¸ªåç´ çä¿¡æ¯å°±å¯ä»¥æµçå®æãè¿å¨æ´é«çåè¾¨çä¸ä¹æ¯æç«ç ââ å¹¶è¡çå¤çå¨è¶å¤ï¼å¯ä»¥å¤ççæ°æ®æµå°±è¶å¤§ã\n\nå¦ä¸ä¸ª GPU çé­æ³æ¯ç¹æ®æ°å­¦å½æ°å¯éè¿ç¡¬ä»¶å éãéå¸¸å¤æçæ°å­¦æä½å¯ä»¥ç´æ¥è¢«å¾®è¯çè§£å³ï¼èæ é¡»éè¿è½¯ä»¶ãè¿å°±è¡¨ç¤ºå¯ä»¥ææ´å¿«çä¸è§åç©éµè¿ç® ââ åçµæµä¸æ ·å¿«ã\n\n\n# GLSLæ¯ä»ä¹ï¼\n\nGLSL ä»£è¡¨ openGL Shading Languageï¼openGL çè²è¯­è¨ï¼å¨ three.js ä¸­ä¹å¯ä»¥ç¼å GLSLã\n\n\n# ä¸ºä»ä¹ Shaders ä¸å¥½å­¦ï¼\n\nGPU çå¼ºå¤§çæ¶æè®¾è®¡ä¹æå¶éå¶ä¸ä¸è¶³ã\n\nä¸ºäºè½ä½¿è®¸å¤ç®¡çº¿å¹¶è¡è¿è¡ï¼æ¯ä¸ä¸ªçº¿ç¨å¿é¡»ä¸å¶ä»çç¸ç¬ç«ãæä»¬ç§°è¿äºçº¿ç¨å¯¹äºå¶ä»çº¿ç¨å¨è¿è¡çè¿ç®æ¯âç²è§âçãè¿ä¸ªéå¶å°±ä¼ä½¿å¾æææ°æ®å¿é¡»ä»¥ç¸åçæ¹åæµå¨ãæä»¥å°±ä¸å¯è½æ£æ¥å¶ä»çº¿ç¨çè¾åºç»æï¼ä¿®æ¹è¾å¥çæ°æ®ï¼æèæä¸ä¸ªçº¿ç¨çè¾åºç»æè¾å¥ç»å¦ä¸ä¸ªçº¿ç¨ãåè®¸æ°æ®å¨çº¿ç¨ä¹é´çº¿ç¨æµå¨ä¼ä½¿æ°æ®çæ´ä½æ§é¢ä¸´å¨èã\n\nå¹¶ä¸ GPU ä¼è®©ææå¹¶è¡çå¾®å¤çå¨ï¼ç®¡éä»¬ï¼ä¸ç´å¤å¨å¿ç¢ç¶æï¼åªè¦å®ä»¬ä¸æç©ºé²å°±ä¼æ¥å°æ°çä¿¡æ¯ãä¸ä¸ªçº¿ç¨ä¸å¯è½ç¥éå®åä¸å»å¨åä»ä¹ãå®å¯è½æ¯å¨ç»æä½ç³»ç»çé¢ä¸çä¸ä¸ªæé®ï¼ç¶åæ¸²æäºæ¸¸æä¸­çä¸é¨åå¤©ç©ºï¼ç¶åæ¾ç¤ºäºä¸å° email ä¸­çä¸äºæå­ãæ¯ä¸ªçº¿ç¨ä¸ä»æ¯âç²è§âçï¼èä¸è¿æ¯âæ è®°å¿âçãåæ¶ï¼å®è¦æ±ç¼åä¸ä¸ªéç¨çè§åï¼ä¾æ®åç´ çä¸åä½ç½®ä¾æ¬¡è¾åºä¸åçç»æãè¿ç§æ½è±¡æ§ï¼åç²è§ãæ è®°å¿çéå¶ä½¿å¾ shaders å¨ç¨åºåæ°æä¸­ä¸æ¯å¾åæ¬¢è¿ã\n\n\n# é¡¶ç¹çè²å¨åçæ®µçè²å¨\n\nshader æä¸¤ç§ï¼å¨æç®éç½®ä¸ï¼è³å°é½å¾æä¸¤ä¸ªçè²å¨ï¼ä¸ä¸ªå«é¡¶ç¹çè²å¨ï¼vertex shaderï¼ï¼å¦ä¸ä¸ªå«çæ®µçè²å¨ï¼fragment shaderï¼ã\n\né¡¶ç¹çè²å¨è´è´£å¤çæ¯ä¸ªé¡¶ç¹çä½ç½®ï¼å¯è½è¿ææ³çº¿ãé¢è²ç­ä¿¡æ¯ãæ¯ä¸ªé¡¶ç¹é½ä¼æ§è¡ä¸æ¬¡ã\n\nçåçè²å¨åæ¯å¤çæ¯ä¸ªåç´ çé¢è²åå¶ä»å±æ§ãæ¯ä¸ªåç´ çåé½ä¼æ§è¡ä¸æ¬¡ä»£ç ã\n\n\n# å¨ three.js ä¸­å®ç°ä¸ä¸ªæ°´å¢¨é£ç shader\n\nå¨ three.js æè®¸å¤åç½®çæè´¨ï¼æäºæ¶åè¿äºæè´¨ä¸è½æ»¡è¶³æä»¬çéæ±ï¼æ¯å¦ä¸é¢ç»ä¸ä¸ªç¨ shader å®ç°çæ°´å¢¨é£æè´¨ã\n\n// çè²å¨ä»£ç \nconst shaderMaterial = new THREE.ShaderMaterial({\n    vertexShader: `\n        varying vec2 vUv;        // å° UV åæ ä¼ ç»çåçè²å¨\n        varying vec3 vNormal;    // ä¼ éæ³çº¿æ¹å\n        varying vec3 vPosition;  // ä¼ éé¡¶ç¹ä½ç½®\n        void main() {\n            vUv = uv;                        // ä¿å­ UV åæ \n            vNormal = normal;                // ä¿å­æ³çº¿\n            vPosition = position;            // ä¿å­é¡¶ç¹ä½ç½®\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); // è®¡ç®å±å¹åæ \n        }\n    `,\n    fragmentShader: `\n        varying vec2 vUv;\n        varying vec3 vNormal;\n        varying vec3 vPosition;\n        // ç®ååªå£°å½æ°\n        float rand(vec2 n) { \n            return fract(sin(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);\n        }\n        void main() {\n            // è¾¹ç¼æ£æµï¼ç®æçï¼\n            float edge = length(fwidth(vNormal)) * 2.0; // è®¡ç®æ³çº¿ååçå§çç¨åº¦ï¼è¾¹ç¼åºåååå¤§ï¼\n            edge = 1.0 - smoothstep(0.0, 1.5, edge); // å°è¾¹ç¼å¼è½¬ä¸º 0-1 çå¼ºåº¦ï¼1ä»£è¡¨è¾¹ç¼ï¼\n            // çææ°´å¢¨åªå£°\n            float noise = rand(vUv * 100.0) * 0.2; // éè¿ UV åæ çæåªç¹ï¼*100 æ§å¶åªç¹å¯åº¦ï¼\n            // é¢è²éåï¼3ä¸ªè²é¶ï¼\n            float color = length(vPosition) * 0.3 + noise; // æ··åä½ç½®ä¿¡æ¯ååªç¹\n            color = floor(color * 3.0) / 3.0; // å°é¢è²åä¸º 3 ä¸ªè²é¶ï¼0, 0.33, 0.66, 1.0ï¼\n            // ç»åææ\n            float final = max(color * 0.8, edge * 0.9); // åå¹¶é¢è²åè¾¹ç¼ï¼æ·±è²ä¼åï¼\n            // æ·»å çº¸è´¨çº¹ç\n            float paper = rand(vUv * 50.0) * 0.1; // çææ´ç»è»ççº¸è´¨çº¹ç\n            final = clamp(final + paper, 0.0, 1.0); // å å çº¸è´¨åªç¹å¹¶éå¶èå´\n            // æç»é¢è²ï¼å¸¦å°è®¸éè²ï¼\n            gl_FragColor = vec4(vec3(final * 0.9, final * 1.0, final * 0.95), 1.0); // éè¿ RGB ç³»æ°è°æ´é¢è²ååéç°è²ï¼0.9, 1.0, 0.95 å å¼ºç»¿è²åèè²ï¼ã\n        }\n    `,\n    side: THREE.DoubleSide, // åé¢æ¸²æï¼é²æ­¢èé¢éæï¼\n});\n\ufeff\n// åå»ºæµè¯ç©ä½\nconst geom = new THREE.TorusKnotGeometry(2, 0.8, 64, 16);\nconst mesh = new THREE.Mesh(geom, shaderMaterial);\nscene.add(mesh);\n\n\n * projectionMatrix è¡¨ç¤ºçæ¯æåæºçæå½±ç©éµï¼modelViewMatrix è¡¨ç¤ºçæ¯åºæ¯ä¸­ç©ä½çä½ç½®å°çå®ä¸ççæ å°ï¼è¿ä¸¤ä¸ªå±åæ¥å³å®å°ç©ä½æ¸²æå°å±å¹çåªä¸ªä½ç½®ã\n * fwidthï¼æ¯ä¸ä¸ªGLSLåç½®å½æ°ï¼ç¨äºè®¡ç®å½æ°å¨å±å¹ç©ºé´ï¼æèå¶ä»åæ ç³»ï¼ä¸­xåyæ¹åçååçï¼ä¹å°±æ¯å½æ°æ²¿çxåyæ¹åçæ¢¯åº¦ã\n * lengthï¼ç¨äºè®¡ç®åéçé¿åº¦ï¼æ¨¡é¿ï¼\n * smoothstepï¼æ¯ä¸ä¸ªå¹³æ»é¶æ¢¯æå¼å½æ°ï¼å®å¨ä¸¤ä¸ªéå¼ä¹é´äº§çå¹³æ»çè¿æ¸¡ãå°äºèµ·ç¹æ¶ä¸º0ï¼å¤§äºç»ç¹æ¶ä¸º1ï¼å¨è¿ä¹é´åå¹³æ»è¿æ¸¡ã\n * clampï¼clamp(x,a,b) // å½x<aæ¶è¿åa,å½x>bæ¶è¿åb,å¦åè¿åæ¬èº«\n\n\n# composer æè¾¹\n\nimport {EffectComposer} from 'three/addons/postprocessing/EffectComposer.js';\nimport {OutlinePass} from 'three/addons/postprocessing/OutlinePass.js';\nimport {OutputPass} from 'three/addons/postprocessing/OutputPass.js';\nimport {RenderPass} from 'three/addons/postprocessing/RenderPass.js';\n\nconst composer = new EffectComposer(renderer); // åå»ºåå¤çå¯¹è±¡EffectComposerï¼WebGLæ¸²æå¨ä½ä¸ºåæ°\ncomposer.setPixelRatio(window.devicePixelRatio); // å³é®ï¼ééé«DPIå±å¹\ncomposer.setSize(window.innerWidth, window.innerHeight);\nconst renderPass = new RenderPass(scene, camera); // åå»ºä¸ä¸ªæ¸²æå¨ééï¼åºæ¯åç¸æºä½ä¸ºåæ°\ncomposer.addPass(renderPass); // è®¾ç½®renderPasséé\nconst outlinePass = new OutlinePass(new THREE.Vector2(window.innerWidth, window.innerHeight), scene, camera);\noutlinePass.visibleEdgeColor.set('#FFFF00'); // ååé¢è²\noutlinePass.hiddenEdgeColor.set('gray'); // è¢«å¶å®ç©ä½æ¡ä½é¨åçé¢è²\noutlinePass.edgeGlow = 0.0; // è¾¹ç¼è¾åå¤§å°\noutlinePass.usePatternTexture = false; // é»è®¤æ¯flaseï¼æ¹ætrueåä»æ¾ç¤ºè¾¹æ¡\noutlinePass.edgeThickness = 3.0; // ååååº¦\noutlinePass.edgeStrength = 6.0; // ååå¼ºåº¦\noutlinePass.downSampleRatio = 2; // è½æ¹ååçå®½åº¦ï¼å»ºè®®é»è®¤ä¸å¨\noutlinePass.pulsePeriod = 0; // è¾¹ç¼éªçï¼é»è®¤ä¸º0æ éªçï¼æ°å¼è¶å°ï¼éªçè¶å¿«\ncomposer.addPass(outlinePass);\nconst outputPass = new OutputPass();\ncomposer.addPass(outputPass);\noutlinePass.selectedObjects = [];\n\n// ç»å·ä½çæ¨¡åæ·»å \nthis.fragmentModel.traverse(obj => {\n    if (obj.type === 'Mesh') {\n        outlinePass.selectedObjects = [obj];\n    }\n});\n\n\nååææå¯¹æ¯\n\n\n\næ³¨æï¼è¥ç»ç©ä½æ·»å äºç¯å¢åï¼å¦hdrï¼å¯è½ä¼å½±åæè¾¹ã\n\n\n# åå­é®é¢\n\nç±äºéå¤æ¸¸æå¯è½ä¼å ä¸ºæ¨¡åå¸è½½ä¸å¹²åæèå¼ç¨æ²¡æ¸é¤å¯¼è´åå­æ³é²ï¼å»ºè®®ä½¿ç¨ chrome èªå¸¦çåå­åæï¼å¤æ¬¡æ¸¸æè¿è¡ååçåå­å¯¹æ¯ï¼æ¥æ¥æ¾åå ",normalizedContent:"# è´´å¾\n\nãthreejsç¬è®°ã3. three.jsè´´å¾texture_three js obj è´´çº¸-csdnåå®¢\n\nhttps://juejin.cn/post/7311219067118026762\n\nç»è·¯é¢æ·»å çº¹çè´´å¾ï¼é¢è²è´´å¾ï¼\n\n\n\n\n\n// 2.1 åå»ºæè´¨ï¼å¹¶å è½½è·¯é¢é¢è²è´´å¾\nconst texture = new three.textureloader().load(track_water_texture);\ntexture.wraps = three.repeatwrapping;\ntexture.wrapt = three.repeatwrapping;\ntexture.repeat.set(20, 20); // è®¾ç½®éå¤æ¬¡æ°ï¼æ°å¼è¶å¤§éå¤æ¬¡æ°è¶å¤\nconst material = new three.meshstandardmaterial({\n    // color: 0x4193ea,\n    map: texture,\n    // emissive: 0x0426cd,\n    // metalness: 0.5,\n    // roughness: 0.3,\n    // transparent: true,\n    // opacity: 0.9,\n    // fog: this.scene.fog !== undefined,\n});\nmaterial._my_is_water = true; // _my_ æ è®°ä¸ºæ°´é¢æè´¨\nthis.trackwatermodel.traverse(object => {\n    if (object.ismesh) {\n        object.material = material;\n    }\n});\n\n\n\n# èªåå\n\nä¸å¼å§æ¯ä¸ªå®¤ååºæ¯é½éè¦æ·»å è®¸å¤åæºï¼å¯¼è´æ¸²æå¡é¡¿ãåé¢æ¿æ¢æäºèªååçæ¨¡åï¼glbéé¢èªå¸¦ååä¿¡æ¯ï¼ç¶åæä»£ç ä¸­åç§å é¤ã\n\nthree.js å¦ä½æ·»å èªååï¼three.jsèªååè´´å¾ .emissivemap_threejs æè´¨éè¿è´´å¾å®ç°åå-csdnåå®¢\n\n\n# æè´¨ç color å emissive\n\nhttp://www.webgl3d.cn/pages/57f348/\n\nconst material = new three.meshstandardmaterial({\n    color: 0xfbefb1,\n    alphamap: this.animationtextures[this.currentframe],\n    emissive: 0xfbefb1,\n    metalness: 0.3,\n    roughness: 0.3,\n    transparent: true,\n    blending: three.additiveblending,\n    depthtest: false,\n});\n\n\n\n# çå¬å¨ç» finish å loop\n\nå°äººé»è®¤æ¯è·æ­¥å¨ä½ï¼å¨å°äººå¨ä½åè¡æ¥çæ¶åå¯è½éè¦ç­å½åè·æ­¥å¨ä½å¾ªç¯å®æååè§¦åå«çå¨ä½ï¼æä»¥éè¦çå¬å¨ä½å¾ªç¯ç»æã\n\nthis.mixer.addeventlistener('finished', e => {\n    console.log(e.action._clip.name);\n    // å¨ä½ç»æ\n});\n\nthis.mixer.addeventlistener('loop', e => {\n    console.log(e.action._clip.name);\n    // å¨ä½æ¯æ¬¡å¾ªç¯å\n});\n\n\n\n# ç»çæè´¨\n\nåºæ¯ä¸­æè®¸å¤å½å®éåå¨ç»çä¸­ï¼éè¦ç»å¯¹åºç mesh å¢å ç»çæè´¨ã\n\n\n\nboliscene.traverse(object => {\n    // åè§è§ç»ä¸å¥½éè¦æ·»å  mesh ç nameï¼æ¾å°å¯¹åºç mesh æ·»å ç»çæè´¨\n    if (object.name === 'ç»ç') {\n        const material = new three.meshphongmaterial({\n            // color: 0xffffff,\n            // emissive: 0xffffff,\n            // reflectivity: 0.5,\n            // refractionratio: 0.5,\n            transparent: true,\n            opacity: 0.2,\n        });\n        // ä¸ºéæçç½æ ¼ç¦ç¨æ·±åº¦åå¥ï¼è¿æ ·å¯ä»¥é¿åç»çåé¨çç©ä½å¨æä¸ªè§åº¦ä¸è§äº\n        material.depthwrite = false; \n        object.material = material;\n    }\n});\n\n\n\n# ext_meshopt_compression æ¨¡ååç¼©\n\n\n# ext_meshopt_compression ç®ä»\n\n * ç®æ ï¼é«æåç¼© gltf/glb æ¨¡åçé¡¶ç¹ãç´¢å¼ç­å ä½æ°æ®ï¼éå¸¸å¯åå°**30%~50%**ä½ç§¯ã\n * ç¹ç¹ï¼\n   * åºäºæ æåç¼©ç®æ³ï¼æ°æ®è§£ååä¸åå§æ°æ®å®å¨ä¸è´ã\n   * è§£åéåº¦æå¿«ï¼éåå®æ¶åºç¨ï¼å¦ web ææ¸¸æï¼ã\n * æ¯æå·¥å·ï¼\n   * gltf-transformï¼æ¨èï¼\n   * blenderï¼éæä»¶æ¯æï¼\n   * three.jsï¼è¿è¡æ¶è§£ç ï¼\n\n----------------------------------------\n\n\n# åç¼©æ¨¡åæ­¥éª¤ï¼ä»¥ gltf-transform ä¸ºä¾ï¼\n\n\n# å®è£å·¥å·\n\néè¿ node.js å®è£å½ä»¤è¡å·¥å·ï¼\n\nnpm install --global @gltf-transform/cli\n\n\n\n# åç¼©æ¨¡å\n\nä½¿ç¨meshoptåç¼©å½ä»¤å¤ç gltf/glb æä»¶ï¼\n\ngltf-transform meshopt input.glb output.glb\n\n\nå¯éåæ°ï¼\n\n * --levelï¼åç¼©çº§å«ï¼0=æå¿«ï¼1=å¹³è¡¡ï¼2=æé«åç¼©çï¼é»è®¤ä¸º1ï¼ã\n * --keep-pointsï¼ä¿çé¡¶ç¹æ°æ®ä¸åç¼©ï¼é»è®¤åç¼©ææå±æ§ï¼ã ç¤ºä¾ï¼æé«åç¼©çï¼ï¼\n\ngltf-transform meshopt input.glb output.glb --level 2\n\n\n\n# 3. å¨ three.js ä¸­å è½½åç¼©æ¨¡å\n\nç¡®ä¿ three.js çæ¬ â¥r137ï¼å¹¶å¨åå§åæ¶æ³¨åæ©å±ï¼ä½¿ç¨gltfloaderå è½½åç¼©åçæ¨¡åï¼\n\nimport {meshoptdecoder} from 'three/examples/jsm/libs/meshopt_decoder.module.js';\nimport {gltfloader} from 'three/examples/jsm/loaders/gltfloader.js';\nconst loader = new gltfloader();\nloader.setmeshoptdecoder(meshoptdecoder);\n\n\n\n# æ¶ç\n\nåç¼©é¶æ®µï¼ä¼ååä¸¤ä¸ªæ¨¡ååå«ä» 6.4m -> 4.1m å 7.2m -> 4.2 mï¼æ´ä½åå°äº 39%\n\nè§£åé¶æ®µï¼å è½½æ¨¡åé¶æ®µäºä»¶åååºæ¬æ æ°å¢ï¼ï¼è§£åéåº¦éå¸¸å¨ 1ms åå®æï¼\n\næ´ä½æ¨¡åç loadingæ¶é´ä» 2s -> 1.5sï¼æ´ä½åå°äº 25%\n\n\n\n\n# 1. åç¼©çæ ¸å¿ä»·å¼ï¼åå°ä¼ è¾åå­å¨ææ¬\n\n * åç¼©é¶æ®µï¼æ¨¡åå¨å¯¼åºæä¼ è¾åè¢«åç¼©ï¼æä»¶ä½ç§¯æ¾èåå°ï¼éå¸¸å¯åå° 50%-80%ï¼ã\n * è§£åé¶æ®µï¼è¿è¡æ¶éè¿ gpu æ cpu å¿«éè§£åï¼æ¢å¤ä¸ºåå§ç½æ ¼æ°æ®ä¾æ¸²æä½¿ç¨ã\n * å®éææï¼\n   * å è½½æ¶é´ç¼©ç­ï¼ç¨æ·ä¸è½½/å è½½æ¨¡åçæ¶é´åå°ï¼å°¤å¶å¯¹ web åºæ¯å³é®ï¼ã\n   * å¸¦å®½ææ¬éä½ï¼ä¼ è¾å°ä½ç§¯æä»¶èçæµéï¼å¯¹ç§»å¨ç«¯æå¼±ç½ç¯å¢åå¥½ï¼ã\n\n----------------------------------------\n\n\n# 2. è§£åå¼éå¯æ§ï¼æ»ä½æ¶çä¸ºæ­£\n\n * è§£åæçï¼meshoptç®æ³éå¯¹è¿è¡æ¶ä¼åï¼è§£åéåº¦æå¿«ï¼éå¸¸å¨ 1ms åå®æï¼ã\n * cpu vs. ä¼ è¾æ¶é´ï¼è§£åæ¶èç cpu æ¶é´è¿å°äºæªåç¼©æ¶ç­å¾ç½ç»ä¼ è¾çæ¶é´ã\n * åå­å ç¨ï¼è§£ååçæ°æ®å¯è½éè¿ä¼åå¸å±ï¼å¦éåãé¡¶ç¹éæï¼åå°åå­å ç¨ã\n\n----------------------------------------\n\n\n# 3. åç¼©çéå ä¼å\n\n * é¡¶ç¹/ç´¢å¼ä¼åï¼meshoptä¸ä»åç¼©ï¼è¿ä¼ä¼åé¡¶ç¹é¡ºåºãç´¢å¼ç¼å²åºï¼å¯è½æåæ¸²ææ§è½ã\n * å¼å®¹æ§ï¼è§£åè¿ç¨éå¸¸ç±å¼æåç½®å·¥å·ï¼å¦ three.js çmeshoptdecoderï¼èªå¨å¤çï¼æ éæå¨å¹²é¢ã\n\n----------------------------------------\n\n\n# 4. éç¨åºæ¯æè¡¡\n\n * æ¨èä½¿ç¨ï¼\n   * å¤§ååºæ¯ï¼å¦ 3d å°å¾ãæ¸¸æå³å¡ï¼ã\n   * ç½ç»ä¼ è¾åºæ¯ï¼å¦ web åºç¨ãå¤äººå¨çº¿æ¸¸æï¼ã\n   * èµæºåéå¹³å°ï¼å¦ç§»å¨ç«¯ãvr/ar è®¾å¤ï¼ã\n * è°¨æä½¿ç¨ï¼\n   * æ¨¡åæ¬èº«å·²æç®ï¼åç¼©æ¶çæéï¼ã\n   * è¿è¡æ¶è§£åå¯è½æä¸ºç¶é¢ï¼éæµè¯è§£åæ¶é´ï¼ã\n\n----------------------------------------\n\n\n# ç»è®º\n\nåç¼©åçæ¨¡åå¨è¿è¡æ¶è§£åæ¯åççæè¡¡ï¼ç¨å¯æ§ç cpu å¼éæ¢åæ´å¿«çå è½½éåº¦åæ´ä½çä¼ è¾ææ¬ãå¯¹äºå¤§å¤æ° 3d åºç¨ï¼å°¤å¶æ¯ web åç§»å¨ç«¯ï¼ï¼è¿æ¯æ§è½ä¼åçå³é®æ­¥éª¤ã\n\n\n# shader\n\nhttps://thebookofshaders.com/?lan=ch\n\n\n# ä»ä¹æ¯ shader\n\nå¦æä½ æ¾ç»æç¨è®¡ç®æºç»å¾çç»éªï¼ä½ å°±ç¥éå¨è¿ä¸ªè¿ç¨ä¸­ä½ éè¦ç»ä¸ä¸ªåï¼ç¶åä¸ä¸ªé¿æ¹å½¢ï¼ä¸æ¡çº¿ï¼ä¸äºä¸è§å½¢â¦â¦ç´å°ç»åºä½ æ³è¦çå¾åãè¿ä¸ªè¿ç¨å¾åç¨æåä¸å°ä¿¡æä¸æ¬ä¹¦ ââ é½æ¯ä¸ç³»åçæä»¤ï¼éè¦ä½ ä¸ä»¶ä¸ä»¶å®æã\n\nshaders ä¹æ¯ä¸ç³»åçæä»¤ï¼ä½æ¯è¿äºæä»¤ä¼å¯¹å±å¹ä¸çæ¯ä¸ªåç´ åæ¶ä¸è¾¾ãä¹å°±æ¯è¯´ï¼ä½ çä»£ç å¿é¡»æ ¹æ®åç´ å¨å±å¹ä¸çä¸åä½ç½®æ§è¡ä¸åçæä½ãå°±åæ´»å­å°å·ï¼ä½ çç¨åºå°±åä¸ä¸ª functionï¼å½æ°ï¼ï¼è¾å¥ä½ç½®ä¿¡æ¯ï¼è¾åºé¢è²ä¿¡æ¯ï¼å½å®ç¼è¯å®ä¹åä¼ä»¥ç¸å½å¿«çéåº¦è¿è¡ã\n\n\n# ä¸ºä»ä¹ shader è¿è¡ç¹å«å¿«\n\nä¸ºäºåç­è¿ä¸ªé®é¢ï¼ä¸å¾ä¸ç»å¤§å®¶ä»ç»****å¹¶è¡å¤ç****ï¼parallel processingï¼çç¥å¥ä¹å¤ã\n\næ³è±¡ä½ ç cpu æ¯ä¸ä¸ªå¤§çå·¥ä¸ç®¡éï¼ç¶åæ¯ä¸ä¸ªä»»å¡é½æ¯éè¿è¿ä¸ªç®¡éçæäºä¸è¥¿ï¼è¿äºä»»å¡éè¦ä¸²è¡ï¼æ¯ä¸ªç®¡ééå¸¸è¢«ç§°ä¸º****çº¿ç¨****ã\n\nè§é¢æ¸¸æåå¶ä»å¾å½¢åºç¨æ¯èµ·å«çç¨åºæ¥è¯´ï¼éè¦é«å¾å¤çå¤çè½åãå ä¸ºå®ä»¬çå¾å½¢åå®¹éè¦æä½æ æ°åç´ ãæ³æ³çï¼å±å¹ä¸çæ¯ä¸ä¸ªåç´ é½éè¦è®¡ç®ï¼èå¨ 3d æ¸¸æä¸­å ä½åéè§ä¹é½éè¦è®¡ç®ã\n\nè®©æä»¬åå°å¼å§é£ä¸ªå³äºç®¡éåä»»å¡çæ¯å»ãå±å¹ä¸çæ¯ä¸ªåç´ é½ä»£è¡¨ä¸ä¸ªæç®åçä»»å¡ãåç¬æ¥çå®æä»»ä½ä¸ä¸ªåç´ çä»»å¡å¯¹ cpu æ¥è¯´é½å¾å®¹æï¼é£ä¹é®é¢æ¥äºï¼å±å¹ä¸çæ¯ä¸ä¸ªåç´ é½éè¦è§£å³è¿æ ·çå°ä»»å¡ï¼ä¹å°±æ¯è¯´ï¼åªææ¯å¯¹äºä¸ä¸ªèå¼çå±å¹ï¼åè¾¨ç 800x600ï¼æ¥è¯´ï¼é½éè¦æ¯å¸§å¤ç480000ä¸ªåç´ ï¼æ¯ç§å°±éè¦å¤ç14400000ä¸ªåç´ ã\n\nè¿ä¸ªæ¶åï¼å¹¶è¡å¤çå°±æ¯æå¥½çè§£å³æ¹æ¡ãæ¯èµ·ç¨ä¸äºä¸ªå¼ºå¤§çå¾®å¤çå¨ï¼æèè¯´âç®¡éâï¼æ¥å¤çè¿äºä¿¡æ¯ï¼ç¨ä¸å¤§å å°çå¾®å¤çå¨æ¥å¹¶è¡è®¡ç®ï¼å°±è¦å¥½å¾å¤ãè¿å°±æ¯å¾å½¢å¤çå¨ï¼gpu : graphic processor unit)çæ¥ç±ã\n\nè®¾æ³ä¸å å°åå¾®å¤çå¨ææä¸ä¸ªå¹³é¢çç»é¢ï¼14400000ä¸ªåç´ å¯ä»¥å¨ä¸ç§åé»å¡å ä¹ä»»ä½ç®¡éãä½æ¯ä¸é¢800x600çç®¡éå¢ï¼æ¯ç§æ¥æ¶30æ³¢480000ä¸ªåç´ çä¿¡æ¯å°±å¯ä»¥æµçå®æãè¿å¨æ´é«çåè¾¨çä¸ä¹æ¯æç«ç ââ å¹¶è¡çå¤çå¨è¶å¤ï¼å¯ä»¥å¤ççæ°æ®æµå°±è¶å¤§ã\n\nå¦ä¸ä¸ª gpu çé­æ³æ¯ç¹æ®æ°å­¦å½æ°å¯éè¿ç¡¬ä»¶å éãéå¸¸å¤æçæ°å­¦æä½å¯ä»¥ç´æ¥è¢«å¾®è¯çè§£å³ï¼èæ é¡»éè¿è½¯ä»¶ãè¿å°±è¡¨ç¤ºå¯ä»¥ææ´å¿«çä¸è§åç©éµè¿ç® ââ åçµæµä¸æ ·å¿«ã\n\n\n# glslæ¯ä»ä¹ï¼\n\nglsl ä»£è¡¨ opengl shading languageï¼opengl çè²è¯­è¨ï¼å¨ three.js ä¸­ä¹å¯ä»¥ç¼å glslã\n\n\n# ä¸ºä»ä¹ shaders ä¸å¥½å­¦ï¼\n\ngpu çå¼ºå¤§çæ¶æè®¾è®¡ä¹æå¶éå¶ä¸ä¸è¶³ã\n\nä¸ºäºè½ä½¿è®¸å¤ç®¡çº¿å¹¶è¡è¿è¡ï¼æ¯ä¸ä¸ªçº¿ç¨å¿é¡»ä¸å¶ä»çç¸ç¬ç«ãæä»¬ç§°è¿äºçº¿ç¨å¯¹äºå¶ä»çº¿ç¨å¨è¿è¡çè¿ç®æ¯âç²è§âçãè¿ä¸ªéå¶å°±ä¼ä½¿å¾æææ°æ®å¿é¡»ä»¥ç¸åçæ¹åæµå¨ãæä»¥å°±ä¸å¯è½æ£æ¥å¶ä»çº¿ç¨çè¾åºç»æï¼ä¿®æ¹è¾å¥çæ°æ®ï¼æèæä¸ä¸ªçº¿ç¨çè¾åºç»æè¾å¥ç»å¦ä¸ä¸ªçº¿ç¨ãåè®¸æ°æ®å¨çº¿ç¨ä¹é´çº¿ç¨æµå¨ä¼ä½¿æ°æ®çæ´ä½æ§é¢ä¸´å¨èã\n\nå¹¶ä¸ gpu ä¼è®©ææå¹¶è¡çå¾®å¤çå¨ï¼ç®¡éä»¬ï¼ä¸ç´å¤å¨å¿ç¢ç¶æï¼åªè¦å®ä»¬ä¸æç©ºé²å°±ä¼æ¥å°æ°çä¿¡æ¯ãä¸ä¸ªçº¿ç¨ä¸å¯è½ç¥éå®åä¸å»å¨åä»ä¹ãå®å¯è½æ¯å¨ç»æä½ç³»ç»çé¢ä¸çä¸ä¸ªæé®ï¼ç¶åæ¸²æäºæ¸¸æä¸­çä¸é¨åå¤©ç©ºï¼ç¶åæ¾ç¤ºäºä¸å° email ä¸­çä¸äºæå­ãæ¯ä¸ªçº¿ç¨ä¸ä»æ¯âç²è§âçï¼èä¸è¿æ¯âæ è®°å¿âçãåæ¶ï¼å®è¦æ±ç¼åä¸ä¸ªéç¨çè§åï¼ä¾æ®åç´ çä¸åä½ç½®ä¾æ¬¡è¾åºä¸åçç»æãè¿ç§æ½è±¡æ§ï¼åç²è§ãæ è®°å¿çéå¶ä½¿å¾ shaders å¨ç¨åºåæ°æä¸­ä¸æ¯å¾åæ¬¢è¿ã\n\n\n# é¡¶ç¹çè²å¨åçæ®µçè²å¨\n\nshader æä¸¤ç§ï¼å¨æç®éç½®ä¸ï¼è³å°é½å¾æä¸¤ä¸ªçè²å¨ï¼ä¸ä¸ªå«é¡¶ç¹çè²å¨ï¼vertex shaderï¼ï¼å¦ä¸ä¸ªå«çæ®µçè²å¨ï¼fragment shaderï¼ã\n\né¡¶ç¹çè²å¨è´è´£å¤çæ¯ä¸ªé¡¶ç¹çä½ç½®ï¼å¯è½è¿ææ³çº¿ãé¢è²ç­ä¿¡æ¯ãæ¯ä¸ªé¡¶ç¹é½ä¼æ§è¡ä¸æ¬¡ã\n\nçåçè²å¨åæ¯å¤çæ¯ä¸ªåç´ çé¢è²åå¶ä»å±æ§ãæ¯ä¸ªåç´ çåé½ä¼æ§è¡ä¸æ¬¡ä»£ç ã\n\n\n# å¨ three.js ä¸­å®ç°ä¸ä¸ªæ°´å¢¨é£ç shader\n\nå¨ three.js æè®¸å¤åç½®çæè´¨ï¼æäºæ¶åè¿äºæè´¨ä¸è½æ»¡è¶³æä»¬çéæ±ï¼æ¯å¦ä¸é¢ç»ä¸ä¸ªç¨ shader å®ç°çæ°´å¢¨é£æè´¨ã\n\n// çè²å¨ä»£ç \nconst shadermaterial = new three.shadermaterial({\n    vertexshader: `\n        varying vec2 vuv;        // å° uv åæ ä¼ ç»çåçè²å¨\n        varying vec3 vnormal;    // ä¼ éæ³çº¿æ¹å\n        varying vec3 vposition;  // ä¼ éé¡¶ç¹ä½ç½®\n        void main() {\n            vuv = uv;                        // ä¿å­ uv åæ \n            vnormal = normal;                // ä¿å­æ³çº¿\n            vposition = position;            // ä¿å­é¡¶ç¹ä½ç½®\n            gl_position = projectionmatrix * modelviewmatrix * vec4(position, 1.0); // è®¡ç®å±å¹åæ \n        }\n    `,\n    fragmentshader: `\n        varying vec2 vuv;\n        varying vec3 vnormal;\n        varying vec3 vposition;\n        // ç®ååªå£°å½æ°\n        float rand(vec2 n) { \n            return fract(sin(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);\n        }\n        void main() {\n            // è¾¹ç¼æ£æµï¼ç®æçï¼\n            float edge = length(fwidth(vnormal)) * 2.0; // è®¡ç®æ³çº¿ååçå§çç¨åº¦ï¼è¾¹ç¼åºåååå¤§ï¼\n            edge = 1.0 - smoothstep(0.0, 1.5, edge); // å°è¾¹ç¼å¼è½¬ä¸º 0-1 çå¼ºåº¦ï¼1ä»£è¡¨è¾¹ç¼ï¼\n            // çææ°´å¢¨åªå£°\n            float noise = rand(vuv * 100.0) * 0.2; // éè¿ uv åæ çæåªç¹ï¼*100 æ§å¶åªç¹å¯åº¦ï¼\n            // é¢è²éåï¼3ä¸ªè²é¶ï¼\n            float color = length(vposition) * 0.3 + noise; // æ··åä½ç½®ä¿¡æ¯ååªç¹\n            color = floor(color * 3.0) / 3.0; // å°é¢è²åä¸º 3 ä¸ªè²é¶ï¼0, 0.33, 0.66, 1.0ï¼\n            // ç»åææ\n            float final = max(color * 0.8, edge * 0.9); // åå¹¶é¢è²åè¾¹ç¼ï¼æ·±è²ä¼åï¼\n            // æ·»å çº¸è´¨çº¹ç\n            float paper = rand(vuv * 50.0) * 0.1; // çææ´ç»è»ççº¸è´¨çº¹ç\n            final = clamp(final + paper, 0.0, 1.0); // å å çº¸è´¨åªç¹å¹¶éå¶èå´\n            // æç»é¢è²ï¼å¸¦å°è®¸éè²ï¼\n            gl_fragcolor = vec4(vec3(final * 0.9, final * 1.0, final * 0.95), 1.0); // éè¿ rgb ç³»æ°è°æ´é¢è²ååéç°è²ï¼0.9, 1.0, 0.95 å å¼ºç»¿è²åèè²ï¼ã\n        }\n    `,\n    side: three.doubleside, // åé¢æ¸²æï¼é²æ­¢èé¢éæï¼\n});\n\ufeff\n// åå»ºæµè¯ç©ä½\nconst geom = new three.torusknotgeometry(2, 0.8, 64, 16);\nconst mesh = new three.mesh(geom, shadermaterial);\nscene.add(mesh);\n\n\n * projectionmatrix è¡¨ç¤ºçæ¯æåæºçæå½±ç©éµï¼modelviewmatrix è¡¨ç¤ºçæ¯åºæ¯ä¸­ç©ä½çä½ç½®å°çå®ä¸ççæ å°ï¼è¿ä¸¤ä¸ªå±åæ¥å³å®å°ç©ä½æ¸²æå°å±å¹çåªä¸ªä½ç½®ã\n * fwidthï¼æ¯ä¸ä¸ªglslåç½®å½æ°ï¼ç¨äºè®¡ç®å½æ°å¨å±å¹ç©ºé´ï¼æèå¶ä»åæ ç³»ï¼ä¸­xåyæ¹åçååçï¼ä¹å°±æ¯å½æ°æ²¿çxåyæ¹åçæ¢¯åº¦ã\n * lengthï¼ç¨äºè®¡ç®åéçé¿åº¦ï¼æ¨¡é¿ï¼\n * smoothstepï¼æ¯ä¸ä¸ªå¹³æ»é¶æ¢¯æå¼å½æ°ï¼å®å¨ä¸¤ä¸ªéå¼ä¹é´äº§çå¹³æ»çè¿æ¸¡ãå°äºèµ·ç¹æ¶ä¸º0ï¼å¤§äºç»ç¹æ¶ä¸º1ï¼å¨è¿ä¹é´åå¹³æ»è¿æ¸¡ã\n * clampï¼clamp(x,a,b) // å½x<aæ¶è¿åa,å½x>bæ¶è¿åb,å¦åè¿åæ¬èº«\n\n\n# composer æè¾¹\n\nimport {effectcomposer} from 'three/addons/postprocessing/effectcomposer.js';\nimport {outlinepass} from 'three/addons/postprocessing/outlinepass.js';\nimport {outputpass} from 'three/addons/postprocessing/outputpass.js';\nimport {renderpass} from 'three/addons/postprocessing/renderpass.js';\n\nconst composer = new effectcomposer(renderer); // åå»ºåå¤çå¯¹è±¡effectcomposerï¼webglæ¸²æå¨ä½ä¸ºåæ°\ncomposer.setpixelratio(window.devicepixelratio); // å³é®ï¼ééé«dpiå±å¹\ncomposer.setsize(window.innerwidth, window.innerheight);\nconst renderpass = new renderpass(scene, camera); // åå»ºä¸ä¸ªæ¸²æå¨ééï¼åºæ¯åç¸æºä½ä¸ºåæ°\ncomposer.addpass(renderpass); // è®¾ç½®renderpasséé\nconst outlinepass = new outlinepass(new three.vector2(window.innerwidth, window.innerheight), scene, camera);\noutlinepass.visibleedgecolor.set('#ffff00'); // ååé¢è²\noutlinepass.hiddenedgecolor.set('gray'); // è¢«å¶å®ç©ä½æ¡ä½é¨åçé¢è²\noutlinepass.edgeglow = 0.0; // è¾¹ç¼è¾åå¤§å°\noutlinepass.usepatterntexture = false; // é»è®¤æ¯flaseï¼æ¹ætrueåä»æ¾ç¤ºè¾¹æ¡\noutlinepass.edgethickness = 3.0; // ååååº¦\noutlinepass.edgestrength = 6.0; // ååå¼ºåº¦\noutlinepass.downsampleratio = 2; // è½æ¹ååçå®½åº¦ï¼å»ºè®®é»è®¤ä¸å¨\noutlinepass.pulseperiod = 0; // è¾¹ç¼éªçï¼é»è®¤ä¸º0æ éªçï¼æ°å¼è¶å°ï¼éªçè¶å¿«\ncomposer.addpass(outlinepass);\nconst outputpass = new outputpass();\ncomposer.addpass(outputpass);\noutlinepass.selectedobjects = [];\n\n// ç»å·ä½çæ¨¡åæ·»å \nthis.fragmentmodel.traverse(obj => {\n    if (obj.type === 'mesh') {\n        outlinepass.selectedobjects = [obj];\n    }\n});\n\n\nååææå¯¹æ¯\n\n\n\næ³¨æï¼è¥ç»ç©ä½æ·»å äºç¯å¢åï¼å¦hdrï¼å¯è½ä¼å½±åæè¾¹ã\n\n\n# åå­é®é¢\n\nç±äºéå¤æ¸¸æå¯è½ä¼å ä¸ºæ¨¡åå¸è½½ä¸å¹²åæèå¼ç¨æ²¡æ¸é¤å¯¼è´åå­æ³é²ï¼å»ºè®®ä½¿ç¨ chrome èªå¸¦çåå­åæï¼å¤æ¬¡æ¸¸æè¿è¡ååçåå­å¯¹æ¯ï¼æ¥æ¥æ¾åå ",charsets:{cjk:!0}},{title:"babel",frontmatter:{},regularPath:"/tool/babel.html",relativePath:"tool/babel.md",key:"v-31f17df6",path:"/tool/babel.html",headers:[{level:2,title:"å®è£ä¸ä½¿ç¨",slug:"å®è£ä¸ä½¿ç¨",normalizedTitle:"å®è£ä¸ä½¿ç¨",charIndex:185},{level:2,title:"@babel/preset-env",slug:"babel-preset-env",normalizedTitle:"@babel/preset-env",charIndex:539},{level:2,title:"@babel/polyfill",slug:"babel-polyfill",normalizedTitle:"@babel/polyfill",charIndex:2005},{level:2,title:"@babel/runtime",slug:"babel-runtime",normalizedTitle:"@babel/runtime",charIndex:2676},{level:2,title:"@babel/plugin-transform-runtime",slug:"babel-plugin-transform-runtime",normalizedTitle:"@babel/plugin-transform-runtime",charIndex:2693},{level:2,title:"@babel/register",slug:"babel-register",normalizedTitle:"@babel/register",charIndex:3451}],lastUpdated:"3/1/2022, 3:30:47 PM",lastUpdatedTimestamp:1646119847e3,headersStr:"å®è£ä¸ä½¿ç¨ @babel/preset-env @babel/polyfill @babel/runtime @babel/plugin-transform-runtime @babel/register",content:'# babel\n\næ¬æé¨åè½¬è½½äºBabelæç¨\n\nThe compiler for writing next generation JavaScript\n\nç®åç¿»è¯ä¸å°±æ¯âç¨äºç¼åä¸ä¸ä»£JavaScriptçç¼è¯å¨âãBabelæ¯ä¸ä¸ªå·¥å·éï¼ä¸»è¦ç¨äºå°ES6çæ¬çJavaScriptä»£ç è½¬ä¸ºES5ç­ååå¼å®¹çJSä»£ç ï¼ä»èå¯ä»¥è¿è¡å¨ä½çæ¬æµè§å¨æå¶å®ç¯å¢ä¸­ã\n\n\n# å®è£ä¸ä½¿ç¨\n\nBabelä¾èµNode.jsï¼æ²¡æå®è£çè¯ï¼å»å®ç½ä¸è½½å®è£ææ°ç¨³å®çæ¬çNode.jsã\n\nå¨æ¬å°æ°å»ºä¸ä¸ªæä»¶å¤¹ï¼å¨è¯¥æä»¶å¤¹ä¸æ°å»ºä¸ä¸ªjsæä»¶ï¼æä»¶å½åä¸ºbabel.config.jsãè¯¥æä»¶æ¯ Babeléç½®æä»¶ ï¼æä»¬å¨è¯¥æä»¶éè¾å¥å¦ä¸åå®¹ï¼\n\nmodule.exports = {\n  presets: ["@babel/env"],\n  plugins: []\n}\n\n\nç¶åå¨è¯¥æä»¶å¤¹ä¸æ°å»ºä¸ä¸ªjsæä»¶main.jsï¼è¯¥jséçä»£ç æ¯æä»¬éè¦è½¬è¯çï¼æä»¬åå¥ä»£ç \n\nvar fn = (num) => num + 2;\n\n\nç¶åæ§è¡ä¸é¢çå½ä»¤å®è£ä¸ä¸ªnpmåï¼è¿äºnpmåæ¯Babelå®æ¹å\n\nnpm install --save-dev @babel/cli @babel/core @babel/preset-env\n\n\nå®è£å®æåï¼æ§è¡ä¸é¢çå½ä»¤è¿è¡è½¬ç ï¼è¯¥å½ä»¤å«ä¹æ¯æ main.js è½¬ç çæ compiled.js æä»¶\n\nnpx babel main.js -o compiled.js\n\n\næ­¤æ¶æä»¶å¤¹ä¸ä¼çæcompiled.jsï¼è¯¥æä»¶æ¯è½¬æ¢åçä»£ç ï¼\n\n"use strict";\nvar fn = function fn(num) {\n  return num + 2;\n};\n\n\nè¿å°±æ¯ä¸ä¸ªæç®åçBabelä½¿ç¨è¿ç¨ï¼æä»¬æç¨ES6ç¼åmain.jsè½¬æ¢æäºES5çcompiled.jsã\n\n * @babel/cliæ¯Babelå½ä»¤è¡è½¬ç å·¥å·ï¼å¦ææä»¬ä½¿ç¨å½ä»¤è¡è¿è¡Babelè½¬ç å°±éè¦å®è£å®ã\n * @babel/cliä¾èµ@babel/coreï¼å æ­¤ä¹éè¦å®è£@babel/coreè¿ä¸ªBabelæ ¸å¿npmåã\n * @babel/preset-envè¿ä¸ªnpmåæä¾äºES6è½¬æ¢ES5çè¯­æ³è½¬æ¢è§åï¼æä»¬å¨Babeléç½®æä»¶éæå®ä½¿ç¨å®ãå¦æä¸ä½¿ç¨çè¯ï¼ä¹å¯ä»¥å®æè½¬ç ï¼ä½è½¬ç åçä»£ç ä»ç¶æ¯ES6çï¼ç¸å½äºæ²¡æè½¬ç ã\n\n\n# @babel/preset-env\n\nBabelæä»¶çæ°ééå¸¸å¤ï¼å¤çES2015çæ\n\n * @babel/plugin-transform-arrow-functions\n * @babel/plugin-transform-block-scoped-functions\n * @babel/plugin-transform-block-scoping ......\n\nBabelæä»¶å®å¨å¤ªå¤ï¼åå¦åªéç½®æä»¶æ°ç»ï¼é£æä»¬åç«¯å·¥ç¨è¦æES2015,ES2016,ES2017...ä¸çæææä»¶é½åå°éç½®é¡¹éï¼æä»¬çBabeléç½®æä»¶ä¼éå¸¸èè¿ã\n\npreseté¢è®¾å°±æ¯å¸®æä»¬è§£å³è¿ä¸ªé®é¢çãé¢è®¾æ¯ä¸ç»Babelæä»¶çéåï¼\n\n * @babel/preset-env\n * @babel/preset-react\n * @babel/preset-typescript\n * babel-preset-es2015\n\n2017å¹´Babel çå®ç½ä¸å¨9æå®£å¸ ES2015 / ES2016/ ES2017 ç­ç­ ES20xx æ¶ä»£ç presets ééè¢«åºå¼ï¼deprecatedï¼ï¼åèä»£ä¹çæ¯ babel-preset-envï¼å¹¶ä¸æ¿è¯ºå®å°æä¸ºâæªæ¥ä¸ä¼è¿æ¶çï¼future-proofï¼âè§£å³æ¹æ¡ãå¨Babel7ä¹åï¼babel-preset-env çåå­æ¯ @babel/preset-envã\n\nä¹å°±æ¯è¯´ï¼ babel preset å°åºäºä½ çå®éæµè§å¨åè¿è¡ç¯å¢ï¼èªå¨çç¡®å®babelæä»¶åpolyfillsï¼è½¬è¯ES2015åæ­¤çæ¬ä»¥ä¸çè¯­è¨ã\n\nå¨æ²¡æéç½®é¡¹çæåµä¸ï¼@babel/preset-env è¡¨ç°çå babel-preset-latest ä¸æ ·(æèå¯ä»¥è¯´å babel-preset-es2015, babel-preset-es2016, and babel-preset-es2017 ç»åå°ä¸èµ·ï¼è¡¨ç°çä¸è´ãæä»¥é£ä¹å¤ç preset é¢è®¾ï¼ç°å¨åªéä¸ä¸ª @babel/preset-env å°±å¯ä»¥äºã\n\n{\n  "presets": [\n    ["@babel/preset-env"]\n  ]\n}\n\n\nBabelæç¨7ï¼Babeléç½®æä»¶\n\nBabelæç¨10ï¼@babel/preset-env\n\n\n# @babel/polyfill\n\nvar fn = (num) => num + 2;\nvar promise = Promise.resolve(\'ok\')\n\n\næ§è¡å½ä»¤ï¼\n\nnpx babel main.js -o compiled.js\n\n\nçæ compiled.js å¦ä¸ï¼\n\n"use strict";\nvar fn = function fn(num) {\n  return num + 2;\n};\nvar promise = Promise.resolve(\'ok\');\n\n\næä»¬åç°Babelå¹¶æ²¡æå¯¹ES6çPromiseè¿è¡è½¬æ¢ ï¼å¨æ¯è¾èçæµè§å¨ï¼ ä¾å¦ç«ç27 ï¼éæå¼å¼å¥åæ§å¶å°ä¼æ¥éï¼Promise is not definedã\n\n> ä¸ºä½ Babelæ²¡æå¯¹ES6çPromiseè¿è¡è½¬æ¢ ï¼\n> \n> å ä¸ºBabelé»è®¤åªè½¬æ¢æ°çJavaScriptè¯­æ³ï¼syntaxï¼ï¼èä¸è½¬æ¢æ°ç APIã\n> \n> æ°çAPIåç±»ä¸¤ç±»ï¼ä¸ç±»æ¯PromiseãMapãSymbolãProxyãIteratorç­å¨å±å¯¹è±¡åå¶å¯¹è±¡èªèº«çæ¹æ³ï¼ä¾å¦Object.assignï¼Promise.resolveï¼å¦ä¸ç±»æ¯æ°çå®ä¾æ¹æ³ï¼ä¾å¦æ°ç»å®ä¾æ¹æ³[1, 4, -5, 10].find((item) => item < 0)\n\nç¼ºç¹ï¼babel-polyfillæ¯è¾ç®åç²æ´ï¼å¨å¼å¥çåæ¶ï¼ä¹æ±¡æäºå¨å±å¯¹è±¡ï¼å¯¼è´æ æå¢å äºå¾å¤ç¨ä¸å°çpolyfillï¼ä¹å¯è½ä¼æ±¡æå­æ¨¡åçåéå¼ç¨ï¼å¯è½å¯¼è´ä¸å¿è¦çå²çªãæä»¬ç®åä¸è¬ä¼ä½¿ç¨ @babel/runtime å @babel/plugin-transform-runtime\n\n\n# @babel/runtime\n\nbabel-runtime å babel-polyfillæç¹ç±»ä¼¼ï¼é½æ¯å»å¼å®¹æ°APIçâå«çâï¼å®å babel-polyfill æå¤§çä¸åå°±æ¯å¯ä»¥åå°æéå¼ç¨ï¼åªééè¦ä»ä¹å°±ç¨ä»ä¹ï¼æ¯å¦æéè¦Promiseãä¸è¬å¨çæç¯å¢ï¼é¦åå®è£ä¾èµï¼ç¶åå¼å¥ï¼\n\n// npm install --save babel-runtime\nimport Promise from \'babel-runtime/core-js/promise\';\n\n\n\n# @babel/plugin-transform-runtime\n\nå¦æç¨ @babel/runtimeï¼å¦ææ10ä¸ªæä»¶è¦å¼ç¨Promiseï¼é¾éæ¯ä¸ªæä»¶é½å¾åä¸ª @babel/runtimeçPromiseå¼å¥ä¹ï¼æ¾ç¶å¾éº»ç¦ãé£ä¹ @babel/plugin-transform-runtimeå°±æ¯ç¨æ¥è§£å³è¿ä¸ªé®é¢çï¼æ è®ºä½ å¤å°ä¸ªæä»¶å¼å¥äºç¸å³æ°çAPIï¼å®åªä¼å­å¨ä¸ä»½ï¼@babel/plugin-transform-runtime æ¬è´¨ä¸ä¾èµäº babel-runtime ç core-jsï¼å¨ç¼è¯çæ¶åä¼å¸®ä½ èªå¨å¤çï¼å¨å¼åç¯å¢å®è£ä¾èµï¼\n\nnpm install --save-dev @babel/plugin-transform-runtime\n\n\nä½ åªéè¦éç½®ï¼\n\n{\n  "plugins": [\n    "@babel/plugin-transform-runtime"\n  ]\n}\n\n\n> ç»¼ä¸ï¼æä»¬æå¸¸ç¨çé¢è®¾æ¯ @babel/preset-envï¼æå¸¸ç¨çæä»¶æ¯ @babel/plugin-transform-runtime\n\n\n# @babel/register\n\nbabel-registeræ¨¡åæ¹årequireå½ä»¤ï¼ä¸ºå®å ä¸ä¸ä¸ªé©å­ãæ­¤åï¼æ¯å½ä½¿ç¨requireå è½½.jsã.jsxã.eså.es6åç¼åçæä»¶ï¼å°±ä¼åç¨Babelè¿è¡è½¬ç ã\n\nnpm install --save-dev @babel/register\n\n\nä½¿ç¨æ¶ï¼å¿é¡»é¦åå è½½babel-registerã\n\nrequire("babel-register");\nrequire("./index.js");\n\n\nç¶åï¼å°±ä¸éè¦æå¨å¯¹index.jsè½¬ç äºã\n\néè¦æ³¨æçæ¯ï¼babel-registeråªä¼å¯¹requireå½ä»¤å è½½çæä»¶è½¬ç ï¼èä¸ä¼å¯¹å½åæä»¶è½¬ç ãå¦å¤ï¼ç±äºå®æ¯å®æ¶è½¬ç ï¼æä»¥åªéåå¨å¼åç¯å¢ä½¿ç¨ã\n\né»è®¤å¿½ç¥ node_modules\n\næ³¨æï¼ é»è®¤æåµä¸ï¼ææå¯¹ node_modules ç®å½ä¸çæä»¶ç require è¯·æ±é½å°è¢«å¿½ç¥ãä½ å¯ä»¥éè¿ä»¥ä¸æ¹å¼ä¼ éä¸ä¸ªç¨äºå¹éè¢«å¿½ç¥æä»¶çæ­£åè¡¨è¾¾å¼æ¥ä¿®æ¹é»è®¤è¡ä¸ºï¼\n\nrequire("@babel/register")({\n  // When a file path matches this regex then it is not compiled\n  ignore: [],\n  \n  // It will not be compiled if `true` is returned.\n  function(filepath) {\n      return filepath !== "/path/to/es6-file.js";\n  }\n});\n',normalizedContent:'# babel\n\næ¬æé¨åè½¬è½½äºbabelæç¨\n\nthe compiler for writing next generation javascript\n\nç®åç¿»è¯ä¸å°±æ¯âç¨äºç¼åä¸ä¸ä»£javascriptçç¼è¯å¨âãbabelæ¯ä¸ä¸ªå·¥å·éï¼ä¸»è¦ç¨äºå°es6çæ¬çjavascriptä»£ç è½¬ä¸ºes5ç­ååå¼å®¹çjsä»£ç ï¼ä»èå¯ä»¥è¿è¡å¨ä½çæ¬æµè§å¨æå¶å®ç¯å¢ä¸­ã\n\n\n# å®è£ä¸ä½¿ç¨\n\nbabelä¾èµnode.jsï¼æ²¡æå®è£çè¯ï¼å»å®ç½ä¸è½½å®è£ææ°ç¨³å®çæ¬çnode.jsã\n\nå¨æ¬å°æ°å»ºä¸ä¸ªæä»¶å¤¹ï¼å¨è¯¥æä»¶å¤¹ä¸æ°å»ºä¸ä¸ªjsæä»¶ï¼æä»¶å½åä¸ºbabel.config.jsãè¯¥æä»¶æ¯ babeléç½®æä»¶ ï¼æä»¬å¨è¯¥æä»¶éè¾å¥å¦ä¸åå®¹ï¼\n\nmodule.exports = {\n  presets: ["@babel/env"],\n  plugins: []\n}\n\n\nç¶åå¨è¯¥æä»¶å¤¹ä¸æ°å»ºä¸ä¸ªjsæä»¶main.jsï¼è¯¥jséçä»£ç æ¯æä»¬éè¦è½¬è¯çï¼æä»¬åå¥ä»£ç \n\nvar fn = (num) => num + 2;\n\n\nç¶åæ§è¡ä¸é¢çå½ä»¤å®è£ä¸ä¸ªnpmåï¼è¿äºnpmåæ¯babelå®æ¹å\n\nnpm install --save-dev @babel/cli @babel/core @babel/preset-env\n\n\nå®è£å®æåï¼æ§è¡ä¸é¢çå½ä»¤è¿è¡è½¬ç ï¼è¯¥å½ä»¤å«ä¹æ¯æ main.js è½¬ç çæ compiled.js æä»¶\n\nnpx babel main.js -o compiled.js\n\n\næ­¤æ¶æä»¶å¤¹ä¸ä¼çæcompiled.jsï¼è¯¥æä»¶æ¯è½¬æ¢åçä»£ç ï¼\n\n"use strict";\nvar fn = function fn(num) {\n  return num + 2;\n};\n\n\nè¿å°±æ¯ä¸ä¸ªæç®åçbabelä½¿ç¨è¿ç¨ï¼æä»¬æç¨es6ç¼åmain.jsè½¬æ¢æäºes5çcompiled.jsã\n\n * @babel/cliæ¯babelå½ä»¤è¡è½¬ç å·¥å·ï¼å¦ææä»¬ä½¿ç¨å½ä»¤è¡è¿è¡babelè½¬ç å°±éè¦å®è£å®ã\n * @babel/cliä¾èµ@babel/coreï¼å æ­¤ä¹éè¦å®è£@babel/coreè¿ä¸ªbabelæ ¸å¿npmåã\n * @babel/preset-envè¿ä¸ªnpmåæä¾äºes6è½¬æ¢es5çè¯­æ³è½¬æ¢è§åï¼æä»¬å¨babeléç½®æä»¶éæå®ä½¿ç¨å®ãå¦æä¸ä½¿ç¨çè¯ï¼ä¹å¯ä»¥å®æè½¬ç ï¼ä½è½¬ç åçä»£ç ä»ç¶æ¯es6çï¼ç¸å½äºæ²¡æè½¬ç ã\n\n\n# @babel/preset-env\n\nbabelæä»¶çæ°ééå¸¸å¤ï¼å¤çes2015çæ\n\n * @babel/plugin-transform-arrow-functions\n * @babel/plugin-transform-block-scoped-functions\n * @babel/plugin-transform-block-scoping ......\n\nbabelæä»¶å®å¨å¤ªå¤ï¼åå¦åªéç½®æä»¶æ°ç»ï¼é£æä»¬åç«¯å·¥ç¨è¦æes2015,es2016,es2017...ä¸çæææä»¶é½åå°éç½®é¡¹éï¼æä»¬çbabeléç½®æä»¶ä¼éå¸¸èè¿ã\n\npreseté¢è®¾å°±æ¯å¸®æä»¬è§£å³è¿ä¸ªé®é¢çãé¢è®¾æ¯ä¸ç»babelæä»¶çéåï¼\n\n * @babel/preset-env\n * @babel/preset-react\n * @babel/preset-typescript\n * babel-preset-es2015\n\n2017å¹´babel çå®ç½ä¸å¨9æå®£å¸ es2015 / es2016/ es2017 ç­ç­ es20xx æ¶ä»£ç presets ééè¢«åºå¼ï¼deprecatedï¼ï¼åèä»£ä¹çæ¯ babel-preset-envï¼å¹¶ä¸æ¿è¯ºå®å°æä¸ºâæªæ¥ä¸ä¼è¿æ¶çï¼future-proofï¼âè§£å³æ¹æ¡ãå¨babel7ä¹åï¼babel-preset-env çåå­æ¯ @babel/preset-envã\n\nä¹å°±æ¯è¯´ï¼ babel preset å°åºäºä½ çå®éæµè§å¨åè¿è¡ç¯å¢ï¼èªå¨çç¡®å®babelæä»¶åpolyfillsï¼è½¬è¯es2015åæ­¤çæ¬ä»¥ä¸çè¯­è¨ã\n\nå¨æ²¡æéç½®é¡¹çæåµä¸ï¼@babel/preset-env è¡¨ç°çå babel-preset-latest ä¸æ ·(æèå¯ä»¥è¯´å babel-preset-es2015, babel-preset-es2016, and babel-preset-es2017 ç»åå°ä¸èµ·ï¼è¡¨ç°çä¸è´ãæä»¥é£ä¹å¤ç preset é¢è®¾ï¼ç°å¨åªéä¸ä¸ª @babel/preset-env å°±å¯ä»¥äºã\n\n{\n  "presets": [\n    ["@babel/preset-env"]\n  ]\n}\n\n\nbabelæç¨7ï¼babeléç½®æä»¶\n\nbabelæç¨10ï¼@babel/preset-env\n\n\n# @babel/polyfill\n\nvar fn = (num) => num + 2;\nvar promise = promise.resolve(\'ok\')\n\n\næ§è¡å½ä»¤ï¼\n\nnpx babel main.js -o compiled.js\n\n\nçæ compiled.js å¦ä¸ï¼\n\n"use strict";\nvar fn = function fn(num) {\n  return num + 2;\n};\nvar promise = promise.resolve(\'ok\');\n\n\næä»¬åç°babelå¹¶æ²¡æå¯¹es6çpromiseè¿è¡è½¬æ¢ ï¼å¨æ¯è¾èçæµè§å¨ï¼ ä¾å¦ç«ç27 ï¼éæå¼å¼å¥åæ§å¶å°ä¼æ¥éï¼promise is not definedã\n\n> ä¸ºä½ babelæ²¡æå¯¹es6çpromiseè¿è¡è½¬æ¢ ï¼\n> \n> å ä¸ºbabelé»è®¤åªè½¬æ¢æ°çjavascriptè¯­æ³ï¼syntaxï¼ï¼èä¸è½¬æ¢æ°ç apiã\n> \n> æ°çapiåç±»ä¸¤ç±»ï¼ä¸ç±»æ¯promiseãmapãsymbolãproxyãiteratorç­å¨å±å¯¹è±¡åå¶å¯¹è±¡èªèº«çæ¹æ³ï¼ä¾å¦object.assignï¼promise.resolveï¼å¦ä¸ç±»æ¯æ°çå®ä¾æ¹æ³ï¼ä¾å¦æ°ç»å®ä¾æ¹æ³[1, 4, -5, 10].find((item) => item < 0)\n\nç¼ºç¹ï¼babel-polyfillæ¯è¾ç®åç²æ´ï¼å¨å¼å¥çåæ¶ï¼ä¹æ±¡æäºå¨å±å¯¹è±¡ï¼å¯¼è´æ æå¢å äºå¾å¤ç¨ä¸å°çpolyfillï¼ä¹å¯è½ä¼æ±¡æå­æ¨¡åçåéå¼ç¨ï¼å¯è½å¯¼è´ä¸å¿è¦çå²çªãæä»¬ç®åä¸è¬ä¼ä½¿ç¨ @babel/runtime å @babel/plugin-transform-runtime\n\n\n# @babel/runtime\n\nbabel-runtime å babel-polyfillæç¹ç±»ä¼¼ï¼é½æ¯å»å¼å®¹æ°apiçâå«çâï¼å®å babel-polyfill æå¤§çä¸åå°±æ¯å¯ä»¥åå°æéå¼ç¨ï¼åªééè¦ä»ä¹å°±ç¨ä»ä¹ï¼æ¯å¦æéè¦promiseãä¸è¬å¨çæç¯å¢ï¼é¦åå®è£ä¾èµï¼ç¶åå¼å¥ï¼\n\n// npm install --save babel-runtime\nimport promise from \'babel-runtime/core-js/promise\';\n\n\n\n# @babel/plugin-transform-runtime\n\nå¦æç¨ @babel/runtimeï¼å¦ææ10ä¸ªæä»¶è¦å¼ç¨promiseï¼é¾éæ¯ä¸ªæä»¶é½å¾åä¸ª @babel/runtimeçpromiseå¼å¥ä¹ï¼æ¾ç¶å¾éº»ç¦ãé£ä¹ @babel/plugin-transform-runtimeå°±æ¯ç¨æ¥è§£å³è¿ä¸ªé®é¢çï¼æ è®ºä½ å¤å°ä¸ªæä»¶å¼å¥äºç¸å³æ°çapiï¼å®åªä¼å­å¨ä¸ä»½ï¼@babel/plugin-transform-runtime æ¬è´¨ä¸ä¾èµäº babel-runtime ç core-jsï¼å¨ç¼è¯çæ¶åä¼å¸®ä½ èªå¨å¤çï¼å¨å¼åç¯å¢å®è£ä¾èµï¼\n\nnpm install --save-dev @babel/plugin-transform-runtime\n\n\nä½ åªéè¦éç½®ï¼\n\n{\n  "plugins": [\n    "@babel/plugin-transform-runtime"\n  ]\n}\n\n\n> ç»¼ä¸ï¼æä»¬æå¸¸ç¨çé¢è®¾æ¯ @babel/preset-envï¼æå¸¸ç¨çæä»¶æ¯ @babel/plugin-transform-runtime\n\n\n# @babel/register\n\nbabel-registeræ¨¡åæ¹årequireå½ä»¤ï¼ä¸ºå®å ä¸ä¸ä¸ªé©å­ãæ­¤åï¼æ¯å½ä½¿ç¨requireå è½½.jsã.jsxã.eså.es6åç¼åçæä»¶ï¼å°±ä¼åç¨babelè¿è¡è½¬ç ã\n\nnpm install --save-dev @babel/register\n\n\nä½¿ç¨æ¶ï¼å¿é¡»é¦åå è½½babel-registerã\n\nrequire("babel-register");\nrequire("./index.js");\n\n\nç¶åï¼å°±ä¸éè¦æå¨å¯¹index.jsè½¬ç äºã\n\néè¦æ³¨æçæ¯ï¼babel-registeråªä¼å¯¹requireå½ä»¤å è½½çæä»¶è½¬ç ï¼èä¸ä¼å¯¹å½åæä»¶è½¬ç ãå¦å¤ï¼ç±äºå®æ¯å®æ¶è½¬ç ï¼æä»¥åªéåå¨å¼åç¯å¢ä½¿ç¨ã\n\né»è®¤å¿½ç¥ node_modules\n\næ³¨æï¼ é»è®¤æåµä¸ï¼ææå¯¹ node_modules ç®å½ä¸çæä»¶ç require è¯·æ±é½å°è¢«å¿½ç¥ãä½ å¯ä»¥éè¿ä»¥ä¸æ¹å¼ä¼ éä¸ä¸ªç¨äºå¹éè¢«å¿½ç¥æä»¶çæ­£åè¡¨è¾¾å¼æ¥ä¿®æ¹é»è®¤è¡ä¸ºï¼\n\nrequire("@babel/register")({\n  // when a file path matches this regex then it is not compiled\n  ignore: [],\n  \n  // it will not be compiled if `true` is returned.\n  function(filepath) {\n      return filepath !== "/path/to/es6-file.js";\n  }\n});\n',charsets:{cjk:!0}},{title:"åååå¾®å",frontmatter:{},regularPath:"/tool/camera.html",relativePath:"tool/camera.md",key:"v-4871443f",path:"/tool/camera.html",headers:[{level:2,title:"åååå¾®å",slug:"åååå¾®å",normalizedTitle:"åååå¾®å",charIndex:2},{level:2,title:"æåä¸è¦ç´ ",slug:"æåä¸è¦ç´ ",normalizedTitle:"æåä¸è¦ç´ ",charIndex:366},{level:3,title:"åå",slug:"åå",normalizedTitle:"åå",charIndex:373},{level:3,title:"å¿«é¨",slug:"å¿«é¨",normalizedTitle:"å¿«é¨",charIndex:66},{level:3,title:"æååº¦",slug:"æååº¦",normalizedTitle:"æååº¦",charIndex:379},{level:2,title:"ç¦è·ï¼ç¦æ®µï¼",slug:"ç¦è·-ç¦æ®µ",normalizedTitle:"ç¦è·ï¼ç¦æ®µï¼",charIndex:1041},{level:2,title:"ç½å¹³è¡¡",slug:"ç½å¹³è¡¡",normalizedTitle:"ç½å¹³è¡¡",charIndex:1593},{level:2,title:"æµå",slug:"æµå",normalizedTitle:"æµå",charIndex:2259},{level:2,title:"äººååæ°",slug:"äººååæ°",normalizedTitle:"äººååæ°",charIndex:2758},{level:2,title:"éåæä¹æ",slug:"éåæä¹æ",normalizedTitle:"éåæä¹æ",charIndex:2986}],lastUpdated:"5/29/2024, 1:12:54 PM",lastUpdatedTimestamp:1716959574e3,headersStr:"åååå¾®å æåä¸è¦ç´  åå å¿«é¨ æååº¦ ç¦è·ï¼ç¦æ®µï¼ ç½å¹³è¡¡ æµå äººååæ° éåæä¹æ",content:"# åååå¾®å\n\nååï¼åéå¤´ååç§ç¸æº\n\n * ç»é¢è¿å¥éå¤´ï¼ç»è¿ååæ¿åå°äºæ£±éæå°ï¼ä»åå­¦åæ¯å¨ä¸­å°±å¯ä»¥çå°æåã\n * æä¸å¿«é¨ï¼ååæ¿æ¬èµ·ï¼ç»é¢è¿å¥ CMOSï¼æä¸ºäºç§çã\n\n\n\n\n\nå¾®åï¼æ åç¸æº\n\n * æ²¡æååæ¿ï¼åçº¿éè¿éå¤´ç´æ¥è½å¨ä¼ æå¨ä¸ï¼åéè¿åçµä¿¡å·çè½¬åï¼æ¾ç¤ºå¨çµå­åæ¯å¨éã\n\n\n\nå¯¹æ¯ï¼\n\n * ééï¼åæ ·åç´ ï¼å¾®åæ´è½»ã\n * å¯¹ç¦ï¼ååçåæ¯åå¯¹ç¦æ¯ä¸¤ä¸ªç³»ç»ï¼å¨ååæ¿çæè¾¹è¿æä¸ä¸ªå°çååæ¿ï¼å°åçº¿åå°è¿å¯¹ç¦æ¨¡åä¸ï¼æ¬è´¨ä¹æ¯ä¸ªä¼ æå¨ï¼ï¼å¯¹ç¦æ¨¡åæå¤å¤§ï¼å¯¹ç¦çèå´å°±æå¤å¤§ãèå¾®åç´æ¥å°å¯¹ç¦éæå° CMOS ä¸ï¼å¼é¡¾äºå¯¹ç¦åæåï¼ä½¿å¾å¯¹ç¦ç¹å¯ä»¥å®å¨éºæ»¡æ´ä¸ª CMOSï¼å¯ä»¥å¨å±å¯¹ç¦è¿½ç¦\n\n\n\n> æ»ç»ï¼å¾®åæ´è½»æ´å°æ´å¼ºï¼åªæ¯å ä¸ºååç¡å¤§çå¤è§ï¼ç¹å¤çæé®ï¼åå¥ä¸ºä¸»çå®ä½çèµ·æ¥æ´ä¸ä¸èå·²ã\n\n\n# æåä¸è¦ç´ \n\nååãå¿«é¨ãæååº¦ï¼ISOï¼\n\n\n# åå\n\nç¨æ¥æ§å¶ç¸æºè¿åéå¤å°çè£ç½®ï¼å®éå¸¸å­å¨éå¤´åï¼ç±ä¸ç»å¯å¼åçå¶çç»æãå¨ç¸æºä¸ç¨ F è¡¨ç¤ºã\n\nF = éå¤´ç¦è· / éåå­ç´å¾\n\næ ¹æ®å¬å¼å°±è§£éäºï¼ä¸ºä»ä¹ ååå¼ F è¶å¤§ï¼å®éååè¶å°ã\n\n * åå F å¼è¶å¤§ï¼ååè¶å°ï¼éåéåå°ï¼ç»é¢åæï¼æ¯æ·±è¶æ·±\n * åå F å¼è¶å°ï¼ååè¶å¤§ï¼éåéåå¤§ï¼ç»é¢åäº®ï¼æ¯æ·±è¶æµ\n\n> æ¯æ·±æçæ¯ç¦ç¹èå´ç¸å¯¹æ¸æ°çè¿ä¸åºé´ãæä»¥ååå¦ä¸ä¸ªéè¦çåºç¨å°±æ¯å®ç°èæ¯æ¨¡ç³ã\n> \n> ååè¶å°ï¼æ¯æ·±è¶æ·±ï¼ç©ä½è¶æ¸æ°ï¼ååè¶å¤§ï¼æ¯æ·±è¶æµï¼æ´å®¹æå®ç°èæ¯æ¨¡ç³çææã\n> \n> ç±»ä¼¼äºè¿è§ç¼çäººï¼ç¯èµ·ç¼çç¸å½äºåååå°ï¼ä¼ççæ´æ¸æ°ã\n\n * å¤§ååæ´éåææäººåï¼å¸æä¸»ä½ä»æä¹±çèæ¯ä¸­çªåº\n * å°ååæ´éåææé£æ¯ï¼å¸æå¨å±æ¸æ°çå¤§åºæ¯\n\nå¨è®¾è®¡ååçæ¶åï¼ç¸é»ä¸¤æ¡£çéåäº®è¦ç¸å·®ä¸åï¼ä¹å°±æ¯é¢ç§¯è¦ç¸å·®ä¸åï¼ç´å¾åç¸å·® 1.2 åï¼æä»¥æ´æ°æ¡£ååä¼åç° 1.4 åçåæ°å³ç³»\n\n> F1.4 => F2.0 => F2.8 => F4.0 => F5.6 => F8.0 ....\n\n\n# å¿«é¨\n\næ§å¶åçº¿è¿å¥ç¸æºæ¶é´é¿ç­çè£ç½®ï¼åä½æ¯ sï¼æ¶é´è¶é¿ï¼æ¥æ¶å°çåçº¿ä¹å°±è¶å¤ã\n\n * é«éå¿«é¨ï¼éç¨äºææè¿å¨ç©ä½ï¼ä¼æ´å æ¸æ°ã\n * æ¢éå¿«é¨ï¼è½æå°è¿å¨è½¨è¿¹ï¼éç¨äºæè½¦çè½¨è¿¹ï¼ç»æ°´é¿æµçæè§\n\n\n# æååº¦\n\nå¯¹åçº¿çææåº¦ï¼éç¨äºå¨åååå¿«é¨è°æ´åä»ç¶å¾æï¼æèé´å¤©çç¯å¢ä¸æé«äº®åº¦ã\n\næ­£å ä¸ºæé«äºåçº¿ææåº¦æä»¥ä¹å¯è½ä¼åºç°åªç¹ã\n\n\n# ç¦è·ï¼ç¦æ®µï¼\n\nç¦è·ï¼å¸ééçåå­¦ä¸­å¿å°ç¦ç¹çè·ç¦»ï¼å½ç¶ç¸æºä¸æ­¢ä¸ä¸ªéçï¼åªéè¦çè§£å³å¯ãç¦è·æ¯ä¸ä¸ªåºå®çå¼ï¼å¦ 16mm ç¦è·ï¼24mmç¦è·ï¼å¦æè¾¾å° 3000mm å°±å±äºæè¿éäº\n\nç¦æ®µï¼ä¸è¬æç¦è·çèå´ï¼æ¯å¦ 16-35mmï¼24-70mm\n\n> ç¦è·è¶ç­ï¼è§è§è¶å¹¿ï¼ç¦è·è¶é¿ï¼è§è§è¶çª\n\n * è¶å¹¿è§ï¼20mmä»¥ä¸\n * å¹¿è§ï¼20mm-40mm\n * æ åç¦æ®µï¼40mm-60mm\n * é¿ç¦ï¼60mmä»¥ä¸\n\n> å¶ä¸­ 40mm-60mm æ åç¦æ®µææ¥è¿äººçç¼çï¼50mmå°ç°çæ¯ä¸ä¸ªæ¯è¾ç«çéå¤´\n\n * æ°å­åç¦ï¼æ¾å¤§è£åªå¾çè¾¾å°ç±»ä¼¼äºå¢å ç¦è·çææã\n * åå­¦åç¦ï¼éè¿åå­¦éå¤´ç»ææ¥å®ç°åç¦ï¼æ¯æ°å­åç¦ä¼æ´æ¸æ°ã\n * é¿ç¦éå¤´ï¼æåç¼©ç©ºé´çææ\n * å¹¿è§éå¤´ï¼ææä¼¸ç©ºé´çææï¼æ¯å¦æ¿äº§ä¸­é´æææ¿é´è§é¢ã\n\n> å¸åºæ¯ååç¦ï¼æ¯çµå½±å¶ä½ä¸­çæµè¡åç´ ï¼éå¤´ä¸­çä¸»ä½å¤§å°ä¸åï¼èèæ¯å¤§å°æ¹åãä¼æä¸ç§èæ¯ä¸æ­æ¶å¨çæè§ã\n\nç¦è·å¹¶ä¸è½æ¹åéè§å³ç³»ï¼è¿å¤§è¿å°ï¼ï¼åªæè·ç¦»æè½ãè¿å°±ç¸å½äºä½ æ¿ä¸ä¸ªé¿ç¦éå¤´æçç»é¢åæ¿ä¸ä¸ªå¹¿è§éå¤´æçç»é¢åç»è¿è£åå¾å°çéè§å³ç³»æ¯ç¸åçï¼åªæ¯é¿ç¦éå¤´çä¼æ´æ¸æ°ä¸äºã\n\næä»¥æ³æ¹åéè§å³ç³»å½¢æç©ºé´åç¼©çæè§å°±éè¦è¿ç¦»è¢«æç©ä½ï¼ç¶åä½¿ç¨é¿ç¦éå¤´ææã\n\n\n# ç½å¹³è¡¡\n\nè²æ¸©ï¼ç¯å¢ä¸­å®¢è§å­å¨çåæºé¢è²ï¼éæ¸©åº¦è¶é«ï¼é¢è²åç° çº¢ï¼1000Kï¼ => ç½ï¼5500Kï¼ => èï¼8000Kï¼\n\n> ä¸ä¸ªç©ä½çæ¸©åº¦è¶é«ï¼åå®è¾å°ççµç£æ³¢æ³¢é¿è¶ç­ï¼å¶ä¸­å¯è§åéï¼çº¢æ©é»ç»¿èéç´«ï¼çº¢ååæ³¢æé¿ï¼ç´«ååæ³¢æç­ï¼æä»¥æè²è°çç©ä½æ¸©åº¦æ¯å·è²è°çç©ä½æ¸©åº¦ä½ã\n\n * æ¥åºæ¥è½ï¼2000K - 3000K\n * æ´å¤©æ­£åï¼5000K - 6000K\n * é´å¤©è²æ¸©ï¼6000K - 7000K\n\nç½å¹³è¡¡ï¼äººä¸ºæ§å¶ç¸æºè®¾ç½®ç¨æ¥å¹³è¡¡ç¯å¢çè²æ¸©ï¼è¿åç°å®ä¸­ç©ä½åæ¬çé¢è²ï¼è®©ç½è²çç©ä½æ¢å¤ç½è²ï¼ï¼å³æç½å¹³è¡¡çKå¼åè²æ¸©çKå¼è°æ´ä¸ºç¸åå³å¯ãKå¼è¶ä½ç»é¢è¶å·ï¼Kå¼è¶é«ç»é¢è¶æï¼ä¸è²æ¸©æ­£å¥½ç¸åã\n\n> è²æ¸© > ç½å¹³è¡¡ï¼ç»é¢åå·\n> \n> è²æ¸© < ç½å¹³è¡¡ï¼ç»é¢åæ\n> \n> è²æ¸© = ç½å¹³è¡¡ï¼ç©ä½æ¬è²\n\n * å¦ææ³ç»é¢æ¸©é¦¨ï¼ç½å¹³è¡¡è®¾ç½®ä¸º 6000K - 7000K\n * å¦ææ³å·æ¸å­¤ç¬ï¼ç½å¹³è¡¡è®¾ç½®ä¸º 3000K - 4000K\n\nå¦æç»é¢åç»¿äºæä¹åï¼å¯ä»¥ç¨ç½å¹³è¡¡åç§»ï¼å¨ç½å¹³è¡¡çåºç¡ä¸è¿è¡é¢å¤çåè²ã\n\nå¯ä»¥å¨ç¸æºçè²å½©åç§»çé¢åç»¿è²çå¯¹è§çº¿æ¹åç§»å¨å³å¯ã\n\n\n\nå¶å®è¿éæä»¬å¯ä»¥ç¨è²å½©åç§»æ¥å¶é æ°å´æï¼Aï¼çº¢è²ï¼Bï¼èè²ï¼Gï¼ç»¿è²ï¼Mï¼æ´çº¢è²\n\né£æ ¼æä¸äºä¸åè±¡éï¼\n\n * çº¢ç»¿è²ï¼æ¸¯é£\n * èç»¿è²ï¼å°æ¸æ°é£æ ¼\n * èç²è²ï¼æ³å¼é£æ ¼\n * çº¢ç²è²ï¼å¤å¤é£æ ¼\n\n> è°æ´ç½å¹³è¡¡çç»ä¸æ åä¸è¬æ¯è®©ä»»å¡è¤è²ä¿æå¨ä¸ä¸ªå¥åº·åå®çèå´ã\n> \n> é»ç§äººçç®è¤å¯ä»¥å¨è¿åç½è²çæåµä¸åå¾å·è²è°è°ä¸äº\n\n\n# æµå\n\næµåï¼ç¸æºæ ¹æ®æ£æµå°çåçº¿æææåµæ¥è®¾ç½®æºååæ°ï¼è®©æä»¬å¯ä»¥æåºææåéçç§çã\n\næä»¬ä¹æä»¥è½çå°äºå½©ææçä¸çæ¯å ä¸ºç©ä½ä¼å¸æ¶ååå°åºä¸å®çåï¼èå½æä»¬å»æé¢è²æ¶ç§çä½¿ç¨ç°åº¦è¡¨ç¤ºäº®åº¦çï¼ä»æå°äº®åå«ä¸ºï¼é»ï¼åå°ç3%ï¼ï¼ç°ï¼åå°ç18%ï¼ï¼ç½ï¼åå°ç90%ï¼ï¼å¶ä¸­ç°è²ä¸ºäº®åº¦æ­£å¸¸çé¨åï¼ä¹å°±æ¯å¸¸è¯´ç18åº¦ç°ï¼è¿å°±æ¯ç¸æºè®¤ä¸ºçæ­£å¸¸æåï¼æä»¥è°èæµåæ¨¡å¼å°±æ¯ä½ æ³æé£ä¸ªå°æ¹æææ­£å¸¸äº®åº¦ã\n\næµåç©ä½å¨ç½éªä¸æ¶ï¼å ä¸ºç½è²æ¬æ¥åå°çå°±å·æå¾é«äº®åº¦å°±å¾äº®ï¼æå¶è°æ´ä¸ºä¸­ç­äº®åº¦é£ä¹ç»é¢æ´ä½ä¼ç¹å«æï¼æ­¤æ¶æä»¬å°±å¯ä»¥å¢å ä¸ç¹æåè¡¥å¿ãåä¹æµåç©ä½å¨é»è²ç©ä½ä¸æ¶ï¼æä»¬å¯ä»¥åä¸ç¹æåè¡¥å¿ãè¿å°±æ¯ä¿ç§°çãç½å é»åã\n\n> åï¼é£ä¹æ¢ç¶å¯ä»¥è°èæåè¡¥å¿è¿è¦æåä¸è¦ç´ å¹²åï¼å¶å®åç¬è°èæåä¹æ¯éè¿è°èæåä¸è¦ç´ æ¥æ¹åç\n\nç¸æºä¸è¬æä»¥ä¸å ç§æµåæ¨¡å¼ï¼\n\n * è¯ä»·æµåï¼æ´ä½ç»é¢åå¹³åå¼ï¼éç¨äºé£æ¯ï¼è¡æ\n * ä¸­å¤®éç¹æµåï¼åªå¯¹ä¸­å¿åºåè¿è¡æµåï¼éç¨äºäººåï¼ç¹å\n * ç¹æµåï¼å¯¹æ´å°çåºåè¿è¡æµåãéç¨äºéåï¼åªå½±ï¼å¤æ¯\n * å±é¨æµåï¼ç±»ä¼¼äºç¹æµåï¼ä½æµååºåç¨å¾®å¤§ä¸äºãéç¨äºéåæçªåºä¸»ä½\n\n\n# äººååæ°\n\n * éåº¦ï¼éåº¦æ§å¶äººç©ç®è¤ç»èï¼éå½éä½ï¼ä¼èµ·å°ä¸å®çç£¨ç®ææãï¼é«éåº¦éåäººææ«è¡ï¼\n * åå·®ï¼æ§å¶é¢é¨çææå¯¹æ¯åº¦ï¼éå½éä½ ï¼å¯ä»¥è®©è¸ä¸çææå³ç³»åå¾æ´ä¸ºæåã\n * é¥±ååº¦ï¼æ§å¶çé¢é¨çè²å½©æµåº¦ï¼éå½éä½ï¼ä¼ä»¤è¤è²çèµ·æ¥ç¥æ¾å·æ¸ãï¼é«é¥±ååº¦éåé£åææï¼\n * è²è°ï¼æ§å¶ç»é¢åè²ï¼è°é«è²æ¡ç»é¢ä¼åç»¿è²åç§»ãéä½è²è°ï¼ç»é¢ä¼åçº¢è²åç§»ã\n\n> éä½é¥±ååº¦ï¼æé«è²è°ï¼æ¥ç³»å°æ¸æ°é£æ ¼\n> \n> æé«é¥±ååº¦ï¼éä½è²è°ï¼å¤å¤æ¸¯é£\n\n\n# éåæä¹æ\n\n1.èº«ä½æ¡ä½å¤ªé³ï¼æèè®©å¤ªé³æ¼åºæ¥ä¸ç¹\n\n2.ä¸è¦ä»¥å¤©ç©ºä¸ºèæ¯ï¼å¯»æ¾äº®åº¦è¾ä½çæ·±è²èæ¯ãæèä½¿ç¨ååæ¿å¯¹è¸é¨è¡¥å\n\n3.ä½¿ç¨ç¹æµåå¯¹äººç©é¢é¨è¿è¡æµåï¼å°±è½æåºé¢é¨æäº®çéåç§ãå¦æå°æµåç¹å¯¹åå¤©ç©ºå°±è½æåºæ°å´æåªå½±ç§çã\n\n4.éæ©æ¥è½åï¼åçº¿æåï¼æ©é»è²è°",normalizedContent:"# åååå¾®å\n\nååï¼åéå¤´ååç§ç¸æº\n\n * ç»é¢è¿å¥éå¤´ï¼ç»è¿ååæ¿åå°äºæ£±éæå°ï¼ä»åå­¦åæ¯å¨ä¸­å°±å¯ä»¥çå°æåã\n * æä¸å¿«é¨ï¼ååæ¿æ¬èµ·ï¼ç»é¢è¿å¥ cmosï¼æä¸ºäºç§çã\n\n\n\n\n\nå¾®åï¼æ åç¸æº\n\n * æ²¡æååæ¿ï¼åçº¿éè¿éå¤´ç´æ¥è½å¨ä¼ æå¨ä¸ï¼åéè¿åçµä¿¡å·çè½¬åï¼æ¾ç¤ºå¨çµå­åæ¯å¨éã\n\n\n\nå¯¹æ¯ï¼\n\n * ééï¼åæ ·åç´ ï¼å¾®åæ´è½»ã\n * å¯¹ç¦ï¼ååçåæ¯åå¯¹ç¦æ¯ä¸¤ä¸ªç³»ç»ï¼å¨ååæ¿çæè¾¹è¿æä¸ä¸ªå°çååæ¿ï¼å°åçº¿åå°è¿å¯¹ç¦æ¨¡åä¸ï¼æ¬è´¨ä¹æ¯ä¸ªä¼ æå¨ï¼ï¼å¯¹ç¦æ¨¡åæå¤å¤§ï¼å¯¹ç¦çèå´å°±æå¤å¤§ãèå¾®åç´æ¥å°å¯¹ç¦éæå° cmos ä¸ï¼å¼é¡¾äºå¯¹ç¦åæåï¼ä½¿å¾å¯¹ç¦ç¹å¯ä»¥å®å¨éºæ»¡æ´ä¸ª cmosï¼å¯ä»¥å¨å±å¯¹ç¦è¿½ç¦\n\n\n\n> æ»ç»ï¼å¾®åæ´è½»æ´å°æ´å¼ºï¼åªæ¯å ä¸ºååç¡å¤§çå¤è§ï¼ç¹å¤çæé®ï¼åå¥ä¸ºä¸»çå®ä½çèµ·æ¥æ´ä¸ä¸èå·²ã\n\n\n# æåä¸è¦ç´ \n\nååãå¿«é¨ãæååº¦ï¼isoï¼\n\n\n# åå\n\nç¨æ¥æ§å¶ç¸æºè¿åéå¤å°çè£ç½®ï¼å®éå¸¸å­å¨éå¤´åï¼ç±ä¸ç»å¯å¼åçå¶çç»æãå¨ç¸æºä¸ç¨ f è¡¨ç¤ºã\n\nf = éå¤´ç¦è· / éåå­ç´å¾\n\næ ¹æ®å¬å¼å°±è§£éäºï¼ä¸ºä»ä¹ ååå¼ f è¶å¤§ï¼å®éååè¶å°ã\n\n * åå f å¼è¶å¤§ï¼ååè¶å°ï¼éåéåå°ï¼ç»é¢åæï¼æ¯æ·±è¶æ·±\n * åå f å¼è¶å°ï¼ååè¶å¤§ï¼éåéåå¤§ï¼ç»é¢åäº®ï¼æ¯æ·±è¶æµ\n\n> æ¯æ·±æçæ¯ç¦ç¹èå´ç¸å¯¹æ¸æ°çè¿ä¸åºé´ãæä»¥ååå¦ä¸ä¸ªéè¦çåºç¨å°±æ¯å®ç°èæ¯æ¨¡ç³ã\n> \n> ååè¶å°ï¼æ¯æ·±è¶æ·±ï¼ç©ä½è¶æ¸æ°ï¼ååè¶å¤§ï¼æ¯æ·±è¶æµï¼æ´å®¹æå®ç°èæ¯æ¨¡ç³çææã\n> \n> ç±»ä¼¼äºè¿è§ç¼çäººï¼ç¯èµ·ç¼çç¸å½äºåååå°ï¼ä¼ççæ´æ¸æ°ã\n\n * å¤§ååæ´éåææäººåï¼å¸æä¸»ä½ä»æä¹±çèæ¯ä¸­çªåº\n * å°ååæ´éåææé£æ¯ï¼å¸æå¨å±æ¸æ°çå¤§åºæ¯\n\nå¨è®¾è®¡ååçæ¶åï¼ç¸é»ä¸¤æ¡£çéåäº®è¦ç¸å·®ä¸åï¼ä¹å°±æ¯é¢ç§¯è¦ç¸å·®ä¸åï¼ç´å¾åç¸å·® 1.2 åï¼æä»¥æ´æ°æ¡£ååä¼åç° 1.4 åçåæ°å³ç³»\n\n> f1.4 => f2.0 => f2.8 => f4.0 => f5.6 => f8.0 ....\n\n\n# å¿«é¨\n\næ§å¶åçº¿è¿å¥ç¸æºæ¶é´é¿ç­çè£ç½®ï¼åä½æ¯ sï¼æ¶é´è¶é¿ï¼æ¥æ¶å°çåçº¿ä¹å°±è¶å¤ã\n\n * é«éå¿«é¨ï¼éç¨äºææè¿å¨ç©ä½ï¼ä¼æ´å æ¸æ°ã\n * æ¢éå¿«é¨ï¼è½æå°è¿å¨è½¨è¿¹ï¼éç¨äºæè½¦çè½¨è¿¹ï¼ç»æ°´é¿æµçæè§\n\n\n# æååº¦\n\nå¯¹åçº¿çææåº¦ï¼éç¨äºå¨åååå¿«é¨è°æ´åä»ç¶å¾æï¼æèé´å¤©çç¯å¢ä¸æé«äº®åº¦ã\n\næ­£å ä¸ºæé«äºåçº¿ææåº¦æä»¥ä¹å¯è½ä¼åºç°åªç¹ã\n\n\n# ç¦è·ï¼ç¦æ®µï¼\n\nç¦è·ï¼å¸ééçåå­¦ä¸­å¿å°ç¦ç¹çè·ç¦»ï¼å½ç¶ç¸æºä¸æ­¢ä¸ä¸ªéçï¼åªéè¦çè§£å³å¯ãç¦è·æ¯ä¸ä¸ªåºå®çå¼ï¼å¦ 16mm ç¦è·ï¼24mmç¦è·ï¼å¦æè¾¾å° 3000mm å°±å±äºæè¿éäº\n\nç¦æ®µï¼ä¸è¬æç¦è·çèå´ï¼æ¯å¦ 16-35mmï¼24-70mm\n\n> ç¦è·è¶ç­ï¼è§è§è¶å¹¿ï¼ç¦è·è¶é¿ï¼è§è§è¶çª\n\n * è¶å¹¿è§ï¼20mmä»¥ä¸\n * å¹¿è§ï¼20mm-40mm\n * æ åç¦æ®µï¼40mm-60mm\n * é¿ç¦ï¼60mmä»¥ä¸\n\n> å¶ä¸­ 40mm-60mm æ åç¦æ®µææ¥è¿äººçç¼çï¼50mmå°ç°çæ¯ä¸ä¸ªæ¯è¾ç«çéå¤´\n\n * æ°å­åç¦ï¼æ¾å¤§è£åªå¾çè¾¾å°ç±»ä¼¼äºå¢å ç¦è·çææã\n * åå­¦åç¦ï¼éè¿åå­¦éå¤´ç»ææ¥å®ç°åç¦ï¼æ¯æ°å­åç¦ä¼æ´æ¸æ°ã\n * é¿ç¦éå¤´ï¼æåç¼©ç©ºé´çææ\n * å¹¿è§éå¤´ï¼ææä¼¸ç©ºé´çææï¼æ¯å¦æ¿äº§ä¸­é´æææ¿é´è§é¢ã\n\n> å¸åºæ¯ååç¦ï¼æ¯çµå½±å¶ä½ä¸­çæµè¡åç´ ï¼éå¤´ä¸­çä¸»ä½å¤§å°ä¸åï¼èèæ¯å¤§å°æ¹åãä¼æä¸ç§èæ¯ä¸æ­æ¶å¨çæè§ã\n\nç¦è·å¹¶ä¸è½æ¹åéè§å³ç³»ï¼è¿å¤§è¿å°ï¼ï¼åªæè·ç¦»æè½ãè¿å°±ç¸å½äºä½ æ¿ä¸ä¸ªé¿ç¦éå¤´æçç»é¢åæ¿ä¸ä¸ªå¹¿è§éå¤´æçç»é¢åç»è¿è£åå¾å°çéè§å³ç³»æ¯ç¸åçï¼åªæ¯é¿ç¦éå¤´çä¼æ´æ¸æ°ä¸äºã\n\næä»¥æ³æ¹åéè§å³ç³»å½¢æç©ºé´åç¼©çæè§å°±éè¦è¿ç¦»è¢«æç©ä½ï¼ç¶åä½¿ç¨é¿ç¦éå¤´ææã\n\n\n# ç½å¹³è¡¡\n\nè²æ¸©ï¼ç¯å¢ä¸­å®¢è§å­å¨çåæºé¢è²ï¼éæ¸©åº¦è¶é«ï¼é¢è²åç° çº¢ï¼1000kï¼ => ç½ï¼5500kï¼ => èï¼8000kï¼\n\n> ä¸ä¸ªç©ä½çæ¸©åº¦è¶é«ï¼åå®è¾å°ççµç£æ³¢æ³¢é¿è¶ç­ï¼å¶ä¸­å¯è§åéï¼çº¢æ©é»ç»¿èéç´«ï¼çº¢ååæ³¢æé¿ï¼ç´«ååæ³¢æç­ï¼æä»¥æè²è°çç©ä½æ¸©åº¦æ¯å·è²è°çç©ä½æ¸©åº¦ä½ã\n\n * æ¥åºæ¥è½ï¼2000k - 3000k\n * æ´å¤©æ­£åï¼5000k - 6000k\n * é´å¤©è²æ¸©ï¼6000k - 7000k\n\nç½å¹³è¡¡ï¼äººä¸ºæ§å¶ç¸æºè®¾ç½®ç¨æ¥å¹³è¡¡ç¯å¢çè²æ¸©ï¼è¿åç°å®ä¸­ç©ä½åæ¬çé¢è²ï¼è®©ç½è²çç©ä½æ¢å¤ç½è²ï¼ï¼å³æç½å¹³è¡¡çkå¼åè²æ¸©çkå¼è°æ´ä¸ºç¸åå³å¯ãkå¼è¶ä½ç»é¢è¶å·ï¼kå¼è¶é«ç»é¢è¶æï¼ä¸è²æ¸©æ­£å¥½ç¸åã\n\n> è²æ¸© > ç½å¹³è¡¡ï¼ç»é¢åå·\n> \n> è²æ¸© < ç½å¹³è¡¡ï¼ç»é¢åæ\n> \n> è²æ¸© = ç½å¹³è¡¡ï¼ç©ä½æ¬è²\n\n * å¦ææ³ç»é¢æ¸©é¦¨ï¼ç½å¹³è¡¡è®¾ç½®ä¸º 6000k - 7000k\n * å¦ææ³å·æ¸å­¤ç¬ï¼ç½å¹³è¡¡è®¾ç½®ä¸º 3000k - 4000k\n\nå¦æç»é¢åç»¿äºæä¹åï¼å¯ä»¥ç¨ç½å¹³è¡¡åç§»ï¼å¨ç½å¹³è¡¡çåºç¡ä¸è¿è¡é¢å¤çåè²ã\n\nå¯ä»¥å¨ç¸æºçè²å½©åç§»çé¢åç»¿è²çå¯¹è§çº¿æ¹åç§»å¨å³å¯ã\n\n\n\nå¶å®è¿éæä»¬å¯ä»¥ç¨è²å½©åç§»æ¥å¶é æ°å´æï¼aï¼çº¢è²ï¼bï¼èè²ï¼gï¼ç»¿è²ï¼mï¼æ´çº¢è²\n\né£æ ¼æä¸äºä¸åè±¡éï¼\n\n * çº¢ç»¿è²ï¼æ¸¯é£\n * èç»¿è²ï¼å°æ¸æ°é£æ ¼\n * èç²è²ï¼æ³å¼é£æ ¼\n * çº¢ç²è²ï¼å¤å¤é£æ ¼\n\n> è°æ´ç½å¹³è¡¡çç»ä¸æ åä¸è¬æ¯è®©ä»»å¡è¤è²ä¿æå¨ä¸ä¸ªå¥åº·åå®çèå´ã\n> \n> é»ç§äººçç®è¤å¯ä»¥å¨è¿åç½è²çæåµä¸åå¾å·è²è°è°ä¸äº\n\n\n# æµå\n\næµåï¼ç¸æºæ ¹æ®æ£æµå°çåçº¿æææåµæ¥è®¾ç½®æºååæ°ï¼è®©æä»¬å¯ä»¥æåºææåéçç§çã\n\næä»¬ä¹æä»¥è½çå°äºå½©ææçä¸çæ¯å ä¸ºç©ä½ä¼å¸æ¶ååå°åºä¸å®çåï¼èå½æä»¬å»æé¢è²æ¶ç§çä½¿ç¨ç°åº¦è¡¨ç¤ºäº®åº¦çï¼ä»æå°äº®åå«ä¸ºï¼é»ï¼åå°ç3%ï¼ï¼ç°ï¼åå°ç18%ï¼ï¼ç½ï¼åå°ç90%ï¼ï¼å¶ä¸­ç°è²ä¸ºäº®åº¦æ­£å¸¸çé¨åï¼ä¹å°±æ¯å¸¸è¯´ç18åº¦ç°ï¼è¿å°±æ¯ç¸æºè®¤ä¸ºçæ­£å¸¸æåï¼æä»¥è°èæµåæ¨¡å¼å°±æ¯ä½ æ³æé£ä¸ªå°æ¹æææ­£å¸¸äº®åº¦ã\n\næµåç©ä½å¨ç½éªä¸æ¶ï¼å ä¸ºç½è²æ¬æ¥åå°çå°±å·æå¾é«äº®åº¦å°±å¾äº®ï¼æå¶è°æ´ä¸ºä¸­ç­äº®åº¦é£ä¹ç»é¢æ´ä½ä¼ç¹å«æï¼æ­¤æ¶æä»¬å°±å¯ä»¥å¢å ä¸ç¹æåè¡¥å¿ãåä¹æµåç©ä½å¨é»è²ç©ä½ä¸æ¶ï¼æä»¬å¯ä»¥åä¸ç¹æåè¡¥å¿ãè¿å°±æ¯ä¿ç§°çãç½å é»åã\n\n> åï¼é£ä¹æ¢ç¶å¯ä»¥è°èæåè¡¥å¿è¿è¦æåä¸è¦ç´ å¹²åï¼å¶å®åç¬è°èæåä¹æ¯éè¿è°èæåä¸è¦ç´ æ¥æ¹åç\n\nç¸æºä¸è¬æä»¥ä¸å ç§æµåæ¨¡å¼ï¼\n\n * è¯ä»·æµåï¼æ´ä½ç»é¢åå¹³åå¼ï¼éç¨äºé£æ¯ï¼è¡æ\n * ä¸­å¤®éç¹æµåï¼åªå¯¹ä¸­å¿åºåè¿è¡æµåï¼éç¨äºäººåï¼ç¹å\n * ç¹æµåï¼å¯¹æ´å°çåºåè¿è¡æµåãéç¨äºéåï¼åªå½±ï¼å¤æ¯\n * å±é¨æµåï¼ç±»ä¼¼äºç¹æµåï¼ä½æµååºåç¨å¾®å¤§ä¸äºãéç¨äºéåæçªåºä¸»ä½\n\n\n# äººååæ°\n\n * éåº¦ï¼éåº¦æ§å¶äººç©ç®è¤ç»èï¼éå½éä½ï¼ä¼èµ·å°ä¸å®çç£¨ç®ææãï¼é«éåº¦éåäººææ«è¡ï¼\n * åå·®ï¼æ§å¶é¢é¨çææå¯¹æ¯åº¦ï¼éå½éä½ ï¼å¯ä»¥è®©è¸ä¸çææå³ç³»åå¾æ´ä¸ºæåã\n * é¥±ååº¦ï¼æ§å¶çé¢é¨çè²å½©æµåº¦ï¼éå½éä½ï¼ä¼ä»¤è¤è²çèµ·æ¥ç¥æ¾å·æ¸ãï¼é«é¥±ååº¦éåé£åææï¼\n * è²è°ï¼æ§å¶ç»é¢åè²ï¼è°é«è²æ¡ç»é¢ä¼åç»¿è²åç§»ãéä½è²è°ï¼ç»é¢ä¼åçº¢è²åç§»ã\n\n> éä½é¥±ååº¦ï¼æé«è²è°ï¼æ¥ç³»å°æ¸æ°é£æ ¼\n> \n> æé«é¥±ååº¦ï¼éä½è²è°ï¼å¤å¤æ¸¯é£\n\n\n# éåæä¹æ\n\n1.èº«ä½æ¡ä½å¤ªé³ï¼æèè®©å¤ªé³æ¼åºæ¥ä¸ç¹\n\n2.ä¸è¦ä»¥å¤©ç©ºä¸ºèæ¯ï¼å¯»æ¾äº®åº¦è¾ä½çæ·±è²èæ¯ãæèä½¿ç¨ååæ¿å¯¹è¸é¨è¡¥å\n\n3.ä½¿ç¨ç¹æµåå¯¹äººç©é¢é¨è¿è¡æµåï¼å°±è½æåºé¢é¨æäº®çéåç§ãå¦æå°æµåç¹å¯¹åå¤©ç©ºå°±è½æåºæ°å´æåªå½±ç§çã\n\n4.éæ©æ¥è½åï¼åçº¿æåï¼æ©é»è²è°",charsets:{cjk:!0}},{title:"chrome å vscode è°è¯å·¥å·",frontmatter:{},regularPath:"/tool/debugger.html",relativePath:"tool/debugger.md",key:"v-56cbc582",path:"/tool/debugger.html",headers:[{level:2,title:"chrome è°è¯ web é¡¹ç®",slug:"chrome-è°è¯-web-é¡¹ç®",normalizedTitle:"chrome è°è¯ web é¡¹ç®",charIndex:230},{level:2,title:"vscode è°è¯ web é¡¹ç®",slug:"vscode-è°è¯-web-é¡¹ç®",normalizedTitle:"vscode è°è¯ web é¡¹ç®",charIndex:681},{level:2,title:"chrome è°è¯ node é¡¹ç®",slug:"chrome-è°è¯-node-é¡¹ç®",normalizedTitle:"chrome è°è¯ node é¡¹ç®",charIndex:1593},{level:2,title:"vscode è°è¯ node é¡¹ç®",slug:"vscode-è°è¯-node-é¡¹ç®",normalizedTitle:"vscode è°è¯ node é¡¹ç®",charIndex:1876},{level:2,title:"æ¡ä»¶æ­ç¹",slug:"æ¡ä»¶æ­ç¹",normalizedTitle:"æ¡ä»¶æ­ç¹",charIndex:2494}],lastUpdated:"1/6/2023, 2:27:26 PM",lastUpdatedTimestamp:1672986446e3,headersStr:"chrome è°è¯ web é¡¹ç® vscode è°è¯ web é¡¹ç® chrome è°è¯ node é¡¹ç® vscode è°è¯ node é¡¹ç® æ¡ä»¶æ­ç¹",content:'# chrome å vscode è°è¯å·¥å·\n\nå¨å¼åè¿ç¨ä¸­ï¼æä»¬æå¸¸ç¨çæ¯ console.log è°è¯ï¼ä½æ¯è¿æ ·ä¼æå¾å¤é®é¢ï¼æ¯å¦console.log æå°åºæ¥çæ°æ®ä¸ä¸å®åç¡®ã\n\nåæ¯å¦è°è¯ node ç¨åºæå°æ¶ï¼ä½ ä¼åç°å¯¹è±¡çå¼ä¹æ¯å¯¹è±¡çæ¶åä¸ä¼å±å¼ï¼èæ¯æå°ä¸ä¸ª [Object] [Array] è¿ç§å­ç¬¦ä¸²ï¼æ´è´å½çæ¯æå°çå¤ªé¿ä¼è¶è¿ç¼å²åºçå¤§å°ï¼ç»ç«¯éä¼æ¾ç¤ºä¸å¨ï¼æä»¥è¿æ¶åå°±éè¦ä½¿ç¨ chrome è°è¯å·¥å·å vscodeè°è¯å·¥å·ã\n\n\n# chrome è°è¯ web é¡¹ç®\n\nå¨è°è¯çæ¶åï¼æä»¬ç´æ¥å¨æ³è¦è°è¯çä»£ç ä½ç½®å ä¸ debugger å³å¯ï¼æ­¤æ¶è¿è¡é¡¹ç®å³å¯å¨ chrome æ§å¶å°çå°ï¼\n\n\n\nå¶ä¸­çº¢æ¡åçè°è¯æé®ï¼ä»å·¦å°å³å«ä¹åå«ä¸ºï¼\n\n * resume/pause script executionï¼æ¢å¤/æåèæ¬æ§è¡ã\n * step over next function callï¼è·¨è¿å½æ°ï¼ä¸éå°å½æ°æ¶ï¼æ§è¡ä¸ä¸æ­¥ãéå°å½æ°æ¶ï¼ä¸è¿å¥å½æ°ã\n * step into next function callï¼è¿å¥å½æ°ï¼ä¸éå°å½æ°æ¶ï¼æ§è¡ä¸ä¸æ­¥ãéå°å½æ°æ¶ï¼è¿å¥å½æ°æ§è¡ä¸ä¸æã\n * step out of current functionï¼è·³åºå½åå½æ°ã\n * stepï¼æ§è¡ä¸ä¸æ­¥ã\n * deactivate breakpointsï¼ä½¿æææ­ç¹ææ¶å¤±æã\n * pause on exceptionsï¼åºç°å¼å¸¸æåã\n\nåå¦éæ©äº pause on exceptions ï¼é£ä¹ç¨åºå¨éå°éè¯¯æ¶ä¹ä¼æåï¼\n\n\n\n\n# vscode è°è¯ web é¡¹ç®\n\næä»¬æ¿ä¸ä¸ª vue é¡¹ç®æ¥æä½ï¼ç¨ vscode æå¼é¡¹ç®ä¹åï¼åæ¢å°å·¦ä¾§çè°è¯åºåå¹¶ç¹å»åå»º launch.json,ç¶åéæ© Web App (Chrome)\n\n\n\n// .vscode/launch.json\n{\n    "version": "0.2.0",\n    "configurations": [\n        {\n            "type": "chrome",\n            "request": "launch",\n            "name": "Launch Chrome against localhost",\n            "url": "http://localhost:8080", // å¡«é¡¹ç®æ¬å°è¿è¡å°å\n            "webRoot": "${workspaceFolder}"\n        }\n    ]\n}\n\n\næ¬å°npm run devè¿è¡é¡¹ç®ä¹åï¼ç¶åå°±å¯ä»¥å¨ä»£ç ä¸æä¸æ­ç¹ï¼ç¶åç¹å» Launch æé®ï¼æè F5ï¼è¿è¡è°è¯ï¼ç¹å»åä¼èªå¨å¯å¨ä¸ä¸ª chrome çªå£æå¼é¡¹ç®ï¼æ­¤æ¶æ­ç¹å°±å·²ç»çæäºã\n\n\n\nåæ ·çï¼æ­¤æ¶ vscode ä¸­æå chrome ç±»ä¼¼çè°è¯æé®ï¼æ Caught Exceptions å¾ä¸ï¼è¿æ ·å¨ä»£ç æ¥éçå°æ¹ï¼å°±ä¼èªå¨ä¸­æ­æ§è¡ã\n\n\n\næ­ç¹çæåï¼vscode ä¸­ä¼æä¸ä¸ªè°è¯æ§å¶å° debug consoleï¼å¨è¿éå¯ä»¥æå°æ³è¦çå°çåéï¼ä¾å¦è¿éææå°äºthisï¼\n\n\n\nå¦ææ³æå°åºæä¸ªåéï¼ä¹å¯ä»¥ä½¿ç¨ log point åè½ï¼å³é®éæ©Add Logpintï¼ç¶åä½¿ç¨{}åè£¹æ³è¦æå°çåéï¼è¿æ ·ä¹ä¼å¨è°è¯æ§å¶å°è¾åºã\n\n\n\n> è¿ç§æ¹å¼çä¼ç¹æ¯æ²¡ææ±¡æä»£ç ï¼å¦æç¨ console.log çè¯è°è¯å®ä¹åè¿ä¸ª console è¿éè¦å æã\n\nå·¦ä¾§è¿å¯ä»¥æ¥çè°ç¨æ call stackï¼ä¾å¦è¿éæ§è¡è·¯çº¿ä¸ºï¼created() => test()\n\n\n\nèä¸ç¹å»æ¯ä¸ªè°ç¨æ ï¼å¨ variables ä¸­è¿å¯ä»¥çå°å½åè°ç¨æ ä¸­çåéï¼\n\n\n\n\n# chrome è°è¯ node é¡¹ç®\n\n// index.js\nconst greeting = \'hello nodejs debugger\';\ndebugger;\nconsole.log(greeting);\n\n\nç»ç«¯ä¸­è¾å¥ï¼node --inspect-brk index.jsï¼ç¶åæå¼ chrome://inspect/#devices\n\n\n\n> --inspect-brk è¡¨ç¤ºè¿è¡è¿ä¸ª js æä»¶çåæ¶ï¼å¨æä»¶çç¬¬ä¸è¡æä¸æ­ç¹ã\n\nç¹å» inspect æ­¤æ¶ chrome ä¼æå¼ä¸ä¸ª nodejs ä¸ç¨çè°è¯çªå£ï¼å¹¶ä¸ä»£ç å¨ç¬¬ä¸è¡ä¸­æ­äºã\n\n\n\n\n# vscode è°è¯ node é¡¹ç®\n\nåæ ·å°ï¼å vscode è°è¯ web é¡¹ç®ä¸æ ·ï¼å¨é¡¹ç®ä¸­åå»º launch.json:\n\n{\n    // Use IntelliSense to learn about possible attributes.\n    // Hover to view descriptions of existing attributes.\n    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n    "version": "0.2.0",\n    "configurations": [\n        {\n            "type": "node",\n            "request": "launch",\n            "name": "Launch Program",\n            "skipFiles": [\n                "<node_internals>/**"\n            ],\n            "program": "${workspaceFolder}/index.js"\n        }\n    ]\n}\n\n\nç¶åå°±å¯ä»¥å¨ vscode ä¸­è¿è¡è°è¯äºï¼åä¸é¢ä»ç»è¿çæ²¡æå·®å«ï¼\n\n\n\n\n# æ¡ä»¶æ­ç¹\n\nå¨æäºæåµä¸ï¼æä»¬ä¸å¸ææä¸çæ¯ä¸ªæ­ç¹é½åæ¥ä½ç¨ï¼èæ¯å¨æ§è¡å°æ­ç¹é£è¡ï¼ä¸æ»¡è¶³æä¸ªæ¡ä»¶åä¸­æ­ä»£ç æ§è¡ãè¿å°±æ¯æ¡ä»¶æ­ç¹ã\n\nfor (let i = 0; i < 10; i++) {\n  console.log(\'i\', i);\n}\n\n\næ¯å¦ä¸é¢çä»£ç ï¼åè®¾æä»¬å¨ç¬¬äºè¡ console.log æäºæ­ç¹ï¼é£ä¹è¿ä¸ªæ­ç¹æ»è®¡ä¼ä¸­æ­åæ¬¡ãè¿å¾å¾æ¯æä»¬ä¸å¸æçå°çï¼å¯è½æä»¬éè¦çä»ä»æ¯å¶ä¸­æä¸æ¬¡å¾ªç¯èéææãè¿æ¶åå¯ä»¥å³é®ç¹å»å¹¶éæ© Add Conditional Breakpointã\n\n\n\nå¯ä»¥çå°è°è¯æ§å¶å°åå æ¬¡ i åæå°åºæ¥ï¼ç´å° i === 5 æ¶æä¸­æ­æ§è¡ã',normalizedContent:'# chrome å vscode è°è¯å·¥å·\n\nå¨å¼åè¿ç¨ä¸­ï¼æä»¬æå¸¸ç¨çæ¯ console.log è°è¯ï¼ä½æ¯è¿æ ·ä¼æå¾å¤é®é¢ï¼æ¯å¦console.log æå°åºæ¥çæ°æ®ä¸ä¸å®åç¡®ã\n\nåæ¯å¦è°è¯ node ç¨åºæå°æ¶ï¼ä½ ä¼åç°å¯¹è±¡çå¼ä¹æ¯å¯¹è±¡çæ¶åä¸ä¼å±å¼ï¼èæ¯æå°ä¸ä¸ª [object] [array] è¿ç§å­ç¬¦ä¸²ï¼æ´è´å½çæ¯æå°çå¤ªé¿ä¼è¶è¿ç¼å²åºçå¤§å°ï¼ç»ç«¯éä¼æ¾ç¤ºä¸å¨ï¼æä»¥è¿æ¶åå°±éè¦ä½¿ç¨ chrome è°è¯å·¥å·å vscodeè°è¯å·¥å·ã\n\n\n# chrome è°è¯ web é¡¹ç®\n\nå¨è°è¯çæ¶åï¼æä»¬ç´æ¥å¨æ³è¦è°è¯çä»£ç ä½ç½®å ä¸ debugger å³å¯ï¼æ­¤æ¶è¿è¡é¡¹ç®å³å¯å¨ chrome æ§å¶å°çå°ï¼\n\n\n\nå¶ä¸­çº¢æ¡åçè°è¯æé®ï¼ä»å·¦å°å³å«ä¹åå«ä¸ºï¼\n\n * resume/pause script executionï¼æ¢å¤/æåèæ¬æ§è¡ã\n * step over next function callï¼è·¨è¿å½æ°ï¼ä¸éå°å½æ°æ¶ï¼æ§è¡ä¸ä¸æ­¥ãéå°å½æ°æ¶ï¼ä¸è¿å¥å½æ°ã\n * step into next function callï¼è¿å¥å½æ°ï¼ä¸éå°å½æ°æ¶ï¼æ§è¡ä¸ä¸æ­¥ãéå°å½æ°æ¶ï¼è¿å¥å½æ°æ§è¡ä¸ä¸æã\n * step out of current functionï¼è·³åºå½åå½æ°ã\n * stepï¼æ§è¡ä¸ä¸æ­¥ã\n * deactivate breakpointsï¼ä½¿æææ­ç¹ææ¶å¤±æã\n * pause on exceptionsï¼åºç°å¼å¸¸æåã\n\nåå¦éæ©äº pause on exceptions ï¼é£ä¹ç¨åºå¨éå°éè¯¯æ¶ä¹ä¼æåï¼\n\n\n\n\n# vscode è°è¯ web é¡¹ç®\n\næä»¬æ¿ä¸ä¸ª vue é¡¹ç®æ¥æä½ï¼ç¨ vscode æå¼é¡¹ç®ä¹åï¼åæ¢å°å·¦ä¾§çè°è¯åºåå¹¶ç¹å»åå»º launch.json,ç¶åéæ© web app (chrome)\n\n\n\n// .vscode/launch.json\n{\n    "version": "0.2.0",\n    "configurations": [\n        {\n            "type": "chrome",\n            "request": "launch",\n            "name": "launch chrome against localhost",\n            "url": "http://localhost:8080", // å¡«é¡¹ç®æ¬å°è¿è¡å°å\n            "webroot": "${workspacefolder}"\n        }\n    ]\n}\n\n\næ¬å°npm run devè¿è¡é¡¹ç®ä¹åï¼ç¶åå°±å¯ä»¥å¨ä»£ç ä¸æä¸æ­ç¹ï¼ç¶åç¹å» launch æé®ï¼æè f5ï¼è¿è¡è°è¯ï¼ç¹å»åä¼èªå¨å¯å¨ä¸ä¸ª chrome çªå£æå¼é¡¹ç®ï¼æ­¤æ¶æ­ç¹å°±å·²ç»çæäºã\n\n\n\nåæ ·çï¼æ­¤æ¶ vscode ä¸­æå chrome ç±»ä¼¼çè°è¯æé®ï¼æ caught exceptions å¾ä¸ï¼è¿æ ·å¨ä»£ç æ¥éçå°æ¹ï¼å°±ä¼èªå¨ä¸­æ­æ§è¡ã\n\n\n\næ­ç¹çæåï¼vscode ä¸­ä¼æä¸ä¸ªè°è¯æ§å¶å° debug consoleï¼å¨è¿éå¯ä»¥æå°æ³è¦çå°çåéï¼ä¾å¦è¿éææå°äºthisï¼\n\n\n\nå¦ææ³æå°åºæä¸ªåéï¼ä¹å¯ä»¥ä½¿ç¨ log point åè½ï¼å³é®éæ©add logpintï¼ç¶åä½¿ç¨{}åè£¹æ³è¦æå°çåéï¼è¿æ ·ä¹ä¼å¨è°è¯æ§å¶å°è¾åºã\n\n\n\n> è¿ç§æ¹å¼çä¼ç¹æ¯æ²¡ææ±¡æä»£ç ï¼å¦æç¨ console.log çè¯è°è¯å®ä¹åè¿ä¸ª console è¿éè¦å æã\n\nå·¦ä¾§è¿å¯ä»¥æ¥çè°ç¨æ call stackï¼ä¾å¦è¿éæ§è¡è·¯çº¿ä¸ºï¼created() => test()\n\n\n\nèä¸ç¹å»æ¯ä¸ªè°ç¨æ ï¼å¨ variables ä¸­è¿å¯ä»¥çå°å½åè°ç¨æ ä¸­çåéï¼\n\n\n\n\n# chrome è°è¯ node é¡¹ç®\n\n// index.js\nconst greeting = \'hello nodejs debugger\';\ndebugger;\nconsole.log(greeting);\n\n\nç»ç«¯ä¸­è¾å¥ï¼node --inspect-brk index.jsï¼ç¶åæå¼ chrome://inspect/#devices\n\n\n\n> --inspect-brk è¡¨ç¤ºè¿è¡è¿ä¸ª js æä»¶çåæ¶ï¼å¨æä»¶çç¬¬ä¸è¡æä¸æ­ç¹ã\n\nç¹å» inspect æ­¤æ¶ chrome ä¼æå¼ä¸ä¸ª nodejs ä¸ç¨çè°è¯çªå£ï¼å¹¶ä¸ä»£ç å¨ç¬¬ä¸è¡ä¸­æ­äºã\n\n\n\n\n# vscode è°è¯ node é¡¹ç®\n\nåæ ·å°ï¼å vscode è°è¯ web é¡¹ç®ä¸æ ·ï¼å¨é¡¹ç®ä¸­åå»º launch.json:\n\n{\n    // use intellisense to learn about possible attributes.\n    // hover to view descriptions of existing attributes.\n    // for more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n    "version": "0.2.0",\n    "configurations": [\n        {\n            "type": "node",\n            "request": "launch",\n            "name": "launch program",\n            "skipfiles": [\n                "<node_internals>/**"\n            ],\n            "program": "${workspacefolder}/index.js"\n        }\n    ]\n}\n\n\nç¶åå°±å¯ä»¥å¨ vscode ä¸­è¿è¡è°è¯äºï¼åä¸é¢ä»ç»è¿çæ²¡æå·®å«ï¼\n\n\n\n\n# æ¡ä»¶æ­ç¹\n\nå¨æäºæåµä¸ï¼æä»¬ä¸å¸ææä¸çæ¯ä¸ªæ­ç¹é½åæ¥ä½ç¨ï¼èæ¯å¨æ§è¡å°æ­ç¹é£è¡ï¼ä¸æ»¡è¶³æä¸ªæ¡ä»¶åä¸­æ­ä»£ç æ§è¡ãè¿å°±æ¯æ¡ä»¶æ­ç¹ã\n\nfor (let i = 0; i < 10; i++) {\n  console.log(\'i\', i);\n}\n\n\næ¯å¦ä¸é¢çä»£ç ï¼åè®¾æä»¬å¨ç¬¬äºè¡ console.log æäºæ­ç¹ï¼é£ä¹è¿ä¸ªæ­ç¹æ»è®¡ä¼ä¸­æ­åæ¬¡ãè¿å¾å¾æ¯æä»¬ä¸å¸æçå°çï¼å¯è½æä»¬éè¦çä»ä»æ¯å¶ä¸­æä¸æ¬¡å¾ªç¯èéææãè¿æ¶åå¯ä»¥å³é®ç¹å»å¹¶éæ© add conditional breakpointã\n\n\n\nå¯ä»¥çå°è°è¯æ§å¶å°åå æ¬¡ i åæå°åºæ¥ï¼ç´å° i === 5 æ¶æä¸­æ­æ§è¡ã',charsets:{cjk:!0}},{title:"htmlparser2",frontmatter:{},regularPath:"/tool/htmlparser2.html",relativePath:"tool/htmlparser2.md",key:"v-b22ada6e",path:"/tool/htmlparser2.html",lastUpdated:"3/3/2022, 10:50:26 AM",lastUpdatedTimestamp:1646275826e3,headersStr:null,content:'# htmlparser2\n\nhtmlparser2 æ¯ä¸ä¸ª HTML/XML è§£æå¨ã\n\nconst htmlparser2 = require("htmlparser2");\nconst parser = new htmlparser2.Parser({\n    // å½éå°æ ç­¾æ¶è°ç¨\n    onopentag(name, attributes) {\n        if (name === "script" && attributes.type === "text/javascript") {\n            console.log("JS! Hooray!");\n        }\n    },\n    // å½éå°ææ¬æ¶è°ç¨\n    ontext(text) {\n        console.log("--\x3e", text);\n    },\n    // å½æ ç­¾ç»ææ¶è°ç¨\n    onclosetag(tagname) {\n        if (tagname === "script") {\n            console.log("That\'s it?!");\n        }\n    },\n});\nparser.write(\n    "Xyz <script type=\'text/javascript\'>const foo = \'<<bar>>\';</ script>"\n);\nparser.end();\n\n/**\n--\x3e Xyz\nJS! Hooray!\n--\x3e const foo = \'<<bar>>\';\nThat\'s it?!\n*/\n\n\nè§£ææ DOM tree\n\nconst htmlparser2 = require("htmlparser2");\n\nconst htmlString = \n`<!DOCTYPE html>\n<html>\n\n<body>\n    <h1>My First Heading</h1>\n    <p>My first paragraph.</p>\n</body>\n\n</html>\n`\n\nconst dom = htmlparser2.parseDocument(htmlString);\nconsole.log(dom)\n\n\n\n\nè§£æç»æä¹å¯ä»¥å° astexplorer.net ä¸­æ¥çã',normalizedContent:'# htmlparser2\n\nhtmlparser2 æ¯ä¸ä¸ª html/xml è§£æå¨ã\n\nconst htmlparser2 = require("htmlparser2");\nconst parser = new htmlparser2.parser({\n    // å½éå°æ ç­¾æ¶è°ç¨\n    onopentag(name, attributes) {\n        if (name === "script" && attributes.type === "text/javascript") {\n            console.log("js! hooray!");\n        }\n    },\n    // å½éå°ææ¬æ¶è°ç¨\n    ontext(text) {\n        console.log("--\x3e", text);\n    },\n    // å½æ ç­¾ç»ææ¶è°ç¨\n    onclosetag(tagname) {\n        if (tagname === "script") {\n            console.log("that\'s it?!");\n        }\n    },\n});\nparser.write(\n    "xyz <script type=\'text/javascript\'>const foo = \'<<bar>>\';</ script>"\n);\nparser.end();\n\n/**\n--\x3e xyz\njs! hooray!\n--\x3e const foo = \'<<bar>>\';\nthat\'s it?!\n*/\n\n\nè§£ææ dom tree\n\nconst htmlparser2 = require("htmlparser2");\n\nconst htmlstring = \n`<!doctype html>\n<html>\n\n<body>\n    <h1>my first heading</h1>\n    <p>my first paragraph.</p>\n</body>\n\n</html>\n`\n\nconst dom = htmlparser2.parsedocument(htmlstring);\nconsole.log(dom)\n\n\n\n\nè§£æç»æä¹å¯ä»¥å° astexplorer.net ä¸­æ¥çã',charsets:{cjk:!0}},{title:"npmãcnpmãnvmãnrmãyarnãtyarnãnpxãpnpm",frontmatter:{},regularPath:"/tool/npm.html",relativePath:"tool/npm.md",key:"v-52235c03",path:"/tool/npm.html",headers:[{level:2,title:"npm && cnpm",slug:"npm-cnpm",normalizedTitle:"npm &amp;&amp; cnpm",charIndex:null},{level:2,title:"nrm",slug:"nrm",normalizedTitle:"nrm",charIndex:15},{level:2,title:"nvm",slug:"nvm",normalizedTitle:"nvm",charIndex:11},{level:2,title:"yarn && tyarn",slug:"yarn-tyarn",normalizedTitle:"yarn &amp;&amp; tyarn",charIndex:null},{level:2,title:"npx",slug:"npx",normalizedTitle:"npx",charIndex:30},{level:2,title:"pnpm",slug:"pnpm",normalizedTitle:"pnpm",charIndex:34}],lastUpdated:"7/7/2022, 6:20:47 PM",lastUpdatedTimestamp:1657189247e3,headersStr:"npm && cnpm nrm nvm yarn && tyarn npx pnpm",content:'# npmãcnpmãnvmãnrmãyarnãtyarnãnpxãpnpm\n\nè¿ä¹å¤å·¥å·è¿åä¸æ¸æ¥ï¼çè¿ç¯æç« å°±å¤äºã\n\n\n# npm && cnpm\n\nä¸è½½å® node å°±èªå¨æäº npmï¼ä½æ¯ npm æºè®¿é®å¯è½æ¯è¾æ¢ï¼è¿å°±æäº cnpm\n\nnpm install -g cnpm --registry=https://registry.npm.taobao.org\n\n\nè¿æ ·å°±å¨å±åå»ºäºå½ä»¤ cnpmï¼ä½¿ç¨æ·å®éåæºï¼å½ç¶ä¹å¯ä»¥ç´æ¥è¿æ ·ä½¿ç¨ï¼\n\nnpm install xxx --registry=https://registry.npm.taobao.org\n\n\n\n# nrm\n\nnpmåæå¾å¤çéåæºï¼æçæºæçæ¶åè®¿é®å¤±è´¥ï¼æçæºå¯è½æ²¡æææ°çå,æçè¦ä½¿ç¨å¬å¸åé¨çæºï¼æä»¥ææ¶éè¦åæ¢npmçæºï¼nrmåå°±æ¯è§£å³å¿«éåæ¢é®é¢çã\n\nnrm ls # ååºå¯éæ©çæº\nnrm use <registry> # åæ¢ä½¿ç¨çæº\nnrm add <registry> <url> # æ·»å ä¸ä¸ªæº\nnrm del <registry> # å é¤ä¸ä¸ªæº\nnrm test npm # æµè¯æºéåº¦\n\n\nå¶å®è¿ç§æ¹å¼ç¸å½äº\n\nnpm install xxx --registry=<url>\n\n\n\n# nvm\n\nnvm æ¯ç®¡ç node çæ¬çå·¥å·ï¼ç±»ä¼¼çè¿æ n\n\n\n# yarn && tyarn\n\nyarn æ¯ FaceBook å¼æºçä¸ä¸ªæ°çåç®¡çå¨ï¼ ånpmçä½ç¨æ¯ä¸æ ·çãå®ånpmæå¤§åºå«æ¯ï¼yarnæ¯å¹¶è¡ä¸è½½çï¼æä»¥ä¸è½½éåº¦å¾å¿«\n\ntyarn å³æ¯å¯¹åºçæ·å®éåæº\n\nnpm i yarn tyarn -g\n\n\n\n# npx\n\nnpx ä¼èªå¨æ¥æ¾å½åç®å½ä¾èµåä¸­çå¯æ§è¡æä»¶ï¼å¦ææ¾ä¸å°ï¼å°±ä¼å» PATH éæ¾ãå¦æä¾ç¶æ¾ä¸å°ï¼å°±ä¼å¸®ä½ å®è£ã\n\nnpx create-react-app my-app\n# è¿æ¡å½ä»¤ä¼ä¸´æ¶å®è£ create-react-app åï¼å½ä»¤å®æåä¼å æã\n\n\n * npx --no-installï¼ä¸å°è¯ä¸è½½ï¼è¿æ¶ npx çä½ç¨å°±æ¯é¦åä¼å¨å½åç®å½å¯»æ¾å½ä»¤ï¼ä¸å­å¨åå»å¨å±ä¸­å»æ¾ã\n * npx --ignore-existingï¼å¿é¡»ä¸è½½ï¼æ è®ºæ¬å°æ¯å¦å­å¨é½å»ä¸è½½ã\n\n\n# pnpm\n\nperformant npm ï¼æå³"é«æ§è½ç npm"ãpnpmç±npm/yarnè¡çèæ¥ï¼è§£å³äºnpm/yarnåé¨æ½å¨çbugï¼æå¤§çä¼åäºæ§è½ï¼æ©å±äºä½¿ç¨åºæ¯ãè¢«èªä¸ºâæåè¿çåç®¡çå·¥å·âï¼pnpmæ¯ä¼ ç»æ¹æ¡(yarn, npm)å®è£åçéåº¦å¿«äºä¸¤åï¼\n\nnpm install -g pnpm\npnpm add package\npnpm remove package\n\n\n> å½ä½¿ç¨npmæèyarnæ¶ï¼å¦æä½ æ100ä¸ªé¡¹ç®ä½¿ç¨äºæä¸ªä¾èµï¼å°±ä¼æ100ä»½ä¾èµçå¯æ¬ä¿å­å¨ç£çä¸ï¼å¯¹äºpnpmï¼ä¾èµé¡¹å°å­å¨å¨ä¸ä¸ªåå®¹å¯å¯»åçä»åºä¸­ã\n> \n> æææä»¶é½ä¼å¨å­å¨å¨ç¡¬çä¸çåä¸ä¸ªä½ç½®ï¼å½å¤ä¸ªåè¢«å®è£æ¶ï¼æææä»¶é½ä¼ä»åä¸ä½ç½®åå»ºç¡¬é¾æ¥ï¼ä¸ä¼å ç¨é¢å¤çç£çç©ºé´ï¼åè®¸è·¨é¡¹ç®å±äº«åä¸çæ¬ä¾èµã\n\nä¸ºä»ä¹æ¨èä½¿ç¨pnpm',normalizedContent:'# npmãcnpmãnvmãnrmãyarnãtyarnãnpxãpnpm\n\nè¿ä¹å¤å·¥å·è¿åä¸æ¸æ¥ï¼çè¿ç¯æç« å°±å¤äºã\n\n\n# npm && cnpm\n\nä¸è½½å® node å°±èªå¨æäº npmï¼ä½æ¯ npm æºè®¿é®å¯è½æ¯è¾æ¢ï¼è¿å°±æäº cnpm\n\nnpm install -g cnpm --registry=https://registry.npm.taobao.org\n\n\nè¿æ ·å°±å¨å±åå»ºäºå½ä»¤ cnpmï¼ä½¿ç¨æ·å®éåæºï¼å½ç¶ä¹å¯ä»¥ç´æ¥è¿æ ·ä½¿ç¨ï¼\n\nnpm install xxx --registry=https://registry.npm.taobao.org\n\n\n\n# nrm\n\nnpmåæå¾å¤çéåæºï¼æçæºæçæ¶åè®¿é®å¤±è´¥ï¼æçæºå¯è½æ²¡æææ°çå,æçè¦ä½¿ç¨å¬å¸åé¨çæºï¼æä»¥ææ¶éè¦åæ¢npmçæºï¼nrmåå°±æ¯è§£å³å¿«éåæ¢é®é¢çã\n\nnrm ls # ååºå¯éæ©çæº\nnrm use <registry> # åæ¢ä½¿ç¨çæº\nnrm add <registry> <url> # æ·»å ä¸ä¸ªæº\nnrm del <registry> # å é¤ä¸ä¸ªæº\nnrm test npm # æµè¯æºéåº¦\n\n\nå¶å®è¿ç§æ¹å¼ç¸å½äº\n\nnpm install xxx --registry=<url>\n\n\n\n# nvm\n\nnvm æ¯ç®¡ç node çæ¬çå·¥å·ï¼ç±»ä¼¼çè¿æ n\n\n\n# yarn && tyarn\n\nyarn æ¯ facebook å¼æºçä¸ä¸ªæ°çåç®¡çå¨ï¼ ånpmçä½ç¨æ¯ä¸æ ·çãå®ånpmæå¤§åºå«æ¯ï¼yarnæ¯å¹¶è¡ä¸è½½çï¼æä»¥ä¸è½½éåº¦å¾å¿«\n\ntyarn å³æ¯å¯¹åºçæ·å®éåæº\n\nnpm i yarn tyarn -g\n\n\n\n# npx\n\nnpx ä¼èªå¨æ¥æ¾å½åç®å½ä¾èµåä¸­çå¯æ§è¡æä»¶ï¼å¦ææ¾ä¸å°ï¼å°±ä¼å» path éæ¾ãå¦æä¾ç¶æ¾ä¸å°ï¼å°±ä¼å¸®ä½ å®è£ã\n\nnpx create-react-app my-app\n# è¿æ¡å½ä»¤ä¼ä¸´æ¶å®è£ create-react-app åï¼å½ä»¤å®æåä¼å æã\n\n\n * npx --no-installï¼ä¸å°è¯ä¸è½½ï¼è¿æ¶ npx çä½ç¨å°±æ¯é¦åä¼å¨å½åç®å½å¯»æ¾å½ä»¤ï¼ä¸å­å¨åå»å¨å±ä¸­å»æ¾ã\n * npx --ignore-existingï¼å¿é¡»ä¸è½½ï¼æ è®ºæ¬å°æ¯å¦å­å¨é½å»ä¸è½½ã\n\n\n# pnpm\n\nperformant npm ï¼æå³"é«æ§è½ç npm"ãpnpmç±npm/yarnè¡çèæ¥ï¼è§£å³äºnpm/yarnåé¨æ½å¨çbugï¼æå¤§çä¼åäºæ§è½ï¼æ©å±äºä½¿ç¨åºæ¯ãè¢«èªä¸ºâæåè¿çåç®¡çå·¥å·âï¼pnpmæ¯ä¼ ç»æ¹æ¡(yarn, npm)å®è£åçéåº¦å¿«äºä¸¤åï¼\n\nnpm install -g pnpm\npnpm add package\npnpm remove package\n\n\n> å½ä½¿ç¨npmæèyarnæ¶ï¼å¦æä½ æ100ä¸ªé¡¹ç®ä½¿ç¨äºæä¸ªä¾èµï¼å°±ä¼æ100ä»½ä¾èµçå¯æ¬ä¿å­å¨ç£çä¸ï¼å¯¹äºpnpmï¼ä¾èµé¡¹å°å­å¨å¨ä¸ä¸ªåå®¹å¯å¯»åçä»åºä¸­ã\n> \n> æææä»¶é½ä¼å¨å­å¨å¨ç¡¬çä¸çåä¸ä¸ªä½ç½®ï¼å½å¤ä¸ªåè¢«å®è£æ¶ï¼æææä»¶é½ä¼ä»åä¸ä½ç½®åå»ºç¡¬é¾æ¥ï¼ä¸ä¼å ç¨é¢å¤çç£çç©ºé´ï¼åè®¸è·¨é¡¹ç®å±äº«åä¸çæ¬ä¾èµã\n\nä¸ºä»ä¹æ¨èä½¿ç¨pnpm',charsets:{cjk:!0}},{title:"postcss",frontmatter:{},regularPath:"/tool/postcss.html",relativePath:"tool/postcss.md",key:"v-979acdda",path:"/tool/postcss.html",headers:[{level:2,title:"ä¸é¢å¤çå¨çåºå«",slug:"ä¸é¢å¤çå¨çåºå«",normalizedTitle:"ä¸é¢å¤çå¨çåºå«",charIndex:272},{level:2,title:"æ¥å¥ webpack",slug:"æ¥å¥-webpack",normalizedTitle:"æ¥å¥ webpack",charIndex:527},{level:2,title:"å¸¸ç¨æä»¶",slug:"å¸¸ç¨æä»¶",normalizedTitle:"å¸¸ç¨æä»¶",charIndex:861},{level:2,title:"API ä½¿ç¨",slug:"api-ä½¿ç¨",normalizedTitle:"api ä½¿ç¨",charIndex:1014},{level:3,title:"Result.root",slug:"result-root",normalizedTitle:"result.root",charIndex:1319},{level:3,title:"LazyResult",slug:"lazyresult",normalizedTitle:"lazyresult",charIndex:1371}],lastUpdated:"4/6/2023, 7:10:18 PM",lastUpdatedTimestamp:1680779418e3,headersStr:"ä¸é¢å¤çå¨çåºå« æ¥å¥ webpack å¸¸ç¨æä»¶ API ä½¿ç¨ Result.root LazyResult",content:"# postcss\n\n 1. å®æ¹ææ¡£\n\n 2. githubå°å\n\n 3. PostCSS å¥é¨æç¨\n\n 4. Postcssäºè§£ä¸ä¸\n\nPostCSS æ¯ä¸ä¸ªç¨ JavaScript å·¥å·åæä»¶è½¬æ¢ CSS ä»£ç çå·¥å·ï¼å¸¸è§çåè½å¦ï¼\n\n * ä½¿ç¨ä¸ä¸ä»£cssè¯­æ³\n * èªå¨è¡¥å¨æµè§å¨åç¼\n * èªå¨æpxä»£ä¸ºè½¬æ¢ærem\n * css ä»£ç åç¼©ç­ç­\n\nPostCSS å¯ä»¥ç§°ä¸ºä¸ä¸ªå¹³å°ï¼æä¾äºä¸ä¸ªè§£æå¨ï¼è½å¤å° CSS è§£ææ ASTï¼è¿éè¦éåæä»¶ä½¿ç¨ã\n\nå¤§å¤æ°æå»ºå·¥å·åç½®äº PostCSSï¼ä¾å¦ viteï¼å¯ä»¥ç´æ¥éç½®\n\n\n# ä¸é¢å¤çå¨çåºå«\n\n * Less / Sass / Stylusï¼è¿ç±»å·¥å·é½å±äº CSS é¢å¤çå·¥å·ãé¢å¤çæçæ¯éè¿ç¹æ®çè§åï¼å°é css ææ¬æ ¼å¼æç»çæ css æä»¶ã\n * postcss åæ¯å¯¹ CSS è¿è¡å¤çï¼æç»çæçè¿æ¯ CSSã\n * ä»å¶åå­ postcss å¯ä»¥çåºæ©ææ¯è¢«å½ååå¤çå¨çãä¹å°±æ¯å¤çless/sass ç¼è¯åç cssãæå¸¸ç¨çæä»¶å°±æ¯ autoprefixerï¼æ ¹æ®æµè§å¨çæ¬æ·»å å¼å®¹åç¼ãï¼postï¼å¨...ä¹åçï¼ä¾å¦ååºéå postorderï¼\n\n\n# æ¥å¥ webpack\n\nç®åä¸è¬è¿æ¯ postcss å less/sass ç»åä½¿ç¨ï¼å¨ webpack éç½®ä¸­ï¼postcss-loader è¦åå¨ sass-loader/less-loader åé¢ã\n\nmodule.exports = {\n    module: {\n        rules: [\n            {\n                test: /\\.(css|less)$/i,\n                use: ['style-loader', 'css-loader', 'postcss-loader', 'less-loader'],\n            },\n        ]\n    }\n}\n\n\n\n# å¸¸ç¨æä»¶\n\n * Autoprefixerï¼åç¼è¡¥å¨\n * postcss-pxtoremï¼æ px è½¬æ¢æ rem\n\n:fullscreen {\n}\n\n/* å¤çå */\n:-webkit-full-screen {\n}\n:-ms-fullscreen {\n}\n:fullscreen {\n}\n\n\n\n# API ä½¿ç¨\n\nPostcss é¤äºæä»¶çä½¿ç¨æ¹å¼è¿æä¾äº apiï¼\n\nlet postcss = require('postcss');\nlet autoprefixer = require('autoprefixer');\n\nlet css = `:fullscreen {}`\n\npostcss([autoprefixer]).process(css).then(result => {\n  console.log(result.css)\n})\n\n// è¾åº\n// :-webkit-full-screen {}\n// :-ms-fullscreen {}\n// :fullscreen {}\n\n\n\n# Result.root\n\né¤äº Result.css è¿æ Result.root ç­å±æ§\n\n\n\n\n# LazyResult\n\nPost CSS è½¬æ¢ç»æç Promise ä»£ç\n\nconst lazy = postcss([autoprefixer]).process(css)\n\n\n * LazyResult.root\n\néè¿åæ­¥æä»¶å¤çè¾å¥ CSS å¹¶è¿å Result.rootï¼ä¹å°±æ¯è¯´ä¸¤ä¸ª API è¿åç»æç¸åã\n\næ³¨æï¼æ­¤å±æ§ä»éç¨äºåæ­¥æä»¶ã å¦æå¤çå¨åå«ä»»ä½å¼æ­¥æä»¶ï¼å®å°å¼åéè¯¯ã\n\nlet postcss = require('postcss');\nconst autoprefixer = require('autoprefixer');\n\nlet css = `:fullscreen {}`\n\nconst lazy = postcss([autoprefixer]).process(css)\nconsole.log(lazy.root)\n",normalizedContent:"# postcss\n\n 1. å®æ¹ææ¡£\n\n 2. githubå°å\n\n 3. postcss å¥é¨æç¨\n\n 4. postcssäºè§£ä¸ä¸\n\npostcss æ¯ä¸ä¸ªç¨ javascript å·¥å·åæä»¶è½¬æ¢ css ä»£ç çå·¥å·ï¼å¸¸è§çåè½å¦ï¼\n\n * ä½¿ç¨ä¸ä¸ä»£cssè¯­æ³\n * èªå¨è¡¥å¨æµè§å¨åç¼\n * èªå¨æpxä»£ä¸ºè½¬æ¢ærem\n * css ä»£ç åç¼©ç­ç­\n\npostcss å¯ä»¥ç§°ä¸ºä¸ä¸ªå¹³å°ï¼æä¾äºä¸ä¸ªè§£æå¨ï¼è½å¤å° css è§£ææ astï¼è¿éè¦éåæä»¶ä½¿ç¨ã\n\nå¤§å¤æ°æå»ºå·¥å·åç½®äº postcssï¼ä¾å¦ viteï¼å¯ä»¥ç´æ¥éç½®\n\n\n# ä¸é¢å¤çå¨çåºå«\n\n * less / sass / stylusï¼è¿ç±»å·¥å·é½å±äº css é¢å¤çå·¥å·ãé¢å¤çæçæ¯éè¿ç¹æ®çè§åï¼å°é css ææ¬æ ¼å¼æç»çæ css æä»¶ã\n * postcss åæ¯å¯¹ css è¿è¡å¤çï¼æç»çæçè¿æ¯ cssã\n * ä»å¶åå­ postcss å¯ä»¥çåºæ©ææ¯è¢«å½ååå¤çå¨çãä¹å°±æ¯å¤çless/sass ç¼è¯åç cssãæå¸¸ç¨çæä»¶å°±æ¯ autoprefixerï¼æ ¹æ®æµè§å¨çæ¬æ·»å å¼å®¹åç¼ãï¼postï¼å¨...ä¹åçï¼ä¾å¦ååºéå postorderï¼\n\n\n# æ¥å¥ webpack\n\nç®åä¸è¬è¿æ¯ postcss å less/sass ç»åä½¿ç¨ï¼å¨ webpack éç½®ä¸­ï¼postcss-loader è¦åå¨ sass-loader/less-loader åé¢ã\n\nmodule.exports = {\n    module: {\n        rules: [\n            {\n                test: /\\.(css|less)$/i,\n                use: ['style-loader', 'css-loader', 'postcss-loader', 'less-loader'],\n            },\n        ]\n    }\n}\n\n\n\n# å¸¸ç¨æä»¶\n\n * autoprefixerï¼åç¼è¡¥å¨\n * postcss-pxtoremï¼æ px è½¬æ¢æ rem\n\n:fullscreen {\n}\n\n/* å¤çå */\n:-webkit-full-screen {\n}\n:-ms-fullscreen {\n}\n:fullscreen {\n}\n\n\n\n# api ä½¿ç¨\n\npostcss é¤äºæä»¶çä½¿ç¨æ¹å¼è¿æä¾äº apiï¼\n\nlet postcss = require('postcss');\nlet autoprefixer = require('autoprefixer');\n\nlet css = `:fullscreen {}`\n\npostcss([autoprefixer]).process(css).then(result => {\n  console.log(result.css)\n})\n\n// è¾åº\n// :-webkit-full-screen {}\n// :-ms-fullscreen {}\n// :fullscreen {}\n\n\n\n# result.root\n\né¤äº result.css è¿æ result.root ç­å±æ§\n\n\n\n\n# lazyresult\n\npost css è½¬æ¢ç»æç promise ä»£ç\n\nconst lazy = postcss([autoprefixer]).process(css)\n\n\n * lazyresult.root\n\néè¿åæ­¥æä»¶å¤çè¾å¥ css å¹¶è¿å result.rootï¼ä¹å°±æ¯è¯´ä¸¤ä¸ª api è¿åç»æç¸åã\n\næ³¨æï¼æ­¤å±æ§ä»éç¨äºåæ­¥æä»¶ã å¦æå¤çå¨åå«ä»»ä½å¼æ­¥æä»¶ï¼å®å°å¼åéè¯¯ã\n\nlet postcss = require('postcss');\nconst autoprefixer = require('autoprefixer');\n\nlet css = `:fullscreen {}`\n\nconst lazy = postcss([autoprefixer]).process(css)\nconsole.log(lazy.root)\n",charsets:{cjk:!0}},{title:"yaml",frontmatter:{},regularPath:"/tool/yaml.html",relativePath:"tool/yaml.md",key:"v-5e39087f",path:"/tool/yaml.html",lastUpdated:"5/19/2022, 8:46:54 PM",lastUpdatedTimestamp:1652964414e3,headersStr:null,content:'# yaml\n\nYAML æ¯ä¸ä¸ªå¯è¯»æ§é«ï¼ç¨æ¥è¡¨è¾¾èµæåºååçæ ¼å¼ãå¸¸ç¨äºå­å¨ä¸äºéç½®æä»¶ï¼å¦ï¼\n\nreceipt:     Oz-Ware Purchase Invoice\ndate:        2012-08-06\ncustomer:\n    given:   Dorothy\n    family:  Gale\n   \nitems:\n    - part_no:   A4786\n      descrip:   Water Bucket (Filled)\n      price:     1.47\n      quantity:  4\n\n    - part_no:   E1628\n      descrip:   High Heeled "Ruby" Slippers\n      size:      8\n      price:     133.7\n      quantity:  1\n\n\nYaml å json å¯ä»¥äºç¸è½¬æ¢ï¼å¨çº¿è½¬æ¢å·¥å·ï¼ï¼å¶å®å¯ä»¥æ yaml çæ json æä»¶çåå½¢ï¼å¶ä¸­ç­æ¨ªçº¿çåä¸ºæ°ç»ï¼å¶ä»çä½ä¸ºå¯¹è±¡ãä¸é¢ç yaml å¯ä»¥è½¬æ¢æå¦ä¸ jsonï¼\n\n{\n    "receipt": "Oz-Ware Purchase Invoice",\n    "date": "2012-08-06T00:00:00.000Z",\n    "customer": {\n        "given": "Dorothy",\n        "family": "Gale"\n    },\n    "items": [\n        {\n            "part_no": "A4786",\n            "descrip": "Water Bucket (Filled)",\n            "price": 1.47,\n            "quantity": 4\n        },\n        {\n            "part_no": "E1628",\n            "descrip": "High Heeled \\"Ruby\\" Slippers",\n            "size": 8,\n            "price": 133.7,\n            "quantity": 1\n        }\n    ]\n}\n\n\nnpm å yaml ä¹å¯å®ç°è¯¥åè½ï¼\n\nimport fs from \'fs\'\nimport YAML from \'yaml\'\n\nconst file = fs.readFileSync(\'./file.yml\', \'utf8\')\nYAML.parse(file)\n\n\nä¸¾ä¸ä¸ªåºæ¯ï¼åç«¯æä¾äºä¸ä»½ yaml æä»¶ç urlï¼åç«¯å¦ä½å°å¶ä¸è½½å¹¶è¯»ååå®¹å¢ï¼\n\n// æ ¹æ®è·å yaml éç½®æä»¶å¹¶è½¬ json\nfunction getYaml(url) {\n  let that = this;\n  let fileUrl = url;\n  let xhr = new XMLHttpRequest();\n  xhr.open(\'get\', fileUrl, true);\n  xhr.responseType = \'blob\';\n  xhr.onload = function () {\n    if (this.status === 200) {\n      const reader = new FileReader();\n      reader.readAsText(this.response);\n      reader.onload = function () {\n        that.json = yaml.parse(reader.result);\n        that.parseJson(that.json);\n      };\n    }\n  };\n  xhr.send();\n}\n\n\nä½¿ç¨ axios å°è£ä¸ä¸ï¼\n\n> è¿éæä¸¤å±å¼æ­¥æä½ï¼ç¬¬ä¸æ­¥æ¯ axios.getï¼ç¬¬äºæ­¥æ¯æä»¶è¯»å reader\n> \n> ç¬¬äºå±å©ç¨ Promise å°è£ï¼ä½¿ç¨ async / await æ¥å¾å° æç»ç»æã\n\nfunction downloadYaml(url) {\n  return axios.get(url, {\n      responseType: \'blob\',\n    })\n    .then(res => {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.readAsText(res.data);\n        reader.onload = function () {\n          resolve(reader.result);\n        };\n      });\n    })\n});\n\nasync function getYaml(url){\n  const res = await downloadYaml(url);\n  this.json = yaml.parse(res);\n  this.parseJson(this.json);\n}\n\ngetYaml(url);\n\n// ç®ååç¸å½äº\nfunction a() {\n    return new Promise((resolve, reject) => {\n        setTimeout(() => {\n            resolve(111)\n        }, 1000)\n    }).then(() => {\n        return new Promise((resolve, reject) => {\n            setTimeout(() => {\n                resolve(222)\n            }, 1000)\n        })\n    })\n}\n\nasync function b() {\n    const x = await a();\n    console.log(x) // 222\n}\n\nb();\n\n\nè¯·æ±çæ¶åæä»¬å¯ä»¥çå°ï¼è¯·æ±æä»¶çååºç±»åä¸º application/octet-streamï¼æ¯äºè¿å¶æ°æ®æµçæä»¶ã\n\n\n\n * Blobå¯¹è±¡è¡¨ç¤ºä¸ä¸ªä¸å¯åãåå§æ°æ®çç±»æä»¶å¯¹è±¡ãå®çæ°æ®å¯ä»¥æææ¬æäºè¿å¶çæ ¼å¼è¿è¡è¯»åï¼ä¹å¯ä»¥è½¬æ¢æ ReadableStream æ¥ç¨äºæ°æ®æä½ã\n\n * XMLHttpRequest å±æ§ responseType æ¯ä¸ä¸ªæä¸¾å­ç¬¦ä¸²å¼ï¼ç¨äºæå®ååºä¸­åå«çæ°æ®ç±»åã\n   \n   å®è¿åè®¸ä½èæ´æ¹ååºç±»åãXMLHttpRequest.responseType = blob ä»£è¡¨ response æ¯ä¸ä¸ªåå«äºè¿å¶æ°æ®ç Blob å¯¹è±¡ã\n\n * FileReader å¯¹è±¡åè®¸Webåºç¨ç¨åºå¼æ­¥è¯»åå­å¨å¨ç¨æ·è®¡ç®æºä¸çæä»¶ï¼æåå§æ°æ®ç¼å²åºï¼çåå®¹ï¼ä½¿ç¨ File æ Blob å¯¹è±¡æå®è¦è¯»åçæä»¶ææ°æ®ã\n\n * FileReader.readAsText æ¹æ³å¯ä»¥å° Blob æè File å¯¹è±¡è½¬æ ¹æ®ç¹æ®çç¼ç æ ¼å¼è½¬åä¸ºåå®¹(å­ç¬¦ä¸²å½¢å¼)',normalizedContent:'# yaml\n\nyaml æ¯ä¸ä¸ªå¯è¯»æ§é«ï¼ç¨æ¥è¡¨è¾¾èµæåºååçæ ¼å¼ãå¸¸ç¨äºå­å¨ä¸äºéç½®æä»¶ï¼å¦ï¼\n\nreceipt:     oz-ware purchase invoice\ndate:        2012-08-06\ncustomer:\n    given:   dorothy\n    family:  gale\n   \nitems:\n    - part_no:   a4786\n      descrip:   water bucket (filled)\n      price:     1.47\n      quantity:  4\n\n    - part_no:   e1628\n      descrip:   high heeled "ruby" slippers\n      size:      8\n      price:     133.7\n      quantity:  1\n\n\nyaml å json å¯ä»¥äºç¸è½¬æ¢ï¼å¨çº¿è½¬æ¢å·¥å·ï¼ï¼å¶å®å¯ä»¥æ yaml çæ json æä»¶çåå½¢ï¼å¶ä¸­ç­æ¨ªçº¿çåä¸ºæ°ç»ï¼å¶ä»çä½ä¸ºå¯¹è±¡ãä¸é¢ç yaml å¯ä»¥è½¬æ¢æå¦ä¸ jsonï¼\n\n{\n    "receipt": "oz-ware purchase invoice",\n    "date": "2012-08-06t00:00:00.000z",\n    "customer": {\n        "given": "dorothy",\n        "family": "gale"\n    },\n    "items": [\n        {\n            "part_no": "a4786",\n            "descrip": "water bucket (filled)",\n            "price": 1.47,\n            "quantity": 4\n        },\n        {\n            "part_no": "e1628",\n            "descrip": "high heeled \\"ruby\\" slippers",\n            "size": 8,\n            "price": 133.7,\n            "quantity": 1\n        }\n    ]\n}\n\n\nnpm å yaml ä¹å¯å®ç°è¯¥åè½ï¼\n\nimport fs from \'fs\'\nimport yaml from \'yaml\'\n\nconst file = fs.readfilesync(\'./file.yml\', \'utf8\')\nyaml.parse(file)\n\n\nä¸¾ä¸ä¸ªåºæ¯ï¼åç«¯æä¾äºä¸ä»½ yaml æä»¶ç urlï¼åç«¯å¦ä½å°å¶ä¸è½½å¹¶è¯»ååå®¹å¢ï¼\n\n// æ ¹æ®è·å yaml éç½®æä»¶å¹¶è½¬ json\nfunction getyaml(url) {\n  let that = this;\n  let fileurl = url;\n  let xhr = new xmlhttprequest();\n  xhr.open(\'get\', fileurl, true);\n  xhr.responsetype = \'blob\';\n  xhr.onload = function () {\n    if (this.status === 200) {\n      const reader = new filereader();\n      reader.readastext(this.response);\n      reader.onload = function () {\n        that.json = yaml.parse(reader.result);\n        that.parsejson(that.json);\n      };\n    }\n  };\n  xhr.send();\n}\n\n\nä½¿ç¨ axios å°è£ä¸ä¸ï¼\n\n> è¿éæä¸¤å±å¼æ­¥æä½ï¼ç¬¬ä¸æ­¥æ¯ axios.getï¼ç¬¬äºæ­¥æ¯æä»¶è¯»å reader\n> \n> ç¬¬äºå±å©ç¨ promise å°è£ï¼ä½¿ç¨ async / await æ¥å¾å° æç»ç»æã\n\nfunction downloadyaml(url) {\n  return axios.get(url, {\n      responsetype: \'blob\',\n    })\n    .then(res => {\n      return new promise((resolve, reject) => {\n        const reader = new filereader();\n        reader.readastext(res.data);\n        reader.onload = function () {\n          resolve(reader.result);\n        };\n      });\n    })\n});\n\nasync function getyaml(url){\n  const res = await downloadyaml(url);\n  this.json = yaml.parse(res);\n  this.parsejson(this.json);\n}\n\ngetyaml(url);\n\n// ç®ååç¸å½äº\nfunction a() {\n    return new promise((resolve, reject) => {\n        settimeout(() => {\n            resolve(111)\n        }, 1000)\n    }).then(() => {\n        return new promise((resolve, reject) => {\n            settimeout(() => {\n                resolve(222)\n            }, 1000)\n        })\n    })\n}\n\nasync function b() {\n    const x = await a();\n    console.log(x) // 222\n}\n\nb();\n\n\nè¯·æ±çæ¶åæä»¬å¯ä»¥çå°ï¼è¯·æ±æä»¶çååºç±»åä¸º application/octet-streamï¼æ¯äºè¿å¶æ°æ®æµçæä»¶ã\n\n\n\n * blobå¯¹è±¡è¡¨ç¤ºä¸ä¸ªä¸å¯åãåå§æ°æ®çç±»æä»¶å¯¹è±¡ãå®çæ°æ®å¯ä»¥æææ¬æäºè¿å¶çæ ¼å¼è¿è¡è¯»åï¼ä¹å¯ä»¥è½¬æ¢æ readablestream æ¥ç¨äºæ°æ®æä½ã\n\n * xmlhttprequest å±æ§ responsetype æ¯ä¸ä¸ªæä¸¾å­ç¬¦ä¸²å¼ï¼ç¨äºæå®ååºä¸­åå«çæ°æ®ç±»åã\n   \n   å®è¿åè®¸ä½èæ´æ¹ååºç±»åãxmlhttprequest.responsetype = blob ä»£è¡¨ response æ¯ä¸ä¸ªåå«äºè¿å¶æ°æ®ç blob å¯¹è±¡ã\n\n * filereader å¯¹è±¡åè®¸webåºç¨ç¨åºå¼æ­¥è¯»åå­å¨å¨ç¨æ·è®¡ç®æºä¸çæä»¶ï¼æåå§æ°æ®ç¼å²åºï¼çåå®¹ï¼ä½¿ç¨ file æ blob å¯¹è±¡æå®è¦è¯»åçæä»¶ææ°æ®ã\n\n * filereader.readastext æ¹æ³å¯ä»¥å° blob æè file å¯¹è±¡è½¬æ ¹æ®ç¹æ®çç¼ç æ ¼å¼è½¬åä¸ºåå®¹(å­ç¬¦ä¸²å½¢å¼)',charsets:{cjk:!0}},{title:"é¢è¯åå¤",frontmatter:{},regularPath:"/time/code.html",relativePath:"time/code.md",key:"v-12ea54df",path:"/time/code.html",lastUpdated:"6/12/2025, 7:16:20 PM",lastUpdatedTimestamp:174972698e4,headersStr:null,content:"# é¢è¯åå¤\n\n * part1\n   * æé¿éå¢å­åºåï¼leetcode300\n   * æé¿å¬å±å­åºå(LCS)ï¼leetcode1143\n   * ç¼è¾è·ç¦»ï¼leetcode72\n   * æå¤§å­åºååï¼leetcode53\n   * æå®¶å«èï¼leetcode198\n   * æå°è·¯å¾åï¼leetcode64\n   * ååºéåï¼leetcode144\n   * ä¸­åºéåï¼leetcode94\n   * ååºéåï¼leetcode145\n * part2\n   * å®ç° mapãreduceã'abcd'.f() è¿å 'd-c-b-a'\n   * this æå\n   * new å®ç°\n   * ä»ä¹æ¯åå\n   * è¯´åºå¸¸è§çæ°ç»æ¹æ³\n   * é²æãèæµï¼æ¶é´æ³çåå®æ¶å¨çå¹¶è¯´åºåºå«ï¼\n   * osiä¸å±åè®®ï¼TCP/IPäºå±åè®®ï¼arp/rarpåè®®\n   * BFC æ¦å¿µ\n   * è·¨å¹³å°ä¸è·¨ç«¯ææ¯\n * part3\n   * é­åï¼æ¦å¿µãä¼ç¼ºç¹ãåºç¨(Vue diff ç®æ³ãnodeOps)\n   * å½æ°å¼ç¼ç¨ï¼çº¯å½æ°ãéå½ä¸å°¾éå½ãè®°å¿å½æ°ãé«é¶å½æ°ãæ¯éåä¸åå½æ°ãå½æ°ç»å\n   * åå¾åæ¶æºå¶ï¼GCç®æ³ãåå­æ³é²ãåå­æº¢åºãV8å¼æçåå­åéä¸åå¾åæ¶ï¼\n   * æåï¼å¹¶åè¯·æ±æ§å¶ãæ°ç»å»éï¼4ç§ï¼ãæ°ç»æå¹³åï¼2ç§ï¼ãå¤æ­æ°ç»æ¹æ³ï¼5ç§ï¼ãinstanceof\n   * Promiseï¼æåãæ¹æ³ï¼ãæ·±æ·è´ãWeakMapãWeakSet\n   * fetchãajaxãaxiosãXHR åºå«(ajaxå¼æ­¥ææ¯åæ¬æ°çfetchåä¼ ç»çXHR, axiosæ¯å¯¹XHRçå°è£)\n   * åå¹¶æåºæ°ç»ï¼leetcode88\n   * åå¹¶åºé´ï¼leetcode56\n   * åç«¯ç¼å­ï¼æµè§å¨ç¼å­ãHTTPç¼å­ï¼cache-controlãlast-modified(3ä¸ªç¼ºç¹)ãetag\n   * äºä»¶å¾ªç¯(å®ä»»å¡ãå¾®ä»»å¡)ãnextTickåç\n   * äºåæ¥æ¾ï¼äºåæ¥æ¾\n   * LRUï¼leetcode146\n   * åªåºç°è¿ä¸æ¬¡çæ°å­ï¼leetcode136\n   * æè½¬ç©éµï¼æè½¬ç©éµ\n   * diff ç®æ³ï¼createPatchFunctionãpatchãpatchVnodeãupdateChildrenãvue å react å¨èædomçdiffä¸ï¼åäºåªäºæ¹è¿ä½¿å¾éåº¦å¾å¿«ãO(n^3) å O(n) å¦ä½è®¡ç®ï¼\n   * æµè§å¨å¤è¿ç¨æ¶æãé¡µé¢æ¸²æè§£æè¿ç¨ãåæµä¸éç»ãCSSç¡¬ä»¶å éãjs/css é»å¡ dom è§£æ/æ¸²æï¼ãscript æ ç­¾ deferãasync\n   * è·¯å¾æ»åï¼leetcode112ãæ±æ ¹å°å¶å­èç¹æ°å­ä¹åï¼leetcode129\n   * å²å±¿æ°éï¼leetcode200ãå²å±¿æå¤§é¢ç§¯ï¼leetcode695\n   * 7å±æ¨¡åãUDP/TCP(è¶æ¶éä¼ ãæ»å¨çªå£ãæµéæ§å¶ãæ¥å¡æ§å¶)ãhttpï¼0.9 ~ 3ãé¿è¿æ¥/ç®¡éåãå¤è·¯å¤ç¨/äºè¿å¶åå¸§/é¦é¨åç¼©ï¼ãéå¤´é»å¡ï¼TCPåHTTPï¼ãhttps\n   * æè¿å¬å±ç¥åï¼leetcode236ãç¿»è½¬äºåæ ï¼leetcode226ãç¸åçæ ï¼leetcode100\n   * XSSï¼åå°ãå­å¨ãDomï¼ï¼httponlyãè½¬ä¹ãcspãx-xss-protectedï¼CSRFï¼åæºæ£æµãsamesiteãéªè¯ç ãtokenï¼ç¹å»å«æï¼ç¦æ­¢ååµï¼ä¸­é´äººæ»å»ï¼æ§å¶å°æ³¨å¥ï¼éé±¼ï¼ç¬¬ä¸æ¹ä¾èµå®å¨ï¼\n   * åå¸è®¢éæ¨¡å¼ãè§å¯èæ¨¡å¼ãObject.create(null) å {} åºå«\n   * äºåæ çå±æ¬¡éåï¼leetcode102ãäºåæ çæå¤§å®½åº¦ï¼leetcode662ãäºåæ çå³è§å¾ï¼leetcode199\n   * Vue ååºå¼åçãproxyï¼Reflectãreceiverï¼\n   * äºåæ çæå¤§æ·±åº¦ï¼leetcode104ãäºåæ çæå°æ·±åº¦ï¼leetcode111ãNåæ çæå¤§æ·±åº¦ï¼leetcode559\n   * vuexï¼stateãmutationãactionï¼ãreduxï¼stateãreducerãactionï¼ãreact-redux åºå«\n   * æé¿æææ¬å·ï¼leetcode32\n   * åç«¯è·¯ç±ï¼hashï¼hashchangeï¼ãhistoryï¼pushStateãreplaceStateãpopStateï¼\n   * åæº¯ç®æ³ãå¨æåï¼Leetcode46ãæ¬å·çæï¼leetcode22ãçµè¯å·ç çæ°å­ç»åï¼leetcode17ãå­éï¼Leetcode78\n   * ç»§æ¿ï¼ES5ãES6ï¼ãObject.createãcall/apply/bind å®ç°\n   * è·¯å¾æ»åï¼leetcode112ãè·¯å¾æ»åIIï¼leetcode112\n   * ç»åæ»åï¼leetcode39ãç»åæ»åIIï¼leetcode40\n   * http ç¶æç ãcookie å session åºå«ãå°ç¨åºåç\n * part4\n   * é¢è¯é¢æ´ç\n   * ååºä¸­åºæé äºåæ ï¼leetcode105\n   * æå¹³æ°æ®ç»æè½¬Treeãæ ¹æ®è¾¹æé äºåæ \n   * ä¸¤ä¸ªæ å®ç°éå\n   * background-size: 100%ãcoverãcontain çåºå«\n     * 100%: æå®¹å¨æ¯ä¾ææ»¡ï¼å¾çåå½¢ï¼\n     * cover: å¾çå®½é«æ¯ä¸åï¼æèæ¯å¾çæ¾å¤§å°éååç´ å®¹å¨çå°ºå¯¸ï¼ä½æ¯è¶åºå®¹å¨çé¨åå¯è½ä¼è£æã\n     * contain: å¾çå®½é«æ¯ä¸åï¼ç¼©æ¾è³æ´ä¸ªå¾çèªèº«è½å®å¨æ¾ç¤ºåºæ¥ï¼æä»¥å®¹å¨ä¼æçç½åºåã\n   * æå¤§å®½åº¦å¡: leetcode962ãè¡¨ç°è¯å¥½çæé¿æ¶é´æ®µ: leetcode1124\n   * æå°æ : leetcode155\n   * åè°æ ç¸å³é¢ç®ï¼\n     * æ¯æ¥æ¸©åº¦: leetcode739\n     * ä¸ä¸ä¸ªæ´å¤§åç´ : leetcode496\n     * æ¥é¨æ°´: leetcode42\n     * æ±ç¶å¾ä¸­çæå¤§ç©å½¢: leetcode84\n     * æå¤§ç©å½¢: leetcode85\n     * ç§»æ k ä½æ°å­: leetcode402\n   * å¨æè§åï¼\n     * æå¤§å­åºååï¼è¿ç»­ï¼: leetcode53\n     * æé¿éå¢å­åºå: leetcode300\n     * æé¿å¬å±å­åºå(LCS): leetcode1143\n     * æé¿ééå¤å­ä¸²: åæoffer48\n     * ç¼è¾è·ç¦»(SES): leetcode72\n     * ä¹°åè¡ç¥¨çæä½³æ¶æº: leetcode121\n     * æå°è·¯å¾å: leetcode64\n     * ä¸è§å½¢çæå°è·¯å¾å: leetcode120\n   * é¡ºæ¶éæå°ç©éµ: leetcode54\n   * å²å±¿æ°é: leetcode200\n   * å²å±¿æå¤§é¢ç§¯: leetcode695\n   * æ±æ ¹å°å¶å­èç¹æ°å­ä¹å: leetcode129\n   * è·¯å¾æ»å: leetcode112\n   * ç¯å½¢é¾è¡¨: leetcode141\n   * ç¯å½¢é¾è¡¨2: leetcode142\n   * æ ç¸å³ï¼\n     * ç¸åçæ : leetcode100\n     * å¤æ­äºåæ æ¯å¦å¯¹ç§°: leetcode101\n     * åå¹¶äºåæ : leetcode617\n     * æ±äºåæ çæ·±åº¦(æå¤§): leetcode104\n     * æ±äºåæ çæ·±åº¦(æå°): leetcode111\n     * ç¿»è½¬äºåæ : leetcode226\n     * éªè¯äºåæç´¢æ : leetcode98\n   * æ°ç»ç¬¬kå¤§åç´ : leetcode215\n     * å æåºãå¿«æãåæ³¡ãéæ©æåº\n   * åå¹¶ä¸¤ä¸ªæåºé¾è¡¨: leetcode21\n   * æ»å¨çªå£æå¤§å¼: leetcode239\n * part5\n   * ä»ä¹æ¯ promise?promise.all/allsettled/race/any\n   * å®ä»»å¡/å¾®ä»»å¡/äºä»¶å¾ªç¯ï¼UIæ¸²æå¨äºä»¶å¾ªç¯çåªä¸ªé¶æ®µï¼\n   * èæDOM çä½ç¨æ¯ä»ä¹ï¼ä¸çå®DOMçåºå«ï¼èæDOMçæ§è½ä¸å®ä¼äºçå®DOMåï¼\n   * å¦ä½ä¼å React ç»ä»¶æ§è½ï¼èæåè¡¨ï¼æå è½½ï¼æ¹éç¶ææ´æ°ï¼cssä»£æ¿jså¨ç»\n   * useEffectæ¯ç¨æ¥å¹²ä»ä¹çï¼ æå ä¸ªåæ°ï¼ä¾èµæ°ç»ï¼depsï¼æä»ä¹ä½ç¨ï¼ æ§è¡æ¶æº\n   * ä»ç»ä¸ useMemoï¼ useCallbackï¼React.memo\n   * Reactç»ä»¶æ¸²æçä¸¤ä¸ªé¶æ®µï¼\n   * ä»ä¹æ¯ React Fiberï¼è§£å³äºä»ä¹é®é¢ï¼ä»ä¹æ¯åç¼å­fiber tree\n   * ä¸ºä»ä¹æ²¡æ Vue Fiberï¼vue å react çæ¸²ææµç¨æä»ä¹åºå«ï¼\n * part6\n   * ä»ç»ä¸ä½ çè§£çåºåé¾ï¼é¸å¸ï¼çºç²éç§ï¼å¤§åè´¦æ¬ï¼ä¸è¢«ç¯¡æ¹ï¼åå¸ç®æ³ï¼åå¸æéï¼\n   * ä»ä¹æ¯å±è¯æºå¶ï¼posåpow\n   * ç¡¬åå(ETHåETC)åè½¯åå(coinbase)\n   * Ghost åè®®(ä»¥å¤ªååºåæ¶é´è¾ç­)\n   * ä»ä¹æ¯æºè½åçº¦ï¼ä»ä¹æ¯æ±½æ²¹è´¹ï¼å¾çµå®å¤ï¼åæºé®é¢ï¼ä»¥å¤ªåäº¤æåå­æ§ï¼ä¸æ¦éè¯¯æ±½æ²¹è´¹ä¸ä¼éåï¼\n   * NFT Defi DAPP DAO è¿äºé½æ¯ä»ä¹\n   * metamask å bianace/okx/bitget è¿äºäº¤ææçåºå«\n   * ä»ç»ä¸ ERC20 å ERC721",normalizedContent:"# é¢è¯åå¤\n\n * part1\n   * æé¿éå¢å­åºåï¼leetcode300\n   * æé¿å¬å±å­åºå(lcs)ï¼leetcode1143\n   * ç¼è¾è·ç¦»ï¼leetcode72\n   * æå¤§å­åºååï¼leetcode53\n   * æå®¶å«èï¼leetcode198\n   * æå°è·¯å¾åï¼leetcode64\n   * ååºéåï¼leetcode144\n   * ä¸­åºéåï¼leetcode94\n   * ååºéåï¼leetcode145\n * part2\n   * å®ç° mapãreduceã'abcd'.f() è¿å 'd-c-b-a'\n   * this æå\n   * new å®ç°\n   * ä»ä¹æ¯åå\n   * è¯´åºå¸¸è§çæ°ç»æ¹æ³\n   * é²æãèæµï¼æ¶é´æ³çåå®æ¶å¨çå¹¶è¯´åºåºå«ï¼\n   * osiä¸å±åè®®ï¼tcp/ipäºå±åè®®ï¼arp/rarpåè®®\n   * bfc æ¦å¿µ\n   * è·¨å¹³å°ä¸è·¨ç«¯ææ¯\n * part3\n   * é­åï¼æ¦å¿µãä¼ç¼ºç¹ãåºç¨(vue diff ç®æ³ãnodeops)\n   * å½æ°å¼ç¼ç¨ï¼çº¯å½æ°ãéå½ä¸å°¾éå½ãè®°å¿å½æ°ãé«é¶å½æ°ãæ¯éåä¸åå½æ°ãå½æ°ç»å\n   * åå¾åæ¶æºå¶ï¼gcç®æ³ãåå­æ³é²ãåå­æº¢åºãv8å¼æçåå­åéä¸åå¾åæ¶ï¼\n   * æåï¼å¹¶åè¯·æ±æ§å¶ãæ°ç»å»éï¼4ç§ï¼ãæ°ç»æå¹³åï¼2ç§ï¼ãå¤æ­æ°ç»æ¹æ³ï¼5ç§ï¼ãinstanceof\n   * promiseï¼æåãæ¹æ³ï¼ãæ·±æ·è´ãweakmapãweakset\n   * fetchãajaxãaxiosãxhr åºå«(ajaxå¼æ­¥ææ¯åæ¬æ°çfetchåä¼ ç»çxhr, axiosæ¯å¯¹xhrçå°è£)\n   * åå¹¶æåºæ°ç»ï¼leetcode88\n   * åå¹¶åºé´ï¼leetcode56\n   * åç«¯ç¼å­ï¼æµè§å¨ç¼å­ãhttpç¼å­ï¼cache-controlãlast-modified(3ä¸ªç¼ºç¹)ãetag\n   * äºä»¶å¾ªç¯(å®ä»»å¡ãå¾®ä»»å¡)ãnexttickåç\n   * äºåæ¥æ¾ï¼äºåæ¥æ¾\n   * lruï¼leetcode146\n   * åªåºç°è¿ä¸æ¬¡çæ°å­ï¼leetcode136\n   * æè½¬ç©éµï¼æè½¬ç©éµ\n   * diff ç®æ³ï¼createpatchfunctionãpatchãpatchvnodeãupdatechildrenãvue å react å¨èædomçdiffä¸ï¼åäºåªäºæ¹è¿ä½¿å¾éåº¦å¾å¿«ão(n^3) å o(n) å¦ä½è®¡ç®ï¼\n   * æµè§å¨å¤è¿ç¨æ¶æãé¡µé¢æ¸²æè§£æè¿ç¨ãåæµä¸éç»ãcssç¡¬ä»¶å éãjs/css é»å¡ dom è§£æ/æ¸²æï¼ãscript æ ç­¾ deferãasync\n   * è·¯å¾æ»åï¼leetcode112ãæ±æ ¹å°å¶å­èç¹æ°å­ä¹åï¼leetcode129\n   * å²å±¿æ°éï¼leetcode200ãå²å±¿æå¤§é¢ç§¯ï¼leetcode695\n   * 7å±æ¨¡åãudp/tcp(è¶æ¶éä¼ ãæ»å¨çªå£ãæµéæ§å¶ãæ¥å¡æ§å¶)ãhttpï¼0.9 ~ 3ãé¿è¿æ¥/ç®¡éåãå¤è·¯å¤ç¨/äºè¿å¶åå¸§/é¦é¨åç¼©ï¼ãéå¤´é»å¡ï¼tcpåhttpï¼ãhttps\n   * æè¿å¬å±ç¥åï¼leetcode236ãç¿»è½¬äºåæ ï¼leetcode226ãç¸åçæ ï¼leetcode100\n   * xssï¼åå°ãå­å¨ãdomï¼ï¼httponlyãè½¬ä¹ãcspãx-xss-protectedï¼csrfï¼åæºæ£æµãsamesiteãéªè¯ç ãtokenï¼ç¹å»å«æï¼ç¦æ­¢ååµï¼ä¸­é´äººæ»å»ï¼æ§å¶å°æ³¨å¥ï¼éé±¼ï¼ç¬¬ä¸æ¹ä¾èµå®å¨ï¼\n   * åå¸è®¢éæ¨¡å¼ãè§å¯èæ¨¡å¼ãobject.create(null) å {} åºå«\n   * äºåæ çå±æ¬¡éåï¼leetcode102ãäºåæ çæå¤§å®½åº¦ï¼leetcode662ãäºåæ çå³è§å¾ï¼leetcode199\n   * vue ååºå¼åçãproxyï¼reflectãreceiverï¼\n   * äºåæ çæå¤§æ·±åº¦ï¼leetcode104ãäºåæ çæå°æ·±åº¦ï¼leetcode111ãnåæ çæå¤§æ·±åº¦ï¼leetcode559\n   * vuexï¼stateãmutationãactionï¼ãreduxï¼stateãreducerãactionï¼ãreact-redux åºå«\n   * æé¿æææ¬å·ï¼leetcode32\n   * åç«¯è·¯ç±ï¼hashï¼hashchangeï¼ãhistoryï¼pushstateãreplacestateãpopstateï¼\n   * åæº¯ç®æ³ãå¨æåï¼leetcode46ãæ¬å·çæï¼leetcode22ãçµè¯å·ç çæ°å­ç»åï¼leetcode17ãå­éï¼leetcode78\n   * ç»§æ¿ï¼es5ães6ï¼ãobject.createãcall/apply/bind å®ç°\n   * è·¯å¾æ»åï¼leetcode112ãè·¯å¾æ»åiiï¼leetcode112\n   * ç»åæ»åï¼leetcode39ãç»åæ»åiiï¼leetcode40\n   * http ç¶æç ãcookie å session åºå«ãå°ç¨åºåç\n * part4\n   * é¢è¯é¢æ´ç\n   * ååºä¸­åºæé äºåæ ï¼leetcode105\n   * æå¹³æ°æ®ç»æè½¬treeãæ ¹æ®è¾¹æé äºåæ \n   * ä¸¤ä¸ªæ å®ç°éå\n   * background-size: 100%ãcoverãcontain çåºå«\n     * 100%: æå®¹å¨æ¯ä¾ææ»¡ï¼å¾çåå½¢ï¼\n     * cover: å¾çå®½é«æ¯ä¸åï¼æèæ¯å¾çæ¾å¤§å°éååç´ å®¹å¨çå°ºå¯¸ï¼ä½æ¯è¶åºå®¹å¨çé¨åå¯è½ä¼è£æã\n     * contain: å¾çå®½é«æ¯ä¸åï¼ç¼©æ¾è³æ´ä¸ªå¾çèªèº«è½å®å¨æ¾ç¤ºåºæ¥ï¼æä»¥å®¹å¨ä¼æçç½åºåã\n   * æå¤§å®½åº¦å¡: leetcode962ãè¡¨ç°è¯å¥½çæé¿æ¶é´æ®µ: leetcode1124\n   * æå°æ : leetcode155\n   * åè°æ ç¸å³é¢ç®ï¼\n     * æ¯æ¥æ¸©åº¦: leetcode739\n     * ä¸ä¸ä¸ªæ´å¤§åç´ : leetcode496\n     * æ¥é¨æ°´: leetcode42\n     * æ±ç¶å¾ä¸­çæå¤§ç©å½¢: leetcode84\n     * æå¤§ç©å½¢: leetcode85\n     * ç§»æ k ä½æ°å­: leetcode402\n   * å¨æè§åï¼\n     * æå¤§å­åºååï¼è¿ç»­ï¼: leetcode53\n     * æé¿éå¢å­åºå: leetcode300\n     * æé¿å¬å±å­åºå(lcs): leetcode1143\n     * æé¿ééå¤å­ä¸²: åæoffer48\n     * ç¼è¾è·ç¦»(ses): leetcode72\n     * ä¹°åè¡ç¥¨çæä½³æ¶æº: leetcode121\n     * æå°è·¯å¾å: leetcode64\n     * ä¸è§å½¢çæå°è·¯å¾å: leetcode120\n   * é¡ºæ¶éæå°ç©éµ: leetcode54\n   * å²å±¿æ°é: leetcode200\n   * å²å±¿æå¤§é¢ç§¯: leetcode695\n   * æ±æ ¹å°å¶å­èç¹æ°å­ä¹å: leetcode129\n   * è·¯å¾æ»å: leetcode112\n   * ç¯å½¢é¾è¡¨: leetcode141\n   * ç¯å½¢é¾è¡¨2: leetcode142\n   * æ ç¸å³ï¼\n     * ç¸åçæ : leetcode100\n     * å¤æ­äºåæ æ¯å¦å¯¹ç§°: leetcode101\n     * åå¹¶äºåæ : leetcode617\n     * æ±äºåæ çæ·±åº¦(æå¤§): leetcode104\n     * æ±äºåæ çæ·±åº¦(æå°): leetcode111\n     * ç¿»è½¬äºåæ : leetcode226\n     * éªè¯äºåæç´¢æ : leetcode98\n   * æ°ç»ç¬¬kå¤§åç´ : leetcode215\n     * å æåºãå¿«æãåæ³¡ãéæ©æåº\n   * åå¹¶ä¸¤ä¸ªæåºé¾è¡¨: leetcode21\n   * æ»å¨çªå£æå¤§å¼: leetcode239\n * part5\n   * ä»ä¹æ¯ promise?promise.all/allsettled/race/any\n   * å®ä»»å¡/å¾®ä»»å¡/äºä»¶å¾ªç¯ï¼uiæ¸²æå¨äºä»¶å¾ªç¯çåªä¸ªé¶æ®µï¼\n   * èædom çä½ç¨æ¯ä»ä¹ï¼ä¸çå®domçåºå«ï¼èædomçæ§è½ä¸å®ä¼äºçå®domåï¼\n   * å¦ä½ä¼å react ç»ä»¶æ§è½ï¼èæåè¡¨ï¼æå è½½ï¼æ¹éç¶ææ´æ°ï¼cssä»£æ¿jså¨ç»\n   * useeffectæ¯ç¨æ¥å¹²ä»ä¹çï¼ æå ä¸ªåæ°ï¼ä¾èµæ°ç»ï¼depsï¼æä»ä¹ä½ç¨ï¼ æ§è¡æ¶æº\n   * ä»ç»ä¸ usememoï¼ usecallbackï¼react.memo\n   * reactç»ä»¶æ¸²æçä¸¤ä¸ªé¶æ®µï¼\n   * ä»ä¹æ¯ react fiberï¼è§£å³äºä»ä¹é®é¢ï¼ä»ä¹æ¯åç¼å­fiber tree\n   * ä¸ºä»ä¹æ²¡æ vue fiberï¼vue å react çæ¸²ææµç¨æä»ä¹åºå«ï¼\n * part6\n   * ä»ç»ä¸ä½ çè§£çåºåé¾ï¼é¸å¸ï¼çºç²éç§ï¼å¤§åè´¦æ¬ï¼ä¸è¢«ç¯¡æ¹ï¼åå¸ç®æ³ï¼åå¸æéï¼\n   * ä»ä¹æ¯å±è¯æºå¶ï¼posåpow\n   * ç¡¬åå(ethåetc)åè½¯åå(coinbase)\n   * ghost åè®®(ä»¥å¤ªååºåæ¶é´è¾ç­)\n   * ä»ä¹æ¯æºè½åçº¦ï¼ä»ä¹æ¯æ±½æ²¹è´¹ï¼å¾çµå®å¤ï¼åæºé®é¢ï¼ä»¥å¤ªåäº¤æåå­æ§ï¼ä¸æ¦éè¯¯æ±½æ²¹è´¹ä¸ä¼éåï¼\n   * nft defi dapp dao è¿äºé½æ¯ä»ä¹\n   * metamask å bianace/okx/bitget è¿äºäº¤ææçåºå«\n   * ä»ç»ä¸ erc20 å erc721",charsets:{cjk:!0}},{title:"ãæ·±å¥çè§£ TypeScriptã",frontmatter:{},regularPath:"/ts/book.html",relativePath:"ts/book.md",key:"v-66d04f5f",path:"/ts/book.html",headers:[{level:2,title:"ç¬¬ä¸ç«  ä¸ºä»ä¹è¦ä½¿ç¨ TypeScript",slug:"ç¬¬ä¸ç« -ä¸ºä»ä¹è¦ä½¿ç¨-typescript",normalizedTitle:"ç¬¬ä¸ç«  ä¸ºä»ä¹è¦ä½¿ç¨ typescript",charIndex:24},{level:2,title:"ç¬¬äºç«  JavaScript å¸¸è§è¯­æ³",slug:"ç¬¬äºç« -javascript-å¸¸è§è¯­æ³",normalizedTitle:"ç¬¬äºç«  javascript å¸¸è§è¯­æ³",charIndex:121},{level:3,title:"ç¸ç­",slug:"ç¸ç­",normalizedTitle:"ç¸ç­",charIndex:407},{level:3,title:"null å undefined",slug:"null-å-undefined",normalizedTitle:"null å undefined",charIndex:619},{level:3,title:"æ°å­",slug:"æ°å­",normalizedTitle:"æ°å­",charIndex:1342},{level:2,title:"ç¬¬ä¸ç«  JavaScriptæ°è¯­æ³ç¹æ§",slug:"ç¬¬ä¸ç« -javascriptæ°è¯­æ³ç¹æ§",normalizedTitle:"ç¬¬ä¸ç«  javascriptæ°è¯­æ³ç¹æ§",charIndex:2240},{level:3,title:"3.1 ç±»",slug:"_3-1-ç±»",normalizedTitle:"3.1 ç±»",charIndex:2264},{level:3,title:"3.2 ç®­å¤´å½æ°",slug:"_3-2-ç®­å¤´å½æ°",normalizedTitle:"3.2 ç®­å¤´å½æ°",charIndex:3124},{level:3,title:"3.3 let",slug:"_3-3-let",normalizedTitle:"3.3 let",charIndex:3948},{level:3,title:"3.4 rest",slug:"_3-4-rest",normalizedTitle:"3.4 rest",charIndex:4370},{level:3,title:"3.5 æ©å±è¿ç®ç¬¦",slug:"_3-5-æ©å±è¿ç®ç¬¦",normalizedTitle:"3.5 æ©å±è¿ç®ç¬¦",charIndex:4515}],lastUpdated:"4/8/2022, 3:26:25 PM",lastUpdatedTimestamp:1649402785e3,headersStr:"ç¬¬ä¸ç«  ä¸ºä»ä¹è¦ä½¿ç¨ TypeScript ç¬¬äºç«  JavaScript å¸¸è§è¯­æ³ ç¸ç­ null å undefined æ°å­ ç¬¬ä¸ç«  JavaScriptæ°è¯­æ³ç¹æ§ 3.1 ç±» 3.2 ç®­å¤´å½æ° 3.3 let 3.4 rest 3.5 æ©å±è¿ç®ç¬¦",content:'# ãæ·±å¥çè§£ TypeScriptã\n\n\n# ç¬¬ä¸ç«  ä¸ºä»ä¹è¦ä½¿ç¨ TypeScript\n\n * ä¸º JavaScript æä¾å¯éçç±»åç³»ç»\n * å¼å®¹å½ååæªæ¥ç JavaScript çç¹æ§ï¼æ¯ JavaScript çè¶é\n\n\n# ç¬¬äºç«  JavaScript å¸¸è§è¯­æ³\n\nTypeScript å°è¯å¾ä¿æ¤ä½ ååæ æä¹ç JavaScript ä»£ç çå½±åï¼å³äº JavaScript çç¥è¯ä»ç¶éè¦å­¦ä¹ ã\n\n[] + []; // JavaScript è¿å \'\'ï¼TypeScript ä¼æ¥é\n{} + []; // JavaScript è¿å 0ï¼TypeScript ä¼æ¥é\n[] + {}; // JavaScript è¿å [object Object]ï¼TypeScript ä¼æ¥é\n\'hello\' - 1; // JavaScript è¿å NaNï¼TypeScript ä¼æ¥é\n\n\n\n# ç¸ç­\n\nå¨ JavaScript ä¸­ï¼\n\n5 == \'5\' // true\n5 === \'5\' // false\n"" == "0" // false\n"" == 0 // true\n\n\nèå¨ TypeScript ä¸­å¨ç¼åä»£ç æ¶å°±ä¼æ¥éï¼é¿åäºéå¼ç±»åè½¬æ¢ï¼\n\n5 == \'5\' // false\n5 === \'5\' // false\n"" == "0" // false\n"" == 0 // false\n\n\n\n\n\n# null å undefined\n\n * undefinedï¼åéæ²¡æåå§å\n * nullï¼åéä¸å¯ç¨\n\næ è®ºå¨ JavaScript è¿æ¯å¨ TypeScript ä¸­ï¼\n\nnull == undefined // true\n0 == undefined // false\n"" == undefined // false \nfalse == undefined // false\n\n\næ¨èä½¿ç¨ == null æ¥æ£æ¥ undefined å nullï¼å ä¸ºä½ éå¸¸ä¸å¸æåºåå®ä»¬ã\n\nfunction foo (arg: string | null | undefined) {\n  if (arg != null) {\n    // arg æ¯å­ç¬¦ä¸²çæåµï¼å ä¸º != æé¤äº null å undefined\n  }\n}\n\n\néå¶æ¾ç¤ºå°ä½¿ç¨ undefined\n\nfunction foo() {\n  // if ...\n  return { a: 1, b: 2 }\n  // else ...\n  return { a: 1, b: undefined }\n}\n\n// åºè¯¥ä½¿ç¨ä¸ä¸ªè¿åå¼çç±»åæ³¨è§£\nfunction foo(): {a: number, b?: number} {\n  // if ...\n  return { a: 1, b: 2 }\n  // else ...\n  return { a: 1}\n}\n\n\nJson ååºåå\n\n// JSON æ åæ¯æç¼ç  nullï¼ä½æ¯ä¸æ¯æ undefined\nJSON.stringify({a: null, b: undefined}) // {a: null}\n\n\n\n# æ°å­\n\nåç½®æ°å­ç±»åè¡¨ç¤ºçæ´æ°éå¶æ¯\n\nconsole.log({max: Number.MAX_SAFE_INTEGER, min: Number.MIN_SAFE_INTEGER})\n// {max: 9007199254740991, min: -9007199254740991}\n\n// ä¸å®å¨çå¼ä¼å­å¨è¯¯å·®\nconsole.log(Number.MAX_SAFE_INTEGER + 1 === Number.MAX_SAFE_INTEGER + 2) // true\n\n\nä¸ºäºæ£æ¥æ¯å¦å®å¨å¯ä»¥ä½¿ç¨Number.isSafeInteger\n\nNumber.isSafeInteger(Number.MAX_SAFE_INTEGER) // true\nNumber.isSafeInteger(Number.MAX_SAFE_INTEGER + 1) // false\n\n\næ ç©·\n\næ°å­çè¾¹çå¼å¯ä»¥ç¨ Number.MAX_VALUE å -Number.MAX_VALUE çå¼æ¥è¡¨ç¤º\n\nconsole.log(Number.MAX_VALUE) // 1.7976931348623157e+308\nconsole.log(-Number.MAX_VALUE) // -1.7976931348623157e+308\n\n\nè¶åºè¾¹çä½æ¯ç²¾è¯»æ²¡ææ¹åçå¼é½è¢«éå¶å¨æ­¤èå´åï¼ä½æ¯è¶åºè¾¹çä¸ç²¾åº¦å·²ç»æ¹åçå¼ï¼ç¨ Infinity è¡¨ç¤º\n\nconsole.log(Number.MAX_VALUE + 10**1000); // Infinity\n\n\næå°é 0 å¼å¯ä»¥ç¨ Number.MIN_VALUE æ¥è¡¨ç¤º\n\nconsole.log(Number.MIN_VALUE); // 5e-324\n\n// å°äº MIN_VALUE çå¼ä¼è¢«è½¬æ¢ä¸º 0\nconsole.log(Number.MIN_VALUE / 10); // 0\n\n\n> å°±åå¤§äº Number.MAX_VALUE çå¼ä¼è¢«éå¶ä¸º Infinityï¼å°äº Number.MIN_VALUE çå¼ä¼è¢«éå¶ä¸º 0\n\n\n# ç¬¬ä¸ç«  JavaScriptæ°è¯­æ³ç¹æ§\n\n\n# 3.1 ç±»\n\n1. ç»§æ¿ï¼æ¯æä½¿ç¨ extends å³é®å­å®ç°åç»§æ¿\n\n2. éæï¼éæå±æ§ä¼è¢«ææçå®ä¾å±äº«\n\nclass Something {\n  static instances = 0;\n  constructor() {\n\t\tSomething.instances++;\n  }\n}\n\nvar s1 = new Something();\nvar s2 = new Something();\nconsole.log(Something.instances); // 2\n\n\n3. è®¿é®ä¿®é¥°ç¬¦ï¼publicãprivateãprotected\n\nå¯è®¿é®   PUBLIC   PROTECTED   PRIVATE\nç±»     æ¯        æ¯           æ¯\nå­ç±»    æ¯        æ¯           å¦\nå®ä¾    æ¯        å¦           å¦\n\nå¨è¿è¡æ¶ï¼å¨ç¼è¯åç JavaScipt ä»£ç ä¸­ï¼ï¼è¿äºæ²¡æä»»ä½æä¹ï¼ä½æ¯å¦æä½ æ²¡ææ­£ç¡®å°ä½¿ç¨å®ä»¬çè¯ï¼å¨ç¼è¯æ¶ä¼æåºéè¯¯ã\n\n4. æ½è±¡ï¼æ¥æä¸ä¸ª abstract ä¿®é¥°ç¬¦æå³çè¯¥å½æ°ä¸è½ç´æ¥è¢«è°ç¨ï¼å¹¶ä¸å­ç±»å¿é¡»å®ç°è¿ä¸ªåè½\n\n * abstract ç±»ä¸è½ç´æ¥è¢«å®ä¾åï¼ç¨æ·å¿é¡»åå»ºä¸ä¸ªç±»æ¥ç»§æ¿ abstract ç±»\n * abstract æåä¸è½ç´æ¥è¢«è®¿é®ï¼å­ç±»å¿é¡»å®ç°è¿ä¸ªåè½\n\n5. æé å¨ï¼æé å¨æ¯å¯éçï¼ç±»ä¸æ¯å¿é¡»è¦æä¸ä¸ªæé å¨ï¼ç¤ºä¾å¦ä¸ï¼\n\nclass Foo {}\nvar foo = new Foo();\n\n\nå¯ä»¥ä½¿ç¨æé å¨æ¥å®ä¹æååé\n\nclass Foo {\n  x: number;\n  constructor(x: number) {\n    this.x = x;\n  }\n}\n\n// TS ä¸ºè¿ç§æ¹å¼æä¾äºä¸ä¸ªç¼©åï¼x å ä¸ä¸ªä¿®é¥°ç¬¦åç¼ï¼å®ä¼å¨ç±»ä¸èªå¨å£°æï¼å¹¶ä¸ä»æé å¨ä¸­å¤å¶è¿å»\nclass Foo {\n  constructor(public x: number)\n}\n\n\n\n# 3.2 ç®­å¤´å½æ°\n\nthis ä¸ç´æ¯ JavaScript çä¸ä¸ªçç¹ï¼ç®­å¤´å½æ°éè¿ä½¿ç¨æè·ä¸ä¸æç this çæä¹çæ¹å¼ï¼ä¿®å¤äºæ­¤é®é¢ã\n\nfunction Person(age) {\n  this.age = age;\n  this.growOld = function() {\n    this.age++;\n  }\n}\n\nvar person = new Person(1);\nsetTimeout(person.growOld, 1000);\nsetTimeout(function() {\n  console.log(person.age); // 1\n}, 2000)\n\n\nå¦æå¨æµè§å¨ä¸­è¿è¡ï¼å½æ°ä¸­ç this å°ä¼æå windowï¼å©ç¨ç®­å¤´å½æ°æ¹å\n\nfunction Person(age) {\n  this.age = age;\n  this.growOld = () => {\n    this.age++;\n  }\n}\n\n// ç¸å½äºæè·äº this\nfunction Person(age) {\n  this.age = age;\n  var _this = this;\n  this.growOld = function() {\n    _this.age++;\n  }\n}\n\nvar person = new Person(1);\nsetTimeout(person.growOld, 1000);\nsetTimeout(function() {\n  console.log(person.age); // 1\n}, 2000)\n\n\nå¿«éè¿åå¯¹è±¡\n\n// éè¯¯\nvar foo = () => {\n  bar: 123\n}\n\n// æ­£ç¡®\nvar foo = () => {\n  return { bar: 123 }\n}\n\n// æ­£ç¡®\nvar foo = () => ({\n  bar: 123\n})\n\n\n\n# 3.3 let\n\nlet å£°æäºåçº§ä½ç¨åï¼let å³é®å­ï¼åå»ºåçº§ä½ç¨åçæ¡ä»¶æ¯å¿é¡»æä¸ä¸ª { } åè£¹ï¼\n\nvar foo = 123;\nif (true) {\n    var foo = 456;\n}\nconsole.log(foo); // 456\n\n// test.ts\nlet foo = 123;\nif (true) {\n    let foo = 456;\n}\nconsole.log(foo); // 123\n\n// ä»¥ä¸ä»£ç ç»è¿ ts è½¬æ¢åä¼åå»ºä¸ä¸ªæ°çåéå\nvar foo = 123;\nif (true) {\n    var foo_1 = 456;\n}\nconsole.log(foo);\n\n\né¤ let å¤ï¼å½æ°ä¹å¯ä»¥åå»ºä¸ä¸ªæ°çä½ç¨å\n\nvar foo = 123\nfunction test() {\n  var foo = 456\n}\ntest()\nconsole.log(foo) // 123\n\n\n\n# 3.4 rest\n\nä½¿ç¨ rest å¯ä»¥å é¤æå\n\nconst point3D = { x: 1, y: 2, z: 3 };\n\nconst { z, ...point2D } = point3D;\nconsole.log(point2D); // { x: 1, y: 2 }\n\n\n\n# 3.5 æ©å±è¿ç®ç¬¦\n\nå¯¹äºå¯¹è±¡æ¥è¯´ï¼æ©å±çé¡ºåºå¾éè¦ï¼åé¢çå±æ§å¯ä»¥è¦çåé¢çå±æ§ã\n\nconst point2D = { x: 1, y: 2 };\nconst point3D = { x: 5, z: 4, ...point2D }; // { x: 1, y: 2, z: 4}\n',normalizedContent:'# ãæ·±å¥çè§£ typescriptã\n\n\n# ç¬¬ä¸ç«  ä¸ºä»ä¹è¦ä½¿ç¨ typescript\n\n * ä¸º javascript æä¾å¯éçç±»åç³»ç»\n * å¼å®¹å½ååæªæ¥ç javascript çç¹æ§ï¼æ¯ javascript çè¶é\n\n\n# ç¬¬äºç«  javascript å¸¸è§è¯­æ³\n\ntypescript å°è¯å¾ä¿æ¤ä½ ååæ æä¹ç javascript ä»£ç çå½±åï¼å³äº javascript çç¥è¯ä»ç¶éè¦å­¦ä¹ ã\n\n[] + []; // javascript è¿å \'\'ï¼typescript ä¼æ¥é\n{} + []; // javascript è¿å 0ï¼typescript ä¼æ¥é\n[] + {}; // javascript è¿å [object object]ï¼typescript ä¼æ¥é\n\'hello\' - 1; // javascript è¿å nanï¼typescript ä¼æ¥é\n\n\n\n# ç¸ç­\n\nå¨ javascript ä¸­ï¼\n\n5 == \'5\' // true\n5 === \'5\' // false\n"" == "0" // false\n"" == 0 // true\n\n\nèå¨ typescript ä¸­å¨ç¼åä»£ç æ¶å°±ä¼æ¥éï¼é¿åäºéå¼ç±»åè½¬æ¢ï¼\n\n5 == \'5\' // false\n5 === \'5\' // false\n"" == "0" // false\n"" == 0 // false\n\n\n\n\n\n# null å undefined\n\n * undefinedï¼åéæ²¡æåå§å\n * nullï¼åéä¸å¯ç¨\n\næ è®ºå¨ javascript è¿æ¯å¨ typescript ä¸­ï¼\n\nnull == undefined // true\n0 == undefined // false\n"" == undefined // false \nfalse == undefined // false\n\n\næ¨èä½¿ç¨ == null æ¥æ£æ¥ undefined å nullï¼å ä¸ºä½ éå¸¸ä¸å¸æåºåå®ä»¬ã\n\nfunction foo (arg: string | null | undefined) {\n  if (arg != null) {\n    // arg æ¯å­ç¬¦ä¸²çæåµï¼å ä¸º != æé¤äº null å undefined\n  }\n}\n\n\néå¶æ¾ç¤ºå°ä½¿ç¨ undefined\n\nfunction foo() {\n  // if ...\n  return { a: 1, b: 2 }\n  // else ...\n  return { a: 1, b: undefined }\n}\n\n// åºè¯¥ä½¿ç¨ä¸ä¸ªè¿åå¼çç±»åæ³¨è§£\nfunction foo(): {a: number, b?: number} {\n  // if ...\n  return { a: 1, b: 2 }\n  // else ...\n  return { a: 1}\n}\n\n\njson ååºåå\n\n// json æ åæ¯æç¼ç  nullï¼ä½æ¯ä¸æ¯æ undefined\njson.stringify({a: null, b: undefined}) // {a: null}\n\n\n\n# æ°å­\n\nåç½®æ°å­ç±»åè¡¨ç¤ºçæ´æ°éå¶æ¯\n\nconsole.log({max: number.max_safe_integer, min: number.min_safe_integer})\n// {max: 9007199254740991, min: -9007199254740991}\n\n// ä¸å®å¨çå¼ä¼å­å¨è¯¯å·®\nconsole.log(number.max_safe_integer + 1 === number.max_safe_integer + 2) // true\n\n\nä¸ºäºæ£æ¥æ¯å¦å®å¨å¯ä»¥ä½¿ç¨number.issafeinteger\n\nnumber.issafeinteger(number.max_safe_integer) // true\nnumber.issafeinteger(number.max_safe_integer + 1) // false\n\n\næ ç©·\n\næ°å­çè¾¹çå¼å¯ä»¥ç¨ number.max_value å -number.max_value çå¼æ¥è¡¨ç¤º\n\nconsole.log(number.max_value) // 1.7976931348623157e+308\nconsole.log(-number.max_value) // -1.7976931348623157e+308\n\n\nè¶åºè¾¹çä½æ¯ç²¾è¯»æ²¡ææ¹åçå¼é½è¢«éå¶å¨æ­¤èå´åï¼ä½æ¯è¶åºè¾¹çä¸ç²¾åº¦å·²ç»æ¹åçå¼ï¼ç¨ infinity è¡¨ç¤º\n\nconsole.log(number.max_value + 10**1000); // infinity\n\n\næå°é 0 å¼å¯ä»¥ç¨ number.min_value æ¥è¡¨ç¤º\n\nconsole.log(number.min_value); // 5e-324\n\n// å°äº min_value çå¼ä¼è¢«è½¬æ¢ä¸º 0\nconsole.log(number.min_value / 10); // 0\n\n\n> å°±åå¤§äº number.max_value çå¼ä¼è¢«éå¶ä¸º infinityï¼å°äº number.min_value çå¼ä¼è¢«éå¶ä¸º 0\n\n\n# ç¬¬ä¸ç«  javascriptæ°è¯­æ³ç¹æ§\n\n\n# 3.1 ç±»\n\n1. ç»§æ¿ï¼æ¯æä½¿ç¨ extends å³é®å­å®ç°åç»§æ¿\n\n2. éæï¼éæå±æ§ä¼è¢«ææçå®ä¾å±äº«\n\nclass something {\n  static instances = 0;\n  constructor() {\n\t\tsomething.instances++;\n  }\n}\n\nvar s1 = new something();\nvar s2 = new something();\nconsole.log(something.instances); // 2\n\n\n3. è®¿é®ä¿®é¥°ç¬¦ï¼publicãprivateãprotected\n\nå¯è®¿é®   public   protected   private\nç±»     æ¯        æ¯           æ¯\nå­ç±»    æ¯        æ¯           å¦\nå®ä¾    æ¯        å¦           å¦\n\nå¨è¿è¡æ¶ï¼å¨ç¼è¯åç javascipt ä»£ç ä¸­ï¼ï¼è¿äºæ²¡æä»»ä½æä¹ï¼ä½æ¯å¦æä½ æ²¡ææ­£ç¡®å°ä½¿ç¨å®ä»¬çè¯ï¼å¨ç¼è¯æ¶ä¼æåºéè¯¯ã\n\n4. æ½è±¡ï¼æ¥æä¸ä¸ª abstract ä¿®é¥°ç¬¦æå³çè¯¥å½æ°ä¸è½ç´æ¥è¢«è°ç¨ï¼å¹¶ä¸å­ç±»å¿é¡»å®ç°è¿ä¸ªåè½\n\n * abstract ç±»ä¸è½ç´æ¥è¢«å®ä¾åï¼ç¨æ·å¿é¡»åå»ºä¸ä¸ªç±»æ¥ç»§æ¿ abstract ç±»\n * abstract æåä¸è½ç´æ¥è¢«è®¿é®ï¼å­ç±»å¿é¡»å®ç°è¿ä¸ªåè½\n\n5. æé å¨ï¼æé å¨æ¯å¯éçï¼ç±»ä¸æ¯å¿é¡»è¦æä¸ä¸ªæé å¨ï¼ç¤ºä¾å¦ä¸ï¼\n\nclass foo {}\nvar foo = new foo();\n\n\nå¯ä»¥ä½¿ç¨æé å¨æ¥å®ä¹æååé\n\nclass foo {\n  x: number;\n  constructor(x: number) {\n    this.x = x;\n  }\n}\n\n// ts ä¸ºè¿ç§æ¹å¼æä¾äºä¸ä¸ªç¼©åï¼x å ä¸ä¸ªä¿®é¥°ç¬¦åç¼ï¼å®ä¼å¨ç±»ä¸èªå¨å£°æï¼å¹¶ä¸ä»æé å¨ä¸­å¤å¶è¿å»\nclass foo {\n  constructor(public x: number)\n}\n\n\n\n# 3.2 ç®­å¤´å½æ°\n\nthis ä¸ç´æ¯ javascript çä¸ä¸ªçç¹ï¼ç®­å¤´å½æ°éè¿ä½¿ç¨æè·ä¸ä¸æç this çæä¹çæ¹å¼ï¼ä¿®å¤äºæ­¤é®é¢ã\n\nfunction person(age) {\n  this.age = age;\n  this.growold = function() {\n    this.age++;\n  }\n}\n\nvar person = new person(1);\nsettimeout(person.growold, 1000);\nsettimeout(function() {\n  console.log(person.age); // 1\n}, 2000)\n\n\nå¦æå¨æµè§å¨ä¸­è¿è¡ï¼å½æ°ä¸­ç this å°ä¼æå windowï¼å©ç¨ç®­å¤´å½æ°æ¹å\n\nfunction person(age) {\n  this.age = age;\n  this.growold = () => {\n    this.age++;\n  }\n}\n\n// ç¸å½äºæè·äº this\nfunction person(age) {\n  this.age = age;\n  var _this = this;\n  this.growold = function() {\n    _this.age++;\n  }\n}\n\nvar person = new person(1);\nsettimeout(person.growold, 1000);\nsettimeout(function() {\n  console.log(person.age); // 1\n}, 2000)\n\n\nå¿«éè¿åå¯¹è±¡\n\n// éè¯¯\nvar foo = () => {\n  bar: 123\n}\n\n// æ­£ç¡®\nvar foo = () => {\n  return { bar: 123 }\n}\n\n// æ­£ç¡®\nvar foo = () => ({\n  bar: 123\n})\n\n\n\n# 3.3 let\n\nlet å£°æäºåçº§ä½ç¨åï¼let å³é®å­ï¼åå»ºåçº§ä½ç¨åçæ¡ä»¶æ¯å¿é¡»æä¸ä¸ª { } åè£¹ï¼\n\nvar foo = 123;\nif (true) {\n    var foo = 456;\n}\nconsole.log(foo); // 456\n\n// test.ts\nlet foo = 123;\nif (true) {\n    let foo = 456;\n}\nconsole.log(foo); // 123\n\n// ä»¥ä¸ä»£ç ç»è¿ ts è½¬æ¢åä¼åå»ºä¸ä¸ªæ°çåéå\nvar foo = 123;\nif (true) {\n    var foo_1 = 456;\n}\nconsole.log(foo);\n\n\né¤ let å¤ï¼å½æ°ä¹å¯ä»¥åå»ºä¸ä¸ªæ°çä½ç¨å\n\nvar foo = 123\nfunction test() {\n  var foo = 456\n}\ntest()\nconsole.log(foo) // 123\n\n\n\n# 3.4 rest\n\nä½¿ç¨ rest å¯ä»¥å é¤æå\n\nconst point3d = { x: 1, y: 2, z: 3 };\n\nconst { z, ...point2d } = point3d;\nconsole.log(point2d); // { x: 1, y: 2 }\n\n\n\n# 3.5 æ©å±è¿ç®ç¬¦\n\nå¯¹äºå¯¹è±¡æ¥è¯´ï¼æ©å±çé¡ºåºå¾éè¦ï¼åé¢çå±æ§å¯ä»¥è¦çåé¢çå±æ§ã\n\nconst point2d = { x: 1, y: 2 };\nconst point3d = { x: 5, z: 4, ...point2d }; // { x: 1, y: 2, z: 4}\n',charsets:{cjk:!0}},{title:"Performance",frontmatter:{},regularPath:"/tool/performance.html",relativePath:"tool/performance.md",key:"v-1397f439",path:"/tool/performance.html",headers:[{level:2,title:"ä¸ãæ ¸å¿åè½",slug:"ä¸ãæ ¸å¿åè½",normalizedTitle:"ä¸ãæ ¸å¿åè½",charIndex:191},{level:2,title:"äºãå³é®æ¥å£ä¸ä½¿ç¨æ¹æ³",slug:"äºãå³é®æ¥å£ä¸ä½¿ç¨æ¹æ³",normalizedTitle:"äºãå³é®æ¥å£ä¸ä½¿ç¨æ¹æ³",charIndex:436},{level:3,title:"1. Performance Timingï¼æ§è½æ¶é´çº¿ï¼",slug:"_1-performance-timing-æ§è½æ¶é´çº¿",normalizedTitle:"1. performance timingï¼æ§è½æ¶é´çº¿ï¼",charIndex:452},{level:3,title:"2. Resource Timing API",slug:"_2-resource-timing-api",normalizedTitle:"2. resource timing api",charIndex:1525},{level:3,title:"3. User Timing API",slug:"_3-user-timing-api",normalizedTitle:"3. user timing api",charIndex:2078},{level:3,title:"4. Performance Observer API",slug:"_4-performance-observer-api",normalizedTitle:"4. performance observer api",charIndex:2465},{level:3,title:"5. High Resolution Time API",slug:"_5-high-resolution-time-api",normalizedTitle:"5. high resolution time api",charIndex:2972},{level:2,title:"ä¸ãæ ¸å¿æ§è½ææ ï¼Web Vitalsï¼",slug:"ä¸ãæ ¸å¿æ§è½ææ -web-vitals",normalizedTitle:"ä¸ãæ ¸å¿æ§è½ææ ï¼web vitalsï¼",charIndex:3241},{level:2,title:"åãå®éåºç¨æ¡ä¾",slug:"åãå®éåºç¨æ¡ä¾",normalizedTitle:"åãå®éåºç¨æ¡ä¾",charIndex:3753},{level:3,title:"1. æ§è½çæ§ä¸ä¸æ¥",slug:"_1-æ§è½çæ§ä¸ä¸æ¥",normalizedTitle:"1. æ§è½çæ§ä¸ä¸æ¥",charIndex:3766},{level:3,title:"2. ä¼åèµæºå è½½ç­ç¥",slug:"_2-ä¼åèµæºå è½½ç­ç¥",normalizedTitle:"2. ä¼åèµæºå è½½ç­ç¥",charIndex:4394},{level:3,title:"3. æ£æµå¡é¡¿ï¼é¿ä»»å¡ï¼",slug:"_3-æ£æµå¡é¡¿-é¿ä»»å¡",normalizedTitle:"3. æ£æµå¡é¡¿ï¼é¿ä»»å¡ï¼",charIndex:4631},{level:2,title:"äºãæµè§å¨å¼å®¹æ§",slug:"äºãæµè§å¨å¼å®¹æ§",normalizedTitle:"äºãæµè§å¨å¼å®¹æ§",charIndex:4920},{level:2,title:"å­ãæ»ç»",slug:"å­ãæ»ç»",normalizedTitle:"å­ãæ»ç»",charIndex:5205}],lastUpdated:"8/4/2025, 3:49:09 PM",lastUpdatedTimestamp:1754293749e3,headersStr:"ä¸ãæ ¸å¿åè½ äºãå³é®æ¥å£ä¸ä½¿ç¨æ¹æ³ 1. Performance Timingï¼æ§è½æ¶é´çº¿ï¼ 2. Resource Timing API 3. User Timing API 4. Performance Observer API 5. High Resolution Time API ä¸ãæ ¸å¿æ§è½ææ ï¼Web Vitalsï¼ åãå®éåºç¨æ¡ä¾ 1. æ§è½çæ§ä¸ä¸æ¥ 2. ä¼åèµæºå è½½ç­ç¥ 3. æ£æµå¡é¡¿ï¼é¿ä»»å¡ï¼ äºãæµè§å¨å¼å®¹æ§ å­ãæ»ç»",content:"# Performance\n\nPerformance API æ¯ Web å¹³å°æä¾çä¸ç» JavaScript æ¥å£ï¼ç¨äºç²¾ç¡®æµéååæç½é¡µæåºç¨çæ§è½ææ ï¼å¦å è½½æ¶é´ãæ¸²æèæ¶ãèµæºå è½½æçç­ï¼ãå®éè¿ window.performance å¯¹è±¡æ´é²ï¼å¼åèå¯ä»¥å©ç¨è¿äºæ°æ®ä¼åç¨æ·ä½éªãå®ä½æ§è½ç¶é¢ï¼å¹¶çæ§åºç¨è¿è¡ç¶æãä»¥ä¸æ¯å¶æ ¸å¿åè½ãå³é®æ¥å£åä½¿ç¨åºæ¯çè¯¦ç»ä»ç»ï¼\n\n\n# ä¸ãæ ¸å¿åè½\n\nPerformance API ä¸»è¦è§£å³ä»¥ä¸é®é¢ï¼\n\n 1. ç²¾ç¡®è®¡æ¶ï¼æä¾é«ç²¾åº¦æ¶é´æ³ï¼æ¯«ç§çº§ï¼é¨åæµè§å¨æ¯æå¾®ç§çº§ï¼ï¼é¿å Date.now() çç²¾åº¦éå¶ã\n 2. æ§è½ææ ééï¼è®°å½é¡µé¢çå½å¨æåé¶æ®µï¼å¦å¯¼èªãæ¸²æãèµæºå è½½ï¼çèæ¶ã\n 3. èµæºçæ§ï¼è·è¸ªå¾çãèæ¬ãæ ·å¼ç­èµæºçå è½½æ¶é´åç¶æã\n 4. ç¨æ·è¡ä¸ºåæï¼æµéäº¤äºäºä»¶ï¼å¦ç¹å»ãæ»å¨ï¼çååºå»¶è¿ã\n 5. é¿ææ§è½çæ§ï¼ç»å PerformanceObserver å®ç°å®æ¶æ°æ®æ¶éåä¸æ¥ã\n\n\n# äºãå³é®æ¥å£ä¸ä½¿ç¨æ¹æ³\n\n\n# 1. Performance Timingï¼æ§è½æ¶é´çº¿ï¼\n\n# ï¼1ï¼Navigation Timing API\n\nè®°å½é¡µé¢å¯¼èªï¼ä»ç¨æ·åèµ·è¯·æ±å°é¡µé¢å®å¨å è½½ï¼çåä¸ªé¶æ®µèæ¶ï¼éè¿ performance.timing æ performance.getEntriesByType('navigation')[0] è·åã\n\nç¤ºä¾å­æ®µï¼\n\nconst timing = performance.getEntriesByType('navigation')[0];\nconsole.log({\n  // ç¨æ·åèµ·è¯·æ±çæ¶é´æ³ï¼ç¸å¯¹äºé¡µé¢å è½½èµ·ç¹ï¼\n  navigationStart: timing.navigationStart,\n  // DNSæ¥è¯¢èæ¶\n  domainLookupEnd - timing.domainLookupStart,\n  // TCPè¿æ¥èæ¶\n  connectEnd - timing.connectStart,\n  // è¯·æ±å°ååºå¼å§ï¼TTFBï¼\n  responseStart - timing.requestStart,\n  // ååºæ°æ®æ¥æ¶èæ¶\n  responseEnd - timing.responseStart,\n  // DOMè§£æèæ¶\n  domComplete - timing.domInteractive,\n  // é¡µé¢å®å¨å è½½èæ¶\n  loadEventEnd - timing.navigationStart,\n});\n\n\nå¯è§åå·¥å·ï¼ Chrome DevTools ç Performance é¢æ¿ä¼èªå¨è§£æè¿äºæ°æ®ï¼çæçå¸å¾ï¼Waterfall Chartï¼ã\n\n# ï¼2ï¼Paint Timing API\n\nè®°å½é¡µé¢é¦æ¬¡æ¸²æï¼First Paint, FPï¼åé¦æ¬¡åå®¹æ¸²æï¼First Contentful Paint, FCPï¼çæ¶é´ç¹ã\n\nconst paintEntries = performance.getEntriesByType('paint');\nconsole.log({\n  'First Paint': paintEntries.find(e => e.name === 'first-paint')?.startTime,\n  'First Contentful Paint': paintEntries.find(e => e.name === 'first-contentful-paint')?.startTime,\n});\n\n\n\n# 2. Resource Timing API\n\nçæ§ææèµæºï¼èæ¬ãæ ·å¼ãå¾çãXHR/Fetchè¯·æ±ç­ï¼çå è½½æ§è½ï¼éè¿ performance.getEntriesByType('resource') è·åã\n\nç¤ºä¾å­æ®µï¼\n\nconst resources = performance.getEntriesByType('resource');\nresources.forEach(resource => {\n  console.log({\n    name: resource.name, // èµæºURL\n    duration: resource.duration, // æ»èæ¶\n    initiatorType: resource.initiatorType, // èµæºç±»åï¼script/img/cssç­ï¼\n    transferSize: resource.transferSize, // ä¼ è¾å¤§å°ï¼å«å¤´é¨ï¼\n    encodedBodySize: resource.encodedBodySize, // åç¼©åå¤§å°\n  });\n});\n\n\nåºç¨åºæ¯ï¼\n\n * è¯å«æ¢å è½½èµæºï¼å¦å¤§å¾çãæªåç¼©çJSæä»¶ï¼ã\n * åæç¬¬ä¸æ¹èæ¬ï¼å¦å¹¿åãåæå·¥å·ï¼å¯¹æ§è½çå½±åã\n\n\n# 3. User Timing API\n\næ è®°èªå®ä¹ä»£ç æ®µçæ§è¡æ¶é´ï¼ç¨äºæµéå³é®ä¸å¡é»è¾çèæ¶ã\n\nç¤ºä¾ï¼\n\n// æ è®°å¼å§\nperformance.mark('API_Request_Start');\n \n// æ¨¡æå¼æ­¥è¯·æ±\nsetTimeout(() => {\n  performance.mark('API_Request_End');\n \n  // è®¡ç®åºé´èæ¶\n  const measure = performance.measure('API_Request_Duration', 'API_Request_Start', 'API_Request_End');\n  console.log(measure.duration); // èæ¶ï¼æ¯«ç§ï¼\n}, 1000);\n\n\nä¼å¿ï¼ æ¯æå¨è®°å½ Date.now() æ´ç²¾ç¡®ï¼ä¸å¯ä¸æµè§å¨æ§è½å·¥å·éæã\n\n\n# 4. Performance Observer API\n\nå®æ¶çå¬æ§è½äºä»¶ï¼å¦èµæºå è½½ãé¿ä»»å¡ç­ï¼ï¼é¿åè½®è¯¢æ¥è¯¢æ§è½æ°æ®ã\n\nç¤ºä¾ï¼\n\nconst observer = new PerformanceObserver((list) => {\n  const entries = list.getEntries();\n  entries.forEach(entry => {\n    if (entry.entryType === 'longtask') {\n      console.warn('Long task detected:', entry.duration); // æ£æµé¿ä»»å¡ï¼>50msï¼\n    }\n  });\n});\n \n// çå¬é¿ä»»å¡åèµæºå è½½\nobserver.observe({ entryTypes: ['longtask', 'resource'] });\n\n\nå¸¸è§çå¬ç±»åï¼\n\n * paintï¼é¦æ¬¡æ¸²æäºä»¶ã\n * resourceï¼èµæºå è½½äºä»¶ã\n * longtaskï¼ä¸»çº¿ç¨è¢«é»å¡è¶è¿50msçä»»å¡ï¼å¯è½å¯¼è´å¡é¡¿ï¼ã\n * navigationï¼é¡µé¢å¯¼èªäºä»¶ã\n\n\n# 5. High Resolution Time API\n\næä¾é«ç²¾åº¦æ¶é´æ³ï¼performance.now()ï¼ï¼ç¸å¯¹äºé¡µé¢å è½½èµ·ç¹ï¼performance.timeOriginï¼ï¼ç²¾åº¦å¯è¾¾å¾®ç§çº§ï¼åæµè§å¨éå¶ï¼ã\n\nå¯¹æ¯ Date.now()ï¼\n\nconsole.log(Date.now()); // ç³»ç»æ¶é´ï¼å¯è½è¢«è°æ´ï¼å¦ç¨æ·ä¿®æ¹æ¶éï¼\nconsole.log(performance.now()); // ç¸å¯¹äºé¡µé¢å è½½çç¨³å®æ¶é´ï¼ä¸åç³»ç»æ¶é´å½±å\n\n\nåºç¨åºæ¯ï¼ ç²¾ç¡®æµéä»£ç æ§è¡æ¶é´ï¼å¦å¨ç»å¸§é´éãæ¸¸æé»è¾èæ¶ï¼ã\n\n\n# ä¸ãæ ¸å¿æ§è½ææ ï¼Web Vitalsï¼\n\nGoogle æåºç Web Vitals æ¯ä¸ç»å³é®æ§è½ææ ï¼å¯éè¿ Performance API è®¡ç®ï¼\n\n 1. LCPï¼Largest Contentful Paintï¼\n    \n    ï¼æå¤§åå®¹åç´ æ¸²ææ¶é´ï¼è¡¡éé¡µé¢ä¸»è¦åå®¹å è½½éåº¦ï¼ã\n    \n    const lcp = performance.getEntriesByType('largest-contentful-paint')[0];\n    console.log('LCP:', lcp.startTime);\n    \n\n 2. FIDï¼First Input Delayï¼ï¼é¦æ¬¡è¾å¥å»¶è¿ï¼è¡¡éäº¤äºååºéåº¦ï¼ã ééè¿ Event Timing API æçå®ç¨æ·çæ§ï¼RUMï¼è·åã\n\n 3. CLSï¼Cumulative Layout Shiftï¼ï¼ç´¯è®¡å¸å±åç§»ï¼è¡¡éé¡µé¢ç¨³å®æ§ï¼ã ééè¿ Layout Instability API è®¡ç®ã\n\n 4. TTIï¼Time to Interactiveï¼ï¼å¯äº¤äºæ¶é´ï¼è¡¡éé¡µé¢å®å¨å¯ç¨çæ¶é´ï¼ã éç»åé¿ä»»å¡åèµæºå è½½ç¶æè®¡ç®ã\n\n\n# åãå®éåºç¨æ¡ä¾\n\n\n# 1. æ§è½çæ§ä¸ä¸æ¥\n\nfunction reportPerformance() {\n  const data = {\n    navigation: performance.getEntriesByType('navigation')[0],\n    resources: performance.getEntriesByType('resource').map(r => ({\n      url: r.name,\n      duration: r.duration,\n    })),\n    timings: {\n      FCP: performance.getEntriesByName('first-contentful-paint')[0]?.startTime,\n      LCP: performance.getEntriesByType('largest-contentful-paint')[0]?.startTime,\n    },\n  };\n \n  // ä¸æ¥å°åæå¹³å°ï¼å¦Google AnalyticsãSentryï¼\n  navigator.sendBeacon('/api/performance', JSON.stringify(data));\n}\n \n// å¨é¡µé¢å¸è½½æ¶è§¦åä¸æ¥\nwindow.addEventListener('beforeunload', reportPerformance);\n\n\n\n# 2. ä¼åèµæºå è½½ç­ç¥\n\n// è¯å«æ¢å è½½èµæºå¹¶ä¼å\nconst slowResources = performance.getEntriesByType('resource')\n  .filter(r => r.duration > 1000) // è¿æ»¤èæ¶>1sçèµæº\n  .map(r => r.name);\n \nconsole.warn('Slow resources:', slowResources);\n// è§£å³æ¹æ¡ï¼é¢å è½½ãCDNå éãä»£ç åå²\n\n\n\n# 3. æ£æµå¡é¡¿ï¼é¿ä»»å¡ï¼\n\nconst observer = new PerformanceObserver((list) => {\n  list.getEntries().forEach(entry => {\n    if (entry.duration > 50) {\n      console.error('Long task detected:', entry);\n      // è§£å³æ¹æ¡ï¼æåä»»å¡ãä½¿ç¨Web Worker\n    }\n  });\n});\nobserver.observe({ entryTypes: ['longtask'] });\n\n\n\n# äºãæµè§å¨å¼å®¹æ§\n\n * ä¸»æµæ¯æï¼ç°ä»£æµè§å¨ï¼ChromeãFirefoxãEdgeãSafariï¼åæ¯æ Performance API çæ ¸å¿åè½ã\n\n * é¨åå·®å¼\n   \n   * performance.getEntriesByType('largest-contentful-paint') å¨æ§çæµè§å¨ä¸­å¯è½ç¼ºå¤±ã\n   * PerformanceObserver ç entryTypes æ¯æç¨åº¦ä¸åï¼å¦ longtask å¨é¨åç§»å¨ç«¯æµè§å¨ä¸­ä¸å¯ç¨ï¼ã\n\n * éçº§æ¹æ¡ï¼ä½¿ç¨ polyfillï¼å¦ web-vitals åºï¼æç¹å¾æ£æµã\n\n\n# å­ãæ»ç»\n\nAPI åç±»          æ ¸å¿æ¥å£                                       å¸ååºç¨åºæ¯\nTiming API      performance.timing                         åæé¡µé¢å è½½çå½å¨æ\nResource API    performance.getEntriesByType('resource')   çæ§èµæºå è½½æ§è½\nUser Timing     performance.mark() / measure()             æµéèªå®ä¹ä»£ç æ®µèæ¶\nObserver API    PerformanceObserver                        å®æ¶çå¬æ§è½äºä»¶ï¼å¦é¿ä»»å¡ï¼\nHigh Res Time   performance.now()                          é«ç²¾åº¦è®¡æ¶ï¼å¨ç»ãæ¸¸æï¼\n\nPerformance API æ¯åç«¯æ§è½ä¼åçâçå£«ååâï¼ç»å Chrome DevTools åèªå¨åçæ§å·¥å·ï¼å¦ LighthouseãSentryï¼ï¼å¯æå»ºå®æ´çæ§è½åæä½ç³»ãå¯¹äºå¾®åç«¯ãSPA ç­å¤æåºç¨ï¼å®è½å¸®å©å¼åèç²¾åå®ä½å­åºç¨å è½½ãè·¯ç±åæ¢ç­åºæ¯çæ§è½é®é¢ã",normalizedContent:"# performance\n\nperformance api æ¯ web å¹³å°æä¾çä¸ç» javascript æ¥å£ï¼ç¨äºç²¾ç¡®æµéååæç½é¡µæåºç¨çæ§è½ææ ï¼å¦å è½½æ¶é´ãæ¸²æèæ¶ãèµæºå è½½æçç­ï¼ãå®éè¿ window.performance å¯¹è±¡æ´é²ï¼å¼åèå¯ä»¥å©ç¨è¿äºæ°æ®ä¼åç¨æ·ä½éªãå®ä½æ§è½ç¶é¢ï¼å¹¶çæ§åºç¨è¿è¡ç¶æãä»¥ä¸æ¯å¶æ ¸å¿åè½ãå³é®æ¥å£åä½¿ç¨åºæ¯çè¯¦ç»ä»ç»ï¼\n\n\n# ä¸ãæ ¸å¿åè½\n\nperformance api ä¸»è¦è§£å³ä»¥ä¸é®é¢ï¼\n\n 1. ç²¾ç¡®è®¡æ¶ï¼æä¾é«ç²¾åº¦æ¶é´æ³ï¼æ¯«ç§çº§ï¼é¨åæµè§å¨æ¯æå¾®ç§çº§ï¼ï¼é¿å date.now() çç²¾åº¦éå¶ã\n 2. æ§è½ææ ééï¼è®°å½é¡µé¢çå½å¨æåé¶æ®µï¼å¦å¯¼èªãæ¸²æãèµæºå è½½ï¼çèæ¶ã\n 3. èµæºçæ§ï¼è·è¸ªå¾çãèæ¬ãæ ·å¼ç­èµæºçå è½½æ¶é´åç¶æã\n 4. ç¨æ·è¡ä¸ºåæï¼æµéäº¤äºäºä»¶ï¼å¦ç¹å»ãæ»å¨ï¼çååºå»¶è¿ã\n 5. é¿ææ§è½çæ§ï¼ç»å performanceobserver å®ç°å®æ¶æ°æ®æ¶éåä¸æ¥ã\n\n\n# äºãå³é®æ¥å£ä¸ä½¿ç¨æ¹æ³\n\n\n# 1. performance timingï¼æ§è½æ¶é´çº¿ï¼\n\n# ï¼1ï¼navigation timing api\n\nè®°å½é¡µé¢å¯¼èªï¼ä»ç¨æ·åèµ·è¯·æ±å°é¡µé¢å®å¨å è½½ï¼çåä¸ªé¶æ®µèæ¶ï¼éè¿ performance.timing æ performance.getentriesbytype('navigation')[0] è·åã\n\nç¤ºä¾å­æ®µï¼\n\nconst timing = performance.getentriesbytype('navigation')[0];\nconsole.log({\n  // ç¨æ·åèµ·è¯·æ±çæ¶é´æ³ï¼ç¸å¯¹äºé¡µé¢å è½½èµ·ç¹ï¼\n  navigationstart: timing.navigationstart,\n  // dnsæ¥è¯¢èæ¶\n  domainlookupend - timing.domainlookupstart,\n  // tcpè¿æ¥èæ¶\n  connectend - timing.connectstart,\n  // è¯·æ±å°ååºå¼å§ï¼ttfbï¼\n  responsestart - timing.requeststart,\n  // ååºæ°æ®æ¥æ¶èæ¶\n  responseend - timing.responsestart,\n  // domè§£æèæ¶\n  domcomplete - timing.dominteractive,\n  // é¡µé¢å®å¨å è½½èæ¶\n  loadeventend - timing.navigationstart,\n});\n\n\nå¯è§åå·¥å·ï¼ chrome devtools ç performance é¢æ¿ä¼èªå¨è§£æè¿äºæ°æ®ï¼çæçå¸å¾ï¼waterfall chartï¼ã\n\n# ï¼2ï¼paint timing api\n\nè®°å½é¡µé¢é¦æ¬¡æ¸²æï¼first paint, fpï¼åé¦æ¬¡åå®¹æ¸²æï¼first contentful paint, fcpï¼çæ¶é´ç¹ã\n\nconst paintentries = performance.getentriesbytype('paint');\nconsole.log({\n  'first paint': paintentries.find(e => e.name === 'first-paint')?.starttime,\n  'first contentful paint': paintentries.find(e => e.name === 'first-contentful-paint')?.starttime,\n});\n\n\n\n# 2. resource timing api\n\nçæ§ææèµæºï¼èæ¬ãæ ·å¼ãå¾çãxhr/fetchè¯·æ±ç­ï¼çå è½½æ§è½ï¼éè¿ performance.getentriesbytype('resource') è·åã\n\nç¤ºä¾å­æ®µï¼\n\nconst resources = performance.getentriesbytype('resource');\nresources.foreach(resource => {\n  console.log({\n    name: resource.name, // èµæºurl\n    duration: resource.duration, // æ»èæ¶\n    initiatortype: resource.initiatortype, // èµæºç±»åï¼script/img/cssç­ï¼\n    transfersize: resource.transfersize, // ä¼ è¾å¤§å°ï¼å«å¤´é¨ï¼\n    encodedbodysize: resource.encodedbodysize, // åç¼©åå¤§å°\n  });\n});\n\n\nåºç¨åºæ¯ï¼\n\n * è¯å«æ¢å è½½èµæºï¼å¦å¤§å¾çãæªåç¼©çjsæä»¶ï¼ã\n * åæç¬¬ä¸æ¹èæ¬ï¼å¦å¹¿åãåæå·¥å·ï¼å¯¹æ§è½çå½±åã\n\n\n# 3. user timing api\n\næ è®°èªå®ä¹ä»£ç æ®µçæ§è¡æ¶é´ï¼ç¨äºæµéå³é®ä¸å¡é»è¾çèæ¶ã\n\nç¤ºä¾ï¼\n\n// æ è®°å¼å§\nperformance.mark('api_request_start');\n \n// æ¨¡æå¼æ­¥è¯·æ±\nsettimeout(() => {\n  performance.mark('api_request_end');\n \n  // è®¡ç®åºé´èæ¶\n  const measure = performance.measure('api_request_duration', 'api_request_start', 'api_request_end');\n  console.log(measure.duration); // èæ¶ï¼æ¯«ç§ï¼\n}, 1000);\n\n\nä¼å¿ï¼ æ¯æå¨è®°å½ date.now() æ´ç²¾ç¡®ï¼ä¸å¯ä¸æµè§å¨æ§è½å·¥å·éæã\n\n\n# 4. performance observer api\n\nå®æ¶çå¬æ§è½äºä»¶ï¼å¦èµæºå è½½ãé¿ä»»å¡ç­ï¼ï¼é¿åè½®è¯¢æ¥è¯¢æ§è½æ°æ®ã\n\nç¤ºä¾ï¼\n\nconst observer = new performanceobserver((list) => {\n  const entries = list.getentries();\n  entries.foreach(entry => {\n    if (entry.entrytype === 'longtask') {\n      console.warn('long task detected:', entry.duration); // æ£æµé¿ä»»å¡ï¼>50msï¼\n    }\n  });\n});\n \n// çå¬é¿ä»»å¡åèµæºå è½½\nobserver.observe({ entrytypes: ['longtask', 'resource'] });\n\n\nå¸¸è§çå¬ç±»åï¼\n\n * paintï¼é¦æ¬¡æ¸²æäºä»¶ã\n * resourceï¼èµæºå è½½äºä»¶ã\n * longtaskï¼ä¸»çº¿ç¨è¢«é»å¡è¶è¿50msçä»»å¡ï¼å¯è½å¯¼è´å¡é¡¿ï¼ã\n * navigationï¼é¡µé¢å¯¼èªäºä»¶ã\n\n\n# 5. high resolution time api\n\næä¾é«ç²¾åº¦æ¶é´æ³ï¼performance.now()ï¼ï¼ç¸å¯¹äºé¡µé¢å è½½èµ·ç¹ï¼performance.timeoriginï¼ï¼ç²¾åº¦å¯è¾¾å¾®ç§çº§ï¼åæµè§å¨éå¶ï¼ã\n\nå¯¹æ¯ date.now()ï¼\n\nconsole.log(date.now()); // ç³»ç»æ¶é´ï¼å¯è½è¢«è°æ´ï¼å¦ç¨æ·ä¿®æ¹æ¶éï¼\nconsole.log(performance.now()); // ç¸å¯¹äºé¡µé¢å è½½çç¨³å®æ¶é´ï¼ä¸åç³»ç»æ¶é´å½±å\n\n\nåºç¨åºæ¯ï¼ ç²¾ç¡®æµéä»£ç æ§è¡æ¶é´ï¼å¦å¨ç»å¸§é´éãæ¸¸æé»è¾èæ¶ï¼ã\n\n\n# ä¸ãæ ¸å¿æ§è½ææ ï¼web vitalsï¼\n\ngoogle æåºç web vitals æ¯ä¸ç»å³é®æ§è½ææ ï¼å¯éè¿ performance api è®¡ç®ï¼\n\n 1. lcpï¼largest contentful paintï¼\n    \n    ï¼æå¤§åå®¹åç´ æ¸²ææ¶é´ï¼è¡¡éé¡µé¢ä¸»è¦åå®¹å è½½éåº¦ï¼ã\n    \n    const lcp = performance.getentriesbytype('largest-contentful-paint')[0];\n    console.log('lcp:', lcp.starttime);\n    \n\n 2. fidï¼first input delayï¼ï¼é¦æ¬¡è¾å¥å»¶è¿ï¼è¡¡éäº¤äºååºéåº¦ï¼ã ééè¿ event timing api æçå®ç¨æ·çæ§ï¼rumï¼è·åã\n\n 3. clsï¼cumulative layout shiftï¼ï¼ç´¯è®¡å¸å±åç§»ï¼è¡¡éé¡µé¢ç¨³å®æ§ï¼ã ééè¿ layout instability api è®¡ç®ã\n\n 4. ttiï¼time to interactiveï¼ï¼å¯äº¤äºæ¶é´ï¼è¡¡éé¡µé¢å®å¨å¯ç¨çæ¶é´ï¼ã éç»åé¿ä»»å¡åèµæºå è½½ç¶æè®¡ç®ã\n\n\n# åãå®éåºç¨æ¡ä¾\n\n\n# 1. æ§è½çæ§ä¸ä¸æ¥\n\nfunction reportperformance() {\n  const data = {\n    navigation: performance.getentriesbytype('navigation')[0],\n    resources: performance.getentriesbytype('resource').map(r => ({\n      url: r.name,\n      duration: r.duration,\n    })),\n    timings: {\n      fcp: performance.getentriesbyname('first-contentful-paint')[0]?.starttime,\n      lcp: performance.getentriesbytype('largest-contentful-paint')[0]?.starttime,\n    },\n  };\n \n  // ä¸æ¥å°åæå¹³å°ï¼å¦google analyticsãsentryï¼\n  navigator.sendbeacon('/api/performance', json.stringify(data));\n}\n \n// å¨é¡µé¢å¸è½½æ¶è§¦åä¸æ¥\nwindow.addeventlistener('beforeunload', reportperformance);\n\n\n\n# 2. ä¼åèµæºå è½½ç­ç¥\n\n// è¯å«æ¢å è½½èµæºå¹¶ä¼å\nconst slowresources = performance.getentriesbytype('resource')\n  .filter(r => r.duration > 1000) // è¿æ»¤èæ¶>1sçèµæº\n  .map(r => r.name);\n \nconsole.warn('slow resources:', slowresources);\n// è§£å³æ¹æ¡ï¼é¢å è½½ãcdnå éãä»£ç åå²\n\n\n\n# 3. æ£æµå¡é¡¿ï¼é¿ä»»å¡ï¼\n\nconst observer = new performanceobserver((list) => {\n  list.getentries().foreach(entry => {\n    if (entry.duration > 50) {\n      console.error('long task detected:', entry);\n      // è§£å³æ¹æ¡ï¼æåä»»å¡ãä½¿ç¨web worker\n    }\n  });\n});\nobserver.observe({ entrytypes: ['longtask'] });\n\n\n\n# äºãæµè§å¨å¼å®¹æ§\n\n * ä¸»æµæ¯æï¼ç°ä»£æµè§å¨ï¼chromeãfirefoxãedgeãsafariï¼åæ¯æ performance api çæ ¸å¿åè½ã\n\n * é¨åå·®å¼\n   \n   * performance.getentriesbytype('largest-contentful-paint') å¨æ§çæµè§å¨ä¸­å¯è½ç¼ºå¤±ã\n   * performanceobserver ç entrytypes æ¯æç¨åº¦ä¸åï¼å¦ longtask å¨é¨åç§»å¨ç«¯æµè§å¨ä¸­ä¸å¯ç¨ï¼ã\n\n * éçº§æ¹æ¡ï¼ä½¿ç¨ polyfillï¼å¦ web-vitals åºï¼æç¹å¾æ£æµã\n\n\n# å­ãæ»ç»\n\napi åç±»          æ ¸å¿æ¥å£                                       å¸ååºç¨åºæ¯\ntiming api      performance.timing                         åæé¡µé¢å è½½çå½å¨æ\nresource api    performance.getentriesbytype('resource')   çæ§èµæºå è½½æ§è½\nuser timing     performance.mark() / measure()             æµéèªå®ä¹ä»£ç æ®µèæ¶\nobserver api    performanceobserver                        å®æ¶çå¬æ§è½äºä»¶ï¼å¦é¿ä»»å¡ï¼\nhigh res time   performance.now()                          é«ç²¾åº¦è®¡æ¶ï¼å¨ç»ãæ¸¸æï¼\n\nperformance api æ¯åç«¯æ§è½ä¼åçâçå£«ååâï¼ç»å chrome devtools åèªå¨åçæ§å·¥å·ï¼å¦ lighthouseãsentryï¼ï¼å¯æå»ºå®æ´çæ§è½åæä½ç³»ãå¯¹äºå¾®åç«¯ãspa ç­å¤æåºç¨ï¼å®è½å¸®å©å¼åèç²¾åå®ä½å­åºç¨å è½½ãè·¯ç±åæ¢ç­åºæ¯çæ§è½é®é¢ã",charsets:{cjk:!0}},{title:"å¸¸ç¨å·¥å·åæä»¶",frontmatter:{},regularPath:"/tool/tool.html",relativePath:"tool/tool.md",key:"v-70043cdf",path:"/tool/tool.html",headers:[{level:2,title:"VSCode å¸¸ç¨æä»¶",slug:"vscode-å¸¸ç¨æä»¶",normalizedTitle:"vscode å¸¸ç¨æä»¶",charIndex:14},{level:2,title:"vue-dev-tools",slug:"vue-dev-tools",normalizedTitle:"vue-dev-tools",charIndex:705},{level:2,title:"Jsonview",slug:"jsonview",normalizedTitle:"jsonview",charIndex:739},{level:2,title:"Iterm2 + oh my zsh",slug:"iterm2-oh-my-zsh",normalizedTitle:"iterm2 + oh my zsh",charIndex:807},{level:2,title:"nvmån",slug:"nvmån",normalizedTitle:"nvmån",charIndex:967},{level:2,title:"homebrew",slug:"homebrew",normalizedTitle:"homebrew",charIndex:1030},{level:2,title:"tree",slug:"tree",normalizedTitle:"tree",charIndex:1127},{level:2,title:"npm, cnpm, yarn,tyarn",slug:"npm-cnpm-yarn-tyarn",normalizedTitle:"npm, cnpm, yarn,tyarn",charIndex:1170},{level:2,title:"åæ¶éç½®githubågitlab",slug:"åæ¶éç½®githubågitlab",normalizedTitle:"åæ¶éç½®githubågitlab",charIndex:1298},{level:2,title:"githubè®¿é®æ¢",slug:"githubè®¿é®æ¢",normalizedTitle:"githubè®¿é®æ¢",charIndex:864},{level:2,title:"carbon",slug:"carbon",normalizedTitle:"carbon",charIndex:2998},{level:2,title:"githubé¨ç½²",slug:"githubé¨ç½²",normalizedTitle:"githubé¨ç½²",charIndex:3033},{level:2,title:"tmux",slug:"tmux",normalizedTitle:"tmux",charIndex:3431},{level:2,title:"ç»å¾å·¥å·",slug:"ç»å¾å·¥å·",normalizedTitle:"ç»å¾å·¥å·",charIndex:3497},{level:2,title:"charles",slug:"charles",normalizedTitle:"charles",charIndex:3531},{level:3,title:"å¦ä½ä½¿ç¨ charles æåï¼APPï¼",slug:"å¦ä½ä½¿ç¨-charles-æå-app",normalizedTitle:"å¦ä½ä½¿ç¨ charles æåï¼appï¼",charIndex:3867},{level:2,title:"nodemon",slug:"nodemon",normalizedTitle:"nodemon",charIndex:4371},{level:2,title:"helm",slug:"helm",normalizedTitle:"helm",charIndex:4467},{level:2,title:"ipic",slug:"ipic",normalizedTitle:"ipic",charIndex:4527},{level:2,title:"Mac è½¯ä»¶",slug:"mac-è½¯ä»¶",normalizedTitle:"mac è½¯ä»¶",charIndex:4557},{level:2,title:"github cli",slug:"github-cli",normalizedTitle:"github cli",charIndex:4592},{level:2,title:"JSDoc",slug:"jsdoc",normalizedTitle:"jsdoc",charIndex:4914},{level:2,title:"HomeBrew æ¸åéå",slug:"homebrew-æ¸åéå",normalizedTitle:"homebrew æ¸åéå",charIndex:4958},{level:2,title:"python",slug:"python",normalizedTitle:"python",charIndex:5213},{level:3,title:"æ¥çå¯å®è£ Python çæ¬",slug:"æ¥çå¯å®è£-python-çæ¬",normalizedTitle:"æ¥çå¯å®è£ python çæ¬",charIndex:5941}],lastUpdated:"11/7/2023, 7:15:29 PM",lastUpdatedTimestamp:1699355729e3,headersStr:"VSCode å¸¸ç¨æä»¶ vue-dev-tools Jsonview Iterm2 + oh my zsh nvmån homebrew tree npm, cnpm, yarn,tyarn åæ¶éç½®githubågitlab githubè®¿é®æ¢ carbon githubé¨ç½² tmux ç»å¾å·¥å· charles å¦ä½ä½¿ç¨ charles æåï¼APPï¼ nodemon helm ipic Mac è½¯ä»¶ github cli JSDoc HomeBrew æ¸åéå python æ¥çå¯å®è£ Python çæ¬",content:'# å¸¸ç¨å·¥å·åæä»¶\n\n\n# VSCode å¸¸ç¨æä»¶\n\n * Git Historyï¼ æ¥ç git åå²\n * Leetcodeï¼å·é¢å¿å¤\n * Bracket Pair Colorizerï¼æ¬å·å¹é\n * GitLensï¼å¨ vscode ä¸ä½¿ç¨ git åè½\n * Chinese (Simplified) Language Pack for Visual Studio Codeï¼ä¸­æè®¾ç½®\n\n> å®è£åï¼å¨ locale.json ä¸­æ·»å  "locale": "zh-cn"ï¼å³å¯è½½å¥ä¸­æï¼ç®ä½ï¼è¯­è¨åãè¦ä¿®æ¹ locale.jsonï¼ä½ å¯ä»¥åæ¶æä¸ Ctrl+Shift+P æå¼å½ä»¤é¢æ¿ï¼ä¹åè¾å¥ "config" ç­éå¯ç¨å½ä»¤åè¡¨ï¼æåéæ©éç½®è¯­è¨å½ä»¤ã\n\n * Babel JavaScriptï¼JavaScript è¯­æ³é«äº®æ¾ç¤º\n * ESLint\n * Live Server\n * open in browser\n * Minappï¼å¾®ä¿¡å°ç¨åºæ ç­¾ãå±æ§çæºè½è¡¥å¨\n * wechat-snippetï¼å¾®ä¿¡å°ç¨åºä»£ç è¾å©\n * wxmlï¼å¾®ä¿¡å°ç¨åº wxml æ ¼å¼åä»¥åé«äº®ç»ä»¶\n * Vetur: æ¯ævueæä»¶çè¯­æ³é«äº®æ¾ç¤ºï¼é¤äºæ¯ætemplateæ¨¡æ¿ä»¥å¤ï¼è¿æ¯æå¤§å¤æ°ä¸»æµçåç«¯å¼åèæ¬åæä»¶ï¼æ¯å¦SassåTypeScript\n * vscode-icons\n * vue-helperæä»¶ï¼ä»£ç æç¤ºï¼å½æ°è·³è½¬\n * Codelfï¼å³é®åéå½å\n * any-ruleï¼æ­£åå¤§å¨\n * es6-string-htmlï¼æ¨¡æ¿å­ç¬¦ä¸²é«äº®\n * æ¨¡æ¿å­ç¬¦ä¸²é­å\n * èªå¨è¡¥å¨\n\n\n# vue-dev-tools\n\n> æ§å¶å°è°è¯ vueï¼å®è£\n\n\n# Jsonview\n\nhttps://github.com/gildas-lormeau/JSONView-for-Chrome\n\n\n# Iterm2 + oh my zsh\n\niTerm2 + Oh My Zsh æé èéç»ç«¯ä½éª\n\nå¶ä¸­å­ä½åç­èµæºgithubè®¿é®æ¢å¯ä»¥å»giteeä¸æ¾\n\noh my zshå½ä»¤æç¤ºåè½ ,æç¤ºé¢è²å¨ perference / profiles / color / ANSI Colors / Brightè®¾ç½®\n\n\n# nvmån\n\nå®è£nodeï¼brew install node\n\nç®¡çnodeçæ¬å·¥å·ï¼nvmæènï¼ææ¯è¾åæ¬¢ç¨n\n\n\n# homebrew\n\nHomebrewæ¯ä¸æ¬¾èªç±åå¼æ¾æºä»£ç çè½¯ä»¶åç®¡çç³»ç»ï¼ç¨ä»¥ç®åmacOSç³»ç»ä¸çè½¯ä»¶å®è£è¿ç¨ãå¯¹äºAppstoreä¸­æ²¡æçè½¯ä»¶ï¼æ¨èä½¿ç¨æ­¤æ¹æ³å®è£ç®¡çç¬¬ä¸æ¹è½¯ä»¶ã\n\n\n# tree\n\nå®è£ï¼brew install tree\n\nä½¿ç¨ï¼tree -a\n\n\n# npm, cnpm, yarn,tyarn\n\nä¸è½½å® node å°±èªå¨æäº npm\n\nnpm install -g cnpm --registry=https://registry.npm.taobao.org\n\n\ncnpm i -g yarn\n\n\n\n# åæ¶éç½®githubågitlab\n\nçæå¬é¥ï¼ssh-keygen -t rsa -C 915397405@qq.com -f ~/.ssh/id_rsa_github\n\nè¿å¥ ssh éç½®ç®å½ï¼cd ~/.ssh\n\néç½®æä»¶çæï¼sudo source config\n\ngitéç½®githubä¸gitlabåæ¶ä½¿ç¨\n\n# gitlab\nHost icode\n  HostName gitlab.com\n  PreferredAuthentications publickey\n  IdentityFile ~/.ssh/id_rsa\n\n# github\nHost github\n  HostName github.com\n  User 915397405@qq.com\n  PreferredAuthentications publickey\n  IdentityFile ~/.ssh/id_rsa_github\n\n\nå¦æåºç°äº git@github.com: Permission denied (publickey).\n\nå¯ä»¥è¿å¥sshç®å½è¿è¡ä¸ssh-add id_rsa_githubè¯è¯\n\n----------------------------------------\n\nå¦æåºç°ä»¥ä¸éè¯¯ï¼Bad owner or permissions on .ssh/config\n\nè¿ä¸ªæ¶åï¼åªéè¦å¨.sshç®å½ï¼æ§è¡ä»¥ä¸å½ä»¤è¡ï¼sudo chmod 600 config\n\n----------------------------------------\n\nkex_exchange_identification: Connection closed by remote host\nfatal: Could not read from remote repository.\n\nPlease make sure you have the correct access rights\nand the repository exists.\n\n\nåéç½®ä¸ hosts ä¸­ç github ip å°åå³å¯\n\n----------------------------------------\n\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nIT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!\nSomeone could be eavesdropping on you right now (man-in-the-middle attack)!\n\n// å é¤ä¸ know_hosts éæ° push\nssh-keygen -R github.com\n\n\n----------------------------------------\n\nUnable to negotiate with xx.xx.xx.xx port xxxx: no matching host key type found. Their offer: ssh-rsa\nfatal: Could not read from remote repository.\n\nPlease make sure you have the correct access rights\nand the repository exists.\n\n// config ä¸­å¢å éç½®\nHost *\nHostkeyAlgorithms +ssh-rsa\nPubkeyAcceptedKeyTypes +ssh-rsa\n\n\n\n# githubè®¿é®æ¢\n\nè§£å³GitHubä¸è½½éåº¦å¤ªæ¢é®é¢\n\n\n# carbon\n\nhttps://carbon.now.sh/\n\n\n# githubé¨ç½²\n\né¡¹ç®ä¸­æ°å»ºèæ¬ scripts/deploy-gh.sh\n\n# ç¡®ä¿èæ¬æåºéå°çéè¯¯\nset -e\n\n# çæéææä»¶\nnpm run build\n\n# è¿å¥çæçæä»¶å¤¹\ncd dist\n\n# git å½ä»¤\ngit init\ngit add .\ngit commit -m \'deploy\'\n\n# åå¸: git push -f git@github.com:<USERNAME>/<REPO>.git master:gh-pages\ngit push -f git@github.com:jinjingxuan/san-admin.git master:gh-pages\n\n# è¿åä¸ä¸æ¬¡çå·¥ä½ç®å½\ncd -\n\n\npackage.jsonä¸­ï¼\n\n"scripts": {\n  "deploy-gh": "bash scripts/deploy-gh.sh"\n}\n\n\n\n# tmux\n\nå¼åæºå¸¸ç¨\n\nhttp://www.ruanyifeng.com/blog/2019/10/tmux.html\n\n\n# ç»å¾å·¥å·\n\nhttps://excalidraw.com/\n\n\n# charles\n\n\n\ncharles ç¸å½äºæå¨æå¡å¨åå®¢æ·ç«¯ä¹é´çè¿æ»¤å¨ï¼å½å®¢æ·ç«¯åæå¡å¨åèµ·è¯·æ±çæ¶åï¼åå° charles è¿è¡è¿æ»¤ï¼ç¶å charles å¨ææç»çæ°æ®åéç»æå¡å¨ãæå¡å¨æ¥æ¶è¯·æ±åçè¿åæ°æ®ï¼ä¹ä¼åå° charlesï¼ç»è¿ charles è¿æ»¤åååç»å®¢æ·ç«¯ãcharles åç»æå¡å¨çæ°æ®ï¼ä¸ä¸å®æ¯å®¢æ·ç«¯è¯·æ±çæ°æ®ï¼charles å¨æ¥å°å®¢æ·ç«¯çè¯·æ±æ¶å¯ä»¥èªç±çä¿®æ¹æ°æ®ãåçï¼å®¢æ·ç«¯æ¥æ¶çæ°æ®ï¼ä¸ä¸å®å°±æ¯æå¡å¨è¿åçæ°æ®ï¼èæ¯ charles ç»çæ°æ®ã(ç±»ä¼¼ä¸­é´äººæ»å»)\n\nå®ç½ï¼https://www.charlesproxy.com/\n\nç ´è§£ï¼https://www.zzzmode.com/mytools/charles/\n\n\n# å¦ä½ä½¿ç¨ charles æåï¼APPï¼\n\n 1. ç¹å»é¡¶é¨èåæ ãHelpã--\x3eéæ©ãSSL Proxyingãï¼ç¹å»ãinstall Charles Root Certificateãå¨ mac ä¸å®è£ Charles æ ¹è¯ä¹¦å³å¯ï¼ ç¹å»å®è£ãInstall Charles Root Certificate On a Mobile Device or Remote Browserãå¨ç§»å¨è®¾å¤ä¸æè¿ç¨æµè§å¨å®è£è¯ä¹¦ï¼\n\n\n\n 2. ä¿è¯ææºå mac å¨åä¸å±åç½åï¼wifi éç½®æå¨ä»£çï¼æ charles ç»åºç ip å ç«¯å£å·ï¼ï¼ç¶åè®¿é® chls.pro/ssl ä¸è½½è¯ä¹¦ï¼ç¶åéç¨ -> å³äºæ¬æº -> è¯ä¹¦ä¿¡ä»»è®¾ç½®ä¸­éä¸­ Charles çè¯ä¹¦\n\n\n\n 3. æ£æ¥ä¸ charles proxy setting\n\n\n\n 4. æ¥ä¸æ¥å°±å¯ä»¥æåäºï¼å¦æåºç°çº¢åä»¥ä¸æåµï¼å¯è½æ¯è¯ä¹¦è¿æäºããHelpã--\x3eãSSL Proxyingã--\x3e ãReset Charles Root Certificateãéç½®è¯ä¹¦ï¼ææºä¸ä¹æä¹åä¸è½½å¥½çè¯ä¹¦å¸è½½æï¼æç§ä»¥ä¸æ­¥éª¤éæ°å®è£ã\n\n\n\n\n# nodemon\n\nnodemonæ¯ä¸ç§å·¥å·ï¼å¯ä»¥èªå¨æ£æµå°ç®å½ä¸­çæä»¶æ´æ¹æ¶éè¿éæ°å¯å¨åºç¨ç¨åºæ¥è°è¯åºäºnode.jsçåºç¨ç¨åºã\n\nnpm install -g nodemon\n\n\n\n# helm\n\nMac ä¸ä¿®æ¹ host æä»¶çå·¥å·ï¼Appstoreä¸­å°±è½ä¸è½½ãå¯ä»¥å»ºå¤ä»½éç½®æä»¶æ¥ååæ¢ã\n\n\n\n\n# ipic\n\nå¾åºå·¥å·ï¼Appstoreä¸­å°±è½ä¸è½½ã\n\n\n# Mac è½¯ä»¶\n\nhttps://www.macwk.com/\n\n\n# github cli\n\nå½æä»¬å°æ¬å°ä»£ç æäº¤å° GitHub åï¼å°±å¯ä»¥å¨ GitHub ç½ç«ä¸æ¥çå°åç§çäº¤äºä¿¡æ¯äºï¼ä¾å¦å¶å®å¼åèæç Issueï¼æèæäº¤çä»£ç åå¹¶è¯·æ±ç­ãä½æ¯ï¼å¦ææä»¬è½å¨å½ä»¤è¡ä¸ç´æ¥æ¥çãå¤çè¿äºä¿¡æ¯ï¼é£ä¹å°±æäº github cli\n\nå®ç½ï¼https://cli.github.com/\n\nå®è£ï¼brew install gh\n\næ´æ°ï¼brew update && brew upgrade gh\n\nææç»å½ï¼gh auth loginï¼éè¿å½ä»¤è¡äº¤äºä¼è°èµ·æµè§å¨ github è¿è¡ææï¼\n\næ¥ç issue åè¡¨ï¼gh issue list\n\nåæ¢å° pr åæ¯ï¼gh pr checkout 111\n\n\n# JSDoc\n\njsæ³¨éå·¥å·ï¼https://www.jsdoc.com.cn/\n\n\n# HomeBrew æ¸åéå\n\nhttps://mirrors.tuna.tsinghua.edu.cn/help/homebrew/\n\nbrew å®è£ phpï¼https://stackoverflow.com/questions/70417377/error-php7-3-has-been-disabled-because-it-is-a-versioned-formulaãhttps://github.com/shivammathur/homebrew-php/discussions/743\n\n\n# python\n\nå¨è·é¡¹ç®æ¶æ¥äºè¿ä¸ªéï¼\n\n> "Can\'t find Python executable "python", you can set the PYTHON env variable."\n\né®é¢æ¯æ¾ä¸å° python å½ä»¤ï¼ç¶èæççµèä¸­è£äº python3ï¼è¾å¥ python3 ok ä½æ¯è¾å¥ python æ¶ç¡®å®æ²¡æãäºæ¯æç§stackoverflowè§£å³äºä¸ã\n\npyenv æ¯Python çæ¬ç®¡çå·¥å·ã pyenv å¯ä»¥æ¹åå¨å±çPython çæ¬ï¼å¨ç³»ç»ä¸­å®è£å¤ä¸ªçæ¬çPython\n\n> npm ERR! gyp info it worked if it ends with ok npm ERR! gyp info using node-gyp@3.8.0 npm ERR! gyp info using node@16.0.0 | darwin | x64 npm ERR! gyp ERR! configure error npm ERR! gyp ERR! stack Error: Command failed: /Users/jinjingxuan/.pyenv/shims/python -c import sys; print "%s.%s.%s" % sys.version_info[:3]; npm ERR! gyp ERR! stack File "", line 1 npm ERR! gyp ERR! stack import sys; print "%s.%s.%s" % sys.version_info[:3];\n\nåå ä¸è¬æ¯æ¬æºå®è£äºpython3ï¼ä½ä¾èµçèæ¬æpython2ç\n\n\n# æ¥çå¯å®è£ Python çæ¬\n\nä½¿ç¨å¦ä¸å½ä»¤æ¥çå¯å®è£çæ¬\n\n$ pyenv install -l\n$ pyenv install 2.7.3   # å®è£ python\n$ pyenv uninstall 2.7.3 # å¸è½½ python\n$ pyenv global 2.7.3  # è®¾ç½®å¨å±ç Python çæ¬ï¼éè¿å°çæ¬å·åå¥ ~/.pyenv/version æä»¶çæ¹å¼ã\n$ pyenv local 2.7.3 # è®¾ç½® Python æ¬å°çæ¬ï¼éè¿å°çæ¬å·åå¥å½åç®å½ä¸ç .python-version æä»¶çæ¹å¼ãéè¿è¿ç§æ¹å¼è®¾ç½®ç Python çæ¬ä¼åçº§è¾ global é«ã\n\n\nè¿éå°äºè¿ä¸ªé®é¢\n\n> BUILD FAILED (OS X 13.4 using python-build 20180424)\n\n# æåè¿æ ·å®è£æåäº\nbrew intall gcc \nCC=/usr/bin/gcc pyenv install 2.7.18\n',normalizedContent:'# å¸¸ç¨å·¥å·åæä»¶\n\n\n# vscode å¸¸ç¨æä»¶\n\n * git historyï¼ æ¥ç git åå²\n * leetcodeï¼å·é¢å¿å¤\n * bracket pair colorizerï¼æ¬å·å¹é\n * gitlensï¼å¨ vscode ä¸ä½¿ç¨ git åè½\n * chinese (simplified) language pack for visual studio codeï¼ä¸­æè®¾ç½®\n\n> å®è£åï¼å¨ locale.json ä¸­æ·»å  "locale": "zh-cn"ï¼å³å¯è½½å¥ä¸­æï¼ç®ä½ï¼è¯­è¨åãè¦ä¿®æ¹ locale.jsonï¼ä½ å¯ä»¥åæ¶æä¸ ctrl+shift+p æå¼å½ä»¤é¢æ¿ï¼ä¹åè¾å¥ "config" ç­éå¯ç¨å½ä»¤åè¡¨ï¼æåéæ©éç½®è¯­è¨å½ä»¤ã\n\n * babel javascriptï¼javascript è¯­æ³é«äº®æ¾ç¤º\n * eslint\n * live server\n * open in browser\n * minappï¼å¾®ä¿¡å°ç¨åºæ ç­¾ãå±æ§çæºè½è¡¥å¨\n * wechat-snippetï¼å¾®ä¿¡å°ç¨åºä»£ç è¾å©\n * wxmlï¼å¾®ä¿¡å°ç¨åº wxml æ ¼å¼åä»¥åé«äº®ç»ä»¶\n * vetur: æ¯ævueæä»¶çè¯­æ³é«äº®æ¾ç¤ºï¼é¤äºæ¯ætemplateæ¨¡æ¿ä»¥å¤ï¼è¿æ¯æå¤§å¤æ°ä¸»æµçåç«¯å¼åèæ¬åæä»¶ï¼æ¯å¦sassåtypescript\n * vscode-icons\n * vue-helperæä»¶ï¼ä»£ç æç¤ºï¼å½æ°è·³è½¬\n * codelfï¼å³é®åéå½å\n * any-ruleï¼æ­£åå¤§å¨\n * es6-string-htmlï¼æ¨¡æ¿å­ç¬¦ä¸²é«äº®\n * æ¨¡æ¿å­ç¬¦ä¸²é­å\n * èªå¨è¡¥å¨\n\n\n# vue-dev-tools\n\n> æ§å¶å°è°è¯ vueï¼å®è£\n\n\n# jsonview\n\nhttps://github.com/gildas-lormeau/jsonview-for-chrome\n\n\n# iterm2 + oh my zsh\n\niterm2 + oh my zsh æé èéç»ç«¯ä½éª\n\nå¶ä¸­å­ä½åç­èµæºgithubè®¿é®æ¢å¯ä»¥å»giteeä¸æ¾\n\noh my zshå½ä»¤æç¤ºåè½ ,æç¤ºé¢è²å¨ perference / profiles / color / ansi colors / brightè®¾ç½®\n\n\n# nvmån\n\nå®è£nodeï¼brew install node\n\nç®¡çnodeçæ¬å·¥å·ï¼nvmæènï¼ææ¯è¾åæ¬¢ç¨n\n\n\n# homebrew\n\nhomebrewæ¯ä¸æ¬¾èªç±åå¼æ¾æºä»£ç çè½¯ä»¶åç®¡çç³»ç»ï¼ç¨ä»¥ç®åmacosç³»ç»ä¸çè½¯ä»¶å®è£è¿ç¨ãå¯¹äºappstoreä¸­æ²¡æçè½¯ä»¶ï¼æ¨èä½¿ç¨æ­¤æ¹æ³å®è£ç®¡çç¬¬ä¸æ¹è½¯ä»¶ã\n\n\n# tree\n\nå®è£ï¼brew install tree\n\nä½¿ç¨ï¼tree -a\n\n\n# npm, cnpm, yarn,tyarn\n\nä¸è½½å® node å°±èªå¨æäº npm\n\nnpm install -g cnpm --registry=https://registry.npm.taobao.org\n\n\ncnpm i -g yarn\n\n\n\n# åæ¶éç½®githubågitlab\n\nçæå¬é¥ï¼ssh-keygen -t rsa -c 915397405@qq.com -f ~/.ssh/id_rsa_github\n\nè¿å¥ ssh éç½®ç®å½ï¼cd ~/.ssh\n\néç½®æä»¶çæï¼sudo source config\n\ngitéç½®githubä¸gitlabåæ¶ä½¿ç¨\n\n# gitlab\nhost icode\n  hostname gitlab.com\n  preferredauthentications publickey\n  identityfile ~/.ssh/id_rsa\n\n# github\nhost github\n  hostname github.com\n  user 915397405@qq.com\n  preferredauthentications publickey\n  identityfile ~/.ssh/id_rsa_github\n\n\nå¦æåºç°äº git@github.com: permission denied (publickey).\n\nå¯ä»¥è¿å¥sshç®å½è¿è¡ä¸ssh-add id_rsa_githubè¯è¯\n\n----------------------------------------\n\nå¦æåºç°ä»¥ä¸éè¯¯ï¼bad owner or permissions on .ssh/config\n\nè¿ä¸ªæ¶åï¼åªéè¦å¨.sshç®å½ï¼æ§è¡ä»¥ä¸å½ä»¤è¡ï¼sudo chmod 600 config\n\n----------------------------------------\n\nkex_exchange_identification: connection closed by remote host\nfatal: could not read from remote repository.\n\nplease make sure you have the correct access rights\nand the repository exists.\n\n\nåéç½®ä¸ hosts ä¸­ç github ip å°åå³å¯\n\n----------------------------------------\n\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n@    warning: remote host identification has changed!     @\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nit is possible that someone is doing something nasty!\nsomeone could be eavesdropping on you right now (man-in-the-middle attack)!\n\n// å é¤ä¸ know_hosts éæ° push\nssh-keygen -r github.com\n\n\n----------------------------------------\n\nunable to negotiate with xx.xx.xx.xx port xxxx: no matching host key type found. their offer: ssh-rsa\nfatal: could not read from remote repository.\n\nplease make sure you have the correct access rights\nand the repository exists.\n\n// config ä¸­å¢å éç½®\nhost *\nhostkeyalgorithms +ssh-rsa\npubkeyacceptedkeytypes +ssh-rsa\n\n\n\n# githubè®¿é®æ¢\n\nè§£å³githubä¸è½½éåº¦å¤ªæ¢é®é¢\n\n\n# carbon\n\nhttps://carbon.now.sh/\n\n\n# githubé¨ç½²\n\né¡¹ç®ä¸­æ°å»ºèæ¬ scripts/deploy-gh.sh\n\n# ç¡®ä¿èæ¬æåºéå°çéè¯¯\nset -e\n\n# çæéææä»¶\nnpm run build\n\n# è¿å¥çæçæä»¶å¤¹\ncd dist\n\n# git å½ä»¤\ngit init\ngit add .\ngit commit -m \'deploy\'\n\n# åå¸: git push -f git@github.com:<username>/<repo>.git master:gh-pages\ngit push -f git@github.com:jinjingxuan/san-admin.git master:gh-pages\n\n# è¿åä¸ä¸æ¬¡çå·¥ä½ç®å½\ncd -\n\n\npackage.jsonä¸­ï¼\n\n"scripts": {\n  "deploy-gh": "bash scripts/deploy-gh.sh"\n}\n\n\n\n# tmux\n\nå¼åæºå¸¸ç¨\n\nhttp://www.ruanyifeng.com/blog/2019/10/tmux.html\n\n\n# ç»å¾å·¥å·\n\nhttps://excalidraw.com/\n\n\n# charles\n\n\n\ncharles ç¸å½äºæå¨æå¡å¨åå®¢æ·ç«¯ä¹é´çè¿æ»¤å¨ï¼å½å®¢æ·ç«¯åæå¡å¨åèµ·è¯·æ±çæ¶åï¼åå° charles è¿è¡è¿æ»¤ï¼ç¶å charles å¨ææç»çæ°æ®åéç»æå¡å¨ãæå¡å¨æ¥æ¶è¯·æ±åçè¿åæ°æ®ï¼ä¹ä¼åå° charlesï¼ç»è¿ charles è¿æ»¤åååç»å®¢æ·ç«¯ãcharles åç»æå¡å¨çæ°æ®ï¼ä¸ä¸å®æ¯å®¢æ·ç«¯è¯·æ±çæ°æ®ï¼charles å¨æ¥å°å®¢æ·ç«¯çè¯·æ±æ¶å¯ä»¥èªç±çä¿®æ¹æ°æ®ãåçï¼å®¢æ·ç«¯æ¥æ¶çæ°æ®ï¼ä¸ä¸å®å°±æ¯æå¡å¨è¿åçæ°æ®ï¼èæ¯ charles ç»çæ°æ®ã(ç±»ä¼¼ä¸­é´äººæ»å»)\n\nå®ç½ï¼https://www.charlesproxy.com/\n\nç ´è§£ï¼https://www.zzzmode.com/mytools/charles/\n\n\n# å¦ä½ä½¿ç¨ charles æåï¼appï¼\n\n 1. ç¹å»é¡¶é¨èåæ ãhelpã--\x3eéæ©ãssl proxyingãï¼ç¹å»ãinstall charles root certificateãå¨ mac ä¸å®è£ charles æ ¹è¯ä¹¦å³å¯ï¼ ç¹å»å®è£ãinstall charles root certificate on a mobile device or remote browserãå¨ç§»å¨è®¾å¤ä¸æè¿ç¨æµè§å¨å®è£è¯ä¹¦ï¼\n\n\n\n 2. ä¿è¯ææºå mac å¨åä¸å±åç½åï¼wifi éç½®æå¨ä»£çï¼æ charles ç»åºç ip å ç«¯å£å·ï¼ï¼ç¶åè®¿é® chls.pro/ssl ä¸è½½è¯ä¹¦ï¼ç¶åéç¨ -> å³äºæ¬æº -> è¯ä¹¦ä¿¡ä»»è®¾ç½®ä¸­éä¸­ charles çè¯ä¹¦\n\n\n\n 3. æ£æ¥ä¸ charles proxy setting\n\n\n\n 4. æ¥ä¸æ¥å°±å¯ä»¥æåäºï¼å¦æåºç°çº¢åä»¥ä¸æåµï¼å¯è½æ¯è¯ä¹¦è¿æäºããhelpã--\x3eãssl proxyingã--\x3e ãreset charles root certificateãéç½®è¯ä¹¦ï¼ææºä¸ä¹æä¹åä¸è½½å¥½çè¯ä¹¦å¸è½½æï¼æç§ä»¥ä¸æ­¥éª¤éæ°å®è£ã\n\n\n\n\n# nodemon\n\nnodemonæ¯ä¸ç§å·¥å·ï¼å¯ä»¥èªå¨æ£æµå°ç®å½ä¸­çæä»¶æ´æ¹æ¶éè¿éæ°å¯å¨åºç¨ç¨åºæ¥è°è¯åºäºnode.jsçåºç¨ç¨åºã\n\nnpm install -g nodemon\n\n\n\n# helm\n\nmac ä¸ä¿®æ¹ host æä»¶çå·¥å·ï¼appstoreä¸­å°±è½ä¸è½½ãå¯ä»¥å»ºå¤ä»½éç½®æä»¶æ¥ååæ¢ã\n\n\n\n\n# ipic\n\nå¾åºå·¥å·ï¼appstoreä¸­å°±è½ä¸è½½ã\n\n\n# mac è½¯ä»¶\n\nhttps://www.macwk.com/\n\n\n# github cli\n\nå½æä»¬å°æ¬å°ä»£ç æäº¤å° github åï¼å°±å¯ä»¥å¨ github ç½ç«ä¸æ¥çå°åç§çäº¤äºä¿¡æ¯äºï¼ä¾å¦å¶å®å¼åèæç issueï¼æèæäº¤çä»£ç åå¹¶è¯·æ±ç­ãä½æ¯ï¼å¦ææä»¬è½å¨å½ä»¤è¡ä¸ç´æ¥æ¥çãå¤çè¿äºä¿¡æ¯ï¼é£ä¹å°±æäº github cli\n\nå®ç½ï¼https://cli.github.com/\n\nå®è£ï¼brew install gh\n\næ´æ°ï¼brew update && brew upgrade gh\n\nææç»å½ï¼gh auth loginï¼éè¿å½ä»¤è¡äº¤äºä¼è°èµ·æµè§å¨ github è¿è¡ææï¼\n\næ¥ç issue åè¡¨ï¼gh issue list\n\nåæ¢å° pr åæ¯ï¼gh pr checkout 111\n\n\n# jsdoc\n\njsæ³¨éå·¥å·ï¼https://www.jsdoc.com.cn/\n\n\n# homebrew æ¸åéå\n\nhttps://mirrors.tuna.tsinghua.edu.cn/help/homebrew/\n\nbrew å®è£ phpï¼https://stackoverflow.com/questions/70417377/error-php7-3-has-been-disabled-because-it-is-a-versioned-formulaãhttps://github.com/shivammathur/homebrew-php/discussions/743\n\n\n# python\n\nå¨è·é¡¹ç®æ¶æ¥äºè¿ä¸ªéï¼\n\n> "can\'t find python executable "python", you can set the python env variable."\n\né®é¢æ¯æ¾ä¸å° python å½ä»¤ï¼ç¶èæççµèä¸­è£äº python3ï¼è¾å¥ python3 ok ä½æ¯è¾å¥ python æ¶ç¡®å®æ²¡æãäºæ¯æç§stackoverflowè§£å³äºä¸ã\n\npyenv æ¯python çæ¬ç®¡çå·¥å·ã pyenv å¯ä»¥æ¹åå¨å±çpython çæ¬ï¼å¨ç³»ç»ä¸­å®è£å¤ä¸ªçæ¬çpython\n\n> npm err! gyp info it worked if it ends with ok npm err! gyp info using node-gyp@3.8.0 npm err! gyp info using node@16.0.0 | darwin | x64 npm err! gyp err! configure error npm err! gyp err! stack error: command failed: /users/jinjingxuan/.pyenv/shims/python -c import sys; print "%s.%s.%s" % sys.version_info[:3]; npm err! gyp err! stack file "", line 1 npm err! gyp err! stack import sys; print "%s.%s.%s" % sys.version_info[:3];\n\nåå ä¸è¬æ¯æ¬æºå®è£äºpython3ï¼ä½ä¾èµçèæ¬æpython2ç\n\n\n# æ¥çå¯å®è£ python çæ¬\n\nä½¿ç¨å¦ä¸å½ä»¤æ¥çå¯å®è£çæ¬\n\n$ pyenv install -l\n$ pyenv install 2.7.3   # å®è£ python\n$ pyenv uninstall 2.7.3 # å¸è½½ python\n$ pyenv global 2.7.3  # è®¾ç½®å¨å±ç python çæ¬ï¼éè¿å°çæ¬å·åå¥ ~/.pyenv/version æä»¶çæ¹å¼ã\n$ pyenv local 2.7.3 # è®¾ç½® python æ¬å°çæ¬ï¼éè¿å°çæ¬å·åå¥å½åç®å½ä¸ç .python-version æä»¶çæ¹å¼ãéè¿è¿ç§æ¹å¼è®¾ç½®ç python çæ¬ä¼åçº§è¾ global é«ã\n\n\nè¿éå°äºè¿ä¸ªé®é¢\n\n> build failed (os x 13.4 using python-build 20180424)\n\n# æåè¿æ ·å®è£æåäº\nbrew intall gcc \ncc=/usr/bin/gcc pyenv install 2.7.18\n',charsets:{cjk:!0}},{title:"TypeScript è¿é¶",frontmatter:{},regularPath:"/ts/ts-advance.html",relativePath:"ts/ts-advance.md",key:"v-d9099882",path:"/ts/ts-advance.html",headers:[{level:2,title:"ç±»åæ­è¨",slug:"ç±»åæ­è¨",normalizedTitle:"ç±»åæ­è¨",charIndex:20},{level:3,title:"è¯­æ³",slug:"è¯­æ³",normalizedTitle:"è¯­æ³",charIndex:91},{level:3,title:"ç±»åæ­è¨ä¸ç±»åè½¬æ¢",slug:"ç±»åæ­è¨ä¸ç±»åè½¬æ¢",normalizedTitle:"ç±»åæ­è¨ä¸ç±»åè½¬æ¢",charIndex:585},{level:3,title:"ç±»åæ­è¨å¯è½æ¯æå®³ç",slug:"ç±»åæ­è¨å¯è½æ¯æå®³ç",normalizedTitle:"ç±»åæ­è¨å¯è½æ¯æå®³ç",charIndex:679},{level:3,title:"åéæ­è¨",slug:"åéæ­è¨",normalizedTitle:"åéæ­è¨",charIndex:808},{level:2,title:"ç±»åä¿æ¤",slug:"ç±»åä¿æ¤",normalizedTitle:"ç±»åä¿æ¤",charIndex:28},{level:3,title:"typeof",slug:"typeof",normalizedTitle:"typeof",charIndex:1325},{level:3,title:"instanceof",slug:"instanceof",normalizedTitle:"instanceof",charIndex:1312},{level:3,title:"in",slug:"in",normalizedTitle:"in",charIndex:474},{level:3,title:"èªå®ä¹ç±»åä¿æ¤",slug:"èªå®ä¹ç±»åä¿æ¤",normalizedTitle:"èªå®ä¹ç±»åä¿æ¤",charIndex:2761},{level:2,title:"ç±»åæ¨æ­",slug:"ç±»åæ¨æ­",normalizedTitle:"ç±»åæ¨æ­",charIndex:36},{level:3,title:"å®ä¹åé",slug:"å®ä¹åé",normalizedTitle:"å®ä¹åé",charIndex:3315},{level:3,title:"å½æ°è¿åå¼",slug:"å½æ°è¿åå¼",normalizedTitle:"å½æ°è¿åå¼",charIndex:3444},{level:3,title:"èµå¼",slug:"èµå¼",normalizedTitle:"èµå¼",charIndex:1121},{level:3,title:"ç»æå",slug:"ç»æå",normalizedTitle:"ç»æå",charIndex:3778}],lastUpdated:"9/30/2021, 3:27:11 PM",lastUpdatedTimestamp:1632986831e3,headersStr:"ç±»åæ­è¨ è¯­æ³ ç±»åæ­è¨ä¸ç±»åè½¬æ¢ ç±»åæ­è¨å¯è½æ¯æå®³ç åéæ­è¨ ç±»åä¿æ¤ typeof instanceof in èªå®ä¹ç±»åä¿æ¤ ç±»åæ¨æ­ å®ä¹åé å½æ°è¿åå¼ èµå¼ ç»æå",content:"# TypeScript è¿é¶\n\n * ç±»åæ­è¨\n * ç±»åä¿æ¤\n * ç±»åæ¨æ­\n\n\n# ç±»åæ­è¨\n\nç±»åæ­è¨ï¼Type Assertionï¼å¯ä»¥ç¨æ¥æå¨æå®ä¸ä¸ªå¼çç±»åã\n\n\n# è¯­æ³\n\n// ä¸¤ç§åæ³ï¼å¨ tsx è¯­æ³ï¼React ç jsx è¯­æ³ç ts çï¼ä¸­å¿é¡»ä½¿ç¨åèï¼å³ å¼ as ç±»åã\nå¼ as ç±»å\n\n<ç±»å>å¼\n\n\nTypeScript åè®¸ä½ è¦çå®çæ¨æ­ï¼å¹¶ä¸è½ä»¥ä½ ä»»ä½ä½ æ³è¦çæ¹å¼åæå®ï¼è¿ç§æºå¶è¢«ç§°ä¸ºãç±»åæ­è¨ããTypeScript ç±»åæ­è¨ç¨æ¥åè¯ç¼è¯å¨ä½ æ¯å®æ´äºè§£è¿ä¸ªç±»åï¼å¹¶ä¸å®ä¸åºè¯¥åååºéè¯¯ã\n\nconst foo = {};\nfoo.bar = 123; // Error: 'bar' å±æ§ä¸å­å¨äº â{}â\nfoo.bas = 'hello'; // Error: 'bas' å±æ§ä¸å­å¨äº '{}'\n\n\nè¿éçä»£ç ååºäºéè¯¯è­¦åï¼å ä¸º foo çç±»åæ¨æ­ä¸º {}ï¼å³æ²¡æå±æ§çå¯¹è±¡ãå æ­¤ï¼ä½ ä¸è½å¨å®çå±æ§ä¸æ·»å  bar æ basï¼ä½ å¯ä»¥éè¿ç±»åæ­è¨æ¥é¿åæ­¤é®é¢ï¼ä½ å¯ä»¥éè¿ç±»åæ­è¨æ¥é¿åæ­¤é®é¢ï¼\n\ninterface Foo {\n  bar: number;\n  bas: string;\n}\n\nconst foo = {} as Foo;\nfoo.bar = 123;\nfoo.bas = 'hello';\n\n\n\n# ç±»åæ­è¨ä¸ç±»åè½¬æ¢\n\nå®ä¹æä»¥ä¸è¢«ç§°ä¸ºãç±»åè½¬æ¢ãï¼æ¯å ä¸ºè½¬æ¢éå¸¸æå³çæç§è¿è¡æ¶çæ¯æãä½æ¯ï¼ç±»åæ­è¨çº¯ç²¹æ¯ä¸ä¸ªç¼è¯æ¶è¯­æ³ï¼åæ¶ï¼å®ä¹æ¯ä¸ç§ä¸ºç¼è¯å¨æä¾å³äºå¦ä½åæä»£ç çæ¹æ³ã\n\n\n# ç±»åæ­è¨å¯è½æ¯æå®³ç\n\nå¦æä½ æ²¡ææçº¦å®æ·»å å±æ§ï¼TypeScript ç¼è¯å¨å¹¶ä¸ä¼å¯¹æ­¤ååºéè¯¯è­¦å\n\ninterface Foo {\n  bar: number;\n  bas: string;\n}\n\nconst foo = {} as Foo;\n\n\n\n# åéæ­è¨\n\nç±»åæ­è¨ï¼å°½ç®¡æä»¬å·²ç»è¯æäºå®å¹¶ä¸æ¯é£ä¹å®å¨ï¼ä½å®ä¹è¿æ¯æç¨æ­¦ä¹å°ãå¦ä¸ä¸ä¸ªéå¸¸å®ç¨çä¾å­æç¤ºï¼å½ä½¿ç¨èäºè§£ä¼ å¥åæ°æ´å·ä½çç±»åæ¶ï¼ç±»åæ­è¨è½æé¢æå·¥ä½ï¼\n\nfunction handler(event: Event) {\n  const mouseEvent = event as MouseEvent;\n}\n\n\nç¶èï¼å¦ä¸ä¾å­ä¸­çä»£ç å°ä¼æ¥éï¼å°½ç®¡ä½¿ç¨èå·²ç»ä½¿ç¨äºç±»åæ­è¨ï¼\n\nfunction handler(event: Event) {\n  const element = event as HTMLElement; // Error: 'Event' å 'HTMLElement' ä¸­çä»»ä½ä¸ä¸ªé½ä¸è½èµå¼ç»å¦å¤ä¸ä¸ª\n}\n\n\nå¦æä½ ä»ç¶æ³ä½¿ç¨é£ä¸ªç±»åï¼ä½ å¯ä»¥ä½¿ç¨åéæ­è¨ãé¦åæ­è¨æå¼å®¹ææç±»åç anyï¼ç¼è¯å¨å°ä¸ä¼æ¥éï¼\n\nfunction handler(event: Event) {\n  const element = (event as any) as HTMLElement; // ok\n}\n\n\n\n# ç±»åä¿æ¤\n\nTypeScript çç¥ JavaScript ä¸­ instanceof å typeof è¿ç®ç¬¦çç¨æ³ãå¦æä½ å¨ä¸ä¸ªæ¡ä»¶åä¸­ä½¿ç¨è¿äºï¼TypeScript å°ä¼æ¨å¯¼åºå¨æ¡ä»¶åä¸­ççåéç±»åãå¦ä¸ä¾æç¤ºï¼TypeScript å°ä¼è¾¨å« string ä¸æ¯å¦å­å¨ç¹å®çå½æ°ï¼ä»¥åæ¯å¦åçäºæ¼åéè¯¯ï¼\n\n\n# typeof\n\nfunction doSome(x: number | string) {\n  if (typeof x === 'string') {\n    // å¨è¿ä¸ªåä¸­ï¼TypeScript ç¥é `x` çç±»åå¿é¡»æ¯ `string`\n    console.log(x.subtr(1)); // Error: 'subtr' æ¹æ³å¹¶æ²¡æå­å¨äº `string` ä¸, æ¼åéè¯¯\n    console.log(x.substr(1)); // ok\n  }\n\n  x.substr(1); // Error: æ æ³ä¿è¯ `x` æ¯ `string` ç±»å\n}\n\n\n\n# instanceof\n\nclass Foo {\n  foo = 123;\n  common = '123';\n}\n\nclass Bar {\n  bar = 123;\n  common = '123';\n}\n\nfunction doStuff(arg: Foo | Bar) {\n  if (arg instanceof Foo) {\n    console.log(arg.foo); // ok\n    console.log(arg.bar); // Error\n  }\n  if (arg instanceof Bar) {\n    console.log(arg.foo); // Error\n    console.log(arg.bar); // ok\n  }\n}\n\ndoStuff(new Foo());\ndoStuff(new Bar());\n\n\nTypeScript çè³è½å¤çè§£ elseãå½ä½ ä½¿ç¨ if æ¥ç¼©å°ç±»åæ¶ï¼TypeScript ç¥éå¨å¶ä»åä¸­çç±»åå¹¶ä¸æ¯ if ä¸­çç±»åï¼\n\nclass Foo {\n  foo = 123;\n}\n\nclass Bar {\n  bar = 123;\n}\n\nfunction doStuff(arg: Foo | Bar) {\n  if (arg instanceof Foo) {\n    console.log(arg.foo); // ok\n    console.log(arg.bar); // Error\n  } else {\n    // è¿ä¸ªåä¸­ï¼ä¸å®æ¯ 'Bar'\n    console.log(arg.foo); // Error\n    console.log(arg.bar); // ok\n  }\n}\n\ndoStuff(new Foo());\ndoStuff(new Bar());\n\n\n\n# in\n\nin æä½ç¬¦å¯ä»¥å®å¨çæ£æ¥ä¸ä¸ªå¯¹è±¡ä¸æ¯å¦å­å¨ä¸ä¸ªå±æ§ï¼å®éå¸¸ä¹è¢«ä½ä¸ºç±»åä¿æ¤ä½¿ç¨ï¼\n\ninterface A {\n  x: number;\n}\n\ninterface B {\n  y: string;\n}\n\nfunction doStuff(q: A | B) {\n  if ('x' in q) {\n    // q: A\n  } else {\n    // q: B\n    q.x = 1 // Error: ç±»å B ä¸ä¸å­å¨å±æ§ x\n  }\n}\n\n\n\n# èªå®ä¹ç±»åä¿æ¤\n\n// ä»ä»æ¯ä¸ä¸ª interface\ninterface Foo {\n  foo: number;\n  common: string;\n}\n\ninterface Bar {\n  bar: number;\n  common: string;\n}\n\n// ç¨æ·èªå·±å®ä¹çç±»åä¿æ¤ï¼\nfunction isFoo(arg: Foo | Bar): arg is Foo {\n  return (arg as Foo).foo !== undefined;\n}\n\n// ç¨æ·èªå·±å®ä¹çç±»åä¿æ¤ä½¿ç¨ç¨ä¾ï¼\nfunction doStuff(arg: Foo | Bar) {\n  if (isFoo(arg)) {\n    console.log(arg.foo); // ok\n    console.log(arg.bar); // Error\n  } else {\n    console.log(arg.foo); // Error\n    console.log(arg.bar); // ok\n  }\n}\n\ndoStuff({ foo: 123, common: '123' });\ndoStuff({ bar: 123, common: '123' });\n\n\n\n# ç±»åæ¨æ­\n\n\n# å®ä¹åé\n\nlet foo = 123; // foo æ¯ 'number'\nlet bar = 'hello'; // bar æ¯ 'string'\n\nfoo = bar; // Error: ä¸è½å° 'string' èµå¼ç» `number`\n\n\n\n# å½æ°è¿åå¼\n\nè¿åç±»åè½è¢« return è¯­å¥æ¨æ­ï¼å¦ä¸æç¤ºï¼æ¨æ­å½æ°è¿åä¸ºä¸ä¸ªæ°å­ï¼\n\nfunction add(a: number, b: number) {\n  return a + b;\n}\n\n\n\n# èµå¼\n\nå½æ°åæ°ç±»å/è¿åå¼ä¹è½éè¿èµå¼æ¥æ¨æ­ãå¦ä¸æç¤ºï¼foo çç±»åæ¯ Adderï¼ä»è½è®© foo çåæ° aãb æ¯ number ç±»åã\n\ntype Adder = (a: number, b: number) => number;\nlet foo: Adder = (a, b) => {\n  a = 'hello'; // Errorï¼ä¸è½æ 'string' ç±»åèµå¼ç» 'number' ç±»å\n  return a + b;\n};\n\n\n\n# ç»æå\n\nè¿äºç®åçè§åä¹éç¨äºç»æåçå­å¨ï¼å¯¹è±¡å­é¢éï¼ï¼ä¾å¦å¨ä¸é¢è¿ç§æåµä¸ foo çç±»åè¢«æ¨æ­ä¸º { a: number, b: number }ï¼\n\nconst foo = {\n  a: 123,\n  b: 456\n};\n\nfoo.a = 'hello'; // Errorï¼ä¸è½æ 'string' ç±»åèµå¼ç» 'number' ç±»å\n",normalizedContent:"# typescript è¿é¶\n\n * ç±»åæ­è¨\n * ç±»åä¿æ¤\n * ç±»åæ¨æ­\n\n\n# ç±»åæ­è¨\n\nç±»åæ­è¨ï¼type assertionï¼å¯ä»¥ç¨æ¥æå¨æå®ä¸ä¸ªå¼çç±»åã\n\n\n# è¯­æ³\n\n// ä¸¤ç§åæ³ï¼å¨ tsx è¯­æ³ï¼react ç jsx è¯­æ³ç ts çï¼ä¸­å¿é¡»ä½¿ç¨åèï¼å³ å¼ as ç±»åã\nå¼ as ç±»å\n\n<ç±»å>å¼\n\n\ntypescript åè®¸ä½ è¦çå®çæ¨æ­ï¼å¹¶ä¸è½ä»¥ä½ ä»»ä½ä½ æ³è¦çæ¹å¼åæå®ï¼è¿ç§æºå¶è¢«ç§°ä¸ºãç±»åæ­è¨ããtypescript ç±»åæ­è¨ç¨æ¥åè¯ç¼è¯å¨ä½ æ¯å®æ´äºè§£è¿ä¸ªç±»åï¼å¹¶ä¸å®ä¸åºè¯¥åååºéè¯¯ã\n\nconst foo = {};\nfoo.bar = 123; // error: 'bar' å±æ§ä¸å­å¨äº â{}â\nfoo.bas = 'hello'; // error: 'bas' å±æ§ä¸å­å¨äº '{}'\n\n\nè¿éçä»£ç ååºäºéè¯¯è­¦åï¼å ä¸º foo çç±»åæ¨æ­ä¸º {}ï¼å³æ²¡æå±æ§çå¯¹è±¡ãå æ­¤ï¼ä½ ä¸è½å¨å®çå±æ§ä¸æ·»å  bar æ basï¼ä½ å¯ä»¥éè¿ç±»åæ­è¨æ¥é¿åæ­¤é®é¢ï¼ä½ å¯ä»¥éè¿ç±»åæ­è¨æ¥é¿åæ­¤é®é¢ï¼\n\ninterface foo {\n  bar: number;\n  bas: string;\n}\n\nconst foo = {} as foo;\nfoo.bar = 123;\nfoo.bas = 'hello';\n\n\n\n# ç±»åæ­è¨ä¸ç±»åè½¬æ¢\n\nå®ä¹æä»¥ä¸è¢«ç§°ä¸ºãç±»åè½¬æ¢ãï¼æ¯å ä¸ºè½¬æ¢éå¸¸æå³çæç§è¿è¡æ¶çæ¯æãä½æ¯ï¼ç±»åæ­è¨çº¯ç²¹æ¯ä¸ä¸ªç¼è¯æ¶è¯­æ³ï¼åæ¶ï¼å®ä¹æ¯ä¸ç§ä¸ºç¼è¯å¨æä¾å³äºå¦ä½åæä»£ç çæ¹æ³ã\n\n\n# ç±»åæ­è¨å¯è½æ¯æå®³ç\n\nå¦æä½ æ²¡ææçº¦å®æ·»å å±æ§ï¼typescript ç¼è¯å¨å¹¶ä¸ä¼å¯¹æ­¤ååºéè¯¯è­¦å\n\ninterface foo {\n  bar: number;\n  bas: string;\n}\n\nconst foo = {} as foo;\n\n\n\n# åéæ­è¨\n\nç±»åæ­è¨ï¼å°½ç®¡æä»¬å·²ç»è¯æäºå®å¹¶ä¸æ¯é£ä¹å®å¨ï¼ä½å®ä¹è¿æ¯æç¨æ­¦ä¹å°ãå¦ä¸ä¸ä¸ªéå¸¸å®ç¨çä¾å­æç¤ºï¼å½ä½¿ç¨èäºè§£ä¼ å¥åæ°æ´å·ä½çç±»åæ¶ï¼ç±»åæ­è¨è½æé¢æå·¥ä½ï¼\n\nfunction handler(event: event) {\n  const mouseevent = event as mouseevent;\n}\n\n\nç¶èï¼å¦ä¸ä¾å­ä¸­çä»£ç å°ä¼æ¥éï¼å°½ç®¡ä½¿ç¨èå·²ç»ä½¿ç¨äºç±»åæ­è¨ï¼\n\nfunction handler(event: event) {\n  const element = event as htmlelement; // error: 'event' å 'htmlelement' ä¸­çä»»ä½ä¸ä¸ªé½ä¸è½èµå¼ç»å¦å¤ä¸ä¸ª\n}\n\n\nå¦æä½ ä»ç¶æ³ä½¿ç¨é£ä¸ªç±»åï¼ä½ å¯ä»¥ä½¿ç¨åéæ­è¨ãé¦åæ­è¨æå¼å®¹ææç±»åç anyï¼ç¼è¯å¨å°ä¸ä¼æ¥éï¼\n\nfunction handler(event: event) {\n  const element = (event as any) as htmlelement; // ok\n}\n\n\n\n# ç±»åä¿æ¤\n\ntypescript çç¥ javascript ä¸­ instanceof å typeof è¿ç®ç¬¦çç¨æ³ãå¦æä½ å¨ä¸ä¸ªæ¡ä»¶åä¸­ä½¿ç¨è¿äºï¼typescript å°ä¼æ¨å¯¼åºå¨æ¡ä»¶åä¸­ççåéç±»åãå¦ä¸ä¾æç¤ºï¼typescript å°ä¼è¾¨å« string ä¸æ¯å¦å­å¨ç¹å®çå½æ°ï¼ä»¥åæ¯å¦åçäºæ¼åéè¯¯ï¼\n\n\n# typeof\n\nfunction dosome(x: number | string) {\n  if (typeof x === 'string') {\n    // å¨è¿ä¸ªåä¸­ï¼typescript ç¥é `x` çç±»åå¿é¡»æ¯ `string`\n    console.log(x.subtr(1)); // error: 'subtr' æ¹æ³å¹¶æ²¡æå­å¨äº `string` ä¸, æ¼åéè¯¯\n    console.log(x.substr(1)); // ok\n  }\n\n  x.substr(1); // error: æ æ³ä¿è¯ `x` æ¯ `string` ç±»å\n}\n\n\n\n# instanceof\n\nclass foo {\n  foo = 123;\n  common = '123';\n}\n\nclass bar {\n  bar = 123;\n  common = '123';\n}\n\nfunction dostuff(arg: foo | bar) {\n  if (arg instanceof foo) {\n    console.log(arg.foo); // ok\n    console.log(arg.bar); // error\n  }\n  if (arg instanceof bar) {\n    console.log(arg.foo); // error\n    console.log(arg.bar); // ok\n  }\n}\n\ndostuff(new foo());\ndostuff(new bar());\n\n\ntypescript çè³è½å¤çè§£ elseãå½ä½ ä½¿ç¨ if æ¥ç¼©å°ç±»åæ¶ï¼typescript ç¥éå¨å¶ä»åä¸­çç±»åå¹¶ä¸æ¯ if ä¸­çç±»åï¼\n\nclass foo {\n  foo = 123;\n}\n\nclass bar {\n  bar = 123;\n}\n\nfunction dostuff(arg: foo | bar) {\n  if (arg instanceof foo) {\n    console.log(arg.foo); // ok\n    console.log(arg.bar); // error\n  } else {\n    // è¿ä¸ªåä¸­ï¼ä¸å®æ¯ 'bar'\n    console.log(arg.foo); // error\n    console.log(arg.bar); // ok\n  }\n}\n\ndostuff(new foo());\ndostuff(new bar());\n\n\n\n# in\n\nin æä½ç¬¦å¯ä»¥å®å¨çæ£æ¥ä¸ä¸ªå¯¹è±¡ä¸æ¯å¦å­å¨ä¸ä¸ªå±æ§ï¼å®éå¸¸ä¹è¢«ä½ä¸ºç±»åä¿æ¤ä½¿ç¨ï¼\n\ninterface a {\n  x: number;\n}\n\ninterface b {\n  y: string;\n}\n\nfunction dostuff(q: a | b) {\n  if ('x' in q) {\n    // q: a\n  } else {\n    // q: b\n    q.x = 1 // error: ç±»å b ä¸ä¸å­å¨å±æ§ x\n  }\n}\n\n\n\n# èªå®ä¹ç±»åä¿æ¤\n\n// ä»ä»æ¯ä¸ä¸ª interface\ninterface foo {\n  foo: number;\n  common: string;\n}\n\ninterface bar {\n  bar: number;\n  common: string;\n}\n\n// ç¨æ·èªå·±å®ä¹çç±»åä¿æ¤ï¼\nfunction isfoo(arg: foo | bar): arg is foo {\n  return (arg as foo).foo !== undefined;\n}\n\n// ç¨æ·èªå·±å®ä¹çç±»åä¿æ¤ä½¿ç¨ç¨ä¾ï¼\nfunction dostuff(arg: foo | bar) {\n  if (isfoo(arg)) {\n    console.log(arg.foo); // ok\n    console.log(arg.bar); // error\n  } else {\n    console.log(arg.foo); // error\n    console.log(arg.bar); // ok\n  }\n}\n\ndostuff({ foo: 123, common: '123' });\ndostuff({ bar: 123, common: '123' });\n\n\n\n# ç±»åæ¨æ­\n\n\n# å®ä¹åé\n\nlet foo = 123; // foo æ¯ 'number'\nlet bar = 'hello'; // bar æ¯ 'string'\n\nfoo = bar; // error: ä¸è½å° 'string' èµå¼ç» `number`\n\n\n\n# å½æ°è¿åå¼\n\nè¿åç±»åè½è¢« return è¯­å¥æ¨æ­ï¼å¦ä¸æç¤ºï¼æ¨æ­å½æ°è¿åä¸ºä¸ä¸ªæ°å­ï¼\n\nfunction add(a: number, b: number) {\n  return a + b;\n}\n\n\n\n# èµå¼\n\nå½æ°åæ°ç±»å/è¿åå¼ä¹è½éè¿èµå¼æ¥æ¨æ­ãå¦ä¸æç¤ºï¼foo çç±»åæ¯ adderï¼ä»è½è®© foo çåæ° aãb æ¯ number ç±»åã\n\ntype adder = (a: number, b: number) => number;\nlet foo: adder = (a, b) => {\n  a = 'hello'; // errorï¼ä¸è½æ 'string' ç±»åèµå¼ç» 'number' ç±»å\n  return a + b;\n};\n\n\n\n# ç»æå\n\nè¿äºç®åçè§åä¹éç¨äºç»æåçå­å¨ï¼å¯¹è±¡å­é¢éï¼ï¼ä¾å¦å¨ä¸é¢è¿ç§æåµä¸ foo çç±»åè¢«æ¨æ­ä¸º { a: number, b: number }ï¼\n\nconst foo = {\n  a: 123,\n  b: 456\n};\n\nfoo.a = 'hello'; // errorï¼ä¸è½æ 'string' ç±»åèµå¼ç» 'number' ç±»å\n",charsets:{cjk:!0}},{title:"TypeScirptç±»åå£°ææä»¶",frontmatter:{},regularPath:"/ts/ts-type.html",relativePath:"ts/ts-type.md",key:"v-5f89be0a",path:"/ts/ts-type.html",headers:[{level:2,title:".d.ts",slug:"d-ts",normalizedTitle:".d.ts",charIndex:72},{level:2,title:"å¨å±å£°æ",slug:"å¨å±å£°æ",normalizedTitle:"å¨å±å£°æ",charIndex:980},{level:2,title:"ç¼åå£°ææä»¶",slug:"ç¼åå£°ææä»¶",normalizedTitle:"ç¼åå£°ææä»¶",charIndex:1278}],lastUpdated:"3/1/2022, 3:30:47 PM",lastUpdatedTimestamp:1646119847e3,headersStr:".d.ts å¨å±å£°æ ç¼åå£°ææä»¶",content:"# TypeScirptç±»åå£°ææä»¶\n\nç±»åå£°æï¼Type Declarationï¼æè ç±»åå®ä¹ï¼Type Definitionï¼æä»¶æ¯ä¸ä¸ªä»¥.d.tsä½ä¸ºæä»¶åç¼åçTypeScriptæä»¶ã\n\nç±»åå£°ææä»¶ç¨æ¥å¸®å©å¼åèå¨ typescript ä¸­ä½¿ç¨å·²æç JavaScript å·¥å·åã\n\n\n# .d.ts\n\nç±»åå£°ææä»¶çåç¼åä¸º.d.tsï¼æä»¶ä¸­åªåå«ä¸ç±»åç¸å³çä»£ç ï¼ä¸åå«é»è¾ä»£ç ï¼å®ä»¬çä½ç¨æ¨å¨ä¸ºå¼åèæä¾ç±»åä¿¡æ¯ï¼æä»¥å®ä»¬åªå¨å¼åé¶æ®µèµ·ä½ç¨ã\n\n> æä»¬ç¥éç¬¬ä¸æ¹åºä¸è¬ä¼ä½¿ç¨ ts ä»£ç ç¼åï¼ts ä»£ç ä¼ç¼è¯æ js ä»£ç ï¼åå¸åä¾ä»äººä½¿ç¨ãè¿ä¸ªæ¶åç±»åä¿¡æ¯å°±ä¸¢å¤±äºãå½æä»¬å¨ IDE ä¸­å¼å¥ç¬¬ä¸æ¹åºæ¶ï¼å¦æè¯¥åºæ²¡ææä¾ç±»åå£°æï¼TypeScript åä¸ç¥éè¯¥åºæ¯ä»ä¹ç±»åï¼æä»ä¹ä¸è¥¿ï¼è¿è IDE ä¼è¿è¡æ¥éã\n\næ¯å¦æä»¬å¨é¡¹ç®ä¸­ä½¿ç¨jQueryï¼ç´æ¥å¨å¨å±ä½¿ç¨åé$æjQueryï¼\n\n$('#foo');\n// æ¾ä¸å°åç§° \"$\"ãæ¯å¦éè¦å®è£ jQuery çç±»åå®ä¹? è¯·å°è¯ä½¿ç¨ `npm i --save-dev @types/jquery`ãts(2581)\n\n\nDefinitelyTyped ç¤¾åºä¸ºæä»¬æä¾äºå¾å¤ç¬¬ä¸æ¹ npm å£°ææä»¶åï¼ä¾å¦@types/lodashå@types/nodeç­ç­ãä½ å¯ä»¥ä½¿ç¨npmå®è£@typesä¸çå£°æåã\n\nnpm install -D @types/jquery\n\n\nè¿äºåä¼è¢«ä¸è½½å° node_modules/@typesæä»¶å¤¹ä¸ã\n\nå£°ææä»¶æä¸¤ç§ä½¿ç¨æ¹æ³ï¼\n\n * å°å£°ææä»¶åæºç æ¾å¨ä¸èµ·\n * å°å£°ææä»¶åå¸å° @types ä¸\n\næä»¬ä¸è¬ä¸éè¦æå¨å»åå£°ææä»¶ï¼å¦ææä»¬çæä»¶æ¬èº«æ¯ç¨ TS ç¼åçï¼å¨ç¼è¯çæ¶åè®© TS èªå¨çæå£°ææä»¶ï¼å¹¶å¨åå¸çæ¶åå° .d.ts æä»¶ä¸èµ·åå¸å³å¯ã\n\nå¦ææ¯æå¨åçå£°ææä»¶ï¼é£ä¹éè¦æ»¡è¶³ä»¥ä¸ä»»ä¸ä¸é¡¹æ¡ä»¶ï¼æè½è¢«æ­£ç¡®çè¯å«ï¼\n\n * ç» package.json ä¸­ç types æ typings å­æ®µæå®ç±»åå£°ææä»¶çè·¯å¾ã\n * å£°ææä»¶æ¾å¨é¡¹ç®æ ¹ç®å½ä¸ï¼å½åä¸º index.d.ts\n * ä¸å¥å£æä»¶ï¼package.json ä¸­ç main å­æ®µæå®çå¥å£æä»¶ï¼ä¸èµ·ï¼ç¼åä¸ä¸ªåå .d.ts æä»¶\n\n\n# å¨å±å£°æ\n\n**å¨å±å£°æï¼global declarationï¼**å¨ä»»ä½ TypeScript é¡¹ç®æè TypeScript ä»£ç çæ®µä¸­é½ä¼èµ·ä½ç¨çãä¾å¦å½ä½ åä¸const p = new Promise();æ¶ï¼TypeScriptç¼è¯å¨ä¸ä¼å»ç¼è¯ä½ çä»£ç ï¼å ä¸ºconst p = new Promise();è¯­æ³éè¯¯äºã\n\n\n\nä»IDEçæç¤ºä¸­ï¼å¯ä»¥çå°Promiseç±»åæ¯å®ä¹å¨lib.es2015.promise.d.tsæä»¶ä¸­çï¼ç± TypeScript æä¾ï¼TypeScript æä¾çå¾å¤è¿æ ·çå£°ææä»¶ï¼è¢«ç§°ä½æ ååºï¼è¿äºå£°ææä»¶ä¼éTypeScriptä¸èµ·å®è£ï¼ã\n\n\n# ç¼åå£°ææä»¶\n\nè¯¦è§ä»¥ä¸ä¸¤ç¯æç« ï¼\n\n * å£°ææä»¶ *.d.ts\n * TypeScirptç±»åå£°æå®å¨æå",normalizedContent:"# typescirptç±»åå£°ææä»¶\n\nç±»åå£°æï¼type declarationï¼æè ç±»åå®ä¹ï¼type definitionï¼æä»¶æ¯ä¸ä¸ªä»¥.d.tsä½ä¸ºæä»¶åç¼åçtypescriptæä»¶ã\n\nç±»åå£°ææä»¶ç¨æ¥å¸®å©å¼åèå¨ typescript ä¸­ä½¿ç¨å·²æç javascript å·¥å·åã\n\n\n# .d.ts\n\nç±»åå£°ææä»¶çåç¼åä¸º.d.tsï¼æä»¶ä¸­åªåå«ä¸ç±»åç¸å³çä»£ç ï¼ä¸åå«é»è¾ä»£ç ï¼å®ä»¬çä½ç¨æ¨å¨ä¸ºå¼åèæä¾ç±»åä¿¡æ¯ï¼æä»¥å®ä»¬åªå¨å¼åé¶æ®µèµ·ä½ç¨ã\n\n> æä»¬ç¥éç¬¬ä¸æ¹åºä¸è¬ä¼ä½¿ç¨ ts ä»£ç ç¼åï¼ts ä»£ç ä¼ç¼è¯æ js ä»£ç ï¼åå¸åä¾ä»äººä½¿ç¨ãè¿ä¸ªæ¶åç±»åä¿¡æ¯å°±ä¸¢å¤±äºãå½æä»¬å¨ ide ä¸­å¼å¥ç¬¬ä¸æ¹åºæ¶ï¼å¦æè¯¥åºæ²¡ææä¾ç±»åå£°æï¼typescript åä¸ç¥éè¯¥åºæ¯ä»ä¹ç±»åï¼æä»ä¹ä¸è¥¿ï¼è¿è ide ä¼è¿è¡æ¥éã\n\næ¯å¦æä»¬å¨é¡¹ç®ä¸­ä½¿ç¨jqueryï¼ç´æ¥å¨å¨å±ä½¿ç¨åé$æjqueryï¼\n\n$('#foo');\n// æ¾ä¸å°åç§° \"$\"ãæ¯å¦éè¦å®è£ jquery çç±»åå®ä¹? è¯·å°è¯ä½¿ç¨ `npm i --save-dev @types/jquery`ãts(2581)\n\n\ndefinitelytyped ç¤¾åºä¸ºæä»¬æä¾äºå¾å¤ç¬¬ä¸æ¹ npm å£°ææä»¶åï¼ä¾å¦@types/lodashå@types/nodeç­ç­ãä½ å¯ä»¥ä½¿ç¨npmå®è£@typesä¸çå£°æåã\n\nnpm install -d @types/jquery\n\n\nè¿äºåä¼è¢«ä¸è½½å° node_modules/@typesæä»¶å¤¹ä¸ã\n\nå£°ææä»¶æä¸¤ç§ä½¿ç¨æ¹æ³ï¼\n\n * å°å£°ææä»¶åæºç æ¾å¨ä¸èµ·\n * å°å£°ææä»¶åå¸å° @types ä¸\n\næä»¬ä¸è¬ä¸éè¦æå¨å»åå£°ææä»¶ï¼å¦ææä»¬çæä»¶æ¬èº«æ¯ç¨ ts ç¼åçï¼å¨ç¼è¯çæ¶åè®© ts èªå¨çæå£°ææä»¶ï¼å¹¶å¨åå¸çæ¶åå° .d.ts æä»¶ä¸èµ·åå¸å³å¯ã\n\nå¦ææ¯æå¨åçå£°ææä»¶ï¼é£ä¹éè¦æ»¡è¶³ä»¥ä¸ä»»ä¸ä¸é¡¹æ¡ä»¶ï¼æè½è¢«æ­£ç¡®çè¯å«ï¼\n\n * ç» package.json ä¸­ç types æ typings å­æ®µæå®ç±»åå£°ææä»¶çè·¯å¾ã\n * å£°ææä»¶æ¾å¨é¡¹ç®æ ¹ç®å½ä¸ï¼å½åä¸º index.d.ts\n * ä¸å¥å£æä»¶ï¼package.json ä¸­ç main å­æ®µæå®çå¥å£æä»¶ï¼ä¸èµ·ï¼ç¼åä¸ä¸ªåå .d.ts æä»¶\n\n\n# å¨å±å£°æ\n\n**å¨å±å£°æï¼global declarationï¼**å¨ä»»ä½ typescript é¡¹ç®æè typescript ä»£ç çæ®µä¸­é½ä¼èµ·ä½ç¨çãä¾å¦å½ä½ åä¸const p = new promise();æ¶ï¼typescriptç¼è¯å¨ä¸ä¼å»ç¼è¯ä½ çä»£ç ï¼å ä¸ºconst p = new promise();è¯­æ³éè¯¯äºã\n\n\n\nä»ideçæç¤ºä¸­ï¼å¯ä»¥çå°promiseç±»åæ¯å®ä¹å¨lib.es2015.promise.d.tsæä»¶ä¸­çï¼ç± typescript æä¾ï¼typescript æä¾çå¾å¤è¿æ ·çå£°ææä»¶ï¼è¢«ç§°ä½æ ååºï¼è¿äºå£°ææä»¶ä¼étypescriptä¸èµ·å®è£ï¼ã\n\n\n# ç¼åå£°ææä»¶\n\nè¯¦è§ä»¥ä¸ä¸¤ç¯æç« ï¼\n\n * å£°ææä»¶ *.d.ts\n * typescirptç±»åå£°æå®å¨æå",charsets:{cjk:!0}},{title:"æ¨¡æå®ç°snbbDomæè¡å®ä¾",frontmatter:{title:"æ¨¡æå®ç°snbbDomæè¡å®ä¾",date:"2020-10-09T14:47:00.000Z",categories:"VirtualDOM"},regularPath:"/virtual-dom/example.html",relativePath:"virtual-dom/example.md",key:"v-1d8b151f",path:"/virtual-dom/example.html",headers:[{level:2,title:"parcel",slug:"parcel",normalizedTitle:"parcel",charIndex:175},{level:2,title:"å®è£ snabbdom",slug:"å®è£-snabbdom",normalizedTitle:"å®è£ snabbdom",charIndex:434},{level:2,title:"å®ç°",slug:"å®ç°",normalizedTitle:"å®ç°",charIndex:4}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"parcel å®è£ snabbdom å®ç°",content:'# æ¨¡æå®ç°snbbDomæè¡å®ä¾\n\n * å®ç½ç¤ºä¾ï¼http://snabbdom.github.io/snabbdom/examples/reorder-animation/\n * ä»£ç å°åï¼https://github.com/jinjingxuan/part3_module1_task/tree/master/code_3\n * æå»ºå·¥å· parcel\n\n\n# parcel\n\nparcel å®ç½ï¼https://zh.parceljs.org/getting_started.html\n\nå®è£æµç¨\n\nnpm install -g parcel-bundler\n\n\nå¨ä½ æ­£å¨ä½¿ç¨çé¡¹ç®ç®å½ä¸åå»ºä¸ä¸ª package.json æä»¶ï¼\n\nnpm init -y\n\n\nParcel åç½®äºä¸ä¸ªå½ä½ æ¹åæä»¶æ¶è½å¤èªå¨éæ°æå»ºåºç¨çå¼åæå¡å¨ï¼èä¸ä¸ºäºå®ç°å¿«éå¼åï¼è¯¥å¼åæå¡å¨æ¯æç­æ¨¡åæ¿æ¢ãåªéè¦å¨å¥å£æä»¶æåºï¼\n\nparcel index.html\n\n\n\n# å®è£ snabbdom\n\ncnpm i -D snabbdom\n\n\n\n# å®ç°\n\ngithubå°åï¼https://github.com/jinjingxuan/part3_module1_task/tree/master/code_3\n\n * å³é®ä»£ç \n\nimport { Data } from \'./Data.js\'\nimport { init } from "snabbdom/build/package/init";\nimport { styleModule } from "snabbdom/build/package/modules/style";\nimport { eventListenersModule } from "snabbdom/build/package/modules/eventlisteners";\nimport { h } from "snabbdom/build/package/h";\n\nvar patch = init([styleModule, eventListenersModule]);\nvar container = document.getElementById("app");\n\n// title\nvar title = function () {\n    return h("h2", {}, "Top 10 movies")\n}\n\n// list-item\nvar item = function (itemIdx, itemData) {\n    return h("li", { \n        style: { \n            listStyle: "none", \n            display: "flex",\n            marginTop: "20px"\n        }\n    }, [\n        h("div", {\n            style: { \n                width: "5%"\n            }\n        }, itemData.rank),\n        h("div", {\n            style: { \n                width: "30%"\n            }\n        }, itemData.title),\n        h("div", {\n            style: { \n                width: "65%"\n            }\n        }, itemData.desc)\n    ]);\n};\n\n// list\nvar list = function () {\n    let items = [];\n    for (let i = 0; i < Data.length; i++) {\n        items.push(item(i, Data[i]));\n    }\n    return h("ul", {\n        style: {\n            padding: "0",\n        }\n    }, items);\n};\n\n// btns\nvar btns = function () {\n    return h("div", { style: { float: "left", display: "flex" } }, [\n        h("span", {}, "Sort by:"),\n        h(\n            "div",\n            {\n                style: {\n                    marginLeft: "20px"\n                },\n                on: {\n                    click: sortByRank,\n                },\n            },\n            "Rank"\n        ),\n        h(\n            "div",\n            {\n                style: {\n                    marginLeft: "20px"\n                },\n                on: {\n                    click: sortByTitle,\n                },\n            },\n            "Title"\n        ),\n        h(\n            "div",\n            {\n                style: {\n                    marginLeft: "20px"\n                },\n                on: {\n                    click: sortByDes,\n                },\n            },\n            "Description"\n        ),\n    ]);\n};\n\n// clearBoth\nvar clear = h("div", { style: { clear: "both" } });\n\n// ä¸»èç¹\nvar pageNode = function () {\n    return h(\n        "div#main",\n        {\n            style: {\n                width: "800px",\n                paddingTop: "30px",\n                margin: "0 auto",\n            },\n        },\n        [title(), btns(), clear, list()]\n    );\n};\n\n// é¦æ¬¡æ¸²æä¿å­å½åèç¹ä¸ºèèç¹\nvar oldPageNode = patch(container, pageNode());\n\n// å·æ°èç¹ï¼å¹¶éæ°ä¿å­èèç¹\nfunction updateNode() {\n    oldPageNode = patch(oldPageNode, pageNode());\n}\n\nfunction sortByRank() {\n    Data.sort((a, b) =>  a.rank - b.rank )\n    updateNode();\n}\n\nfunction sortByTitle() {\n    Data.sort((a, b) =>  a.title.localeCompare(b.title) )\n    updateNode();\n}\n\nfunction sortByDes() {\n    Data.sort((a, b) =>  a.desc.localeCompare(b.desc) )\n    updateNode();\n}\n\n',normalizedContent:'# æ¨¡æå®ç°snbbdomæè¡å®ä¾\n\n * å®ç½ç¤ºä¾ï¼http://snabbdom.github.io/snabbdom/examples/reorder-animation/\n * ä»£ç å°åï¼https://github.com/jinjingxuan/part3_module1_task/tree/master/code_3\n * æå»ºå·¥å· parcel\n\n\n# parcel\n\nparcel å®ç½ï¼https://zh.parceljs.org/getting_started.html\n\nå®è£æµç¨\n\nnpm install -g parcel-bundler\n\n\nå¨ä½ æ­£å¨ä½¿ç¨çé¡¹ç®ç®å½ä¸åå»ºä¸ä¸ª package.json æä»¶ï¼\n\nnpm init -y\n\n\nparcel åç½®äºä¸ä¸ªå½ä½ æ¹åæä»¶æ¶è½å¤èªå¨éæ°æå»ºåºç¨çå¼åæå¡å¨ï¼èä¸ä¸ºäºå®ç°å¿«éå¼åï¼è¯¥å¼åæå¡å¨æ¯æç­æ¨¡åæ¿æ¢ãåªéè¦å¨å¥å£æä»¶æåºï¼\n\nparcel index.html\n\n\n\n# å®è£ snabbdom\n\ncnpm i -d snabbdom\n\n\n\n# å®ç°\n\ngithubå°åï¼https://github.com/jinjingxuan/part3_module1_task/tree/master/code_3\n\n * å³é®ä»£ç \n\nimport { data } from \'./data.js\'\nimport { init } from "snabbdom/build/package/init";\nimport { stylemodule } from "snabbdom/build/package/modules/style";\nimport { eventlistenersmodule } from "snabbdom/build/package/modules/eventlisteners";\nimport { h } from "snabbdom/build/package/h";\n\nvar patch = init([stylemodule, eventlistenersmodule]);\nvar container = document.getelementbyid("app");\n\n// title\nvar title = function () {\n    return h("h2", {}, "top 10 movies")\n}\n\n// list-item\nvar item = function (itemidx, itemdata) {\n    return h("li", { \n        style: { \n            liststyle: "none", \n            display: "flex",\n            margintop: "20px"\n        }\n    }, [\n        h("div", {\n            style: { \n                width: "5%"\n            }\n        }, itemdata.rank),\n        h("div", {\n            style: { \n                width: "30%"\n            }\n        }, itemdata.title),\n        h("div", {\n            style: { \n                width: "65%"\n            }\n        }, itemdata.desc)\n    ]);\n};\n\n// list\nvar list = function () {\n    let items = [];\n    for (let i = 0; i < data.length; i++) {\n        items.push(item(i, data[i]));\n    }\n    return h("ul", {\n        style: {\n            padding: "0",\n        }\n    }, items);\n};\n\n// btns\nvar btns = function () {\n    return h("div", { style: { float: "left", display: "flex" } }, [\n        h("span", {}, "sort by:"),\n        h(\n            "div",\n            {\n                style: {\n                    marginleft: "20px"\n                },\n                on: {\n                    click: sortbyrank,\n                },\n            },\n            "rank"\n        ),\n        h(\n            "div",\n            {\n                style: {\n                    marginleft: "20px"\n                },\n                on: {\n                    click: sortbytitle,\n                },\n            },\n            "title"\n        ),\n        h(\n            "div",\n            {\n                style: {\n                    marginleft: "20px"\n                },\n                on: {\n                    click: sortbydes,\n                },\n            },\n            "description"\n        ),\n    ]);\n};\n\n// clearboth\nvar clear = h("div", { style: { clear: "both" } });\n\n// ä¸»èç¹\nvar pagenode = function () {\n    return h(\n        "div#main",\n        {\n            style: {\n                width: "800px",\n                paddingtop: "30px",\n                margin: "0 auto",\n            },\n        },\n        [title(), btns(), clear, list()]\n    );\n};\n\n// é¦æ¬¡æ¸²æä¿å­å½åèç¹ä¸ºèèç¹\nvar oldpagenode = patch(container, pagenode());\n\n// å·æ°èç¹ï¼å¹¶éæ°ä¿å­èèç¹\nfunction updatenode() {\n    oldpagenode = patch(oldpagenode, pagenode());\n}\n\nfunction sortbyrank() {\n    data.sort((a, b) =>  a.rank - b.rank )\n    updatenode();\n}\n\nfunction sortbytitle() {\n    data.sort((a, b) =>  a.title.localecompare(b.title) )\n    updatenode();\n}\n\nfunction sortbydes() {\n    data.sort((a, b) =>  a.desc.localecompare(b.desc) )\n    updatenode();\n}\n\n',charsets:{cjk:!0}},{title:"TypeScriptä¸­çè£é¥°å¨(@)",frontmatter:{},regularPath:"/ts/decorator.html",relativePath:"ts/decorator.md",key:"v-545d6c55",path:"/ts/decorator.html",headers:[{level:2,title:"è£é¥°å¨æ¨¡å¼",slug:"è£é¥°å¨æ¨¡å¼",normalizedTitle:"è£é¥°å¨æ¨¡å¼",charIndex:143},{level:3,title:"è£é¥°å¨æ¨¡å¼çä¼å¿",slug:"è£é¥°å¨æ¨¡å¼çä¼å¿",normalizedTitle:"è£é¥°å¨æ¨¡å¼çä¼å¿",charIndex:1317},{level:2,title:"TS è£é¥°å¨",slug:"ts-è£é¥°å¨",normalizedTitle:"ts è£é¥°å¨",charIndex:153},{level:3,title:"è£é¥°å¨åæ³",slug:"è£é¥°å¨åæ³",normalizedTitle:"è£é¥°å¨åæ³",charIndex:1598},{level:3,title:"è£é¥°å¨åç±»",slug:"è£é¥°å¨åç±»",normalizedTitle:"è£é¥°å¨åç±»",charIndex:2296},{level:3,title:"è£é¥°å¨åç",slug:"è£é¥°å¨åç",normalizedTitle:"è£é¥°å¨åç",charIndex:4859}],lastUpdated:"4/8/2022, 3:26:25 PM",lastUpdatedTimestamp:1649402785e3,headersStr:"è£é¥°å¨æ¨¡å¼ è£é¥°å¨æ¨¡å¼çä¼å¿ TS è£é¥°å¨ è£é¥°å¨åæ³ è£é¥°å¨åç±» è£é¥°å¨åç",content:'# TypeScriptä¸­çè£é¥°å¨(@)\n\nè£é¥°å¨æ¯ä¸ç§ç¹æ®ç±»åçå£°æï¼å®è½å¤è¢«éå å°ç±»å£°æï¼æ¹æ³ï¼ è®¿é®ç¬¦ï¼å±æ§æåæ°ä¸ã è£é¥°å¨ä½¿ç¨ @expressionè¿ç§å½¢å¼ï¼expressionæ±å¼åå¿é¡»ä¸ºä¸ä¸ªå½æ°ï¼å®ä¼å¨è¿è¡æ¶è¢«è°ç¨ï¼è¢«è£é¥°çå£°æä¿¡æ¯åä¸ºåæ°ä¼ å¥ï¼è¯¦è§å®æ¹ææ¡£ã\n\n\n# è£é¥°å¨æ¨¡å¼\n\nä»ç» TS è£é¥°å¨ä¹åï¼æä»¬ä»è®¾è®¡æ¨¡å¼åºåï¼äºè§£ä¸ä¸å¶ä¸­çè£é¥°å¨æ¨¡å¼\n\n> è£é¥°å¨æ¨¡å¼å®ç°äºä¸æ¹ååæå¯¹è±¡ï¼å¨åæå¯¹è±¡ä¸å®ç°åè½çæ·»å ãè¿æ¯ä¸ç§å¯¹åæå¯¹è±¡çä¸ç§åè£ã\n\nåè®¾ç°å¨æä¸¤ä¸ªå½¢ç¶ï¼ä¸ä¸ªç©å½¢ä¸ä¸ªåå½¢ï¼è¿æ¶åæä»¬å¸æè½å¨å½¢ç¶ä¸å®ç°ä¸äºç¹æ®çåè½ï¼ä½åä¸æ¹ååæ¥çç±»ï¼æä»¬è¦å¦ä½åå¢ï¼\n\nclass Rectangle {\n    draw() {\n       console.log("Shape: Rectangle");\n    }\n}\nclass Circle {\n    draw() {\n       console.log("Shape: Circle");\n    }\n}\n\n\nè¿æ¶æä»¬å¯ä»¥ç¨è£é¥°å¨æ¥å®ç°ï¼åè®¾æä»¬è¦ç»å½¢ç¶æ·»å é¢è²åè½\n\nclass RedShapeDecorator {\n    constructor(decoratedShape) {\n       this.decoratedShape = decoratedShape;    \n    }\n    draw() {\n       this.decoratedShape.draw();        \n       this.setRedBorder();\n    }\n    setRedBorder(){\n       console.log("Border Color: Red");\n    }\n}\n\n\né£ä¹å¨ä½¿ç¨è£é¥°å¨çç±»ï¼å¨ç»åçæ¶åå°±å®ç°äºäºç»è¾¹æ¡çé¢è²ã\n\nconst circle = new Circle();\nconst redCircle = new RedShapeDecorator(new Circle());\nconst redRectangle = new RedShapeDecorator(new Rectangle());\nconsole.log("Circle with normal border");\ncircle.draw();\nconsole.log("\\nCircle of red border");\nredCircle.draw();\nconsole.log("\\nRectangle of red border");\nredRectangle.draw();\n/**\n * output:\n * Circle with normal border\n * Shape: Circle\n * \n * Circle of red border\n * Shape: Circle\n * Border Color: Red\n * \n * Rectangle of red border\n * Shape: Rectangle\n * Border Color: Red\n */\n\n\n\n# è£é¥°å¨æ¨¡å¼çä¼å¿\n\nå³ä½¿åæå¯¹è±¡åçæ¹åï¼è£é¥°å¨æ¯ç§éä¾µå¥å¼åè½æ·»å ï¼å¯¹åæå¯¹è±¡çå½±åä¹è½éä½å°æå°ã\n\n\n# TS è£é¥°å¨\n\n * è¯­æ³ï¼è£é¥°å¨ä½¿ç¨ @expression è¿ç§å½¢å¼ï¼expressionæ±å¼åå¿é¡»ä¸ºä¸ä¸ªå½æ°ï¼å®ä¼å¨è¿è¡æ¶è¢«è°ç¨ï¼è¢«è£é¥°çå£°æä¿¡æ¯åä¸ºåæ°ä¼ å¥\n\n * è¥è¦å¯ç¨å®éªæ§çè£é¥°å¨ç¹æ§ï¼å¿é¡»tsconfig.jsonéå¯ç¨experimentalDecoratorsç¼è¯å¨éé¡¹\n\n * å¸¸è§çè£é¥°å¨æ: ç±»è£é¥°å¨ãå±æ§è£é¥°å¨ãæ¹æ³è£é¥°å¨ãåæ°è£é¥°å¨\n\n * è£é¥°å¨çåæ³: åä¸ºæ®éè£é¥°å¨(æ æ³ä¼ åï¼åè£é¥°å¨å·¥å(å¯ä»¥ä¼ å)\n\n\n# è£é¥°å¨åæ³\n\n# 1. æ®éè£é¥°å¨\n\nfunction decorator(target: Function) {\n  // do something with "target" ...\n  console.log(target)\n}\n\n@decorator\nclass A {\n  constructor() {}\n}\n\n// ç¼è¯åè¾åºç target å¶å®å°±æ¯ class A\n// class æ¬è´¨ä¸æ¯æé å½æ°çè¯­æ³ç³ï¼æä»¥ç±»åæ³¨è§£æ¯ Function\nclass A {\n    constructor() { }\n} \n\n\nä¸ªäººçè§£ ts ä¸­çè£é¥°å¨çå«ä¹å¶å®åè£é¥°å¨æ¨¡å¼çæ¬è´¨ç¸åï¼é½æ¯æåæçå¯¹è±¡ï¼Aï¼æ¿è¿æ¥éè¿ decorator è£é¥°ï¼å¤çï¼ä¸ä¸ã\n\n# 2. è£é¥°å¨å·¥å\n\nè£é¥°å¨å·¥åå°±æ¯ä¸ä¸ªç®åçå½æ°ï¼å®è¿åä¸ä¸ªè¡¨è¾¾å¼ï¼ä»¥ä¾è£é¥°å¨å¨è¿è¡æ¶è°ç¨ã\n\nfunction color(value: string) { // è¿æ¯ä¸ä¸ªè£é¥°å¨å·¥å\n    return function (target: Function) { //  è¿æ¯è£é¥°å¨\n        // do something with "target" and "value"...\n        target.prototype.color = value\n    }\n}\n\n@color(\'red\')\nclass Apple {\n  constructor() {}\n}\n\nconst apple = new Apple()\nconsole.log(apple.color) // \'red\'\n\n\n\n# è£é¥°å¨åç±»\n\n# 1. ç±»è£é¥°å¨\n\n * ç±»è£é¥°å¨åºç¨äºç±»æé å½æ°ï¼å¯ä»¥ç¨æ¥çè§ï¼ä¿®æ¹ææ¿æ¢ç±»å®ä¹ã ç±»è£é¥°å¨ä¸è½ç¨å¨å£°ææä»¶ä¸­( .d.ts)ï¼ä¹ä¸è½ç¨å¨ä»»ä½å¤é¨ä¸ä¸æä¸­ï¼æ¯å¦declareçç±»ï¼ã\n\n * ç±»è£é¥°å¨è¡¨è¾¾å¼ä¼å¨è¿è¡æ¶å½ä½å½æ°è¢«è°ç¨ï¼ç±»çæé å½æ°ä½ä¸ºå¶å¯ä¸çåæ°ã\n\nfunction decorator(target: any) {\n  target.xx = \'test\' ; // ç»ç±»å¢å å±æ§\n  target.prototype.name = \'tom\'\n  target.prototype.age = \'18\'\n}\n\n@decorator\nclass Person {\n  constructor() { }\n}\n\nlet p = new Person()\nconsole.log(Person.xx); // test\nconsole.log(p.age) // 18\n\n\n * å¦æç±»è£é¥°å¨è¿åä¸ä¸ªæé å½æ°, å®ä¼ä½¿ç¨æä¾çæé å½æ°æ¥æ¿æ¢ç±»ä¹åçå£°æã\n\nfunction decorator (target: any) {\n  return class B extends target {\n    name = \'B\'\n  }\n}\n\n@decorator\nclass A {\n  name = \'A\'\n  constructor() {}\n}\n\nconsole.log(new A().name) // \'B\'\n\n\n# 2. å±æ§è£é¥°å¨\n\nå±æ§è£é¥°å¨å£°æå¨ä¸ä¸ªå±æ§å£°æä¹åï¼ç´§é çå±æ§å£°æï¼\n\nå±æ§è£é¥°å¨è¡¨è¾¾å¼ä¼å¨è¿è¡æ¶å½ä½å½æ°è¢«è°ç¨ï¼ä¼ å¥ä¸å2ä¸ªåæ°ï¼\n\n 1. å¯¹äºéææåæ¥è¯´æ¯ç±»çæé å½æ°ï¼å¯¹äºå®ä¾æåæ¯ç±»çååå¯¹è±¡ã\n 2. æåçåå­ã\n\n> å±æ§æè¿°ç¬¦ä¸ä¼åä¸ºåæ°ä¼ å¥å±æ§è£é¥°å¨ï¼\n\nfunction decorator(target: any, propertyKey: string) {\n  console.log(target) // Person: {}\n  console.log(propertyKey) // "name" \n}\n\nclass Person {\n  constructor() { }\n\n  @decorator\n  name: string = \'Tom\'\n}\n\n\n# 3. æ¹æ³è£é¥°å¨\n\næ¹æ³è£é¥°å¨å£°æå¨ä¸ä¸ªæ¹æ³çå£°æä¹åï¼ç´§é çæ¹æ³å£°æï¼ã å®ä¼è¢«åºç¨å°æ¹æ³ç å±æ§æè¿°ç¬¦ä¸ï¼å¯ä»¥ç¨æ¥çè§ï¼ä¿®æ¹æèæ¿æ¢æ¹æ³å®ä¹ã\n\næ¹æ³è£é¥°å¨è¡¨è¾¾å¼ä¼å¨è¿è¡æ¶å½ä½å½æ°è¢«è°ç¨ï¼ä¼ å¥ä¸å3ä¸ªåæ°ï¼\n\n 1. å¯¹äºéææåæ¥è¯´æ¯ç±»çæé å½æ°ï¼å¯¹äºå®ä¾æåæ¯ç±»çååå¯¹è±¡ã\n 2. æåçåå­ã\n 3. æåçå±æ§æè¿°ç¬¦ï¼å³ Object.getOwnPropertyDescriptor(target,key)ã\n\nfunction decorator(target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n  console.log(target) // Person: {} \n  console.log(propertyKey) // "say" \n  console.log(descriptor) // {"writable":true,"enumerable":false,"configurable":true} \n  descriptor.writable = false;\n}\n\nclass Person {\n  constructor() { }\n\n  @decorator\n  say() {\n    console.log(\'say hi\')\n  }\n}\nlet p = new Person()\n\n// å ä¸ºå·²ç»è®¾ç½® writable ä¸º falseï¼ä¸å¯ä»¥ä¿®æ¹æä»¥ä¸é¢è¿æ®µä»£ç ä¼æ¥é\np.say = function() {\n  console.log(\'say hello\')\n}\n\n\néææå\n\nfunction decorator(target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n  console.log(target)\n  console.log(propertyKey)\n  console.log(descriptor)\n}\n\nclass Person {\n  constructor() { }\n\n  @decorator\n  static say() {\n    console.log(\'say hi\')\n  }\n}\n\n// è¾åºç target ä¸ºç±»çæé å½æ°\nclass Person {\n    constructor() { }\n    static say() {\n        console.log(\'say hi\');\n    }\n} \n\n\n# 4. åæ°è£é¥°å¨\n\nåæ°è£é¥°å¨å£°æå¨ä¸ä¸ªåæ°å£°æä¹åï¼ç´§é çåæ°å£°æï¼ã åæ°è£é¥°å¨åºç¨äºç±»æé å½æ°ææ¹æ³å£°æã\n\nåæ°è£é¥°å¨è¡¨è¾¾å¼ä¼å¨è¿è¡æ¶å½ä½å½æ°è¢«è°ç¨ï¼ä¼ å¥ä¸å3ä¸ªåæ°ï¼\n\n 1. å¯¹äºéææåæ¥è¯´æ¯ç±»çæé å½æ°ï¼å¯¹äºå®ä¾æåæ¯ç±»çååå¯¹è±¡ã\n 2. æåçåå­ã\n 3. åæ°å¨å½æ°åæ°åè¡¨ä¸­çç´¢å¼ã\n\nfunction decorator(target: any, propertyKey: string, parameterIndex: number) {\n  console.log(target) // Person: {} \n  console.log(propertyKey) // "say" \n  console.log(parameterIndex) // 0\n}\n\nclass Person {\n  word: string\n  constructor() {\n    this.word  = \'hi\'\n  }\n\n  say(@decorator word: string) {\n    console.log(word)\n  }\n}\n\n\n\n# è£é¥°å¨åç\n\nè£é¥°å¨çç¼è¯ç»æå¦ä¸ï¼\n\n\n\næä»¬æ¥å·ä½çä¸ä¸ä»£ç ï¼\n\nvar __decorate = \n    // å½åä¸ä¸ææ¯å¦æ __decorate è¿ä¸ªå½æ°ï¼å¦ææå°±è¿åè¿ä¸ªå½æ°ï¼å¦ææ²¡æå°±å®ä¹ä¸ä¸ª\n    (this && this.__decorate) || function (decorators, target, key, desc) {\n      \n    // c: åæ°ä¸ªæ°ï¼æ­¤ä¾ä¸º 2\n    // r: æ­¤ä¾ä¸º target å³æé å½æ°\n    var c = arguments.length, \n        r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, \n        d;\n    \n    // å¦æç³»ç»æ¯æåå°ï¼åç´æ¥ä½¿ç¨Reflect.decorate(decorators,target, key, desc)æ¹æ³ã\n    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") {\n      r = Reflect.decorate(decorators, target, key, desc);\n    }\n    // å¦åèªè¡å®ä¹å®ç°è£é¥°å¨æºå¶çä»£ç ã\n    else for (var i = decorators.length - 1; i >= 0; i--) {\n      if (d = decorators[i]) {\n        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n      }\n    }\n    if (c > 3 && r) {\n      return Object.defineProperty(target, key, r)\n    }\n    return r;\n};\n\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") {\n      return Reflect.metadata(k, v);\n    }\n};\n\nfunction decorator(target) {\n    // do something with "target" ...\n    console.log(target);\n}\nlet A = class A {\n    constructor() { }\n};\nA = __decorate([\n    decorator,\n    __metadata("design:paramtypes", [])\n], A);\n',normalizedContent:'# typescriptä¸­çè£é¥°å¨(@)\n\nè£é¥°å¨æ¯ä¸ç§ç¹æ®ç±»åçå£°æï¼å®è½å¤è¢«éå å°ç±»å£°æï¼æ¹æ³ï¼ è®¿é®ç¬¦ï¼å±æ§æåæ°ä¸ã è£é¥°å¨ä½¿ç¨ @expressionè¿ç§å½¢å¼ï¼expressionæ±å¼åå¿é¡»ä¸ºä¸ä¸ªå½æ°ï¼å®ä¼å¨è¿è¡æ¶è¢«è°ç¨ï¼è¢«è£é¥°çå£°æä¿¡æ¯åä¸ºåæ°ä¼ å¥ï¼è¯¦è§å®æ¹ææ¡£ã\n\n\n# è£é¥°å¨æ¨¡å¼\n\nä»ç» ts è£é¥°å¨ä¹åï¼æä»¬ä»è®¾è®¡æ¨¡å¼åºåï¼äºè§£ä¸ä¸å¶ä¸­çè£é¥°å¨æ¨¡å¼\n\n> è£é¥°å¨æ¨¡å¼å®ç°äºä¸æ¹ååæå¯¹è±¡ï¼å¨åæå¯¹è±¡ä¸å®ç°åè½çæ·»å ãè¿æ¯ä¸ç§å¯¹åæå¯¹è±¡çä¸ç§åè£ã\n\nåè®¾ç°å¨æä¸¤ä¸ªå½¢ç¶ï¼ä¸ä¸ªç©å½¢ä¸ä¸ªåå½¢ï¼è¿æ¶åæä»¬å¸æè½å¨å½¢ç¶ä¸å®ç°ä¸äºç¹æ®çåè½ï¼ä½åä¸æ¹ååæ¥çç±»ï¼æä»¬è¦å¦ä½åå¢ï¼\n\nclass rectangle {\n    draw() {\n       console.log("shape: rectangle");\n    }\n}\nclass circle {\n    draw() {\n       console.log("shape: circle");\n    }\n}\n\n\nè¿æ¶æä»¬å¯ä»¥ç¨è£é¥°å¨æ¥å®ç°ï¼åè®¾æä»¬è¦ç»å½¢ç¶æ·»å é¢è²åè½\n\nclass redshapedecorator {\n    constructor(decoratedshape) {\n       this.decoratedshape = decoratedshape;    \n    }\n    draw() {\n       this.decoratedshape.draw();        \n       this.setredborder();\n    }\n    setredborder(){\n       console.log("border color: red");\n    }\n}\n\n\né£ä¹å¨ä½¿ç¨è£é¥°å¨çç±»ï¼å¨ç»åçæ¶åå°±å®ç°äºäºç»è¾¹æ¡çé¢è²ã\n\nconst circle = new circle();\nconst redcircle = new redshapedecorator(new circle());\nconst redrectangle = new redshapedecorator(new rectangle());\nconsole.log("circle with normal border");\ncircle.draw();\nconsole.log("\\ncircle of red border");\nredcircle.draw();\nconsole.log("\\nrectangle of red border");\nredrectangle.draw();\n/**\n * output:\n * circle with normal border\n * shape: circle\n * \n * circle of red border\n * shape: circle\n * border color: red\n * \n * rectangle of red border\n * shape: rectangle\n * border color: red\n */\n\n\n\n# è£é¥°å¨æ¨¡å¼çä¼å¿\n\nå³ä½¿åæå¯¹è±¡åçæ¹åï¼è£é¥°å¨æ¯ç§éä¾µå¥å¼åè½æ·»å ï¼å¯¹åæå¯¹è±¡çå½±åä¹è½éä½å°æå°ã\n\n\n# ts è£é¥°å¨\n\n * è¯­æ³ï¼è£é¥°å¨ä½¿ç¨ @expression è¿ç§å½¢å¼ï¼expressionæ±å¼åå¿é¡»ä¸ºä¸ä¸ªå½æ°ï¼å®ä¼å¨è¿è¡æ¶è¢«è°ç¨ï¼è¢«è£é¥°çå£°æä¿¡æ¯åä¸ºåæ°ä¼ å¥\n\n * è¥è¦å¯ç¨å®éªæ§çè£é¥°å¨ç¹æ§ï¼å¿é¡»tsconfig.jsonéå¯ç¨experimentaldecoratorsç¼è¯å¨éé¡¹\n\n * å¸¸è§çè£é¥°å¨æ: ç±»è£é¥°å¨ãå±æ§è£é¥°å¨ãæ¹æ³è£é¥°å¨ãåæ°è£é¥°å¨\n\n * è£é¥°å¨çåæ³: åä¸ºæ®éè£é¥°å¨(æ æ³ä¼ åï¼åè£é¥°å¨å·¥å(å¯ä»¥ä¼ å)\n\n\n# è£é¥°å¨åæ³\n\n# 1. æ®éè£é¥°å¨\n\nfunction decorator(target: function) {\n  // do something with "target" ...\n  console.log(target)\n}\n\n@decorator\nclass a {\n  constructor() {}\n}\n\n// ç¼è¯åè¾åºç target å¶å®å°±æ¯ class a\n// class æ¬è´¨ä¸æ¯æé å½æ°çè¯­æ³ç³ï¼æä»¥ç±»åæ³¨è§£æ¯ function\nclass a {\n    constructor() { }\n} \n\n\nä¸ªäººçè§£ ts ä¸­çè£é¥°å¨çå«ä¹å¶å®åè£é¥°å¨æ¨¡å¼çæ¬è´¨ç¸åï¼é½æ¯æåæçå¯¹è±¡ï¼aï¼æ¿è¿æ¥éè¿ decorator è£é¥°ï¼å¤çï¼ä¸ä¸ã\n\n# 2. è£é¥°å¨å·¥å\n\nè£é¥°å¨å·¥åå°±æ¯ä¸ä¸ªç®åçå½æ°ï¼å®è¿åä¸ä¸ªè¡¨è¾¾å¼ï¼ä»¥ä¾è£é¥°å¨å¨è¿è¡æ¶è°ç¨ã\n\nfunction color(value: string) { // è¿æ¯ä¸ä¸ªè£é¥°å¨å·¥å\n    return function (target: function) { //  è¿æ¯è£é¥°å¨\n        // do something with "target" and "value"...\n        target.prototype.color = value\n    }\n}\n\n@color(\'red\')\nclass apple {\n  constructor() {}\n}\n\nconst apple = new apple()\nconsole.log(apple.color) // \'red\'\n\n\n\n# è£é¥°å¨åç±»\n\n# 1. ç±»è£é¥°å¨\n\n * ç±»è£é¥°å¨åºç¨äºç±»æé å½æ°ï¼å¯ä»¥ç¨æ¥çè§ï¼ä¿®æ¹ææ¿æ¢ç±»å®ä¹ã ç±»è£é¥°å¨ä¸è½ç¨å¨å£°ææä»¶ä¸­( .d.ts)ï¼ä¹ä¸è½ç¨å¨ä»»ä½å¤é¨ä¸ä¸æä¸­ï¼æ¯å¦declareçç±»ï¼ã\n\n * ç±»è£é¥°å¨è¡¨è¾¾å¼ä¼å¨è¿è¡æ¶å½ä½å½æ°è¢«è°ç¨ï¼ç±»çæé å½æ°ä½ä¸ºå¶å¯ä¸çåæ°ã\n\nfunction decorator(target: any) {\n  target.xx = \'test\' ; // ç»ç±»å¢å å±æ§\n  target.prototype.name = \'tom\'\n  target.prototype.age = \'18\'\n}\n\n@decorator\nclass person {\n  constructor() { }\n}\n\nlet p = new person()\nconsole.log(person.xx); // test\nconsole.log(p.age) // 18\n\n\n * å¦æç±»è£é¥°å¨è¿åä¸ä¸ªæé å½æ°, å®ä¼ä½¿ç¨æä¾çæé å½æ°æ¥æ¿æ¢ç±»ä¹åçå£°æã\n\nfunction decorator (target: any) {\n  return class b extends target {\n    name = \'b\'\n  }\n}\n\n@decorator\nclass a {\n  name = \'a\'\n  constructor() {}\n}\n\nconsole.log(new a().name) // \'b\'\n\n\n# 2. å±æ§è£é¥°å¨\n\nå±æ§è£é¥°å¨å£°æå¨ä¸ä¸ªå±æ§å£°æä¹åï¼ç´§é çå±æ§å£°æï¼\n\nå±æ§è£é¥°å¨è¡¨è¾¾å¼ä¼å¨è¿è¡æ¶å½ä½å½æ°è¢«è°ç¨ï¼ä¼ å¥ä¸å2ä¸ªåæ°ï¼\n\n 1. å¯¹äºéææåæ¥è¯´æ¯ç±»çæé å½æ°ï¼å¯¹äºå®ä¾æåæ¯ç±»çååå¯¹è±¡ã\n 2. æåçåå­ã\n\n> å±æ§æè¿°ç¬¦ä¸ä¼åä¸ºåæ°ä¼ å¥å±æ§è£é¥°å¨ï¼\n\nfunction decorator(target: any, propertykey: string) {\n  console.log(target) // person: {}\n  console.log(propertykey) // "name" \n}\n\nclass person {\n  constructor() { }\n\n  @decorator\n  name: string = \'tom\'\n}\n\n\n# 3. æ¹æ³è£é¥°å¨\n\næ¹æ³è£é¥°å¨å£°æå¨ä¸ä¸ªæ¹æ³çå£°æä¹åï¼ç´§é çæ¹æ³å£°æï¼ã å®ä¼è¢«åºç¨å°æ¹æ³ç å±æ§æè¿°ç¬¦ä¸ï¼å¯ä»¥ç¨æ¥çè§ï¼ä¿®æ¹æèæ¿æ¢æ¹æ³å®ä¹ã\n\næ¹æ³è£é¥°å¨è¡¨è¾¾å¼ä¼å¨è¿è¡æ¶å½ä½å½æ°è¢«è°ç¨ï¼ä¼ å¥ä¸å3ä¸ªåæ°ï¼\n\n 1. å¯¹äºéææåæ¥è¯´æ¯ç±»çæé å½æ°ï¼å¯¹äºå®ä¾æåæ¯ç±»çååå¯¹è±¡ã\n 2. æåçåå­ã\n 3. æåçå±æ§æè¿°ç¬¦ï¼å³ object.getownpropertydescriptor(target,key)ã\n\nfunction decorator(target: any, propertykey: string, descriptor: propertydescriptor) {\n  console.log(target) // person: {} \n  console.log(propertykey) // "say" \n  console.log(descriptor) // {"writable":true,"enumerable":false,"configurable":true} \n  descriptor.writable = false;\n}\n\nclass person {\n  constructor() { }\n\n  @decorator\n  say() {\n    console.log(\'say hi\')\n  }\n}\nlet p = new person()\n\n// å ä¸ºå·²ç»è®¾ç½® writable ä¸º falseï¼ä¸å¯ä»¥ä¿®æ¹æä»¥ä¸é¢è¿æ®µä»£ç ä¼æ¥é\np.say = function() {\n  console.log(\'say hello\')\n}\n\n\néææå\n\nfunction decorator(target: any, propertykey: string, descriptor: propertydescriptor) {\n  console.log(target)\n  console.log(propertykey)\n  console.log(descriptor)\n}\n\nclass person {\n  constructor() { }\n\n  @decorator\n  static say() {\n    console.log(\'say hi\')\n  }\n}\n\n// è¾åºç target ä¸ºç±»çæé å½æ°\nclass person {\n    constructor() { }\n    static say() {\n        console.log(\'say hi\');\n    }\n} \n\n\n# 4. åæ°è£é¥°å¨\n\nåæ°è£é¥°å¨å£°æå¨ä¸ä¸ªåæ°å£°æä¹åï¼ç´§é çåæ°å£°æï¼ã åæ°è£é¥°å¨åºç¨äºç±»æé å½æ°ææ¹æ³å£°æã\n\nåæ°è£é¥°å¨è¡¨è¾¾å¼ä¼å¨è¿è¡æ¶å½ä½å½æ°è¢«è°ç¨ï¼ä¼ å¥ä¸å3ä¸ªåæ°ï¼\n\n 1. å¯¹äºéææåæ¥è¯´æ¯ç±»çæé å½æ°ï¼å¯¹äºå®ä¾æåæ¯ç±»çååå¯¹è±¡ã\n 2. æåçåå­ã\n 3. åæ°å¨å½æ°åæ°åè¡¨ä¸­çç´¢å¼ã\n\nfunction decorator(target: any, propertykey: string, parameterindex: number) {\n  console.log(target) // person: {} \n  console.log(propertykey) // "say" \n  console.log(parameterindex) // 0\n}\n\nclass person {\n  word: string\n  constructor() {\n    this.word  = \'hi\'\n  }\n\n  say(@decorator word: string) {\n    console.log(word)\n  }\n}\n\n\n\n# è£é¥°å¨åç\n\nè£é¥°å¨çç¼è¯ç»æå¦ä¸ï¼\n\n\n\næä»¬æ¥å·ä½çä¸ä¸ä»£ç ï¼\n\nvar __decorate = \n    // å½åä¸ä¸ææ¯å¦æ __decorate è¿ä¸ªå½æ°ï¼å¦ææå°±è¿åè¿ä¸ªå½æ°ï¼å¦ææ²¡æå°±å®ä¹ä¸ä¸ª\n    (this && this.__decorate) || function (decorators, target, key, desc) {\n      \n    // c: åæ°ä¸ªæ°ï¼æ­¤ä¾ä¸º 2\n    // r: æ­¤ä¾ä¸º target å³æé å½æ°\n    var c = arguments.length, \n        r = c < 3 ? target : desc === null ? desc = object.getownpropertydescriptor(target, key) : desc, \n        d;\n    \n    // å¦æç³»ç»æ¯æåå°ï¼åç´æ¥ä½¿ç¨reflect.decorate(decorators,target, key, desc)æ¹æ³ã\n    if (typeof reflect === "object" && typeof reflect.decorate === "function") {\n      r = reflect.decorate(decorators, target, key, desc);\n    }\n    // å¦åèªè¡å®ä¹å®ç°è£é¥°å¨æºå¶çä»£ç ã\n    else for (var i = decorators.length - 1; i >= 0; i--) {\n      if (d = decorators[i]) {\n        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n      }\n    }\n    if (c > 3 && r) {\n      return object.defineproperty(target, key, r)\n    }\n    return r;\n};\n\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof reflect === "object" && typeof reflect.metadata === "function") {\n      return reflect.metadata(k, v);\n    }\n};\n\nfunction decorator(target) {\n    // do something with "target" ...\n    console.log(target);\n}\nlet a = class a {\n    constructor() { }\n};\na = __decorate([\n    decorator,\n    __metadata("design:paramtypes", [])\n], a);\n',charsets:{cjk:!0}},{title:"Vueæºç å­¦ä¹ ï¼ä¸ï¼",frontmatter:{title:"Vueæºç å­¦ä¹ ï¼ä¸ï¼",date:"2020-10-13T09:47:00.000Z",categories:"Vue"},regularPath:"/vue/code-1.html",relativePath:"vue/code-1.md",key:"v-be252d12",path:"/vue/code-1.html",headers:[{level:2,title:"è°è¯ä¸æå",slug:"è°è¯ä¸æå",normalizedTitle:"è°è¯ä¸æå",charIndex:17},{level:2,title:"éè¿çæºç è§£å³é®é¢",slug:"éè¿çæºç è§£å³é®é¢",normalizedTitle:"éè¿çæºç è§£å³é®é¢",charIndex:579},{level:2,title:"å¹³å°æ å³ä¸å¹³å°ç¸å³",slug:"å¹³å°æ å³ä¸å¹³å°ç¸å³",normalizedTitle:"å¹³å°æ å³ä¸å¹³å°ç¸å³",charIndex:49},{level:2,title:"Vueçæé å½æ°",slug:"vueçæé å½æ°",normalizedTitle:"vueçæé å½æ°",charIndex:62},{level:2,title:"æºç æ¥éçä¸¤ä¸ªå°é®é¢",slug:"æºç æ¥éçä¸¤ä¸ªå°é®é¢",normalizedTitle:"æºç æ¥éçä¸¤ä¸ªå°é®é¢",charIndex:74},{level:2,title:"Vueåå§å-éææå",slug:"vueåå§å-éææå",normalizedTitle:"vueåå§å-éææå",charIndex:88},{level:2,title:"Vueçå®ä¾å±æ§åæ¹æ³",slug:"vueçå®ä¾å±æ§åæ¹æ³",normalizedTitle:"vueçå®ä¾å±æ§åæ¹æ³",charIndex:103}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"è°è¯ä¸æå éè¿çæºç è§£å³é®é¢ å¹³å°æ å³ä¸å¹³å°ç¸å³ Vueçæé å½æ° æºç æ¥éçä¸¤ä¸ªå°é®é¢ Vueåå§å-éææå Vueçå®ä¾å±æ§åæ¹æ³",content:"# Vueæºç å­¦ä¹ ï¼ä¸ï¼\n\n * è°è¯ä¸æå\n * templateårenderåæ¶å­å¨\n * å¹³å°æ å³ä¸å¹³å°ç¸å³\n * Vueçæé å½æ°\n * æºç æ¥éçä¸¤ä¸ªå°é®é¢\n * Vueåå§å-éææå\n * Vueçå®ä¾å±æ§åæ¹æ³\n\n\n# è°è¯ä¸æå\n\n * vueæºç ä¸­çæåå·¥å· Rollup\n   * Vue.js æºç çæåå·¥å·ä½¿ç¨çæ¯ Rollupï¼æ¯ Webpack è½»é\n   * Webpack ææææä»¶å½åæ¨¡åï¼Rollup åªå¤ç js æä»¶æ´éåå¨ Vue.js è¿æ ·çåºä¸­ä½¿ç¨\n   * Rollup æåä¸ä¼çæåä½çä»£ç \n * å®è£ä¾èµåè®¾ç½® sourcemap\n\n\"dev\": \"rollup -w -c scripts/config.js --sourcemap --environment TARGET:web- full-dev\"\n\n\n * æ§è¡npm run devæåï¼åç°distç®å½ä¸çæè®¸å¤æä»¶\n\næ­¤å¤åèï¼å®æ¹ææ¡£\n\n * æ¨èä½¿ç¨è¿è¡æ¶çæ¬ï¼å ä¸ºè¿è¡æ¶çæ¬ç¸æ¯å®æ´çä½ç§¯è¦å°å¤§çº¦ 30%\n\n * åºäº Vue-CLI åå»ºçé¡¹ç®é»è®¤ä½¿ç¨çæ¯ vue.runtime.esm.js\n\n * *.vue æä»¶ä¸­çæ¨¡æ¿æ¯å¨æå»ºæ¶é¢ç¼è¯çï¼æç»æååçç»æä¸éè¦ç¼è¯å¨ï¼åªéè¦è¿è¡\n   \n   æ¶çæ¬å³å¯\n\n\n# éè¿çæºç è§£å³é®é¢\n\nconst vm = new Vue({ \n    el: '#app', \n    template: '<h3>Hello template</h3>', \n    render (h) { \n        return h('h4', 'Hello render') \n    } \n})\n// åæ¶å­å¨templateårenderå½æ°æ¶é¡µé¢è¾åº Hello render\n\n\n * el ä¸è½æ¯ body æè html æ ç­¾\n * å¦ææ²¡æ renderï¼æ template è½¬æ¢æ render å½æ°\n * å¦ææ render æ¹æ³ï¼ç´æ¥è°ç¨ mount æè½½ DOM\n\n// 1. el ä¸è½æ¯ body æè html \nif (el === document.body || el === document.documentElement) { \n    process.env.NODE_ENV !== 'production' && warn( \n        `Do not mount Vue to <html> or <body> - mount to normal elements \ninstead.` \n    )\n    return this \n}\nconst options = this.$options \nif (!options.render) \n{ \n    // 2. æ template/el è½¬æ¢æ render å½æ° \n    â¦â¦ \n}\n// 3. è°ç¨ mount æ¹æ³ï¼æè½½ DOM \nreturn mount.call(this, el, hydrating)\n\n\n\n# å¹³å°æ å³ä¸å¹³å°ç¸å³\n\næºç çsrcç®å½ä¸æè¿æ ·çç»æ\n\n|--core\n|--platforms\n\t  |--web\n\t  |--weex\n\n\nå¶ä¸­coreå­æ¾çå°±æ¯å¹³å°æ å³ä»£ç ï¼platformsä¸­å­æ¾çå°±æ¯å¹³å°ç¸å³ä»£ç \n\nä»ä¹æ¯å¹³å°æ å³æ§:\n\n * å¹³å°æ å³æ§å°±æ¯ä¸ç§è¯­è¨å¨è®¡ç®æºä¸çè¿è¡ä¸åå¹³å°ççº¦æï¼ä¸æ¬¡ç¼è¯ï¼å°å¤æ§è¡ ã\n\nå¹³å°æ å³æä¸¤ç§ï¼\n\n * æºä»£ç çº§åç®æ ä»£ç çº§ãèCåC++å·æä¸å®ç¨åº¦çæºä»£ç çº§å¹³å°æ å³ï¼è¡¨æç¨CæC++åçåºç¨ç¨åºä¸ç¨ä¿®æ¹åªééæ°ç¼è¯å°±å¯ä»¥å¨ä¸åå¹³å°ä¸è¿è¡ã\n\n * èJavaç¼è¯åºæ¥çæ¯å­èç ï¼å»å°åªä¸ªå¹³å°é½è½ç¨ï¼åªè¦æé£ä¸ªå¹³å°çJDKå°±å¯ä»¥è¿è¡ï¼æä»¥ï¼Javaç¨åºçæå¤§ä¼å¿å°±æ¯å¹³å°æ å³ã\n\n\n# Vueçæé å½æ°\n\n * src/platform/webä¸­æä¸äºentry-æä»¶ï¼å¼ç¨äº '/runtime/index'\n\n * src/platform/web/runtime/index.js ä¸­å¼ç¨äº 'core/index'\n\n * src/core/index.js\n   \n   * å®ä¹äº Vue çéææ¹æ³\n   * initGlobalAPI(Vue)\n\n * src/core/index.js ä¸­å¼ç¨äº './instance/index'\n\n * src/core/instance/index.js\n   \n   * å®ä¹äº Vue çæé å½æ°\n\nfunction Vue (options) {\n  if (process.env.NODE_ENV !== 'production' &&\n    !(this instanceof Vue)\n  ) {\n    warn('Vue is a constructor and should be called with the `new` keyword')\n  }\n  // è°ç¨ _init() æ¹æ³ï¼å¨ initMixin ä¸­å®ä¹\n  this._init(options)\n}\n\nexport default Vue\n\n\n\n# æºç æ¥éçä¸¤ä¸ªå°é®é¢\n\nä¾å¦å¨src/core/global/index.jsä¸­ä¼ææ¥é\n\n// ä¾å¦æ­¤å¤ä¸æ¯ææ³åä¼æ¥é  \nVue.observable = <T>(obj: T): T => {\n    observe(obj)\n    return obj\n  }\n// èä¸è¿æ®µä»£ç ä¹åçé¨åä¸ä¼é«äº®æ¾ç¤º\n\n\nè§£å³ï¼æä»¶ => é¦éé¡¹ => è®¾ç½® => å³ä¸è§jsonæ ¼å¼\n\n// ä¸æ£æ¥ js è¯­æ³é®é¢\n\"javascript.validate.enable\": false\n\n\né«äº®æ¾ç¤ºï¼å®è£Babel JavaScriptæä»¶ï¼ä½æ¯ä¹åçä»£ç æäºåè½ä¸¢å¤±äºï¼ä¸è½è·³è½¬å®ä¹\n\n\n# Vueåå§å-éææå\n\néææ¹æ³ç®å½å¨ï¼src/core/global-apiä¸­\n\nsrc/core/global-api/index.jsï¼åå§å Vue çéææ¹æ³\n\nexport function initGlobalAPI (Vue: GlobalAPI) {\n\n  // src/core/global-api/index.js \n  // åå§å Vue.config å¯¹è±¡\n  Object.defineProperty(Vue, 'config', configDef)\n\n  // exposed util methods.\n  // NOTE: these are not considered part of the public API - avoid relying on\n  // them unless you are aware of the risk.\n  Vue.util = {\n    warn,\n    extend,\n    mergeOptions,\n    defineReactive\n  }\n \n  // éææ¹æ³ set/delete/nextTick\n  Vue.set = set\n  Vue.delete = del\n  Vue.nextTick = nextTick\n\n  // 2.6 explicit observable API\n  // è®©ä¸ä¸ªå¯¹è±¡å¯ååº\n  Vue.observable = <T>(obj: T): T => {\n    observe(obj)\n    return obj\n  }\n  \n  // åå§å Vue.options å¯¹è±¡ï¼å¹¶ç»å¶æ©å±\n  Vue.options = Object.create(null)\n  ASSET_TYPES.forEach(type => {\n    Vue.options[type + 's'] = Object.create(null)\n  })\n\n  // this is used to identify the \"base\" constructor to extend all plain-object\n  // components with in Weex's multi-instance scenarios.\n  Vue.options._base = Vue\n\n  // è®¾ç½® keep-alive ç»ä»¶\n  extend(Vue.options.components, builtInComponents)\n  \n  // æ³¨å Vue.use() ç¨æ¥æ³¨åæä»¶\n  initUse(Vue)\n  // æ³¨å Vue.mixin() å®ç°æ··å¥\n  initMixin(Vue)\n  // æ³¨å Vue.extend() åºäºä¼ å¥ç options è¿åä¸ä¸ªç»ä»¶çæé å½æ°\n  initExtend(Vue)\n  // æ³¨å Vue.directive()ã Vue.component()ãVue.filter()\n  initAssetRegisters(Vue)\n}\n\n\nä¸é¢ææ³¨åçå¨å±APIå¨å®æ¹ææ¡£ä¸­ã\n\nå³äºVue.directiveå¯åèè¿ç¯åå®¢ã\n\n\n# Vueçå®ä¾å±æ§åæ¹æ³\n\nå®ä¹å®ä¾å±æ§åæ¹æ³çç®å½å¨ï¼src/core/instanceä¸­\n\nsrc/core/instance/index.jsï¼å®ä¹Vueçæé å½æ°åå®ä¾æå\n\nfunction Vue (options) {\n  if (process.env.NODE_ENV !== 'production' &&\n    !(this instanceof Vue)\n  ) {\n    warn('Vue is a constructor and should be called with the `new` keyword')\n  }\n  // è°ç¨ _init() æ¹æ³ï¼å¨ initMixin ä¸­å®ä¹\n  this._init(options)\n}\n\n// ä¸é¢è¿äºæ¹æ³é½æ¯å¨ Vue çååä¸å¢å å±æ§,å³å®ä¾ä¸ä¹å¯ä»¥è°ç¨\n\n// æ³¨å vm ç _init() æ¹æ³ï¼åå§å vm\ninitMixin(Vue)\n// æ³¨å vm ç $data/$props/$set/$delete/$watch\nstateMixin(Vue)\n// åå§åäºä»¶ç¸å³æ¹æ³ $on/$once/$off/$emit\neventsMixin(Vue)\n// åå§åçå½å¨æç¸å³çæ··å¥æ¹æ³ _update/$forceUpdate/$destroy\nlifecycleMixin(Vue)\n// æ··å¥ render $nextTick/_render\nrenderMixin(Vue)\n\nexport default Vue\n",normalizedContent:"# vueæºç å­¦ä¹ ï¼ä¸ï¼\n\n * è°è¯ä¸æå\n * templateårenderåæ¶å­å¨\n * å¹³å°æ å³ä¸å¹³å°ç¸å³\n * vueçæé å½æ°\n * æºç æ¥éçä¸¤ä¸ªå°é®é¢\n * vueåå§å-éææå\n * vueçå®ä¾å±æ§åæ¹æ³\n\n\n# è°è¯ä¸æå\n\n * vueæºç ä¸­çæåå·¥å· rollup\n   * vue.js æºç çæåå·¥å·ä½¿ç¨çæ¯ rollupï¼æ¯ webpack è½»é\n   * webpack ææææä»¶å½åæ¨¡åï¼rollup åªå¤ç js æä»¶æ´éåå¨ vue.js è¿æ ·çåºä¸­ä½¿ç¨\n   * rollup æåä¸ä¼çæåä½çä»£ç \n * å®è£ä¾èµåè®¾ç½® sourcemap\n\n\"dev\": \"rollup -w -c scripts/config.js --sourcemap --environment target:web- full-dev\"\n\n\n * æ§è¡npm run devæåï¼åç°distç®å½ä¸çæè®¸å¤æä»¶\n\næ­¤å¤åèï¼å®æ¹ææ¡£\n\n * æ¨èä½¿ç¨è¿è¡æ¶çæ¬ï¼å ä¸ºè¿è¡æ¶çæ¬ç¸æ¯å®æ´çä½ç§¯è¦å°å¤§çº¦ 30%\n\n * åºäº vue-cli åå»ºçé¡¹ç®é»è®¤ä½¿ç¨çæ¯ vue.runtime.esm.js\n\n * *.vue æä»¶ä¸­çæ¨¡æ¿æ¯å¨æå»ºæ¶é¢ç¼è¯çï¼æç»æååçç»æä¸éè¦ç¼è¯å¨ï¼åªéè¦è¿è¡\n   \n   æ¶çæ¬å³å¯\n\n\n# éè¿çæºç è§£å³é®é¢\n\nconst vm = new vue({ \n    el: '#app', \n    template: '<h3>hello template</h3>', \n    render (h) { \n        return h('h4', 'hello render') \n    } \n})\n// åæ¶å­å¨templateårenderå½æ°æ¶é¡µé¢è¾åº hello render\n\n\n * el ä¸è½æ¯ body æè html æ ç­¾\n * å¦ææ²¡æ renderï¼æ template è½¬æ¢æ render å½æ°\n * å¦ææ render æ¹æ³ï¼ç´æ¥è°ç¨ mount æè½½ dom\n\n// 1. el ä¸è½æ¯ body æè html \nif (el === document.body || el === document.documentelement) { \n    process.env.node_env !== 'production' && warn( \n        `do not mount vue to <html> or <body> - mount to normal elements \ninstead.` \n    )\n    return this \n}\nconst options = this.$options \nif (!options.render) \n{ \n    // 2. æ template/el è½¬æ¢æ render å½æ° \n    â¦â¦ \n}\n// 3. è°ç¨ mount æ¹æ³ï¼æè½½ dom \nreturn mount.call(this, el, hydrating)\n\n\n\n# å¹³å°æ å³ä¸å¹³å°ç¸å³\n\næºç çsrcç®å½ä¸æè¿æ ·çç»æ\n\n|--core\n|--platforms\n\t  |--web\n\t  |--weex\n\n\nå¶ä¸­coreå­æ¾çå°±æ¯å¹³å°æ å³ä»£ç ï¼platformsä¸­å­æ¾çå°±æ¯å¹³å°ç¸å³ä»£ç \n\nä»ä¹æ¯å¹³å°æ å³æ§:\n\n * å¹³å°æ å³æ§å°±æ¯ä¸ç§è¯­è¨å¨è®¡ç®æºä¸çè¿è¡ä¸åå¹³å°ççº¦æï¼ä¸æ¬¡ç¼è¯ï¼å°å¤æ§è¡ ã\n\nå¹³å°æ å³æä¸¤ç§ï¼\n\n * æºä»£ç çº§åç®æ ä»£ç çº§ãècåc++å·æä¸å®ç¨åº¦çæºä»£ç çº§å¹³å°æ å³ï¼è¡¨æç¨cæc++åçåºç¨ç¨åºä¸ç¨ä¿®æ¹åªééæ°ç¼è¯å°±å¯ä»¥å¨ä¸åå¹³å°ä¸è¿è¡ã\n\n * èjavaç¼è¯åºæ¥çæ¯å­èç ï¼å»å°åªä¸ªå¹³å°é½è½ç¨ï¼åªè¦æé£ä¸ªå¹³å°çjdkå°±å¯ä»¥è¿è¡ï¼æä»¥ï¼javaç¨åºçæå¤§ä¼å¿å°±æ¯å¹³å°æ å³ã\n\n\n# vueçæé å½æ°\n\n * src/platform/webä¸­æä¸äºentry-æä»¶ï¼å¼ç¨äº '/runtime/index'\n\n * src/platform/web/runtime/index.js ä¸­å¼ç¨äº 'core/index'\n\n * src/core/index.js\n   \n   * å®ä¹äº vue çéææ¹æ³\n   * initglobalapi(vue)\n\n * src/core/index.js ä¸­å¼ç¨äº './instance/index'\n\n * src/core/instance/index.js\n   \n   * å®ä¹äº vue çæé å½æ°\n\nfunction vue (options) {\n  if (process.env.node_env !== 'production' &&\n    !(this instanceof vue)\n  ) {\n    warn('vue is a constructor and should be called with the `new` keyword')\n  }\n  // è°ç¨ _init() æ¹æ³ï¼å¨ initmixin ä¸­å®ä¹\n  this._init(options)\n}\n\nexport default vue\n\n\n\n# æºç æ¥éçä¸¤ä¸ªå°é®é¢\n\nä¾å¦å¨src/core/global/index.jsä¸­ä¼ææ¥é\n\n// ä¾å¦æ­¤å¤ä¸æ¯ææ³åä¼æ¥é  \nvue.observable = <t>(obj: t): t => {\n    observe(obj)\n    return obj\n  }\n// èä¸è¿æ®µä»£ç ä¹åçé¨åä¸ä¼é«äº®æ¾ç¤º\n\n\nè§£å³ï¼æä»¶ => é¦éé¡¹ => è®¾ç½® => å³ä¸è§jsonæ ¼å¼\n\n// ä¸æ£æ¥ js è¯­æ³é®é¢\n\"javascript.validate.enable\": false\n\n\né«äº®æ¾ç¤ºï¼å®è£babel javascriptæä»¶ï¼ä½æ¯ä¹åçä»£ç æäºåè½ä¸¢å¤±äºï¼ä¸è½è·³è½¬å®ä¹\n\n\n# vueåå§å-éææå\n\néææ¹æ³ç®å½å¨ï¼src/core/global-apiä¸­\n\nsrc/core/global-api/index.jsï¼åå§å vue çéææ¹æ³\n\nexport function initglobalapi (vue: globalapi) {\n\n  // src/core/global-api/index.js \n  // åå§å vue.config å¯¹è±¡\n  object.defineproperty(vue, 'config', configdef)\n\n  // exposed util methods.\n  // note: these are not considered part of the public api - avoid relying on\n  // them unless you are aware of the risk.\n  vue.util = {\n    warn,\n    extend,\n    mergeoptions,\n    definereactive\n  }\n \n  // éææ¹æ³ set/delete/nexttick\n  vue.set = set\n  vue.delete = del\n  vue.nexttick = nexttick\n\n  // 2.6 explicit observable api\n  // è®©ä¸ä¸ªå¯¹è±¡å¯ååº\n  vue.observable = <t>(obj: t): t => {\n    observe(obj)\n    return obj\n  }\n  \n  // åå§å vue.options å¯¹è±¡ï¼å¹¶ç»å¶æ©å±\n  vue.options = object.create(null)\n  asset_types.foreach(type => {\n    vue.options[type + 's'] = object.create(null)\n  })\n\n  // this is used to identify the \"base\" constructor to extend all plain-object\n  // components with in weex's multi-instance scenarios.\n  vue.options._base = vue\n\n  // è®¾ç½® keep-alive ç»ä»¶\n  extend(vue.options.components, builtincomponents)\n  \n  // æ³¨å vue.use() ç¨æ¥æ³¨åæä»¶\n  inituse(vue)\n  // æ³¨å vue.mixin() å®ç°æ··å¥\n  initmixin(vue)\n  // æ³¨å vue.extend() åºäºä¼ å¥ç options è¿åä¸ä¸ªç»ä»¶çæé å½æ°\n  initextend(vue)\n  // æ³¨å vue.directive()ã vue.component()ãvue.filter()\n  initassetregisters(vue)\n}\n\n\nä¸é¢ææ³¨åçå¨å±apiå¨å®æ¹ææ¡£ä¸­ã\n\nå³äºvue.directiveå¯åèè¿ç¯åå®¢ã\n\n\n# vueçå®ä¾å±æ§åæ¹æ³\n\nå®ä¹å®ä¾å±æ§åæ¹æ³çç®å½å¨ï¼src/core/instanceä¸­\n\nsrc/core/instance/index.jsï¼å®ä¹vueçæé å½æ°åå®ä¾æå\n\nfunction vue (options) {\n  if (process.env.node_env !== 'production' &&\n    !(this instanceof vue)\n  ) {\n    warn('vue is a constructor and should be called with the `new` keyword')\n  }\n  // è°ç¨ _init() æ¹æ³ï¼å¨ initmixin ä¸­å®ä¹\n  this._init(options)\n}\n\n// ä¸é¢è¿äºæ¹æ³é½æ¯å¨ vue çååä¸å¢å å±æ§,å³å®ä¾ä¸ä¹å¯ä»¥è°ç¨\n\n// æ³¨å vm ç _init() æ¹æ³ï¼åå§å vm\ninitmixin(vue)\n// æ³¨å vm ç $data/$props/$set/$delete/$watch\nstatemixin(vue)\n// åå§åäºä»¶ç¸å³æ¹æ³ $on/$once/$off/$emit\neventsmixin(vue)\n// åå§åçå½å¨æç¸å³çæ··å¥æ¹æ³ _update/$forceupdate/$destroy\nlifecyclemixin(vue)\n// æ··å¥ render $nexttick/_render\nrendermixin(vue)\n\nexport default vue\n",charsets:{cjk:!0}},{title:"Vueæºç å­¦ä¹ ï¼äºï¼",frontmatter:{title:"Vueæºç å­¦ä¹ ï¼äºï¼",date:"2020-10-16T09:47:00.000Z",categories:"Vue"},regularPath:"/vue/code-2.html",relativePath:"vue/code-2.md",key:"v-eb77cf16",path:"/vue/code-2.html",headers:[{level:2,title:"watchçä¸¤ä¸ªåæ°",slug:"watchçä¸¤ä¸ªåæ°",normalizedTitle:"watchçä¸¤ä¸ªåæ°",charIndex:17},{level:2,title:"ä¸ç§ç±»åç Watcher å¯¹è±¡",slug:"ä¸ç§ç±»åç-watcher-å¯¹è±¡",normalizedTitle:"ä¸ç§ç±»åç watcher å¯¹è±¡",charIndex:31},{level:2,title:"å¼æ­¥æ´æ°éå-nextTick",slug:"å¼æ­¥æ´æ°éå-nexttick",normalizedTitle:"å¼æ­¥æ´æ°éå-nexttick",charIndex:51}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"watchçä¸¤ä¸ªåæ° ä¸ç§ç±»åç Watcher å¯¹è±¡ å¼æ­¥æ´æ°éå-nextTick",content:"# Vueæºç å­¦ä¹ ï¼äºï¼\n\n * watchçä¸¤ä¸ªåæ°\n * ä¸ç§ç±»åç Watcher å¯¹è±¡\n * å¼æ­¥æ´æ°éå-nextTick\n\n\n# watchçä¸¤ä¸ªåæ°\n\n * immediateï¼ä»£è¡¨ç«å³æ§è¡ï¼èä¸æ¯ç­çå¬å¯¹è±¡æ¹ååæ§è¡\n * deepï¼æ·±åº¦çå¬ï¼å¯¹è±¡çå±æ§æ¹åä¹å¯ä»¥çå¬çå°\n\nå¯ä»¥åèè¿ç¯æç« \n\n// ä¸¤ç§åæ³\nwatch: {\n    'user.firstName': function (newValue, oldValue) {\n        this.user.fullName = this.user.firstName + '' + this.user.lastName\n    }\n}\n\nwatch: {\n    'user': {\n        handler: function (newValue, oldValue) {\n        \tthis.user.fullName = this.user.firstName + '' + this.user.lastName\n    \t},\n        deep: true,\n        immediate: true\n    }\n}\n\n\n\n# ä¸ç§ç±»åç Watcher å¯¹è±¡\n\n * æ²¡æéææ¹æ³ï¼å ä¸º $watch æ¹æ³ä¸­è¦ä½¿ç¨ Vue çå®ä¾\n\n * Watcher åä¸ç§ï¼è®¡ç®å±æ§ Watcherãç¨æ· Watcher (ä¾¦å¬å¨)ãæ¸²æ Watcher\n   \n   * è®¡ç®å±æ§ Watcher å¨ initComputd ä¸­åå»º\n   * ç¨æ· Watcher (ä¾¦å¬å¨) å¨ Vue.$watch ä¸­åå»º\n   * æ¸²æ Watcher å¨ mountComponent ä¸­åå»º\n\n * Watcheråé¨å®ç°æ¯ä¸æ ·çï¼src/core/observer/watcher.jsä¸­ï¼å¹¶ä¸æ¯ä¸ä¸ªWatcheré½æä¸ä¸ªid\n\n * åå»ºé¡ºåºï¼è®¡ç®å±æ§ Watcherãç¨æ· Watcher (ä¾¦å¬å¨)ãæ¸²æ Watcher\n\n * vm.$watch()\n   \n   * src\\core\\instance\\state.js\n\nVue.prototype.$watch = function (\n    expOrFn: string | Function,\n    cb: any,\n    options?: Object\n  ): Function {\n    // è·å Vue å®ä¾ this\n    const vm: Component = this\n    if (isPlainObject(cb)) {\n      // å¤æ­å¦æ cb æ¯å¯¹è±¡æ§è¡ createWatcher\n      return createWatcher(vm, expOrFn, cb, options)\n    }\n    options = options || {}\n    options.user = true\n    // åå»ºç¨æ· watcher å¯¹è±¡\n    const watcher = new Watcher(vm, expOrFn, cb, options)\n    // å¤æ­ immediate å¦æä¸º true\n    if (options.immediate) {\n      // ç«å³æ§è¡ä¸æ¬¡ cb åè°ï¼å¹¶ä¸æå½åå¼ä¼ å¥\n      try {\n        cb.call(vm, watcher.value)\n      } catch (error) {\n        handleError(error, vm, `callback for immediate watcher \"${watcher.expression}\"`)\n      }\n    }\n    // è¿ååæ¶çå¬çæ¹æ³\n    return function unwatchFn () {\n      watcher.teardown()\n    }\n  }\n\n\n\n# å¼æ­¥æ´æ°éå-nextTick\n\nå¯ä»¥æ¥çVue.nextTick çåçåç¨é\n\n * é¦åä¿®æ¹æ°æ®ï¼å¨scriptä»£ç åä¸­ï¼è¿æ¯å®ä»»å¡ï¼åä¸äºä»¶å¾ªç¯çææçå®ä»»å¡é½å¨ä¸»çº¿ç¨ä¸æ§è¡ï¼å½¢æä¸ä¸ªæ§è¡æ ï¼æ­¤æ¶è¿æªæ¶åDOM.\n\n * Vueå¼å¯ä¸ä¸ªå¼æ­¥éåï¼å¹¶ç¼å²å¨æ­¤äºä»¶å¾ªç¯ä¸­åççæææ°æ®ååãå¦æåä¸ä¸ªwatcherè¢«å¤æ¬¡è§¦åï¼åªä¼è¢«æ¨å¥ queueWatcher éåä¸­ä¸æ¬¡ï¼è¿ç§å¨ç¼å²æ¶å»é¤éå¤æ°æ®å¯¹äºé¿åä¸å¿è¦çè®¡ç®å DOM æä½ä¸éå¸¸éè¦\n\n# å®ä¹ä½ç½®\n\n * src\\core\\instance\\render.js\n\nVue.prototype.$nextTick = function (fn: Function) { \n    return nextTick(fn, this) \n}\n\n\n# æºç \n\n * æå¨è°ç¨ vm.$nextTick()\n * å¨ Watcher ç queueWatcher ä¸­æ§è¡ nextTick()\n * src\\core\\util\\next-tick.js\n\n# æ³¨æ\n\n * å¨ä¿®æ¹å®æ°æ®æ¶ï¼æ³è¦è·åæ´æ°å DOM ä¸ææ°æ°æ®ï¼éè¦ä½¿ç¨ nextTickï¼å ä¸º DOM çæ´æ°è¿ç¨æ¯å¼æ­¥ç\n\n * nextTick ä¼æä¼ å¥çåè°å½æ° cb åå¥ callbacks æ°ç»ï¼è¿éä½¿ç¨ callbacks èä¸æ¯ç´æ¥å¨ nextTick ä¸­æ§è¡åè°å½æ°çåå æ¯ä¿è¯å¨åä¸ä¸ª tick åå¤æ¬¡æ§è¡ nextTickæ¶ä¸ä¼å¼å¯å¤ä¸ªå¼æ­¥ä»»å¡ï¼èæ¯æè¿äºä»»å¡æ¾å¨ä¸èµ·ä¸åæ§è¡ã\n\n * é£ä¹è¿äºåè°å½æ°å¦ä½è°ç¨å¢ï¼nextTick åé¨ä¼åä½¿ç¨å¾®ä»»å¡æ§è¡å¼æ­¥çåè°å½æ°ï¼microtask å ä¸ºå¶é«ä¼åçº§ç¹æ§è½ç¡®ä¿éåä¸­çå¾®ä»»å¡å¨ä¸æ¬¡äºä»¶å¾ªç¯åè¢«æ§è¡å®æ¯ï¼å¦ææµè§å¨ä¸æ¯æ Promise çè¯ä¼éçº§æ MutationObserverï¼å¦ææµè§å¨åä¸æ¯æå¾®ä»»å¡ï¼ä¼éçº§æå®ä»»å¡ï¼å¦æ IE ä¼åä½¿ç¨ setImmediateï¼å¦åä½¿ç¨ setTimeout\n\n * ç¶åå¶å®Vueè¿è¡ DOM æ´æ°åé¨ä¹æ¯è°ç¨ nextTick æ¥åå¼æ­¥éåæ§å¶ï¼èå½æä»¬èªå·±è°ç¨ nextTick æ¶ï¼æ´æ° DOM çåè°å½æ°å·²ç»å å¥äºcallbackï¼å¨ä»åé¢åè¿½å äºæä»¬èªå·±çåè°å½æ°ï¼ä»èç¡®ä¿æä»¬çä»£ç å¨ DOM æ´æ°åæ§è¡ï¼æä»¥æä»¬å¯ä»¥æ¿å°æ´æ°åç DOM\n\n * é®é¢ï¼ æç§ macrotask => microtask => uiæ¸²æçé¡ºåºï¼è¥ nextTick å¨å¾®ä»»å¡éåä¸­ï¼æ­¤æ¶uiè¿æ²¡æ¸²æï¼é£ä»æ¯æä¹æ¿å° DOM çå¢\n   \n   * é¦åè§£éï¼å¶å®macrotask => microtask => uiæ¸²æçè§åæ¯ä¸ºäº JS å¼æçº¿ç¨å GUI æ¸²æçº¿ç¨æåºåæ¢\n   \n   * å ä¸ºå·²ç»ä¿è¯äºæä»¬ç nextTick å¨æ´æ° DOM ç nextTick ä¹åï¼å¯ä»¥æ¿å°ï¼å°±æ¯è¿æ²¡æ¸²æèå·²\n\n// æ¯æ Promise ä½¿ç¨ Promise\nif (typeof Promise !== 'undefined' && isNative(Promise)) {\n  const p = Promise.resolve()\n  timerFunc = () => {\n    p.then(flushCallbacks)\n    if (isIOS) setTimeout(noop)\n  }\n  isUsingMicroTask = true\n// å¦åä½¿ç¨ MutationObserver\n} else if (!isIE && typeof MutationObserver !== 'undefined' && (\n  isNative(MutationObserver) ||\n  // PhantomJS and iOS 7.x\n  MutationObserver.toString() === '[object MutationObserverConstructor]'\n)) {\n  // Use MutationObserver where native Promise is not available,\n  // e.g. PhantomJS, iOS7, Android 4.4\n  // (#6466 MutationObserver is unreliable in IE11)\n  let counter = 1\n  const observer = new MutationObserver(flushCallbacks)\n  const textNode = document.createTextNode(String(counter))\n  observer.observe(textNode, {\n    characterData: true\n  })\n  timerFunc = () => {\n    counter = (counter + 1) % 2\n    textNode.data = String(counter)\n  }\n  isUsingMicroTask = true\n// å¦åä½¿ç¨ setImmediate\n} else if (typeof setImmediate !== 'undefined' && isNative(setImmediate)) {\n  // Fallback to setImmediate.\n  // Technically it leverages the (macro) task queue,\n  // but it is still a better choice than setTimeout.\n  timerFunc = () => {\n    setImmediate(flushCallbacks)\n  }\n// å¦åä½¿ç¨ setTimeout\n} else {\n  // Fallback to setTimeout.\n  timerFunc = () => {\n    setTimeout(flushCallbacks, 0)\n  }\n}\n\n// å¦ææåè°å½æ° cb åå å¥ä¸ä¸ªéåï¼å¦ææ²¡æåè¿å Promiseï¼ç¬¬äºä¸ªåæ°æ¯ä¸ä¸æ\nexport function nextTick (cb?: Function, ctx?: Object) {\n  let _resolve\n  callbacks.push(() => {\n    if (cb) {\n      try {\n        cb.call(ctx)\n      } catch (e) {\n        handleError(e, ctx, 'nextTick')\n      }\n    } else if (_resolve) {\n      _resolve(ctx)\n    }\n  })\n  if (!pending) {\n    pending = true\n    timerFunc() // ååºææçåè°å½æ°è°ç¨\n  }\n  // $flow-disable-line\n  if (!cb && typeof Promise !== 'undefined') {\n    return new Promise(resolve => {\n      _resolve = resolve\n    })\n  }\n}\n",normalizedContent:"# vueæºç å­¦ä¹ ï¼äºï¼\n\n * watchçä¸¤ä¸ªåæ°\n * ä¸ç§ç±»åç watcher å¯¹è±¡\n * å¼æ­¥æ´æ°éå-nexttick\n\n\n# watchçä¸¤ä¸ªåæ°\n\n * immediateï¼ä»£è¡¨ç«å³æ§è¡ï¼èä¸æ¯ç­çå¬å¯¹è±¡æ¹ååæ§è¡\n * deepï¼æ·±åº¦çå¬ï¼å¯¹è±¡çå±æ§æ¹åä¹å¯ä»¥çå¬çå°\n\nå¯ä»¥åèè¿ç¯æç« \n\n// ä¸¤ç§åæ³\nwatch: {\n    'user.firstname': function (newvalue, oldvalue) {\n        this.user.fullname = this.user.firstname + '' + this.user.lastname\n    }\n}\n\nwatch: {\n    'user': {\n        handler: function (newvalue, oldvalue) {\n        \tthis.user.fullname = this.user.firstname + '' + this.user.lastname\n    \t},\n        deep: true,\n        immediate: true\n    }\n}\n\n\n\n# ä¸ç§ç±»åç watcher å¯¹è±¡\n\n * æ²¡æéææ¹æ³ï¼å ä¸º $watch æ¹æ³ä¸­è¦ä½¿ç¨ vue çå®ä¾\n\n * watcher åä¸ç§ï¼è®¡ç®å±æ§ watcherãç¨æ· watcher (ä¾¦å¬å¨)ãæ¸²æ watcher\n   \n   * è®¡ç®å±æ§ watcher å¨ initcomputd ä¸­åå»º\n   * ç¨æ· watcher (ä¾¦å¬å¨) å¨ vue.$watch ä¸­åå»º\n   * æ¸²æ watcher å¨ mountcomponent ä¸­åå»º\n\n * watcheråé¨å®ç°æ¯ä¸æ ·çï¼src/core/observer/watcher.jsä¸­ï¼å¹¶ä¸æ¯ä¸ä¸ªwatcheré½æä¸ä¸ªid\n\n * åå»ºé¡ºåºï¼è®¡ç®å±æ§ watcherãç¨æ· watcher (ä¾¦å¬å¨)ãæ¸²æ watcher\n\n * vm.$watch()\n   \n   * src\\core\\instance\\state.js\n\nvue.prototype.$watch = function (\n    exporfn: string | function,\n    cb: any,\n    options?: object\n  ): function {\n    // è·å vue å®ä¾ this\n    const vm: component = this\n    if (isplainobject(cb)) {\n      // å¤æ­å¦æ cb æ¯å¯¹è±¡æ§è¡ createwatcher\n      return createwatcher(vm, exporfn, cb, options)\n    }\n    options = options || {}\n    options.user = true\n    // åå»ºç¨æ· watcher å¯¹è±¡\n    const watcher = new watcher(vm, exporfn, cb, options)\n    // å¤æ­ immediate å¦æä¸º true\n    if (options.immediate) {\n      // ç«å³æ§è¡ä¸æ¬¡ cb åè°ï¼å¹¶ä¸æå½åå¼ä¼ å¥\n      try {\n        cb.call(vm, watcher.value)\n      } catch (error) {\n        handleerror(error, vm, `callback for immediate watcher \"${watcher.expression}\"`)\n      }\n    }\n    // è¿ååæ¶çå¬çæ¹æ³\n    return function unwatchfn () {\n      watcher.teardown()\n    }\n  }\n\n\n\n# å¼æ­¥æ´æ°éå-nexttick\n\nå¯ä»¥æ¥çvue.nexttick çåçåç¨é\n\n * é¦åä¿®æ¹æ°æ®ï¼å¨scriptä»£ç åä¸­ï¼è¿æ¯å®ä»»å¡ï¼åä¸äºä»¶å¾ªç¯çææçå®ä»»å¡é½å¨ä¸»çº¿ç¨ä¸æ§è¡ï¼å½¢æä¸ä¸ªæ§è¡æ ï¼æ­¤æ¶è¿æªæ¶ådom.\n\n * vueå¼å¯ä¸ä¸ªå¼æ­¥éåï¼å¹¶ç¼å²å¨æ­¤äºä»¶å¾ªç¯ä¸­åççæææ°æ®ååãå¦æåä¸ä¸ªwatcherè¢«å¤æ¬¡è§¦åï¼åªä¼è¢«æ¨å¥ queuewatcher éåä¸­ä¸æ¬¡ï¼è¿ç§å¨ç¼å²æ¶å»é¤éå¤æ°æ®å¯¹äºé¿åä¸å¿è¦çè®¡ç®å dom æä½ä¸éå¸¸éè¦\n\n# å®ä¹ä½ç½®\n\n * src\\core\\instance\\render.js\n\nvue.prototype.$nexttick = function (fn: function) { \n    return nexttick(fn, this) \n}\n\n\n# æºç \n\n * æå¨è°ç¨ vm.$nexttick()\n * å¨ watcher ç queuewatcher ä¸­æ§è¡ nexttick()\n * src\\core\\util\\next-tick.js\n\n# æ³¨æ\n\n * å¨ä¿®æ¹å®æ°æ®æ¶ï¼æ³è¦è·åæ´æ°å dom ä¸ææ°æ°æ®ï¼éè¦ä½¿ç¨ nexttickï¼å ä¸º dom çæ´æ°è¿ç¨æ¯å¼æ­¥ç\n\n * nexttick ä¼æä¼ å¥çåè°å½æ° cb åå¥ callbacks æ°ç»ï¼è¿éä½¿ç¨ callbacks èä¸æ¯ç´æ¥å¨ nexttick ä¸­æ§è¡åè°å½æ°çåå æ¯ä¿è¯å¨åä¸ä¸ª tick åå¤æ¬¡æ§è¡ nexttickæ¶ä¸ä¼å¼å¯å¤ä¸ªå¼æ­¥ä»»å¡ï¼èæ¯æè¿äºä»»å¡æ¾å¨ä¸èµ·ä¸åæ§è¡ã\n\n * é£ä¹è¿äºåè°å½æ°å¦ä½è°ç¨å¢ï¼nexttick åé¨ä¼åä½¿ç¨å¾®ä»»å¡æ§è¡å¼æ­¥çåè°å½æ°ï¼microtask å ä¸ºå¶é«ä¼åçº§ç¹æ§è½ç¡®ä¿éåä¸­çå¾®ä»»å¡å¨ä¸æ¬¡äºä»¶å¾ªç¯åè¢«æ§è¡å®æ¯ï¼å¦ææµè§å¨ä¸æ¯æ promise çè¯ä¼éçº§æ mutationobserverï¼å¦ææµè§å¨åä¸æ¯æå¾®ä»»å¡ï¼ä¼éçº§æå®ä»»å¡ï¼å¦æ ie ä¼åä½¿ç¨ setimmediateï¼å¦åä½¿ç¨ settimeout\n\n * ç¶åå¶å®vueè¿è¡ dom æ´æ°åé¨ä¹æ¯è°ç¨ nexttick æ¥åå¼æ­¥éåæ§å¶ï¼èå½æä»¬èªå·±è°ç¨ nexttick æ¶ï¼æ´æ° dom çåè°å½æ°å·²ç»å å¥äºcallbackï¼å¨ä»åé¢åè¿½å äºæä»¬èªå·±çåè°å½æ°ï¼ä»èç¡®ä¿æä»¬çä»£ç å¨ dom æ´æ°åæ§è¡ï¼æä»¥æä»¬å¯ä»¥æ¿å°æ´æ°åç dom\n\n * é®é¢ï¼ æç§ macrotask => microtask => uiæ¸²æçé¡ºåºï¼è¥ nexttick å¨å¾®ä»»å¡éåä¸­ï¼æ­¤æ¶uiè¿æ²¡æ¸²æï¼é£ä»æ¯æä¹æ¿å° dom çå¢\n   \n   * é¦åè§£éï¼å¶å®macrotask => microtask => uiæ¸²æçè§åæ¯ä¸ºäº js å¼æçº¿ç¨å gui æ¸²æçº¿ç¨æåºåæ¢\n   \n   * å ä¸ºå·²ç»ä¿è¯äºæä»¬ç nexttick å¨æ´æ° dom ç nexttick ä¹åï¼å¯ä»¥æ¿å°ï¼å°±æ¯è¿æ²¡æ¸²æèå·²\n\n// æ¯æ promise ä½¿ç¨ promise\nif (typeof promise !== 'undefined' && isnative(promise)) {\n  const p = promise.resolve()\n  timerfunc = () => {\n    p.then(flushcallbacks)\n    if (isios) settimeout(noop)\n  }\n  isusingmicrotask = true\n// å¦åä½¿ç¨ mutationobserver\n} else if (!isie && typeof mutationobserver !== 'undefined' && (\n  isnative(mutationobserver) ||\n  // phantomjs and ios 7.x\n  mutationobserver.tostring() === '[object mutationobserverconstructor]'\n)) {\n  // use mutationobserver where native promise is not available,\n  // e.g. phantomjs, ios7, android 4.4\n  // (#6466 mutationobserver is unreliable in ie11)\n  let counter = 1\n  const observer = new mutationobserver(flushcallbacks)\n  const textnode = document.createtextnode(string(counter))\n  observer.observe(textnode, {\n    characterdata: true\n  })\n  timerfunc = () => {\n    counter = (counter + 1) % 2\n    textnode.data = string(counter)\n  }\n  isusingmicrotask = true\n// å¦åä½¿ç¨ setimmediate\n} else if (typeof setimmediate !== 'undefined' && isnative(setimmediate)) {\n  // fallback to setimmediate.\n  // technically it leverages the (macro) task queue,\n  // but it is still a better choice than settimeout.\n  timerfunc = () => {\n    setimmediate(flushcallbacks)\n  }\n// å¦åä½¿ç¨ settimeout\n} else {\n  // fallback to settimeout.\n  timerfunc = () => {\n    settimeout(flushcallbacks, 0)\n  }\n}\n\n// å¦ææåè°å½æ° cb åå å¥ä¸ä¸ªéåï¼å¦ææ²¡æåè¿å promiseï¼ç¬¬äºä¸ªåæ°æ¯ä¸ä¸æ\nexport function nexttick (cb?: function, ctx?: object) {\n  let _resolve\n  callbacks.push(() => {\n    if (cb) {\n      try {\n        cb.call(ctx)\n      } catch (e) {\n        handleerror(e, ctx, 'nexttick')\n      }\n    } else if (_resolve) {\n      _resolve(ctx)\n    }\n  })\n  if (!pending) {\n    pending = true\n    timerfunc() // ååºææçåè°å½æ°è°ç¨\n  }\n  // $flow-disable-line\n  if (!cb && typeof promise !== 'undefined') {\n    return new promise(resolve => {\n      _resolve = resolve\n    })\n  }\n}\n",charsets:{cjk:!0}},{title:"Vueæºç å­¦ä¹ ï¼ä¸ï¼",frontmatter:{title:"Vueæºç å­¦ä¹ ï¼ä¸ï¼",date:"2020-10-20T09:47:00.000Z",categories:"Vue"},regularPath:"/vue/code-3.html",relativePath:"vue/code-3.md",key:"v-739ac773",path:"/vue/code-3.html",headers:[{level:2,title:"Array.prototype.concat.apply",slug:"array-prototype-concat-apply",normalizedTitle:"array.prototype.concat.apply",charIndex:17},{level:2,title:"æ¨¡æ¿ç¼è¯",slug:"æ¨¡æ¿ç¼è¯",normalizedTitle:"æ¨¡æ¿ç¼è¯",charIndex:49},{level:2,title:"ç®è¿° Vue é¦æ¬¡æ¸²æè¿ç¨",slug:"ç®è¿°-vue-é¦æ¬¡æ¸²æè¿ç¨",normalizedTitle:"ç®è¿° vue é¦æ¬¡æ¸²æè¿ç¨",charIndex:57},{level:2,title:"ç®è¿° Vue é¦æ¬¡æ¨¡æ¿ç¼è¯è¿ç¨",slug:"ç®è¿°-vue-é¦æ¬¡æ¨¡æ¿ç¼è¯è¿ç¨",normalizedTitle:"ç®è¿° vue é¦æ¬¡æ¨¡æ¿ç¼è¯è¿ç¨",charIndex:74}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"Array.prototype.concat.apply æ¨¡æ¿ç¼è¯ ç®è¿° Vue é¦æ¬¡æ¸²æè¿ç¨ ç®è¿° Vue é¦æ¬¡æ¨¡æ¿ç¼è¯è¿ç¨",content:"# Vueæºç å­¦ä¹ ï¼ä¸ï¼\n\n * Array.prototype.concat.apply\n * æ¨¡æ¿ç¼è¯\n * ç®è¿° Vue é¦æ¬¡æ¸²æè¿ç¨\n * ç®è¿° Vue é¦æ¬¡æ¨¡æ¿ç¼è¯è¿ç¨\n\n\n# Array.prototype.concat.apply\n\n * å¦æconcatæ¹æ³çåæ°æ¯ä¸ä¸ªåç´ ï¼è¯¥åç´ ä¼è¢«ç´æ¥æå¥å°æ°æ°ç»ä¸­ï¼å¦æåæ°æ¯ä¸ä¸ªæ°ç»ï¼è¯¥æ°ç»çåä¸ªåç´ å°è¢«æå¥å°æ°æ°ç»ä¸­ï¼å°è¯¥ç¹æ§åºç¨å°ä»£ç ä¸­å®ææ°ç»éç»´\n\n// vue æºç ä¸­çä¸æ®µ\nfunction simpleNormalizeChildren (children: any) {\n    for (let i = 0; i < children.length; i++) {\n        // å¦æç¬¬ i é¡¹æ¯æ°ç»åéç»´\n        if (Array.isArray(children[i])) {\n            return Array.prototype.concat.apply([], children)\n        }\n    }\n    return children\n}\n\n// æµè¯\nlet children = [1, 2, 3, [4, 5, 6], 7, 8, [9, 10]];\nsimpleNormalizeChildren(children);\n// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n\n\n\n# æ¨¡æ¿ç¼è¯\n\n * æ¨¡æ¿ç¼è¯çä¸»è¦ç®çæ¯å°æ¨¡æ¿ (template) è½¬æ¢ä¸ºæ¸²æå½æ° (render)\n\n<div> \n    <h1 @click=\"handler\">title</h1> \n    <p>some content</p> \n</div>\n\n\n * æ¸²æå½æ° render\n\nrender (h) { \n    return h('div', [ \n        h('h1', { on: { click: this.handler} }, 'title'), \n        h('p', 'some content') \n    ]) \n}\n\n\n * æ¨¡æ¿ç¼è¯çä½ç¨\n   \n   * Vue 2.x ä½¿ç¨ VNode æè¿°è§å¾ä»¥ååç§äº¤äºï¼ç¨æ·èªå·±ç¼å VNode æ¯è¾å¤æ\n   * ç¨æ·åªéè¦ç¼åç±»ä¼¼ HTML çä»£ç  - Vue æ¨¡æ¿ï¼éè¿ç¼è¯å¨å°æ¨¡æ¿è½¬æ¢ä¸ºè¿å VNode ç render å½æ°\n   * .vue æä»¶ä¼è¢« webpack å¨æå»ºçè¿ç¨ä¸­è½¬æ¢æ render å½æ°ï¼Vue-loaderï¼\n\n * å¨çº¿ç¼è¯\n   \n   * vue2.xxçæ¬å¨çº¿ç¼è¯:https://template-explorer.vuejs.org/#\n   * vue3.xxçæ¬å¨çº¿ç¼è¯:https://vue-next-template-explorer.netlify.app/#\n\n\n# ç®è¿° Vue é¦æ¬¡æ¸²æè¿ç¨\n\nåèå¤§åç«¯å­¦ä¹ -Vueé¦æ¬¡æ¸²æè¿ç¨\n\n\n# ç®è¿° Vue é¦æ¬¡æ¨¡æ¿ç¼è¯è¿ç¨\n\nåèVue ä¸­æ¨¡æ¿çç¼è¯è¿ç¨æ¦è¿°",normalizedContent:"# vueæºç å­¦ä¹ ï¼ä¸ï¼\n\n * array.prototype.concat.apply\n * æ¨¡æ¿ç¼è¯\n * ç®è¿° vue é¦æ¬¡æ¸²æè¿ç¨\n * ç®è¿° vue é¦æ¬¡æ¨¡æ¿ç¼è¯è¿ç¨\n\n\n# array.prototype.concat.apply\n\n * å¦æconcatæ¹æ³çåæ°æ¯ä¸ä¸ªåç´ ï¼è¯¥åç´ ä¼è¢«ç´æ¥æå¥å°æ°æ°ç»ä¸­ï¼å¦æåæ°æ¯ä¸ä¸ªæ°ç»ï¼è¯¥æ°ç»çåä¸ªåç´ å°è¢«æå¥å°æ°æ°ç»ä¸­ï¼å°è¯¥ç¹æ§åºç¨å°ä»£ç ä¸­å®ææ°ç»éç»´\n\n// vue æºç ä¸­çä¸æ®µ\nfunction simplenormalizechildren (children: any) {\n    for (let i = 0; i < children.length; i++) {\n        // å¦æç¬¬ i é¡¹æ¯æ°ç»åéç»´\n        if (array.isarray(children[i])) {\n            return array.prototype.concat.apply([], children)\n        }\n    }\n    return children\n}\n\n// æµè¯\nlet children = [1, 2, 3, [4, 5, 6], 7, 8, [9, 10]];\nsimplenormalizechildren(children);\n// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n\n\n\n# æ¨¡æ¿ç¼è¯\n\n * æ¨¡æ¿ç¼è¯çä¸»è¦ç®çæ¯å°æ¨¡æ¿ (template) è½¬æ¢ä¸ºæ¸²æå½æ° (render)\n\n<div> \n    <h1 @click=\"handler\">title</h1> \n    <p>some content</p> \n</div>\n\n\n * æ¸²æå½æ° render\n\nrender (h) { \n    return h('div', [ \n        h('h1', { on: { click: this.handler} }, 'title'), \n        h('p', 'some content') \n    ]) \n}\n\n\n * æ¨¡æ¿ç¼è¯çä½ç¨\n   \n   * vue 2.x ä½¿ç¨ vnode æè¿°è§å¾ä»¥ååç§äº¤äºï¼ç¨æ·èªå·±ç¼å vnode æ¯è¾å¤æ\n   * ç¨æ·åªéè¦ç¼åç±»ä¼¼ html çä»£ç  - vue æ¨¡æ¿ï¼éè¿ç¼è¯å¨å°æ¨¡æ¿è½¬æ¢ä¸ºè¿å vnode ç render å½æ°\n   * .vue æä»¶ä¼è¢« webpack å¨æå»ºçè¿ç¨ä¸­è½¬æ¢æ render å½æ°ï¼vue-loaderï¼\n\n * å¨çº¿ç¼è¯\n   \n   * vue2.xxçæ¬å¨çº¿ç¼è¯:https://template-explorer.vuejs.org/#\n   * vue3.xxçæ¬å¨çº¿ç¼è¯:https://vue-next-template-explorer.netlify.app/#\n\n\n# ç®è¿° vue é¦æ¬¡æ¸²æè¿ç¨\n\nåèå¤§åç«¯å­¦ä¹ -vueé¦æ¬¡æ¸²æè¿ç¨\n\n\n# ç®è¿° vue é¦æ¬¡æ¨¡æ¿ç¼è¯è¿ç¨\n\nåèvue ä¸­æ¨¡æ¿çç¼è¯è¿ç¨æ¦è¿°",charsets:{cjk:!0}},{title:"Virtual DOM ä¸ Diff ç®æ³",frontmatter:{title:"Virtual DOM ä¸ Diff ç®æ³",date:"2021-01-15T11:27:54.000Z",categories:"VirtualDOM"},regularPath:"/virtual-dom/virtualdom.html",relativePath:"virtual-dom/virtualdom.md",key:"v-9d022a42",path:"/virtual-dom/virtualdom.html",headers:[{level:2,title:"ä»ä¹æ¯èæDOM",slug:"ä»ä¹æ¯èædom",normalizedTitle:"ä»ä¹æ¯èædom",charIndex:28},{level:3,title:"Virtual DOM åº",slug:"virtual-dom-åº",normalizedTitle:"virtual dom åº",charIndex:689},{level:2,title:"ä½¿ç¨ Snabbdom",slug:"ä½¿ç¨-snabbdom",normalizedTitle:"ä½¿ç¨ snabbdom",charIndex:40},{level:3,title:"å¦ä½ä½¿ç¨",slug:"å¦ä½ä½¿ç¨",normalizedTitle:"å¦ä½ä½¿ç¨",charIndex:1347},{level:3,title:"snabbdomçæ¨¡å",slug:"snabbdomçæ¨¡å",normalizedTitle:"snabbdomçæ¨¡å",charIndex:1899},{level:2,title:"æºç è§£è¯»",slug:"æºç è§£è¯»",normalizedTitle:"æºç è§£è¯»",charIndex:55},{level:3,title:"hå½æ°ï¼",slug:"hå½æ°",normalizedTitle:"hå½æ°ï¼",charIndex:2507},{level:3,title:"VNodeå¯¹è±¡",slug:"vnodeå¯¹è±¡",normalizedTitle:"vnodeå¯¹è±¡",charIndex:74},{level:3,title:"patchè¿ç¨",slug:"patchè¿ç¨",normalizedTitle:"patchè¿ç¨",charIndex:4274},{level:3,title:"initå½æ°",slug:"initå½æ°",normalizedTitle:"initå½æ°",charIndex:87},{level:3,title:"patchå½æ°",slug:"patchå½æ°",normalizedTitle:"patchå½æ°",charIndex:1410},{level:3,title:"patchVnodeå½æ°",slug:"patchvnodeå½æ°",normalizedTitle:"patchvnodeå½æ°",charIndex:7582},{level:3,title:"updateChildren",slug:"updatechildren",normalizedTitle:"updatechildren",charIndex:7953},{level:2,title:"å³äº V-for å¸¦ key",slug:"å³äº-v-for-å¸¦-key",normalizedTitle:"å³äº v-for å¸¦ key",charIndex:9641},{level:2,title:"åºæ¯ï¼list ä¸æ¡æ°æ®å é¤ä¸­é´çé£æ¡",slug:"åºæ¯-list-ä¸æ¡æ°æ®å é¤ä¸­é´çé£æ¡",normalizedTitle:"åºæ¯ï¼list ä¸æ¡æ°æ®å é¤ä¸­é´çé£æ¡",charIndex:10040},{level:2,title:"vue å react å¨èædomçdiffä¸ï¼åäºåªäºæ¹è¿ä½¿å¾éåº¦å¾å¿«",slug:"vue-å-react-å¨èædomçdiffä¸-åäºåªäºæ¹è¿ä½¿å¾éåº¦å¾å¿«",normalizedTitle:"vue å react å¨èædomçdiffä¸ï¼åäºåªäºæ¹è¿ä½¿å¾éåº¦å¾å¿«",charIndex:123},{level:2,title:"React å Vue ç diff æ¶é´å¤æåº¦ä» O(n^3) ä¼åå° O(n) ï¼é£ä¹ O(n^3) å O(n) æ¯å¦ä½è®¡ç®åºæ¥çï¼",slug:"react-å-vue-ç-diff-æ¶é´å¤æåº¦ä»-o-n-3-ä¼åå°-o-n-é£ä¹-o-n-3-å-o-n-æ¯å¦ä½è®¡ç®åºæ¥ç",normalizedTitle:"react å vue ç diff æ¶é´å¤æåº¦ä» o(n^3) ä¼åå° o(n) ï¼é£ä¹ o(n^3) å o(n) æ¯å¦ä½è®¡ç®åºæ¥çï¼",charIndex:164}],lastUpdated:"2/14/2023, 7:39:21 PM",lastUpdatedTimestamp:1676374761e3,headersStr:"ä»ä¹æ¯èæDOM Virtual DOM åº ä½¿ç¨ Snabbdom å¦ä½ä½¿ç¨ snabbdomçæ¨¡å æºç è§£è¯» hå½æ°ï¼ VNodeå¯¹è±¡ patchè¿ç¨ initå½æ° patchå½æ° patchVnodeå½æ° updateChildren å³äº V-for å¸¦ key åºæ¯ï¼list ä¸æ¡æ°æ®å é¤ä¸­é´çé£æ¡ vue å react å¨èædomçdiffä¸ï¼åäºåªäºæ¹è¿ä½¿å¾éåº¦å¾å¿« React å Vue ç diff æ¶é´å¤æåº¦ä» O(n^3) ä¼åå° O(n) ï¼é£ä¹ O(n^3) å O(n) æ¯å¦ä½è®¡ç®åºæ¥çï¼",content:"# Virtual DOM ä¸ Diff ç®æ³\n\n * ä»ä¹æ¯èæDOM\n * ä½¿ç¨ Snabbdom\n * æºç è§£è¯»\n   * hå½æ°\n   * VNodeå¯¹è±¡\n   * initå½æ°\n * Diff ç®æ³\n * v-for å¸¦ key\n * vue å react å¨èædomçdiffä¸ï¼åäºåªäºæ¹è¿ä½¿å¾éåº¦å¾å¿«\n * React å Vue ç diff æ¶é´å¤æåº¦ä» O(n^3) ä¼åå° O(n) ï¼é£ä¹ O(n^3) å O(n) æ¯å¦ä½è®¡ç®åºæ¥çï¼\n\n\n# ä»ä¹æ¯èæDOM\n\n * èæDOMæ¯ç±æ®éç JS å¯¹è±¡æ¥æè¿° DOM å¯¹è±¡ï¼å ä¸ºä¸æ¯çå®ç DOM å¯¹è±¡ï¼æä»¥å«èæ DOM\n\n * åå»ºèæ DOM çå¼éæ¯çå® DOM å°å¾å¤\n\n * èæ DOM çå¥½å¤æ¯å½ç¶ææ¹åæ¶ä¸éè¦ç«å³æ´æ° DOMï¼åªéè¦ä¸ä¸ªèææ æ¥æè¿° DOMï¼èæDOMåé¨å°å¼æ¸æ¥å¦ä½ææï¼diffï¼çæ´æ° DOM\n\n * å¦ææ¯æ¬¡æ´æ¹åºç¨ç¨åºç¶æé½éæ°åå»ºæ´ä¸ª DOMï¼åç¨åºéå¸¸ç¼æ¢ï¼èèæDOMå¯ä»¥è·è¸ªä¸ä¸æ¬¡çç¶æ\n\n * é¤äºæ¸²æ DOM ä»¥å¤,è¿å¯ä»¥å®ç° SSR(Nuxt.js/Next.js),åçåºç¨(Weex/React Native),å°ç¨åº(mpvue/uni-app)\n\n * å³äºæå¡ç«¯æ¸²æï¼SSRï¼å¯æ¥çï¼\n   \n   * https://www.jianshu.com/p/b8cfa496b7ec\n   * https://blog.csdn.net/github_34708151/article/details/98344114\n\n\n# Virtual DOM åº\n\n * Snabbdom\n   * Vue 2.x åé¨ä½¿ç¨ç Virtual DOM å°±æ¯æ¹é ç Snabbom\n   * å¤§çº¦ 200 SLOCï¼single line of codeï¼\n   * éè¿æ¨¡åå¯æ©å±\n   * æºç ä½¿ç¨ TS å¼å\n   * æå¿«ç Virtual DOM ä¹ä¸\n\n\n# ä½¿ç¨ Snabbdom\n\n * å¯ä»¥ä½¿ç¨parcelæå»ºå·¥å·ï¼æ¯è¾è½»ä¾¿\n\nyarn add snabbdom\n\n\n * Snabbdom å®ç½ demo ä¸­å¯¼å¥ä½¿ç¨çæ¯ common.js æ¨¡ååè¯­æ³ï¼æä»¬ä½¿ç¨ ES Modules è¯­æ³ import\n\nrequire snabbdom from 'snabbdom' // å¯¼å¥ææå½æ°\nimport { init, h, thunk } from 'snabbdom'\n\n// ä¸ä½¿ç¨ import snabbdom from 'snabbdom' æ¯å ä¸º\n// snabbdom.ts æ«å°¾å¯¼åºä½¿ç¨çè¯­æ³æ¯ export å¯¼åºï¼èæ²¡æä½¿ç¨ export default\n\n\n * init æ¯ä¸ä¸ªé«é¶å½æ°ï¼è¿å patch()\n * h()è¿åèæç»ç¹ VNodeï¼è¿ä¸ªå½æ°å¨Vue.jsä¸­è§è¿\n\nnew Vue({\n    router,\n    store,\n    render: h => h(App)\n}).$mount('#app')\n\n\n * thunk()æ¯ä¸ç§ä¼åç­ç¥ï¼å¯ä»¥å¨å¤çä¸å¯åæ°æ®æ¶ä½¿ç¨\n\n\n# å¦ä½ä½¿ç¨\n\n// divä¸­æ¾ç½®å­åç´  h1,p\nimport { h, init } from 'snabbdom'\n\n// patchå½æ°ï¼ä½ç¨å¯¹æ¯ä¸¤ä¸ªvnodeçå·®å¼æ´æ°å°çå®DOM\nlet patch = init([])\n\n// ç¬¬ä¸ä¸ªåæ°ï¼æ ç­¾+éæ©å¨\n// ç¬¬äºä¸ªåæ°ï¼å¦ææ¯å­ç¬¦ä¸²çè¯å°±æ¯æ ç­¾ä¸­çåå®¹\nlet vnode = h('div#container', [\n  h('h1', 'Hello Snabbdom'),\n  h('p', 'è¿æ¯ä¸ä¸ªpæ ç­¾')\n])\n\nlet app = document.querySelector('#app')\n\nlet oldVnode = patch(app, vnode)\n\n// ä¸¤ç§ä¹åç»§ç»­æ´æ°\nsetTimeout(() => {\n  vnode = h('div#container', [\n    h('h1', 'Hello World'),\n    h('p', 'Hello P')\n  ])\n  patch(oldVnode, vnode)\n\n  // æ¸ç©ºé¡µé¢åç´  -- éè¯¯\n  // patch(oldVnode, null)\n  // patch(oldVnode, h('!'))\n}, 2000);\n\n\n\n# snabbdomçæ¨¡å\n\nç±»ä¼¼äºæä»¶æºå¶\n\nimport { init, h } from 'snabbdom'\n// 1. å¯¼å¥æ¨¡å\nimport style from 'snabbdom/modules/style'\nimport eventlisteners from 'snabbdom/modules/eventlisteners'\n// 2. æ³¨åæ¨¡å\nlet patch = init([\n  style,\n  eventlisteners\n])\n// 3. ä½¿ç¨ h() å½æ°çç¬¬äºä¸ªåæ°ä¼ å¥æ¨¡åéè¦çæ°æ®ï¼å¯¹è±¡ï¼\nlet vnode = h('div', {\n  style: {\n    backgroundColor: 'red'\n  },\n  on: {\n    click: eventHandler\n  }\n}, [\n  h('h1', 'Hello Snabbdom'),\n  h('p', 'è¿æ¯pæ ç­¾')\n])\n\nfunction eventHandler () {\n  console.log('ç¹å»æäº')\n}\n\nlet app = document.querySelector('#app')\n\nlet oldVnode = patch(app, vnode)\n\n\n\n# æºç è§£è¯»\n\næºç å°åï¼https://github.com/snabbdom/snabbdom\n\n\n# hå½æ°ï¼\n\n * h å½æ°ä¸»è¦æ ¹æ®ä¼ è¿æ¥çåæ°ï¼è¿åä¸ä¸ª vnode å¯¹è±¡\n\n// hå½æ°çéè½½ï¼TSæ¯æ\nexport function h (sel: string): VNode\nexport function h (sel: string, data: VNodeData | null): VNode\nexport function h (sel: string, children: VNodeChildren): VNode\nexport function h (sel: string, data: VNodeData | null, children: VNodeChildren): VNode\nexport function h (sel: any, b?: any, c?: any): VNode {\n  var data: VNodeData = {}, children: any, text: any, i: number\n  // å¤çåæ°ï¼å®ç°éè½½çæºå¶\n  if (c !== undefined) {\n    // å¤çä¸ä¸ªåæ°çæåµ\n    // ...\n  // å¤çä¸¤ä¸ªåæ°çæåµ\n  } else if (b !== undefined && b !== null) {\n\t// ...\n  }\n  if (children !== undefined) {\n    // å¤ç children ä¸­çåå§å¼ï¼string/numberï¼\n    for (i = 0; i < children.length; ++i) {\n      // å¦æ child æ¯ string/numberï¼åå»ºææ¬èç¹\n    }\n  }\n  // å¦ææ¯ svg ï¼åå»ºå½åç©ºé´\n  if (\n    sel[0] === 's' && sel[1] === 'v' && sel[2] === 'g' &&\n    (sel.length === 3 || sel[3] === '.' || sel[3] === '#')\n  ) {\n    addNS(data, children, sel)\n  }\n  // è¿åvnode\n  return vnode(sel, data, children, text, undefined)\n};\n\n\n\n# VNodeå¯¹è±¡\n\n * ä¸ä¸ª VNode å°±æ¯ä¸ä¸ªèæèç¹ç¨æ¥æè¿°ä¸ä¸ª DOM åç´ ï¼å¦æè¿ä¸ª VNode æ children å°±æ¯Virtual DOM\n\n * æºç ä½ç½®ï¼src/vnode.ts\n\nexport type Key = string | number\n\n// æ¥å£\nexport interface VNode {\n  // éæ©å¨  \n  sel: string | undefined\n  // èç¹æ°æ®ï¼å±æ§/æ ·å¼/äºä»¶ç­\n  data: VNodeData | undefined\n  // å­èç¹\n  children: Array<VNode | string> | undefined\n  // è®°å½ vnode å¯¹åºççå® DOM\n  elm: Node | undefined\n  // èç¹ä¸­çåå®¹ï¼å children åªè½äºæ¥\n  text: string | undefined\n  key: Key | undefined\n}\n\n// å®ç°æ¥å£\nexport function vnode (sel: string | undefined,\n  data: any | undefined,\n  children: Array<VNode | string> | undefined,\n  text: string | undefined,\n  elm: Element | Text | undefined): VNode {\n  const key = data === undefined ? undefined : data.key\n  // ä½¿ç¨jså¯¹è±¡æè¿°DOM\n  return { sel, data, children, text, elm, key }\n}\n\n\n\n# patchè¿ç¨\n\n * patch(oldVnode, newVnode)\n * æè¡¥ä¸ï¼ææ°èç¹ä¸­ååçåå®¹æ¸²æå°çå®DOMï¼æåè¿åæ°èç¹ä½ä¸ºä¸ä¸æ¬¡å¤ççæ§èç¹\n * å¯¹æ¯æ°æ§ VNode æ¯å¦ç¸åèç¹ï¼èç¹ç key å sel ç¸åï¼\n * å¦æä¸æ¯ç¸åèç¹ï¼å é¤ä¹åçåå®¹ï¼éæ°æ¸²æ\n * å¦ææ¯ç¸åèç¹ï¼åå¤æ­æ°ç VNode æ¯å¦æ textï¼å¦ææå¹¶ä¸åæ§èç¹ text ä¸åï¼ç´æ¥æ´æ°\n * å¦ææ°ç VNode æ childrenï¼å¤æ­å­èç¹æ¯å¦æååï¼å¤æ­å­èç¹çè¿ç¨ä½¿ç¨çå°±æ¯ diff ç®æ³\n * diff è¿ç¨åªè¿è¡åå±çº§æ¯è¾\n\n\n# initå½æ°\n\n * åè½: init(modules, domApi)ï¼è¿å patch() å½æ°ï¼é«é¶å½æ°ï¼\n\n * ä¸ºä»ä¹è¦ä½¿ç¨é«é¶å½æ°ï¼\n   \n   * å ä¸º patch() å½æ°å¨å¤é¨ä¼è°ç¨å¤æ¬¡ï¼æ¯æ¬¡è°ç¨ä¾èµä¸äºåæ°ï¼æ¯å¦ï¼modules/domApi/cbs\n   \n   * éè¿é«é¶å½æ°è®© init() åé¨å½¢æé­åï¼è¿åç patch() å¯ä»¥è®¿é®å° modules/domApi/cbsï¼èä¸éè¦éæ°åå»º\n\n * init() å¨è¿å patch() ä¹åï¼é¦åæ¶éäºæææ¨¡åä¸­çé©å­å½æ°å­å¨å° cbs å¯¹è±¡ä¸­\n\n * æºç ä½ç½®ï¼src/snabbdom.ts\n\n// é©å­å½æ°\nconst hooks: (keyof Module)[] = ['create', 'update', 'remove', 'destroy', 'pre', 'post'];\n// ç¬¬ä¸ä¸ªåæ°æ¯æ¨¡åï¼åèä¸é¢æ¨¡åä½¿ç¨çé¨å\nexport function init(modules: Array<Partial<Module>>, domApi?: DOMAPI) { \n    let i: number, j: number, cbs = ({} as ModuleHooks); \n    // åå§å api ï¼htmlDomApiéæ¯ä¸äºåç DOM apiï¼ç¨äºåå»ºçå® DOM\n    // å¦ææ³æèæ DOM è½¬åä¸ºå¶ä»ç±»åæ¶ï¼å¯ä»¥ä¼ å¥ç¬¬äºä¸ªåæ°\n    const api: DOMAPI = domApi !== undefined ? domApi : htmlDomApi; \n    // æä¼ å¥çæææ¨¡åçé©å­æ¹æ³ï¼ç»ä¸å­å¨å° cbs å¯¹è±¡ä¸­ \n    // æç»æå»ºç cbs å¯¹è±¡çå½¢å¼ cbs = [ create: [fn1, fn2], update: [], ... ] \n    for (i = 0; i < hooks.length; ++i) { \n        // cbs['create'] = [] \n        cbs[hooks[i]] = []; \n        for (j = 0; j < modules.length; ++j) { \n         \t// const hook = modules[0]['create'] \n            // æ¯ä¸ä¸ªæ¨¡åé½ä¼å¯¼åºé©å­å½æ°çæ¹æ³ï¼ä¾å¦ attributes.ts ä¸­å¯¼åº\n            // export const attributesModule: Module = \n            // { create: updateAttrs, update: updateAttrs }\n            const hook = modules[j][hooks[i]]; \n            if (hook !== undefined) { \n                (cbs[hooks[i]] as Array<any>).push(hook);\n            } \n        } \n    }\n    â¦\n    return function patch(oldVnode: VNode | Element, vnode: VNode): VNode {}\n}\n\n\n\n# patchå½æ°\n\n * åè½ï¼\n   \n   * ä¼ å¥æ°æ§ VNodeï¼å¯¹æ¯å·®å¼ï¼æå·®å¼æ¸²æå° DOM\n   * è¿åæ°ç VNodeï¼ä½ä¸ºä¸ä¸æ¬¡ patch() ç oldVnode\n\n * æ§è¡è¿ç¨ï¼\n   \n   * vnode ä¸å­å¨ï¼ä½æ¯ oldVnode å­å¨ï¼è¯´ææ¯éè¦éæ¯æ§èç¹\n   * vnode å­å¨ï¼ä½æ¯ oldVnode ä¸å­å¨ï¼è¯´ææ¯éè¦åå»ºæ°èç¹\n   * å¦æ oldVnode å vnode é½å­å¨ä¸æ¯ç¸åèç¹æ¶\n     * è°ç¨ patchVnode()ï¼æ¾èç¹çå·®å¼å¹¶æ´æ° DOM\n   * å¦æ oldVnode å vnode é½å­å¨ä¸æ¯ä¸åèç¹æ¶\n     * æ ¹æ® vnode åå»ºä¸ä¸ªçå®ç DOM èç¹ï¼å é¤èèç¹ï¼å¢å æ°èç¹\n\n// vnode ä¸å­å¨ï¼ä½æ¯ oldVnode å­å¨ï¼è¯´ææ¯éè¦éæ¯æ§èç¹\nif (isUndef(vnode)) {\n  if (isDef(oldVnode)) invokeDestroyHook(oldVnode)\n  return\n}\n\n// vnode å­å¨ï¼ä½æ¯ oldVnode ä¸å­å¨ï¼è¯´ææ¯éè¦åå»ºæ°èç¹\nif (isUndef(oldVnode)) {\n  isInitialPatch = true\n  createElm(vnode, insertedVnodeQueue)\n}\n\n// å¦ææ°æ§èç¹æ¯ç¸åèç¹\nif (sameVnode(oldVnode, vnode)) { \n  // æ¾èç¹çå·®å¼å¹¶æ´æ° DOM \n  patchVnode(oldVnode, vnode, insertedVnodeQueue); \n} else { \n  // å¦ææ°æ§èç¹ä¸åï¼vnode åå»ºå¯¹åºç DOM \n  // è·åå½åç DOM åç´  \n  elm = oldVnode.elm!; \n  parent = api.parentNode(elm); \n  // createElm æ¯ä¸º VNode åå»ºçå®ç DOM \n  createElm(vnode, insertedVnodeQueue); \n  if (parent !== null) { \n    // å¦æç¶èç¹ä¸ä¸ºç©ºï¼æ vnode å¯¹åºç DOM æå¥å°ææ¡£ä¸­ \n    api.insertBefore(parent, vnode.elm!, api.nextSibling(elm)); \n    // ç§»é¤èèç¹ \n    removeVnodes(parent, [oldVnode], 0, 0);\n  } \n}\nreturn vnode\n\n// å½å¯ä»¥æ¯è¾æ¶ï¼è°ç¨ patchVnode æ¾å·®å¼å¹¶æ´æ° DOM\n// å½ä¸å¼å¾æ¯è¾æ¶ï¼æ°èç¹ç´æ¥æèèç¹æ´ä¸ªæ¿æ¢äº\n// æåä¼è¿å VNodeï¼å¯ä»¥ç»§ç»­è¿è¡ä¸ä¸ä¸ª patch è¿ç¨\n\n// sameVnode å¤æ­äº keyã tagã isCommentï¼æ¯å¦ä¸ºæ³¨éèç¹ï¼\nfunction sameVnode(a, b) {\n  return (\n    a.key === b.key &&\n    a.asyncFactory === b.asyncFactory &&\n    ((a.tag === b.tag &&\n      a.isComment === b.isComment &&\n      isDef(a.data) === isDef(b.data) &&\n      sameInputType(a, b)) ||\n      (isTrue(a.isAsyncPlaceholder) && isUndef(b.asyncFactory.error)))\n  )\n}\n\n\n\n# patchVnodeå½æ°\n\n * åè½ï¼\n   \n   * patchVnode(oldVnode, vnode, insertedVnodeQueue)\n   * å¯¹æ¯ oldVnode å vnode çå·®å¼ï¼æå·®å¼æ¸²æå° DOM\n\n * æ§è¡è¿ç¨ï¼\n   \n   * if(oldVnode === vnode)åæ²¡æåå\n   * if(oldVnode.text !== null && vnode.text !== null && oldVnode.text !== vnode.text)ï¼ææ¬èç¹çæ¯è¾ï¼éè¦ä¿®æ¹ï¼åä¼è°ç¨Node.textContent = vnode.textã\n   * if(oldVnode.children && vnode.children), ä¸¤ä¸ªèç¹é½æå­èç¹ï¼èä¸å®ä»¬ä¸ä¸æ ·ï¼è¿æ ·æä»¬ä¼è°ç¨updateChildrenå½æ°æ¯è¾å­èç¹ï¼è¿æ¯diffçæ ¸å¿ã\n   * å¦æ vnode.children æå¼ï¼ oldVnode.children æ å¼\n     * æ¸ç©º DOM åç´ \n     * è°ç¨ addVnodes() ï¼æ¹éæ·»å å­èç¹\n   * å¦æ oldVnode.children æå¼ï¼ vnode.children æ å¼\n     * è°ç¨ removeVnodes() ï¼æ¹éç§»é¤å­èç¹\n\n\n# updateChildren\n\n * åè½ï¼\n   \n   * diff ç®æ³çæ ¸å¿ï¼å¯¹æ¯æ°æ§èç¹ç childrenï¼æ´æ° DOM\n\n * æ§è¡è¿ç¨ï¼\n   \n   * æ­¤å¤å¯åèï¼https://juejin.im/post/6844903607913938951\n   * å¨å¯¹å¼å§åç»æèç¹æ¯è¾çæ¶åï¼æ»å±æåç§æåµ\n     * oldStartVnode / newStartVnode (æ§å¼å§èç¹ / æ°å¼å§èç¹)\n     * oldEndVnode / newEndVnode (æ§ç»æèç¹ / æ°ç»æèç¹)\n     * oldStartVnode / oldEndVnode (æ§å¼å§èç¹ / æ°ç»æèç¹)\n     * oldEndVnode / newStartVnode (æ§ç»æèç¹ / æ°å¼å§èç¹)\n\n\n\n * å¼å§èç¹åç»æèç¹æ¯è¾ï¼è¿ä¸¤ç§æåµç±»ä¼¼\n   \n   * oldStartVnode / newStartVnode (æ§å¼å§èç¹ / æ°å¼å§èç¹)\n   * oldEndVnode / newEndVnode (æ§ç»æèç¹ / æ°ç»æèç¹)\n\n * å¦æ oldStartVnode å newStartVnode æ¯ sameVnode\n   \n   * è°ç¨ patchVnode() å¯¹æ¯åæ´æ°èç¹\n   * ææ§å¼å§åæ°å¼å§ç´¢å¼å¾åç§»å¨ oldStartIdx++ / oldEndIdx++\n\n----------------------------------------\n\n\n\n * oldStartVnode / newEndVnode (æ§å¼å§èç¹ / æ°ç»æèç¹) ç¸å\n   * è°ç¨ patchVnode() å¯¹æ¯åæ´æ°èç¹\n   * æ oldStartVnode å¯¹åºç DOM åç´ ï¼ç§»å¨å°å³è¾¹\n     * æ´æ°ç´¢å¼\n\n----------------------------------------\n\n\n\n * oldEndVnode / newStartVnode (æ§ç»æèç¹ / æ°å¼å§èç¹) ç¸å\n   * è°ç¨ patchVnode() å¯¹æ¯åæ´æ°èç¹\n   * æ oldEndVnode å¯¹åºç DOM åç´ ï¼ç§»å¨å°å·¦è¾¹\n     * æ´æ°ç´¢å¼\n\n----------------------------------------\n\n * å¦æä¸æ¯ä»¥ä¸åç§æåµ\n   * éåæ°èç¹ï¼ä½¿ç¨ newStartNode ç key å¨èèç¹æ°ç»ä¸­æ¾ç¸åèç¹\n   * å¦ææ²¡ææ¾å°ï¼è¯´æ newStartNode æ¯æ°èç¹\n     * åå»ºæ°èç¹å¯¹åºç DOM åç´ ï¼æå¥å° DOM æ ä¸­\n   * å¦ææ¾å°äº\n     * å¤æ­æ°èç¹åæ¾å°çèèç¹æ¯å¦ sameVnode\n     * å¦æä¸ç¸åï¼è¯´æèç¹è¢«ä¿®æ¹äºï¼éæ°åå»ºå¯¹åºç DOM åç´ ï¼æå¥å° DOM æ ä¸­\n     * å¦æç¸åï¼æ elmToMove å¯¹åºç DOM åç´ ï¼ç§»å¨å°å·¦è¾¹\n\n----------------------------------------\n\n * å½èèç¹çææå­èç¹åéåå® (oldStartIdx > oldEndIdx)ï¼å¾ªç¯ç»æ\n   * è¯´ææ°èç¹æå©ä½ï¼æå©ä½èç¹æ¹éæå¥å°å³è¾¹\n\n\n\n * æ°èç¹çææå­èç¹åéåå® (newStartIdx > newEndIdx)ï¼å¾ªç¯ç»æ\n   * è¯´æèèç¹æå©ä½ï¼æå©ä½èç¹æ¹éå é¤\n\n\n\n\n# å³äº V-for å¸¦ key\n\nåèï¼https://juejin.im/post/6844903577215827982\n\nå®æ¹ï¼https://cn.vuejs.org/v2/api/#key\n\né¤äºä¸è¿°æè¯´ï¼æ´å¿«é : key çå¯ä¸æ§å¯ä»¥è¢« Map æ°æ®ç»æååå©ç¨,ç¸æ¯äºéåæ¥æ¾çæ¶é´å¤æåº¦ O(n),Map çæ¶é´å¤æåº¦ä»ä»ä¸º O(1),æºç å¦ä¸:\n\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\n  let i, key;\n  const map = {};\n  for (i = beginIdx; i <= endIdx; ++i) {\n    key = children[i].key;\n    if (isDef(key)) map[key] = i;\n  }\n  return map;\n}\n\n\n\n# åºæ¯ï¼list ä¸æ¡æ°æ®å é¤ä¸­é´çé£æ¡\n\n# indexä½ä¸ºkeyï¼éè¯¯çå é¤äºç¬¬ä¸æ¡\n\n> è³äºä¸ºä»ä¹ï¼æ ¹æ® diff ç®æ³ï¼é¦åçææ§èç¹åæ°èç¹çèæ dom , æ ¹æ® key å¤æ­æ¯å¦ä¸ºç¸åèç¹ï¼åå»æ´æ°åé¨åå®¹ï¼æ­¤æ¶ä»¥ index ä½ä¸º keyï¼ç®æ³ä¼è®¤ä¸ºåä¸¤æ¡keyæ¯ç¸åçï¼å³ç¸åçèç¹ï¼å°±ä¸å»æ´æ°åé¨äºï¼é æçç»æå°±æ¯å®éç¬¬äºæ¡æ²¡å é¤ï¼èæ¯å é¤äºç¬¬ä¸æ¡\n\nä¹åçæ°æ®                         ä¹åçæ°æ®\n\nkey: 0  index: 0 name: test1     key: 0  index: 0 name: test1\nkey: 1  index: 1 name: test2     key: 1  index: 1 name: test2\nkey: 2  index: 2 name: test3     \n\n\n# idä½ä¸ºkey\n\nä¹åçæ°æ®                              å é¤ä¹åçæ°æ®\n\nkey: 1  id: 1 index: 0 name: test1     key: 1  id: 1 index: 0  name: test1\nkey: 2  id: 2 index: 1 name: test2     key: 3  id: 3 index: 3  name: test3\nkey: 3  id: 3 index: 2 name: test3     \n\n\nåæ¯å¦ä¸­é´æå¥çæ¶åï¼å¦æä½¿ç¨indexä½ä¸ºkeyä¼é æå¤ç¨\n\n\n# vue å react å¨èædomçdiffä¸ï¼åäºåªäºæ¹è¿ä½¿å¾éåº¦å¾å¿«\n\nhttps://juejin.cn/post/6878892606307172365\n\n 1. èæDOMå¨æ¯è¾æ¶åªæ¯è¾åä¸å±çº§èç¹ï¼å¤æåº¦é½ä¸º O(n)ï¼éä½äºç®æ³å¤æåº¦ï¼\n 2. é½ä½¿ç¨keyæ¯è¾æ¯å¦æ¯ç¸åèç¹ï¼é½æ¯ä¸ºäºå°½å¯è½çå¤ç¨èç¹\n 3. é½æ¯æä½èæDOMï¼æå°åæä½çå®DOMï¼æé«æ§è½ï¼å¶å®èæDOMçä¼å¿ å¹¶ä¸æ¯å¨äºå®æä½DOMå¿«ï¼\n\n\n# React å Vue ç diff æ¶é´å¤æåº¦ä» O(n^3) ä¼åå° O(n) ï¼é£ä¹ O(n^3) å O(n) æ¯å¦ä½è®¡ç®åºæ¥çï¼\n\nåæ¥ç O(n^3) ç diff æµç¨æ¯ï¼\n\nèæ çæ¯ä¸ä¸ªèç¹é½å»éåæ°æ çèç¹ï¼ç´å°æ¾å°æ°æ å¯¹åºçèç¹ãé£ä¹è¿ä¸ªæµç¨å°±æ¯ O(n^2)ï¼åç´§æ¥çæ¾å°ä¸åä¹åï¼åè®¡ç®æç­ä¿®æ¹è·ç¦»ç¶åä¿®æ¹èç¹ï¼è¿éæ¯ O(n^3)\n\næä»¥åç«¯æ¡æ¶ç diff çº¦å®äºä¸¤ç§å¤çååï¼åªååå±çå¯¹æ¯ï¼type åäºå°±ä¸åå¯¹æ¯å­èç¹ã å ä¸º dom èç¹åè·¨å±çº§ç§»å¨çæåµè¿æ¯æ¯è¾å°çï¼ä¸è¬æåµä¸é½æ¯åä¸å±çº§ç dom çå¢å æ¹ã è¿æ ·åªè¦éåä¸éï¼å¯¹æ¯ä¸ä¸ type å°±è¡äºï¼æ¯ O(n) çå¤æåº¦ï¼èä¸ type åäºå°±ä¸åå¯¹æ¯å­èç¹ï¼è½çä¸ä¸å¤§çèç¹çéåã",normalizedContent:"# virtual dom ä¸ diff ç®æ³\n\n * ä»ä¹æ¯èædom\n * ä½¿ç¨ snabbdom\n * æºç è§£è¯»\n   * hå½æ°\n   * vnodeå¯¹è±¡\n   * initå½æ°\n * diff ç®æ³\n * v-for å¸¦ key\n * vue å react å¨èædomçdiffä¸ï¼åäºåªäºæ¹è¿ä½¿å¾éåº¦å¾å¿«\n * react å vue ç diff æ¶é´å¤æåº¦ä» o(n^3) ä¼åå° o(n) ï¼é£ä¹ o(n^3) å o(n) æ¯å¦ä½è®¡ç®åºæ¥çï¼\n\n\n# ä»ä¹æ¯èædom\n\n * èædomæ¯ç±æ®éç js å¯¹è±¡æ¥æè¿° dom å¯¹è±¡ï¼å ä¸ºä¸æ¯çå®ç dom å¯¹è±¡ï¼æä»¥å«èæ dom\n\n * åå»ºèæ dom çå¼éæ¯çå® dom å°å¾å¤\n\n * èæ dom çå¥½å¤æ¯å½ç¶ææ¹åæ¶ä¸éè¦ç«å³æ´æ° domï¼åªéè¦ä¸ä¸ªèææ æ¥æè¿° domï¼èædomåé¨å°å¼æ¸æ¥å¦ä½ææï¼diffï¼çæ´æ° dom\n\n * å¦ææ¯æ¬¡æ´æ¹åºç¨ç¨åºç¶æé½éæ°åå»ºæ´ä¸ª domï¼åç¨åºéå¸¸ç¼æ¢ï¼èèædomå¯ä»¥è·è¸ªä¸ä¸æ¬¡çç¶æ\n\n * é¤äºæ¸²æ dom ä»¥å¤,è¿å¯ä»¥å®ç° ssr(nuxt.js/next.js),åçåºç¨(weex/react native),å°ç¨åº(mpvue/uni-app)\n\n * å³äºæå¡ç«¯æ¸²æï¼ssrï¼å¯æ¥çï¼\n   \n   * https://www.jianshu.com/p/b8cfa496b7ec\n   * https://blog.csdn.net/github_34708151/article/details/98344114\n\n\n# virtual dom åº\n\n * snabbdom\n   * vue 2.x åé¨ä½¿ç¨ç virtual dom å°±æ¯æ¹é ç snabbom\n   * å¤§çº¦ 200 slocï¼single line of codeï¼\n   * éè¿æ¨¡åå¯æ©å±\n   * æºç ä½¿ç¨ ts å¼å\n   * æå¿«ç virtual dom ä¹ä¸\n\n\n# ä½¿ç¨ snabbdom\n\n * å¯ä»¥ä½¿ç¨parcelæå»ºå·¥å·ï¼æ¯è¾è½»ä¾¿\n\nyarn add snabbdom\n\n\n * snabbdom å®ç½ demo ä¸­å¯¼å¥ä½¿ç¨çæ¯ common.js æ¨¡ååè¯­æ³ï¼æä»¬ä½¿ç¨ es modules è¯­æ³ import\n\nrequire snabbdom from 'snabbdom' // å¯¼å¥ææå½æ°\nimport { init, h, thunk } from 'snabbdom'\n\n// ä¸ä½¿ç¨ import snabbdom from 'snabbdom' æ¯å ä¸º\n// snabbdom.ts æ«å°¾å¯¼åºä½¿ç¨çè¯­æ³æ¯ export å¯¼åºï¼èæ²¡æä½¿ç¨ export default\n\n\n * init æ¯ä¸ä¸ªé«é¶å½æ°ï¼è¿å patch()\n * h()è¿åèæç»ç¹ vnodeï¼è¿ä¸ªå½æ°å¨vue.jsä¸­è§è¿\n\nnew vue({\n    router,\n    store,\n    render: h => h(app)\n}).$mount('#app')\n\n\n * thunk()æ¯ä¸ç§ä¼åç­ç¥ï¼å¯ä»¥å¨å¤çä¸å¯åæ°æ®æ¶ä½¿ç¨\n\n\n# å¦ä½ä½¿ç¨\n\n// divä¸­æ¾ç½®å­åç´  h1,p\nimport { h, init } from 'snabbdom'\n\n// patchå½æ°ï¼ä½ç¨å¯¹æ¯ä¸¤ä¸ªvnodeçå·®å¼æ´æ°å°çå®dom\nlet patch = init([])\n\n// ç¬¬ä¸ä¸ªåæ°ï¼æ ç­¾+éæ©å¨\n// ç¬¬äºä¸ªåæ°ï¼å¦ææ¯å­ç¬¦ä¸²çè¯å°±æ¯æ ç­¾ä¸­çåå®¹\nlet vnode = h('div#container', [\n  h('h1', 'hello snabbdom'),\n  h('p', 'è¿æ¯ä¸ä¸ªpæ ç­¾')\n])\n\nlet app = document.queryselector('#app')\n\nlet oldvnode = patch(app, vnode)\n\n// ä¸¤ç§ä¹åç»§ç»­æ´æ°\nsettimeout(() => {\n  vnode = h('div#container', [\n    h('h1', 'hello world'),\n    h('p', 'hello p')\n  ])\n  patch(oldvnode, vnode)\n\n  // æ¸ç©ºé¡µé¢åç´  -- éè¯¯\n  // patch(oldvnode, null)\n  // patch(oldvnode, h('!'))\n}, 2000);\n\n\n\n# snabbdomçæ¨¡å\n\nç±»ä¼¼äºæä»¶æºå¶\n\nimport { init, h } from 'snabbdom'\n// 1. å¯¼å¥æ¨¡å\nimport style from 'snabbdom/modules/style'\nimport eventlisteners from 'snabbdom/modules/eventlisteners'\n// 2. æ³¨åæ¨¡å\nlet patch = init([\n  style,\n  eventlisteners\n])\n// 3. ä½¿ç¨ h() å½æ°çç¬¬äºä¸ªåæ°ä¼ å¥æ¨¡åéè¦çæ°æ®ï¼å¯¹è±¡ï¼\nlet vnode = h('div', {\n  style: {\n    backgroundcolor: 'red'\n  },\n  on: {\n    click: eventhandler\n  }\n}, [\n  h('h1', 'hello snabbdom'),\n  h('p', 'è¿æ¯pæ ç­¾')\n])\n\nfunction eventhandler () {\n  console.log('ç¹å»æäº')\n}\n\nlet app = document.queryselector('#app')\n\nlet oldvnode = patch(app, vnode)\n\n\n\n# æºç è§£è¯»\n\næºç å°åï¼https://github.com/snabbdom/snabbdom\n\n\n# hå½æ°ï¼\n\n * h å½æ°ä¸»è¦æ ¹æ®ä¼ è¿æ¥çåæ°ï¼è¿åä¸ä¸ª vnode å¯¹è±¡\n\n// hå½æ°çéè½½ï¼tsæ¯æ\nexport function h (sel: string): vnode\nexport function h (sel: string, data: vnodedata | null): vnode\nexport function h (sel: string, children: vnodechildren): vnode\nexport function h (sel: string, data: vnodedata | null, children: vnodechildren): vnode\nexport function h (sel: any, b?: any, c?: any): vnode {\n  var data: vnodedata = {}, children: any, text: any, i: number\n  // å¤çåæ°ï¼å®ç°éè½½çæºå¶\n  if (c !== undefined) {\n    // å¤çä¸ä¸ªåæ°çæåµ\n    // ...\n  // å¤çä¸¤ä¸ªåæ°çæåµ\n  } else if (b !== undefined && b !== null) {\n\t// ...\n  }\n  if (children !== undefined) {\n    // å¤ç children ä¸­çåå§å¼ï¼string/numberï¼\n    for (i = 0; i < children.length; ++i) {\n      // å¦æ child æ¯ string/numberï¼åå»ºææ¬èç¹\n    }\n  }\n  // å¦ææ¯ svg ï¼åå»ºå½åç©ºé´\n  if (\n    sel[0] === 's' && sel[1] === 'v' && sel[2] === 'g' &&\n    (sel.length === 3 || sel[3] === '.' || sel[3] === '#')\n  ) {\n    addns(data, children, sel)\n  }\n  // è¿åvnode\n  return vnode(sel, data, children, text, undefined)\n};\n\n\n\n# vnodeå¯¹è±¡\n\n * ä¸ä¸ª vnode å°±æ¯ä¸ä¸ªèæèç¹ç¨æ¥æè¿°ä¸ä¸ª dom åç´ ï¼å¦æè¿ä¸ª vnode æ children å°±æ¯virtual dom\n\n * æºç ä½ç½®ï¼src/vnode.ts\n\nexport type key = string | number\n\n// æ¥å£\nexport interface vnode {\n  // éæ©å¨  \n  sel: string | undefined\n  // èç¹æ°æ®ï¼å±æ§/æ ·å¼/äºä»¶ç­\n  data: vnodedata | undefined\n  // å­èç¹\n  children: array<vnode | string> | undefined\n  // è®°å½ vnode å¯¹åºççå® dom\n  elm: node | undefined\n  // èç¹ä¸­çåå®¹ï¼å children åªè½äºæ¥\n  text: string | undefined\n  key: key | undefined\n}\n\n// å®ç°æ¥å£\nexport function vnode (sel: string | undefined,\n  data: any | undefined,\n  children: array<vnode | string> | undefined,\n  text: string | undefined,\n  elm: element | text | undefined): vnode {\n  const key = data === undefined ? undefined : data.key\n  // ä½¿ç¨jså¯¹è±¡æè¿°dom\n  return { sel, data, children, text, elm, key }\n}\n\n\n\n# patchè¿ç¨\n\n * patch(oldvnode, newvnode)\n * æè¡¥ä¸ï¼ææ°èç¹ä¸­ååçåå®¹æ¸²æå°çå®domï¼æåè¿åæ°èç¹ä½ä¸ºä¸ä¸æ¬¡å¤ççæ§èç¹\n * å¯¹æ¯æ°æ§ vnode æ¯å¦ç¸åèç¹ï¼èç¹ç key å sel ç¸åï¼\n * å¦æä¸æ¯ç¸åèç¹ï¼å é¤ä¹åçåå®¹ï¼éæ°æ¸²æ\n * å¦ææ¯ç¸åèç¹ï¼åå¤æ­æ°ç vnode æ¯å¦æ textï¼å¦ææå¹¶ä¸åæ§èç¹ text ä¸åï¼ç´æ¥æ´æ°\n * å¦ææ°ç vnode æ childrenï¼å¤æ­å­èç¹æ¯å¦æååï¼å¤æ­å­èç¹çè¿ç¨ä½¿ç¨çå°±æ¯ diff ç®æ³\n * diff è¿ç¨åªè¿è¡åå±çº§æ¯è¾\n\n\n# initå½æ°\n\n * åè½: init(modules, domapi)ï¼è¿å patch() å½æ°ï¼é«é¶å½æ°ï¼\n\n * ä¸ºä»ä¹è¦ä½¿ç¨é«é¶å½æ°ï¼\n   \n   * å ä¸º patch() å½æ°å¨å¤é¨ä¼è°ç¨å¤æ¬¡ï¼æ¯æ¬¡è°ç¨ä¾èµä¸äºåæ°ï¼æ¯å¦ï¼modules/domapi/cbs\n   \n   * éè¿é«é¶å½æ°è®© init() åé¨å½¢æé­åï¼è¿åç patch() å¯ä»¥è®¿é®å° modules/domapi/cbsï¼èä¸éè¦éæ°åå»º\n\n * init() å¨è¿å patch() ä¹åï¼é¦åæ¶éäºæææ¨¡åä¸­çé©å­å½æ°å­å¨å° cbs å¯¹è±¡ä¸­\n\n * æºç ä½ç½®ï¼src/snabbdom.ts\n\n// é©å­å½æ°\nconst hooks: (keyof module)[] = ['create', 'update', 'remove', 'destroy', 'pre', 'post'];\n// ç¬¬ä¸ä¸ªåæ°æ¯æ¨¡åï¼åèä¸é¢æ¨¡åä½¿ç¨çé¨å\nexport function init(modules: array<partial<module>>, domapi?: domapi) { \n    let i: number, j: number, cbs = ({} as modulehooks); \n    // åå§å api ï¼htmldomapiéæ¯ä¸äºåç dom apiï¼ç¨äºåå»ºçå® dom\n    // å¦ææ³æèæ dom è½¬åä¸ºå¶ä»ç±»åæ¶ï¼å¯ä»¥ä¼ å¥ç¬¬äºä¸ªåæ°\n    const api: domapi = domapi !== undefined ? domapi : htmldomapi; \n    // æä¼ å¥çæææ¨¡åçé©å­æ¹æ³ï¼ç»ä¸å­å¨å° cbs å¯¹è±¡ä¸­ \n    // æç»æå»ºç cbs å¯¹è±¡çå½¢å¼ cbs = [ create: [fn1, fn2], update: [], ... ] \n    for (i = 0; i < hooks.length; ++i) { \n        // cbs['create'] = [] \n        cbs[hooks[i]] = []; \n        for (j = 0; j < modules.length; ++j) { \n         \t// const hook = modules[0]['create'] \n            // æ¯ä¸ä¸ªæ¨¡åé½ä¼å¯¼åºé©å­å½æ°çæ¹æ³ï¼ä¾å¦ attributes.ts ä¸­å¯¼åº\n            // export const attributesmodule: module = \n            // { create: updateattrs, update: updateattrs }\n            const hook = modules[j][hooks[i]]; \n            if (hook !== undefined) { \n                (cbs[hooks[i]] as array<any>).push(hook);\n            } \n        } \n    }\n    â¦\n    return function patch(oldvnode: vnode | element, vnode: vnode): vnode {}\n}\n\n\n\n# patchå½æ°\n\n * åè½ï¼\n   \n   * ä¼ å¥æ°æ§ vnodeï¼å¯¹æ¯å·®å¼ï¼æå·®å¼æ¸²æå° dom\n   * è¿åæ°ç vnodeï¼ä½ä¸ºä¸ä¸æ¬¡ patch() ç oldvnode\n\n * æ§è¡è¿ç¨ï¼\n   \n   * vnode ä¸å­å¨ï¼ä½æ¯ oldvnode å­å¨ï¼è¯´ææ¯éè¦éæ¯æ§èç¹\n   * vnode å­å¨ï¼ä½æ¯ oldvnode ä¸å­å¨ï¼è¯´ææ¯éè¦åå»ºæ°èç¹\n   * å¦æ oldvnode å vnode é½å­å¨ä¸æ¯ç¸åèç¹æ¶\n     * è°ç¨ patchvnode()ï¼æ¾èç¹çå·®å¼å¹¶æ´æ° dom\n   * å¦æ oldvnode å vnode é½å­å¨ä¸æ¯ä¸åèç¹æ¶\n     * æ ¹æ® vnode åå»ºä¸ä¸ªçå®ç dom èç¹ï¼å é¤èèç¹ï¼å¢å æ°èç¹\n\n// vnode ä¸å­å¨ï¼ä½æ¯ oldvnode å­å¨ï¼è¯´ææ¯éè¦éæ¯æ§èç¹\nif (isundef(vnode)) {\n  if (isdef(oldvnode)) invokedestroyhook(oldvnode)\n  return\n}\n\n// vnode å­å¨ï¼ä½æ¯ oldvnode ä¸å­å¨ï¼è¯´ææ¯éè¦åå»ºæ°èç¹\nif (isundef(oldvnode)) {\n  isinitialpatch = true\n  createelm(vnode, insertedvnodequeue)\n}\n\n// å¦ææ°æ§èç¹æ¯ç¸åèç¹\nif (samevnode(oldvnode, vnode)) { \n  // æ¾èç¹çå·®å¼å¹¶æ´æ° dom \n  patchvnode(oldvnode, vnode, insertedvnodequeue); \n} else { \n  // å¦ææ°æ§èç¹ä¸åï¼vnode åå»ºå¯¹åºç dom \n  // è·åå½åç dom åç´  \n  elm = oldvnode.elm!; \n  parent = api.parentnode(elm); \n  // createelm æ¯ä¸º vnode åå»ºçå®ç dom \n  createelm(vnode, insertedvnodequeue); \n  if (parent !== null) { \n    // å¦æç¶èç¹ä¸ä¸ºç©ºï¼æ vnode å¯¹åºç dom æå¥å°ææ¡£ä¸­ \n    api.insertbefore(parent, vnode.elm!, api.nextsibling(elm)); \n    // ç§»é¤èèç¹ \n    removevnodes(parent, [oldvnode], 0, 0);\n  } \n}\nreturn vnode\n\n// å½å¯ä»¥æ¯è¾æ¶ï¼è°ç¨ patchvnode æ¾å·®å¼å¹¶æ´æ° dom\n// å½ä¸å¼å¾æ¯è¾æ¶ï¼æ°èç¹ç´æ¥æèèç¹æ´ä¸ªæ¿æ¢äº\n// æåä¼è¿å vnodeï¼å¯ä»¥ç»§ç»­è¿è¡ä¸ä¸ä¸ª patch è¿ç¨\n\n// samevnode å¤æ­äº keyã tagã iscommentï¼æ¯å¦ä¸ºæ³¨éèç¹ï¼\nfunction samevnode(a, b) {\n  return (\n    a.key === b.key &&\n    a.asyncfactory === b.asyncfactory &&\n    ((a.tag === b.tag &&\n      a.iscomment === b.iscomment &&\n      isdef(a.data) === isdef(b.data) &&\n      sameinputtype(a, b)) ||\n      (istrue(a.isasyncplaceholder) && isundef(b.asyncfactory.error)))\n  )\n}\n\n\n\n# patchvnodeå½æ°\n\n * åè½ï¼\n   \n   * patchvnode(oldvnode, vnode, insertedvnodequeue)\n   * å¯¹æ¯ oldvnode å vnode çå·®å¼ï¼æå·®å¼æ¸²æå° dom\n\n * æ§è¡è¿ç¨ï¼\n   \n   * if(oldvnode === vnode)åæ²¡æåå\n   * if(oldvnode.text !== null && vnode.text !== null && oldvnode.text !== vnode.text)ï¼ææ¬èç¹çæ¯è¾ï¼éè¦ä¿®æ¹ï¼åä¼è°ç¨node.textcontent = vnode.textã\n   * if(oldvnode.children && vnode.children), ä¸¤ä¸ªèç¹é½æå­èç¹ï¼èä¸å®ä»¬ä¸ä¸æ ·ï¼è¿æ ·æä»¬ä¼è°ç¨updatechildrenå½æ°æ¯è¾å­èç¹ï¼è¿æ¯diffçæ ¸å¿ã\n   * å¦æ vnode.children æå¼ï¼ oldvnode.children æ å¼\n     * æ¸ç©º dom åç´ \n     * è°ç¨ addvnodes() ï¼æ¹éæ·»å å­èç¹\n   * å¦æ oldvnode.children æå¼ï¼ vnode.children æ å¼\n     * è°ç¨ removevnodes() ï¼æ¹éç§»é¤å­èç¹\n\n\n# updatechildren\n\n * åè½ï¼\n   \n   * diff ç®æ³çæ ¸å¿ï¼å¯¹æ¯æ°æ§èç¹ç childrenï¼æ´æ° dom\n\n * æ§è¡è¿ç¨ï¼\n   \n   * æ­¤å¤å¯åèï¼https://juejin.im/post/6844903607913938951\n   * å¨å¯¹å¼å§åç»æèç¹æ¯è¾çæ¶åï¼æ»å±æåç§æåµ\n     * oldstartvnode / newstartvnode (æ§å¼å§èç¹ / æ°å¼å§èç¹)\n     * oldendvnode / newendvnode (æ§ç»æèç¹ / æ°ç»æèç¹)\n     * oldstartvnode / oldendvnode (æ§å¼å§èç¹ / æ°ç»æèç¹)\n     * oldendvnode / newstartvnode (æ§ç»æèç¹ / æ°å¼å§èç¹)\n\n\n\n * å¼å§èç¹åç»æèç¹æ¯è¾ï¼è¿ä¸¤ç§æåµç±»ä¼¼\n   \n   * oldstartvnode / newstartvnode (æ§å¼å§èç¹ / æ°å¼å§èç¹)\n   * oldendvnode / newendvnode (æ§ç»æèç¹ / æ°ç»æèç¹)\n\n * å¦æ oldstartvnode å newstartvnode æ¯ samevnode\n   \n   * è°ç¨ patchvnode() å¯¹æ¯åæ´æ°èç¹\n   * ææ§å¼å§åæ°å¼å§ç´¢å¼å¾åç§»å¨ oldstartidx++ / oldendidx++\n\n----------------------------------------\n\n\n\n * oldstartvnode / newendvnode (æ§å¼å§èç¹ / æ°ç»æèç¹) ç¸å\n   * è°ç¨ patchvnode() å¯¹æ¯åæ´æ°èç¹\n   * æ oldstartvnode å¯¹åºç dom åç´ ï¼ç§»å¨å°å³è¾¹\n     * æ´æ°ç´¢å¼\n\n----------------------------------------\n\n\n\n * oldendvnode / newstartvnode (æ§ç»æèç¹ / æ°å¼å§èç¹) ç¸å\n   * è°ç¨ patchvnode() å¯¹æ¯åæ´æ°èç¹\n   * æ oldendvnode å¯¹åºç dom åç´ ï¼ç§»å¨å°å·¦è¾¹\n     * æ´æ°ç´¢å¼\n\n----------------------------------------\n\n * å¦æä¸æ¯ä»¥ä¸åç§æåµ\n   * éåæ°èç¹ï¼ä½¿ç¨ newstartnode ç key å¨èèç¹æ°ç»ä¸­æ¾ç¸åèç¹\n   * å¦ææ²¡ææ¾å°ï¼è¯´æ newstartnode æ¯æ°èç¹\n     * åå»ºæ°èç¹å¯¹åºç dom åç´ ï¼æå¥å° dom æ ä¸­\n   * å¦ææ¾å°äº\n     * å¤æ­æ°èç¹åæ¾å°çèèç¹æ¯å¦ samevnode\n     * å¦æä¸ç¸åï¼è¯´æèç¹è¢«ä¿®æ¹äºï¼éæ°åå»ºå¯¹åºç dom åç´ ï¼æå¥å° dom æ ä¸­\n     * å¦æç¸åï¼æ elmtomove å¯¹åºç dom åç´ ï¼ç§»å¨å°å·¦è¾¹\n\n----------------------------------------\n\n * å½èèç¹çææå­èç¹åéåå® (oldstartidx > oldendidx)ï¼å¾ªç¯ç»æ\n   * è¯´ææ°èç¹æå©ä½ï¼æå©ä½èç¹æ¹éæå¥å°å³è¾¹\n\n\n\n * æ°èç¹çææå­èç¹åéåå® (newstartidx > newendidx)ï¼å¾ªç¯ç»æ\n   * è¯´æèèç¹æå©ä½ï¼æå©ä½èç¹æ¹éå é¤\n\n\n\n\n# å³äº v-for å¸¦ key\n\nåèï¼https://juejin.im/post/6844903577215827982\n\nå®æ¹ï¼https://cn.vuejs.org/v2/api/#key\n\né¤äºä¸è¿°æè¯´ï¼æ´å¿«é : key çå¯ä¸æ§å¯ä»¥è¢« map æ°æ®ç»æååå©ç¨,ç¸æ¯äºéåæ¥æ¾çæ¶é´å¤æåº¦ o(n),map çæ¶é´å¤æåº¦ä»ä»ä¸º o(1),æºç å¦ä¸:\n\nfunction createkeytooldidx(children, beginidx, endidx) {\n  let i, key;\n  const map = {};\n  for (i = beginidx; i <= endidx; ++i) {\n    key = children[i].key;\n    if (isdef(key)) map[key] = i;\n  }\n  return map;\n}\n\n\n\n# åºæ¯ï¼list ä¸æ¡æ°æ®å é¤ä¸­é´çé£æ¡\n\n# indexä½ä¸ºkeyï¼éè¯¯çå é¤äºç¬¬ä¸æ¡\n\n> è³äºä¸ºä»ä¹ï¼æ ¹æ® diff ç®æ³ï¼é¦åçææ§èç¹åæ°èç¹çèæ dom , æ ¹æ® key å¤æ­æ¯å¦ä¸ºç¸åèç¹ï¼åå»æ´æ°åé¨åå®¹ï¼æ­¤æ¶ä»¥ index ä½ä¸º keyï¼ç®æ³ä¼è®¤ä¸ºåä¸¤æ¡keyæ¯ç¸åçï¼å³ç¸åçèç¹ï¼å°±ä¸å»æ´æ°åé¨äºï¼é æçç»æå°±æ¯å®éç¬¬äºæ¡æ²¡å é¤ï¼èæ¯å é¤äºç¬¬ä¸æ¡\n\nä¹åçæ°æ®                         ä¹åçæ°æ®\n\nkey: 0  index: 0 name: test1     key: 0  index: 0 name: test1\nkey: 1  index: 1 name: test2     key: 1  index: 1 name: test2\nkey: 2  index: 2 name: test3     \n\n\n# idä½ä¸ºkey\n\nä¹åçæ°æ®                              å é¤ä¹åçæ°æ®\n\nkey: 1  id: 1 index: 0 name: test1     key: 1  id: 1 index: 0  name: test1\nkey: 2  id: 2 index: 1 name: test2     key: 3  id: 3 index: 3  name: test3\nkey: 3  id: 3 index: 2 name: test3     \n\n\nåæ¯å¦ä¸­é´æå¥çæ¶åï¼å¦æä½¿ç¨indexä½ä¸ºkeyä¼é æå¤ç¨\n\n\n# vue å react å¨èædomçdiffä¸ï¼åäºåªäºæ¹è¿ä½¿å¾éåº¦å¾å¿«\n\nhttps://juejin.cn/post/6878892606307172365\n\n 1. èædomå¨æ¯è¾æ¶åªæ¯è¾åä¸å±çº§èç¹ï¼å¤æåº¦é½ä¸º o(n)ï¼éä½äºç®æ³å¤æåº¦ï¼\n 2. é½ä½¿ç¨keyæ¯è¾æ¯å¦æ¯ç¸åèç¹ï¼é½æ¯ä¸ºäºå°½å¯è½çå¤ç¨èç¹\n 3. é½æ¯æä½èædomï¼æå°åæä½çå®domï¼æé«æ§è½ï¼å¶å®èædomçä¼å¿ å¹¶ä¸æ¯å¨äºå®æä½domå¿«ï¼\n\n\n# react å vue ç diff æ¶é´å¤æåº¦ä» o(n^3) ä¼åå° o(n) ï¼é£ä¹ o(n^3) å o(n) æ¯å¦ä½è®¡ç®åºæ¥çï¼\n\nåæ¥ç o(n^3) ç diff æµç¨æ¯ï¼\n\nèæ çæ¯ä¸ä¸ªèç¹é½å»éåæ°æ çèç¹ï¼ç´å°æ¾å°æ°æ å¯¹åºçèç¹ãé£ä¹è¿ä¸ªæµç¨å°±æ¯ o(n^2)ï¼åç´§æ¥çæ¾å°ä¸åä¹åï¼åè®¡ç®æç­ä¿®æ¹è·ç¦»ç¶åä¿®æ¹èç¹ï¼è¿éæ¯ o(n^3)\n\næä»¥åç«¯æ¡æ¶ç diff çº¦å®äºä¸¤ç§å¤çååï¼åªååå±çå¯¹æ¯ï¼type åäºå°±ä¸åå¯¹æ¯å­èç¹ã å ä¸º dom èç¹åè·¨å±çº§ç§»å¨çæåµè¿æ¯æ¯è¾å°çï¼ä¸è¬æåµä¸é½æ¯åä¸å±çº§ç dom çå¢å æ¹ã è¿æ ·åªè¦éåä¸éï¼å¯¹æ¯ä¸ä¸ type å°±è¡äºï¼æ¯ o(n) çå¤æåº¦ï¼èä¸ type åäºå°±ä¸åå¯¹æ¯å­èç¹ï¼è½çä¸ä¸å¤§çèç¹çéåã",charsets:{cjk:!0}},{title:"Vueç»ä»¶éä¿¡çæ¹å¼",frontmatter:{},regularPath:"/vue/communication.html",relativePath:"vue/communication.md",key:"v-2df2cd1f",path:"/vue/communication.html",headers:[{level:2,title:"$root",slug:"root",normalizedTitle:"$root",charIndex:17},{level:2,title:"$parent/$children",slug:"parent-children",normalizedTitle:"$parent/$children",charIndex:384},{level:2,title:"$refs",slug:"refs",normalizedTitle:"$refs",charIndex:48},{level:2,title:"provide/inject",slug:"provide-inject",normalizedTitle:"provide/inject",charIndex:1845},{level:2,title:"$attrs / $listeners",slug:"attrs-listeners",normalizedTitle:"$attrs / $listeners",charIndex:77},{level:2,title:"props / $emit",slug:"props-emit",normalizedTitle:"props / $emit",charIndex:100},{level:2,title:"vuex",slug:"vuex",normalizedTitle:"vuex",charIndex:117},{level:2,title:"event bus",slug:"event-bus",normalizedTitle:"event bus",charIndex:3899},{level:2,title:"v-model",slug:"v-model",normalizedTitle:"v-model",charIndex:137}],lastUpdated:"6/25/2025, 8:09:31 PM",lastUpdatedTimestamp:1750853371e3,headersStr:"$root $parent/$children $refs provide/inject $attrs / $listeners props / $emit vuex event bus v-model",content:"# Vueç»ä»¶éä¿¡çæ¹å¼\n\n * $root / $parent / $children\n * $refs\n * provide / inject\n * $attrs / $listeners\n * props / $emit\n * vuex\n * EventBus\n * v-model\n\n\n# $root\n\n<template>\n  <div>\n    \x3c!--\n      å°ååºç¨ä¸­å¯ä»¥å¨ vue æ ¹å®ä¾éå­å¨å±äº«æ°æ®\n      ç»ä»¶ä¸­å¯ä»¥éè¿ $root è®¿é®æ ¹å®ä¾\n    --\x3e\n    $root.titleï¼{{ $root.title }}\n    <br>\n    <button @click=\"$root.title = 'Hello $root'\">æ¹å title</button>\n  </div>\n</template>\n\n\n\n# $parent/$children\n\næå®å·²åå»ºçå®ä¾ä¹ç¶å®ä¾ï¼å¨ä¸¤èä¹é´å»ºç«ç¶å­å³ç³»ãå­å®ä¾å¯ä»¥ç¨ this.$parent è®¿é®ç¶å®ä¾ï¼å­å®ä¾è¢«æ¨å¥ç¶å®ä¾ç $children æ°ç»ä¸­ã\n\nèå¶å°ä½¿ç¨ $parent å $children - å®ä»¬çä¸»è¦ç®çæ¯ä½ä¸ºè®¿é®ç»ä»¶çåºæ¥æ¹æ³ãæ´æ¨èç¨ props å events å®ç°ç¶å­ç»ä»¶éä¿¡\n\n\x3c!-- parent.vue --\x3e\n<template>\n  <div class=\"parent\">\n    parent\n    <child></child>\n  </div>\n</template>\n\n<script>\nexport default {\n  components: {\n    child\n  },\n  data () {\n    return {\n      title: 'è·åç¶ç»ä»¶å®ä¾'\n    }\n  },\n  methods: {\n    handle () {\n      console.log(this.title)\n    }\n  }\n}\n<\/script>\n\n\x3c!-- children.vue --\x3e\n<template>\n  <div class=\"child\">\n    child<br>\n    $parent.titleï¼{{ $parent.title }}<br>\n    <button @click=\"$parent.handle\">è·å $parent.title</button>\n    <button @click=\"$parent.title = 'Hello $parent.title'\">æ¹å $parent.title</button>\n  \n    <grandson></grandson>\n  </div>\n</template>\n\n\n\n# $refs\n\n\x3c!-- parent.vue --\x3e\n<template>\n  <div>\n    <myinput ref=\"mytxt\"></myinput>\n    <button @click=\"focus\">è·åç¦ç¹</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  components: {\n    myinput\n  },\n  methods: {\n    focus () {\n      this.$refs.mytxt.focus() // è°ç¨çæ¯å­ç»ä»¶ç focus æ¹æ³\n      this.$refs.mytxt.value = 'hello'\n    }\n  }\n}\n<\/script>\n\n\x3c!-- myinput.vue --\x3e\n<template>\n  <div>\n    <input v-model=\"value\" type=\"text\" ref=\"txt\">\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      value: 'default'\n    }\n  },\n  methods: {\n    focus () {\n      this.$refs.txt.focus() // this.$refs.txt è·å DOM å¯¹è±¡ï¼focus æ¹æ³è·åç¦ç¹\n    }\n  }\n}\n<\/script>\n\n\n\n# provide/inject\n\n> provide å inject ä¸»è¦å¨å¼åé«é¶æä»¶/ç»ä»¶åºæ¶ä½¿ç¨ãå¹¶ä¸æ¨èç¨äºæ®éåºç¨ç¨åºä»£ç ä¸­ã\n\nè¿å¯¹éé¡¹éè¦ä¸èµ·ä½¿ç¨ï¼ä»¥åè®¸ä¸ä¸ªç¥åç»ä»¶åå¶ææå­å­åä»£æ³¨å¥ä¸ä¸ªä¾èµï¼ä¸è®ºç»ä»¶å±æ¬¡æå¤æ·±ï¼å¹¶å¨å¶ä¸ä¸æ¸¸å³ç³»æç«çæ¶é´éå§ç»çæãå¦æä½ çæ Reactï¼è¿ä¸ React çä¸ä¸æç¹æ§å¾ç¸ä¼¼ã\n\næç¤ºï¼provide å inject ç»å®å¹¶ä¸æ¯å¯ååºçãè¿æ¯å»æä¸ºä¹çãç¶èï¼å¦æä½ ä¼ å¥äºä¸ä¸ªå¯çå¬çå¯¹è±¡ï¼é£ä¹å¶å¯¹è±¡ç property è¿æ¯å¯ååºçãå¹¶ä¸å¨å­ç»ä»¶ä¸­ä¸å¯ä¿®æ¹\n\n// ç¶çº§ç»ä»¶æä¾ 'foo'\nvar Provider = {\n  provide: {\n    foo: 'bar'\n  },\n  // ...\n}\n\n// å­ç»ä»¶æ³¨å¥ 'foo'\nvar Child = {\n  inject: ['foo'],\n  created () {\n    console.log(this.foo) // => \"bar\"\n  }\n  // ...\n}\n\n\n\n# $attrs / $listeners\n\n * $attrs ï¼æç¶ç»ä»¶ä¸­é prop å±æ§ç»å®å°åé¨ç»ä»¶\n * $listenersï¼æç¶ç»ä»¶ä¸­ç DOM å¯¹è±¡çåçäºä»¶ç»å®å°åé¨ç»ä»¶\n * å¯æ¥çæç« Vue - ç»ä»¶éä¿¡ä¹$attrsã$listeners\n * å¦ä½çè§£vueä¸­çnative\n\n\n# props / $emit\n\n> ç¶ç»ä»¶éè¿propsåå­ç»ä»¶ä¼ éæ°æ®ï¼å­ç»ä»¶éè¿$emitè§¦åç¶ç»ä»¶çæ¹æ³ï¼ä»èå®ç°å­å°ç¶çéä¿¡\n\n# ç¶ç»ä»¶ä¼ å­ç»ä»¶ï¼éè¿props\n\n\x3c!--ç¶ç»ä»¶--\x3e\n<template>\n    <div>ææ¯ç¶ç»ä»¶,æçå¼æ¯{{ msg }}\n        <child :logo=\"msg\"></child>\n    </div>\n</template>\n\n<script>\nimport child from './child'\nexport default {\n  data () {\n    return {\n      msg: '123'\n    }\n  },\n  components: {\n    child\n  }\n}\n<\/script>\n\n\n\x3c!--å­ç»ä»¶--\x3e\n<template>\n    <div>\n      <div>ææ¯å­ç»ä»¶,è¿æ¯ç¶ç»ä»¶çå¼ï¼{{ logo }}</div>\n    </div>\n</template>\n\n<script>\nexport default {\n  name: 'child',\n  data () {\n    return {\n    }\n  },\n  props: ['logo']\n}\n<\/script>\n\n\x3c!--\n\tææ¯ç¶ç»ä»¶,æçå¼æ¯123\n\tææ¯å­ç»ä»¶,è¿æ¯ç¶ç»ä»¶çå¼ï¼123\n--\x3e\n\n\n# å­ç»ä»¶ä¼ ç¶ç»ä»¶ï¼$emit\n\n * è¾å¥æ¡çonchangeäºä»¶ï¼è¦å¨ input å¤±å»ç¦ç¹çæ¶åæä¼è§¦åï¼\n * oninput äºä»¶å¨ç¨æ·è¾å¥æ¶è§¦åï¼å®æ¯å¨åç´ å¼åçååæ¶ç«å³è§¦åï¼\n\n\x3c!--ç¶ç»ä»¶--\x3e\n<template>\n    <div>\n        <child @transfer=\"get\"></child>\n        <div>ææ¯ç¶ç»ä»¶ï¼è¿æ¯å­ç»ä»¶ä¼ æ¥çå¼ï¼{{ msg }}</div>\n    </div>\n\n</template>\n\n<script>\nimport child from './child'\nexport default {\n  data () {\n    return {\n      msg: ''\n    }\n  },\n  components: {\n    child\n  },\n  methods: {\n    get (msg) {\n      this.msg = msg\n    }\n  }\n}\n<\/script>\n\n\x3c!--å­ç»ä»¶--\x3e\n<template>\n    <div>\n        <input type=\"text\" v-model=\"msg\" @input=\"set\">\n    </div>\n</template>\n\n<script>\nexport default {\n  name: 'child',\n  data () {\n    return {\n      msg: ''\n    }\n  },\n  methods: {\n    set: function () {\n      this.$emit('transfer', this.msg)\n      console.log(1)\n    }\n  }\n}\n<\/script>\n\n\x3c!--\n    23131 //è¾å¥æ¡\n    ææ¯ç¶ç»ä»¶ï¼è¿æ¯å­ç»ä»¶ä¼ æ¥çå¼ï¼23131\n--\x3e\n\n\n\n# vuex\n\nvuex\n\n\n# event bus\n\nä¸ä¸ªå®æ´çeventBusä¸»è¦åä¸ºä¸ä¸ªé¨åï¼eventBusç»ä»¶ãæ³¨åäºä»¶ï¼$onï¼ãåéäºä»¶ï¼$emitï¼\n\n\n# v-model\n\nç¶ç»ä»¶éè¿v-modelä¼ éå¼ç»å­ç»ä»¶æ¶ï¼ä¼èªå¨ä¼ éä¸ä¸ªvalueçpropå±æ§ï¼å¨å­ç»ä»¶ä¸­éè¿this.$emit(âinput',val)èªå¨ä¿®æ¹v-modelç»å®çå¼\n\nVue.component('child',{\n    props:{\n      value:String, //v-modelä¼èªå¨ä¼ éä¸ä¸ªå­æ®µä¸ºvalueçpropå±æ§\n    },\n    data(){\n      return {\n        mymessage:this.value\n      }\n    },\n    methods:{\n      changeValue(){\n        this.$emit('input',this.mymessage);//éè¿å¦æ­¤è°ç¨å¯ä»¥æ¹åç¶ç»ä»¶ä¸v-modelç»å®çå¼\n      }\n    },\n    template:`\n      <div>\n        <input type=\"text\" v-model=\"mymessage\" @change=\"changeValue\">\n      </div>\n  })\n\n\n  Vue.component('parent',{\n    template:`\n      <div>\n        <p>this is parent compoent!</p>\n        <p>{{message}}</p>\n        <child v-model=\"message\"></child>\n      </div>\n    `,\n    data(){\n      return {\n        message:'hello'\n      }\n    }\n  })\n",normalizedContent:"# vueç»ä»¶éä¿¡çæ¹å¼\n\n * $root / $parent / $children\n * $refs\n * provide / inject\n * $attrs / $listeners\n * props / $emit\n * vuex\n * eventbus\n * v-model\n\n\n# $root\n\n<template>\n  <div>\n    \x3c!--\n      å°ååºç¨ä¸­å¯ä»¥å¨ vue æ ¹å®ä¾éå­å¨å±äº«æ°æ®\n      ç»ä»¶ä¸­å¯ä»¥éè¿ $root è®¿é®æ ¹å®ä¾\n    --\x3e\n    $root.titleï¼{{ $root.title }}\n    <br>\n    <button @click=\"$root.title = 'hello $root'\">æ¹å title</button>\n  </div>\n</template>\n\n\n\n# $parent/$children\n\næå®å·²åå»ºçå®ä¾ä¹ç¶å®ä¾ï¼å¨ä¸¤èä¹é´å»ºç«ç¶å­å³ç³»ãå­å®ä¾å¯ä»¥ç¨ this.$parent è®¿é®ç¶å®ä¾ï¼å­å®ä¾è¢«æ¨å¥ç¶å®ä¾ç $children æ°ç»ä¸­ã\n\nèå¶å°ä½¿ç¨ $parent å $children - å®ä»¬çä¸»è¦ç®çæ¯ä½ä¸ºè®¿é®ç»ä»¶çåºæ¥æ¹æ³ãæ´æ¨èç¨ props å events å®ç°ç¶å­ç»ä»¶éä¿¡\n\n\x3c!-- parent.vue --\x3e\n<template>\n  <div class=\"parent\">\n    parent\n    <child></child>\n  </div>\n</template>\n\n<script>\nexport default {\n  components: {\n    child\n  },\n  data () {\n    return {\n      title: 'è·åç¶ç»ä»¶å®ä¾'\n    }\n  },\n  methods: {\n    handle () {\n      console.log(this.title)\n    }\n  }\n}\n<\/script>\n\n\x3c!-- children.vue --\x3e\n<template>\n  <div class=\"child\">\n    child<br>\n    $parent.titleï¼{{ $parent.title }}<br>\n    <button @click=\"$parent.handle\">è·å $parent.title</button>\n    <button @click=\"$parent.title = 'hello $parent.title'\">æ¹å $parent.title</button>\n  \n    <grandson></grandson>\n  </div>\n</template>\n\n\n\n# $refs\n\n\x3c!-- parent.vue --\x3e\n<template>\n  <div>\n    <myinput ref=\"mytxt\"></myinput>\n    <button @click=\"focus\">è·åç¦ç¹</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  components: {\n    myinput\n  },\n  methods: {\n    focus () {\n      this.$refs.mytxt.focus() // è°ç¨çæ¯å­ç»ä»¶ç focus æ¹æ³\n      this.$refs.mytxt.value = 'hello'\n    }\n  }\n}\n<\/script>\n\n\x3c!-- myinput.vue --\x3e\n<template>\n  <div>\n    <input v-model=\"value\" type=\"text\" ref=\"txt\">\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      value: 'default'\n    }\n  },\n  methods: {\n    focus () {\n      this.$refs.txt.focus() // this.$refs.txt è·å dom å¯¹è±¡ï¼focus æ¹æ³è·åç¦ç¹\n    }\n  }\n}\n<\/script>\n\n\n\n# provide/inject\n\n> provide å inject ä¸»è¦å¨å¼åé«é¶æä»¶/ç»ä»¶åºæ¶ä½¿ç¨ãå¹¶ä¸æ¨èç¨äºæ®éåºç¨ç¨åºä»£ç ä¸­ã\n\nè¿å¯¹éé¡¹éè¦ä¸èµ·ä½¿ç¨ï¼ä»¥åè®¸ä¸ä¸ªç¥åç»ä»¶åå¶ææå­å­åä»£æ³¨å¥ä¸ä¸ªä¾èµï¼ä¸è®ºç»ä»¶å±æ¬¡æå¤æ·±ï¼å¹¶å¨å¶ä¸ä¸æ¸¸å³ç³»æç«çæ¶é´éå§ç»çæãå¦æä½ çæ reactï¼è¿ä¸ react çä¸ä¸æç¹æ§å¾ç¸ä¼¼ã\n\næç¤ºï¼provide å inject ç»å®å¹¶ä¸æ¯å¯ååºçãè¿æ¯å»æä¸ºä¹çãç¶èï¼å¦æä½ ä¼ å¥äºä¸ä¸ªå¯çå¬çå¯¹è±¡ï¼é£ä¹å¶å¯¹è±¡ç property è¿æ¯å¯ååºçãå¹¶ä¸å¨å­ç»ä»¶ä¸­ä¸å¯ä¿®æ¹\n\n// ç¶çº§ç»ä»¶æä¾ 'foo'\nvar provider = {\n  provide: {\n    foo: 'bar'\n  },\n  // ...\n}\n\n// å­ç»ä»¶æ³¨å¥ 'foo'\nvar child = {\n  inject: ['foo'],\n  created () {\n    console.log(this.foo) // => \"bar\"\n  }\n  // ...\n}\n\n\n\n# $attrs / $listeners\n\n * $attrs ï¼æç¶ç»ä»¶ä¸­é prop å±æ§ç»å®å°åé¨ç»ä»¶\n * $listenersï¼æç¶ç»ä»¶ä¸­ç dom å¯¹è±¡çåçäºä»¶ç»å®å°åé¨ç»ä»¶\n * å¯æ¥çæç« vue - ç»ä»¶éä¿¡ä¹$attrsã$listeners\n * å¦ä½çè§£vueä¸­çnative\n\n\n# props / $emit\n\n> ç¶ç»ä»¶éè¿propsåå­ç»ä»¶ä¼ éæ°æ®ï¼å­ç»ä»¶éè¿$emitè§¦åç¶ç»ä»¶çæ¹æ³ï¼ä»èå®ç°å­å°ç¶çéä¿¡\n\n# ç¶ç»ä»¶ä¼ å­ç»ä»¶ï¼éè¿props\n\n\x3c!--ç¶ç»ä»¶--\x3e\n<template>\n    <div>ææ¯ç¶ç»ä»¶,æçå¼æ¯{{ msg }}\n        <child :logo=\"msg\"></child>\n    </div>\n</template>\n\n<script>\nimport child from './child'\nexport default {\n  data () {\n    return {\n      msg: '123'\n    }\n  },\n  components: {\n    child\n  }\n}\n<\/script>\n\n\n\x3c!--å­ç»ä»¶--\x3e\n<template>\n    <div>\n      <div>ææ¯å­ç»ä»¶,è¿æ¯ç¶ç»ä»¶çå¼ï¼{{ logo }}</div>\n    </div>\n</template>\n\n<script>\nexport default {\n  name: 'child',\n  data () {\n    return {\n    }\n  },\n  props: ['logo']\n}\n<\/script>\n\n\x3c!--\n\tææ¯ç¶ç»ä»¶,æçå¼æ¯123\n\tææ¯å­ç»ä»¶,è¿æ¯ç¶ç»ä»¶çå¼ï¼123\n--\x3e\n\n\n# å­ç»ä»¶ä¼ ç¶ç»ä»¶ï¼$emit\n\n * è¾å¥æ¡çonchangeäºä»¶ï¼è¦å¨ input å¤±å»ç¦ç¹çæ¶åæä¼è§¦åï¼\n * oninput äºä»¶å¨ç¨æ·è¾å¥æ¶è§¦åï¼å®æ¯å¨åç´ å¼åçååæ¶ç«å³è§¦åï¼\n\n\x3c!--ç¶ç»ä»¶--\x3e\n<template>\n    <div>\n        <child @transfer=\"get\"></child>\n        <div>ææ¯ç¶ç»ä»¶ï¼è¿æ¯å­ç»ä»¶ä¼ æ¥çå¼ï¼{{ msg }}</div>\n    </div>\n\n</template>\n\n<script>\nimport child from './child'\nexport default {\n  data () {\n    return {\n      msg: ''\n    }\n  },\n  components: {\n    child\n  },\n  methods: {\n    get (msg) {\n      this.msg = msg\n    }\n  }\n}\n<\/script>\n\n\x3c!--å­ç»ä»¶--\x3e\n<template>\n    <div>\n        <input type=\"text\" v-model=\"msg\" @input=\"set\">\n    </div>\n</template>\n\n<script>\nexport default {\n  name: 'child',\n  data () {\n    return {\n      msg: ''\n    }\n  },\n  methods: {\n    set: function () {\n      this.$emit('transfer', this.msg)\n      console.log(1)\n    }\n  }\n}\n<\/script>\n\n\x3c!--\n    23131 //è¾å¥æ¡\n    ææ¯ç¶ç»ä»¶ï¼è¿æ¯å­ç»ä»¶ä¼ æ¥çå¼ï¼23131\n--\x3e\n\n\n\n# vuex\n\nvuex\n\n\n# event bus\n\nä¸ä¸ªå®æ´çeventbusä¸»è¦åä¸ºä¸ä¸ªé¨åï¼eventbusç»ä»¶ãæ³¨åäºä»¶ï¼$onï¼ãåéäºä»¶ï¼$emitï¼\n\n\n# v-model\n\nç¶ç»ä»¶éè¿v-modelä¼ éå¼ç»å­ç»ä»¶æ¶ï¼ä¼èªå¨ä¼ éä¸ä¸ªvalueçpropå±æ§ï¼å¨å­ç»ä»¶ä¸­éè¿this.$emit(âinput',val)èªå¨ä¿®æ¹v-modelç»å®çå¼\n\nvue.component('child',{\n    props:{\n      value:string, //v-modelä¼èªå¨ä¼ éä¸ä¸ªå­æ®µä¸ºvalueçpropå±æ§\n    },\n    data(){\n      return {\n        mymessage:this.value\n      }\n    },\n    methods:{\n      changevalue(){\n        this.$emit('input',this.mymessage);//éè¿å¦æ­¤è°ç¨å¯ä»¥æ¹åç¶ç»ä»¶ä¸v-modelç»å®çå¼\n      }\n    },\n    template:`\n      <div>\n        <input type=\"text\" v-model=\"mymessage\" @change=\"changevalue\">\n      </div>\n  })\n\n\n  vue.component('parent',{\n    template:`\n      <div>\n        <p>this is parent compoent!</p>\n        <p>{{message}}</p>\n        <child v-model=\"message\"></child>\n      </div>\n    `,\n    data(){\n      return {\n        message:'hello'\n      }\n    }\n  })\n",charsets:{cjk:!0}},{title:"TypeScript åºç¡",frontmatter:{},regularPath:"/ts/ts-base.html",relativePath:"ts/ts-base.md",key:"v-d2732a66",path:"/ts/ts-base.html",headers:[{level:2,title:"è¯­è¨ç±»å",slug:"è¯­è¨ç±»å",normalizedTitle:"è¯­è¨ç±»å",charIndex:61},{level:3,title:"TSæ¯éæç±»å+å¼±ç±»å",slug:"tsæ¯éæç±»å-å¼±ç±»å",normalizedTitle:"tsæ¯éæç±»å+å¼±ç±»å",charIndex:466},{level:2,title:"TypeScripté¡¹ç®",slug:"typescripté¡¹ç®",normalizedTitle:"typescripté¡¹ç®",charIndex:535},{level:3,title:"ç¼è¯ä¸ä¸æ",slug:"ç¼è¯ä¸ä¸æ",normalizedTitle:"ç¼è¯ä¸ä¸æ",charIndex:688},{level:3,title:"å£°æç©ºé´",slug:"å£°æç©ºé´",normalizedTitle:"å£°æç©ºé´",charIndex:989},{level:3,title:"æ¨¡å",slug:"æ¨¡å",normalizedTitle:"æ¨¡å",charIndex:1241},{level:2,title:"TypeScriptç±»åç³»ç»",slug:"typescriptç±»åç³»ç»",normalizedTitle:"typescriptç±»åç³»ç»",charIndex:1512},{level:3,title:"ç±»åæ³¨è§£",slug:"ç±»åæ³¨è§£",normalizedTitle:"ç±»åæ³¨è§£",charIndex:1230},{level:3,title:"åå§ç±»å",slug:"åå§ç±»å",normalizedTitle:"åå§ç±»å",charIndex:1767},{level:3,title:"ç¹æ®ç±»å",slug:"ç¹æ®ç±»å",normalizedTitle:"ç¹æ®ç±»å",charIndex:1990},{level:3,title:"æ°ç»",slug:"æ°ç»",normalizedTitle:"æ°ç»",charIndex:2553},{level:3,title:"å¯¹è±¡",slug:"å¯¹è±¡",normalizedTitle:"å¯¹è±¡",charIndex:407},{level:3,title:"æ¥å£",slug:"æ¥å£",normalizedTitle:"æ¥å£",charIndex:3059},{level:3,title:"interface å type çåºå«",slug:"interface-å-type-çåºå«",normalizedTitle:"interface å type çåºå«",charIndex:3610},{level:3,title:"åèç±»åæ³¨è§£",slug:"åèç±»åæ³¨è§£",normalizedTitle:"åèç±»åæ³¨è§£",charIndex:4172},{level:3,title:"æ³å",slug:"æ³å",normalizedTitle:"æ³å",charIndex:4528},{level:3,title:"èåç±»å(|)",slug:"èåç±»å",normalizedTitle:"èåç±»å(|)",charIndex:5064},{level:3,title:"äº¤åç±»å(&)",slug:"äº¤åç±»å",normalizedTitle:"äº¤åç±»å(&amp;)",charIndex:null},{level:3,title:"åç»ç±»å",slug:"åç»ç±»å",normalizedTitle:"åç»ç±»å",charIndex:5556},{level:3,title:"ç±»åå«å",slug:"ç±»åå«å",normalizedTitle:"ç±»åå«å",charIndex:5850},{level:3,title:"æä¸¾ç±»å",slug:"æä¸¾ç±»å",normalizedTitle:"æä¸¾ç±»å",charIndex:6070},{level:3,title:"ç±»",slug:"ç±»",normalizedTitle:"ç±»",charIndex:63},{level:3,title:"æ½è±¡ç±»",slug:"æ½è±¡ç±»",normalizedTitle:"æ½è±¡ç±»",charIndex:7808},{level:2,title:"é«çº§ç±»å",slug:"é«çº§ç±»å",normalizedTitle:"é«çº§ç±»å",charIndex:8261},{level:3,title:"partial",slug:"partial",normalizedTitle:"partial",charIndex:8270},{level:3,title:"Record",slug:"record",normalizedTitle:"record",charIndex:8560},{level:3,title:"Pick",slug:"pick",normalizedTitle:"pick",charIndex:9286},{level:3,title:"Omit",slug:"omit",normalizedTitle:"omit",charIndex:9604}],lastUpdated:"6/25/2025, 8:09:31 PM",lastUpdatedTimestamp:1750853371e3,headersStr:"è¯­è¨ç±»å TSæ¯éæç±»å+å¼±ç±»å TypeScripté¡¹ç® ç¼è¯ä¸ä¸æ å£°æç©ºé´ æ¨¡å TypeScriptç±»åç³»ç» ç±»åæ³¨è§£ åå§ç±»å ç¹æ®ç±»å æ°ç» å¯¹è±¡ æ¥å£ interface å type çåºå« åèç±»åæ³¨è§£ æ³å èåç±»å(|) äº¤åç±»å(&) åç»ç±»å ç±»åå«å æä¸¾ç±»å ç±» æ½è±¡ç±» é«çº§ç±»å partial Record Pick Omit",content:"# TypeScript åºç¡\n\nãå®æ¹ææ¡£ã\n\nãæ·±å¥çè§£TypeScriptã\n\nTS Platground\n\n\n# è¯­è¨ç±»å\n\nå¼ºç±»åï¼ä¸åè®¸éæçéå¼ç±»åè½¬æ¢\n\nå¼±ç±»åï¼åè®¸éå¼ç±»åè½¬æ¢ï¼1+ '2'ï¼\n\néæç±»åï¼å£°æè¿åï¼å®çç±»åå°±ä¸åè®¸åä¿®æ¹\n\nå¨æç±»åï¼åéçç±»åå¯ä»¥éæ¶æ¹åï¼a=1; a='1'ï¼\n\n> åºäºä»¥ä¸ï¼ææç¼ç¨è¯­è¨åä¸ºåç±»ï¼JSå³æ¯å¼±ç±»åä¹æ¯å¨æç±»åï¼ä¾å¦ï¼\n\nconst obj = {}\nobj.foo()  //è¿æ ·åæ²¡é®é¢ï¼åªæç­å°è¿è¡æ¶æä¼æ¥é\n\n// å¦æå äºä¸ä¸ªæ¶é´\nsetTimeout(() => {\n    obj.foo()\n},10000)  // éè¯¯å°±ä¼ä¿çå¨ä»£ç ä¸­\n\n// åæè\nfunction sum (a, b) {\n    return a + b\n}\nconsole.log(sun(100, '100')) //100100\n\n// è¿æå¯¹è±¡é®ä¼èªå¨è½¬åæå­ç¬¦ä¸²\nobj[true] = 100\nconsole.log(obj['true'])\n\n\n\n# TSæ¯éæç±»å+å¼±ç±»å\n\n 1. éè¯¯æ´æ©æ´é²\n 2. ä»£ç æ´æºè½ï¼ç¼ç æ´åç¡®\n 3. éææ´ç¢é \n 4. åå°ä¸å¿è¦çç±»åå¤æ­\n\n\n# TypeScripté¡¹ç®\n\nyarn initï¼åå§åpackage.json\n\nyarn add typescript --devï¼å®è£typescript\n\næ°å»ºtsæä»¶demo.ts\n\nyarn tsc demo.tsï¼ç¼è¯demo.ts\n\næ ¹ç®å½ä¸åºç°demo.jsï¼å·²ç»èªå¨è½¬åä¸ºES5\n\n\n# ç¼è¯ä¸ä¸æ\n\nç¼è¯ä¸ä¸æç®æ¯ä¸ä¸ªæ¯è¾è±å¨çæ¯è¯­ï¼å¯ä»¥ç¨å®æ¥ç»æä»¶åç»ï¼åè¯ TypeScript åªäºæä»¶æ¯ææçï¼åªäºæ¯æ æçãé¤äºæææä»¶ææºå¸¦ä¿¡æ¯å¤ï¼ç¼è¯ä¸ä¸æè¿åå«ææ­£å¨è¢«ä½¿ç¨çç¼è¯éé¡¹çä¿¡æ¯ãå®ä¹è¿ç§é»è¾åç»ï¼ä¸ä¸ªæ¯è¾å¥½çæ¹å¼æ¯ä½¿ç¨ tsconfig.json æä»¶ã\n\nyarn tsc --initï¼çætsconfig.json\n\n\"sourceMap\": true, \n\"outDir\": \"dist\",                        \n\"rootDir\": \"src\",  \n\n\nåå»ºsrcæä»¶å¤¹æ¾tsæä»¶ï¼è¿è¡yarn tscç¼è¯æ´ä¸ªé¡¹ç®\n\nå·ä½ç¼è¯éé¡¹\n\n\n# å£°æç©ºé´\n\nå¨ TypeScript éå­å¨ä¸¤ç§å£°æç©ºé´ï¼ç±»åå£°æç©ºé´ä¸åéå£°æç©ºé´ã\n\ninterface Bar {}\nconst bar = Bar; // Error: \"cannot find name 'Bar'\"\n\n// å ä¸º Bar å®ä¹å¨ç±»åå£°æç©ºé´ä¸­ï¼èæªå®ä¹å¨åéå£°æç©ºé´ä¸­ã\n\n\nconst foo = 123;\nlet bar: foo; // ERROR: \"cannot find name 'foo'\"\n\n// foo å®ä¹å¨åéå£°æç©ºé´ä¸­ï¼ä¸è½ç¨ä½ç±»åæ³¨è§£ã\n\n\n\n# æ¨¡å\n\nå¨é»è®¤æåµä¸ï¼å½ä½ å¼å§å¨ä¸ä¸ªæ°ç TypeScript æä»¶ä¸­åä¸ä»£ç æ¶ï¼å®å¤äºå¨å±å½åç©ºé´ä¸­ãå¦å¨ foo.ts éçä»¥ä¸ä»£ç å¯ä»¥å¨ bar.ts ä¸­ä½¿ç¨ã\n\n// foo.ts\nconst foo = 123;\n\n// bar.ts\nconst bar = foo; // allowed\n\n\næä»¥éè¦ä½¿ç¨æä»¶æ¨¡åï¼\n\n// foo.ts\nexport const foo = 123;\n\n// bar.ts\nimport { foo } from './foo';\nconst bar = foo; // allow\n\n\n\n# TypeScriptç±»åç³»ç»\n\n\n# ç±»åæ³¨è§£\n\nç±»åæ³¨è§£ä½¿ç¨ :TypeAnnotation è¯­æ³ãå¨ç±»åå£°æç©ºé´ä¸­å¯ç¨çä»»ä½åå®¹é½å¯ä»¥ç¨ä½ç±»åæ³¨è§£ãä¾å¦ï¼\n\n// å½æ°å£°æ\nfunction func1 (a: number, b?:number): string {\n    return 'func1'\n}\n\n// å½æ°è¡¨è¾¾å¼\nconst func2: (a: number, b:number) => string = function () {\n    return 'func2'\n}\n\n\n\n# åå§ç±»å\n\nstringãnumberãboolean\n\nlet num: number;\nlet str: string;\nlet bool: boolean;\n\nnum = 123;\nnum = 123.456;\nnum = '123'; // Error\n\nstr = '123';\nstr = 123; // Error\n\nbool = true;\nbool = false;\nbool = 'false'; // Error\n\n\n\n# ç¹æ®ç±»å\n\nanyã nullã undefined ä»¥å void\n\n# any\n\nany ç±»åå¨ TypeScript ç±»åç³»ç»ä¸­å æç¹æ®çå°ä½ãå®æä¾ç»ä½ ä¸ä¸ªç±»åç³»ç»çãåé¨ã,TypeScript å°ä¼æç±»åæ£æ¥å³é­ãå¨ç±»åç³»ç»é any è½å¤å¼å®¹ææçç±»åï¼åæ¬å®èªå·±ï¼ãå æ­¤ï¼ææç±»åé½è½è¢«èµå¼ç»å®ï¼å®ä¹è½è¢«èµå¼ç»å¶ä»ä»»ä½ç±»åã\n\nlet power: any;\n\n// èµå¼ä»»æç±»å\npower = '123';\npower = 123;\n\n// å®ä¹å¼å®¹ä»»ä½ç±»å\nlet power: any;\nlet num: number;\n\npower = '123'\nnum = power\n\n// åè¿æ¥ä¹å¯\nnum = 123\npower = num\n\n\n# null å undefined\n\né»è®¤æåµä¸å®ä»¬æ¯ææç±»åçå­ç±»åï¼å³å¯ä»¥èµå¼ç»ä»»æç±»å\n\nlet num: number;\nlet str: string;\n\n// è¿äºç±»åè½è¢«èµäº\nnum = null;\nstr = undefined;\n\n\n# void\n\nä½¿ç¨ :void æ¥è¡¨ç¤ºä¸ä¸ªå½æ°æ²¡æä¸ä¸ªè¿åå¼\n\nfunction log(message: string): void {\n  console.log(message);\n}\n\n\n\n# æ°ç»\n\n// ä¸¤ç§åæ³ï¼å¸¸ä½¿ç¨ç¬¬äºç§\nconst arr1: Array<number> = [1, 2, 3]\nconst arr2: number[] = [1, 2, 3]\n\nlet boolArray: boolean[];\n\nboolArray = [true, false];\nconsole.log(boolArray[0]); // true\nconsole.log(boolArray.length); // 2\n\nboolArray[1] = true;\nboolArray = [false, false];\n\nboolArray[0] = 'false'; // Error\nboolArray = 'false'; // Error\nboolArray = [true, 'false']; // Error\n\n\n\n# å¯¹è±¡\n\né¤äº Objectä¹å¤ï¼å½æ°åæ°ç»ä¹å±äºå¯¹è±¡\n\nconst obj: { foo: number } = { foo:123 }\n\nconst foo: object = function () {}\nconst bar: object = []\n\n\n\n# æ¥å£\n\nä¸ºä»ä¹éè¦æ¥å£ï¼å¯ä»¥çè¿ä¸ªä¾å­ï¼\n\nfunction print(obj: { a: string }) {\n  console.log(obj.a);\n}\n\nlet myObj = { a: '10', b: 20 };\nprint(myObj);\n\n\nç±»åæ£æ¥å¨ä¼æ¥çprintçè°ç¨ã printæä¸ä¸ªåæ°ï¼å¹¶è¦æ±è¿ä¸ªå¯¹è±¡åæ°æä¸ä¸ªåä¸ºaç±»åä¸ºstringçå±æ§ã éè¦æ³¨æçæ¯ï¼æä»¬ä¼ å¥çå¯¹è±¡åæ°å®éä¸ä¼åå«å¾å¤å±æ§ï¼ä½æ¯ç¼è¯å¨åªä¼æ£æ¥é£äºaæ¯å¦å­å¨ï¼èæ²¡ææ£æ¥b\n\næ¥å£å¯ä»¥åå¹¶ä¼å¤ç±»åå£°æè³ä¸ä¸ªç±»åå£°æï¼å¨è¿éï¼æä»¬æç±»åæ³¨è§£ï¼a: string + b: number åå¹¶å°äºä¸ä¸ªæ°çç±»åæ³¨è§£ Obj éï¼è¿æ ·è½å¼ºå¶å¯¹æ¯ä¸ªæåè¿è¡ç±»åæ£æ¥ã\n\ninterface Obj {\n  a: string;\n  b: number;\n}\n\nlet obj: Obj;\nobj = {\n  a: '10',\n  b: 20\n};\n\n// Error: Property 'b' is missing\nobj = {\n  a: '10'\n};\n\n// Error: Property 'b' is missing\nobj = {\n  a: '10',\n  b: '20'\n};\n\n\n\n# interface å type çåºå«\n\nå¨ TypeScript ä¸­ï¼interface å type é½å¯ä»¥ç¨æ¥å®ä¹ç±»åï¼ä½å®ä»¬æä¸äºåºå«ãä»¥ä¸æ¯å®ä»¬çä¸»è¦åºå«ï¼\n\n 1. è¯­æ³åç¨éï¼\n    * interface ä¸»è¦ç¨äºå®ä¹å¯¹è±¡çç»æã\n    * type æ´çµæ´»ï¼å¯ä»¥ç¨äºå®ä¹åç§ç±»åï¼åæ¬å¯¹è±¡ãèåç±»åãäº¤åç±»åç­ã\n 2. æ©å±æ§ï¼\n    * interface å¯ä»¥è¢«ç»§æ¿åå®ç°ï¼æ¯æ extends å³é®å­ã\n    * type ä¸è½è¢«ç»§æ¿ï¼ä½å¯ä»¥ä½¿ç¨äº¤åç±»å (&) æ¥ç»åç±»åã\n 3. å£°æåå¹¶ï¼\n    * interface æ¯æå£°æåå¹¶ï¼å¯ä»¥å¤æ¬¡å£°æååæ¥å£ï¼å®ä»¬ä¼èªå¨åå¹¶ã\n    * type ä¸æ¯æå£°æåå¹¶ï¼éå¤å£°æä¼æ¥éã\n 4. è®¡ç®å±æ§ï¼\n    * type æ¯æä½¿ç¨ in å³é®å­åå»ºæ å°ç±»åã\n    * interface ä¸æ¯ææ å°ç±»åã\n 5. åç»åæ°ç»ï¼\n    * type å¯ä»¥æ´å®¹æå°å®ä¹åç»åå¤æçæ°ç»ç±»åã\n    * interface å¨å®ä¹åç»åå¤ææ°ç»ç±»åæ¶ç¸å¯¹ä¸å¤çµæ´»ã\n 6. èåç±»ååäº¤åç±»åï¼\n    * type å¯ä»¥ç´æ¥åå»ºèåç±»ååäº¤åç±»åã\n    * interface ä¸è½ç´æ¥åå»ºèåç±»ååäº¤åç±»åã\n\n\n# åèç±»åæ³¨è§£\n\nåèç±»åè½ä¸ºä½ å¿«éçæä¾ä¸ä¸ªç±»åæ³¨è§£ãå®å¯ä»¥å¸®å©ä½ çå»ä¸ºç±»åèµ·åçéº»ç¦ï¼ä½ å¯è½ä¼ä½¿ç¨ä¸ä¸ªå¾ç³ç³çåç§°ï¼ãç¶èï¼å¦æä½ åç°éè¦å¤æ¬¡ä½¿ç¨ç¸åçåèæ³¨è§£æ¶ï¼é£ä¹èèæå®éæä¸ºä¸ä¸ªæ¥å£ï¼æèæ¯ type aliasï¼\n\nlet foo: {\n  first: string;\n  second: string;\n};\n\nfoo = {\n  first: 'John',\n  second: 'Doe'\n};\n\nfoo = {\n  // Error: 'Second is missing'\n  first: 'John'\n};\n\nfoo = {\n  // Error: 'Second is the wrong type'\n  first: 'John',\n  second: 1337\n};\n\n\n\n# æ³å\n\nå¨è®¡ç®æºç§å­¦ä¸­ï¼è®¸å¤ç®æ³åæ°æ®ç»æå¹¶ä¸ä¼ä¾èµäºå¯¹è±¡çå®éç±»åãä½æ¯ï¼ä½ ä»ç¶ä¼æ³å¨æ¯ä¸ªåééå¼ºå¶æä¾çº¦æã\n\nfunction createNumberArray (length: number, value: number): number[] {\n    const arr = Array<number>(length).fill(value)\n    return arr\n}\n\nfunction createStringArray (length: number, value: string): string[] {\n    const arr = Array<string>(length).fill(value)\n    return arr\n}\n\n// æ³åè§£å³åä½é®é¢,å¨å½æ°åé¢å  <T>\nfunction createArray<T> (length: number, value: T): T[] {\n    const arr = Array<T>(length).fill(value)\n    return arr\n}\nconst res = createArray<string>(3, 'foo')\n\n\nå·ä½ä¾å­è¯·çæ³å\n\n\n# èåç±»å(|)\n\nå¨ JavaScript ä¸­ï¼ä½ å¯è½å¸æå±æ§ä¸ºå¤ç§ç±»åä¹ä¸ï¼å¦å­ç¬¦ä¸²æèæ°ç»ãå®ä½¿ç¨ | ä½ä¸ºæ è®°ï¼å¦ string | number\n\nfunction formatCommandline(command: string[] | string) {\n  let line = '';\n  if (typeof command === 'string') {\n    line = command.trim();\n  } else {\n    line = command.join(' ').trim();\n  }\n}\n\n\n\n# äº¤åç±»å(&)\n\näº¤åç±»åæ¯å°å¤ä¸ªç±»ååå¹¶ä¸ºä¸ä¸ªç±»åã è¿è®©æä»¬å¯ä»¥æç°æçå¤ç§ç±»åå å å°ä¸èµ·æä¸ºä¸ç§ç±»åï¼å®åå«äºæéçææç±»åçç¹æ§ã\n\ninterface A {\n  name: string;\n  sex: number;\n}\n\ninterface B {\n  age: number;\n  sex: number;\n}\n\nlet c: A&B = { name: 'xxx', age: 18, sex: 1 }\n\n\n\n# åç»ç±»å\n\nåç»å¯ä»¥çä½æ¯æ°ç»çæå±ï¼å®è¡¨ç¤ºå·²ç¥åç´ æ°éåç±»åçæ°ç»ãç¡®åå°è¯´ï¼æ¯å·²ç¥æ°ç»ä¸­æ¯ä¸ä¸ªä½ç½®ä¸çåç´ çç±»åã\n\nlet nameNumber: [string, number];\n\n// Ok\nnameNumber = ['Jenny', 221345];\n\n// Error\nnameNumber = ['Jenny', '221345'];\n\n// ä¸è§£æä¸èµ·ä½¿ç¨\nlet nameNumber: [string, number];\nnameNumber = ['Jenny', 322134];\n\nconst [name, num] = nameNumber;\n\n\n\n# ç±»åå«å\n\nTypeScript æä¾äºä¸ºç±»åæ³¨è§£è®¾ç½®å«åçä¾¿æ·è¯­æ³ï¼ä½ å¯ä»¥ä½¿ç¨ type SomeName = someValidTypeAnnotation æ¥åå»ºå«åï¼\n\ntype StrOrNum = string | number;\n\n// ä½¿ç¨\nlet sample: StrOrNum;\nsample = 123;\nsample = '123';\n\n// ä¼æ£æ¥ç±»å\nsample = true; // Error\n\n\n\n# æä¸¾ç±»å\n\næä¸¾ï¼Enumï¼ç±»åç¨äºåå¼è¢«éå®å¨ä¸å®èå´åçåºæ¯ï¼æ¯å¦ä¸å¨åªè½æä¸å¤©ï¼é¢è²éå®ä¸ºçº¢ç»¿èç­ãé»è®¤æåµä¸ï¼æä¸¾æ¯åºäº 0 çï¼ä¹å°±æ¯è¯´ç¬¬ä¸ä¸ªå¼æ¯ 0ï¼åé¢çå¼ä¾æ¬¡éå¢ã\n\n// ä¾å¦æç« å¯¹è±¡\nconst post = {\n    title: 'aaaaa'\n    content: 'abbb',\n    status: 0 // 0, 1, 2 ä»£è¡¨ä¸åç¶æï¼ä½æ¯ä¸ç´è§\n}\n\n// æä¸¾ç±»å\nconst enum PostStatus {\n    Draft = 0,\n    Unpublished = 1,\n    Published = 2\n}\n\nconst post = {\n    title: 'aaaaa',\n    content: 'abbb',\n    status: PostStatus.Draft\n}\n\n\næä¸¾æ¯åºäº 0 çï¼åé¢çå¼ä¾æ¬¡éå¢ã\n\nenum Color {Red, Green, Blue}\nlet c: Color = Color.Green;  // 1\n\nenum Color {Red = 1, Green, Blue = 4}\nlet c: Color = Color.Green;  // 2\n\n\n\n# ç±»\n\nclass Person {\n    public name: string\n    private age: number\n    protected readonly gender: boolean // protected åªåè®¸å­ç±»è®¿é®   readonly åªè¯»å±æ§\n    \n    constructor (name: string, age: number, gender: boolean) {\n        this.name = name\n        this.age = age\n        this.gender = gender\n    }\n    \n    sayHi (msg: string): void {\n        console.log(this.name, msg)\n    }\n}\n\nclass Student extends Person {\n    constructor (name: string, age: number, gender: boolean) {\n        super(name, age, gender)\n        console.log(gender) // åªæå¨è¿éè½è®¿é® gender\n    }\n}\n\n\n# ç¨ç±»å®ç°æ¥å£\n\n> å®ç°ï¼implementsï¼æ¯é¢åå¯¹è±¡ä¸­çä¸ä¸ªéè¦æ¦å¿µãä¸è¬æ¥è®²ï¼ä¸ä¸ªç±»åªè½ç»§æ¿èªå¦ä¸ä¸ªç±»ï¼ææ¶åä¸åç±»ä¹é´å¯ä»¥æä¸äºå±æçç¹æ§ï¼è¿æ¶åå°±å¯ä»¥æç¹æ§æåææ¥å£ï¼interfacesï¼ï¼ç¨ implements å³é®å­æ¥å®ç°ãè¿ä¸ªç¹æ§å¤§å¤§æé«äºé¢åå¯¹è±¡ççµæ´»æ§ã\n\ninterface Eat {\n    eatï¼food: string): void\n}\ninterface Run {\n    runï¼distance: number): void\n}\n\nclass Person implements Eat, Run {\n    eat (food: string): void {\n        console.log(`ä¼éå°è¿é¤ï¼${food}`)\n    }\n    \n    run (distance: number): void {\n        console.log(`ç´ç«è¡èµ°ï¼${distance}`)\n    }\n}\n\nclass Animal implements Eat, Run {\n    eat (food: string): void {\n        console.log(`å¼åå¼åå°åï¼${food}`)\n    }\n    \n    run (distance: number): void {\n        console.log(`ç¬è¡ï¼${distance}`)\n    }\n}\n\n\n\n# æ½è±¡ç±»\n\næ½è±¡ç±»ä½ä¸ºå¶ä»æ´¾çç±»çåºç±»ä½¿ç¨ï¼å®ä»¬ä¸è¬ä¸ä¼ç´æ¥è¢«å®ä¾åï¼ä¸åäºæ¥å£ï¼æ½è±¡ç±»å¯ä»¥åå«æåçå®ç°ç»èãabstractå³é®å­æ¯ç¨äºå®ä¹æ½è±¡ç±»åå¨æ½è±¡ç±»åé¨å®ä¹æ½è±¡æ¹æ³ãæ½è±¡ç±»ä¸­çæ½è±¡æ¹æ³ä¸åå«å·ä½å®ç°å¹¶ä¸å¿é¡»å¨æ´¾çç±»ä¸­å®ç°ã\n\nabstract class Animal { // æ½è±¡ç±»åªè½è¢«ç»§æ¿\n    eat (food: string): void {\n        console.log(`å¼åå¼åå°åï¼${food}`)\n    }\n\n    abstract run (distance: number): void // æ½è±¡æ¹æ³å¨å­ç±»ä¸­å¿é¡»å®ç°\n}\n\nclass Dog extends Animal {\n    run (distance: number): void { \n         console.log('ç¬è¡ï¼' + distance);\n    }\n}\nconst d = new Dog();\nd.eat('food')\nd.run(100)\n\n\n\n# é«çº§ç±»å\n\n\n# partial\n\n> Partial å½¢å®¹è¯ï¼è¯ä¸º é¨åç/å±é¨ç/ä¸å®å¨çãä½¿ä¸ä¸ª interface/class æ å¶ä» k/v å½¢å¼ç ç±»åçæ¯ä¸ä¸ªå±æ§å®å¨å¯éã\n\nç±»åå£°æï¼\n\n/**\n * Make all properties in T optional\n */\ntype Partial<T> = {\n  [P in keyof T]?: T[P];\n};\n\n\nç¤ºä¾ï¼\n\ninterface A {\n  id: number;\n  name: string;\n  age: number;\n}\ntype PartialA = Partial<A>;\n\n\n\n\n\n# Record\n\n> Record<K,T>æé å·æç»å®ç±»åTçä¸ç»å±æ§Kçç±»åãå¨å°ä¸ä¸ªç±»åçå±æ§æ å°å°å¦ä¸ä¸ªç±»åçå±æ§æ¶ï¼Recordéå¸¸æ¹ä¾¿ãï¼æ¯ä¸ä¸ªå¯¹è±¡ç±»åï¼\n\nç±»åå£°æï¼\n\n/**\n * Construct a type with a set of properties K of type T\n */\ntype Record<K extends keyof any, T> = {\n  [P in K]: T;\n};\n\n\nç¤ºä¾ï¼\n\ninterface EmployeeType {\n    id: number\n    fullname: string\n    role: string\n}\n \nlet employees: Record<number, EmployeeType> = {\n    0: { id: 1, fullname: \"John Doe\", role: \"Designer\" },\n    1: { id: 2, fullname: \"Ibrahima Fall\", role: \"Developer\" },\n    2: { id: 3, fullname: \"Sara Duckson\", role: \"Developer\" },\n}\n \n// 0: { id: 1, fullname: \"John Doe\", role: \"Designer\" },\n// 1: { id: 2, fullname: \"Ibrahima Fall\", role: \"Developer\" },\n// 2: { id: 3, fullname: \"Sara Duckson\", role: \"Developer\" }\n\n\n\n# Pick\n\n> ä» T ä¸­ï¼éæ©ä¸ç»é®å¨å¹¶é K ä¸­çå±æ§ãå®éå°±æ¯è¯´å¨åæçç±»å T ä¸ ç­éåºæ³è¦çå¨é¨ææä¸ªå«çå±æ§åç±»åã\n\nç±»åå£°æï¼\n\n/**\n * From T, pick a set of properties whose keys are in the union K\n */\ntype Pick<T, K extends keyof T> = {\n  [P in K]: T[P];\n};\n\n\nç¤ºä¾ï¼\n\ninterface B {\n  id: number;\n  name: string;\n  age: number;\n}\n\ntype PickB = Pick<B, \"id\" | \"name\">;\n\n\n\n\n\n# Omit\n\n> ä½ç¨ä¸Pickç¸åï¼Omitæ¯æé¤ä¸ä¸ªå­æ®µï¼å©ä¸çææï¼\n\ninterface C {\n  id: number;\n  name: string;\n  age: number;\n}\n\ntype OmitC = Omit<C, \"id\">;\n",normalizedContent:"# typescript åºç¡\n\nãå®æ¹ææ¡£ã\n\nãæ·±å¥çè§£typescriptã\n\nts platground\n\n\n# è¯­è¨ç±»å\n\nå¼ºç±»åï¼ä¸åè®¸éæçéå¼ç±»åè½¬æ¢\n\nå¼±ç±»åï¼åè®¸éå¼ç±»åè½¬æ¢ï¼1+ '2'ï¼\n\néæç±»åï¼å£°æè¿åï¼å®çç±»åå°±ä¸åè®¸åä¿®æ¹\n\nå¨æç±»åï¼åéçç±»åå¯ä»¥éæ¶æ¹åï¼a=1; a='1'ï¼\n\n> åºäºä»¥ä¸ï¼ææç¼ç¨è¯­è¨åä¸ºåç±»ï¼jså³æ¯å¼±ç±»åä¹æ¯å¨æç±»åï¼ä¾å¦ï¼\n\nconst obj = {}\nobj.foo()  //è¿æ ·åæ²¡é®é¢ï¼åªæç­å°è¿è¡æ¶æä¼æ¥é\n\n// å¦æå äºä¸ä¸ªæ¶é´\nsettimeout(() => {\n    obj.foo()\n},10000)  // éè¯¯å°±ä¼ä¿çå¨ä»£ç ä¸­\n\n// åæè\nfunction sum (a, b) {\n    return a + b\n}\nconsole.log(sun(100, '100')) //100100\n\n// è¿æå¯¹è±¡é®ä¼èªå¨è½¬åæå­ç¬¦ä¸²\nobj[true] = 100\nconsole.log(obj['true'])\n\n\n\n# tsæ¯éæç±»å+å¼±ç±»å\n\n 1. éè¯¯æ´æ©æ´é²\n 2. ä»£ç æ´æºè½ï¼ç¼ç æ´åç¡®\n 3. éææ´ç¢é \n 4. åå°ä¸å¿è¦çç±»åå¤æ­\n\n\n# typescripté¡¹ç®\n\nyarn initï¼åå§åpackage.json\n\nyarn add typescript --devï¼å®è£typescript\n\næ°å»ºtsæä»¶demo.ts\n\nyarn tsc demo.tsï¼ç¼è¯demo.ts\n\næ ¹ç®å½ä¸åºç°demo.jsï¼å·²ç»èªå¨è½¬åä¸ºes5\n\n\n# ç¼è¯ä¸ä¸æ\n\nç¼è¯ä¸ä¸æç®æ¯ä¸ä¸ªæ¯è¾è±å¨çæ¯è¯­ï¼å¯ä»¥ç¨å®æ¥ç»æä»¶åç»ï¼åè¯ typescript åªäºæä»¶æ¯ææçï¼åªäºæ¯æ æçãé¤äºæææä»¶ææºå¸¦ä¿¡æ¯å¤ï¼ç¼è¯ä¸ä¸æè¿åå«ææ­£å¨è¢«ä½¿ç¨çç¼è¯éé¡¹çä¿¡æ¯ãå®ä¹è¿ç§é»è¾åç»ï¼ä¸ä¸ªæ¯è¾å¥½çæ¹å¼æ¯ä½¿ç¨ tsconfig.json æä»¶ã\n\nyarn tsc --initï¼çætsconfig.json\n\n\"sourcemap\": true, \n\"outdir\": \"dist\",                        \n\"rootdir\": \"src\",  \n\n\nåå»ºsrcæä»¶å¤¹æ¾tsæä»¶ï¼è¿è¡yarn tscç¼è¯æ´ä¸ªé¡¹ç®\n\nå·ä½ç¼è¯éé¡¹\n\n\n# å£°æç©ºé´\n\nå¨ typescript éå­å¨ä¸¤ç§å£°æç©ºé´ï¼ç±»åå£°æç©ºé´ä¸åéå£°æç©ºé´ã\n\ninterface bar {}\nconst bar = bar; // error: \"cannot find name 'bar'\"\n\n// å ä¸º bar å®ä¹å¨ç±»åå£°æç©ºé´ä¸­ï¼èæªå®ä¹å¨åéå£°æç©ºé´ä¸­ã\n\n\nconst foo = 123;\nlet bar: foo; // error: \"cannot find name 'foo'\"\n\n// foo å®ä¹å¨åéå£°æç©ºé´ä¸­ï¼ä¸è½ç¨ä½ç±»åæ³¨è§£ã\n\n\n\n# æ¨¡å\n\nå¨é»è®¤æåµä¸ï¼å½ä½ å¼å§å¨ä¸ä¸ªæ°ç typescript æä»¶ä¸­åä¸ä»£ç æ¶ï¼å®å¤äºå¨å±å½åç©ºé´ä¸­ãå¦å¨ foo.ts éçä»¥ä¸ä»£ç å¯ä»¥å¨ bar.ts ä¸­ä½¿ç¨ã\n\n// foo.ts\nconst foo = 123;\n\n// bar.ts\nconst bar = foo; // allowed\n\n\næä»¥éè¦ä½¿ç¨æä»¶æ¨¡åï¼\n\n// foo.ts\nexport const foo = 123;\n\n// bar.ts\nimport { foo } from './foo';\nconst bar = foo; // allow\n\n\n\n# typescriptç±»åç³»ç»\n\n\n# ç±»åæ³¨è§£\n\nç±»åæ³¨è§£ä½¿ç¨ :typeannotation è¯­æ³ãå¨ç±»åå£°æç©ºé´ä¸­å¯ç¨çä»»ä½åå®¹é½å¯ä»¥ç¨ä½ç±»åæ³¨è§£ãä¾å¦ï¼\n\n// å½æ°å£°æ\nfunction func1 (a: number, b?:number): string {\n    return 'func1'\n}\n\n// å½æ°è¡¨è¾¾å¼\nconst func2: (a: number, b:number) => string = function () {\n    return 'func2'\n}\n\n\n\n# åå§ç±»å\n\nstringãnumberãboolean\n\nlet num: number;\nlet str: string;\nlet bool: boolean;\n\nnum = 123;\nnum = 123.456;\nnum = '123'; // error\n\nstr = '123';\nstr = 123; // error\n\nbool = true;\nbool = false;\nbool = 'false'; // error\n\n\n\n# ç¹æ®ç±»å\n\nanyã nullã undefined ä»¥å void\n\n# any\n\nany ç±»åå¨ typescript ç±»åç³»ç»ä¸­å æç¹æ®çå°ä½ãå®æä¾ç»ä½ ä¸ä¸ªç±»åç³»ç»çãåé¨ã,typescript å°ä¼æç±»åæ£æ¥å³é­ãå¨ç±»åç³»ç»é any è½å¤å¼å®¹ææçç±»åï¼åæ¬å®èªå·±ï¼ãå æ­¤ï¼ææç±»åé½è½è¢«èµå¼ç»å®ï¼å®ä¹è½è¢«èµå¼ç»å¶ä»ä»»ä½ç±»åã\n\nlet power: any;\n\n// èµå¼ä»»æç±»å\npower = '123';\npower = 123;\n\n// å®ä¹å¼å®¹ä»»ä½ç±»å\nlet power: any;\nlet num: number;\n\npower = '123'\nnum = power\n\n// åè¿æ¥ä¹å¯\nnum = 123\npower = num\n\n\n# null å undefined\n\né»è®¤æåµä¸å®ä»¬æ¯ææç±»åçå­ç±»åï¼å³å¯ä»¥èµå¼ç»ä»»æç±»å\n\nlet num: number;\nlet str: string;\n\n// è¿äºç±»åè½è¢«èµäº\nnum = null;\nstr = undefined;\n\n\n# void\n\nä½¿ç¨ :void æ¥è¡¨ç¤ºä¸ä¸ªå½æ°æ²¡æä¸ä¸ªè¿åå¼\n\nfunction log(message: string): void {\n  console.log(message);\n}\n\n\n\n# æ°ç»\n\n// ä¸¤ç§åæ³ï¼å¸¸ä½¿ç¨ç¬¬äºç§\nconst arr1: array<number> = [1, 2, 3]\nconst arr2: number[] = [1, 2, 3]\n\nlet boolarray: boolean[];\n\nboolarray = [true, false];\nconsole.log(boolarray[0]); // true\nconsole.log(boolarray.length); // 2\n\nboolarray[1] = true;\nboolarray = [false, false];\n\nboolarray[0] = 'false'; // error\nboolarray = 'false'; // error\nboolarray = [true, 'false']; // error\n\n\n\n# å¯¹è±¡\n\né¤äº objectä¹å¤ï¼å½æ°åæ°ç»ä¹å±äºå¯¹è±¡\n\nconst obj: { foo: number } = { foo:123 }\n\nconst foo: object = function () {}\nconst bar: object = []\n\n\n\n# æ¥å£\n\nä¸ºä»ä¹éè¦æ¥å£ï¼å¯ä»¥çè¿ä¸ªä¾å­ï¼\n\nfunction print(obj: { a: string }) {\n  console.log(obj.a);\n}\n\nlet myobj = { a: '10', b: 20 };\nprint(myobj);\n\n\nç±»åæ£æ¥å¨ä¼æ¥çprintçè°ç¨ã printæä¸ä¸ªåæ°ï¼å¹¶è¦æ±è¿ä¸ªå¯¹è±¡åæ°æä¸ä¸ªåä¸ºaç±»åä¸ºstringçå±æ§ã éè¦æ³¨æçæ¯ï¼æä»¬ä¼ å¥çå¯¹è±¡åæ°å®éä¸ä¼åå«å¾å¤å±æ§ï¼ä½æ¯ç¼è¯å¨åªä¼æ£æ¥é£äºaæ¯å¦å­å¨ï¼èæ²¡ææ£æ¥b\n\næ¥å£å¯ä»¥åå¹¶ä¼å¤ç±»åå£°æè³ä¸ä¸ªç±»åå£°æï¼å¨è¿éï¼æä»¬æç±»åæ³¨è§£ï¼a: string + b: number åå¹¶å°äºä¸ä¸ªæ°çç±»åæ³¨è§£ obj éï¼è¿æ ·è½å¼ºå¶å¯¹æ¯ä¸ªæåè¿è¡ç±»åæ£æ¥ã\n\ninterface obj {\n  a: string;\n  b: number;\n}\n\nlet obj: obj;\nobj = {\n  a: '10',\n  b: 20\n};\n\n// error: property 'b' is missing\nobj = {\n  a: '10'\n};\n\n// error: property 'b' is missing\nobj = {\n  a: '10',\n  b: '20'\n};\n\n\n\n# interface å type çåºå«\n\nå¨ typescript ä¸­ï¼interface å type é½å¯ä»¥ç¨æ¥å®ä¹ç±»åï¼ä½å®ä»¬æä¸äºåºå«ãä»¥ä¸æ¯å®ä»¬çä¸»è¦åºå«ï¼\n\n 1. è¯­æ³åç¨éï¼\n    * interface ä¸»è¦ç¨äºå®ä¹å¯¹è±¡çç»æã\n    * type æ´çµæ´»ï¼å¯ä»¥ç¨äºå®ä¹åç§ç±»åï¼åæ¬å¯¹è±¡ãèåç±»åãäº¤åç±»åç­ã\n 2. æ©å±æ§ï¼\n    * interface å¯ä»¥è¢«ç»§æ¿åå®ç°ï¼æ¯æ extends å³é®å­ã\n    * type ä¸è½è¢«ç»§æ¿ï¼ä½å¯ä»¥ä½¿ç¨äº¤åç±»å (&) æ¥ç»åç±»åã\n 3. å£°æåå¹¶ï¼\n    * interface æ¯æå£°æåå¹¶ï¼å¯ä»¥å¤æ¬¡å£°æååæ¥å£ï¼å®ä»¬ä¼èªå¨åå¹¶ã\n    * type ä¸æ¯æå£°æåå¹¶ï¼éå¤å£°æä¼æ¥éã\n 4. è®¡ç®å±æ§ï¼\n    * type æ¯æä½¿ç¨ in å³é®å­åå»ºæ å°ç±»åã\n    * interface ä¸æ¯ææ å°ç±»åã\n 5. åç»åæ°ç»ï¼\n    * type å¯ä»¥æ´å®¹æå°å®ä¹åç»åå¤æçæ°ç»ç±»åã\n    * interface å¨å®ä¹åç»åå¤ææ°ç»ç±»åæ¶ç¸å¯¹ä¸å¤çµæ´»ã\n 6. èåç±»ååäº¤åç±»åï¼\n    * type å¯ä»¥ç´æ¥åå»ºèåç±»ååäº¤åç±»åã\n    * interface ä¸è½ç´æ¥åå»ºèåç±»ååäº¤åç±»åã\n\n\n# åèç±»åæ³¨è§£\n\nåèç±»åè½ä¸ºä½ å¿«éçæä¾ä¸ä¸ªç±»åæ³¨è§£ãå®å¯ä»¥å¸®å©ä½ çå»ä¸ºç±»åèµ·åçéº»ç¦ï¼ä½ å¯è½ä¼ä½¿ç¨ä¸ä¸ªå¾ç³ç³çåç§°ï¼ãç¶èï¼å¦æä½ åç°éè¦å¤æ¬¡ä½¿ç¨ç¸åçåèæ³¨è§£æ¶ï¼é£ä¹èèæå®éæä¸ºä¸ä¸ªæ¥å£ï¼æèæ¯ type aliasï¼\n\nlet foo: {\n  first: string;\n  second: string;\n};\n\nfoo = {\n  first: 'john',\n  second: 'doe'\n};\n\nfoo = {\n  // error: 'second is missing'\n  first: 'john'\n};\n\nfoo = {\n  // error: 'second is the wrong type'\n  first: 'john',\n  second: 1337\n};\n\n\n\n# æ³å\n\nå¨è®¡ç®æºç§å­¦ä¸­ï¼è®¸å¤ç®æ³åæ°æ®ç»æå¹¶ä¸ä¼ä¾èµäºå¯¹è±¡çå®éç±»åãä½æ¯ï¼ä½ ä»ç¶ä¼æ³å¨æ¯ä¸ªåééå¼ºå¶æä¾çº¦æã\n\nfunction createnumberarray (length: number, value: number): number[] {\n    const arr = array<number>(length).fill(value)\n    return arr\n}\n\nfunction createstringarray (length: number, value: string): string[] {\n    const arr = array<string>(length).fill(value)\n    return arr\n}\n\n// æ³åè§£å³åä½é®é¢,å¨å½æ°åé¢å  <t>\nfunction createarray<t> (length: number, value: t): t[] {\n    const arr = array<t>(length).fill(value)\n    return arr\n}\nconst res = createarray<string>(3, 'foo')\n\n\nå·ä½ä¾å­è¯·çæ³å\n\n\n# èåç±»å(|)\n\nå¨ javascript ä¸­ï¼ä½ å¯è½å¸æå±æ§ä¸ºå¤ç§ç±»åä¹ä¸ï¼å¦å­ç¬¦ä¸²æèæ°ç»ãå®ä½¿ç¨ | ä½ä¸ºæ è®°ï¼å¦ string | number\n\nfunction formatcommandline(command: string[] | string) {\n  let line = '';\n  if (typeof command === 'string') {\n    line = command.trim();\n  } else {\n    line = command.join(' ').trim();\n  }\n}\n\n\n\n# äº¤åç±»å(&)\n\näº¤åç±»åæ¯å°å¤ä¸ªç±»ååå¹¶ä¸ºä¸ä¸ªç±»åã è¿è®©æä»¬å¯ä»¥æç°æçå¤ç§ç±»åå å å°ä¸èµ·æä¸ºä¸ç§ç±»åï¼å®åå«äºæéçææç±»åçç¹æ§ã\n\ninterface a {\n  name: string;\n  sex: number;\n}\n\ninterface b {\n  age: number;\n  sex: number;\n}\n\nlet c: a&b = { name: 'xxx', age: 18, sex: 1 }\n\n\n\n# åç»ç±»å\n\nåç»å¯ä»¥çä½æ¯æ°ç»çæå±ï¼å®è¡¨ç¤ºå·²ç¥åç´ æ°éåç±»åçæ°ç»ãç¡®åå°è¯´ï¼æ¯å·²ç¥æ°ç»ä¸­æ¯ä¸ä¸ªä½ç½®ä¸çåç´ çç±»åã\n\nlet namenumber: [string, number];\n\n// ok\nnamenumber = ['jenny', 221345];\n\n// error\nnamenumber = ['jenny', '221345'];\n\n// ä¸è§£æä¸èµ·ä½¿ç¨\nlet namenumber: [string, number];\nnamenumber = ['jenny', 322134];\n\nconst [name, num] = namenumber;\n\n\n\n# ç±»åå«å\n\ntypescript æä¾äºä¸ºç±»åæ³¨è§£è®¾ç½®å«åçä¾¿æ·è¯­æ³ï¼ä½ å¯ä»¥ä½¿ç¨ type somename = somevalidtypeannotation æ¥åå»ºå«åï¼\n\ntype strornum = string | number;\n\n// ä½¿ç¨\nlet sample: strornum;\nsample = 123;\nsample = '123';\n\n// ä¼æ£æ¥ç±»å\nsample = true; // error\n\n\n\n# æä¸¾ç±»å\n\næä¸¾ï¼enumï¼ç±»åç¨äºåå¼è¢«éå®å¨ä¸å®èå´åçåºæ¯ï¼æ¯å¦ä¸å¨åªè½æä¸å¤©ï¼é¢è²éå®ä¸ºçº¢ç»¿èç­ãé»è®¤æåµä¸ï¼æä¸¾æ¯åºäº 0 çï¼ä¹å°±æ¯è¯´ç¬¬ä¸ä¸ªå¼æ¯ 0ï¼åé¢çå¼ä¾æ¬¡éå¢ã\n\n// ä¾å¦æç« å¯¹è±¡\nconst post = {\n    title: 'aaaaa'\n    content: 'abbb',\n    status: 0 // 0, 1, 2 ä»£è¡¨ä¸åç¶æï¼ä½æ¯ä¸ç´è§\n}\n\n// æä¸¾ç±»å\nconst enum poststatus {\n    draft = 0,\n    unpublished = 1,\n    published = 2\n}\n\nconst post = {\n    title: 'aaaaa',\n    content: 'abbb',\n    status: poststatus.draft\n}\n\n\næä¸¾æ¯åºäº 0 çï¼åé¢çå¼ä¾æ¬¡éå¢ã\n\nenum color {red, green, blue}\nlet c: color = color.green;  // 1\n\nenum color {red = 1, green, blue = 4}\nlet c: color = color.green;  // 2\n\n\n\n# ç±»\n\nclass person {\n    public name: string\n    private age: number\n    protected readonly gender: boolean // protected åªåè®¸å­ç±»è®¿é®   readonly åªè¯»å±æ§\n    \n    constructor (name: string, age: number, gender: boolean) {\n        this.name = name\n        this.age = age\n        this.gender = gender\n    }\n    \n    sayhi (msg: string): void {\n        console.log(this.name, msg)\n    }\n}\n\nclass student extends person {\n    constructor (name: string, age: number, gender: boolean) {\n        super(name, age, gender)\n        console.log(gender) // åªæå¨è¿éè½è®¿é® gender\n    }\n}\n\n\n# ç¨ç±»å®ç°æ¥å£\n\n> å®ç°ï¼implementsï¼æ¯é¢åå¯¹è±¡ä¸­çä¸ä¸ªéè¦æ¦å¿µãä¸è¬æ¥è®²ï¼ä¸ä¸ªç±»åªè½ç»§æ¿èªå¦ä¸ä¸ªç±»ï¼ææ¶åä¸åç±»ä¹é´å¯ä»¥æä¸äºå±æçç¹æ§ï¼è¿æ¶åå°±å¯ä»¥æç¹æ§æåææ¥å£ï¼interfacesï¼ï¼ç¨ implements å³é®å­æ¥å®ç°ãè¿ä¸ªç¹æ§å¤§å¤§æé«äºé¢åå¯¹è±¡ççµæ´»æ§ã\n\ninterface eat {\n    eatï¼food: string): void\n}\ninterface run {\n    runï¼distance: number): void\n}\n\nclass person implements eat, run {\n    eat (food: string): void {\n        console.log(`ä¼éå°è¿é¤ï¼${food}`)\n    }\n    \n    run (distance: number): void {\n        console.log(`ç´ç«è¡èµ°ï¼${distance}`)\n    }\n}\n\nclass animal implements eat, run {\n    eat (food: string): void {\n        console.log(`å¼åå¼åå°åï¼${food}`)\n    }\n    \n    run (distance: number): void {\n        console.log(`ç¬è¡ï¼${distance}`)\n    }\n}\n\n\n\n# æ½è±¡ç±»\n\næ½è±¡ç±»ä½ä¸ºå¶ä»æ´¾çç±»çåºç±»ä½¿ç¨ï¼å®ä»¬ä¸è¬ä¸ä¼ç´æ¥è¢«å®ä¾åï¼ä¸åäºæ¥å£ï¼æ½è±¡ç±»å¯ä»¥åå«æåçå®ç°ç»èãabstractå³é®å­æ¯ç¨äºå®ä¹æ½è±¡ç±»åå¨æ½è±¡ç±»åé¨å®ä¹æ½è±¡æ¹æ³ãæ½è±¡ç±»ä¸­çæ½è±¡æ¹æ³ä¸åå«å·ä½å®ç°å¹¶ä¸å¿é¡»å¨æ´¾çç±»ä¸­å®ç°ã\n\nabstract class animal { // æ½è±¡ç±»åªè½è¢«ç»§æ¿\n    eat (food: string): void {\n        console.log(`å¼åå¼åå°åï¼${food}`)\n    }\n\n    abstract run (distance: number): void // æ½è±¡æ¹æ³å¨å­ç±»ä¸­å¿é¡»å®ç°\n}\n\nclass dog extends animal {\n    run (distance: number): void { \n         console.log('ç¬è¡ï¼' + distance);\n    }\n}\nconst d = new dog();\nd.eat('food')\nd.run(100)\n\n\n\n# é«çº§ç±»å\n\n\n# partial\n\n> partial å½¢å®¹è¯ï¼è¯ä¸º é¨åç/å±é¨ç/ä¸å®å¨çãä½¿ä¸ä¸ª interface/class æ å¶ä» k/v å½¢å¼ç ç±»åçæ¯ä¸ä¸ªå±æ§å®å¨å¯éã\n\nç±»åå£°æï¼\n\n/**\n * make all properties in t optional\n */\ntype partial<t> = {\n  [p in keyof t]?: t[p];\n};\n\n\nç¤ºä¾ï¼\n\ninterface a {\n  id: number;\n  name: string;\n  age: number;\n}\ntype partiala = partial<a>;\n\n\n\n\n\n# record\n\n> record<k,t>æé å·æç»å®ç±»åtçä¸ç»å±æ§kçç±»åãå¨å°ä¸ä¸ªç±»åçå±æ§æ å°å°å¦ä¸ä¸ªç±»åçå±æ§æ¶ï¼recordéå¸¸æ¹ä¾¿ãï¼æ¯ä¸ä¸ªå¯¹è±¡ç±»åï¼\n\nç±»åå£°æï¼\n\n/**\n * construct a type with a set of properties k of type t\n */\ntype record<k extends keyof any, t> = {\n  [p in k]: t;\n};\n\n\nç¤ºä¾ï¼\n\ninterface employeetype {\n    id: number\n    fullname: string\n    role: string\n}\n \nlet employees: record<number, employeetype> = {\n    0: { id: 1, fullname: \"john doe\", role: \"designer\" },\n    1: { id: 2, fullname: \"ibrahima fall\", role: \"developer\" },\n    2: { id: 3, fullname: \"sara duckson\", role: \"developer\" },\n}\n \n// 0: { id: 1, fullname: \"john doe\", role: \"designer\" },\n// 1: { id: 2, fullname: \"ibrahima fall\", role: \"developer\" },\n// 2: { id: 3, fullname: \"sara duckson\", role: \"developer\" }\n\n\n\n# pick\n\n> ä» t ä¸­ï¼éæ©ä¸ç»é®å¨å¹¶é k ä¸­çå±æ§ãå®éå°±æ¯è¯´å¨åæçç±»å t ä¸ ç­éåºæ³è¦çå¨é¨ææä¸ªå«çå±æ§åç±»åã\n\nç±»åå£°æï¼\n\n/**\n * from t, pick a set of properties whose keys are in the union k\n */\ntype pick<t, k extends keyof t> = {\n  [p in k]: t[p];\n};\n\n\nç¤ºä¾ï¼\n\ninterface b {\n  id: number;\n  name: string;\n  age: number;\n}\n\ntype pickb = pick<b, \"id\" | \"name\">;\n\n\n\n\n\n# omit\n\n> ä½ç¨ä¸pickç¸åï¼omitæ¯æé¤ä¸ä¸ªå­æ®µï¼å©ä¸çææï¼\n\ninterface c {\n  id: number;\n  name: string;\n  age: number;\n}\n\ntype omitc = omit<c, \"id\">;\n",charsets:{cjk:!0}},{title:"Viteåçè§£æ",frontmatter:{},regularPath:"/vue/vite.html",relativePath:"vue/vite.md",key:"v-3b654611",path:"/vue/vite.html",lastUpdated:"5/9/2022, 3:52:37 PM",lastUpdatedTimestamp:1652082757e3,headersStr:null,content:"# Viteåçè§£æ",normalizedContent:"# viteåçè§£æ",charsets:{cjk:!0}},{title:"Vueååºå¼åçè¯¦è§£",frontmatter:{title:"Vueååºå¼åçè¯¦è§£",date:"2020-11-12T11:27:54.000Z",categories:"Vue"},regularPath:"/vue/responsive.html",relativePath:"vue/responsive.md",key:"v-7a32bc31",path:"/vue/responsive.html",headers:[{level:2,title:"åå¸è®¢éæ¨¡å¼",slug:"åå¸è®¢éæ¨¡å¼",normalizedTitle:"åå¸è®¢éæ¨¡å¼",charIndex:17},{level:2,title:"Vueçèªå®ä¹äºä»¶",slug:"vueçèªå®ä¹äºä»¶",normalizedTitle:"vueçèªå®ä¹äºä»¶",charIndex:125},{level:3,title:"åå¼ç»ä»¶éä¿¡è¿ç¨",slug:"åå¼ç»ä»¶éä¿¡è¿ç¨",normalizedTitle:"åå¼ç»ä»¶éä¿¡è¿ç¨",charIndex:323},{level:3,title:"æ¨¡æå®ç°vueçèªå®ä¹äºä»¶",slug:"æ¨¡æå®ç°vueçèªå®ä¹äºä»¶",normalizedTitle:"æ¨¡æå®ç°vueçèªå®ä¹äºä»¶",charIndex:651},{level:2,title:"è§å¯èæ¨¡å¼",slug:"è§å¯èæ¨¡å¼",normalizedTitle:"è§å¯èæ¨¡å¼",charIndex:1333},{level:2,title:"Vueå®ä¾åå§åè¿ç¨",slug:"vueå®ä¾åå§åè¿ç¨",normalizedTitle:"vueå®ä¾åå§åè¿ç¨",charIndex:2015},{level:3,title:"1. æ°æ®æ¯objectç±»å",slug:"_1-æ°æ®æ¯objectç±»å",normalizedTitle:"1. æ°æ®æ¯objectç±»å",charIndex:3446},{level:3,title:"2. æ°æ®æ¯arrayç±»å",slug:"_2-æ°æ®æ¯arrayç±»å",normalizedTitle:"2. æ°æ®æ¯arrayç±»å",charIndex:4232},{level:2,title:"ç»ä»¶æ¸²æè¿ç¨",slug:"ç»ä»¶æ¸²æè¿ç¨",normalizedTitle:"ç»ä»¶æ¸²æè¿ç¨",charIndex:6319},{level:2,title:"ååºå¼çæ´ä½æµç¨",slug:"ååºå¼çæ´ä½æµç¨",normalizedTitle:"ååºå¼çæ´ä½æµç¨",charIndex:10571},{level:2,title:"Vue 3.0 Proxy",slug:"vue-3-0-proxy",normalizedTitle:"vue 3.0 proxy",charIndex:10991},{level:3,title:"Proxy ä¸­ç receiver",slug:"proxy-ä¸­ç-receiver",normalizedTitle:"proxy ä¸­ç receiver",charIndex:13928}],lastUpdated:"2/22/2023, 4:12:20 PM",lastUpdatedTimestamp:167705354e4,headersStr:"åå¸è®¢éæ¨¡å¼ Vueçèªå®ä¹äºä»¶ åå¼ç»ä»¶éä¿¡è¿ç¨ æ¨¡æå®ç°vueçèªå®ä¹äºä»¶ è§å¯èæ¨¡å¼ Vueå®ä¾åå§åè¿ç¨ 1. æ°æ®æ¯objectç±»å 2. æ°æ®æ¯arrayç±»å ç»ä»¶æ¸²æè¿ç¨ ååºå¼çæ´ä½æµç¨ Vue 3.0 Proxy Proxy ä¸­ç receiver",content:"# Vueååºå¼åçè¯¦è§£\n\n\n# åå¸è®¢éæ¨¡å¼\n\n * è®¢éè\n * åå¸è\n * ä¿¡å·ä¸­å¿\n\n> åå®å­å¨ä¸ä¸ªä¿¡å·ä¸­å¿ï¼æä¸ªä»»å¡æ§è¡å®æï¼å°±åä¿¡å·ä¸­å¿åå¸ä¸ä¸ªä¿¡å·ï¼å¶ä»ä»»å¡å¯ä»¥åä¿¡å·ä¸­å¿è®¢éè¿ä¸ªä¿¡å·ï¼ä»èç¥éèªå·±ä»ä¹æ¶åèªå·±å¯ä»¥å¼å§æ§è¡ã\n\n\n# Vueçèªå®ä¹äºä»¶\n\nlet vm = new Vue()\n\n// æ³¨åäºä»¶\nvm.$on('dataChange', ()=>{\n    console.log('dataChange')\n})\n\nvm.$on('dataChange', ()=>{\n    console.log('dataChange1')\n})\n\n// åèµ·äºä»¶\nvm.$emit('dataChange')\n\n\n\n# åå¼ç»ä»¶éä¿¡è¿ç¨\n\nä¸¤ä¸ªç»ä»¶ä¸ç¸äºä¾èµï¼å³åå¸èåè®¢éèè¢«äºä»¶ä¸­å¿éç¦»\n\n// ä¿¡å·ä¸­å¿\nlet eventHub = new Vue()\n\n// ComponentA.vue\n// åå¸è\naddTodo: function () {\n    // åå¸äºä»¶\n    eventHub.$emit('add-todo', { text: this.newTodoText })\n    this.newTodoText = ''\n}\n// ComponentB.vue\n// è®¢éè\ncreated: function () {\n    // è®¢éäºä»¶\n    eventHub.$on('add-todo', this.addTodo)\n}\n\n\n\n# æ¨¡æå®ç°vueçèªå®ä¹äºä»¶\n\n// ç±»åé¨å­å¨ä¸ä¸ªå¯¹è±¡ï¼åå«äºä»¶ååå¯¹åºçè§¦åå½æ°\n// { click: [fn1, fn2], change: fn }\nclass EventEmitter {\n  constructor () {\n    this.subs = Object.create(null)\n  }\n  // æ³¨åäºä»¶\n  $on (eventType, handler) {\n    this.subs[eventType] = this.subs[eventType] || []\n    this.subs[eventType].push(handler)\n  }\n\n  // è§¦åäºä»¶\n  $emit (eventType) {\n    if (this.subs[eventType]) {\n      this.subs[eventType].forEach(handler => handler())\n    }\n  }\n\n  $off(eventType) {\n    this.subs[eventType] = []\n  }\n}\n\n// æµè¯\nlet em = new EventEmitter() // ä¿¡å·ä¸­å¿\nem.$on('click', () => {\n  console.log('click1')\n})\nem.$on('click', () => {\n  console.log('click2')\n})\nem.$emit('click')\n\n\nObject.create(null) å {} çåºå«\n\n\n# è§å¯èæ¨¡å¼\n\n * è§å¯è -- watcher\n   * update()ï¼å½äºä»¶åçæ¶ï¼å·ä½è¦åçäºæ\n * åå¸è -- Dep\n   * subsæ°ç»ï¼å­å¨ææè§å¯è\n   * addSub()ï¼æ·»å è§å¯è\n   * notify()ï¼å½äºä»¶åçï¼è°ç¨ææè§å¯èçupdateæ¹æ³\n * æ²¡æäºä»¶ä¸­å¿\n\n    // åå¸è-ç®æ \n    class Dep {\n      constructor () {\n        // è®°å½ææçè®¢éè\n        this.subs = []\n      }\n      // æ·»å è®¢éè\n      addSub (sub) {\n        if (sub && sub.update) {\n          this.subs.push(sub)\n        }\n      }\n      // åå¸éç¥\n      notify () {\n        this.subs.forEach(sub => sub.update())\n      }\n    }\n\n    // è®¢éè-è§å¯è\n    class Watcher {\n      update () {\n        console.log('update')\n      }\n    }\n\n    // æµè¯\n    let dep = new Dep()\n    let watcher = new Watcher()\n\n    dep.addSub(watcher)\n    dep.notify()\n\n\n\n# Vueå®ä¾åå§åè¿ç¨\n\nå¨ Vue å®ä¾åå§åçæ¶åä¼è°ç¨_initæ¹æ³ï¼_initæ¹æ³ä¸­æå¾å¤åå§åçè¿ç¨ï¼æ¯å¦\n\n//åå§åçå½å¨æ\ninitLifecycle(vm)\n//åå§åäºä»¶\ninitEvents(vm)\n//åå§årender\ninitRender(vm)\n// ...\ninitState(vm)\n\n\nè¿éçéç¹å°±æ¯initStateæ¹æ³ï¼initStateä¸­ä¹åå§åäºå¾å¤ï¼å¦ä¸ï¼\n\n  //åå§åprops\n  if (opts.props) initProps(vm, opts.props)\n  //åå§åmethods\n  if (opts.methods) initMethods(vm, opts.methods)\n  //åå§ådataï¼ï¼ï¼åæ¬¡åéç¹ï¼ï¼ï¼\n  if (opts.data) {\n    initData(vm)\n  } else {\n    //å³ä½¿æ²¡ædataï¼ä¹è¦è°ç¨observeè§æµ_dataå¯¹è±¡\n    observe(vm._data = {}, true /* asRootData */)\n  }\n\n\nè¿éçéç¹å°±æ¯initDataæ¹æ³ï¼å¨å¶åé¨è°ç¨äºobserveæ¹æ³ï¼å°è¿éææ¯çæ­£ååºå¼çå¼å§\n\n  //å°vmä¸­çå±æ§è½¬è³vm._dataä¸­\n  proxy(vm, `_data`, key)\n  //è°ç¨observeè§æµdataå¯¹è±¡\n  observe(data, true /* asRootData */)\n\n\nobserveæ¯ä¸ä¸ªå·¥åå½æ°ï¼ç¨äºä¸ºå¯¹è±¡çæä¸ä¸ªObserveå®ä¾ãèçæ­£å°å¯¹è±¡è½¬åä¸ºååºå¼å¯¹è±¡çæ¯observeå·¥åå½æ°è¿åçObserveå®ä¾ã\n\nexport class Observer {\n  constructor (value: any) {\n    //å¯¹è±¡æ¬èº«\n    this.value = value\n    //ä¾èµæ¶éå¨\n    this.dep = new Dep()\n    this.vmCount = 0\n    //ä¸ºå¯¹è±¡æ·»å __ob__å±æ§\n    def(value, '__ob__', this)\n    //è¥å¯¹è±¡æ¯arrayç±»å\n    if (Array.isArray(value)) {\n      ...\n    } else {\n      //è¥å¯¹è±¡æ¯objectç±»å\n      ...\n    }\n  }\n\n\nä»ä»£ç åæï¼Observeæé å½æ°åäºä¸ä»¶äºï¼\n\n * ä¸ºå¯¹è±¡æ·»å  __ob__å±æ§ï¼ __ob__ä¸­åå«valueæ°æ®å¯¹è±¡æ¬èº«ãdepä¾èµæ¶éå¨ãvmCountãæ°æ®ç»è¿è¿ä¸ªæ­¥éª¤ä»¥åçååå¦ä¸ï¼\n\n//åæ°æ®\n  const data = {\n        name: 'summer'\n  }\n  //åååæ°æ®\n  const data = {\n        name: 'summer',\n        __ob__: {\n            value: data, //dataæ°æ®æ¬èº«\n            dep: new Dep(), //depä¾èµæ¶éå¨\n            vmCount: 0\n        }\n  }\n\n\n * è¥å¯¹è±¡æ¯arrayç±»åï¼åè¿è¡arrayç±»åæä½\n * è¥å¯¹è±¡æ¯objectç±»åï¼åè¿è¡objectç±»åæä½\n\n\n# 1. æ°æ®æ¯objectç±»å\n\nå½æ°æ®æ¯objectç±»åæ¶ï¼è°ç¨äºä¸ä¸ªwalkæ¹æ³ï¼å¨walkæ¹æ³ä¸­éåæ°æ®çææå±æ§ï¼å¹¶è°ç¨defineReactiveæ¹æ³ã\n\nexport function defineReactive (...) {\n  //depå­å¨ä¾èµçåéï¼æ¯ä¸ªå±æ§å­æ®µé½æä¸ä¸ªå±äºèªå·±çdepï¼ç¨äºæ¶éå±äºè¯¥å­æ®µçä¾èµ\n  const dep = new Dep()\n\n  //ä¸ºå±æ§å å¥getter/setteræ¹æ³\n  Object.defineProperty(obj, key, {\n    enumerable: true,\n    configurable: true,\n    get () {\n      // æ¶éä¾èµï¼targetä¼å¨watcherç±»ä¸­å®ä¹\n      Dep.target && dep.addSub(Dep.target)\n      return val\n    },\n    set (newValue) {\n      if (newValue === val) {\n        return\n      }\n       val = newValue\n       that.walk(newValue)\n       // åééç¥\n       dep.notify()\n    }\n  })\n}\n\n\nå¨getterä¸­æ¶éä¾èµï¼å¨setterä¸­è§¦åä¾èµã\n\n * å½å¤çéè¿Watcherè¯»åæ°æ®æ¶ï¼ä¼è§¦ågetterä»èå°Watcheræ·»å å°ä¾èµä¸­ã\n * å¨ä¿®æ¹å¯¹è±¡çå¼çæ¶åï¼ä¼è§¦åå¯¹åºçsetterï¼ setteréç¥ä¹åä¾èµæ¶éå¾å°ç Dep ä¸­çæ¯ä¸ä¸ª Watcherï¼åè¯å®ä»¬èªå·±çå¼æ¹åäºï¼éè¦éæ°æ¸²æè§å¾ãè¿æ¶åè¿äº Watcherå°±ä¼å¼å§è°ç¨ update æ¥æ´æ°è§å¾ã\n\n\n# 2. æ°æ®æ¯arrayç±»å\n\nè°ç¨arrayMethodsæ¦æªä¿®æ¹æ°ç»æ¹æ³ï¼\n\n * éè¦æ¦æªçä¿®æ¹æ°ç»çæ¹æ³æï¼pushãpopãshiftãunshiftãspliceãsortãreverse\n * å½æ°ç»ææ°å¢åç´ æ¶ï¼ä½¿ç¨observeArrayå¯¹æ°å¢çåç´ è¿è¡è§æµ\n\nå¯¹äºå¯¹è±¡\n\nVue æ æ³æ£æµ property çæ·»å æç§»é¤ãè¿æ¯å ä¸º Vue éè¿Object.definePropertyæ¥å°å¯¹è±¡çkeyè½¬æ¢ægetter/setterçå½¢å¼æ¥è¿½è¸ªååï¼ä½getter/setteråªè½è¿½è¸ªä¸ä¸ªæ°æ®æ¯å¦è¢«ä¿®æ¹ï¼æ æ³è¿½è¸ªæ°å¢å±æ§åå é¤å±æ§ãç±äº Vue ä¼å¨åå§åå®ä¾æ¶å¯¹ property æ§è¡ getter/setter è½¬åï¼æä»¥ property å¿é¡»å¨ data å¯¹è±¡ä¸å­å¨æè½è®© Vue å°å®è½¬æ¢ä¸ºååºå¼çãä¾å¦ï¼\n\nvar vm = new Vue({\n  data:{\n    a:1\n  }\n})\n\n// `vm.a` æ¯ååºå¼ç\n\nvm.b = 2\n// `vm.b` æ¯éååºå¼ç\n\n\nå¯¹äºå·²ç»åå»ºçå®ä¾ï¼Vue ä¸åè®¸å¨ææ·»å æ ¹çº§å«çååºå¼ propertyãä½æ¯ï¼å¯ä»¥ä½¿ç¨ Vue.set(object, propertyName, value) æ¹æ³ååµå¥å¯¹è±¡æ·»å ååºå¼ propertyãä¾å¦ï¼å¯¹äºï¼\n\nVue.set(vm.someObject, 'b', 2)\n\n\næ¨è¿å¯ä»¥ä½¿ç¨ vm.$set å®ä¾æ¹æ³ï¼è¿ä¹æ¯å¨å± Vue.set æ¹æ³çå«åï¼\n\nthis.$set(this.someObject,'b',2)\n\n\n * ç»dataå¯¹è±¡çæä¸ªå±æ§è®¾ç½®ä¸ºä¸ä¸ªæ°çå¯¹è±¡this.o = { name: 'xxx' }ï¼æ­¤å¯¹è±¡æ¯ååºå¼ç\n * ç»dataå¯¹è±¡çobjæ°å¢ä¸ä¸ªnameå±æ§æ¶ï¼this.obj.name = 'xxx'ï¼è¯¥å±æ§ä¸æ¯ååºå¼ç\n\nå¯¹äºæ°ç»\n\nObject.defineProperty ä¸è½çå¬æ°ç»çä¸äºæ¹æ³ï¼push/pop/spliceç­ç­æ¹ååæ°ç»çæ¹æ³ä¸è½è§¦åsetï¼éè¦è¿è¡æ°ç»æ¹æ³çéåãï¼Vue3ä¸­ä½¿ç¨proxyåä¸å­å¨è¿äºé®é¢ï¼\n\nå ä¸º Vue2.x çååºå¼æ¯éè¿ Object.defineProperty() å®ç°çï¼è¿ä¸ª api æ²¡åæ³çå¬æ°ç»é¿åº¦çååï¼ä¹å°±æ²¡åæ³çå¬æ°ç»çæ°å¢ï¼push/pop/spliceç­ä¹å°±ä¸è½è§¦åset\n\n\næ­¤å¤ Vue ä¸è½æ£æµä»¥ä¸æ°ç»çåå¨ï¼\n\n 1. å½ä½ å©ç¨ç´¢å¼ç´æ¥è®¾ç½®ä¸ä¸ªæ°ç»é¡¹æ¶ï¼ä¾å¦ï¼vm.items[indexOfItem] = newValue\n 2. å½ä½ ä¿®æ¹æ°ç»çé¿åº¦æ¶ï¼ä¾å¦ï¼vm.items.length = newLength\n\nä¸¾ä¸ªä¾å­ï¼\n\nvar vm = new Vue({\n  data: {\n    items: ['a', 'b', 'c']\n  }\n})\nvm.items[1] = 'x' // ä¸æ¯ååºæ§ç\nvm.items.length = 2 // ä¸æ¯ååºæ§ç\n\n\nä¸ºä»ä¹æ°ç»æ¹æ³å¯ä»¥éåï¼ä½æ¯ä¸å»çå¬æ°ç»å±æ§(ç´¢å¼ålength)å¢ï¼\n\n * æ§è½é®é¢ï¼æ°ç»æ°æ®å¯è½æå¾å¤\n\nä¸ºäºè§£å³è¿ä¸ªé®é¢ï¼ä»¥ä¸ä¸¤ç§æ¹å¼é½å¯ä»¥å®ç°å vm.items[indexOfItem] = newValue ç¸åçææï¼åæ¶ä¹å°å¨ååºå¼ç³»ç»åè§¦åç¶ææ´æ°ï¼\n\n// Vue.set\nVue.set(vm.items, indexOfItem, newValue)\n// Array.prototype.splice\nvm.items.splice(indexOfItem, 1, newValue)\n\n\nä½ ä¹å¯ä»¥ä½¿ç¨ vm.$set å®ä¾æ¹æ³ï¼è¯¥æ¹æ³æ¯å¨å±æ¹æ³ Vue.set çä¸ä¸ªå«åï¼\n\nvm.$set(vm.items, indexOfItem, newValue)\n\n\nä¸ºäºè§£å³ä¸çå¬æ°ç»é¿åº¦çé®é¢ï¼ä½ å¯ä»¥ä½¿ç¨ spliceåéåæ°ç»æ¹æ³ï¼\n\nvm.items.splice(newLength)\n\n\n * Vue.set å vm.$setåé¨æ¯åä¸ä¸ªæ¹æ³ï¼åçæ¯æå¨è§¦å notify\n\n  // è·å target ä¸­ç observer å¯¹è±¡\n  const ob = (target: any).__ob__\n  // å¦æ target æ¯ vue å®ä¾æè$data ç´æ¥è¿å\n  if (target._isVue || (ob && ob.vmCount)) {\n    return val\n  }\n  // å¦æ ob ä¸å­å¨ï¼target ä¸æ¯ååºå¼å¯¹è±¡ç´æ¥èµå¼\n  if (!ob) {\n    target[key] = val\n    return val\n  }\n  // æ key è®¾ç½®æååºå¼å±æ§\n  defineReactive(ob.value, key, val)\n  // åééç¥\n  ob.dep.notify()\n  return val\n}\n\n\n\n# ç»ä»¶æ¸²æè¿ç¨\n\né£ä¹ç©¶ç«æ¯å¦ä½è§¦åä¾èµå®ç°ååºå¼çå¢ï¼ä»ç»ä»¶æ¸²æé¶æ®µå¼å§è¯´èµ·\n\nvueæºç ç instance/init.js ä¸­æ¯åå§åçå¥å£ï¼å¶ä¸­åå§åä¸­é¤äºåå§åçå ä¸ªæ­¥éª¤ä»¥å¤ï¼å¨æåæè¿æ ·ä¸æ®µä»£ç ï¼è¦å®ç°çåè½æ¯æè½½å°elä¸ï¼è¦ä¹æ¯è¿è¡æ¶ærenderç´æ¥æè½½ï¼è¦ä¹å°template/elç¼è¯ä¸ä¸åæè½½\n\nif (vm.$options.el) {\n  vm.$mount(vm.$options.el)\n}\n\n\n * ä¸å±æä¸¤ä¸ª$mount,ç¬¬ä¸ä¸ªå®ä¹å¨entry-runtime-with-compiler.jsæä»¶ä¸­ï¼è¿æ¯å®æ´æå»ºçæ¬çå¥å£ï¼é¦åä¼å¤æ­ä¸ä¸å½åæ¯å¦ä¼ å¥äºrenderéé¡¹ï¼å¦ææ²¡æä¼ å¥çè¯ï¼å®ä¼å»è·åæä»¬çtemplateéé¡¹ï¼å¦ætemplateéé¡¹ä¹æ²¡æçè¯ï¼ä»ä¼æelä¸­çåå®¹ä½ä¸ºæä»¬çæ¨¡æ¿ï¼ç¶åææ¨¡æ¿ç¼è¯ærenderå½æ°ï¼å­å¨æä»¬çoptions.renderä¸­ï¼ä¼åçº§render > template > el\n * å¦ä¸ä¸ª$mountæ¯src/platforms/web/runtime/index.jsæä»¶ä¸­ç$mountæ¹æ³\n   * è¿è¡æ¶çæ¬çæè½½å¥å£ï¼å¯ä»¥ç´æ¥è°ç¨ï¼å ä¸ºè¿è¡æ¶å­å¨renderï¼ç´æ¥æè½½å°elä¸å³å¯\n   * å®æ´çæ¬ç$mountå½æ°çæåè°ç¨ï¼å ä¸ºå®æ´çæ¬ç»è¿templateç¼è¯ä¹åï¼ä¹æäºrender\n\nVue.prototype.$mount = function(\n    el?: string | Element,\n    hydrating?: boolean\n): Component {\n    // å¤æ­el, ä»¥åå®¿ä¸»ç¯å¢, ç¶åéè¿å·¥å·å½æ°queryéåelã\n    el = el && inBrowser ? query(el) : undefined\n    // æ§è¡çæ­£çæè½½å¹¶è¿å\n    return mountComponent(this, el, hydrating)\n}\n\n\n * æ¥ä¸æ¥è°ç¨mountComponent()ï¼é¦åä¼å¤æ­renderéé¡¹ï¼å¦ææ²¡ærenderéé¡¹ï¼ä¼æ¥åºè­¦å\n   * å¦ææä»¬ä¼ å¥äºtemplateæelï¼ç¶åè¿æ²¡ærenderï¼ä¼åè¯æä»¬å¦ææ¯è¿è¡æ¶çæ¬ä¸æ¯æç¼è¯å¨ã\n   * å¦åä¼è­¦åtemplate or render function not defined\n * æ¥ä¸æ¥ä¼è§¦åbeforeMountè¿ä¸ªçå½å¨æä¸­çé©å­å½æ°ï¼ä¹å°±æ¯å¼å§æè½½ä¹åã\n\nexport function mountComponent(\n    vm: Component, // ç»ä»¶å®ä¾vm\n    el: ?Element, // æè½½ç¹\n    hydrating?: boolean\n): Component {\n    // å¨ç»ä»¶å®ä¾å¯¹è±¡ä¸æ·»å $elå±æ§\n    // $elçå¼æ¯ç»ä»¶æ¨¡æ¿æ ¹åç´ çå¼ç¨\n    vm.$el = el\n    if (!vm.$options.render) {\n        // æ¸²æå½æ°ä¸å­å¨, è¿æ¶å°ä¼åå»ºä¸ä¸ªç©ºçvnodeå¯¹è±¡\n        vm.$options.render = createEmptyVNode\n        if (process.env.NODE_ENV !== \"production\") {\n            /* istanbul ignore if */\n            if (\n                (vm.$options.template &&\n                    vm.$options.template.charAt(0) !== \"#\") ||\n                vm.$options.el ||\n                el\n            ) {\n                warn(\n                    \"You are using the runtime-only build of Vue where the template \" +\n                        \"compiler is not available. Either pre-compile the templates into \"+\n                        \"render functions, or use the compiler-included build.\",\n                    vm\n                )\n            } else {\n                warn(\n                    \"Failed to mount component: template or render function not defined.\",\n                    vm\n                )\n            }\n        }\n    }\n    // è§¦å beforeMount çå½å¨æé©å­\n    callHook(vm, \"beforeMount\")\n\n\n * ç¶åå®ä¹äºupdateComponent()ï¼å¨è¿ä¸ªå½æ°ä¸­ï¼è°ç¨vm._renderåvm._updateï¼vm._renderçä½ç¨æ¯çæèæDOMï¼vm._updateçä½ç¨æ¯å°èæDOMè½¬æ¢æçå®DOMï¼å¹¶ä¸æè½½å°é¡µé¢ä¸ï¼è¿éåªæ¯å®ä¹\n * ç¶ååå»ºWatcherå¯¹è±¡ï¼å¨åå»ºWatcheræ¶ï¼ä¼ éäºupdateComponentè¿ä¸ªå½æ°ï¼è¿ä¸ªå½æ°æç»æ¯å¨Watcheråé¨è°ç¨çãå¨Watcheråé¨ä¼ç¨getæ¹æ³ï¼å½Watcheråå»ºå®æä¹å,ä¼è§¦åçå½å¨æä¸­çmountedé©å­å½æ°\n\nnew Watcher(vm, updateComponent, noop, {\n    before () {\n      if (vm._isMounted && !vm._isDestroyed) {\n        callHook(vm, 'beforeUpdate')\n      }\n    }\n  }, true /* isRenderWatcher */)\n\n// vm ï¼ä¸Watherå¯¹åºçVue Componentå®ä¾ï¼è¿ç§å¯¹åºå³ç³»éè¿Watherå»ç®¡ç\n// updateComponentï¼å¯ä»¥çè§£æVue Componentçæ´æ°å½æ°ï¼è°ç¨å®ä¾renderåupdateä¸¤ä¸ªæ¹æ³ï¼renderä½ç¨æ¯å°Vueå¯¹è±¡æ¸²ææèæDOM,updateæ¯éè¿èæDOMåå»ºæèæ´æ°çå®DOM\n\n\nä¸é¢è¯´å¨åå»º Watcher å®ä¾çæ¶åä¼è°ç¨getæ¹æ³ï¼å¨getæ¹æ³ä¸­ï¼ä¼è°ç¨updateComponent()ï¼è°ç¨å¶ä¸­ç_renderå½æ°æ¾å°ä¼ å¥æèç¼è¯çæçrenderå½æ°å»çæèæDOMï¼ç¶åè°ç¨_updateæ¹æ³å°èæDOMè½¬æ¢æçå®DOM\n\n * æ´å¤è¯¦ç»è¯·ç\n\nWatcher å®ä¾åä¸ºæ¸²æ watcher (render watcher),è®¡ç®å±æ§ watcher (computed watcher),ä¾¦å¬å¨ watcherï¼user watcherï¼ä¸ç§ï¼\n\n 1. initState æ¶,å¯¹ computed å±æ§åå§åæ¶,è§¦å computed watcher ä¾èµæ¶é\n 2. initState æ¶,å¯¹ä¾¦å¬å±æ§åå§åæ¶,è§¦å user watcher ä¾èµæ¶é\n 3. render()çè¿ç¨,è§¦å render watcher ä¾èµæ¶é\n 4. re-render æ¶,vm.render()åæ¬¡æ§è¡,ä¼ç§»é¤ææ subs ä¸­ç watcer çè®¢é,éæ°èµå¼ã\n\nwatcherç±»\n\nclass Watcher {\n    constructor (\n    vm: Component, \n    expOrFn: string | Function,\n    cb: Function,\n    options?: ?Object,\n    isRenderWatcher?: boolean\n  ) {\n    this.vm = vm\n    if (isRenderWatcher) {\n      // å°æ¸²æå½æ°çè§å¯èå­å¥_watcher\n      vm._watcher = this\n    }\n    // å°ææè§å¯èpushå°_watchersåè¡¨\n    vm._watchers.push(this)\n  }\n    \n  get () { // è§¦ååå¼æä½ï¼è¿èè§¦åå±æ§çgetter\n    pushTarget(this) // Dep ä¸­æå°çï¼ç» Dep.target èµå¼ watcher\n    let value\n    const vm = this.vm\n    try {\n      // æ ¸å¿ï¼è¿è¡è§å¯èè¡¨è¾¾å¼ï¼è¿è¡åå¼ï¼è§¦ågetterï¼ä»èå¨é­åä¸­æ·»å watcher\n      value = this.getter.call(vm, vm)\n    } catch (e) {\n      if (this.user) {\n        handleError(e, vm, `getter for watcher \"${this.expression}\"`)\n      } else {\n        throw e\n      }\n    } finally {\n      if (this.deep) { // å¦æè¦æ·±åº¦çæµï¼åå¯¹ value æ§è¡æä½\n        traverse(value)\n      }\n      // æ¸çä¾èµæ¶é\n      popTarget()\n      this.cleanupDeps()\n    }\n    return value\n  }\n\n  // å½ä¾èµååæ¶ï¼è§¦åæ´æ°\n  update () {\n    ...\n  }\n}\n\n\n\n# ååºå¼çæ´ä½æµç¨\n\nVueååºå¼åç-çè§£ObserverãDepãWatcher\n\n * ç»ä»¶å®ä¾åå§åè¿ç¨ä¸­ï¼walk æ¹æ³éå data å©ç¨Object.definePropertyä¸ºæ¯ä¸ªå±æ§æ·»å getterãsetteræ¹æ³ï¼ç¨äºæ¶éä¾èµåè§¦åä¾èµï¼æ¯ä¸ªå±æ§é½ä¼æä¸ä¸ª Dep ç¨æ¥æ¶éä¾èµã\n * ç»ä»¶æ¸²æè¿ç¨ä¸­ï¼mountComponentæ¹æ³ï¼ï¼åå§åç»ä»¶èªå·±ç watcher å¯¹è±¡ï¼å½å¤çéè¿ watcher è¯»åæ°æ®æ¶ï¼ä¼è§¦å getter ä»èå° watcher æ·»å å° Dep ä¸­ãwatcher å¯ä»¥æ¯æ¸²æ watcherãcomputed watcherãwatch watcher\n * data ä¸­çå±æ§ååï¼ä¼è°ç¨ setter ä¸­çæ¹æ³ï¼Dep.notifyï¼éç¥æ¶éå°ç watcher æ§è¡ update æ¹æ³ã\n * watcher æ¶å°ä¾èµååçæ¶æ¯ï¼éæ°æ¸²æèædomï¼å®ç°é¡µé¢ååº\n\n\n# Vue 3.0 Proxy\n\n> Object.defineProperty åªè½å«æå¯¹è±¡çå±æ§,å æ­¤æä»¬éè¦å¯¹æ¯ä¸ªå¯¹è±¡çæ¯ä¸ªå±æ§è¿è¡éåãVue 2.x é,æ¯éè¿ éå½ + éå data å¯¹è±¡æ¥å®ç°å¯¹æ°æ®ççæ§ç,å¦æå±æ§å¼ä¹æ¯å¯¹è±¡é£ä¹éè¦æ·±åº¦éå,æ¾ç¶å¦æè½å«æä¸ä¸ªå®æ´çå¯¹è±¡æ¯ææ¯æ´å¥½çéæ©ãProxy å¯ä»¥å«ææ´ä¸ªå¯¹è±¡,å¹¶è¿åä¸ä¸ªæ°çå¯¹è±¡ãProxy ä¸ä»å¯ä»¥ä»£çå¯¹è±¡,è¿å¯ä»¥ä»£çæ°ç»ãè¿å¯ä»¥ä»£çå¨æå¢å çå±æ§ã\n\nProxyå¯ä»¥çè§£æï¼å¨ç®æ å¯¹è±¡ä¹åæ¶è®¾ä¸å± \"æ¦æª\"ï¼å½å¤çå¯¹è¯¥å¯¹è±¡è®¿é®çæ¶åï¼é½å¿é¡»ç»è¿è¿å±æ¦æªï¼èProxyå°±åå½äºè¿ç§æºå¶ï¼ç±»ä¼¼äºä»£ççå«ä¹ï¼å®å¯ä»¥å¯¹å¤çè®¿é®å¯¹è±¡ä¹åè¿è¡è¿æ»¤åæ¹åè¯¥å¯¹è±¡ã\n\n> proxyä¸å­å¨Object.defineProperty()çä¸ä¸ªé®é¢,å¹¶ä¸Proxyæå¤è¾¾13ç§æ¦æªæ¹æ³\n\nvar proxy = new Proxy(target, handler);\n\n\n> new Proxy()è¡¨ç¤ºçæä¸ä¸ªProxyå®ä¾ï¼targetåæ°è¡¨ç¤ºæè¦æ¦æªçç®æ å¯¹è±¡ï¼handleråæ°ä¹æ¯ä¸ä¸ªå¯¹è±¡ï¼ç¨æ¥å®å¶æ¦æªè¡ä¸º\n\nlet obj = {\n  name: 'Eason',\n  age: 30\n}\nlet handler = {\n  get (target, key, receiver) {\n    console.log('get', key)                   // å¦æä»ä¹æä½ä¹æ²¡æå°±ç´æ¥return Reflect..\n    // return target[key]\n    return Reflect.get(target, key, receiver) //å½æ°å¼è¡ä¸º\n  },\n  set (target, key, value, receiver) {\n    console.log('set', key, value)\n    // target[key] = value\n    return Reflect.set(target, key, value, receiver)\n  }\n}\nlet proxy = new Proxy(obj, handler)\n\nproxy.name = 'Zoe' // set name Zoe\nproxy.age = 18     // set age 18\nproxy.name         //22 get name\n\t              //\"Eason\"\n\n\n * proxy è¯»åå±æ§çå¼æ¶ï¼å®éä¸æ§è¡çæ¯ Handler.get ï¼å¨æ§å¶å°è¾åºä¿¡æ¯ï¼å¹¶ä¸è¯»åè¢«ä»£çå¯¹è±¡ obj çå±æ§ã\n * å¨ proxy è®¾ç½®å±æ§å¼æ¶ï¼å®éä¸æ§è¡çæ¯ Handler.set ï¼å¨æ§å¶å°è¾åºä¿¡æ¯ï¼å¹¶ä¸è®¾ç½®è¢«ä»£çå¯¹è±¡ obj çå±æ§çå¼\n\n> Reflectæ¯ä¸ä¸ªåç½®çå¯¹è±¡ï¼æ²¡ææé å½æ°ï¼ææçå±æ§ä¸æ¹æ³é½æ¯éæçï¼å°±åMathå¯¹è±¡ï¼\n> \n> Reflect.get():è·åå¯¹è±¡èº«ä¸æä¸ªå±æ§çå¼ï¼ç±»ä¼¼äº target[name]ã\n> \n> Reflect.set():å°å¼åéç»å±æ§çå½æ°,è¿åä¸ä¸ªBooleanï¼å¦ææ´æ°æåï¼åè¿åtrueã\n> \n> Reflectå¯¹è±¡çéææ¹æ³åProxyå¯¹è±¡çéææ¹æ³ä¸ä¸å¯¹åº ï¼ä¸å±13ç§\n> \n> Reflectè®¾è®¡çç®çæ¯ä¸ºäºä¼åObjectçä¸äºæä½æ¹æ³ä»¥ååççè¿åObjectæä½è¿åçç»æï¼å¯¹äºä¸äºå½ä»¤å¼çObjectè¡ä¸ºï¼Reflectå¯¹è±¡å¯ä»¥å°å¶åä¸ºå½æ°å¼çè¡ä¸º\n\nconst obj = {\n    name: 'ace',\n    age: 18\n}\n\nconsole.log('name' in obj)\nconsole.log(delete obj['age'])\nconsole.log(Object.keys(obj))\n\nconsole.log(Reflect.has(obj, 'name'))\nconsole.log(Reflect.deleteProperty(obj, 'age'))\nconsole.log(Reflect.ownKeys(obj))\n\n\nReflect.apply(target, thisArgument, argumentsList)\n// å¯¹ä¸ä¸ªå½æ°è¿è¡è°ç¨æä½ï¼åæ¶å¯ä»¥ä¼ å¥ä¸ä¸ªæ°ç»ä½ä¸ºè°ç¨åæ°ãå Function.prototype.apply() åè½ç±»ä¼¼ã\n\nReflect.construct(target, argumentsList[, newTarget])\n// å¯¹æé å½æ°è¿è¡ new æä½ï¼ç¸å½äºæ§è¡ new target(...args)ã\n\nReflect.defineProperty(target, propertyKey, attributes)\n// å Object.defineProperty() ç±»ä¼¼ãå¦æè®¾ç½®æåå°±ä¼è¿å true\n\nReflect.deleteProperty(target, propertyKey)\n//ä½ä¸ºå½æ°çdeleteæä½ç¬¦ï¼ç¸å½äºæ§è¡ delete target[name]ã\n\nReflect.get(target, propertyKey[, receiver])\n// è·åå¯¹è±¡èº«ä¸æä¸ªå±æ§çå¼ï¼ç±»ä¼¼äº target[name]ã\n\nReflect.getOwnPropertyDescriptor(target, propertyKey)\n// ç±»ä¼¼äº Object.getOwnPropertyDescriptor()ãå¦æå¯¹è±¡ä¸­å­å¨è¯¥å±æ§ï¼åè¿åå¯¹åºçå±æ§æè¿°ç¬¦,  å¦åè¿å undefined.\n\nReflect.getPrototypeOf(target)\n// ç±»ä¼¼äº Object.getPrototypeOf()ã\n\nReflect.has(target, propertyKey)\n// å¤æ­ä¸ä¸ªå¯¹è±¡æ¯å¦å­å¨æä¸ªå±æ§ï¼å in è¿ç®ç¬¦ çåè½å®å¨ç¸åã\n\nReflect.isExtensible(target)\n// ç±»ä¼¼äº Object.isExtensible().\n\nReflect.ownKeys(target)\n// è¿åä¸ä¸ªåå«ææèªèº«å±æ§ï¼ä¸åå«ç»§æ¿å±æ§ï¼çæ°ç»ã(ç±»ä¼¼äº Object.keys(), ä½ä¸ä¼åenumerableå½±å).\n\nReflect.preventExtensions(target)\n// ç±»ä¼¼äº Object.preventExtensions()ãè¿åä¸ä¸ªBooleanã\n\nReflect.set(target, propertyKey, value[, receiver])\n// å°å¼åéç»å±æ§çå½æ°ãè¿åä¸ä¸ªBooleanï¼å¦ææ´æ°æåï¼åè¿åtrueã\n\nReflect.setPrototypeOf(target, prototype)\n// è®¾ç½®å¯¹è±¡ååçå½æ°. è¿åä¸ä¸ª Booleanï¼ å¦ææ´æ°æåï¼åè¿åtrueã\n\n\n\n# Proxy ä¸­ç receiver\n\nProxy å Reflect\n\n> å¨ Reflect.get çåºæ¯ä¸ï¼receiver å¯ä»¥æ¹åè®¡ç®å±æ§ä¸­ this çæåã\n\nvar target = {\n  get a() { return this.c }\n}\n\nReflect.get(target, 'a', { c: 4 }) // 4\n\n\n> receiveræ¯æ¥åèçææï¼è¡¨ç¤ºè°ç¨å¯¹åºå±æ§ææ¹æ³çä¸»ä½å¯¹è±¡ï¼éå¸¸æåµä¸ï¼receiveråæ°æ¯æ éä½¿ç¨çï¼ä½æ¯å¦æåçäºç»§æ¿ï¼ä¸ºäºæç¡®è°ç¨ä¸»ä½ï¼receiveråæ°å°±éè¦åºé©¬äºã\n\nlet user = {\n  _name: \"Guest\",\n  get name() {\n    return this._name;\n  }\n};\n\nlet userProxy = new Proxy(user, {\n  get(target, prop, receiver) {\n    return target[prop]; // (*) target = user\n    return Reflect.get(target, prop, receiver); // receiver = admin\n  }\n});\n\nlet admin = {\n  __proto__: userProxy,\n  _name: \"Admin\"\n};\n\n// ææè¾åºï¼Admin\nalert(admin.name); // è¾åºï¼Guest (?!?)\n\n\n * target ââ æ¯ç®æ å¯¹è±¡ï¼è¯¥å¯¹è±¡è¢«ä½ä¸ºç¬¬ä¸ä¸ªåæ°ä¼ éç» new Proxyï¼\n * prop ââ ç®æ å±æ§åï¼\n * receiver ââ å¦æç®æ å±æ§æ¯ä¸ä¸ª getter è®¿é®å¨å±æ§ï¼å receiver å°±æ¯æ¬æ¬¡è¯»åå±æ§æå¨ç this å¯¹è±¡ãéå¸¸ï¼è¿å°±æ¯ proxy å¯¹è±¡æ¬èº«ï¼æèï¼å¦ææä»¬ä» proxy ç»§æ¿ï¼åæ¯ä»è¯¥ proxy ç»§æ¿çå¯¹è±¡ï¼ã",normalizedContent:"# vueååºå¼åçè¯¦è§£\n\n\n# åå¸è®¢éæ¨¡å¼\n\n * è®¢éè\n * åå¸è\n * ä¿¡å·ä¸­å¿\n\n> åå®å­å¨ä¸ä¸ªä¿¡å·ä¸­å¿ï¼æä¸ªä»»å¡æ§è¡å®æï¼å°±åä¿¡å·ä¸­å¿åå¸ä¸ä¸ªä¿¡å·ï¼å¶ä»ä»»å¡å¯ä»¥åä¿¡å·ä¸­å¿è®¢éè¿ä¸ªä¿¡å·ï¼ä»èç¥éèªå·±ä»ä¹æ¶åèªå·±å¯ä»¥å¼å§æ§è¡ã\n\n\n# vueçèªå®ä¹äºä»¶\n\nlet vm = new vue()\n\n// æ³¨åäºä»¶\nvm.$on('datachange', ()=>{\n    console.log('datachange')\n})\n\nvm.$on('datachange', ()=>{\n    console.log('datachange1')\n})\n\n// åèµ·äºä»¶\nvm.$emit('datachange')\n\n\n\n# åå¼ç»ä»¶éä¿¡è¿ç¨\n\nä¸¤ä¸ªç»ä»¶ä¸ç¸äºä¾èµï¼å³åå¸èåè®¢éèè¢«äºä»¶ä¸­å¿éç¦»\n\n// ä¿¡å·ä¸­å¿\nlet eventhub = new vue()\n\n// componenta.vue\n// åå¸è\naddtodo: function () {\n    // åå¸äºä»¶\n    eventhub.$emit('add-todo', { text: this.newtodotext })\n    this.newtodotext = ''\n}\n// componentb.vue\n// è®¢éè\ncreated: function () {\n    // è®¢éäºä»¶\n    eventhub.$on('add-todo', this.addtodo)\n}\n\n\n\n# æ¨¡æå®ç°vueçèªå®ä¹äºä»¶\n\n// ç±»åé¨å­å¨ä¸ä¸ªå¯¹è±¡ï¼åå«äºä»¶ååå¯¹åºçè§¦åå½æ°\n// { click: [fn1, fn2], change: fn }\nclass eventemitter {\n  constructor () {\n    this.subs = object.create(null)\n  }\n  // æ³¨åäºä»¶\n  $on (eventtype, handler) {\n    this.subs[eventtype] = this.subs[eventtype] || []\n    this.subs[eventtype].push(handler)\n  }\n\n  // è§¦åäºä»¶\n  $emit (eventtype) {\n    if (this.subs[eventtype]) {\n      this.subs[eventtype].foreach(handler => handler())\n    }\n  }\n\n  $off(eventtype) {\n    this.subs[eventtype] = []\n  }\n}\n\n// æµè¯\nlet em = new eventemitter() // ä¿¡å·ä¸­å¿\nem.$on('click', () => {\n  console.log('click1')\n})\nem.$on('click', () => {\n  console.log('click2')\n})\nem.$emit('click')\n\n\nobject.create(null) å {} çåºå«\n\n\n# è§å¯èæ¨¡å¼\n\n * è§å¯è -- watcher\n   * update()ï¼å½äºä»¶åçæ¶ï¼å·ä½è¦åçäºæ\n * åå¸è -- dep\n   * subsæ°ç»ï¼å­å¨ææè§å¯è\n   * addsub()ï¼æ·»å è§å¯è\n   * notify()ï¼å½äºä»¶åçï¼è°ç¨ææè§å¯èçupdateæ¹æ³\n * æ²¡æäºä»¶ä¸­å¿\n\n    // åå¸è-ç®æ \n    class dep {\n      constructor () {\n        // è®°å½ææçè®¢éè\n        this.subs = []\n      }\n      // æ·»å è®¢éè\n      addsub (sub) {\n        if (sub && sub.update) {\n          this.subs.push(sub)\n        }\n      }\n      // åå¸éç¥\n      notify () {\n        this.subs.foreach(sub => sub.update())\n      }\n    }\n\n    // è®¢éè-è§å¯è\n    class watcher {\n      update () {\n        console.log('update')\n      }\n    }\n\n    // æµè¯\n    let dep = new dep()\n    let watcher = new watcher()\n\n    dep.addsub(watcher)\n    dep.notify()\n\n\n\n# vueå®ä¾åå§åè¿ç¨\n\nå¨ vue å®ä¾åå§åçæ¶åä¼è°ç¨_initæ¹æ³ï¼_initæ¹æ³ä¸­æå¾å¤åå§åçè¿ç¨ï¼æ¯å¦\n\n//åå§åçå½å¨æ\ninitlifecycle(vm)\n//åå§åäºä»¶\ninitevents(vm)\n//åå§årender\ninitrender(vm)\n// ...\ninitstate(vm)\n\n\nè¿éçéç¹å°±æ¯initstateæ¹æ³ï¼initstateä¸­ä¹åå§åäºå¾å¤ï¼å¦ä¸ï¼\n\n  //åå§åprops\n  if (opts.props) initprops(vm, opts.props)\n  //åå§åmethods\n  if (opts.methods) initmethods(vm, opts.methods)\n  //åå§ådataï¼ï¼ï¼åæ¬¡åéç¹ï¼ï¼ï¼\n  if (opts.data) {\n    initdata(vm)\n  } else {\n    //å³ä½¿æ²¡ædataï¼ä¹è¦è°ç¨observeè§æµ_dataå¯¹è±¡\n    observe(vm._data = {}, true /* asrootdata */)\n  }\n\n\nè¿éçéç¹å°±æ¯initdataæ¹æ³ï¼å¨å¶åé¨è°ç¨äºobserveæ¹æ³ï¼å°è¿éææ¯çæ­£ååºå¼çå¼å§\n\n  //å°vmä¸­çå±æ§è½¬è³vm._dataä¸­\n  proxy(vm, `_data`, key)\n  //è°ç¨observeè§æµdataå¯¹è±¡\n  observe(data, true /* asrootdata */)\n\n\nobserveæ¯ä¸ä¸ªå·¥åå½æ°ï¼ç¨äºä¸ºå¯¹è±¡çæä¸ä¸ªobserveå®ä¾ãèçæ­£å°å¯¹è±¡è½¬åä¸ºååºå¼å¯¹è±¡çæ¯observeå·¥åå½æ°è¿åçobserveå®ä¾ã\n\nexport class observer {\n  constructor (value: any) {\n    //å¯¹è±¡æ¬èº«\n    this.value = value\n    //ä¾èµæ¶éå¨\n    this.dep = new dep()\n    this.vmcount = 0\n    //ä¸ºå¯¹è±¡æ·»å __ob__å±æ§\n    def(value, '__ob__', this)\n    //è¥å¯¹è±¡æ¯arrayç±»å\n    if (array.isarray(value)) {\n      ...\n    } else {\n      //è¥å¯¹è±¡æ¯objectç±»å\n      ...\n    }\n  }\n\n\nä»ä»£ç åæï¼observeæé å½æ°åäºä¸ä»¶äºï¼\n\n * ä¸ºå¯¹è±¡æ·»å  __ob__å±æ§ï¼ __ob__ä¸­åå«valueæ°æ®å¯¹è±¡æ¬èº«ãdepä¾èµæ¶éå¨ãvmcountãæ°æ®ç»è¿è¿ä¸ªæ­¥éª¤ä»¥åçååå¦ä¸ï¼\n\n//åæ°æ®\n  const data = {\n        name: 'summer'\n  }\n  //åååæ°æ®\n  const data = {\n        name: 'summer',\n        __ob__: {\n            value: data, //dataæ°æ®æ¬èº«\n            dep: new dep(), //depä¾èµæ¶éå¨\n            vmcount: 0\n        }\n  }\n\n\n * è¥å¯¹è±¡æ¯arrayç±»åï¼åè¿è¡arrayç±»åæä½\n * è¥å¯¹è±¡æ¯objectç±»åï¼åè¿è¡objectç±»åæä½\n\n\n# 1. æ°æ®æ¯objectç±»å\n\nå½æ°æ®æ¯objectç±»åæ¶ï¼è°ç¨äºä¸ä¸ªwalkæ¹æ³ï¼å¨walkæ¹æ³ä¸­éåæ°æ®çææå±æ§ï¼å¹¶è°ç¨definereactiveæ¹æ³ã\n\nexport function definereactive (...) {\n  //depå­å¨ä¾èµçåéï¼æ¯ä¸ªå±æ§å­æ®µé½æä¸ä¸ªå±äºèªå·±çdepï¼ç¨äºæ¶éå±äºè¯¥å­æ®µçä¾èµ\n  const dep = new dep()\n\n  //ä¸ºå±æ§å å¥getter/setteræ¹æ³\n  object.defineproperty(obj, key, {\n    enumerable: true,\n    configurable: true,\n    get () {\n      // æ¶éä¾èµï¼targetä¼å¨watcherç±»ä¸­å®ä¹\n      dep.target && dep.addsub(dep.target)\n      return val\n    },\n    set (newvalue) {\n      if (newvalue === val) {\n        return\n      }\n       val = newvalue\n       that.walk(newvalue)\n       // åééç¥\n       dep.notify()\n    }\n  })\n}\n\n\nå¨getterä¸­æ¶éä¾èµï¼å¨setterä¸­è§¦åä¾èµã\n\n * å½å¤çéè¿watcherè¯»åæ°æ®æ¶ï¼ä¼è§¦ågetterä»èå°watcheræ·»å å°ä¾èµä¸­ã\n * å¨ä¿®æ¹å¯¹è±¡çå¼çæ¶åï¼ä¼è§¦åå¯¹åºçsetterï¼ setteréç¥ä¹åä¾èµæ¶éå¾å°ç dep ä¸­çæ¯ä¸ä¸ª watcherï¼åè¯å®ä»¬èªå·±çå¼æ¹åäºï¼éè¦éæ°æ¸²æè§å¾ãè¿æ¶åè¿äº watcherå°±ä¼å¼å§è°ç¨ update æ¥æ´æ°è§å¾ã\n\n\n# 2. æ°æ®æ¯arrayç±»å\n\nè°ç¨arraymethodsæ¦æªä¿®æ¹æ°ç»æ¹æ³ï¼\n\n * éè¦æ¦æªçä¿®æ¹æ°ç»çæ¹æ³æï¼pushãpopãshiftãunshiftãspliceãsortãreverse\n * å½æ°ç»ææ°å¢åç´ æ¶ï¼ä½¿ç¨observearrayå¯¹æ°å¢çåç´ è¿è¡è§æµ\n\nå¯¹äºå¯¹è±¡\n\nvue æ æ³æ£æµ property çæ·»å æç§»é¤ãè¿æ¯å ä¸º vue éè¿object.definepropertyæ¥å°å¯¹è±¡çkeyè½¬æ¢ægetter/setterçå½¢å¼æ¥è¿½è¸ªååï¼ä½getter/setteråªè½è¿½è¸ªä¸ä¸ªæ°æ®æ¯å¦è¢«ä¿®æ¹ï¼æ æ³è¿½è¸ªæ°å¢å±æ§åå é¤å±æ§ãç±äº vue ä¼å¨åå§åå®ä¾æ¶å¯¹ property æ§è¡ getter/setter è½¬åï¼æä»¥ property å¿é¡»å¨ data å¯¹è±¡ä¸å­å¨æè½è®© vue å°å®è½¬æ¢ä¸ºååºå¼çãä¾å¦ï¼\n\nvar vm = new vue({\n  data:{\n    a:1\n  }\n})\n\n// `vm.a` æ¯ååºå¼ç\n\nvm.b = 2\n// `vm.b` æ¯éååºå¼ç\n\n\nå¯¹äºå·²ç»åå»ºçå®ä¾ï¼vue ä¸åè®¸å¨ææ·»å æ ¹çº§å«çååºå¼ propertyãä½æ¯ï¼å¯ä»¥ä½¿ç¨ vue.set(object, propertyname, value) æ¹æ³ååµå¥å¯¹è±¡æ·»å ååºå¼ propertyãä¾å¦ï¼å¯¹äºï¼\n\nvue.set(vm.someobject, 'b', 2)\n\n\næ¨è¿å¯ä»¥ä½¿ç¨ vm.$set å®ä¾æ¹æ³ï¼è¿ä¹æ¯å¨å± vue.set æ¹æ³çå«åï¼\n\nthis.$set(this.someobject,'b',2)\n\n\n * ç»dataå¯¹è±¡çæä¸ªå±æ§è®¾ç½®ä¸ºä¸ä¸ªæ°çå¯¹è±¡this.o = { name: 'xxx' }ï¼æ­¤å¯¹è±¡æ¯ååºå¼ç\n * ç»dataå¯¹è±¡çobjæ°å¢ä¸ä¸ªnameå±æ§æ¶ï¼this.obj.name = 'xxx'ï¼è¯¥å±æ§ä¸æ¯ååºå¼ç\n\nå¯¹äºæ°ç»\n\nobject.defineproperty ä¸è½çå¬æ°ç»çä¸äºæ¹æ³ï¼push/pop/spliceç­ç­æ¹ååæ°ç»çæ¹æ³ä¸è½è§¦åsetï¼éè¦è¿è¡æ°ç»æ¹æ³çéåãï¼vue3ä¸­ä½¿ç¨proxyåä¸å­å¨è¿äºé®é¢ï¼\n\nå ä¸º vue2.x çååºå¼æ¯éè¿ object.defineproperty() å®ç°çï¼è¿ä¸ª api æ²¡åæ³çå¬æ°ç»é¿åº¦çååï¼ä¹å°±æ²¡åæ³çå¬æ°ç»çæ°å¢ï¼push/pop/spliceç­ä¹å°±ä¸è½è§¦åset\n\n\næ­¤å¤ vue ä¸è½æ£æµä»¥ä¸æ°ç»çåå¨ï¼\n\n 1. å½ä½ å©ç¨ç´¢å¼ç´æ¥è®¾ç½®ä¸ä¸ªæ°ç»é¡¹æ¶ï¼ä¾å¦ï¼vm.items[indexofitem] = newvalue\n 2. å½ä½ ä¿®æ¹æ°ç»çé¿åº¦æ¶ï¼ä¾å¦ï¼vm.items.length = newlength\n\nä¸¾ä¸ªä¾å­ï¼\n\nvar vm = new vue({\n  data: {\n    items: ['a', 'b', 'c']\n  }\n})\nvm.items[1] = 'x' // ä¸æ¯ååºæ§ç\nvm.items.length = 2 // ä¸æ¯ååºæ§ç\n\n\nä¸ºä»ä¹æ°ç»æ¹æ³å¯ä»¥éåï¼ä½æ¯ä¸å»çå¬æ°ç»å±æ§(ç´¢å¼ålength)å¢ï¼\n\n * æ§è½é®é¢ï¼æ°ç»æ°æ®å¯è½æå¾å¤\n\nä¸ºäºè§£å³è¿ä¸ªé®é¢ï¼ä»¥ä¸ä¸¤ç§æ¹å¼é½å¯ä»¥å®ç°å vm.items[indexofitem] = newvalue ç¸åçææï¼åæ¶ä¹å°å¨ååºå¼ç³»ç»åè§¦åç¶ææ´æ°ï¼\n\n// vue.set\nvue.set(vm.items, indexofitem, newvalue)\n// array.prototype.splice\nvm.items.splice(indexofitem, 1, newvalue)\n\n\nä½ ä¹å¯ä»¥ä½¿ç¨ vm.$set å®ä¾æ¹æ³ï¼è¯¥æ¹æ³æ¯å¨å±æ¹æ³ vue.set çä¸ä¸ªå«åï¼\n\nvm.$set(vm.items, indexofitem, newvalue)\n\n\nä¸ºäºè§£å³ä¸çå¬æ°ç»é¿åº¦çé®é¢ï¼ä½ å¯ä»¥ä½¿ç¨ spliceåéåæ°ç»æ¹æ³ï¼\n\nvm.items.splice(newlength)\n\n\n * vue.set å vm.$setåé¨æ¯åä¸ä¸ªæ¹æ³ï¼åçæ¯æå¨è§¦å notify\n\n  // è·å target ä¸­ç observer å¯¹è±¡\n  const ob = (target: any).__ob__\n  // å¦æ target æ¯ vue å®ä¾æè$data ç´æ¥è¿å\n  if (target._isvue || (ob && ob.vmcount)) {\n    return val\n  }\n  // å¦æ ob ä¸å­å¨ï¼target ä¸æ¯ååºå¼å¯¹è±¡ç´æ¥èµå¼\n  if (!ob) {\n    target[key] = val\n    return val\n  }\n  // æ key è®¾ç½®æååºå¼å±æ§\n  definereactive(ob.value, key, val)\n  // åééç¥\n  ob.dep.notify()\n  return val\n}\n\n\n\n# ç»ä»¶æ¸²æè¿ç¨\n\né£ä¹ç©¶ç«æ¯å¦ä½è§¦åä¾èµå®ç°ååºå¼çå¢ï¼ä»ç»ä»¶æ¸²æé¶æ®µå¼å§è¯´èµ·\n\nvueæºç ç instance/init.js ä¸­æ¯åå§åçå¥å£ï¼å¶ä¸­åå§åä¸­é¤äºåå§åçå ä¸ªæ­¥éª¤ä»¥å¤ï¼å¨æåæè¿æ ·ä¸æ®µä»£ç ï¼è¦å®ç°çåè½æ¯æè½½å°elä¸ï¼è¦ä¹æ¯è¿è¡æ¶ærenderç´æ¥æè½½ï¼è¦ä¹å°template/elç¼è¯ä¸ä¸åæè½½\n\nif (vm.$options.el) {\n  vm.$mount(vm.$options.el)\n}\n\n\n * ä¸å±æä¸¤ä¸ª$mount,ç¬¬ä¸ä¸ªå®ä¹å¨entry-runtime-with-compiler.jsæä»¶ä¸­ï¼è¿æ¯å®æ´æå»ºçæ¬çå¥å£ï¼é¦åä¼å¤æ­ä¸ä¸å½åæ¯å¦ä¼ å¥äºrenderéé¡¹ï¼å¦ææ²¡æä¼ å¥çè¯ï¼å®ä¼å»è·åæä»¬çtemplateéé¡¹ï¼å¦ætemplateéé¡¹ä¹æ²¡æçè¯ï¼ä»ä¼æelä¸­çåå®¹ä½ä¸ºæä»¬çæ¨¡æ¿ï¼ç¶åææ¨¡æ¿ç¼è¯ærenderå½æ°ï¼å­å¨æä»¬çoptions.renderä¸­ï¼ä¼åçº§render > template > el\n * å¦ä¸ä¸ª$mountæ¯src/platforms/web/runtime/index.jsæä»¶ä¸­ç$mountæ¹æ³\n   * è¿è¡æ¶çæ¬çæè½½å¥å£ï¼å¯ä»¥ç´æ¥è°ç¨ï¼å ä¸ºè¿è¡æ¶å­å¨renderï¼ç´æ¥æè½½å°elä¸å³å¯\n   * å®æ´çæ¬ç$mountå½æ°çæåè°ç¨ï¼å ä¸ºå®æ´çæ¬ç»è¿templateç¼è¯ä¹åï¼ä¹æäºrender\n\nvue.prototype.$mount = function(\n    el?: string | element,\n    hydrating?: boolean\n): component {\n    // å¤æ­el, ä»¥åå®¿ä¸»ç¯å¢, ç¶åéè¿å·¥å·å½æ°queryéåelã\n    el = el && inbrowser ? query(el) : undefined\n    // æ§è¡çæ­£çæè½½å¹¶è¿å\n    return mountcomponent(this, el, hydrating)\n}\n\n\n * æ¥ä¸æ¥è°ç¨mountcomponent()ï¼é¦åä¼å¤æ­renderéé¡¹ï¼å¦ææ²¡ærenderéé¡¹ï¼ä¼æ¥åºè­¦å\n   * å¦ææä»¬ä¼ å¥äºtemplateæelï¼ç¶åè¿æ²¡ærenderï¼ä¼åè¯æä»¬å¦ææ¯è¿è¡æ¶çæ¬ä¸æ¯æç¼è¯å¨ã\n   * å¦åä¼è­¦åtemplate or render function not defined\n * æ¥ä¸æ¥ä¼è§¦åbeforemountè¿ä¸ªçå½å¨æä¸­çé©å­å½æ°ï¼ä¹å°±æ¯å¼å§æè½½ä¹åã\n\nexport function mountcomponent(\n    vm: component, // ç»ä»¶å®ä¾vm\n    el: ?element, // æè½½ç¹\n    hydrating?: boolean\n): component {\n    // å¨ç»ä»¶å®ä¾å¯¹è±¡ä¸æ·»å $elå±æ§\n    // $elçå¼æ¯ç»ä»¶æ¨¡æ¿æ ¹åç´ çå¼ç¨\n    vm.$el = el\n    if (!vm.$options.render) {\n        // æ¸²æå½æ°ä¸å­å¨, è¿æ¶å°ä¼åå»ºä¸ä¸ªç©ºçvnodeå¯¹è±¡\n        vm.$options.render = createemptyvnode\n        if (process.env.node_env !== \"production\") {\n            /* istanbul ignore if */\n            if (\n                (vm.$options.template &&\n                    vm.$options.template.charat(0) !== \"#\") ||\n                vm.$options.el ||\n                el\n            ) {\n                warn(\n                    \"you are using the runtime-only build of vue where the template \" +\n                        \"compiler is not available. either pre-compile the templates into \"+\n                        \"render functions, or use the compiler-included build.\",\n                    vm\n                )\n            } else {\n                warn(\n                    \"failed to mount component: template or render function not defined.\",\n                    vm\n                )\n            }\n        }\n    }\n    // è§¦å beforemount çå½å¨æé©å­\n    callhook(vm, \"beforemount\")\n\n\n * ç¶åå®ä¹äºupdatecomponent()ï¼å¨è¿ä¸ªå½æ°ä¸­ï¼è°ç¨vm._renderåvm._updateï¼vm._renderçä½ç¨æ¯çæèædomï¼vm._updateçä½ç¨æ¯å°èædomè½¬æ¢æçå®domï¼å¹¶ä¸æè½½å°é¡µé¢ä¸ï¼è¿éåªæ¯å®ä¹\n * ç¶ååå»ºwatcherå¯¹è±¡ï¼å¨åå»ºwatcheræ¶ï¼ä¼ éäºupdatecomponentè¿ä¸ªå½æ°ï¼è¿ä¸ªå½æ°æç»æ¯å¨watcheråé¨è°ç¨çãå¨watcheråé¨ä¼ç¨getæ¹æ³ï¼å½watcheråå»ºå®æä¹å,ä¼è§¦åçå½å¨æä¸­çmountedé©å­å½æ°\n\nnew watcher(vm, updatecomponent, noop, {\n    before () {\n      if (vm._ismounted && !vm._isdestroyed) {\n        callhook(vm, 'beforeupdate')\n      }\n    }\n  }, true /* isrenderwatcher */)\n\n// vm ï¼ä¸watherå¯¹åºçvue componentå®ä¾ï¼è¿ç§å¯¹åºå³ç³»éè¿watherå»ç®¡ç\n// updatecomponentï¼å¯ä»¥çè§£ævue componentçæ´æ°å½æ°ï¼è°ç¨å®ä¾renderåupdateä¸¤ä¸ªæ¹æ³ï¼renderä½ç¨æ¯å°vueå¯¹è±¡æ¸²ææèædom,updateæ¯éè¿èædomåå»ºæèæ´æ°çå®dom\n\n\nä¸é¢è¯´å¨åå»º watcher å®ä¾çæ¶åä¼è°ç¨getæ¹æ³ï¼å¨getæ¹æ³ä¸­ï¼ä¼è°ç¨updatecomponent()ï¼è°ç¨å¶ä¸­ç_renderå½æ°æ¾å°ä¼ å¥æèç¼è¯çæçrenderå½æ°å»çæèædomï¼ç¶åè°ç¨_updateæ¹æ³å°èædomè½¬æ¢æçå®dom\n\n * æ´å¤è¯¦ç»è¯·ç\n\nwatcher å®ä¾åä¸ºæ¸²æ watcher (render watcher),è®¡ç®å±æ§ watcher (computed watcher),ä¾¦å¬å¨ watcherï¼user watcherï¼ä¸ç§ï¼\n\n 1. initstate æ¶,å¯¹ computed å±æ§åå§åæ¶,è§¦å computed watcher ä¾èµæ¶é\n 2. initstate æ¶,å¯¹ä¾¦å¬å±æ§åå§åæ¶,è§¦å user watcher ä¾èµæ¶é\n 3. render()çè¿ç¨,è§¦å render watcher ä¾èµæ¶é\n 4. re-render æ¶,vm.render()åæ¬¡æ§è¡,ä¼ç§»é¤ææ subs ä¸­ç watcer çè®¢é,éæ°èµå¼ã\n\nwatcherç±»\n\nclass watcher {\n    constructor (\n    vm: component, \n    exporfn: string | function,\n    cb: function,\n    options?: ?object,\n    isrenderwatcher?: boolean\n  ) {\n    this.vm = vm\n    if (isrenderwatcher) {\n      // å°æ¸²æå½æ°çè§å¯èå­å¥_watcher\n      vm._watcher = this\n    }\n    // å°ææè§å¯èpushå°_watchersåè¡¨\n    vm._watchers.push(this)\n  }\n    \n  get () { // è§¦ååå¼æä½ï¼è¿èè§¦åå±æ§çgetter\n    pushtarget(this) // dep ä¸­æå°çï¼ç» dep.target èµå¼ watcher\n    let value\n    const vm = this.vm\n    try {\n      // æ ¸å¿ï¼è¿è¡è§å¯èè¡¨è¾¾å¼ï¼è¿è¡åå¼ï¼è§¦ågetterï¼ä»èå¨é­åä¸­æ·»å watcher\n      value = this.getter.call(vm, vm)\n    } catch (e) {\n      if (this.user) {\n        handleerror(e, vm, `getter for watcher \"${this.expression}\"`)\n      } else {\n        throw e\n      }\n    } finally {\n      if (this.deep) { // å¦æè¦æ·±åº¦çæµï¼åå¯¹ value æ§è¡æä½\n        traverse(value)\n      }\n      // æ¸çä¾èµæ¶é\n      poptarget()\n      this.cleanupdeps()\n    }\n    return value\n  }\n\n  // å½ä¾èµååæ¶ï¼è§¦åæ´æ°\n  update () {\n    ...\n  }\n}\n\n\n\n# ååºå¼çæ´ä½æµç¨\n\nvueååºå¼åç-çè§£observerãdepãwatcher\n\n * ç»ä»¶å®ä¾åå§åè¿ç¨ä¸­ï¼walk æ¹æ³éå data å©ç¨object.definepropertyä¸ºæ¯ä¸ªå±æ§æ·»å getterãsetteræ¹æ³ï¼ç¨äºæ¶éä¾èµåè§¦åä¾èµï¼æ¯ä¸ªå±æ§é½ä¼æä¸ä¸ª dep ç¨æ¥æ¶éä¾èµã\n * ç»ä»¶æ¸²æè¿ç¨ä¸­ï¼mountcomponentæ¹æ³ï¼ï¼åå§åç»ä»¶èªå·±ç watcher å¯¹è±¡ï¼å½å¤çéè¿ watcher è¯»åæ°æ®æ¶ï¼ä¼è§¦å getter ä»èå° watcher æ·»å å° dep ä¸­ãwatcher å¯ä»¥æ¯æ¸²æ watcherãcomputed watcherãwatch watcher\n * data ä¸­çå±æ§ååï¼ä¼è°ç¨ setter ä¸­çæ¹æ³ï¼dep.notifyï¼éç¥æ¶éå°ç watcher æ§è¡ update æ¹æ³ã\n * watcher æ¶å°ä¾èµååçæ¶æ¯ï¼éæ°æ¸²æèædomï¼å®ç°é¡µé¢ååº\n\n\n# vue 3.0 proxy\n\n> object.defineproperty åªè½å«æå¯¹è±¡çå±æ§,å æ­¤æä»¬éè¦å¯¹æ¯ä¸ªå¯¹è±¡çæ¯ä¸ªå±æ§è¿è¡éåãvue 2.x é,æ¯éè¿ éå½ + éå data å¯¹è±¡æ¥å®ç°å¯¹æ°æ®ççæ§ç,å¦æå±æ§å¼ä¹æ¯å¯¹è±¡é£ä¹éè¦æ·±åº¦éå,æ¾ç¶å¦æè½å«æä¸ä¸ªå®æ´çå¯¹è±¡æ¯ææ¯æ´å¥½çéæ©ãproxy å¯ä»¥å«ææ´ä¸ªå¯¹è±¡,å¹¶è¿åä¸ä¸ªæ°çå¯¹è±¡ãproxy ä¸ä»å¯ä»¥ä»£çå¯¹è±¡,è¿å¯ä»¥ä»£çæ°ç»ãè¿å¯ä»¥ä»£çå¨æå¢å çå±æ§ã\n\nproxyå¯ä»¥çè§£æï¼å¨ç®æ å¯¹è±¡ä¹åæ¶è®¾ä¸å± \"æ¦æª\"ï¼å½å¤çå¯¹è¯¥å¯¹è±¡è®¿é®çæ¶åï¼é½å¿é¡»ç»è¿è¿å±æ¦æªï¼èproxyå°±åå½äºè¿ç§æºå¶ï¼ç±»ä¼¼äºä»£ççå«ä¹ï¼å®å¯ä»¥å¯¹å¤çè®¿é®å¯¹è±¡ä¹åè¿è¡è¿æ»¤åæ¹åè¯¥å¯¹è±¡ã\n\n> proxyä¸å­å¨object.defineproperty()çä¸ä¸ªé®é¢,å¹¶ä¸proxyæå¤è¾¾13ç§æ¦æªæ¹æ³\n\nvar proxy = new proxy(target, handler);\n\n\n> new proxy()è¡¨ç¤ºçæä¸ä¸ªproxyå®ä¾ï¼targetåæ°è¡¨ç¤ºæè¦æ¦æªçç®æ å¯¹è±¡ï¼handleråæ°ä¹æ¯ä¸ä¸ªå¯¹è±¡ï¼ç¨æ¥å®å¶æ¦æªè¡ä¸º\n\nlet obj = {\n  name: 'eason',\n  age: 30\n}\nlet handler = {\n  get (target, key, receiver) {\n    console.log('get', key)                   // å¦æä»ä¹æä½ä¹æ²¡æå°±ç´æ¥return reflect..\n    // return target[key]\n    return reflect.get(target, key, receiver) //å½æ°å¼è¡ä¸º\n  },\n  set (target, key, value, receiver) {\n    console.log('set', key, value)\n    // target[key] = value\n    return reflect.set(target, key, value, receiver)\n  }\n}\nlet proxy = new proxy(obj, handler)\n\nproxy.name = 'zoe' // set name zoe\nproxy.age = 18     // set age 18\nproxy.name         //22 get name\n\t              //\"eason\"\n\n\n * proxy è¯»åå±æ§çå¼æ¶ï¼å®éä¸æ§è¡çæ¯ handler.get ï¼å¨æ§å¶å°è¾åºä¿¡æ¯ï¼å¹¶ä¸è¯»åè¢«ä»£çå¯¹è±¡ obj çå±æ§ã\n * å¨ proxy è®¾ç½®å±æ§å¼æ¶ï¼å®éä¸æ§è¡çæ¯ handler.set ï¼å¨æ§å¶å°è¾åºä¿¡æ¯ï¼å¹¶ä¸è®¾ç½®è¢«ä»£çå¯¹è±¡ obj çå±æ§çå¼\n\n> reflectæ¯ä¸ä¸ªåç½®çå¯¹è±¡ï¼æ²¡ææé å½æ°ï¼ææçå±æ§ä¸æ¹æ³é½æ¯éæçï¼å°±åmathå¯¹è±¡ï¼\n> \n> reflect.get():è·åå¯¹è±¡èº«ä¸æä¸ªå±æ§çå¼ï¼ç±»ä¼¼äº target[name]ã\n> \n> reflect.set():å°å¼åéç»å±æ§çå½æ°,è¿åä¸ä¸ªbooleanï¼å¦ææ´æ°æåï¼åè¿åtrueã\n> \n> reflectå¯¹è±¡çéææ¹æ³åproxyå¯¹è±¡çéææ¹æ³ä¸ä¸å¯¹åº ï¼ä¸å±13ç§\n> \n> reflectè®¾è®¡çç®çæ¯ä¸ºäºä¼åobjectçä¸äºæä½æ¹æ³ä»¥ååççè¿åobjectæä½è¿åçç»æï¼å¯¹äºä¸äºå½ä»¤å¼çobjectè¡ä¸ºï¼reflectå¯¹è±¡å¯ä»¥å°å¶åä¸ºå½æ°å¼çè¡ä¸º\n\nconst obj = {\n    name: 'ace',\n    age: 18\n}\n\nconsole.log('name' in obj)\nconsole.log(delete obj['age'])\nconsole.log(object.keys(obj))\n\nconsole.log(reflect.has(obj, 'name'))\nconsole.log(reflect.deleteproperty(obj, 'age'))\nconsole.log(reflect.ownkeys(obj))\n\n\nreflect.apply(target, thisargument, argumentslist)\n// å¯¹ä¸ä¸ªå½æ°è¿è¡è°ç¨æä½ï¼åæ¶å¯ä»¥ä¼ å¥ä¸ä¸ªæ°ç»ä½ä¸ºè°ç¨åæ°ãå function.prototype.apply() åè½ç±»ä¼¼ã\n\nreflect.construct(target, argumentslist[, newtarget])\n// å¯¹æé å½æ°è¿è¡ new æä½ï¼ç¸å½äºæ§è¡ new target(...args)ã\n\nreflect.defineproperty(target, propertykey, attributes)\n// å object.defineproperty() ç±»ä¼¼ãå¦æè®¾ç½®æåå°±ä¼è¿å true\n\nreflect.deleteproperty(target, propertykey)\n//ä½ä¸ºå½æ°çdeleteæä½ç¬¦ï¼ç¸å½äºæ§è¡ delete target[name]ã\n\nreflect.get(target, propertykey[, receiver])\n// è·åå¯¹è±¡èº«ä¸æä¸ªå±æ§çå¼ï¼ç±»ä¼¼äº target[name]ã\n\nreflect.getownpropertydescriptor(target, propertykey)\n// ç±»ä¼¼äº object.getownpropertydescriptor()ãå¦æå¯¹è±¡ä¸­å­å¨è¯¥å±æ§ï¼åè¿åå¯¹åºçå±æ§æè¿°ç¬¦,  å¦åè¿å undefined.\n\nreflect.getprototypeof(target)\n// ç±»ä¼¼äº object.getprototypeof()ã\n\nreflect.has(target, propertykey)\n// å¤æ­ä¸ä¸ªå¯¹è±¡æ¯å¦å­å¨æä¸ªå±æ§ï¼å in è¿ç®ç¬¦ çåè½å®å¨ç¸åã\n\nreflect.isextensible(target)\n// ç±»ä¼¼äº object.isextensible().\n\nreflect.ownkeys(target)\n// è¿åä¸ä¸ªåå«ææèªèº«å±æ§ï¼ä¸åå«ç»§æ¿å±æ§ï¼çæ°ç»ã(ç±»ä¼¼äº object.keys(), ä½ä¸ä¼åenumerableå½±å).\n\nreflect.preventextensions(target)\n// ç±»ä¼¼äº object.preventextensions()ãè¿åä¸ä¸ªbooleanã\n\nreflect.set(target, propertykey, value[, receiver])\n// å°å¼åéç»å±æ§çå½æ°ãè¿åä¸ä¸ªbooleanï¼å¦ææ´æ°æåï¼åè¿åtrueã\n\nreflect.setprototypeof(target, prototype)\n// è®¾ç½®å¯¹è±¡ååçå½æ°. è¿åä¸ä¸ª booleanï¼ å¦ææ´æ°æåï¼åè¿åtrueã\n\n\n\n# proxy ä¸­ç receiver\n\nproxy å reflect\n\n> å¨ reflect.get çåºæ¯ä¸ï¼receiver å¯ä»¥æ¹åè®¡ç®å±æ§ä¸­ this çæåã\n\nvar target = {\n  get a() { return this.c }\n}\n\nreflect.get(target, 'a', { c: 4 }) // 4\n\n\n> receiveræ¯æ¥åèçææï¼è¡¨ç¤ºè°ç¨å¯¹åºå±æ§ææ¹æ³çä¸»ä½å¯¹è±¡ï¼éå¸¸æåµä¸ï¼receiveråæ°æ¯æ éä½¿ç¨çï¼ä½æ¯å¦æåçäºç»§æ¿ï¼ä¸ºäºæç¡®è°ç¨ä¸»ä½ï¼receiveråæ°å°±éè¦åºé©¬äºã\n\nlet user = {\n  _name: \"guest\",\n  get name() {\n    return this._name;\n  }\n};\n\nlet userproxy = new proxy(user, {\n  get(target, prop, receiver) {\n    return target[prop]; // (*) target = user\n    return reflect.get(target, prop, receiver); // receiver = admin\n  }\n});\n\nlet admin = {\n  __proto__: userproxy,\n  _name: \"admin\"\n};\n\n// ææè¾åºï¼admin\nalert(admin.name); // è¾åºï¼guest (?!?)\n\n\n * target ââ æ¯ç®æ å¯¹è±¡ï¼è¯¥å¯¹è±¡è¢«ä½ä¸ºç¬¬ä¸ä¸ªåæ°ä¼ éç» new proxyï¼\n * prop ââ ç®æ å±æ§åï¼\n * receiver ââ å¦æç®æ å±æ§æ¯ä¸ä¸ª getter è®¿é®å¨å±æ§ï¼å receiver å°±æ¯æ¬æ¬¡è¯»åå±æ§æå¨ç this å¯¹è±¡ãéå¸¸ï¼è¿å°±æ¯ proxy å¯¹è±¡æ¬èº«ï¼æèï¼å¦ææä»¬ä» proxy ç»§æ¿ï¼åæ¯ä»è¯¥ proxy ç»§æ¿çå¯¹è±¡ï¼ã",charsets:{cjk:!0}},{title:"Vue3.0ï¼äºï¼",frontmatter:{title:"Vue3.0ï¼äºï¼",date:"2021-02-10T11:27:54.000Z",categories:"Vue"},regularPath:"/vue/vue3.0-2.html",relativePath:"vue/vue3.0-2.md",key:"v-6ee223b1",path:"/vue/vue3.0-2.html",headers:[{level:2,title:"reactive",slug:"reactive",normalizedTitle:"reactive",charIndex:149},{level:2,title:"æ¶éä¾èµ",slug:"æ¶éä¾èµ",normalizedTitle:"æ¶éä¾èµ",charIndex:309},{level:2,title:"æ¶éä¾èµå®ç°ï¼effect && track",slug:"æ¶éä¾èµå®ç°-effect-track",normalizedTitle:"æ¶éä¾èµå®ç°ï¼effect &amp;&amp; track",charIndex:null},{level:2,title:"è§¦åæ´æ°ï¼trigger",slug:"è§¦åæ´æ°-trigger",normalizedTitle:"è§¦åæ´æ°ï¼trigger",charIndex:2758},{level:2,title:"ref",slug:"ref",normalizedTitle:"ref",charIndex:158},{level:2,title:"reactive vs ref",slug:"reactive-vs-ref",normalizedTitle:"reactive vs ref",charIndex:3732},{level:2,title:"toRefs",slug:"torefs",normalizedTitle:"torefs",charIndex:162},{level:2,title:"computed",slug:"computed",normalizedTitle:"computed",charIndex:169}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"reactive æ¶éä¾èµ æ¶éä¾èµå®ç°ï¼effect && track è§¦åæ´æ°ï¼trigger ref reactive vs ref toRefs computed",content:"# Vue.js 3.0ååºå¼åç\n\n * ä½¿ç¨ Proxy å¯¹è±¡å®ç°å±æ§çå¬\n * å¤å±å±æ§åµå¥ï¼åªæå¨è®¿é®å±æ§è¿ç¨ä¸­å¤çä¸ä¸çº§å±æ§\n * é»è®¤çå¬å¨ææ·»å çå±æ§\n * é»è®¤çå¬å±æ§çå é¤æä½\n * é»è®¤çå¬æ°ç»ç´¢å¼å length å±æ§\n * å¯ä»¥ä½ä¸ºåç¬çæ¨¡åä½¿ç¨\n\n\n# æ ¸å¿æ¹æ³\n\n * reactive/ref/toRefs/computed\n * ä¸ä¸ªåºå±æ¹æ³ï¼ä¸è¬ä¸ä¼ç´æ¥è°ç¨\n   * effect\n   * track\n   * trigger\n\n> effect å½æ°ç¨äºå®ä¹å¯ä½ç¨ï¼å®çåæ°å°±æ¯å¯ä½ç¨å½æ°ï¼ä¼é»è®¤æ§è¡ä¸æ¬¡ï¼å½ååºæ°æ®åååï¼ä¼å¯¼è´å¯ä½ç¨å½æ°éæ°æ§è¡ã\n> \n> track ç¨æ¥æ¶éä¾èµï¼æ¶éeffectï¼ï¼trigger ç¨æ¥è§¦åååºï¼æ§è¡effectï¼\n\n\n# reactive\n\n * æ¥æ¶ä¸ä¸ªåæ°ï¼å¤æ­åæ°æ¯å¦æ¯å¯¹è±¡ï¼ä¸æ¯å¯¹è±¡åè¿åï¼åªè½å¤çå¯¹è±¡ï¼\n * åå»ºæ¦æªå¨å¯¹è±¡ handlerï¼è®¾ç½® get / set /deleteProperty\n * è¿å Proxy å¯¹è±¡\n\n// å¤æ­æ¯å¦ä¸ºå¯¹è±¡\nconst isObject = val => val !== null && typeof val === 'object'\n// å¯¹è±¡çé®ä»ä¸ºå¯¹è±¡ç»§ç»­è°ç¨ reactive å¤ç\nconst convert = target => isObject(target) ? reactive(target) ? target\n// å¤æ­å¯¹è±¡æ¯å¦ææä¸ªå±æ§\nconst hasOwnProperty = Object.prototype.hasOwnProperty\n// call æ¹æ³ç¸å½äº target.hasOwnProperty(key)\nconst hasOwn = (target, key) => hasOwnProperty.call(target, key) \n\n// reactive æ¹æ³\nexport function reactive(target) {\n\tif(!isObject(target)) return target\n\t\n\tconst handler = {\n    get(target, key, receiver) {\n      // æ¶éä¾èµ\n      track(target, key)\n      const result = Reflect.get(target, key, receiver)\n      return convert(result)\n    },\n    set(target, key, value, receiver) {\n      const oldValue = Reflect.get(target, key, receiver)\n      let result = true // è¿å boolean å¼\n      if (oldValue !== value) {\n        result = Reflect.set(target, key, value, receiver)\n        // è§¦åæ´æ°\n        trigger(target, key)\n      }\n      return result\n    },\n    deleteProperty(target, key) {\n      const hadKey = hasOwn(target, key)\n      const result = Reflect.deleteProperty(target, key)\n      if (hadKey && result) {\n        // è§¦åæ´æ°\n        trigger(target, key)\n      }\n    }\n  }\n  \n  return new Proxy(target, handler)\n}\n\n\næµè¯\n\nimport { reactive } from './index.js'\nconst obj = reactive({\n  name: 'zs',\n  age: 18\n})\nobj.name = 'ls'\ndelete obj.age\nconsole.log(obj)\n\n\n\n# æ¶éä¾èµ\n\nå¦ä½æ¶éä¾èµï¼åçä¸ä¸ªä¾å­\n\nimport { reactive, effect } from './reactivity/index.js'\n\nconst product = reactive({\n  name: 'iPhone',\n  price: 5000,\n  count: 3\n})\nlet total = 0 \n\neffect(() => {\n  total = product.price * product.count\n  // æ­¤å¤è®¿é®æ¶ä¼æ§è¡ price å count å±æ§ç get æ¹æ³ï¼æ¶éä¾èµ\n})\n\nconsole.log(total)\n\nproduct.price = 4000 // æ­¤å¤è®¿é®æ¶ä¼æ§è¡ price å count å±æ§ç set æ¹æ³ï¼è§¦åæ´æ°\nconsole.log(total)\n\nproduct.count = 1\nconsole.log(total)\n\n\n\n\n * JavaScriptä¸­çMapãWeakMapãSetåWeakSetä»ç»\n\n\n# æ¶éä¾èµå®ç°ï¼effect && track\n\nlet activeEffect = null\nexport function effect(callback) {\n  activeEffect = callback\n  callback() // è®¿é®ååºå¼å¯¹è±¡å±æ§ï¼æ¶éä¾èµ\n  activeEffect = null\n}\n\nlet targetMap = new WeakMap()\n\nexport function track(target, key) {\n  if (!activeEffect) return\n  let depsMap = targetMap.get(target)\n  if (!depsMap) {\n    targetMap.set(target, (depsMap = new Map()))\n  }\n  let dep = depsMap.get(key)\n  if (!dep) {\n    depsMap.set(key, (dep = new Set()))\n  }\n  dep.add(activeEffect)\n}\n\n\n\n# è§¦åæ´æ°ï¼trigger\n\nexport function trigger(target, key) {\n  const depsMap = targetMap.get(target)\n  if (!depsMap) return\n  const dep = depsMap.get(key)\n  if (dep) {\n    dep.forEach(() => {\n      effect()\n    })\n  }\n}\n\n\n\n# ref\n\nexport function ref(raw) {\n  // å¤æ­ raw æ¯å¦æ¯ ref åå»ºçå¯¹è±¡ï¼å¦ææ¯ç´æ¥è¿å\n  if (isObject(raw) && raw.__v_isRef) {\n    return\n  }\n  let value = convert(raw)\n  const r = {\n    __v_isRef: true,\n    get value() {\n      track(r, 'value')\n      return value\n    },\n    set value(newValue) {\n      if (newValue !== value) {\n        raw = newValue\n        value = convert(raw)\n        trigger(r, 'value')\n      }\n    }\n  }\n  return r\n}\n\n\nrefæµè¯\n\n    import { reactive, effect, ref } from './reactivity/index.js'\n\n    const price = ref(5000)\n    const count = ref(3)\n   \n    let total = 0 \n    effect(() => {\n      total = price.value * count.value\n    })\n    console.log(total)\n\n    price.value = 4000\n    console.log(total)\n\n    count.value = 1\n    console.log(total)\n\n\n\n# reactive vs ref\n\n * ref å¯ä»¥æåºæ¬æ°æ®ç±»åæ°æ®ï¼è½¬æååºå¼å¯¹è±¡\n * ref è¿åçå¯¹è±¡ï¼éæ°èµå¼æå¯¹è±¡ä¹æ¯ååºå¼ç\n * reactive è¿åçå¯¹è±¡ï¼éæ°èµå¼ä¸¢å¤±ååºå¼\n * reactive è¿åçå¯¹è±¡ä¸å¯ä»¥è§£æ\n\n\n# toRefs\n\nexport function toRefs (proxy) {\n  const ret = proxy instanceof Array ? new Array(proxy.length) : {}\n\n  for (const key in proxy) {\n    // ææ¯ä¸ªå±æ§é½è½¬æ¢æ ref å¯¹è±¡\n    ret[key] = toProxyRef(proxy, key)\n  }\n\n  return ret\n}\n\nfunction toProxyRef (proxy, key) {\n  const r = {\n    __v_isRef: true,\n    get value () {\n      // è®¿é®çå·²ç»æ¯ååºå¼å¯¹è±¡ï¼ä¸éè¦æ¶éä¾èµ\n      return proxy[key]\n    },\n    set value (newValue) {\n      proxy[key] = newValue\n    }\n  }\n  return r\n}\n\n\ntoRefsæµè¯\n\nimport { reactive, effect, toRefs } from './reactivity/index.js'\n\nfunction useProduct () {\n  const product = reactive({\n    name: 'iPhone',\n    price: 5000,\n    count: 3\n  })\n\t\n  // ç´æ¥è¿å product è§£æä¹åä¸æ¯ååºå¼ç\n  // toRefs å°æ¯ä¸ªå±æ§è½¬æ¢æäºååºå¼ï¼è§£æä¹åä¾æ§æ¯ååºå¼\n  return toRefs(product)\n}\n\nconst { price, count } = useProduct() \n\nlet total = 0 \neffect(() => {\n  total = price.value * count.value\n})\nconsole.log(total)\n\nprice.value = 4000\nconsole.log(total)\n\ncount.value = 1\nconsole.log(total)\n\n\n\n# computed\n\n> Computed å®éä¸å°±æ¯ä¸ä¸ª effect å½æ°ï¼computed è¿åçæ¯ä¸ä¸ª ref å¯¹è±¡ã\n\n// è¿å ref åå»ºçå¯¹è±¡\nexport function computed (getter) {\n  const result = ref()\n\n  effect(() => (result.value = getter()))\n\n  return result\n}\n\n\ncomputedæµè¯\n\nimport { reactive, effect, computed } from './reactivity/index.js'\n\nconst product = reactive({\n  name: 'iPhone',\n  price: 5000,\n  count: 3\n})\nlet total = computed(() => {\n  return product.price * product.count\n})\n\nconsole.log(total.value)\n\nproduct.price = 4000\nconsole.log(total.value)\n\nproduct.count = 1\nconsole.log(total.value)\n",normalizedContent:"# vue.js 3.0ååºå¼åç\n\n * ä½¿ç¨ proxy å¯¹è±¡å®ç°å±æ§çå¬\n * å¤å±å±æ§åµå¥ï¼åªæå¨è®¿é®å±æ§è¿ç¨ä¸­å¤çä¸ä¸çº§å±æ§\n * é»è®¤çå¬å¨ææ·»å çå±æ§\n * é»è®¤çå¬å±æ§çå é¤æä½\n * é»è®¤çå¬æ°ç»ç´¢å¼å length å±æ§\n * å¯ä»¥ä½ä¸ºåç¬çæ¨¡åä½¿ç¨\n\n\n# æ ¸å¿æ¹æ³\n\n * reactive/ref/torefs/computed\n * ä¸ä¸ªåºå±æ¹æ³ï¼ä¸è¬ä¸ä¼ç´æ¥è°ç¨\n   * effect\n   * track\n   * trigger\n\n> effect å½æ°ç¨äºå®ä¹å¯ä½ç¨ï¼å®çåæ°å°±æ¯å¯ä½ç¨å½æ°ï¼ä¼é»è®¤æ§è¡ä¸æ¬¡ï¼å½ååºæ°æ®åååï¼ä¼å¯¼è´å¯ä½ç¨å½æ°éæ°æ§è¡ã\n> \n> track ç¨æ¥æ¶éä¾èµï¼æ¶éeffectï¼ï¼trigger ç¨æ¥è§¦åååºï¼æ§è¡effectï¼\n\n\n# reactive\n\n * æ¥æ¶ä¸ä¸ªåæ°ï¼å¤æ­åæ°æ¯å¦æ¯å¯¹è±¡ï¼ä¸æ¯å¯¹è±¡åè¿åï¼åªè½å¤çå¯¹è±¡ï¼\n * åå»ºæ¦æªå¨å¯¹è±¡ handlerï¼è®¾ç½® get / set /deleteproperty\n * è¿å proxy å¯¹è±¡\n\n// å¤æ­æ¯å¦ä¸ºå¯¹è±¡\nconst isobject = val => val !== null && typeof val === 'object'\n// å¯¹è±¡çé®ä»ä¸ºå¯¹è±¡ç»§ç»­è°ç¨ reactive å¤ç\nconst convert = target => isobject(target) ? reactive(target) ? target\n// å¤æ­å¯¹è±¡æ¯å¦ææä¸ªå±æ§\nconst hasownproperty = object.prototype.hasownproperty\n// call æ¹æ³ç¸å½äº target.hasownproperty(key)\nconst hasown = (target, key) => hasownproperty.call(target, key) \n\n// reactive æ¹æ³\nexport function reactive(target) {\n\tif(!isobject(target)) return target\n\t\n\tconst handler = {\n    get(target, key, receiver) {\n      // æ¶éä¾èµ\n      track(target, key)\n      const result = reflect.get(target, key, receiver)\n      return convert(result)\n    },\n    set(target, key, value, receiver) {\n      const oldvalue = reflect.get(target, key, receiver)\n      let result = true // è¿å boolean å¼\n      if (oldvalue !== value) {\n        result = reflect.set(target, key, value, receiver)\n        // è§¦åæ´æ°\n        trigger(target, key)\n      }\n      return result\n    },\n    deleteproperty(target, key) {\n      const hadkey = hasown(target, key)\n      const result = reflect.deleteproperty(target, key)\n      if (hadkey && result) {\n        // è§¦åæ´æ°\n        trigger(target, key)\n      }\n    }\n  }\n  \n  return new proxy(target, handler)\n}\n\n\næµè¯\n\nimport { reactive } from './index.js'\nconst obj = reactive({\n  name: 'zs',\n  age: 18\n})\nobj.name = 'ls'\ndelete obj.age\nconsole.log(obj)\n\n\n\n# æ¶éä¾èµ\n\nå¦ä½æ¶éä¾èµï¼åçä¸ä¸ªä¾å­\n\nimport { reactive, effect } from './reactivity/index.js'\n\nconst product = reactive({\n  name: 'iphone',\n  price: 5000,\n  count: 3\n})\nlet total = 0 \n\neffect(() => {\n  total = product.price * product.count\n  // æ­¤å¤è®¿é®æ¶ä¼æ§è¡ price å count å±æ§ç get æ¹æ³ï¼æ¶éä¾èµ\n})\n\nconsole.log(total)\n\nproduct.price = 4000 // æ­¤å¤è®¿é®æ¶ä¼æ§è¡ price å count å±æ§ç set æ¹æ³ï¼è§¦åæ´æ°\nconsole.log(total)\n\nproduct.count = 1\nconsole.log(total)\n\n\n\n\n * javascriptä¸­çmapãweakmapãsetåweaksetä»ç»\n\n\n# æ¶éä¾èµå®ç°ï¼effect && track\n\nlet activeeffect = null\nexport function effect(callback) {\n  activeeffect = callback\n  callback() // è®¿é®ååºå¼å¯¹è±¡å±æ§ï¼æ¶éä¾èµ\n  activeeffect = null\n}\n\nlet targetmap = new weakmap()\n\nexport function track(target, key) {\n  if (!activeeffect) return\n  let depsmap = targetmap.get(target)\n  if (!depsmap) {\n    targetmap.set(target, (depsmap = new map()))\n  }\n  let dep = depsmap.get(key)\n  if (!dep) {\n    depsmap.set(key, (dep = new set()))\n  }\n  dep.add(activeeffect)\n}\n\n\n\n# è§¦åæ´æ°ï¼trigger\n\nexport function trigger(target, key) {\n  const depsmap = targetmap.get(target)\n  if (!depsmap) return\n  const dep = depsmap.get(key)\n  if (dep) {\n    dep.foreach(() => {\n      effect()\n    })\n  }\n}\n\n\n\n# ref\n\nexport function ref(raw) {\n  // å¤æ­ raw æ¯å¦æ¯ ref åå»ºçå¯¹è±¡ï¼å¦ææ¯ç´æ¥è¿å\n  if (isobject(raw) && raw.__v_isref) {\n    return\n  }\n  let value = convert(raw)\n  const r = {\n    __v_isref: true,\n    get value() {\n      track(r, 'value')\n      return value\n    },\n    set value(newvalue) {\n      if (newvalue !== value) {\n        raw = newvalue\n        value = convert(raw)\n        trigger(r, 'value')\n      }\n    }\n  }\n  return r\n}\n\n\nrefæµè¯\n\n    import { reactive, effect, ref } from './reactivity/index.js'\n\n    const price = ref(5000)\n    const count = ref(3)\n   \n    let total = 0 \n    effect(() => {\n      total = price.value * count.value\n    })\n    console.log(total)\n\n    price.value = 4000\n    console.log(total)\n\n    count.value = 1\n    console.log(total)\n\n\n\n# reactive vs ref\n\n * ref å¯ä»¥æåºæ¬æ°æ®ç±»åæ°æ®ï¼è½¬æååºå¼å¯¹è±¡\n * ref è¿åçå¯¹è±¡ï¼éæ°èµå¼æå¯¹è±¡ä¹æ¯ååºå¼ç\n * reactive è¿åçå¯¹è±¡ï¼éæ°èµå¼ä¸¢å¤±ååºå¼\n * reactive è¿åçå¯¹è±¡ä¸å¯ä»¥è§£æ\n\n\n# torefs\n\nexport function torefs (proxy) {\n  const ret = proxy instanceof array ? new array(proxy.length) : {}\n\n  for (const key in proxy) {\n    // ææ¯ä¸ªå±æ§é½è½¬æ¢æ ref å¯¹è±¡\n    ret[key] = toproxyref(proxy, key)\n  }\n\n  return ret\n}\n\nfunction toproxyref (proxy, key) {\n  const r = {\n    __v_isref: true,\n    get value () {\n      // è®¿é®çå·²ç»æ¯ååºå¼å¯¹è±¡ï¼ä¸éè¦æ¶éä¾èµ\n      return proxy[key]\n    },\n    set value (newvalue) {\n      proxy[key] = newvalue\n    }\n  }\n  return r\n}\n\n\ntorefsæµè¯\n\nimport { reactive, effect, torefs } from './reactivity/index.js'\n\nfunction useproduct () {\n  const product = reactive({\n    name: 'iphone',\n    price: 5000,\n    count: 3\n  })\n\t\n  // ç´æ¥è¿å product è§£æä¹åä¸æ¯ååºå¼ç\n  // torefs å°æ¯ä¸ªå±æ§è½¬æ¢æäºååºå¼ï¼è§£æä¹åä¾æ§æ¯ååºå¼\n  return torefs(product)\n}\n\nconst { price, count } = useproduct() \n\nlet total = 0 \neffect(() => {\n  total = price.value * count.value\n})\nconsole.log(total)\n\nprice.value = 4000\nconsole.log(total)\n\ncount.value = 1\nconsole.log(total)\n\n\n\n# computed\n\n> computed å®éä¸å°±æ¯ä¸ä¸ª effect å½æ°ï¼computed è¿åçæ¯ä¸ä¸ª ref å¯¹è±¡ã\n\n// è¿å ref åå»ºçå¯¹è±¡\nexport function computed (getter) {\n  const result = ref()\n\n  effect(() => (result.value = getter()))\n\n  return result\n}\n\n\ncomputedæµè¯\n\nimport { reactive, effect, computed } from './reactivity/index.js'\n\nconst product = reactive({\n  name: 'iphone',\n  price: 5000,\n  count: 3\n})\nlet total = computed(() => {\n  return product.price * product.count\n})\n\nconsole.log(total.value)\n\nproduct.price = 4000\nconsole.log(total.value)\n\nproduct.count = 1\nconsole.log(total.value)\n",charsets:{cjk:!0}},{title:"Vue3.0ï¼ä¸ï¼",frontmatter:{title:"Vue3.0ï¼ä¸ï¼",date:"2021-02-22T11:27:54.000Z",categories:"Vue"},regularPath:"/vue/vue3.0-3.html",relativePath:"vue/vue3.0-3.md",key:"v-11c69222",path:"/vue/vue3.0-3.html",headers:[{level:2,title:"vite serve",slug:"vite-serve",normalizedTitle:"vite serve",charIndex:252},{level:2,title:"vue-cli serve",slug:"vue-cli-serve",normalizedTitle:"vue-cli serve",charIndex:411},{level:2,title:"æå or ä¸æå",slug:"æå-or-ä¸æå",normalizedTitle:"æå or ä¸æå",charIndex:499}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"vite serve vue-cli serve æå or ä¸æå",content:"# Vite æ¦å¿µ\n\n * Vite æ¯ä¸ä¸ªé¢åç°ä»£æµè§å¨çä¸ä¸ªæ´è½»ï¼æ´å¿«ç web åºç¨å¼åå·¥å·\n * å®åºäº ECMAScript æ ååçæ¨¡åç³»ç»ï¼ES Modulesï¼å®ç°\n * ä¸»è¦ä¸ºäºè§£å³å¼åé¶æ®µä½¿ç¨ webpack-dev-server ä»å¯å¨è¿æ¢ï¼HMR ç­æ´æ°ååºæ¢\n\n\n# Vite é¡¹ç®ä¾èµ\n\n * Viteï¼å½ä»¤è¡å·¥å·\n * @vue/compiler-sfcï¼ç¼è¯ .vue åæä»¶ç»ä»¶ï¼å¨ vue2 ä¸­æ¯ vue=template-compiler\n\n\n# åºç¡ä½¿ç¨\n\n * vite serveï¼å¼å¯ web æå¡å¨ï¼ä¸éè¦ç¼è¯æææä»¶ï¼å¯å¨éåº¦ååå¿«\n * vite build\n   * Rollup\n   * Dynamic import\n     * Polyfill\n\n\n# vite serve\n\n> åªæå·ä½ä½¿ç¨æ¨¡åçæ¶åæä¼ç¼è¯ï¼HMRä¹ç«å³ç¼è¯å½åæä¿®æ¹çæä»¶\n\n\n\n\n# vue-cli serve\n\n> ä¸ç®¡æ¨¡åæ¯å¦è¢«æ§è¡ï¼é½ä¼è¢«æå\n> \n> HMRï¼ä¼èªå¨ä»¥è¿ä¸ªæä»¶ä¸ºå¥å£éæ° build ä¸æ¬¡ï¼æææ¶åå°çä¾èµä¹é½ä¼è¢«å è½½ä¸é\n\n\n\n\n# æå or ä¸æå\n\nä½¿ç¨ webpack æåçä¸¤ä¸ªåå \n\n * æµè§å¨ç¯å¢å¹¶ä¸æ¯ææ¨¡ååï¼å·²æ¸æ¸ä¸å­å¨ ï¼\n * é¶æ£çæ¨¡åæä»¶ä¼äº§çå¤§éç http è¯·æ±\n\n\n# å¼ç®±å³ç¨\n\n * TypeScript - åç½®æ¯æ\n * less / sass / stylus / postcss - åç½®æ¯æï¼éè¦åç¬å®è£ï¼\n * JSX\n * Web Assembly\n\n\n# Vite ç¹æ§\n\n * å¿«éå·å¯å¨\n * æ¨¡åç­æ´æ°\n * æéç¼è¯\n * å¼ç®±å³ç¨\n\n> webpackä¼åæåï¼ç¶åå¯å¨å¼åæå¡å¨ï¼è¯·æ±æå¡å¨æ¶ç´æ¥ç»äºæåç»æã èviteæ¯ç´æ¥å¯å¨å¼åæå¡å¨ï¼è¯·æ±åªä¸ªæ¨¡ååå¯¹è¯¥æ¨¡åè¿è¡å®æ¶ç¼è¯ã ç±äºç°ä»£æµè§å¨æ¬èº«å°±æ¯æES Moduleï¼ä¼èªå¨åä¾èµçModuleååºè¯·æ±ãviteååå©ç¨è¿ä¸ç¹ï¼å°å¼åç¯å¢ä¸çæ¨¡åæä»¶ï¼å°±ä½ä¸ºæµè§å¨è¦æ§è¡çæä»¶ï¼èä¸æ¯åwebpacké£æ ·è¿è¡æååå¹¶ã ç±äºviteå¨å¯å¨çæ¶åä¸éè¦æåï¼ä¹å°±æå³çä¸éè¦åææ¨¡åçä¾èµãä¸éè¦ç¼è¯ï¼å æ­¤å¯å¨éåº¦éå¸¸å¿«ãå½æµè§å¨è¯·æ±æä¸ªæ¨¡åæ¶ï¼åæ ¹æ®éè¦å¯¹æ¨¡ååå®¹è¿è¡ç¼è¯ãè¿ç§æéå¨æç¼è¯çæ¹å¼ï¼æå¤§çç¼©åäºç¼è¯æ¶é´ï¼é¡¹ç®è¶å¤æãæ¨¡åè¶å¤ï¼viteçä¼å¿è¶ææ¾ã å¨HMRæ¹é¢ï¼å½æ¹å¨äºä¸ä¸ªæ¨¡ååï¼ä»éè®©æµè§å¨éæ°è¯·æ±è¯¥æ¨¡åå³å¯ï¼ä¸åwebpacké£æ ·éè¦æè¯¥æ¨¡åçç¸å³ä¾èµæ¨¡åå¨é¨ç¼è¯ä¸æ¬¡ï¼æçæ´é«ã å½éè¦æåå°çäº§ç¯å¢æ¶ï¼viteä½¿ç¨ä¼ ç»çrollupè¿è¡æåï¼å æ­¤ï¼viteçä¸»è¦ä¼å¿å¨å¼åé¶æ®µãå¦å¤ï¼ç±äºviteå©ç¨çæ¯ES Moduleï¼å æ­¤å¨ä»£ç ä¸­ä¸å¯ä»¥ä½¿ç¨CommonJS",normalizedContent:"# vite æ¦å¿µ\n\n * vite æ¯ä¸ä¸ªé¢åç°ä»£æµè§å¨çä¸ä¸ªæ´è½»ï¼æ´å¿«ç web åºç¨å¼åå·¥å·\n * å®åºäº ecmascript æ ååçæ¨¡åç³»ç»ï¼es modulesï¼å®ç°\n * ä¸»è¦ä¸ºäºè§£å³å¼åé¶æ®µä½¿ç¨ webpack-dev-server ä»å¯å¨è¿æ¢ï¼hmr ç­æ´æ°ååºæ¢\n\n\n# vite é¡¹ç®ä¾èµ\n\n * viteï¼å½ä»¤è¡å·¥å·\n * @vue/compiler-sfcï¼ç¼è¯ .vue åæä»¶ç»ä»¶ï¼å¨ vue2 ä¸­æ¯ vue=template-compiler\n\n\n# åºç¡ä½¿ç¨\n\n * vite serveï¼å¼å¯ web æå¡å¨ï¼ä¸éè¦ç¼è¯æææä»¶ï¼å¯å¨éåº¦ååå¿«\n * vite build\n   * rollup\n   * dynamic import\n     * polyfill\n\n\n# vite serve\n\n> åªæå·ä½ä½¿ç¨æ¨¡åçæ¶åæä¼ç¼è¯ï¼hmrä¹ç«å³ç¼è¯å½åæä¿®æ¹çæä»¶\n\n\n\n\n# vue-cli serve\n\n> ä¸ç®¡æ¨¡åæ¯å¦è¢«æ§è¡ï¼é½ä¼è¢«æå\n> \n> hmrï¼ä¼èªå¨ä»¥è¿ä¸ªæä»¶ä¸ºå¥å£éæ° build ä¸æ¬¡ï¼æææ¶åå°çä¾èµä¹é½ä¼è¢«å è½½ä¸é\n\n\n\n\n# æå or ä¸æå\n\nä½¿ç¨ webpack æåçä¸¤ä¸ªåå \n\n * æµè§å¨ç¯å¢å¹¶ä¸æ¯ææ¨¡ååï¼å·²æ¸æ¸ä¸å­å¨ ï¼\n * é¶æ£çæ¨¡åæä»¶ä¼äº§çå¤§éç http è¯·æ±\n\n\n# å¼ç®±å³ç¨\n\n * typescript - åç½®æ¯æ\n * less / sass / stylus / postcss - åç½®æ¯æï¼éè¦åç¬å®è£ï¼\n * jsx\n * web assembly\n\n\n# vite ç¹æ§\n\n * å¿«éå·å¯å¨\n * æ¨¡åç­æ´æ°\n * æéç¼è¯\n * å¼ç®±å³ç¨\n\n> webpackä¼åæåï¼ç¶åå¯å¨å¼åæå¡å¨ï¼è¯·æ±æå¡å¨æ¶ç´æ¥ç»äºæåç»æã èviteæ¯ç´æ¥å¯å¨å¼åæå¡å¨ï¼è¯·æ±åªä¸ªæ¨¡ååå¯¹è¯¥æ¨¡åè¿è¡å®æ¶ç¼è¯ã ç±äºç°ä»£æµè§å¨æ¬èº«å°±æ¯æes moduleï¼ä¼èªå¨åä¾èµçmoduleååºè¯·æ±ãviteååå©ç¨è¿ä¸ç¹ï¼å°å¼åç¯å¢ä¸çæ¨¡åæä»¶ï¼å°±ä½ä¸ºæµè§å¨è¦æ§è¡çæä»¶ï¼èä¸æ¯åwebpacké£æ ·è¿è¡æååå¹¶ã ç±äºviteå¨å¯å¨çæ¶åä¸éè¦æåï¼ä¹å°±æå³çä¸éè¦åææ¨¡åçä¾èµãä¸éè¦ç¼è¯ï¼å æ­¤å¯å¨éåº¦éå¸¸å¿«ãå½æµè§å¨è¯·æ±æä¸ªæ¨¡åæ¶ï¼åæ ¹æ®éè¦å¯¹æ¨¡ååå®¹è¿è¡ç¼è¯ãè¿ç§æéå¨æç¼è¯çæ¹å¼ï¼æå¤§çç¼©åäºç¼è¯æ¶é´ï¼é¡¹ç®è¶å¤æãæ¨¡åè¶å¤ï¼viteçä¼å¿è¶ææ¾ã å¨hmræ¹é¢ï¼å½æ¹å¨äºä¸ä¸ªæ¨¡ååï¼ä»éè®©æµè§å¨éæ°è¯·æ±è¯¥æ¨¡åå³å¯ï¼ä¸åwebpacké£æ ·éè¦æè¯¥æ¨¡åçç¸å³ä¾èµæ¨¡åå¨é¨ç¼è¯ä¸æ¬¡ï¼æçæ´é«ã å½éè¦æåå°çäº§ç¯å¢æ¶ï¼viteä½¿ç¨ä¼ ç»çrollupè¿è¡æåï¼å æ­¤ï¼viteçä¸»è¦ä¼å¿å¨å¼åé¶æ®µãå¦å¤ï¼ç±äºviteå©ç¨çæ¯es moduleï¼å æ­¤å¨ä»£ç ä¸­ä¸å¯ä»¥ä½¿ç¨commonjs",charsets:{cjk:!0}},{title:"vue-loaderåçè§£æ",frontmatter:{title:"vue-loaderåçè§£æ",date:"2021-11-01T09:47:00.000Z",categories:"Vue"},regularPath:"/vue/template.html",relativePath:"vue/template.md",key:"v-3cfb1de5",path:"/vue/template.html",headers:[{level:2,title:"vue-loader",slug:"vue-loader",normalizedTitle:"vue-loader",charIndex:2},{level:3,title:"vue-loader å¤ç SFC",slug:"vue-loader-å¤ç-sfc",normalizedTitle:"vue-loader å¤ç sfc",charIndex:221},{level:3,title:"Pitch Loader",slug:"pitch-loader",normalizedTitle:"pitch loader",charIndex:1490},{level:3,title:"VueLoaderPlugin",slug:"vueloaderplugin",normalizedTitle:"vueloaderplugin",charIndex:1470},{level:2,title:"@vue/component-compiler-utils",slug:"vue-component-compiler-utils",normalizedTitle:"@vue/component-compiler-utils",charIndex:274},{level:3,title:"API",slug:"api",normalizedTitle:"api",charIndex:4950},{level:2,title:"vue-template-compiler",slug:"vue-template-compiler",normalizedTitle:"vue-template-compiler",charIndex:154},{level:3,title:"æ¨¡æ¿ç¼è¯çä½ç¨",slug:"æ¨¡æ¿ç¼è¯çä½ç¨",normalizedTitle:"æ¨¡æ¿ç¼è¯çä½ç¨",charIndex:7904},{level:3,title:"ä½éªæ¨¡æ¿ç¼è¯çç»æ",slug:"ä½éªæ¨¡æ¿ç¼è¯çç»æ",normalizedTitle:"ä½éªæ¨¡æ¿ç¼è¯çç»æ",charIndex:8590},{level:3,title:"Vue Template Explorer",slug:"vue-template-explorer",normalizedTitle:"vue template explorer",charIndex:9475},{level:3,title:"æ¨¡æ¿ç¼è¯è¿ç¨",slug:"æ¨¡æ¿ç¼è¯è¿ç¨",normalizedTitle:"æ¨¡æ¿ç¼è¯è¿ç¨",charIndex:8677}],lastUpdated:"2/16/2022, 6:55:14 PM",lastUpdatedTimestamp:1645008914e3,headersStr:"vue-loader vue-loader å¤ç SFC Pitch Loader VueLoaderPlugin @vue/component-compiler-utils API vue-template-compiler æ¨¡æ¿ç¼è¯çä½ç¨ ä½éªæ¨¡æ¿ç¼è¯çç»æ Vue Template Explorer æ¨¡æ¿ç¼è¯è¿ç¨",content:"# vue-loaderåçè§£æ\n\n\n# vue-loader\n\n> vue-loader æ¯ç¨äº webpack çå è½½å¨ï¼åè®¸ä½ ç¨ Single-File Components åæä»¶ç»ä»¶çæ ¼å¼æ¥å Vue ç»ä»¶ãå¶ä½ç¨å°±æ¯æå *.vue æä»¶ä¸­çtemplateï¼scriptï¼styleç­ï¼åéè¿ vue-template-compilerï¼style-loader ç­æä»¶ï¼æç»å½¢æä¸ä¸ªå¯ä»¥å¨æµè§å¨ä¸­è¿è¡ç js æä»¶ã\n\n\n# vue-loader å¤ç SFC\n\n * é¦å vue-loader æ¯æä¹å¤ç SFC çï¼ä»ä¼ä½¿ç¨ @vue/component-compiler-utils ï¼ä¸æä¼ä»ç»ï¼å° SFC æºç è§£ææ SFC æè¿°ç¬¦ ï¼æºç å°å\n\n// vue-loader lib/index.js\nconst { parse } = require('@vue/component-compiler-utils');\n\nmodule.exports = function (source) {\n  // è§£ææºç ï¼å¾å°æè¿°ç¬¦\n  const descriptor = parse({ source, ... });\n\t\n  // æå°ç»æ\n  console.log(descriptor);\n  /**\n  \tdescriptor {\n      template: { ... },\n      script: { ... },\n      styles: [ ... ],\n      customBlocks: [],\n      errors: []\n    }\n  */\n}\n\n\n * ç¶åæ ¹æ® SFCæè¿°ç¬¦ ä¸ºæ¯ä¸ªè¯­è¨åè¿è¡å¤çï¼æºç å°å\n\n  // å¦æ template åå­å¨\n  if (descriptor.template) { ... }\n  // å¦æ script åå­å¨\n  if (descriptor.script) { ... }\n  // å¦æ style åå­å¨ï¼æ¯æå¤ style åï¼\n  if (descriptor.styles.length) { ... }\n  // Vue è¿æ¯æèªå®ä¹å\n  if (descriptor.customBlocks && descriptor.customBlocks.length) { ... }\n\n\n * å¤çåæå°åºçç»æï¼\n\n// ä»ä¸»å è½½ç¨åºè¿åçä»£ç source.vueçä»£ç \n\n// import the <template> block\nimport render from 'source.vue?vue&type=template'\n\n// import the <script> block\nimport script from 'source.vue?vue&type=script'\nexport * from 'source.vue?vue&type=script'\n\n// import <style> blocks\nimport 'source.vue?vue&type=style&index=1'\n\nscript.render = render\nexport default script\n\n\n * ä»¥ä¸å°±æ¯ä½¿ç¨ vue-loader å¤ç SFC çç»æï¼é£ä¹é®é¢æ¥äºè¯­å¥ä¸­?vue&type=template çä½ç¨æ¯ä»ä¹ï¼è¿é¦åéè¦äºè§£ä¸ä¸ pitch loader å VueLoaderPlugin\n\n\n# Pitch Loader\n\n * Normal loaderï¼Loader æ¬è´¨ä¸æ¯å¯¼åºå½æ°ç JavaScript æ¨¡åï¼èè¯¥æ¨¡åå¯¼åºçå½æ°ï¼è¥æ¯ ES6 æ¨¡åï¼åæ¯é»è®¤å¯¼åºçå½æ°ï¼å°±è¢«ç§°ä¸º Normal Loaderãéè¦æ³¨æçæ¯ï¼ Normal Loader ä¸ Webpack Loader åç±»ä¸­å®ä¹ç Loader æ¯ä¸ä¸æ ·çãå¨ Webpack ä¸­ï¼loader å¯ä»¥è¢«åä¸º 4 ç±»ï¼pre åç½®ãpost åç½®ãnormal æ®éå inline è¡åãå¶ä¸­ pre å post loaderï¼å¯ä»¥éè¿ rule å¯¹è±¡ç enforce å±æ§æ¥æå®\n * Pitch loaderï¼å¨å¼å Loader æ¶ï¼æä»¬å¯ä»¥å¨å¯¼åºçå½æ°ä¸æ·»å ä¸ä¸ª pitch å±æ§ï¼å®çå¼ä¹æ¯ä¸ä¸ªå½æ°ãè¯¥å½æ°è¢«ç§°ä¸º Pitching Loader\n\nè¯·çä¾å­ï¼æä»¬å®ä¹ 3 ä¸ª loaderï¼\n\n// aLoader\nfunction aLoader(content, map, meta) {\n  console.log(\"å¼å§æ§è¡aLoader Normal Loader\");\n  content += \"aLoader]\";\n  return `module.exports = '${content}'`;\n}\n\naLoader.pitch = function (remainingRequest, precedingRequest, data) {\n  console.log(\"å¼å§æ§è¡aLoader Pitching Loader\");\n};\n\n// bLoader\nfunction bLoader(content, map, meta) {\n  console.log(\"å¼å§æ§è¡bLoader Normal Loader\");\n  return content + \"bLoader->\";\n}\n\nbLoader.pitch = function (remainingRequest, precedingRequest, data) {\n  console.log(\"å¼å§æ§è¡bLoader Pitching Loader\");\n};\n\n// cLoader\nfunction cLoader(content, map, meta) {\n  console.log(\"å¼å§æ§è¡cLoader Normal Loader\");\n  return content + \"[cLoader->\";\n}\n\ncLoader.pitch = function (remainingRequest, precedingRequest, data) {\n  console.log(\"å¼å§æ§è¡cLoader Pitching Loader\");\n};\n\n// config\nmodule: {\n  rules: [\n    {\n      test: /.txt$/i,\n      use: [\"a-loader\", \"b-loader\", \"c-loader\"],\n    },\n  ],\n},\n\n\nPitching Loader å Normal Loader çæ§è¡é¡ºåºï¼\n\nå¼å§æ§è¡aLoader Pitching Loader\n...\nå¼å§æ§è¡bLoader Pitching Loader\n...\nå¼å§æ§è¡cLoader Pitching Loader\n...\nå¼å§æ§è¡cLoader Normal Loader\nå¼å§æ§è¡bLoader Normal Loader\nå¼å§æ§è¡aLoader Normal Loader\n\n\nå¾ææ¾å¯¹äºæä»¬çç¤ºä¾æ¥è¯´ï¼Pitching Loader çæ§è¡é¡ºåºæ¯ ä»å·¦å°å³ï¼è Normal Loader çæ§è¡é¡ºåºæ¯ ä»å³å°å·¦ãå¶å®Pitching Loaderçå¦ä¸ä¸ªä½ç¨æ¯å½æä¸ª Pitching Loader è¿åé undefined å¼æ¶ï¼å°±ä¼å®ç°çæ­ææãä¾å¦å¨ bLoader.pitch ä¸­è¿åå¼æ¶ï¼æ§è¡ææä¼å¦ä¸å¾æç¤ºï¼\n\n\n\n\n# VueLoaderPlugin\n\n> æä»¬ç¥é Webpack æä»¶çä½ç¨æ¯è½å¤ hook å°å¨æ¯ä¸ªç¼è¯(compilation)ä¸­è§¦åçææå³é®äºä»¶ï¼å¹¶ä¸å¨æä»¶å®ä¾ç apply æ¹æ³ä¸­ï¼å¯ä»¥éè¿ compiler.options è·å Webpack éç½®ï¼å¹¶è¿è¡ä¿®æ¹ã\n\nVueLoaderPlugin çå¤çæµç¨ä¸­ï¼ä¿®æ¹äº module.rulesï¼å¨åæ¥çè§ååºç¡ä¸å å¥äº pitcher å cloneRules ãæ°å¢ç rule ï¼è½è¯å«å½¢å¦ ?vue&type=template ç querystringï¼è®©ä¸åè¯­è¨çä»£ç åå¹éå°å¯¹åºç ruleã\n\nclass VueLoaderPlugin {\n  apply (compiler) {\n    // å¯¹ Webpack éç½®è¿è¡ä¿®æ¹\n    const rawRules = compiler.options.module.rules;\n    const { rules } = new RuleSet(rawRules);\n    ...\n    \n    // pitcher\n    const pitcher = {\n      loader: require.resolve('./loaders/pitcher'),\n      resourceQuery: query => {\n        if (!query) { return false }\n        const parsed = qs.parse(query.slice(1))\n        // å¹éç¬¬ä¸ä¸ªæ¥è¯¢æ¡ä»¶æ¯å¦æ¯ vue\n        return parsed.vue != null\n      },\n      options: { ... }\n    }\n\n    // æ¿æ¢åå§ module.rulesï¼å¨åæ rule ä¸ï¼å¢å  pitcherãclonedRules\n    compiler.options.module.rules = [\n       pitcher,\n       ...clonedRules,\n       ...rules\n     ];\n  }\n}\n\n\n\n\n * å¨è¿éç±äºæä»¬æ³¨å¥äº pitcher è§åï¼ä¸é¢ç source.vue?vue&type=script è¢« pitcher è§åå¹éå°ï¼å°±ä¼è¢« pitchå½æ° å¤çï¼ä¸ pitch ä¸­è¿åäºç»æï¼ç±äºçæ­æºå¶ä¼è·³è¿å©ä½ç loaderãè¿ä¸ªå½æ°æ ¹æ®åæ° type æ¥çæ è¡ålodaer ï¼\n\nexport * from \"-!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=template&id=21fec300&\"\n\n\n * è¡åloader æç§ä»å³å°å·¦çé¡ºåºæ§è¡ï¼å¨å¾å°ä¸è¿°ç request ä¹åï¼webpackä¼åä½¿ç¨ vue-loader å¤çï¼ç¶ååä½¿ç¨ template-loader æ¥å¤çï¼æç»å¾å°çå°±æ¯ render å½æ°ã\n\n> å¨ PitchLoader çè½¬åç»æä¸­ï¼è¿æ¯ä¼ä»¥ vue-loader ä½ä¸ºç¬¬ä¸ä¸ªå¤çç loaderï¼ä¸ç¬¬ä¸æ¬¡ vue-loader å¤çä¸åçæ¯ï¼è¿æ¬¡ vue-loader çä½ç¨ï¼ä»ä»æ¯æ SFC ä¸­è¯­æ³åçæºç æååºæ¥ï¼å¹¶äº¤ç»åé¢ç loader è¿è¡å¤çã\n\n\n\n\n# @vue/component-compiler-utils\n\n> ç¨æ¥ç¼è¯ vue åæä»¶ç»ä»¶\n\n@vue/component-compiler-utils çä½ç¨æ¯è§£æ vue SFC å¹¶åå«å¾å° html(æ¨¡æ¿) å JavaScript(scriptå) çæºç ãå¯¹äº html æºç æä»¬å¯ä»¥åæ¬¡ä½¿ç¨ vue-template-compiler æ¨¡åå°å¶è§£æä¸ºæ¨¡æ¿å¯¹åºç renderå½æ°ã\n\n\n# API\n\n# parse(ParseOptions): SFCDescriptor\n\nå° SFC è§£æä¸ºä¸ä¸ªå¸¦æ source map ç SFC æè¿°å¨ãç¼è¯å¨ (vue-template-compiler) éè¿ compiler ä¼ å¥ã\n\ninterface ParseOptions {\n  source: string\n  filename?: string\n  compiler: VueTemplateCompiler\n  // https://github.com/vuejs/vue/tree/dev/packages/vue-template-compiler#compilerparsecomponentfile-options\n  // default: { pad: 'line' }\n  compilerParseOptions?: VueTemplateCompilerParseOptions\n  sourceRoot?: string\n  needMap?: boolean\n}\n\ninterface SFCDescriptor {\n  template: SFCBlock | null\n  script: SFCBlock | null\n  styles: SFCBlock[]\n  customBlocks: SFCCustomBlock[]\n}\n\ninterface SFCCustomBlock {\n  type: string\n  content: string\n  attrs: { [key: string]: string | true }\n  start: number\n  end: number\n  map?: RawSourceMap\n}\n\ninterface SFCBlock extends SFCCustomBlock {\n  lang?: string\n  src?: string\n  scoped?: boolean\n  module?: string | boolean\n}\n\n\n# compileTemplate(TemplateCompileOptions): TemplateCompileResults\n\nå° template ç¼è¯ä¸º JavaScript ä»£ç ãç¼è¯å¨ (vue-template-compiler) éè¿ compiler éé¡¹è¢«ä¼ å¥ã\n\nå®ä¹å¯ä»¥éè¿ consolidate å¯éå°ä¸ºä»»ä½æ¨¡æ¿å¼æè¿è¡é¢å¤çã\n\ninterface TemplateCompileOptions {\n  source: string\n  filename: string\n\n  compiler: VueTemplateCompiler\n  https://github.com/vuejs/vue/tree/dev/packages/vue-template-compiler#compilercompiletemplate-options\n  // default: {}\n  compilerOptions?: VueTemplateCompilerOptions\n\n  // Template preprocessor\n  preprocessLang?: string\n  preprocessOptions?: any\n\n  // å°æ¨¡æ¿éæ¾å°çèµæº URL è½¬æ¢ä¸º `require()` è°ç¨\n  // è¿ä¸ªéé¡¹é»è®¤æ¯å³é­çãå¦æè®¾ç½®ä¸º trueï¼åé»è®¤å¼ä¸ºï¼\n  // {\n  //   video: ['src', 'poster'],\n  //   source: 'src',\n  //   img: 'src',\n  //   image: 'xlink:href'\n  //   use: 'xlink:href'\n  // }\n  transformAssetUrls?: AssetURLOptions | boolean\n\n  // ä¸º vue-template-es2015-compilerï¼å³ä¸ä¸ª Buble ç forkï¼æå®çéé¡¹\n  transpileOptions?: any\n\n  isProduction?: boolean  // default: false\n  isFunctional?: boolean  // default: false\n  optimizeSSR?: boolean   // default: false\n\n  // æ¯å¦ç¾åç¼è¯åçæ¸²æå½æ° (åªå¨å¼åç¯å¢ä¸ææ)\n  // é»è®¤å¼ï¼true\n  prettify?: boolean\n}\n\ninterface TemplateCompileResult {\n  code: string\n  source: string\n  tips: string[]\n  errors: string[]\n}\n\ninterface AssetURLOptions {\n  [name: string]: string | string[]\n}\n\n\nå¤çå¾å°ç JavaScript ä»£ç å½¢å¦ï¼\n\nvar render = function (h) { /* ... */}\nvar staticRenderFns = [function (h) { /* ... */}, function (h) { /* ... */}]\n\n\nå®ä¸ä¼åå®ä»»ä½æ¨¡åç³»ç»ãä½ è¦å¨å¿è¦çæ¶åè´è´£å¤çå¯¼åºã\n\n# compileStyle(StyleCompileOptions)\n\nå°è¾å¥çåå§ CSS è¿è¡ scoped CSS è½¬æ¢ãå®ä¸ä¼å¤çé¢å¤çå¨ãå¦æç»ä»¶æ²¡æä½¿ç¨ scoped CSS é£ä¹è¿ä¸æ­¥ä¼è¢«è·³è¿ã\n\ninterface StyleCompileOptions {\n  source: string\n  filename: string\n  id: string\n  map?: any\n  scoped?: boolean\n  trim?: boolean\n  preprocessLang?: string\n  preprocessOptions?: any\n  postcssOptions?: any\n  postcssPlugins?: any[]\n}\n\ninterface StyleCompileResults {\n  code: string\n  map: any | void\n  rawResult: LazyResult | void // æ¥èª PostCSS çæå¤çåå§ç»æ\n  errors: string[]\n}\n\n\n# compileStyleAsync(StyleCompileOptions)\n\nå compileStyle(StyleCompileOptions) ç¸åï¼ä½æ¯è¿åä¸ä¸ªè§£æ StyleCompileResults ç Promise å¯¹è±¡ãå¯ç¨äºå¼æ­¥ç PostCSS æä»¶ã\n\n\n# vue-template-compiler\n\n\n\næ¨¡æ¿ç¼è¯çä½ç¨æ¯å°æ¨¡æ¿ï¼templateï¼è½¬æ¢ä¸ºæ¸²æå½æ°ï¼renderï¼ï¼template => ast => render\n\n * æ¨¡æ¿\n\n<div>\n  <h1 @click=\"handler\">title</h1>\n  <p>some content</p>\n</div>\n\n\n * æ¸²æå½æ°\n\nrender (h) {\n  return h('div', [\n    h('h1', { on: { click: this.handler } }, 'title'),\n    h('p', 'some content')\n  ])\n}\n\n\næ¸²æå½æ°ä¸­ç h å½æ°åé¨è°ç¨ vm.$createElement çæèæ DOM\n\n\n# æ¨¡æ¿ç¼è¯çä½ç¨\n\n * Vue 2.x ä¸­ä½¿ç¨ VNode æè¿°è§å¾ä»¥ååç§æä½ï¼ä½æ¯ä¸å¯è½è®©ç¨æ·èªå·±å VNode æè æ¸²æå½æ°ï¼ç¨æ·åªéè¦åç±»ä¼¼ HTML ä»£ç ï¼éè¿ç¼è¯å¨å°æ¨¡æ¿è½¬æ¢æè¿å VNode ç render å½æ°\n\n * .vueæä»¶ä¼è¢« webpack æå»ºè¿ç¨ä¸­è½¬æ¢æ render å½æ°ï¼webpack æ¬èº«æ¯ä¸æ¯æè½¬æ¢çï¼æ¯éè¿ vue-loaderæ¥æ¯æç\n\n * è¿è¡æ¶ç¼è¯ï¼è¿è¡æ¶ç¼è¯çåææ¯å¿é¡»ä½¿ç¨å®æ´çç vueï¼åå«ç¼è¯å¨ï¼ï¼ä¼å¨é¡¹ç®è¿è¡çè¿ç¨ä¸­ææ¨¡æ¿ç¼è¯æ render å½æ°ï¼ä½æ¯ç¼ºç¹æ¯ vue ä½ç§¯è¿å¤§ã\n\n * æå»ºæ¶ç¼è¯ï¼vue-clièªå¸¦çæ¯è¿è¡æ¶çæ¬ç vueï¼ä½¿ç¨ webpack + vue-loaderå®æç¼è¯ï¼è¿æ ·ä¸ä»ä½ç§¯å°èä¸è¿è¡æ¶ä¸éè¦é¢å¤æä½æ¶é´æ´å¿«ã\n\n\n# ä½éªæ¨¡æ¿ç¼è¯çç»æ\n\n * å¸¦ç¼è¯å¨çæ¬ç Vue.js ä¸­ï¼ä½¿ç¨ template æ el çæ¹å¼è®¾ç½®æ¨¡æ¿\n\n<div id=\"app\">\n  <h1>Vue<span>æ¨¡æ¿ç¼è¯è¿ç¨</span></h1>\n  <p>{{ msg }}</p>\n\t<comp @myclick=\"handler\"></comp>\n</div>\n<script src=\"../../dist/vue.js\"><\/script>\n<script>\n  Vue.component('comp', {\n    template: '<div>I am a comp</div>'\n  })\n  const vm = new Vue({\n    el: '#app',\n    data: {\n      msg: 'Hello compiler'\n    },\n    methods: {\n      handler () {\n        console.log('test')\n      }\n     } \n  })\n  console.log(vm.$options.render)\n<\/script>\n\n\n * ç¼è¯å render è¾åºçç»æ\n\n(function anonymous() {\n  with (this) {\n    return _c(\n      \"div\",\n      { attrs: { id: \"app\" } },\n      [\n        _m(0),\n        _v(\" \"),\n        _c(\"p\", [_v(_s(msg))]),\n        _v(\" \"),\n        _c(\"comp\", { on: { myclick: handler } }),\n\t\t\t],\n\t\t\t1\n\t\t);\n  }\n});\n\n\n> _cï¼ createElement\n> \n> _mï¼renderStaticï¼å¤çéæèç¹\n> \n> _vï¼createTextVNodeï¼å¤çææ¬èç¹\n> \n> _sï¼å¤çå­ç¬¦ä¸²\n\n\n# Vue Template Explorer\n\n * vue-template-explorerï¼Vue 2.6 ææ¨¡æ¿ç¼è¯æ render å½æ°çå·¥å·\n * vue-next-template-explorerï¼Vue 3.0 beta ææ¨¡æ¿ç¼è¯æ render å½æ°çå·¥å·\n\n\n# æ¨¡æ¿ç¼è¯è¿ç¨\n\n * è§£æãä¼åãçæ\n\n# ç¼è¯å¥å£\n\n * src\\platforms\\web\\entry-runtime-with-compiler.js\n\nVue.prototype.$mount = function (\n  ......\n// æ template è½¬æ¢æ render å½æ°\nconst { render, staticRenderFns } = compileToFunctions(template, {\n    outputSourceRange: process.env.NODE_ENV !== 'production',\n    shouldDecodeNewlines,\n    shouldDecodeNewlinesForHref,\n    delimiters: options.delimiters,\n    comments: options.comments\n  }, this)\n  options.render = render\n  options.staticRenderFns = staticRenderFns\n  ......\n)\n\n\n * è°è¯ compileToFunctions() æ§è¡è¿ç¨ï¼çææ¸²æå½æ°çè¿ç¨ï¼\n   * compileToFunctions: src\\compiler\\to-function.js\n   * complie(template, options):src\\compiler\\create-compiler.jsï¼ä¸»è¦ä½ç¨æ¯åå¹¶ options\n   * baseCompile(template.trim(), finalOptions):src\\compiler\\index.jsï¼æ ¸å¿ç¼è¯å½æ°\n\nexport const createCompiler = createCompilerCreator(function baseCompile (\n  template: string,\n  options: CompilerOptions\n): CompiledResult {\n  // ææ¨¡æ¿è½¬æ¢æ ast æ½è±¡è¯­æ³æ \n  const ast = parse(template.trim(), options)\n  if (options.optimize !== false) {\n    // ä¼åæ½è±¡è¯­æ³æ \n    optimize(ast, options)\n  }\n  // ææ½è±¡è¯­æ³æ çæå­ç¬¦ä¸²å½¢å¼ç js ä»£ç \n  const code = generate(ast, options)\n  return {\n    ast,\n    // æ¸²æå½æ°\n    render: code.render,\n    // éææ¸²æå½æ°ï¼çæéæ VNode æ \n    staticRenderFns: code.staticRenderFns\n  }\n})\n\n\n# è§£æ-parse\n\n * è§£æå¨å°æ¨¡æ¿è§£æä¸ºæ½è±¡è¯­æ  ASTï¼åªæå°æ¨¡æ¿è§£ææ AST åï¼æè½åºäºå®åä¼åæèçæä»£ç å­ç¬¦ä¸²ã\n\nconst ast = parse(template.trim(), options)\n\n//src\\compiler\\parser\\index.js\nparse()\n\n\n# ä¼å-optimize\n\n * ä¼åæ½è±¡è¯­æ³æ ï¼æ£æµå­èç¹ä¸­æ¯å¦æ¯çº¯éæèç¹\n * ä¸æ¦æ£æµå°çº¯éæèç¹ï¼ä¾å¦æ°¸è¿ä¸ä¼æ´æ¹çèç¹\n   * æåä¸ºå¸¸éï¼éæ°æ¸²æçæ¶åä¸å¨éæ°åå»ºèç¹\n   * å¨ patch çæ¶åç´æ¥è·³è¿éæå­æ \n\n# çæ-generate\n\n// src\\compiler\\index.js\nconst code = generate(ast, options)\n\n// src\\compiler\\codegen\\index.js\nexport function generate (\n  ast: ASTElement | void,\n  options: CompilerOptions\n): CodegenResult {\n  const state = new CodegenState(options)\n  const code = ast ? genElement(ast, state) : '_c(\"div\")'\n  return {\n    render: `with(this){return ${code}}`,\n    staticRenderFns: state.staticRenderFns // éææ ¹èç¹å¯¹åºçæ¸²æå½æ°\n  }\n}\n\n// æå­ç¬¦ä¸²è½¬æ¢æå½æ°\n// src\\compiler\\to-function.js\nfunction createFunction (code, errors) {\n  try {\n    return new Function(code)\n  } catch (err) {\n    errors.push({ err, code })\n    return noop\n} }\n\n\nåèé¾æ¥\n\n * vue-loader\n\n * å¤å¾è¯¦è§£ï¼ä¸æ¬¡æ§ææWebpack Loader\n\n * å¾è§£ VueLoader : .vue æä»¶æ¯å¦ä½è¢«æåç?\n\n * vue-loaderé½åäºäºä»ä¹\n\n * æ·±å¥ vue-loader åç\n\n * Webpack æ¡ä¾ ââ vue-loader åçåæ",normalizedContent:"# vue-loaderåçè§£æ\n\n\n# vue-loader\n\n> vue-loader æ¯ç¨äº webpack çå è½½å¨ï¼åè®¸ä½ ç¨ single-file components åæä»¶ç»ä»¶çæ ¼å¼æ¥å vue ç»ä»¶ãå¶ä½ç¨å°±æ¯æå *.vue æä»¶ä¸­çtemplateï¼scriptï¼styleç­ï¼åéè¿ vue-template-compilerï¼style-loader ç­æä»¶ï¼æç»å½¢æä¸ä¸ªå¯ä»¥å¨æµè§å¨ä¸­è¿è¡ç js æä»¶ã\n\n\n# vue-loader å¤ç sfc\n\n * é¦å vue-loader æ¯æä¹å¤ç sfc çï¼ä»ä¼ä½¿ç¨ @vue/component-compiler-utils ï¼ä¸æä¼ä»ç»ï¼å° sfc æºç è§£ææ sfc æè¿°ç¬¦ ï¼æºç å°å\n\n// vue-loader lib/index.js\nconst { parse } = require('@vue/component-compiler-utils');\n\nmodule.exports = function (source) {\n  // è§£ææºç ï¼å¾å°æè¿°ç¬¦\n  const descriptor = parse({ source, ... });\n\t\n  // æå°ç»æ\n  console.log(descriptor);\n  /**\n  \tdescriptor {\n      template: { ... },\n      script: { ... },\n      styles: [ ... ],\n      customblocks: [],\n      errors: []\n    }\n  */\n}\n\n\n * ç¶åæ ¹æ® sfcæè¿°ç¬¦ ä¸ºæ¯ä¸ªè¯­è¨åè¿è¡å¤çï¼æºç å°å\n\n  // å¦æ template åå­å¨\n  if (descriptor.template) { ... }\n  // å¦æ script åå­å¨\n  if (descriptor.script) { ... }\n  // å¦æ style åå­å¨ï¼æ¯æå¤ style åï¼\n  if (descriptor.styles.length) { ... }\n  // vue è¿æ¯æèªå®ä¹å\n  if (descriptor.customblocks && descriptor.customblocks.length) { ... }\n\n\n * å¤çåæå°åºçç»æï¼\n\n// ä»ä¸»å è½½ç¨åºè¿åçä»£ç source.vueçä»£ç \n\n// import the <template> block\nimport render from 'source.vue?vue&type=template'\n\n// import the <script> block\nimport script from 'source.vue?vue&type=script'\nexport * from 'source.vue?vue&type=script'\n\n// import <style> blocks\nimport 'source.vue?vue&type=style&index=1'\n\nscript.render = render\nexport default script\n\n\n * ä»¥ä¸å°±æ¯ä½¿ç¨ vue-loader å¤ç sfc çç»æï¼é£ä¹é®é¢æ¥äºè¯­å¥ä¸­?vue&type=template çä½ç¨æ¯ä»ä¹ï¼è¿é¦åéè¦äºè§£ä¸ä¸ pitch loader å vueloaderplugin\n\n\n# pitch loader\n\n * normal loaderï¼loader æ¬è´¨ä¸æ¯å¯¼åºå½æ°ç javascript æ¨¡åï¼èè¯¥æ¨¡åå¯¼åºçå½æ°ï¼è¥æ¯ es6 æ¨¡åï¼åæ¯é»è®¤å¯¼åºçå½æ°ï¼å°±è¢«ç§°ä¸º normal loaderãéè¦æ³¨æçæ¯ï¼ normal loader ä¸ webpack loader åç±»ä¸­å®ä¹ç loader æ¯ä¸ä¸æ ·çãå¨ webpack ä¸­ï¼loader å¯ä»¥è¢«åä¸º 4 ç±»ï¼pre åç½®ãpost åç½®ãnormal æ®éå inline è¡åãå¶ä¸­ pre å post loaderï¼å¯ä»¥éè¿ rule å¯¹è±¡ç enforce å±æ§æ¥æå®\n * pitch loaderï¼å¨å¼å loader æ¶ï¼æä»¬å¯ä»¥å¨å¯¼åºçå½æ°ä¸æ·»å ä¸ä¸ª pitch å±æ§ï¼å®çå¼ä¹æ¯ä¸ä¸ªå½æ°ãè¯¥å½æ°è¢«ç§°ä¸º pitching loader\n\nè¯·çä¾å­ï¼æä»¬å®ä¹ 3 ä¸ª loaderï¼\n\n// aloader\nfunction aloader(content, map, meta) {\n  console.log(\"å¼å§æ§è¡aloader normal loader\");\n  content += \"aloader]\";\n  return `module.exports = '${content}'`;\n}\n\naloader.pitch = function (remainingrequest, precedingrequest, data) {\n  console.log(\"å¼å§æ§è¡aloader pitching loader\");\n};\n\n// bloader\nfunction bloader(content, map, meta) {\n  console.log(\"å¼å§æ§è¡bloader normal loader\");\n  return content + \"bloader->\";\n}\n\nbloader.pitch = function (remainingrequest, precedingrequest, data) {\n  console.log(\"å¼å§æ§è¡bloader pitching loader\");\n};\n\n// cloader\nfunction cloader(content, map, meta) {\n  console.log(\"å¼å§æ§è¡cloader normal loader\");\n  return content + \"[cloader->\";\n}\n\ncloader.pitch = function (remainingrequest, precedingrequest, data) {\n  console.log(\"å¼å§æ§è¡cloader pitching loader\");\n};\n\n// config\nmodule: {\n  rules: [\n    {\n      test: /.txt$/i,\n      use: [\"a-loader\", \"b-loader\", \"c-loader\"],\n    },\n  ],\n},\n\n\npitching loader å normal loader çæ§è¡é¡ºåºï¼\n\nå¼å§æ§è¡aloader pitching loader\n...\nå¼å§æ§è¡bloader pitching loader\n...\nå¼å§æ§è¡cloader pitching loader\n...\nå¼å§æ§è¡cloader normal loader\nå¼å§æ§è¡bloader normal loader\nå¼å§æ§è¡aloader normal loader\n\n\nå¾ææ¾å¯¹äºæä»¬çç¤ºä¾æ¥è¯´ï¼pitching loader çæ§è¡é¡ºåºæ¯ ä»å·¦å°å³ï¼è normal loader çæ§è¡é¡ºåºæ¯ ä»å³å°å·¦ãå¶å®pitching loaderçå¦ä¸ä¸ªä½ç¨æ¯å½æä¸ª pitching loader è¿åé undefined å¼æ¶ï¼å°±ä¼å®ç°çæ­ææãä¾å¦å¨ bloader.pitch ä¸­è¿åå¼æ¶ï¼æ§è¡ææä¼å¦ä¸å¾æç¤ºï¼\n\n\n\n\n# vueloaderplugin\n\n> æä»¬ç¥é webpack æä»¶çä½ç¨æ¯è½å¤ hook å°å¨æ¯ä¸ªç¼è¯(compilation)ä¸­è§¦åçææå³é®äºä»¶ï¼å¹¶ä¸å¨æä»¶å®ä¾ç apply æ¹æ³ä¸­ï¼å¯ä»¥éè¿ compiler.options è·å webpack éç½®ï¼å¹¶è¿è¡ä¿®æ¹ã\n\nvueloaderplugin çå¤çæµç¨ä¸­ï¼ä¿®æ¹äº module.rulesï¼å¨åæ¥çè§ååºç¡ä¸å å¥äº pitcher å clonerules ãæ°å¢ç rule ï¼è½è¯å«å½¢å¦ ?vue&type=template ç querystringï¼è®©ä¸åè¯­è¨çä»£ç åå¹éå°å¯¹åºç ruleã\n\nclass vueloaderplugin {\n  apply (compiler) {\n    // å¯¹ webpack éç½®è¿è¡ä¿®æ¹\n    const rawrules = compiler.options.module.rules;\n    const { rules } = new ruleset(rawrules);\n    ...\n    \n    // pitcher\n    const pitcher = {\n      loader: require.resolve('./loaders/pitcher'),\n      resourcequery: query => {\n        if (!query) { return false }\n        const parsed = qs.parse(query.slice(1))\n        // å¹éç¬¬ä¸ä¸ªæ¥è¯¢æ¡ä»¶æ¯å¦æ¯ vue\n        return parsed.vue != null\n      },\n      options: { ... }\n    }\n\n    // æ¿æ¢åå§ module.rulesï¼å¨åæ rule ä¸ï¼å¢å  pitcherãclonedrules\n    compiler.options.module.rules = [\n       pitcher,\n       ...clonedrules,\n       ...rules\n     ];\n  }\n}\n\n\n\n\n * å¨è¿éç±äºæä»¬æ³¨å¥äº pitcher è§åï¼ä¸é¢ç source.vue?vue&type=script è¢« pitcher è§åå¹éå°ï¼å°±ä¼è¢« pitchå½æ° å¤çï¼ä¸ pitch ä¸­è¿åäºç»æï¼ç±äºçæ­æºå¶ä¼è·³è¿å©ä½ç loaderãè¿ä¸ªå½æ°æ ¹æ®åæ° type æ¥çæ è¡ålodaer ï¼\n\nexport * from \"-!../../node_modules/vue-loader/lib/loaders/templateloader.js??vue-loader-options!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=template&id=21fec300&\"\n\n\n * è¡åloader æç§ä»å³å°å·¦çé¡ºåºæ§è¡ï¼å¨å¾å°ä¸è¿°ç request ä¹åï¼webpackä¼åä½¿ç¨ vue-loader å¤çï¼ç¶ååä½¿ç¨ template-loader æ¥å¤çï¼æç»å¾å°çå°±æ¯ render å½æ°ã\n\n> å¨ pitchloader çè½¬åç»æä¸­ï¼è¿æ¯ä¼ä»¥ vue-loader ä½ä¸ºç¬¬ä¸ä¸ªå¤çç loaderï¼ä¸ç¬¬ä¸æ¬¡ vue-loader å¤çä¸åçæ¯ï¼è¿æ¬¡ vue-loader çä½ç¨ï¼ä»ä»æ¯æ sfc ä¸­è¯­æ³åçæºç æååºæ¥ï¼å¹¶äº¤ç»åé¢ç loader è¿è¡å¤çã\n\n\n\n\n# @vue/component-compiler-utils\n\n> ç¨æ¥ç¼è¯ vue åæä»¶ç»ä»¶\n\n@vue/component-compiler-utils çä½ç¨æ¯è§£æ vue sfc å¹¶åå«å¾å° html(æ¨¡æ¿) å javascript(scriptå) çæºç ãå¯¹äº html æºç æä»¬å¯ä»¥åæ¬¡ä½¿ç¨ vue-template-compiler æ¨¡åå°å¶è§£æä¸ºæ¨¡æ¿å¯¹åºç renderå½æ°ã\n\n\n# api\n\n# parse(parseoptions): sfcdescriptor\n\nå° sfc è§£æä¸ºä¸ä¸ªå¸¦æ source map ç sfc æè¿°å¨ãç¼è¯å¨ (vue-template-compiler) éè¿ compiler ä¼ å¥ã\n\ninterface parseoptions {\n  source: string\n  filename?: string\n  compiler: vuetemplatecompiler\n  // https://github.com/vuejs/vue/tree/dev/packages/vue-template-compiler#compilerparsecomponentfile-options\n  // default: { pad: 'line' }\n  compilerparseoptions?: vuetemplatecompilerparseoptions\n  sourceroot?: string\n  needmap?: boolean\n}\n\ninterface sfcdescriptor {\n  template: sfcblock | null\n  script: sfcblock | null\n  styles: sfcblock[]\n  customblocks: sfccustomblock[]\n}\n\ninterface sfccustomblock {\n  type: string\n  content: string\n  attrs: { [key: string]: string | true }\n  start: number\n  end: number\n  map?: rawsourcemap\n}\n\ninterface sfcblock extends sfccustomblock {\n  lang?: string\n  src?: string\n  scoped?: boolean\n  module?: string | boolean\n}\n\n\n# compiletemplate(templatecompileoptions): templatecompileresults\n\nå° template ç¼è¯ä¸º javascript ä»£ç ãç¼è¯å¨ (vue-template-compiler) éè¿ compiler éé¡¹è¢«ä¼ å¥ã\n\nå®ä¹å¯ä»¥éè¿ consolidate å¯éå°ä¸ºä»»ä½æ¨¡æ¿å¼æè¿è¡é¢å¤çã\n\ninterface templatecompileoptions {\n  source: string\n  filename: string\n\n  compiler: vuetemplatecompiler\n  https://github.com/vuejs/vue/tree/dev/packages/vue-template-compiler#compilercompiletemplate-options\n  // default: {}\n  compileroptions?: vuetemplatecompileroptions\n\n  // template preprocessor\n  preprocesslang?: string\n  preprocessoptions?: any\n\n  // å°æ¨¡æ¿éæ¾å°çèµæº url è½¬æ¢ä¸º `require()` è°ç¨\n  // è¿ä¸ªéé¡¹é»è®¤æ¯å³é­çãå¦æè®¾ç½®ä¸º trueï¼åé»è®¤å¼ä¸ºï¼\n  // {\n  //   video: ['src', 'poster'],\n  //   source: 'src',\n  //   img: 'src',\n  //   image: 'xlink:href'\n  //   use: 'xlink:href'\n  // }\n  transformasseturls?: asseturloptions | boolean\n\n  // ä¸º vue-template-es2015-compilerï¼å³ä¸ä¸ª buble ç forkï¼æå®çéé¡¹\n  transpileoptions?: any\n\n  isproduction?: boolean  // default: false\n  isfunctional?: boolean  // default: false\n  optimizessr?: boolean   // default: false\n\n  // æ¯å¦ç¾åç¼è¯åçæ¸²æå½æ° (åªå¨å¼åç¯å¢ä¸ææ)\n  // é»è®¤å¼ï¼true\n  prettify?: boolean\n}\n\ninterface templatecompileresult {\n  code: string\n  source: string\n  tips: string[]\n  errors: string[]\n}\n\ninterface asseturloptions {\n  [name: string]: string | string[]\n}\n\n\nå¤çå¾å°ç javascript ä»£ç å½¢å¦ï¼\n\nvar render = function (h) { /* ... */}\nvar staticrenderfns = [function (h) { /* ... */}, function (h) { /* ... */}]\n\n\nå®ä¸ä¼åå®ä»»ä½æ¨¡åç³»ç»ãä½ è¦å¨å¿è¦çæ¶åè´è´£å¤çå¯¼åºã\n\n# compilestyle(stylecompileoptions)\n\nå°è¾å¥çåå§ css è¿è¡ scoped css è½¬æ¢ãå®ä¸ä¼å¤çé¢å¤çå¨ãå¦æç»ä»¶æ²¡æä½¿ç¨ scoped css é£ä¹è¿ä¸æ­¥ä¼è¢«è·³è¿ã\n\ninterface stylecompileoptions {\n  source: string\n  filename: string\n  id: string\n  map?: any\n  scoped?: boolean\n  trim?: boolean\n  preprocesslang?: string\n  preprocessoptions?: any\n  postcssoptions?: any\n  postcssplugins?: any[]\n}\n\ninterface stylecompileresults {\n  code: string\n  map: any | void\n  rawresult: lazyresult | void // æ¥èª postcss çæå¤çåå§ç»æ\n  errors: string[]\n}\n\n\n# compilestyleasync(stylecompileoptions)\n\nå compilestyle(stylecompileoptions) ç¸åï¼ä½æ¯è¿åä¸ä¸ªè§£æ stylecompileresults ç promise å¯¹è±¡ãå¯ç¨äºå¼æ­¥ç postcss æä»¶ã\n\n\n# vue-template-compiler\n\n\n\næ¨¡æ¿ç¼è¯çä½ç¨æ¯å°æ¨¡æ¿ï¼templateï¼è½¬æ¢ä¸ºæ¸²æå½æ°ï¼renderï¼ï¼template => ast => render\n\n * æ¨¡æ¿\n\n<div>\n  <h1 @click=\"handler\">title</h1>\n  <p>some content</p>\n</div>\n\n\n * æ¸²æå½æ°\n\nrender (h) {\n  return h('div', [\n    h('h1', { on: { click: this.handler } }, 'title'),\n    h('p', 'some content')\n  ])\n}\n\n\næ¸²æå½æ°ä¸­ç h å½æ°åé¨è°ç¨ vm.$createelement çæèæ dom\n\n\n# æ¨¡æ¿ç¼è¯çä½ç¨\n\n * vue 2.x ä¸­ä½¿ç¨ vnode æè¿°è§å¾ä»¥ååç§æä½ï¼ä½æ¯ä¸å¯è½è®©ç¨æ·èªå·±å vnode æè æ¸²æå½æ°ï¼ç¨æ·åªéè¦åç±»ä¼¼ html ä»£ç ï¼éè¿ç¼è¯å¨å°æ¨¡æ¿è½¬æ¢æè¿å vnode ç render å½æ°\n\n * .vueæä»¶ä¼è¢« webpack æå»ºè¿ç¨ä¸­è½¬æ¢æ render å½æ°ï¼webpack æ¬èº«æ¯ä¸æ¯æè½¬æ¢çï¼æ¯éè¿ vue-loaderæ¥æ¯æç\n\n * è¿è¡æ¶ç¼è¯ï¼è¿è¡æ¶ç¼è¯çåææ¯å¿é¡»ä½¿ç¨å®æ´çç vueï¼åå«ç¼è¯å¨ï¼ï¼ä¼å¨é¡¹ç®è¿è¡çè¿ç¨ä¸­ææ¨¡æ¿ç¼è¯æ render å½æ°ï¼ä½æ¯ç¼ºç¹æ¯ vue ä½ç§¯è¿å¤§ã\n\n * æå»ºæ¶ç¼è¯ï¼vue-clièªå¸¦çæ¯è¿è¡æ¶çæ¬ç vueï¼ä½¿ç¨ webpack + vue-loaderå®æç¼è¯ï¼è¿æ ·ä¸ä»ä½ç§¯å°èä¸è¿è¡æ¶ä¸éè¦é¢å¤æä½æ¶é´æ´å¿«ã\n\n\n# ä½éªæ¨¡æ¿ç¼è¯çç»æ\n\n * å¸¦ç¼è¯å¨çæ¬ç vue.js ä¸­ï¼ä½¿ç¨ template æ el çæ¹å¼è®¾ç½®æ¨¡æ¿\n\n<div id=\"app\">\n  <h1>vue<span>æ¨¡æ¿ç¼è¯è¿ç¨</span></h1>\n  <p>{{ msg }}</p>\n\t<comp @myclick=\"handler\"></comp>\n</div>\n<script src=\"../../dist/vue.js\"><\/script>\n<script>\n  vue.component('comp', {\n    template: '<div>i am a comp</div>'\n  })\n  const vm = new vue({\n    el: '#app',\n    data: {\n      msg: 'hello compiler'\n    },\n    methods: {\n      handler () {\n        console.log('test')\n      }\n     } \n  })\n  console.log(vm.$options.render)\n<\/script>\n\n\n * ç¼è¯å render è¾åºçç»æ\n\n(function anonymous() {\n  with (this) {\n    return _c(\n      \"div\",\n      { attrs: { id: \"app\" } },\n      [\n        _m(0),\n        _v(\" \"),\n        _c(\"p\", [_v(_s(msg))]),\n        _v(\" \"),\n        _c(\"comp\", { on: { myclick: handler } }),\n\t\t\t],\n\t\t\t1\n\t\t);\n  }\n});\n\n\n> _cï¼ createelement\n> \n> _mï¼renderstaticï¼å¤çéæèç¹\n> \n> _vï¼createtextvnodeï¼å¤çææ¬èç¹\n> \n> _sï¼å¤çå­ç¬¦ä¸²\n\n\n# vue template explorer\n\n * vue-template-explorerï¼vue 2.6 ææ¨¡æ¿ç¼è¯æ render å½æ°çå·¥å·\n * vue-next-template-explorerï¼vue 3.0 beta ææ¨¡æ¿ç¼è¯æ render å½æ°çå·¥å·\n\n\n# æ¨¡æ¿ç¼è¯è¿ç¨\n\n * è§£æãä¼åãçæ\n\n# ç¼è¯å¥å£\n\n * src\\platforms\\web\\entry-runtime-with-compiler.js\n\nvue.prototype.$mount = function (\n  ......\n// æ template è½¬æ¢æ render å½æ°\nconst { render, staticrenderfns } = compiletofunctions(template, {\n    outputsourcerange: process.env.node_env !== 'production',\n    shoulddecodenewlines,\n    shoulddecodenewlinesforhref,\n    delimiters: options.delimiters,\n    comments: options.comments\n  }, this)\n  options.render = render\n  options.staticrenderfns = staticrenderfns\n  ......\n)\n\n\n * è°è¯ compiletofunctions() æ§è¡è¿ç¨ï¼çææ¸²æå½æ°çè¿ç¨ï¼\n   * compiletofunctions: src\\compiler\\to-function.js\n   * complie(template, options):src\\compiler\\create-compiler.jsï¼ä¸»è¦ä½ç¨æ¯åå¹¶ options\n   * basecompile(template.trim(), finaloptions):src\\compiler\\index.jsï¼æ ¸å¿ç¼è¯å½æ°\n\nexport const createcompiler = createcompilercreator(function basecompile (\n  template: string,\n  options: compileroptions\n): compiledresult {\n  // ææ¨¡æ¿è½¬æ¢æ ast æ½è±¡è¯­æ³æ \n  const ast = parse(template.trim(), options)\n  if (options.optimize !== false) {\n    // ä¼åæ½è±¡è¯­æ³æ \n    optimize(ast, options)\n  }\n  // ææ½è±¡è¯­æ³æ çæå­ç¬¦ä¸²å½¢å¼ç js ä»£ç \n  const code = generate(ast, options)\n  return {\n    ast,\n    // æ¸²æå½æ°\n    render: code.render,\n    // éææ¸²æå½æ°ï¼çæéæ vnode æ \n    staticrenderfns: code.staticrenderfns\n  }\n})\n\n\n# è§£æ-parse\n\n * è§£æå¨å°æ¨¡æ¿è§£æä¸ºæ½è±¡è¯­æ  astï¼åªæå°æ¨¡æ¿è§£ææ ast åï¼æè½åºäºå®åä¼åæèçæä»£ç å­ç¬¦ä¸²ã\n\nconst ast = parse(template.trim(), options)\n\n//src\\compiler\\parser\\index.js\nparse()\n\n\n# ä¼å-optimize\n\n * ä¼åæ½è±¡è¯­æ³æ ï¼æ£æµå­èç¹ä¸­æ¯å¦æ¯çº¯éæèç¹\n * ä¸æ¦æ£æµå°çº¯éæèç¹ï¼ä¾å¦æ°¸è¿ä¸ä¼æ´æ¹çèç¹\n   * æåä¸ºå¸¸éï¼éæ°æ¸²æçæ¶åä¸å¨éæ°åå»ºèç¹\n   * å¨ patch çæ¶åç´æ¥è·³è¿éæå­æ \n\n# çæ-generate\n\n// src\\compiler\\index.js\nconst code = generate(ast, options)\n\n// src\\compiler\\codegen\\index.js\nexport function generate (\n  ast: astelement | void,\n  options: compileroptions\n): codegenresult {\n  const state = new codegenstate(options)\n  const code = ast ? genelement(ast, state) : '_c(\"div\")'\n  return {\n    render: `with(this){return ${code}}`,\n    staticrenderfns: state.staticrenderfns // éææ ¹èç¹å¯¹åºçæ¸²æå½æ°\n  }\n}\n\n// æå­ç¬¦ä¸²è½¬æ¢æå½æ°\n// src\\compiler\\to-function.js\nfunction createfunction (code, errors) {\n  try {\n    return new function(code)\n  } catch (err) {\n    errors.push({ err, code })\n    return noop\n} }\n\n\nåèé¾æ¥\n\n * vue-loader\n\n * å¤å¾è¯¦è§£ï¼ä¸æ¬¡æ§ææwebpack loader\n\n * å¾è§£ vueloader : .vue æä»¶æ¯å¦ä½è¢«æåç?\n\n * vue-loaderé½åäºäºä»ä¹\n\n * æ·±å¥ vue-loader åç\n\n * webpack æ¡ä¾ ââ vue-loader åçåæ",charsets:{cjk:!0}},{title:"Vuex",frontmatter:{title:"Vuex",date:"2020-10-22T11:27:54.000Z",categories:"Vue"},regularPath:"/vue/vuex.html",relativePath:"vue/vuex.md",key:"v-f35fd416",path:"/vue/vuex.html",headers:[{level:2,title:"ä»ä¹æ¯ Vuex",slug:"ä»ä¹æ¯-vuex",normalizedTitle:"ä»ä¹æ¯ vuex",charIndex:11},{level:2,title:"æ ¸å¿æ¦å¿µ",slug:"æ ¸å¿æ¦å¿µ",normalizedTitle:"æ ¸å¿æ¦å¿µ",charIndex:23},{level:2,title:"vue-devtools",slug:"vue-devtools",normalizedTitle:"vue-devtools",charIndex:31},{level:2,title:"æ¨¡æ Vuex",slug:"æ¨¡æ-vuex",normalizedTitle:"æ¨¡æ vuex",charIndex:47}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"ä»ä¹æ¯ Vuex æ ¸å¿æ¦å¿µ vue-devtools æ¨¡æ Vuex",content:"# Vuex\n\n * ä»ä¹æ¯ Vuex\n * æ ¸å¿æ¦å¿µ\n * vue-devtools\n * æ¨¡æ Vuex\n\n\n# ä»ä¹æ¯ Vuex\n\n * Vuex æ¯ä¸é¨ä¸º Vue.js è®¾è®¡çç¶æç®¡çåº\n * å®éç¨éä¸­å¼çæ¹å¼å­å¨éè¦å±äº«çæ°æ®\n * ä»ä½¿ç¨è§åº¦ï¼å®å°±æ¯ä¸ä¸ª JavaScript åº\n * å®çä½ç¨æ¯è¿è¡ç¶æç®¡çï¼è§£å³å¤æç»ä»¶éä¿¡ï¼æ°æ®å±äº«\n * å¦æä¸æç®å¼åå¤§ååé¡µåºç¨ï¼ä½¿ç¨ Vuex å¯è½æ¯ç¹çåä½çã\n * å®ç½\n\n\n# æ ¸å¿æ¦å¿µ\n\næ¯ä¸ä¸ª Vuex åºç¨çæ ¸å¿å°±æ¯ storeï¼ä»åºï¼ãâstoreâåºæ¬ä¸å°±æ¯ä¸ä¸ªå®¹å¨ï¼å®åå«çä½ çåºç¨ä¸­å¤§é¨åçç¶æ (state)ãVuex ååçº¯çå¨å±å¯¹è±¡æä»¥ä¸ä¸¤ç¹ä¸åï¼\n\n 1. Vuex çç¶æå­å¨æ¯ååºå¼çãå½ Vue ç»ä»¶ä» store ä¸­è¯»åç¶æçæ¶åï¼è¥ store ä¸­çç¶æåçååï¼é£ä¹ç¸åºçç»ä»¶ä¹ä¼ç¸åºå°å¾å°é«ææ´æ°ã\n 2. ä½ ä¸è½ç´æ¥æ¹å store ä¸­çç¶æãæ¹å store ä¸­çç¶æçå¯ä¸éå¾å°±æ¯æ¾å¼å°æäº¤ (commit) mutationãè¿æ ·ä½¿å¾æä»¬å¯ä»¥æ¹ä¾¿å°è·è¸ªæ¯ä¸ä¸ªç¶æçååï¼ä»èè®©æä»¬è½å¤å®ç°ä¸äºå·¥å·å¸®å©æä»¬æ´å¥½å°äºè§£æä»¬çåºç¨ã\n\nimport Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex);\n\nconst store = new Vuex.Store({\n  state: {\n    count: 0\n  },\n  mutations: {\n    increment (state) {\n      state.count++\n    }\n  }\n})\n\n\n * Stateï¼åä¸ç¶ææ ï¼ç¨ä¸ä¸ªå¯¹è±¡å°±åå«äºå¨é¨çåºç¨å±çº§ç¶æãå®ä½ä¸ºä¸ä¸ªâå¯ä¸æ°æ®æºâèå­å¨ã\n\n * Getterï¼Vuex åè®¸æä»¬å¨ store ä¸­å®ä¹âgetterâï¼å¯ä»¥è®¤ä¸ºæ¯ store çè®¡ç®å±æ§ï¼ãå°±åè®¡ç®å±æ§ä¸æ ·ï¼getter çè¿åå¼ä¼æ ¹æ®å®çä¾èµè¢«ç¼å­èµ·æ¥ï¼ä¸åªæå½å®çä¾èµå¼åçäºæ¹åæä¼è¢«éæ°è®¡ç®ã\n\n * Mutationï¼æ´æ¹ Vuex ç store ä¸­çç¶æçå¯ä¸æ¹æ³æ¯æäº¤ mutation\n   \n   * ä½ å¯ä»¥å store.commit ä¼ å¥é¢å¤çåæ°ï¼å³ mutation ç è½½è·ï¼payloadï¼ï¼\n     \n     // ...\n     mutations: {\n       increment (state, n) {\n         state.count += n\n       }\n     }\n     \n     store.commit('increment', 10)\n     \n   \n   * ä½¿ç¨å¸¸éæ¿ä»£ mutation äºä»¶ç±»åå¨åç§ Flux å®ç°ä¸­æ¯å¾å¸¸è§çæ¨¡å¼ãè¿æ ·å¯ä»¥ä½¿ linter ä¹ç±»çå·¥å·åæ¥ä½ç¨ï¼åæ¶æè¿äºå¸¸éæ¾å¨åç¬çæä»¶ä¸­å¯ä»¥è®©ä½ çä»£ç åä½èå¯¹æ´ä¸ª app åå«ç mutation ä¸ç®äºç¶ï¼\n     \n     // mutation-types.js\n     export const SOME_MUTATION = 'SOME_MUTATION'\n     \n     // store.js\n     import Vuex from 'vuex'\n     import { SOME_MUTATION } from './mutation-types'\n     \n     const store = new Vuex.Store({\n       state: { ... },\n       mutations: {\n         // æä»¬å¯ä»¥ä½¿ç¨ ES2015 é£æ ¼çè®¡ç®å±æ§å½ååè½æ¥ä½¿ç¨ä¸ä¸ªå¸¸éä½ä¸ºå½æ°å\n         [SOME_MUTATION] (state) {\n           // mutate state\n         }\n       }\n     })\n         \n     // JavaScriptè¯­è¨å®ä¹å¯¹è±¡çå±æ§ï¼æä¸¤ç§æ¹æ³\n         \n     // æ¹æ³ä¸\n     obj.foo = true;\n     \n     // æ¹æ³äº\n     obj['a' + 'bc'] = 123;\n     \n\n * Actionï¼Action ç±»ä¼¼äº mutationï¼ä¸åå¨äºï¼\n   \n   * Action æäº¤çæ¯ mutationï¼èä¸æ¯ç´æ¥åæ´ç¶æã\n   \n   * Action å¯ä»¥åå«ä»»æå¼æ­¥æä½ã\n     \n     const store = new Vuex.Store({\n       state: {\n         count: 0\n       },\n       mutations: {\n         increment (state) {\n           state.count++\n         }\n       },\n       actions: {\n         increment (context) {\n           context.commit('increment')\n         }\n       }\n     })\n     \n   \n   * Action å½æ°æ¥åä¸ä¸ªä¸ store å®ä¾å·æç¸åæ¹æ³åå±æ§ç context å¯¹è±¡ï¼å æ­¤ä½ å¯ä»¥è°ç¨ context.commit æäº¤ä¸ä¸ª mutationï¼æèéè¿ context.state å context.getters æ¥è·å state å gettersãå®è·µä¸­ï¼æä»¬ä¼ç»å¸¸ç¨å° ES2015 ç åæ°è§£æ æ¥ç®åä»£ç ï¼ç¹å«æ¯æä»¬éè¦è°ç¨ commit å¾å¤æ¬¡çæ¶åï¼\n     \n     actions: {\n       increment ({ commit }) {\n         commit('increment')\n       }\n     }\n     \n   \n   * Actions æ¯æåæ ·çè½½è·æ¹å¼åå¯¹è±¡æ¹å¼è¿è¡ååï¼\n     \n     // ä»¥è½½è·å½¢å¼åå\n     store.dispatch('incrementAsync', {\n       amount: 10\n     })\n     \n     // ä»¥å¯¹è±¡å½¢å¼åå\n     store.dispatch({\n       type: 'incrementAsync',\n       amount: 10\n     })\n     \n\n * Moduleï¼ç±äºä½¿ç¨åä¸ç¶ææ ï¼åºç¨çææç¶æä¼éä¸­å°ä¸ä¸ªæ¯è¾å¤§çå¯¹è±¡ãå½åºç¨åå¾éå¸¸å¤ææ¶ï¼store å¯¹è±¡å°±æå¯è½åå¾ç¸å½èè¿ã\n   \n   * ä¸ºäºè§£å³ä»¥ä¸é®é¢ï¼Vuex åè®¸æä»¬å° store åå²ææ¨¡åï¼moduleï¼ãæ¯ä¸ªæ¨¡åæ¥æèªå·±ç stateãmutationãactionãgetterãçè³æ¯åµå¥å­æ¨¡åââä»ä¸è³ä¸è¿è¡åæ ·æ¹å¼çåå²\n\n * å·ä½ä½¿ç¨è¯·çå®æ¹ææ¡£\n\n\n# vue-devtools\n\nvue-devtoolsæ¯ä¸æ¬¾åºäºchromeæµè§å¨çæä»¶,ç¨äºvueåºç¨çè°è¯,å¸®å©æä»¬å¿«éçè°è¯å¼åvueåºç¨\n\n\n# æ¨¡æ Vuex\n\nlet _Vue = null\nclass Store {\n  constructor (options) {\n    const {\n      state = {},\n      getters = {},\n      mutations = {},\n      actions = {}\n    } = options\n    this.state = _Vue.observable(state)\n    this.getters = Object.create(null)\n    Object.keys(getters).forEach(key => {\n      Object.defineProperty(this.getters, key, {\n        get: () => getters[key](state)\n      })\n    })\n    this._mutations = mutations\n    this._actions = actions\n  }\n\n  commit (type, payload) {\n    this._mutations[type](this.state, payload)\n  }\n\n  dispatch (type, payload) {\n    this._actions[type](this, payload)\n  }\n}\n\nfunction install (Vue) {\n  _Vue = Vue\n  _Vue.mixin({\n    beforeCreate () {\n      if (this.$options.store) {\n        _Vue.prototype.$store = this.$options.store\n      }\n    }\n  })\n}\n\nexport default {\n  Store,\n  install\n}\n\n\n * æµè¯\n\nimport Vue from 'vue'\nimport Vuex from '../myvuex'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    count: 0,\n    msg: 'Hello World'\n  },\n  getters: {\n    reverseMsg (state) {\n      return state.msg.split('').reverse().join('')\n    }\n  },\n  mutations: {\n    increate (state, payload) {\n      state.count += payload\n    }\n  },\n  actions: {\n    increateAsync (context, payload) {\n      setTimeout(() => {\n        context.commit('increate', payload)\n      }, 2000)\n    }\n  }\n})\n",normalizedContent:"# vuex\n\n * ä»ä¹æ¯ vuex\n * æ ¸å¿æ¦å¿µ\n * vue-devtools\n * æ¨¡æ vuex\n\n\n# ä»ä¹æ¯ vuex\n\n * vuex æ¯ä¸é¨ä¸º vue.js è®¾è®¡çç¶æç®¡çåº\n * å®éç¨éä¸­å¼çæ¹å¼å­å¨éè¦å±äº«çæ°æ®\n * ä»ä½¿ç¨è§åº¦ï¼å®å°±æ¯ä¸ä¸ª javascript åº\n * å®çä½ç¨æ¯è¿è¡ç¶æç®¡çï¼è§£å³å¤æç»ä»¶éä¿¡ï¼æ°æ®å±äº«\n * å¦æä¸æç®å¼åå¤§ååé¡µåºç¨ï¼ä½¿ç¨ vuex å¯è½æ¯ç¹çåä½çã\n * å®ç½\n\n\n# æ ¸å¿æ¦å¿µ\n\næ¯ä¸ä¸ª vuex åºç¨çæ ¸å¿å°±æ¯ storeï¼ä»åºï¼ãâstoreâåºæ¬ä¸å°±æ¯ä¸ä¸ªå®¹å¨ï¼å®åå«çä½ çåºç¨ä¸­å¤§é¨åçç¶æ (state)ãvuex ååçº¯çå¨å±å¯¹è±¡æä»¥ä¸ä¸¤ç¹ä¸åï¼\n\n 1. vuex çç¶æå­å¨æ¯ååºå¼çãå½ vue ç»ä»¶ä» store ä¸­è¯»åç¶æçæ¶åï¼è¥ store ä¸­çç¶æåçååï¼é£ä¹ç¸åºçç»ä»¶ä¹ä¼ç¸åºå°å¾å°é«ææ´æ°ã\n 2. ä½ ä¸è½ç´æ¥æ¹å store ä¸­çç¶æãæ¹å store ä¸­çç¶æçå¯ä¸éå¾å°±æ¯æ¾å¼å°æäº¤ (commit) mutationãè¿æ ·ä½¿å¾æä»¬å¯ä»¥æ¹ä¾¿å°è·è¸ªæ¯ä¸ä¸ªç¶æçååï¼ä»èè®©æä»¬è½å¤å®ç°ä¸äºå·¥å·å¸®å©æä»¬æ´å¥½å°äºè§£æä»¬çåºç¨ã\n\nimport vue from 'vue'\nimport vuex from 'vuex'\n\nvue.use(vuex);\n\nconst store = new vuex.store({\n  state: {\n    count: 0\n  },\n  mutations: {\n    increment (state) {\n      state.count++\n    }\n  }\n})\n\n\n * stateï¼åä¸ç¶ææ ï¼ç¨ä¸ä¸ªå¯¹è±¡å°±åå«äºå¨é¨çåºç¨å±çº§ç¶æãå®ä½ä¸ºä¸ä¸ªâå¯ä¸æ°æ®æºâèå­å¨ã\n\n * getterï¼vuex åè®¸æä»¬å¨ store ä¸­å®ä¹âgetterâï¼å¯ä»¥è®¤ä¸ºæ¯ store çè®¡ç®å±æ§ï¼ãå°±åè®¡ç®å±æ§ä¸æ ·ï¼getter çè¿åå¼ä¼æ ¹æ®å®çä¾èµè¢«ç¼å­èµ·æ¥ï¼ä¸åªæå½å®çä¾èµå¼åçäºæ¹åæä¼è¢«éæ°è®¡ç®ã\n\n * mutationï¼æ´æ¹ vuex ç store ä¸­çç¶æçå¯ä¸æ¹æ³æ¯æäº¤ mutation\n   \n   * ä½ å¯ä»¥å store.commit ä¼ å¥é¢å¤çåæ°ï¼å³ mutation ç è½½è·ï¼payloadï¼ï¼\n     \n     // ...\n     mutations: {\n       increment (state, n) {\n         state.count += n\n       }\n     }\n     \n     store.commit('increment', 10)\n     \n   \n   * ä½¿ç¨å¸¸éæ¿ä»£ mutation äºä»¶ç±»åå¨åç§ flux å®ç°ä¸­æ¯å¾å¸¸è§çæ¨¡å¼ãè¿æ ·å¯ä»¥ä½¿ linter ä¹ç±»çå·¥å·åæ¥ä½ç¨ï¼åæ¶æè¿äºå¸¸éæ¾å¨åç¬çæä»¶ä¸­å¯ä»¥è®©ä½ çä»£ç åä½èå¯¹æ´ä¸ª app åå«ç mutation ä¸ç®äºç¶ï¼\n     \n     // mutation-types.js\n     export const some_mutation = 'some_mutation'\n     \n     // store.js\n     import vuex from 'vuex'\n     import { some_mutation } from './mutation-types'\n     \n     const store = new vuex.store({\n       state: { ... },\n       mutations: {\n         // æä»¬å¯ä»¥ä½¿ç¨ es2015 é£æ ¼çè®¡ç®å±æ§å½ååè½æ¥ä½¿ç¨ä¸ä¸ªå¸¸éä½ä¸ºå½æ°å\n         [some_mutation] (state) {\n           // mutate state\n         }\n       }\n     })\n         \n     // javascriptè¯­è¨å®ä¹å¯¹è±¡çå±æ§ï¼æä¸¤ç§æ¹æ³\n         \n     // æ¹æ³ä¸\n     obj.foo = true;\n     \n     // æ¹æ³äº\n     obj['a' + 'bc'] = 123;\n     \n\n * actionï¼action ç±»ä¼¼äº mutationï¼ä¸åå¨äºï¼\n   \n   * action æäº¤çæ¯ mutationï¼èä¸æ¯ç´æ¥åæ´ç¶æã\n   \n   * action å¯ä»¥åå«ä»»æå¼æ­¥æä½ã\n     \n     const store = new vuex.store({\n       state: {\n         count: 0\n       },\n       mutations: {\n         increment (state) {\n           state.count++\n         }\n       },\n       actions: {\n         increment (context) {\n           context.commit('increment')\n         }\n       }\n     })\n     \n   \n   * action å½æ°æ¥åä¸ä¸ªä¸ store å®ä¾å·æç¸åæ¹æ³åå±æ§ç context å¯¹è±¡ï¼å æ­¤ä½ å¯ä»¥è°ç¨ context.commit æäº¤ä¸ä¸ª mutationï¼æèéè¿ context.state å context.getters æ¥è·å state å gettersãå®è·µä¸­ï¼æä»¬ä¼ç»å¸¸ç¨å° es2015 ç åæ°è§£æ æ¥ç®åä»£ç ï¼ç¹å«æ¯æä»¬éè¦è°ç¨ commit å¾å¤æ¬¡çæ¶åï¼\n     \n     actions: {\n       increment ({ commit }) {\n         commit('increment')\n       }\n     }\n     \n   \n   * actions æ¯æåæ ·çè½½è·æ¹å¼åå¯¹è±¡æ¹å¼è¿è¡ååï¼\n     \n     // ä»¥è½½è·å½¢å¼åå\n     store.dispatch('incrementasync', {\n       amount: 10\n     })\n     \n     // ä»¥å¯¹è±¡å½¢å¼åå\n     store.dispatch({\n       type: 'incrementasync',\n       amount: 10\n     })\n     \n\n * moduleï¼ç±äºä½¿ç¨åä¸ç¶ææ ï¼åºç¨çææç¶æä¼éä¸­å°ä¸ä¸ªæ¯è¾å¤§çå¯¹è±¡ãå½åºç¨åå¾éå¸¸å¤ææ¶ï¼store å¯¹è±¡å°±æå¯è½åå¾ç¸å½èè¿ã\n   \n   * ä¸ºäºè§£å³ä»¥ä¸é®é¢ï¼vuex åè®¸æä»¬å° store åå²ææ¨¡åï¼moduleï¼ãæ¯ä¸ªæ¨¡åæ¥æèªå·±ç stateãmutationãactionãgetterãçè³æ¯åµå¥å­æ¨¡åââä»ä¸è³ä¸è¿è¡åæ ·æ¹å¼çåå²\n\n * å·ä½ä½¿ç¨è¯·çå®æ¹ææ¡£\n\n\n# vue-devtools\n\nvue-devtoolsæ¯ä¸æ¬¾åºäºchromeæµè§å¨çæä»¶,ç¨äºvueåºç¨çè°è¯,å¸®å©æä»¬å¿«éçè°è¯å¼åvueåºç¨\n\n\n# æ¨¡æ vuex\n\nlet _vue = null\nclass store {\n  constructor (options) {\n    const {\n      state = {},\n      getters = {},\n      mutations = {},\n      actions = {}\n    } = options\n    this.state = _vue.observable(state)\n    this.getters = object.create(null)\n    object.keys(getters).foreach(key => {\n      object.defineproperty(this.getters, key, {\n        get: () => getters[key](state)\n      })\n    })\n    this._mutations = mutations\n    this._actions = actions\n  }\n\n  commit (type, payload) {\n    this._mutations[type](this.state, payload)\n  }\n\n  dispatch (type, payload) {\n    this._actions[type](this, payload)\n  }\n}\n\nfunction install (vue) {\n  _vue = vue\n  _vue.mixin({\n    beforecreate () {\n      if (this.$options.store) {\n        _vue.prototype.$store = this.$options.store\n      }\n    }\n  })\n}\n\nexport default {\n  store,\n  install\n}\n\n\n * æµè¯\n\nimport vue from 'vue'\nimport vuex from '../myvuex'\n\nvue.use(vuex)\n\nexport default new vuex.store({\n  state: {\n    count: 0,\n    msg: 'hello world'\n  },\n  getters: {\n    reversemsg (state) {\n      return state.msg.split('').reverse().join('')\n    }\n  },\n  mutations: {\n    increate (state, payload) {\n      state.count += payload\n    }\n  },\n  actions: {\n    increateasync (context, payload) {\n      settimeout(() => {\n        context.commit('increate', payload)\n      }, 2000)\n    }\n  }\n})\n",charsets:{cjk:!0}},{title:"Vue Router",frontmatter:{title:"Vue Router",date:"2020-09-13T14:47:00.000Z",categories:"Vue"},regularPath:"/vue/vue-router.html",relativePath:"vue/vue-router.md",key:"v-1213428e",path:"/vue/vue-router.html",headers:[{level:2,title:"Vue Router ä½¿ç¨æ­¥éª¤",slug:"vue-router-ä½¿ç¨æ­¥éª¤",normalizedTitle:"vue router ä½¿ç¨æ­¥éª¤",charIndex:17},{level:2,title:"å¨æè·¯ç±",slug:"å¨æè·¯ç±",normalizedTitle:"å¨æè·¯ç±",charIndex:36},{level:2,title:"åµå¥è·¯ç±",slug:"åµå¥è·¯ç±",normalizedTitle:"åµå¥è·¯ç±",charIndex:44},{level:2,title:"ç¼ç¨å¼å¯¼èªçå ç§æ¹æ³",slug:"ç¼ç¨å¼å¯¼èªçå ç§æ¹æ³",normalizedTitle:"ç¼ç¨å¼å¯¼èªçå ç§æ¹æ³",charIndex:3941},{level:2,title:"hashæ¨¡å¼åhistoryæ¨¡å¼",slug:"hashæ¨¡å¼åhistoryæ¨¡å¼",normalizedTitle:"hashæ¨¡å¼åhistoryæ¨¡å¼",charIndex:61},{level:3,title:"historyæ¨¡å¼çä½¿ç¨",slug:"historyæ¨¡å¼çä½¿ç¨",normalizedTitle:"historyæ¨¡å¼çä½¿ç¨",charIndex:4341},{level:3,title:"hashæ¨¡å¼çä½¿ç¨",slug:"hashæ¨¡å¼çä½¿ç¨",normalizedTitle:"hashæ¨¡å¼çä½¿ç¨",charIndex:5035},{level:2,title:"æ¨¡æå®ç° Vue Route",slug:"æ¨¡æå®ç°-vue-route",normalizedTitle:"æ¨¡æå®ç° vue route",charIndex:81},{level:2,title:"æ¨¡æhashæ¨¡å¼vueRouter",slug:"æ¨¡æhashæ¨¡å¼vuerouter",normalizedTitle:"æ¨¡æhashæ¨¡å¼vuerouter",charIndex:10324}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"Vue Router ä½¿ç¨æ­¥éª¤ å¨æè·¯ç± åµå¥è·¯ç± ç¼ç¨å¼å¯¼èªçå ç§æ¹æ³ hashæ¨¡å¼åhistoryæ¨¡å¼ historyæ¨¡å¼çä½¿ç¨ hashæ¨¡å¼çä½¿ç¨ æ¨¡æå®ç° Vue Route æ¨¡æhashæ¨¡å¼vueRouter",content:"# Vue Router\n\n * Vue Router ä½¿ç¨æ­¥éª¤\n * å¨æè·¯ç±\n * åµå¥è·¯ç±\n * ç¼ç¨å¼å¯¼èª\n * hashæ¨¡å¼åhistoryæ¨¡å¼\n * æ¨¡æå®ç° Vue Router\n\n\n# Vue Router ä½¿ç¨æ­¥éª¤\n\nââââpublic\nââââsrc\n    ââââassets\n    ââââcomponents\n    âââârouter\n    \t  ââââindex.js\n    ââââviews\n    \t  ââââBlog.vue\n    \t  ââââIndex.vue\n    \t  ââââPhoto.vue\n    ââââApp.vue\n    ââââmain.js\n\n\n// router/index.js\nimport Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport Index from '../views/Index.vue'\n// 1. æ³¨åè·¯ç±æä»¶\nVue.use(VueRouter)\n\n// è·¯ç±è§å\nconst routes = [\n  {\n    path: '/',\n    name: 'Index',\n    component: Index\n  },\n  {\n    path: '/blog',\n    name: 'Blog',\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: () => import(/* webpackChunkName: \"blog\" */ '../views/Blog.vue')\n  },\n  {\n    path: '/photo',\n    name: 'Photo',\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: () => import(/* webpackChunkName: \"photo\" */ '../views/Photo.vue')\n  }\n]\n// 2. åå»º router å¯¹è±¡\nconst router = new VueRouter({\n  routes\n})\n\nexport default router\n\n\n// main.js\nimport Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\n\nVue.config.productionTip = false\n\nnew Vue({\n  // 3. æ³¨å router å¯¹è±¡\n  router,\n  render: h => h(App)\n}).$mount('#app')\n\n\n\x3c!-- App.vue --\x3e\n<template>\n  <div id=\"app\">\n    <div>\n      <img src=\"@/assets/logo.png\" alt=\"\">\n    </div>\n    <div id=\"nav\">\n      \x3c!-- 5. åå»ºé¾æ¥ --\x3e\n      <router-link to=\"/\">Index</router-link> |\n      <router-link to=\"/blog\">Blog</router-link> |\n      <router-link to=\"/photo\">Photo</router-link>\n    </div>\n    \x3c!-- 4. åå»ºè·¯ç±ç»å»ºçå ä½ --\x3e\n    <router-view/>\n  </div>\n</template>\n\n\n> router-view æ¯ç¨æ¥æ¸²æéè¿è·¯ç±æ å°è¿æ¥çç»ä»¶ï¼å½è·¯å¾æ´æ¹æ¶ï¼ ä¸­çåå®¹ä¹ä¼åçæ´æ¹\n> \n> ä¸»è¦åºç¨äºåé¡µé¢ä¸­ï¼ä¸router-linkéåï¼æ¸²ærouter-link æ å°è¿æ¥çç»ä»¶ã\n\n\n# å¨æè·¯ç±\n\nå¨vueé¡¹ç®ä¸­ï¼ä½¿ç¨vue-routerå¦æè¿è¡ä¸ä¼ éåæ°çè·¯ç±æ¨¡å¼ï¼åç§°ä¸ºéæè·¯ç±ï¼å¦æè½å¤ä¼ éåæ°ï¼å¯¹åºçè·¯ç±æ°éæ¯ä¸ç¡®å®çï¼æ­¤æ¶çè·¯ç±ç§°ä¸ºå¨æè·¯ç±ãå¨æè·¯ç±ï¼æ¯ä»¥åå·ä¸ºå¼å¤´ç(ðï¼ä¾å­å¦ä¸ï¼\n\n// index.js\nimport Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport Index from '../views/Index.vue'\n\nVue.use(VueRouter)\n\nconst routes = [\n  {\n    path: '/',\n    name: 'Index',\n    component: Index\n  },\n  {\n    path: '/detail/:id', // idå ä½ç¬¦\n    name: 'Detail',\n    // å¼å¯ propsï¼ä¼æ URL ä¸­çåæ°ä¼ éç»ç»ä»¶\n    // å¨ç»ä»¶ä¸­éè¿ props æ¥æ¥æ¶ URL åæ°\n    props: true,\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    // åªæä½¿ç¨çæ¶åæå è½½è¯¦æé¡µ\n    component: () => import(/* webpackChunkName: \"detail\" */ '../views/Detail.vue')\n  }\n]\n\nconst router = new VueRouter({\n  routes\n})\n\nexport default router\n\n\n\x3c!-- App.vue --\x3e\n<template>\n  <div id=\"app\">\n    <div id=\"nav\">\n      <router-link to=\"/\">Index</router-link> |\n      <router-link to=\"/detail/11\">Detail</router-link>\n    </div>\n    <router-view/>\n  </div>\n</template>\n\n\x3c!-- Detail.vue --\x3e\n<template>\n  <div>\n    \x3c!-- æ¹å¼1ï¼ éè¿å½åè·¯ç±è§åï¼è·åæ°æ® --\x3e\n    éè¿å½åè·¯ç±è§åè·åï¼{{ $route.params.id }}\n\n    <br>\n    \x3c!-- æ¹å¼2ï¼è·¯ç±è§åä¸­å¼å¯ props ä¼ å --\x3e\n    éè¿å¼å¯ props è·åï¼{{ id }}\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Detail',\n  props: ['id']\n}\n<\/script>\n\n\n\n# åµå¥è·¯ç±\n\n\n\n> æ½åå¬å±ç»ä»¶ layout.vue å­å¨ header å footer\n\n//index.js\nimport Vue from 'vue'\nimport VueRouter from 'vue-router'\n// å è½½ç»ä»¶\nimport Layout from '@/components/Layout.vue'\nimport Index from '@/views/Index.vue'\nimport Login from '@/views/Login.vue'\n\nVue.use(VueRouter)\n\nconst routes = [\n  {\n    name: 'login',\n    path: '/login',\n    component: Login\n  },\n  // åµå¥è·¯ç±\n  {\n    path: '/',\n    component: Layout,\n    children: [\n      {\n        name: 'index',\n        path: '',\n        component: Index\n      },\n      {\n        name: 'detail',\n        path: 'detail/:id',\n        props: true,\n        component: () => import('@/views/Detail.vue')\n      }\n    ]\n  }\n]\n\nconst router = new VueRouter({\n  routes\n})\n\nexport default router\n\n\n\n# ç¼ç¨å¼å¯¼èªçå ç§æ¹æ³\n\n * this.$router.pushï¼è·³è½¬å°æå®URLï¼åhistoryæ æ·»å ä¸ä¸ªæ°çè®°å½ï¼ç¹å»åéä¼è¿åè³ä¸ä¸ä¸ªé¡µé¢\n\n * this.$router.replaceï¼è·³è½¬å°æå®URLï¼æ¿æ¢historyæ ä¸­æåä¸ä¸ªè®°å½ï¼ç¹å»åéä¼è¿åè³ä¸ä¸ä¸ä¸ªé¡µé¢\n\n * this.$router.go(n)ï¼ååæååè·³è½¬nä¸ªé¡µé¢ï¼nå¯æ­£ï¼ååè·³è½¬ï¼å¯è´ï¼ååè·³è½¬ï¼\n\nthis.$router.push({ name: 'Detail', params: { id: 1 } })\nthis.$router.replace('/login')\nthis.$router.go(-2)\n\n// è¿åä¸»é¡µ\nthis.$router.push('/')\n// this.$router.push({ name: 'Home' })\n\n\n\n# hashæ¨¡å¼åhistoryæ¨¡å¼\n\n\n# historyæ¨¡å¼çä½¿ç¨\n\n * éè¿history.pushState()æ¹æ³æ¹åå°åæ \n\n * çå¬popstateäºä»¶\n\n * æ ¹æ®å½åè·¯ç±å°åæ¾å°å¯¹åºç»ä»¶è¿è¡éæ°æ¸²æ\n\n * Historyéè¦æå¡å¨çæ¯æ\n\n * åé¡µåºç¨ä¸­ï¼æå¡ç«¯ä¸å­å¨http:www.testurl.com/loginè¿æ ·çå°åä¼è¿åæ¾ä¸å°è¯¥é¡µé¢\n\n * å¨æå¡ç«¯åºè¯¥é¤äºéæèµæºå¤é½è¿ååé¡µåºç¨çindex.html\n\n// è¿æ¯ä¸ä¸ªç®åç node æå¡å¨\nconst path = require('path')\n// å¯¼å¥å¤ç history æ¨¡å¼çæ¨¡å\nconst history = require('connect-history-api-fallback')\n// å¯¼å¥ express\nconst express = require('express')\n\nconst app = express()\n// æ³¨åå¤ç history æ¨¡å¼çä¸­é´ä»¶ï¼ä¸æ¦å®¢æ·ç«¯è¯·æ±ä¸å­å¨çå°åï¼æå¡ç«¯é½ä¼è¿ååé¡µçindex.html\napp.use(history())\n// å¤çéæèµæºçä¸­é´ä»¶ï¼ç½ç«æ ¹ç®å½ ../web\napp.use(express.static(path.join(__dirname, '../web')))\n\n// å¼å¯æå¡å¨ï¼ç«¯å£æ¯ 3000\napp.listen(3000, () => {\n  console.log('æå¡å¨å¼å¯ï¼ç«¯å£ï¼3000')\n})\n\n\nåæ ·çå¨nginxæå¡å¨ä¸­ä¹å¯ä»¥éç½®è¿åindex.htmlï¼å®¢æ·ç«¯æ¥å¤æ­è·¯ç±å°åå¯¹åºå±ç¤ºåå®¹ã\n\n\n# hashæ¨¡å¼çä½¿ç¨\n\n * URLä¸­#åé¢çåå®¹ä½ä¸ºè·¯å¾å°å\n * çå¬hashchangeäºä»¶\n * æ ¹æ®å½åè·¯ç±å°åæ¾å°å¯¹åºç»ä»¶éæ°æ¸²æ\n\n\n# æ¨¡æå®ç° Vue Route\n\nåç½®ç¥è¯ï¼\n\n * vueçæå»ºçæ¬\n\n> è¿è¡æ¶çï¼ä¸æ¯æ template æ¨¡æ¿ï¼éè¦æåçæ¶åæåç¼è¯ï¼å¦æä½ æåçæ¶åæ¯ç¨vue-loader æè vueifyï¼å°`*.vueæä»¶åçtemplatesç¼è¯æJavaScriptä»£ç ï¼ ä½ å°±ä¸éè¦compiler, å¯ä»¥ä½¿ç¨ runtime-onlyçæ¬ç¼è¯ã\n> \n> å®æ´çï¼åå«è¿è¡æ¶åç¼è¯å¨ï¼ä½ç§¯æ¯è¿è¡æ¶çå¤§10Kå·¦å³ï¼ç¨åºè¿è¡æ¶ææ¨¡æ¿è½¬æ¢ærenderå½æ°\n> \n> vue-clié»è®¤åå»ºè¿è¡æ¶ç\n\n * slotææ§½\n\n\t<div id = \"app\">\n        <aaa>\n            <p slot = \"s1\">å¨ä¸é¢çåå®¹</p>\n            <p slot = \"s2\">å¨ä¸é¢çåå®¹</p>\n        </aaa>\n    </div>\n\t\n\t\x3c!-- å­ç»ä»¶ --\x3e\n    <template id=\"aaa\">\n        <div class = \"aaa\">\n            <slot name = \"s1\"></slot>\n            <p>ææ¯aaaç»ä»¶</p>\n            <slot name = \"s2\"></slot>\n        </div>\n    </template>\n\n\n * æ··å¥mixin\n\næ··å¥ (mixin) æä¾äºä¸ç§éå¸¸çµæ´»çæ¹å¼ï¼æ¥åå Vue ç»ä»¶ä¸­çå¯å¤ç¨åè½ãä¸ä¸ªæ··å¥å¯¹è±¡å¯ä»¥åå«ä»»æç»ä»¶éé¡¹ãå½ç»ä»¶ä½¿ç¨æ··å¥å¯¹è±¡æ¶ï¼æææ··å¥å¯¹è±¡çéé¡¹å°è¢«âæ··åâè¿å¥è¯¥ç»ä»¶æ¬èº«çéé¡¹\n\n// å®ä¹ä¸ä¸ªæ··å¥å¯¹è±¡\nvar myMixin = {\n  created: function () {\n    this.hello()\n  },\n  methods: {\n    hello: function () {\n      console.log('hello from mixin!')\n    }\n  }\n}\n\n// å®ä¹ä¸ä¸ªä½¿ç¨æ··å¥å¯¹è±¡çç»ä»¶\nvar Component = Vue.extend({\n  mixins: [myMixin]\n})\n\nvar component = new Component() // => \"hello from mixin!\"\n\n\n\n * renderå½æ°\n\n> ç®åçè¯´ï¼å¨vueä¸­æä»¬ä½¿ç¨æ¨¡æ¿HTMLè¯­æ³ç»å»ºé¡µé¢çï¼ä½¿ç¨renderå½æ°æä»¬å¯ä»¥ç¨jsè¯­è¨æ¥æå»ºDOM\n> \n> å ä¸ºvueæ¯èæDOMï¼æä»¥å¨æ¿å°templateæ¨¡æ¿æ¶ä¹è¦è½¬è¯æVNodeçå½æ°ï¼èç¨renderå½æ°æå»ºDOMï¼vueå°±åå»äºè½¬è¯çè¿ç¨ã\n> \n> å½ä½¿ç¨renderå½æ°æè¿°èæDOMæ¶ï¼vueæä¾ä¸ä¸ªå½æ°ï¼è¿ä¸ªå½æ°æ¯å°±æå»ºèæDOMæéè¦çå·¥å·ãå®ç½ä¸ç»ä»èµ·äºä¸ªåå­å«createElementãè¿æçº¦å®çç®åå«h,\n\n<div>\n    <myslot>\n    \t<p>hello world</p>\n    </myslot>\n</div>\t\n\n<template id=\"myslot\">\n\t<h1 v-if=\"level==1\">\n    \t<slot></slot>    \n    </h1>\n    <h2 v-if=\"level==2\">\n    \t<slot></slot>    \n    </h2>\n    <h3 v-if=\"level==3\">\n    \t<slot></slot>    \n    </h3>\n    <h4 v-if=\"level==4\">\n    \t<slot></slot>    \n    </h4>\n</template>\n\n\nä½¿ç¨renderå½æ°å°myslotå¨æçæ\n\n'myslot':{\n    render: function(createElement) {\n        return createElement('h' + this.level, this.$slot.default) //h(n),helloworld\n    }\n}\n\n\n * Vue.use(plugin, arguments)\n\n * åæ°ï¼plugin(Function | Object)\n\n * ç¨æ³ï¼ å¦ævueå®è£çç»ä»¶ç±»åå¿é¡»ä¸ºFunctionæèæ¯Object\n   \n   å¦ææ¯ä¸ªå¯¹è±¡ï¼å¿é¡»æä¾installæ¹æ³\n   \n   å¦ææ¯ä¸ä¸ªå½æ°ï¼ä¼è¢«ç´æ¥å½ä½installå½æ°æ§è¡\n   \n   installå½æ°æ¥ååæ°ï¼é»è®¤ç¬¬ä¸ä¸ªåæ°ä¸ºVue,å¶ååæ°ä¸ºæ³¨åç»ä»¶æ¶ä¼ å¥çarguments\n\nå®ç°æè·¯\n\n * åå»ºVueRouteræä»¶ï¼éææ¹æ³ install\n   * å¤æ­æä»¶æ¯å¦å·²ç»è¢«å è½½\n   * å½Vueå è½½æ¶æä¼ å¥çrouterå¯¹è±¡æè½½å°Vueå®ä¾ä¸\n * åå»ºVueRouterç±»\n   * åå§åï¼optionsï¼routeMapï¼app\n   * createRouteMap()éåææè·¯ç±ä¿¡æ¯ï¼æç»ä»¶åè·¯ç±çæ å°è®°å½å°routeMapå¯¹è±¡ä¸­\n   * æ³¨åpopstateäºä»¶ï¼å½è·¯ç±å°ååçååï¼éæ°è®°å½å½åè·¯å¾\n   * åå»ºrouter-linkårouter-viewç»ä»¶\n   * å½è·¯å¾æ¹åæ¶ï¼å¨routerMapä¸­æ¾å°å¯¹åºçç»ä»¶ï¼æ¸²ærouter-view\n\nlet _Vue = null\nclass VueRouter {\n    // Vue.use(VueRouter) è¡¨ç¤ºä½¿ç¨VueRouteræä»¶ï¼è°ç¨ install æ¹æ³\n    static install(Vue){\n        //1 å¤æ­å½åæä»¶æ¯å¦è¢«å®è£\n        if(VueRouter.install.installed) return;\n        \n        VueRouter.install.installed = true\n        //2 æVueçæé å½æ°è®°å½å¨å¨å±ï¼åé¢ä½¿ç¨vue.componentæ¶ä¼ç¨å°\n        _Vue = Vue\n        \n        //3 æåå»ºVueçå®ä¾ä¼ å¥çrouterå¯¹è±¡æ³¨å¥å°Vueå®ä¾\n        _Vue.mixin({\n            beforeCreate(){\n                if(this.$options.router){\n                    _Vue.prototype.$router = this.$options.router // ç»ææçvueå®ä¾æ·»å      \n                \t// $ ä¸è¬æ¯vueä¸­èªå¸¦çï¼åæ®éçå±æ§æ²¡ä»ä¹åºå«\n                    // å¨vueçååä¸æ·»å ä¸ä¸ª $routerï¼ä»¤å¶æ³¨åå¨vueå®ä¾ä¸ç router\n                    // å³ç­äº vue.$options.router\n                } \n            }\n        })\n    }\n    constructor(options){\n        this.options = options\n        this.routeMap = {}\n        // observable\n        this.data = _Vue.observable({ \n            current:\"/\"    // currentè®°å½å½åè·¯ç±å°åï¼\"/\"ä¸ºå½åçé»è®¤è·¯å¾ï¼ä¸ºååºå¼æ°æ®\n        })\n        this.init()\n    }\n    init(){\n        this.createRouteMap()\n        this.initComponent(_Vue)\n        this.initEvent()\n    }\n    createRouteMap(){\n        //éåææçè·¯ç±è§å å§è·¯ç±è§åè§£ææé®å¼å¯¹çå½¢å¼å­å¨å°routeMapä¸­\n        this.options.routes.forEach(route => {\n            this.routeMap[route.path] = route.component\n        });\n    }\n    initComponent(Vue){\n        Vue.component(\"router-link\",{\n            props:{\n                to:String\n            },\n            // template: '<a :href=\"to\"><slot></slot></a>'\n            // <router-link to=\"/blog\">Blog</router-link> å°±ä¼æBlogæ¿æ¢ææ§½\n            // ä½æ¯ä¸é¢è¿ç§æ¹å¼å¨è¿è¡æ¶Vueä¸å¯ç¨ï¼ä¸æ¯ætemplate\n            // å®æ´çæ¬çVueå°±æ¯ætemplateç¼è¯ærenderå½æ°ï¼æä»¥å¯ä»¥ç´æ¥årenderå½æ°\n            render(h){\n                return h(\"a\",{ // ä¸ä¸ªåæ°ï¼æ ç­¾ï¼å±æ§ï¼å­åç´ slot\n                    attrs:{\n                        href:this.to\n                    },\n                    on:{\n                        click:this.clickhander\n                    }\n                },[this.$slots.default]) // é»è®¤ææ§½å°±æ¯<slot></slot>\n            },\n            methods:{\n                clickhander(e){\n                    history.pushState({},\"\",this.to) // pushStateæ¹å°åèä¸ä¸åæå¡å¨åè¯·æ±\n                    this.$router.data.current=this.to\n                    e.preventDefault() // é»æ­¢é»è®¤è¡ä¸º\n                }\n            }\n        })\n        const self = this\n        Vue.component(\"router-view\",{\n            render(h){\n                // è·åç»ä»¶\n                const cm=self.routeMap[self.data.current] // currentååºå¼æ°æ®ï¼ä¼éæ°æ¸²æç»ä»¶\n                return h(cm)\n            }\n        })\n        \n    }\n    initEvent(){\n        // ç¹å»æµè§å¨çåè¿åéæ¶ï¼éæ°è·åå½åè·¯å¾å¹¶è®°å½å°current\n        window.addEventListener(\"popstate\",()=>{\n            this.data.current = window.location.pathname\n        })\n    }\n}\n\n\n * åç«¯è·¯ç±æ¯å®ç°åé¡µåºç¨çåºç¡\n\n * å¯ä»¥éè¿this.$routerå¯¹è±¡è·åå½åè·¯ç±å¯¹è±¡ä¸­ä¿¡æ¯\n\n * window.pushStateä¸ä¼è§¦åpopstateæ¶é´ï¼æµè§å¨åè¿åéæ¶ä¼è§¦å\n\n * å½æµè§å¨å°åçè·¯ç±ä¸º#/articalï¼router-link to=\"/artical/101\"çæçè¶é¾æ¥çclasså±æ§ä¼è¢«è®¾ç½®ä¸ºexact-active-classä¸­çç±»æ ·å¼ï¼å ä¸ºexact-active-classæ¯ç¨æ¥è®¾ç½®è·¯ç±å°åç²¾ç¡®å¹éåç´ çæ ·å¼\n\n\n# æ¨¡æhashæ¨¡å¼vueRouter\n\nlet _Vue = null\nclass VueRouter {\n    // Vue.use(VueRouter) è¡¨ç¤ºä½¿ç¨VueRouteræä»¶ï¼è°ç¨ install æ¹æ³\n    static install(Vue){\n        //1 å¤æ­å½åæä»¶æ¯å¦è¢«å®è£\n        if(VueRouter.install.installed) return;\n        \n        VueRouter.install.installed = true\n        //2 æVueçæé å½æ°è®°å½å¨å¨å±ï¼åé¢ä½¿ç¨vue.componentæ¶ä¼ç¨å°\n        _Vue = Vue\n        \n        //3 æåå»ºVueçå®ä¾ä¼ å¥çrouterå¯¹è±¡æ³¨å¥å°Vueå®ä¾\n        _Vue.mixin({\n            beforeCreate(){\n                if(this.$options.router){\n                    _Vue.prototype.$router = this.$options.router // ç»ææçvueå®ä¾æ·»å      \n                \t// $ ä¸è¬æ¯vueä¸­èªå¸¦çï¼åæ®éçå±æ§æ²¡ä»ä¹åºå«\n                    // å¨vueçååä¸æ·»å ä¸ä¸ª $routerï¼ä»¤å¶æ³¨åå¨vueå®ä¾ä¸ç router\n                    // å³ç­äº vue.$options.router\n                } \n            }\n        })\n    }\n    constructor(options){\n        this.options = options\n        this.routeMap = {}\n        // observable\n        this.data = _Vue.observable({ \n            current:\"/\"    // currentè®°å½å½åè·¯ç±å°åï¼\"/\"ä¸ºå½åçé»è®¤è·¯å¾ï¼ä¸ºååºå¼æ°æ®\n        })\n        this.init()\n    }\n    init(){\n        this.createRouteMap()\n        this.initComponent(_Vue)\n        this.initEvent()\n    }\n    createRouteMap(){\n        //éåææçè·¯ç±è§å å§è·¯ç±è§åè§£ææé®å¼å¯¹çå½¢å¼å­å¨å°routeMapä¸­\n        this.options.routes.forEach(route => {\n            this.routeMap[route.path] = route.component\n        });\n    }\n    initComponent(Vue){\n        Vue.component(\"router-link\",{\n            props:{\n                to:String\n            },\n            // template: '<a :href=\"to\"><slot></slot></a>'\n            // <router-link to=\"/blog\">Blog</router-link> å°±ä¼æBlogæ¿æ¢ææ§½\n            // ä½æ¯ä¸é¢è¿ç§æ¹å¼å¨è¿è¡æ¶Vueä¸å¯ç¨ï¼ä¸æ¯ætemplate\n            // å®æ´çæ¬çVueå°±æ¯ætemplateç¼è¯ærenderå½æ°ï¼æä»¥å¯ä»¥ç´æ¥årenderå½æ°\n            render(h){\n                return h(\"a\",{ // ä¸ä¸ªåæ°ï¼æ ç­¾ï¼å±æ§ï¼å­åç´ slot\n                    attrs:{\n                        href: '#' + this.to\n                    },\n                    on:{\n                        click:this.clickhander\n                    }\n                },[this.$slots.default]) // é»è®¤ææ§½å°±æ¯<slot></slot>\n            },\n            methods:{\n                clickhander(e){\n                    window.location.hash = '#' + this.to\n                    this.$router.data.current=this.to\n                    e.preventDefault() // é»æ­¢é»è®¤è¡ä¸º\n                }\n            }\n        })\n        const self = this\n        Vue.component(\"router-view\",{\n            render(h){\n                // è·åç»ä»¶\n                const cm=self.routeMap[self.data.current] // currentååºå¼æ°æ®ï¼ä¼éæ°æ¸²æç»ä»¶\n                return h(cm)\n            }\n        })\n        \n    }\n    initEvent() {\n        window.addEventListener('load', this.hashChange())\n        window.addEventListener('hashchange', this.hashChange())\n    }\n    hashChange() {\n        if (!window.location.hash) {\n            window.location.hash = '#/'\n        }\n        this.data.current = window.location.hash.substr(1)\n    }\n}\n",normalizedContent:"# vue router\n\n * vue router ä½¿ç¨æ­¥éª¤\n * å¨æè·¯ç±\n * åµå¥è·¯ç±\n * ç¼ç¨å¼å¯¼èª\n * hashæ¨¡å¼åhistoryæ¨¡å¼\n * æ¨¡æå®ç° vue router\n\n\n# vue router ä½¿ç¨æ­¥éª¤\n\nââââpublic\nââââsrc\n    ââââassets\n    ââââcomponents\n    âââârouter\n    \t  ââââindex.js\n    ââââviews\n    \t  ââââblog.vue\n    \t  ââââindex.vue\n    \t  ââââphoto.vue\n    ââââapp.vue\n    ââââmain.js\n\n\n// router/index.js\nimport vue from 'vue'\nimport vuerouter from 'vue-router'\nimport index from '../views/index.vue'\n// 1. æ³¨åè·¯ç±æä»¶\nvue.use(vuerouter)\n\n// è·¯ç±è§å\nconst routes = [\n  {\n    path: '/',\n    name: 'index',\n    component: index\n  },\n  {\n    path: '/blog',\n    name: 'blog',\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: () => import(/* webpackchunkname: \"blog\" */ '../views/blog.vue')\n  },\n  {\n    path: '/photo',\n    name: 'photo',\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: () => import(/* webpackchunkname: \"photo\" */ '../views/photo.vue')\n  }\n]\n// 2. åå»º router å¯¹è±¡\nconst router = new vuerouter({\n  routes\n})\n\nexport default router\n\n\n// main.js\nimport vue from 'vue'\nimport app from './app.vue'\nimport router from './router'\n\nvue.config.productiontip = false\n\nnew vue({\n  // 3. æ³¨å router å¯¹è±¡\n  router,\n  render: h => h(app)\n}).$mount('#app')\n\n\n\x3c!-- app.vue --\x3e\n<template>\n  <div id=\"app\">\n    <div>\n      <img src=\"@/assets/logo.png\" alt=\"\">\n    </div>\n    <div id=\"nav\">\n      \x3c!-- 5. åå»ºé¾æ¥ --\x3e\n      <router-link to=\"/\">index</router-link> |\n      <router-link to=\"/blog\">blog</router-link> |\n      <router-link to=\"/photo\">photo</router-link>\n    </div>\n    \x3c!-- 4. åå»ºè·¯ç±ç»å»ºçå ä½ --\x3e\n    <router-view/>\n  </div>\n</template>\n\n\n> router-view æ¯ç¨æ¥æ¸²æéè¿è·¯ç±æ å°è¿æ¥çç»ä»¶ï¼å½è·¯å¾æ´æ¹æ¶ï¼ ä¸­çåå®¹ä¹ä¼åçæ´æ¹\n> \n> ä¸»è¦åºç¨äºåé¡µé¢ä¸­ï¼ä¸router-linkéåï¼æ¸²ærouter-link æ å°è¿æ¥çç»ä»¶ã\n\n\n# å¨æè·¯ç±\n\nå¨vueé¡¹ç®ä¸­ï¼ä½¿ç¨vue-routerå¦æè¿è¡ä¸ä¼ éåæ°çè·¯ç±æ¨¡å¼ï¼åç§°ä¸ºéæè·¯ç±ï¼å¦æè½å¤ä¼ éåæ°ï¼å¯¹åºçè·¯ç±æ°éæ¯ä¸ç¡®å®çï¼æ­¤æ¶çè·¯ç±ç§°ä¸ºå¨æè·¯ç±ãå¨æè·¯ç±ï¼æ¯ä»¥åå·ä¸ºå¼å¤´ç(ðï¼ä¾å­å¦ä¸ï¼\n\n// index.js\nimport vue from 'vue'\nimport vuerouter from 'vue-router'\nimport index from '../views/index.vue'\n\nvue.use(vuerouter)\n\nconst routes = [\n  {\n    path: '/',\n    name: 'index',\n    component: index\n  },\n  {\n    path: '/detail/:id', // idå ä½ç¬¦\n    name: 'detail',\n    // å¼å¯ propsï¼ä¼æ url ä¸­çåæ°ä¼ éç»ç»ä»¶\n    // å¨ç»ä»¶ä¸­éè¿ props æ¥æ¥æ¶ url åæ°\n    props: true,\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    // åªæä½¿ç¨çæ¶åæå è½½è¯¦æé¡µ\n    component: () => import(/* webpackchunkname: \"detail\" */ '../views/detail.vue')\n  }\n]\n\nconst router = new vuerouter({\n  routes\n})\n\nexport default router\n\n\n\x3c!-- app.vue --\x3e\n<template>\n  <div id=\"app\">\n    <div id=\"nav\">\n      <router-link to=\"/\">index</router-link> |\n      <router-link to=\"/detail/11\">detail</router-link>\n    </div>\n    <router-view/>\n  </div>\n</template>\n\n\x3c!-- detail.vue --\x3e\n<template>\n  <div>\n    \x3c!-- æ¹å¼1ï¼ éè¿å½åè·¯ç±è§åï¼è·åæ°æ® --\x3e\n    éè¿å½åè·¯ç±è§åè·åï¼{{ $route.params.id }}\n\n    <br>\n    \x3c!-- æ¹å¼2ï¼è·¯ç±è§åä¸­å¼å¯ props ä¼ å --\x3e\n    éè¿å¼å¯ props è·åï¼{{ id }}\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'detail',\n  props: ['id']\n}\n<\/script>\n\n\n\n# åµå¥è·¯ç±\n\n\n\n> æ½åå¬å±ç»ä»¶ layout.vue å­å¨ header å footer\n\n//index.js\nimport vue from 'vue'\nimport vuerouter from 'vue-router'\n// å è½½ç»ä»¶\nimport layout from '@/components/layout.vue'\nimport index from '@/views/index.vue'\nimport login from '@/views/login.vue'\n\nvue.use(vuerouter)\n\nconst routes = [\n  {\n    name: 'login',\n    path: '/login',\n    component: login\n  },\n  // åµå¥è·¯ç±\n  {\n    path: '/',\n    component: layout,\n    children: [\n      {\n        name: 'index',\n        path: '',\n        component: index\n      },\n      {\n        name: 'detail',\n        path: 'detail/:id',\n        props: true,\n        component: () => import('@/views/detail.vue')\n      }\n    ]\n  }\n]\n\nconst router = new vuerouter({\n  routes\n})\n\nexport default router\n\n\n\n# ç¼ç¨å¼å¯¼èªçå ç§æ¹æ³\n\n * this.$router.pushï¼è·³è½¬å°æå®urlï¼åhistoryæ æ·»å ä¸ä¸ªæ°çè®°å½ï¼ç¹å»åéä¼è¿åè³ä¸ä¸ä¸ªé¡µé¢\n\n * this.$router.replaceï¼è·³è½¬å°æå®urlï¼æ¿æ¢historyæ ä¸­æåä¸ä¸ªè®°å½ï¼ç¹å»åéä¼è¿åè³ä¸ä¸ä¸ä¸ªé¡µé¢\n\n * this.$router.go(n)ï¼ååæååè·³è½¬nä¸ªé¡µé¢ï¼nå¯æ­£ï¼ååè·³è½¬ï¼å¯è´ï¼ååè·³è½¬ï¼\n\nthis.$router.push({ name: 'detail', params: { id: 1 } })\nthis.$router.replace('/login')\nthis.$router.go(-2)\n\n// è¿åä¸»é¡µ\nthis.$router.push('/')\n// this.$router.push({ name: 'home' })\n\n\n\n# hashæ¨¡å¼åhistoryæ¨¡å¼\n\n\n# historyæ¨¡å¼çä½¿ç¨\n\n * éè¿history.pushstate()æ¹æ³æ¹åå°åæ \n\n * çå¬popstateäºä»¶\n\n * æ ¹æ®å½åè·¯ç±å°åæ¾å°å¯¹åºç»ä»¶è¿è¡éæ°æ¸²æ\n\n * historyéè¦æå¡å¨çæ¯æ\n\n * åé¡µåºç¨ä¸­ï¼æå¡ç«¯ä¸å­å¨http:www.testurl.com/loginè¿æ ·çå°åä¼è¿åæ¾ä¸å°è¯¥é¡µé¢\n\n * å¨æå¡ç«¯åºè¯¥é¤äºéæèµæºå¤é½è¿ååé¡µåºç¨çindex.html\n\n// è¿æ¯ä¸ä¸ªç®åç node æå¡å¨\nconst path = require('path')\n// å¯¼å¥å¤ç history æ¨¡å¼çæ¨¡å\nconst history = require('connect-history-api-fallback')\n// å¯¼å¥ express\nconst express = require('express')\n\nconst app = express()\n// æ³¨åå¤ç history æ¨¡å¼çä¸­é´ä»¶ï¼ä¸æ¦å®¢æ·ç«¯è¯·æ±ä¸å­å¨çå°åï¼æå¡ç«¯é½ä¼è¿ååé¡µçindex.html\napp.use(history())\n// å¤çéæèµæºçä¸­é´ä»¶ï¼ç½ç«æ ¹ç®å½ ../web\napp.use(express.static(path.join(__dirname, '../web')))\n\n// å¼å¯æå¡å¨ï¼ç«¯å£æ¯ 3000\napp.listen(3000, () => {\n  console.log('æå¡å¨å¼å¯ï¼ç«¯å£ï¼3000')\n})\n\n\nåæ ·çå¨nginxæå¡å¨ä¸­ä¹å¯ä»¥éç½®è¿åindex.htmlï¼å®¢æ·ç«¯æ¥å¤æ­è·¯ç±å°åå¯¹åºå±ç¤ºåå®¹ã\n\n\n# hashæ¨¡å¼çä½¿ç¨\n\n * urlä¸­#åé¢çåå®¹ä½ä¸ºè·¯å¾å°å\n * çå¬hashchangeäºä»¶\n * æ ¹æ®å½åè·¯ç±å°åæ¾å°å¯¹åºç»ä»¶éæ°æ¸²æ\n\n\n# æ¨¡æå®ç° vue route\n\nåç½®ç¥è¯ï¼\n\n * vueçæå»ºçæ¬\n\n> è¿è¡æ¶çï¼ä¸æ¯æ template æ¨¡æ¿ï¼éè¦æåçæ¶åæåç¼è¯ï¼å¦æä½ æåçæ¶åæ¯ç¨vue-loader æè vueifyï¼å°`*.vueæä»¶åçtemplatesç¼è¯æjavascriptä»£ç ï¼ ä½ å°±ä¸éè¦compiler, å¯ä»¥ä½¿ç¨ runtime-onlyçæ¬ç¼è¯ã\n> \n> å®æ´çï¼åå«è¿è¡æ¶åç¼è¯å¨ï¼ä½ç§¯æ¯è¿è¡æ¶çå¤§10kå·¦å³ï¼ç¨åºè¿è¡æ¶ææ¨¡æ¿è½¬æ¢ærenderå½æ°\n> \n> vue-clié»è®¤åå»ºè¿è¡æ¶ç\n\n * slotææ§½\n\n\t<div id = \"app\">\n        <aaa>\n            <p slot = \"s1\">å¨ä¸é¢çåå®¹</p>\n            <p slot = \"s2\">å¨ä¸é¢çåå®¹</p>\n        </aaa>\n    </div>\n\t\n\t\x3c!-- å­ç»ä»¶ --\x3e\n    <template id=\"aaa\">\n        <div class = \"aaa\">\n            <slot name = \"s1\"></slot>\n            <p>ææ¯aaaç»ä»¶</p>\n            <slot name = \"s2\"></slot>\n        </div>\n    </template>\n\n\n * æ··å¥mixin\n\næ··å¥ (mixin) æä¾äºä¸ç§éå¸¸çµæ´»çæ¹å¼ï¼æ¥åå vue ç»ä»¶ä¸­çå¯å¤ç¨åè½ãä¸ä¸ªæ··å¥å¯¹è±¡å¯ä»¥åå«ä»»æç»ä»¶éé¡¹ãå½ç»ä»¶ä½¿ç¨æ··å¥å¯¹è±¡æ¶ï¼æææ··å¥å¯¹è±¡çéé¡¹å°è¢«âæ··åâè¿å¥è¯¥ç»ä»¶æ¬èº«çéé¡¹\n\n// å®ä¹ä¸ä¸ªæ··å¥å¯¹è±¡\nvar mymixin = {\n  created: function () {\n    this.hello()\n  },\n  methods: {\n    hello: function () {\n      console.log('hello from mixin!')\n    }\n  }\n}\n\n// å®ä¹ä¸ä¸ªä½¿ç¨æ··å¥å¯¹è±¡çç»ä»¶\nvar component = vue.extend({\n  mixins: [mymixin]\n})\n\nvar component = new component() // => \"hello from mixin!\"\n\n\n\n * renderå½æ°\n\n> ç®åçè¯´ï¼å¨vueä¸­æä»¬ä½¿ç¨æ¨¡æ¿htmlè¯­æ³ç»å»ºé¡µé¢çï¼ä½¿ç¨renderå½æ°æä»¬å¯ä»¥ç¨jsè¯­è¨æ¥æå»ºdom\n> \n> å ä¸ºvueæ¯èædomï¼æä»¥å¨æ¿å°templateæ¨¡æ¿æ¶ä¹è¦è½¬è¯ævnodeçå½æ°ï¼èç¨renderå½æ°æå»ºdomï¼vueå°±åå»äºè½¬è¯çè¿ç¨ã\n> \n> å½ä½¿ç¨renderå½æ°æè¿°èædomæ¶ï¼vueæä¾ä¸ä¸ªå½æ°ï¼è¿ä¸ªå½æ°æ¯å°±æå»ºèædomæéè¦çå·¥å·ãå®ç½ä¸ç»ä»èµ·äºä¸ªåå­å«createelementãè¿æçº¦å®çç®åå«h,\n\n<div>\n    <myslot>\n    \t<p>hello world</p>\n    </myslot>\n</div>\t\n\n<template id=\"myslot\">\n\t<h1 v-if=\"level==1\">\n    \t<slot></slot>    \n    </h1>\n    <h2 v-if=\"level==2\">\n    \t<slot></slot>    \n    </h2>\n    <h3 v-if=\"level==3\">\n    \t<slot></slot>    \n    </h3>\n    <h4 v-if=\"level==4\">\n    \t<slot></slot>    \n    </h4>\n</template>\n\n\nä½¿ç¨renderå½æ°å°myslotå¨æçæ\n\n'myslot':{\n    render: function(createelement) {\n        return createelement('h' + this.level, this.$slot.default) //h(n),helloworld\n    }\n}\n\n\n * vue.use(plugin, arguments)\n\n * åæ°ï¼plugin(function | object)\n\n * ç¨æ³ï¼ å¦ævueå®è£çç»ä»¶ç±»åå¿é¡»ä¸ºfunctionæèæ¯object\n   \n   å¦ææ¯ä¸ªå¯¹è±¡ï¼å¿é¡»æä¾installæ¹æ³\n   \n   å¦ææ¯ä¸ä¸ªå½æ°ï¼ä¼è¢«ç´æ¥å½ä½installå½æ°æ§è¡\n   \n   installå½æ°æ¥ååæ°ï¼é»è®¤ç¬¬ä¸ä¸ªåæ°ä¸ºvue,å¶ååæ°ä¸ºæ³¨åç»ä»¶æ¶ä¼ å¥çarguments\n\nå®ç°æè·¯\n\n * åå»ºvuerouteræä»¶ï¼éææ¹æ³ install\n   * å¤æ­æä»¶æ¯å¦å·²ç»è¢«å è½½\n   * å½vueå è½½æ¶æä¼ å¥çrouterå¯¹è±¡æè½½å°vueå®ä¾ä¸\n * åå»ºvuerouterç±»\n   * åå§åï¼optionsï¼routemapï¼app\n   * createroutemap()éåææè·¯ç±ä¿¡æ¯ï¼æç»ä»¶åè·¯ç±çæ å°è®°å½å°routemapå¯¹è±¡ä¸­\n   * æ³¨åpopstateäºä»¶ï¼å½è·¯ç±å°ååçååï¼éæ°è®°å½å½åè·¯å¾\n   * åå»ºrouter-linkårouter-viewç»ä»¶\n   * å½è·¯å¾æ¹åæ¶ï¼å¨routermapä¸­æ¾å°å¯¹åºçç»ä»¶ï¼æ¸²ærouter-view\n\nlet _vue = null\nclass vuerouter {\n    // vue.use(vuerouter) è¡¨ç¤ºä½¿ç¨vuerouteræä»¶ï¼è°ç¨ install æ¹æ³\n    static install(vue){\n        //1 å¤æ­å½åæä»¶æ¯å¦è¢«å®è£\n        if(vuerouter.install.installed) return;\n        \n        vuerouter.install.installed = true\n        //2 ævueçæé å½æ°è®°å½å¨å¨å±ï¼åé¢ä½¿ç¨vue.componentæ¶ä¼ç¨å°\n        _vue = vue\n        \n        //3 æåå»ºvueçå®ä¾ä¼ å¥çrouterå¯¹è±¡æ³¨å¥å°vueå®ä¾\n        _vue.mixin({\n            beforecreate(){\n                if(this.$options.router){\n                    _vue.prototype.$router = this.$options.router // ç»ææçvueå®ä¾æ·»å      \n                \t// $ ä¸è¬æ¯vueä¸­èªå¸¦çï¼åæ®éçå±æ§æ²¡ä»ä¹åºå«\n                    // å¨vueçååä¸æ·»å ä¸ä¸ª $routerï¼ä»¤å¶æ³¨åå¨vueå®ä¾ä¸ç router\n                    // å³ç­äº vue.$options.router\n                } \n            }\n        })\n    }\n    constructor(options){\n        this.options = options\n        this.routemap = {}\n        // observable\n        this.data = _vue.observable({ \n            current:\"/\"    // currentè®°å½å½åè·¯ç±å°åï¼\"/\"ä¸ºå½åçé»è®¤è·¯å¾ï¼ä¸ºååºå¼æ°æ®\n        })\n        this.init()\n    }\n    init(){\n        this.createroutemap()\n        this.initcomponent(_vue)\n        this.initevent()\n    }\n    createroutemap(){\n        //éåææçè·¯ç±è§å å§è·¯ç±è§åè§£ææé®å¼å¯¹çå½¢å¼å­å¨å°routemapä¸­\n        this.options.routes.foreach(route => {\n            this.routemap[route.path] = route.component\n        });\n    }\n    initcomponent(vue){\n        vue.component(\"router-link\",{\n            props:{\n                to:string\n            },\n            // template: '<a :href=\"to\"><slot></slot></a>'\n            // <router-link to=\"/blog\">blog</router-link> å°±ä¼æblogæ¿æ¢ææ§½\n            // ä½æ¯ä¸é¢è¿ç§æ¹å¼å¨è¿è¡æ¶vueä¸å¯ç¨ï¼ä¸æ¯ætemplate\n            // å®æ´çæ¬çvueå°±æ¯ætemplateç¼è¯ærenderå½æ°ï¼æä»¥å¯ä»¥ç´æ¥årenderå½æ°\n            render(h){\n                return h(\"a\",{ // ä¸ä¸ªåæ°ï¼æ ç­¾ï¼å±æ§ï¼å­åç´ slot\n                    attrs:{\n                        href:this.to\n                    },\n                    on:{\n                        click:this.clickhander\n                    }\n                },[this.$slots.default]) // é»è®¤ææ§½å°±æ¯<slot></slot>\n            },\n            methods:{\n                clickhander(e){\n                    history.pushstate({},\"\",this.to) // pushstateæ¹å°åèä¸ä¸åæå¡å¨åè¯·æ±\n                    this.$router.data.current=this.to\n                    e.preventdefault() // é»æ­¢é»è®¤è¡ä¸º\n                }\n            }\n        })\n        const self = this\n        vue.component(\"router-view\",{\n            render(h){\n                // è·åç»ä»¶\n                const cm=self.routemap[self.data.current] // currentååºå¼æ°æ®ï¼ä¼éæ°æ¸²æç»ä»¶\n                return h(cm)\n            }\n        })\n        \n    }\n    initevent(){\n        // ç¹å»æµè§å¨çåè¿åéæ¶ï¼éæ°è·åå½åè·¯å¾å¹¶è®°å½å°current\n        window.addeventlistener(\"popstate\",()=>{\n            this.data.current = window.location.pathname\n        })\n    }\n}\n\n\n * åç«¯è·¯ç±æ¯å®ç°åé¡µåºç¨çåºç¡\n\n * å¯ä»¥éè¿this.$routerå¯¹è±¡è·åå½åè·¯ç±å¯¹è±¡ä¸­ä¿¡æ¯\n\n * window.pushstateä¸ä¼è§¦åpopstateæ¶é´ï¼æµè§å¨åè¿åéæ¶ä¼è§¦å\n\n * å½æµè§å¨å°åçè·¯ç±ä¸º#/articalï¼router-link to=\"/artical/101\"çæçè¶é¾æ¥çclasså±æ§ä¼è¢«è®¾ç½®ä¸ºexact-active-classä¸­çç±»æ ·å¼ï¼å ä¸ºexact-active-classæ¯ç¨æ¥è®¾ç½®è·¯ç±å°åç²¾ç¡®å¹éåç´ çæ ·å¼\n\n\n# æ¨¡æhashæ¨¡å¼vuerouter\n\nlet _vue = null\nclass vuerouter {\n    // vue.use(vuerouter) è¡¨ç¤ºä½¿ç¨vuerouteræä»¶ï¼è°ç¨ install æ¹æ³\n    static install(vue){\n        //1 å¤æ­å½åæä»¶æ¯å¦è¢«å®è£\n        if(vuerouter.install.installed) return;\n        \n        vuerouter.install.installed = true\n        //2 ævueçæé å½æ°è®°å½å¨å¨å±ï¼åé¢ä½¿ç¨vue.componentæ¶ä¼ç¨å°\n        _vue = vue\n        \n        //3 æåå»ºvueçå®ä¾ä¼ å¥çrouterå¯¹è±¡æ³¨å¥å°vueå®ä¾\n        _vue.mixin({\n            beforecreate(){\n                if(this.$options.router){\n                    _vue.prototype.$router = this.$options.router // ç»ææçvueå®ä¾æ·»å      \n                \t// $ ä¸è¬æ¯vueä¸­èªå¸¦çï¼åæ®éçå±æ§æ²¡ä»ä¹åºå«\n                    // å¨vueçååä¸æ·»å ä¸ä¸ª $routerï¼ä»¤å¶æ³¨åå¨vueå®ä¾ä¸ç router\n                    // å³ç­äº vue.$options.router\n                } \n            }\n        })\n    }\n    constructor(options){\n        this.options = options\n        this.routemap = {}\n        // observable\n        this.data = _vue.observable({ \n            current:\"/\"    // currentè®°å½å½åè·¯ç±å°åï¼\"/\"ä¸ºå½åçé»è®¤è·¯å¾ï¼ä¸ºååºå¼æ°æ®\n        })\n        this.init()\n    }\n    init(){\n        this.createroutemap()\n        this.initcomponent(_vue)\n        this.initevent()\n    }\n    createroutemap(){\n        //éåææçè·¯ç±è§å å§è·¯ç±è§åè§£ææé®å¼å¯¹çå½¢å¼å­å¨å°routemapä¸­\n        this.options.routes.foreach(route => {\n            this.routemap[route.path] = route.component\n        });\n    }\n    initcomponent(vue){\n        vue.component(\"router-link\",{\n            props:{\n                to:string\n            },\n            // template: '<a :href=\"to\"><slot></slot></a>'\n            // <router-link to=\"/blog\">blog</router-link> å°±ä¼æblogæ¿æ¢ææ§½\n            // ä½æ¯ä¸é¢è¿ç§æ¹å¼å¨è¿è¡æ¶vueä¸å¯ç¨ï¼ä¸æ¯ætemplate\n            // å®æ´çæ¬çvueå°±æ¯ætemplateç¼è¯ærenderå½æ°ï¼æä»¥å¯ä»¥ç´æ¥årenderå½æ°\n            render(h){\n                return h(\"a\",{ // ä¸ä¸ªåæ°ï¼æ ç­¾ï¼å±æ§ï¼å­åç´ slot\n                    attrs:{\n                        href: '#' + this.to\n                    },\n                    on:{\n                        click:this.clickhander\n                    }\n                },[this.$slots.default]) // é»è®¤ææ§½å°±æ¯<slot></slot>\n            },\n            methods:{\n                clickhander(e){\n                    window.location.hash = '#' + this.to\n                    this.$router.data.current=this.to\n                    e.preventdefault() // é»æ­¢é»è®¤è¡ä¸º\n                }\n            }\n        })\n        const self = this\n        vue.component(\"router-view\",{\n            render(h){\n                // è·åç»ä»¶\n                const cm=self.routemap[self.data.current] // currentååºå¼æ°æ®ï¼ä¼éæ°æ¸²æç»ä»¶\n                return h(cm)\n            }\n        })\n        \n    }\n    initevent() {\n        window.addeventlistener('load', this.hashchange())\n        window.addeventlistener('hashchange', this.hashchange())\n    }\n    hashchange() {\n        if (!window.location.hash) {\n            window.location.hash = '#/'\n        }\n        this.data.current = window.location.hash.substr(1)\n    }\n}\n",charsets:{cjk:!0}},{title:"Vue3.0ï¼ä¸ï¼",frontmatter:{title:"Vue3.0ï¼ä¸ï¼",date:"2021-02-01T11:27:54.000Z",categories:"Vue"},regularPath:"/vue/vue3.0-1.html",relativePath:"vue/vue3.0-1.md",key:"v-32b0df1a",path:"/vue/vue3.0-1.html",headers:[{level:2,title:"Vue.js 3.0",slug:"vue-js-3-0",normalizedTitle:"vue.js 3.0",charIndex:16},{level:2,title:"ç®å½ç»æ",slug:"ç®å½ç»æ",normalizedTitle:"ç®å½ç»æ",charIndex:30},{level:2,title:"æå»ºçæ¬",slug:"æå»ºçæ¬",normalizedTitle:"æå»ºçæ¬",charIndex:38},{level:2,title:"Options API",slug:"options-api",normalizedTitle:"options api",charIndex:1285},{level:2,title:"Composition API",slug:"composition-api",normalizedTitle:"composition api",charIndex:46},{level:2,title:"å½æ°å¼ç¼ç¨",slug:"å½æ°å¼ç¼ç¨",normalizedTitle:"å½æ°å¼ç¼ç¨",charIndex:65},{level:2,title:"æ§è½æå",slug:"æ§è½æå",normalizedTitle:"æ§è½æå",charIndex:74},{level:2,title:"Vite",slug:"vite",normalizedTitle:"vite",charIndex:82},{level:3,title:"ES Module",slug:"es-module",normalizedTitle:"es module",charIndex:2616},{level:3,title:"Vite vs Vue-CLI",slug:"vite-vs-vue-cli",normalizedTitle:"vite vs vue-cli",charIndex:3393},{level:3,title:"Vite ç¹ç¹",slug:"vite-ç¹ç¹",normalizedTitle:"vite ç¹ç¹",charIndex:3544},{level:3,title:"Viteåå»ºé¡¹ç®",slug:"viteåå»ºé¡¹ç®",normalizedTitle:"viteåå»ºé¡¹ç®",charIndex:3583},{level:3,title:"åºäºæ¨¡æ¿åå»ºé¡¹ç®",slug:"åºäºæ¨¡æ¿åå»ºé¡¹ç®",normalizedTitle:"åºäºæ¨¡æ¿åå»ºé¡¹ç®",charIndex:3673},{level:2,title:"Composition API è¯¦è§£",slug:"composition-api-è¯¦è§£",normalizedTitle:"composition api è¯¦è§£",charIndex:3723},{level:3,title:"setup å¥å£å½æ°",slug:"setup-å¥å£å½æ°",normalizedTitle:"setup å¥å£å½æ°",charIndex:3746},{level:3,title:"ä¸ä¸ªç®åçä¾å­ï¼å®æ¶æ¾ç¤ºé¼ æ ä½ç½®",slug:"ä¸ä¸ªç®åçä¾å­-å®æ¶æ¾ç¤ºé¼ æ ä½ç½®",normalizedTitle:"ä¸ä¸ªç®åçä¾å­ï¼å®æ¶æ¾ç¤ºé¼ æ ä½ç½®",charIndex:4238},{level:2,title:"çå½å¨æé©å­å½æ°",slug:"çå½å¨æé©å­å½æ°",normalizedTitle:"çå½å¨æé©å­å½æ°",charIndex:5387},{level:2,title:"reactive/toRefs/ref",slug:"reactive-torefs-ref",normalizedTitle:"reactive/torefs/ref",charIndex:90},{level:2,title:"Computed/Watch/WatchEffect",slug:"computed-watch-watcheffect",normalizedTitle:"computed/watch/watcheffect",charIndex:113},{level:3,title:"Computed",slug:"computed",normalizedTitle:"computed",charIndex:113},{level:2,title:"Watch",slug:"watch",normalizedTitle:"watch",charIndex:122},{level:3,title:"WatchEffect",slug:"watcheffect",normalizedTitle:"watcheffect",charIndex:128},{level:3,title:"è¿é¶",slug:"è¿é¶",normalizedTitle:"è¿é¶",charIndex:9312}],lastUpdated:"6/25/2025, 8:09:31 PM",lastUpdatedTimestamp:1750853371e3,headersStr:"Vue.js 3.0 ç®å½ç»æ æå»ºçæ¬ Options API Composition API å½æ°å¼ç¼ç¨ æ§è½æå Vite ES Module Vite vs Vue-CLI Vite ç¹ç¹ Viteåå»ºé¡¹ç® åºäºæ¨¡æ¿åå»ºé¡¹ç® Composition API è¯¦è§£ setup å¥å£å½æ° ä¸ä¸ªç®åçä¾å­ï¼å®æ¶æ¾ç¤ºé¼ æ ä½ç½® çå½å¨æé©å­å½æ° reactive/toRefs/ref Computed/Watch/WatchEffect Computed Watch WatchEffect è¿é¶",content:'# Vue3.0ï¼ä¸ï¼\n\n * Vue.js 3.0\n * ç®å½ç»æ\n * æå»ºçæ¬\n * Composition API\n * å½æ°å¼ç¼ç¨\n * æ§è½æå\n * Vite\n * reactive/toRefs/ref\n * Computed/Watch/WatchEffect\n\n\n# Vue.js 3.0\n\n * æºç ç»ç»æ¹å¼çåå\n   * éç¨ TS éå\n   * ä½¿ç¨ Monorepo ç®¡çé¡¹ç®ç»æ\n * Composition API\n * æ§è½æå\n * Vite\n\n\n# ç®å½ç»æ\n\n> packagesç®å½ä¸æè®¸å¤æ¨¡å/åãMonorepo æ¯ç®¡çé¡¹ç®ä»£ç çä¸ä¸ªæ¹å¼ï¼æå¨ä¸ä¸ªé¡¹ç®ä»åº (repo) ä¸­ç®¡çå¤ä¸ªæ¨¡å/å (package)ï¼ä¸åäºå¸¸è§çæ¯ä¸ªæ¨¡åå»ºä¸ä¸ª repoãVue3.0 ä¸­ç monorepo ç®¡çæ¨¡å¼ï¼Monorepo æ¯ä»ä¹ï¼ä¸ºä»ä¹å¤§å®¶é½å¨ç¨ï¼\n\n * compiler-coreï¼å¹³å°æ å³çç¼è¯å¨\n * compiler-domï¼æµè§å¨å¹³å°ä¸çç¼è¯å¨ï¼ä¾èµäºcompiler-core\n * compiler-sfcï¼ï¼single file componentï¼ç¼è¯åæä»¶ç»ä»¶\n * compiler-ssrï¼æå¡ç«¯æ¸²æçç¼è¯å¨\n * reactivityï¼æ°æ®ååºå¼ç³»ç»\n * runtime-coreï¼å¹³å°æ å³çè¿è¡æ¶\n * runtime-domï¼æµè§å¨å¹³å°ä¸çè¿è¡æ¶\n * runtime-testï¼ä¸ºäºæµè¯çè¿è¡æ¶ï¼domæ æ¯jså¯¹è±¡ï¼å¯è¿è¡äºææjsç¯å¢é\n * server-rendererï¼æå¡ç«¯æ¸²æ\n * sharedï¼vueåé¨ä½¿ç¨çä¸äºå¬å±çAPI\n * size-checkï¼ä¸ä¸ªç§æçåï¼ä¸ä¼åå¸å°npmï¼å¨treeshakingåæ£æ¥åçå¤§å°\n * template-explorerï¼å®æ¶ç¼è¯ç»ä»¶ãè¾åºrenderå½æ°\n * vueï¼æå»ºå®æ´ççvue\n\n\n# æå»ºçæ¬\n\n * cjsï¼commonJsè§èï¼\n   * vue.cjs.js\n   * vue.cjs.prod.js\n * globalï¼å¯ä»¥ç´æ¥éè¿scriptå¼å¥ï¼å¢å å¨å±vueå¯¹è±¡ï¼runtimeæ¯åªåå«è¿è¡æ¶ï¼\n   * vue.global.js\n   * vue.global.prod.js\n   * vue.runtime.global.js\n   * vue.runtime.global.prod.js\n * browserï¼éè¿script type=moduleæ¹å¼å¼å¥ï¼\n   * vue.esm-browser.js\n   * vue.esm-browser.prod.js\n   * vue.runtime.esm-browser.js\n   * vue.runtime.esm-browser.prod.js\n * bundlerï¼æ²¡ææåçä»£ç ï¼è¦éåæåå·¥å·ï¼\n   * vue.esm-bundler.js\n   * vue.runtime.esm-bundler.js\n\n\n# Options API\n\nå¨ vue2.x ä¸­éç¨çæ¯ Options API\n\n> å¨vue2ä¸­å¦ä½ç»ç»ä»£ç çï¼**æä»¬ä¼å¨ä¸ä¸ªvueæä»¶ä¸­methodsï¼computedï¼watchï¼dataä¸­ç­ç­å®ä¹å±æ§åæ¹æ³ï¼å±åå¤çé¡µé¢é»è¾ï¼**æä»¬ç§°è¿ç§æ¹å¼ä¸ºOptions API\n\n * åå«ä¸ä¸ªæè¿°ç»ä»¶éé¡¹(data, methods, propsç­)çå¯¹è±¡\n * Options API å¼åå¤æç»ä»¶ï¼åä¸ä¸ªåè½é»è¾çä»£ç è¢«æåå°ä¸åéé¡¹\n\n\n# Composition API\n\n * vue.js 3.0 æ°å¢çä¸ç» API\n * ä¸ç»åºäºå½æ°ç API\n * å¯ä»¥æ´çµæ´»çç»ç»ç»ä»¶çé»è¾\n\nComposition APIå¾ç¤º\n\nVue3ä¸ºä»ä¹è¦ä½¿ç¨Composition API\n\n\n# å½æ°å¼ç¼ç¨\n\n> Vue2 å¯¹å¤è¡¨ç°çç¼ç¨æ¨¡å¼åºæ¬å°±æ¯ï¼å¯¹è±¡è°ç¨èªå·±çæ°æ®åæ¹æ³ââthis + . æä½ãæä»¥å¨ Vue2 æ¶ä»£ï¼æä»¬éå¸¸ä¼æç¸å³çæ°æ®åæä½åå¨åä¸ä¸ªå¯¹è±¡éãä½æ¯å°äº Vue3 ç setup éï¼ä½ å ä¹ä¸ä¼ç¨å° this äºï¼åæäºè®©å½æ°æ¥è°ç¨å¯¹è±¡ææ¯å¦ä¸ä¸ªå½æ°ââå°±æ¯ FP çç¹ç¹äºãéä¿æ¥è¯´ï¼å°±æ¯ä»åºäºå¯¹è±¡çç¼ç¨ï¼OOPï¼è½¬åäºå½æ°å¼ç¼ç¨ï¼FPï¼ã\n\n\n# æ§è½æå\n\n * ååºå¼ç³»ç»åçº§ï¼éç¨ Proxy\n\n * ç¼è¯ä¼å\n   \n   * Vue.js 2.xä¸­éè¿æ è®°éææ ¹èç¹ï¼ä¼å diff çè¿ç¨ï¼éæèç¹ä»éè¦ diff\n   \n   * Vue.js 3.0ä¸­æ è®°åæåææçéææ ¹èç¹ï¼diff çæ¶ååªéè¦å¯¹æ¯å¨æèç¹åå®¹\n     \n     * Fragmentsï¼åçº§ vetur æä»¶ï¼æ²¡ææ ¹èç¹ä¹ä¸ä¼æ¥éï¼ä¼åå»ºä¸ä¸ª Fragment çæ®µï¼\n     * éææåï¼åæ¬¡ç¼è¯å¯ä»¥è·³è¿éææ ¹èç¹ï¼\n     * Patch flag\n     * ç¼å­äºä»¶å¤çå½æ°\n   \n   * ä¾å­ï¼vue2æ¨¡æ¿ç¼è¯ãvue3æ¨¡æ¿ç¼è¯ç½å\n     \n     <div id=\'app\'>\n         <div>static root\n     \t\t<div>static node</div>\n         </div>\n         <div>static node</div>\n         <div>static node</div>\n         <div :id="id">{{ count }}</div>\n         <button @click="handler"></button>\n     </div>\n     \x3c!-- 1. å ææ ¹èç¹è¯ä¸ä¸\n          2. å³ä¸è§optionsä¸­éæ© hoistStatic æåéæèç¹\n          3. å³ä¾§å¯ä»¥æ¾å° patch flag\n          4. å³ä¸è§optionså¯ä»¥å¼å¯ç¼å­ --\x3e\n     \n\n * æºç ä½ç§¯çä¼å\n   \n   * ç§»é¤ä¸äºä¸å¸¸ç¨ç APIï¼inline-template, filter\n   * Tree-shaking\n\n\n# Vite\n\n\n# ES Module\n\n * ç°ä»£æµè§å¨é½æ¯æ ES Moduleï¼ie ä¸æ¯æï¼\n * éè¿ä¸é¢çæ¹å¼å è½½æ¨¡å\n   * <script type="module" src="..."><\/script>\n * æ¯ææ¨¡åç script é»è®¤å»¶è¿å è½½\n\nåé¡¾æµè§å¨å è½½æ¨¡åï¼type=moduleä¼èªå¨æ·»å ä¸deferå±æ§ï¼è¿ç¨: å è½½æ¨¡åå¹¶æ§è¡æ¯å¨DOMæ åå»ºå®æ¯ä¹åï¼DOMContentLoadedä¹åæ§è¡\n\n<div id="app">hello world</div>\n<script>\n\twindow.addEventListener(\'DOMContentLoaded\', () => {\n        console.log(\'DOMContentLoaded\')\n  })\n<\/script>\n<script type="module" src="./index.js"><\/script>\n\n\n// index.js\nimport { forEach } from \'./utils.js\'\n\nconst app = document.querySelector(\'#app\')\nconsole.log(app.innerHTML)\n\nconst arr = [1, 2, 3]\nforEach(arr, item => {\n    console.log(item)\n})\n\n\n// è¾åº\n// Hello World\n// 1 2 3\n// DOMContentLoaded\n\n// ï¼1ï¼DOMContentLoaded äºä»¶è§¦åæ¶ï¼ä»å½DOMå è½½å®æï¼ä¸åæ¬æ ·å¼è¡¨ï¼å¾ç(è­¬å¦å¦ææasyncå è½½çèæ¬å°±ä¸ä¸å®å®æ)ã\n\n// ï¼2ï¼load äºä»¶è§¦åæ¶ï¼é¡µé¢ä¸ææçDOMï¼æ ·å¼è¡¨ï¼èæ¬ï¼å¾çé½å·²ç»å è½½å®æäºã\n\n\n\n# Vite vs Vue-CLI\n\n * Vite å¨å¼åæ¨¡å¼ä¸ä¸éè¦æåå¯ä»¥ç´æ¥è¿è¡ï¼å¼åæ¨¡å¼ä¸ä½¿ç¨script type=moduleï¼ä¸éè¦æåä»£ç ï¼\n * Vue-CLI å¼åæ¨¡å¼ä¸å¿é¡»å¯¹é¡¹ç®æåæå¯ä»¥è¿è¡\n * çäº§ç¯å¢ä¸ä½¿ç¨ Rollup æåï¼åºäºES Modulesçæ¹å¼æåï¼\n\n\n# Vite ç¹ç¹\n\n * å¿«éå·å¯å¨\n * æéç¼è¯\n * æ¨¡åç­æ´æ°\n\n\n# Viteåå»ºé¡¹ç®\n\nnpm init vite-app <project-name>\ncd <project-name>\nnpm install\nnpm run dev\n\n\n\n# åºäºæ¨¡æ¿åå»ºé¡¹ç®\n\nnpm init vite-app --template react\n\n\n\n# Composition API è¯¦è§£\n\n\n# setup å¥å£å½æ°\n\n * setup å½æ°æ¯ç»åå¼ API çå¥å£å½æ°ï¼å®å¨ ç»ä»¶åå»ºä¹å è¢«è°ç¨\n\n * å ä¸ºå¨ setup æ§è¡æ¶ç»ä»¶å°æªåå»ºï¼setup å½æ°ä¸­ç this ä¸æ¯å½åç»ä»¶çå®ä¾\n\n * å½æ°æ¥æ¶ä¸¤ä¸ªåæ°ï¼props å contextï¼context å¯ä»¥è§£æä¸º attrsãslotsãemit å½æ°\n   \n   * propsï¼éè¿ prop ä¼ éè¿æ¥çæææ°æ®ï¼æä»¬é½å¯ä»¥å¨è¿éè¿è¡æ¥æ¶ãå¹¶ä¸è·åå°çæ°æ®å°ä¿æååºæ§ã\n   * contextï¼context æ¯ä¸ä¸ª JavaScript å¯¹è±¡ï¼è¿ä¸ªå¯¹è±¡æ´é²äºä¸ä¸ªç»ä»¶çå±æ§ï¼æä»¬å¯ä»¥éè¿ è§£æ çæ¹å¼æ¥åå«è·åè¿ä¸ä¸ªå±æ§\n     * attrsï¼ å®æ¯ç»å®å°ç»ä»¶ä¸­ç é props æ°æ®ï¼å¹¶ä¸æ¯éååºå¼çã\n     * slotsï¼ æ¯ç»ä»¶çææ§½ï¼åæ ·ä¹ä¸æ¯ ååºå¼çã\n     * emitï¼ æ¯ä¸ä¸ªæ¹æ³ï¼ç¸å½äº vue2 ä¸­ç this.$emit æ¹æ³ã\n\n * å½æ°å¯ä»¥è¿åä¸ä¸ªå¯¹è±¡ï¼å¯¹è±¡çå±æ§å¯ä»¥ç´æ¥å¨æ¨¡æ¿ä¸­è¿è¡ä½¿ç¨ï¼å°±åä¹åä½¿ç¨ data å methods ä¸æ ·ã\n\n\n# ä¸ä¸ªç®åçä¾å­ï¼å®æ¶æ¾ç¤ºé¼ æ ä½ç½®\n\n<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>Document</title>\n</head>\n<body>\n  <div id="app">\n    x: {{ position.x }} <br>\n    y: {{ position.y }}\n  </div>\n  <script type="module">\n    \n    import { createApp, reactive, onMounted, onUnmounted } from \'./vue.esm-browser.js\'\n\t\t\n    // æåè½å°è£æä¸ä¸ªå½æ°ï¼dataï¼menthodsï¼hooksé½å¨è¿ä¸ªå½æ°ä¸­\n    function useMousePosition () {\n      \n      // reactive å¤çæååºå¼\n      const position = reactive({\n        x: 0,\n        y: 0\n      })\n\n      const update = e => {\n        position.x = e.pageX\n        position.y = e.pageY\n      }\n\n      onMounted(() => {\n        window.addEventListener(\'mousemove\', update)\n      })\n\n      onUnmounted(() => {\n        window.removeEventListener(\'mousemove\', update)\n      })\n\n      return position\n    }\n\t\t\n    // creatAPP åå»º vue å¯¹è±¡\n    const app = createApp({\n      setup () {\n        const position = useMousePosition()\n        \n        // return ç»æ¨¡æ¿ä½¿ç¨\n        return {\n          position\n        }\n      }\n    })\n\n    app.mount(\'#app\')\n  <\/script>\n</body>\n</html>\n\n\n\n# çå½å¨æé©å­å½æ°\n\n> setup() å¼å§åå»ºç»ä»¶ä¹åï¼å¨beforeCreateåcreatedä¹åæ§è¡ãåå»ºçæ¯dataåmethod\n\nOPTIONS API     HOOK INSIDE SETUP   è¯´æ\nbeforeCreate    setup               ç»ä»¶åå»ºä¹å\ncreated         setup               ç»ä»¶åå»ºå®æ\nbeforeMount     onBeforeMount       ç»ä»¶æè½½ä¹å\nmounted         onMounted           ç»ä»¶æè½½å®æ\nbeforeUpdate    onBeforeUpdate      æ°æ®æ´æ°ï¼èædomæè¡¥ä¸ä¹å\nupdated         onUpdated           æ°æ®æ´æ°ï¼èædomæ¸²æå®æ\nbeforeDestroy   onBeforeUnmount     ç»ä»¶éæ¯ä¹å\ndestroyed       onUnmounted         ç»ä»¶éæ¯å\n\n\n# reactive/toRefs/ref\n\n * reactiveï¼å¤çå¤ææ°æ®ç±»åä¸ºååºå¼\n * refï¼å¤çåºæ¬æ°æ®ç±»åä¸ºååºå¼\n * toRefsï¼toRefs æ¯ toRef çæ¹éçæ¬ãä¼å°ä¼ å¥å¯¹è±¡çæ¯ä¸ªå±æ§å¤çä¸º ref çå¼\n\n> refå®ç°çåé¨åå»ºäºä¸ä¸ªå¯¹è±¡ï¼å°valueå¼è®¾ç½®æååºå¼çãå¶å®ä»ä¹å¯ä»¥æ¥åå¤ææ°æ®ç±»åä½ä¸ºåæ°ï¼ä½æ¯å¶åé¨ä¾ç¶æ¯è°ç¨ reactive api è¿è¡çååºå¼å¤çï¼è¿ä¸ªè¿ç¨å¯¹ç¨æ·æ¥è¯´æ¯éèçãæä»¥ï¼ä¸ºäºä½¿ä»£ç æ´æ¸æ°ï¼ä½ åºè¯¥ä½¿ç¨ ref å»å¤çåºæ¬ç±»åçå½±åå¼æ°æ®ï¼èä½¿ç¨ reactive å»å¤çå¤æç±»åçæ°æ®ï¼æ³¨æï¼è¿éæçä¸æ¯ææçè´è´£ç±»åçæ°æ®ï¼\n\nconst a = ref(0)\nconsole.log(a.value) // 0\n\n\n * vue3 ä¸­çååºå¼å¤ç---\x3e Ref\n\nåçä¸é¢çä¾å­ï¼å¦æå¨æå¼è¡¨è¾¾å¼ä¸­æ³ç´æ¥ä½¿ç¨x, yèä¸ä½¿ç¨ position\n\n<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>Document</title>\n</head>\n<body>\n  <div id="app">\n    x: {{ x }} <br>\n    y: {{ y }}\n  </div>\n  <script type="module">\n    import { createApp, reactive, onMounted, onUnmounted, toRefs } from \'./vue.esm-browser.js\'\n\n    function useMousePosition () {\n      \n      const position = reactive({\n        x: 0,\n        y: 0\n      })\n\n      const update = e => {\n        position.x = e.pageX\n        position.y = e.pageY\n      }\n\n      onMounted(() => {\n        window.addEventListener(\'mousemove\', update)\n      })\n\n      onUnmounted(() => {\n        window.removeEventListener(\'mousemove\', update)\n      })\n\t\t\t\n      // æå±æ§ä¹è®¾ç½®æååºå¼ç\n      return toRefs(position)\n    }\n\t\t\n    const app = createApp({\n      setup () {\n        // è§£ææ¶ä¾æ§ä¸ºååºå¼\n        const { x, y } = useMousePosition()\n        return {\n          x,\n          y\n        }\n      }\n    })\n    \n    app.mount(\'#app\');\n  <\/script>\n</body>\n</html>\n\n\n\n# Computed/Watch/WatchEffect\n\n\n# Computed\n\n * ç¬¬ä¸ç§ç¨æ³\n   \n   * let plusOne = computed(() => count.value + 1)\n\n * ç¬¬äºç§ç¨æ³\n   \n   * const count = ref(1)\n     const plusOne = computed({\n       get: () => count.value + 1\n       set: val => {\n         count.value = val - 1\n       }\n     })\n     \n\n\n# Watch\n\n * Watchçä¸ä¸ªåæ°\n   * ç¬¬ä¸ä¸ªåæ°ï¼è¦çå¬çæ°æ®\n   * ç¬¬äºä¸ªåæ°ï¼çå¬å°æ°æ®åååæ§è¡çå½æ°ï¼è¿ä¸ªå½æ°æä¸¤ä¸ªåæ°åå«ä¸ºæ°å¼åæ§å¼\n   * ç¬¬ä¸ä¸ªåæ°ï¼éé¡¹å¯¹è±¡ï¼deep å immediate\n * Watchçè¿åå¼\n   * åæ¶çå¬çå½æ°\n\n\x3c!-- ä¸ä¸ªä¾å­ï¼èªå¨åç­ yes/no --\x3e\n<script type="module">\n\n    import { createApp, ref, watch } from \'./vue.esm-browser.js\'\n\n    createApp({\n      setup () {\n        const question = ref(\'\')\n        const answer = ref(\'\')\n\n        watch(question, async (newValue, oldValue) => {\n          const response = await fetch(\'https://www.yesno.wtf/api\')\n          answer.value = await response.json()\n        })\n\n        return {\n          question,\n          answer\n        }\n      }\n    }).mount(\'#app\');\n  \n  <\/script>\n\n\n\n# WatchEffect\n\nåºæ¯ï¼èªå¨è®°å½æä½æ¥å¿ åè®¾ä½ æä¸ä¸ªæé®ï¼æ¯ç¹ä¸æ¬¡è®¡æ°å¨ count +1ï¼åæ¶ä½ å¸æèªå¨è®°å½æ¯æ¬¡ç¹å»çæ¶é´ï¼ä¸éè¦æå¨åçå¬é»è¾ã\n\n# ð§ ä»£ç ç¤ºä¾\n\nimport { ref, watchEffect } from \'vue\';\n \nexport default {\n  setup() {\n    const count = ref(0);\n    const log = ref([]); // ç¨æ¥å­å¨æä½æ¥å¿\n \n    // ä½¿ç¨ watchEffect èªå¨è¿½è¸ª count çåå\n    watchEffect(() => {\n      log.value.push(`ç¹å»äº ${count.value} æ¬¡ï¼æ¶é´ï¼${new Date().toLocaleTimeString()}`);\n    });\n \n    const increment = () => {\n      count.value++;\n    };\n \n    return { count, increment, log };\n  }\n};\n\n\n# ð¤ åçäºä»ä¹ï¼\n\n 1. èªå¨è¿½è¸ªä¾èµï¼watchEffect ä¼èªå¨æ£æµåè°å½æ°ä¸­ç¨å°çååºå¼åéï¼è¿éæ¯ countï¼ï¼å½ count ååæ¶ï¼èªå¨éæ°æ§è¡åè°ã\n\n 2. ç«å³æ§è¡ä¸æ¬¡ï¼ç»ä»¶å è½½æ¶ï¼watchEffect ä¼ç«å³æ§è¡ä¸æ¬¡åè°ï¼è®°å½åå§ç¶æï¼æ­¤æ¶ count æ¯ 0ï¼ã\n\n 3. ä¾èµååæ¶è§¦åï¼æ¯æ¬¡ç¹å»æé® count å¢å ï¼watchEffect ä¼èªå¨è§¦åï¼è®°å½æ°çæ¥å¿ã\n\n# ð° å¯¹æ¯ watch çåºå«\n\nå¦æç¨ watch å®ç°åæ ·çåè½ï¼éè¦æ¾å¼æå®çå¬ç®æ ï¼\n\nwatch(count, (newVal) => {\n  log.value.push(`ç¹å»äº ${newVal} æ¬¡ï¼æ¶é´ï¼${new Date().toLocaleTimeString()}`);\n});\n\n\n# ð¡ æ ¸å¿æ»ç»\n\n * watchEffect çä½ç¨ï¼èªå¨è¿½è¸ªåè°å½æ°ä¸­ç¨å°çååºå¼åéï¼å½è¿äºåéååæ¶ï¼èªå¨éæ°æ§è¡åè°ã\n * éç¨åºæ¯ï¼å½ä½ éè¦åºäºå¤ä¸ªååºå¼åéçååæ§è¡å¯ä½ç¨æä½ï¼å¦æ¥å¿ãæ°æ®åæ­¥ãå¼æ­¥è¯·æ±ç­ï¼ï¼ä¸ä¸æ³æå¨ç®¡ççå¬é»è¾æ¶ã\n * å¯¹æ¯ watchï¼watch éè¦æç¡®æå®çå¬çåéï¼è watchEffect ä¼èªå¨æ¶éä¾èµï¼ä»£ç æ´ç®æ´ã\n\n\n# è¿é¶\n\nä½ç¨ï¼ ç¨æ¥è¿½è¸ªååºå¼ä¾èµï¼å¹¶å¨è¿½è¸ªçæ¶åèªå¨è§¦åä¸æ¬¡ï¼ååºæ£æµå°ååºå¼ä¾èµçè¯ï¼ä¼åæ¬¡æ´æ°ï¼æ³¨æææçéé¢çååºå¼æ°æ®ï¼ref\\reactiveï¼ é½ä¼èªå¨è¢«å å¥ä¾èµä¸­\n\nç¨æ³ï¼ ä¼ å¥ä¸ä¸ªå¯ä½ç¨æ¹æ³ï¼å¹¶ä¼èªå¨è¿½è¸ªéé¢çååºå¼ä¾èµï¼å¦å¤è¿å¯ä»¥ä¼ å¥ä¸ä¸ªå¯éçoptionsï¼ç¨äºæ§å¶å¯ä½ç¨è§¦åçæ¶æºï¼pre|post|syncï¼åå«æ¯ç»ä»¶æ¸²æååååæ­¥ï¼é»è®¤æ¯preãæ­¤å¤ watchEffectè¿åäºä¸ä¸ªåæ­¢çå¬çå½æ°ã\n\n * Vue3 å­¦ä¹ ç¬è®°ä¹ watchEffect\n * Vue3.0æ¥è¢­ï¼ä½ æ³å­¦çé½å¨è¿éï¼äºï¼',normalizedContent:'# vue3.0ï¼ä¸ï¼\n\n * vue.js 3.0\n * ç®å½ç»æ\n * æå»ºçæ¬\n * composition api\n * å½æ°å¼ç¼ç¨\n * æ§è½æå\n * vite\n * reactive/torefs/ref\n * computed/watch/watcheffect\n\n\n# vue.js 3.0\n\n * æºç ç»ç»æ¹å¼çåå\n   * éç¨ ts éå\n   * ä½¿ç¨ monorepo ç®¡çé¡¹ç®ç»æ\n * composition api\n * æ§è½æå\n * vite\n\n\n# ç®å½ç»æ\n\n> packagesç®å½ä¸æè®¸å¤æ¨¡å/åãmonorepo æ¯ç®¡çé¡¹ç®ä»£ç çä¸ä¸ªæ¹å¼ï¼æå¨ä¸ä¸ªé¡¹ç®ä»åº (repo) ä¸­ç®¡çå¤ä¸ªæ¨¡å/å (package)ï¼ä¸åäºå¸¸è§çæ¯ä¸ªæ¨¡åå»ºä¸ä¸ª repoãvue3.0 ä¸­ç monorepo ç®¡çæ¨¡å¼ï¼monorepo æ¯ä»ä¹ï¼ä¸ºä»ä¹å¤§å®¶é½å¨ç¨ï¼\n\n * compiler-coreï¼å¹³å°æ å³çç¼è¯å¨\n * compiler-domï¼æµè§å¨å¹³å°ä¸çç¼è¯å¨ï¼ä¾èµäºcompiler-core\n * compiler-sfcï¼ï¼single file componentï¼ç¼è¯åæä»¶ç»ä»¶\n * compiler-ssrï¼æå¡ç«¯æ¸²æçç¼è¯å¨\n * reactivityï¼æ°æ®ååºå¼ç³»ç»\n * runtime-coreï¼å¹³å°æ å³çè¿è¡æ¶\n * runtime-domï¼æµè§å¨å¹³å°ä¸çè¿è¡æ¶\n * runtime-testï¼ä¸ºäºæµè¯çè¿è¡æ¶ï¼domæ æ¯jså¯¹è±¡ï¼å¯è¿è¡äºææjsç¯å¢é\n * server-rendererï¼æå¡ç«¯æ¸²æ\n * sharedï¼vueåé¨ä½¿ç¨çä¸äºå¬å±çapi\n * size-checkï¼ä¸ä¸ªç§æçåï¼ä¸ä¼åå¸å°npmï¼å¨treeshakingåæ£æ¥åçå¤§å°\n * template-explorerï¼å®æ¶ç¼è¯ç»ä»¶ãè¾åºrenderå½æ°\n * vueï¼æå»ºå®æ´ççvue\n\n\n# æå»ºçæ¬\n\n * cjsï¼commonjsè§èï¼\n   * vue.cjs.js\n   * vue.cjs.prod.js\n * globalï¼å¯ä»¥ç´æ¥éè¿scriptå¼å¥ï¼å¢å å¨å±vueå¯¹è±¡ï¼runtimeæ¯åªåå«è¿è¡æ¶ï¼\n   * vue.global.js\n   * vue.global.prod.js\n   * vue.runtime.global.js\n   * vue.runtime.global.prod.js\n * browserï¼éè¿script type=moduleæ¹å¼å¼å¥ï¼\n   * vue.esm-browser.js\n   * vue.esm-browser.prod.js\n   * vue.runtime.esm-browser.js\n   * vue.runtime.esm-browser.prod.js\n * bundlerï¼æ²¡ææåçä»£ç ï¼è¦éåæåå·¥å·ï¼\n   * vue.esm-bundler.js\n   * vue.runtime.esm-bundler.js\n\n\n# options api\n\nå¨ vue2.x ä¸­éç¨çæ¯ options api\n\n> å¨vue2ä¸­å¦ä½ç»ç»ä»£ç çï¼**æä»¬ä¼å¨ä¸ä¸ªvueæä»¶ä¸­methodsï¼computedï¼watchï¼dataä¸­ç­ç­å®ä¹å±æ§åæ¹æ³ï¼å±åå¤çé¡µé¢é»è¾ï¼**æä»¬ç§°è¿ç§æ¹å¼ä¸ºoptions api\n\n * åå«ä¸ä¸ªæè¿°ç»ä»¶éé¡¹(data, methods, propsç­)çå¯¹è±¡\n * options api å¼åå¤æç»ä»¶ï¼åä¸ä¸ªåè½é»è¾çä»£ç è¢«æåå°ä¸åéé¡¹\n\n\n# composition api\n\n * vue.js 3.0 æ°å¢çä¸ç» api\n * ä¸ç»åºäºå½æ°ç api\n * å¯ä»¥æ´çµæ´»çç»ç»ç»ä»¶çé»è¾\n\ncomposition apiå¾ç¤º\n\nvue3ä¸ºä»ä¹è¦ä½¿ç¨composition api\n\n\n# å½æ°å¼ç¼ç¨\n\n> vue2 å¯¹å¤è¡¨ç°çç¼ç¨æ¨¡å¼åºæ¬å°±æ¯ï¼å¯¹è±¡è°ç¨èªå·±çæ°æ®åæ¹æ³ââthis + . æä½ãæä»¥å¨ vue2 æ¶ä»£ï¼æä»¬éå¸¸ä¼æç¸å³çæ°æ®åæä½åå¨åä¸ä¸ªå¯¹è±¡éãä½æ¯å°äº vue3 ç setup éï¼ä½ å ä¹ä¸ä¼ç¨å° this äºï¼åæäºè®©å½æ°æ¥è°ç¨å¯¹è±¡ææ¯å¦ä¸ä¸ªå½æ°ââå°±æ¯ fp çç¹ç¹äºãéä¿æ¥è¯´ï¼å°±æ¯ä»åºäºå¯¹è±¡çç¼ç¨ï¼oopï¼è½¬åäºå½æ°å¼ç¼ç¨ï¼fpï¼ã\n\n\n# æ§è½æå\n\n * ååºå¼ç³»ç»åçº§ï¼éç¨ proxy\n\n * ç¼è¯ä¼å\n   \n   * vue.js 2.xä¸­éè¿æ è®°éææ ¹èç¹ï¼ä¼å diff çè¿ç¨ï¼éæèç¹ä»éè¦ diff\n   \n   * vue.js 3.0ä¸­æ è®°åæåææçéææ ¹èç¹ï¼diff çæ¶ååªéè¦å¯¹æ¯å¨æèç¹åå®¹\n     \n     * fragmentsï¼åçº§ vetur æä»¶ï¼æ²¡ææ ¹èç¹ä¹ä¸ä¼æ¥éï¼ä¼åå»ºä¸ä¸ª fragment çæ®µï¼\n     * éææåï¼åæ¬¡ç¼è¯å¯ä»¥è·³è¿éææ ¹èç¹ï¼\n     * patch flag\n     * ç¼å­äºä»¶å¤çå½æ°\n   \n   * ä¾å­ï¼vue2æ¨¡æ¿ç¼è¯ãvue3æ¨¡æ¿ç¼è¯ç½å\n     \n     <div id=\'app\'>\n         <div>static root\n     \t\t<div>static node</div>\n         </div>\n         <div>static node</div>\n         <div>static node</div>\n         <div :id="id">{{ count }}</div>\n         <button @click="handler"></button>\n     </div>\n     \x3c!-- 1. å ææ ¹èç¹è¯ä¸ä¸\n          2. å³ä¸è§optionsä¸­éæ© hoiststatic æåéæèç¹\n          3. å³ä¾§å¯ä»¥æ¾å° patch flag\n          4. å³ä¸è§optionså¯ä»¥å¼å¯ç¼å­ --\x3e\n     \n\n * æºç ä½ç§¯çä¼å\n   \n   * ç§»é¤ä¸äºä¸å¸¸ç¨ç apiï¼inline-template, filter\n   * tree-shaking\n\n\n# vite\n\n\n# es module\n\n * ç°ä»£æµè§å¨é½æ¯æ es moduleï¼ie ä¸æ¯æï¼\n * éè¿ä¸é¢çæ¹å¼å è½½æ¨¡å\n   * <script type="module" src="..."><\/script>\n * æ¯ææ¨¡åç script é»è®¤å»¶è¿å è½½\n\nåé¡¾æµè§å¨å è½½æ¨¡åï¼type=moduleä¼èªå¨æ·»å ä¸deferå±æ§ï¼è¿ç¨: å è½½æ¨¡åå¹¶æ§è¡æ¯å¨domæ åå»ºå®æ¯ä¹åï¼domcontentloadedä¹åæ§è¡\n\n<div id="app">hello world</div>\n<script>\n\twindow.addeventlistener(\'domcontentloaded\', () => {\n        console.log(\'domcontentloaded\')\n  })\n<\/script>\n<script type="module" src="./index.js"><\/script>\n\n\n// index.js\nimport { foreach } from \'./utils.js\'\n\nconst app = document.queryselector(\'#app\')\nconsole.log(app.innerhtml)\n\nconst arr = [1, 2, 3]\nforeach(arr, item => {\n    console.log(item)\n})\n\n\n// è¾åº\n// hello world\n// 1 2 3\n// domcontentloaded\n\n// ï¼1ï¼domcontentloaded äºä»¶è§¦åæ¶ï¼ä»å½domå è½½å®æï¼ä¸åæ¬æ ·å¼è¡¨ï¼å¾ç(è­¬å¦å¦ææasyncå è½½çèæ¬å°±ä¸ä¸å®å®æ)ã\n\n// ï¼2ï¼load äºä»¶è§¦åæ¶ï¼é¡µé¢ä¸ææçdomï¼æ ·å¼è¡¨ï¼èæ¬ï¼å¾çé½å·²ç»å è½½å®æäºã\n\n\n\n# vite vs vue-cli\n\n * vite å¨å¼åæ¨¡å¼ä¸ä¸éè¦æåå¯ä»¥ç´æ¥è¿è¡ï¼å¼åæ¨¡å¼ä¸ä½¿ç¨script type=moduleï¼ä¸éè¦æåä»£ç ï¼\n * vue-cli å¼åæ¨¡å¼ä¸å¿é¡»å¯¹é¡¹ç®æåæå¯ä»¥è¿è¡\n * çäº§ç¯å¢ä¸ä½¿ç¨ rollup æåï¼åºäºes modulesçæ¹å¼æåï¼\n\n\n# vite ç¹ç¹\n\n * å¿«éå·å¯å¨\n * æéç¼è¯\n * æ¨¡åç­æ´æ°\n\n\n# viteåå»ºé¡¹ç®\n\nnpm init vite-app <project-name>\ncd <project-name>\nnpm install\nnpm run dev\n\n\n\n# åºäºæ¨¡æ¿åå»ºé¡¹ç®\n\nnpm init vite-app --template react\n\n\n\n# composition api è¯¦è§£\n\n\n# setup å¥å£å½æ°\n\n * setup å½æ°æ¯ç»åå¼ api çå¥å£å½æ°ï¼å®å¨ ç»ä»¶åå»ºä¹å è¢«è°ç¨\n\n * å ä¸ºå¨ setup æ§è¡æ¶ç»ä»¶å°æªåå»ºï¼setup å½æ°ä¸­ç this ä¸æ¯å½åç»ä»¶çå®ä¾\n\n * å½æ°æ¥æ¶ä¸¤ä¸ªåæ°ï¼props å contextï¼context å¯ä»¥è§£æä¸º attrsãslotsãemit å½æ°\n   \n   * propsï¼éè¿ prop ä¼ éè¿æ¥çæææ°æ®ï¼æä»¬é½å¯ä»¥å¨è¿éè¿è¡æ¥æ¶ãå¹¶ä¸è·åå°çæ°æ®å°ä¿æååºæ§ã\n   * contextï¼context æ¯ä¸ä¸ª javascript å¯¹è±¡ï¼è¿ä¸ªå¯¹è±¡æ´é²äºä¸ä¸ªç»ä»¶çå±æ§ï¼æä»¬å¯ä»¥éè¿ è§£æ çæ¹å¼æ¥åå«è·åè¿ä¸ä¸ªå±æ§\n     * attrsï¼ å®æ¯ç»å®å°ç»ä»¶ä¸­ç é props æ°æ®ï¼å¹¶ä¸æ¯éååºå¼çã\n     * slotsï¼ æ¯ç»ä»¶çææ§½ï¼åæ ·ä¹ä¸æ¯ ååºå¼çã\n     * emitï¼ æ¯ä¸ä¸ªæ¹æ³ï¼ç¸å½äº vue2 ä¸­ç this.$emit æ¹æ³ã\n\n * å½æ°å¯ä»¥è¿åä¸ä¸ªå¯¹è±¡ï¼å¯¹è±¡çå±æ§å¯ä»¥ç´æ¥å¨æ¨¡æ¿ä¸­è¿è¡ä½¿ç¨ï¼å°±åä¹åä½¿ç¨ data å methods ä¸æ ·ã\n\n\n# ä¸ä¸ªç®åçä¾å­ï¼å®æ¶æ¾ç¤ºé¼ æ ä½ç½®\n\n<!doctype html>\n<html lang="en">\n<head>\n  <meta charset="utf-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>document</title>\n</head>\n<body>\n  <div id="app">\n    x: {{ position.x }} <br>\n    y: {{ position.y }}\n  </div>\n  <script type="module">\n    \n    import { createapp, reactive, onmounted, onunmounted } from \'./vue.esm-browser.js\'\n\t\t\n    // æåè½å°è£æä¸ä¸ªå½æ°ï¼dataï¼menthodsï¼hooksé½å¨è¿ä¸ªå½æ°ä¸­\n    function usemouseposition () {\n      \n      // reactive å¤çæååºå¼\n      const position = reactive({\n        x: 0,\n        y: 0\n      })\n\n      const update = e => {\n        position.x = e.pagex\n        position.y = e.pagey\n      }\n\n      onmounted(() => {\n        window.addeventlistener(\'mousemove\', update)\n      })\n\n      onunmounted(() => {\n        window.removeeventlistener(\'mousemove\', update)\n      })\n\n      return position\n    }\n\t\t\n    // creatapp åå»º vue å¯¹è±¡\n    const app = createapp({\n      setup () {\n        const position = usemouseposition()\n        \n        // return ç»æ¨¡æ¿ä½¿ç¨\n        return {\n          position\n        }\n      }\n    })\n\n    app.mount(\'#app\')\n  <\/script>\n</body>\n</html>\n\n\n\n# çå½å¨æé©å­å½æ°\n\n> setup() å¼å§åå»ºç»ä»¶ä¹åï¼å¨beforecreateåcreatedä¹åæ§è¡ãåå»ºçæ¯dataåmethod\n\noptions api     hook inside setup   è¯´æ\nbeforecreate    setup               ç»ä»¶åå»ºä¹å\ncreated         setup               ç»ä»¶åå»ºå®æ\nbeforemount     onbeforemount       ç»ä»¶æè½½ä¹å\nmounted         onmounted           ç»ä»¶æè½½å®æ\nbeforeupdate    onbeforeupdate      æ°æ®æ´æ°ï¼èædomæè¡¥ä¸ä¹å\nupdated         onupdated           æ°æ®æ´æ°ï¼èædomæ¸²æå®æ\nbeforedestroy   onbeforeunmount     ç»ä»¶éæ¯ä¹å\ndestroyed       onunmounted         ç»ä»¶éæ¯å\n\n\n# reactive/torefs/ref\n\n * reactiveï¼å¤çå¤ææ°æ®ç±»åä¸ºååºå¼\n * refï¼å¤çåºæ¬æ°æ®ç±»åä¸ºååºå¼\n * torefsï¼torefs æ¯ toref çæ¹éçæ¬ãä¼å°ä¼ å¥å¯¹è±¡çæ¯ä¸ªå±æ§å¤çä¸º ref çå¼\n\n> refå®ç°çåé¨åå»ºäºä¸ä¸ªå¯¹è±¡ï¼å°valueå¼è®¾ç½®æååºå¼çãå¶å®ä»ä¹å¯ä»¥æ¥åå¤ææ°æ®ç±»åä½ä¸ºåæ°ï¼ä½æ¯å¶åé¨ä¾ç¶æ¯è°ç¨ reactive api è¿è¡çååºå¼å¤çï¼è¿ä¸ªè¿ç¨å¯¹ç¨æ·æ¥è¯´æ¯éèçãæä»¥ï¼ä¸ºäºä½¿ä»£ç æ´æ¸æ°ï¼ä½ åºè¯¥ä½¿ç¨ ref å»å¤çåºæ¬ç±»åçå½±åå¼æ°æ®ï¼èä½¿ç¨ reactive å»å¤çå¤æç±»åçæ°æ®ï¼æ³¨æï¼è¿éæçä¸æ¯ææçè´è´£ç±»åçæ°æ®ï¼\n\nconst a = ref(0)\nconsole.log(a.value) // 0\n\n\n * vue3 ä¸­çååºå¼å¤ç---\x3e ref\n\nåçä¸é¢çä¾å­ï¼å¦æå¨æå¼è¡¨è¾¾å¼ä¸­æ³ç´æ¥ä½¿ç¨x, yèä¸ä½¿ç¨ position\n\n<!doctype html>\n<html lang="en">\n<head>\n  <meta charset="utf-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>document</title>\n</head>\n<body>\n  <div id="app">\n    x: {{ x }} <br>\n    y: {{ y }}\n  </div>\n  <script type="module">\n    import { createapp, reactive, onmounted, onunmounted, torefs } from \'./vue.esm-browser.js\'\n\n    function usemouseposition () {\n      \n      const position = reactive({\n        x: 0,\n        y: 0\n      })\n\n      const update = e => {\n        position.x = e.pagex\n        position.y = e.pagey\n      }\n\n      onmounted(() => {\n        window.addeventlistener(\'mousemove\', update)\n      })\n\n      onunmounted(() => {\n        window.removeeventlistener(\'mousemove\', update)\n      })\n\t\t\t\n      // æå±æ§ä¹è®¾ç½®æååºå¼ç\n      return torefs(position)\n    }\n\t\t\n    const app = createapp({\n      setup () {\n        // è§£ææ¶ä¾æ§ä¸ºååºå¼\n        const { x, y } = usemouseposition()\n        return {\n          x,\n          y\n        }\n      }\n    })\n    \n    app.mount(\'#app\');\n  <\/script>\n</body>\n</html>\n\n\n\n# computed/watch/watcheffect\n\n\n# computed\n\n * ç¬¬ä¸ç§ç¨æ³\n   \n   * let plusone = computed(() => count.value + 1)\n\n * ç¬¬äºç§ç¨æ³\n   \n   * const count = ref(1)\n     const plusone = computed({\n       get: () => count.value + 1\n       set: val => {\n         count.value = val - 1\n       }\n     })\n     \n\n\n# watch\n\n * watchçä¸ä¸ªåæ°\n   * ç¬¬ä¸ä¸ªåæ°ï¼è¦çå¬çæ°æ®\n   * ç¬¬äºä¸ªåæ°ï¼çå¬å°æ°æ®åååæ§è¡çå½æ°ï¼è¿ä¸ªå½æ°æä¸¤ä¸ªåæ°åå«ä¸ºæ°å¼åæ§å¼\n   * ç¬¬ä¸ä¸ªåæ°ï¼éé¡¹å¯¹è±¡ï¼deep å immediate\n * watchçè¿åå¼\n   * åæ¶çå¬çå½æ°\n\n\x3c!-- ä¸ä¸ªä¾å­ï¼èªå¨åç­ yes/no --\x3e\n<script type="module">\n\n    import { createapp, ref, watch } from \'./vue.esm-browser.js\'\n\n    createapp({\n      setup () {\n        const question = ref(\'\')\n        const answer = ref(\'\')\n\n        watch(question, async (newvalue, oldvalue) => {\n          const response = await fetch(\'https://www.yesno.wtf/api\')\n          answer.value = await response.json()\n        })\n\n        return {\n          question,\n          answer\n        }\n      }\n    }).mount(\'#app\');\n  \n  <\/script>\n\n\n\n# watcheffect\n\nåºæ¯ï¼èªå¨è®°å½æä½æ¥å¿ åè®¾ä½ æä¸ä¸ªæé®ï¼æ¯ç¹ä¸æ¬¡è®¡æ°å¨ count +1ï¼åæ¶ä½ å¸æèªå¨è®°å½æ¯æ¬¡ç¹å»çæ¶é´ï¼ä¸éè¦æå¨åçå¬é»è¾ã\n\n# ð§ ä»£ç ç¤ºä¾\n\nimport { ref, watcheffect } from \'vue\';\n \nexport default {\n  setup() {\n    const count = ref(0);\n    const log = ref([]); // ç¨æ¥å­å¨æä½æ¥å¿\n \n    // ä½¿ç¨ watcheffect èªå¨è¿½è¸ª count çåå\n    watcheffect(() => {\n      log.value.push(`ç¹å»äº ${count.value} æ¬¡ï¼æ¶é´ï¼${new date().tolocaletimestring()}`);\n    });\n \n    const increment = () => {\n      count.value++;\n    };\n \n    return { count, increment, log };\n  }\n};\n\n\n# ð¤ åçäºä»ä¹ï¼\n\n 1. èªå¨è¿½è¸ªä¾èµï¼watcheffect ä¼èªå¨æ£æµåè°å½æ°ä¸­ç¨å°çååºå¼åéï¼è¿éæ¯ countï¼ï¼å½ count ååæ¶ï¼èªå¨éæ°æ§è¡åè°ã\n\n 2. ç«å³æ§è¡ä¸æ¬¡ï¼ç»ä»¶å è½½æ¶ï¼watcheffect ä¼ç«å³æ§è¡ä¸æ¬¡åè°ï¼è®°å½åå§ç¶æï¼æ­¤æ¶ count æ¯ 0ï¼ã\n\n 3. ä¾èµååæ¶è§¦åï¼æ¯æ¬¡ç¹å»æé® count å¢å ï¼watcheffect ä¼èªå¨è§¦åï¼è®°å½æ°çæ¥å¿ã\n\n# ð° å¯¹æ¯ watch çåºå«\n\nå¦æç¨ watch å®ç°åæ ·çåè½ï¼éè¦æ¾å¼æå®çå¬ç®æ ï¼\n\nwatch(count, (newval) => {\n  log.value.push(`ç¹å»äº ${newval} æ¬¡ï¼æ¶é´ï¼${new date().tolocaletimestring()}`);\n});\n\n\n# ð¡ æ ¸å¿æ»ç»\n\n * watcheffect çä½ç¨ï¼èªå¨è¿½è¸ªåè°å½æ°ä¸­ç¨å°çååºå¼åéï¼å½è¿äºåéååæ¶ï¼èªå¨éæ°æ§è¡åè°ã\n * éç¨åºæ¯ï¼å½ä½ éè¦åºäºå¤ä¸ªååºå¼åéçååæ§è¡å¯ä½ç¨æä½ï¼å¦æ¥å¿ãæ°æ®åæ­¥ãå¼æ­¥è¯·æ±ç­ï¼ï¼ä¸ä¸æ³æå¨ç®¡ççå¬é»è¾æ¶ã\n * å¯¹æ¯ watchï¼watch éè¦æç¡®æå®çå¬çåéï¼è watcheffect ä¼èªå¨æ¶éä¾èµï¼ä»£ç æ´ç®æ´ã\n\n\n# è¿é¶\n\nä½ç¨ï¼ ç¨æ¥è¿½è¸ªååºå¼ä¾èµï¼å¹¶å¨è¿½è¸ªçæ¶åèªå¨è§¦åä¸æ¬¡ï¼ååºæ£æµå°ååºå¼ä¾èµçè¯ï¼ä¼åæ¬¡æ´æ°ï¼æ³¨æææçéé¢çååºå¼æ°æ®ï¼ref\\reactiveï¼ é½ä¼èªå¨è¢«å å¥ä¾èµä¸­\n\nç¨æ³ï¼ ä¼ å¥ä¸ä¸ªå¯ä½ç¨æ¹æ³ï¼å¹¶ä¼èªå¨è¿½è¸ªéé¢çååºå¼ä¾èµï¼å¦å¤è¿å¯ä»¥ä¼ å¥ä¸ä¸ªå¯éçoptionsï¼ç¨äºæ§å¶å¯ä½ç¨è§¦åçæ¶æºï¼pre|post|syncï¼åå«æ¯ç»ä»¶æ¸²æååååæ­¥ï¼é»è®¤æ¯preãæ­¤å¤ watcheffectè¿åäºä¸ä¸ªåæ­¢çå¬çå½æ°ã\n\n * vue3 å­¦ä¹ ç¬è®°ä¹ watcheffect\n * vue3.0æ¥è¢­ï¼ä½ æ³å­¦çé½å¨è¿éï¼äºï¼',charsets:{cjk:!0}},{title:"webpackï¼ä¸ï¼",frontmatter:{title:"webpackï¼ä¸ï¼",date:"2020-09-06T09:47:00.000Z",categories:"webpack"},regularPath:"/webpack/webpack1.html",relativePath:"webpack/webpack1.md",key:"v-81716842",path:"/webpack/webpack1.html",headers:[{level:2,title:"ä¸ºä»ä¹ä½¿ç¨ webpack",slug:"ä¸ºä»ä¹ä½¿ç¨-webpack",normalizedTitle:"ä¸ºä»ä¹ä½¿ç¨ webpack",charIndex:17},{level:2,title:"webpackåä½éª",slug:"webpackåä½éª",normalizedTitle:"webpackåä½éª",charIndex:34},{level:3,title:"å¦ä½æ·»å éç½®å¥å£æä»¶",slug:"å¦ä½æ·»å éç½®å¥å£æä»¶",normalizedTitle:"å¦ä½æ·»å éç½®å¥å£æä»¶",charIndex:849},{level:2,title:"å¦ä½æåcssæä»¶",slug:"å¦ä½æåcssæä»¶",normalizedTitle:"å¦ä½æåcssæä»¶",charIndex:1332},{level:3,title:"å¦ä½æåå¾ç",slug:"å¦ä½æåå¾ç",normalizedTitle:"å¦ä½æåå¾ç",charIndex:1781},{level:2,title:"å¸¸ç¨å è½½å¨åç±»",slug:"å¸¸ç¨å è½½å¨åç±»",normalizedTitle:"å¸¸ç¨å è½½å¨åç±»",charIndex:62},{level:2,title:"å¦ä½å¤çES6è¯­æ³",slug:"å¦ä½å¤çes6è¯­æ³",normalizedTitle:"å¦ä½å¤çes6è¯­æ³",charIndex:73},{level:2,title:"æ¨¡åå è½½æ¹å¼",slug:"æ¨¡åå è½½æ¹å¼",normalizedTitle:"æ¨¡åå è½½æ¹å¼",charIndex:86},{level:2,title:"èªå·±åå»ºä¸ä¸ªloader",slug:"èªå·±åå»ºä¸ä¸ªloader",normalizedTitle:"èªå·±åå»ºä¸ä¸ªloader",charIndex:96}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"ä¸ºä»ä¹ä½¿ç¨ webpack webpackåä½éª å¦ä½æ·»å éç½®å¥å£æä»¶ å¦ä½æåcssæä»¶ å¦ä½æåå¾ç å¸¸ç¨å è½½å¨åç±» å¦ä½å¤çES6è¯­æ³ æ¨¡åå è½½æ¹å¼ èªå·±åå»ºä¸ä¸ªloader",content:"# webpackï¼ä¸ï¼\n\n * ä¸ºä»ä¹ä½¿ç¨ webpack\n * webpackåä½éª\n * å¦ä½æåcssåå¾ç\n * å¸¸ç¨å è½½å¨åç±»\n * å¦ä½å¤çES6è¯­æ³\n * æ¨¡åå è½½æ¹å¼\n * èªå·±åå»ºä¸ä¸ªloader\n\n\n# ä¸ºä»ä¹ä½¿ç¨ webpack\n\nä¸ªäººçè§£æä»¬å¹³æ¶å¼åçæ¶åï¼æ¯å¦ä½¿ç¨es6ï¼tsï¼éç¨æ¨¡ååï¼ä½¿ç¨ä¸åçææ¯æ ï¼å¤§å¤æ°æåçä»£ç æ¯ä¸è½è¢«æµè§å¨ç´æ¥è¿è¡çï¼æä»¥éè¦ä¸ä¸ªå·¥å·æ¥å¸®æä»¬å®æè¿äºäºæï¼å¦å¤è¿å¯ä»¥å¢å åç¼©ä»£ç ï¼hmrè¿äºåè½ï¼è¿å°±æ¯ webpackã\n\n\n# webpackåä½éª\n\n> webpackæ¯ä¸ç§åç«¯èµæºæå»ºå·¥å·ï¼ä¸ä¸ªéææ¨¡åæåå¨ï¼module bundlerï¼ãå¨webpackçæ¥ï¼åç«¯çææèµæºæä»¶ï¼js/json/css/img/lessâ¦ï¼é½ä¼ä½ä¸ºæ¨¡åå¤çãå®å°æ ¹æ®æ¨¡åçä¾èµå³ç³»è¿è¡éæåæï¼æåçæå¯¹åºçéæèµæºï¼bundleï¼\n\nå®è£ï¼cnpm install -D webpack webpack-cliï¼ä¸¾ä¾ï¼æ¯å¦æ­¤æ¶æå¦ä¸çç®å½ç»æ\n\n|--src\n    --heading.js  // éµå¾ªES Modules\n    --index.js\n|--index.html\n|--package.json\n\n\nå¶ä¸­index.jsæ¨¡åä¸­å¼å¥äºheading.jsæ¨¡åå¯¼åºçæ¹æ³ï¼èindex.htmlä¸­åå¼å¥äºindex.jsï¼é»è®¤å¥å£ä¸ºsrc/index.js\n\n> htmlæä»¶ä¸­åæ¬çå¼å¥\n> \n> scriptÂ type=\"module\" src=\"src/index.js\"\n\nè¿è¡webpackå½ä»¤\n\n|--dist\n    --main.js // æååçjsæä»¶\n|--src\n    --heading.js\n    --index.js\n|--index.html\n|--package.json\n\n\n> htmlæä»¶ä¸­ï¼æåä¹åçå¼å¥\n> \n> scriptÂ src=\"dist/main.js\"\n\n\n# å¦ä½æ·»å éç½®å¥å£æä»¶\n\næ°å»ºwebpack.config.jsæä»¶ï¼ä½¿ç¨common.jsè§è\n\nconst path = require('path')\n\nmodule.exports = {\n  // modeè¿ä¸ªå±æ§æä¸ç§åå¼ï¼åå«æ¯ productionãdevelopment å noneã\n  // 1. çäº§æ¨¡å¼ä¸ï¼Webpack ä¼èªå¨ä¼åæåç»æï¼\n  // 2. å¼åæ¨¡å¼ä¸ï¼Webpack ä¼èªå¨ä¼åæåéåº¦ï¼æ·»å ä¸äºè°è¯è¿ç¨ä¸­çè¾å©ï¼\n  // 3. None æ¨¡å¼ä¸ï¼Webpack å°±æ¯è¿è¡æåå§çæåï¼ä¸åä»»ä½é¢å¤å¤çï¼\n  mode: 'development',\n  entry: './src/main.js', // å¥å£\n  output: { \n    filename: 'bundle.js', \n    path: path.join(__dirname, 'output') //ç»å¯¹è·¯å¾ï¼__dirnameä¸ºå½åæä»¶å¤¹è·¯å¾ + output\n  }\n}\n\n\npath.joinä¸path.resolve\n\n\n# å¦ä½æåcssæä»¶\n\nå ä¸ºwebpacké»è®¤æåjsæä»¶ï¼æä»¥æä»¬éè¦é¢å¤çloaderæ¥å¤çï¼cnpm install -D style-loader css-loader\n\n * css-loaderï¼å¤çcssæä»¶ï¼å°å¶æåè³jsæä»¶ä¸­\n * style-loaderï¼ç¨äºå±ç¤ºæååçcssæä»¶\n\n// å¨webpack.config.jsä¸­æ°å¢\n module: {\n    rules: [\n      {\n        test: /.css$/, // éå°cssæä»¶æ¶\n        use: [\n          'style-loader', // éç¨å¦ä¸loaderï¼ä»åååè°ç¨\n          'css-loader'\n        ]\n      }\n    ]\n  }\n\n// ç¶åæ¯å¦å¨main.jsä¸­éè¿importçæ¹å¼å¼å¥main.cssæä»¶\nimport './main.css'\n\n// æ­¤æ¶è¿è¡webpackå°±ä¼æåcssæä»¶\n\n\n\n# å¦ä½æåå¾ç\n\ncnpm install -D file-loader url-loaderï¼é¦åå¨main.jsä½¿ç¨importçæ¹å¼ä¸­å¯¼å¥./icon.png\n\n * è¶åº10KBçæä»¶åç¬æåå­æ¾å¨distä¸­\n * å°äº10KBçæä»¶è½¬æ¢ä¸º Data URLs åµå¥ä»£ç ä¸­ï¼base64ç¼ç ï¼\n\n|--dist\n    --bundle.js \n    --aaa0e...png // æååçå¾ç\n|--src\n    --heading.js\n    --main.js\n    --main.css\n    --icon.png\n|--index.html\n|--package.json\n\n\nconst path = require('path')\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/main.js',\n  output: {\n    filename: 'bundle.js',\n    path: path.join(__dirname, 'dist'),\n    publicPath: 'dist/'                 // å ä¸ºindex.htmlå¨æ ¹ç®å½ï¼æä»¥å¾çä¹ä»æ ¹ç®å½å è½½ï¼ä¸ä¼æ¾ç¤ºï¼è¦å ä¸dist\n  },\n  module: {\n    rules: [\n      {\n        test: /.css$/,\n        use: [\n          'style-loader',\n          'css-loader'\n        ]\n      },\n      {\n        test: /.png$/,\n        use: {\n          loader: 'url-loader', // å¤§äº10KBçè¿ä¼ä½¿ç¨file-loader\n          options: {\n            limit: 10 * 1024 // 10 KB\n          }\n        }\n      }\n    ]\n  }\n}\n\n\n\n# å¸¸ç¨å è½½å¨åç±»\n\n * ç¼è¯è½¬æ¢ç±»ï¼æ¯å¦css-loaderå°cssç¼è¯å¹¶åµå¥å¨bundle.js\n * æä»¶æä½ç±»ï¼æ¯å¦file-loader\n * ä»£ç æ£æ¥ç±»ï¼æ¯å¦eslint-loader\n\n\n# å¦ä½å¤çES6è¯­æ³\n\nè½ç¶webpackæ¯æimportåexportæ¨¡ååï¼ä½å¹¶ä¸æ¯æES6è¯­æ³\n\ncnpm install -D babel-loader @babel/core @babel/preset-env\n\n// rulesæ°å¢\n\t{\n        test: /.js$/,\n        use: {\n          loader: 'babel-loader',\n          options: {\n            presets: ['@babel/preset-env']\n          }\n        }\n      }\n\n\n\n# æ¨¡åå è½½æ¹å¼\n\n * éµå¾ª ES Modules æ åç import å£°æï¼éç¹æ®æåµåªç¨è¿ä¸ç§ï¼\n * éµå¾ª CommonJS æ åç requireå½æ°\n * éµå¾ª AMD æ åç define å½æ°å require å½æ°\n * * æ ·å¼ä»£ç ä¸­ç@importæä»¤åurlå½æ°\n   * HTML ä»£ç ä¸­å¾çæ ç­¾ç src å±æ§ï¼aæ ç­¾çhrefå±æ§ï¼éè¦éç½®ï¼\n\n// htmlä¸­çaæ ç­¾çhrefå±æ§éè¦éç½®\n\t {\n        test: /.html$/,\n        use: {\n          loader: 'html-loader',\n          options: {\n            attrs: ['img:src', 'a:href']\n          }\n        }\n      }\n\n\n\n# èªå·±åå»ºä¸ä¸ªloader\n\næ ¹ç®å½ä¸æ°å»ºä¸ä¸ªmarkdown-loader.jsä½ä¸ºå¤çmdæä»¶çloaderï¼ç¶åå¨webpack.config.jsä¸­éç½®ï¼\n\nconst path = require('path')\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/main.js',\n  output: {\n    filename: 'bundle.js',\n    path: path.join(__dirname, 'dist'),\n    publicPath: 'dist/'\n  },\n  module: {\n    rules: [\n      {\n        test: /.md$/,\n        use: [\n          'html-loader',\n          './markdown-loader'\n        ]\n      }\n    ]\n  }\n}\n\n\n// markdown-loader.js\n\nconst marked = require('marked')\n\nmodule.exports = source => {\n    \n  const html = marked(source)\n\n  // è¿å html å­ç¬¦ä¸²äº¤ç»ä¸ä¸ä¸ª loader å¤ç\n  return html\n}\n\n\n// loaderç®¡éç¤ºæ\n\n// Source => md-loader => loader2 => loader3 => Result ï¼jsæä»¶ï¼ \n",normalizedContent:"# webpackï¼ä¸ï¼\n\n * ä¸ºä»ä¹ä½¿ç¨ webpack\n * webpackåä½éª\n * å¦ä½æåcssåå¾ç\n * å¸¸ç¨å è½½å¨åç±»\n * å¦ä½å¤çes6è¯­æ³\n * æ¨¡åå è½½æ¹å¼\n * èªå·±åå»ºä¸ä¸ªloader\n\n\n# ä¸ºä»ä¹ä½¿ç¨ webpack\n\nä¸ªäººçè§£æä»¬å¹³æ¶å¼åçæ¶åï¼æ¯å¦ä½¿ç¨es6ï¼tsï¼éç¨æ¨¡ååï¼ä½¿ç¨ä¸åçææ¯æ ï¼å¤§å¤æ°æåçä»£ç æ¯ä¸è½è¢«æµè§å¨ç´æ¥è¿è¡çï¼æä»¥éè¦ä¸ä¸ªå·¥å·æ¥å¸®æä»¬å®æè¿äºäºæï¼å¦å¤è¿å¯ä»¥å¢å åç¼©ä»£ç ï¼hmrè¿äºåè½ï¼è¿å°±æ¯ webpackã\n\n\n# webpackåä½éª\n\n> webpackæ¯ä¸ç§åç«¯èµæºæå»ºå·¥å·ï¼ä¸ä¸ªéææ¨¡åæåå¨ï¼module bundlerï¼ãå¨webpackçæ¥ï¼åç«¯çææèµæºæä»¶ï¼js/json/css/img/lessâ¦ï¼é½ä¼ä½ä¸ºæ¨¡åå¤çãå®å°æ ¹æ®æ¨¡åçä¾èµå³ç³»è¿è¡éæåæï¼æåçæå¯¹åºçéæèµæºï¼bundleï¼\n\nå®è£ï¼cnpm install -d webpack webpack-cliï¼ä¸¾ä¾ï¼æ¯å¦æ­¤æ¶æå¦ä¸çç®å½ç»æ\n\n|--src\n    --heading.js  // éµå¾ªes modules\n    --index.js\n|--index.html\n|--package.json\n\n\nå¶ä¸­index.jsæ¨¡åä¸­å¼å¥äºheading.jsæ¨¡åå¯¼åºçæ¹æ³ï¼èindex.htmlä¸­åå¼å¥äºindex.jsï¼é»è®¤å¥å£ä¸ºsrc/index.js\n\n> htmlæä»¶ä¸­åæ¬çå¼å¥\n> \n> scriptÂ type=\"module\" src=\"src/index.js\"\n\nè¿è¡webpackå½ä»¤\n\n|--dist\n    --main.js // æååçjsæä»¶\n|--src\n    --heading.js\n    --index.js\n|--index.html\n|--package.json\n\n\n> htmlæä»¶ä¸­ï¼æåä¹åçå¼å¥\n> \n> scriptÂ src=\"dist/main.js\"\n\n\n# å¦ä½æ·»å éç½®å¥å£æä»¶\n\næ°å»ºwebpack.config.jsæä»¶ï¼ä½¿ç¨common.jsè§è\n\nconst path = require('path')\n\nmodule.exports = {\n  // modeè¿ä¸ªå±æ§æä¸ç§åå¼ï¼åå«æ¯ productionãdevelopment å noneã\n  // 1. çäº§æ¨¡å¼ä¸ï¼webpack ä¼èªå¨ä¼åæåç»æï¼\n  // 2. å¼åæ¨¡å¼ä¸ï¼webpack ä¼èªå¨ä¼åæåéåº¦ï¼æ·»å ä¸äºè°è¯è¿ç¨ä¸­çè¾å©ï¼\n  // 3. none æ¨¡å¼ä¸ï¼webpack å°±æ¯è¿è¡æåå§çæåï¼ä¸åä»»ä½é¢å¤å¤çï¼\n  mode: 'development',\n  entry: './src/main.js', // å¥å£\n  output: { \n    filename: 'bundle.js', \n    path: path.join(__dirname, 'output') //ç»å¯¹è·¯å¾ï¼__dirnameä¸ºå½åæä»¶å¤¹è·¯å¾ + output\n  }\n}\n\n\npath.joinä¸path.resolve\n\n\n# å¦ä½æåcssæä»¶\n\nå ä¸ºwebpacké»è®¤æåjsæä»¶ï¼æä»¥æä»¬éè¦é¢å¤çloaderæ¥å¤çï¼cnpm install -d style-loader css-loader\n\n * css-loaderï¼å¤çcssæä»¶ï¼å°å¶æåè³jsæä»¶ä¸­\n * style-loaderï¼ç¨äºå±ç¤ºæååçcssæä»¶\n\n// å¨webpack.config.jsä¸­æ°å¢\n module: {\n    rules: [\n      {\n        test: /.css$/, // éå°cssæä»¶æ¶\n        use: [\n          'style-loader', // éç¨å¦ä¸loaderï¼ä»åååè°ç¨\n          'css-loader'\n        ]\n      }\n    ]\n  }\n\n// ç¶åæ¯å¦å¨main.jsä¸­éè¿importçæ¹å¼å¼å¥main.cssæä»¶\nimport './main.css'\n\n// æ­¤æ¶è¿è¡webpackå°±ä¼æåcssæä»¶\n\n\n\n# å¦ä½æåå¾ç\n\ncnpm install -d file-loader url-loaderï¼é¦åå¨main.jsä½¿ç¨importçæ¹å¼ä¸­å¯¼å¥./icon.png\n\n * è¶åº10kbçæä»¶åç¬æåå­æ¾å¨distä¸­\n * å°äº10kbçæä»¶è½¬æ¢ä¸º data urls åµå¥ä»£ç ä¸­ï¼base64ç¼ç ï¼\n\n|--dist\n    --bundle.js \n    --aaa0e...png // æååçå¾ç\n|--src\n    --heading.js\n    --main.js\n    --main.css\n    --icon.png\n|--index.html\n|--package.json\n\n\nconst path = require('path')\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/main.js',\n  output: {\n    filename: 'bundle.js',\n    path: path.join(__dirname, 'dist'),\n    publicpath: 'dist/'                 // å ä¸ºindex.htmlå¨æ ¹ç®å½ï¼æä»¥å¾çä¹ä»æ ¹ç®å½å è½½ï¼ä¸ä¼æ¾ç¤ºï¼è¦å ä¸dist\n  },\n  module: {\n    rules: [\n      {\n        test: /.css$/,\n        use: [\n          'style-loader',\n          'css-loader'\n        ]\n      },\n      {\n        test: /.png$/,\n        use: {\n          loader: 'url-loader', // å¤§äº10kbçè¿ä¼ä½¿ç¨file-loader\n          options: {\n            limit: 10 * 1024 // 10 kb\n          }\n        }\n      }\n    ]\n  }\n}\n\n\n\n# å¸¸ç¨å è½½å¨åç±»\n\n * ç¼è¯è½¬æ¢ç±»ï¼æ¯å¦css-loaderå°cssç¼è¯å¹¶åµå¥å¨bundle.js\n * æä»¶æä½ç±»ï¼æ¯å¦file-loader\n * ä»£ç æ£æ¥ç±»ï¼æ¯å¦eslint-loader\n\n\n# å¦ä½å¤çes6è¯­æ³\n\nè½ç¶webpackæ¯æimportåexportæ¨¡ååï¼ä½å¹¶ä¸æ¯æes6è¯­æ³\n\ncnpm install -d babel-loader @babel/core @babel/preset-env\n\n// rulesæ°å¢\n\t{\n        test: /.js$/,\n        use: {\n          loader: 'babel-loader',\n          options: {\n            presets: ['@babel/preset-env']\n          }\n        }\n      }\n\n\n\n# æ¨¡åå è½½æ¹å¼\n\n * éµå¾ª es modules æ åç import å£°æï¼éç¹æ®æåµåªç¨è¿ä¸ç§ï¼\n * éµå¾ª commonjs æ åç requireå½æ°\n * éµå¾ª amd æ åç define å½æ°å require å½æ°\n * * æ ·å¼ä»£ç ä¸­ç@importæä»¤åurlå½æ°\n   * html ä»£ç ä¸­å¾çæ ç­¾ç src å±æ§ï¼aæ ç­¾çhrefå±æ§ï¼éè¦éç½®ï¼\n\n// htmlä¸­çaæ ç­¾çhrefå±æ§éè¦éç½®\n\t {\n        test: /.html$/,\n        use: {\n          loader: 'html-loader',\n          options: {\n            attrs: ['img:src', 'a:href']\n          }\n        }\n      }\n\n\n\n# èªå·±åå»ºä¸ä¸ªloader\n\næ ¹ç®å½ä¸æ°å»ºä¸ä¸ªmarkdown-loader.jsä½ä¸ºå¤çmdæä»¶çloaderï¼ç¶åå¨webpack.config.jsä¸­éç½®ï¼\n\nconst path = require('path')\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/main.js',\n  output: {\n    filename: 'bundle.js',\n    path: path.join(__dirname, 'dist'),\n    publicpath: 'dist/'\n  },\n  module: {\n    rules: [\n      {\n        test: /.md$/,\n        use: [\n          'html-loader',\n          './markdown-loader'\n        ]\n      }\n    ]\n  }\n}\n\n\n// markdown-loader.js\n\nconst marked = require('marked')\n\nmodule.exports = source => {\n    \n  const html = marked(source)\n\n  // è¿å html å­ç¬¦ä¸²äº¤ç»ä¸ä¸ä¸ª loader å¤ç\n  return html\n}\n\n\n// loaderç®¡éç¤ºæ\n\n// source => md-loader => loader2 => loader3 => result ï¼jsæä»¶ï¼ \n",charsets:{cjk:!0}},{title:"canvas",frontmatter:{},regularPath:"/webgl/canvas.html",relativePath:"webgl/canvas.md",key:"v-73ff258f",path:"/webgl/canvas.html",headers:[{level:2,title:"canvas å svg åºå«",slug:"canvas-å-svg-åºå«",normalizedTitle:"canvas å svg åºå«",charIndex:13}],lastUpdated:"7/21/2025, 11:28:01 AM",lastUpdatedTimestamp:1753068481e3,headersStr:"canvas å svg åºå«",content:"# canvas\n\n\n# canvas å svg åºå«\n\nç¹æ§         SVG                 CANVAS\næ°æ®ç»æ       ç¢éå¾å½¢ï¼DOMèç¹          ä½å¾ï¼åç´ æ°ç»\næ¸²ææ¹å¼       ä¿çæ¨¡å¼ï¼èªå¨éç»åå½±ååç´       å³æ¶æ¨¡å¼ï¼éæå¨éç»\näº¤äºæ§        ç´æ¥ç»å®äºä»¶ï¼ç²¾ç»äº¤äº         éæå¨æ£æµç¢°æï¼å¤æäº¤äºææ¬é«\nç¼©æ¾è´¨é       æ æï¼ç¢éå¾å½¢             ææï¼ä½å¾ç¼©æ¾\næ§è½ï¼å¤§éåç´ ï¼   å¤§éåç´ æ¶æ§è½ä¸éï¼DOMèç¹å¤ï¼   å¤§éåç´ æ¶æ§è½æ´ä¼\néç¨åºæ¯       å¾æ ãå¾è¡¨ãäº¤äºå¼å¾å½¢         æ¸¸æãå®æ¶å¨ç»ãåç´ æä½\n\néæ©å»ºè®®ï¼\n\n * è¥éäº¤äºæ§ãé«æ¸æ°åº¦ãç®åå¨æä¿®æ¹ï¼éSVGï¼\n * è¥éé«æ§è½æ¸²æãå¤æå¨ç»ãåç´ çº§æ§å¶ï¼éCanvasã\n * å®éé¡¹ç®ä¸­ï¼ä¸¤èä¹å¯ç»åä½¿ç¨ï¼å¦ç¨SVGåäº¤äºæ§ä»¶ï¼Canvasååºå±æ¸²æï¼ã",normalizedContent:"# canvas\n\n\n# canvas å svg åºå«\n\nç¹æ§         svg                 canvas\næ°æ®ç»æ       ç¢éå¾å½¢ï¼domèç¹          ä½å¾ï¼åç´ æ°ç»\næ¸²ææ¹å¼       ä¿çæ¨¡å¼ï¼èªå¨éç»åå½±ååç´       å³æ¶æ¨¡å¼ï¼éæå¨éç»\näº¤äºæ§        ç´æ¥ç»å®äºä»¶ï¼ç²¾ç»äº¤äº         éæå¨æ£æµç¢°æï¼å¤æäº¤äºææ¬é«\nç¼©æ¾è´¨é       æ æï¼ç¢éå¾å½¢             ææï¼ä½å¾ç¼©æ¾\næ§è½ï¼å¤§éåç´ ï¼   å¤§éåç´ æ¶æ§è½ä¸éï¼domèç¹å¤ï¼   å¤§éåç´ æ¶æ§è½æ´ä¼\néç¨åºæ¯       å¾æ ãå¾è¡¨ãäº¤äºå¼å¾å½¢         æ¸¸æãå®æ¶å¨ç»ãåç´ æä½\n\néæ©å»ºè®®ï¼\n\n * è¥éäº¤äºæ§ãé«æ¸æ°åº¦ãç®åå¨æä¿®æ¹ï¼ésvgï¼\n * è¥éé«æ§è½æ¸²æãå¤æå¨ç»ãåç´ çº§æ§å¶ï¼écanvasã\n * å®éé¡¹ç®ä¸­ï¼ä¸¤èä¹å¯ç»åä½¿ç¨ï¼å¦ç¨svgåäº¤äºæ§ä»¶ï¼canvasååºå±æ¸²æï¼ã",charsets:{cjk:!0}},{title:"webpackç­æ´æ°åç",frontmatter:{title:"webpackç­æ´æ°åç",date:"2021-08-09T14:47:00.000Z",categories:"webpack"},regularPath:"/webpack/hmr.html",relativePath:"webpack/hmr.md",key:"v-652b741f",path:"/webpack/hmr.html",headers:[{level:2,title:"watchï¼webpack-dev-serverï¼hmråºå«",slug:"watch-webpack-dev-server-hmråºå«",normalizedTitle:"watchï¼webpack-dev-serverï¼hmråºå«",charIndex:86},{level:2,title:"å¦ä½ä½¿ç¨HMR",slug:"å¦ä½ä½¿ç¨hmr",normalizedTitle:"å¦ä½ä½¿ç¨hmr",charIndex:275},{level:2,title:"å¦ä½èªå·±å¤çç­æ´æ°é»è¾",slug:"å¦ä½èªå·±å¤çç­æ´æ°é»è¾",normalizedTitle:"å¦ä½èªå·±å¤çç­æ´æ°é»è¾",charIndex:1393},{level:2,title:"ç­æ´æ°çæµç¨",slug:"ç­æ´æ°çæµç¨",normalizedTitle:"ç­æ´æ°çæµç¨",charIndex:2514},{level:3,title:"1. å¯å¨ Server (express å websocket)",slug:"_1-å¯å¨-server-express-å-websocket",normalizedTitle:"1. å¯å¨ server (express å websocket)",charIndex:2948},{level:3,title:"2. Webpack compiler ç¼è¯",slug:"_2-webpack-compiler-ç¼è¯",normalizedTitle:"2. webpack compiler ç¼è¯",charIndex:3523},{level:3,title:"3. å®¢æ·ç«¯æ¥æ¶æ´æ°æ¶æ¯",slug:"_3-å®¢æ·ç«¯æ¥æ¶æ´æ°æ¶æ¯",normalizedTitle:"3. å®¢æ·ç«¯æ¥æ¶æ´æ°æ¶æ¯",charIndex:4604},{level:3,title:"4. è¯·æ± hot-update.json å hot-update.js",slug:"_4-è¯·æ±-hot-update-json-å-hot-update-js",normalizedTitle:"4. è¯·æ± hot-update.json å hot-update.js",charIndex:6395}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"watchï¼webpack-dev-serverï¼hmråºå« å¦ä½ä½¿ç¨HMR å¦ä½èªå·±å¤çç­æ´æ°é»è¾ ç­æ´æ°çæµç¨ 1. å¯å¨ Server (express å websocket) 2. Webpack compiler ç¼è¯ 3. å®¢æ·ç«¯æ¥æ¶æ´æ°æ¶æ¯ 4. è¯·æ± hot-update.json å hot-update.js",content:"# webpack ç­æ´æ°\n\n> HMRï¼Hot Module Replacement æ¨¡åç­æ´æ°\n> \n> åºç¨ç¨åºè¿è¡è¿ç¨ä¸­å®æ¶æ¿æ¢æä¸ªæ¨¡åï¼é¡µé¢ç¶æä¸ä¼æ¹å\n\n\n# watchï¼webpack-dev-serverï¼hmråºå«\n\n * watch æ¨¡å¼ï¼ä½¿ç¨ webpack --watch å¼å¯ï¼æä»¶æ¹ååèªå¨éæ°ç¼è¯ï¼ä½æ¯ä¸ä¼èªå¨å·æ°æµè§å¨ã\n * webpack-dev-serverï¼éæå·¥å·ï¼ç»¼åäºèªå¨ç¼è¯åèªå¨å·æ°æµè§å¨çåè½ã\n * HMRï¼ä¸ç¨å·æ°æµè§å¨ï¼å®æ¶æ´æ°ï¼ä¹éæå¨ webpack-dev-server ä¸­ã\n\n\n# å¦ä½ä½¿ç¨HMR\n\n 1. å¼å¥åç½® HotModuleReplacementPlugin æä»¶\n 2. å¼å¯ hot: true\n\n// ä½¿ç¨ webpack èªå¸¦ç HotModuleReplacementPlugin\nplugins: {\n    HotModuleReplacementPlugin: new webpack.HotModuleReplacementPlugin()\n}\n// devServer åéç½®ä¸ä¸\ndevServer: {\n    contentBase: path.resolve(__dirname, 'dist'),\n    hot: true,\n    hotonly: false, // hot: åºç°éè¯¯å·æ°é¡µé¢ï¼ä¸ä¼åç°éè¯¯ï¼hotonly: è¥æéè¯¯ä¸ä¼å·æ°ï¼å¯ä»¥åç°éè¯¯ä»£ç \n    historyApiFallback: true,\n    compress: true,\n    watchOptions: {\n      // ä¸çå¬çæä»¶ææä»¶å¤¹\n      ignored: /node_modules/,\n      // çå¬å°åååçåä¼ç­300msåå»æ§è¡å¨ä½ï¼é²æ­¢æä»¶æ´æ°å¤ªå¿«å¯¼è´éæ°ç¼è¯é¢çå¤ªé«\n      aggregateTimeout: 300,\n      // é»è®¤æ¯é1000æ¯«ç§è¯¢é®ä¸æ¬¡\n      poll: 1000\n    }\n}\n\n\næ³¨ï¼webpackçHMRå¹¶ä¸è½å¼ç®±å³ç¨ï¼å¶å®æ¯éè¦æå¨å¤çæ¨¡åæ¿æ¢çé»è¾ã\n\n * æ ·å¼æä»¶å¯ä»¥ç´æ¥ä½¿ç¨ï¼style-loaderä¸­ä¼å¤çç­æ´æ°çé»è¾ï¼æ´æ°åç CSS ç´æ¥è¦çæä¹åç CSS å³å¯ã\n\n * jsæ¨¡åä¸è½ç´æ¥ä½¿ç¨ï¼å ä¸ºæä»¬æç¼åç JavaScript æ¨¡åæ¯æ²¡æä»»ä½è§å¾çï¼ä½ å¯è½å¯¼åºçæ¯ä¸ä¸ªå¯¹è±¡ï¼ä¹å¯è½å¯¼åºçæ¯ä¸ä¸ªå­ç¬¦ä¸²ï¼è¿å¯è½å¯¼åºçæ¯ä¸ä¸ªå½æ°ï¼ä½¿ç¨æ¶ä¹åä¸ç¸åãæä»¥ Webpack é¢å¯¹è¿äºæ¯«æ è§å¾ç JS æ¨¡åï¼æ ¹æ¬ä¸ç¥éè¯¥æä¹å¤çæ´æ°åçæ¨¡åï¼ä¹å°±æ æ³ç´æ¥å®ç°ä¸ä¸ªå¯ä»¥éç¨æææåµçæ¨¡åæ¿æ¢æ¹æ¡ã\n\n * éè¿èææ¶åå»ºçé¡¹ç®åé¨é½éæäº HMR æ¹æ¡ï¼ä¸éè¦èªå·±æå¨å¤çã\n   \n   * Vue.js HMR æ¹æ¡ï¼https://vue-loader.vuejs.org/guide/hot-reload.html\n   * React HMR æ¹æ¡ï¼https://github.com/gaearon/react-hot-loader\n   * San HMR æ¹æ¡ï¼https://github.com/ecomfe/san-hot-loader\n\n\n# å¦ä½èªå·±å¤çç­æ´æ°é»è¾\n\nä»¥ç¼è¾å¨åå¾çç­æ´æ°é»è¾ä¸ºä¾\n\nif (module.hot) {\n \tmodule.hot.accept('./editor.js', () => {\n     // å½ editor.js æ´æ°ï¼èªå¨æ§è¡æ­¤å½æ°\n     // å¨è¿éåæ´æ°é»è¾ï¼åé¡µé¢ä¸ä¼èªå¨å·æ°ï¼å¦ææ²¡ææ­¤å¤çæå¨å¤çï¼é¡µé¢è¿ä¼èªå¨å·æ°\n  }) \n}\n\n// ================================================================\n// HMR æå¨å¤çæ¨¡åç­æ´æ°\n// ä¸ç¨æå¿è¿äºä»£ç å¨çäº§ç¯å¢åä½çé®é¢ï¼å ä¸ºéè¿ webpack æååï¼\n// è¿äºä»£ç å¨é¨ä¼è¢«ç§»é¤åä¸º if (false) ï¼è¿äºåªæ¯å¼åé¶æ®µç¨å°\nimport createEditor from './editor';\nif (module.hot) {\n  let hotEditor = editor\n  module.hot.accept('./editor.js', () => {\n    // å½ editor.js æ´æ°ï¼èªå¨æ§è¡æ­¤å½æ°\n    // ä¸´æ¶è®°å½ç¼è¾å¨åå®¹\n    const value = hotEditor.innerHTML\n    // ç§»é¤æ´æ°åçåç´ \n    document.body.removeChild(hotEditor)\n    // åå»ºæ°çç¼è¾å¨\n    // æ­¤æ¶ createEditor å·²ç»æ¯æ´æ°è¿åçå½æ°äº\n    hotEditor = createEditor()\n    // è¿åç¼è¾å¨åå®¹\n    hotEditor.innerHTML = value\n    // è¿½å å°é¡µé¢\n    document.body.appendChild(hotEditor)\n  })\n\n  module.hot.accept('./better.png', () => {\n    // å½ better.png æ´æ°åæ§è¡\n    // éåè®¾ç½® src ä¼è§¦åå¾çåç´ éæ°å è½½ï¼ä»èå±é¨æ´æ°å¾ç\n    img.src = background\n  })\n}\n\n\nè³æ­¤ï¼å¯¹äº editor æ¨¡åçç­æ¿æ¢é»è¾å°±ç®æ¯å¨é¨å®ç°äºãæä»¬å¯ä»¥åç°ï¼ä¸ºä»ä¹ Webpack éè¦æä»¬èªå·±å¤ç JS æ¨¡åçç­æ´æ°äºï¼å ä¸ºä¸åçæ¨¡åæä¸åçæåµï¼ä¸åçæåµï¼å¨è¿éå¤çæ¶è¯å®ä¹æ¯ä¸åçãå°±å¥½åï¼æä»¬è¿éæ¯ä¸ä¸ªææ¬ç¼è¾å¨åºç¨ï¼æä»¥éè¦ä¿çç¶æï¼å¦æä¸æ¯è¿ç§ç±»åé£å°±ä¸éè¦è¿æ ·åãæä»¥è¯´ Webpack æ²¡æ³æä¾ä¸ä¸ªéç¨ç JS æ¨¡åæ¿æ¢æ¹æ¡ã\n\n\n# ç­æ´æ°çæµç¨\n\n> ç­æ´æ°ç¨å°äºwebsoketï¼å ä¸º Websocket æ¯ä¸ç§å¨åå·¥åè®®ï¼å®æå¤§çç¹ç¹å°±æ¯ æå¡å¨å¯ä»¥ä¸»å¨åå®¢æ·ç«¯æ¨éæ¶æ¯ï¼å®¢æ·ç«¯ä¹å¯ä»¥ä¸»å¨åæå¡å¨åéä¿¡æ¯ãè¿æ¯ HTTP åè®®ä¸å·å¤çï¼ç­æ´æ°å®éä¸å°±æ¯æå¡å¨ç«¯çæ´æ°éç¥å°å®¢æ·ç«¯ã\n\n\n\n> æ¬å°å¯å¨äºä¸ä¸ª HMR Server æå¡ï¼websocketï¼ï¼èä¸å¨å¯å¨ Bundle Server çæ¶åå·²ç»å¾æä»¬ç bundle.js ä¸­æ³¨å¥äº HMR Runtime\n\n * é¦æ¬¡æå»ºï¼1->2->A->Bï¼webpack compiler ç¼è¯æä»¶ä¼ è¾ç» bunder Serverï¼æµè§å¨å¯ä»¥è¿è¡è®¿é®\n\n * HMRï¼1->2->3->4ï¼æä»¶ååï¼ç¶åè¿æ¯ webpack compiler è¿è¡ç¼è¯ï¼ç¼è¯å¥½äºä¼å°ä»£ç åéç» HMR Serverï¼å®å°±å¯ä»¥ç¥éåªäºèµæºãåªäºæ¨¡ååçäºæ¹åãç¶å HMR server ä¼éç¥ HRM Runtimeï¼æµè§å¨å°±ä¼è¿è¡å¯¹åºçå·æ°ã\n\n\n# 1. å¯å¨ Server (express å websocket)\n\nwebpack-dev-server ä¸­ç Server.js\n\nsetupApp() {\n  // ä½¿ç¨ express æ¡æ¶å¯å¨æ¬å° serverï¼è®©æµè§å¨å¯ä»¥è¯·æ±æ¬å°çéæèµæºã\n  this.app = new express();\n}\n\nlisten(port, hostname, fn) {\n  return this.listeningApp.listen(port, hostname, (err) => {\n    \n    // åå»º SocketServer ï¼å¯ä»¥åæµè§å¨ç«¯ä¼ éæ¶æ¯ã\n    this.createSocketServer();\n\n    // ...\n  });\n}\n\n\nè¿ä¸­é´è¿æä¸ä¸ªå³é®ç¯èï¼æ·»å  webpack-dev-middleware ä¸­é´ä»¶ï¼\n\n> webpack-dev-middleware å° webpack ç¼è¯åæä»¶ä¼è¾åºå°åå­ä¸­ï¼webpack-dev-middleware å°±å¨æ­¤åºç¡ä¸å½¢æä¸ä¸ªæä»¶æ å°ç³»ç»ï¼æ¯å½åºç¨ç¨åºè¯·æ±ä¸ä¸ªæä»¶ï¼å®å¹éå°äºå°±æåå­ä¸­ç¼å­çå¯¹åºç»æä»¥æä»¶çæ ¼å¼è¿åç»ä½ ï¼åä¹åè¿å¥å°ä¸ä¸ä¸ªä¸­é´ä»¶ï¼å ä¸ºæ¯åå­åæä»¶ç³»ç»ï¼æä»¥éå»ºéåº¦éå¸¸å¿«ï¼å¾éåäºå¼åé¶æ®µç¨ä½éæèµæºæå¡å¨ã\n\n\n# 2. Webpack compiler ç¼è¯\n\nWebpack compiler çä½ç¨ï¼çå¬æ¬å°æä»¶çååãæä»¶æ¹åèªå¨ç¼è¯ãç¼è¯è¾åº\n\nWebpack çå¬æä»¶åæ¢æ¯éè¿ watchpack å®ç°çï¼ä¸»è¦çå¬çæ¯æä»¶ä¿®æ¹æ¶é´ã\n\næä»¶æ¹ååç­å¾ Webpack compiler ç¼è¯å®æï¼ç¶åéç¥å®¢æ·ç«¯è¿è¡æ´æ°ï¼è¿ä¸ªè¿ç¨éè¿ done é©å­å®ç°ï¼å³ï¼æ¯å½çå¬å°ä¸æ¬¡ webpack ç¼è¯ç»æï¼å°±ä¼è°ç¨ sendStats æ¹æ³ï¼ä¼åå®¢æ·ç«¯åé hash å ok äºä»¶ã\n\nsetupHooks() {\n  const addHooks = (compiler) => {\n    const { compile, invalid, done } = compiler.hooks;\n\n    compile.tap('webpack-dev-server', invalidPlugin);\n    invalid.tap('webpack-dev-server', invalidPlugin);\n    done.tap('webpack-dev-server', (stats) => {\n      this._sendStats(this.sockets, this.getStats(stats));\n      this._stats = stats;\n    });\n  };\n\n  if (this.compiler.compilers) {\n    this.compiler.compilers.forEach(addHooks);\n  } else {\n    addHooks(this.compiler);\n  }\n}\n\n_sendStats(sockets, stats, force) {\n  // åé hash\n  this.sockWrite(sockets, 'hash', stats.hash);\n\n  if (stats.errors.length > 0) {\n    this.sockWrite(sockets, 'errors', stats.errors);\n  } else if (stats.warnings.length > 0) {\n    this.sockWrite(sockets, 'warnings', stats.warnings);\n  } else {\n    // åé ok\n    this.sockWrite(sockets, 'ok');\n  }\n}\n\n\n\n# 3. å®¢æ·ç«¯æ¥æ¶æ´æ°æ¶æ¯\n\nwebpack-dev-server ä¸­ç client / index.jsï¼æ´æ° hashï¼å¹¶ä¸å¨ ok çæ¶åå»è¿è¡æ£æ¥æ´æ° reloadApp\n\nvar onSocketMessage = {\n  // æ´æ° hash\n  hash: function hash(_hash) {\n    status.currentHash = _hash;\n  },\n  \n  ok: function ok() {\n    sendMessage('Ok');\n\n    if (options.useWarningOverlay || options.useErrorOverlay) {\n      overlay.clear();\n    }\n\n    if (options.initial) {\n      return options.initial = false;\n    }\n\n\t\t// è¿è¡æ´æ°æ£æ¥æä½\n    reloadApp(options, status);\n  },\n}\n\n\nreloadApp ååº webpackHotUpdate æ¶æ¯ï¼è®© webpack å»æ§è¡æ´æ°æä½ã\n\nfunction reloadApp(\n  { hotReload, hot, liveReload },\n  { isUnloading, currentHash }\n) {\n  // ...\n  if (hot) {\n    log.info('App hot update...');\n    //  hotEmitter å¶å®å°±æ¯ EventEmitter çå®ä¾\n    const hotEmitter = require('webpack/hot/emitter');\n    // åå©ç¨ node.js ç EventEmitterï¼ååº webpackHotUpdate æ¶æ¯ã\n    // websocket ä»ä»ç¨äºå®¢æ·ç«¯ï¼æµè§å¨ï¼åæå¡ç«¯è¿è¡éä¿¡ãèçæ­£åäºæçæ´»è¿æ¯äº¤åç»äº webpackã\n    hotEmitter.emit('webpackHotUpdate', currentHash);\n    if (typeof self !== 'undefined' && self.window) {\n      // broadcast update to window\n      self.postMessage(`webpackHotUpdate${currentHash}`, '*');\n    }\n  }\n  // ...\n}\n\n\nå¨ webpack ç hot/dev-server.js ä¸­ï¼çå¬ webpackHotUpdate äºä»¶ï¼å¹¶æ§è¡ check æ¹æ³ãå¹¶å¨ check æ¹æ³ä¸­è°ç¨ module.hot.check æ¹æ³è¿è¡ç­æ´æ°ãè³äº module.hot.check ï¼å®éä¸éè¿ HotModuleReplacementPlugin å·²ç»æ³¨å¥å°æä»¬ chunk ä¸­äºï¼ä¹å°±æ¯æä»¬ä¸é¢æè¯´ç HMR Runtimeï¼\n\n// hot/dev-server.js\n// çå¬webpackHotUpdateäºä»¶\nhotEmitter.on(\"webpackHotUpdate\", function (currentHash) {\n  lastHash = currentHash;\n  if (!upToDate() && module.hot.status() === \"idle\") {\n    log(\"info\", \"[HMR] Checking for updates on the server...\");\n    check();\n  }\n});\n\nvar check = function check() {\n  //  moudle.hot.check å¼å§ç­æ´æ°\n  module.hot\n    .check(true)\n    .then(function (updatedModules) {\n      // ...\n    })\n    .catch(function (err) {\n      // ...\n    });\n};\n\n\n\n# 4. è¯·æ± hot-update.json å hot-update.js\n\nè°ç¨ module.hot.check çæ¶åï¼å®éä¸å°±æ¯æ§è¡ hotCheck å½æ°ï¼éè¿è°ç¨hotDownloadmainfestæ¹æ³ï¼åserverç«¯åéajaxè¯·æ±ï¼æå¡ç«¯è¿åä¸ä¸ªManifestæä»¶ï¼å³hot-update.jsonï¼ï¼è¯¥æä»¶åå«ææè¦æ´æ°æ¨¡åçhashå¼åchunkåã\n\nfunction hotCheck(apply) {\n\t\t// ...\n\t\treturn hotDownloadManifest(hotRequestTimeout).then(function(update) {\n      hotEnsureUpdateChunk(chunkId);\n    })\n}\n\n// hot-update.json æä»¶ï¼h ä»£è¡¨æ¬æ¬¡æ°çæç Hash å¼ï¼c è¡¨ç¤ºå½åè¦ç­æ´æ°çæä»¶å¯¹åºçæ¯åªä¸ªæ¨¡å\n{\n    \"h\": \"0c256052432b51ed32c8\",\n    \"c\": {\n        \"201\": true\n    }\n}\n\n\nç¶åæ ¹æ®æè¿°æä»¶è°ç¨hotDownloadUpdateChunkæ¹æ³éè¿jsonpè¯·æ±è·åå°ææ°çæ¨¡åä»£ç \n\nfunction hotEnsureUpdateChunk(chunkId) {\n  if (!hotAvailableFilesMap[chunkId]) {\n    hotWaitingFilesMap[chunkId] = true;\n  } else {\n    hotRequestedFilesMap[chunkId] = true;\n    hotWaitingFiles++;\n    hotDownloadUpdateChunk(chunkId); // jsonp æ¹å¼\n  }\n}\n\n\n * è¡¥ä¸jsåååè°ç¨ JsonpMainTemplate.runtime ç webpackHotUpdateæ¹æ³ï¼éé¢ä¼è°ç¨hotAddUpdateChunkæ¹æ³ï¼ç¨æ°çæ¨¡åæ¿æ¢ææ§çæ¨¡åã\n * è°ç¨HotMoudleReplacement.runtime.js ç hotAddUpdateChunkæ¹æ³å¨ææ´æ°æ¨¡åä»£ç \n * è°ç¨ hotApply æ¹æ³ç­æ´æ°\n\nåèæç« ï¼\n\n * èè Webpack ç­æ´æ°ä»¥ååç\n * å½»åºææå¹¶å®ç°webpackç­æ´æ°åç",normalizedContent:"# webpack ç­æ´æ°\n\n> hmrï¼hot module replacement æ¨¡åç­æ´æ°\n> \n> åºç¨ç¨åºè¿è¡è¿ç¨ä¸­å®æ¶æ¿æ¢æä¸ªæ¨¡åï¼é¡µé¢ç¶æä¸ä¼æ¹å\n\n\n# watchï¼webpack-dev-serverï¼hmråºå«\n\n * watch æ¨¡å¼ï¼ä½¿ç¨ webpack --watch å¼å¯ï¼æä»¶æ¹ååèªå¨éæ°ç¼è¯ï¼ä½æ¯ä¸ä¼èªå¨å·æ°æµè§å¨ã\n * webpack-dev-serverï¼éæå·¥å·ï¼ç»¼åäºèªå¨ç¼è¯åèªå¨å·æ°æµè§å¨çåè½ã\n * hmrï¼ä¸ç¨å·æ°æµè§å¨ï¼å®æ¶æ´æ°ï¼ä¹éæå¨ webpack-dev-server ä¸­ã\n\n\n# å¦ä½ä½¿ç¨hmr\n\n 1. å¼å¥åç½® hotmodulereplacementplugin æä»¶\n 2. å¼å¯ hot: true\n\n// ä½¿ç¨ webpack èªå¸¦ç hotmodulereplacementplugin\nplugins: {\n    hotmodulereplacementplugin: new webpack.hotmodulereplacementplugin()\n}\n// devserver åéç½®ä¸ä¸\ndevserver: {\n    contentbase: path.resolve(__dirname, 'dist'),\n    hot: true,\n    hotonly: false, // hot: åºç°éè¯¯å·æ°é¡µé¢ï¼ä¸ä¼åç°éè¯¯ï¼hotonly: è¥æéè¯¯ä¸ä¼å·æ°ï¼å¯ä»¥åç°éè¯¯ä»£ç \n    historyapifallback: true,\n    compress: true,\n    watchoptions: {\n      // ä¸çå¬çæä»¶ææä»¶å¤¹\n      ignored: /node_modules/,\n      // çå¬å°åååçåä¼ç­300msåå»æ§è¡å¨ä½ï¼é²æ­¢æä»¶æ´æ°å¤ªå¿«å¯¼è´éæ°ç¼è¯é¢çå¤ªé«\n      aggregatetimeout: 300,\n      // é»è®¤æ¯é1000æ¯«ç§è¯¢é®ä¸æ¬¡\n      poll: 1000\n    }\n}\n\n\næ³¨ï¼webpackçhmrå¹¶ä¸è½å¼ç®±å³ç¨ï¼å¶å®æ¯éè¦æå¨å¤çæ¨¡åæ¿æ¢çé»è¾ã\n\n * æ ·å¼æä»¶å¯ä»¥ç´æ¥ä½¿ç¨ï¼style-loaderä¸­ä¼å¤çç­æ´æ°çé»è¾ï¼æ´æ°åç css ç´æ¥è¦çæä¹åç css å³å¯ã\n\n * jsæ¨¡åä¸è½ç´æ¥ä½¿ç¨ï¼å ä¸ºæä»¬æç¼åç javascript æ¨¡åæ¯æ²¡æä»»ä½è§å¾çï¼ä½ å¯è½å¯¼åºçæ¯ä¸ä¸ªå¯¹è±¡ï¼ä¹å¯è½å¯¼åºçæ¯ä¸ä¸ªå­ç¬¦ä¸²ï¼è¿å¯è½å¯¼åºçæ¯ä¸ä¸ªå½æ°ï¼ä½¿ç¨æ¶ä¹åä¸ç¸åãæä»¥ webpack é¢å¯¹è¿äºæ¯«æ è§å¾ç js æ¨¡åï¼æ ¹æ¬ä¸ç¥éè¯¥æä¹å¤çæ´æ°åçæ¨¡åï¼ä¹å°±æ æ³ç´æ¥å®ç°ä¸ä¸ªå¯ä»¥éç¨æææåµçæ¨¡åæ¿æ¢æ¹æ¡ã\n\n * éè¿èææ¶åå»ºçé¡¹ç®åé¨é½éæäº hmr æ¹æ¡ï¼ä¸éè¦èªå·±æå¨å¤çã\n   \n   * vue.js hmr æ¹æ¡ï¼https://vue-loader.vuejs.org/guide/hot-reload.html\n   * react hmr æ¹æ¡ï¼https://github.com/gaearon/react-hot-loader\n   * san hmr æ¹æ¡ï¼https://github.com/ecomfe/san-hot-loader\n\n\n# å¦ä½èªå·±å¤çç­æ´æ°é»è¾\n\nä»¥ç¼è¾å¨åå¾çç­æ´æ°é»è¾ä¸ºä¾\n\nif (module.hot) {\n \tmodule.hot.accept('./editor.js', () => {\n     // å½ editor.js æ´æ°ï¼èªå¨æ§è¡æ­¤å½æ°\n     // å¨è¿éåæ´æ°é»è¾ï¼åé¡µé¢ä¸ä¼èªå¨å·æ°ï¼å¦ææ²¡ææ­¤å¤çæå¨å¤çï¼é¡µé¢è¿ä¼èªå¨å·æ°\n  }) \n}\n\n// ================================================================\n// hmr æå¨å¤çæ¨¡åç­æ´æ°\n// ä¸ç¨æå¿è¿äºä»£ç å¨çäº§ç¯å¢åä½çé®é¢ï¼å ä¸ºéè¿ webpack æååï¼\n// è¿äºä»£ç å¨é¨ä¼è¢«ç§»é¤åä¸º if (false) ï¼è¿äºåªæ¯å¼åé¶æ®µç¨å°\nimport createeditor from './editor';\nif (module.hot) {\n  let hoteditor = editor\n  module.hot.accept('./editor.js', () => {\n    // å½ editor.js æ´æ°ï¼èªå¨æ§è¡æ­¤å½æ°\n    // ä¸´æ¶è®°å½ç¼è¾å¨åå®¹\n    const value = hoteditor.innerhtml\n    // ç§»é¤æ´æ°åçåç´ \n    document.body.removechild(hoteditor)\n    // åå»ºæ°çç¼è¾å¨\n    // æ­¤æ¶ createeditor å·²ç»æ¯æ´æ°è¿åçå½æ°äº\n    hoteditor = createeditor()\n    // è¿åç¼è¾å¨åå®¹\n    hoteditor.innerhtml = value\n    // è¿½å å°é¡µé¢\n    document.body.appendchild(hoteditor)\n  })\n\n  module.hot.accept('./better.png', () => {\n    // å½ better.png æ´æ°åæ§è¡\n    // éåè®¾ç½® src ä¼è§¦åå¾çåç´ éæ°å è½½ï¼ä»èå±é¨æ´æ°å¾ç\n    img.src = background\n  })\n}\n\n\nè³æ­¤ï¼å¯¹äº editor æ¨¡åçç­æ¿æ¢é»è¾å°±ç®æ¯å¨é¨å®ç°äºãæä»¬å¯ä»¥åç°ï¼ä¸ºä»ä¹ webpack éè¦æä»¬èªå·±å¤ç js æ¨¡åçç­æ´æ°äºï¼å ä¸ºä¸åçæ¨¡åæä¸åçæåµï¼ä¸åçæåµï¼å¨è¿éå¤çæ¶è¯å®ä¹æ¯ä¸åçãå°±å¥½åï¼æä»¬è¿éæ¯ä¸ä¸ªææ¬ç¼è¾å¨åºç¨ï¼æä»¥éè¦ä¿çç¶æï¼å¦æä¸æ¯è¿ç§ç±»åé£å°±ä¸éè¦è¿æ ·åãæä»¥è¯´ webpack æ²¡æ³æä¾ä¸ä¸ªéç¨ç js æ¨¡åæ¿æ¢æ¹æ¡ã\n\n\n# ç­æ´æ°çæµç¨\n\n> ç­æ´æ°ç¨å°äºwebsoketï¼å ä¸º websocket æ¯ä¸ç§å¨åå·¥åè®®ï¼å®æå¤§çç¹ç¹å°±æ¯ æå¡å¨å¯ä»¥ä¸»å¨åå®¢æ·ç«¯æ¨éæ¶æ¯ï¼å®¢æ·ç«¯ä¹å¯ä»¥ä¸»å¨åæå¡å¨åéä¿¡æ¯ãè¿æ¯ http åè®®ä¸å·å¤çï¼ç­æ´æ°å®éä¸å°±æ¯æå¡å¨ç«¯çæ´æ°éç¥å°å®¢æ·ç«¯ã\n\n\n\n> æ¬å°å¯å¨äºä¸ä¸ª hmr server æå¡ï¼websocketï¼ï¼èä¸å¨å¯å¨ bundle server çæ¶åå·²ç»å¾æä»¬ç bundle.js ä¸­æ³¨å¥äº hmr runtime\n\n * é¦æ¬¡æå»ºï¼1->2->a->bï¼webpack compiler ç¼è¯æä»¶ä¼ è¾ç» bunder serverï¼æµè§å¨å¯ä»¥è¿è¡è®¿é®\n\n * hmrï¼1->2->3->4ï¼æä»¶ååï¼ç¶åè¿æ¯ webpack compiler è¿è¡ç¼è¯ï¼ç¼è¯å¥½äºä¼å°ä»£ç åéç» hmr serverï¼å®å°±å¯ä»¥ç¥éåªäºèµæºãåªäºæ¨¡ååçäºæ¹åãç¶å hmr server ä¼éç¥ hrm runtimeï¼æµè§å¨å°±ä¼è¿è¡å¯¹åºçå·æ°ã\n\n\n# 1. å¯å¨ server (express å websocket)\n\nwebpack-dev-server ä¸­ç server.js\n\nsetupapp() {\n  // ä½¿ç¨ express æ¡æ¶å¯å¨æ¬å° serverï¼è®©æµè§å¨å¯ä»¥è¯·æ±æ¬å°çéæèµæºã\n  this.app = new express();\n}\n\nlisten(port, hostname, fn) {\n  return this.listeningapp.listen(port, hostname, (err) => {\n    \n    // åå»º socketserver ï¼å¯ä»¥åæµè§å¨ç«¯ä¼ éæ¶æ¯ã\n    this.createsocketserver();\n\n    // ...\n  });\n}\n\n\nè¿ä¸­é´è¿æä¸ä¸ªå³é®ç¯èï¼æ·»å  webpack-dev-middleware ä¸­é´ä»¶ï¼\n\n> webpack-dev-middleware å° webpack ç¼è¯åæä»¶ä¼è¾åºå°åå­ä¸­ï¼webpack-dev-middleware å°±å¨æ­¤åºç¡ä¸å½¢æä¸ä¸ªæä»¶æ å°ç³»ç»ï¼æ¯å½åºç¨ç¨åºè¯·æ±ä¸ä¸ªæä»¶ï¼å®å¹éå°äºå°±æåå­ä¸­ç¼å­çå¯¹åºç»æä»¥æä»¶çæ ¼å¼è¿åç»ä½ ï¼åä¹åè¿å¥å°ä¸ä¸ä¸ªä¸­é´ä»¶ï¼å ä¸ºæ¯åå­åæä»¶ç³»ç»ï¼æä»¥éå»ºéåº¦éå¸¸å¿«ï¼å¾éåäºå¼åé¶æ®µç¨ä½éæèµæºæå¡å¨ã\n\n\n# 2. webpack compiler ç¼è¯\n\nwebpack compiler çä½ç¨ï¼çå¬æ¬å°æä»¶çååãæä»¶æ¹åèªå¨ç¼è¯ãç¼è¯è¾åº\n\nwebpack çå¬æä»¶åæ¢æ¯éè¿ watchpack å®ç°çï¼ä¸»è¦çå¬çæ¯æä»¶ä¿®æ¹æ¶é´ã\n\næä»¶æ¹ååç­å¾ webpack compiler ç¼è¯å®æï¼ç¶åéç¥å®¢æ·ç«¯è¿è¡æ´æ°ï¼è¿ä¸ªè¿ç¨éè¿ done é©å­å®ç°ï¼å³ï¼æ¯å½çå¬å°ä¸æ¬¡ webpack ç¼è¯ç»æï¼å°±ä¼è°ç¨ sendstats æ¹æ³ï¼ä¼åå®¢æ·ç«¯åé hash å ok äºä»¶ã\n\nsetuphooks() {\n  const addhooks = (compiler) => {\n    const { compile, invalid, done } = compiler.hooks;\n\n    compile.tap('webpack-dev-server', invalidplugin);\n    invalid.tap('webpack-dev-server', invalidplugin);\n    done.tap('webpack-dev-server', (stats) => {\n      this._sendstats(this.sockets, this.getstats(stats));\n      this._stats = stats;\n    });\n  };\n\n  if (this.compiler.compilers) {\n    this.compiler.compilers.foreach(addhooks);\n  } else {\n    addhooks(this.compiler);\n  }\n}\n\n_sendstats(sockets, stats, force) {\n  // åé hash\n  this.sockwrite(sockets, 'hash', stats.hash);\n\n  if (stats.errors.length > 0) {\n    this.sockwrite(sockets, 'errors', stats.errors);\n  } else if (stats.warnings.length > 0) {\n    this.sockwrite(sockets, 'warnings', stats.warnings);\n  } else {\n    // åé ok\n    this.sockwrite(sockets, 'ok');\n  }\n}\n\n\n\n# 3. å®¢æ·ç«¯æ¥æ¶æ´æ°æ¶æ¯\n\nwebpack-dev-server ä¸­ç client / index.jsï¼æ´æ° hashï¼å¹¶ä¸å¨ ok çæ¶åå»è¿è¡æ£æ¥æ´æ° reloadapp\n\nvar onsocketmessage = {\n  // æ´æ° hash\n  hash: function hash(_hash) {\n    status.currenthash = _hash;\n  },\n  \n  ok: function ok() {\n    sendmessage('ok');\n\n    if (options.usewarningoverlay || options.useerroroverlay) {\n      overlay.clear();\n    }\n\n    if (options.initial) {\n      return options.initial = false;\n    }\n\n\t\t// è¿è¡æ´æ°æ£æ¥æä½\n    reloadapp(options, status);\n  },\n}\n\n\nreloadapp ååº webpackhotupdate æ¶æ¯ï¼è®© webpack å»æ§è¡æ´æ°æä½ã\n\nfunction reloadapp(\n  { hotreload, hot, livereload },\n  { isunloading, currenthash }\n) {\n  // ...\n  if (hot) {\n    log.info('app hot update...');\n    //  hotemitter å¶å®å°±æ¯ eventemitter çå®ä¾\n    const hotemitter = require('webpack/hot/emitter');\n    // åå©ç¨ node.js ç eventemitterï¼ååº webpackhotupdate æ¶æ¯ã\n    // websocket ä»ä»ç¨äºå®¢æ·ç«¯ï¼æµè§å¨ï¼åæå¡ç«¯è¿è¡éä¿¡ãèçæ­£åäºæçæ´»è¿æ¯äº¤åç»äº webpackã\n    hotemitter.emit('webpackhotupdate', currenthash);\n    if (typeof self !== 'undefined' && self.window) {\n      // broadcast update to window\n      self.postmessage(`webpackhotupdate${currenthash}`, '*');\n    }\n  }\n  // ...\n}\n\n\nå¨ webpack ç hot/dev-server.js ä¸­ï¼çå¬ webpackhotupdate äºä»¶ï¼å¹¶æ§è¡ check æ¹æ³ãå¹¶å¨ check æ¹æ³ä¸­è°ç¨ module.hot.check æ¹æ³è¿è¡ç­æ´æ°ãè³äº module.hot.check ï¼å®éä¸éè¿ hotmodulereplacementplugin å·²ç»æ³¨å¥å°æä»¬ chunk ä¸­äºï¼ä¹å°±æ¯æä»¬ä¸é¢æè¯´ç hmr runtimeï¼\n\n// hot/dev-server.js\n// çå¬webpackhotupdateäºä»¶\nhotemitter.on(\"webpackhotupdate\", function (currenthash) {\n  lasthash = currenthash;\n  if (!uptodate() && module.hot.status() === \"idle\") {\n    log(\"info\", \"[hmr] checking for updates on the server...\");\n    check();\n  }\n});\n\nvar check = function check() {\n  //  moudle.hot.check å¼å§ç­æ´æ°\n  module.hot\n    .check(true)\n    .then(function (updatedmodules) {\n      // ...\n    })\n    .catch(function (err) {\n      // ...\n    });\n};\n\n\n\n# 4. è¯·æ± hot-update.json å hot-update.js\n\nè°ç¨ module.hot.check çæ¶åï¼å®éä¸å°±æ¯æ§è¡ hotcheck å½æ°ï¼éè¿è°ç¨hotdownloadmainfestæ¹æ³ï¼åserverç«¯åéajaxè¯·æ±ï¼æå¡ç«¯è¿åä¸ä¸ªmanifestæä»¶ï¼å³hot-update.jsonï¼ï¼è¯¥æä»¶åå«ææè¦æ´æ°æ¨¡åçhashå¼åchunkåã\n\nfunction hotcheck(apply) {\n\t\t// ...\n\t\treturn hotdownloadmanifest(hotrequesttimeout).then(function(update) {\n      hotensureupdatechunk(chunkid);\n    })\n}\n\n// hot-update.json æä»¶ï¼h ä»£è¡¨æ¬æ¬¡æ°çæç hash å¼ï¼c è¡¨ç¤ºå½åè¦ç­æ´æ°çæä»¶å¯¹åºçæ¯åªä¸ªæ¨¡å\n{\n    \"h\": \"0c256052432b51ed32c8\",\n    \"c\": {\n        \"201\": true\n    }\n}\n\n\nç¶åæ ¹æ®æè¿°æä»¶è°ç¨hotdownloadupdatechunkæ¹æ³éè¿jsonpè¯·æ±è·åå°ææ°çæ¨¡åä»£ç \n\nfunction hotensureupdatechunk(chunkid) {\n  if (!hotavailablefilesmap[chunkid]) {\n    hotwaitingfilesmap[chunkid] = true;\n  } else {\n    hotrequestedfilesmap[chunkid] = true;\n    hotwaitingfiles++;\n    hotdownloadupdatechunk(chunkid); // jsonp æ¹å¼\n  }\n}\n\n\n * è¡¥ä¸jsåååè°ç¨ jsonpmaintemplate.runtime ç webpackhotupdateæ¹æ³ï¼éé¢ä¼è°ç¨hotaddupdatechunkæ¹æ³ï¼ç¨æ°çæ¨¡åæ¿æ¢ææ§çæ¨¡åã\n * è°ç¨hotmoudlereplacement.runtime.js ç hotaddupdatechunkæ¹æ³å¨ææ´æ°æ¨¡åä»£ç \n * è°ç¨ hotapply æ¹æ³ç­æ´æ°\n\nåèæç« ï¼\n\n * èè webpack ç­æ´æ°ä»¥ååç\n * å½»åºææå¹¶å®ç°webpackç­æ´æ°åç",charsets:{cjk:!0}},{title:"webpack å¸¸è§éç½®",frontmatter:{},regularPath:"/webpack/config.html",relativePath:"webpack/config.md",key:"v-5f833423",path:"/webpack/config.html",headers:[{level:2,title:"publicPath, contentBase åºå«",slug:"publicpath-contentbase-åºå«",normalizedTitle:"publicpath, contentbase åºå«",charIndex:19},{level:2,title:"externals",slug:"externals",normalizedTitle:"externals",charIndex:167}],lastUpdated:"8/4/2025, 3:49:09 PM",lastUpdatedTimestamp:1754293749e3,headersStr:"publicPath, contentBase åºå« externals",content:"# webpack å¸¸è§éç½®\n\n\n# publicPath, contentBase åºå«\n\n * webpackéç½®ä¸­çpathãpublicPathåcontentBase\n\n * Webpackä¸­publicPathè¯¦è§£\n\n * outputéé¢çpublicPathådevServerä¸­çpublicPathçåºå«\n\n\n# externals\n\nWebpack ä¸­ç externals éç½®é¡¹ä¸»è¦ç¨äºæé¤æäºä¾èµé¡¹ä¸è¢«æåå°æç»çbundle æä»¶ä¸­ï¼èæ¯å¨è¿è¡æ¶ä»å¤é¨è·åè¿äºä¾èµãç®åæ¥è¯´ï¼å°±æ¯è®©ä½ çä»£ç å¯ä»¥å¼ç¨è¿äºå¤é¨ä¾èµï¼ä½å®ä»¬ä¸ä¼è¢«æåè¿ä½ çé¡¹ç®ä¸­ï¼èæ¯éè¿å¶ä»æ¹å¼ï¼æ¯å¦CDN å¼å¥ï¼æä¾ãè¿æ ·åçå¥½å¤æ¯å¯ä»¥åå°bundle çä½ç§¯ï¼å å¿«é¡µé¢å è½½éåº¦ï¼å¹¶é¿åéå¤æåä¸äºå¸¸ç¨çåºã\n\nå·ä½æ¥è¯´ï¼externals çä½ç¨åæ¬:\n\n 1. åå°æåä½ç§¯: å½ä½ çé¡¹ç®ä¾èµäºä¸äºå¤§ååºï¼å¦jQueryãReactãVue ç­ï¼ï¼å¹¶ä¸è¿äºåºå·²ç»éè¿CDN å¼å¥å°é¡µé¢ä¸­ï¼æèå¨å¶ä»å°æ¹å·²ç»å­å¨ï¼é£ä¹ä½¿ç¨ externals å°±å¯ä»¥é¿åå°è¿äºåºåæ¬¡æåå°ä½ çé¡¹ç®ä¸­ï¼ä»èåå°æç»çbundle æä»¶å¤§å°ã\n 2. æé«å è½½éåº¦: ç±äºåå°äºbundle çä½ç§¯ï¼é¡µé¢å è½½éåº¦èªç¶ä¼å¾å°æåï¼ç¹å«æ¯å¯¹äºé£äºä¾èµå¤§éå¤é¨åºçé¡¹ç®æ¥è¯´ï¼æææ´å ææ¾ã\n 3. é¿åéå¤æå: å½å¤ä¸ªé¡¹ç®é½ä¾èµåä¸ä¸ªåºæ¶ï¼ä½¿ç¨ externals å¯ä»¥é¿åæ¯ä¸ªé¡¹ç®é½æåä¸ä»½ç¸åçåºï¼èçèµæºã\n 4. æ¯æä¸åçæ¨¡ååè§è: externals ä¸ä»å¯ä»¥ç¨äºæé¤å¨å±åéï¼è¿å¯ä»¥æ¯æCommonJSãAMDãUMD ç­ä¸åçæ¨¡ååè§èã",normalizedContent:"# webpack å¸¸è§éç½®\n\n\n# publicpath, contentbase åºå«\n\n * webpackéç½®ä¸­çpathãpublicpathåcontentbase\n\n * webpackä¸­publicpathè¯¦è§£\n\n * outputéé¢çpublicpathådevserverä¸­çpublicpathçåºå«\n\n\n# externals\n\nwebpack ä¸­ç externals éç½®é¡¹ä¸»è¦ç¨äºæé¤æäºä¾èµé¡¹ä¸è¢«æåå°æç»çbundle æä»¶ä¸­ï¼èæ¯å¨è¿è¡æ¶ä»å¤é¨è·åè¿äºä¾èµãç®åæ¥è¯´ï¼å°±æ¯è®©ä½ çä»£ç å¯ä»¥å¼ç¨è¿äºå¤é¨ä¾èµï¼ä½å®ä»¬ä¸ä¼è¢«æåè¿ä½ çé¡¹ç®ä¸­ï¼èæ¯éè¿å¶ä»æ¹å¼ï¼æ¯å¦cdn å¼å¥ï¼æä¾ãè¿æ ·åçå¥½å¤æ¯å¯ä»¥åå°bundle çä½ç§¯ï¼å å¿«é¡µé¢å è½½éåº¦ï¼å¹¶é¿åéå¤æåä¸äºå¸¸ç¨çåºã\n\nå·ä½æ¥è¯´ï¼externals çä½ç¨åæ¬:\n\n 1. åå°æåä½ç§¯: å½ä½ çé¡¹ç®ä¾èµäºä¸äºå¤§ååºï¼å¦jqueryãreactãvue ç­ï¼ï¼å¹¶ä¸è¿äºåºå·²ç»éè¿cdn å¼å¥å°é¡µé¢ä¸­ï¼æèå¨å¶ä»å°æ¹å·²ç»å­å¨ï¼é£ä¹ä½¿ç¨ externals å°±å¯ä»¥é¿åå°è¿äºåºåæ¬¡æåå°ä½ çé¡¹ç®ä¸­ï¼ä»èåå°æç»çbundle æä»¶å¤§å°ã\n 2. æé«å è½½éåº¦: ç±äºåå°äºbundle çä½ç§¯ï¼é¡µé¢å è½½éåº¦èªç¶ä¼å¾å°æåï¼ç¹å«æ¯å¯¹äºé£äºä¾èµå¤§éå¤é¨åºçé¡¹ç®æ¥è¯´ï¼æææ´å ææ¾ã\n 3. é¿åéå¤æå: å½å¤ä¸ªé¡¹ç®é½ä¾èµåä¸ä¸ªåºæ¶ï¼ä½¿ç¨ externals å¯ä»¥é¿åæ¯ä¸ªé¡¹ç®é½æåä¸ä»½ç¸åçåºï¼èçèµæºã\n 4. æ¯æä¸åçæ¨¡ååè§è: externals ä¸ä»å¯ä»¥ç¨äºæé¤å¨å±åéï¼è¿å¯ä»¥æ¯æcommonjsãamdãumd ç­ä¸åçæ¨¡ååè§èã",charsets:{cjk:!0}},{title:"webpackï¼ä¸ï¼",frontmatter:{title:"webpackï¼ä¸ï¼",date:"2020-09-07T14:47:00.000Z",categories:"webpack"},regularPath:"/webpack/webpack3.html",relativePath:"webpack/webpack3.md",key:"v-7338b94a",path:"/webpack/webpack3.html",headers:[{level:2,title:"HMR",slug:"hmr",normalizedTitle:"hmr",charIndex:17},{level:2,title:"çäº§ç¯å¢ä¼å",slug:"çäº§ç¯å¢ä¼å",normalizedTitle:"çäº§ç¯å¢ä¼å",charIndex:24},{level:2,title:"DefinePlugin",slug:"defineplugin",normalizedTitle:"defineplugin",charIndex:34},{level:2,title:"Tree-shaking",slug:"tree-shaking",normalizedTitle:"tree-shaking",charIndex:50}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"HMR çäº§ç¯å¢ä¼å DefinePlugin Tree-shaking",content:"# webpackï¼ä¸ï¼\n\n * HMR\n * çäº§ç¯å¢ä¼å\n * DefinePlugin\n * Tree-shaking\n * sideEffects\n\n\n# HMR\n\nhttps://jinjingxuan.github.io/2021/08/09/webpack-hmr/\n\n\n# çäº§ç¯å¢ä¼å\n\n> æ¨¡å¼ ï¼modeï¼ï¼ä¸ºä¸åçå·¥ä½ç¯å¢åå»ºä¸åçéç½®\n> \n>  1. éç½®æä»¶æ ¹æ®ç¯å¢ä¸åå¯¼åºä¸åéç½®\n>  2. ä¸ä¸ªç¯å¢å¯¹åºä¸ä¸ªéç½®æä»¶\n\nconst webpack = require('webpack')\nconst { CleanWebpackPlugin } = require('clean-webpack-plugin')\nconst CopyWebpackPlugin = require('copy-webpack-plugin')\n\nmodule.exports = (env, argv) => {\n  const config = {\n\t// æ­£å¸¸éç½®\n  }\n\n  if (env === 'production') {\n    config.mode = 'production'\n    config.devtool = false\n    config.plugins = [\n      ...config.plugins,\n      new CleanWebpackPlugin(),\n      new CopyWebpackPlugin(['public']) // çäº§ç¯å¢éè¦ copy å¾çç­\n    ]\n  }\n\n  return config\n}\n\n// æ­¤æ¶å¨å½ä»¤è¡ä¸­è¿è¡ï¼webpack --env production\n\n\nè¥ä¸ä¸ªç¯å¢å¯¹åºä¸ä¸ªéç½®æä»¶ï¼åé¡¹ç®ä¸­éè¦æä¸ä¸ªéç½®æä»¶\n\n * webpack.common.jsï¼å­æ¾ä¸äºå¬å±çéç½®\n * webpack.dev.js\n * webpack.prod.js\n\næ­¤æ¶è¿éè¦å®è£ä¸ä¸ªæä»¶webpack-mergeï¼å®ç°å¨åæåºç¡ä¸æ·»å æä»¶\n\nconst webpack = require('webpack')\nconst merge = require('webpack-merge')\nconst common = require('./webpack.common')\n\nmodule.exports = merge(common, {\n  mode: 'development',\n  devtool: 'cheap-eval-module-source-map',\n  devServer: {\n    hot: true,\n    contentBase: 'public'\n  },\n  plugins: [\n    new webpack.HotModuleReplacementPlugin()\n  ]\n})\n\n\næ­¤æ¶å½ä»¤è¡åéè¦è¾å¥webpack --config webpack.prod.js\n\n\n# DefinePlugin\n\n> ä¸ºä»£ç æ³¨å¥å¨å±æå\n\n// webpack.config.js\nconst webpack = require('webpack')\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/main.js',\n  output: {\n    filename: 'bundle.js'\n  },\n  plugins: [\n    new webpack.DefinePlugin({\n      // å¼è¦æ±çæ¯ä¸ä¸ªä»£ç çæ®µ\n      API_BASE_URL: JSON.stringify('https://api.example.com')\n    })\n  ]\n}\n\n// main.js\nconsole.log(API_BASE_URL)\n\n// è¿è¡ webpack æååæ¥çbundle.js,åç°å¨æåæ·»å äºä»£ç \nconsole.log(\"https://api.example.com\")\n\n\n\n# Tree-shaking\n\nææé£äºæªå¼ç¨çä»£ç ï¼åå°ä»£ç ä½ç§¯ï¼å¨çäº§æ¨¡å¼ä¸ä¼èªå¨å¼å¯webpack --mode production\n\nä¸æ¯çäº§ç¯å¢éè¦æå¨éç½®ï¼å¦ä¸ï¼\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/index.js',\n  output: {\n    filename: 'bundle.js'\n  },\n  // ä¼åæä½\n  optimization: {\n    // è´è´£æ è®°æ¯æ å¶\n    usedExports: true,\n    // è´è´£æææ¯æ å¶\n    minimize: true,\n    // å°½å¯è½åå¹¶æ¯ä¸ä¸ªæ¨¡åå°ä¸ä¸ªå½æ°ä¸­,å¯ä»¥çå° bundle.js æ¨¡åæ°éåå°äº\n    // concatenateModules: true,\n  }\n}\n\n\nä¸¾ä¸ªä¾å­\n\n// components.js\nexport const Button = () => {\n  return document.createElement('button')\n\n  console.log('dead-code')\n}\n\nexport const Link = () => {\n  return document.createElement('a')\n}\n\nexport const Heading = level => {\n  return document.createElement('h' + level)\n}\n\n// index.js,åªæButtonè¢«ä½¿ç¨\nimport { Button } from './components'\n\ndocument.body.appendChild(Button())\n\n// æ­£å¸¸ç¨ webpack å½ä»¤æåæ¶ï¼å¨ bundle.js ä¸­æä¸å° Link, Headingï¼console.log\n\n\n# é®é¢ï¼ä½¿ç¨babel-loaderåï¼Tree-shakingä¼å¤±æï¼\n\n * ç±webpackæåçä»£ç å¿é¡»ä½¿ç¨ES Modulesï¼åäº¤ç»loaderå¤çï¼ç¶ååæå\n * èbabelè½¬æ¢æ¶ï¼å¯è½ä¼å° ES Module è½¬æ¢æ CommonJS ,å°±ä¼å¤±æï¼ä½æ¯ææ°ççbabelæ²¡é®é¢\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/index.js',\n  output: {\n    filename: 'bundle.js'\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        use: {\n          loader: 'babel-loader',\n          options: {\n            presets: [\n              // å¦æ Babel å è½½æ¨¡åæ¶å·²ç»è½¬æ¢äº ESMï¼åä¼å¯¼è´ Tree Shaking å¤±æ\n              // ['@babel/preset-env', { modules: 'commonjs' }]\n                \n              // è®¾ç½®ä¸ºfalseå°±ä¸ä¼å¼å¯è½¬æ¢\n              // ['@babel/preset-env', { modules: false }]\n                \n              // ä¹å¯ä»¥ä½¿ç¨é»è®¤éç½®ï¼ä¹å°±æ¯ autoï¼è¿æ · babel-loader ä¼èªå¨å³é­ ESM è½¬æ¢\n              ['@babel/preset-env', { modules: 'auto' }]\n            ]\n          }\n        }\n      }\n    ]\n  },\n  optimization: {\n    // æ¨¡ååªå¯¼åºè¢«ä½¿ç¨çæå\n    usedExports: true,\n    // å°½å¯è½åå¹¶æ¯ä¸ä¸ªæ¨¡åå°ä¸ä¸ªå½æ°ä¸­\n    // concatenateModules: true,\n    // åç¼©è¾åºç»æ\n    // minimize: true\n  }\n}\n\n",normalizedContent:"# webpackï¼ä¸ï¼\n\n * hmr\n * çäº§ç¯å¢ä¼å\n * defineplugin\n * tree-shaking\n * sideeffects\n\n\n# hmr\n\nhttps://jinjingxuan.github.io/2021/08/09/webpack-hmr/\n\n\n# çäº§ç¯å¢ä¼å\n\n> æ¨¡å¼ ï¼modeï¼ï¼ä¸ºä¸åçå·¥ä½ç¯å¢åå»ºä¸åçéç½®\n> \n>  1. éç½®æä»¶æ ¹æ®ç¯å¢ä¸åå¯¼åºä¸åéç½®\n>  2. ä¸ä¸ªç¯å¢å¯¹åºä¸ä¸ªéç½®æä»¶\n\nconst webpack = require('webpack')\nconst { cleanwebpackplugin } = require('clean-webpack-plugin')\nconst copywebpackplugin = require('copy-webpack-plugin')\n\nmodule.exports = (env, argv) => {\n  const config = {\n\t// æ­£å¸¸éç½®\n  }\n\n  if (env === 'production') {\n    config.mode = 'production'\n    config.devtool = false\n    config.plugins = [\n      ...config.plugins,\n      new cleanwebpackplugin(),\n      new copywebpackplugin(['public']) // çäº§ç¯å¢éè¦ copy å¾çç­\n    ]\n  }\n\n  return config\n}\n\n// æ­¤æ¶å¨å½ä»¤è¡ä¸­è¿è¡ï¼webpack --env production\n\n\nè¥ä¸ä¸ªç¯å¢å¯¹åºä¸ä¸ªéç½®æä»¶ï¼åé¡¹ç®ä¸­éè¦æä¸ä¸ªéç½®æä»¶\n\n * webpack.common.jsï¼å­æ¾ä¸äºå¬å±çéç½®\n * webpack.dev.js\n * webpack.prod.js\n\næ­¤æ¶è¿éè¦å®è£ä¸ä¸ªæä»¶webpack-mergeï¼å®ç°å¨åæåºç¡ä¸æ·»å æä»¶\n\nconst webpack = require('webpack')\nconst merge = require('webpack-merge')\nconst common = require('./webpack.common')\n\nmodule.exports = merge(common, {\n  mode: 'development',\n  devtool: 'cheap-eval-module-source-map',\n  devserver: {\n    hot: true,\n    contentbase: 'public'\n  },\n  plugins: [\n    new webpack.hotmodulereplacementplugin()\n  ]\n})\n\n\næ­¤æ¶å½ä»¤è¡åéè¦è¾å¥webpack --config webpack.prod.js\n\n\n# defineplugin\n\n> ä¸ºä»£ç æ³¨å¥å¨å±æå\n\n// webpack.config.js\nconst webpack = require('webpack')\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/main.js',\n  output: {\n    filename: 'bundle.js'\n  },\n  plugins: [\n    new webpack.defineplugin({\n      // å¼è¦æ±çæ¯ä¸ä¸ªä»£ç çæ®µ\n      api_base_url: json.stringify('https://api.example.com')\n    })\n  ]\n}\n\n// main.js\nconsole.log(api_base_url)\n\n// è¿è¡ webpack æååæ¥çbundle.js,åç°å¨æåæ·»å äºä»£ç \nconsole.log(\"https://api.example.com\")\n\n\n\n# tree-shaking\n\nææé£äºæªå¼ç¨çä»£ç ï¼åå°ä»£ç ä½ç§¯ï¼å¨çäº§æ¨¡å¼ä¸ä¼èªå¨å¼å¯webpack --mode production\n\nä¸æ¯çäº§ç¯å¢éè¦æå¨éç½®ï¼å¦ä¸ï¼\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/index.js',\n  output: {\n    filename: 'bundle.js'\n  },\n  // ä¼åæä½\n  optimization: {\n    // è´è´£æ è®°æ¯æ å¶\n    usedexports: true,\n    // è´è´£æææ¯æ å¶\n    minimize: true,\n    // å°½å¯è½åå¹¶æ¯ä¸ä¸ªæ¨¡åå°ä¸ä¸ªå½æ°ä¸­,å¯ä»¥çå° bundle.js æ¨¡åæ°éåå°äº\n    // concatenatemodules: true,\n  }\n}\n\n\nä¸¾ä¸ªä¾å­\n\n// components.js\nexport const button = () => {\n  return document.createelement('button')\n\n  console.log('dead-code')\n}\n\nexport const link = () => {\n  return document.createelement('a')\n}\n\nexport const heading = level => {\n  return document.createelement('h' + level)\n}\n\n// index.js,åªæbuttonè¢«ä½¿ç¨\nimport { button } from './components'\n\ndocument.body.appendchild(button())\n\n// æ­£å¸¸ç¨ webpack å½ä»¤æåæ¶ï¼å¨ bundle.js ä¸­æä¸å° link, headingï¼console.log\n\n\n# é®é¢ï¼ä½¿ç¨babel-loaderåï¼tree-shakingä¼å¤±æï¼\n\n * ç±webpackæåçä»£ç å¿é¡»ä½¿ç¨es modulesï¼åäº¤ç»loaderå¤çï¼ç¶ååæå\n * èbabelè½¬æ¢æ¶ï¼å¯è½ä¼å° es module è½¬æ¢æ commonjs ,å°±ä¼å¤±æï¼ä½æ¯ææ°ççbabelæ²¡é®é¢\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/index.js',\n  output: {\n    filename: 'bundle.js'\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        use: {\n          loader: 'babel-loader',\n          options: {\n            presets: [\n              // å¦æ babel å è½½æ¨¡åæ¶å·²ç»è½¬æ¢äº esmï¼åä¼å¯¼è´ tree shaking å¤±æ\n              // ['@babel/preset-env', { modules: 'commonjs' }]\n                \n              // è®¾ç½®ä¸ºfalseå°±ä¸ä¼å¼å¯è½¬æ¢\n              // ['@babel/preset-env', { modules: false }]\n                \n              // ä¹å¯ä»¥ä½¿ç¨é»è®¤éç½®ï¼ä¹å°±æ¯ autoï¼è¿æ · babel-loader ä¼èªå¨å³é­ esm è½¬æ¢\n              ['@babel/preset-env', { modules: 'auto' }]\n            ]\n          }\n        }\n      }\n    ]\n  },\n  optimization: {\n    // æ¨¡ååªå¯¼åºè¢«ä½¿ç¨çæå\n    usedexports: true,\n    // å°½å¯è½åå¹¶æ¯ä¸ä¸ªæ¨¡åå°ä¸ä¸ªå½æ°ä¸­\n    // concatenatemodules: true,\n    // åç¼©è¾åºç»æ\n    // minimize: true\n  }\n}\n\n",charsets:{cjk:!0}},{title:"webpackï¼äºï¼",frontmatter:{title:"webpackï¼äºï¼",date:"2020-09-06T14:47:00.000Z",categories:"webpack"},regularPath:"/webpack/webpack2.html",relativePath:"webpack/webpack2.md",key:"v-7a5510c6",path:"/webpack/webpack2.html",headers:[{level:2,title:"webpackæä»¶æºå¶",slug:"webpackæä»¶æºå¶",normalizedTitle:"webpackæä»¶æºå¶",charIndex:17},{level:3,title:"clean-webpack-plugin",slug:"clean-webpack-plugin",normalizedTitle:"clean-webpack-plugin",charIndex:211},{level:3,title:"html-webpack-plugin",slug:"html-webpack-plugin",normalizedTitle:"html-webpack-plugin",charIndex:455},{level:3,title:"copy-webpack-plugin",slug:"copy-webpack-plugin",normalizedTitle:"copy-webpack-plugin",charIndex:1142},{level:3,title:"æä»¶åç",slug:"æä»¶åç",normalizedTitle:"æä»¶åç",charIndex:1255},{level:3,title:"çè§£Compilerï¼è´è´£ç¼è¯ï¼",slug:"çè§£compiler-è´è´£ç¼è¯",normalizedTitle:"çè§£compilerï¼è´è´£ç¼è¯ï¼",charIndex:1318},{level:3,title:"çè§£Compilation",slug:"çè§£compilation",normalizedTitle:"çè§£compilation",charIndex:1498},{level:2,title:"webpack-dev-server",slug:"webpack-dev-server",normalizedTitle:"webpack-dev-server",charIndex:2778},{level:3,title:"proxyä»£ç",slug:"proxyä»£ç",normalizedTitle:"proxyä»£ç",charIndex:3598},{level:2,title:"Sourcemap",slug:"sourcemap",normalizedTitle:"sourcemap",charIndex:54}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"webpackæä»¶æºå¶ clean-webpack-plugin html-webpack-plugin copy-webpack-plugin æä»¶åç çè§£Compilerï¼è´è´£ç¼è¯ï¼ çè§£Compilation webpack-dev-server proxyä»£ç Sourcemap",content:"# webpackï¼äºï¼\n\n * webpackæä»¶æºå¶\n * webpack dev server\n * Sourcemap\n * splitChunks\n\n\n# webpackæä»¶æºå¶\n\n * Loaderä¸æ³¨å®ç°èµæºæ¨¡åå è½½\n * Pluginè§£å³å¶ä»èªå¨åå·¥ä½\n   * æ¸é¤distç®å½\n   * æ·è´éææä»¶è³è¾åºç®å½\n   * åç¼©è¾åºä»£ç \n\nwebpack + plugin åºæ¬å®ç°äºåç«¯å·¥ç¨å\n\n\n# clean-webpack-plugin\n\n> ä½ç¨ï¼ æ¸é¤distç®å½æä»¶\n\ncnpmm install -D clean-webpack-plugin\n\n// webpack.config.js\nconst { CleanWebpackPlugin } = require('clean-webpack-plugin')\n\nmodule.exports = {\n  // æ°å¢\n  plugins: [\n    new CleanWebpackPlugin()\n  ]\n}\n\n\n\n# html-webpack-plugin\n\n> ä½ç¨ï¼èªå¨çæå¼ç¨bundle.jsçhtmlæä»¶\n\ncnpm install -D html-webpack-plugin\n\nconst path = require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/main.js',\n  output: {\n    filename: 'bundle.js',\n    path: path.join(__dirname, 'dist'),\n    // publicPath: 'dist/'\n  },\n  plugins: [\n    new CleanWebpackPlugin(),\n    // ç¨äºçæ index.html\n    new HtmlWebpackPlugin({\n      title: 'Webpack Plugin Sample',\n      meta: {\n        viewport: 'width=device-width'\n      },\n      template: './src/index.html' // æ¨¡æ¿\n    }),\n    // ç¨äºçæ about.html\n    new HtmlWebpackPlugin({\n      filename: 'about.html'\n    })\n  ]\n}\n\n\n\n# copy-webpack-plugin\n\n plugins: [\n    new CopyWebpackPlugin([\n      // 'public/**'\n      'public'\n    ])\n  ]\n\n\n\n# æä»¶åç\n\n> webpackè¿ç¨ä¸­å­å¨é©å­å½æ°ï¼æä»¶æè½½å¨å¶ä¸é¢\n> \n> ä¾ï¼å®ç°ç§»é¤bundle.jsä¸­çæ³¨é\n\n\n# çè§£Compilerï¼è´è´£ç¼è¯ï¼\n\nå¼åæä»¶é¦åè¦ç¥écompilerå compilation å¯¹è±¡æ¯åä»ä¹ç\n\nCompiler å¯¹è±¡åå«äºå½åè¿è¡Webpackçéç½®ï¼åæ¬entryãoutputãloadersç­éç½®ï¼è¿ä¸ªå¯¹è±¡å¨å¯å¨Webpackæ¶è¢«å®ä¾åï¼èä¸æ¯å¨å±å¯ä¸çãPluginå¯ä»¥éè¿è¯¥å¯¹è±¡è·åå°Webpackçéç½®ä¿¡æ¯è¿è¡å¤çã\n\n\n# çè§£Compilation\n\nCompilationå¯¹è±¡ä»£è¡¨äºä¸æ¬¡èµæºçæ¬æå»ºãå½è¿è¡ webpack å¼åç¯å¢ä¸­é´ä»¶æ¶ï¼æ¯å½æ£æµå°ä¸ä¸ªæä»¶ååï¼å°±ä¼åå»ºä¸ä¸ªæ°ç compilationï¼ä»èçæä¸ç»æ°çç¼è¯èµæºãä¸ä¸ª Compilation å¯¹è±¡è¡¨ç°äºå½åçæ¨¡åèµæºãç¼è¯çæèµæºãååçæä»¶ãä»¥åè¢«è·è¸ªä¾èµçç¶æä¿¡æ¯ï¼ç®åæ¥è®²å°±æ¯ææ¬æ¬¡æåç¼è¯çåå®¹å­å°åå­éãCompilation å¯¹è±¡ä¹æä¾äºæä»¶éè¦èªå®ä¹åè½çåè°ï¼ä»¥ä¾æä»¶åèªå®ä¹å¤çæ¶éæ©ä½¿ç¨æå±ã\n\napplyæ¹æ³ä¸­æå¥é©å­çä¸è¬å½¢å¼å¦ä¸ï¼\n\n// compileræä¾äºcompiler.hooksï¼å¯ä»¥æ ¹æ®è¿äºä¸åçæ¶å»å»è®©æä»¶åä¸åçäºæã\n\ncompiler.hooks.é¶æ®µ.tapå½æ°('æä»¶åç§°', (é¶æ®µåè°åæ°) => {\n\n});\n\ncompiler.run(callback)\n\n\n// webpack.config.js\nclass MyPlugin {\n  apply (compiler) { // compilerå¯¹è±¡ä¸ºwebpackä¸æ ¸å¿å¯¹è±¡ï¼éè¿ä»æ¥æ¾é©å­å½æ°\n    console.log('MyPlugin å¯å¨')\n\t\n    // Webpack ä¼è°ç¨ Plugin å®ä¾ç apply æ¹æ³ç»æä»¶å®ä¾ä¼ å¥ compiler å¯¹è±¡\n    compiler.hooks.emit.tap('MyPlugin', compilation => { // æè½½å¨emitæ¹æ³ä¸\n      // compilation => å¯ä»¥çè§£ä¸ºæ­¤æ¬¡æåçä¸ä¸æ\n      for (const name in compilation.assets) {\n        // console.log(name)                              // è¾åºæä»¶å\n        // console.log(compilation.assets[name].source()) // è¾åºæä»¶åå®¹ \n        if (name.endsWith('.js')) {\n          const contents = compilation.assets[name].source() // è·ååå®¹\n          const withoutComments = contents.replace(/\\/\\*\\*+\\*\\//g, '') // å é¤æ³¨é\n          compilation.assets[name] = {\n            source: () => withoutComments, // æ¿æ¢åå®¹\n            size: () => withoutComments.length // å¿è¦æ³¨éï¼é¿åº¦\n          }\n        }\n      }\n    })\n  }\n}\n\nplugins: [\n    new MyPlugin()\n  ]\n\n\n\n# webpack-dev-server\n\nå¦ä½èªå¨ç¼è¯ï¼ä¿®æ¹æºæä»¶åèªå¨æå\n\nåªéè¦å¨å¯å¨webpackå½ä»¤æ¶ï¼æ·»å webpack --watchå³å¯\n\nå¦ä½èªå¨å·æ°æµè§å¨\n\nä½¿ç¨browser-syncï¼browser-sync dist --files \"**/*\"\n\n> ç»åè¿ä¸¤ç§æ¹å¼å¯ä»¥å®ç°ï¼ä¿®æ¹æºæä»¶æ¶èªå¨å·æ°æµè§å¨ã\n> \n> ç¼ºç¹ï¼1. æä½å¤æï¼éè¦åæ¶è¿è¡ä¸¤ä¸ªç»ç«¯å½ä»¤ã2. æ¶èå¤§ï¼åæååå¥ç£çï¼åè¯»åºç£çå·æ°æµè§å¨\n\nwebpack-dev-server\n\nwebpack dev serverï¼å°èªå¨ç¼è¯åèªå¨å·æ°éæå¨ä¸èµ·\n\nå®è£ï¼cnpm install -D webpack-dev-server\n\n> ä¼ç¹ï¼ä¸ä¼çædistç®å½é æç£çè¯»åæä½ï¼åå­å¨å¨åå­ä¸­\n> \n> webpack-dev-server --open å½ä»¤å¯èªå¨æå¼æµè§å¨\n\néæèµæºæä»¶çå¤ç\n\n> å¨å¼åé¶æ®µï¼å ä¸ºè¦é¢ç¹çæååç¼è¯ï¼å°½éä¸å°å¾çç­éæèµæºæä»¶ä¸èµ·æåå°distç®å½ä¸­\n\n// webpack.config.js\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/main.js',\n  output: {\n    filename: 'bundle.js',\n    path: path.join(__dirname, 'dist')\n  },\n  devServer: {\n    contentBase: './public', // ä½¿ç¨contentBaseæ¥è®¾ç½®\n  },\n  module: {\n   // ...\n  },\n  plugins: [\n    // ...\n      \n    // // å¼åé¶æ®µæå¥½ä¸è¦ä½¿ç¨è¿ä¸ªæä»¶\n    // new CopyWebpackPlugin(['public'])\n  ]\n}\n\n\n\n# proxyä»£ç\n\n> ç±äº webpack-dev-server æ¯ä¸ä¸ªæ¬å°å¼åæå¡å¨ï¼æä»¥æä»¬çåºç¨å¨å¼åé¶æ®µæ¯ç¬ç«è¿è¡å¨ localhost çä¸ä¸ªç«¯å£ä¸ï¼èåç«¯æå¡åæ¯è¿è¡å¨å¦å¤ä¸ä¸ªå°åä¸ãä½æ¯æç»ä¸çº¿è¿åï¼æä»¬çåºç¨ä¸è¬åä¼ååç«¯æå¡é¨ç½²å°åæºå°åä¸ã\n> \n> é£è¿æ ·å°±ä¼åºç°ä¸ä¸ªéå¸¸å¸¸è§çé®é¢ï¼å¨å®éçäº§ç¯å¢ä¸­è½å¤ç´æ¥è®¿é®ç APIï¼åå°æä»¬çå¼åç¯å¢åï¼åæ¬¡è®¿é®è¿äº API å°±ä¼äº§çè·¨åè¯·æ±é®é¢ã\n> \n> å¯è½æäººä¼è¯´ï¼æä»¬å¯ä»¥ç¨è·¨åèµæºå±äº«ï¼CORSï¼è§£å³è¿ä¸ªé®é¢ãç¡®å®å¦æ­¤ï¼å¦ææä»¬è¯·æ±çåç«¯ API æ¯æ CORSï¼é£è¿ä¸ªé®é¢å°±ä¸æç«äºãä½æ¯å¹¶ä¸æ¯æ¯ç§æåµä¸æå¡ç«¯ç API é½æ¯æ CORSãå¦æååç«¯åºç¨æ¯åæºé¨ç½²ï¼ä¹å°±æ¯åè®® / åå / ç«¯å£ä¸è´ï¼é£è¿ç§æåµä¸ï¼æ ¹æ¬æ²¡å¿è¦å¼å¯ CORSï¼æä»¥è·¨åè¯·æ±çé®é¢ä»ç¶æ¯ä¸å¯é¿åçã\n> \n> é£è§£å³è¿ç§å¼åé¶æ®µè·¨åè¯·æ±é®é¢æå¥½çåæ³ï¼å°±æ¯å¨å¼åæå¡å¨ä¸­éç½®ä¸ä¸ªåç«¯ API çä»£çæå¡ï¼ä¹å°±æ¯æåç«¯æ¥å£æå¡ä»£çå°æ¬å°çå¼åæå¡å°åã\n> \n> webpack-dev-server å°±æ¯æç´æ¥éè¿éç½®çæ¹å¼ï¼æ·»å ä»£çæå¡ãæ¥ä¸æ¥ï¼æä»¬æ¥çä¸ä¸å®çå·ä½ç¨æ³ã\n> \n> æ¯å¦æä»¬åå® GitHub ç API å°±æ¯æä»¬åºç¨çåç«¯æå¡ï¼é£æä»¬çç®æ å°±æ¯å° GitHub API ä»£çå°æ¬å°å¼åæå¡å¨ä¸­ï¼æä»¬å¯ä»¥åå¨æµè§å¨ä¸­å°è¯è®¿é®å¶ä¸­çä¸ä¸ªæ¥å£ï¼ https://api.github.com/users\n\ndevServer: {\n    contentBase: './public',\n    proxy: {\n      '/api': {\n        // http://localhost:8080/api/users -> https://api.github.com/api/users\n        target: 'https://api.github.com',\n        // http://localhost:8080/api/users -> https://api.github.com/users\n        pathRewrite: {\n          '^/api': ''\n        },\n        // ä¸è½ä½¿ç¨ localhost:8080 ä½ä¸ºè¯·æ± GitHub çä¸»æºå\n        changeOrigin: true\n      }\n    }\n  },\n\n\n\n\né£æ­¤æ¶æä»¬è¯·æ± http://localhost:8080/api/users ï¼å°±ç¸å½äºè¯·æ±äº https://api.github.com/users\n\n// æ­¤æ¶ååè·¨åè¯·æ±ï¼å°±å¯æ­£å¸¸è®¿é®\n// è½ç¶ GitHub æ¯æ CORSï¼ä½æ¯ä¸æ¯æ¯ä¸ªæå¡ç«¯é½åºè¯¥æ¯æã\n// fetch('https://api.github.com/users')\nfetch('/api/users') // å®éè¯·æ±å°http://localhost:8080/api/users\n  .then(res => res.json())\n  .then(data => {\n    data.forEach(item => {\n      const li = document.createElement('li')\n      li.textContent = item.login\n      ul.append(li)\n    })\n  })\n\n\n\n# Sourcemap\n\n> SourceMapæ¯ä¸ç§æ å°å³ç³»ãå½é¡¹ç®è¿è¡åï¼å¦æåºç°éè¯¯ï¼éè¯¯ä¿¡æ¯åªè½å®ä½å°æååæä»¶ä¸­éè¯¯çä½ç½®ãå¦ææ³æ¥çå¨æºæä»¶ä¸­éè¯¯çä½ç½®ï¼åéè¦ä½¿ç¨æ å°å³ç³»ï¼æ¾å°å¯¹åºçä½ç½®ã\n\né£ä¹å¦ä½å¨webpackä¸­éç½®Sourcemapå¢ï¼\n\n// webpack.config.js\n\nmodule.exports = {\n  devtool: 'source-map' \n}\n\n// æ­¤æ¶å¨ä»£ç ä¸­åä¸ä¸ªéè¯¯ï¼å°±å¯ä»¥å¨æ§å¶å°çå°æºæä»¶çéè¯¯\n\n\nè¯¥éç½®å¯éä¸å·æå¤ä¸ªéç½®é¡¹ ï¼å·ä½åå«ä»¥ä¸ï¼\n\nDEVTOOL                          æå»ºéåº¦   éæ°æå»ºéåº¦   çäº§ç¯å¢   åè´¨(QUALITY)\n(none)                           +++    +++      yes    æååçä»£ç \neval                             +++    +++      no     çæåçä»£ç \ncheap-eval-source-map            +      ++       no     è½¬æ¢è¿çä»£ç ï¼ä»éè¡ï¼\ncheap-module-eval-source-map     o      ++       no     åå§æºä»£ç ï¼ä»éè¡ï¼\neval-source-map                  --     +        no     åå§æºä»£ç \ncheap-source-map                 +      o        yes    è½¬æ¢è¿çä»£ç ï¼ä»éè¡ï¼\ncheap-module-source-map          o      -        yes    åå§æºä»£ç ï¼ä»éè¡ï¼\ninline-cheap-source-map          +      o        no     è½¬æ¢è¿çä»£ç ï¼ä»éè¡ï¼\ninline-cheap-module-source-map   o      -        no     åå§æºä»£ç ï¼ä»éè¡ï¼\nsource-map                       --     --       yes    åå§æºä»£ç \ninline-source-map                --     --       no     åå§æºä»£ç \nhidden-source-map                --     --       yes    åå§æºä»£ç \nnosources-source-map             --     --       yes    æ æºä»£ç åå®¹\n\n> +++ éå¸¸å¿«é, ++ å¿«é, + æ¯è¾å¿«, o ä¸­ç­, - æ¯è¾æ¢, -- æ¢\n\n * evalï¼æååçæ¨¡åé½ä½¿ç¨ eval() æ§è¡ï¼ä¸äº§çç¬ç«ç map æä»¶\n * cheapï¼Source mapæ¯å¦åå«è¡ä¿¡æ¯\n * moduleï¼æ¯å¦è½å¤å¾å° Loader å¤çä¹åçæºä»£ç ï¼å³æåçes6æ²¡æç¼è¯çæºä»£ç \n * inlineï¼ä½¿ç¨ dataURL æ SourceMap åµå¥ ï¼ä¸å¸¸ç¨ï¼\n * hiddenï¼æ§å¶å°çä¸å°SourceMap\n * nosourcesï¼çä¸è§æºä»£ç ï¼çäº§ç¯å¢ä¿æ¤æºä»£ç \n\n----------------------------------------\n\n * eval-source-mapï¼ç¸æ¯ eval çæäº SourceMap\n * cheap-eval-source-mapï¼ç®åççeval-source-mapï¼åªæè¡æ²¡æå\n * cheap-module-eval-source-mapï¼æ²¡æç»è¿ loader å å·¥ï¼çæ­£çæºä»£ç ï¼vueä¸­å¸¸ç¨ï¼\n\n----------------------------------------\n\nå¼åæ¨¡å¼ï¼cheap-module-eval-source-map\n\nçäº§æ¨¡å¼ï¼none",normalizedContent:"# webpackï¼äºï¼\n\n * webpackæä»¶æºå¶\n * webpack dev server\n * sourcemap\n * splitchunks\n\n\n# webpackæä»¶æºå¶\n\n * loaderä¸æ³¨å®ç°èµæºæ¨¡åå è½½\n * pluginè§£å³å¶ä»èªå¨åå·¥ä½\n   * æ¸é¤distç®å½\n   * æ·è´éææä»¶è³è¾åºç®å½\n   * åç¼©è¾åºä»£ç \n\nwebpack + plugin åºæ¬å®ç°äºåç«¯å·¥ç¨å\n\n\n# clean-webpack-plugin\n\n> ä½ç¨ï¼ æ¸é¤distç®å½æä»¶\n\ncnpmm install -d clean-webpack-plugin\n\n// webpack.config.js\nconst { cleanwebpackplugin } = require('clean-webpack-plugin')\n\nmodule.exports = {\n  // æ°å¢\n  plugins: [\n    new cleanwebpackplugin()\n  ]\n}\n\n\n\n# html-webpack-plugin\n\n> ä½ç¨ï¼èªå¨çæå¼ç¨bundle.jsçhtmlæä»¶\n\ncnpm install -d html-webpack-plugin\n\nconst path = require('path')\nconst htmlwebpackplugin = require('html-webpack-plugin')\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/main.js',\n  output: {\n    filename: 'bundle.js',\n    path: path.join(__dirname, 'dist'),\n    // publicpath: 'dist/'\n  },\n  plugins: [\n    new cleanwebpackplugin(),\n    // ç¨äºçæ index.html\n    new htmlwebpackplugin({\n      title: 'webpack plugin sample',\n      meta: {\n        viewport: 'width=device-width'\n      },\n      template: './src/index.html' // æ¨¡æ¿\n    }),\n    // ç¨äºçæ about.html\n    new htmlwebpackplugin({\n      filename: 'about.html'\n    })\n  ]\n}\n\n\n\n# copy-webpack-plugin\n\n plugins: [\n    new copywebpackplugin([\n      // 'public/**'\n      'public'\n    ])\n  ]\n\n\n\n# æä»¶åç\n\n> webpackè¿ç¨ä¸­å­å¨é©å­å½æ°ï¼æä»¶æè½½å¨å¶ä¸é¢\n> \n> ä¾ï¼å®ç°ç§»é¤bundle.jsä¸­çæ³¨é\n\n\n# çè§£compilerï¼è´è´£ç¼è¯ï¼\n\nå¼åæä»¶é¦åè¦ç¥écompilerå compilation å¯¹è±¡æ¯åä»ä¹ç\n\ncompiler å¯¹è±¡åå«äºå½åè¿è¡webpackçéç½®ï¼åæ¬entryãoutputãloadersç­éç½®ï¼è¿ä¸ªå¯¹è±¡å¨å¯å¨webpackæ¶è¢«å®ä¾åï¼èä¸æ¯å¨å±å¯ä¸çãpluginå¯ä»¥éè¿è¯¥å¯¹è±¡è·åå°webpackçéç½®ä¿¡æ¯è¿è¡å¤çã\n\n\n# çè§£compilation\n\ncompilationå¯¹è±¡ä»£è¡¨äºä¸æ¬¡èµæºçæ¬æå»ºãå½è¿è¡ webpack å¼åç¯å¢ä¸­é´ä»¶æ¶ï¼æ¯å½æ£æµå°ä¸ä¸ªæä»¶ååï¼å°±ä¼åå»ºä¸ä¸ªæ°ç compilationï¼ä»èçæä¸ç»æ°çç¼è¯èµæºãä¸ä¸ª compilation å¯¹è±¡è¡¨ç°äºå½åçæ¨¡åèµæºãç¼è¯çæèµæºãååçæä»¶ãä»¥åè¢«è·è¸ªä¾èµçç¶æä¿¡æ¯ï¼ç®åæ¥è®²å°±æ¯ææ¬æ¬¡æåç¼è¯çåå®¹å­å°åå­éãcompilation å¯¹è±¡ä¹æä¾äºæä»¶éè¦èªå®ä¹åè½çåè°ï¼ä»¥ä¾æä»¶åèªå®ä¹å¤çæ¶éæ©ä½¿ç¨æå±ã\n\napplyæ¹æ³ä¸­æå¥é©å­çä¸è¬å½¢å¼å¦ä¸ï¼\n\n// compileræä¾äºcompiler.hooksï¼å¯ä»¥æ ¹æ®è¿äºä¸åçæ¶å»å»è®©æä»¶åä¸åçäºæã\n\ncompiler.hooks.é¶æ®µ.tapå½æ°('æä»¶åç§°', (é¶æ®µåè°åæ°) => {\n\n});\n\ncompiler.run(callback)\n\n\n// webpack.config.js\nclass myplugin {\n  apply (compiler) { // compilerå¯¹è±¡ä¸ºwebpackä¸æ ¸å¿å¯¹è±¡ï¼éè¿ä»æ¥æ¾é©å­å½æ°\n    console.log('myplugin å¯å¨')\n\t\n    // webpack ä¼è°ç¨ plugin å®ä¾ç apply æ¹æ³ç»æä»¶å®ä¾ä¼ å¥ compiler å¯¹è±¡\n    compiler.hooks.emit.tap('myplugin', compilation => { // æè½½å¨emitæ¹æ³ä¸\n      // compilation => å¯ä»¥çè§£ä¸ºæ­¤æ¬¡æåçä¸ä¸æ\n      for (const name in compilation.assets) {\n        // console.log(name)                              // è¾åºæä»¶å\n        // console.log(compilation.assets[name].source()) // è¾åºæä»¶åå®¹ \n        if (name.endswith('.js')) {\n          const contents = compilation.assets[name].source() // è·ååå®¹\n          const withoutcomments = contents.replace(/\\/\\*\\*+\\*\\//g, '') // å é¤æ³¨é\n          compilation.assets[name] = {\n            source: () => withoutcomments, // æ¿æ¢åå®¹\n            size: () => withoutcomments.length // å¿è¦æ³¨éï¼é¿åº¦\n          }\n        }\n      }\n    })\n  }\n}\n\nplugins: [\n    new myplugin()\n  ]\n\n\n\n# webpack-dev-server\n\nå¦ä½èªå¨ç¼è¯ï¼ä¿®æ¹æºæä»¶åèªå¨æå\n\nåªéè¦å¨å¯å¨webpackå½ä»¤æ¶ï¼æ·»å webpack --watchå³å¯\n\nå¦ä½èªå¨å·æ°æµè§å¨\n\nä½¿ç¨browser-syncï¼browser-sync dist --files \"**/*\"\n\n> ç»åè¿ä¸¤ç§æ¹å¼å¯ä»¥å®ç°ï¼ä¿®æ¹æºæä»¶æ¶èªå¨å·æ°æµè§å¨ã\n> \n> ç¼ºç¹ï¼1. æä½å¤æï¼éè¦åæ¶è¿è¡ä¸¤ä¸ªç»ç«¯å½ä»¤ã2. æ¶èå¤§ï¼åæååå¥ç£çï¼åè¯»åºç£çå·æ°æµè§å¨\n\nwebpack-dev-server\n\nwebpack dev serverï¼å°èªå¨ç¼è¯åèªå¨å·æ°éæå¨ä¸èµ·\n\nå®è£ï¼cnpm install -d webpack-dev-server\n\n> ä¼ç¹ï¼ä¸ä¼çædistç®å½é æç£çè¯»åæä½ï¼åå­å¨å¨åå­ä¸­\n> \n> webpack-dev-server --open å½ä»¤å¯èªå¨æå¼æµè§å¨\n\néæèµæºæä»¶çå¤ç\n\n> å¨å¼åé¶æ®µï¼å ä¸ºè¦é¢ç¹çæååç¼è¯ï¼å°½éä¸å°å¾çç­éæèµæºæä»¶ä¸èµ·æåå°distç®å½ä¸­\n\n// webpack.config.js\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/main.js',\n  output: {\n    filename: 'bundle.js',\n    path: path.join(__dirname, 'dist')\n  },\n  devserver: {\n    contentbase: './public', // ä½¿ç¨contentbaseæ¥è®¾ç½®\n  },\n  module: {\n   // ...\n  },\n  plugins: [\n    // ...\n      \n    // // å¼åé¶æ®µæå¥½ä¸è¦ä½¿ç¨è¿ä¸ªæä»¶\n    // new copywebpackplugin(['public'])\n  ]\n}\n\n\n\n# proxyä»£ç\n\n> ç±äº webpack-dev-server æ¯ä¸ä¸ªæ¬å°å¼åæå¡å¨ï¼æä»¥æä»¬çåºç¨å¨å¼åé¶æ®µæ¯ç¬ç«è¿è¡å¨ localhost çä¸ä¸ªç«¯å£ä¸ï¼èåç«¯æå¡åæ¯è¿è¡å¨å¦å¤ä¸ä¸ªå°åä¸ãä½æ¯æç»ä¸çº¿è¿åï¼æä»¬çåºç¨ä¸è¬åä¼ååç«¯æå¡é¨ç½²å°åæºå°åä¸ã\n> \n> é£è¿æ ·å°±ä¼åºç°ä¸ä¸ªéå¸¸å¸¸è§çé®é¢ï¼å¨å®éçäº§ç¯å¢ä¸­è½å¤ç´æ¥è®¿é®ç apiï¼åå°æä»¬çå¼åç¯å¢åï¼åæ¬¡è®¿é®è¿äº api å°±ä¼äº§çè·¨åè¯·æ±é®é¢ã\n> \n> å¯è½æäººä¼è¯´ï¼æä»¬å¯ä»¥ç¨è·¨åèµæºå±äº«ï¼corsï¼è§£å³è¿ä¸ªé®é¢ãç¡®å®å¦æ­¤ï¼å¦ææä»¬è¯·æ±çåç«¯ api æ¯æ corsï¼é£è¿ä¸ªé®é¢å°±ä¸æç«äºãä½æ¯å¹¶ä¸æ¯æ¯ç§æåµä¸æå¡ç«¯ç api é½æ¯æ corsãå¦æååç«¯åºç¨æ¯åæºé¨ç½²ï¼ä¹å°±æ¯åè®® / åå / ç«¯å£ä¸è´ï¼é£è¿ç§æåµä¸ï¼æ ¹æ¬æ²¡å¿è¦å¼å¯ corsï¼æä»¥è·¨åè¯·æ±çé®é¢ä»ç¶æ¯ä¸å¯é¿åçã\n> \n> é£è§£å³è¿ç§å¼åé¶æ®µè·¨åè¯·æ±é®é¢æå¥½çåæ³ï¼å°±æ¯å¨å¼åæå¡å¨ä¸­éç½®ä¸ä¸ªåç«¯ api çä»£çæå¡ï¼ä¹å°±æ¯æåç«¯æ¥å£æå¡ä»£çå°æ¬å°çå¼åæå¡å°åã\n> \n> webpack-dev-server å°±æ¯æç´æ¥éè¿éç½®çæ¹å¼ï¼æ·»å ä»£çæå¡ãæ¥ä¸æ¥ï¼æä»¬æ¥çä¸ä¸å®çå·ä½ç¨æ³ã\n> \n> æ¯å¦æä»¬åå® github ç api å°±æ¯æä»¬åºç¨çåç«¯æå¡ï¼é£æä»¬çç®æ å°±æ¯å° github api ä»£çå°æ¬å°å¼åæå¡å¨ä¸­ï¼æä»¬å¯ä»¥åå¨æµè§å¨ä¸­å°è¯è®¿é®å¶ä¸­çä¸ä¸ªæ¥å£ï¼ https://api.github.com/users\n\ndevserver: {\n    contentbase: './public',\n    proxy: {\n      '/api': {\n        // http://localhost:8080/api/users -> https://api.github.com/api/users\n        target: 'https://api.github.com',\n        // http://localhost:8080/api/users -> https://api.github.com/users\n        pathrewrite: {\n          '^/api': ''\n        },\n        // ä¸è½ä½¿ç¨ localhost:8080 ä½ä¸ºè¯·æ± github çä¸»æºå\n        changeorigin: true\n      }\n    }\n  },\n\n\n\n\né£æ­¤æ¶æä»¬è¯·æ± http://localhost:8080/api/users ï¼å°±ç¸å½äºè¯·æ±äº https://api.github.com/users\n\n// æ­¤æ¶ååè·¨åè¯·æ±ï¼å°±å¯æ­£å¸¸è®¿é®\n// è½ç¶ github æ¯æ corsï¼ä½æ¯ä¸æ¯æ¯ä¸ªæå¡ç«¯é½åºè¯¥æ¯æã\n// fetch('https://api.github.com/users')\nfetch('/api/users') // å®éè¯·æ±å°http://localhost:8080/api/users\n  .then(res => res.json())\n  .then(data => {\n    data.foreach(item => {\n      const li = document.createelement('li')\n      li.textcontent = item.login\n      ul.append(li)\n    })\n  })\n\n\n\n# sourcemap\n\n> sourcemapæ¯ä¸ç§æ å°å³ç³»ãå½é¡¹ç®è¿è¡åï¼å¦æåºç°éè¯¯ï¼éè¯¯ä¿¡æ¯åªè½å®ä½å°æååæä»¶ä¸­éè¯¯çä½ç½®ãå¦ææ³æ¥çå¨æºæä»¶ä¸­éè¯¯çä½ç½®ï¼åéè¦ä½¿ç¨æ å°å³ç³»ï¼æ¾å°å¯¹åºçä½ç½®ã\n\né£ä¹å¦ä½å¨webpackä¸­éç½®sourcemapå¢ï¼\n\n// webpack.config.js\n\nmodule.exports = {\n  devtool: 'source-map' \n}\n\n// æ­¤æ¶å¨ä»£ç ä¸­åä¸ä¸ªéè¯¯ï¼å°±å¯ä»¥å¨æ§å¶å°çå°æºæä»¶çéè¯¯\n\n\nè¯¥éç½®å¯éä¸å·æå¤ä¸ªéç½®é¡¹ ï¼å·ä½åå«ä»¥ä¸ï¼\n\ndevtool                          æå»ºéåº¦   éæ°æå»ºéåº¦   çäº§ç¯å¢   åè´¨(quality)\n(none)                           +++    +++      yes    æååçä»£ç \neval                             +++    +++      no     çæåçä»£ç \ncheap-eval-source-map            +      ++       no     è½¬æ¢è¿çä»£ç ï¼ä»éè¡ï¼\ncheap-module-eval-source-map     o      ++       no     åå§æºä»£ç ï¼ä»éè¡ï¼\neval-source-map                  --     +        no     åå§æºä»£ç \ncheap-source-map                 +      o        yes    è½¬æ¢è¿çä»£ç ï¼ä»éè¡ï¼\ncheap-module-source-map          o      -        yes    åå§æºä»£ç ï¼ä»éè¡ï¼\ninline-cheap-source-map          +      o        no     è½¬æ¢è¿çä»£ç ï¼ä»éè¡ï¼\ninline-cheap-module-source-map   o      -        no     åå§æºä»£ç ï¼ä»éè¡ï¼\nsource-map                       --     --       yes    åå§æºä»£ç \ninline-source-map                --     --       no     åå§æºä»£ç \nhidden-source-map                --     --       yes    åå§æºä»£ç \nnosources-source-map             --     --       yes    æ æºä»£ç åå®¹\n\n> +++ éå¸¸å¿«é, ++ å¿«é, + æ¯è¾å¿«, o ä¸­ç­, - æ¯è¾æ¢, -- æ¢\n\n * evalï¼æååçæ¨¡åé½ä½¿ç¨ eval() æ§è¡ï¼ä¸äº§çç¬ç«ç map æä»¶\n * cheapï¼source mapæ¯å¦åå«è¡ä¿¡æ¯\n * moduleï¼æ¯å¦è½å¤å¾å° loader å¤çä¹åçæºä»£ç ï¼å³æåçes6æ²¡æç¼è¯çæºä»£ç \n * inlineï¼ä½¿ç¨ dataurl æ sourcemap åµå¥ ï¼ä¸å¸¸ç¨ï¼\n * hiddenï¼æ§å¶å°çä¸å°sourcemap\n * nosourcesï¼çä¸è§æºä»£ç ï¼çäº§ç¯å¢ä¿æ¤æºä»£ç \n\n----------------------------------------\n\n * eval-source-mapï¼ç¸æ¯ eval çæäº sourcemap\n * cheap-eval-source-mapï¼ç®åççeval-source-mapï¼åªæè¡æ²¡æå\n * cheap-module-eval-source-mapï¼æ²¡æç»è¿ loader å å·¥ï¼çæ­£çæºä»£ç ï¼vueä¸­å¸¸ç¨ï¼\n\n----------------------------------------\n\nå¼åæ¨¡å¼ï¼cheap-module-eval-source-map\n\nçäº§æ¨¡å¼ï¼none",charsets:{cjk:!0}},{title:"webpackï¼åï¼",frontmatter:{title:"webpackï¼åï¼",date:"2020-09-08T14:47:00.000Z",categories:"webpack"},regularPath:"/webpack/webpack4.html",relativePath:"webpack/webpack4.md",key:"v-6c1c61ce",path:"/webpack/webpack4.html",headers:[{level:2,title:"Webpack sideEffects",slug:"webpack-sideeffects",normalizedTitle:"webpack sideeffects",charIndex:17},{level:2,title:"ä»£ç åå²",slug:"ä»£ç åå²",normalizedTitle:"ä»£ç åå²",charIndex:1348},{level:3,title:"å¤å¥å£æåéç½®",slug:"å¤å¥å£æåéç½®",normalizedTitle:"å¤å¥å£æåéç½®",charIndex:1547},{level:3,title:"å¨æå¯¼å¥",slug:"å¨æå¯¼å¥",normalizedTitle:"å¨æå¯¼å¥",charIndex:1520},{level:2,title:"mini-css-extract-plugin",slug:"mini-css-extract-plugin",normalizedTitle:"mini-css-extract-plugin",charIndex:58},{level:2,title:"æä»¶å Hash",slug:"æä»¶å-hash",normalizedTitle:"æä»¶å hash",charIndex:85}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"Webpack sideEffects ä»£ç åå² å¤å¥å£æåéç½® å¨æå¯¼å¥ mini-css-extract-plugin æä»¶å Hash",content:"# webpackï¼åï¼\n\n * Webpack sideEffects\n * Code Splitting\n * mini-css-extract-plugin\n * æä»¶å Hash\n\n\n# Webpack sideEffects\n\n> å¯ä½ç¨ï¼æ¨¡åæ§è¡æ¶é¤äºå¯¼åºæåä¹å¤æåçäºæ\n> \n> æ¯å¦ä¸ä¸ª css æä»¶æ²¡æå¯¼åºï¼å¯è®¤ä¸ºæå¯ä½ç¨\n\n|--components\n\t\t--button.js\n\t\t--heading.js\n\t\t--link.js\n\t\t--index.js\n|--index.js\n\n\n// components/index.js\n\nexport { default as Button } from './button'\nexport { default as Link } from './link'\nexport { default as Heading } from './heading'\n\n// å¥å£æä»¶ index.js\nimport { Button } from './components'\n// åªæ³è½½å¥ Button å´è½½å¥äºæææ¨¡å\n\n\n// webpack.config.js\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/index.js',\n  output: {\n    filename: 'bundle.js'\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: [\n          'style-loader',\n          'css-loader'\n        ]\n      }\n    ]\n  },\n  optimization: {\n    sideEffects: true, // æ è¯ä¸ºtrueå°±ä¼å»package.jsonä¸­å»æ£æ¥ææ å¯ä½ç¨\n  }\n}\n\n// package.json\n{\n  \"name\": \"31-side-effects\",\n  \"version\": \"0.1.0\",\n  \"main\": \"index.js\",\n  \"author\": \"zce <w@zce.me> (https://zce.me)\",\n  \"license\": \"MIT\",\n  \"scripts\": {\n    \"build\": \"webpack\"\n  },\n  \"devDependencies\": {\n    \"css-loader\": \"^3.2.0\",\n    \"style-loader\": \"^1.0.0\",\n    \"webpack\": \"^4.41.2\",\n    \"webpack-cli\": \"^3.3.9\"\n  },\n  // \"sideEffects\": false  //è®¾ç½®ä¸ºfalseè¯´ææ²¡æå¯ä½ç¨ï¼åå¤ä½çæ¨¡åä¸ä¼è¢«æå\n  \"sideEffects\": [\n    \"./src/extend.js\", // æ è¯ä¸ä¸æå¯ä½ç¨èä¸æ³è¢«å é¤çæ¨¡åï¼é²æ­¢ä¸ä¼è¢«æå\n    \"*.css\"\n  ]\n}\n\n\n\n\n# ä»£ç åå²\n\n> webpackå°æææ¨¡åé½æåå°ä¸èµ·ï¼ä½æ¯å¹¶ä¸æ¯æ¯ä¸ªæ¨¡åå¨å¯å¨æ¶é½æ¯å¿è¦çã\n> \n> æ´å¥½çæ¹æ¡æ¯ææåç»ææä¸å®çè§ååç¦»ï¼æç§åºç¨çè¿è¡ç»ææéå è½½ã\n> \n> webpack ççå¿µå°±æ¯æåä¸ªæ¨¡åæåå°ä¸èµ·ï¼ç°å¨åè¦åç¦»å¼æ¥ï¼æ¯å¦çç¾ï¼ä¸çç¾ï¼ç©æå¿åèå·²ã\n\n * å¤å¥å£æåï¼ä¸ä¸ªé¡µé¢ä¸ä¸ªå¥å£ï¼å¬å±é¨åæåã\n * å¨æå¯¼å¥ï¼éè¦æä¸ªæ¨¡åæ¶ï¼åå»å è½½è¿ä¸ªæ¨¡åã\n\n\n# å¤å¥å£æåéç½®\n\nconst { CleanWebpackPlugin } = require('clean-webpack-plugin')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n  mode: 'none',\n  entry: {\n    index: './src/index.js',  // å¤å¥å£\n    album: './src/album.js'\n  },\n  output: {\n    filename: '[name].bundle.js' // çæå¯¹åºçæä»¶å\n  },\n  optimization: {\n    splitChunks: {\n      // èªå¨æåææå¬å±æ¨¡åå°åç¬ bundle ä¸ä¸ªæä»¶\n      // æåå: index.bundle.js, album.bundle.js, index~album.bundle.jsï¼å¬å±é¨åï¼\n      chunks: 'all'\n    }\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: [\n          'style-loader',\n          'css-loader'\n        ]\n      }\n    ]\n  },\n  plugins: [\n    new CleanWebpackPlugin(),\n    new HtmlWebpackPlugin({\n      title: 'Multi Entry',\n      template: './src/index.html',\n      filename: 'index.html',\n      chunks: ['index']  // index.html åªä¼å¼å¥æååç index.js\n    }),\n    new HtmlWebpackPlugin({\n      title: 'Multi Entry',\n      template: './src/album.html',\n      filename: 'album.html',\n      chunks: ['album'] // album.html åªä¼å¼å¥æååç album.js\n    })\n  ]\n}\n\n\n\n# å¨æå¯¼å¥\n\n> éè¦æä¸ªæ¨¡åæ¶åå»å è½½ï¼å¨æå¯¼å¥çæ¨¡åä¼è¢«èªå¨ååï¼ä¾å¦å¸¸è§çæ°å­å¼å¤´ç js æä»¶: 0.js å°±æ¯è¿ç±»æ¨¡ååååºæ¥çæä»¶ã\n\n// import posts from './posts/posts'\n// import album from './album/album'\n// å é¤åºå®å¯¼å¥\n\nconst render = () => {\n  const hash = window.location.hash || '#posts'\n\n  const mainElement = document.querySelector('.main')\n\n  mainElement.innerHTML = ''\n  // æ ¹æ® hash å¼å¨æå¯¼å¥\n  if (hash === '#posts') {\n    // é­æ³æ³¨éå¯ä»¥è®¾ç½®æååæä»¶å\n    import(/* webpackChunkName: 'components' */'./posts/posts').then(({ default: posts }) => {\t\n      mainElement.appendChild(posts())\n    })\n  } else if (hash === '#album') {\n    // é­æ³æ³¨éå¯ä»¥è®¾ç½®æååæä»¶å\n    import(/* webpackChunkName: 'components' */'./album/album').then(({ default: album }) => {\n      mainElement.appendChild(album())\n    })\n  }\n}\n\nrender()\n\nwindow.addEventListener('hashchange', render)\n\n\nwebpack SplitChunksPluginå®ç¨æå\n\nWebpackä¹SplitChunksæä»¶ç¨æ³è¯¦è§£\n\n> å¨ç ç©¶splitChunksä¹åï¼æä»¬å¿é¡»åå¼æç½è¿ä¸ä¸ªåè¯æ¯ä»ä¹ææï¼ä¸»è¦æ¯chunkçå«ä¹ï¼è¦ä¸ç¶ä½ å°±ä¸ç¥ésplitChunksæ¯å¨ä»ä¹çåºç¡ä¸è¿è¡æåã\n> \n>  * moduleï¼å°±æ¯jsçæ¨¡ååwebpackæ¯æcommonJSãES6ç­æ¨¡ååè§èï¼ç®åæ¥è¯´å°±æ¯ä½ éè¿importè¯­å¥å¼å¥çä»£ç ã\n>  * chunk: chunkæ¯webpackæ ¹æ®åè½æååºæ¥çï¼åå«ä¸ç§æåµï¼\n> \n> 1ãä½ çé¡¹ç®å¥å£ï¼entryï¼\n> \n> 2ãéè¿import()å¨æå¼å¥çä»£ç ï¼é»è®¤ååï¼\n> \n> 3ãéè¿splitChunksæååºæ¥çä»£ç \n> \n> chunkåå«çmoduleï¼å¯è½æ¯ä¸å¯¹å¤ä¹å¯è½æ¯ä¸å¯¹ä¸ã\n> \n>  * bundleï¼bundleæ¯webpackæåä¹åçåä¸ªæä»¶ï¼ä¸è¬å°±æ¯åchunkæ¯ä¸å¯¹ä¸çå³ç³»ï¼bundleå°±æ¯å¯¹chunkè¿è¡ç¼è¯åç¼©æåç­å¤çä¹åçäº§åºã\n\nconst resolve = require('path').resolve\nconst { CleanWebpackPlugin } = require('clean-webpack-plugin');\n\nmodule.exports = {\n    mode: 'none',\n    entry: {\n        entry1: './src/entry1.js',\n        entry2: './src/entry2.js'\n    },\n    plugins: [\n        new CleanWebpackPlugin()\n    ],\n    output: {\n        filename: '[name].bundle.js',\n        path: resolve(__dirname, 'dist')\n    },\n    optimization: {\n        // splitChunksä½ç¨: æ entry1.js å entry2.js é½å±åå¼å¥çæ¨¡ååååºæ¥ã\n        // åå¦ entry1.js å entry2.js é½å¼å¥äº elementï¼é£ä¹ entry1.bundle.js å entry2.bundle.js\n        // ä¸ååçè¯é½ä¼å° element æåè¿å»ï¼ä¸¤ä¸ªæä»¶å°±é½ä¼å¾å¤§ï¼æä»¥éè¦ååå¤ç\n        splitChunks: {\n            // é»è®¤å¼å°±æ¯asyncï¼ååçå¯¹è±¡å±åå¼å¥çå¼æ­¥æ¨¡åã\n            // initial: ååçå¯¹è±¡æ¯å±åå¼å¥çåå§éæå¯¼å¥æ¨¡åãall: ååææçå±åå¼å¥çæ¨¡åã\n            chunks: 'all',\n            // nameä»£è¡¨æååºæ¥ç chunk çåç§°ï¼æä¸ç§å¼ï¼\n            // 1.boolean = false (webpack5ä¸­ä¸æ¯ætrue)\n            // 2.function (module, chunks, cacheGroupKey) => string \n            // 3.string\n            // ä¸è¬é½æ¯ä½¿ç¨ falseï¼å°±æ¯ä»¥ cacheGroups ä¸­ç name å½åï¼å¦ææ²¡æ nameï¼é»è®¤ä¸º 2.js, 3.js è¿ç§æ°å­ç±»åç\n            name: false,\n            // è¡¨ç¤ºè¦è¢«æåçæ¨¡åæå°è¢«å¼ç¨æ¬¡æ°ï¼å¼ç¨æ¬¡æ°è¶è¿æç­äºminChunkså¼ï¼æè½è¢«æå\n            // è¿ä¸ªä¾å­é subtract è¢«å¼ç¨äº 2 æ¬¡ï¼å¦æè®¾ç½®æ 3 åä¸è½è¢«åå\n            minChunks: 2,\n            // è¡¨ç¤ºåªæè¶è¿äºå¤å°å­èæä¼è¢«æå, é»è®¤å¼æ¯ 20000ï¼è¿éè®¾ç½®æ 1 æ¯ä¸ºäºè¿ä¸ªä¾å­éè½åå modules ä¸­æ¨¡å\n            minSize: 1,\n            // æ¨¡åæåçæçæä»¶å¤§å°ä¸è½è¶è¿çå¼ï¼å¦æè¶äºè¦å¯¹å¶è¿è¡åå²å¹¶æåçææ°çæä»¶ã\n            // webpack4ä¸­é»è®¤ä¸º0è¡¨ç¤ºå¤§å°ä¸éå¶, webpack5ä¸­åæ¶äºé»è®¤å¼è®¾ç½®ä¸º0æ¶è¡¨ç¤ºå¤§äº0çå°±ä¼åå²\n            maxSize: 9999999999,\n            // å¨æå¼å¥çæ¨¡åï¼å¹¶è¡è¯·æ±çæå¤§æ°é\n            maxAsyncRequests: 5,\n            // æååçå¥å£æä»¶å è½½æ¶ï¼è½åæ¶åå§å è½½jsæä»¶çæ°é\n            // ä¼åçº§: maxInitialRequest/maxAsyncRequests < maxSize < minSize\n            maxInitialRequests: 3,\n            // å½åè¿æ¥ç¬¦\n            automaticNameDelimiter: '~',\n            cacheGroups: {\n                vendors: {\n                    name: 'vendors',\n                    test: /[\\\\/]node_modules[\\\\/]/,\n                    priority: 10\n                },\n                modules: {\n                    name: 'modules',\n                    test: resolve('src/modules'),\n                    priority: 10,\n                    reuseExistingChunk: true\n                }\n            }\n        }\n    }\n}\n\n\n * demo\n * å®æ¹ææ¡£\n\n\n# mini-css-extract-plugin\n\n> mini-css-extract-pluginå°cssåç¬æååºæ¥ï¼å¦æ css è¶è¿ 150KB æ¶éè¦åç¬æå\n> \n> æååºæ¥åè¿éè¦ç¨OptimizeCssAssetsWebpackPluginè¿è¡åç¼©\n> \n> å ä¸º webpack åç½®çåç¼©æä»¶åªæå js æä»¶\n\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin')\nconst OptimizeCssAssetsWebpackPlugin = require('optimize-css-assets-webpack-plugin')\nconst TerserWebpackPlugin = require('terser-webpack-plugin')\n\nmodule.exports = {\n  mode: 'none',\n  entry: {\n    main: './src/index.js'\n  },\n  optimization: {\n    minimizer: [\n      new TerserWebpackPlugin(),\n      new OptimizeCssAssetsWebpackPlugin() \n    ]\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: [\n          // 'style-loader', // å°æ ·å¼éè¿ style æ ç­¾æ³¨å¥\n          MiniCssExtractPlugin.loader, // ç´æ¥éè¿ link æ¹å¼å¼å¥\n          'css-loader'\n        ]\n      }\n    ]\n  },\n  plugins: [\n    new MiniCssExtractPlugin()\n  ]\n}\n\n\n> ä¸ºä»ä¹ptimizeCssAssetsWebpackPluginæä»¶æ¾å¨è¿ä¸æ¾å¨ plugins æ°ç»ä¸­å¢ ?\n> \n> å ä¸ºæ¾å¨ plugins è¯´æå¨ä»»ä½æ¶åé½ä¼å è½½è¿ä¸ªæä»¶ï¼èæä»¬æ¾å° minimizer ä¸­ï¼åªä¼å¨çäº§ç¯å¢å¼å¯ minimizer æ¶å·¥ä½\n> \n> ä½æ¯è¿æ¶ä¼åç° js æ²¡æåç¼©ï¼å ä¸ºæä»¬è®¾ç½®äºminimizerï¼webpackä¼è®¤ä¸ºæä»¬èªå®ä¹äºåç¼©æä»¶ï¼æä»¥æä»¬è¿è¦æ·»å åå»åç¼© js çæä»¶TerserWebpackPluginã\n\n\n# æä»¶å Hash\n\n  plugins: [\n    new CleanWebpackPlugin(),\n    new HtmlWebpackPlugin({\n      title: 'Dynamic import',\n      template: './src/index.html',\n      filename: 'index.html'\n    }),\n    new MiniCssExtractPlugin({\n      filename: '[name]-[contenthash:8].bundle.css' // æä»¶çº§å«çhash\n      // filename: '[name]-[chunkhash].bundle.css'  // chunkçº§å«\n      // filename: '[name]-[hash].bundle.css'       // é¡¹ç®çº§å«ï¼ä¸ä¸ªæä»¶æ¹åï¼ææhashå¨é¨æ¹å\n    })\n  ]\n}\n",normalizedContent:"# webpackï¼åï¼\n\n * webpack sideeffects\n * code splitting\n * mini-css-extract-plugin\n * æä»¶å hash\n\n\n# webpack sideeffects\n\n> å¯ä½ç¨ï¼æ¨¡åæ§è¡æ¶é¤äºå¯¼åºæåä¹å¤æåçäºæ\n> \n> æ¯å¦ä¸ä¸ª css æä»¶æ²¡æå¯¼åºï¼å¯è®¤ä¸ºæå¯ä½ç¨\n\n|--components\n\t\t--button.js\n\t\t--heading.js\n\t\t--link.js\n\t\t--index.js\n|--index.js\n\n\n// components/index.js\n\nexport { default as button } from './button'\nexport { default as link } from './link'\nexport { default as heading } from './heading'\n\n// å¥å£æä»¶ index.js\nimport { button } from './components'\n// åªæ³è½½å¥ button å´è½½å¥äºæææ¨¡å\n\n\n// webpack.config.js\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/index.js',\n  output: {\n    filename: 'bundle.js'\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: [\n          'style-loader',\n          'css-loader'\n        ]\n      }\n    ]\n  },\n  optimization: {\n    sideeffects: true, // æ è¯ä¸ºtrueå°±ä¼å»package.jsonä¸­å»æ£æ¥ææ å¯ä½ç¨\n  }\n}\n\n// package.json\n{\n  \"name\": \"31-side-effects\",\n  \"version\": \"0.1.0\",\n  \"main\": \"index.js\",\n  \"author\": \"zce <w@zce.me> (https://zce.me)\",\n  \"license\": \"mit\",\n  \"scripts\": {\n    \"build\": \"webpack\"\n  },\n  \"devdependencies\": {\n    \"css-loader\": \"^3.2.0\",\n    \"style-loader\": \"^1.0.0\",\n    \"webpack\": \"^4.41.2\",\n    \"webpack-cli\": \"^3.3.9\"\n  },\n  // \"sideeffects\": false  //è®¾ç½®ä¸ºfalseè¯´ææ²¡æå¯ä½ç¨ï¼åå¤ä½çæ¨¡åä¸ä¼è¢«æå\n  \"sideeffects\": [\n    \"./src/extend.js\", // æ è¯ä¸ä¸æå¯ä½ç¨èä¸æ³è¢«å é¤çæ¨¡åï¼é²æ­¢ä¸ä¼è¢«æå\n    \"*.css\"\n  ]\n}\n\n\n\n\n# ä»£ç åå²\n\n> webpackå°æææ¨¡åé½æåå°ä¸èµ·ï¼ä½æ¯å¹¶ä¸æ¯æ¯ä¸ªæ¨¡åå¨å¯å¨æ¶é½æ¯å¿è¦çã\n> \n> æ´å¥½çæ¹æ¡æ¯ææåç»ææä¸å®çè§ååç¦»ï¼æç§åºç¨çè¿è¡ç»ææéå è½½ã\n> \n> webpack ççå¿µå°±æ¯æåä¸ªæ¨¡åæåå°ä¸èµ·ï¼ç°å¨åè¦åç¦»å¼æ¥ï¼æ¯å¦çç¾ï¼ä¸çç¾ï¼ç©æå¿åèå·²ã\n\n * å¤å¥å£æåï¼ä¸ä¸ªé¡µé¢ä¸ä¸ªå¥å£ï¼å¬å±é¨åæåã\n * å¨æå¯¼å¥ï¼éè¦æä¸ªæ¨¡åæ¶ï¼åå»å è½½è¿ä¸ªæ¨¡åã\n\n\n# å¤å¥å£æåéç½®\n\nconst { cleanwebpackplugin } = require('clean-webpack-plugin')\nconst htmlwebpackplugin = require('html-webpack-plugin')\n\nmodule.exports = {\n  mode: 'none',\n  entry: {\n    index: './src/index.js',  // å¤å¥å£\n    album: './src/album.js'\n  },\n  output: {\n    filename: '[name].bundle.js' // çæå¯¹åºçæä»¶å\n  },\n  optimization: {\n    splitchunks: {\n      // èªå¨æåææå¬å±æ¨¡åå°åç¬ bundle ä¸ä¸ªæä»¶\n      // æåå: index.bundle.js, album.bundle.js, index~album.bundle.jsï¼å¬å±é¨åï¼\n      chunks: 'all'\n    }\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: [\n          'style-loader',\n          'css-loader'\n        ]\n      }\n    ]\n  },\n  plugins: [\n    new cleanwebpackplugin(),\n    new htmlwebpackplugin({\n      title: 'multi entry',\n      template: './src/index.html',\n      filename: 'index.html',\n      chunks: ['index']  // index.html åªä¼å¼å¥æååç index.js\n    }),\n    new htmlwebpackplugin({\n      title: 'multi entry',\n      template: './src/album.html',\n      filename: 'album.html',\n      chunks: ['album'] // album.html åªä¼å¼å¥æååç album.js\n    })\n  ]\n}\n\n\n\n# å¨æå¯¼å¥\n\n> éè¦æä¸ªæ¨¡åæ¶åå»å è½½ï¼å¨æå¯¼å¥çæ¨¡åä¼è¢«èªå¨ååï¼ä¾å¦å¸¸è§çæ°å­å¼å¤´ç js æä»¶: 0.js å°±æ¯è¿ç±»æ¨¡ååååºæ¥çæä»¶ã\n\n// import posts from './posts/posts'\n// import album from './album/album'\n// å é¤åºå®å¯¼å¥\n\nconst render = () => {\n  const hash = window.location.hash || '#posts'\n\n  const mainelement = document.queryselector('.main')\n\n  mainelement.innerhtml = ''\n  // æ ¹æ® hash å¼å¨æå¯¼å¥\n  if (hash === '#posts') {\n    // é­æ³æ³¨éå¯ä»¥è®¾ç½®æååæä»¶å\n    import(/* webpackchunkname: 'components' */'./posts/posts').then(({ default: posts }) => {\t\n      mainelement.appendchild(posts())\n    })\n  } else if (hash === '#album') {\n    // é­æ³æ³¨éå¯ä»¥è®¾ç½®æååæä»¶å\n    import(/* webpackchunkname: 'components' */'./album/album').then(({ default: album }) => {\n      mainelement.appendchild(album())\n    })\n  }\n}\n\nrender()\n\nwindow.addeventlistener('hashchange', render)\n\n\nwebpack splitchunkspluginå®ç¨æå\n\nwebpackä¹splitchunksæä»¶ç¨æ³è¯¦è§£\n\n> å¨ç ç©¶splitchunksä¹åï¼æä»¬å¿é¡»åå¼æç½è¿ä¸ä¸ªåè¯æ¯ä»ä¹ææï¼ä¸»è¦æ¯chunkçå«ä¹ï¼è¦ä¸ç¶ä½ å°±ä¸ç¥ésplitchunksæ¯å¨ä»ä¹çåºç¡ä¸è¿è¡æåã\n> \n>  * moduleï¼å°±æ¯jsçæ¨¡ååwebpackæ¯æcommonjsães6ç­æ¨¡ååè§èï¼ç®åæ¥è¯´å°±æ¯ä½ éè¿importè¯­å¥å¼å¥çä»£ç ã\n>  * chunk: chunkæ¯webpackæ ¹æ®åè½æååºæ¥çï¼åå«ä¸ç§æåµï¼\n> \n> 1ãä½ çé¡¹ç®å¥å£ï¼entryï¼\n> \n> 2ãéè¿import()å¨æå¼å¥çä»£ç ï¼é»è®¤ååï¼\n> \n> 3ãéè¿splitchunksæååºæ¥çä»£ç \n> \n> chunkåå«çmoduleï¼å¯è½æ¯ä¸å¯¹å¤ä¹å¯è½æ¯ä¸å¯¹ä¸ã\n> \n>  * bundleï¼bundleæ¯webpackæåä¹åçåä¸ªæä»¶ï¼ä¸è¬å°±æ¯åchunkæ¯ä¸å¯¹ä¸çå³ç³»ï¼bundleå°±æ¯å¯¹chunkè¿è¡ç¼è¯åç¼©æåç­å¤çä¹åçäº§åºã\n\nconst resolve = require('path').resolve\nconst { cleanwebpackplugin } = require('clean-webpack-plugin');\n\nmodule.exports = {\n    mode: 'none',\n    entry: {\n        entry1: './src/entry1.js',\n        entry2: './src/entry2.js'\n    },\n    plugins: [\n        new cleanwebpackplugin()\n    ],\n    output: {\n        filename: '[name].bundle.js',\n        path: resolve(__dirname, 'dist')\n    },\n    optimization: {\n        // splitchunksä½ç¨: æ entry1.js å entry2.js é½å±åå¼å¥çæ¨¡ååååºæ¥ã\n        // åå¦ entry1.js å entry2.js é½å¼å¥äº elementï¼é£ä¹ entry1.bundle.js å entry2.bundle.js\n        // ä¸ååçè¯é½ä¼å° element æåè¿å»ï¼ä¸¤ä¸ªæä»¶å°±é½ä¼å¾å¤§ï¼æä»¥éè¦ååå¤ç\n        splitchunks: {\n            // é»è®¤å¼å°±æ¯asyncï¼ååçå¯¹è±¡å±åå¼å¥çå¼æ­¥æ¨¡åã\n            // initial: ååçå¯¹è±¡æ¯å±åå¼å¥çåå§éæå¯¼å¥æ¨¡åãall: ååææçå±åå¼å¥çæ¨¡åã\n            chunks: 'all',\n            // nameä»£è¡¨æååºæ¥ç chunk çåç§°ï¼æä¸ç§å¼ï¼\n            // 1.boolean = false (webpack5ä¸­ä¸æ¯ætrue)\n            // 2.function (module, chunks, cachegroupkey) => string \n            // 3.string\n            // ä¸è¬é½æ¯ä½¿ç¨ falseï¼å°±æ¯ä»¥ cachegroups ä¸­ç name å½åï¼å¦ææ²¡æ nameï¼é»è®¤ä¸º 2.js, 3.js è¿ç§æ°å­ç±»åç\n            name: false,\n            // è¡¨ç¤ºè¦è¢«æåçæ¨¡åæå°è¢«å¼ç¨æ¬¡æ°ï¼å¼ç¨æ¬¡æ°è¶è¿æç­äºminchunkså¼ï¼æè½è¢«æå\n            // è¿ä¸ªä¾å­é subtract è¢«å¼ç¨äº 2 æ¬¡ï¼å¦æè®¾ç½®æ 3 åä¸è½è¢«åå\n            minchunks: 2,\n            // è¡¨ç¤ºåªæè¶è¿äºå¤å°å­èæä¼è¢«æå, é»è®¤å¼æ¯ 20000ï¼è¿éè®¾ç½®æ 1 æ¯ä¸ºäºè¿ä¸ªä¾å­éè½åå modules ä¸­æ¨¡å\n            minsize: 1,\n            // æ¨¡åæåçæçæä»¶å¤§å°ä¸è½è¶è¿çå¼ï¼å¦æè¶äºè¦å¯¹å¶è¿è¡åå²å¹¶æåçææ°çæä»¶ã\n            // webpack4ä¸­é»è®¤ä¸º0è¡¨ç¤ºå¤§å°ä¸éå¶, webpack5ä¸­åæ¶äºé»è®¤å¼è®¾ç½®ä¸º0æ¶è¡¨ç¤ºå¤§äº0çå°±ä¼åå²\n            maxsize: 9999999999,\n            // å¨æå¼å¥çæ¨¡åï¼å¹¶è¡è¯·æ±çæå¤§æ°é\n            maxasyncrequests: 5,\n            // æååçå¥å£æä»¶å è½½æ¶ï¼è½åæ¶åå§å è½½jsæä»¶çæ°é\n            // ä¼åçº§: maxinitialrequest/maxasyncrequests < maxsize < minsize\n            maxinitialrequests: 3,\n            // å½åè¿æ¥ç¬¦\n            automaticnamedelimiter: '~',\n            cachegroups: {\n                vendors: {\n                    name: 'vendors',\n                    test: /[\\\\/]node_modules[\\\\/]/,\n                    priority: 10\n                },\n                modules: {\n                    name: 'modules',\n                    test: resolve('src/modules'),\n                    priority: 10,\n                    reuseexistingchunk: true\n                }\n            }\n        }\n    }\n}\n\n\n * demo\n * å®æ¹ææ¡£\n\n\n# mini-css-extract-plugin\n\n> mini-css-extract-pluginå°cssåç¬æååºæ¥ï¼å¦æ css è¶è¿ 150kb æ¶éè¦åç¬æå\n> \n> æååºæ¥åè¿éè¦ç¨optimizecssassetswebpackpluginè¿è¡åç¼©\n> \n> å ä¸º webpack åç½®çåç¼©æä»¶åªæå js æä»¶\n\nconst minicssextractplugin = require('mini-css-extract-plugin')\nconst optimizecssassetswebpackplugin = require('optimize-css-assets-webpack-plugin')\nconst terserwebpackplugin = require('terser-webpack-plugin')\n\nmodule.exports = {\n  mode: 'none',\n  entry: {\n    main: './src/index.js'\n  },\n  optimization: {\n    minimizer: [\n      new terserwebpackplugin(),\n      new optimizecssassetswebpackplugin() \n    ]\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: [\n          // 'style-loader', // å°æ ·å¼éè¿ style æ ç­¾æ³¨å¥\n          minicssextractplugin.loader, // ç´æ¥éè¿ link æ¹å¼å¼å¥\n          'css-loader'\n        ]\n      }\n    ]\n  },\n  plugins: [\n    new minicssextractplugin()\n  ]\n}\n\n\n> ä¸ºä»ä¹ptimizecssassetswebpackpluginæä»¶æ¾å¨è¿ä¸æ¾å¨ plugins æ°ç»ä¸­å¢ ?\n> \n> å ä¸ºæ¾å¨ plugins è¯´æå¨ä»»ä½æ¶åé½ä¼å è½½è¿ä¸ªæä»¶ï¼èæä»¬æ¾å° minimizer ä¸­ï¼åªä¼å¨çäº§ç¯å¢å¼å¯ minimizer æ¶å·¥ä½\n> \n> ä½æ¯è¿æ¶ä¼åç° js æ²¡æåç¼©ï¼å ä¸ºæä»¬è®¾ç½®äºminimizerï¼webpackä¼è®¤ä¸ºæä»¬èªå®ä¹äºåç¼©æä»¶ï¼æä»¥æä»¬è¿è¦æ·»å åå»åç¼© js çæä»¶terserwebpackpluginã\n\n\n# æä»¶å hash\n\n  plugins: [\n    new cleanwebpackplugin(),\n    new htmlwebpackplugin({\n      title: 'dynamic import',\n      template: './src/index.html',\n      filename: 'index.html'\n    }),\n    new minicssextractplugin({\n      filename: '[name]-[contenthash:8].bundle.css' // æä»¶çº§å«çhash\n      // filename: '[name]-[chunkhash].bundle.css'  // chunkçº§å«\n      // filename: '[name]-[hash].bundle.css'       // é¡¹ç®çº§å«ï¼ä¸ä¸ªæä»¶æ¹åï¼ææhashå¨é¨æ¹å\n    })\n  ]\n}\n",charsets:{cjk:!0}},{title:"webpackï¼äºï¼",frontmatter:{title:"webpackï¼äºï¼",date:"2020-09-08T14:48:00.000Z",categories:"webpack"},regularPath:"/webpack/webpack5.html",relativePath:"webpack/webpack5.md",key:"v-65000a52",path:"/webpack/webpack5.html",headers:[{level:2,title:"ä½¿ç¨ webpack æåä¸ä¸ª vue é¡¹ç®",slug:"ä½¿ç¨-webpack-æåä¸ä¸ª-vue-é¡¹ç®",normalizedTitle:"ä½¿ç¨ webpack æåä¸ä¸ª vue é¡¹ç®",charIndex:126},{level:2,title:"éç½® webpack.dev.js",slug:"éç½®-webpack-dev-js",normalizedTitle:"éç½® webpack.dev.js",charIndex:61},{level:2,title:"éç½® webpack.prod.js å webpack.common.js",slug:"éç½®-webpack-prod-js-å-webpack-common-js",normalizedTitle:"éç½® webpack.prod.js å webpack.common.js",charIndex:4785},{level:2,title:"éç½®eslint",slug:"éç½®eslint",normalizedTitle:"éç½®eslint",charIndex:113}],lastUpdated:"9/3/2021, 7:07:07 PM",lastUpdatedTimestamp:1630667227e3,headersStr:"ä½¿ç¨ webpack æåä¸ä¸ª vue é¡¹ç® éç½® webpack.dev.js éç½® webpack.prod.js å webpack.common.js éç½®eslint",content:"# webpackï¼äºï¼\n\n * ä½¿ç¨webpackæåä¸ä¸ªvueé¡¹ç®\n * å®è£ loader å plugin\n * éç½® webpack.dev.js\n * éç½® webpack.prod.js\n * merge\n * éç½®eslint\n\n\n# ä½¿ç¨ webpack æåä¸ä¸ª vue é¡¹ç®\n\n> é¦åå®è£ä¸äºå¿è¦ç loader å plugin\n\n * webpackï¼webpack-cliï¼webpackå·¥å·\n\n * vueï¼vue-loaderï¼vue-template-compilerï¼å¤ç .vue æä»¶\n\n * lessï¼less-loaderï¼css-loaderï¼style-loaderï¼å¤çæ ·å¼\n\n * url-loaderï¼file-loaderï¼å¤çå¾çç­æä»¶\n\n * eslint-loaderï¼ä»£ç æ åå\n\n * babel-loader @babel/core @babel/preset-envï¼babelå¤ç es6\n\n * clean-webpack-pluginï¼å é¤ dist ç®å½\n\n * html-webpack-pluginï¼çæèªå¨å¼ç¨æååç js ç html æä»¶\n\n * copy-webpack-pluginï¼å¯ä»¥ç¨æ¥æ·è´ public ç®å½\n\n * webpack-dev-serverï¼æµè§å¨èªå¨ç¼è¯å·æ°\n\n * webpack-mergeï¼åå¹¶éç½®æä»¶\n\n * sourcemapï¼æ å°æºæä»¶\n\n\n# éç½® webpack.dev.js\n\né¦ååä¸ä¸å¥å£ï¼åºå£ï¼å¤ç vue å æ ·å¼çéç½®\n\nconst path = require('path')\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/main.js', // å¥å£\n  output: { \n    filename: 'bundle.js', \n    path: path.join(__dirname, 'dist')\n  },\n  module:{\n    rules:[\n      { \n        test: /\\.vue$/, \n        use: 'vue-loader' \n      },\n      {\n        test: /.css$/,   // å¤çcss\n        use: [\n          'style-loader',\n          'css-loader'\n        ]\n      },\n      {\n        test: /.less$/, // å¤çsass\n        use: [\n          'style-loader',\n          'css-loader',\n          'less-loader'\n        ]\n      },\n      {\n        test: /.png$/, // å¤çå¾ç\n        use: {\n          loader: 'url-loader', \n          options: {\n            limit: 10 * 1024 // 10 KB\n          }\n        }\n      }\n    ]\n  }\n}\n\n\nç¶åå¨package.jsonä¸­éç½®ä¸ä¸scripts\n\n> \"serve\": \"webpack --config webpack.dev.js\"\n\nè¿è¡npm run serveråæ¥éï¼\n\n> vue-loader was used without the corresponding plugin\n> \n> åæ¥æ¯Vue-loaderå¨15.*ä¹åççæ¬é½æ¯éè¦ä¼´é VueLoaderPluginç,\n\nconst path = require('path')\nconst VueLoaderPlugin = require('vue-loader/lib/plugin');\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/main.js', // å¥å£\n  output: { \n    filename: 'bundle.js', \n    path: path.join(__dirname, 'dist')\n  },\n  module:{\n    rules:[\n      // ...\n    ]\n  },\n  plugins: [\n    new VueLoaderPlugin()\n  ],\n}\n\n\n> åæ¬¡è¿è¡ npm run server æåæåï¼å¨ dist ç®å½ä¸çæäº bundle.js\n> \n> æ­¤æ¶åªæä¸ä¸ª js æä»¶ï¼é£ä¹æä¹è½è¿è¡å¢ï¼è¿æ¶å°±éè¦ html-webpack-plugin å webpack-dev-server äº\n\nconst path = require('path')\nconst VueLoaderPlugin = require('vue-loader/lib/plugin')\nconst { CleanWebpackPlugin } = require('clean-webpack-plugin')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\nconst CopyWebpackPlugin = require('copy-webpack-plugin');\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/main.js', // å¥å£\n  output: { \n    filename: 'bundle.js', \n    path: path.join(__dirname, 'dist')\n  },\n  module:{\n    rules:[\n      // ...\n    ]\n  },\n  plugins: [\n    new VueLoaderPlugin(),\n    new CleanWebpackPlugin(),  // æ¸é¤ dist\n    new HtmlWebpackPlugin({    // çæå¼å¥ bundle.js ç index.html\n      filename: 'index.html'\n    }),\n    new CopyWebpackPlugin({    // æ·è´ public ç®å½\n      patterns: [\n        { from: path.join(__dirname,'public'),\n          to: 'public' \n        }\n      ],\n    }),\n  ],\n}\n\n\n> // ç¶åä¿®æ¹èæ¬\n> \n> \"scripts\": {\n> \n> \"serve\": \"webpack-dev-server --config webpack.dev.js --open --hot\",\n> \n> },\n> \n> åæ¬¡è¿è¡ npm run serveï¼æåæå¼é¡µé¢ï¼ä½æ¯éé¢ä»ä¹ä¹æ²¡æï¼æ F12æ£æ¥åç°æ¥é\n> \n> Vue warn: Cannot find element: #app\n\nåç°å¨çæç index.html æä»¶ä¸­æ²¡æ div id=\"app\" çåç´ ï¼åæ¥æ¯å¨ä½¿ç¨ html-webpack-plugin çæ¶åæ²¡æä½¿ç¨templateï¼æ£æ¥ç®å½åç°å¨publicç®å½ä¸æåå¥½ç index.html\n\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n    <link rel=\"icon\" href=\"<%= BASE_URL %>favicon.ico\">\n    <title><%= htmlWebpackPlugin.options.title %></title>\n  </head>\n  <body>\n    <noscript>\n      <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>\n    </noscript>\n    <div id=\"app\"></div>\n    \x3c!-- built files will be auto injected --\x3e\n  </body>\n</html>\n\n\nå¶ä¸­ BASE_URL éè¦ä½¿ç¨ DefinePlugin æ³¨å¥å¨å±æåï¼title å°±å¨ htmlWebpackPlugin éç½®\n\n  plugins: [\n    new VueLoaderPlugin(),\n    new CleanWebpackPlugin(),\n    new HtmlWebpackPlugin({\n      title: 'this is a title',\n      template : './public/index.html',\n      filename: 'index.html'\n    }),\n    new webpack.DefinePlugin({\n      BASE_URL: JSON.stringify('./public/')\n    })\n  ]\n\n\n> ç¶åé¡µé¢å°±æ­£å¸¸æå¼äºï¼ä½æ¯æä¸å¼ å¾çæ²¡ææ¾ç¤ºï¼æ¾ç¤ºï¼\n> \n> img src=\"[object Module]\"\n> \n> åå æ¯å¨url-loaderåé¨å°è£äºfile-loader èfile-loaderå¨æ°çæ¬ä¸­esModuleå±æ§é»è®¤ä¸ºtrue å³é»è®¤ä½¿ç¨ESæ¨¡åè¯­æ³ï¼å¯¼è´äºé æäºå¼ç¨å¾çæä»¶çæ¹å¼åä»¥åççæ¬ä¸ä¸æ · å¼å¥è·¯å¾æ¹åäº èªç¶æ¾ä¸å°å¾ç\n\n\t{\n        test: /.png$/,\n        use: {\n          loader: 'url-loader', // å¤§äº10KBçè¿ä¼ä½¿ç¨file-loader\n          options: {\n            limit: 10 * 1024, // 10 KB\n            esModule: false // åæ¶ä½¿ç¨ esModules\n          }\n        }\n      }\n\n\nåæ¬¡è¿è¡é¡µé¢å°±è½æ­£å¸¸æå¼äºï¼å¹¶ä¸è¯äºç­æ´æ°åè½æ²¡é®é¢ï¼ä½æ¯å¨å¼åç¯å¢ä¸æ²¡å¿è¦æ·è´ public ç®å½ï¼è®¾ç½®ä¸ä¸ contentBase å³å¯\n\ndevServer: {\n    contentBase: './public',\n    hot: true  // ç­æ´æ°ä¹å¯ä»¥å¨è¿éç½®\n},\n\n\n\n# éç½® webpack.prod.js å webpack.common.js\n\nå¨çäº§ç¯å¢ä¸ï¼å°±éè¦æ·è´ public ç®å½äºï¼å¹¶ä¸è®¾ç½® mode: 'production'ï¼éè¿ webpack-merge åå¹¶\n\n// webpack.dev.js\nconst path = require('path')\nconst common = require('./webpack.common.js')\nconst webpackMerge = require('webpack-merge')\n\nmodule.exports = webpackMerge.merge(common, {\n  mode: 'none',\n  devServer: {\n    contentBase: './public',\n    hot: true\n  }\n})\n\n// webpack.prod.js\nconst path = require('path')\nconst common = require('./webpack.common.js')\nconst webpackMerge = require('webpack-merge')\nconst CopyWebpackPlugin = require('copy-webpack-plugin')\n\nmodule.exports = webpackMerge.merge(common, {\n  mode: 'production',\n  plugins: [\n    new CopyWebpackPlugin({\n      patterns: [\n        { \n          from: path.join(__dirname,'public'),\n          to: 'public' \n        }\n      ],\n    })\n  ]\n})\n\n\n// webpack.common.js\nconst path = require('path')\nconst VueLoaderPlugin = require('vue-loader/lib/plugin')\nconst { CleanWebpackPlugin } = require('clean-webpack-plugin')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\nconst webpack = require('webpack')\n\nmodule.exports = {\n  entry: './src/main.js', // å¥å£\n  output: { \n    filename: 'bundle.js', \n    path: path.join(__dirname, 'dist')\n  },\n  module:{\n    rules:[\n      { \n        test: /\\.vue$/, \n        use: 'vue-loader' \n      },\n      {\n        test: /.css$/,\n        use: [\n          'style-loader',\n          'css-loader'\n        ]\n      },\n      {\n        test: /.less$/,\n        use: [\n          'style-loader',\n          'css-loader',\n          'less-loader'\n        ]\n      },\n      {\n        test: /.png$/,\n        use: {\n          loader: 'url-loader', // å¤§äº10KBçè¿ä¼ä½¿ç¨file-loader\n          options: {\n            limit: 10 * 1024, // 10 KB\n            esModule: false\n          }\n        }\n      }\n    ]\n  },\n  plugins: [\n    new VueLoaderPlugin(),\n    new CleanWebpackPlugin(),\n    new HtmlWebpackPlugin({\n      title: 'this is a title',\n      template : './public/index.html',\n      filename: 'index.html'\n    }),\n    new webpack.DefinePlugin({\n      BASE_URL: JSON.stringify('./public/')\n    })\n  ]\n}\n\n\n\n# éç½®eslint\n\neslint --initæ¶æ¨¡åä¸è½½å¤±è´¥ï¼è¿éæå°±æå¨å®è£ä¸ä¸ï¼\n\ncnpm i -D eslint-plugin-vue eslint-config-standard eslint eslint-plugin-import eslint-plugin-node eslint-plugin-promise eslint-plugin-standard\n\n\nç¶åå¨webpack.common.jsä¸­éç½®ä¸ä¸å°±å¯ä»¥\n\n\t  {\n        test: /\\.vue$/,\n        use: [\n          'vue-loader',\n          'eslint-loader'\n        ]\n      },\n\n\nç¶ååpackage.jsonä¸­åéç½®ä¸ä¸\n\n\"scripts\": {\n\t\"lint\": \"eslint src/**/*.vue\"\n}\n",normalizedContent:"# webpackï¼äºï¼\n\n * ä½¿ç¨webpackæåä¸ä¸ªvueé¡¹ç®\n * å®è£ loader å plugin\n * éç½® webpack.dev.js\n * éç½® webpack.prod.js\n * merge\n * éç½®eslint\n\n\n# ä½¿ç¨ webpack æåä¸ä¸ª vue é¡¹ç®\n\n> é¦åå®è£ä¸äºå¿è¦ç loader å plugin\n\n * webpackï¼webpack-cliï¼webpackå·¥å·\n\n * vueï¼vue-loaderï¼vue-template-compilerï¼å¤ç .vue æä»¶\n\n * lessï¼less-loaderï¼css-loaderï¼style-loaderï¼å¤çæ ·å¼\n\n * url-loaderï¼file-loaderï¼å¤çå¾çç­æä»¶\n\n * eslint-loaderï¼ä»£ç æ åå\n\n * babel-loader @babel/core @babel/preset-envï¼babelå¤ç es6\n\n * clean-webpack-pluginï¼å é¤ dist ç®å½\n\n * html-webpack-pluginï¼çæèªå¨å¼ç¨æååç js ç html æä»¶\n\n * copy-webpack-pluginï¼å¯ä»¥ç¨æ¥æ·è´ public ç®å½\n\n * webpack-dev-serverï¼æµè§å¨èªå¨ç¼è¯å·æ°\n\n * webpack-mergeï¼åå¹¶éç½®æä»¶\n\n * sourcemapï¼æ å°æºæä»¶\n\n\n# éç½® webpack.dev.js\n\né¦ååä¸ä¸å¥å£ï¼åºå£ï¼å¤ç vue å æ ·å¼çéç½®\n\nconst path = require('path')\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/main.js', // å¥å£\n  output: { \n    filename: 'bundle.js', \n    path: path.join(__dirname, 'dist')\n  },\n  module:{\n    rules:[\n      { \n        test: /\\.vue$/, \n        use: 'vue-loader' \n      },\n      {\n        test: /.css$/,   // å¤çcss\n        use: [\n          'style-loader',\n          'css-loader'\n        ]\n      },\n      {\n        test: /.less$/, // å¤çsass\n        use: [\n          'style-loader',\n          'css-loader',\n          'less-loader'\n        ]\n      },\n      {\n        test: /.png$/, // å¤çå¾ç\n        use: {\n          loader: 'url-loader', \n          options: {\n            limit: 10 * 1024 // 10 kb\n          }\n        }\n      }\n    ]\n  }\n}\n\n\nç¶åå¨package.jsonä¸­éç½®ä¸ä¸scripts\n\n> \"serve\": \"webpack --config webpack.dev.js\"\n\nè¿è¡npm run serveråæ¥éï¼\n\n> vue-loader was used without the corresponding plugin\n> \n> åæ¥æ¯vue-loaderå¨15.*ä¹åççæ¬é½æ¯éè¦ä¼´é vueloaderpluginç,\n\nconst path = require('path')\nconst vueloaderplugin = require('vue-loader/lib/plugin');\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/main.js', // å¥å£\n  output: { \n    filename: 'bundle.js', \n    path: path.join(__dirname, 'dist')\n  },\n  module:{\n    rules:[\n      // ...\n    ]\n  },\n  plugins: [\n    new vueloaderplugin()\n  ],\n}\n\n\n> åæ¬¡è¿è¡ npm run server æåæåï¼å¨ dist ç®å½ä¸çæäº bundle.js\n> \n> æ­¤æ¶åªæä¸ä¸ª js æä»¶ï¼é£ä¹æä¹è½è¿è¡å¢ï¼è¿æ¶å°±éè¦ html-webpack-plugin å webpack-dev-server äº\n\nconst path = require('path')\nconst vueloaderplugin = require('vue-loader/lib/plugin')\nconst { cleanwebpackplugin } = require('clean-webpack-plugin')\nconst htmlwebpackplugin = require('html-webpack-plugin')\nconst copywebpackplugin = require('copy-webpack-plugin');\n\nmodule.exports = {\n  mode: 'none',\n  entry: './src/main.js', // å¥å£\n  output: { \n    filename: 'bundle.js', \n    path: path.join(__dirname, 'dist')\n  },\n  module:{\n    rules:[\n      // ...\n    ]\n  },\n  plugins: [\n    new vueloaderplugin(),\n    new cleanwebpackplugin(),  // æ¸é¤ dist\n    new htmlwebpackplugin({    // çæå¼å¥ bundle.js ç index.html\n      filename: 'index.html'\n    }),\n    new copywebpackplugin({    // æ·è´ public ç®å½\n      patterns: [\n        { from: path.join(__dirname,'public'),\n          to: 'public' \n        }\n      ],\n    }),\n  ],\n}\n\n\n> // ç¶åä¿®æ¹èæ¬\n> \n> \"scripts\": {\n> \n> \"serve\": \"webpack-dev-server --config webpack.dev.js --open --hot\",\n> \n> },\n> \n> åæ¬¡è¿è¡ npm run serveï¼æåæå¼é¡µé¢ï¼ä½æ¯éé¢ä»ä¹ä¹æ²¡æï¼æ f12æ£æ¥åç°æ¥é\n> \n> vue warn: cannot find element: #app\n\nåç°å¨çæç index.html æä»¶ä¸­æ²¡æ div id=\"app\" çåç´ ï¼åæ¥æ¯å¨ä½¿ç¨ html-webpack-plugin çæ¶åæ²¡æä½¿ç¨templateï¼æ£æ¥ç®å½åç°å¨publicç®å½ä¸æåå¥½ç index.html\n\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"x-ua-compatible\" content=\"ie=edge\">\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n    <link rel=\"icon\" href=\"<%= base_url %>favicon.ico\">\n    <title><%= htmlwebpackplugin.options.title %></title>\n  </head>\n  <body>\n    <noscript>\n      <strong>we're sorry but <%= htmlwebpackplugin.options.title %> doesn't work properly without javascript enabled. please enable it to continue.</strong>\n    </noscript>\n    <div id=\"app\"></div>\n    \x3c!-- built files will be auto injected --\x3e\n  </body>\n</html>\n\n\nå¶ä¸­ base_url éè¦ä½¿ç¨ defineplugin æ³¨å¥å¨å±æåï¼title å°±å¨ htmlwebpackplugin éç½®\n\n  plugins: [\n    new vueloaderplugin(),\n    new cleanwebpackplugin(),\n    new htmlwebpackplugin({\n      title: 'this is a title',\n      template : './public/index.html',\n      filename: 'index.html'\n    }),\n    new webpack.defineplugin({\n      base_url: json.stringify('./public/')\n    })\n  ]\n\n\n> ç¶åé¡µé¢å°±æ­£å¸¸æå¼äºï¼ä½æ¯æä¸å¼ å¾çæ²¡ææ¾ç¤ºï¼æ¾ç¤ºï¼\n> \n> img src=\"[object module]\"\n> \n> åå æ¯å¨url-loaderåé¨å°è£äºfile-loader èfile-loaderå¨æ°çæ¬ä¸­esmoduleå±æ§é»è®¤ä¸ºtrue å³é»è®¤ä½¿ç¨esæ¨¡åè¯­æ³ï¼å¯¼è´äºé æäºå¼ç¨å¾çæä»¶çæ¹å¼åä»¥åççæ¬ä¸ä¸æ · å¼å¥è·¯å¾æ¹åäº èªç¶æ¾ä¸å°å¾ç\n\n\t{\n        test: /.png$/,\n        use: {\n          loader: 'url-loader', // å¤§äº10kbçè¿ä¼ä½¿ç¨file-loader\n          options: {\n            limit: 10 * 1024, // 10 kb\n            esmodule: false // åæ¶ä½¿ç¨ esmodules\n          }\n        }\n      }\n\n\nåæ¬¡è¿è¡é¡µé¢å°±è½æ­£å¸¸æå¼äºï¼å¹¶ä¸è¯äºç­æ´æ°åè½æ²¡é®é¢ï¼ä½æ¯å¨å¼åç¯å¢ä¸æ²¡å¿è¦æ·è´ public ç®å½ï¼è®¾ç½®ä¸ä¸ contentbase å³å¯\n\ndevserver: {\n    contentbase: './public',\n    hot: true  // ç­æ´æ°ä¹å¯ä»¥å¨è¿éç½®\n},\n\n\n\n# éç½® webpack.prod.js å webpack.common.js\n\nå¨çäº§ç¯å¢ä¸ï¼å°±éè¦æ·è´ public ç®å½äºï¼å¹¶ä¸è®¾ç½® mode: 'production'ï¼éè¿ webpack-merge åå¹¶\n\n// webpack.dev.js\nconst path = require('path')\nconst common = require('./webpack.common.js')\nconst webpackmerge = require('webpack-merge')\n\nmodule.exports = webpackmerge.merge(common, {\n  mode: 'none',\n  devserver: {\n    contentbase: './public',\n    hot: true\n  }\n})\n\n// webpack.prod.js\nconst path = require('path')\nconst common = require('./webpack.common.js')\nconst webpackmerge = require('webpack-merge')\nconst copywebpackplugin = require('copy-webpack-plugin')\n\nmodule.exports = webpackmerge.merge(common, {\n  mode: 'production',\n  plugins: [\n    new copywebpackplugin({\n      patterns: [\n        { \n          from: path.join(__dirname,'public'),\n          to: 'public' \n        }\n      ],\n    })\n  ]\n})\n\n\n// webpack.common.js\nconst path = require('path')\nconst vueloaderplugin = require('vue-loader/lib/plugin')\nconst { cleanwebpackplugin } = require('clean-webpack-plugin')\nconst htmlwebpackplugin = require('html-webpack-plugin')\nconst webpack = require('webpack')\n\nmodule.exports = {\n  entry: './src/main.js', // å¥å£\n  output: { \n    filename: 'bundle.js', \n    path: path.join(__dirname, 'dist')\n  },\n  module:{\n    rules:[\n      { \n        test: /\\.vue$/, \n        use: 'vue-loader' \n      },\n      {\n        test: /.css$/,\n        use: [\n          'style-loader',\n          'css-loader'\n        ]\n      },\n      {\n        test: /.less$/,\n        use: [\n          'style-loader',\n          'css-loader',\n          'less-loader'\n        ]\n      },\n      {\n        test: /.png$/,\n        use: {\n          loader: 'url-loader', // å¤§äº10kbçè¿ä¼ä½¿ç¨file-loader\n          options: {\n            limit: 10 * 1024, // 10 kb\n            esmodule: false\n          }\n        }\n      }\n    ]\n  },\n  plugins: [\n    new vueloaderplugin(),\n    new cleanwebpackplugin(),\n    new htmlwebpackplugin({\n      title: 'this is a title',\n      template : './public/index.html',\n      filename: 'index.html'\n    }),\n    new webpack.defineplugin({\n      base_url: json.stringify('./public/')\n    })\n  ]\n}\n\n\n\n# éç½®eslint\n\neslint --initæ¶æ¨¡åä¸è½½å¤±è´¥ï¼è¿éæå°±æå¨å®è£ä¸ä¸ï¼\n\ncnpm i -d eslint-plugin-vue eslint-config-standard eslint eslint-plugin-import eslint-plugin-node eslint-plugin-promise eslint-plugin-standard\n\n\nç¶åå¨webpack.common.jsä¸­éç½®ä¸ä¸å°±å¯ä»¥\n\n\t  {\n        test: /\\.vue$/,\n        use: [\n          'vue-loader',\n          'eslint-loader'\n        ]\n      },\n\n\nç¶ååpackage.jsonä¸­åéç½®ä¸ä¸\n\n\"scripts\": {\n\t\"lint\": \"eslint src/**/*.vue\"\n}\n",charsets:{cjk:!0}}],themeConfig:{logo:"",repo:"jinjingxuan",docsDir:"docs",editLinks:!1,editLinkText:"å¨ Github ä¸å¸®å©æä»¬ç¼è¾æ­¤é¡µ",nav:[{text:"é¦é¡µ",link:"/"},{text:"äº§åä¸æ°æ®",items:[{text:"AB test",link:"/product/abtest"}]},{text:"åºåé¾",items:[{text:"åå¤§å¬å¼è¯¾å­¦ä¹ ",link:"/blockchain/learn1"},{text:"å¸¸è§æ¦å¿µ",link:"/blockchain/base"},{text:"web3.jsåEthers.js",link:"/blockchain/js"},{text:"Ethers.js",link:"/blockchain/ethersjs"}]},{text:"node",items:[{text:"Nodeåºç¡",link:"/node/node-1"},{text:"ãæ·±å¥æµåºNodeJsã",link:"/node/book"},{text:"express",link:"/node/express"}]},{text:"ç®æ³",items:[{text:"æ°ç»",link:"/algorithm/array"},{text:"dfs/bfs",link:"/algorithm/dfs-bfs"},{text:"å¨æè§å",link:"/algorithm/dynamic"},{text:"è´ªå¿ç®æ³",link:"/algorithm/greedy"},{text:"é¾è¡¨",link:"/algorithm/list"},{text:"æåº",link:"/algorithm/sort"},{text:"æ ",link:"/algorithm/stack"},{text:"å­ç¬¦ä¸²",link:"/algorithm/string"},{text:"åæº¯",link:"/algorithm/trace"},{text:"æ ",link:"/algorithm/tree"},{text:"åæé",link:"/algorithm/two-pointer"},{text:"åºæ¯é¢",link:"/algorithm/scene"}]},{text:"css",items:[{text:"BFC",link:"/css/bfc"},{text:"çå­æ¨¡å",link:"/css/box"},{text:"flex",link:"/css/flex"},{text:"problem",link:"/css/problem"}]},{text:"JavaScript",items:[{text:"JavaScript",items:[{text:"æµ/æ·±æ·è´",link:"/javascript/clone"},{text:"é­å",link:"/javascript/closure"},{text:"æ°æ®ç±»å",link:"/javascript/datatype"},{text:"ES6",link:"/javascript/ES6"},{text:"ååä¸ååé¾",link:"/javascript/prototype"},{text:"ä½ç¨å",link:"/javascript/scope"},{text:"this",link:"/javascript/this"},{text:"å½æ°å¼ç¼ç¨",link:"/javascript/function"}]},{text:"TypeScript",items:[{text:"åºç¡",link:"/ts/ts-base"},{text:"è¿é¶",link:"/ts/ts-advance"},{text:"ãæ·±å¥çè§£TypeScriptã",link:"/ts/book"},{text:"TypeScriptä¸­çè£é¥°å¨",link:"/ts/decorator"}]},{text:"Threejs",items:[{text:"threeåºç¡",link:"/three/three1"},{text:"ä¹ä¹çæ¸¸æ",link:"/three/three2"},{text:"react three",link:"/three/three3"},{text:"ä¸äºå®è·µ",link:"/three/three4"}]}]},{text:"åç«¯æ¡æ¶",items:[{text:"Vue",items:[{text:"æºç è§£æ",link:"/vue/code-1"},{text:"ååºå¼åç",link:"/vue/responsive"},{text:"vue3",link:"/vue/vue3.0-1"},{text:"vuex",link:"/vue/vuex"}]},{text:"React",items:[{text:"reactåºç¡",link:"/react/react-1"},{text:"react hooks",link:"/react/react-hooks"},{text:"redux",link:"/react/redux"},{text:"React Fiber",link:"/react/fiber"},{text:"React çæ¬",link:"/react/time"},{text:"React Diff",link:"/react/diff"}]},{text:"San",items:[{text:"eslint-plugin-san",link:"/san/eslint-plugin-san"},{text:"san-loader",link:"/san/san-loader"}]},{text:"å¾®åç«¯",items:[{text:"å¾®åç«¯",link:"/micro/micro"}]}]},{text:"Webpack",items:[{text:"webpackåºç¡",link:"/webpack/webpack1"},{text:"hmråç",link:"/webpack/hmr"},{text:"webpackæ¨¡åå",link:"/module/webpack"}]},{text:"åç«¯å·¥ç¨å",items:[{text:"yeoman",link:"/engineering/engineering"},{text:"eslint",link:"/engineering/eslint"},{text:"grunt",link:"/engineering/grunt"},{text:"gulp",link:"/engineering/gulp"},{text:"rollup",link:"/engineering/rollup"},{text:"cliå·¥å·",items:[{text:"ç¯å¢åé",link:"/engineering/env"},{text:"å½ä»¤è¡äº¤äºå·¥å·",link:"/engineering/commander"}]},{text:"ååæµè¯",link:"/engineering/test"}]},{text:"é¢è¯é¢",items:[{text:"é¢è¯é¢æ´ç",link:"/interview/interview"},{text:"ç®æ³",link:"/interview/algorithm"},{text:"æåä»£ç ",link:"/interview/code-1"},{text:"é¢è¯é¢ç²¾é",link:"/interview/interview-1"},{text:"æºåé¢",link:"/interview/iq"}]},{text:"åç«¯ç³»å",items:[{text:"å¼åæºç¸å³",link:"/re/development"},{text:"mongodb",link:"/re/mongodb"},{text:"devops",link:"/re/devops"},{text:"nginx",link:"/re/nginx"},{text:"shell",link:"/re/shell"},{text:"docker",link:"/re/docker"}]},{text:"åç«¯ç³»å",items:[{text:"git",link:"/git/git"},{text:"ssr",link:"/ssr/ssr"},{text:"è®¡ç®æºåºç¡",link:"/computer/computer"},{text:"æ­£åè¡¨è¾¾å¼",link:"/regular/regular"},{text:"åç«¯è·¯ç±",link:"/route/route"},{text:"åç«¯å®å¨",link:"/safe/safe"},{text:"æ¨¡åå",link:"/module/module"},{text:"ä»£ç è§è",link:"/code-style/code-style"},{text:"å¸¸ç¨å·¥å·",link:"/tool/tool"},{text:"æµè§å¨",items:[{text:"GCç®æ³",link:"/chrome/gc"},{text:"æµè§å¨æ¸²æ",link:"/chrome/render"},{text:"è·¨å",link:"/chrome/cross"},{text:"Chromeæ§è½åæ",link:"/chrome/performance"}]},{text:"ç§»å¨ç«¯",items:[{text:"è·¨ç«¯ææ¯",link:"/mobile/cross"},{text:"ç§»å¨ç«¯éé",link:"/mobile/adaptation"},{text:"ç§»å¨ç«¯h5å¼å",link:"/mobile/h5"},{text:"é¿åè¡¨ä¼å",link:"/mobile/long-list"},{text:"galacean",link:"/mobile/galacean"},{text:"galacean 3d",link:"/mobile/gc-3d"}]},{text:"è®¾è®¡æ¨¡å¼",items:[{text:"è®¾è®¡æ¨¡å¼ç®ä»",link:"/design-pattern/design-pattern"},{text:"é¢åå¯¹è±¡ç¼ç¨",link:"/design-pattern/object"}]},{text:"èæDOM",items:[{text:"Virtual DOM",link:"/virtual-dom/virtualdom"},{text:"å®ä¾",link:"/virtual-dom/example"}]},{text:"æ¸²æç¸å³",items:[{text:"canvas å svg",link:"/webgl/canvas"}]}]},{text:"å·¥å·ç³»å",items:[{text:"å¸¸ç¨å·¥å·åæä»¶",link:"/tool/tool"},{text:"ä¾èµç®¡çå·¥å·",link:"/tool/npm"},{text:"ç¸æºåºç¡",link:"/tool/camera"},{text:"performance",link:"/tool/performance"},{text:"ç¬¬ä¸æ¹å",items:[{text:"postcss",link:"/tool/postcss"},{text:"babel",link:"/tool/babel"},{text:"htmlparser2",link:"/tool/htmlparser2"},{text:"yaml",link:"/tool/yaml"}]}]}],lastUpdated:"æåæ´æ°æ¶é´",sidebarDepth:3,sidebar:{"/css/":["/css/bfc","/css/box","/css/flex","/css/layout","/css/problem"],"/javascript":["/javascript/asynchronous","/javascript/clone","/javascript/closure","/javascript/datatype","/javascript/date","/javascript/ES6","/javascript/number","/javascript/parse-order","/javascript/prototype","/javascript/scope","/javascript/stringify","/javascript/this","/javascript/function","/javascript/log","/javascript/ES2017-2022"],"/vue":[{title:"Vueæºç è§£æ",children:["/vue/code-1","/vue/code-2","/vue/code-3"]},{title:"Vue3",children:["/vue/vue3.0-1","/vue/vue3.0-2","/vue/vue3.0-3"]},"/vue/vuex","/vue/communication","/vue/responsive","/vue/template"],"/san":["/san/san","/san/eslint-plugin-san","/san/composition","/san/san-loader"],"/react":["/react/react-1","/react/react-hooks","/react/redux","/react/fiber","/react/time","/react/diff"],"/micro":["/micro/micro"],"/virtual-dom":["/virtual-dom/virtualdom","/virtual-dom/example"],"/webgl":["/webgl/canvas"],"/webpack":[{title:"webpackåºç¡",collapsable:!0,children:["/webpack/webpack1","/webpack/webpack2","/webpack/webpack3","/webpack/webpack4","/webpack/webpack5"]},"/webpack/config","/webpack/hmr"],"/ts":["/ts/ts-base","/ts/ts-advance","/ts/ts-type","/ts/book","/ts/decorator"],"/three":["/three/three1","/three/three2","/three/three3","/three/three4"],"/ssr":["/ssr/ssr"],"/node":[{title:"Nodeåºç¡",collapsable:!0,children:["/node/node-1","/node/node-2","/node/node-3","/node/node-4","/node/node-5","/node/node-6"]},"/node/book","/node/express"],"/regular":["/regular/regular"],"/mobile":["/mobile/cross","/mobile/adaptation","/mobile/h5","/mobile/long-list","/mobile/galacean","/mobile/gc-3d"],"/algorithm/":["/algorithm/array","/algorithm/dfs-bfs","/algorithm/dynamic","/algorithm/greedy","/algorithm/list","/algorithm/scene","/algorithm/sort","/algorithm/stack","/algorithm/string","/algorithm/trace","/algorithm/tree","/algorithm/two-pointer"],"/design-pattern":["/design-pattern/design-pattern","/design-pattern/object"],"/route":["/route/route"],"/engineering":["/engineering/engineering","/engineering/eslint","/engineering/grunt","/engineering/gulp","/engineering/rollup","/engineering/env","/engineering/commander","/engineering/test"],"/safe":["/safe/safe"],"/module":["/module/module","/module/webpack"],"/interview":[{title:"é¢è¯é¢æ´ç",collapsable:!0,children:["/interview/interview"]},{title:"æåä»£ç ",collapsable:!0,children:["/interview/code-1","/interview/code-2"]},{title:"é¢è¯é¢éå",collapsable:!0,children:["/interview/interview-1","/interview/interview-2","/interview/interview-3","/interview/interview-4","/interview/interview-5","/interview/interview-6","/interview/interview-7","/interview/interview-8","/interview/interview-9","/interview/interview-10","/interview/interview-11"]},{title:"å¤ä¼",collapsable:!0,children:["/interview/foreign-company","/interview/english"]},"/interview/algorithm","/interview/iq"],"/chrome":["/chrome/gc","/chrome/render","/chrome/cross","/chrome/performance"],"/computer":["/computer/computer"],"/git":["/git/git"],"/code-style":["/code-style/code-style"],"/tool":["/tool/tool","/tool/npm","/tool/camera","/tool/performance",{title:"ç¬¬ä¸æ¹npmå",collapsable:!0,children:["/tool/babel","/tool/postcss","/tool/htmlparser2","/tool/yaml"]}],"/read":["/read/read"],"/blockchain":["/blockchain/info","/blockchain/learn1","/blockchain/learn2","/blockchain/learn3","/blockchain/learn4","/blockchain/learn5","/blockchain/learn6","/blockchain/learn7","/blockchain/learn8","/blockchain/base","/blockchain/js","/blockchain/ethersjs"],"/re":["/re/development","/re/mongodb","/re/devops","/re/nginx","/re/shell","/re/docker"],"/product":["/product/abtest"],"/":["/time/code"]},nextLinks:!0,prevLinks:!0}};t(234);Gt.component("Badge",()=>Promise.all([t.e(0),t.e(4)]).then(t.bind(null,540))),Gt.component("CodeBlock",()=>Promise.all([t.e(0),t.e(5)]).then(t.bind(null,536))),Gt.component("CodeGroup",()=>Promise.all([t.e(0),t.e(6)]).then(t.bind(null,537)));t(235);var Ai=[{},({Vue:n})=>{n.mixin({computed:{$dataBlock(){return this.$options.__data__block__}}})},{},{}],Mi=[];class Oi extends class{constructor(){this.store=new Gt({data:{state:{}}})}$get(n){return this.store.state[n]}$set(n,e){Gt.set(this.store.state,n,e)}$emit(...n){this.store.$emit(...n)}$on(...n){this.store.$on(...n)}}{}Object.assign(Oi.prototype,{getPageAsyncComponent:ii,getLayoutAsyncComponent:li,getAsyncComponent:ci,getVueComponent:ui});var Ri={install(n){const e=new Oi;n.$vuepress=e,n.prototype.$vuepress=e}};function Di(n,e){const t=e.toLowerCase();return n.options.routes.some(n=>n.path.toLowerCase()===t)}var qi={props:{pageKey:String,slotKey:{type:String,default:"default"}},render(n){const e=this.pageKey||this.$parent.$page.key;return pi("pageKey",e),Gt.component(e)||Gt.component(e,ii(e)),Gt.component(e)?n(e):n("")}},Li={functional:!0,props:{slotKey:String,required:!0},render:(n,{props:e,slots:t})=>n("div",{class:["content__"+e.slotKey]},t()[e.slotKey])},Ni={computed:{openInNewWindowTitle(){return this.$themeLocaleConfig.openNewWindowText||"(opens new window)"}}},Bi=(t(236),t(237),Object(Pi.a)(Ni,(function(){var n=this._self._c;return n("span",[n("svg",{staticClass:"icon outbound",attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"}},[n("path",{attrs:{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}}),this._v(" "),n("polygon",{attrs:{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}})]),this._v(" "),n("span",{staticClass:"sr-only"},[this._v(this._s(this.openInNewWindowTitle))])])}),[],!1,null,null,null).exports),$i={functional:!0,render(n,{parent:e,children:t}){if(e._isMounted)return t;e.$once("hook:mounted",()=>{e.$forceUpdate()})}};Gt.config.productionTip=!1,Gt.use(Hs),Gt.use(Ri),Gt.mixin(function(n,e,t=Gt){!function(n){n.locales&&Object.keys(n.locales).forEach(e=>{n.locales[e].path=e});Object.freeze(n)}(e),t.$vuepress.$set("siteData",e);const r=new(n(t.$vuepress.$get("siteData"))),o=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(r)),a={};return Object.keys(o).reduce((n,e)=>(e.startsWith("$")&&(n[e]=o[e].get),n),a),{computed:a}}(n=>class{setPage(n){this.__page=n}get $site(){return n}get $themeConfig(){return this.$site.themeConfig}get $frontmatter(){return this.$page.frontmatter}get $localeConfig(){const{locales:n={}}=this.$site;let e,t;for(const r in n)"/"===r?t=n[r]:0===this.$page.path.indexOf(r)&&(e=n[r]);return e||t||{}}get $siteTitle(){return this.$localeConfig.title||this.$site.title||""}get $canonicalUrl(){const{canonicalUrl:n}=this.$page.frontmatter;return"string"==typeof n&&n}get $title(){const n=this.$page,{metaTitle:e}=this.$page.frontmatter;if("string"==typeof e)return e;const t=this.$siteTitle,r=n.frontmatter.home?null:n.frontmatter.title||n.title;return t?r?r+" | "+t:t:r||"VuePress"}get $description(){const n=function(n){if(n){const e=n.filter(n=>"description"===n.name)[0];if(e)return e.content}}(this.$page.frontmatter.meta);return n||(this.$page.frontmatter.description||this.$localeConfig.description||this.$site.description||"")}get $lang(){return this.$page.frontmatter.lang||this.$localeConfig.lang||"en-US"}get $localePath(){return this.$localeConfig.path||"/"}get $themeLocaleConfig(){return(this.$site.themeConfig.locales||{})[this.$localePath]||{}}get $page(){return this.__page?this.__page:function(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(r.path.toLowerCase()===e.toLowerCase())return r}return{path:"",frontmatter:{}}}(this.$site.pages,this.$route.path)}},Ei)),Gt.component("Content",qi),Gt.component("ContentSlotsDistributor",Li),Gt.component("OutboundLink",Bi),Gt.component("ClientOnly",$i),Gt.component("Layout",li("Layout")),Gt.component("NotFound",li("NotFound")),Gt.prototype.$withBase=function(n){const e=this.$site.base;return"/"===n.charAt(0)?e+n.slice(1):n},window.__VUEPRESS__={version:"1.9.10",hash:"f8fd897"},async function(n){const e="undefined"!=typeof window&&window.__VUEPRESS_ROUTER_BASE__?window.__VUEPRESS_ROUTER_BASE__:Ei.routerBase||Ei.base,t=new Hs({base:e,mode:"history",fallback:!1,routes:Ci,scrollBehavior:(n,e,t)=>t||(n.hash?!Gt.$vuepress.$get("disableScrollBehavior")&&{selector:decodeURIComponent(n.hash)}:{x:0,y:0})});!function(n){n.beforeEach((e,t,r)=>{if(Di(n,e.path))r();else if(/(\/|\.html)$/.test(e.path))if(/\/$/.test(e.path)){const t=e.path.replace(/\/$/,"")+".html";Di(n,t)?r(t):r()}else r();else{const t=e.path+"/",o=e.path+".html";Di(n,o)?r(o):Di(n,t)?r(t):r()}})}(t);const r={};try{await Promise.all(Ai.filter(n=>"function"==typeof n).map(e=>e({Vue:Gt,options:r,router:t,siteData:Ei,isServer:n})))}catch(n){console.error(n)}return{app:new Gt(Object.assign(r,{router:t,render:n=>n("div",{attrs:{id:"app"}},[n("RouterView",{ref:"layout"}),n("div",{class:"global-ui"},Mi.map(e=>n(e)))])})),router:t}}(!1).then(({app:n,router:e})=>{e.onReady(()=>{n.$mount("#app")})})}]);